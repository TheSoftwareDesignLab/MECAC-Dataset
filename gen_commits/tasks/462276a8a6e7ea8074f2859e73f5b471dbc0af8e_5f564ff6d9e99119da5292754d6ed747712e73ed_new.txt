refactor: Centralize widget dark theme preference logic

Introduces `Preferences.useDarkWidgetTheme(int widgetId)` to consolidate the logic for retrieving the dark theme preference for widgets. This method first checks the widget-specific setting and falls back to the general `p_use_dark_theme_widget` preference if the specific setting is not configured. All widget components now use this centralized method.