diff --git a/app/src/main/java/io/homeassistant/companion/android/PresenterComponent.kt b/app/src/main/java/io/homeassistant/companion/android/PresenterComponent.kt
index 31cfe54f5cd..be989e84e65 100644
--- a/app/src/main/java/io/homeassistant/companion/android/PresenterComponent.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/PresenterComponent.kt
@@ -4,6 +4,7 @@ import dagger.Component
 import io.homeassistant.companion.android.common.dagger.AppComponent
 import io.homeassistant.companion.android.launch.LaunchActivity
 import io.homeassistant.companion.android.onboarding.authentication.AuthenticationFragment
+import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationFragment
 import io.homeassistant.companion.android.onboarding.manual.ManualSetupFragment
 import io.homeassistant.companion.android.webview.WebViewActivity
 
@@ -16,6 +17,8 @@ interface PresenterComponent {
 
     fun inject(fragment: ManualSetupFragment)
 
+    fun inject(fragment: MobileAppIntegrationFragment)
+
     fun inject(activity: WebViewActivity)
 
 }
\ No newline at end of file
diff --git a/app/src/main/java/io/homeassistant/companion/android/PresenterModule.kt b/app/src/main/java/io/homeassistant/companion/android/PresenterModule.kt
index d59d95e6c3f..88c81127d62 100644
--- a/app/src/main/java/io/homeassistant/companion/android/PresenterModule.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/PresenterModule.kt
@@ -9,6 +9,9 @@ import io.homeassistant.companion.android.launch.LaunchView
 import io.homeassistant.companion.android.onboarding.authentication.AuthenticationPresenter
 import io.homeassistant.companion.android.onboarding.authentication.AuthenticationPresenterImpl
 import io.homeassistant.companion.android.onboarding.authentication.AuthenticationView
+import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationPresenter
+import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationPresenterImpl
+import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationView
 import io.homeassistant.companion.android.onboarding.manual.ManualSetupPresenter
 import io.homeassistant.companion.android.onboarding.manual.ManualSetupPresenterImpl
 import io.homeassistant.companion.android.onboarding.manual.ManualSetupView
@@ -22,6 +25,7 @@ class PresenterModule {
     private lateinit var launchView: LaunchView
     private lateinit var authenticationView: AuthenticationView
     private lateinit var manualSetupView: ManualSetupView
+    private lateinit var mobileAppIntegrationView: MobileAppIntegrationView
     private lateinit var webView: WebView
 
     constructor(launchView: LaunchView) {
@@ -36,6 +40,10 @@ class PresenterModule {
         this.manualSetupView = manualSetupView
     }
 
+    constructor(mobileAppIntegrationView: MobileAppIntegrationView) {
+        this.mobileAppIntegrationView = mobileAppIntegrationView
+    }
+
     constructor(webView: WebView) {
         this.webView = webView
     }
@@ -49,6 +57,9 @@ class PresenterModule {
     @Provides
     fun provideManualSetupView() = manualSetupView
 
+    @Provides
+    fun provideMobileAppIntegrationView() = mobileAppIntegrationView
+
     @Provides
     fun provideWebView() = webView
 
@@ -64,6 +75,9 @@ class PresenterModule {
         @Binds
         fun bindManualSetupPresenter(presenter: ManualSetupPresenterImpl): ManualSetupPresenter
 
+        @Binds
+        fun bindMobileAppPresenter(presenter: MobileAppIntegrationPresenterImpl): MobileAppIntegrationPresenter
+
         @Binds
         fun bindWebViewPresenterImpl(presenter: WebViewPresenterImpl): WebViewPresenter
 
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingActivity.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingActivity.kt
index a0dd3e1962b..538604e3b04 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingActivity.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingActivity.kt
@@ -9,12 +9,14 @@ import io.homeassistant.companion.android.onboarding.authentication.Authenticati
 import io.homeassistant.companion.android.onboarding.authentication.AuthenticationListener
 import io.homeassistant.companion.android.onboarding.discovery.DiscoveryFragment
 import io.homeassistant.companion.android.onboarding.discovery.DiscoveryListener
+import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationFragment
+import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationListener
 import io.homeassistant.companion.android.onboarding.manual.ManualSetupFragment
 import io.homeassistant.companion.android.onboarding.manual.ManualSetupListener
 import io.homeassistant.companion.android.webview.WebViewActivity
 
 
-class OnboardingActivity : AppCompatActivity(), DiscoveryListener, ManualSetupListener, AuthenticationListener {
+class OnboardingActivity : AppCompatActivity(), DiscoveryListener, ManualSetupListener, AuthenticationListener, MobileAppIntegrationListener {
 
     companion object {
         private const val TAG = "OnboardingActivity"
@@ -63,6 +65,21 @@ class OnboardingActivity : AppCompatActivity(), DiscoveryListener, ManualSetupLi
     }
 
     override fun onAuthenticationSuccess() {
+        supportFragmentManager
+            .beginTransaction()
+            .replace(R.id.content, MobileAppIntegrationFragment.newInstance())
+            .commit()
+    }
+
+    override fun onIntegrationRegistrationComplete() {
+        startWebView()
+    }
+
+    override fun onIntegrationRegistrationSkipped() {
+        startWebView()
+    }
+
+    private fun startWebView(){
         startActivity(WebViewActivity.newInstance(this))
         finish()
     }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationFragment.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationFragment.kt
new file mode 100644
index 00000000000..a0caa4a6c07
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationFragment.kt
@@ -0,0 +1,87 @@
+package io.homeassistant.companion.android.onboarding.integration
+
+import android.os.Bundle
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import android.widget.Button
+import android.widget.ViewFlipper
+import androidx.fragment.app.Fragment
+import io.homeassistant.companion.android.DaggerPresenterComponent
+import io.homeassistant.companion.android.PresenterModule
+import io.homeassistant.companion.android.R
+import io.homeassistant.companion.android.common.dagger.GraphComponentAccessor
+import javax.inject.Inject
+
+
+class MobileAppIntegrationFragment : Fragment(), MobileAppIntegrationView {
+
+    companion object {
+        private const val LOADING_VIEW = 0
+        private const val ERROR_VIEW = 1
+
+        fun newInstance(): MobileAppIntegrationFragment {
+            return MobileAppIntegrationFragment()
+        }
+    }
+
+    @Inject
+    lateinit var presenter: MobileAppIntegrationPresenter
+
+    private lateinit var viewFlipper: ViewFlipper
+
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+
+        DaggerPresenterComponent
+            .builder()
+            .appComponent((activity?.application as GraphComponentAccessor).appComponent)
+            .presenterModule(PresenterModule(this))
+            .build()
+            .inject(this)
+    }
+
+    override fun onCreateView(
+        inflater: LayoutInflater,
+        container: ViewGroup?,
+        savedInstanceState: Bundle?
+    ): View? {
+        return inflater.inflate(R.layout.fragment_mobile_app_integration, container, false).apply {
+            viewFlipper = this.findViewById(R.id.view_flipper)
+            findViewById<Button>(R.id.skip).setOnClickListener {
+                presenter.onSkip()
+            }
+            findViewById<Button>(R.id.retry).setOnClickListener {
+                presenter.onRegistrationAttempt()
+            }
+        }
+    }
+
+    override fun onResume() {
+        super.onResume()
+        presenter.onRegistrationAttempt()
+    }
+
+    override fun deviceRegistered() {
+        (activity as MobileAppIntegrationListener).onIntegrationRegistrationComplete()
+    }
+
+    override fun registrationSkipped() {
+        (activity as MobileAppIntegrationListener).onIntegrationRegistrationSkipped()
+    }
+
+    override fun showError() {
+        viewFlipper.displayedChild = ERROR_VIEW
+    }
+
+    override fun showLoading() {
+        viewFlipper.displayedChild = LOADING_VIEW
+    }
+
+    override fun onDestroy() {
+        presenter.onFinish()
+        super.onDestroy()
+    }
+
+}
+
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationListener.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationListener.kt
new file mode 100644
index 00000000000..f83a2ba0595
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationListener.kt
@@ -0,0 +1,9 @@
+package io.homeassistant.companion.android.onboarding.integration
+
+interface MobileAppIntegrationListener {
+
+    fun onIntegrationRegistrationComplete()
+
+    fun onIntegrationRegistrationSkipped()
+
+}
\ No newline at end of file
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenter.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenter.kt
new file mode 100644
index 00000000000..e4e604d6f6a
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenter.kt
@@ -0,0 +1,7 @@
+package io.homeassistant.companion.android.onboarding.integration
+
+interface MobileAppIntegrationPresenter {
+    fun onRegistrationAttempt()
+    fun onSkip()
+    fun onFinish()
+}
\ No newline at end of file
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt
new file mode 100644
index 00000000000..028156cd0df
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt
@@ -0,0 +1,56 @@
+package io.homeassistant.companion.android.onboarding.integration
+
+import android.os.Build
+import android.util.Log
+import io.homeassistant.companion.android.BuildConfig
+import io.homeassistant.companion.android.domain.integration.DeviceRegistration
+import io.homeassistant.companion.android.domain.integration.IntegrationUseCase
+import kotlinx.coroutines.*
+import javax.inject.Inject
+
+class MobileAppIntegrationPresenterImpl @Inject constructor(
+    private val view: MobileAppIntegrationView,
+    private val integrationUseCase: IntegrationUseCase
+) : MobileAppIntegrationPresenter {
+
+    companion object {
+        private const val TAG = "IntegrationPresenter"
+    }
+
+    private val mainScope: CoroutineScope = CoroutineScope(Dispatchers.Main + Job())
+
+    override fun onRegistrationAttempt() {
+
+        view.showLoading()
+
+        mainScope.launch {
+            val deviceRegistration = DeviceRegistration(
+                BuildConfig.APPLICATION_ID,
+                "Home Assistant",
+                "${BuildConfig.VERSION_NAME} (${BuildConfig.VERSION_CODE})",
+                Build.MODEL ?: "UNKNOWN",
+                Build.MANUFACTURER ?: "UNKNOWN",
+                Build.MODEL ?: "UNKNOWN",
+                "Android",
+                Build.VERSION.SDK_INT.toString(),
+                false,
+                null
+            )
+            try {
+                integrationUseCase.registerDevice(deviceRegistration)
+                view.deviceRegistered()
+            } catch (e: Exception) {
+                Log.e(TAG, "Error with registering application", e)
+                view.showError()
+            }
+        }
+    }
+
+    override fun onSkip() {
+        view.registrationSkipped()
+    }
+
+    override fun onFinish() {
+        mainScope.cancel()
+    }
+}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationView.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationView.kt
new file mode 100644
index 00000000000..61fe17db333
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationView.kt
@@ -0,0 +1,13 @@
+package io.homeassistant.companion.android.onboarding.integration
+
+interface MobileAppIntegrationView {
+
+    fun deviceRegistered()
+
+    fun registrationSkipped()
+
+    fun showLoading()
+
+    fun showError()
+
+}
diff --git a/app/src/main/res/layout/fragment_mobile_app_integration.xml b/app/src/main/res/layout/fragment_mobile_app_integration.xml
new file mode 100644
index 00000000000..0f375f60ffc
--- /dev/null
+++ b/app/src/main/res/layout/fragment_mobile_app_integration.xml
@@ -0,0 +1,80 @@
+<?xml version="1.0" encoding="utf-8"?>
+<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    android:id="@+id/view_flipper"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent">
+
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:gravity="center"
+        android:orientation="vertical">
+
+        <androidx.appcompat.widget.AppCompatTextView
+            style="@style/TextAppearance.HomeAssistant.Headline"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:text="@string/attempting_registration"
+            android:textAlignment="center" />
+
+        <androidx.core.widget.ContentLoadingProgressBar
+            style="?android:attr/progressBarStyleLarge"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="100dp" />
+
+    </LinearLayout>
+
+    <androidx.constraintlayout.widget.ConstraintLayout
+        android:layout_width="match_parent"
+        android:layout_height="match_parent">
+
+        <androidx.appcompat.widget.AppCompatTextView
+            android:id="@+id/title"
+            style="@style/TextAppearance.HomeAssistant.Title"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:text="@string/unable_to_register"
+            android:textAlignment="center"
+            app:layout_constraintBottom_toBottomOf="parent"
+            app:layout_constraintLeft_toLeftOf="parent"
+            app:layout_constraintRight_toRightOf="parent"
+            app:layout_constraintTop_toTopOf="parent"
+            app:layout_constraintVertical_bias="0.35" />
+
+        <androidx.appcompat.widget.AppCompatTextView
+            android:id="@+id/subtitle"
+            style="@style/TextAppearance.HomeAssistant.Medium"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="25dp"
+            android:text="@string/error_with_registration"
+            android:textAlignment="center"
+            app:layout_constraintLeft_toLeftOf="parent"
+            app:layout_constraintRight_toRightOf="parent"
+            app:layout_constraintTop_toBottomOf="@+id/title" />
+
+        <androidx.appcompat.widget.AppCompatButton
+            android:id="@+id/retry"
+            style="@style/Widget.HomeAssistant.Button.Colored"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="40dp"
+            android:text="@string/retry"
+            app:layout_constraintLeft_toLeftOf="parent"
+            app:layout_constraintRight_toRightOf="parent"
+            app:layout_constraintTop_toBottomOf="@+id/subtitle" />
+
+        <androidx.appcompat.widget.AppCompatButton
+            android:id="@+id/skip"
+            style="@style/Widget.HomeAssistant.Button.Borderless"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:text="@string/skip"
+            app:layout_constraintBottom_toBottomOf="parent"
+            app:layout_constraintLeft_toLeftOf="parent"
+            app:layout_constraintRight_toRightOf="parent" />
+
+    </androidx.constraintlayout.widget.ConstraintLayout>
+</ViewFlipper>
\ No newline at end of file
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
index be6a7838b70..e9f9a2111aa 100644
--- a/app/src/main/res/values/strings.xml
+++ b/app/src/main/res/values/strings.xml
@@ -7,4 +7,11 @@
     <string name="manual_setup">enter address manually</string>
     <string name="input_url">Home Assistant URL</string>
     <string name="input_url_hint">URL</string>
+    <string name="status_of_mobile_app_integration">Status of mobile app integration:</string>
+    <string name="checking_with_home_assistant">Checking with Home Assistant</string>
+    <string name="skip">Skip</string>
+    <string name="retry">Retry</string>
+    <string name="attempting_registration">Attempting to register applicationâ€¦</string>
+    <string name="unable_to_register">Unable to Register Application</string>
+    <string name="error_with_registration">Please check to ensure you have the mobile_app \nintegration enabled on your home assistant instance.</string>
 </resources>
diff --git a/app/src/test/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImplSpec.kt b/app/src/test/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImplSpec.kt
new file mode 100644
index 00000000000..622582c721c
--- /dev/null
+++ b/app/src/test/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImplSpec.kt
@@ -0,0 +1,89 @@
+package io.homeassistant.companion.android.onboarding.integration
+
+import android.os.Build
+import io.homeassistant.companion.android.BuildConfig
+import io.homeassistant.companion.android.domain.integration.DeviceRegistration
+import io.homeassistant.companion.android.domain.integration.IntegrationUseCase
+import io.mockk.*
+import kotlinx.coroutines.Dispatchers
+import kotlinx.coroutines.test.resetMain
+import kotlinx.coroutines.test.setMain
+import org.spekframework.spek2.Spek
+import org.spekframework.spek2.style.specification.describe
+
+
+object MobileAppIntegrationPresenterImplSpec : Spek({
+
+    beforeEachTest {
+        Dispatchers.setMain(Dispatchers.Unconfined)
+    }
+
+    afterEachTest {
+        Dispatchers.resetMain()
+    }
+
+    describe("presenter") {
+        val integrationUseCase by memoized { mockk<IntegrationUseCase>(relaxUnitFun = true) }
+        val view by memoized { mockk<MobileAppIntegrationView>(relaxUnitFun = true) }
+        val presenter by memoized { MobileAppIntegrationPresenterImpl(view, integrationUseCase) }
+
+        describe("on skip") {
+            beforeEachTest {
+                presenter.onSkip()
+            }
+
+            it("should continue") {
+                coVerifyAll { view.registrationSkipped() }
+            }
+        }
+
+        describe("on registration success") {
+            val deviceRegistration = DeviceRegistration(
+                BuildConfig.APPLICATION_ID,
+                "Home Assistant",
+                "${BuildConfig.VERSION_NAME} (${BuildConfig.VERSION_CODE})",
+                Build.MODEL ?: "UNKNOWN",
+                Build.MANUFACTURER ?: "UNKNOWN",
+                Build.MODEL ?: "UNKNOWN",
+                "Android",
+                Build.VERSION.SDK_INT.toString(),
+                false,
+                null
+            )
+            beforeEachTest {
+                coEvery { integrationUseCase.registerDevice(deviceRegistration) } just runs
+            }
+            describe("register") {
+                beforeEachTest {
+                    presenter.onRegistrationAttempt()
+                }
+                it("should register successfully") {
+                    coVerifyAll {
+                        view.showLoading()
+                        integrationUseCase.registerDevice(deviceRegistration)
+                        view.deviceRegistered()
+                    }
+                }
+            }
+        }
+
+        describe("on registration failed") {
+            beforeEachTest {
+                coEvery { integrationUseCase.registerDevice(any()) } throws Exception()
+            }
+            describe("register"){
+                beforeEachTest {
+                    presenter.onRegistrationAttempt()
+                }
+                it("should fail") {
+                    coVerifyAll {
+                        view.showLoading()
+                        integrationUseCase.registerDevice(any())
+                        view.showError()
+                    }
+                    coVerify(inverse = true) { view.deviceRegistered() }
+                }
+            }
+        }
+    }
+})
\ No newline at end of file
diff --git a/app/src/test/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenterImplSpec.kt b/app/src/test/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenterImplSpec.kt
index dbb7cf7cc67..1408c093a5b 100644
--- a/app/src/test/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenterImplSpec.kt
+++ b/app/src/test/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenterImplSpec.kt
@@ -6,7 +6,7 @@ import io.mockk.coVerifyAll
 import io.mockk.mockk
 import io.mockk.verify
 import kotlinx.coroutines.Dispatchers
-import kotlinx.coroutines.newSingleThreadContext
+import kotlinx.coroutines.ExperimentalCoroutinesApi
 import kotlinx.coroutines.test.resetMain
 import kotlinx.coroutines.test.setMain
 import org.spekframework.spek2.Spek
diff --git a/common/src/main/java/io/homeassistant/companion/android/common/dagger/AppComponent.kt b/common/src/main/java/io/homeassistant/companion/android/common/dagger/AppComponent.kt
index 6bdf81cbe44..d13b4248ecb 100644
--- a/common/src/main/java/io/homeassistant/companion/android/common/dagger/AppComponent.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/common/dagger/AppComponent.kt
@@ -2,10 +2,13 @@ package io.homeassistant.companion.android.common.dagger
 
 import dagger.Component
 import io.homeassistant.companion.android.domain.authentication.AuthenticationUseCase
+import io.homeassistant.companion.android.domain.integration.IntegrationUseCase
 
 @Component(dependencies = [DomainComponent::class])
 interface AppComponent {
 
     fun authenticationUseCase(): AuthenticationUseCase
 
+    fun integrationUseCase(): IntegrationUseCase
+
 }
\ No newline at end of file
diff --git a/common/src/main/java/io/homeassistant/companion/android/common/dagger/DataComponent.kt b/common/src/main/java/io/homeassistant/companion/android/common/dagger/DataComponent.kt
index 6d4d79b291b..93ebfb8fc3e 100644
--- a/common/src/main/java/io/homeassistant/companion/android/common/dagger/DataComponent.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/common/dagger/DataComponent.kt
@@ -2,10 +2,13 @@ package io.homeassistant.companion.android.common.dagger
 
 import dagger.Component
 import io.homeassistant.companion.android.domain.authentication.AuthenticationRepository
+import io.homeassistant.companion.android.domain.integration.IntegrationRepository
 
 @Component(modules = [DataModule::class])
 interface DataComponent {
 
     fun authenticationRepository(): AuthenticationRepository
 
+    fun integrationRepository(): IntegrationRepository
+
 }
\ No newline at end of file
diff --git a/common/src/main/java/io/homeassistant/companion/android/common/dagger/DataModule.kt b/common/src/main/java/io/homeassistant/companion/android/common/dagger/DataModule.kt
index d29f0616bbe..bce59a62524 100644
--- a/common/src/main/java/io/homeassistant/companion/android/common/dagger/DataModule.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/common/dagger/DataModule.kt
@@ -7,12 +7,17 @@ import io.homeassistant.companion.android.data.HomeAssistantRetrofit
 import io.homeassistant.companion.android.data.LocalStorage
 import io.homeassistant.companion.android.data.authentication.AuthenticationRepositoryImpl
 import io.homeassistant.companion.android.data.authentication.AuthenticationService
+import io.homeassistant.companion.android.data.integration.IntegrationRepositoryImpl
+import io.homeassistant.companion.android.data.integration.IntegrationService
 import io.homeassistant.companion.android.domain.authentication.AuthenticationRepository
+import io.homeassistant.companion.android.domain.integration.IntegrationRepository
+import javax.inject.Named
 
 @Module(includes = [DataModule.Declaration::class])
 class DataModule(
     private val url: String,
-    private val localStorage: LocalStorage
+    private val sessionLocalStorage: LocalStorage,
+    private val integrationLocalStorage: LocalStorage
 ) {
 
     @Provides
@@ -22,7 +27,16 @@ class DataModule(
     fun provideAuthenticationService(homeAssistantRetrofit: HomeAssistantRetrofit) = homeAssistantRetrofit.retrofit.create(AuthenticationService::class.java)
 
     @Provides
-    fun provideLocalStorage() = localStorage
+    fun providesIntegrationService(homeAssistantRetrofit: HomeAssistantRetrofit) = homeAssistantRetrofit.retrofit.create(IntegrationService::class.java)
+
+    @Provides
+    @Named("session")
+    fun provideSessionLocalStorage() = sessionLocalStorage
+
+    @Provides
+    @Named("integration")
+    fun provideIntegrationLocalStorage() = integrationLocalStorage
+
 
 
     @Module
@@ -31,6 +45,9 @@ class DataModule(
         @Binds
         fun bindAuthenticationRepositoryImpl(repository: AuthenticationRepositoryImpl): AuthenticationRepository
 
+        @Binds
+        fun bindIntegrationService(repository: IntegrationRepositoryImpl): IntegrationRepository
+
     }
 
 }
diff --git a/common/src/main/java/io/homeassistant/companion/android/common/dagger/DomainComponent.kt b/common/src/main/java/io/homeassistant/companion/android/common/dagger/DomainComponent.kt
index 3933b0338a8..081b9ea84c3 100644
--- a/common/src/main/java/io/homeassistant/companion/android/common/dagger/DomainComponent.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/common/dagger/DomainComponent.kt
@@ -2,10 +2,13 @@ package io.homeassistant.companion.android.common.dagger
 
 import dagger.Component
 import io.homeassistant.companion.android.domain.authentication.AuthenticationUseCase
+import io.homeassistant.companion.android.domain.integration.IntegrationUseCase
 
 @Component(dependencies = [DataComponent::class], modules = [DomainModule::class])
 interface DomainComponent {
 
     fun authenticationUseCase(): AuthenticationUseCase
 
+    fun integrationUseCase(): IntegrationUseCase
+
 }
\ No newline at end of file
diff --git a/common/src/main/java/io/homeassistant/companion/android/common/dagger/DomainModule.kt b/common/src/main/java/io/homeassistant/companion/android/common/dagger/DomainModule.kt
index b17ff14bd9c..e130b9d99d5 100644
--- a/common/src/main/java/io/homeassistant/companion/android/common/dagger/DomainModule.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/common/dagger/DomainModule.kt
@@ -4,6 +4,8 @@ import dagger.Binds
 import dagger.Module
 import io.homeassistant.companion.android.domain.authentication.AuthenticationUseCase
 import io.homeassistant.companion.android.domain.authentication.AuthenticationUseCaseImpl
+import io.homeassistant.companion.android.domain.integration.IntegrationUseCase
+import io.homeassistant.companion.android.domain.integration.IntegrationUseCaseImpl
 
 @Module
 interface DomainModule {
@@ -11,4 +13,7 @@ interface DomainModule {
     @Binds
     fun bindAuthenticationUseCase(useCaseImpl: AuthenticationUseCaseImpl) : AuthenticationUseCase
 
+    @Binds
+    fun bindIntegrationUseCase(useCaseImpl: IntegrationUseCaseImpl) : IntegrationUseCase
+
 }
diff --git a/common/src/main/java/io/homeassistant/companion/android/common/dagger/Graph.kt b/common/src/main/java/io/homeassistant/companion/android/common/dagger/Graph.kt
index 2b3d515672b..d72573e915c 100644
--- a/common/src/main/java/io/homeassistant/companion/android/common/dagger/Graph.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/common/dagger/Graph.kt
@@ -35,7 +35,11 @@ class Graph(
     private fun buildComponent() {
         dataComponent = DaggerDataComponent
             .builder()
-            .dataModule(DataModule(url, LocalStorageImpl(application.getSharedPreferences("session", Context.MODE_PRIVATE))))
+            .dataModule(DataModule(
+                url,
+                LocalStorageImpl(application.getSharedPreferences("session", Context.MODE_PRIVATE)),
+                LocalStorageImpl(application.getSharedPreferences("integration", Context.MODE_PRIVATE))
+            ))
             .build()
 
         domainComponent = DaggerDomainComponent
diff --git a/data/build.gradle b/data/build.gradle
index 6ad7efbbcfa..5ce117e447d 100644
--- a/data/build.gradle
+++ b/data/build.gradle
@@ -21,6 +21,7 @@ dependencies {
     implementation "com.squareup.retrofit2:retrofit:$retrofit2Version"
     implementation "com.squareup.retrofit2:converter-jackson:$retrofit2Version"
     implementation "com.squareup.okhttp3:okhttp:$okhttp3Version"
+    implementation "com.fasterxml.jackson.module:jackson-module-kotlin:$jacksonVersion"
 
     implementation "org.threeten:threetenbp:$threeTenBpVersion"
 
diff --git a/data/src/main/java/io/homeassistant/companion/android/data/HomeAssistantRetrofit.kt b/data/src/main/java/io/homeassistant/companion/android/data/HomeAssistantRetrofit.kt
index e2c8b4031c6..910c7fe2279 100644
--- a/data/src/main/java/io/homeassistant/companion/android/data/HomeAssistantRetrofit.kt
+++ b/data/src/main/java/io/homeassistant/companion/android/data/HomeAssistantRetrofit.kt
@@ -1,5 +1,8 @@
 package io.homeassistant.companion.android.data
 
+import com.fasterxml.jackson.databind.ObjectMapper
+import com.fasterxml.jackson.databind.PropertyNamingStrategy
+import com.fasterxml.jackson.module.kotlin.registerKotlinModule
 import retrofit2.Retrofit
 import retrofit2.converter.jackson.JacksonConverterFactory
 import javax.inject.Inject
@@ -8,8 +11,13 @@ class HomeAssistantRetrofit @Inject constructor(url: String) {
 
     val retrofit: Retrofit = Retrofit
         .Builder()
-        .addConverterFactory(JacksonConverterFactory.create())
+        .addConverterFactory(
+            JacksonConverterFactory.create(
+                ObjectMapper()
+                    .setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE)
+                    .registerKotlinModule()
+            )
+        )
         .baseUrl(url)
         .build()
-
 }
diff --git a/data/src/main/java/io/homeassistant/companion/android/data/authentication/AuthenticationRepositoryImpl.kt b/data/src/main/java/io/homeassistant/companion/android/data/authentication/AuthenticationRepositoryImpl.kt
index 8c7f0d6d292..0b3bb73b17b 100644
--- a/data/src/main/java/io/homeassistant/companion/android/data/authentication/AuthenticationRepositoryImpl.kt
+++ b/data/src/main/java/io/homeassistant/companion/android/data/authentication/AuthenticationRepositoryImpl.kt
@@ -9,11 +9,12 @@ import okhttp3.HttpUrl.Companion.toHttpUrlOrNull
 import org.threeten.bp.Instant
 import java.net.URL
 import javax.inject.Inject
+import javax.inject.Named
 
 
 class AuthenticationRepositoryImpl @Inject constructor(
     private val authenticationService: AuthenticationService,
-    private val localStorage: LocalStorage
+    @Named("session") private val localStorage: LocalStorage
 ) : AuthenticationRepository {
 
     companion object {
@@ -29,26 +30,24 @@ class AuthenticationRepositoryImpl @Inject constructor(
     }
 
     override suspend fun registerAuthorizationCode(authorizationCode: String) {
-        authenticationService.getToken(AuthenticationService.GRANT_TYPE_CODE, authorizationCode, AuthenticationService.CLIENT_ID).let {
-            saveSession(Session(it.accessToken, Instant.now().epochSecond + it.expiresIn, it.refreshToken!!, it.tokenType))
+        authenticationService.getToken(
+            AuthenticationService.GRANT_TYPE_CODE,
+            authorizationCode,
+            AuthenticationService.CLIENT_ID
+        ).let {
+            saveSession(
+                Session(
+                    it.accessToken,
+                    Instant.now().epochSecond + it.expiresIn,
+                    it.refreshToken!!,
+                    it.tokenType
+                )
+            )
         }
     }
 
     override suspend fun retrieveExternalAuthentication(): String {
-        val session = retrieveSession()
-
-        if (session != null) {
-            if (session.isExpired()) {
-                return authenticationService.refreshToken(AuthenticationService.GRANT_TYPE_REFRESH, session.refreshToken, AuthenticationService.CLIENT_ID).let {
-                    val refreshSession = Session(it.accessToken, Instant.now().epochSecond + it.expiresIn, session.refreshToken, it.tokenType)
-                    saveSession(refreshSession)
-                    convertSession(refreshSession)
-                }
-            }
-            return convertSession(session)
-        } else {
-            throw AuthorizationException()
-        }
+        return convertSession(ensureValidSession())
     }
 
     override suspend fun revokeSession() {
@@ -82,6 +81,10 @@ class AuthenticationRepositoryImpl @Inject constructor(
             .toUrl()
     }
 
+    override suspend fun buildBearerToken(): String {
+        return "Bearer " + ensureValidSession().accessToken
+    }
+
     private fun convertSession(session: Session): String {
         return ObjectMapper().writeValueAsString(
             mapOf(
@@ -104,6 +107,29 @@ class AuthenticationRepositoryImpl @Inject constructor(
         }
     }
 
+    private suspend fun ensureValidSession(): Session {
+        val session = retrieveSession() ?: throw AuthorizationException()
+
+        if (session.isExpired()) {
+            return authenticationService.refreshToken(
+                AuthenticationService.GRANT_TYPE_REFRESH,
+                session.refreshToken,
+                AuthenticationService.CLIENT_ID
+            ).let {
+                val refreshSession = Session(
+                    it.accessToken,
+                    Instant.now().epochSecond + it.expiresIn,
+                    session.refreshToken,
+                    it.tokenType
+                )
+                saveSession(refreshSession)
+                refreshSession
+            }
+        }
+
+        return session
+    }
+
     private suspend fun saveSession(session: Session?) {
         localStorage.putString(PREF_ACCESS_TOKEN, session?.accessToken)
         localStorage.putLong(PREF_EXPIRED_DATE, session?.expiresTimestamp)
diff --git a/data/src/main/java/io/homeassistant/companion/android/data/integration/IntegrationRepositoryImpl.kt b/data/src/main/java/io/homeassistant/companion/android/data/integration/IntegrationRepositoryImpl.kt
new file mode 100644
index 00000000000..9e7d5f2fc64
--- /dev/null
+++ b/data/src/main/java/io/homeassistant/companion/android/data/integration/IntegrationRepositoryImpl.kt
@@ -0,0 +1,55 @@
+package io.homeassistant.companion.android.data.integration
+
+import io.homeassistant.companion.android.data.LocalStorage
+import io.homeassistant.companion.android.domain.authentication.AuthenticationRepository
+import io.homeassistant.companion.android.domain.integration.DeviceRegistration
+import io.homeassistant.companion.android.domain.integration.IntegrationRepository
+import javax.inject.Inject
+import javax.inject.Named
+
+class IntegrationRepositoryImpl @Inject constructor(
+    private val integrationService: IntegrationService,
+    private val authenticationRepository: AuthenticationRepository,
+    @Named("integration") private val localStorage: LocalStorage
+) : IntegrationRepository {
+
+    companion object {
+        private const val PREF_CLOUD_URL = "cloud_url"
+        private const val PREF_REMOTE_UI_URL = "remote_ui_url"
+        private const val PREF_SECRET = "secret"
+        private const val PREF_WEBHOOK_ID = "webhook_id"
+    }
+
+    override suspend fun registerDevice(deviceRegistration: DeviceRegistration) {
+        val response =
+            integrationService.registerDevice(
+                authenticationRepository.buildBearerToken(),
+                createRegisterDeviceRequest(deviceRegistration)
+            )
+
+        localStorage.putString(PREF_CLOUD_URL, response.cloudhookUrl)
+        localStorage.putString(PREF_REMOTE_UI_URL, response.remoteUiUrl)
+        localStorage.putString(PREF_SECRET, response.secret)
+        localStorage.putString(PREF_WEBHOOK_ID, response.webhookId)
+
+    }
+
+    override suspend fun isRegistered(): Boolean {
+        return localStorage.getString(PREF_WEBHOOK_ID) != null
+    }
+
+    private fun createRegisterDeviceRequest(deviceRegistration: DeviceRegistration): RegisterDeviceRequest {
+        return RegisterDeviceRequest(
+            deviceRegistration.appId,
+            deviceRegistration.appName,
+            deviceRegistration.appVersion,
+            deviceRegistration.deviceName,
+            deviceRegistration.manufacturer,
+            deviceRegistration.model,
+            deviceRegistration.osName,
+            deviceRegistration.osVersion,
+            deviceRegistration.supportsEncryption,
+            deviceRegistration.appData
+        )
+    }
+}
\ No newline at end of file
diff --git a/data/src/main/java/io/homeassistant/companion/android/data/integration/IntegrationService.kt b/data/src/main/java/io/homeassistant/companion/android/data/integration/IntegrationService.kt
new file mode 100644
index 00000000000..e42c14c501f
--- /dev/null
+++ b/data/src/main/java/io/homeassistant/companion/android/data/integration/IntegrationService.kt
@@ -0,0 +1,15 @@
+package io.homeassistant.companion.android.data.integration
+
+import retrofit2.http.Body
+import retrofit2.http.Header
+import retrofit2.http.POST
+
+interface IntegrationService {
+
+    @POST("/api/mobile_app/registrations")
+    suspend fun registerDevice(
+        @Header("Authorization") auth: String,
+        @Body request: RegisterDeviceRequest
+    ): RegisterDeviceResponse
+
+}
diff --git a/data/src/main/java/io/homeassistant/companion/android/data/integration/RegisterDeviceRequest.kt b/data/src/main/java/io/homeassistant/companion/android/data/integration/RegisterDeviceRequest.kt
new file mode 100644
index 00000000000..84697f07902
--- /dev/null
+++ b/data/src/main/java/io/homeassistant/companion/android/data/integration/RegisterDeviceRequest.kt
@@ -0,0 +1,18 @@
+package io.homeassistant.companion.android.data.integration
+
+import com.fasterxml.jackson.annotation.JsonInclude
+import java.util.*
+
+data class RegisterDeviceRequest(
+    var appId: String,
+    var appName: String,
+    var appVersion: String,
+    var deviceName: String,
+    var manufacturer: String,
+    var model: String,
+    var osName: String,
+    var osVersion: String,
+    var supportsEncryption: Boolean,
+    @JsonInclude(JsonInclude.Include.NON_NULL)
+    var appData: Dictionary<String, Objects>?
+)
diff --git a/data/src/main/java/io/homeassistant/companion/android/data/integration/RegisterDeviceResponse.kt b/data/src/main/java/io/homeassistant/companion/android/data/integration/RegisterDeviceResponse.kt
new file mode 100644
index 00000000000..8af059b8416
--- /dev/null
+++ b/data/src/main/java/io/homeassistant/companion/android/data/integration/RegisterDeviceResponse.kt
@@ -0,0 +1,8 @@
+package io.homeassistant.companion.android.data.integration
+
+data class RegisterDeviceResponse(
+    var cloudhookUrl: String?,
+    var remoteUiUrl: String?,
+    var secret: String?,
+    var webhookId: String
+)
diff --git a/data/src/test/java/io/homeassistant/companion/android/data/authentication/AuthenticationRepositoryImplSpec.kt b/data/src/test/java/io/homeassistant/companion/android/data/authentication/AuthenticationRepositoryImplSpec.kt
index fad2899092d..58059d75335 100644
--- a/data/src/test/java/io/homeassistant/companion/android/data/authentication/AuthenticationRepositoryImplSpec.kt
+++ b/data/src/test/java/io/homeassistant/companion/android/data/authentication/AuthenticationRepositoryImplSpec.kt
@@ -22,7 +22,12 @@ object AuthenticationRepositoryImplSpec : Spek({
     describe("a repository") {
         val localStorage by memoized { mockk<LocalStorage>(relaxUnitFun = true) }
         val authenticationService by memoized { mockk<AuthenticationService>(relaxUnitFun = true) }
-        val repository by memoized { AuthenticationRepositoryImpl(authenticationService, localStorage) }
+        val repository by memoized {
+            AuthenticationRepositoryImpl(
+                authenticationService,
+                localStorage
+            )
+        }
 
         describe("saveUrl") {
             beforeEachTest {
@@ -37,7 +42,11 @@ object AuthenticationRepositoryImplSpec : Spek({
         describe("get token on success") {
             beforeEachTest {
                 coEvery {
-                    authenticationService.getToken("authorization_code", "123456", "https://home-assistant.io/android")
+                    authenticationService.getToken(
+                        "authorization_code",
+                        "123456",
+                        "https://home-assistant.io/android"
+                    )
                 } returns mockk {
                     every { accessToken } returns "ABCDEFGH"
                     every { expiresIn } returns 1800
@@ -90,7 +99,8 @@ object AuthenticationRepositoryImplSpec : Spek({
             lateinit var authenticationUrl: URL
             beforeEachTest {
                 coEvery { localStorage.getString("url") } returns "https://demo.home-assistant.io/"
-                authenticationUrl = runBlocking { repository.buildAuthenticationUrl("homeassistant://auth-callback") }
+                authenticationUrl =
+                    runBlocking { repository.buildAuthenticationUrl("homeassistant://auth-callback") }
             }
 
             it("should return the authentication url") {
@@ -168,6 +178,16 @@ object AuthenticationRepositoryImplSpec : Spek({
                     }
                 }
             }
+
+            describe("build bearer token") {
+                lateinit var token: String
+                beforeEachTest {
+                    token = runBlocking { repository.buildBearerToken() }
+                }
+                it("should return a valid bearer token") {
+                    assertThat(token).isEqualTo("Bearer ABCDEFGH")
+                }
+            }
         }
 
         describe("connected user with expired access token") {
@@ -177,21 +197,24 @@ object AuthenticationRepositoryImplSpec : Spek({
                 coEvery { localStorage.getLong("expires_date") } returns Instant.now().epochSecond - 1800
                 coEvery { localStorage.getString("refresh_token") } returns "IJKLMNOPQRST"
                 coEvery { localStorage.getString("token_type") } returns "Bearer"
+                coEvery {
+                    authenticationService.refreshToken(
+                        "refresh_token",
+                        "IJKLMNOPQRST",
+                        "https://home-assistant.io/android"
+                    )
+                } returns mockk {
+                    every { accessToken } returns "HGFEDCBA"
+                    every { expiresIn } returns 1800
+                    every { refreshToken } returns null
+                    every { tokenType } returns "Bearer"
+                }
             }
 
             describe("retrieve external authentication") {
                 lateinit var externalAuth: String
                 beforeEachTest {
                     externalAuth = runBlocking {
-                        coEvery {
-                            authenticationService.refreshToken("refresh_token", "IJKLMNOPQRST", "https://home-assistant.io/android")
-                        } returns mockk {
-                            every { accessToken } returns "HGFEDCBA"
-                            every { expiresIn } returns 1800
-                            every { refreshToken } returns null
-                            every { tokenType } returns "Bearer"
-                        }
-
                         repository.retrieveExternalAuthentication()
                     }
                 }
@@ -209,6 +232,26 @@ object AuthenticationRepositoryImplSpec : Spek({
                     assertThat(externalAuth).isEqualTo("{\"access_token\":\"HGFEDCBA\",\"expires_in\":1800}")
                 }
             }
+
+            describe("build bearer token") {
+                lateinit var token: String
+                beforeEachTest {
+                    token = runBlocking { repository.buildBearerToken() }
+                }
+                it("should refresh the token") {
+                    coVerify {
+                        authenticationService.refreshToken(
+                            "refresh_token",
+                            "IJKLMNOPQRST",
+                            "https://home-assistant.io/android"
+                        )
+                    }
+                }
+
+                it("should return a valid bearer token") {
+                    assertThat(token).isEqualTo("Bearer HGFEDCBA")
+                }
+            }
         }
 
         describe("anonymous user") {
@@ -275,6 +318,20 @@ object AuthenticationRepositoryImplSpec : Spek({
                     assertThat(thrown).isInstanceOf(AuthorizationException::class.java)
                 }
             }
+
+            describe("build bearer token") {
+                lateinit var thrown: Throwable
+                beforeEachTest {
+                    thrown = catchThrowable {
+                        runBlocking {
+                            repository.buildBearerToken()
+                        }
+                    }
+                }
+                it("should throw an exception") {
+                    assertThat(thrown).isInstanceOf(AuthorizationException::class.java)
+                }
+            }
         }
     }
 })
\ No newline at end of file
diff --git a/data/src/test/java/io/homeassistant/companion/android/data/integration/IntegrationRepositoryImplSpec.kt b/data/src/test/java/io/homeassistant/companion/android/data/integration/IntegrationRepositoryImplSpec.kt
new file mode 100644
index 00000000000..ccc14703963
--- /dev/null
+++ b/data/src/test/java/io/homeassistant/companion/android/data/integration/IntegrationRepositoryImplSpec.kt
@@ -0,0 +1,115 @@
+package io.homeassistant.companion.android.data.integration
+
+import io.homeassistant.companion.android.data.LocalStorage
+import io.homeassistant.companion.android.domain.authentication.AuthenticationRepository
+import io.homeassistant.companion.android.domain.integration.DeviceRegistration
+import io.mockk.coEvery
+import io.mockk.coVerifyAll
+import io.mockk.every
+import io.mockk.mockk
+import kotlinx.coroutines.runBlocking
+import org.assertj.core.api.Assertions
+import org.spekframework.spek2.Spek
+import org.spekframework.spek2.style.specification.describe
+import kotlin.properties.Delegates
+
+object IntegrationRepositoryImplSpec : Spek({
+
+    describe("a repository") {
+
+        val localStorage by memoized { mockk<LocalStorage>(relaxUnitFun = true) }
+        val integrationService by memoized { mockk<IntegrationService>(relaxUnitFun = true) }
+        val authenticationRepository by memoized { mockk<AuthenticationRepository>(relaxUnitFun = true) }
+
+        val repository by memoized {
+            IntegrationRepositoryImpl(
+                integrationService,
+                authenticationRepository,
+                localStorage
+            )
+        }
+
+        describe("registerDevice") {
+            beforeEachTest {
+                val deviceRegistration = DeviceRegistration(
+                    "appId",
+                    "appName",
+                    "appVersion",
+                    "deviceName",
+                    "manufacturer",
+                    "model",
+                    "osName",
+                    "osVersion",
+                    false,
+                    null
+                )
+                val registerDeviceRequest = RegisterDeviceRequest(
+                    deviceRegistration.appId,
+                    deviceRegistration.appName,
+                    deviceRegistration.appVersion,
+                    deviceRegistration.deviceName,
+                    deviceRegistration.manufacturer,
+                    deviceRegistration.model,
+                    deviceRegistration.osName,
+                    deviceRegistration.osVersion,
+                    deviceRegistration.supportsEncryption,
+                    deviceRegistration.appData
+                )
+                coEvery {
+                    integrationService.registerDevice("ABC123", registerDeviceRequest)
+                } returns mockk {
+                    every { cloudhookUrl } returns "https://home-assistant.io/1/"
+                    every { remoteUiUrl } returns "https://home-assistant.io/2/"
+                    every { secret } returns "ABCDE"
+                    every { webhookId } returns "FGHIJ"
+                }
+
+                coEvery { authenticationRepository.buildBearerToken() } returns "ABC123"
+
+                runBlocking {
+                    repository.registerDevice(deviceRegistration)
+                }
+            }
+
+            it("should save response data") {
+                coVerifyAll {
+                    localStorage.putString("cloud_url", "https://home-assistant.io/1/")
+                    localStorage.putString("remote_ui_url", "https://home-assistant.io/2/")
+                    localStorage.putString("secret", "ABCDE")
+                    localStorage.putString("webhook_id", "FGHIJ")
+                }
+            }
+        }
+
+        describe("is registered") {
+            beforeEachTest {
+                coEvery { localStorage.getString("webhook_id") } returns "FGHIJ"
+            }
+            describe("isRegistered") {
+                var isRegistered by Delegates.notNull<Boolean>()
+                beforeEachTest {
+                    runBlocking { isRegistered = repository.isRegistered() }
+                }
+                it("should return true when webhook has a value") {
+                    Assertions.assertThat(isRegistered).isTrue()
+                }
+            }
+        }
+        describe("is not registered") {
+            beforeEachTest {
+                coEvery { localStorage.getString("webhook_id") } returns null
+            }
+            describe("isRegistered") {
+                var isRegistered by Delegates.notNull<Boolean>()
+                beforeEachTest {
+                    runBlocking { isRegistered = repository.isRegistered() }
+                }
+                it("should return false when webhook has no value") {
+                    Assertions.assertThat(isRegistered).isFalse()
+                }
+
+            }
+        }
+    }
+
+})
\ No newline at end of file
diff --git a/data/src/test/java/io/homeassistant/companion/android/data/integration/IntegrationServiceSpec.kt b/data/src/test/java/io/homeassistant/companion/android/data/integration/IntegrationServiceSpec.kt
new file mode 100644
index 00000000000..2b9b9601a19
--- /dev/null
+++ b/data/src/test/java/io/homeassistant/companion/android/data/integration/IntegrationServiceSpec.kt
@@ -0,0 +1,48 @@
+package io.homeassistant.companion.android.data.integration
+
+import io.homeassistant.companion.android.data.HomeAssistantMockService
+import kotlinx.coroutines.runBlocking
+import okhttp3.mockwebserver.RecordedRequest
+import org.assertj.core.api.Assertions.assertThat
+import org.spekframework.spek2.Spek
+import org.spekframework.spek2.style.specification.describe
+
+
+object IntegrationServiceSpec : Spek({
+    describe("an integration service") {
+        val mockService by memoized { HomeAssistantMockService(IntegrationService::class.java) }
+
+        lateinit var request: RecordedRequest
+        lateinit var registrationResponse: RegisterDeviceResponse
+
+        beforeEachTest {
+            val registrationRequest = RegisterDeviceRequest(
+                "appId",
+                "appName",
+                "appVersion",
+                "deviceName",
+                "manufacturer",
+                "model",
+                "osName",
+                "osVersion",
+                false,
+                null
+            )
+            mockService.enqueueResponse(200, "integration/register.json")
+            registrationResponse = runBlocking {
+                mockService.get().registerDevice("123", registrationRequest)
+            }
+            request = mockService.takeRequest()
+        }
+        it("should serialize request") {
+            assertThat(request.method).isEqualTo("POST")
+            assertThat(request.path).isEqualTo("/api/mobile_app/registrations")
+            assertThat(request.body.readUtf8())
+                .contains("\"app_id\":\"appId\"")
+        }
+        it("should deserialize the response") {
+            assertThat(registrationResponse.webhookId).isEqualTo("ABC")
+        }
+    }
+
+})
\ No newline at end of file
diff --git a/data/src/test/resources/integration/register.json b/data/src/test/resources/integration/register.json
new file mode 100644
index 00000000000..67fd0e5dba9
--- /dev/null
+++ b/data/src/test/resources/integration/register.json
@@ -0,0 +1,3 @@
+{
+  "webhook_id": "ABC"
+}
\ No newline at end of file
diff --git a/domain/src/main/java/io/homeassistant/companion/android/domain/authentication/AuthenticationRepository.kt b/domain/src/main/java/io/homeassistant/companion/android/domain/authentication/AuthenticationRepository.kt
index e3be7d7d318..7d3b13e80a9 100644
--- a/domain/src/main/java/io/homeassistant/companion/android/domain/authentication/AuthenticationRepository.kt
+++ b/domain/src/main/java/io/homeassistant/companion/android/domain/authentication/AuthenticationRepository.kt
@@ -19,4 +19,6 @@ interface AuthenticationRepository {
 
     suspend fun buildAuthenticationUrl(callbackUrl: String): URL
 
+    suspend fun buildBearerToken(): String
+
 }
diff --git a/domain/src/main/java/io/homeassistant/companion/android/domain/integration/DeviceRegistration.kt b/domain/src/main/java/io/homeassistant/companion/android/domain/integration/DeviceRegistration.kt
new file mode 100644
index 00000000000..4700007e90e
--- /dev/null
+++ b/domain/src/main/java/io/homeassistant/companion/android/domain/integration/DeviceRegistration.kt
@@ -0,0 +1,16 @@
+package io.homeassistant.companion.android.domain.integration
+
+import java.util.*
+
+data class DeviceRegistration(
+    val appId: String,
+    val appName: String,
+    val appVersion: String,
+    val deviceName: String,
+    val manufacturer: String,
+    val model: String,
+    val osName: String,
+    val osVersion: String,
+    val supportsEncryption: Boolean,
+    val appData: Dictionary<String, Objects>?
+)
\ No newline at end of file
diff --git a/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationRepository.kt b/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationRepository.kt
new file mode 100644
index 00000000000..513f24dad24
--- /dev/null
+++ b/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationRepository.kt
@@ -0,0 +1,8 @@
+package io.homeassistant.companion.android.domain.integration
+
+interface IntegrationRepository {
+
+    suspend fun registerDevice(deviceRegistration: DeviceRegistration)
+
+    suspend fun isRegistered(): Boolean
+}
\ No newline at end of file
diff --git a/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCase.kt b/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCase.kt
new file mode 100644
index 00000000000..607d720a25f
--- /dev/null
+++ b/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCase.kt
@@ -0,0 +1,9 @@
+package io.homeassistant.companion.android.domain.integration
+
+interface IntegrationUseCase {
+
+    suspend fun registerDevice(deviceRegistration: DeviceRegistration)
+
+    suspend fun isRegistered(): Boolean
+
+}
\ No newline at end of file
diff --git a/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCaseImpl.kt b/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCaseImpl.kt
new file mode 100644
index 00000000000..35ac5cedebf
--- /dev/null
+++ b/domain/src/main/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCaseImpl.kt
@@ -0,0 +1,15 @@
+package io.homeassistant.companion.android.domain.integration
+
+import javax.inject.Inject
+
+class IntegrationUseCaseImpl @Inject constructor(
+    private val integrationRepository: IntegrationRepository
+) : IntegrationUseCase {
+    override suspend fun registerDevice(deviceRegistration: DeviceRegistration) {
+        integrationRepository.registerDevice(deviceRegistration)
+    }
+
+    override suspend fun isRegistered(): Boolean {
+        return integrationRepository.isRegistered()
+    }
+}
\ No newline at end of file
diff --git a/domain/src/test/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCaseImplSpec.kt b/domain/src/test/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCaseImplSpec.kt
new file mode 100644
index 00000000000..9dbddb857a5
--- /dev/null
+++ b/domain/src/test/java/io/homeassistant/companion/android/domain/integration/IntegrationUseCaseImplSpec.kt
@@ -0,0 +1,48 @@
+package io.homeassistant.companion.android.domain.integration
+
+import io.mockk.*
+import kotlinx.coroutines.runBlocking
+import org.spekframework.spek2.Spek
+import org.spekframework.spek2.style.specification.describe
+
+object IntegrationUseCaseImplSpec : Spek({
+    describe("integration use case") {
+
+        val integrationRepository by memoized {
+            mockk<IntegrationRepository>(
+                relaxed = true,
+                relaxUnitFun = true
+            )
+        }
+        val useCase by memoized { IntegrationUseCaseImpl(integrationRepository) }
+
+        describe("registerDevice") {
+            val deviceRegistration = mockk<DeviceRegistration>()
+            beforeEachTest {
+                coEvery {
+                    integrationRepository.registerDevice(any())
+                } just Runs
+
+                runBlocking {
+                    useCase.registerDevice(deviceRegistration)
+                }
+            }
+
+            it("should call repository") {
+                coVerify {
+                    integrationRepository.registerDevice(deviceRegistration)
+                }
+            }
+        }
+
+        describe("isRegistered") {
+            beforeEachTest {
+                runBlocking { useCase.isRegistered() }
+            }
+
+            it("should call the repository") {
+                coVerify { integrationRepository.isRegistered() }
+            }
+        }
+    }
+})
\ No newline at end of file
diff --git a/gradle/dependencies.gradle b/gradle/dependencies.gradle
index 95be3019d58..61cdc5d3d6c 100644
--- a/gradle/dependencies.gradle
+++ b/gradle/dependencies.gradle
@@ -4,6 +4,7 @@ ext {
 
     retrofit2Version = '2.6.2'
     okhttp3Version = '4.2.2'
+    jacksonVersion = '2.9.10'
     appCompatVersion = '1.1.0'
     constraintLayoutversion = '1.1.3'
     coroutinesVersion = '1.3.2'
