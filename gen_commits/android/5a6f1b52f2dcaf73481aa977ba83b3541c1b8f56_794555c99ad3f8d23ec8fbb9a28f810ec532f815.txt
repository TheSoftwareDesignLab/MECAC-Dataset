diff --git a/app/src/main/java/io/homeassistant/companion/android/settings/widgets/ManageWidgetsSettingsFragment.kt b/app/src/main/java/io/homeassistant/companion/android/settings/widgets/ManageWidgetsSettingsFragment.kt
index 3a7558476a0..535a4835787 100644
--- a/app/src/main/java/io/homeassistant/companion/android/settings/widgets/ManageWidgetsSettingsFragment.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/settings/widgets/ManageWidgetsSettingsFragment.kt
@@ -1,26 +1,23 @@
 package io.homeassistant.companion.android.settings.widgets
 
-import android.appwidget.AppWidgetManager
 import android.content.Intent
 import android.net.Uri
 import android.os.Bundle
+import android.view.LayoutInflater
 import android.view.Menu
-import androidx.preference.Preference
-import androidx.preference.PreferenceCategory
-import androidx.preference.PreferenceFragmentCompat
+import android.view.View
+import android.view.ViewGroup
+import androidx.compose.ui.platform.ComposeView
+import androidx.fragment.app.Fragment
+import androidx.fragment.app.viewModels
+import com.google.android.material.composethemeadapter.MdcTheme
 import io.homeassistant.companion.android.R
-import io.homeassistant.companion.android.database.AppDatabase
-import io.homeassistant.companion.android.database.widget.ButtonWidgetEntity
-import io.homeassistant.companion.android.database.widget.MediaPlayerControlsWidgetEntity
-import io.homeassistant.companion.android.database.widget.StaticWidgetEntity
-import io.homeassistant.companion.android.database.widget.TemplateWidgetEntity
-import io.homeassistant.companion.android.widgets.button.ButtonWidgetConfigureActivity
-import io.homeassistant.companion.android.widgets.entity.EntityWidgetConfigureActivity
-import io.homeassistant.companion.android.widgets.media_player_controls.MediaPlayerControlsWidgetConfigureActivity
-import io.homeassistant.companion.android.widgets.template.TemplateWidgetConfigureActivity
+import io.homeassistant.companion.android.settings.widgets.views.ManageWidgetsView
 import io.homeassistant.companion.android.common.R as commonR
 
-class ManageWidgetsSettingsFragment : PreferenceFragmentCompat() {
+class ManageWidgetsSettingsFragment : Fragment() {
+
+    val viewModel: ManageWidgetsViewModel by viewModels()
 
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
@@ -36,192 +33,22 @@ class ManageWidgetsSettingsFragment : PreferenceFragmentCompat() {
         }
     }
 
-    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
-        setPreferencesFromResource(R.xml.manage_widgets, rootKey)
-    }
-
-    override fun onResume() {
-        super.onResume()
-
-        activity?.title = getString(commonR.string.widgets)
-        val staticWidgetDao = AppDatabase.getInstance(requireContext()).staticWidgetDao()
-        val staticWidgetList = staticWidgetDao.getAll()
-        val templateWidgetDao = AppDatabase.getInstance(requireContext()).templateWidgetDao()
-        val templateWidgetList = templateWidgetDao.getAll()
-        val buttonWidgetDao = AppDatabase.getInstance(requireContext()).buttonWidgetDao()
-        val buttonWidgetList = buttonWidgetDao.getAll()
-        val mediaPlayerControlsWidgetDao = AppDatabase.getInstance(requireContext()).mediaPlayCtrlWidgetDao()
-        val mediaWidgetList = mediaPlayerControlsWidgetDao.getAll()
-
-        if (staticWidgetList.isNullOrEmpty() && templateWidgetList.isNullOrEmpty() &&
-            buttonWidgetList.isNullOrEmpty() && mediaWidgetList.isNullOrEmpty()
-        ) {
-            findPreference<Preference>("no_widgets")?.let {
-                it.isVisible = true
-            }
-            findPreference<PreferenceCategory>("list_entity_state_widgets")?.let {
-                it.isVisible = false
-            }
-            findPreference<PreferenceCategory>("list_template_widgets")?.let {
-                it.isVisible = false
-            }
-            findPreference<PreferenceCategory>("list_button_widgets")?.let {
-                it.isVisible = false
-            }
-            findPreference<PreferenceCategory>("list_media_player_widgets")?.let {
-                it.isVisible = false
-            }
-        } else {
-
-            findPreference<Preference>("no_widgets")?.let {
-                it.isVisible = false
-            }
-
-            val prefCategoryStatic = findPreference<PreferenceCategory>("list_entity_state_widgets")
-            if (!staticWidgetList.isNullOrEmpty()) {
-                prefCategoryStatic?.isVisible = true
-                reloadStaticWidgets(staticWidgetList, prefCategoryStatic)
-            } else {
-                findPreference<PreferenceCategory>("list_entity_state_widgets")?.let {
-                    it.isVisible = false
-                }
-            }
-
-            val prefCategoryTemplate = findPreference<PreferenceCategory>("list_template_widgets")
-            if (!templateWidgetList.isNullOrEmpty()) {
-                prefCategoryTemplate?.isVisible = true
-                reloadTemplateWidgets(templateWidgetList, prefCategoryTemplate)
-            } else {
-                findPreference<PreferenceCategory>("list_template_widgets")?.let {
-                    it.isVisible = false
-                }
-            }
-
-            val prefCategoryButton =
-                findPreference<PreferenceCategory>("list_button_widgets")
-            if (!buttonWidgetList.isNullOrEmpty()) {
-                prefCategoryButton?.isVisible = true
-                reloadButtonWidgets(buttonWidgetList, prefCategoryButton)
-            } else {
-                findPreference<PreferenceCategory>("list_button_widgets")?.let {
-                    it.isVisible = false
-                }
-            }
-
-            val prefCategoryMedia = findPreference<PreferenceCategory>("list_media_player_widgets")
-            if (!mediaWidgetList.isNullOrEmpty()) {
-                prefCategoryMedia?.isVisible = true
-                reloadMediaPlayerWidgets(mediaWidgetList, prefCategoryMedia)
-            } else {
-                findPreference<PreferenceCategory>("list_media_player_widgets")?.let {
-                    it.isVisible = false
-                }
-            }
-        }
-    }
-
-    private fun reloadStaticWidgets(staticWidgetList: Array<StaticWidgetEntity>?, prefCategory: PreferenceCategory?) {
-        prefCategory?.removeAll()
-        if (staticWidgetList != null) {
-            for (item in staticWidgetList) {
-                val pref = Preference(preferenceScreen.context)
-
-                pref.key = item.id.toString()
-                if (!item.label.isNullOrEmpty()) {
-                    pref.title = item.label
-                    pref.summary = item.entityId + item.stateSeparator + item.attributeIds.orEmpty()
-                } else
-                    pref.title = item.entityId + item.stateSeparator + item.attributeIds
-                pref.isIconSpaceReserved = false
-
-                pref.setOnPreferenceClickListener {
-                    val intent = Intent(requireContext(), EntityWidgetConfigureActivity::class.java).apply {
-                        putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, item.id)
-                    }
-                    startActivity(intent)
-                    return@setOnPreferenceClickListener true
+    override fun onCreateView(
+        inflater: LayoutInflater,
+        container: ViewGroup?,
+        savedInstanceState: Bundle?
+    ): View {
+        return ComposeView(requireContext()).apply {
+            setContent {
+                MdcTheme {
+                    ManageWidgetsView(viewModel = viewModel)
                 }
-
-                prefCategory?.addPreference(pref)
             }
         }
     }
 
-    private fun reloadTemplateWidgets(templateWidgetList: Array<TemplateWidgetEntity>?, prefCategory: PreferenceCategory?) {
-        prefCategory?.removeAll()
-        if (templateWidgetList != null) {
-            for (item in templateWidgetList) {
-                val pref = Preference(preferenceScreen.context)
-
-                pref.key = item.id.toString()
-                pref.title = item.template.take(100)
-                pref.isIconSpaceReserved = false
-
-                pref.setOnPreferenceClickListener {
-                    val intent = Intent(requireContext(), TemplateWidgetConfigureActivity::class.java).apply {
-                        putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, item.id)
-                    }
-                    startActivity(intent)
-                    return@setOnPreferenceClickListener true
-                }
-
-                prefCategory?.addPreference(pref)
-            }
-        }
-    }
-
-    private fun reloadButtonWidgets(buttonWidgetList: Array<ButtonWidgetEntity>?, prefCategory: PreferenceCategory?) {
-        prefCategory?.removeAll()
-        if (buttonWidgetList != null) {
-            for (item in buttonWidgetList) {
-                val pref = Preference(preferenceScreen.context)
-
-                pref.key = item.id.toString()
-                if (!item.label.isNullOrEmpty()) {
-                    pref.title = item.label
-                    pref.summary = "${item.domain}.${item.service}"
-                } else
-                    pref.title = "${item.domain}.${item.service}"
-                pref.isIconSpaceReserved = false
-
-                pref.setOnPreferenceClickListener {
-                    val intent =
-                        Intent(requireContext(), ButtonWidgetConfigureActivity::class.java).apply {
-                            putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, item.id)
-                        }
-                    startActivity(intent)
-                    return@setOnPreferenceClickListener true
-                }
-
-                prefCategory?.addPreference(pref)
-            }
-        }
-    }
-
-    private fun reloadMediaPlayerWidgets(mediaWidgetList: Array<MediaPlayerControlsWidgetEntity>?, prefCategory: PreferenceCategory?) {
-        prefCategory?.removeAll()
-        if (mediaWidgetList != null) {
-            for (item in mediaWidgetList) {
-                val pref = Preference(preferenceScreen.context)
-
-                pref.key = item.id.toString()
-                if (!item.label.isNullOrEmpty()) {
-                    pref.title = item.label
-                    pref.summary = item.entityId
-                } else
-                    pref.title = item.entityId
-                pref.isIconSpaceReserved = false
-
-                pref.setOnPreferenceClickListener {
-                    val intent = Intent(requireContext(), MediaPlayerControlsWidgetConfigureActivity::class.java).apply {
-                        putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, item.id)
-                    }
-                    startActivity(intent)
-                    return@setOnPreferenceClickListener true
-                }
-
-                prefCategory?.addPreference(pref)
-            }
-        }
+    override fun onResume() {
+        super.onResume()
+        activity?.title = getString(commonR.string.widgets)
     }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/settings/widgets/ManageWidgetsViewModel.kt b/app/src/main/java/io/homeassistant/companion/android/settings/widgets/ManageWidgetsViewModel.kt
new file mode 100755
index 00000000000..dee655223ed
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/settings/widgets/ManageWidgetsViewModel.kt
@@ -0,0 +1,86 @@
+package io.homeassistant.companion.android.settings.widgets
+
+import android.app.Application
+import androidx.compose.runtime.mutableStateListOf
+import androidx.lifecycle.AndroidViewModel
+import androidx.lifecycle.viewModelScope
+import io.homeassistant.companion.android.database.AppDatabase
+import io.homeassistant.companion.android.database.widget.ButtonWidgetEntity
+import io.homeassistant.companion.android.database.widget.MediaPlayerControlsWidgetEntity
+import io.homeassistant.companion.android.database.widget.StaticWidgetEntity
+import io.homeassistant.companion.android.database.widget.TemplateWidgetEntity
+import kotlinx.coroutines.flow.Flow
+import kotlinx.coroutines.launch
+import javax.inject.Inject
+
+class ManageWidgetsViewModel @Inject constructor(
+    application: Application
+) : AndroidViewModel(
+    application
+) {
+    private val buttonWidgetDao = AppDatabase.getInstance(application).buttonWidgetDao()
+    private fun buttonWidgetFlow(): Flow<List<ButtonWidgetEntity>>? = buttonWidgetDao.getAllFlow()
+    private val staticWidgetDao = AppDatabase.getInstance(application).staticWidgetDao()
+    private fun staticWidgetFlow(): Flow<List<StaticWidgetEntity>>? = staticWidgetDao.getAllFlow()
+    private val mediaPlayerControlsWidgetDao = AppDatabase.getInstance(application).mediaPlayCtrlWidgetDao()
+    private fun mediaWidgetFlow(): Flow<List<MediaPlayerControlsWidgetEntity>>? = mediaPlayerControlsWidgetDao.getAllFlow()
+    private val templateWidgetDao = AppDatabase.getInstance(application).templateWidgetDao()
+    private fun templateWidgetFlow(): Flow<List<TemplateWidgetEntity>>? = templateWidgetDao.getAllFlow()
+
+    var buttonWidgetList = mutableStateListOf<ButtonWidgetEntity>()
+        private set
+    var staticWidgetList = mutableStateListOf<StaticWidgetEntity>()
+        private set
+    var mediaWidgetList = mutableStateListOf<MediaPlayerControlsWidgetEntity>()
+        private set
+    var templateWidgetList = mutableStateListOf<TemplateWidgetEntity>()
+        private set
+
+    init {
+        buttonWidgetList()
+        staticWidgetList()
+        mediaWidgetList()
+        templateWidgetList()
+    }
+
+    private fun buttonWidgetList() {
+        viewModelScope.launch {
+            buttonWidgetFlow()?.collect {
+                buttonWidgetList.clear()
+                it.forEach { widget ->
+                    buttonWidgetList.add(widget)
+                }
+            }
+        }
+    }
+    private fun staticWidgetList() {
+        viewModelScope.launch {
+            staticWidgetFlow()?.collect {
+                staticWidgetList.clear()
+                it.forEach { widget ->
+                    staticWidgetList.add(widget)
+                }
+            }
+        }
+    }
+    private fun mediaWidgetList() {
+        viewModelScope.launch {
+            mediaWidgetFlow()?.collect {
+                mediaWidgetList.clear()
+                it.forEach { widget ->
+                    mediaWidgetList.add(widget)
+                }
+            }
+        }
+    }
+    private fun templateWidgetList() {
+        viewModelScope.launch {
+            templateWidgetFlow()?.collect {
+                templateWidgetList.clear()
+                it.forEach { widget ->
+                    templateWidgetList.add(widget)
+                }
+            }
+        }
+    }
+}
diff --git a/app/src/main/java/io/homeassistant/companion/android/settings/widgets/views/ManageWidgetsView.kt b/app/src/main/java/io/homeassistant/companion/android/settings/widgets/views/ManageWidgetsView.kt
new file mode 100755
index 00000000000..9d94c8643fc
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/settings/widgets/views/ManageWidgetsView.kt
@@ -0,0 +1,102 @@
+package io.homeassistant.companion.android.settings.widgets.views
+
+import android.appwidget.AppWidgetManager
+import android.content.Intent
+import androidx.compose.foundation.layout.Row
+import androidx.compose.foundation.layout.padding
+import androidx.compose.foundation.lazy.LazyColumn
+import androidx.compose.material.Button
+import androidx.compose.material.Text
+import androidx.compose.runtime.Composable
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.platform.LocalContext
+import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.unit.dp
+import io.homeassistant.companion.android.common.R
+import io.homeassistant.companion.android.settings.widgets.ManageWidgetsViewModel
+import io.homeassistant.companion.android.widgets.button.ButtonWidgetConfigureActivity
+import io.homeassistant.companion.android.widgets.entity.EntityWidgetConfigureActivity
+import io.homeassistant.companion.android.widgets.media_player_controls.MediaPlayerControlsWidgetConfigureActivity
+import io.homeassistant.companion.android.widgets.template.TemplateWidgetConfigureActivity
+
+@Composable
+fun ManageWidgetsView(
+    viewModel: ManageWidgetsViewModel
+) {
+    LazyColumn(
+        modifier = Modifier.padding(start = 16.dp, end = 16.dp)
+    ) {
+        if (viewModel.buttonWidgetList.isNullOrEmpty() && viewModel.staticWidgetList.isNullOrEmpty() &&
+            viewModel.mediaWidgetList.isNullOrEmpty() && viewModel.templateWidgetList.isNullOrEmpty()
+        ) {
+            item { Text(stringResource(id = R.string.no_widgets)) }
+        }
+        if (!viewModel.buttonWidgetList.isNullOrEmpty()) {
+            item {
+                Text(stringResource(id = R.string.button_widgets))
+            }
+            items(viewModel.buttonWidgetList.size) { index ->
+                val item = viewModel.buttonWidgetList[index]
+                val label = if (!item.label.isNullOrEmpty()) item.label else "${item.domain}.${item.service}"
+                WidgetRow(widgetLabel = label.toString(), widgetId = item.id, widgetType = "button")
+            }
+        }
+        if (!viewModel.staticWidgetList.isNullOrEmpty()) {
+            item {
+                Text(stringResource(id = R.string.entity_state_widgets))
+            }
+            items(viewModel.staticWidgetList.size) { index ->
+                val item = viewModel.staticWidgetList[index]
+                val label = if (!item.label.isNullOrEmpty()) item.label else "${item.entityId} ${item.stateSeparator} ${item.attributeIds}"
+                WidgetRow(widgetLabel = label.toString(), widgetId = item.id, widgetType = "state")
+            }
+        }
+        if (!viewModel.mediaWidgetList.isNullOrEmpty()) {
+            item {
+                Text(stringResource(id = R.string.media_player_widgets))
+            }
+            items(viewModel.mediaWidgetList.size) { index ->
+                val item = viewModel.mediaWidgetList[index]
+                val label = if (!item.label.isNullOrEmpty()) item.label else item.entityId
+                WidgetRow(widgetLabel = label.toString(), widgetId = item.id, widgetType = "media")
+            }
+        }
+        if (!viewModel.templateWidgetList.isNullOrEmpty()) {
+            item {
+                Text(stringResource(id = R.string.template_widgets))
+            }
+            items(viewModel.templateWidgetList.size) { index ->
+                val item = viewModel.templateWidgetList[index]
+                WidgetRow(widgetLabel = item.template, widgetId = item.id, widgetType = "template")
+            }
+        }
+    }
+}
+
+@Composable
+fun WidgetRow(
+    widgetLabel: String,
+    widgetId: Int,
+    widgetType: String
+) {
+    val context = LocalContext.current
+    Row {
+        Button(onClick = {
+            val intent = Intent(
+                context,
+                when (widgetType) {
+                    "button" -> ButtonWidgetConfigureActivity::class.java
+                    "media" -> MediaPlayerControlsWidgetConfigureActivity::class.java
+                    "state" -> EntityWidgetConfigureActivity::class.java
+                    "template" -> TemplateWidgetConfigureActivity::class.java
+                    else -> ButtonWidgetConfigureActivity::class.java // We will never reach this
+                }
+            ).apply {
+                putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId)
+            }
+            context.startActivity(intent)
+        }) {
+            Text(widgetLabel)
+        }
+    }
+}
diff --git a/app/src/main/java/io/homeassistant/companion/android/widgets/button/ButtonWidget.kt b/app/src/main/java/io/homeassistant/companion/android/widgets/button/ButtonWidget.kt
index 43ca2fb886a..336bc130f7d 100644
--- a/app/src/main/java/io/homeassistant/companion/android/widgets/button/ButtonWidget.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/widgets/button/ButtonWidget.kt
@@ -75,7 +75,7 @@ class ButtonWidget : AppWidgetProvider() {
 
     private fun updateAllWidgets(
         context: Context,
-        buttonWidgetEntityList: Array<ButtonWidgetEntity>?
+        buttonWidgetEntityList: List<ButtonWidgetEntity>?
     ) {
         if (buttonWidgetEntityList != null) {
             Log.d(TAG, "Updating all widgets")
diff --git a/app/src/main/res/xml/manage_widgets.xml b/app/src/main/res/xml/manage_widgets.xml
deleted file mode 100644
index ae0a1f9b554..00000000000
--- a/app/src/main/res/xml/manage_widgets.xml
+++ /dev/null
@@ -1,37 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<androidx.preference.PreferenceScreen
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto">
-    <Preference
-        android:key="no_widgets"
-        android:title="@string/no_widgets"
-        android:summary="@string/no_widgets_summary"
-        android:selectable="false"
-        app:iconSpaceReserved="false"
-        app:isPreferenceVisible="false" />
-
-    <PreferenceCategory
-        android:key="list_button_widgets"
-        android:title="@string/list_button_widgets"
-        app:iconSpaceReserved="false"
-        app:isPreferenceVisible="false" />
-
-    <PreferenceCategory
-        android:key="list_entity_state_widgets"
-        android:title="@string/list_entity_state_widgets"
-        app:iconSpaceReserved="false"
-        app:isPreferenceVisible="false" />
-
-    <PreferenceCategory
-        android:key="list_media_player_widgets"
-        android:title="@string/list_media_player_widgets"
-        app:iconSpaceReserved="false"
-        app:isPreferenceVisible="false" />
-
-    <PreferenceCategory
-        android:key="list_template_widgets"
-        android:title="@string/list_template_widgets"
-        app:iconSpaceReserved="false"
-        app:isPreferenceVisible="false" />
-
-</androidx.preference.PreferenceScreen>
\ No newline at end of file
diff --git a/common/src/main/java/io/homeassistant/companion/android/database/widget/ButtonWidgetDao.kt b/common/src/main/java/io/homeassistant/companion/android/database/widget/ButtonWidgetDao.kt
index e5526cf0d4c..945c72409f2 100644
--- a/common/src/main/java/io/homeassistant/companion/android/database/widget/ButtonWidgetDao.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/database/widget/ButtonWidgetDao.kt
@@ -5,6 +5,7 @@ import androidx.room.Insert
 import androidx.room.OnConflictStrategy
 import androidx.room.Query
 import androidx.room.Update
+import kotlinx.coroutines.flow.Flow
 
 @Dao
 interface ButtonWidgetDao {
@@ -22,5 +23,8 @@ interface ButtonWidgetDao {
     fun delete(id: Int)
 
     @Query("SELECT * FROM button_widgets")
-    fun getAll(): Array<ButtonWidgetEntity>?
+    fun getAll(): List<ButtonWidgetEntity>?
+
+    @Query("SELECT * FROM button_widgets")
+    fun getAllFlow(): Flow<List<ButtonWidgetEntity>>?
 }
diff --git a/common/src/main/java/io/homeassistant/companion/android/database/widget/MediaPlayerControlsWidgetDao.kt b/common/src/main/java/io/homeassistant/companion/android/database/widget/MediaPlayerControlsWidgetDao.kt
index c2e811f0114..607e6824002 100644
--- a/common/src/main/java/io/homeassistant/companion/android/database/widget/MediaPlayerControlsWidgetDao.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/database/widget/MediaPlayerControlsWidgetDao.kt
@@ -5,6 +5,7 @@ import androidx.room.Insert
 import androidx.room.OnConflictStrategy
 import androidx.room.Query
 import androidx.room.Update
+import kotlinx.coroutines.flow.Flow
 
 @Dao
 interface MediaPlayerControlsWidgetDao {
@@ -22,5 +23,8 @@ interface MediaPlayerControlsWidgetDao {
     fun delete(id: Int)
 
     @Query("SELECT * FROM mediaplayctrls_widgets")
-    fun getAll(): Array<MediaPlayerControlsWidgetEntity>?
+    fun getAll(): List<MediaPlayerControlsWidgetEntity>?
+
+    @Query("SELECT * FROM mediaplayctrls_widgets")
+    fun getAllFlow(): Flow<List<MediaPlayerControlsWidgetEntity>>?
 }
diff --git a/common/src/main/java/io/homeassistant/companion/android/database/widget/StaticWidgetDao.kt b/common/src/main/java/io/homeassistant/companion/android/database/widget/StaticWidgetDao.kt
index 5a980d57051..f3b79069450 100644
--- a/common/src/main/java/io/homeassistant/companion/android/database/widget/StaticWidgetDao.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/database/widget/StaticWidgetDao.kt
@@ -5,6 +5,7 @@ import androidx.room.Insert
 import androidx.room.OnConflictStrategy
 import androidx.room.Query
 import androidx.room.Update
+import kotlinx.coroutines.flow.Flow
 
 @Dao
 interface StaticWidgetDao {
@@ -22,7 +23,10 @@ interface StaticWidgetDao {
     fun delete(id: Int)
 
     @Query("SELECT * FROM static_widget")
-    fun getAll(): Array<StaticWidgetEntity>?
+    fun getAll(): List<StaticWidgetEntity>?
+
+    @Query("SELECT * FROM static_widget")
+    fun getAllFlow(): Flow<List<StaticWidgetEntity>>?
 
     @Query("UPDATE static_widget SET last_update = :lastUpdate WHERE id = :widgetId")
     fun updateWidgetLastUpdate(widgetId: Int, lastUpdate: String)
diff --git a/common/src/main/java/io/homeassistant/companion/android/database/widget/TemplateWidgetDao.kt b/common/src/main/java/io/homeassistant/companion/android/database/widget/TemplateWidgetDao.kt
index 48cfce4b7ad..104a66c2d58 100644
--- a/common/src/main/java/io/homeassistant/companion/android/database/widget/TemplateWidgetDao.kt
+++ b/common/src/main/java/io/homeassistant/companion/android/database/widget/TemplateWidgetDao.kt
@@ -5,6 +5,7 @@ import androidx.room.Insert
 import androidx.room.OnConflictStrategy
 import androidx.room.Query
 import androidx.room.Update
+import kotlinx.coroutines.flow.Flow
 
 @Dao
 interface TemplateWidgetDao {
@@ -22,7 +23,10 @@ interface TemplateWidgetDao {
     fun delete(id: Int)
 
     @Query("SELECT * FROM template_widgets")
-    fun getAll(): Array<TemplateWidgetEntity>?
+    fun getAll(): List<TemplateWidgetEntity>?
+
+    @Query("SELECT * FROM template_widgets")
+    fun getAllFlow(): Flow<List<TemplateWidgetEntity>>?
 
     @Query("UPDATE template_widgets SET last_update = :lastUpdate WHERE id = :widgetId")
     fun updateTemplateWidgetLastUpdate(widgetId: Int, lastUpdate: String)
diff --git a/common/src/main/res/values/strings.xml b/common/src/main/res/values/strings.xml
index 5127bde3695..0d15cf6e4f3 100644
--- a/common/src/main/res/values/strings.xml
+++ b/common/src/main/res/values/strings.xml
@@ -234,12 +234,12 @@
     <string name="last_num_notifications">Last %1$d Notifications</string>
     <string name="learn_more">Learn More</string>
     <string name="lights">Lights</string>
-    <string name="list_button_widgets">List of Button Widgets</string>
-    <string name="list_entity_state_widgets">List of Entity State Widgets</string>
+    <string name="button_widgets">Button Widgets</string>
+    <string name="entity_state_widgets">Entity State Widgets</string>
     <string name="list_header_instances">Instances</string>
     <string name="list_header_other">Other</string>
-    <string name="list_media_player_widgets">List of Media Player Widgets</string>
-    <string name="list_template_widgets">List of Template Widgets</string>
+    <string name="media_player_widgets">Media Player Widgets</string>
+    <string name="template_widgets">Template Widgets</string>
     <string name="loading_entities">Please wait while we load your entities</string>
     <string name="loading">Loadingâ€¦</string>
     <string name="location_disabled_message">The location is disabled. The following enabled option(s) require you to enable location. If you do not enable the location, the sensor(s)/setting(s) will not work!\n\n%1$s\nDo you want to enable location?</string>
