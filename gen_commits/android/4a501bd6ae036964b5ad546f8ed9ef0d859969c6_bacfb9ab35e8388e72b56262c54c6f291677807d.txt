diff --git a/app/src/full/java/io/homeassistant/companion/android/onboarding/MessagingToken.kt b/app/src/full/java/io/homeassistant/companion/android/onboarding/MessagingToken.kt
new file mode 100644
index 00000000000..36bfe3ea6bf
--- /dev/null
+++ b/app/src/full/java/io/homeassistant/companion/android/onboarding/MessagingToken.kt
@@ -0,0 +1,14 @@
+package io.homeassistant.companion.android.onboarding
+
+import android.util.Log
+import com.google.firebase.messaging.FirebaseMessaging
+import kotlinx.coroutines.tasks.await
+
+suspend fun getMessagingToken(): String {
+    return try {
+        FirebaseMessaging.getInstance().token.await()
+    } catch (e: Exception) {
+        Log.e("MessagingToken", "Issue getting token", e)
+        ""
+    }
+}
diff --git a/app/src/full/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt b/app/src/full/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt
deleted file mode 100644
index c1920e06399..00000000000
--- a/app/src/full/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt
+++ /dev/null
@@ -1,30 +0,0 @@
-package io.homeassistant.companion.android.onboarding.integration
-
-import android.util.Log
-import com.google.android.gms.tasks.Tasks
-import com.google.firebase.iid.FirebaseInstanceId
-import io.homeassistant.companion.android.common.data.integration.DeviceRegistration
-import io.homeassistant.companion.android.common.data.integration.IntegrationRepository
-import javax.inject.Inject
-
-class MobileAppIntegrationPresenterImpl @Inject constructor(
-    integrationUseCase: IntegrationRepository
-) : MobileAppIntegrationPresenterBase(
-    integrationUseCase
-) {
-    override suspend fun createRegistration(simple: Boolean, deviceName: String): DeviceRegistration {
-        val registration = super.createRegistration(simple, deviceName)
-
-        if (!simple) {
-            try {
-                val instanceId = Tasks.await(FirebaseInstanceId.getInstance().instanceId)
-                registration.pushToken = instanceId.token
-            } catch (e: Exception) {
-                Log.e(TAG, "Unable to get firebase token.", e)
-                throw e
-            }
-        }
-
-        return registration
-    }
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/launch/LaunchActivity.kt b/app/src/main/java/io/homeassistant/companion/android/launch/LaunchActivity.kt
index 1c8d78ebb10..9ee2e54357a 100644
--- a/app/src/main/java/io/homeassistant/companion/android/launch/LaunchActivity.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/launch/LaunchActivity.kt
@@ -1,20 +1,74 @@
 package io.homeassistant.companion.android.launch
 
 import android.os.Bundle
+import androidx.activity.compose.setContent
+import androidx.activity.result.ActivityResult
+import androidx.activity.result.contract.ActivityResultContracts
+import androidx.appcompat.app.AlertDialog
+import androidx.appcompat.app.AppCompatActivity
+import androidx.compose.foundation.layout.Box
+import androidx.compose.foundation.layout.fillMaxSize
+import androidx.compose.material.CircularProgressIndicator
+import androidx.compose.ui.Alignment
+import androidx.compose.ui.Modifier
+import com.google.android.material.composethemeadapter.MdcTheme
 import dagger.hilt.android.AndroidEntryPoint
-import io.homeassistant.companion.android.BaseActivity
+import io.homeassistant.companion.android.BuildConfig
+import io.homeassistant.companion.android.common.data.authentication.AuthenticationRepository
+import io.homeassistant.companion.android.common.data.integration.DeviceRegistration
+import io.homeassistant.companion.android.common.data.integration.IntegrationRepository
+import io.homeassistant.companion.android.common.data.url.UrlRepository
+import io.homeassistant.companion.android.database.AppDatabase
+import io.homeassistant.companion.android.database.sensor.Sensor
 import io.homeassistant.companion.android.onboarding.OnboardingActivity
+import io.homeassistant.companion.android.onboarding.getMessagingToken
+import io.homeassistant.companion.android.sensors.LocationSensorManager
 import io.homeassistant.companion.android.webview.WebViewActivity
+import kotlinx.coroutines.CoroutineScope
+import kotlinx.coroutines.Dispatchers
+import kotlinx.coroutines.Job
+import kotlinx.coroutines.launch
 import javax.inject.Inject
+import io.homeassistant.companion.android.common.R as commonR
 
 @AndroidEntryPoint
-class LaunchActivity : BaseActivity(), LaunchView {
+class LaunchActivity : AppCompatActivity(), LaunchView {
+
+    companion object {
+        const val TAG = "LaunchActivity"
+    }
 
     @Inject
     lateinit var presenter: LaunchPresenter
 
+    @Inject
+    lateinit var urlRepository: UrlRepository
+
+    @Inject
+    lateinit var authenticationRepository: AuthenticationRepository
+
+    @Inject
+    lateinit var integrationRepository: IntegrationRepository
+
+    private val mainScope = CoroutineScope(Dispatchers.Main + Job())
+
+    private val registerActivityResult =
+        registerForActivityResult(
+            ActivityResultContracts.StartActivityForResult(),
+            this::onOnboardingComplete
+        )
+
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
+        setContent {
+            Box(modifier = Modifier.fillMaxSize()) {
+                MdcTheme {
+                    CircularProgressIndicator(
+                        modifier = Modifier.align(Alignment.Center)
+                    )
+                }
+            }
+        }
         presenter.onViewReady()
     }
 
@@ -28,15 +82,86 @@ class LaunchActivity : BaseActivity(), LaunchView {
 
     override fun displayOnBoarding(sessionConnected: Boolean) {
         val intent = OnboardingActivity.newInstance(this)
-        intent.putExtra(OnboardingActivity.SESSION_CONNECTED, sessionConnected)
-
-        startActivity(intent)
-        finish()
-        overridePendingTransition(0, 0) // Disable activity start/stop animation
+        registerActivityResult.launch(intent)
     }
 
     override fun onDestroy() {
         presenter.onFinish()
         super.onDestroy()
     }
+
+    private fun onOnboardingComplete(result: ActivityResult) {
+        mainScope.launch {
+            val intent = result.data!!
+            val url = intent.getStringExtra("URL").toString()
+            val authCode = intent.getStringExtra("AuthCode").toString()
+            val deviceName = intent.getStringExtra("DeviceName").toString()
+            val deviceTrackingEnabled = intent.getBooleanExtra("LocationTracking", false)
+            val messagingToken = getMessagingToken()
+            if (messagingToken.isNullOrBlank()) {
+                AlertDialog.Builder(this@LaunchActivity)
+                    .setTitle(commonR.string.firebase_error_title)
+                    .setMessage(commonR.string.firebase_error_message)
+                    .setPositiveButton(commonR.string.skip) { _, _ ->
+                        mainScope.launch {
+                            registerAndOpenWebview(
+                                url,
+                                authCode,
+                                deviceName,
+                                messagingToken,
+                                deviceTrackingEnabled
+                            )
+                        }
+                    }
+                    .show()
+            } else {
+                registerAndOpenWebview(
+                    url,
+                    authCode,
+                    deviceName,
+                    messagingToken,
+                    deviceTrackingEnabled
+                )
+            }
+        }
+    }
+
+    private suspend fun registerAndOpenWebview(
+        url: String,
+        authCode: String,
+        deviceName: String,
+        messagingToken: String,
+        deviceTrackingEnabled: Boolean
+    ) {
+        urlRepository.saveUrl(url)
+        authenticationRepository.registerAuthorizationCode(authCode)
+        integrationRepository.registerDevice(
+            DeviceRegistration(
+                "${BuildConfig.VERSION_NAME} (${BuildConfig.VERSION_CODE})",
+                deviceName,
+                messagingToken
+            )
+        )
+        setLocationTracking(deviceTrackingEnabled)
+        displayWebview()
+    }
+
+    private fun setLocationTracking(enabled: Boolean) {
+        val sensorDao = AppDatabase.getInstance(applicationContext).sensorDao()
+        arrayOf(
+            LocationSensorManager.backgroundLocation,
+            LocationSensorManager.zoneLocation,
+            LocationSensorManager.singleAccurateLocation
+        ).forEach { basicSensor ->
+            var sensorEntity = sensorDao.get(basicSensor.id)
+            if (sensorEntity != null) {
+                sensorEntity.enabled = enabled
+                sensorEntity.lastSentState = ""
+                sensorDao.update(sensorEntity)
+            } else {
+                sensorEntity = Sensor(basicSensor.id, enabled, false, "")
+                sensorDao.add(sensorEntity)
+            }
+        }
+    }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingActivity.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingActivity.kt
index e4a80a953a0..e8d14055ce1 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingActivity.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingActivity.kt
@@ -5,31 +5,14 @@ import android.content.Intent
 import android.os.Bundle
 import android.view.KeyEvent
 import androidx.appcompat.app.AppCompatActivity
-import dagger.hilt.EntryPoint
-import dagger.hilt.InstallIn
 import dagger.hilt.android.AndroidEntryPoint
-import dagger.hilt.android.EntryPointAccessors
-import dagger.hilt.android.components.ActivityComponent
 import io.homeassistant.companion.android.R
-import io.homeassistant.companion.android.onboarding.authentication.AuthenticationFragment
-import io.homeassistant.companion.android.onboarding.authentication.AuthenticationListener
-import io.homeassistant.companion.android.onboarding.discovery.DiscoveryListener
-import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationFragment
-import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationListener
-import io.homeassistant.companion.android.onboarding.manual.ManualSetupFragment
-import io.homeassistant.companion.android.onboarding.manual.ManualSetupListener
-import io.homeassistant.companion.android.webview.WebViewActivity
+import io.homeassistant.companion.android.onboarding.welcome.WelcomeFragment
 
 @AndroidEntryPoint
-class OnboardingActivity :
-    AppCompatActivity(),
-    DiscoveryListener,
-    ManualSetupListener,
-    AuthenticationListener,
-    MobileAppIntegrationListener {
+class OnboardingActivity : AppCompatActivity() {
 
     companion object {
-        const val SESSION_CONNECTED = "is_registered"
         private const val AUTHENTICATION_FRAGMENT = "authentication_fragment"
         private const val TAG = "OnboardingActivity"
 
@@ -39,24 +22,13 @@ class OnboardingActivity :
     }
 
     override fun onCreate(savedInstanceState: Bundle?) {
-        val entryPoint = EntryPointAccessors.fromActivity(this, OnboardingFragmentFactoryEntryPoint::class.java)
-        supportFragmentManager.fragmentFactory = entryPoint.getFragmentFactory()
         super.onCreate(savedInstanceState)
         setContentView(R.layout.activity_onboarding)
 
-        val sessionConnected = intent.extras?.getBoolean(SESSION_CONNECTED) ?: false
-
-        if (sessionConnected) {
-            supportFragmentManager
-                .beginTransaction()
-                .add(R.id.content, MobileAppIntegrationFragment::class.java, null)
-                .commit()
-        } else {
-            supportFragmentManager
-                .beginTransaction()
-                .add(R.id.content, WelcomeFragment::class.java, null)
-                .commit()
-        }
+        supportFragmentManager
+            .beginTransaction()
+            .add(R.id.content, WelcomeFragment::class.java, null)
+            .commit()
     }
 
     override fun onBackPressed() {
@@ -67,47 +39,6 @@ class OnboardingActivity :
         }
     }
 
-    override fun onSelectManualSetup() {
-        supportFragmentManager
-            .beginTransaction()
-            .replace(R.id.content, ManualSetupFragment::class.java, null)
-            .addToBackStack(null)
-            .commit()
-    }
-
-    override fun onHomeAssistantDiscover() {
-        supportFragmentManager
-            .beginTransaction()
-            .replace(R.id.content, AuthenticationFragment::class.java, null)
-            .addToBackStack(null)
-            .commit()
-    }
-
-    override fun onSelectUrl() {
-        supportFragmentManager
-            .beginTransaction()
-            .replace(R.id.content, AuthenticationFragment::class.java, null)
-            .addToBackStack(null)
-            .commit()
-    }
-
-    override fun onAuthenticationSuccess() {
-        supportFragmentManager
-            .beginTransaction()
-            .replace(R.id.content, MobileAppIntegrationFragment::class.java, null)
-            .addToBackStack(null)
-            .commit()
-    }
-
-    override fun onIntegrationRegistrationComplete() {
-        startWebView()
-    }
-
-    private fun startWebView() {
-        startActivity(WebViewActivity.newInstance(this))
-        finish()
-    }
-
     override fun dispatchKeyEvent(event: KeyEvent?): Boolean {
         // Temporary workaround to sideload on Android TV and use a remote for basic navigation in WebView
         val fragmentManager = supportFragmentManager.findFragmentByTag(AUTHENTICATION_FRAGMENT)
@@ -120,10 +51,4 @@ class OnboardingActivity :
 
         return super.dispatchKeyEvent(event)
     }
-
-    @EntryPoint
-    @InstallIn(ActivityComponent::class)
-    interface OnboardingFragmentFactoryEntryPoint {
-        fun getFragmentFactory(): OnboardingFragmentFactory
-    }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingFragmentFactory.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingFragmentFactory.kt
deleted file mode 100644
index 696d63bb32b..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingFragmentFactory.kt
+++ /dev/null
@@ -1,36 +0,0 @@
-package io.homeassistant.companion.android.onboarding
-
-import androidx.fragment.app.Fragment
-import androidx.fragment.app.FragmentFactory
-import io.homeassistant.companion.android.onboarding.authentication.AuthenticationFragment
-import io.homeassistant.companion.android.onboarding.authentication.AuthenticationPresenter
-import io.homeassistant.companion.android.onboarding.discovery.DiscoveryFragment
-import io.homeassistant.companion.android.onboarding.discovery.DiscoveryPresenter
-import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationFragment
-import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationPresenter
-import io.homeassistant.companion.android.onboarding.manual.ManualSetupFragment
-import io.homeassistant.companion.android.onboarding.manual.ManualSetupPresenter
-import io.homeassistant.companion.android.themes.ThemesManager
-import javax.inject.Inject
-
-class OnboardingFragmentFactory @Inject constructor(
-    private val authenticationPresenter: AuthenticationPresenter,
-    private val themesManager: ThemesManager,
-    private val discoveryPresenter: DiscoveryPresenter,
-    private val mobileAppIntegrationPresenter: MobileAppIntegrationPresenter,
-    private val manualSetupPresenter: ManualSetupPresenter
-) : FragmentFactory() {
-    override fun instantiate(classLoader: ClassLoader, className: String): Fragment {
-        return when (className) {
-            AuthenticationFragment::class.java.name ->
-                AuthenticationFragment(authenticationPresenter, themesManager)
-            DiscoveryFragment::class.java.name ->
-                DiscoveryFragment(discoveryPresenter)
-            MobileAppIntegrationFragment::class.java.name ->
-                MobileAppIntegrationFragment(mobileAppIntegrationPresenter)
-            ManualSetupFragment::class.java.name ->
-                ManualSetupFragment(manualSetupPresenter)
-            else -> super.instantiate(classLoader, className)
-        }
-    }
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingModule.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingModule.kt
deleted file mode 100644
index bec4b802bd9..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingModule.kt
+++ /dev/null
@@ -1,54 +0,0 @@
-package io.homeassistant.companion.android.onboarding
-
-import android.app.Activity
-import dagger.Binds
-import dagger.Module
-import dagger.Provides
-import dagger.hilt.InstallIn
-import dagger.hilt.android.components.ActivityComponent
-import io.homeassistant.companion.android.onboarding.authentication.AuthenticationListener
-import io.homeassistant.companion.android.onboarding.authentication.AuthenticationPresenter
-import io.homeassistant.companion.android.onboarding.authentication.AuthenticationPresenterImpl
-import io.homeassistant.companion.android.onboarding.discovery.DiscoveryListener
-import io.homeassistant.companion.android.onboarding.discovery.DiscoveryPresenter
-import io.homeassistant.companion.android.onboarding.discovery.DiscoveryPresenterImpl
-import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationListener
-import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationPresenter
-import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationPresenterImpl
-import io.homeassistant.companion.android.onboarding.manual.ManualSetupListener
-import io.homeassistant.companion.android.onboarding.manual.ManualSetupPresenter
-import io.homeassistant.companion.android.onboarding.manual.ManualSetupPresenterImpl
-
-@Module
-@InstallIn(ActivityComponent::class)
-abstract class OnboardingModule {
-
-    companion object {
-        @Provides
-        fun discoveryListener(activity: Activity): DiscoveryListener = activity as DiscoveryListener
-
-        @Provides
-        fun manualSetupListener(activity: Activity): ManualSetupListener =
-            activity as ManualSetupListener
-
-        @Provides
-        fun authenticationListener(activity: Activity): AuthenticationListener =
-            activity as AuthenticationListener
-
-        @Provides
-        fun mobileAppIntegrationListener(activity: Activity): MobileAppIntegrationListener =
-            activity as MobileAppIntegrationListener
-    }
-
-    @Binds
-    abstract fun authPresenter(authenticationPresenterImpl: AuthenticationPresenterImpl): AuthenticationPresenter
-
-    @Binds
-    abstract fun discoveryPresenter(discoveryPresenterImpl: DiscoveryPresenterImpl): DiscoveryPresenter
-
-    @Binds
-    abstract fun mobileAppIntegrationPresenter(mobileAppIntegrationPresenterImpl: MobileAppIntegrationPresenterImpl): MobileAppIntegrationPresenter
-
-    @Binds
-    abstract fun manualSetupPresenter(manualSetupPresenterImpl: ManualSetupPresenterImpl): ManualSetupPresenter
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingViewModel.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingViewModel.kt
new file mode 100644
index 00000000000..e1e777b624a
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/OnboardingViewModel.kt
@@ -0,0 +1,68 @@
+package io.homeassistant.companion.android.onboarding
+
+import android.app.Application
+import android.net.nsd.NsdManager
+import android.os.Build
+import android.webkit.URLUtil
+import android.widget.Toast
+import androidx.compose.runtime.mutableStateListOf
+import androidx.compose.runtime.mutableStateOf
+import androidx.core.content.ContextCompat
+import androidx.lifecycle.AndroidViewModel
+import dagger.hilt.android.lifecycle.HiltViewModel
+import io.homeassistant.companion.android.common.R
+import io.homeassistant.companion.android.common.data.authentication.AuthenticationRepository
+import io.homeassistant.companion.android.onboarding.discovery.HomeAssistantInstance
+import io.homeassistant.companion.android.onboarding.discovery.HomeAssistantSearcher
+import javax.inject.Inject
+
+@HiltViewModel
+class OnboardingViewModel @Inject constructor(
+    app: Application,
+    val authenticationRepository: AuthenticationRepository
+) : AndroidViewModel(app) {
+
+    private val homeAssistantSearcher = HomeAssistantSearcher(
+        ContextCompat.getSystemService(app, NsdManager::class.java)!!,
+        { instance ->
+            if (foundInstances.none { it.url == instance.url }) {
+                foundInstances.add(instance)
+            }
+        },
+        {
+            Toast.makeText(app, R.string.failed_scan, Toast.LENGTH_LONG).show()
+            // TODO: Go to manual setup?
+        }
+    )
+    val foundInstances = mutableStateListOf<HomeAssistantInstance>()
+    val manualUrl = mutableStateOf("")
+    val manualContinueEnabled = mutableStateOf(false)
+    val authCode = mutableStateOf("")
+    val deviceName = mutableStateOf(Build.MODEL)
+    val locationTrackingEnabled = mutableStateOf(false)
+
+    fun onManualUrlUpdated(url: String) {
+        manualUrl.value = url
+        manualContinueEnabled.value = URLUtil.isValidUrl(url)
+    }
+
+    fun registerAuthCode(code: String) {
+        authCode.value = code
+    }
+
+    fun onDeviceNameUpdated(name: String) {
+        deviceName.value = name
+    }
+
+    fun startSearch() {
+        homeAssistantSearcher.beginSearch()
+    }
+
+    fun stopSearch() {
+        homeAssistantSearcher.stopSearch()
+    }
+
+    override fun onCleared() {
+        stopSearch()
+    }
+}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationFragment.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationFragment.kt
index 91128b7014c..15cf4559a30 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationFragment.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationFragment.kt
@@ -1,6 +1,7 @@
 package io.homeassistant.companion.android.onboarding.authentication
 
 import android.annotation.SuppressLint
+import android.net.Uri
 import android.net.http.SslError
 import android.os.Build
 import android.os.Bundle
@@ -13,92 +14,111 @@ import android.webkit.WebResourceRequest
 import android.webkit.WebView
 import android.webkit.WebViewClient
 import androidx.appcompat.app.AlertDialog
+import androidx.compose.ui.platform.ComposeView
+import androidx.compose.ui.viewinterop.AndroidView
 import androidx.fragment.app.Fragment
+import androidx.fragment.app.activityViewModels
+import com.google.android.material.composethemeadapter.MdcTheme
+import dagger.hilt.android.AndroidEntryPoint
 import io.homeassistant.companion.android.BuildConfig
 import io.homeassistant.companion.android.R
+import io.homeassistant.companion.android.common.data.authentication.impl.AuthenticationService
+import io.homeassistant.companion.android.onboarding.OnboardingViewModel
+import io.homeassistant.companion.android.onboarding.integration.MobileAppIntegrationFragment
 import io.homeassistant.companion.android.themes.ThemesManager
 import io.homeassistant.companion.android.util.isStarted
+import okhttp3.HttpUrl.Companion.toHttpUrl
+import javax.inject.Inject
 import io.homeassistant.companion.android.common.R as commonR
 
-class AuthenticationFragment(
-    val presenter: AuthenticationPresenter,
-    val themesManager: ThemesManager
-) : Fragment(), AuthenticationView {
+@AndroidEntryPoint
+class AuthenticationFragment : Fragment() {
 
     companion object {
         private const val TAG = "AuthenticationFragment"
         private const val USER_AGENT_STRING = "HomeAssistant/Android"
+        private const val AUTH_CALLBACK = "homeassistant://auth-callback"
     }
 
-    private lateinit var webView: WebView
+    private val viewModel by activityViewModels<OnboardingViewModel>()
+
+    @Inject
+    lateinit var themesManager: ThemesManager
 
     @SuppressLint("SetJavaScriptEnabled")
     override fun onCreateView(
         inflater: LayoutInflater,
         container: ViewGroup?,
         savedInstanceState: Bundle?
-    ): View? {
-        presenter.init(this)
-        return inflater.inflate(R.layout.fragment_authentication, container, false).apply {
-            webView = findViewById(R.id.webview)
-            activity?.applicationContext?.let {
-                themesManager.setThemeForWebView(
-                    it,
-                    webView.settings
-                )
-            }
-            webView.apply {
-                settings.javaScriptEnabled = true
-                settings.domStorageEnabled = true
-                settings.userAgentString =
-                    USER_AGENT_STRING + " ${Build.MODEL} ${BuildConfig.VERSION_NAME}"
-                webViewClient = object : WebViewClient() {
-                    override fun shouldOverrideUrlLoading(view: WebView?, url: String): Boolean {
-                        return presenter.onRedirectUrl(url)
-                    }
+    ): View {
+        return ComposeView(requireContext()).apply {
+            setContent {
+                MdcTheme {
+                    AndroidView({
+                        WebView(requireContext()).apply {
+                            themesManager.setThemeForWebView(requireContext(), settings)
+                            settings.javaScriptEnabled = true
+                            settings.domStorageEnabled = true
+                            settings.userAgentString =
+                                USER_AGENT_STRING + " ${Build.MODEL} ${BuildConfig.VERSION_NAME}"
+                            webViewClient = object : WebViewClient() {
+                                override fun shouldOverrideUrlLoading(view: WebView?, url: String): Boolean {
+                                    return onRedirect(url)
+                                }
 
-                    override fun onReceivedError(
-                        view: WebView?,
-                        request: WebResourceRequest?,
-                        error: WebResourceError?
-                    ) {
-                        super.onReceivedError(view, request, error)
-                        showError(commonR.string.webview_error, null, error)
-                    }
+                                override fun onReceivedError(
+                                    view: WebView?,
+                                    request: WebResourceRequest?,
+                                    error: WebResourceError?
+                                ) {
+                                    super.onReceivedError(view, request, error)
+                                    showError(commonR.string.webview_error, null, error)
+                                }
 
-                    override fun onReceivedSslError(
-                        view: WebView?,
-                        handler: SslErrorHandler?,
-                        error: SslError?
-                    ) {
-                        super.onReceivedSslError(view, handler, error)
-                        showError(commonR.string.error_ssl, error, null)
-                    }
+                                override fun onReceivedSslError(
+                                    view: WebView?,
+                                    handler: SslErrorHandler?,
+                                    error: SslError?
+                                ) {
+                                    super.onReceivedSslError(view, handler, error)
+                                    showError(commonR.string.error_ssl, error, null)
+                                }
+                            }
+                            loadUrl(buildAuthUrl(viewModel.manualUrl.value))
+                        }
+                    })
                 }
             }
         }
     }
 
-    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
-        super.onViewCreated(view, savedInstanceState)
-
-        presenter.onViewReady()
-    }
-
-    override fun loadUrl(url: String) {
-        webView.loadUrl(url)
+    private fun buildAuthUrl(base: String): String {
+        return base.toHttpUrl()
+            .newBuilder()
+            .addPathSegments("auth/authorize")
+            .addEncodedQueryParameter("response_type", "code")
+            .addEncodedQueryParameter("client_id", AuthenticationService.CLIENT_ID)
+            .addEncodedQueryParameter("redirect_uri", AUTH_CALLBACK)
+            .build()
+            .toString()
     }
 
-    override fun openWebview() {
-        (activity as AuthenticationListener).onAuthenticationSuccess()
-    }
-
-    override fun onDestroy() {
-        presenter.onFinish()
-        super.onDestroy()
+    private fun onRedirect(url: String): Boolean {
+        val code = Uri.parse(url).getQueryParameter("code")
+        return if (url.startsWith(AUTH_CALLBACK) && !code.isNullOrBlank()) {
+            viewModel.registerAuthCode(code)
+            parentFragmentManager
+                .beginTransaction()
+                .replace(R.id.content, MobileAppIntegrationFragment::class.java, null)
+                .addToBackStack(null)
+                .commit()
+            true
+        } else {
+            false
+        }
     }
 
-    override fun showError(message: Int, sslError: SslError?, error: WebResourceError?) {
+    private fun showError(message: Int, sslError: SslError?, error: WebResourceError?) {
         if (!isStarted) {
             // Fragment is at least paused, can't display alert
             return
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationListener.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationListener.kt
deleted file mode 100644
index 7512da17779..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationListener.kt
+++ /dev/null
@@ -1,6 +0,0 @@
-package io.homeassistant.companion.android.onboarding.authentication
-
-interface AuthenticationListener {
-
-    fun onAuthenticationSuccess()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationPresenter.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationPresenter.kt
deleted file mode 100644
index 31b74570649..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationPresenter.kt
+++ /dev/null
@@ -1,12 +0,0 @@
-package io.homeassistant.companion.android.onboarding.authentication
-
-interface AuthenticationPresenter {
-
-    fun init(authenticationView: AuthenticationView)
-
-    fun onViewReady()
-
-    fun onRedirectUrl(redirectUrl: String): Boolean
-
-    fun onFinish()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationPresenterImpl.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationPresenterImpl.kt
deleted file mode 100644
index 3420d28b7a6..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationPresenterImpl.kt
+++ /dev/null
@@ -1,65 +0,0 @@
-package io.homeassistant.companion.android.onboarding.authentication
-
-import android.net.Uri
-import android.util.Log
-import io.homeassistant.companion.android.common.data.authentication.AuthenticationRepository
-import kotlinx.coroutines.CoroutineScope
-import kotlinx.coroutines.Dispatchers
-import kotlinx.coroutines.Job
-import kotlinx.coroutines.cancel
-import kotlinx.coroutines.launch
-import javax.inject.Inject
-import io.homeassistant.companion.android.common.R as commonR
-
-class AuthenticationPresenterImpl @Inject constructor(
-    private val authenticationUseCase: AuthenticationRepository
-) : AuthenticationPresenter {
-
-    companion object {
-        private const val TAG = "AuthenticationPresenter"
-        private const val AUTH_CALLBACK = "homeassistant://auth-callback"
-    }
-
-    private val mainScope: CoroutineScope = CoroutineScope(Dispatchers.Main + Job())
-
-    private lateinit var view: AuthenticationView
-
-    // TODO: Fix me by moving to ViewModels!
-    override fun init(authenticationView: AuthenticationView) {
-        view = authenticationView
-    }
-
-    override fun onViewReady() {
-        mainScope.launch {
-            try {
-                view.loadUrl(authenticationUseCase.buildAuthenticationUrl(AUTH_CALLBACK).toString())
-            } catch (e: Exception) {
-                Log.e(TAG, "Unable to create auth url and/or load it.", e)
-                view.showError(commonR.string.webview_error, null, null)
-            }
-        }
-    }
-
-    override fun onRedirectUrl(redirectUrl: String): Boolean {
-        val code = Uri.parse(redirectUrl).getQueryParameter("code")
-        return if (redirectUrl.startsWith(AUTH_CALLBACK) && !code.isNullOrBlank()) {
-            mainScope.launch {
-                try {
-                    authenticationUseCase.registerAuthorizationCode(code)
-                } catch (e: Exception) {
-                    Log.e(TAG, "unable to register code", e)
-                    view.showError(commonR.string.webview_error, null, null)
-                    return@launch
-                }
-                view.openWebview()
-            }
-            true
-        } else {
-            false
-        }
-    }
-
-    override fun onFinish() {
-        mainScope.cancel()
-    }
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationView.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationView.kt
deleted file mode 100644
index f6f1d1b5fdd..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/authentication/AuthenticationView.kt
+++ /dev/null
@@ -1,13 +0,0 @@
-package io.homeassistant.companion.android.onboarding.authentication
-
-import android.net.http.SslError
-import android.webkit.WebResourceError
-
-interface AuthenticationView {
-
-    fun loadUrl(url: String)
-
-    fun showError(message: Int, sslError: SslError?, error: WebResourceError?)
-
-    fun openWebview()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryFragment.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryFragment.kt
index 0ce1137d8e5..53407ca1941 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryFragment.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryFragment.kt
@@ -1,26 +1,27 @@
 package io.homeassistant.companion.android.onboarding.discovery
 
-import android.annotation.SuppressLint
 import android.content.Intent
 import android.net.Uri
-import android.net.nsd.NsdManager
 import android.os.Bundle
 import android.util.Log
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
-import android.widget.ArrayAdapter
 import android.widget.Toast
-import androidx.core.content.ContextCompat.getSystemService
+import androidx.compose.ui.platform.ComposeView
 import androidx.fragment.app.Fragment
+import androidx.fragment.app.activityViewModels
+import com.google.android.material.composethemeadapter.MdcTheme
+import dagger.hilt.android.AndroidEntryPoint
 import io.homeassistant.companion.android.R
-import io.homeassistant.companion.android.databinding.FragmentDiscoveryBinding
-import io.homeassistant.companion.android.databinding.InstanceItemBinding
+import io.homeassistant.companion.android.onboarding.OnboardingViewModel
+import io.homeassistant.companion.android.onboarding.authentication.AuthenticationFragment
+import io.homeassistant.companion.android.onboarding.manual.ManualSetupFragment
+import javax.inject.Inject
 import io.homeassistant.companion.android.common.R as commonR
 
-class DiscoveryFragment(
-    val presenter: DiscoveryPresenter
-) : Fragment(), DiscoveryView {
+@AndroidEntryPoint
+class DiscoveryFragment @Inject constructor() : Fragment() {
 
     companion object {
 
@@ -28,103 +29,63 @@ class DiscoveryFragment(
         private const val HOME_ASSISTANT = "https://www.home-assistant.io"
     }
 
-    private val instances = arrayListOf<HomeAssistantInstance>()
-
-    private lateinit var homeAssistantSearcher: HomeAssistantSearcher
-
-    private lateinit var listViewAdapter: ArrayAdapter<HomeAssistantInstance>
-
-    override fun onCreate(savedInstanceState: Bundle?) {
-        presenter.init(this)
-        super.onCreate(savedInstanceState)
-
-        homeAssistantSearcher = HomeAssistantSearcher(
-            getSystemService(requireContext(), NsdManager::class.java)!!,
-            this
-        )
-    }
+    private val viewModel by activityViewModels<OnboardingViewModel>()
 
     override fun onCreateView(
         inflater: LayoutInflater,
         container: ViewGroup?,
         savedInstanceState: Bundle?
     ): View {
-
-        listViewAdapter = object : ArrayAdapter<HomeAssistantInstance>(requireContext(), R.layout.instance_item, instances) {
-            @SuppressLint("InflateParams")
-            override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
-                val binding = if (convertView != null) {
-                    InstanceItemBinding.bind(convertView)
-                } else {
-                    InstanceItemBinding.inflate(LayoutInflater.from(context))
+        return ComposeView(requireContext()).apply {
+            setContent {
+                MdcTheme {
+                    DiscoveryView(
+                        onboardingViewModel = viewModel,
+                        whatIsThisClicked = { openHomeAssistantHomePage() },
+                        manualSetupClicked = { navigateToManualSetup() },
+                        instanceClicked = { onInstanceClicked(it) }
+                    )
                 }
-                getItem(position)?.let {
-                    binding.name.text = it.name
-                    binding.url.text = it.url.toString()
-                }
-
-                return binding.root
             }
         }
-
-        val binding = FragmentDiscoveryBinding.inflate(inflater, container, false)
-
-        binding.instanceListView.apply {
-            adapter = listViewAdapter
-            setOnItemClickListener { _, _, position, _ -> presenter.onUrlSelected(instances[position].url) }
-        }
-        binding.whatIsThis.apply {
-            setOnClickListener {
-                val intent = Intent(Intent.ACTION_VIEW)
-                intent.data = Uri.parse(HOME_ASSISTANT)
-                intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK
-                try {
-                    startActivity(intent)
-                } catch (e: Exception) {
-                    Log.e(TAG, "Unable to load Home Assistant home page", e)
-                    Toast.makeText(context, commonR.string.what_is_this_crash, Toast.LENGTH_LONG).show()
-                }
-            }
-        }
-        binding.manualSetup
-            .setOnClickListener { (activity as DiscoveryListener).onSelectManualSetup() }
-
-        return binding.root
     }
 
     override fun onResume() {
         super.onResume()
-        homeAssistantSearcher.beginSearch()
+        viewModel.startSearch()
     }
 
     override fun onPause() {
         super.onPause()
-        homeAssistantSearcher.stopSearch()
-    }
-
-    override fun onDestroy() {
-        super.onDestroy()
-        homeAssistantSearcher.stopSearch()
-        presenter.onFinish()
+        viewModel.stopSearch()
     }
 
-    override fun onUrlSaved() {
-        (activity as DiscoveryListener).onHomeAssistantDiscover()
+    private fun openHomeAssistantHomePage() {
+        val intent = Intent(Intent.ACTION_VIEW)
+        intent.data = Uri.parse(HOME_ASSISTANT)
+        intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK
+        try {
+            startActivity(intent)
+        } catch (e: Exception) {
+            Log.e(TAG, "Unable to load Home Assistant home page", e)
+            Toast.makeText(context, commonR.string.what_is_this_crash, Toast.LENGTH_LONG).show()
+        }
     }
 
-    override fun onInstanceFound(instance: HomeAssistantInstance) {
-        if (!instances.contains(instance)) {
-            instances.add(instance)
-            activity?.runOnUiThread {
-                listViewAdapter.notifyDataSetChanged()
-            }
-        }
+    private fun navigateToManualSetup() {
+        parentFragmentManager
+            .beginTransaction()
+            .replace(R.id.content, ManualSetupFragment::class.java, null)
+            .addToBackStack(null)
+            .commit()
     }
 
-    override fun onScanError() {
-        Toast.makeText(context, commonR.string.failed_scan, Toast.LENGTH_LONG).show()
-        if (instances.isEmpty()) {
-            (activity as DiscoveryListener).onSelectManualSetup()
-        }
+    private fun onInstanceClicked(instance: HomeAssistantInstance) {
+        viewModel.manualUrl.value = instance.url.toString()
+        parentFragmentManager
+            .beginTransaction()
+            .replace(R.id.content, AuthenticationFragment::class.java, null)
+            .addToBackStack(null)
+            .commit()
     }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryListener.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryListener.kt
deleted file mode 100644
index 1049c330bce..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryListener.kt
+++ /dev/null
@@ -1,8 +0,0 @@
-package io.homeassistant.companion.android.onboarding.discovery
-
-interface DiscoveryListener {
-
-    fun onSelectManualSetup()
-
-    fun onHomeAssistantDiscover()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryPresenter.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryPresenter.kt
deleted file mode 100644
index 52750814cf4..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryPresenter.kt
+++ /dev/null
@@ -1,9 +0,0 @@
-package io.homeassistant.companion.android.onboarding.discovery
-
-import java.net.URL
-
-interface DiscoveryPresenter {
-    fun init(discoveryView: DiscoveryView)
-    fun onUrlSelected(url: URL)
-    fun onFinish()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryPresenterImpl.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryPresenterImpl.kt
deleted file mode 100644
index 4dc7270cdfd..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryPresenterImpl.kt
+++ /dev/null
@@ -1,34 +0,0 @@
-package io.homeassistant.companion.android.onboarding.discovery
-
-import io.homeassistant.companion.android.common.data.url.UrlRepository
-import kotlinx.coroutines.CoroutineScope
-import kotlinx.coroutines.Dispatchers
-import kotlinx.coroutines.Job
-import kotlinx.coroutines.cancel
-import kotlinx.coroutines.launch
-import java.net.URL
-import javax.inject.Inject
-
-class DiscoveryPresenterImpl @Inject constructor(
-    val urlUseCase: UrlRepository
-) : DiscoveryPresenter {
-
-    private val mainScope: CoroutineScope = CoroutineScope(Dispatchers.Main + Job())
-
-    private lateinit var view: DiscoveryView
-
-    override fun init(discoveryView: DiscoveryView) {
-        view = discoveryView
-    }
-
-    override fun onUrlSelected(url: URL) {
-        mainScope.launch {
-            urlUseCase.saveUrl(url.toString())
-            view.onUrlSaved()
-        }
-    }
-
-    override fun onFinish() {
-        mainScope.cancel()
-    }
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryView.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryView.kt
index 06cc857d54e..cefa3c48fc3 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryView.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/DiscoveryView.kt
@@ -1,10 +1,100 @@
 package io.homeassistant.companion.android.onboarding.discovery
 
-interface DiscoveryView {
+import androidx.compose.foundation.clickable
+import androidx.compose.foundation.layout.Arrangement
+import androidx.compose.foundation.layout.Column
+import androidx.compose.foundation.layout.Row
+import androidx.compose.foundation.layout.fillMaxHeight
+import androidx.compose.foundation.layout.fillMaxWidth
+import androidx.compose.foundation.layout.padding
+import androidx.compose.foundation.rememberScrollState
+import androidx.compose.foundation.verticalScroll
+import androidx.compose.material.Divider
+import androidx.compose.material.Icon
+import androidx.compose.material.Text
+import androidx.compose.material.TextButton
+import androidx.compose.runtime.Composable
+import androidx.compose.ui.Alignment
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.res.painterResource
+import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.text.TextStyle
+import androidx.compose.ui.unit.dp
+import androidx.compose.ui.unit.sp
+import io.homeassistant.companion.android.R
+import io.homeassistant.companion.android.onboarding.OnboardingViewModel
+import io.homeassistant.companion.android.common.R as commonR
 
-    fun onUrlSaved()
+@Composable
+fun DiscoveryView(
+    onboardingViewModel: OnboardingViewModel,
+    whatIsThisClicked: () -> Unit,
+    manualSetupClicked: () -> Unit,
+    instanceClicked: (instance: HomeAssistantInstance) -> Unit
+) {
+    val scrollState = rememberScrollState()
+    Column(modifier = Modifier.fillMaxWidth()) {
 
-    fun onInstanceFound(instance: HomeAssistantInstance)
-
-    fun onScanError()
+        TextButton(
+            onClick = whatIsThisClicked,
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+        ) {
+            Text(
+                text = stringResource(commonR.string.what_is_this)
+            )
+        }
+        Text(
+            text = stringResource(id = commonR.string.select_instance),
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+                .padding(20.dp)
+        )
+        Column(
+            modifier = Modifier
+                .weight(1f)
+                .verticalScroll(scrollState)
+                .fillMaxWidth()
+                .fillMaxHeight()
+                .padding(20.dp)
+        ) {
+            onboardingViewModel.foundInstances.forEach { instance ->
+                Row(
+                    verticalAlignment = Alignment.CenterVertically,
+                    horizontalArrangement = Arrangement.SpaceBetween,
+                    modifier = Modifier
+                        .fillMaxWidth()
+                        .clickable(onClick = { instanceClicked(instance) })
+                ) {
+                    Column {
+                        Text(
+                            text = instance.name,
+                            style = TextStyle(
+                                fontSize = 20.sp
+                            )
+                        )
+                        Text(
+                            text = instance.url.toString(),
+                            style = TextStyle(
+                                fontSize = 16.sp
+                            )
+                        )
+                    }
+                    Icon(
+                        painter = painterResource(R.drawable.navigate_next),
+                        contentDescription = null
+                    )
+                }
+                Divider(Modifier.padding(10.dp))
+            }
+        }
+        TextButton(
+            onClick = manualSetupClicked,
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+                .padding(10.dp)
+        ) {
+            Text(text = stringResource(commonR.string.manual_setup))
+        }
+    }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/HomeAssistantSearcher.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/HomeAssistantSearcher.kt
index c534dbafb70..f0a0def2be5 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/HomeAssistantSearcher.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/discovery/HomeAssistantSearcher.kt
@@ -4,13 +4,13 @@ import android.net.nsd.NsdManager
 import android.net.nsd.NsdServiceInfo
 import android.util.Log
 import okio.internal.commonToUtf8String
-import java.lang.Exception
 import java.net.URL
 import java.util.concurrent.locks.ReentrantLock
 
 class HomeAssistantSearcher constructor(
     private val nsdManager: NsdManager,
-    private val discoveryView: DiscoveryView
+    private val onInstanceFound: (instance: HomeAssistantInstance) -> Unit,
+    private val onError: () -> Unit
 ) : NsdManager.DiscoveryListener {
 
     companion object {
@@ -32,7 +32,7 @@ class HomeAssistantSearcher constructor(
         } catch (e: Exception) {
             Log.e(TAG, "Issue starting discover.", e)
             isSearching = false
-            discoveryView.onScanError()
+            onError()
         }
     }
 
@@ -66,7 +66,7 @@ class HomeAssistantSearcher constructor(
                         val baseUrl = it.attributes["base_url"]
                         val version = it.attributes["version"]
                         if (baseUrl != null && version != null) {
-                            discoveryView.onInstanceFound(
+                            onInstanceFound(
                                 HomeAssistantInstance(
                                     it.serviceName,
                                     URL(baseUrl.commonToUtf8String()),
@@ -93,7 +93,7 @@ class HomeAssistantSearcher constructor(
 
     override fun onStartDiscoveryFailed(serviceType: String, errorCode: Int) {
         Log.e(TAG, "Discovery failed: Error code:$errorCode")
-        discoveryView.onScanError()
+        onError()
         stopSearch()
     }
 
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationFragment.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationFragment.kt
index b97a37a2c14..7ce2a63a2f1 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationFragment.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationFragment.kt
@@ -2,6 +2,7 @@ package io.homeassistant.companion.android.onboarding.integration
 
 import android.Manifest
 import android.annotation.SuppressLint
+import android.app.Activity
 import android.content.Intent
 import android.content.pm.PackageManager
 import android.net.Uri
@@ -13,124 +14,83 @@ import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
 import androidx.appcompat.app.AlertDialog
+import androidx.compose.ui.ExperimentalComposeUiApi
+import androidx.compose.ui.platform.ComposeView
 import androidx.fragment.app.Fragment
-import com.google.android.material.dialog.MaterialAlertDialogBuilder
-import com.google.android.material.switchmaterial.SwitchMaterial
-import io.homeassistant.companion.android.R
+import androidx.fragment.app.activityViewModels
+import com.google.android.material.composethemeadapter.MdcTheme
+import dagger.hilt.android.AndroidEntryPoint
 import io.homeassistant.companion.android.database.AppDatabase
 import io.homeassistant.companion.android.database.sensor.Sensor
-import io.homeassistant.companion.android.databinding.FragmentMobileAppIntegrationBinding
+import io.homeassistant.companion.android.onboarding.OnboardingViewModel
 import io.homeassistant.companion.android.sensors.LocationSensorManager
-import io.homeassistant.companion.android.sensors.SensorWorker
 import io.homeassistant.companion.android.util.DisabledLocationHandler
 import io.homeassistant.companion.android.common.R as commonR
 
-class MobileAppIntegrationFragment(
-    val presenter: MobileAppIntegrationPresenter
-) : Fragment(), MobileAppIntegrationView {
+@AndroidEntryPoint
+class MobileAppIntegrationFragment : Fragment() {
 
     companion object {
-        private const val LOADING_VIEW = 1
-        private const val ERROR_VIEW = 2
-
         private const val BACKGROUND_REQUEST = 99
 
         private const val LOCATION_REQUEST_CODE = 0
-
-        private var dialog: AlertDialog? = null
     }
-    private var _binding: FragmentMobileAppIntegrationBinding? = null
-    private val binding get() = _binding!!
 
+    private var dialog: AlertDialog? = null
+    private val viewModel by activityViewModels<OnboardingViewModel>()
+
+    @ExperimentalComposeUiApi
     override fun onCreateView(
         inflater: LayoutInflater,
         container: ViewGroup?,
         savedInstanceState: Bundle?
     ): View {
-        presenter.init(this)
-        _binding = FragmentMobileAppIntegrationBinding.inflate(inflater, container, false)
-        val context = binding.root.context
-
-        binding.deviceName.setText(Build.MODEL)
-
-        binding.locationTracking.let {
-            val sensorId = LocationSensorManager.backgroundLocation.id
-            setLocationTracking(it, DisabledLocationHandler.isLocationEnabled(context) && LocationSensorManager().checkPermission(context, sensorId))
-            it.setOnCheckedChangeListener { _, isChecked ->
-                var checked = isChecked
-                if (isChecked) {
-
-                    val locationEnabled = DisabledLocationHandler.isLocationEnabled(context)
-                    val permissionOk = LocationSensorManager().checkPermission(requireContext(), sensorId)
-
-                    if (!locationEnabled) {
-                        DisabledLocationHandler.showLocationDisabledWarnDialog(requireActivity(), arrayOf(getString(LocationSensorManager.backgroundLocation.name)))
-                        checked = false
-                    } else if (!permissionOk) {
-                        dialog = AlertDialog.Builder(requireContext())
-                            .setTitle(commonR.string.enable_location_tracking)
-                            .setMessage(commonR.string.enable_location_tracking_prompt)
-                            .setPositiveButton(android.R.string.ok) { _, _ ->
-                                requestPermissions(
-                                    sensorId
-                                )
-                            }
-                            .setNegativeButton(android.R.string.cancel) { _, _ -> }
-                            .create()
-                        dialog?.show()
-                        checked = false
-                    }
+        return ComposeView(requireContext()).apply {
+            setContent {
+                MdcTheme {
+                    MobileAppIntegrationView(
+                        onboardingViewModel = viewModel,
+                        openPrivacyPolicy = this@MobileAppIntegrationFragment::openPrivacyPolicy,
+                        onLocationTrackingChanged = this@MobileAppIntegrationFragment::onLocationTrackingChanged,
+                        onFinishClicked = this@MobileAppIntegrationFragment::onComplete
+                    )
                 }
-
-                setLocationTracking(it, checked)
             }
         }
-
-        binding.finish.setOnClickListener {
-            presenter.onRegistrationAttempt(false, binding.deviceName.text.toString())
-        }
-
-        binding.retry.setOnClickListener {
-            presenter.onRegistrationAttempt(false, binding.deviceName.text.toString())
-        }
-
-        return binding.root
-    }
-
-    override fun deviceRegistered() {
-        (activity as MobileAppIntegrationListener).onIntegrationRegistrationComplete()
     }
 
-    override fun showWarning() {
-        MaterialAlertDialogBuilder(requireContext())
-            .setTitle(commonR.string.firebase_error_title)
-            .setMessage(commonR.string.firebase_error_message)
-            .setPositiveButton(commonR.string.skip) { _, _ ->
-                presenter.onRegistrationAttempt(true, binding.deviceName.text.toString())
-            }
-            .setNegativeButton(commonR.string.retry) { _, _ ->
-                presenter.onRegistrationAttempt(false, binding.deviceName.text.toString())
-            }
-            .show()
-    }
+    private fun onLocationTrackingChanged(isChecked: Boolean) {
+        var checked = isChecked
+        if (isChecked) {
 
-    override fun showError() {
-        binding.viewFlipper.displayedChild = ERROR_VIEW
-    }
-
-    override fun showLoading() {
-        binding.viewFlipper.displayedChild = LOADING_VIEW
-    }
+            val locationEnabled = DisabledLocationHandler.isLocationEnabled(requireContext())
+            val permissionOk = LocationSensorManager().checkPermission(
+                requireContext(),
+                LocationSensorManager.backgroundLocation.id
+            )
 
-    override fun onDestroyView() {
-        super.onDestroyView()
-        _binding = null
-    }
+            if (!locationEnabled) {
+                DisabledLocationHandler.showLocationDisabledWarnDialog(
+                    requireActivity(),
+                    arrayOf(getString(LocationSensorManager.backgroundLocation.name))
+                )
+                checked = false
+            } else if (!permissionOk) {
+                dialog = AlertDialog.Builder(requireContext())
+                    .setTitle(commonR.string.enable_location_tracking)
+                    .setMessage(commonR.string.enable_location_tracking_prompt)
+                    .setPositiveButton(android.R.string.ok) { _, _ ->
+                        requestPermissions(LocationSensorManager.backgroundLocation.id)
+                    }
+                    .setNegativeButton(android.R.string.cancel) { _, _ -> }
+                    .create()
+                dialog?.show()
+                checked = false
+            }
+        }
 
-    override fun onDestroy() {
-        SensorWorker.start(requireContext())
-        presenter.onFinish()
-        super.onDestroy()
+        setLocationTracking(checked)
+        viewModel.locationTrackingEnabled.value = checked
     }
 
     private fun requestPermissions(sensorId: String) {
@@ -161,19 +121,21 @@ class MobileAppIntegrationFragment(
         if (permissions.contains(Manifest.permission.ACCESS_FINE_LOCATION) &&
             Build.VERSION.SDK_INT >= Build.VERSION_CODES.R
         ) {
-            requestPermissions(arrayOf(Manifest.permission.ACCESS_BACKGROUND_LOCATION), LOCATION_REQUEST_CODE)
+            requestPermissions(
+                arrayOf(Manifest.permission.ACCESS_BACKGROUND_LOCATION),
+                LOCATION_REQUEST_CODE
+            )
         }
 
         if (requestCode == LOCATION_REQUEST_CODE) {
             val hasPermission = grantResults.all { it == PackageManager.PERMISSION_GRANTED }
-            setLocationTracking(binding.locationTracking, hasPermission)
+            viewModel.locationTrackingEnabled.value = hasPermission
+            setLocationTracking(hasPermission)
             requestBackgroundAccess()
         }
     }
 
-    private fun setLocationTracking(locationTrackingSwitch: SwitchMaterial, enabled: Boolean) {
-        locationTrackingSwitch.isChecked = enabled
-
+    private fun setLocationTracking(enabled: Boolean) {
         val sensorDao = AppDatabase.getInstance(requireContext()).sensorDao()
         arrayOf(
             LocationSensorManager.backgroundLocation,
@@ -210,4 +172,20 @@ class MobileAppIntegrationFragment(
                 ?.isIgnoringBatteryOptimizations(activity?.packageName ?: "")
                 ?: false
     }
+
+    private fun onComplete() {
+        val retData = Intent().apply {
+            putExtra("URL", viewModel.manualUrl.value)
+            putExtra("AuthCode", viewModel.authCode.value)
+            putExtra("DeviceName", viewModel.deviceName.value)
+            putExtra("LocationTracking", viewModel.locationTrackingEnabled.value)
+        }
+        activity?.setResult(Activity.RESULT_OK, retData)
+        activity?.finish()
+    }
+
+    private fun openPrivacyPolicy() {
+        val intent = Intent(Intent.ACTION_VIEW, Uri.parse(getString(commonR.string.privacy_url)))
+        startActivity(intent)
+    }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationListener.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationListener.kt
deleted file mode 100644
index f9c5f9acaeb..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationListener.kt
+++ /dev/null
@@ -1,6 +0,0 @@
-package io.homeassistant.companion.android.onboarding.integration
-
-interface MobileAppIntegrationListener {
-
-    fun onIntegrationRegistrationComplete()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenter.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenter.kt
deleted file mode 100644
index 3039030e4ec..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenter.kt
+++ /dev/null
@@ -1,7 +0,0 @@
-package io.homeassistant.companion.android.onboarding.integration
-
-interface MobileAppIntegrationPresenter {
-    fun init(mobileAppIntegrationView: MobileAppIntegrationView)
-    fun onRegistrationAttempt(simple: Boolean, deviceName: String)
-    fun onFinish()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterBase.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterBase.kt
deleted file mode 100644
index fd3c91410e2..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterBase.kt
+++ /dev/null
@@ -1,66 +0,0 @@
-package io.homeassistant.companion.android.onboarding.integration
-
-import android.util.Log
-import io.homeassistant.companion.android.BuildConfig
-import io.homeassistant.companion.android.common.data.integration.DeviceRegistration
-import io.homeassistant.companion.android.common.data.integration.IntegrationRepository
-import kotlinx.coroutines.CoroutineScope
-import kotlinx.coroutines.Dispatchers
-import kotlinx.coroutines.Job
-import kotlinx.coroutines.cancel
-import kotlinx.coroutines.launch
-import kotlinx.coroutines.withContext
-
-open class MobileAppIntegrationPresenterBase constructor(
-    private val integrationUseCase: IntegrationRepository
-) : MobileAppIntegrationPresenter {
-
-    companion object {
-        internal const val TAG = "IntegrationPresenter"
-    }
-
-    private val mainScope: CoroutineScope = CoroutineScope(Dispatchers.Main + Job())
-    private val ioScope: CoroutineScope = CoroutineScope(Dispatchers.IO)
-    private lateinit var view: MobileAppIntegrationView
-
-    override fun init(mobileAppIntegrationView: MobileAppIntegrationView) {
-        view = mobileAppIntegrationView
-    }
-
-    internal open suspend fun createRegistration(simple: Boolean, deviceName: String): DeviceRegistration {
-        return DeviceRegistration(
-            "${BuildConfig.VERSION_NAME} (${BuildConfig.VERSION_CODE})",
-            deviceName
-        )
-    }
-
-    override fun onRegistrationAttempt(simple: Boolean, deviceName: String) {
-        view.showLoading()
-        ioScope.launch {
-            val deviceRegistration: DeviceRegistration
-            try {
-                deviceRegistration = createRegistration(simple, deviceName)
-            } catch (e: Exception) {
-                Log.e(TAG, "Unable to create registration.", e)
-                withContext(mainScope.coroutineContext) {
-                    view.showWarning()
-                }
-                return@launch
-            }
-            try {
-                integrationUseCase.registerDevice(deviceRegistration)
-            } catch (e: Exception) {
-                Log.e(TAG, "Unable to register with Home Assistant", e)
-                withContext(mainScope.coroutineContext) {
-                    view.showError()
-                }
-                return@launch
-            }
-            view.deviceRegistered()
-        }
-    }
-
-    override fun onFinish() {
-        mainScope.cancel()
-    }
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationView.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationView.kt
index 55fa753facb..85f6eec2fe6 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationView.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationView.kt
@@ -1,12 +1,92 @@
 package io.homeassistant.companion.android.onboarding.integration
 
-interface MobileAppIntegrationView {
+import androidx.compose.foundation.layout.Column
+import androidx.compose.foundation.layout.Row
+import androidx.compose.foundation.layout.Spacer
+import androidx.compose.foundation.layout.fillMaxWidth
+import androidx.compose.foundation.layout.padding
+import androidx.compose.foundation.text.KeyboardActions
+import androidx.compose.foundation.text.KeyboardOptions
+import androidx.compose.material.Button
+import androidx.compose.material.MaterialTheme
+import androidx.compose.material.Switch
+import androidx.compose.material.SwitchDefaults
+import androidx.compose.material.Text
+import androidx.compose.material.TextButton
+import androidx.compose.material.TextField
+import androidx.compose.runtime.Composable
+import androidx.compose.ui.Alignment
+import androidx.compose.ui.ExperimentalComposeUiApi
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.platform.LocalSoftwareKeyboardController
+import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.text.font.FontWeight
+import androidx.compose.ui.text.input.ImeAction
+import androidx.compose.ui.unit.dp
+import io.homeassistant.companion.android.onboarding.OnboardingViewModel
+import io.homeassistant.companion.android.common.R as commonR
 
-    fun deviceRegistered()
+@ExperimentalComposeUiApi
+@Composable
+fun MobileAppIntegrationView(
+    onboardingViewModel: OnboardingViewModel,
+    openPrivacyPolicy: () -> Unit,
+    onLocationTrackingChanged: (Boolean) -> Unit,
+    onFinishClicked: () -> Unit
+) {
 
-    fun showLoading()
+    val keyboardController = LocalSoftwareKeyboardController.current
+    Column(
+        modifier = Modifier
+            .fillMaxWidth()
+            .padding(16.dp)
+    ) {
 
-    fun showWarning()
+        Text(
+            text = stringResource(id = commonR.string.connect_to_home_assistant),
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+        )
 
-    fun showError()
+        TextField(
+            value = onboardingViewModel.deviceName.value,
+            onValueChange = { onboardingViewModel.onDeviceNameUpdated(it) },
+            modifier = Modifier.align(Alignment.CenterHorizontally),
+            label = { Text(stringResource(id = commonR.string.device_name)) },
+            singleLine = true,
+            keyboardOptions = KeyboardOptions(imeAction = ImeAction.Done),
+            keyboardActions = KeyboardActions(
+                onDone = {
+                    keyboardController?.hide()
+                }
+            )
+        )
+        Row {
+            Text(
+                text = stringResource(commonR.string.enable_location_tracking),
+                modifier = Modifier
+                    .align(Alignment.CenterVertically)
+                    .weight(1f)
+            )
+            Switch(
+                checked = onboardingViewModel.locationTrackingEnabled.value,
+                onCheckedChange = onLocationTrackingChanged,
+                colors = SwitchDefaults.colors(uncheckedThumbColor = MaterialTheme.colors.secondary)
+            )
+        }
+        Text(
+            text = stringResource(id = commonR.string.enable_location_tracking_description),
+            fontWeight = FontWeight.Light
+        )
+        TextButton(onClick = openPrivacyPolicy) {
+            Text(stringResource(id = commonR.string.privacy_url))
+        }
+        Spacer(modifier = Modifier.weight(1f))
+        Button(
+            onClick = onFinishClicked,
+            modifier = Modifier.align(Alignment.End)
+        ) {
+            Text(stringResource(id = commonR.string.finish))
+        }
+    }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupFragment.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupFragment.kt
index 1d18914fbcb..88313ccff02 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupFragment.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupFragment.kt
@@ -1,69 +1,47 @@
 package io.homeassistant.companion.android.onboarding.manual
 
 import android.os.Bundle
-import android.util.Patterns
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
-import android.view.inputmethod.EditorInfo
-import android.webkit.URLUtil
-import androidx.core.widget.addTextChangedListener
+import androidx.compose.ui.ExperimentalComposeUiApi
+import androidx.compose.ui.platform.ComposeView
 import androidx.fragment.app.Fragment
-import io.homeassistant.companion.android.databinding.FragmentManualSetupBinding
-import io.homeassistant.companion.android.common.R as commonR
+import androidx.fragment.app.activityViewModels
+import com.google.android.material.composethemeadapter.MdcTheme
+import dagger.hilt.android.AndroidEntryPoint
+import io.homeassistant.companion.android.R
+import io.homeassistant.companion.android.onboarding.OnboardingViewModel
+import io.homeassistant.companion.android.onboarding.authentication.AuthenticationFragment
 
-class ManualSetupFragment(
-    val presenter: ManualSetupPresenter
-) : Fragment(), ManualSetupView {
+@AndroidEntryPoint
+class ManualSetupFragment : Fragment() {
 
-    private var binding: FragmentManualSetupBinding? = null
+    private val viewModel by activityViewModels<OnboardingViewModel>()
 
+    @ExperimentalComposeUiApi
     override fun onCreateView(
         inflater: LayoutInflater,
         container: ViewGroup?,
         savedInstanceState: Bundle?
     ): View {
-        presenter.init(this)
-        val binding = FragmentManualSetupBinding.inflate(inflater, container, false)
-
-        binding.homeAssistantUrl.addTextChangedListener { text ->
-            binding.ok.isEnabled = URLUtil.isValidUrl(text.toString()) && Patterns.WEB_URL.matcher(text.toString()).matches()
-        }
-        binding.homeAssistantUrl.setOnEditorActionListener { _, actionId, _ ->
-            if (actionId == EditorInfo.IME_ACTION_DONE) {
-                submitForm()
-                return@setOnEditorActionListener true
+        return ComposeView(requireContext()).apply {
+            setContent {
+                MdcTheme {
+                    ManualSetupView(
+                        onboardingViewModel = viewModel,
+                        connectedClicked = { connectClicked() }
+                    )
+                }
             }
-            return@setOnEditorActionListener false
-        }
-        binding.ok.setOnClickListener {
-            submitForm()
         }
-
-        this.binding = binding
-        return binding.root
-    }
-
-    private fun submitForm() {
-        presenter.onClickOk(binding!!.homeAssistantUrl.text.toString())
-    }
-
-    override fun urlSaved() {
-        (activity as ManualSetupListener).onSelectUrl()
-    }
-
-    override fun displayUrlError() {
-        binding?.urlTextLayout?.error =
-            getString(commonR.string.url_parse_error)
-    }
-
-    override fun onDestroyView() {
-        super.onDestroyView()
-        binding = null
     }
 
-    override fun onDestroy() {
-        presenter.onFinish()
-        super.onDestroy()
+    private fun connectClicked() {
+        parentFragmentManager
+            .beginTransaction()
+            .replace(R.id.content, AuthenticationFragment::class.java, null)
+            .addToBackStack(null)
+            .commit()
     }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupListener.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupListener.kt
deleted file mode 100644
index 717f9df9557..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupListener.kt
+++ /dev/null
@@ -1,6 +0,0 @@
-package io.homeassistant.companion.android.onboarding.manual
-
-interface ManualSetupListener {
-
-    fun onSelectUrl()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenter.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenter.kt
deleted file mode 100644
index f54c9545c8b..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenter.kt
+++ /dev/null
@@ -1,7 +0,0 @@
-package io.homeassistant.companion.android.onboarding.manual
-
-interface ManualSetupPresenter {
-    fun init(manualSetupView: ManualSetupView)
-    fun onClickOk(urlString: String)
-    fun onFinish()
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenterImpl.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenterImpl.kt
deleted file mode 100644
index 29ea7e26d75..00000000000
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupPresenterImpl.kt
+++ /dev/null
@@ -1,45 +0,0 @@
-package io.homeassistant.companion.android.onboarding.manual
-
-import android.util.Log
-import io.homeassistant.companion.android.common.data.MalformedHttpUrlException
-import io.homeassistant.companion.android.common.data.url.UrlRepository
-import kotlinx.coroutines.CoroutineScope
-import kotlinx.coroutines.Dispatchers
-import kotlinx.coroutines.Job
-import kotlinx.coroutines.cancel
-import kotlinx.coroutines.launch
-import javax.inject.Inject
-
-class ManualSetupPresenterImpl @Inject constructor(
-    private val urlUseCase: UrlRepository
-) : ManualSetupPresenter {
-
-    companion object {
-        private const val TAG = "ManualSetupPresenter"
-    }
-
-    private val mainScope: CoroutineScope = CoroutineScope(Dispatchers.Main + Job())
-
-    private lateinit var view: ManualSetupView
-
-    override fun init(manualSetupView: ManualSetupView) {
-        view = manualSetupView
-    }
-
-    override fun onClickOk(urlString: String) {
-        mainScope.launch {
-            try {
-                urlUseCase.saveUrl(urlString, false)
-            } catch (e: MalformedHttpUrlException) {
-                Log.e(TAG, "Unable to parse url", e)
-                view.displayUrlError()
-                return@launch
-            }
-            view.urlSaved()
-        }
-    }
-
-    override fun onFinish() {
-        mainScope.cancel()
-    }
-}
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupView.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupView.kt
index 92a9612de8d..4739e83cff3 100644
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupView.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/manual/ManualSetupView.kt
@@ -1,8 +1,76 @@
 package io.homeassistant.companion.android.onboarding.manual
 
-interface ManualSetupView {
+import androidx.compose.foundation.layout.Column
+import androidx.compose.foundation.layout.fillMaxWidth
+import androidx.compose.foundation.layout.padding
+import androidx.compose.foundation.text.KeyboardActions
+import androidx.compose.foundation.text.KeyboardOptions
+import androidx.compose.material.Button
+import androidx.compose.material.Text
+import androidx.compose.material.TextField
+import androidx.compose.runtime.Composable
+import androidx.compose.ui.Alignment
+import androidx.compose.ui.ExperimentalComposeUiApi
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.platform.LocalSoftwareKeyboardController
+import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.text.font.FontWeight
+import androidx.compose.ui.text.input.ImeAction
+import androidx.compose.ui.unit.dp
+import io.homeassistant.companion.android.onboarding.OnboardingViewModel
+import io.homeassistant.companion.android.common.R as commonR
 
-    fun urlSaved()
+@ExperimentalComposeUiApi
+@Composable
+fun ManualSetupView(
+    onboardingViewModel: OnboardingViewModel,
+    connectedClicked: () -> Unit
+) {
+    val keyboardController = LocalSoftwareKeyboardController.current
 
-    fun displayUrlError()
+    Column(
+        modifier = Modifier
+            .fillMaxWidth()
+            .padding(20.dp)
+    ) {
+
+        Text(
+            text = stringResource(commonR.string.manual_title),
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+        )
+
+        Text(
+            text = stringResource(id = commonR.string.manual_desc),
+            fontWeight = FontWeight.Light,
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+                .padding(20.dp)
+        )
+
+        TextField(
+            value = onboardingViewModel.manualUrl.value,
+            onValueChange = { onboardingViewModel.onManualUrlUpdated(it) },
+            modifier = Modifier.align(Alignment.CenterHorizontally),
+            label = { Text(stringResource(id = commonR.string.input_url)) },
+            singleLine = true,
+            keyboardOptions = KeyboardOptions(imeAction = ImeAction.Done),
+            keyboardActions = KeyboardActions(
+                onDone = {
+                    keyboardController?.hide()
+                    connectedClicked()
+                }
+            )
+        )
+
+        Button(
+            enabled = onboardingViewModel.manualContinueEnabled.value,
+            onClick = connectedClicked,
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+                .padding(10.dp)
+        ) {
+            Text(stringResource(commonR.string.connect))
+        }
+    }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/WelcomeFragment.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/welcome/WelcomeFragment.kt
old mode 100755
new mode 100644
similarity index 96%
rename from app/src/main/java/io/homeassistant/companion/android/onboarding/WelcomeFragment.kt
rename to app/src/main/java/io/homeassistant/companion/android/onboarding/welcome/WelcomeFragment.kt
index 9c76040a2b2..00370f5ee5c
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/WelcomeFragment.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/welcome/WelcomeFragment.kt
@@ -1,4 +1,4 @@
-package io.homeassistant.companion.android.onboarding
+package io.homeassistant.companion.android.onboarding.welcome
 
 import android.os.Build
 import android.os.Bundle
diff --git a/app/src/main/java/io/homeassistant/companion/android/onboarding/views/WelcomeView.kt b/app/src/main/java/io/homeassistant/companion/android/onboarding/welcome/WelcomeView.kt
old mode 100755
new mode 100644
similarity index 97%
rename from app/src/main/java/io/homeassistant/companion/android/onboarding/views/WelcomeView.kt
rename to app/src/main/java/io/homeassistant/companion/android/onboarding/welcome/WelcomeView.kt
index f30b7a46d0a..47f1566f876
--- a/app/src/main/java/io/homeassistant/companion/android/onboarding/views/WelcomeView.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/onboarding/welcome/WelcomeView.kt
@@ -1,104 +1,104 @@
-package io.homeassistant.companion.android.onboarding.views
-
-import androidx.compose.foundation.Image
-import androidx.compose.foundation.layout.Arrangement
-import androidx.compose.foundation.layout.Column
-import androidx.compose.foundation.layout.padding
-import androidx.compose.foundation.layout.size
-import androidx.compose.foundation.rememberScrollState
-import androidx.compose.foundation.text.ClickableText
-import androidx.compose.foundation.verticalScroll
-import androidx.compose.material.Button
-import androidx.compose.material.MaterialTheme
-import androidx.compose.material.Text
-import androidx.compose.runtime.Composable
-import androidx.compose.ui.Alignment
-import androidx.compose.ui.Modifier
-import androidx.compose.ui.platform.LocalUriHandler
-import androidx.compose.ui.res.painterResource
-import androidx.compose.ui.res.stringResource
-import androidx.compose.ui.text.SpanStyle
-import androidx.compose.ui.text.buildAnnotatedString
-import androidx.compose.ui.text.font.FontWeight
-import androidx.compose.ui.text.style.TextAlign
-import androidx.compose.ui.text.style.TextDecoration
-import androidx.compose.ui.text.withStyle
-import androidx.compose.ui.tooling.preview.Preview
-import androidx.compose.ui.unit.dp
-import androidx.compose.ui.unit.sp
-import io.homeassistant.companion.android.R
-import io.homeassistant.companion.android.common.R as commonR
-
-@Composable
-fun WelcomeView(
-    onContinue: () -> Unit
-) {
-    val scrollState = rememberScrollState()
-    Column(
-        verticalArrangement = Arrangement.Center,
-        modifier = Modifier.verticalScroll(scrollState)
-    ) {
-        Image(
-            painter = painterResource(id = R.drawable.app_icon_round),
-            contentDescription = stringResource(
-                id = commonR.string.app_name
-            ),
-            modifier = Modifier
-                .size(width = 274.dp, height = 202.dp)
-                .align(Alignment.CenterHorizontally)
-                .padding(bottom = 15.dp)
-        )
-        Text(
-            fontSize = 19.sp,
-            fontWeight = FontWeight.Bold,
-            textAlign = TextAlign.Center,
-            text = stringResource(commonR.string.welcome_hass),
-            modifier = Modifier
-                .align(Alignment.CenterHorizontally)
-        )
-        Text(
-            fontSize = 17.sp,
-            text = stringResource(commonR.string.welcome_hass_desc),
-            modifier = Modifier
-                .padding(bottom = 15.dp, start = 30.dp, end = 20.dp, top = 10.dp)
-        )
-        val annotatedString = buildAnnotatedString {
-            pushStringAnnotation("learn", "https://www.home-assistant.io")
-            withStyle(
-                style = SpanStyle(
-                    color = MaterialTheme.colors.primary,
-                    textDecoration = TextDecoration.Underline
-                )
-            ) {
-                append(stringResource(id = commonR.string.learn_more))
-            }
-            pop()
-        }
-        val uriHandler = LocalUriHandler.current
-        ClickableText(
-            text = annotatedString,
-            onClick = {
-                annotatedString.getStringAnnotations("learn", it, it).firstOrNull()?.let { link ->
-                    uriHandler.openUri(link.item)
-                }
-            },
-            modifier = Modifier
-                .padding(bottom = 15.dp)
-                .align(Alignment.CenterHorizontally)
-        )
-
-        Button(
-            onClick = onContinue,
-            modifier = Modifier
-                .align(Alignment.CenterHorizontally)
-        ) {
-            Text(text = stringResource(id = commonR.string.continue_connect))
-        }
-    }
-}
-
-@Composable
-@Preview
-private fun PreviewWelcome() {
-    WelcomeView(onContinue = {})
-}
+package io.homeassistant.companion.android.onboarding.views
+
+import androidx.compose.foundation.Image
+import androidx.compose.foundation.layout.Arrangement
+import androidx.compose.foundation.layout.Column
+import androidx.compose.foundation.layout.padding
+import androidx.compose.foundation.layout.size
+import androidx.compose.foundation.rememberScrollState
+import androidx.compose.foundation.text.ClickableText
+import androidx.compose.foundation.verticalScroll
+import androidx.compose.material.Button
+import androidx.compose.material.MaterialTheme
+import androidx.compose.material.Text
+import androidx.compose.runtime.Composable
+import androidx.compose.ui.Alignment
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.platform.LocalUriHandler
+import androidx.compose.ui.res.painterResource
+import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.text.SpanStyle
+import androidx.compose.ui.text.buildAnnotatedString
+import androidx.compose.ui.text.font.FontWeight
+import androidx.compose.ui.text.style.TextAlign
+import androidx.compose.ui.text.style.TextDecoration
+import androidx.compose.ui.text.withStyle
+import androidx.compose.ui.tooling.preview.Preview
+import androidx.compose.ui.unit.dp
+import androidx.compose.ui.unit.sp
+import io.homeassistant.companion.android.R
+import io.homeassistant.companion.android.common.R as commonR
+
+@Composable
+fun WelcomeView(
+    onContinue: () -> Unit
+) {
+    val scrollState = rememberScrollState()
+    Column(
+        verticalArrangement = Arrangement.Center,
+        modifier = Modifier.verticalScroll(scrollState)
+    ) {
+        Image(
+            painter = painterResource(id = R.drawable.app_icon_round),
+            contentDescription = stringResource(
+                id = commonR.string.app_name
+            ),
+            modifier = Modifier
+                .size(width = 274.dp, height = 202.dp)
+                .align(Alignment.CenterHorizontally)
+                .padding(bottom = 15.dp)
+        )
+        Text(
+            fontSize = 19.sp,
+            fontWeight = FontWeight.Bold,
+            textAlign = TextAlign.Center,
+            text = stringResource(commonR.string.welcome_hass),
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+        )
+        Text(
+            fontSize = 17.sp,
+            text = stringResource(commonR.string.welcome_hass_desc),
+            modifier = Modifier
+                .padding(bottom = 15.dp, start = 30.dp, end = 20.dp, top = 10.dp)
+        )
+        val annotatedString = buildAnnotatedString {
+            pushStringAnnotation("learn", "https://www.home-assistant.io")
+            withStyle(
+                style = SpanStyle(
+                    color = MaterialTheme.colors.primary,
+                    textDecoration = TextDecoration.Underline
+                )
+            ) {
+                append(stringResource(id = commonR.string.learn_more))
+            }
+            pop()
+        }
+        val uriHandler = LocalUriHandler.current
+        ClickableText(
+            text = annotatedString,
+            onClick = {
+                annotatedString.getStringAnnotations("learn", it, it).firstOrNull()?.let { link ->
+                    uriHandler.openUri(link.item)
+                }
+            },
+            modifier = Modifier
+                .padding(bottom = 15.dp)
+                .align(Alignment.CenterHorizontally)
+        )
+
+        Button(
+            onClick = onContinue,
+            modifier = Modifier
+                .align(Alignment.CenterHorizontally)
+        ) {
+            Text(text = stringResource(id = commonR.string.continue_connect))
+        }
+    }
+}
+
+@Composable
+@Preview
+private fun PreviewWelcome() {
+    WelcomeView(onContinue = {})
+}
diff --git a/app/src/main/java/io/homeassistant/companion/android/util/DisabledLocationHandler.kt b/app/src/main/java/io/homeassistant/companion/android/util/DisabledLocationHandler.kt
index 0cc7d88040d..ab8879ca561 100644
--- a/app/src/main/java/io/homeassistant/companion/android/util/DisabledLocationHandler.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/util/DisabledLocationHandler.kt
@@ -53,7 +53,7 @@ object DisabledLocationHandler {
         NotificationManagerCompat.from(activity).cancel(DISABLED_LOCATION_WARN_ID, DISABLED_LOCATION_WARN_ID.hashCode())
     }
 
-    fun showLocationDisabledWarnDialog(activity: Activity, settings: Array<String>, showAsNotification: Boolean = false, withDisableOption: Boolean = false, callback: (() -> Unit)? = null) {
+    fun showLocationDisabledWarnDialog(context: Context, settings: Array<String>, showAsNotification: Boolean = false, withDisableOption: Boolean = false, callback: (() -> Unit)? = null) {
         var positionTextId = commonR.string.confirm_positive
         var negativeTextId = commonR.string.confirm_negative
         if (withDisableOption && callback != null) {
@@ -67,7 +67,7 @@ object DisabledLocationHandler {
         intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY)
         intent.addFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)
 
-        if (intent.resolveActivity(activity.packageManager) == null) {
+        if (intent.resolveActivity(context.packageManager) == null) {
             intent.action = Settings.ACTION_SETTINGS
         }
 
@@ -76,40 +76,40 @@ object DisabledLocationHandler {
             parameters += "- $setting\n"
 
         if ((!withDisableOption || callback == null) && showAsNotification) {
-            val notificationManager = NotificationManagerCompat.from(activity)
+            val notificationManager = NotificationManagerCompat.from(context)
             if (notificationManager.getActiveNotification(DISABLED_LOCATION_WARN_ID, DISABLED_LOCATION_WARN_ID.hashCode()) == null) {
                 var channelID = "Location disabled"
 
                 if (VERSION.SDK_INT >= VERSION_CODES.O) {
-                    val channel = NotificationChannel(channelID, activity.applicationContext.getString(commonR.string.location_warn_channel), NotificationManager.IMPORTANCE_DEFAULT)
+                    val channel = NotificationChannel(channelID, context.applicationContext.getString(commonR.string.location_warn_channel), NotificationManager.IMPORTANCE_DEFAULT)
                     notificationManager.createNotificationChannel(channel)
                 }
 
                 val pendingIntent = PendingIntent.getActivity(
-                    activity, 0,
+                    context, 0,
                     intent, PendingIntent.FLAG_IMMUTABLE
                 )
 
-                val notificationBuilder = NotificationCompat.Builder(activity, channelID)
+                val notificationBuilder = NotificationCompat.Builder(context, channelID)
                     .setSmallIcon(commonR.drawable.ic_stat_ic_notification)
                     .setColor(Color.RED)
                     .setOngoing(true)
-                    .setContentTitle(activity.applicationContext.getString(commonR.string.location_disabled_title))
-                    .setContentText(activity.applicationContext.getString(commonR.string.location_disabled_notification_short_message))
+                    .setContentTitle(context.applicationContext.getString(commonR.string.location_disabled_title))
+                    .setContentText(context.applicationContext.getString(commonR.string.location_disabled_notification_short_message))
                     .setStyle(
                         NotificationCompat.BigTextStyle()
-                            .bigText(activity.applicationContext.getString(commonR.string.location_disabled_notification_message, parameters))
+                            .bigText(context.applicationContext.getString(commonR.string.location_disabled_notification_message, parameters))
                     )
                     .setContentIntent(pendingIntent)
 
-                NotificationManagerCompat.from(activity).notify(DISABLED_LOCATION_WARN_ID, DISABLED_LOCATION_WARN_ID.hashCode(), notificationBuilder.build())
+                NotificationManagerCompat.from(context).notify(DISABLED_LOCATION_WARN_ID, DISABLED_LOCATION_WARN_ID.hashCode(), notificationBuilder.build())
             }
         } else {
-            AlertDialog.Builder(activity)
+            AlertDialog.Builder(context)
                 .setTitle(commonR.string.location_disabled_title)
-                .setMessage(activity.applicationContext.getString(commonR.string.location_disabled_message, parameters))
+                .setMessage(context.applicationContext.getString(commonR.string.location_disabled_message, parameters))
                 .setPositiveButton(positionTextId) { _, _ ->
-                    activity.applicationContext.startActivity(intent)
+                    context.applicationContext.startActivity(intent)
                 }
                 .setNegativeButton(negativeTextId) { _, _ ->
                     if (withDisableOption && callback != null) {
diff --git a/app/src/main/java/io/homeassistant/companion/android/webview/WebView.kt b/app/src/main/java/io/homeassistant/companion/android/webview/WebView.kt
index 8aef1c597f0..3e34920e570 100644
--- a/app/src/main/java/io/homeassistant/companion/android/webview/WebView.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/webview/WebView.kt
@@ -16,7 +16,7 @@ interface WebView {
 
     fun setExternalAuth(script: String)
 
-    fun openOnBoarding()
+    fun relaunchApp()
 
     fun showError(errorType: ErrorType = ErrorType.TIMEOUT, error: SslError? = null, description: String? = null)
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/webview/WebViewActivity.kt b/app/src/main/java/io/homeassistant/companion/android/webview/WebViewActivity.kt
index 496e32162cf..f4da6a252cd 100644
--- a/app/src/main/java/io/homeassistant/companion/android/webview/WebViewActivity.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/webview/WebViewActivity.kt
@@ -68,8 +68,8 @@ import io.homeassistant.companion.android.database.authentication.Authentication
 import io.homeassistant.companion.android.databinding.ActivityWebviewBinding
 import io.homeassistant.companion.android.databinding.DialogAuthenticationBinding
 import io.homeassistant.companion.android.databinding.ExoPlayerViewBinding
+import io.homeassistant.companion.android.launch.LaunchActivity
 import io.homeassistant.companion.android.nfc.NfcSetupActivity
-import io.homeassistant.companion.android.onboarding.OnboardingActivity
 import io.homeassistant.companion.android.sensors.SensorReceiver
 import io.homeassistant.companion.android.sensors.SensorWorker
 import io.homeassistant.companion.android.settings.SettingsActivity
@@ -461,7 +461,7 @@ class WebViewActivity : BaseActivity(), io.homeassistant.companion.android.webvi
                     @JavascriptInterface
                     fun revokeExternalAuth(callback: String) {
                         presenter.onRevokeExternalAuth(JSONObject(callback).get("callback") as String)
-                        openOnBoarding()
+                        relaunchApp()
                         finish()
                     }
 
@@ -979,9 +979,9 @@ class WebViewActivity : BaseActivity(), io.homeassistant.companion.android.webvi
         }
     }
 
-    override fun openOnBoarding() {
+    override fun relaunchApp() {
+        startActivity(Intent(this, LaunchActivity::class.java))
         finish()
-        startActivity(Intent(this, OnboardingActivity::class.java))
     }
 
     override fun onBackPressed() {
@@ -1059,7 +1059,7 @@ class WebViewActivity : BaseActivity(), io.homeassistant.companion.android.webvi
             alert.setMessage(commonR.string.error_auth_revoked)
             alert.setPositiveButton(android.R.string.ok) { _, _ ->
                 presenter.clearKnownUrls()
-                openOnBoarding()
+                relaunchApp()
             }
         } else if (errorType == io.homeassistant.companion.android.webview.WebView.ErrorType.SSL) {
             if (description != null)
diff --git a/app/src/main/java/io/homeassistant/companion/android/webview/WebViewPresenterImpl.kt b/app/src/main/java/io/homeassistant/companion/android/webview/WebViewPresenterImpl.kt
index 1bbd12be440..e1a99529a0f 100644
--- a/app/src/main/java/io/homeassistant/companion/android/webview/WebViewPresenterImpl.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/webview/WebViewPresenterImpl.kt
@@ -111,7 +111,7 @@ class WebViewPresenterImpl @Inject constructor(
             try {
                 authenticationUseCase.revokeSession()
                 view.setExternalAuth("$callback(true)")
-                view.openOnBoarding()
+                view.relaunchApp()
             } catch (e: Exception) {
                 Log.e(TAG, "Unable to revoke session", e)
                 view.setExternalAuth("$callback(false)")
diff --git a/app/src/main/res/layout/fragment_authentication.xml b/app/src/main/res/layout/fragment_authentication.xml
deleted file mode 100644
index 9ee06079469..00000000000
--- a/app/src/main/res/layout/fragment_authentication.xml
+++ /dev/null
@@ -1,5 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<WebView xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/webview"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent" />
\ No newline at end of file
diff --git a/app/src/main/res/layout/fragment_discovery.xml b/app/src/main/res/layout/fragment_discovery.xml
deleted file mode 100644
index 6775e0b93ef..00000000000
--- a/app/src/main/res/layout/fragment_discovery.xml
+++ /dev/null
@@ -1,45 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<RelativeLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    android:orientation="vertical"
-    android:padding="@dimen/activity_margin">
-
-    <androidx.appcompat.widget.AppCompatButton
-        android:id="@+id/what_is_this"
-        style="@style/Widget.HomeAssistant.Button.Outlined"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_alignParentTop="true"
-        android:text="@string/what_is_this"
-        android:textAlignment="center" />
-
-    <androidx.appcompat.widget.AppCompatTextView
-        android:id="@+id/title"
-        style="@style/TextAppearance.HomeAssistant.Title"
-        android:layout_marginTop="30pt"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_alignParentTop="true"
-        android:text="@string/select_instance"
-        android:textAlignment="center" />
-
-    <ListView
-        android:id="@+id/instance_list_view"
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:layout_above="@id/manual_setup"
-        android:layout_below="@id/title"
-        tools:listitem="@layout/instance_item"/>
-
-    <androidx.appcompat.widget.AppCompatButton
-        android:id="@+id/manual_setup"
-        style="@style/Widget.HomeAssistant.Button.Outlined"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_centerHorizontal="true"
-        android:layout_alignParentBottom="true"
-        android:text="@string/manual_setup" />
-</RelativeLayout>
diff --git a/app/src/main/res/layout/fragment_manual_setup.xml b/app/src/main/res/layout/fragment_manual_setup.xml
deleted file mode 100644
index 1c8f0faca00..00000000000
--- a/app/src/main/res/layout/fragment_manual_setup.xml
+++ /dev/null
@@ -1,54 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/view_flipper"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent"
-    android:gravity="center"
-    android:orientation="vertical"
-    android:padding="@dimen/activity_margin">
-
-    <TextView
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_marginBottom="20dp"
-        android:text="@string/manual_title"
-        android:textSize="22sp"
-        style="@style/TextAppearance.HomeAssistant.Headline" />
-
-    <TextView
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_marginBottom="10dp"
-        android:layout_marginStart="15dp"
-        android:layout_marginEnd="15dp"
-        android:text="@string/manual_desc"
-        style="@style/TextAppearance.HomeAssistant.Medium" />
-
-    <com.google.android.material.textfield.TextInputLayout
-        android:id="@+id/url_text_layout"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content">
-
-        <com.google.android.material.textfield.TextInputEditText
-            android:id="@+id/home_assistant_url"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:layout_marginTop="16dp"
-            android:hint="@string/input_url"
-            android:imeOptions="actionDone"
-            android:inputType="textUri"
-            android:lines="1"
-            android:maxLines="1" />
-
-    </com.google.android.material.textfield.TextInputLayout>
-
-    <com.google.android.material.button.MaterialButton
-        android:id="@+id/ok"
-        style="@style/Widget.HomeAssistant.Button.Colored"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_marginTop="16dp"
-        android:enabled="false"
-        android:text="@string/connect" />
-
-</LinearLayout>
\ No newline at end of file
diff --git a/app/src/minimal/java/io/homeassistant/companion/android/onboarding/MessagingToken.kt b/app/src/minimal/java/io/homeassistant/companion/android/onboarding/MessagingToken.kt
new file mode 100644
index 00000000000..af93eb74bb5
--- /dev/null
+++ b/app/src/minimal/java/io/homeassistant/companion/android/onboarding/MessagingToken.kt
@@ -0,0 +1,5 @@
+package io.homeassistant.companion.android.onboarding
+
+suspend fun getMessagingToken(): String {
+    return ""
+}
diff --git a/app/src/minimal/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt b/app/src/minimal/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt
deleted file mode 100644
index b23470c9300..00000000000
--- a/app/src/minimal/java/io/homeassistant/companion/android/onboarding/integration/MobileAppIntegrationPresenterImpl.kt
+++ /dev/null
@@ -1,8 +0,0 @@
-package io.homeassistant.companion.android.onboarding.integration
-
-import io.homeassistant.companion.android.common.data.integration.IntegrationRepository
-import javax.inject.Inject
-
-class MobileAppIntegrationPresenterImpl @Inject constructor(
-    integrationUseCase: IntegrationRepository
-) : MobileAppIntegrationPresenterBase(integrationUseCase)
diff --git a/common/src/main/res/values/strings.xml b/common/src/main/res/values/strings.xml
index 512b0a85a7c..76c9d70918b 100644
--- a/common/src/main/res/values/strings.xml
+++ b/common/src/main/res/values/strings.xml
@@ -366,7 +366,7 @@
     <string name="security_vulnerably_view">View Bulletin</string>
     <string name="security">Security</string>
     <string name="select_entity_to_display">Select Entity to display</string>
-    <string name="select_instance">Select the instance you would\nlike to connect to:</string>
+    <string name="select_instance">Select the instance you would like to connect to:</string>
     <string name="sensor_description_active_notification_count">Total count of active notifications that are visible to the user including silent, persistent and the Sensor Worker notifications.</string>
     <string name="sensor_description_app_importance">If the app is in the foreground, background or any other state it can be.</string>
     <string name="sensor_description_app_inactive">Whether or not the app is currently considered inactive by the system</string>
