diff --git a/app/src/main/java/io/homeassistant/companion/android/widgets/ButtonWidget.kt b/app/src/main/java/io/homeassistant/companion/android/widgets/ButtonWidget.kt
index eff5bcf3659..efe5c0f02c2 100644
--- a/app/src/main/java/io/homeassistant/companion/android/widgets/ButtonWidget.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/widgets/ButtonWidget.kt
@@ -23,6 +23,7 @@ import io.homeassistant.companion.android.database.AppDatabase
 import io.homeassistant.companion.android.database.widget.ButtonWidgetDao
 import io.homeassistant.companion.android.database.widget.ButtonWidgetEntity
 import io.homeassistant.companion.android.domain.integration.IntegrationUseCase
+import java.util.regex.Pattern
 import javax.inject.Inject
 import kotlinx.coroutines.CoroutineScope
 import kotlinx.coroutines.Dispatchers
@@ -193,6 +194,20 @@ class ButtonWidget : AppWidgetProvider() {
                     val serviceDataMap: HashMap<String, Any> =
                         jacksonObjectMapper().readValue(serviceDataJson)
 
+                    if (serviceDataMap["entity_id"] != null) {
+                        val entityIdWithoutBrackets = Pattern.compile("\\[(.*?)\\]")
+                            .matcher(serviceDataMap["entity_id"].toString())
+                        if (entityIdWithoutBrackets.find()) {
+                            val value = entityIdWithoutBrackets.group(1)
+                            if (value != null) {
+                                if (value == "all" ||
+                                    value.split(",").contains("all")) {
+                                    serviceDataMap["entity_id"] = "all"
+                                }
+                            }
+                        }
+                    }
+
                     integrationUseCase.callService(domain, service, serviceDataMap)
 
                     // If service call does not throw an exception, send positive feedback
diff --git a/data/src/main/java/io/homeassistant/companion/android/data/HomeAssistantRetrofit.kt b/data/src/main/java/io/homeassistant/companion/android/data/HomeAssistantRetrofit.kt
index a2668fbf1b8..17e21b1e3d0 100644
--- a/data/src/main/java/io/homeassistant/companion/android/data/HomeAssistantRetrofit.kt
+++ b/data/src/main/java/io/homeassistant/companion/android/data/HomeAssistantRetrofit.kt
@@ -5,6 +5,7 @@ import com.fasterxml.jackson.databind.ObjectMapper
 import com.fasterxml.jackson.databind.PropertyNamingStrategy
 import com.fasterxml.jackson.module.kotlin.registerKotlinModule
 import io.homeassistant.companion.android.domain.url.UrlRepository
+import java.util.concurrent.TimeUnit
 import javax.inject.Inject
 import kotlinx.coroutines.runBlocking
 import okhttp3.OkHttpClient
@@ -44,6 +45,7 @@ class HomeAssistantRetrofit @Inject constructor(urlRepository: UrlRepository) {
                         it.proceed(it.request())
                     }
                 }
+                .readTimeout(30L, TimeUnit.SECONDS)
                 .build()
         )
         .baseUrl(LOCAL_HOST)
