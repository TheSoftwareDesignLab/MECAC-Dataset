diff --git a/app/src/full/java/io/homeassistant/companion/android/sensors/ActivitySensorManager.kt b/app/src/full/java/io/homeassistant/companion/android/sensors/ActivitySensorManager.kt
index 0bb3150ff6f..5126ec406b4 100644
--- a/app/src/full/java/io/homeassistant/companion/android/sensors/ActivitySensorManager.kt
+++ b/app/src/full/java/io/homeassistant/companion/android/sensors/ActivitySensorManager.kt
@@ -11,13 +11,8 @@ import com.google.android.gms.location.ActivityRecognition
 import com.google.android.gms.location.ActivityRecognitionResult
 import com.google.android.gms.location.DetectedActivity
 import io.homeassistant.companion.android.common.dagger.GraphComponentAccessor
-import io.homeassistant.companion.android.database.AppDatabase
 import io.homeassistant.companion.android.domain.integration.IntegrationUseCase
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import javax.inject.Inject
-import kotlinx.coroutines.CoroutineScope
-import kotlinx.coroutines.Dispatchers
-import kotlinx.coroutines.launch
 
 class ActivitySensorManager : BroadcastReceiver(), SensorManager {
 
@@ -25,39 +20,23 @@ class ActivitySensorManager : BroadcastReceiver(), SensorManager {
 
         internal const val TAG = "ActivitySM"
 
-        const val ACTION_REQUEST_ACTIVITY_UPDATES =
-            "io.homeassistant.companion.android.background.REQUEST_ACTIVITY_UPDATES"
         const val ACTION_UPDATE_ACTIVITY =
             "io.homeassistant.companion.android.background.UPDATE_ACTIVITY"
 
-        fun restartActivityTracking(context: Context) {
-            val intent = Intent(context, ActivitySensorManager::class.java)
-            intent.action = ACTION_REQUEST_ACTIVITY_UPDATES
-
-            context.sendBroadcast(intent)
-        }
-
         private val activity = SensorManager.BasicSensor(
             "detected_activity",
             "sensor",
             "Detected Activity"
         )
-
-        private var stored_activity: String = "unknown"
-        private var stored_attributes = mutableMapOf<String, Int>()
     }
 
     @Inject
     lateinit var integrationUseCase: IntegrationUseCase
 
-    private val ioScope: CoroutineScope = CoroutineScope(Dispatchers.IO)
-
     override fun onReceive(context: Context, intent: Intent) {
         ensureInjected(context)
 
         when (intent.action) {
-            Intent.ACTION_BOOT_COMPLETED,
-            ACTION_REQUEST_ACTIVITY_UPDATES -> setupActivityTracking(context)
             ACTION_UPDATE_ACTIVITY -> handleActivityUpdate(intent, context)
             else -> Log.w(TAG, "Unknown intent action: ${intent.action}!")
         }
@@ -74,30 +53,6 @@ class ActivitySensorManager : BroadcastReceiver(), SensorManager {
         }
     }
 
-    private fun setupActivityTracking(context: Context) {
-        if (!checkPermission(context)) {
-            Log.w(TAG, "Not starting activity tracking because of permissions.")
-            return
-        }
-
-        val sensorDao = AppDatabase.getInstance(context).sensorDao()
-
-        ioScope.launch {
-            try {
-                Log.d(TAG, "Unregistering for activity updates.")
-                ActivityRecognition.getClient(context).removeActivityUpdates(getPendingIntent(context))
-
-                if (sensorDao.get(activity.id)?.enabled == true) {
-                    Log.d(TAG, "Registering for activity updates.")
-
-                    ActivityRecognition.getClient(context).requestActivityUpdates(120000, getPendingIntent(context))
-                }
-            } catch (e: Exception) {
-                Log.e(TAG, "Issue setting up activity tracking", e)
-            }
-        }
-    }
-
     private fun getPendingIntent(context: Context): PendingIntent {
         val intent = Intent(context, ActivitySensorManager::class.java)
         intent.action = ACTION_UPDATE_ACTIVITY
@@ -113,17 +68,13 @@ class ActivitySensorManager : BroadcastReceiver(), SensorManager {
             if (probActivity == "on_foot")
                 probActivity = getSubActivity(result)
 
-            if (stored_activity != probActivity) {
-                stored_activity = probActivity
-
-                stored_attributes.clear()
-                for (act in result.probableActivities)
-                    stored_attributes[typeToString(act)] = act.confidence
-
-                val intent = Intent(context, SensorReceiver::class.java)
-                intent.action = SensorReceiver.ACTION_REQUEST_SENSORS_UPDATE
-                context.sendBroadcast(intent)
-            }
+            onSensorUpdated(
+                context,
+                activity,
+                probActivity,
+                getSensorIcon(probActivity),
+                result.probableActivities.map { typeToString(it) to it.confidence }.toMap()
+            )
         }
     }
 
@@ -163,24 +114,19 @@ class ActivitySensorManager : BroadcastReceiver(), SensorManager {
         }
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            activity.id -> getActivitySensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
-    }
+    override fun requestSensorUpdate(context: Context) {
+        if (!isEnabled(context, activity.id))
+            return
 
-    private fun getActivitySensor(context: Context): SensorRegistration<Any> {
+        val actReg = ActivityRecognition.getClient(context)
+        val pendingIntent = getPendingIntent(context)
+        Log.d(TAG, "Unregistering for activity updates.")
+        actReg.removeActivityUpdates(pendingIntent)
 
-        return activity.toSensorRegistration(
-            stored_activity,
-            getSensorIcon(stored_activity),
-            stored_attributes
-        )
+        Log.d(TAG, "Registering for activity updates.")
+        actReg.requestActivityUpdates(120000, pendingIntent)
     }
+
     private fun getSensorIcon(activity: String): String {
 
         return when (activity) {
diff --git a/app/src/full/java/io/homeassistant/companion/android/sensors/GeocodeSensorManager.kt b/app/src/full/java/io/homeassistant/companion/android/sensors/GeocodeSensorManager.kt
index 8ba17f704d7..282c441e561 100644
--- a/app/src/full/java/io/homeassistant/companion/android/sensors/GeocodeSensorManager.kt
+++ b/app/src/full/java/io/homeassistant/companion/android/sensors/GeocodeSensorManager.kt
@@ -5,10 +5,7 @@ import android.content.Context
 import android.location.Address
 import android.location.Geocoder
 import android.os.Build
-import android.util.Log
 import com.google.android.gms.location.LocationServices
-import com.google.android.gms.tasks.Tasks
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 class GeocodeSensorManager : SensorManager {
 
@@ -37,52 +34,45 @@ class GeocodeSensorManager : SensorManager {
         }
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            geocodedLocation.id -> getGeocodedLocation(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        updateGeocodedLocation(context)
     }
 
-    private fun getGeocodedLocation(context: Context): SensorRegistration<Any> {
-        var address: Address? = null
-        if (checkPermission(context)) {
-            try {
-                val locApi = LocationServices.getFusedLocationProviderClient(context)
-                Tasks.await(locApi.lastLocation)?.let {
-                    if (it.accuracy <= LocationBroadcastReceiver.MINIMUM_ACCURACY)
-                        address = Geocoder(context)
-                            .getFromLocation(it.latitude, it.longitude, 1)
-                            .firstOrNull()
-                }
-            } catch (e: Exception) {
-                // We don't want to crash if the device cannot get a geocoded location
-                Log.e(TAG, "Issue getting geocoded location ", e)
-            }
-        }
+    private fun updateGeocodedLocation(context: Context) {
+        if (!isEnabled(context, geocodedLocation.id) || !checkPermission(context))
+            return
+        val locApi = LocationServices.getFusedLocationProviderClient(context)
+        locApi.lastLocation.addOnSuccessListener { location ->
+            var address: Address? = null
+            if (location.accuracy <= LocationBroadcastReceiver.MINIMUM_ACCURACY)
+                address = Geocoder(context)
+                    .getFromLocation(location.latitude, location.longitude, 1)
+                    .firstOrNull()
 
-        val attributes = address?.let {
-            mapOf(
-                "Administrative Area" to it.adminArea,
-                "Country" to it.countryName,
-                "ISO Country Code" to it.countryCode,
-                "Locality" to it.locality,
-                "Location" to listOf(it.latitude, it.longitude),
-                "Postal Code" to it.postalCode,
-                "Sub Administrative Area" to it.subAdminArea,
-                "Sub Locality" to it.subLocality,
-                "Sub Thoroughfare" to it.subThoroughfare,
-                "Thoroughfare" to it.thoroughfare
-            )
-        }.orEmpty()
+            val attributes = address?.let {
+                mapOf(
+                    "Administrative Area" to it.adminArea,
+                    "Country" to it.countryName,
+                    "ISO Country Code" to it.countryCode,
+                    "Locality" to it.locality,
+                    "Location" to listOf(it.latitude, it.longitude),
+                    "Postal Code" to it.postalCode,
+                    "Sub Administrative Area" to it.subAdminArea,
+                    "Sub Locality" to it.subLocality,
+                    "Sub Thoroughfare" to it.subThoroughfare,
+                    "Thoroughfare" to it.thoroughfare
+                )
+            }.orEmpty()
 
-        return geocodedLocation.toSensorRegistration(
-            address?.getAddressLine(0) ?: "Unknown",
-            "mdi:map",
-            attributes
-        )
+            onSensorUpdated(
+                context,
+                geocodedLocation,
+                address?.getAddressLine(0) ?: "Unknown",
+                "mdi:map",
+                attributes
+            )
+        }
     }
 }
diff --git a/app/src/full/java/io/homeassistant/companion/android/sensors/LocationBroadcastReceiver.kt b/app/src/full/java/io/homeassistant/companion/android/sensors/LocationBroadcastReceiver.kt
index 5a8ef544482..84f6e40205e 100644
--- a/app/src/full/java/io/homeassistant/companion/android/sensors/LocationBroadcastReceiver.kt
+++ b/app/src/full/java/io/homeassistant/companion/android/sensors/LocationBroadcastReceiver.kt
@@ -20,7 +20,6 @@ import com.google.android.gms.location.LocationServices
 import io.homeassistant.companion.android.common.dagger.GraphComponentAccessor
 import io.homeassistant.companion.android.database.AppDatabase
 import io.homeassistant.companion.android.domain.integration.IntegrationUseCase
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import io.homeassistant.companion.android.domain.integration.UpdateLocation
 import javax.inject.Inject
 import kotlinx.coroutines.CoroutineScope
@@ -270,10 +269,10 @@ class LocationBroadcastReceiver : BroadcastReceiver(), SensorManager {
                 object : LocationCallback() {
                     val wakeLock: PowerManager.WakeLock? =
                         getSystemService(context, PowerManager::class.java)
-                        ?.newWakeLock(
-                            PowerManager.PARTIAL_WAKE_LOCK,
-                            "HomeAssistant::AccurateLocation"
-                        )?.apply { acquire(10 * 60 * 1000L /*10 minutes*/) }
+                            ?.newWakeLock(
+                                PowerManager.PARTIAL_WAKE_LOCK,
+                                "HomeAssistant::AccurateLocation"
+                            )?.apply { acquire(10 * 60 * 1000L /*10 minutes*/) }
                     var numberCalls = 0
                     override fun onLocationResult(locationResult: LocationResult?) {
                         numberCalls++
@@ -329,24 +328,9 @@ class LocationBroadcastReceiver : BroadcastReceiver(), SensorManager {
         }
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            zoneLocation.id ->
-                zoneLocation.toSensorRegistration(
-                    "",
-                    "mdi:map",
-                    mapOf()
-                )
-            backgroundLocation.id ->
-                backgroundLocation.toSensorRegistration(
-                    "",
-                    "mdi:map",
-                    mapOf()
-                )
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        // For now we don't need to do anything here, updates a handled elsewhere.
     }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/database/AppDatabase.kt b/app/src/main/java/io/homeassistant/companion/android/database/AppDatabase.kt
index f0798000256..b6857cfa025 100644
--- a/app/src/main/java/io/homeassistant/companion/android/database/AppDatabase.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/database/AppDatabase.kt
@@ -4,12 +4,14 @@ import android.content.ContentValues
 import android.content.Context
 import android.util.Log
 import androidx.room.Database
+import androidx.room.OnConflictStrategy
 import androidx.room.Room
 import androidx.room.RoomDatabase
 import androidx.room.migration.Migration
 import androidx.sqlite.db.SupportSQLiteDatabase
 import io.homeassistant.companion.android.database.authentication.Authentication
 import io.homeassistant.companion.android.database.authentication.AuthenticationDao
+import io.homeassistant.companion.android.database.sensor.Attribute
 import io.homeassistant.companion.android.database.sensor.Sensor
 import io.homeassistant.companion.android.database.sensor.SensorDao
 import io.homeassistant.companion.android.database.widget.ButtonWidgetDao
@@ -21,13 +23,14 @@ import io.homeassistant.companion.android.database.widget.TemplateWidgetEntity
 
 @Database(
     entities = [
+        Attribute::class,
         Authentication::class,
         Sensor::class,
         ButtonWidgetEntity::class,
         StaticWidgetEntity::class,
         TemplateWidgetEntity::class
     ],
-    version = 6
+    version = 7
 )
 abstract class AppDatabase : RoomDatabase() {
     abstract fun authenticationDao(): AuthenticationDao
@@ -58,7 +61,8 @@ abstract class AppDatabase : RoomDatabase() {
                     MIGRATION_2_3,
                     MIGRATION_3_4,
                     MIGRATION_4_5,
-                    MIGRATION_5_6
+                    MIGRATION_5_6,
+                    MIGRATION_6_7
                 )
                 .build()
         }
@@ -124,5 +128,33 @@ abstract class AppDatabase : RoomDatabase() {
                 }
             }
         }
+
+        private val MIGRATION_6_7 = object : Migration(6, 7) {
+            override fun migrate(database: SupportSQLiteDatabase) {
+                val cursor = database.query("SELECT * FROM sensors")
+                val sensors = mutableListOf<ContentValues>()
+                while (cursor.moveToNext()) {
+                    sensors.add(ContentValues().also {
+                        it.put("id", cursor.getString(cursor.getColumnIndex("unique_id")))
+                        it.put("enabled", cursor.getInt(cursor.getColumnIndex("enabled")))
+                        it.put("registered", cursor.getInt(cursor.getColumnIndex("registered")))
+                        it.put("state", "")
+                        it.put("state_type", "")
+                        it.put("type", "")
+                        it.put("icon", "")
+                        it.put("name", "")
+                        it.put("device_class", "")
+                    })
+                }
+                cursor.close()
+                database.execSQL("DROP TABLE IF EXISTS `sensors`")
+                database.execSQL("CREATE TABLE IF NOT EXISTS `sensors` (`id` TEXT NOT NULL, `enabled` INTEGER NOT NULL, `registered` INTEGER NOT NULL, `state` TEXT NOT NULL, `state_type` TEXT NOT NULL, `type` TEXT NOT NULL, `icon` TEXT NOT NULL, `name` TEXT NOT NULL, `device_class` TEXT, `unit_of_measurement` TEXT, PRIMARY KEY(`id`))")
+                sensors.forEach {
+                    database.insert("sensors", OnConflictStrategy.REPLACE, it)
+                }
+
+                database.execSQL("CREATE TABLE IF NOT EXISTS `sensor_attributes` (`sensor_id` TEXT NOT NULL, `name` TEXT NOT NULL, `value` TEXT NOT NULL, PRIMARY KEY(`sensor_id`, `name`))")
+            }
+        }
     }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/database/sensor/Attribute.kt b/app/src/main/java/io/homeassistant/companion/android/database/sensor/Attribute.kt
new file mode 100644
index 00000000000..0fdde0202aa
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/database/sensor/Attribute.kt
@@ -0,0 +1,14 @@
+package io.homeassistant.companion.android.database.sensor
+
+import androidx.room.ColumnInfo
+import androidx.room.Entity
+
+@Entity(tableName = "sensor_attributes", primaryKeys = ["sensor_id", "name"])
+data class Attribute(
+    @ColumnInfo(name = "sensor_id")
+    val sensorId: String,
+    @ColumnInfo(name = "name")
+    val name: String,
+    @ColumnInfo(name = "value")
+    val value: String
+)
diff --git a/app/src/main/java/io/homeassistant/companion/android/database/sensor/Sensor.kt b/app/src/main/java/io/homeassistant/companion/android/database/sensor/Sensor.kt
index fec0e2a1f67..035c70b1779 100644
--- a/app/src/main/java/io/homeassistant/companion/android/database/sensor/Sensor.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/database/sensor/Sensor.kt
@@ -7,11 +7,25 @@ import androidx.room.PrimaryKey
 @Entity(tableName = "sensors")
 data class Sensor(
     @PrimaryKey
-    var unique_id: String,
+    @ColumnInfo(name = "id")
+    var id: String,
     @ColumnInfo(name = "enabled")
     var enabled: Boolean,
     @ColumnInfo(name = "registered")
     var registered: Boolean,
     @ColumnInfo(name = "state")
-    var state: String
+    var state: String,
+    @ColumnInfo(name = "state_type")
+    var stateType: String = "",
+    @ColumnInfo(name = "type")
+    var type: String = "",
+    @ColumnInfo(name = "icon")
+    var icon: String = "",
+    @ColumnInfo(name = "name")
+    var name: String = "",
+    @ColumnInfo(name = "device_class")
+    var deviceClass: String? = null,
+    @ColumnInfo(name = "unit_of_measurement")
+    var unitOfMeasurement: String? = null
+
 )
diff --git a/app/src/main/java/io/homeassistant/companion/android/database/sensor/SensorDao.kt b/app/src/main/java/io/homeassistant/companion/android/database/sensor/SensorDao.kt
index 18192a8c8a1..cb71a2e5d9b 100644
--- a/app/src/main/java/io/homeassistant/companion/android/database/sensor/SensorDao.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/database/sensor/SensorDao.kt
@@ -2,18 +2,30 @@ package io.homeassistant.companion.android.database.sensor
 
 import androidx.room.Dao
 import androidx.room.Insert
+import androidx.room.OnConflictStrategy
 import androidx.room.Query
+import androidx.room.Transaction
 import androidx.room.Update
 
 @Dao
 interface SensorDao {
 
-    @Query("SELECT * FROM Sensors WHERE unique_id = :uniqueId")
-    fun get(uniqueId: String): Sensor?
+    @Query("SELECT * FROM Sensors WHERE id = :id")
+    fun get(id: String): Sensor?
 
-    @Insert
+    @Transaction
+    @Query("SELECT * FROM Sensors WHERE id = :id")
+    fun getFull(id: String): SensorWithAttributes?
+
+    @Insert(onConflict = OnConflictStrategy.IGNORE)
     fun add(sensor: Sensor)
 
+    @Insert(onConflict = OnConflictStrategy.REPLACE)
+    fun add(attribute: Attribute)
+
     @Update
     fun update(sensor: Sensor)
+
+    @Query("DELETE FROM sensor_attributes WHERE sensor_id = :sensorId")
+    fun clearAttributes(sensorId: String)
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/database/sensor/SensorWithAttributes.kt b/app/src/main/java/io/homeassistant/companion/android/database/sensor/SensorWithAttributes.kt
new file mode 100644
index 00000000000..163d6ee45d8
--- /dev/null
+++ b/app/src/main/java/io/homeassistant/companion/android/database/sensor/SensorWithAttributes.kt
@@ -0,0 +1,35 @@
+package io.homeassistant.companion.android.database.sensor
+
+import androidx.room.Embedded
+import androidx.room.Relation
+import io.homeassistant.companion.android.domain.integration.SensorRegistration
+
+data class SensorWithAttributes(
+    @Embedded
+    val sensor: Sensor,
+    @Relation(
+        parentColumn = "id",
+        entityColumn = "sensor_id"
+    )
+    val attributes: List<Attribute>
+) {
+    fun toSensorRegistration(): SensorRegistration<Any> {
+        val attributes = attributes.map { it.name to it.value }.toMap()
+        val state = when (sensor.stateType) {
+            "" -> ""
+            "string" -> sensor.state
+            "number" -> sensor.state.toFloat()
+            else -> throw IllegalArgumentException("State is of unknown type: ${sensor.stateType}")
+        }
+        return SensorRegistration(
+            sensor.id,
+            sensor.state,
+            sensor.type,
+            sensor.icon,
+            attributes,
+            sensor.name,
+            sensor.deviceClass,
+            sensor.unitOfMeasurement
+        )
+    }
+}
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/AudioSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/AudioSensorManager.kt
index 0f64aede330..8fa046d2b0e 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/AudioSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/AudioSensorManager.kt
@@ -4,7 +4,6 @@ import android.content.Context
 import android.media.AudioDeviceInfo
 import android.media.AudioManager
 import android.os.Build
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 class AudioSensorManager : SensorManager {
     companion object {
@@ -27,18 +26,13 @@ class AudioSensorManager : SensorManager {
         return emptyArray()
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            audioSensor.id -> getAudioSensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(context: Context) {
+        updateAudioSensor(context)
     }
 
-    private fun getAudioSensor(context: Context): SensorRegistration<Any> {
-
+    private fun updateAudioSensor(context: Context) {
+        if (!isEnabled(context, audioSensor.id))
+            return
         val audioManager = context.getSystemService(Context.AUDIO_SERVICE) as AudioManager
         val audioMode = when (audioManager.mode) {
             AudioManager.MODE_NORMAL -> "normal"
@@ -84,7 +78,8 @@ class AudioSensorManager : SensorManager {
             else -> "mdi:volume-low"
         }
 
-        return audioSensor.toSensorRegistration(
+        onSensorUpdated(context,
+            audioSensor,
             ringerMode,
             icon,
             mapOf(
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/BatterySensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/BatterySensorManager.kt
index a315c5b3586..cdcd42649d0 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/BatterySensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/BatterySensorManager.kt
@@ -4,7 +4,6 @@ import android.content.Context
 import android.content.Intent
 import android.content.IntentFilter
 import android.os.BatteryManager
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 class BatterySensorManager : SensorManager {
 
@@ -34,19 +33,14 @@ class BatterySensorManager : SensorManager {
         return emptyArray()
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
         val intent = context.registerReceiver(null, IntentFilter(Intent.ACTION_BATTERY_CHANGED))
         if (intent != null) {
-            return when (sensorId) {
-                batteryLevel.id -> getBatteryLevelSensor(intent)
-                batteryState.id -> getBatteryStateSensor(intent)
-                else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-            }
+            updateBatteryLevel(context, intent)
+            updateBatteryState(context, intent)
         }
-        throw RuntimeException("Unable to get battery state.")
     }
 
     private fun getBatteryPercentage(intent: Intent): Int {
@@ -85,21 +79,26 @@ class BatterySensorManager : SensorManager {
         return batteryIcon
     }
 
-    private fun getBatteryLevelSensor(intent: Intent): SensorRegistration<Any> {
-
+    private fun updateBatteryLevel(context: Context, intent: Intent) {
+        if (!isEnabled(context, batteryLevel.id))
+            return
         val percentage: Int = getBatteryPercentage(intent)
         val isCharging = getIsCharging(intent)
         val chargerType = getChargerType(intent)
         val chargingStatus = getChargingStatus(intent)
 
-        return batteryLevel.toSensorRegistration(
+        onSensorUpdated(
+            context,
+            batteryLevel,
             percentage,
             getBatteryIcon(percentage, isCharging, chargerType, chargingStatus),
             mapOf()
         )
     }
 
-    private fun getBatteryStateSensor(intent: Intent): SensorRegistration<Any> {
+    private fun updateBatteryState(context: Context, intent: Intent) {
+        if (!isEnabled(context, batteryState.id))
+            return
 
         val percentage: Int = getBatteryPercentage(intent)
         val isCharging = getIsCharging(intent)
@@ -107,7 +106,9 @@ class BatterySensorManager : SensorManager {
         val chargingStatus = getChargingStatus(intent)
         val batteryHealth = getBatteryHealth(intent)
 
-        return batteryState.toSensorRegistration(
+        onSensorUpdated(
+            context,
+            batteryState,
             chargingStatus,
             getBatteryIcon(percentage, isCharging, chargerType, chargingStatus),
             mapOf(
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/BluetoothSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/BluetoothSensorManager.kt
index 2be569ddaa3..0a453998a42 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/BluetoothSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/BluetoothSensorManager.kt
@@ -5,7 +5,6 @@ import android.bluetooth.BluetoothDevice
 import android.bluetooth.BluetoothManager
 import android.bluetooth.BluetoothProfile.GATT
 import android.content.Context
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import java.lang.reflect.Method
 
 class BluetoothSensorManager : SensorManager {
@@ -28,23 +27,21 @@ class BluetoothSensorManager : SensorManager {
         return arrayOf(Manifest.permission.BLUETOOTH)
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            bluetoothConnection.id -> getBluetoothConnectionSensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        updateBluetoothConnectionSensor(context)
     }
 
-    private fun getBluetoothConnectionSensor(context: Context): SensorRegistration<Any> {
+    private fun updateBluetoothConnectionSensor(context: Context) {
+        if (!isEnabled(context, bluetoothConnection.id))
+            return
 
         var connectedNotPairedAddress = ""
         var totalConnectedDevices = 0
         val icon = "mdi:bluetooth"
-        var connectedPairedDevices: MutableList<String> = ArrayList()
-        var connectedNotPairedDevices: MutableList<String> = ArrayList()
+        val connectedPairedDevices: MutableList<String> = ArrayList()
+        val connectedNotPairedDevices: MutableList<String> = ArrayList()
         var bondedString = ""
         var isBtOn = false
 
@@ -56,11 +53,11 @@ class BluetoothSensorManager : SensorManager {
             val btConnectedDevices = bluetoothManager.getConnectedDevices(GATT)
             var connectedAddress = ""
 
-            var adapter = bluetoothManager.adapter
+            val adapter = bluetoothManager.adapter
             isBtOn = adapter.isEnabled
 
             if (isBtOn) {
-                var bondedDevices = adapter.bondedDevices
+                val bondedDevices = adapter.bondedDevices
                 bondedString = bondedDevices.toString()
                 for (BluetoothDevice in bondedDevices) {
                     if (isConnected(BluetoothDevice)) {
@@ -80,7 +77,9 @@ class BluetoothSensorManager : SensorManager {
                 }
             }
         }
-        return bluetoothConnection.toSensorRegistration(
+        onSensorUpdated(
+            context,
+            bluetoothConnection,
             totalConnectedDevices,
             icon,
             mapOf(
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/LastRebootSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/LastRebootSensorManager.kt
index f1b298a7423..26d6e2c8d35 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/LastRebootSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/LastRebootSensorManager.kt
@@ -3,7 +3,6 @@ package io.homeassistant.companion.android.sensors
 import android.content.Context
 import android.os.SystemClock
 import android.util.Log
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import java.text.SimpleDateFormat
 import java.util.Calendar
 import java.util.Date
@@ -32,17 +31,15 @@ class LastRebootSensorManager : SensorManager {
         return emptyArray()
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            lastRebootSensor.id -> getLastReboot()
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        updateLastReboot(context)
     }
 
-    private fun getLastReboot(): SensorRegistration<Any> {
+    private fun updateLastReboot(context: Context) {
+        if (!isEnabled(context, lastRebootSensor.id))
+            return
 
         var timeInMillis = 0L
         var local = ""
@@ -64,7 +61,9 @@ class LastRebootSensorManager : SensorManager {
 
         val icon = "mdi:restart"
 
-        return lastRebootSensor.toSensorRegistration(
+        onSensorUpdated(
+            context,
+            lastRebootSensor,
             utc,
             icon,
             mapOf(
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/LightSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/LightSensorManager.kt
index 6613796cef5..59d299e7d3c 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/LightSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/LightSensorManager.kt
@@ -6,7 +6,6 @@ import android.hardware.Sensor
 import android.hardware.SensorEvent
 import android.hardware.SensorEventListener
 import android.hardware.SensorManager.SENSOR_DELAY_NORMAL
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import kotlin.math.roundToInt
 
 class LightSensorManager : SensorManager, SensorEventListener {
@@ -20,8 +19,6 @@ class LightSensorManager : SensorManager, SensorEventListener {
             "illuminance",
             "lx"
         )
-        private var lightReading: String = "unavailable"
-        lateinit var mySensorManager: android.hardware.SensorManager
     }
 
     override val name: String
@@ -34,19 +31,21 @@ class LightSensorManager : SensorManager, SensorEventListener {
         return emptyArray()
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            lightSensor.id -> getLightSensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    private lateinit var latestContext: Context
+    private lateinit var mySensorManager: android.hardware.SensorManager
+
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        latestContext = context
+        updateLightSensor()
     }
 
-    private fun getLightSensor(context: Context): SensorRegistration<Any> {
+    private fun updateLightSensor() {
+        if (!isEnabled(latestContext, lightSensor.id))
+            return
 
-        mySensorManager = context.getSystemService(SENSOR_SERVICE) as android.hardware.SensorManager
+        mySensorManager = latestContext.getSystemService(SENSOR_SERVICE) as android.hardware.SensorManager
 
         val lightSensors = mySensorManager.getDefaultSensor(Sensor.TYPE_LIGHT)
         if (lightSensors != null) {
@@ -55,14 +54,6 @@ class LightSensorManager : SensorManager, SensorEventListener {
                 lightSensors,
                 SENSOR_DELAY_NORMAL)
         }
-
-        val icon = "mdi:brightness-5"
-
-        return lightSensor.toSensorRegistration(
-            lightReading,
-            icon,
-            mapOf()
-        )
     }
 
     override fun onAccuracyChanged(p0: Sensor?, p1: Int) {
@@ -72,7 +63,13 @@ class LightSensorManager : SensorManager, SensorEventListener {
     override fun onSensorChanged(event: SensorEvent?) {
         if (event != null) {
             if (event.sensor.type == Sensor.TYPE_LIGHT) {
-                lightReading = event.values[0].roundToInt().toString()
+                onSensorUpdated(
+                    latestContext,
+                    lightSensor,
+                    event.values[0].roundToInt().toString(),
+                    "mdi:brightness-5",
+                    mapOf()
+                )
             }
         }
         mySensorManager.unregisterListener(this)
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/NetworkSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/NetworkSensorManager.kt
index e86b113f2c9..bd2456dc7f7 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/NetworkSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/NetworkSensorManager.kt
@@ -5,7 +5,6 @@ import android.content.Context
 import android.net.wifi.WifiInfo
 import android.net.wifi.WifiManager
 import android.os.Build
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 class NetworkSensorManager : SensorManager {
     companion object {
@@ -33,17 +32,16 @@ class NetworkSensorManager : SensorManager {
         }
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            wifiConnection.id -> getWifiConnectionSensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        updateWifiConnectionSensor(context)
     }
 
-    private fun getWifiConnectionSensor(context: Context): SensorRegistration<Any> {
+    private fun updateWifiConnectionSensor(context: Context) {
+        if (!isEnabled(context, wifiConnection.id))
+            return
+
         var conInfo: WifiInfo? = null
         var ssid = "Unknown"
         var lastScanStrength = -1
@@ -90,7 +88,8 @@ class NetworkSensorManager : SensorManager {
             )
         }.orEmpty()
 
-        return wifiConnection.toSensorRegistration(
+        onSensorUpdated(context,
+            wifiConnection,
             ssid,
             icon,
             attributes
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/NextAlarmManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/NextAlarmManager.kt
index e5655965081..fdb40b75083 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/NextAlarmManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/NextAlarmManager.kt
@@ -3,7 +3,6 @@ package io.homeassistant.companion.android.sensors
 import android.app.AlarmManager
 import android.content.Context
 import android.util.Log
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import java.text.SimpleDateFormat
 import java.util.Calendar
 import java.util.Date
@@ -32,17 +31,16 @@ class NextAlarmManager : SensorManager {
         return emptyArray()
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            nextAlarm.id -> getNextAlarm(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        updateNextAlarm(context)
     }
 
-    private fun getNextAlarm(context: Context): SensorRegistration<Any> {
+    private fun updateNextAlarm(context: Context) {
+
+        if (!isEnabled(context, nextAlarm.id))
+            return
 
         var triggerTime = 0L
         var local = ""
@@ -75,7 +73,8 @@ class NextAlarmManager : SensorManager {
 
         val icon = "mdi:alarm"
 
-        return nextAlarm.toSensorRegistration(
+        onSensorUpdated(context,
+            nextAlarm,
             utc,
             icon,
             mapOf(
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/PhoneStateSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/PhoneStateSensorManager.kt
index 280d4bd13b7..741c2668100 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/PhoneStateSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/PhoneStateSensorManager.kt
@@ -6,7 +6,6 @@ import android.os.Build
 import android.telephony.SubscriptionInfo
 import android.telephony.SubscriptionManager
 import android.telephony.TelephonyManager
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 class PhoneStateSensorManager : SensorManager {
 
@@ -43,19 +42,17 @@ class PhoneStateSensorManager : SensorManager {
         return arrayOf(Manifest.permission.READ_PHONE_STATE)
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            phoneState.id -> getPhoneStateSensor(context)
-            sim_1.id -> getSimSensor(context, 0)
-            sim_2.id -> getSimSensor(context, 1)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        updatePhoneStateSensor(context)
+        updateSimSensor(context, 0)
+        updateSimSensor(context, 1)
     }
 
-    private fun getPhoneStateSensor(context: Context): SensorRegistration<Any> {
+    private fun updatePhoneStateSensor(context: Context) {
+        if (!isEnabled(context, phoneState.id))
+            return
         var currentPhoneState = "unavailable"
         if (checkPermission(context)) {
             val telephonyManager =
@@ -73,14 +70,22 @@ class PhoneStateSensorManager : SensorManager {
         if (currentPhoneState == "ringing" || currentPhoneState == "offhook")
             phoneIcon += "-in-talk"
 
-        return phoneState.toSensorRegistration(
+        onSensorUpdated(context,
+            phoneState,
             currentPhoneState,
             phoneIcon,
             mapOf()
         )
     }
 
-    private fun getSimSensor(context: Context, slotIndex: Int): SensorRegistration<Any> {
+    private fun updateSimSensor(context: Context, slotIndex: Int) {
+        val basicSimSensor = when (slotIndex) {
+            0 -> sim_1
+            1 -> sim_2
+            else -> throw IllegalArgumentException("Invalid sim slot: $slotIndex")
+        }
+        if (!isEnabled(context, basicSimSensor.id))
+            return
         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP_MR1) {
             var displayName = "Unavailable"
             val attrs = mutableMapOf<String, Any>()
@@ -105,18 +110,12 @@ class PhoneStateSensorManager : SensorManager {
                 }
             }
 
-            if (slotIndex == 1) {
-                return sim_2.toSensorRegistration(
-                    displayName,
-                    "mdi:sim",
-                    attrs
-                )
-            }
-            return sim_1.toSensorRegistration(
+            onSensorUpdated(context,
+                basicSimSensor,
                 displayName,
                 "mdi:sim",
                 attrs
             )
-        } else throw IllegalArgumentException("Sensor is not supported in current OS version. API 22 or above is required")
+        }
     }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/PressureSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/PressureSensorManager.kt
index f06828548d3..f294308449c 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/PressureSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/PressureSensorManager.kt
@@ -6,7 +6,6 @@ import android.hardware.Sensor
 import android.hardware.SensorEvent
 import android.hardware.SensorEventListener
 import android.hardware.SensorManager.SENSOR_DELAY_NORMAL
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import java.math.RoundingMode
 
 class PressureSensorManager : SensorManager, SensorEventListener {
@@ -20,10 +19,11 @@ class PressureSensorManager : SensorManager, SensorEventListener {
             "pressure",
             "hPa"
         )
-        private var pressureReading: String = "unavailable"
-        lateinit var mySensorManager: android.hardware.SensorManager
     }
 
+    private lateinit var latestContext: Context
+    private lateinit var mySensorManager: android.hardware.SensorManager
+
     override val name: String
         get() = "Pressure Sensors"
 
@@ -34,18 +34,15 @@ class PressureSensorManager : SensorManager, SensorEventListener {
         return emptyArray()
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            pressureSensor.id -> getPressureSensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(context: Context) {
+        updatePressureSensor(context)
     }
 
-    private fun getPressureSensor(context: Context): SensorRegistration<Any> {
+    private fun updatePressureSensor(context: Context) {
+        if (!isEnabled(context, pressureSensor.id))
+            return
 
+        latestContext = context
         mySensorManager = context.getSystemService(SENSOR_SERVICE) as android.hardware.SensorManager
 
         val pressureSensors = mySensorManager.getDefaultSensor(Sensor.TYPE_PRESSURE)
@@ -55,14 +52,6 @@ class PressureSensorManager : SensorManager, SensorEventListener {
                 pressureSensors,
                 SENSOR_DELAY_NORMAL)
         }
-
-        val icon = "mdi:gauge"
-
-        return pressureSensor.toSensorRegistration(
-            pressureReading,
-            icon,
-            mapOf()
-        )
     }
 
     override fun onAccuracyChanged(p0: Sensor?, p1: Int) {
@@ -72,7 +61,13 @@ class PressureSensorManager : SensorManager, SensorEventListener {
     override fun onSensorChanged(event: SensorEvent?) {
         if (event != null) {
             if (event.sensor.type == Sensor.TYPE_PRESSURE) {
-                pressureReading = event.values[0].toBigDecimal().setScale(1, RoundingMode.HALF_EVEN).toString()
+                onSensorUpdated(
+                    latestContext,
+                    pressureSensor,
+                    event.values[0].toBigDecimal().setScale(1, RoundingMode.HALF_EVEN).toString(),
+                    "mdi:gauge",
+                    mapOf()
+                )
             }
         }
         mySensorManager.unregisterListener(this)
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/ProximitySensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/ProximitySensorManager.kt
index 3c5be1bc418..330d8f908f1 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/ProximitySensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/ProximitySensorManager.kt
@@ -6,7 +6,6 @@ import android.hardware.Sensor
 import android.hardware.SensorEvent
 import android.hardware.SensorEventListener
 import android.hardware.SensorManager.SENSOR_DELAY_NORMAL
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import kotlin.math.roundToInt
 
 class ProximitySensorManager : SensorManager, SensorEventListener {
@@ -18,10 +17,12 @@ class ProximitySensorManager : SensorManager, SensorEventListener {
             "sensor",
             "Proximity Sensor"
         )
-        private var proximityReading: String = "unavailable"
-        lateinit var mySensorManager: android.hardware.SensorManager
     }
 
+    private lateinit var latestContext: Context
+    private lateinit var mySensorManager: android.hardware.SensorManager
+    private var maxRange: Int = 0
+
     override val name: String
         get() = "Proximity Sensors"
 
@@ -32,17 +33,14 @@ class ProximitySensorManager : SensorManager, SensorEventListener {
         return emptyArray()
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            proximitySensor.id -> getProximitySensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(context: Context) {
+        latestContext = context
+        updateProximitySensor(context)
     }
 
-    private fun getProximitySensor(context: Context): SensorRegistration<Any> {
+    private fun updateProximitySensor(context: Context) {
+        if (!isEnabled(context, proximitySensor.id))
+            return
 
         mySensorManager = context.getSystemService(SENSOR_SERVICE) as android.hardware.SensorManager
 
@@ -51,25 +49,10 @@ class ProximitySensorManager : SensorManager, SensorEventListener {
             mySensorManager.registerListener(
                 this,
                 proximitySensors,
-                SENSOR_DELAY_NORMAL)
-
-            // Some devices only report 2 values, one of which is the max range so lets account for those devices
-            if (proximitySensors.maximumRange.roundToInt() == 5) {
-                proximityReading = if (proximityReading == "5") {
-                    "far"
-                } else {
-                    "near"
-                }
-            }
+                SENSOR_DELAY_NORMAL
+            )
+            maxRange = proximitySensors.maximumRange.roundToInt()
         }
-
-        val icon = "mdi:leak"
-
-        return proximitySensor.toSensorRegistration(
-            proximityReading,
-            icon,
-            mapOf()
-        )
     }
 
     override fun onAccuracyChanged(p0: Sensor?, p1: Int) {
@@ -79,7 +62,21 @@ class ProximitySensorManager : SensorManager, SensorEventListener {
     override fun onSensorChanged(event: SensorEvent?) {
         if (event != null) {
             if (event.sensor.type == Sensor.TYPE_PROXIMITY) {
-                proximityReading = event.values[0].roundToInt().toString()
+                val sensorValue = event.values[0].roundToInt()
+                val state =
+                    if (maxRange == 5 && sensorValue == 5)
+                        "far"
+                    else if (maxRange == 5)
+                        "near"
+                    else
+                        sensorValue
+                onSensorUpdated(
+                    latestContext,
+                    proximitySensor,
+                    state,
+                    "mdi:leak",
+                    mapOf()
+                )
             }
         }
         mySensorManager.unregisterListener(this)
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/SensorDetailFragment.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/SensorDetailFragment.kt
index ac8ff78f034..7f7db77f9a1 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/SensorDetailFragment.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/SensorDetailFragment.kt
@@ -2,6 +2,8 @@ package io.homeassistant.companion.android.sensors
 
 import android.content.pm.PackageManager
 import android.os.Bundle
+import android.os.Handler
+import androidx.core.os.postDelayed
 import androidx.preference.Preference
 import androidx.preference.PreferenceCategory
 import androidx.preference.PreferenceFragmentCompat
@@ -14,20 +16,27 @@ import io.homeassistant.companion.android.database.sensor.SensorDao
 
 class SensorDetailFragment(
     private val sensorManager: SensorManager,
-    private val basicSensor: SensorManager.BasicSensor
+    private val sensorId: String
 ) :
     PreferenceFragmentCompat() {
 
     companion object {
         fun newInstance(
             sensorManager: SensorManager,
-            basicSensor: SensorManager.BasicSensor
+            sensorId: String
         ): SensorDetailFragment {
-            return SensorDetailFragment(sensorManager, basicSensor)
+            return SensorDetailFragment(sensorManager, sensorId)
         }
     }
 
     private lateinit var sensorDao: SensorDao
+    private val handler = Handler()
+    private val refresh = object : Runnable {
+        override fun run() {
+            refreshSensorData()
+            handler.postDelayed(this, 10000)
+        }
+    }
 
     override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {
         DaggerSensorComponent
@@ -40,7 +49,7 @@ class SensorDetailFragment(
         addPreferencesFromResource(R.xml.sensor_detail)
 
         findPreference<SwitchPreference>("enabled")?.let {
-            val dao = sensorDao.get(basicSensor.id)
+            val dao = sensorDao.get(sensorId)
             val perm = sensorManager.checkPermission(requireContext())
             if (dao == null) {
                 it.isChecked = perm
@@ -63,47 +72,63 @@ class SensorDetailFragment(
                 return@setOnPreferenceChangeListener true
             }
         }
+    }
 
-        refreshSensorData()
+    override fun onResume() {
+        super.onResume()
+        handler.postDelayed(refresh, 0)
+    }
+
+    override fun onPause() {
+        super.onPause()
+        handler.removeCallbacks(refresh)
     }
 
     private fun refreshSensorData() {
-        val sensorData = sensorManager.getEnabledSensorData(requireContext(), basicSensor.id)
+        SensorWorker.start(requireContext())
+
+        val sensorDao = AppDatabase.getInstance(requireContext()).sensorDao()
+        val fullData = sensorDao.getFull(sensorId)
+        if (fullData?.sensor == null)
+            return
+        val sensorData = fullData.sensor
+        val attributes = fullData.attributes
 
         findPreference<Preference>("unique_id")?.let {
             it.isCopyingEnabled = true
-            it.summary = basicSensor.id
+            it.summary = sensorId
         }
         findPreference<Preference>("state")?.let {
             it.isCopyingEnabled = true
             when {
-                sensorData == null ->
+                !sensorData.enabled ->
                     it.summary = "Disabled"
-                basicSensor.unitOfMeasurement.isNullOrBlank() ->
-                    it.summary = sensorData.state.toString()
+                sensorData.unitOfMeasurement.isNullOrBlank() ->
+                    it.summary = sensorData.state
                 else ->
-                    it.summary = sensorData.state.toString() + " " + basicSensor.unitOfMeasurement
+                    it.summary = sensorData.state + " " + sensorData.unitOfMeasurement
             }
         }
         findPreference<Preference>("device_class")?.let {
             it.isCopyingEnabled = true
-            it.summary = basicSensor.deviceClass
+            it.summary = sensorData.deviceClass
         }
         findPreference<Preference>("icon")?.let {
             it.isCopyingEnabled = true
-            it.summary = sensorData?.icon ?: ""
+            it.summary = sensorData.icon
         }
 
         findPreference<PreferenceCategory>("attributes")?.let {
-            if (sensorData?.attributes.isNullOrEmpty())
+            if (attributes.isNullOrEmpty())
                 it.isVisible = false
             else {
-                sensorData?.attributes?.keys?.forEach { key ->
-                    val pref = findPreference("attribute_$key") ?: Preference(requireContext())
+                attributes.forEach { attribute ->
+                    val key = "attribute_${attribute.name}"
+                    val pref = findPreference(key) ?: Preference(requireContext())
                     pref.isCopyingEnabled = true
-                    pref.key = "attribute_$key"
-                    pref.title = key
-                    pref.summary = sensorData.attributes[key]?.toString() ?: ""
+                    pref.key = key
+                    pref.title = attribute.name
+                    pref.summary = attribute.value
                     pref.isIconSpaceReserved = false
 
                     if (!it.contains(pref))
@@ -116,7 +141,7 @@ class SensorDetailFragment(
     private fun updateSensorEntity(
         isEnabled: Boolean
     ) {
-        val sensorEntity = sensorDao.get(basicSensor.id)
+        val sensorEntity = sensorDao.get(sensorId)
         if (sensorEntity != null) {
             sensorEntity.enabled = isEnabled
             sensorDao.update(sensorEntity)
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/SensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/SensorManager.kt
index 667490ee8ab..3f59ca9ca33 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/SensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/SensorManager.kt
@@ -5,8 +5,8 @@ import android.content.pm.PackageManager
 import android.os.Process.myPid
 import android.os.Process.myUid
 import io.homeassistant.companion.android.database.AppDatabase
+import io.homeassistant.companion.android.database.sensor.Attribute
 import io.homeassistant.companion.android.database.sensor.Sensor
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 interface SensorManager {
 
@@ -19,24 +19,7 @@ interface SensorManager {
         val name: String,
         val deviceClass: String? = null,
         val unitOfMeasurement: String? = null
-    ) {
-        fun toSensorRegistration(
-            state: Any,
-            mdiIcon: String,
-            attributes: Map<String, Any>
-        ): SensorRegistration<Any> {
-            return SensorRegistration(
-                id,
-                state,
-                type,
-                mdiIcon,
-                attributes,
-                name,
-                deviceClass,
-                unitOfMeasurement
-            )
-        }
-    }
+    )
 
     fun requiredPermissions(): Array<String>
 
@@ -46,31 +29,56 @@ interface SensorManager {
         }
     }
 
-    fun getSensorData(context: Context, sensorId: String): SensorRegistration<Any>
-
-    fun getEnabledSensorData(context: Context, sensorId: String): SensorRegistration<Any>? {
+    fun isEnabled(context: Context, sensorId: String): Boolean {
         val sensorDao = AppDatabase.getInstance(context).sensorDao()
-        val hasPermission = checkPermission(context)
-
         var sensor = sensorDao.get(sensorId)
+        val permission = checkPermission(context)
 
+        // If we haven't created the entity yet do so and default to enabled
         if (sensor == null) {
-            sensor = Sensor(
-                sensorId,
-                hasPermission,
-                false,
-                ""
-            )
+            sensor = Sensor(sensorId, permission, false, "")
             sensorDao.add(sensor)
-        } else {
-            sensor.enabled = sensor.enabled && hasPermission
         }
 
-        var sensorData: SensorRegistration<Any>? = null
-        if (sensor.enabled)
-            sensorData = getSensorData(context, sensorId)
-        sensor.state = sensorData?.state?.toString() ?: ""
+        // If we don't have permission but we are still enabled then we aren't really enabled.
+        if (sensor.enabled && !permission) {
+            sensor.enabled = false
+            sensorDao.update(sensor)
+        }
+
+        return sensor.enabled
+    }
+
+    fun requestSensorUpdate(context: Context)
+
+    fun onSensorUpdated(
+        context: Context,
+        basicSensor: BasicSensor,
+        state: Any,
+        mdiIcon: String,
+        attributes: Map<String, Any?>
+    ) {
+        val sensorDao = AppDatabase.getInstance(context).sensorDao()
+        val sensor = sensorDao.get(basicSensor.id) ?: return
+
+        sensor.id = basicSensor.id
+        sensor.state = state.toString()
+        sensor.stateType = when (state) {
+            is String -> "string"
+            is Number -> "number"
+            else -> throw IllegalArgumentException("Unknown Sensor State Type")
+        }
+        sensor.type = basicSensor.type
+        sensor.icon = mdiIcon
+        sensor.name = basicSensor.name
+        sensor.deviceClass = basicSensor.deviceClass
+        sensor.unitOfMeasurement = basicSensor.unitOfMeasurement
+
         sensorDao.update(sensor)
-        return sensorData
+
+        sensorDao.clearAttributes(basicSensor.id)
+        attributes.entries.forEach { entry ->
+            sensorDao.add(Attribute(basicSensor.id, entry.key, entry.value.toString()))
+        }
     }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/SensorReceiver.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/SensorReceiver.kt
index eb424f93fbd..d69d277b032 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/SensorReceiver.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/SensorReceiver.kt
@@ -60,7 +60,6 @@ class SensorReceiver : BroadcastReceiver() {
             .inject(this)
 
         LocationBroadcastReceiver.restartLocationTracking(context)
-        ActivitySensorManager.restartActivityTracking(context)
 
         ioScope.launch {
             updateSensors(context, integrationUseCase)
@@ -86,22 +85,24 @@ class SensorReceiver : BroadcastReceiver() {
         val enabledRegistrations = mutableListOf<SensorRegistration<Any>>()
 
         MANAGERS.forEach { manager ->
+            manager.requestSensorUpdate(context)
             manager.availableSensors.forEach { basicSensor ->
-                // Only if we are enabled should we try to get values.
-                val sensorData = manager.getEnabledSensorData(context, basicSensor.id)
-                val sensor = sensorDao.get(basicSensor.id)
+                val fullSensor = sensorDao.getFull(basicSensor.id)
+                val sensor = fullSensor?.sensor
 
                 // Register Sensors if needed
-                if (sensorData != null && sensor?.registered == false) {
+                if (sensor?.enabled == true && !sensor.registered && !sensor.type.isNullOrBlank()) {
+                    val reg = fullSensor.toSensorRegistration()
                     try {
-                        integrationUseCase.registerSensor(sensorData)
+                        integrationUseCase.registerSensor(reg)
                         sensor.registered = true
+                        sensorDao.update(sensor)
                     } catch (e: Exception) {
-                        Log.e(TAG, "Issue registering sensor: ${sensorData.uniqueId}", e)
+                        Log.e(TAG, "Issue registering sensor: ${reg.uniqueId}", e)
                     }
                 }
-                if (sensorData != null) {
-                    enabledRegistrations.add(sensorData)
+                if (fullSensor != null && sensor?.registered == true) {
+                    enabledRegistrations.add(fullSensor.toSensorRegistration())
                 }
             }
         }
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/SensorsSettingsFragment.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/SensorsSettingsFragment.kt
index 15250a34ec4..a64da89089a 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/SensorsSettingsFragment.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/SensorsSettingsFragment.kt
@@ -1,6 +1,7 @@
 package io.homeassistant.companion.android.sensors
 
 import android.os.Bundle
+import android.os.Handler
 import androidx.preference.Preference
 import androidx.preference.PreferenceCategory
 import androidx.preference.PreferenceFragmentCompat
@@ -15,6 +16,31 @@ class SensorsSettingsFragment : PreferenceFragmentCompat() {
     @Inject
     lateinit var integrationUseCase: IntegrationUseCase
 
+    private val handler = Handler()
+    private val refresh = object : Runnable {
+        override fun run() {
+            SensorWorker.start(requireContext())
+            val sensorDao = AppDatabase.getInstance(requireContext()).sensorDao()
+            SensorReceiver.MANAGERS.plus(LocationBroadcastReceiver()).forEach { managers ->
+                managers.availableSensors.forEach { basicSensor ->
+                    findPreference<Preference>(basicSensor.id)?.let {
+                        val sensorEntity = sensorDao.get(basicSensor.id)
+                        if (sensorEntity?.enabled == true) {
+                            if (basicSensor.unitOfMeasurement.isNullOrBlank())
+                                it.summary = sensorEntity.state
+                            else
+                                it.summary = sensorEntity.state + " " + basicSensor.unitOfMeasurement
+                            // TODO: Add the icon from mdi:icon?
+                        } else {
+                            it.summary = "Disabled"
+                        }
+                    }
+                }
+            }
+            handler.postDelayed(this, 10000)
+        }
+    }
+
     companion object {
         fun newInstance(): SensorsSettingsFragment {
             return SensorsSettingsFragment()
@@ -49,7 +75,7 @@ class SensorsSettingsFragment : PreferenceFragmentCompat() {
                             R.id.content,
                             SensorDetailFragment.newInstance(
                                 manager,
-                                basicSensor
+                                basicSensor.id
                             )
                         )
                         .addToBackStack("Sensor Detail")
@@ -64,22 +90,11 @@ class SensorsSettingsFragment : PreferenceFragmentCompat() {
 
     override fun onResume() {
         super.onResume()
-        val sensorDao = AppDatabase.getInstance(requireContext()).sensorDao()
-        SensorReceiver.MANAGERS.plus(LocationBroadcastReceiver()).forEach { managers ->
-            managers.availableSensors.forEach { basicSensor ->
-                findPreference<Preference>(basicSensor.id)?.let {
-                    val sensorEntity = sensorDao.get(basicSensor.id)
-                    if (sensorEntity?.enabled == true) {
-                        if (basicSensor.unitOfMeasurement.isNullOrBlank())
-                            it.summary = sensorEntity.state
-                        else
-                            it.summary = sensorEntity.state + " " + basicSensor.unitOfMeasurement
-                        // TODO: Add the icon from mdi:icon?
-                    } else {
-                        it.summary = "Disabled"
-                    }
-                }
-            }
-        }
+        handler.postDelayed(refresh, 0)
+    }
+
+    override fun onPause() {
+        super.onPause()
+        handler.removeCallbacks(refresh)
     }
 }
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/StepsSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/StepsSensorManager.kt
index 941ce121465..c5c31604499 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/StepsSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/StepsSensorManager.kt
@@ -8,7 +8,6 @@ import android.hardware.SensorEvent
 import android.hardware.SensorEventListener
 import android.hardware.SensorManager.SENSOR_DELAY_NORMAL
 import android.os.Build
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import kotlin.math.roundToInt
 
 class StepsSensorManager : SensorManager, SensorEventListener {
@@ -21,8 +20,6 @@ class StepsSensorManager : SensorManager, SensorEventListener {
             "Steps Sensor",
             unitOfMeasurement = "steps"
         )
-        private var stepsReading: String = "unavailable"
-        lateinit var mySensorManager: android.hardware.SensorManager
     }
 
     override val name: String
@@ -31,6 +28,9 @@ class StepsSensorManager : SensorManager, SensorEventListener {
     override val availableSensors: List<SensorManager.BasicSensor>
         get() = listOf(stepsSensor)
 
+    private lateinit var latestContext: Context
+    private lateinit var mySensorManager: android.hardware.SensorManager
+
     override fun requiredPermissions(): Array<String> {
         return if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
             arrayOf(
@@ -41,21 +41,20 @@ class StepsSensorManager : SensorManager, SensorEventListener {
         }
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            stepsSensor.id -> getStepsSensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        latestContext = context
+        updateStepsSensor()
     }
 
-    private fun getStepsSensor(context: Context): SensorRegistration<Any> {
+    private fun updateStepsSensor() {
+        if (!isEnabled(latestContext, stepsSensor.id))
+            return
 
-        if (checkPermission(context)) {
+        if (checkPermission(latestContext)) {
             mySensorManager =
-                context.getSystemService(SENSOR_SERVICE) as android.hardware.SensorManager
+                latestContext.getSystemService(SENSOR_SERVICE) as android.hardware.SensorManager
 
             val stepsSensors = mySensorManager.getDefaultSensor(Sensor.TYPE_STEP_COUNTER)
             if (stepsSensors != null) {
@@ -66,13 +65,6 @@ class StepsSensorManager : SensorManager, SensorEventListener {
                 )
             }
         }
-        val icon = "mdi:walk"
-
-        return stepsSensor.toSensorRegistration(
-            stepsReading,
-            icon,
-            mapOf()
-        )
     }
 
     override fun onAccuracyChanged(p0: Sensor?, p1: Int) {
@@ -82,7 +74,13 @@ class StepsSensorManager : SensorManager, SensorEventListener {
     override fun onSensorChanged(event: SensorEvent?) {
         if (event != null) {
             if (event.sensor.type == Sensor.TYPE_STEP_COUNTER) {
-                stepsReading = event.values[0].roundToInt().toString()
+                onSensorUpdated(
+                    latestContext,
+                    stepsSensor,
+                    event.values[0].roundToInt().toString(),
+                    "mdi:walk",
+                    mapOf()
+                )
             }
         }
         mySensorManager.unregisterListener(this)
diff --git a/app/src/main/java/io/homeassistant/companion/android/sensors/StorageSensorManager.kt b/app/src/main/java/io/homeassistant/companion/android/sensors/StorageSensorManager.kt
index a3455e4880f..29b6b2c1013 100644
--- a/app/src/main/java/io/homeassistant/companion/android/sensors/StorageSensorManager.kt
+++ b/app/src/main/java/io/homeassistant/companion/android/sensors/StorageSensorManager.kt
@@ -4,7 +4,6 @@ import android.content.Context
 import android.os.Environment
 import android.os.StatFs
 import android.util.Log
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 import java.io.File
 import kotlin.math.roundToInt
 
@@ -61,20 +60,18 @@ class StorageSensorManager : SensorManager {
         return emptyArray()
     }
 
-    override fun getSensorData(
-        context: Context,
-        sensorId: String
-    ): SensorRegistration<Any> {
-        return when (sensorId) {
-            storageSensor.id -> getStorageSensor(context)
-            else -> throw IllegalArgumentException("Unknown sensorId: $sensorId")
-        }
+    override fun requestSensorUpdate(
+        context: Context
+    ) {
+        updateStorageSensor(context)
     }
 
-    private fun getStorageSensor(context: Context): SensorRegistration<Any> {
+    private fun updateStorageSensor(context: Context) {
+        if (!isEnabled(context, storageSensor.id))
+            return
 
-        var totalInternalStorage = getTotalInternalMemorySize()
-        var freeInternalStorage = getAvailableInternalMemorySize()
+        val totalInternalStorage = getTotalInternalMemorySize()
+        val freeInternalStorage = getAvailableInternalMemorySize()
         val percentageFreeInternalStorage = getPercentageInternal()
         externalPath = externalMemoryAvailable(context)
         var totalExternalStorage = "No SD Card"
@@ -91,7 +88,8 @@ class StorageSensorManager : SensorManager {
 
         val icon = "mdi:harddisk"
 
-        return storageSensor.toSensorRegistration(
+        onSensorUpdated(context,
+            storageSensor,
             percentageFreeInternalStorage,
             icon,
             mapOf(
@@ -128,7 +126,7 @@ class StorageSensorManager : SensorManager {
             commaOffset -= 3
         }
 
-        if (suffix != null) resultBuffer.append(suffix)
+        resultBuffer.append(suffix)
         return resultBuffer.toString()
     }
 
diff --git a/app/src/minimal/java/io/homeassistant/companion/android/sensors/ActivitySensorManager.kt b/app/src/minimal/java/io/homeassistant/companion/android/sensors/ActivitySensorManager.kt
index 730de0c5cdb..84c77871375 100644
--- a/app/src/minimal/java/io/homeassistant/companion/android/sensors/ActivitySensorManager.kt
+++ b/app/src/minimal/java/io/homeassistant/companion/android/sensors/ActivitySensorManager.kt
@@ -3,32 +3,9 @@ package io.homeassistant.companion.android.sensors
 import android.content.BroadcastReceiver
 import android.content.Context
 import android.content.Intent
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 class ActivitySensorManager : BroadcastReceiver(), SensorManager {
 
-    companion object {
-
-        internal const val TAG = "ActivitySM"
-
-        const val ACTION_REQUEST_ACTIVITY_UPDATES =
-            "io.homeassistant.companion.android.background.REQUEST_ACTIVITY_UPDATES"
-        const val ACTION_UPDATE_ACTIVITY =
-            "io.homeassistant.companion.android.background.UPDATE_ACTIVITY"
-
-        fun restartActivityTracking(context: Context) {
-            // Noop
-        }
-
-        private val activity = SensorManager.BasicSensor(
-            "detected_activity",
-            "sensor",
-            "Detected Activity"
-        )
-
-        private var last_activity: String = "unknown"
-    }
-
     override fun onReceive(context: Context, intent: Intent) {
         // Noop
     }
@@ -44,7 +21,7 @@ class ActivitySensorManager : BroadcastReceiver(), SensorManager {
         return emptyArray()
     }
 
-    override fun getSensorData(context: Context, sensorId: String): SensorRegistration<Any> {
-        TODO("Not yet implemented")
+    override fun requestSensorUpdate(context: Context) {
+        // Noop
     }
 }
diff --git a/app/src/minimal/java/io/homeassistant/companion/android/sensors/GeocodeSensorManager.kt b/app/src/minimal/java/io/homeassistant/companion/android/sensors/GeocodeSensorManager.kt
index 8421ac55e7c..43355667a73 100644
--- a/app/src/minimal/java/io/homeassistant/companion/android/sensors/GeocodeSensorManager.kt
+++ b/app/src/minimal/java/io/homeassistant/companion/android/sensors/GeocodeSensorManager.kt
@@ -1,7 +1,6 @@
 package io.homeassistant.companion.android.sensors
 
 import android.content.Context
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 class GeocodeSensorManager : SensorManager {
     override val name: String
@@ -13,7 +12,7 @@ class GeocodeSensorManager : SensorManager {
         return emptyArray()
     }
 
-    override fun getSensorData(context: Context, sensorId: String): SensorRegistration<Any> {
-        TODO("Not yet implemented")
+    override fun requestSensorUpdate(context: Context) {
+        // No op
     }
 }
diff --git a/app/src/minimal/java/io/homeassistant/companion/android/sensors/LocationBroadcastReceiver.kt b/app/src/minimal/java/io/homeassistant/companion/android/sensors/LocationBroadcastReceiver.kt
index 9f2d4a5969a..8770d68b5b5 100644
--- a/app/src/minimal/java/io/homeassistant/companion/android/sensors/LocationBroadcastReceiver.kt
+++ b/app/src/minimal/java/io/homeassistant/companion/android/sensors/LocationBroadcastReceiver.kt
@@ -3,7 +3,6 @@ package io.homeassistant.companion.android.sensors
 import android.content.BroadcastReceiver
 import android.content.Context
 import android.content.Intent
-import io.homeassistant.companion.android.domain.integration.SensorRegistration
 
 class LocationBroadcastReceiver : BroadcastReceiver(), SensorManager {
 
@@ -50,7 +49,7 @@ class LocationBroadcastReceiver : BroadcastReceiver(), SensorManager {
         return emptyArray()
     }
 
-    override fun getSensorData(context: Context, sensorId: String): SensorRegistration<Any> {
-        TODO("Not yet implemented")
+    override fun requestSensorUpdate(context: Context) {
+        // Noop
     }
 }
