Revert "remove layout cache"

This reverts commit fb0eb7a584f5c2c745f1d7e9abe73b62c6fe1619.