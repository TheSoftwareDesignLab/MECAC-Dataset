Search bar text update fixes and refactoring