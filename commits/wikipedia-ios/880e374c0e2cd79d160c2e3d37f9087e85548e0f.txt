small refactor, and fix disappearing text bug