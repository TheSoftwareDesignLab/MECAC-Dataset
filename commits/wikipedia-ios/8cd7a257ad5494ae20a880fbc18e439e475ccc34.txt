use codemirror mechanism to account for scroll offset