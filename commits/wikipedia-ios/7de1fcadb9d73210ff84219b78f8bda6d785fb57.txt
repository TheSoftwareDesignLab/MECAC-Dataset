loading animation - more code cleanup