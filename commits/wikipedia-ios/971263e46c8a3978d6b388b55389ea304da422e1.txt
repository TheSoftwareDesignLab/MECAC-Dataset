More preventions for nil title in history

Bug: T103737
more parameters assers
more checking for title.text.length

Change-Id: I49828819bf55e3d9222407bf534172a71a485c0e