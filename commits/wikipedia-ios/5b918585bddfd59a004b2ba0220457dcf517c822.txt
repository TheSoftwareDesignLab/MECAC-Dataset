fix location bearing calculations

C's math.h trig function parameters are in radians, not degrees. was
also missing a component of the reference equation for unclear reasons.