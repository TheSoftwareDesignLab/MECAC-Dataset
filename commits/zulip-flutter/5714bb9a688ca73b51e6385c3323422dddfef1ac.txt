compose [nfc]: Generalize send button beyond stream narrows

Now that much of the state-managing logic has been moved out of
this widget and into the text controllers, we mostly just make the
topic controller nullable and sprinkle some `?.` operators around.
We also let the caller specify how to compute the destination.