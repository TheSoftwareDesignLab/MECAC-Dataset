api [nfc]: Take ApiConnection as argument for unauth routes, too

This is a sort of followup to 89dcc5924, toward making the
login flow testable in the same way as the rest of our UI.