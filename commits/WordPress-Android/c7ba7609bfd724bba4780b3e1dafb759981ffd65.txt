Jetpack REST connection: Finalize (#22133)

* Skip wp.com login if access token exists

* First pass at installing Jetpack

* Second pass at installing Jetpack

* First pass at handling error response

* Return a pair for installJetpack and restored launch wpcom login from UI thread

* Added InstallJetpackResult to make it clear the second item in the pair is an HTTP status code

* Added InstallJetpackResult to make it clear the second item in the pair is an HTTP status code

* refresh the site before starting jetpack install

* Fixed detekt warnings, fetch site directly

* Added/updated comments

* Handle inactive Jetpack install, refresh site in init

* Tweaked comments

* Restored check for access token

* Check if we need to install or simply activate the jp plugin

* Simplified JetpackInstaller to always install the plugin

* Increased timeout

* Fixed Detekt warnings

* Simplified JetpackInstaller.kt

* Simplified JetpackInstaller.kt, p2

* Added log message

* Get plugin status before activating

* Use correct names for slugs

* Removed iOS commented code

* Reduced timeout from 60 to 45 seconds

* Simplified installer

* Code cleanup

* Removed refreshSite

* Pass WpApiClient as a parameter

* Added missing space

* Use a Result<PluginStatus> for installJetpack

* Add a delay to wp.com login if already logged in

* Removed unnecessary launch

* Suppress TooGenericExceptionCaught

* Moved JetpackConnectionHelper to its own helper class

* Connect Jetpack to site

* Handle failure

* Added fun to connect user

* Added error handling to connect user

* Updated error handling to connect user

* Remove extra message from all errors except ErrorType.Unknown

* Throw exception on invalid authentication

* Simplified JetpackConnectionHelper.kt

* Simplified JetpackConnector

* Code tweaks

* Further simplified JetpackConnector.kt

* Modified text & icon for user connection step

* Clarified that REST credentials are required

* Corrected ConnectUser step completion

* Corrected ConnectUser step failure

* Removed unnecessary job?.cancel

* Minor code cleanup

* Added skeleton for finalization

* Handle Done click separately

* Remove "Simulated" from screen title

* Pass the connection source to the activity and retain it in the view model

* First pass at activating stats module

* Second pass at activating stats module

* Second pass at activating stats module

* Renamed stats helper to module helper

* Fixed JetpackModuleHelper

* Fixed JetpackModuleHelper, p2

* Reload site before checking if module is activated

* Simplified JetpackModuleHelper.kt

* Ignore response in JetpackModuleHelper.kt

* Use isActiveModuleEnabled

* Refetch sites before checking if module is activated

* Added TODO

* Apply the connected site ID to the site

* Use more reliable isActiveModuleEnabled

* Store site rather than call getSelectedSite everywhere

* Removed unnecessary var

* Retain the REST passwords

* Reworded comment

* Simplified copyRestPasswords

* Removed unused PREFS

* Simplified JetpackModuleHelper

* Defer copying passwords to a future PR

* Limit feature to Jetpack app

* Fixed failing test

* First pass at rest connection from notifs

* Second pass at rest connection from notifs

* Simplified starting the flow

* Fixed detekt warning

* Renamed class to clarify that it's solely about the stats module