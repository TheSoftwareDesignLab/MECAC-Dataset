Added UI state and updated VM and fragment logic.