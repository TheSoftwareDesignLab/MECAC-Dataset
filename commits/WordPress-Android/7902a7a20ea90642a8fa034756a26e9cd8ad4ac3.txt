Update AGP to `8.11.0` (#22043)

* Update AGP to `8.11.0`

* Remove `android.experimental.lint.version` from `gradle.properties`

* Update Gradle wrapper to `8.14.3`

* Fix UseRequiresApi lint error by replacing @TargetApi with @RequiresApi

Replace @TargetApi(VERSION_CODES.P) with @RequiresApi(VERSION_CODES.P) in SignatureUtils.kt
to properly propagate API level requirements to callers as recommended by lint.

* Use SharedPreferences KTX extensions for cleaner preference editing

Replace manual SharedPreferences.edit() calls with KTX edit { } extension:
- Automatically handles editor creation and apply()
- More concise and idiomatic Kotlin code
- No functional changes, only syntax improvements

Files updated:
- JetpackFeatureOverlayShownTracker: 3 instances
- SelectedSectionManager: 1 instance
- SelectedTrafficGranularityManager: 1 instance
- UpdateNotificationSettingsUseCase: 1 instance
- GCMRegistrationWorker: 3 instances (already using KTX)

* Use View.isVisible KTX property for visibility checks

Replace View.visibility comparisons and assignments with isVisible property:
- Cleaner syntax for visibility checks (view.isVisible vs view.visibility == View.VISIBLE)
- Direct boolean assignment for showing/hiding views
- No functional changes

Files updated:
- EventItemViewHolder: Both setting and reading visibility
- PhotoPickerFragment: 2 visibility checks
- ReaderExpandableTagsView: Filter operation using isVisible
- MediaPickerFragment: Conditional visibility check
- UiHelpers: Already using isVisible correctly

* Use SQLiteDatabase.transaction KTX extension for database operations

Replace manual transaction handling with KTX transaction { } extension:
- Automatically handles beginTransaction, setTransactionSuccessful, and endTransaction
- Ensures proper cleanup in finally block
- Maintains error handling with SQLException catches for boolean return functions

Files updated:
- ResolverUtility: 2 transaction blocks with proper error handling
- SavedInstanceDatabase: Simple transaction for reset operation

* Use Canvas.withSave KTX extension for canvas state management

Replace manual canvas.save()/restoreToCount() with withSave { } extension:
- Automatically saves and restores canvas state
- Cleaner scoped canvas operations
- No functional changes to drawing behavior

Files updated:
- LineChartMarkerView: Chart tooltip drawing
- SubscribersChartMarkerView: Chart tooltip drawing

* Use String.toUri() KTX extension for URI parsing

Replace Uri.parse() calls with toUri() extension function:
- More idiomatic Kotlin syntax
- Same functionality, just cleaner API
- Note: EditPostActivity Uri.parse() kept due to nullable String handling

Files updated:
- MediaUriPager: Preview URIs
- HelpActivity: FAQ URLs (2 instances)
- FeedbackFormViewModel: Attachment URIs
- FeedbackFormScreen: Placeholder URIs (2 instances)
- AbstractAllowedUrlsWebViewNavigationDelegate: URL parsing
- ImageManager: Multiple image loading URIs
- WidgetUtils: Intent data URI
- PreviewImageFragment: Image loading URI

* Use CharSequence.trimmedLength() KTX extension

Replace TextUtils.getTrimmedLength() with trimmedLength() extension:
- Direct extension function on CharSequence
- Same trimming behavior (removes trailing whitespace)
- More idiomatic Kotlin

File updated:
- NoteViewHolder: Trimming notification subject text

* Use Int.toDrawable() KTX extension for ColorDrawable creation

Replace ColorDrawable constructor with toDrawable() extension:
- Creates ColorDrawable from color int value
- Cleaner and more idiomatic Kotlin
- Same resulting drawable

Files updated:
- PreviewModeSelectorPopup: Background color drawable
- ImageManager: Fallback error drawable from color resource

* Use Menu.size KTX property instead of size() method

Replace menu.size() method call with size property:
- KTX extension provides property access
- More idiomatic Kotlin property syntax
- Same functionality

File updated:
- PhotoPickerActionModeCallback: Check if menu is empty

* Use String.toUri() KTX extension for additional URI parsing

Replace more Uri.parse() calls with toUri() extension function:
- More idiomatic Kotlin syntax for URI creation
- Same functionality as Uri.parse() for non-null strings
- Consistent with previous toUri() conversions

Files updated:
- ActivityLauncherWrapper: Play Store URL parsing
- VideoLoader: File path to URI conversion
- DeviceMediaLoader: Media URI parsing
- CardViewModelSlice: URL parsing (2 files)
- PhotoPickerViewModel: URI construction
- AztecImageLoader: Image URI parsing
- AppPrefsWrapper: URL parsing
- DownloadManagerWrapper: Download URI parsing
- UriWrapper: Constructor URI parsing
- AppReviewManager: Review URL parsing

* Use Context.withStyledAttributes KTX extension for attribute access

Replace manual TypedArray handling with withStyledAttributes extension:
- Automatically handles obtainStyledAttributes and recycle()
- Scoped access to attributes within lambda
- Cleaner resource management

File updated:
- ActionableEmptyView: Custom view attribute parsing

* Use String.toUri() KTX extension in ContentResolverWrapper

Replace Uri.parse() with toUri() extension for URI creation:
- Consistent with other toUri() conversions
- More idiomatic Kotlin syntax
- Same functionality for content resolver queries

File updated:
- ContentResolverWrapper: Query URI construction

* Use View.isGone KTX property for visibility checks

Replace View.visibility == View.GONE checks with isGone property:
- Consistent with isVisible usage elsewhere
- More readable boolean checks
- Same functionality

File updated:
- DateSelectorViewUtils: Time zone visibility checks

* Replace Uri.parse() with String.toUri() KTX extension

Updates deprecated Uri.parse() calls to use the KTX extension for cleaner and more idiomatic code.

* Replace obtainStyledAttributes with withStyledAttributes KTX

Modernizes styled attributes handling using KTX extension for automatic resource management and cleaner code.

* Replace Canvas.save()/restore() with withSave KTX extension

Modernizes canvas state management using KTX extension for automatic restore handling and cleaner code.

* Fix SwallowedException detekt errors in ResolverUtility

Add proper exception logging for caught SQLException to comply with detekt rules and improve debugging.

* Fix remaining UseKtx lint errors

- Replace Context.obtainStyledAttributes with withStyledAttributes KTX in UnifiedCommentListItemDecoration
- Replace Menu.size() with Menu.size property in WPMainNavigationView

Note: Uri.parse() calls in EditPostActivity and UriUtilsWrapper are left unchanged as they handle nullable strings which the KTX toUri() extension does not support.

* Add 16KB page size alignment errors to lint baseline

Added baseline entries for Aligned16KB lint errors from native libraries that don't support 16KB page alignment. These errors will be addressed in a later PR by updating dependencies to versions that support 16KB alignment for better device compatibility.

Libraries affected:
- com.facebook.fbjni:fbjni:0.5.1
- com.facebook.react:react-android:0.73.3
- com.facebook.fresco:animated-gif:2.0.0
- com.facebook.react:hermes-android:0.73.3
- com.facebook.fresco:imagepipeline-native:3.1.3
- com.facebook.fresco:nativeimagefilters:3.1.3

* Use KTX extensions in UnifiedCommentListItemDecoration

Replace manual resource and canvas operations with KTX extensions:
- Replace obtainStyledAttributes/recycle with withStyledAttributes KTX
- Replace canvas.save()/restore() with canvas.withSave KTX
- Use proper null safety with ?.let chaining for layoutManager and divider
- Use ?.run extension in getItemOffsets for cleaner property access
- Change divider to var with null initialization for proper KTX assignment

All changes maintain identical functionality while using modern Kotlin idioms.

* Add missing import for Menu.size KTX extension

Import androidx.core.view.size to support Menu.size property access
instead of Menu.size() method call.

* Remove unused imports

* Update ResolverUtility to return correct boolean results

* Fix RecyclerView position handling in ReaderCommentAdapter

Resolves the "Do not treat position as fixed" lint warning by properly handling adapter positions in onBindViewHolder() and all click listeners.

Changes:
- Use holder.getBindingAdapterPosition() instead of position parameter for initial data access
- Update all click listeners to get fresh position data instead of capturing stale comment objects
- Add proper RecyclerView.NO_POSITION validation throughout
- Use unique variable names to avoid conflicts (authorCurrentPosition, replyCurrentPosition, etc.)

This ensures that comment interactions work correctly even when RecyclerView data changes during the view binding lifecycle.

* Improve author click listener logic in ReaderCommentAdapter

- Always attach author click listener instead of conditionally based on bind-time data
- Move hasAuthorBlogId() check to tap time with fresh comment data
- Remove duplicate setOnClickListener call
- Ensure consistent pattern with other click handlers that validate data at tap time

This is more robust since RecyclerView can recycle views and comment data may change between bind time and tap time.

* Revert "Add 16KB page size alignment errors to lint baseline"

This reverts commit a3a1d763edc51e0666521321e711ea52347594f0.

* Add lint ignore rule for UseRequiresApi in generated Hilt file

Ignores UseRequiresApi lint error for generated KSP Hilt file at:
../generated/ksp/wordpressVanillaRelease/java/org/wordpress/android/ui/main/Hilt_WPMainNavigationView.java

This is a generated file where we cannot control the annotation usage.

* Change Aligned16KB lint errors to warnings temporarily

Converts Aligned16KB errors to warnings until all dependencies
are updated to support 16KB page size alignment requirements.

* Convert Uri.parse() to toUri() KTX with null safety

Replaces Uri.parse() with String.toUri() extension and adds
null safety check for matcher.group(1) result.

* Fix remaining UseKtx warning by removing nullable Uri parameter

- Convert UriUtilsWrapper.parse() to use non-nullable String parameter
- Replace Uri.parse() with String.toUri() KTX extension
- Add null safety in GifMediaDataSource.toMediaItem()
- Use mapNotNull to filter out invalid MediaItems

* Fix AztecImageLoaderTest by properly mocking context.resources

- Add proper Context and Resources mocks in test setup
- Mock context.resources to return valid Resources object
- Fixes NullPointerException in resource.toDrawable(context.resources)

* Revert ResolverUtility to trunk version

Reverts database transaction KTX changes that broke existing tests.
The KTX conversion changed exception handling behavior and return values,
breaking test expectations for database failure scenarios.

* Suppress UseKtx lint warning in ResolverUtility

UseKtx warning is suppressed because the transaction KTX extension doesn't
provide sufficient control over transaction success/failure handling needed
for the existing API contract. Manual transaction handling is required to
return specific boolean values to callers like UserFlagsHelper.

* Address detekt warnings from usektx fixes