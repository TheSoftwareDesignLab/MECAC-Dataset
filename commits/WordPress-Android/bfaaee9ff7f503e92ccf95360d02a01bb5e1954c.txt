Refactor to keep isChecked always synced with the UI