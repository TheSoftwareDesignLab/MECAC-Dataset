fix a race condition that can cause a double animation bug