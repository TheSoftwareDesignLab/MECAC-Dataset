refactor: enhance navigation handling (should fix: #612)