got widget working. and fixed some bugs with it...