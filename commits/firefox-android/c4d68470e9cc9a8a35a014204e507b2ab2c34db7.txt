[components] For https://github.com/mozilla-mobile/android-components/issues/9904 - Refactor BrowserMenu to use ExpandableLayout

To support using the new functionality browser menu should:
- intercept the menu layout before being used to create a new PopupWindow and
possibly wrap it in the ExpandableLayout.
- identify when the menu wants to be shown as collapsed/expanded. This will be
inferred based on the new `isCollapsingMenuLimit` API of BrowserMenuItem.
- offer a straightforward, reliable way to know as soon as possible if the
menu should be anchored to the top or to the bottom of the screen.

Most of the refactoring from this patch was needed for the last part.
Previously the PopupWindow was created with a menu and then we used different
methods to infer where to place the menu.
Now we needed to know this before creating the PopupWindow since as per the
UX specs the menu should be expandable only when it is anchored to the bottom.