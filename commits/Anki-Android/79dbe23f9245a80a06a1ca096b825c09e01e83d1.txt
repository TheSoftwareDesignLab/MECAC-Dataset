refactor widget dimension update
--> put everything in compat-v16 as the widget can only be updated from v16 on (widgets cannot be measured in lower api versions)