fix some widget update problems