feat: refactor the text editing code