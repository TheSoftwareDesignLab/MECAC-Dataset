Refactor colorization to support dark theme.

// FREEBIE