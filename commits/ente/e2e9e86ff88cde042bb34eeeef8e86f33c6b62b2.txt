Minor refactor and UI changes