Add bidirectional text marking to handle RTL languages