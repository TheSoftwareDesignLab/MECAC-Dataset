widget: move updates into the service