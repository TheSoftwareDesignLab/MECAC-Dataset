Resolve text corruption by using a local StringBuilder and storing the formatter in a ThreadLocal.