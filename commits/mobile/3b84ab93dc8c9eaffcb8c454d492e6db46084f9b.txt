Refactor navigation utils to allow testing routes