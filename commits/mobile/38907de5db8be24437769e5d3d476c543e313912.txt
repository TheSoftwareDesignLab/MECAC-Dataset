move timer logic from ui to provider