Fix uploading progress and several UI issues