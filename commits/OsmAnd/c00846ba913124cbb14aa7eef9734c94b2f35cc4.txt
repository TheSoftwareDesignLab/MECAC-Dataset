#1964: Refactored using nightmode detection; update ui on noghtmode change