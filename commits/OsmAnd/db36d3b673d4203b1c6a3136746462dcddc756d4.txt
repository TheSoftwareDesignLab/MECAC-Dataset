Refactor add device dialog and improve ui