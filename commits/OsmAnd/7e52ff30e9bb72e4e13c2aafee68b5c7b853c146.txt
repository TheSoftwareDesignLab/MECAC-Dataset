Fix layout and getting location data