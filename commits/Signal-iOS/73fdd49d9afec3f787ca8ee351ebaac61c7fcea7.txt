Use conversation state to decide if the user can ring a group at first

- Refactor the enum RingMode into an option set RingRestrictions
- Keep track of whether the call is empty in RingRestrictions rather
  than by directly inspecting peek info every time
- Set the initial callInProgress restriction by looking for unended
  calls in the database (the same thing used to show the "Join Call"
  button in the conversation view)
- Use the more-reliable callInProgress restriction everywhere we need
  to check if there's a call in progress
- If we think there's a call in progress but don't have peek info,
  wait until we get peek info to show status text in the call lobby

This provides a more orthogonal model for ring restrictions, which is
important for tracking "group too large" and "call in progress"
independently. Either can change but the state of the other still
determines how the UI should be updated.