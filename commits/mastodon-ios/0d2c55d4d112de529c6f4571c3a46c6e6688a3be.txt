Correctly match emoji shortcodes that contain escaped markdown characters

Because the parser doesn’t know about emoji shortcodes, the codes in the text end up with any markdown characters in them (commonly ‘_’) escaped, which must be taken into account when matching them to emoji urls.