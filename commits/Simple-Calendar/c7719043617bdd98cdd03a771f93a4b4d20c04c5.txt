implement the actual theme change