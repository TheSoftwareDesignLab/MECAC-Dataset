Fix backup on boot logic and improve readability