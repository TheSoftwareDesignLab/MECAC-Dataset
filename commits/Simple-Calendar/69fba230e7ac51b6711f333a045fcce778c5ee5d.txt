change the way we are creating the table so it can be reused in a widget