refactor to increase readability

also to make taginfo file generation easier