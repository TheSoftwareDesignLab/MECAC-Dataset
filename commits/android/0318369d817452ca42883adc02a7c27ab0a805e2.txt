Migrate to theme-update event (#2000)

* Migrate to theme-update event

* Address feedback

* Fix lint