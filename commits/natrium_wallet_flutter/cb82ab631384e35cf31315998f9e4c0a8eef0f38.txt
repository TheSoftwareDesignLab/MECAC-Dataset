Settings widget turned into a stateful one