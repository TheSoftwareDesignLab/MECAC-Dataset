diff --git a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.java b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.java
index 4ab64cbd8..d6a385532 100644
--- a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.java
+++ b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.java
@@ -23,7 +23,6 @@
 import android.content.ClipData;
 import android.content.Intent;
 import android.content.pm.PackageManager;
-import android.graphics.Rect;
 import android.graphics.drawable.ColorDrawable;
 import android.net.Uri;
 import android.os.Build;
@@ -33,13 +32,15 @@
 import android.support.annotation.NonNull;
 import android.support.v4.app.ActivityCompat;
 import android.support.v4.content.ContextCompat;
+import android.support.v4.view.OnApplyWindowInsetsListener;
+import android.support.v4.view.ViewCompat;
+import android.support.v4.view.WindowInsetsCompat;
 import android.support.v7.app.AppCompatActivity;
 import android.support.v7.widget.DefaultItemAnimator;
 import android.support.v7.widget.GridLayoutManager;
 import android.support.v7.widget.RecyclerView;
 import android.support.v7.widget.Toolbar;
 import android.util.SparseIntArray;
-import android.util.TypedValue;
 import android.view.LayoutInflater;
 import android.view.MenuItem;
 import android.view.MotionEvent;
@@ -54,7 +55,6 @@
 import android.widget.ViewAnimator;
 
 import com.google.android.apps.muzei.event.GalleryChosenUrisChangedEvent;
-import com.google.android.apps.muzei.util.DrawInsetsFrameLayout;
 import com.google.android.apps.muzei.util.MultiSelectionController;
 import com.squareup.picasso.Picasso;
 
@@ -115,10 +115,6 @@ public class GallerySettingsActivity extends AppCompatActivity {
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.gallery_settings_activity);
-        getWindow().getDecorView().setSystemUiVisibility(
-                View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
-                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
-                        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE);
         setupAppBar();
 
         mStore = GalleryStore.getInstance(this);
@@ -132,7 +128,6 @@ protected void onCreate(Bundle savedInstanceState) {
         DefaultItemAnimator itemAnimator = new DefaultItemAnimator();
         itemAnimator.setSupportsChangeAnimations(false);
         mPhotoGridView.setItemAnimator(itemAnimator);
-        mPhotoGridView.setHasFixedSize(true);
         setupMultiSelect();
 
         final GridLayoutManager gridLayoutManager = new GridLayoutManager(
@@ -175,27 +170,19 @@ public void onGlobalLayout() {
             }
         });
 
-        final DrawInsetsFrameLayout insetsLayout = (DrawInsetsFrameLayout)
-                findViewById(R.id.draw_insets_frame_layout);
-        insetsLayout.setOnInsetsCallback(new DrawInsetsFrameLayout.OnInsetsCallback() {
+        ViewCompat.setOnApplyWindowInsetsListener(mPhotoGridView, new OnApplyWindowInsetsListener() {
             @Override
-            public void onInsetsChanged(Rect insets) {
-                insetsLayout.setPadding(insets.left, insets.top, insets.right, insets.bottom);
-
-                TypedValue actionBarSizeValue = new TypedValue();
-                getTheme().resolveAttribute(R.attr.actionBarSize, actionBarSizeValue, true);
+            public WindowInsetsCompat onApplyWindowInsets(final View v, final WindowInsetsCompat insets) {
                 int gridSpacing = getResources()
                         .getDimensionPixelSize(R.dimen.gallery_settings_chosen_photo_grid_spacing);
-                mPhotoGridView.setPadding(
-                        insets.left + gridSpacing,
-                        insets.top + gridSpacing + (int) actionBarSizeValue.getDimension(
-                                getResources().getDisplayMetrics()),
-                        insets.right + gridSpacing,
-                        insets.bottom + gridSpacing + getResources().getDimensionPixelSize(
-                                R.dimen.gallery_settings_fab_space));
-
-                findViewById(R.id.selection_toolbar_container).setPadding(
-                        insets.left, insets.top, insets.right, 0);
+                ViewCompat.onApplyWindowInsets(v, insets.replaceSystemWindowInsets(
+                        insets.getSystemWindowInsetLeft() + gridSpacing,
+                        gridSpacing,
+                        insets.getSystemWindowInsetRight() + gridSpacing,
+                        insets.getSystemWindowInsetBottom() + insets.getSystemWindowInsetTop() + gridSpacing +
+                                getResources().getDimensionPixelSize(R.dimen.gallery_settings_fab_space)));
+
+                return insets;
             }
         });
 
diff --git a/source-gallery/src/main/java/com/google/android/apps/muzei/util/DrawInsetsFrameLayout.java b/source-gallery/src/main/java/com/google/android/apps/muzei/util/DrawInsetsFrameLayout.java
deleted file mode 100644
index 047d5df04..000000000
--- a/source-gallery/src/main/java/com/google/android/apps/muzei/util/DrawInsetsFrameLayout.java
+++ /dev/null
@@ -1,173 +0,0 @@
-/*
- * Copyright 2014 Google Inc.
- *
- * Licensed under the Apache License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-
-package com.google.android.apps.muzei.util;
-
-import android.content.Context;
-import android.content.res.TypedArray;
-import android.graphics.Canvas;
-import android.graphics.Rect;
-import android.graphics.drawable.Drawable;
-import android.util.AttributeSet;
-import android.widget.FrameLayout;
-
-import com.google.android.apps.muzei.gallery.R;
-
-public class DrawInsetsFrameLayout extends FrameLayout {
-    private Drawable mInsetBackground;
-    private Drawable mTopInsetBackground;
-    private Drawable mBottomInsetBackground;
-    private Drawable mSideInsetBackground;
-
-    private Rect mInsets;
-    private Rect mTempRect = new Rect();
-    private OnInsetsCallback mOnInsetsCallback;
-
-    public DrawInsetsFrameLayout(Context context) {
-        super(context);
-        init(context, null, 0);
-    }
-
-    public DrawInsetsFrameLayout(Context context, AttributeSet attrs) {
-        super(context, attrs);
-        init(context, attrs, 0);
-    }
-
-    public DrawInsetsFrameLayout(Context context, AttributeSet attrs, int defStyle) {
-        super(context, attrs, defStyle);
-        init(context, attrs, defStyle);
-    }
-
-    private void init(Context context, AttributeSet attrs, int defStyle) {
-        final TypedArray a = context.obtainStyledAttributes(attrs,
-                R.styleable.DrawInsetsFrameLayout, defStyle, 0);
-        assert a != null;
-
-        mInsetBackground = a.getDrawable(R.styleable.DrawInsetsFrameLayout_insetBackground);
-        mTopInsetBackground = a.getDrawable(R.styleable.DrawInsetsFrameLayout_topInsetBackground);
-        mBottomInsetBackground =
-                a.getDrawable(R.styleable.DrawInsetsFrameLayout_bottomInsetBackground);
-        mSideInsetBackground = a.getDrawable(R.styleable.DrawInsetsFrameLayout_sideInsetBackground);
-
-        a.recycle();
-    }
-
-    @Override
-    protected void onAttachedToWindow() {
-        super.onAttachedToWindow();
-        if (mInsetBackground != null) {
-            mInsetBackground.setCallback(this);
-        }
-        if (mTopInsetBackground != null) {
-            mTopInsetBackground.setCallback(this);
-        }
-        if (mBottomInsetBackground != null) {
-            mBottomInsetBackground.setCallback(this);
-        }
-        if (mSideInsetBackground != null) {
-            mSideInsetBackground.setCallback(this);
-        }
-    }
-
-    @Override
-    protected void onDetachedFromWindow() {
-        super.onDetachedFromWindow();
-        if (mInsetBackground != null) {
-            mInsetBackground.setCallback(null);
-        }
-        if (mTopInsetBackground != null) {
-            mTopInsetBackground.setCallback(null);
-        }
-        if (mBottomInsetBackground != null) {
-            mBottomInsetBackground.setCallback(null);
-        }
-        if (mSideInsetBackground != null) {
-            mSideInsetBackground.setCallback(null);
-        }
-    }
-
-    public void setOnInsetsCallback(OnInsetsCallback onInsetsCallback) {
-        mOnInsetsCallback = onInsetsCallback;
-    }
-
-    @Override
-    protected boolean fitSystemWindows(Rect insets) {
-        mInsets = new Rect(insets);
-        setWillNotDraw(false);
-        postInvalidateOnAnimation();
-        if (mOnInsetsCallback != null) {
-            mOnInsetsCallback.onInsetsChanged(insets);
-        }
-        return true;
-    }
-
-    @Override
-    protected void onDraw(Canvas canvas) {
-        super.onDraw(canvas);
-        int width = getWidth();
-        int height = getHeight();
-
-        if (mInsets != null) {
-            // Top
-            mTempRect.set(0, 0, width, mInsets.top);
-            if (mInsetBackground != null) {
-                mInsetBackground.setBounds(mTempRect);
-                mInsetBackground.draw(canvas);
-            }
-            if (mTopInsetBackground != null) {
-                mTopInsetBackground.setBounds(mTempRect);
-                mTopInsetBackground.draw(canvas);
-            }
-
-            // Bottom
-            mTempRect.set(0, height - mInsets.bottom, width, height);
-            if (mInsetBackground != null) {
-                mInsetBackground.setBounds(mTempRect);
-                mInsetBackground.draw(canvas);
-            }
-            if (mTopInsetBackground != null) {
-                mBottomInsetBackground.setBounds(mTempRect);
-                mBottomInsetBackground.draw(canvas);
-            }
-
-            // Left
-            mTempRect.set(0, mInsets.top, mInsets.left, height - mInsets.bottom);
-            if (mInsetBackground != null) {
-                mInsetBackground.setBounds(mTempRect);
-                mInsetBackground.draw(canvas);
-            }
-            if (mSideInsetBackground != null) {
-                mSideInsetBackground.setBounds(mTempRect);
-                mSideInsetBackground.draw(canvas);
-            }
-
-            // Right
-            mTempRect.set(width - mInsets.right, mInsets.top, width, height - mInsets.bottom);
-            if (mInsetBackground != null) {
-                mInsetBackground.setBounds(mTempRect);
-                mInsetBackground.draw(canvas);
-            }
-            if (mSideInsetBackground != null) {
-                mSideInsetBackground.setBounds(mTempRect);
-                mSideInsetBackground.draw(canvas);
-            }
-        }
-    }
-
-    public static interface OnInsetsCallback {
-        public void onInsetsChanged(Rect insets);
-    }
-}
diff --git a/source-gallery/src/main/res/layout/gallery_settings_activity.xml b/source-gallery/src/main/res/layout/gallery_settings_activity.xml
index b25038ce4..cd1800b76 100644
--- a/source-gallery/src/main/res/layout/gallery_settings_activity.xml
+++ b/source-gallery/src/main/res/layout/gallery_settings_activity.xml
@@ -13,10 +13,11 @@
   See the License for the specific language governing permissions and
   limitations under the License.
   -->
-<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
+<android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     android:layout_width="match_parent"
-    android:layout_height="match_parent">
+    android:layout_height="match_parent"
+    android:fitsSystemWindows="true">
 
     <android.support.v7.widget.RecyclerView android:id="@+id/photo_grid"
         android:layout_width="match_parent"
@@ -26,94 +27,95 @@
         android:scrollbarStyle="outsideOverlay"
         android:scrollbars="vertical"
         android:clipToPadding="false"
+        android:fitsSystemWindows="true"
         android:drawSelectorOnTop="true"
         android:horizontalSpacing="@dimen/gallery_settings_chosen_photo_grid_spacing"
-        android:verticalSpacing="@dimen/gallery_settings_chosen_photo_grid_spacing" />
+        android:verticalSpacing="@dimen/gallery_settings_chosen_photo_grid_spacing"
+        app:layout_behavior="@string/appbar_scrolling_view_behavior" />
 
-    <com.google.android.apps.muzei.util.DrawInsetsFrameLayout
-        android:id="@+id/draw_insets_frame_layout"
-        app:insetBackground="@color/gallery_settings_inset_shade"
+    <android.support.design.widget.AppBarLayout
         android:layout_width="match_parent"
-        android:layout_height="match_parent">
+        android:layout_height="wrap_content"
+        android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">
 
         <android.support.v7.widget.Toolbar
-            android:background="@color/gallery_settings_inset_shade"
             android:id="@+id/app_bar"
             android:layout_width="match_parent"
             android:layout_height="?actionBarSize"
-            app:title="@string/gallery_source_settings_title" />
+            app:title="@string/gallery_source_settings_title"
+            app:layout_scrollFlags="scroll|enterAlways" />
 
-        <FrameLayout android:id="@android:id/empty"
-            android:layout_width="match_parent"
-            android:layout_height="match_parent">
+    </android.support.design.widget.AppBarLayout>
+
+    <FrameLayout android:id="@android:id/empty"
+        android:layout_width="match_parent"
+        android:layout_height="match_parent">
+
+        <LinearLayout android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:orientation="vertical"
+            android:padding="32dp"
+            android:layout_gravity="center"
+            android:gravity="center">
 
-            <LinearLayout android:layout_width="wrap_content"
+            <ViewAnimator android:id="@+id/empty_animator"
+                android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
-                android:orientation="vertical"
-                android:padding="32dp"
                 android:layout_gravity="center"
-                android:gravity="center">
+                android:measureAllChildren="false">
+
+                <com.google.android.apps.muzei.gallery.GalleryEmptyStateGraphicView
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content" />
 
-                <ViewAnimator android:id="@+id/empty_animator"
+                <Button
+                    android:id="@+id/gallery_enable_random"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
-                    android:layout_gravity="center"
-                    android:measureAllChildren="false">
-
-                    <com.google.android.apps.muzei.gallery.GalleryEmptyStateGraphicView
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content" />
-
-                    <Button
-                        android:id="@+id/gallery_enable_random"
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:text="@string/gallery_source_settings_enable_random"
-                        style="@style/Widget.AppCompat.Button.Colored"/>
-
-                    <Button
-                        android:id="@+id/gallery_edit_permission_settings"
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:text="@string/gallery_source_settings_edit_settings"
-                        style="@style/Widget.AppCompat.Button.Colored"/>
-                </ViewAnimator>
-
-                <TextView android:id="@+id/empty_description"
+                    android:text="@string/gallery_source_settings_enable_random"
+                    style="@style/Widget.AppCompat.Button.Colored"/>
+
+                <Button
+                    android:id="@+id/gallery_edit_permission_settings"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
-                    android:layout_marginTop="16dp"
-                    android:layout_marginBottom="64dp"
-                    android:gravity="center_horizontal"
-                    android:textSize="22sp"
-                    android:fontFamily="sans-serif-condensed"
-                    android:textStyle="italic"
-                    android:textColor="@color/gallery_settings_theme"
-                    android:breakStrategy="balanced"
-                    android:text="@string/gallery_source_settings_empty" />
-            </LinearLayout>
-
-            <TextView android:layout_width="wrap_content"
+                    android:text="@string/gallery_source_settings_edit_settings"
+                    style="@style/Widget.AppCompat.Button.Colored"/>
+            </ViewAnimator>
+
+            <TextView android:id="@+id/empty_description"
+                android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
-                android:layout_gravity="bottom|center_horizontal"
-                android:layout_marginBottom="88dp"
-                android:textSize="16sp"
+                android:layout_marginTop="16dp"
+                android:layout_marginBottom="64dp"
+                android:gravity="center_horizontal"
+                android:textSize="22sp"
                 android:fontFamily="sans-serif-condensed"
                 android:textStyle="italic"
-                android:textColor="@color/gallery_settings_theme_dark"
-                android:text="@string/gallery_source_settings_empty_subtitle" />
-
-        </FrameLayout>
+                android:textColor="@color/gallery_settings_theme"
+                android:breakStrategy="balanced"
+                android:text="@string/gallery_source_settings_empty" />
+        </LinearLayout>
 
-        <android.support.design.widget.FloatingActionButton android:id="@+id/add_photos_button"
-            android:layout_width="wrap_content"
+        <TextView android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_gravity="bottom|center_horizontal"
-            android:layout_marginBottom="16dp"
-            android:contentDescription="@string/action_add_photos"
-            android:src="@drawable/ic_add_photos" />
+            android:layout_marginBottom="88dp"
+            android:textSize="16sp"
+            android:fontFamily="sans-serif-condensed"
+            android:textStyle="italic"
+            android:textColor="@color/gallery_settings_theme_dark"
+            android:text="@string/gallery_source_settings_empty_subtitle" />
 
-    </com.google.android.apps.muzei.util.DrawInsetsFrameLayout>
+    </FrameLayout>
+
+    <android.support.design.widget.FloatingActionButton android:id="@+id/add_photos_button"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_gravity="bottom|center_horizontal"
+        android:layout_marginBottom="16dp"
+        android:contentDescription="@string/action_add_photos"
+        android:src="@drawable/ic_add_photos" />
 
     <LinearLayout
         android:id="@+id/selection_toolbar_container"
@@ -121,11 +123,11 @@
         android:layout_height="wrap_content"
         android:orientation="vertical"
         android:visibility="invisible"
-        android:background="@color/gallery_settings_theme_dark"
-        android:elevation="@dimen/header_elevation">
+        android:elevation="@dimen/header_elevation"
+        android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">
 
         <android.support.v7.widget.Toolbar
-            android:background="@color/gallery_settings_theme"
+            android:background="@color/gallery_settings_theme_dark"
             android:id="@+id/selection_toolbar"
             android:layout_width="match_parent"
             android:layout_height="?actionBarSize"
@@ -133,4 +135,4 @@
             app:navigationIcon="?attr/homeAsUpIndicator" />
 
     </LinearLayout>
-</FrameLayout>
+</android.support.design.widget.CoordinatorLayout>
diff --git a/source-gallery/src/main/res/values-v21/styles.xml b/source-gallery/src/main/res/values-v21/styles.xml
index ffe8da0fd..d53d61e69 100644
--- a/source-gallery/src/main/res/values-v21/styles.xml
+++ b/source-gallery/src/main/res/values-v21/styles.xml
@@ -17,7 +17,6 @@
 <resources>
     <style name="Theme.Gallery" parent="Theme.Gallery.Base">
         <item name="android:windowDrawsSystemBarBackgrounds">true</item>
-        <item name="android:statusBarColor">@android:color/transparent</item>
-        <item name="android:navigationBarColor">@android:color/transparent</item>
+        <item name="android:windowTranslucentNavigation">true</item>
     </style>
 </resources>
\ No newline at end of file
diff --git a/source-gallery/src/main/res/values/attrs.xml b/source-gallery/src/main/res/values/attrs.xml
deleted file mode 100644
index 6c359019d..000000000
--- a/source-gallery/src/main/res/values/attrs.xml
+++ /dev/null
@@ -1,24 +0,0 @@
-<!--
-  Copyright 2014 Google Inc.
-
-  Licensed under the Apache License, Version 2.0 (the "License");
-  you may not use this file except in compliance with the License.
-  You may obtain a copy of the License at
-
-      http://www.apache.org/licenses/LICENSE-2.0
-
-  Unless required by applicable law or agreed to in writing, software
-  distributed under the License is distributed on an "AS IS" BASIS,
-  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-  See the License for the specific language governing permissions and
-  limitations under the License.
-  -->
-
-<resources>
-    <declare-styleable name="DrawInsetsFrameLayout">
-        <attr name="topInsetBackground" format="reference|color" />
-        <attr name="bottomInsetBackground" format="reference|color" />
-        <attr name="sideInsetBackground" format="reference|color" />
-        <attr name="insetBackground" format="reference|color" />
-    </declare-styleable>
-</resources>
diff --git a/source-gallery/src/main/res/values/colors.xml b/source-gallery/src/main/res/values/colors.xml
index 1a42c0c27..de26cd11b 100644
--- a/source-gallery/src/main/res/values/colors.xml
+++ b/source-gallery/src/main/res/values/colors.xml
@@ -22,6 +22,5 @@
     <color name="gallery_settings_empty_state_light">@color/gallery_settings_theme_light</color>
 
     <color name="gallery_settings_window_background">#111</color>
-    <color name="gallery_settings_inset_shade">#a111</color>
     <color name="gallery_settings_chosen_photo_placeholder">#5666</color>
 </resources>
diff --git a/source-gallery/src/main/res/values/styles.xml b/source-gallery/src/main/res/values/styles.xml
index 5dd50bcaf..c17ad8a0e 100644
--- a/source-gallery/src/main/res/values/styles.xml
+++ b/source-gallery/src/main/res/values/styles.xml
@@ -25,8 +25,6 @@
     </style>
 
     <style name="Theme.Gallery" parent="Theme.Gallery.Base"> <!-- pre-Lollipop -->
-        <item name="android:windowTranslucentStatus">true</item>
-        <item name="android:windowTranslucentNavigation">true</item>
     </style>
 
 </resources>
