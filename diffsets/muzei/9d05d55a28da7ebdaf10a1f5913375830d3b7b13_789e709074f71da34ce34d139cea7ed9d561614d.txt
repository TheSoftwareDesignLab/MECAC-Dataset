diff --git a/main/src/main/java/com/google/android/apps/muzei/widget/AppWidgetUpdateTask.kt b/main/src/main/java/com/google/android/apps/muzei/widget/AppWidgetUpdateTask.kt
index b1f386386..8aeb2786f 100644
--- a/main/src/main/java/com/google/android/apps/muzei/widget/AppWidgetUpdateTask.kt
+++ b/main/src/main/java/com/google/android/apps/muzei/widget/AppWidgetUpdateTask.kt
@@ -80,7 +80,11 @@ suspend fun showWidgetPreview(context: Context) {
 suspend fun updateAppWidget(context: Context) = coroutineScope {
     val widget = ComponentName(context, MuzeiAppWidgetProvider::class.java)
     val appWidgetManager = AppWidgetManager.getInstance(context) ?: return@coroutineScope
-    val appWidgetIds = appWidgetManager.getAppWidgetIds(widget)
+    val appWidgetIds = try {
+        appWidgetManager.getAppWidgetIds(widget)
+    } catch (e: Exception) {
+        intArrayOf()
+    }
     if (appWidgetIds.isEmpty()) {
         // No app widgets, nothing to do
         return@coroutineScope
