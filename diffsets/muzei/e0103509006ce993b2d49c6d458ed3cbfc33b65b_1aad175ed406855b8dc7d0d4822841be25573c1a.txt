diff --git a/main/src/main/java/com/google/android/apps/muzei/sources/SourceManager.java b/main/src/main/java/com/google/android/apps/muzei/sources/SourceManager.java
index fb95f2d39..11d2ce54a 100644
--- a/main/src/main/java/com/google/android/apps/muzei/sources/SourceManager.java
+++ b/main/src/main/java/com/google/android/apps/muzei/sources/SourceManager.java
@@ -55,6 +55,7 @@
 import net.nurik.roman.muzei.R;
 
 import java.util.HashSet;
+import java.util.List;
 import java.util.concurrent.Executor;
 import java.util.concurrent.Executors;
 
@@ -96,10 +97,14 @@ public void run() {
             HashSet<ComponentName> existingSources = new HashSet<>(mPackageName != null
                     ? database.sourceDao().getSourcesComponentNamesByPackageNameBlocking(mPackageName)
                     : database.sourceDao().getSourceComponentNamesBlocking());
-            for (ResolveInfo ri : pm.queryIntentServices(queryIntent, PackageManager.GET_META_DATA)) {
-                existingSources.remove(new ComponentName(ri.serviceInfo.packageName,
-                        ri.serviceInfo.name));
-                updateSourceFromServiceInfo(ri.serviceInfo);
+            List<ResolveInfo> resolveInfos = pm.queryIntentServices(queryIntent,
+                    PackageManager.GET_META_DATA);
+            if (resolveInfos != null) {
+                for (ResolveInfo ri : resolveInfos) {
+                    existingSources.remove(new ComponentName(ri.serviceInfo.packageName,
+                            ri.serviceInfo.name));
+                    updateSourceFromServiceInfo(ri.serviceInfo);
+                }
             }
             // Delete sources in the database that have since been removed
             database.sourceDao().deleteAll(existingSources.toArray(new ComponentName[0]));
