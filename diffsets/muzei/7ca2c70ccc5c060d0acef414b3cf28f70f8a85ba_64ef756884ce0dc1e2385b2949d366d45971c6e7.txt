diff --git a/build.gradle b/build.gradle
index 1f23440d3..1924be915 100644
--- a/build.gradle
+++ b/build.gradle
@@ -19,39 +19,39 @@ buildscript {
         compileSdkVersion = 29
         targetSdkVersion = 29
 
-        appCompatVersion = '1.2.0-beta01'
+        appCompatVersion = '1.3.0-alpha01'
         archCoreVersion = '2.1.0'
         browserVersion = '1.2.0'
         coilVersion = '0.10.1'
         constraintLayoutVersion = '2.0.0-beta5'
-        coreVersion = '1.3.0-rc01'
+        coreVersion = '1.4.0-alpha01'
         coroutinesVersion = '1.3.6'
         dokkaVersion = '0.10.0'
-        drawerLayoutVersion = '1.1.0-beta01'
+        drawerLayoutVersion = '1.1.0-rc01'
         exifInterfaceVersion = '1.2.0'
         firebaseAnalyticsVersion = '17.4.1'
         firebaseCrashlyticsVersion = '17.0.0'
         firebasePerfVersion = '19.0.7'
-        fragmentVersion = '1.3.0-alpha03'
+        fragmentVersion = '1.3.0-alpha05'
         kotlinVersion = '1.3.72'
-        lifecycleVersion = '2.3.0-alpha01'
+        lifecycleVersion = '2.3.0-alpha03'
         localeVersion = '1.0.4'
         materialVersion = '1.1.0'
         multidexVersion = '2.0.1'
-        navigationVersion = '2.3.0-alpha05'
+        navigationVersion = '2.3.0-beta01'
         okhttpVersion = '3.12.6'
         pagingVersion = '2.1.2'
         playServicesWearableVersion = '17.0.0'
         preferenceVersion = '1.1.1'
-        recyclerViewVersion = '1.2.0-alpha02'
+        recyclerViewVersion = '1.2.0-alpha03'
         retrofitVersion = '2.7.1'
         roomVersion = '2.2.5'
         subsamplingVersion = '3.10.0'
         swipeRefreshLayoutVersion = '1.1.0-rc01'
         viewPager2Version = '1.1.0-alpha01'
         wearableVersion = '2.6.0'
-        wearVersion = '1.1.0-alpha01'
-        workManagerVersion = '2.4.0-alpha02'
+        wearVersion = '1.1.0-rc01'
+        workManagerVersion = '2.4.0-beta01'
     }
 
     repositories {
diff --git a/legacy-standalone/src/main/java/com/google/android/apps/muzei/legacy/SourceSetupActivity.kt b/legacy-standalone/src/main/java/com/google/android/apps/muzei/legacy/SourceSetupActivity.kt
index 891cf361e..776b72891 100644
--- a/legacy-standalone/src/main/java/com/google/android/apps/muzei/legacy/SourceSetupActivity.kt
+++ b/legacy-standalone/src/main/java/com/google/android/apps/muzei/legacy/SourceSetupActivity.kt
@@ -24,7 +24,6 @@ import android.content.DialogInterface
 import android.content.Intent
 import android.net.Uri
 import android.os.Bundle
-import androidx.activity.invoke
 import androidx.activity.result.contract.ActivityResultContracts.StartActivityForResult
 import androidx.appcompat.app.AppCompatActivity
 import androidx.fragment.app.DialogFragment
@@ -59,7 +58,7 @@ class SourceSetupActivity : AppCompatActivity() {
                                         MuzeiArtProvider.EXTRA_FROM_MUZEI, false)) {
                             intent.putExtra(MuzeiArtProvider.EXTRA_FROM_MUZEI, true)
                         }
-                        startSettings(intent)
+                        startSettings.launch(intent)
                     }
                 }
             }
@@ -74,7 +73,7 @@ class SourceSetupActivity : AppCompatActivity() {
         }
     }
 
-    private val startSettings = prepareCall(StartActivityForResult()) { result ->
+    private val startSettings = registerForActivityResult(StartActivityForResult()) { result ->
         // Pass on the resultCode from the SourceSettingsActivity onto Muzei
         setResult(result.resultCode)
         finish()
diff --git a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.kt b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.kt
index 2f9839f03..a40bd221e 100644
--- a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.kt
+++ b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.kt
@@ -41,8 +41,8 @@ import android.view.ViewAnimationUtils
 import android.view.ViewGroup
 import android.view.ViewTreeObserver
 import android.widget.Toast
-import androidx.activity.prepareCall
-import androidx.activity.result.contract.ActivityResultContracts.RequestPermissions
+import androidx.activity.result.contract.ActivityResultContracts.RequestMultiplePermissions
+import androidx.activity.result.registerForActivityResult
 import androidx.activity.viewModels
 import androidx.annotation.RequiresApi
 import androidx.appcompat.app.AppCompatActivity
@@ -111,7 +111,8 @@ class GallerySettingsActivity : AppCompatActivity(), Observer<PagedList<ChosenPh
         arrayOf(Manifest.permission.READ_EXTERNAL_STORAGE)
     }
 
-    private val requestStoragePermission = prepareCall(RequestPermissions(), permissions) {
+    private val requestStoragePermission = registerForActivityResult(
+            RequestMultiplePermissions(), permissions) {
         onDataSetChanged()
     }
 
diff --git a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySetupActivity.kt b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySetupActivity.kt
index bd634a989..c1fa00385 100644
--- a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySetupActivity.kt
+++ b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySetupActivity.kt
@@ -21,10 +21,9 @@ import android.content.Intent
 import android.content.pm.PackageManager
 import android.os.Build
 import android.os.Bundle
-import androidx.activity.invoke
-import androidx.activity.prepareCall
-import androidx.activity.result.contract.ActivityResultContracts.RequestPermissions
+import androidx.activity.result.contract.ActivityResultContracts.RequestMultiplePermissions
 import androidx.activity.result.contract.ActivityResultContracts.StartActivityForResult
+import androidx.activity.result.registerForActivityResult
 import androidx.core.content.ContextCompat
 import androidx.fragment.app.FragmentActivity
 import androidx.lifecycle.observe
@@ -57,7 +56,9 @@ class GallerySetupActivity : FragmentActivity() {
         }
     }
 
-    private val requestStoragePermission = prepareCall(RequestPermissions(), permissions) { results ->
+    private val requestStoragePermission = registerForActivityResult(
+            RequestMultiplePermissions(), permissions) {
+        results ->
         if (results.getOrElse(Manifest.permission.READ_EXTERNAL_STORAGE) { false }) {
             GalleryScanWorker.enqueueRescan(this)
             setResult(RESULT_OK)
@@ -65,7 +66,7 @@ class GallerySetupActivity : FragmentActivity() {
         } else {
             // Push the user to the GallerySettingsActivity to see inline rationale or just
             // select individual photos
-            startSettings(Intent(this, GallerySettingsActivity::class.java).apply {
+            startSettings.launch(Intent(this, GallerySettingsActivity::class.java).apply {
                 if (intent.getBooleanExtra(MuzeiArtProvider.EXTRA_FROM_MUZEI, false)) {
                     putExtra(MuzeiArtProvider.EXTRA_FROM_MUZEI, true)
                 }
@@ -73,7 +74,7 @@ class GallerySetupActivity : FragmentActivity() {
         }
     }
 
-    private val startSettings = prepareCall(StartActivityForResult()) { result ->
+    private val startSettings = registerForActivityResult(StartActivityForResult()) { result ->
         // Pass on the resultCode from the GallerySettingsActivity onto Muzei
         setResult(result.resultCode)
         finish()
