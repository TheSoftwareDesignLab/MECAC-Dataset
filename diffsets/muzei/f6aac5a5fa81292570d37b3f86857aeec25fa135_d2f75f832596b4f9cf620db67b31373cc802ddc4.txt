diff --git a/build.gradle b/build.gradle
index dc4da08ac..bf74f13f2 100644
--- a/build.gradle
+++ b/build.gradle
@@ -20,12 +20,12 @@ buildscript {
         targetSdkVersion = 30
 
         activityVersion = '1.2.3'
-        appCompatVersion = '1.4.0-alpha02'
+        appCompatVersion = '1.4.0-alpha03'
         archCoreVersion = '2.1.0'
         browserVersion = '1.3.0'
         coilVersion = '1.2.1'
         constraintLayoutVersion = '2.0.4'
-        coreVersion = '1.6.0-rc01'
+        coreVersion = '1.7.0-alpha01'
         coroutinesVersion = '1.5.0'
         dokkaVersion = '1.4.20'
         drawerLayoutVersion = '1.1.1'
@@ -33,16 +33,16 @@ buildscript {
         firebaseAnalyticsVersion = '19.0.0'
         firebaseCrashlyticsVersion = '18.0.1'
         firebasePerfVersion = '20.0.1'
-        fragmentVersion = '1.4.0-alpha03'
+        fragmentVersion = '1.4.0-alpha04'
         kotlinVersion = '1.5.10'
         kspVersion = '1.5.10-1.0.0-beta01'
         lifecycleVersion = '2.4.0-alpha02'
         materialVersion = '1.4.0-beta01'
         multidexVersion = '2.0.1'
-        navigationVersion = '2.4.0-alpha03'
+        navigationVersion = '2.4.0-alpha04'
         okhttpVersion = '3.12.12'
         okhttpCoroutinesVersion = '1.0'
-        pagingVersion = '3.1.0-alpha01'
+        pagingVersion = '3.1.0-alpha02'
         playServicesWearableVersion = '17.1.0'
         preferenceVersion = '1.1.1'
         recyclerViewVersion = '1.2.1'
diff --git a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.kt b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.kt
index a2859026f..a18a3dbf5 100644
--- a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.kt
+++ b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.kt
@@ -291,7 +291,7 @@ class GallerySettingsActivity : AppCompatActivity(),
         viewModel.chosenPhotos.collectIn(this) {
             chosenPhotosAdapter.submitData(it)
         }
-        chosenPhotosAdapter.loadStateFlow.collectIn(this) {
+        chosenPhotosAdapter.onPagesUpdatedFlow.collectIn(this) {
             onDataSetChanged()
         }
         viewModel.getContentActivityInfoList.map {
@@ -779,4 +779,4 @@ class GallerySettingsActivity : AppCompatActivity(),
                     .insertAll(this@GallerySettingsActivity, uris)
         }
     }
-}
+}
\ No newline at end of file
