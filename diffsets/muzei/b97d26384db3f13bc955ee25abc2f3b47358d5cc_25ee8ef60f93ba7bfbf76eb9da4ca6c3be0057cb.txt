diff --git a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.java b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.java
index 10d5cc2d5..c3c610537 100644
--- a/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.java
+++ b/source-gallery/src/main/java/com/google/android/apps/muzei/gallery/GallerySettingsActivity.java
@@ -905,35 +905,30 @@ private List<Uri> getImagesFromTreeUri(final Uri treeUri, final int maxImages) {
             String parentDocumentId = directories.poll();
             final Uri childrenUri = DocumentsContract.buildChildDocumentsUriUsingTree(treeUri,
                     parentDocumentId);
-            Cursor children;
-            try {
-                children = getContentResolver().query(childrenUri,
+            try (Cursor children = getContentResolver().query(childrenUri,
                         new String[]{DocumentsContract.Document.COLUMN_DOCUMENT_ID, DocumentsContract.Document.COLUMN_MIME_TYPE},
-                        null, null, null);
-            } catch (SecurityException e) {
-                // No longer can read this URI, which means no images from this URI
-                // This a temporary state as the next onLoadFinished() will remove this item entirely
-                children = null;
-            }
-            if (children == null) {
-                continue;
-            }
-            while (children.moveToNext()) {
-                String documentId = children.getString(
-                        children.getColumnIndex(DocumentsContract.Document.COLUMN_DOCUMENT_ID));
-                String mimeType = children.getString(
-                        children.getColumnIndex(DocumentsContract.Document.COLUMN_MIME_TYPE));
-                if (DocumentsContract.Document.MIME_TYPE_DIR.equals(mimeType)) {
-                    directories.add(documentId);
-                } else if (mimeType != null && mimeType.startsWith("image/")) {
-                    // Add images to the list
-                    images.add(DocumentsContract.buildDocumentUriUsingTree(treeUri, documentId));
+                        null, null, null)) {
+                if (children == null) {
+                    continue;
                 }
-                if (images.size() == maxImages) {
-                    break;
+                while (children.moveToNext()) {
+                    String documentId = children.getString(
+                            children.getColumnIndex(DocumentsContract.Document.COLUMN_DOCUMENT_ID));
+                    String mimeType = children.getString(
+                            children.getColumnIndex(DocumentsContract.Document.COLUMN_MIME_TYPE));
+                    if (DocumentsContract.Document.MIME_TYPE_DIR.equals(mimeType)) {
+                        directories.add(documentId);
+                    } else if (mimeType != null && mimeType.startsWith("image/")) {
+                        // Add images to the list
+                        images.add(DocumentsContract.buildDocumentUriUsingTree(treeUri, documentId));
+                    }
+                    if (images.size() == maxImages) {
+                        break;
+                    }
                 }
+            } catch (SecurityException|NullPointerException e) {
+                // No longer can read this URI, which means no children from this URI
             }
-            children.close();
         }
         return images;
     }
