diff --git a/twidere/build.gradle b/twidere/build.gradle
index 0a4a2e296b..856913ebb6 100644
--- a/twidere/build.gradle
+++ b/twidere/build.gradle
@@ -19,7 +19,7 @@ android {
 
     defaultConfig {
         applicationId "org.mariotaku.twidere"
-        minSdkVersion 21
+        minSdkVersion 14
         targetSdkVersion 23
         versionCode 156
         versionName "3.0.6.5"
diff --git a/twidere/src/fdroid/java/org/mariotaku/twidere/fragment/support/OpenStreetMapViewerFragment.java b/twidere/src/fdroid/java/org/mariotaku/twidere/fragment/support/OpenStreetMapViewerFragment.java
index 0a3cca86d6..a11a09d844 100644
--- a/twidere/src/fdroid/java/org/mariotaku/twidere/fragment/support/OpenStreetMapViewerFragment.java
+++ b/twidere/src/fdroid/java/org/mariotaku/twidere/fragment/support/OpenStreetMapViewerFragment.java
@@ -85,8 +85,8 @@ public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sa
     }
 
     @Override
-    public void onBaseViewCreated(View view, Bundle savedInstanceState) {
-        super.onBaseViewCreated(view, savedInstanceState);
+    public void onViewCreated(View view, Bundle savedInstanceState) {
+        super.onViewCreated(view, savedInstanceState);
         mMapView = (MapView) view.findViewById(R.id.map_view);
     }
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/HomeActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/HomeActivity.java
index 2267db7324..147901a81c 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/HomeActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/HomeActivity.java
@@ -722,11 +722,9 @@ private void setTabPosition(final int initialTab) {
     }
 
     private void setupBars() {
-        final int themeColor = getThemeColor();
         final String backgroundOption = getCurrentThemeBackgroundOption();
         final boolean isTransparent = ThemeUtils.isTransparentBackground(backgroundOption);
         final int actionBarAlpha = isTransparent ? ThemeUtils.getActionBarAlpha(ThemeUtils.getUserThemeBackgroundAlpha(this)) : 0xFF;
-        mTabIndicator.setItemContext(ThemeUtils.getActionBarThemedContext(this, themeColor));
         mActionsButton.setAlpha(actionBarAlpha / 255f);
     }
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/UserFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/UserFragment.java
index 6405507b9c..4e7289f142 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/UserFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/UserFragment.java
@@ -52,7 +52,6 @@
 import android.support.v4.content.AsyncTaskLoader;
 import android.support.v4.content.Loader;
 import android.support.v4.content.res.ResourcesCompat;
-import android.support.v4.graphics.ColorUtils;
 import android.support.v4.view.OnApplyWindowInsetsListener;
 import android.support.v4.view.ViewCompat;
 import android.support.v4.view.ViewPager;
@@ -140,7 +139,6 @@
 import org.mariotaku.twidere.util.LinkCreator;
 import org.mariotaku.twidere.util.MenuUtils;
 import org.mariotaku.twidere.util.ThemeUtils;
-import org.mariotaku.twidere.util.TwidereColorUtils;
 import org.mariotaku.twidere.util.TwidereLinkify;
 import org.mariotaku.twidere.util.TwidereLinkify.OnLinkClickListener;
 import org.mariotaku.twidere.util.TwidereMathUtils;
@@ -230,7 +228,7 @@ public class UserFragment extends BaseSupportFragment implements OnClickListener
     private int mBannerWidth;
     private int mCardBackgroundColor;
     private int mActionBarShadowColor;
-    private int mUiColor;
+    private int mUiColor, mPrimaryColor, mPrimaryColorDark;
     private boolean mNameFirst;
     private int mPreviousTabItemIsDark, mPreviousActionBarItemIsDark;
     private boolean mHideBirthdayView;
@@ -1510,20 +1508,22 @@ private void setUiColor(int color) {
         if (mActionBarBackground == null) {
             setupBaseActionBar();
         }
-        final AppCompatActivity activity = (AppCompatActivity) getActivity();
-        final IThemedActivity themed = (IThemedActivity) activity;
-        final String backgroundOption = themed.getThemeBackgroundOption();
-        final int actionBarColor = ThemeUtils.getActionBarColor(activity, color, backgroundOption);
+        final ThemedAppCompatActivity activity = (ThemedAppCompatActivity) getActivity();
+        if (Config.coloredActionBar(activity, activity.getATEKey())) {
+            mPrimaryColor = color;
+            mPrimaryColorDark = ATEUtil.darkenColor(color);
+        } else {
+            mPrimaryColor = Config.primaryColor(activity, activity.getATEKey());
+            mPrimaryColorDark = Color.BLACK;
+        }
         if (mActionBarBackground != null) {
-            mActionBarBackground.setColor(actionBarColor);
+            mActionBarBackground.setColor(mPrimaryColor);
         }
         if (mUser != null) {
-            final String displayName = mUserColorNameManager.getDisplayName(mUser, mNameFirst, false);
-            ActivitySupport.setTaskDescription(activity, new TaskDescriptionCompat(displayName, null,
-                    actionBarColor));
+            final String name = mUserColorNameManager.getDisplayName(mUser, mNameFirst, false);
+            ActivitySupport.setTaskDescription(activity, new TaskDescriptionCompat(name, null, color));
         } else {
-            ActivitySupport.setTaskDescription(activity, new TaskDescriptionCompat(null, null,
-                    actionBarColor));
+            ActivitySupport.setTaskDescription(activity, new TaskDescriptionCompat(null, null, color));
         }
         final int optimalAccentColor = ThemeUtils.getOptimalAccentColor(color,
                 mDescriptionView.getCurrentTextColor());
@@ -1531,8 +1531,8 @@ private void setUiColor(int color) {
         mLocationView.setLinkTextColor(optimalAccentColor);
         mURLView.setLinkTextColor(optimalAccentColor);
         mProfileBannerView.setBackgroundColor(color);
-        ViewSupport.setBackground(mPagerIndicator, ThemeUtils.getActionBarStackedBackground(activity,
-                optimalAccentColor, backgroundOption, true));
+
+        mPagerIndicator.setBackgroundColor(mPrimaryColor);
 
         final HeaderDrawerLayout drawer = mHeaderDrawerLayout;
         if (drawer != null) {
@@ -1623,69 +1623,55 @@ private void updateScrollOffset(int offset) {
         final ThemedAppCompatActivity activity = (ThemedAppCompatActivity) getActivity();
 
 
-        final int statusBarColor;
-        if (Config.coloredStatusBar(activity, activity.getATEKey())) {
-            statusBarColor = (int) sArgbEvaluator.evaluate(factor, ATEUtil.darkenColor(0xA0000000),
-                    ATEUtil.darkenColor(mUiColor));
+        final int statusBarColor = (int) sArgbEvaluator.evaluate(factor, ATEUtil.darkenColor(0xA0000000),
+                ATEUtil.darkenColor(mPrimaryColorDark));
+        WindowSupport.setStatusBarColor(activity.getWindow(), statusBarColor);
+        int stackedTabColor = mPrimaryColor;
+
+
+        final float profileContentHeight = mProfileNameContainer.getHeight() + mProfileDetailsContainer.getHeight();
+        final float tabOutlineAlphaFactor;
+        if ((offset - spaceHeight) > 0) {
+            tabOutlineAlphaFactor = 1f - TwidereMathUtils.clamp((offset - spaceHeight) / profileContentHeight, 0, 1);
         } else {
-            statusBarColor = (int) sArgbEvaluator.evaluate(factor, ATEUtil.darkenColor(0xA0000000),
-                    Color.BLACK);
+            tabOutlineAlphaFactor = 1f;
         }
-        WindowSupport.setStatusBarColor(activity.getWindow(), statusBarColor);
-        int stackedTabColor = ThemeUtils.getActionBarColor(activity, mUiColor,
-                activity.getThemeBackgroundOption());
 
         if (mActionBarBackground != null) {
             mActionBarBackground.setFactor(factor);
-
-            final float profileContentHeight = mProfileNameContainer.getHeight() + mProfileDetailsContainer.getHeight();
-            final float tabOutlineAlphaFactor;
-            if ((offset - spaceHeight) > 0) {
-                tabOutlineAlphaFactor = 1f - TwidereMathUtils.clamp((offset - spaceHeight) / profileContentHeight, 0, 1);
-            } else {
-                tabOutlineAlphaFactor = 1f;
-            }
             mActionBarBackground.setOutlineAlphaFactor(tabOutlineAlphaFactor);
+        }
 
+        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {
+            setCompatToolbarOverlayAlpha(activity, factor * tabOutlineAlphaFactor);
+        }
 
-            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {
-                setCompatToolbarOverlayAlpha(activity, factor * tabOutlineAlphaFactor);
-            }
-
-            final Drawable tabBackground = mPagerIndicator.getBackground();
+        final int currentTabColor = (Integer) sArgbEvaluator.evaluate(tabOutlineAlphaFactor,
+                stackedTabColor, mCardBackgroundColor);
 
+        final Drawable tabBackground = mPagerIndicator.getBackground();
+        ((ColorDrawable) tabBackground).setColor(currentTabColor);
+        final boolean tabItemIsDark = !ATEUtil.isColorLight(currentTabColor);
 
-            if (ThemeUtils.isTransparentBackground(activity.getCurrentThemeBackgroundOption())) {
-                stackedTabColor = ColorUtils.setAlphaComponent(stackedTabColor,
-                        ThemeUtils.getActionBarAlpha(activity.getCurrentThemeBackgroundAlpha()));
-            }
-            final int tabColor = (Integer) sArgbEvaluator.evaluate(tabOutlineAlphaFactor, stackedTabColor, mCardBackgroundColor);
-            ((ColorDrawable) tabBackground).setColor(tabColor);
-            final boolean tabItemIsDark = TwidereColorUtils.getYIQLuminance(tabColor) > ThemeUtils.ACCENT_COLOR_THRESHOLD;
-
-            if (mPreviousTabItemIsDark == 0 || (tabItemIsDark ? 1 : -1) != mPreviousTabItemIsDark) {
-                final int[] primaryColors = new int[2];
-                ThemeUtils.getDarkLightForegroundColors(activity, primaryColors);
-                final int tabContrastColor = primaryColors[tabItemIsDark ? 0 : 1];
-                mPagerIndicator.setIconColor(tabContrastColor);
-                mPagerIndicator.setLabelColor(tabContrastColor);
-                if (ThemeUtils.isDarkTheme(activity)) {
-                    mPagerIndicator.setStripColor(ThemeUtils.getOptimalAccentColor(mUiColor,
-                            tabContrastColor));
-                } else {
-                    mPagerIndicator.setStripColor(tabContrastColor);
-                }
-                mPagerIndicator.updateAppearance();
+        if (mPreviousTabItemIsDark == 0 || (tabItemIsDark ? 1 : -1) != mPreviousTabItemIsDark) {
+            final int tabContrastColor = ThemeUtils.getColorDependent(currentTabColor);
+            mPagerIndicator.setIconColor(tabContrastColor);
+            mPagerIndicator.setLabelColor(tabContrastColor);
+            if (Config.coloredActionBar(activity, activity.getATEKey())) {
+                mPagerIndicator.setStripColor(tabContrastColor);
+            } else {
+                mPagerIndicator.setStripColor(ThemeUtils.getOptimalAccentColor(mUiColor,
+                        tabContrastColor));
             }
-            mPreviousTabItemIsDark = (tabItemIsDark ? 1 : -1);
-
-
+            mPagerIndicator.updateAppearance();
         }
+        mPreviousTabItemIsDark = (tabItemIsDark ? 1 : -1);
 
-        final int barColor = (Integer) sArgbEvaluator.evaluate(factor, mActionBarShadowColor, stackedTabColor);
-        final boolean actionItemIsDark = TwidereColorUtils.getYIQLuminance(barColor) > ThemeUtils.ACCENT_COLOR_THRESHOLD;
+        final int currentActionBarColor = (Integer) sArgbEvaluator.evaluate(factor, mActionBarShadowColor,
+                stackedTabColor);
+        final boolean actionItemIsDark = !ATEUtil.isColorLight(stackedTabColor);
         if (mPreviousActionBarItemIsDark == 0 || (actionItemIsDark ? 1 : -1) != mPreviousActionBarItemIsDark) {
-            ThemeUtils.applyToolbarItemColor(activity, mToolbar, barColor);
+            ThemeUtils.applyToolbarItemColor(activity, mToolbar, currentActionBarColor);
         }
         mPreviousActionBarItemIsDark = actionItemIsDark ? 1 : -1;
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java b/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
index 8331427395..39362f9688 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
@@ -55,6 +55,8 @@
 import android.view.WindowManager;
 import android.widget.FrameLayout;
 
+import com.afollestad.appthemeengine.util.ATEUtil;
+
 import org.apache.commons.lang3.ArrayUtils;
 import org.mariotaku.twidere.Constants;
 import org.mariotaku.twidere.R;
@@ -439,13 +441,6 @@ public static int getUserThemeBackgroundAlpha(final Context context) {
     }
 
 
-    public static int getActionBarAlpha(final String option, final int alpha) {
-        if (isTransparentBackground(option)) {
-            return getActionBarAlpha(alpha);
-        }
-        return 0xFF;
-    }
-
     public static int getActionBarAlpha(final int alpha) {
         final int normalizedAlpha = TwidereMathUtils.clamp(alpha, 0, 0xFF);
         final int delta = (ThemeBackgroundPreference.MAX_ALPHA - normalizedAlpha);
@@ -786,15 +781,6 @@ public static Context getActionBarThemedContext(Context base, int accentColor) {
         return actionBarContext;
     }
 
-    public static int getActionBarColor(Context context, int themeColor, String backgroundOption) {
-        if (!isDarkTheme(context)) {
-            return themeColor;
-        } else if (isSolidBackground(backgroundOption)) {
-            return Color.BLACK;
-        }
-        return ContextCompat.getColor(context, R.color.background_color_action_bar_dark);
-    }
-
     public static void applyToolbarItemColor(Context context, Toolbar toolbar, int toolbarColor) {
         if (toolbar == null || isDarkTheme(context)) {
             return;
@@ -869,6 +855,11 @@ public static String getATEKey(Context context) {
         return String.valueOf(value.string);
     }
 
+    public static int getColorDependent(int color) {
+        final boolean isDark = !ATEUtil.isColorLight(color);
+        return isDark ? Color.WHITE : Color.BLACK;
+    }
+
 
     public static final class ActionBarContextThemeWrapper extends android.support.v7.view.ContextThemeWrapper {
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/theme/FloatingActionButtonViewProcessor.java b/twidere/src/main/java/org/mariotaku/twidere/util/theme/FloatingActionButtonViewProcessor.java
index 3a42759436..9862502adf 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/theme/FloatingActionButtonViewProcessor.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/theme/FloatingActionButtonViewProcessor.java
@@ -2,14 +2,14 @@
 
 import android.content.Context;
 import android.content.res.ColorStateList;
-import android.graphics.Color;
 import android.support.annotation.NonNull;
 import android.support.design.widget.FloatingActionButton;
 
 import com.afollestad.appthemeengine.Config;
-import com.afollestad.appthemeengine.util.ATEUtil;
 import com.afollestad.appthemeengine.viewprocessors.ViewProcessor;
 
+import org.mariotaku.twidere.util.ThemeUtils;
+
 /**
  * Created by mariotaku on 16/3/16.
  */
@@ -17,9 +17,9 @@ public class FloatingActionButtonViewProcessor implements ViewProcessor<Floating
     @Override
     public void process(@NonNull Context context, String key, FloatingActionButton target, Object extra) {
         final int primaryColor = Config.primaryColor(context, key);
-        final boolean isDark = !ATEUtil.isColorLight(primaryColor);
-        final int primaryColorDependent = isDark ? Color.WHITE : Color.BLACK;
+        final int primaryColorDependent = ThemeUtils.getColorDependent(primaryColor);
         target.setBackgroundTintList(ColorStateList.valueOf(primaryColor));
         target.setColorFilter(primaryColorDependent);
     }
+
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/TwidereActionBarContextFrameLayout.java b/twidere/src/main/java/org/mariotaku/twidere/view/TwidereActionBarContextFrameLayout.java
deleted file mode 100644
index 48b0ce0b67..0000000000
--- a/twidere/src/main/java/org/mariotaku/twidere/view/TwidereActionBarContextFrameLayout.java
+++ /dev/null
@@ -1,51 +0,0 @@
-/*
- *                 Twidere - Twitter client for Android
- *
- *  Copyright (C) 2012-2015 Mariotaku Lee <mariotaku.lee@gmail.com>
- *   
- *  This program is free software: you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation, either version 3 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
- */
-
-package org.mariotaku.twidere.view;
-
-import android.content.Context;
-import android.content.res.TypedArray;
-import android.util.AttributeSet;
-import android.widget.FrameLayout;
-
-import org.mariotaku.twidere.activity.iface.IThemedActivity;
-import org.mariotaku.twidere.util.ThemeUtils;
-
-/**
- * Created by mariotaku on 15/4/28.
- */
-public class TwidereActionBarContextFrameLayout extends FrameLayout {
-
-    private static final int[] ATTRS = {android.R.attr.layout};
-
-    public TwidereActionBarContextFrameLayout(Context context, AttributeSet attrs) {
-        super(wrapContext(context), attrs);
-        final TypedArray a = getContext().obtainStyledAttributes(attrs, ATTRS);
-        inflate(getContext(), a.getResourceId(0, 0), this);
-        a.recycle();
-    }
-
-    private static Context wrapContext(Context context) {
-        if (context instanceof IThemedActivity) {
-            return ThemeUtils.getActionBarThemedContext(context,
-                    ((IThemedActivity) context).getCurrentThemeColor());
-        }
-        return ThemeUtils.getActionBarThemedContext(context);
-    }
-}
diff --git a/twidere/src/main/res/xml/preferences_account_notifications.xml b/twidere/src/main/res/xml/preferences_account_notifications.xml
index edda80076d..98b457b681 100644
--- a/twidere/src/main/res/xml/preferences_account_notifications.xml
+++ b/twidere/src/main/res/xml/preferences_account_notifications.xml
@@ -48,12 +48,12 @@
     <PreferenceCategory
         android:key="cat_other_settings"
         android:title="@string/other_settings">
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="notification_following_only"
             android:summary="@string/following_only_summary"
             android:title="@string/following_only"/>
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="notification_mentions_only"
             android:title="@string/mentions_only"/>
diff --git a/twidere/src/main/res/xml/preferences_account_refresh.xml b/twidere/src/main/res/xml/preferences_account_refresh.xml
index f3adf729d6..eb9d52a8a3 100644
--- a/twidere/src/main/res/xml/preferences_account_refresh.xml
+++ b/twidere/src/main/res/xml/preferences_account_refresh.xml
@@ -3,7 +3,7 @@
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:title="@string/auto_refresh">
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:disableDependentsState="false"
         android:key="auto_refresh"
         android:title="@string/auto_refresh"/>
@@ -12,19 +12,19 @@
         android:dependency="auto_refresh"
         android:key="cat_refresh_content"
         android:title="@string/content_to_refresh">
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="auto_refresh_home_timeline"
             android:title="@string/home"/>
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="true"
             android:key="auto_refresh_mentions"
             android:title="@string/mentions"/>
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="true"
             android:key="auto_refresh_direct_messages"
             android:title="@string/direct_messages"/>
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="auto_refresh_trends"
             android:title="@string/trends"/>
diff --git a/twidere/src/main/res/xml/preferences_advanced_network.xml b/twidere/src/main/res/xml/preferences_advanced_network.xml
index be12950316..d478ea443c 100644
--- a/twidere/src/main/res/xml/preferences_advanced_network.xml
+++ b/twidere/src/main/res/xml/preferences_advanced_network.xml
@@ -7,12 +7,12 @@
         android:key="category_connectivity"
         android:title="@string/connectivity">
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="builtin_dns_resolver"
             android:title="@string/builtin_dns_resolver"/>
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:dependency="builtin_dns_resolver"
             android:key="tcp_dns_query"
@@ -34,7 +34,7 @@
             android:summary="@string/custom_host_mapping_summary"
             android:title="@string/custom_host_mapping"/>
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="true"
             android:key="retry_on_network_issue"
             android:summary="@string/retry_on_network_issue_summary"
@@ -43,7 +43,7 @@
     <PreferenceCategory
         android:key="category_proxy"
         android:title="@string/proxy">
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:disableDependentsState="false"
             android:key="enable_proxy"
@@ -96,7 +96,7 @@
         android:key="category_tumbor"
         android:title="@string/thumbor_integration">
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="thumbor_enabled"
             android:title="@string/thumbor_integration"/>
diff --git a/twidere/src/main/res/xml/preferences_cards.xml b/twidere/src/main/res/xml/preferences_cards.xml
index 9cc3b0d9f4..ad4121d5cf 100644
--- a/twidere/src/main/res/xml/preferences_cards.xml
+++ b/twidere/src/main/res/xml/preferences_cards.xml
@@ -26,7 +26,7 @@
             android:value="true"/>
     </org.mariotaku.twidere.preference.SeekBarDialogPreference>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="true"
         android:key="display_profile_image"
         android:order="23"
@@ -34,7 +34,7 @@
         <extra
             android:name="notify_change"
             android:value="true"/>
-    </SwitchPreference>
+    </SwitchPreferenceCompat>
 
     <org.mariotaku.twidere.preference.ThemedListPreference
         android:defaultValue="@string/default_profile_image_style"
@@ -48,7 +48,7 @@
             android:value="true"/>
     </org.mariotaku.twidere.preference.ThemedListPreference>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="media_preview"
         android:order="25"
@@ -56,7 +56,7 @@
         <extra
             android:name="notify_change"
             android:value="true"/>
-    </SwitchPreference>
+    </SwitchPreferenceCompat>
 
     <org.mariotaku.twidere.preference.LinkHighlightPreference
         android:defaultValue="none"
@@ -68,7 +68,7 @@
             android:value="true"/>
     </org.mariotaku.twidere.preference.LinkHighlightPreference>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="compact_cards"
         android:order="32"
@@ -77,8 +77,8 @@
         <extra
             android:name="notify_change"
             android:value="true"/>
-    </SwitchPreference>
-    <SwitchPreference
+    </SwitchPreferenceCompat>
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="hide_card_actions"
         android:order="33"
@@ -86,9 +86,9 @@
         <extra
             android:name="notify_change"
             android:value="true"/>
-    </SwitchPreference>
+    </SwitchPreferenceCompat>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="i_want_my_stars_back"
         android:order="34"
@@ -97,6 +97,6 @@
         <extra
             android:name="notify_change"
             android:value="true"/>
-    </SwitchPreference>
+    </SwitchPreferenceCompat>
 
 </PreferenceScreen>
\ No newline at end of file
diff --git a/twidere/src/main/res/xml/preferences_compose.xml b/twidere/src/main/res/xml/preferences_compose.xml
index e0867dab40..2594ebb6ac 100644
--- a/twidere/src/main/res/xml/preferences_compose.xml
+++ b/twidere/src/main/res/xml/preferences_compose.xml
@@ -20,13 +20,13 @@
 
 <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="quick_send"
         android:summary="@string/quick_send_summary"
         android:title="@string/quick_send"/>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="no_close_after_tweet_sent"
         android:summary="@string/no_close_after_status_updated_summary"
diff --git a/twidere/src/main/res/xml/preferences_content.xml b/twidere/src/main/res/xml/preferences_content.xml
index cd97abb1d2..e2030b2a02 100644
--- a/twidere/src/main/res/xml/preferences_content.xml
+++ b/twidere/src/main/res/xml/preferences_content.xml
@@ -9,7 +9,7 @@
         android:key="category_content"
         android:title="@string/content">
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="true"
             android:key="name_first"
             android:summaryOff="@string/name_first_summary_off"
@@ -18,7 +18,7 @@
             <extra
                 android:name="notify_change"
                 android:value="true"/>
-        </SwitchPreference>
+        </SwitchPreferenceCompat>
 
         <org.mariotaku.twidere.preference.SeekBarDialogPreference
             android:defaultValue="20"
@@ -29,12 +29,12 @@
             app:min="10"
             app:step="5"/>
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="true"
             android:key="remember_position"
             android:summary="@string/remember_position_summary"
             android:title="@string/remember_position"/>
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="read_from_bottom"
             android:summaryOff="@string/read_from_bottom_summary_off"
@@ -74,12 +74,12 @@
     <PreferenceCategory
         android:key="category_safety"
         android:title="@string/safety">
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="true"
             android:key="phishing_link_warning"
             android:summary="@string/phishing_link_warning_summary"
             android:title="@string/phishing_link_warning"/>
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="display_sensitive_contents"
             android:summary="@string/display_sensitive_contents_summary"
diff --git a/twidere/src/main/res/xml/preferences_network.xml b/twidere/src/main/res/xml/preferences_network.xml
index cfa3d29aea..b909ec394b 100644
--- a/twidere/src/main/res/xml/preferences_network.xml
+++ b/twidere/src/main/res/xml/preferences_network.xml
@@ -3,17 +3,17 @@
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:title="@string/network">
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="media_preload"
         android:title="@string/media_preload"/>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="true"
         android:key="preload_wifi_only"
         android:title="@string/preload_wifi_only"/>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="bandwidth_saving_mode"
         android:summary="@string/bandwidth_saving_mode_summary"
diff --git a/twidere/src/main/res/xml/preferences_notifications.xml b/twidere/src/main/res/xml/preferences_notifications.xml
index 0c65aba11f..7189c10eb6 100644
--- a/twidere/src/main/res/xml/preferences_notifications.xml
+++ b/twidere/src/main/res/xml/preferences_notifications.xml
@@ -13,14 +13,14 @@
         android:key="cat_general"
         android:title="@string/general">
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="combined_notifications"
             android:summaryOff="@string/combined_notifications_summary_off"
             android:summaryOn="@string/combined_notifications_summary_on"
             android:title="@string/combined_notifications" />
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="pebble_notifications"
             android:summary="@string/pebble_notifications_summary"
diff --git a/twidere/src/main/res/xml/preferences_refresh.xml b/twidere/src/main/res/xml/preferences_refresh.xml
index e882f4d8b5..ea88da303e 100644
--- a/twidere/src/main/res/xml/preferences_refresh.xml
+++ b/twidere/src/main/res/xml/preferences_refresh.xml
@@ -20,7 +20,7 @@
             android:key="refresh_interval"
             android:title="@string/refresh_interval"/>
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="true"
             android:key="stop_auto_refresh_when_battery_low"
             android:title="@string/stop_auto_refresh_when_battery_low"/>
@@ -29,12 +29,12 @@
             android:key="home_refresh"
             android:title="@string/home_refresh"/>
 
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="refresh_on_start"
             android:summary="@string/refresh_on_start_summary"
             android:title="@string/refresh_on_start"/>
-        <SwitchPreference
+        <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="refresh_after_tweet"
             android:summary="@string/refresh_after_status_updated_summary"
diff --git a/twidere/src/main/res/xml/preferences_scrapyard.xml b/twidere/src/main/res/xml/preferences_scrapyard.xml
index 8b4a2b5bda..83c1842672 100644
--- a/twidere/src/main/res/xml/preferences_scrapyard.xml
+++ b/twidere/src/main/res/xml/preferences_scrapyard.xml
@@ -30,7 +30,7 @@
             android:name="notify_change"
             android:value="true"/>
     </org.mariotaku.twidere.preference.ThemedListPreference>
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="show_absolute_time"
         android:summary="@string/show_absolute_time_summary"
@@ -38,15 +38,15 @@
         <extra
             android:name="notify_change"
             android:value="true"/>
-    </SwitchPreference>
-    <SwitchPreference
+    </SwitchPreferenceCompat>
+    <SwitchPreferenceCompat
         android:defaultValue="true"
         android:key="unread_count"
         android:title="@string/unread_count">
         <extra
             android:name="notify_change"
             android:value="true"/>
-    </SwitchPreference>
+    </SwitchPreferenceCompat>
 
     <org.mariotaku.twidere.preference.ThemedListPreference
         android:defaultValue="@string/default_tab_display_option"
@@ -55,7 +55,7 @@
         android:key="tab_display_option"
         android:title="@string/tab_display_option"/>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="leftside_compose_button"
         android:summary="@string/leftside_compose_button_summary"
diff --git a/twidere/src/main/res/xml/preferences_usage_statistics.xml b/twidere/src/main/res/xml/preferences_usage_statistics.xml
index e1982ada44..66f0afc7b9 100644
--- a/twidere/src/main/res/xml/preferences_usage_statistics.xml
+++ b/twidere/src/main/res/xml/preferences_usage_statistics.xml
@@ -19,13 +19,13 @@
 
 <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="usage_statistics"
         android:order="11"
         android:title="@string/usage_statistics"/>
 
-    <SwitchPreference
+    <SwitchPreferenceCompat
         android:defaultValue="@bool/debug"
         android:key="bug_reports"
         android:order="12"
