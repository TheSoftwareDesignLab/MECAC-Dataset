diff --git a/twidere/build.gradle b/twidere/build.gradle
index 0d78c5f56f..b21e1896ef 100644
--- a/twidere/build.gradle
+++ b/twidere/build.gradle
@@ -21,8 +21,8 @@ android {
         applicationId "org.mariotaku.twidere"
         minSdkVersion 14
         targetSdkVersion 23
-        versionCode 164
-        versionName "3.1.0.7"
+        versionCode 165
+        versionName "3.1.0.8"
         multiDexEnabled true
 
         generatedDensities = []
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/MediaViewerActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/MediaViewerActivity.java
index 9a066814b5..7c5f96be0d 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/MediaViewerActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/MediaViewerActivity.java
@@ -93,7 +93,6 @@
 import org.mariotaku.twidere.util.IntentUtils;
 import org.mariotaku.twidere.util.MenuUtils;
 import org.mariotaku.twidere.util.PermissionUtils;
-import org.mariotaku.twidere.util.ThemeUtils;
 import org.mariotaku.twidere.util.Utils;
 import org.mariotaku.twidere.util.dagger.GeneralComponentHelper;
 import org.mariotaku.twidere.util.media.MediaExtra;
@@ -145,11 +144,6 @@ protected void onCreate(Bundle savedInstanceState) {
         actionBar.setDisplayHomeAsUpEnabled(true);
     }
 
-    @Nullable
-    public String getATEKey() {
-        return ThemeUtils.getATEKey(this);
-    }
-
     @Override
     protected void onStart() {
         super.onStart();
@@ -175,7 +169,7 @@ protected void onPause() {
     @Override
     protected void onResume() {
         super.onResume();
-        ATE.invalidateActivity(this, this.updateTime, this.getATEKey());
+        ATE.invalidateActivity(this, this.updateTime, getATEKey());
     }
 
     @Override
@@ -203,6 +197,11 @@ public void onActivityResult(int requestCode, int resultCode, Intent data) {
         }
     }
 
+    @Nullable
+    public String getATEKey() {
+        return VALUE_THEME_NAME_DARK;
+    }
+
     public void processShareIntent(Intent intent) {
         if (!hasStatus()) return;
         final ParcelableStatus status = getStatus();
diff --git a/twidere/src/main/java/org/mariotaku/twidere/app/TwidereApplication.java b/twidere/src/main/java/org/mariotaku/twidere/app/TwidereApplication.java
index 8dfdd0937e..82598a8949 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/app/TwidereApplication.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/app/TwidereApplication.java
@@ -175,6 +175,13 @@ public void onCreate() {
                     .coloredActionBar(false)
                     .commit();
         }
+        if (!ATE.config(this, null).isConfigured()) {
+            ATE.config(this, null)
+                    .accentColor(themeColor)
+                    .coloredActionBar(false)
+                    .coloredStatusBar(false)
+                    .commit();
+        }
         resetTheme(preferences);
         super.onCreate();
         initializeAsyncTask();
@@ -345,6 +352,11 @@ public void onSharedPreferenceChanged(final SharedPreferences preferences, final
                         .coloredActionBar(false)
                         .coloredStatusBar(false)
                         .commit();
+                ATE.config(this, null)
+                        .accentColor(themeColor)
+                        .coloredActionBar(false)
+                        .coloredStatusBar(false)
+                        .commit();
                 break;
             }
         }
