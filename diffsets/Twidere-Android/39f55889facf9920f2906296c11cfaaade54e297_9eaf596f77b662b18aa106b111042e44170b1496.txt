diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/SettingsActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/SettingsActivity.java
index a055ef4ed0..8da841f61f 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/SettingsActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/SettingsActivity.java
@@ -172,7 +172,9 @@ public boolean onCreateOptionsMenu(final Menu menu) {
     public boolean onOptionsItemSelected(final MenuItem item) {
         switch (item.getItemId()) {
             case MENU_HOME: {
-                onBackPressed();
+                if (!isFinishing()) {
+                    onBackPressed();
+                }
                 return true;
             }
             case MENU_IMPORT_SETTINGS: {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/support/BaseAppCompatActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/support/BaseAppCompatActivity.java
index 4ee738dc38..8fd792a641 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/support/BaseAppCompatActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/support/BaseAppCompatActivity.java
@@ -120,12 +120,12 @@ public void startActivity(final Intent intent) {
     }
 
     @Override
-    public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
         return false;
     }
 
     @Override
-    public boolean handleKeyboardShortcutRepeat(KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutRepeat(@NonNull KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
         return false;
     }
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/support/ComposeActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/support/ComposeActivity.java
index 68a7738a3d..c954b2c922 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/support/ComposeActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/support/ComposeActivity.java
@@ -190,6 +190,7 @@ public class ComposeActivity extends ThemedFragmentActivity implements LocationL
     private boolean mIsPossiblySensitive, mShouldSaveAccounts;
     private boolean mImageUploaderUsed, mStatusShortenerUsed;
     private boolean mNavigateBackPressed;
+    private boolean mTextChanged;
 
     @Override
     public int getThemeColor() {
@@ -616,6 +617,7 @@ public void beforeTextChanged(final CharSequence s, final int start, final int c
 
             @Override
             public void onTextChanged(final CharSequence s, final int start, final int before, final int count) {
+                mTextChanged = true;
                 setMenu();
                 updateTextCount();
             }
@@ -707,9 +709,9 @@ protected void onTitleChanged(final CharSequence title, final int color) {
 
     @Override
     public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
-        final String action = handler.getKeyAction("navigation", keyCode, event);
-        if ("navigation.back".equals(action)) {
-            if (mEditText.length() == 0) {
+        final String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
+        if (ACTION_NAVIGATION_BACK.equals(action)) {
+            if (mEditText.length() == 0 && !mTextChanged) {
                 if (!mNavigateBackPressed) {
                     final SuperToast toast = SuperToast.create(this, getString(R.string.press_again_to_close), Duration.SHORT);
                     toast.setOnDismissListener(new OnDismissListener() {
@@ -723,6 +725,8 @@ public void onDismiss(View view) {
                 } else {
                     onBackPressed();
                 }
+            } else {
+                mTextChanged = false;
             }
             return true;
         }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/support/HomeActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/support/HomeActivity.java
index ec257d47bb..eef9fbbdbd 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/support/HomeActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/support/HomeActivity.java
@@ -261,12 +261,12 @@ public boolean onOptionsItemSelected(final MenuItem item) {
     }
 
     @Override
-    public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
         if (handleFragmentKeyboardShortcutSingle(handler, keyCode, event)) return true;
-        String action = handler.getKeyAction("home", keyCode, event);
+        String action = handler.getKeyAction(CONTEXT_TAG_HOME, keyCode, event);
         if (action != null) {
             switch (action) {
-                case "home.accounts_dashboard": {
+                case ACTION_HOME_ACCOUNTS_DASHBOARD: {
                     if (mSlidingMenu.isMenuShowing()) {
                         mSlidingMenu.showContent(true);
                     } else {
@@ -277,10 +277,10 @@ public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, in
                 }
             }
         }
-        action = handler.getKeyAction("navigation", keyCode, event);
+        action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
         if (action != null) {
             switch (action) {
-                case "navigation.previous_tab": {
+                case ACTION_NAVIGATION_PREVIOUS_TAB: {
                     final int previous = mViewPager.getCurrentItem() - 1;
                     if (previous < 0) {
                         mSlidingMenu.showMenu(true);
@@ -294,7 +294,7 @@ public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, in
                     }
                     return true;
                 }
-                case "navigation.next_tab": {
+                case ACTION_NAVIGATION_NEXT_TAB: {
                     final int next = mViewPager.getCurrentItem() + 1;
                     if (next >= mPagerAdapter.getCount()) {
                         mSlidingMenu.showSecondaryMenu(true);
@@ -326,7 +326,7 @@ public void setControlBarOffset(float offset) {
     }
 
     @Override
-    public boolean handleKeyboardShortcutRepeat(KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutRepeat(@NonNull KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
         if (handleFragmentKeyboardShortcutRepeat(handler, keyCode, repeatCount, event)) return true;
         return super.handleKeyboardShortcutRepeat(handler, keyCode, repeatCount, event);
     }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/support/LinkHandlerActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/support/LinkHandlerActivity.java
index 9fc25ad1e4..6ea29a6155 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/support/LinkHandlerActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/support/LinkHandlerActivity.java
@@ -113,13 +113,13 @@ public boolean onOptionsItemSelected(final MenuItem item) {
     }
 
     @Override
-    public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
         if (handleFragmentKeyboardShortcutSingle(handler, keyCode, event)) return true;
         return handler.handleKey(this, null, keyCode, event);
     }
 
     @Override
-    public boolean handleKeyboardShortcutRepeat(KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutRepeat(@NonNull KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
         if (handleFragmentKeyboardShortcutRepeat(handler, keyCode, repeatCount, event)) return true;
         return super.handleKeyboardShortcutRepeat(handler, keyCode, repeatCount, event);
     }
@@ -220,7 +220,14 @@ private boolean handleFragmentKeyboardShortcutSingle(KeyboardShortcutsHandler ha
                                                          @NonNull KeyEvent event) {
         final Fragment fragment = getCurrentVisibleFragment();
         if (fragment instanceof KeyboardShortcutCallback) {
-            return ((KeyboardShortcutCallback) fragment).handleKeyboardShortcutSingle(handler, keyCode, event);
+            if (((KeyboardShortcutCallback) fragment).handleKeyboardShortcutSingle(handler, keyCode, event)) {
+                return true;
+            }
+        }
+        final String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
+        if (ACTION_NAVIGATION_BACK.equals(action)) {
+            onBackPressed();
+            return true;
         }
         return false;
     }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/support/QuickSearchBarActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/support/QuickSearchBarActivity.java
index 8d7a426666..fc22c13276 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/support/QuickSearchBarActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/support/QuickSearchBarActivity.java
@@ -28,6 +28,7 @@
 import android.graphics.Rect;
 import android.net.Uri;
 import android.os.Bundle;
+import android.support.annotation.NonNull;
 import android.support.v4.app.LoaderManager.LoaderCallbacks;
 import android.support.v4.content.AsyncTaskLoader;
 import android.support.v4.content.Loader;
@@ -35,6 +36,7 @@
 import android.text.TextUtils;
 import android.text.TextWatcher;
 import android.view.Gravity;
+import android.view.KeyEvent;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.View.OnClickListener;
@@ -68,6 +70,7 @@
 import org.mariotaku.twidere.provider.TwidereDataStore.SearchHistory;
 import org.mariotaku.twidere.util.EditTextEnterHandler;
 import org.mariotaku.twidere.util.EditTextEnterHandler.EnterListener;
+import org.mariotaku.twidere.util.KeyboardShortcutsHandler;
 import org.mariotaku.twidere.util.MediaLoaderWrapper;
 import org.mariotaku.twidere.util.ParseUtils;
 import org.mariotaku.twidere.util.SwipeDismissListViewTouchListener;
@@ -97,6 +100,7 @@ public class QuickSearchBarActivity extends ThemedFragmentActivity implements On
     private SuggestionsAdapter mUsersSearchAdapter;
     private ExtendedRelativeLayout mMainContent;
     private Rect mSystemWindowsInsets = new Rect();
+    private boolean mTextChanged;
 
     @Override
     public boolean canDismiss(int position) {
@@ -186,6 +190,20 @@ public void onNothingSelected(AdapterView<?> parent) {
 
     }
 
+    @Override
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+        final String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
+        if (ACTION_NAVIGATION_BACK.equals(action) && mSearchQuery.length() == 0) {
+            if (!mTextChanged) {
+                onBackPressed();
+            } else {
+                mTextChanged = false;
+            }
+            return true;
+        }
+        return super.handleKeyboardShortcutSingle(handler, keyCode, event);
+    }
+
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
@@ -227,6 +245,7 @@ public void beforeTextChanged(CharSequence s, int start, int count, int after) {
 
             @Override
             public void onTextChanged(CharSequence s, int start, int before, int count) {
+                mTextChanged = true;
             }
 
             @Override
@@ -304,6 +323,15 @@ public SavedSearchItem(String query) {
             mQuery = query;
         }
 
+        @Override
+        public void bindView(SuggestionsAdapter adapter, View view, int position) {
+            final ImageView icon = (ImageView) view.findViewById(android.R.id.icon);
+            final TextView text1 = (TextView) view.findViewById(android.R.id.text1);
+            text1.setText(mQuery);
+            icon.setImageResource(R.drawable.ic_action_save);
+            icon.setColorFilter(text1.getCurrentTextColor(), Mode.SRC_ATOP);
+        }
+
         @Override
         public final int getItemLayoutResource() {
             return R.layout.list_item_suggestion_search;
@@ -314,15 +342,6 @@ public int getItemViewType() {
             return ITEM_VIEW_TYPE;
         }
 
-        @Override
-        public void bindView(SuggestionsAdapter adapter, View view, int position) {
-            final ImageView icon = (ImageView) view.findViewById(android.R.id.icon);
-            final TextView text1 = (TextView) view.findViewById(android.R.id.text1);
-            text1.setText(mQuery);
-            icon.setImageResource(R.drawable.ic_action_save);
-            icon.setColorFilter(text1.getCurrentTextColor(), Mode.SRC_ATOP);
-        }
-
 
         @Override
         public void onItemClick(QuickSearchBarActivity activity, int position) {
@@ -342,6 +361,10 @@ public SearchHistoryItem(long cursorId, String query) {
             mQuery = query;
         }
 
+        public long getCursorId() {
+            return mCursorId;
+        }
+
         @Override
         public void bindView(SuggestionsAdapter adapter, View view, int position) {
             final ImageView icon = (ImageView) view.findViewById(android.R.id.icon);
@@ -351,10 +374,6 @@ public void bindView(SuggestionsAdapter adapter, View view, int position) {
             icon.setColorFilter(text1.getCurrentTextColor(), Mode.SRC_ATOP);
         }
 
-        public long getCursorId() {
-            return mCursorId;
-        }
-
         @Override
         public final int getItemLayoutResource() {
             return R.layout.list_item_suggestion_search;
@@ -371,7 +390,6 @@ public void onItemClick(QuickSearchBarActivity activity, int position) {
             activity.finish();
         }
 
-
     }
 
     public static class SuggestionsAdapter extends BaseAdapter {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/adapter/UserHashtagAutoCompleteAdapter.java b/twidere/src/main/java/org/mariotaku/twidere/adapter/UserHashtagAutoCompleteAdapter.java
index 4a9418a1d0..89deb60840 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/adapter/UserHashtagAutoCompleteAdapter.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/adapter/UserHashtagAutoCompleteAdapter.java
@@ -81,7 +81,7 @@ public UserHashtagAutoCompleteAdapter(final Context context) {
     }
 
     public UserHashtagAutoCompleteAdapter(final Context context, final EditText view) {
-        super(context, R.layout.list_item_two_line_small, null, FROM, TO, 0);
+        super(context, R.layout.list_item_auto_complete, null, FROM, TO, 0);
         mEditText = view;
         mPreferences = SharedPreferencesWrapper.getInstance(context, SHARED_PREFERENCES_NAME, Context.MODE_PRIVATE);
         mUserNicknamePreferences = context.getSharedPreferences(USER_NICKNAME_PREFERENCES_NAME, Context.MODE_PRIVATE);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/constant/KeyboardShortcutConstants.java b/twidere/src/main/java/org/mariotaku/twidere/constant/KeyboardShortcutConstants.java
new file mode 100644
index 0000000000..60018a0561
--- /dev/null
+++ b/twidere/src/main/java/org/mariotaku/twidere/constant/KeyboardShortcutConstants.java
@@ -0,0 +1,44 @@
+/*
+ * Twidere - Twitter client for Android
+ *
+ *  Copyright (C) 2012-2015 Mariotaku Lee <mariotaku.lee@gmail.com>
+ *
+ *  This program is free software: you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation, either version 3 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ */
+
+package org.mariotaku.twidere.constant;
+
+/**
+ * Created by mariotaku on 15/4/23.
+ */
+public interface KeyboardShortcutConstants {
+
+    String CONTEXT_TAG_NAVIGATION = "navigation";
+    String CONTEXT_TAG_STATUS = "status";
+    String CONTEXT_TAG_HOME = "home";
+
+    String ACTION_NAVIGATION_BACK = "navigation.back";
+    String ACTION_NAVIGATION_NEXT_TAB = "navigation.next_tab";
+    String ACTION_NAVIGATION_PREVIOUS_TAB = "navigation.previous_tab";
+    String ACTION_NAVIGATION_REFRESH = "navigation.refresh";
+    String ACTION_NAVIGATION_NEXT = "navigation.next";
+    String ACTION_NAVIGATION_PREVIOUS = "navigation.previous";
+    String ACTION_STATUS_FAVORITE = "status.favorite";
+    String ACTION_STATUS_RETWEET = "status.retweet";
+    String ACTION_STATUS_REPLY = "status.reply";
+    String ACTION_HOME_ACCOUNTS_DASHBOARD = "home.accounts_dashboard";
+    String ACTION_MESSAGE = "message";
+    String ACTION_SEARCH = "search";
+    String ACTION_COMPOSE = "compose";
+}
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/KeyboardShortcutsFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/KeyboardShortcutsFragment.java
index 73ac782d9d..466ca705c8 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/KeyboardShortcutsFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/KeyboardShortcutsFragment.java
@@ -51,13 +51,14 @@
 import org.mariotaku.twidere.R;
 import org.mariotaku.twidere.activity.KeyboardShortcutPreferenceCompatActivity;
 import org.mariotaku.twidere.app.TwidereApplication;
+import org.mariotaku.twidere.constant.KeyboardShortcutConstants;
 import org.mariotaku.twidere.util.KeyboardShortcutsHandler;
 import org.mariotaku.twidere.util.KeyboardShortcutsHandler.KeyboardShortcutSpec;
 
 /**
  * Created by mariotaku on 15/4/10.
  */
-public class KeyboardShortcutsFragment extends BasePreferenceFragment {
+public class KeyboardShortcutsFragment extends BasePreferenceFragment implements KeyboardShortcutConstants {
 
     private KeyboardShortcutsHandler mKeyboardShortcutHandler;
 
@@ -102,18 +103,18 @@ private void addPreferences() {
         general.addPreference(makePreferences(null, "search"));
         general.addPreference(makePreferences(null, "message"));
         final PreferenceCategory home = makeAndAddCategory(getString(R.string.home));
-        home.addPreference(makePreferences("home", "home.accounts_dashboard"));
+        home.addPreference(makePreferences("home", ACTION_HOME_ACCOUNTS_DASHBOARD));
         final PreferenceCategory navigation = makeAndAddCategory(getString(R.string.navigation));
-        navigation.addPreference(makePreferences("navigation", "navigation.previous"));
-        navigation.addPreference(makePreferences("navigation", "navigation.next"));
-        navigation.addPreference(makePreferences("navigation", "navigation.previous_tab"));
-        navigation.addPreference(makePreferences("navigation", "navigation.next_tab"));
-        navigation.addPreference(makePreferences("navigation", "navigation.refresh"));
-        navigation.addPreference(makePreferences("navigation", "navigation.back"));
+        navigation.addPreference(makePreferences(CONTEXT_TAG_NAVIGATION, ACTION_NAVIGATION_PREVIOUS));
+        navigation.addPreference(makePreferences(CONTEXT_TAG_NAVIGATION, ACTION_NAVIGATION_NEXT));
+        navigation.addPreference(makePreferences(CONTEXT_TAG_NAVIGATION, ACTION_NAVIGATION_PREVIOUS_TAB));
+        navigation.addPreference(makePreferences(CONTEXT_TAG_NAVIGATION, ACTION_NAVIGATION_NEXT_TAB));
+        navigation.addPreference(makePreferences(CONTEXT_TAG_NAVIGATION, ACTION_NAVIGATION_REFRESH));
+        navigation.addPreference(makePreferences(CONTEXT_TAG_NAVIGATION, ACTION_NAVIGATION_BACK));
         final PreferenceCategory statuses = makeAndAddCategory(getString(R.string.statuses));
-        statuses.addPreference(makePreferences("status", "status.reply"));
-        statuses.addPreference(makePreferences("status", "status.retweet"));
-        statuses.addPreference(makePreferences("status", "status.favorite"));
+        statuses.addPreference(makePreferences(CONTEXT_TAG_STATUS, ACTION_STATUS_REPLY));
+        statuses.addPreference(makePreferences(CONTEXT_TAG_STATUS, ACTION_STATUS_RETWEET));
+        statuses.addPreference(makePreferences(CONTEXT_TAG_STATUS, ACTION_STATUS_FAVORITE));
     }
 
     private PreferenceCategory makeAndAddCategory(String title) {
@@ -198,7 +199,9 @@ protected void onPrepareDialogBuilder(Builder builder) {
             builder.setNegativeButton(getContext().getString(android.R.string.cancel), this);
             builder.setNeutralButton(getContext().getString(R.string.clear), this);
             builder.setOnKeyListener(this);
-        }        @Override
+        }
+
+        @Override
         protected void onAttachedToActivity() {
             super.onAttachedToActivity();
             mKeyboardShortcutHandler.registerOnSharedPreferenceChangeListener(mPreferencesChangeListener);
@@ -226,7 +229,9 @@ public void onClick(DialogInterface dialog, int which) {
                     break;
                 }
             }
-        }        @Override
+        }
+
+        @Override
         protected void onPrepareForRemoval() {
             mKeyboardShortcutHandler.unregisterOnSharedPreferenceChangeListener(mPreferencesChangeListener);
             super.onPrepareForRemoval();
@@ -238,9 +243,6 @@ private void updateSummary() {
         }
 
 
-
-
-
     }
 
     private static class KeyboardShortcutPreferenceCompat extends Preference {
@@ -279,7 +281,9 @@ protected void onClick() {
         private void updateSummary() {
             final KeyboardShortcutSpec spec = mKeyboardShortcutHandler.findKey(mAction);
             setSummary(spec != null ? spec.toKeyString() : null);
-        }        @Override
+        }
+
+        @Override
         protected void onAttachedToActivity() {
             super.onAttachedToActivity();
             mKeyboardShortcutHandler.registerOnSharedPreferenceChangeListener(mPreferencesChangeListener);
@@ -292,8 +296,6 @@ protected void onPrepareForRemoval() {
         }
 
 
-
-
     }
 
     public static class ResetKeyboardShortcutConfirmDialogFragment extends DialogFragment implements OnClickListener {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AbsStatusesFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AbsStatusesFragment.java
index cba776d0c6..d794b64acc 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AbsStatusesFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AbsStatusesFragment.java
@@ -88,10 +88,10 @@ public SharedPreferences getSharedPreferences() {
     public abstract int getStatuses(long[] accountIds, long[] maxIds, long[] sinceIds);
 
     @Override
-    public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
         if (!KeyboardShortcutsHandler.isValidForHotkey(keyCode, event)) return false;
-        String action = handler.getKeyAction("navigation", keyCode, event);
-        if ("navigation.refresh".equals(action)) {
+        String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
+        if (ACTION_NAVIGATION_REFRESH.equals(action)) {
             triggerRefresh();
             return true;
         }
@@ -108,21 +108,21 @@ public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, in
         final ParcelableStatus status = getAdapter().getStatus(position);
         if (status == null) return false;
         if (action == null) {
-            action = handler.getKeyAction("status", keyCode, event);
+            action = handler.getKeyAction(CONTEXT_TAG_STATUS, keyCode, event);
         }
         if (action == null) return false;
         switch (action) {
-            case "status.reply": {
+            case ACTION_STATUS_REPLY: {
                 final Intent intent = new Intent(INTENT_ACTION_REPLY);
                 intent.putExtra(EXTRA_STATUS, status);
                 startActivity(intent);
                 return true;
             }
-            case "status.retweet": {
+            case ACTION_STATUS_RETWEET: {
                 RetweetQuoteDialogFragment.show(getFragmentManager(), status);
                 return true;
             }
-            case "status.favorite": {
+            case ACTION_STATUS_FAVORITE: {
                 final AsyncTwitterWrapper twitter = getTwitterWrapper();
                 if (status.is_favorite) {
                     twitter.destroyFavoriteAsync(status.account_id, status.id);
@@ -136,7 +136,7 @@ public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, in
     }
 
     @Override
-    public boolean handleKeyboardShortcutRepeat(KeyboardShortcutsHandler handler, final int keyCode, final int repeatCount,
+    public boolean handleKeyboardShortcutRepeat(@NonNull KeyboardShortcutsHandler handler, final int keyCode, final int repeatCount,
                                                 @NonNull final KeyEvent event) {
         return mRecyclerViewNavigationHelper.handleKeyboardShortcutRepeat(handler, keyCode, repeatCount, event);
     }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AbsUsersFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AbsUsersFragment.java
index fbc574d1c7..6e43ea14c5 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AbsUsersFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AbsUsersFragment.java
@@ -34,7 +34,6 @@
 
 import org.mariotaku.twidere.adapter.AbsUsersAdapter;
 import org.mariotaku.twidere.adapter.AbsUsersAdapter.UserAdapterListener;
-import org.mariotaku.twidere.app.TwidereApplication;
 import org.mariotaku.twidere.loader.iface.IExtendedLoader;
 import org.mariotaku.twidere.model.ParcelableUser;
 import org.mariotaku.twidere.util.KeyboardShortcutsHandler;
@@ -53,12 +52,12 @@ public final Data getData() {
     }
 
     @Override
-    public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
         return false;
     }
 
     @Override
-    public boolean handleKeyboardShortcutRepeat(KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutRepeat(@NonNull KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
         return mRecyclerViewNavigationHelper.handleKeyboardShortcutRepeat(handler, keyCode, repeatCount, event);
     }
 
@@ -67,7 +66,6 @@ public void onActivityCreated(@Nullable Bundle savedInstanceState) {
         super.onActivityCreated(savedInstanceState);
 
         final FragmentActivity activity = getActivity();
-        final TwidereApplication application = TwidereApplication.getInstance(activity);
         final AbsUsersAdapter<Data> adapter = getAdapter();
         final RecyclerView recyclerView = getRecyclerView();
         final LinearLayoutManager layoutManager = getLayoutManager();
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AccountsDashboardFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AccountsDashboardFragment.java
index e0afa57a42..39197d3ce3 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AccountsDashboardFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/AccountsDashboardFragment.java
@@ -164,15 +164,15 @@ public boolean handleKeyboardShortcutSingle(@NonNull final KeyboardShortcutsHand
     public boolean handleKeyboardShortcutRepeat(@NonNull final KeyboardShortcutsHandler handler,
                                                 final int keyCode, final int repeatCount,
                                                 @NonNull final KeyEvent event) {
-        final String action = handler.getKeyAction("navigation", keyCode, event);
+        final String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
         if (action == null) return false;
         final int offset;
         switch (action) {
-            case "navigation.previous": {
+            case ACTION_NAVIGATION_PREVIOUS: {
                 offset = -1;
                 break;
             }
-            case "navigation.next": {
+            case ACTION_NAVIGATION_NEXT: {
                 offset = 1;
                 break;
             }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/MessagesConversationFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/MessagesConversationFragment.java
index de9beee1ea..3c23d62111 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/MessagesConversationFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/MessagesConversationFragment.java
@@ -29,6 +29,7 @@
 import android.net.Uri;
 import android.os.AsyncTask;
 import android.os.Bundle;
+import android.support.annotation.NonNull;
 import android.support.v4.app.FragmentActivity;
 import android.support.v4.app.LoaderManager;
 import android.support.v4.app.LoaderManager.LoaderCallbacks;
@@ -44,7 +45,7 @@
 import android.text.Editable;
 import android.text.TextUtils;
 import android.text.TextWatcher;
-import android.util.Log;
+import android.view.KeyEvent;
 import android.view.LayoutInflater;
 import android.view.Menu;
 import android.view.MenuInflater;
@@ -62,6 +63,9 @@
 import android.widget.Spinner;
 import android.widget.TextView;
 
+import com.github.johnpersano.supertoasts.SuperToast;
+import com.github.johnpersano.supertoasts.SuperToast.Duration;
+import com.github.johnpersano.supertoasts.SuperToast.OnDismissListener;
 import com.squareup.otto.Bus;
 import com.squareup.otto.Subscribe;
 
@@ -87,10 +91,13 @@
 import org.mariotaku.twidere.provider.TwidereDataStore.DirectMessages;
 import org.mariotaku.twidere.provider.TwidereDataStore.DirectMessages.Conversation;
 import org.mariotaku.twidere.provider.TwidereDataStore.DirectMessages.ConversationEntries;
+import org.mariotaku.twidere.util.AsyncTaskUtils;
 import org.mariotaku.twidere.util.AsyncTwitterWrapper;
 import org.mariotaku.twidere.util.ClipboardUtils;
 import org.mariotaku.twidere.util.EditTextEnterHandler;
 import org.mariotaku.twidere.util.EditTextEnterHandler.EnterListener;
+import org.mariotaku.twidere.util.KeyboardShortcutsHandler;
+import org.mariotaku.twidere.util.KeyboardShortcutsHandler.KeyboardShortcutCallback;
 import org.mariotaku.twidere.util.MediaLoaderWrapper;
 import org.mariotaku.twidere.util.ParseUtils;
 import org.mariotaku.twidere.util.ReadStateManager;
@@ -103,7 +110,6 @@
 import org.mariotaku.twidere.view.iface.IColorLabelView;
 
 import java.util.ArrayList;
-import java.util.Arrays;
 import java.util.Collections;
 import java.util.List;
 import java.util.Locale;
@@ -113,49 +119,14 @@
 
 public class MessagesConversationFragment extends BaseSupportFragment implements
         LoaderCallbacks<Cursor>, OnClickListener, OnItemSelectedListener, MenuButtonClickListener,
-        PopupMenu.OnMenuItemClickListener {
+        PopupMenu.OnMenuItemClickListener, KeyboardShortcutCallback {
 
+    // Constants
     private static final int LOADER_ID_SEARCH_USERS = 1;
-
     private static final String EXTRA_FROM_CACHE = "from_cache";
 
-    private TwidereValidator mValidator;
-    private AsyncTwitterWrapper mTwitterWrapper;
-    private SharedPreferences mPreferences;
-    private SharedPreferences mMessageDrafts;
-    private ReadStateManager mReadStateManager;
-
-    private RecyclerView mMessagesListView;
-    private ListView mUsersSearchList;
-    private StatusComposeEditText mEditText;
-    private StatusTextCountView mTextCountView;
-    private View mSendButton;
-    private ImageView mAddImageButton;
-    private View mConversationContainer, mRecipientSelectorContainer;
-    private Spinner mAccountSpinner;
-    private ImageView mRecipientProfileImageView;
-    private EditText mUserQuery;
-    private View mUsersSearchProgress;
-    private View mQueryButton;
-    private View mUsersSearchEmpty;
-    private TextView mUsersSearchEmptyText;
-
-    private PopupMenu mPopupMenu;
-
-    private ParcelableDirectMessage mSelectedDirectMessage;
-    private boolean mLoaderInitialized;
-    private String mImageUri;
-
-
-    private MessageConversationAdapter mAdapter;
-    private SimpleParcelableUsersAdapter mUsersSearchAdapter;
-
-    private ParcelableAccount mAccount;
-    private ParcelableUser mRecipient;
-
-    private MediaLoaderWrapper mImageLoader;
-    private IColorLabelView mProfileImageContainer;
 
+    // Callbacks
     private LoaderCallbacks<List<ParcelableUser>> mSearchLoadersCallback = new LoaderCallbacks<List<ParcelableUser>>() {
         @Override
         public Loader<List<ParcelableUser>> onCreateLoader(int id, Bundle args) {
@@ -184,12 +155,70 @@ public void onLoaderReset(Loader<List<ParcelableUser>> loader) {
         }
     };
 
+    // Utility classes
+    private TwidereValidator mValidator;
+    private AsyncTwitterWrapper mTwitterWrapper;
+    private SharedPreferences mPreferences;
+    private SharedPreferences mMessageDrafts;
+    private ReadStateManager mReadStateManager;
+    private MediaLoaderWrapper mImageLoader;
+
+    // Views
+    private RecyclerView mMessagesListView;
+    private ListView mUsersSearchList;
+    private StatusComposeEditText mEditText;
+    private StatusTextCountView mTextCountView;
+    private View mSendButton;
+    private ImageView mAddImageButton;
+    private View mConversationContainer, mRecipientSelectorContainer;
+    private Spinner mAccountSpinner;
+    private ImageView mRecipientProfileImageView;
+    private EditText mEditUserQuery;
+    private View mUsersSearchProgress;
+    private View mQueryButton;
+    private View mUsersSearchEmpty;
+    private TextView mUsersSearchEmptyText;
+    private PopupMenu mPopupMenu;
+    private IColorLabelView mProfileImageContainer;
+
+    // Adapters
+    private MessageConversationAdapter mAdapter;
+    private SimpleParcelableUsersAdapter mUsersSearchAdapter;
+
+    // Data fields
+    private boolean mSearchUsersLoaderInitialized;
+    private boolean mNavigateBackPressed;
+    private ParcelableDirectMessage mSelectedDirectMessage;
+    private boolean mLoaderInitialized;
+    private String mImageUri;
+    private ParcelableAccount mAccount;
+    private ParcelableUser mRecipient;
+    private boolean mTextChanged, mQueryTextChanged;
 
     @Subscribe
     public void notifyTaskStateChanged(TaskStateChangedEvent event) {
         updateRefreshState();
     }
 
+    @Override
+    public void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
+        switch (requestCode) {
+            case REQUEST_PICK_IMAGE: {
+                if (resultCode != Activity.RESULT_OK || data.getDataString() == null) {
+                    break;
+                }
+                mImageUri = data.getDataString();
+                updateAddImageButton();
+                break;
+            }
+        }
+        super.onActivityResult(requestCode, resultCode, data);
+    }
+
+    @Override
+    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
+        return inflater.inflate(R.layout.fragment_messages_conversation, container, false);
+    }
 
     @Override
     public void onActivityCreated(final Bundle savedInstanceState) {
@@ -214,7 +243,7 @@ public void onActivityCreated(final Bundle savedInstanceState) {
         actionBar.setCustomView(R.layout.actionbar_custom_view_message_user_picker);
         final View actionBarView = actionBar.getCustomView();
         mAccountSpinner = (Spinner) actionBarView.findViewById(R.id.account_spinner);
-        mUserQuery = (EditText) actionBarView.findViewById(R.id.user_query);
+        mEditUserQuery = (EditText) actionBarView.findViewById(R.id.user_query);
         mQueryButton = actionBarView.findViewById(R.id.query_button);
         final List<ParcelableAccount> accounts = ParcelableAccount.getAccountsList(activity, false);
         final AccountsSpinnerAdapter accountsSpinnerAdapter = new AccountsSpinnerAdapter(
@@ -291,122 +320,53 @@ public void onItemClick(AdapterView<?> parent, View view, int position, long id)
 
     }
 
-    private void setupEditQuery() {
-        final EditTextEnterHandler queryEnterHandler = EditTextEnterHandler.attach(mUserQuery, new EnterListener() {
-            @Override
-            public void onHitEnter() {
-                final ParcelableAccount account = (ParcelableAccount) mAccountSpinner.getSelectedItem();
-                if (account == null) return;
-                mEditText.setAccountId(account.account_id);
-                searchUsers(account.account_id, ParseUtils.parseString(mUserQuery.getText()), false);
-            }
-        }, true);
-        queryEnterHandler.addTextChangedListener(new TextWatcher() {
-
-            @Override
-            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
-            }
-
-            @Override
-            public void onTextChanged(CharSequence s, int start, int before, int count) {
-            }
-
-            @Override
-            public void afterTextChanged(Editable s) {
-                final ParcelableAccount account = (ParcelableAccount) mAccountSpinner.getSelectedItem();
-                if (account == null) return;
-                mEditText.setAccountId(account.account_id);
-                searchUsers(account.account_id, ParseUtils.parseString(s), true);
-            }
-        });
-        mUserQuery.addTextChangedListener(new TextWatcher() {
-            @Override
-            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
-
-            }
-
-            @Override
-            public void onTextChanged(CharSequence s, int start, int before, int count) {
-
-            }
-
-            @Override
-            public void afterTextChanged(Editable s) {
-                Utils.removeLineBreaks(s);
-            }
-        });
-    }
-
-    private void setupEditText() {
-        EditTextEnterHandler.attach(mEditText, new EnterListener() {
-            @Override
-            public void onHitEnter() {
-                sendDirectMessage();
-            }
-        }, mPreferences.getBoolean(KEY_QUICK_SEND, false));
-        mEditText.addTextChangedListener(new TextWatcher() {
-
-            @Override
-            public void afterTextChanged(final Editable s) {
-                Utils.removeLineBreaks(s);
-            }
-
-            @Override
-            public void beforeTextChanged(final CharSequence s, final int start, final int count, final int after) {
-
-            }
-
-            @Override
-            public void onTextChanged(final CharSequence s, final int start, final int before, final int count) {
-                updateTextCount();
-                if (mSendButton == null || s == null) return;
-                mSendButton.setEnabled(mValidator.isValidTweet(s.toString()));
-            }
-        });
+    @Override
+    public void onStart() {
+        super.onStart();
+        final Bus bus = TwidereApplication.getInstance(getActivity()).getMessageBus();
+        bus.register(this);
+        updateTextCount();
+        updateEmptyText();
     }
 
-    private String getDraftsTextKey(long accountId, long userId) {
-        return String.format(Locale.ROOT, "text_%d_to_%d", accountId, userId);
+    @Override
+    public void onResume() {
+        super.onResume();
+        final String previewScaleType = Utils.getNonEmptyString(mPreferences, KEY_MEDIA_PREVIEW_STYLE,
+                ScaleType.CENTER_CROP.name());
+        mAdapter.setImagePreviewScaleType(previewScaleType);
+        mAdapter.notifyDataSetChanged();
+        updateAddImageButton();
     }
 
     @Override
-    public void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
-        switch (requestCode) {
-            case REQUEST_PICK_IMAGE: {
-                if (resultCode != Activity.RESULT_OK || data.getDataString() == null) {
-                    break;
-                }
-                mImageUri = data.getDataString();
-                updateAddImageButton();
-                break;
-            }
+    public void onSaveInstanceState(final Bundle outState) {
+        super.onSaveInstanceState(outState);
+        if (mEditText != null) {
+            outState.putCharSequence(EXTRA_TEXT, mEditText.getText());
         }
-        super.onActivityResult(requestCode, resultCode, data);
+        outState.putParcelable(EXTRA_ACCOUNT, mAccount);
+        outState.putParcelable(EXTRA_USER, mRecipient);
+        outState.putString(EXTRA_IMAGE_URI, mImageUri);
     }
 
     @Override
-    public void onPrepareOptionsMenu(Menu menu) {
-        super.onPrepareOptionsMenu(menu);
-        updateProfileImage();
-    }
-
-    private void updateProfileImage() {
-        if (mProfileImageContainer == null || mRecipientProfileImageView == null) {
-            return;
-        }
-        mProfileImageContainer.setVisibility(mRecipient != null ? View.VISIBLE : View.GONE);
-        if (mAccount != null && mRecipient != null) {
-            mImageLoader.displayProfileImage(mRecipientProfileImageView, mRecipient.profile_image_url);
-            mProfileImageContainer.drawEnd(mAccount.color);
-        } else {
-            mImageLoader.cancelDisplayTask(mRecipientProfileImageView);
+    public void onStop() {
+        final Bus bus = TwidereApplication.getInstance(getActivity()).getMessageBus();
+        bus.unregister(this);
+        if (mPopupMenu != null) {
+            mPopupMenu.dismiss();
         }
-        final FragmentActivity activity = getActivity();
-        if (mRecipient != null) {
-            activity.setTitle(UserColorNameUtils.getDisplayName(activity, mRecipient));
-        } else {
-            activity.setTitle(R.string.direct_messages);
+
+        final ParcelableAccount account = mAccount;
+        final ParcelableUser recipient = mRecipient;
+        if (account != null && recipient != null) {
+            final String key = getDraftsTextKey(account.account_id, recipient.id);
+            final SharedPreferences.Editor editor = mMessageDrafts.edit();
+            editor.putString(key, ParseUtils.parseString(mEditText.getText()));
+            editor.apply();
         }
+        super.onStop();
     }
 
     @Override
@@ -418,6 +378,51 @@ public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
         mRecipientProfileImageView = (ImageView) profileImageItemView.findViewById(R.id.recipient_profile_image);
     }
 
+    @Override
+    public void onPrepareOptionsMenu(Menu menu) {
+        super.onPrepareOptionsMenu(menu);
+        updateProfileImage();
+    }
+
+    @Override
+    public void onBaseViewCreated(final View view, final Bundle savedInstanceState) {
+        super.onBaseViewCreated(view, savedInstanceState);
+        mUsersSearchProgress = view.findViewById(R.id.users_search_progress);
+        mUsersSearchList = (ListView) view.findViewById(R.id.users_search_list);
+        mUsersSearchEmpty = view.findViewById(R.id.users_search_empty);
+        mUsersSearchEmptyText = (TextView) view.findViewById(R.id.users_search_empty_text);
+        mMessagesListView = (RecyclerView) view.findViewById(R.id.recycler_view);
+        final View inputSendContainer = view.findViewById(R.id.input_send_container);
+        mConversationContainer = view.findViewById(R.id.conversation_container);
+        mRecipientSelectorContainer = view.findViewById(R.id.recipient_selector_container);
+        mEditText = (StatusComposeEditText) inputSendContainer.findViewById(R.id.edit_text);
+        mTextCountView = (StatusTextCountView) inputSendContainer.findViewById(R.id.text_count);
+        mSendButton = inputSendContainer.findViewById(R.id.send);
+        mAddImageButton = (ImageView) inputSendContainer.findViewById(R.id.add_image);
+        mUsersSearchList = (ListView) view.findViewById(R.id.users_search_list);
+    }
+
+    @Override
+    protected void fitSystemWindows(Rect insets) {
+        final View view = getView();
+        if (view == null) return;
+        view.setPadding(insets.left, insets.top, insets.right, insets.bottom);
+    }
+
+    @Override
+    public Loader<Cursor> onCreateLoader(final int id, final Bundle args) {
+        final long accountId = args != null ? args.getLong(EXTRA_ACCOUNT_ID, -1) : -1;
+        final long recipientId = args != null ? args.getLong(EXTRA_RECIPIENT_ID, -1) : -1;
+        final String[] cols = DirectMessages.COLUMNS;
+        final boolean isValid = accountId > 0 && recipientId > 0;
+        mConversationContainer.setVisibility(isValid ? View.VISIBLE : View.GONE);
+        mRecipientSelectorContainer.setVisibility(isValid ? View.GONE : View.VISIBLE);
+        if (!isValid)
+            return new CursorLoader(getActivity(), TwidereDataStore.CONTENT_URI_NULL, cols, null, null, null);
+        final Uri uri = buildDirectMessageConversationUri(accountId, recipientId, null);
+        return new CursorLoader(getActivity(), uri, cols, null, null, Conversation.DEFAULT_SORT_ORDER);
+    }
+
     @Override
     public void onClick(final View view) {
         switch (view.getId()) {
@@ -442,54 +447,12 @@ public void onClick(final View view) {
             }
             case R.id.query_button: {
                 final ParcelableAccount account = (ParcelableAccount) mAccountSpinner.getSelectedItem();
-                searchUsers(account.account_id, ParseUtils.parseString(mUserQuery.getText()), false);
+                searchUsers(account.account_id, ParseUtils.parseString(mEditUserQuery.getText()), false);
                 break;
             }
         }
     }
 
-    private boolean mSearchUsersLoaderInitialized;
-
-    private void searchUsers(long accountId, String query, boolean fromCache) {
-        final Bundle args = new Bundle();
-        args.putLong(EXTRA_ACCOUNT_ID, accountId);
-        args.putString(EXTRA_QUERY, query);
-        args.putBoolean(EXTRA_FROM_CACHE, fromCache);
-        final LoaderManager lm = getLoaderManager();
-        if (mSearchUsersLoaderInitialized) {
-            lm.restartLoader(LOADER_ID_SEARCH_USERS, args, mSearchLoadersCallback);
-        } else {
-            mSearchUsersLoaderInitialized = true;
-            lm.initLoader(LOADER_ID_SEARCH_USERS, args, mSearchLoadersCallback);
-        }
-    }
-
-    @Override
-    public Loader<Cursor> onCreateLoader(final int id, final Bundle args) {
-        final long accountId = args != null ? args.getLong(EXTRA_ACCOUNT_ID, -1) : -1;
-        final long recipientId = args != null ? args.getLong(EXTRA_RECIPIENT_ID, -1) : -1;
-        final String[] cols = DirectMessages.COLUMNS;
-        final boolean isValid = accountId > 0 && recipientId > 0;
-        mConversationContainer.setVisibility(isValid ? View.VISIBLE : View.GONE);
-        mRecipientSelectorContainer.setVisibility(isValid ? View.GONE : View.VISIBLE);
-        if (!isValid)
-            return new CursorLoader(getActivity(), TwidereDataStore.CONTENT_URI_NULL, cols, null, null, null);
-        final Uri uri = buildDirectMessageConversationUri(accountId, recipientId, null);
-        return new CursorLoader(getActivity(), uri, cols, null, null, Conversation.DEFAULT_SORT_ORDER);
-    }
-
-    @Override
-    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
-        return inflater.inflate(R.layout.fragment_messages_conversation, container, false);
-    }
-
-    @Override
-    protected void fitSystemWindows(Rect insets) {
-        final View view = getView();
-        if (view == null) return;
-        view.setPadding(insets.left, insets.top, insets.right, insets.bottom);
-    }
-
     @Override
     public void onItemSelected(final AdapterView<?> parent, final View view, final int pos, final long id) {
         final ParcelableAccount account = (ParcelableAccount) mAccountSpinner.getSelectedItem();
@@ -500,13 +463,8 @@ public void onItemSelected(final AdapterView<?> parent, final View view, final i
     }
 
     @Override
-    public void onLoaderReset(final Loader<Cursor> loader) {
-        mAdapter.setCursor(null);
-    }
+    public void onNothingSelected(final AdapterView<?> view) {
 
-    @Override
-    public void onLoadFinished(final Loader<Cursor> loader, final Cursor cursor) {
-        mAdapter.setCursor(cursor);
     }
 
     @Override
@@ -515,6 +473,11 @@ public void onMenuButtonClick(final View button, final int position, final long
         showMenu(button, mSelectedDirectMessage);
     }
 
+    @Override
+    public void onLoaderReset(final Loader<Cursor> loader) {
+        mAdapter.setCursor(null);
+    }
+
     @Override
     public boolean onMenuItemClick(final MenuItem item) {
         if (mSelectedDirectMessage != null) {
@@ -539,121 +502,45 @@ public boolean onMenuItemClick(final MenuItem item) {
     }
 
     @Override
-    public void onNothingSelected(final AdapterView<?> view) {
-
-    }
-
-//    @Override
-//    public void onRefreshFromEnd() {
-//        new TwidereAsyncTask<Object, Object, long[][]>() {
-//
-//            @Override
-//            protected long[][] doInBackground(final Object... params) {
-//                final long[][] result = new long[2][];
-//                result[0] = getActivatedAccountIds(getActivity());
-//                result[1] = getNewestMessageIdsFromDatabase(getActivity(), DirectMessages.Inbox.CONTENT_URI);
-//                return result;
-//            }
-//
-//            @Override
-//            protected void onPostExecute(final long[][] result) {
-//                final AsyncTwitterWrapper twitter = getTwitterWrapper();
-//                if (twitter == null) return;
-//                twitter.getReceivedDirectMessagesAsync(result[0], null, result[1]);
-//                twitter.getSentDirectMessagesAsync(result[0], null, null);
-//            }
-//
-//        }.executeTask();
-//    }
-//
-//    @Override
-//    public void onRefresh() {
-//        loadMoreMessages();
-//    }
-
-    @Override
-    public void onResume() {
-        super.onResume();
-        final String previewScaleType = Utils.getNonEmptyString(mPreferences, KEY_MEDIA_PREVIEW_STYLE,
-                ScaleType.CENTER_CROP.name());
-        mAdapter.setImagePreviewScaleType(previewScaleType);
-        mAdapter.notifyDataSetChanged();
-        updateAddImageButton();
-    }
-
-    @Override
-    public void onSaveInstanceState(final Bundle outState) {
-        super.onSaveInstanceState(outState);
-        if (mEditText != null) {
-            outState.putCharSequence(EXTRA_TEXT, mEditText.getText());
-        }
-        outState.putParcelable(EXTRA_ACCOUNT, mAccount);
-        outState.putParcelable(EXTRA_USER, mRecipient);
-        outState.putString(EXTRA_IMAGE_URI, mImageUri);
-    }
-
-    @Override
-    public void onStart() {
-        super.onStart();
-        final Bus bus = TwidereApplication.getInstance(getActivity()).getMessageBus();
-        bus.register(this);
-        updateTextCount();
-        updateEmptyText();
-    }
-
-    @Override
-    public void onStop() {
-        final Bus bus = TwidereApplication.getInstance(getActivity()).getMessageBus();
-        bus.unregister(this);
-        if (mPopupMenu != null) {
-            mPopupMenu.dismiss();
-        }
-
-        final ParcelableAccount account = mAccount;
-        final ParcelableUser recipient = mRecipient;
-        if (account != null && recipient != null) {
-            final String key = getDraftsTextKey(account.account_id, recipient.id);
-            final SharedPreferences.Editor editor = mMessageDrafts.edit();
-            editor.putString(key, ParseUtils.parseString(mEditText.getText()));
-            editor.apply();
-        }
-        super.onStop();
-    }
-
-
-    private void updateEmptyText() {
-        final boolean noQuery = mUserQuery.length() <= 0;
-        if (noQuery) {
-            mUsersSearchEmptyText.setText(R.string.type_name_to_search);
-        } else {
-            mUsersSearchEmptyText.setText(R.string.no_user_found);
-        }
+    public void onLoadFinished(final Loader<Cursor> loader, final Cursor cursor) {
+        mAdapter.setCursor(cursor);
     }
 
     @Override
-    public void onBaseViewCreated(final View view, final Bundle savedInstanceState) {
-        super.onBaseViewCreated(view, savedInstanceState);
-        mUsersSearchProgress = view.findViewById(R.id.users_search_progress);
-        mUsersSearchList = (ListView) view.findViewById(R.id.users_search_list);
-        mUsersSearchEmpty = view.findViewById(R.id.users_search_empty);
-        mUsersSearchEmptyText = (TextView) view.findViewById(R.id.users_search_empty_text);
-        mMessagesListView = (RecyclerView) view.findViewById(R.id.recycler_view);
-        final View inputSendContainer = view.findViewById(R.id.input_send_container);
-        mConversationContainer = view.findViewById(R.id.conversation_container);
-        mRecipientSelectorContainer = view.findViewById(R.id.recipient_selector_container);
-        mEditText = (StatusComposeEditText) inputSendContainer.findViewById(R.id.edit_text);
-        mTextCountView = (StatusTextCountView) inputSendContainer.findViewById(R.id.text_count);
-        mSendButton = inputSendContainer.findViewById(R.id.send);
-        mAddImageButton = (ImageView) inputSendContainer.findViewById(R.id.add_image);
-        mUsersSearchList = (ListView) view.findViewById(R.id.users_search_list);
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+        final String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
+        if (ACTION_NAVIGATION_BACK.equals(action)) {
+            final boolean showingConversation = isShowingConversation();
+            final EditText editText = showingConversation ? mEditText : mEditUserQuery;
+            final boolean textChanged = showingConversation ? mTextChanged : mQueryTextChanged;
+            if (editText.length() == 0 && !textChanged) {
+                final FragmentActivity activity = getActivity();
+                if (!mNavigateBackPressed) {
+                    final SuperToast toast = SuperToast.create(activity, getString(R.string.press_again_to_close), Duration.SHORT);
+                    toast.setOnDismissListener(new OnDismissListener() {
+                        @Override
+                        public void onDismiss(View view) {
+                            mNavigateBackPressed = false;
+                        }
+                    });
+                    toast.show();
+                    mNavigateBackPressed = true;
+                } else {
+                    activity.onBackPressed();
+                }
+            } else {
+                mQueryTextChanged = false;
+                mTextChanged = false;
+            }
+            return true;
+        }
+        return false;
     }
 
-//    @Override
-//    public boolean scrollToStart() {
-//        if (mAdapter == null || mAdapter.isEmpty()) return false;
-//        setSelection(mAdapter.getCount() - 1);
-//        return true;
-//    }
+    @Override
+    public boolean handleKeyboardShortcutRepeat(@NonNull KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event) {
+        return false;
+    }
 
     public void showConversation(final ParcelableAccount account, final ParcelableUser recipient) {
         mAccount = account;
@@ -669,50 +556,42 @@ public void showConversation(final ParcelableAccount account, final ParcelableUs
             mLoaderInitialized = true;
             lm.initLoader(0, args, this);
         }
-        AsyncTask.execute(new Runnable() {
-            @Override
-            public void run() {
-
-            }
-        });
-        new SetReadStateTask(getActivity(), account, recipient).execute();
+        AsyncTaskUtils.executeTask(new SetReadStateTask(getActivity(), account, recipient));
         updateActionBar();
         updateProfileImage();
     }
 
-    private void updateActionBar() {
-        final BaseAppCompatActivity activity = (BaseAppCompatActivity) getActivity();
-        final ActionBar actionBar = activity.getSupportActionBar();
-        if (actionBar == null) return;
-        actionBar.setDisplayOptions(mRecipient != null ? ActionBar.DISPLAY_SHOW_TITLE : ActionBar.DISPLAY_SHOW_CUSTOM,
-                ActionBar.DISPLAY_SHOW_TITLE | ActionBar.DISPLAY_SHOW_CUSTOM);
+    public boolean isShowingConversation() {
+        return mConversationContainer.getVisibility() == View.VISIBLE;
     }
 
-//    @Override
-//    protected void onReachedTop() {
-//        if (!mLoadMoreAutomatically) return;
-//        loadMoreMessages();
-//    }
+    private String getDraftsTextKey(long accountId, long userId) {
+        return String.format(Locale.ROOT, "text_%d_to_%d", accountId, userId);
+    }
 
-    private void updateRefreshState() {
-//        final AsyncTwitterWrapper twitter = getTwitterWrapper();
-//        if (twitter == null || !getUserVisibleHint()) return;
-//        final boolean refreshing = twitter.isReceivedDirectMessagesRefreshing()
-//                || twitter.isSentDirectMessagesRefreshing();
-//        setProgressBarIndeterminateVisibility(refreshing);
-//        setRefreshing(refreshing);
+    private void searchUsers(long accountId, String query, boolean fromCache) {
+        final Bundle args = new Bundle();
+        args.putLong(EXTRA_ACCOUNT_ID, accountId);
+        args.putString(EXTRA_QUERY, query);
+        args.putBoolean(EXTRA_FROM_CACHE, fromCache);
+        final LoaderManager lm = getLoaderManager();
+        if (mSearchUsersLoaderInitialized) {
+            lm.restartLoader(LOADER_ID_SEARCH_USERS, args, mSearchLoadersCallback);
+        } else {
+            mSearchUsersLoaderInitialized = true;
+            lm.initLoader(LOADER_ID_SEARCH_USERS, args, mSearchLoadersCallback);
+        }
     }
 
-//    private void loadMoreMessages() {
-//        if (isRefreshing()) return;
+//    @Override
+//    public void onRefreshFromEnd() {
 //        new TwidereAsyncTask<Object, Object, long[][]>() {
 //
 //            @Override
 //            protected long[][] doInBackground(final Object... params) {
-//                final long[][] result = new long[3][];
+//                final long[][] result = new long[2][];
 //                result[0] = getActivatedAccountIds(getActivity());
-//                result[1] = getOldestMessageIdsFromDatabase(getActivity(), DirectMessages.Inbox.CONTENT_URI);
-//                result[2] = getOldestMessageIdsFromDatabase(getActivity(), DirectMessages.Outbox.CONTENT_URI);
+//                result[1] = getNewestMessageIdsFromDatabase(getActivity(), DirectMessages.Inbox.CONTENT_URI);
 //                return result;
 //            }
 //
@@ -720,11 +599,16 @@ private void updateRefreshState() {
 //            protected void onPostExecute(final long[][] result) {
 //                final AsyncTwitterWrapper twitter = getTwitterWrapper();
 //                if (twitter == null) return;
-//                twitter.getReceivedDirectMessagesAsync(result[0], result[1], null);
-//                twitter.getSentDirectMessagesAsync(result[0], result[2], null);
+//                twitter.getReceivedDirectMessagesAsync(result[0], null, result[1]);
+//                twitter.getSentDirectMessagesAsync(result[0], null, null);
 //            }
 //
 //        }.executeTask();
+//    }
+//
+//    @Override
+//    public void onRefresh() {
+//        loadMoreMessages();
 //    }
 
     private void sendDirectMessage() {
@@ -744,6 +628,82 @@ private void sendDirectMessage() {
         }
     }
 
+    private void setupEditQuery() {
+        final EditTextEnterHandler queryEnterHandler = EditTextEnterHandler.attach(mEditUserQuery, new EnterListener() {
+            @Override
+            public void onHitEnter() {
+                final ParcelableAccount account = (ParcelableAccount) mAccountSpinner.getSelectedItem();
+                if (account == null) return;
+                mEditText.setAccountId(account.account_id);
+                searchUsers(account.account_id, ParseUtils.parseString(mEditUserQuery.getText()), false);
+            }
+        }, true);
+        queryEnterHandler.addTextChangedListener(new TextWatcher() {
+
+            @Override
+            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
+            }
+
+            @Override
+            public void onTextChanged(CharSequence s, int start, int before, int count) {
+                mQueryTextChanged = true;
+            }
+
+            @Override
+            public void afterTextChanged(Editable s) {
+                final ParcelableAccount account = (ParcelableAccount) mAccountSpinner.getSelectedItem();
+                if (account == null) return;
+                mEditText.setAccountId(account.account_id);
+                searchUsers(account.account_id, ParseUtils.parseString(s), true);
+            }
+        });
+        mEditUserQuery.addTextChangedListener(new TextWatcher() {
+            @Override
+            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
+
+            }
+
+            @Override
+            public void onTextChanged(CharSequence s, int start, int before, int count) {
+
+            }
+
+            @Override
+            public void afterTextChanged(Editable s) {
+                Utils.removeLineBreaks(s);
+            }
+        });
+    }
+
+    private void setupEditText() {
+        EditTextEnterHandler.attach(mEditText, new EnterListener() {
+            @Override
+            public void onHitEnter() {
+                sendDirectMessage();
+            }
+        }, mPreferences.getBoolean(KEY_QUICK_SEND, false));
+        mEditText.addTextChangedListener(new TextWatcher() {
+
+            @Override
+            public void afterTextChanged(final Editable s) {
+                Utils.removeLineBreaks(s);
+            }
+
+            @Override
+            public void beforeTextChanged(final CharSequence s, final int start, final int count, final int after) {
+
+            }
+
+            @Override
+            public void onTextChanged(final CharSequence s, final int start, final int before, final int count) {
+                mTextChanged = true;
+                updateTextCount();
+                if (mSendButton == null || s == null) return;
+                mSendButton.setEnabled(mValidator.isValidTweet(s.toString()));
+            }
+        });
+    }
+
     private void showMenu(final View view, final ParcelableDirectMessage dm) {
         if (mPopupMenu != null) {
             mPopupMenu.dismiss();
@@ -760,10 +720,92 @@ private void showMenu(final View view, final ParcelableDirectMessage dm) {
         mPopupMenu.show();
     }
 
+    private void updateActionBar() {
+        final BaseAppCompatActivity activity = (BaseAppCompatActivity) getActivity();
+        final ActionBar actionBar = activity.getSupportActionBar();
+        if (actionBar == null) return;
+        actionBar.setDisplayOptions(mRecipient != null ? ActionBar.DISPLAY_SHOW_TITLE : ActionBar.DISPLAY_SHOW_CUSTOM,
+                ActionBar.DISPLAY_SHOW_TITLE | ActionBar.DISPLAY_SHOW_CUSTOM);
+    }
+
     private void updateAddImageButton() {
         mAddImageButton.setActivated(mImageUri != null);
     }
 
+//    @Override
+//    public boolean scrollToStart() {
+//        if (mAdapter == null || mAdapter.isEmpty()) return false;
+//        setSelection(mAdapter.getCount() - 1);
+//        return true;
+//    }
+
+    private void updateEmptyText() {
+        final boolean noQuery = mEditUserQuery.length() <= 0;
+        if (noQuery) {
+            mUsersSearchEmptyText.setText(R.string.type_name_to_search);
+        } else {
+            mUsersSearchEmptyText.setText(R.string.no_user_found);
+        }
+    }
+
+    private void updateProfileImage() {
+        if (mProfileImageContainer == null || mRecipientProfileImageView == null) {
+            return;
+        }
+        mProfileImageContainer.setVisibility(mRecipient != null ? View.VISIBLE : View.GONE);
+        if (mAccount != null && mRecipient != null) {
+            mImageLoader.displayProfileImage(mRecipientProfileImageView, mRecipient.profile_image_url);
+            mProfileImageContainer.drawEnd(mAccount.color);
+        } else {
+            mImageLoader.cancelDisplayTask(mRecipientProfileImageView);
+        }
+        final FragmentActivity activity = getActivity();
+        if (mRecipient != null) {
+            activity.setTitle(UserColorNameUtils.getDisplayName(activity, mRecipient));
+        } else {
+            activity.setTitle(R.string.direct_messages);
+        }
+    }
+
+//    @Override
+//    protected void onReachedTop() {
+//        if (!mLoadMoreAutomatically) return;
+//        loadMoreMessages();
+//    }
+
+    private void updateRefreshState() {
+//        final AsyncTwitterWrapper twitter = getTwitterWrapper();
+//        if (twitter == null || !getUserVisibleHint()) return;
+//        final boolean refreshing = twitter.isReceivedDirectMessagesRefreshing()
+//                || twitter.isSentDirectMessagesRefreshing();
+//        setProgressBarIndeterminateVisibility(refreshing);
+//        setRefreshing(refreshing);
+    }
+
+//    private void loadMoreMessages() {
+//        if (isRefreshing()) return;
+//        new TwidereAsyncTask<Object, Object, long[][]>() {
+//
+//            @Override
+//            protected long[][] doInBackground(final Object... params) {
+//                final long[][] result = new long[3][];
+//                result[0] = getActivatedAccountIds(getActivity());
+//                result[1] = getOldestMessageIdsFromDatabase(getActivity(), DirectMessages.Inbox.CONTENT_URI);
+//                result[2] = getOldestMessageIdsFromDatabase(getActivity(), DirectMessages.Outbox.CONTENT_URI);
+//                return result;
+//            }
+//
+//            @Override
+//            protected void onPostExecute(final long[][] result) {
+//                final AsyncTwitterWrapper twitter = getTwitterWrapper();
+//                if (twitter == null) return;
+//                twitter.getReceivedDirectMessagesAsync(result[0], result[1], null);
+//                twitter.getSentDirectMessagesAsync(result[0], result[2], null);
+//            }
+//
+//        }.executeTask();
+//    }
+
     private void updateTextCount() {
         if (mTextCountView == null || mEditText == null) return;
         final int count = mValidator.getTweetLength(ParseUtils.parseString(mEditText.getText()));
@@ -831,17 +873,6 @@ public SetReadStateTask(Context context, ParcelableAccount account, ParcelableUs
             mRecipient = recipient;
         }
 
-        @Override
-        protected void onPostExecute(Cursor cursor) {
-            if (cursor.moveToFirst()) {
-                final int messageIdIdx = cursor.getColumnIndex(ConversationEntries.MESSAGE_ID);
-                final String key = mAccount.account_id + "-" + mRecipient.id;
-                mReadStateManager.setPosition(TAB_TYPE_DIRECT_MESSAGES, key, cursor.getLong(messageIdIdx), false);
-            }
-            Log.d(LOGTAG, Arrays.toString(mReadStateManager.getPositionPairs(TAB_TYPE_DIRECT_MESSAGES)));
-            cursor.close();
-        }
-
         @Override
         protected Cursor doInBackground(Object... params) {
             final ContentResolver resolver = mContext.getContentResolver();
@@ -853,5 +884,17 @@ protected Cursor doInBackground(Object... params) {
             final String orderBy = new OrderBy(ConversationEntries.MESSAGE_ID, false).getSQL();
             return resolver.query(ConversationEntries.CONTENT_URI, projection, selection, null, orderBy);
         }
+
+        @Override
+        protected void onPostExecute(Cursor cursor) {
+            if (cursor.moveToFirst()) {
+                final int messageIdIdx = cursor.getColumnIndex(ConversationEntries.MESSAGE_ID);
+                final String key = mAccount.account_id + "-" + mRecipient.id;
+                mReadStateManager.setPosition(TAB_TYPE_DIRECT_MESSAGES, key, cursor.getLong(messageIdIdx), false);
+            }
+            cursor.close();
+        }
     }
+
+
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/SearchFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/SearchFragment.java
index 083fe7dcac..811f3f61b4 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/SearchFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/SearchFragment.java
@@ -108,17 +108,17 @@ public boolean getSystemWindowsInsets(Rect insets) {
     @Override
     public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
         if (handleFragmentKeyboardShortcutSingle(handler, keyCode, event)) return true;
-        final String action = handler.getKeyAction("navigation", keyCode, event);
+        final String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
         if (action != null) {
             switch (action) {
-                case "navigation.previous_tab": {
+                case ACTION_NAVIGATION_PREVIOUS_TAB: {
                     final int previous = mViewPager.getCurrentItem() - 1;
                     if (previous >= 0 && previous < mPagerAdapter.getCount()) {
                         mViewPager.setCurrentItem(previous, true);
                     }
                     return true;
                 }
-                case "navigation.next_tab": {
+                case ACTION_NAVIGATION_NEXT_TAB: {
                     final int next = mViewPager.getCurrentItem() + 1;
                     if (next >= 0 && next < mPagerAdapter.getCount()) {
                         mViewPager.setCurrentItem(next, true);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/StatusFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/StatusFragment.java
index 3d9b0714eb..3cf901b3a4 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/StatusFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/StatusFragment.java
@@ -415,7 +415,7 @@ public void onMediaClick(View view, ParcelableMedia media, long accountId) {
     }
 
     @Override
-    public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
         if (!KeyboardShortcutsHandler.isValidForHotkey(keyCode, event)) return false;
         final View focusedChild = RecyclerViewUtils.findRecyclerViewChild(mRecyclerView, mLayoutManager.getFocusedChild());
         final int position;
@@ -427,20 +427,20 @@ public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, in
         if (position == -1) return false;
         final ParcelableStatus status = getAdapter().getStatus(position);
         if (status == null) return false;
-        String action = handler.getKeyAction("status", keyCode, event);
+        String action = handler.getKeyAction(CONTEXT_TAG_STATUS, keyCode, event);
         if (action == null) return false;
         switch (action) {
-            case "status.reply": {
+            case ACTION_STATUS_REPLY: {
                 final Intent intent = new Intent(INTENT_ACTION_REPLY);
                 intent.putExtra(EXTRA_STATUS, status);
                 startActivity(intent);
                 return true;
             }
-            case "status.retweet": {
+            case ACTION_STATUS_RETWEET: {
                 RetweetQuoteDialogFragment.show(getFragmentManager(), status);
                 return true;
             }
-            case "status.favorite": {
+            case ACTION_STATUS_FAVORITE: {
                 final AsyncTwitterWrapper twitter = getTwitterWrapper();
                 if (status.is_favorite) {
                     twitter.destroyFavoriteAsync(status.account_id, status.id);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/UserFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/UserFragment.java
index 45c99223e0..9b5aa9b863 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/UserFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/UserFragment.java
@@ -1068,19 +1068,19 @@ public void onBaseViewCreated(final View view, final Bundle savedInstanceState)
     }
 
     @Override
-    public boolean handleKeyboardShortcutSingle(KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
         if (handleFragmentKeyboardShortcutSingle(handler, keyCode, event)) return true;
-        final String action = handler.getKeyAction("navigation", keyCode, event);
+        final String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
         if (action != null) {
             switch (action) {
-                case "navigation.previous_tab": {
+                case ACTION_NAVIGATION_PREVIOUS_TAB: {
                     final int previous = mViewPager.getCurrentItem() - 1;
                     if (previous >= 0 && previous < mPagerAdapter.getCount()) {
                         mViewPager.setCurrentItem(previous, true);
                     }
                     return true;
                 }
-                case "navigation.next_tab": {
+                case ACTION_NAVIGATION_NEXT_TAB: {
                     final int next = mViewPager.getCurrentItem() + 1;
                     if (next >= 0 && next < mPagerAdapter.getCount()) {
                         mViewPager.setCurrentItem(next, true);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/KeyboardShortcutsHandler.java b/twidere/src/main/java/org/mariotaku/twidere/util/KeyboardShortcutsHandler.java
index 57710f1736..7adeb3dbf8 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/KeyboardShortcutsHandler.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/KeyboardShortcutsHandler.java
@@ -15,43 +15,34 @@
 import org.mariotaku.twidere.activity.support.ComposeActivity;
 import org.mariotaku.twidere.activity.support.QuickSearchBarActivity;
 import org.mariotaku.twidere.app.TwidereApplication;
+import org.mariotaku.twidere.constant.KeyboardShortcutConstants;
 
 import java.util.HashMap;
 import java.util.Locale;
 import java.util.Map.Entry;
 import java.util.Set;
 
-public class KeyboardShortcutsHandler implements Constants {
+public class KeyboardShortcutsHandler implements Constants, KeyboardShortcutConstants {
 
-    public String findAction(@NonNull KeyboardShortcutSpec spec) {
-        return mPreferences.getString(spec.getRawKey(), null);
-    }
-
-    public void registerOnSharedPreferenceChangeListener(OnSharedPreferenceChangeListener listener) {
-        mPreferences.registerOnSharedPreferenceChangeListener(listener);
-    }
-
-    public void unregisterOnSharedPreferenceChangeListener(OnSharedPreferenceChangeListener listener) {
-        mPreferences.unregisterOnSharedPreferenceChangeListener(listener);
-    }
+    private static final String KEYCODE_STRING_PREFIX = "KEYCODE_";
 
     private static final HashMap<String, Integer> sActionLabelMap = new HashMap<>();
     private static final SparseArrayCompat<String> sMetaNameMap = new SparseArrayCompat<>();
 
     static {
-        sActionLabelMap.put("compose", R.string.compose);
-        sActionLabelMap.put("search", R.string.search);
-        sActionLabelMap.put("message", R.string.new_direct_message);
-        sActionLabelMap.put("home.accounts_dashboard", R.string.open_accounts_dashboard);
-        sActionLabelMap.put("status.reply", R.string.reply);
-        sActionLabelMap.put("status.retweet", R.string.retweet);
-        sActionLabelMap.put("status.favorite", R.string.favorite);
-        sActionLabelMap.put("navigation.previous", R.string.previous_item);
-        sActionLabelMap.put("navigation.next", R.string.next_item);
-        sActionLabelMap.put("navigation.refresh", R.string.refresh);
-        sActionLabelMap.put("navigation.previous_tab", R.string.previous_tab);
-        sActionLabelMap.put("navigation.next_tab", R.string.next_tab);
-        sActionLabelMap.put("navigation.back", R.string.keyboard_shortcut_back);
+        sActionLabelMap.put(ACTION_COMPOSE, R.string.compose);
+        sActionLabelMap.put(ACTION_SEARCH, R.string.search);
+        sActionLabelMap.put(ACTION_MESSAGE, R.string.new_direct_message);
+        sActionLabelMap.put(ACTION_HOME_ACCOUNTS_DASHBOARD, R.string.open_accounts_dashboard);
+        sActionLabelMap.put(ACTION_STATUS_REPLY, R.string.reply);
+        sActionLabelMap.put(ACTION_STATUS_RETWEET, R.string.retweet);
+        sActionLabelMap.put(ACTION_STATUS_FAVORITE, R.string.favorite);
+        sActionLabelMap.put(ACTION_NAVIGATION_PREVIOUS, R.string.previous_item);
+        sActionLabelMap.put(ACTION_NAVIGATION_NEXT, R.string.next_item);
+        sActionLabelMap.put(ACTION_NAVIGATION_REFRESH, R.string.refresh);
+        sActionLabelMap.put(ACTION_NAVIGATION_PREVIOUS_TAB, R.string.previous_tab);
+        sActionLabelMap.put(ACTION_NAVIGATION_NEXT_TAB, R.string.next_tab);
+        sActionLabelMap.put(ACTION_NAVIGATION_BACK, R.string.keyboard_shortcut_back);
 
         sMetaNameMap.put(KeyEvent.META_FUNCTION_ON, "fn");
         sMetaNameMap.put(KeyEvent.META_META_ON, "meta");
@@ -60,10 +51,16 @@ public void unregisterOnSharedPreferenceChangeListener(OnSharedPreferenceChangeL
         sMetaNameMap.put(KeyEvent.META_SHIFT_ON, "shift");
     }
 
-    private static final String KEYCODE_STRING_PREFIX = "KEYCODE_";
-    private final Context mContext;
     private final SharedPreferencesWrapper mPreferences;
 
+    public KeyboardShortcutsHandler(final TwidereApplication context) {
+        mPreferences = SharedPreferencesWrapper.getInstance(context, KEYBOARD_SHORTCUTS_PREFERENCES_NAME, Context.MODE_PRIVATE);
+    }
+
+    public String findAction(@NonNull KeyboardShortcutSpec spec) {
+        return mPreferences.getString(spec.getRawKey(), null);
+    }
+
     public KeyboardShortcutSpec findKey(String action) {
         for (Entry<String, ?> entry : mPreferences.getAll().entrySet()) {
             if (action.equals(entry.getValue())) {
@@ -74,41 +71,23 @@ public KeyboardShortcutSpec findKey(String action) {
         return null;
     }
 
-    public static int getKeyEventMeta(String name) {
-        for (int i = 0, j = sMetaNameMap.size(); i < j; i++) {
-            if (sMetaNameMap.valueAt(i).equalsIgnoreCase(name)) return sMetaNameMap.keyAt(i);
-        }
-        return 0;
-    }
-
-    public KeyboardShortcutsHandler(final TwidereApplication context) {
-        mContext = context;
-        mPreferences = SharedPreferencesWrapper.getInstance(context, KEYBOARD_SHORTCUTS_PREFERENCES_NAME, Context.MODE_PRIVATE);
-    }
-
     public static String getActionLabel(Context context, String action) {
         if (!sActionLabelMap.containsKey(action)) return null;
         final int labelRes = sActionLabelMap.get(action);
         return context.getString(labelRes);
     }
 
-    public static String metaToFriendlyString(int metaState) {
-        final StringBuilder keyNameBuilder = new StringBuilder();
-        for (int i = 0, j = sMetaNameMap.size(); i < j; i++) {
-            if ((sMetaNameMap.keyAt(i) & metaState) != 0) {
-                final String value = sMetaNameMap.valueAt(i);
-                keyNameBuilder.append(value.substring(0, 1).toUpperCase(Locale.US));
-                keyNameBuilder.append(value.substring(1));
-                keyNameBuilder.append("+");
-            }
-        }
-        return keyNameBuilder.toString();
-    }
-
     public static Set<String> getActions() {
         return sActionLabelMap.keySet();
     }
 
+    @Nullable
+    public String getKeyAction(final String contextTag, final int keyCode, final KeyEvent event) {
+        if (!isValidForHotkey(keyCode, event)) return null;
+        final String key = getKeyEventKey(contextTag, keyCode, event);
+        return mPreferences.getString(key, null);
+    }
+
     public static String getKeyEventKey(String contextTag, int keyCode, KeyEvent event) {
         if (!isValidForHotkey(keyCode, event)) return null;
         final StringBuilder keyNameBuilder = new StringBuilder();
@@ -148,6 +127,13 @@ public static String getKeyEventKey(String contextTag, int metaState, String key
         return keyNameBuilder.toString();
     }
 
+    public static int getKeyEventMeta(String name) {
+        for (int i = 0, j = sMetaNameMap.size(); i < j; i++) {
+            if (sMetaNameMap.valueAt(i).equalsIgnoreCase(name)) return sMetaNameMap.keyAt(i);
+        }
+        return 0;
+    }
+
     public static KeyboardShortcutSpec getKeyboardShortcutSpec(String contextTag, int keyCode, KeyEvent event) {
         if (!isValidForHotkey(keyCode, event)) return null;
         final int metaState = KeyEvent.normalizeMetaState(event.getMetaState());
@@ -169,15 +155,15 @@ public boolean handleKey(final Context context, final String contextTag, final i
         final String action = getKeyAction(contextTag, keyCode, event);
         if (action == null) return false;
         switch (action) {
-            case "compose": {
+            case ACTION_COMPOSE: {
                 context.startActivity(new Intent(context, ComposeActivity.class).setAction(INTENT_ACTION_COMPOSE));
                 return true;
             }
-            case "search": {
+            case ACTION_SEARCH: {
                 context.startActivity(new Intent(context, QuickSearchBarActivity.class).setAction(INTENT_ACTION_QUICK_SEARCH));
                 return true;
             }
-            case "message": {
+            case ACTION_MESSAGE: {
                 Utils.openMessageConversation(context, -1, -1);
                 return true;
             }
@@ -185,11 +171,8 @@ public boolean handleKey(final Context context, final String contextTag, final i
         return false;
     }
 
-    @Nullable
-    public String getKeyAction(final String contextTag, final int keyCode, final KeyEvent event) {
-        if (!isValidForHotkey(keyCode, event)) return null;
-        final String key = getKeyEventKey(contextTag, keyCode, event);
-        return mPreferences.getString(key, null);
+    public boolean isEmpty() {
+        return mPreferences.getAll().isEmpty();
     }
 
     public static boolean isValidForHotkey(int keyCode, KeyEvent event) {
@@ -210,33 +193,46 @@ public static boolean isValidForHotkey(int keyCode, KeyEvent event) {
         return !event.isSystem() && !KeyEvent.isModifierKey(keyCode) && keyCode != KeyEvent.KEYCODE_UNKNOWN;
     }
 
-    public boolean isEmpty() {
-        return mPreferences.getAll().isEmpty();
+    public static String metaToFriendlyString(int metaState) {
+        final StringBuilder keyNameBuilder = new StringBuilder();
+        for (int i = 0, j = sMetaNameMap.size(); i < j; i++) {
+            if ((sMetaNameMap.keyAt(i) & metaState) != 0) {
+                final String value = sMetaNameMap.valueAt(i);
+                keyNameBuilder.append(value.substring(0, 1).toUpperCase(Locale.US));
+                keyNameBuilder.append(value.substring(1));
+                keyNameBuilder.append("+");
+            }
+        }
+        return keyNameBuilder.toString();
+    }
+
+    public void register(KeyboardShortcutSpec spec, String action) {
+        unregister(action);
+        mPreferences.edit().putString(spec.getRawKey(), action).apply();
+    }
+
+    public void registerOnSharedPreferenceChangeListener(OnSharedPreferenceChangeListener listener) {
+        mPreferences.registerOnSharedPreferenceChangeListener(listener);
     }
 
     public void reset() {
         final Editor editor = mPreferences.edit();
         editor.clear();
-        editor.putString("n", "compose");
-        editor.putString("m", "message");
-        editor.putString("slash", "search");
-        editor.putString("home.q", "home.accounts_dashboard");
-        editor.putString("navigation.period", "navigation.refresh");
-        editor.putString("navigation.j", "navigation.next");
-        editor.putString("navigation.k", "navigation.previous");
-        editor.putString("navigation.h", "navigation.previous_tab");
-        editor.putString("navigation.l", "navigation.next_tab");
-        editor.putString("status.f", "status.favorite");
-        editor.putString("status.r", "status.reply");
-        editor.putString("status.t", "status.retweet");
+        editor.putString("n", ACTION_COMPOSE);
+        editor.putString("m", ACTION_MESSAGE);
+        editor.putString("slash", ACTION_SEARCH);
+        editor.putString("home.q", ACTION_HOME_ACCOUNTS_DASHBOARD);
+        editor.putString("navigation.period", ACTION_NAVIGATION_REFRESH);
+        editor.putString("navigation.j", ACTION_NAVIGATION_NEXT);
+        editor.putString("navigation.k", ACTION_NAVIGATION_PREVIOUS);
+        editor.putString("navigation.h", ACTION_NAVIGATION_PREVIOUS_TAB);
+        editor.putString("navigation.l", ACTION_NAVIGATION_NEXT_TAB);
+        editor.putString("status.f", ACTION_STATUS_FAVORITE);
+        editor.putString("status.r", ACTION_STATUS_REPLY);
+        editor.putString("status.t", ACTION_STATUS_RETWEET);
         editor.apply();
     }
 
-    public void register(KeyboardShortcutSpec spec, String action) {
-        unregister(action);
-        mPreferences.edit().putString(spec.getRawKey(), action).apply();
-    }
-
     public void unregister(String action) {
         final Editor editor = mPreferences.edit();
         for (Entry<String, ?> entry : mPreferences.getAll().entrySet()) {
@@ -250,16 +246,21 @@ public void unregister(String action) {
         editor.apply();
     }
 
-    public static interface KeyboardShortcutCallback {
-        boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event);
+    public void unregisterOnSharedPreferenceChangeListener(OnSharedPreferenceChangeListener listener) {
+        mPreferences.unregisterOnSharedPreferenceChangeListener(listener);
+    }
+
+    public static interface KeyboardShortcutCallback extends KeyboardShortcutConstants {
 
         boolean handleKeyboardShortcutRepeat(@NonNull KeyboardShortcutsHandler handler, int keyCode, int repeatCount, @NonNull KeyEvent event);
+
+        boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event);
     }
 
     /**
      * Created by mariotaku on 15/4/11.
      */
-    public static class KeyboardShortcutSpec {
+    public static final class KeyboardShortcutSpec {
 
         private String action;
         private String contextTag;
@@ -291,10 +292,18 @@ public KeyboardShortcutSpec copy() {
             return new KeyboardShortcutSpec(contextTag, keyMeta, keyName, action);
         }
 
+        public String getAction() {
+            return action;
+        }
+
         public String getContextTag() {
             return contextTag;
         }
 
+        public void setContextTag(String contextTag) {
+            this.contextTag = contextTag;
+        }
+
         public int getKeyMeta() {
             return keyMeta;
         }
@@ -307,10 +316,6 @@ public String getRawKey() {
             return getKeyEventKey(contextTag, keyMeta, keyName);
         }
 
-        public String getAction() {
-            return action;
-        }
-
         public String getValueName(Context context) {
             return getActionLabel(context, action);
         }
@@ -319,24 +324,10 @@ public boolean isValid() {
             return keyName != null;
         }
 
-        public void setContextTag(String contextTag) {
-            this.contextTag = contextTag;
-        }
-
         public String toKeyString() {
             return metaToFriendlyString(keyMeta) + keyToFriendlyString(keyName);
         }
 
-        private static String keyToFriendlyString(String keyName) {
-            if (keyName == null) return null;
-            final String upperName = keyName.toUpperCase(Locale.US);
-            final int keyCode = KeyEvent.keyCodeFromString(KEYCODE_STRING_PREFIX + upperName);
-            if (keyCode == KeyEvent.KEYCODE_UNKNOWN) return upperName;
-            if (keyCode == KeyEvent.KEYCODE_DEL) return "Backspace";
-            if (keyCode == KeyEvent.KEYCODE_FORWARD_DEL) return "Delete";
-            return String.valueOf(new KeyEvent(KeyEvent.ACTION_DOWN, keyCode).getDisplayLabel());
-        }
-
         @Override
         public String toString() {
             return "KeyboardShortcutSpec{" +
@@ -346,5 +337,15 @@ public String toString() {
                     ", keyName='" + keyName + '\'' +
                     '}';
         }
+
+        private static String keyToFriendlyString(String keyName) {
+            if (keyName == null) return null;
+            final String upperName = keyName.toUpperCase(Locale.US);
+            final int keyCode = KeyEvent.keyCodeFromString(KEYCODE_STRING_PREFIX + upperName);
+            if (keyCode == KeyEvent.KEYCODE_UNKNOWN) return upperName;
+            if (keyCode == KeyEvent.KEYCODE_DEL) return "Backspace";
+            if (keyCode == KeyEvent.KEYCODE_FORWARD_DEL) return "Delete";
+            return String.valueOf(new KeyEvent(KeyEvent.ACTION_DOWN, keyCode).getDisplayLabel());
+        }
     }
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/RecyclerViewNavigationHelper.java b/twidere/src/main/java/org/mariotaku/twidere/util/RecyclerViewNavigationHelper.java
index a0c9d96dac..2be5b8680f 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/RecyclerViewNavigationHelper.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/RecyclerViewNavigationHelper.java
@@ -27,10 +27,12 @@
 import android.view.KeyEvent;
 import android.view.View;
 
+import org.mariotaku.twidere.util.KeyboardShortcutsHandler.KeyboardShortcutCallback;
+
 /**
  * Created by mariotaku on 15/4/21.
  */
-public class RecyclerViewNavigationHelper {
+public class RecyclerViewNavigationHelper implements KeyboardShortcutCallback {
 
     private int positionBackup;
     @NonNull
@@ -48,18 +50,19 @@ public RecyclerViewNavigationHelper(@NonNull final RecyclerView view,
         this.adapter = adapter;
     }
 
+    @Override
     public boolean handleKeyboardShortcutRepeat(@NonNull final KeyboardShortcutsHandler handler,
                                                 final int keyCode, final int repeatCount,
                                                 @NonNull final KeyEvent event) {
-        final String action = handler.getKeyAction("navigation", keyCode, event);
+        final String action = handler.getKeyAction(CONTEXT_TAG_NAVIGATION, keyCode, event);
         if (action == null) return false;
         final int direction;
         switch (action) {
-            case "navigation.previous": {
+            case ACTION_NAVIGATION_PREVIOUS: {
                 direction = -1;
                 break;
             }
-            case "navigation.next": {
+            case ACTION_NAVIGATION_NEXT: {
                 direction = 1;
                 break;
             }
@@ -90,4 +93,9 @@ public boolean handleKeyboardShortcutRepeat(@NonNull final KeyboardShortcutsHand
         RecyclerViewUtils.focusNavigate(view, layoutManager, position, direction);
         return false;
     }
+
+    @Override
+    public boolean handleKeyboardShortcutSingle(@NonNull KeyboardShortcutsHandler handler, int keyCode, @NonNull KeyEvent event) {
+        return false;
+    }
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/StatusComposeEditText.java b/twidere/src/main/java/org/mariotaku/twidere/view/StatusComposeEditText.java
index 8a7bc59a41..b081c57ef6 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/StatusComposeEditText.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/StatusComposeEditText.java
@@ -28,6 +28,7 @@
 import android.text.method.ArrowKeyMovementMethod;
 import android.util.AttributeSet;
 
+import org.mariotaku.twidere.R;
 import org.mariotaku.twidere.adapter.UserHashtagAutoCompleteAdapter;
 
 public class StatusComposeEditText extends AppCompatMultiAutoCompleteTextView {
@@ -40,7 +41,7 @@ public StatusComposeEditText(final Context context) {
     }
 
     public StatusComposeEditText(final Context context, final AttributeSet attrs) {
-        this(context, attrs, android.R.attr.autoCompleteTextViewStyle);
+        this(context, attrs, R.attr.autoCompleteTextViewStyle);
     }
 
     public StatusComposeEditText(final Context context, final AttributeSet attrs, final int defStyle) {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/StatusTextCountView.java b/twidere/src/main/java/org/mariotaku/twidere/view/StatusTextCountView.java
index 6289403781..2a1f91e13a 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/StatusTextCountView.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/StatusTextCountView.java
@@ -22,6 +22,7 @@
 import android.content.Context;
 import android.content.res.TypedArray;
 import android.graphics.Color;
+import android.support.v7.widget.AppCompatTextView;
 import android.util.AttributeSet;
 import android.widget.TextView;
 
@@ -32,7 +33,7 @@
 
 import static org.mariotaku.twidere.util.Utils.getLocalizedNumber;
 
-public class StatusTextCountView extends TextView {
+public class StatusTextCountView extends AppCompatTextView {
 
     private final int mTextColor;
     private final Locale mLocale;
diff --git a/twidere/src/main/res/layout/actionbar_custom_view_message_user_picker.xml b/twidere/src/main/res/layout/actionbar_custom_view_message_user_picker.xml
index 678b56b0fb..ee643b6b81 100644
--- a/twidere/src/main/res/layout/actionbar_custom_view_message_user_picker.xml
+++ b/twidere/src/main/res/layout/actionbar_custom_view_message_user_picker.xml
@@ -31,6 +31,7 @@
         android:id="@+id/account_spinner"
         android:layout_width="wrap_content"
         android:layout_height="match_parent"
+        android:layout_margin="@dimen/element_spacing_small"
         android:layout_weight="0"
         tools:listitem="@layout/spinner_item_account_icon"/>
 
diff --git a/twidere/src/main/res/layout/fragment_messages_conversation.xml b/twidere/src/main/res/layout/fragment_messages_conversation.xml
index 64f1af525d..41d5ad60d1 100644
--- a/twidere/src/main/res/layout/fragment_messages_conversation.xml
+++ b/twidere/src/main/res/layout/fragment_messages_conversation.xml
@@ -49,14 +49,76 @@
 
         </FrameLayout>
 
-        <FrameLayout
+        <LinearLayout
             android:id="@+id/input_send_container"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
+            android:gravity="bottom"
+            android:orientation="horizontal"
             android:layout_weight="0">
 
-            <include layout="@layout/fragment_messages_conversation_input_send"/>
-        </FrameLayout>
+            <org.mariotaku.twidere.view.ActionIconView
+                android:id="@+id/add_image"
+                style="?android:borderlessButtonStyle"
+                android:layout_width="?android:actionBarSize"
+                android:layout_height="?android:actionBarSize"
+                android:layout_weight="0"
+                android:color="?android:textColorSecondary"
+                android:contentDescription="@string/add_image"
+                android:padding="0dp"
+                android:scaleType="centerInside"
+                android:src="@drawable/ic_action_gallery"/>
+
+            <org.mariotaku.twidere.view.StatusComposeEditText
+                android:id="@+id/edit_text"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:layout_weight="1"
+                android:completionThreshold="1"
+                android:focusable="true"
+                android:gravity="left|bottom"
+                android:hint="@string/type_to_compose"
+                android:inputType="textShortMessage|textMultiLine"
+                android:maxHeight="140dp"
+                android:minHeight="?android:actionBarSize"
+                android:singleLine="false">
+
+                <requestFocus/>
+            </org.mariotaku.twidere.view.StatusComposeEditText>
+
+            <FrameLayout
+                android:id="@+id/send"
+                style="?android:borderlessButtonStyle"
+                android:layout_width="?android:actionBarSize"
+                android:layout_height="?android:actionBarSize"
+                android:layout_weight="0"
+                android:padding="0dp">
+
+                <org.mariotaku.twidere.view.ActionIconView
+                    android:layout_width="match_parent"
+                    android:layout_height="match_parent"
+                    android:color="?android:textColorSecondary"
+                    android:contentDescription="@string/send"
+                    android:scaleType="centerInside"
+                    android:src="@drawable/ic_action_send"/>
+
+                <org.mariotaku.twidere.view.StatusTextCountView
+                    android:id="@+id/text_count"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_gravity="bottom|right"
+                    android:layout_marginBottom="@dimen/element_spacing_small"
+                    android:layout_marginRight="@dimen/element_spacing_small"
+                    android:fontFamily="sans-serif-light"
+                    android:singleLine="true"
+                    android:textAllCaps="true"
+                    android:textAppearance="?android:attr/textAppearanceSmall"
+                    android:textColor="?android:textColorPrimary"
+                    android:textSize="@dimen/text_size_extra_small"
+                    tools:ignore="UnusedAttribute"
+                    tools:text="140"/>
+            </FrameLayout>
+        </LinearLayout>
     </LinearLayout>
 
     <FrameLayout
diff --git a/twidere/src/main/res/layout/fragment_messages_conversation_input_send.xml b/twidere/src/main/res/layout/fragment_messages_conversation_input_send.xml
deleted file mode 100644
index c2d291047f..0000000000
--- a/twidere/src/main/res/layout/fragment_messages_conversation_input_send.xml
+++ /dev/null
@@ -1,88 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!--
-  ~ Twidere - Twitter client for Android
-  ~
-  ~  Copyright (C) 2012-2014 Mariotaku Lee <mariotaku.lee@gmail.com>
-  ~
-  ~  This program is free software: you can redistribute it and/or modify
-  ~  it under the terms of the GNU General Public License as published by
-  ~  the Free Software Foundation, either version 3 of the License, or
-  ~  (at your option) any later version.
-  ~
-  ~  This program is distributed in the hope that it will be useful,
-  ~  but WITHOUT ANY WARRANTY; without even the implied warranty of
-  ~  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-  ~  GNU General Public License for more details.
-  ~
-  ~  You should have received a copy of the GNU General Public License
-  ~  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-  -->
-
-<LinearLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    android:gravity="bottom"
-    android:orientation="horizontal"
-    tools:showIn="@layout/fragment_messages_conversation">
-
-    <org.mariotaku.twidere.view.ActionIconView
-        android:id="@+id/add_image"
-        style="?android:borderlessButtonStyle"
-        android:layout_width="?android:actionBarSize"
-        android:layout_height="?android:actionBarSize"
-        android:layout_weight="0"
-        android:color="?android:textColorSecondary"
-        android:contentDescription="@string/add_image"
-        android:padding="0dp"
-        android:scaleType="centerInside"
-        android:src="@drawable/ic_action_gallery"/>
-
-    <org.mariotaku.twidere.view.StatusComposeEditText
-        android:id="@+id/edit_text"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_weight="1"
-        android:completionThreshold="1"
-        android:gravity="left|bottom"
-        android:hint="@string/type_to_compose"
-        android:inputType="textShortMessage|textMultiLine"
-        android:maxHeight="140dp"
-        android:minHeight="?android:actionBarSize"
-        android:singleLine="false"/>
-
-    <FrameLayout
-        android:id="@+id/send"
-        style="?android:borderlessButtonStyle"
-        android:layout_width="?android:actionBarSize"
-        android:layout_height="?android:actionBarSize"
-        android:layout_weight="0"
-        android:padding="0dp">
-
-        <org.mariotaku.twidere.view.ActionIconView
-            android:layout_width="match_parent"
-            android:layout_height="match_parent"
-            android:color="?android:textColorSecondary"
-            android:contentDescription="@string/send"
-            android:scaleType="centerInside"
-            android:src="@drawable/ic_action_send"/>
-
-        <org.mariotaku.twidere.view.StatusTextCountView
-            android:id="@+id/text_count"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_gravity="bottom|right"
-            android:layout_marginBottom="@dimen/element_spacing_small"
-            android:layout_marginRight="@dimen/element_spacing_small"
-            android:fontFamily="sans-serif-light"
-            android:singleLine="true"
-            android:textAllCaps="true"
-            android:textAppearance="?android:attr/textAppearanceSmall"
-            android:textColor="?android:textColorPrimary"
-            android:textSize="@dimen/text_size_extra_small"
-            tools:ignore="UnusedAttribute"
-            tools:text="140"/>
-    </FrameLayout>
-
-</LinearLayout>
\ No newline at end of file
diff --git a/twidere/src/main/res/layout/list_item_auto_complete.xml b/twidere/src/main/res/layout/list_item_auto_complete.xml
new file mode 100644
index 0000000000..ca27071d46
--- /dev/null
+++ b/twidere/src/main/res/layout/list_item_auto_complete.xml
@@ -0,0 +1,60 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+  ~ Twidere - Twitter client for Android
+  ~
+  ~  Copyright (C) 2012-2014 Mariotaku Lee <mariotaku.lee@gmail.com>
+  ~
+  ~  This program is free software: you can redistribute it and/or modify
+  ~  it under the terms of the GNU General Public License as published by
+  ~  the Free Software Foundation, either version 3 of the License, or
+  ~  (at your option) any later version.
+  ~
+  ~  This program is distributed in the hope that it will be useful,
+  ~  but WITHOUT ANY WARRANTY; without even the implied warranty of
+  ~  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+  ~  GNU General Public License for more details.
+  ~
+  ~  You should have received a copy of the GNU General Public License
+  ~  along with this program.  If not, see <http://www.gnu.org/licenses/>.
+  -->
+
+<LinearLayout
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:gravity="center_vertical"
+    android:minHeight="?android:listPreferredItemHeightSmall"
+    android:orientation="horizontal"
+    android:padding="@dimen/element_spacing_small">
+
+    <org.mariotaku.twidere.view.ShapedImageView
+        android:id="@android:id/icon"
+        android:layout_width="@dimen/icon_size_list_item_small"
+        style="?profileImageStyle"
+        android:layout_height="@dimen/icon_size_list_item_small"
+        android:contentDescription="@string/icon"
+        android:scaleType="fitCenter"/>
+
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:gravity="center_vertical"
+        android:orientation="vertical"
+        android:paddingLeft="@dimen/element_spacing_small">
+
+        <TextView
+            android:id="@android:id/text1"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:singleLine="true"
+            android:textAppearance="?android:attr/textAppearanceMedium"/>
+
+        <TextView
+            android:id="@android:id/text2"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:singleLine="true"
+            android:textAppearance="?android:attr/textAppearanceSmall"/>
+    </LinearLayout>
+
+</LinearLayout>
\ No newline at end of file
diff --git a/twidere/src/main/res/layout/list_item_two_line_small.xml b/twidere/src/main/res/layout/list_item_two_line_small.xml
index ca27071d46..88b8734d98 100644
--- a/twidere/src/main/res/layout/list_item_two_line_small.xml
+++ b/twidere/src/main/res/layout/list_item_two_line_small.xml
@@ -27,10 +27,9 @@
     android:orientation="horizontal"
     android:padding="@dimen/element_spacing_small">
 
-    <org.mariotaku.twidere.view.ShapedImageView
+    <ImageView
         android:id="@android:id/icon"
         android:layout_width="@dimen/icon_size_list_item_small"
-        style="?profileImageStyle"
         android:layout_height="@dimen/icon_size_list_item_small"
         android:contentDescription="@string/icon"
         android:scaleType="fitCenter"/>
diff --git a/twidere/src/main/res/layout/spinner_item_account_icon.xml b/twidere/src/main/res/layout/spinner_item_account_icon.xml
index 3826dac00c..08826c7af6 100644
--- a/twidere/src/main/res/layout/spinner_item_account_icon.xml
+++ b/twidere/src/main/res/layout/spinner_item_account_icon.xml
@@ -23,8 +23,7 @@
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="wrap_content"
     android:layout_height="match_parent"
-    android:padding="@dimen/element_spacing_small"
-    tools:layout_height="?android:actionBarSize">
+    android:padding="@dimen/element_spacing_small">
 
     <org.mariotaku.twidere.view.SquareShapedImageView
         android:id="@android:id/icon"
