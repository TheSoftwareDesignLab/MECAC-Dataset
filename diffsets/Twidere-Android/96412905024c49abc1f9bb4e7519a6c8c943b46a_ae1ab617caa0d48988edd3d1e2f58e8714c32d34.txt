diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/BasePreferenceActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/BasePreferenceActivity.java
index b0c93d3549..ae3f5b33ec 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/BasePreferenceActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/BasePreferenceActivity.java
@@ -106,8 +106,6 @@ protected void onResume() {
     }
 
     private void setActionBarBackground() {
-        // ThemeUtils.applyActionBarBackground(getActionBar(), this,
-        // mCurrentThemeResource);
     }
 
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/BaseThemedActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/BaseThemedActivity.java
index 503dfec9f9..8eb5cc6798 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/BaseThemedActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/BaseThemedActivity.java
@@ -104,7 +104,6 @@ protected void onResume() {
     }
 
     private void setActionBarBackground() {
-        ThemeUtils.applyActionBarBackground(getActionBar(), this, mCurrentThemeResource);
     }
 
     private void setTheme() {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/SettingsWizardActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/SettingsWizardActivity.java
index de52a282d4..9e0871ba4d 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/SettingsWizardActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/SettingsWizardActivity.java
@@ -241,7 +241,7 @@ public boolean onPreferenceClick(final Preference preference) {
         protected abstract int getHeaderTitle();
 
         protected int getNextPageTitle() {
-            return R.string.next;
+            return R.string.next_step;
         }
 
         protected abstract int getPreferenceResource();
@@ -301,7 +301,7 @@ protected int getHeaderTitle() {
 
         @Override
         protected int getNextPageTitle() {
-            return R.string.next;
+            return R.string.next_step;
         }
 
         @Override
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/support/HomeActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/support/HomeActivity.java
index 70053146c9..77172a5a2b 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/support/HomeActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/support/HomeActivity.java
@@ -32,7 +32,6 @@
 import android.graphics.Canvas;
 import android.graphics.PorterDuff.Mode;
 import android.graphics.Rect;
-import android.graphics.drawable.Drawable;
 import android.net.Uri;
 import android.os.AsyncTask;
 import android.os.Build;
@@ -848,9 +847,10 @@ private void setupSlidingMenu() {
         mRightDrawerContainer.setScrollScale(mSlidingMenu.getBehindScrollScale());
         mSlidingMenu.setBehindCanvasTransformer(new ListenerCanvasTransformer(this));
         final Window window = getWindow();
-        final Drawable windowBackground = ThemeUtils.getWindowBackground(this);
-        ViewUtils.setBackground(mSlidingMenu.getContent(), windowBackground);
-        window.setBackgroundDrawable(new EmptyDrawable(windowBackground));
+        ThemeUtils.applyWindowBackground(this, mSlidingMenu.getContent(),
+                getCurrentThemeResourceId(), getThemeBackgroundOption(),
+                getCurrentThemeBackgroundAlpha());
+        window.setBackgroundDrawable(new EmptyDrawable());
     }
 
     private void showDataProfilingRequest() {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/support/UserProfileEditorActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/support/UserProfileEditorActivity.java
index 549383f315..a4ed7164c6 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/support/UserProfileEditorActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/support/UserProfileEditorActivity.java
@@ -138,7 +138,7 @@ protected void onCreate(final Bundle savedInstanceState) {
         setContentView(R.layout.activity_user_profile_editor);
         setSupportActionBar(mToolbar);
         ViewUtils.setBackground(mActionBarOverlay, ThemeUtils.getWindowContentOverlay(this));
-        ViewUtils.setBackground(mToolbar, ThemeUtils.getActionBarBackground(mToolbar.getContext(),
+        ViewUtils.setBackground(mToolbar, ThemeUtils.getSupportActionBarBackground(mToolbar.getContext(),
                 getCurrentThemeResourceId()));
         // setOverrideExitAniamtion(false);
         mEditName.addTextChangedListener(this);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/adapter/UserHashtagAutoCompleteAdapter.java b/twidere/src/main/java/org/mariotaku/twidere/adapter/UserHashtagAutoCompleteAdapter.java
index 446b8c0be7..4a9418a1d0 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/adapter/UserHashtagAutoCompleteAdapter.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/adapter/UserHashtagAutoCompleteAdapter.java
@@ -31,7 +31,6 @@
 import android.view.View;
 import android.widget.EditText;
 import android.widget.FilterQueryProvider;
-import android.widget.ImageView;
 import android.widget.TextView;
 
 import org.mariotaku.querybuilder.Columns.Column;
@@ -48,6 +47,7 @@
 import org.mariotaku.twidere.util.ParseUtils;
 import org.mariotaku.twidere.util.SharedPreferencesWrapper;
 import org.mariotaku.twidere.util.Utils;
+import org.mariotaku.twidere.view.ShapedImageView;
 
 import static org.mariotaku.twidere.util.UserColorNameUtils.getUserNickname;
 
@@ -70,6 +70,7 @@ public class UserHashtagAutoCompleteAdapter extends SimpleCursorAdapter implemen
     private final EditText mEditText;
 
     private final boolean mDisplayProfileImage;
+    private final int mProfileImageStyle;
 
     private int mProfileImageUrlIdx, mNameIdx, mScreenNameIdx, mUserIdIdx;
     private char mToken = '@';
@@ -89,6 +90,7 @@ public UserHashtagAutoCompleteAdapter(final Context context, final EditText view
         mProfileImageLoader = app.getMediaLoaderWrapper();
         mDatabase = app.getSQLiteDatabase();
         mDisplayProfileImage = mPreferences.getBoolean(KEY_DISPLAY_PROFILE_IMAGE, true);
+        mProfileImageStyle = Utils.getProfileImageStyle(mPreferences.getString(KEY_PROFILE_IMAGE_STYLE, null));
     }
 
     public UserHashtagAutoCompleteAdapter(final EditText view) {
@@ -100,7 +102,7 @@ public void bindView(final View view, final Context context, final Cursor cursor
         if (isCursorClosed()) return;
         final TextView text1 = (TextView) view.findViewById(android.R.id.text1);
         final TextView text2 = (TextView) view.findViewById(android.R.id.text2);
-        final ImageView icon = (ImageView) view.findViewById(android.R.id.icon);
+        final ShapedImageView icon = (ShapedImageView) view.findViewById(android.R.id.icon);
 
         // Clear images in prder to prevent images in recycled view shown.
         icon.setImageDrawable(null);
@@ -117,12 +119,13 @@ public void bindView(final View view, final Context context, final Cursor cursor
             if (mDisplayProfileImage) {
                 final String profileImageUrl = cursor.getString(mProfileImageUrlIdx);
                 mProfileImageLoader.displayProfileImage(icon, profileImageUrl);
+                icon.setStyle(mProfileImageStyle);
             } else {
                 mProfileImageLoader.cancelDisplayTask(icon);
-//                icon.setImageResource(R.drawable.ic_profile_image_default);
             }
             icon.clearColorFilter();
         } else {
+            icon.setStyle(mProfileImageStyle);
             icon.setImageResource(R.drawable.ic_action_hashtag);
             icon.setColorFilter(text1.getCurrentTextColor(), Mode.SRC_ATOP);
         }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/QuickMenuFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/QuickMenuFragment.java
index a01c59165e..6336070554 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/support/QuickMenuFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/support/QuickMenuFragment.java
@@ -127,7 +127,7 @@ public void onBaseViewCreated(final View view, final Bundle savedInstanceState)
         mSlidingUpPanel = (SlidingUpPanelLayout) view.findViewById(R.id.activities_drawer);
         mActivitiesConfigButton = (ImageButton) view.findViewById(R.id.activities_config_button);
         final View activitiesContainer = view.findViewById(R.id.activities_container);
-        ViewUtils.setBackground(activitiesContainer, ThemeUtils.getWindowBackground(getThemedContext()));
+//        ViewUtils.setBackground(activitiesContainer, ThemeUtils.getWindowBackground(getThemedContext()));
     }
 
     @Override
diff --git a/twidere/src/main/java/org/mariotaku/twidere/preference/ThemePreviewPreference.java b/twidere/src/main/java/org/mariotaku/twidere/preference/ThemePreviewPreference.java
index b88d88a6a8..fdfbc126c1 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/preference/ThemePreviewPreference.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/preference/ThemePreviewPreference.java
@@ -109,7 +109,8 @@ private static void setPreviewView(final Context context, final View view, final
         final int cardBackgroundColor = ThemeUtils.getCardBackgroundColor(context);
         final int accentColor = ThemeUtils.getUserAccentColor(context);
 
-        ViewUtils.setBackground(windowBackgroundView, ThemeUtils.getWindowBackground(context));
+        ThemeUtils.applyWindowBackground(context, windowBackgroundView, ThemeUtils.getThemeResource(context),
+                ThemeUtils.getThemeBackgroundOption(context), ThemeUtils.getUserThemeBackgroundAlpha(context));
 //        ViewAccessor.setBackground(windowContentOverlayView, ThemeUtils.getWindowContentOverlay(context));
         ViewUtils.setBackground(actionBarView, ThemeUtils.getActionBarBackground(context, themeRes, accentColor, true));
         ViewUtils.setBackground(actionBarOverlay, ThemeUtils.getWindowContentOverlay(context));
@@ -122,7 +123,6 @@ private static void setPreviewView(final Context context, final View view, final
         inflater.inflate(R.menu.menu_status, menuBar.getMenu());
         ThemeUtils.wrapMenuIcon(menuBar, MENU_GROUP_STATUS_SHARE);
         if (statusContentView != null) {
-            ViewUtils.setBackground(statusContentView, ThemeUtils.getWindowBackground(context));
 
             final View profileView = statusContentView.findViewById(R.id.profile_container);
             final ImageView profileImageView = (ImageView) statusContentView.findViewById(R.id.profile_image);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/KeyboardShortcutsHandler.java b/twidere/src/main/java/org/mariotaku/twidere/util/KeyboardShortcutsHandler.java
index 9b2e2acc19..cbd81ce111 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/KeyboardShortcutsHandler.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/KeyboardShortcutsHandler.java
@@ -45,8 +45,8 @@ public void unregisterOnSharedPreferenceChangeListener(OnSharedPreferenceChangeL
         sActionLabelMap.put("status.reply", R.string.reply);
         sActionLabelMap.put("status.retweet", R.string.retweet);
         sActionLabelMap.put("status.favorite", R.string.favorite);
-        sActionLabelMap.put("navigation.previous", R.string.previous);
-        sActionLabelMap.put("navigation.next", R.string.next);
+        sActionLabelMap.put("navigation.previous", R.string.previous_item);
+        sActionLabelMap.put("navigation.next", R.string.next_item);
         sActionLabelMap.put("navigation.refresh", R.string.refresh);
 
         sMetaNameMap.put(KeyEvent.META_FUNCTION_ON, "fn");
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java b/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
index 2827139822..a35f08d40d 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
@@ -92,14 +92,6 @@ private ThemeUtils() {
     }
 
 
-    public static void applyActionBarBackground(final ActionBar actionBar, final Context context, final int themeRes) {
-        if (actionBar == null || context == null) return;
-        actionBar.setBackgroundDrawable(getActionBarBackground(context, themeRes));
-        actionBar.setSplitBackgroundDrawable(getActionBarSplitBackground(context, themeRes));
-//        actionBar.setStackedBackgroundDrawable(getActionBarStackedBackground(context, themeRes));
-    }
-
-
     public static void applyActionBarBackground(final ActionBar actionBar, final Context context,
                                                 final int themeRes, final int accentColor, boolean outlineEnabled) {
         if (actionBar == null || context == null) return;
@@ -137,6 +129,62 @@ public static void applyBackground(final View view, final int color) {
         }
     }
 
+    public static void applyColorFilterToMenuIcon(Activity activity, Menu menu) {
+        final ActionBar actionBar = activity.getActionBar();
+        final Context context = actionBar != null ? actionBar.getThemedContext() : activity;
+        final int color = getThemeForegroundColor(context);
+        final int popupTheme = getActionBarPopupThemeRes(context);
+        final int popupColor = getThemeForegroundColor(context, popupTheme);
+        final int highlightColor = getUserAccentColor(activity);
+        applyColorFilterToMenuIcon(menu, color, popupColor, highlightColor, Mode.SRC_ATOP);
+    }
+
+    public static void applyColorFilterToMenuIcon(final Menu menu, final int color,
+                                                  final int highlightColor, final Mode mode,
+                                                  final int... excludedGroups) {
+        applyColorFilterToMenuIcon(menu, color, color, highlightColor, mode, excludedGroups);
+    }
+
+    public static void applyColorFilterToMenuIcon(final Menu menu, final int color, final int popupColor,
+                                                  final int highlightColor, final Mode mode,
+                                                  final int... excludedGroups) {
+        for (int i = 0, j = menu.size(); i < j; i++) {
+            final MenuItem item = menu.getItem(i);
+            final Drawable icon = item.getIcon();
+            final ContextMenuInfo info = item.getMenuInfo();
+            if (icon != null && !ArrayUtils.contains(excludedGroups, item.getGroupId())) {
+                icon.mutate();
+                if (info instanceof TwidereMenuInfo) {
+                    final TwidereMenuInfo sInfo = (TwidereMenuInfo) info;
+                    icon.setColorFilter(sInfo.isHighlight() ?
+                            sInfo.getHighlightColor(highlightColor) : color, mode);
+                } else {
+                    icon.setColorFilter(color, mode);
+                }
+            }
+            if (item.hasSubMenu()) {
+                // SubMenu item is always in popup
+                applyColorFilterToMenuIcon(item.getSubMenu(), popupColor, popupColor, highlightColor, mode, excludedGroups);
+            }
+        }
+    }
+
+    public static void applyParagraphSpacing(TextView textView, float multiplier) {
+        final SpannableStringBuilder builder = SpannableStringBuilder.valueOf(textView.getText());
+        int prevLineBreak, currLineBreak = 0;
+        for (int i = 0, j = builder.length(); i < j; i++) {
+            if (builder.charAt(i) == '\n') {
+                prevLineBreak = currLineBreak;
+                currLineBreak = i;
+                if (currLineBreak > 0) {
+                    builder.setSpan(new ParagraphSpacingSpan(multiplier), prevLineBreak, currLineBreak,
+                            Spanned.SPAN_INCLUSIVE_INCLUSIVE);
+                }
+            }
+        }
+        textView.setText(builder);
+    }
+
     public static void applySupportActionModeBackground(ActionMode mode, FragmentActivity activity,
                                                         int themeRes, int accentColor, boolean outlineEnabled) {
         // Very dirty implementation
@@ -176,288 +224,230 @@ public static void applyWindowBackground(Context context, Window window, int the
         }
     }
 
-    public static Drawable getCompatToolbarOverlay(Activity activity) {
-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) return null;
-        final View view = activity.getWindow().findViewById(android.support.v7.appcompat.R.id.decor_content_parent);
-        if (!(view instanceof ActionBarOverlayLayout)) return null;
-        try {
-            final Field field = ActionBarOverlayLayout.class.getDeclaredField("mWindowContentOverlay");
-            field.setAccessible(true);
-            return (Drawable) field.get(view);
-        } catch (Exception ignore) {
+    public static void applyWindowBackground(Context context, View window, int theme, String option, int alpha) {
+        if (isWindowFloating(context, theme)) return;
+        if (VALUE_THEME_BACKGROUND_TRANSPARENT.equals(option)) {
+            ViewUtils.setBackground(window, ThemeUtils.getWindowBackgroundApplyAlpha(context, alpha));
+        } else if (VALUE_THEME_BACKGROUND_SOLID.equals(option)) {
+            ViewUtils.setBackground(window, new ColorDrawable(isDarkTheme(theme) ? Color.BLACK : Color.WHITE));
+        } else {
+            ViewUtils.setBackground(window, ThemeUtils.getWindowBackground(context));
         }
-        return null;
     }
 
-    public static void initPagerIndicatorAsActionBarTab(FragmentActivity activity, TabPagerIndicator indicator) {
-        final float supportActionBarElevation = getSupportActionBarElevation(activity);
-        ViewCompat.setElevation(indicator, supportActionBarElevation);
-        if (!(activity instanceof IThemedActivity)) return;
-        final int themeRes = ((IThemedActivity) activity).getCurrentThemeResourceId();
-        final int themeColor = ((IThemedActivity) activity).getCurrentThemeColor();
-        final int contrastColor = ColorUtils.getContrastYIQ(themeColor, 192);
-        ViewUtils.setBackground(indicator, getActionBarStackedBackground(activity, themeRes, themeColor, true));
-        if (isDarkTheme(themeRes)) {
-            final int foregroundColor = getThemeForegroundColor(activity);
-            indicator.setIconColor(foregroundColor);
-            indicator.setLabelColor(foregroundColor);
-            indicator.setStripColor(themeColor);
-        } else {
-            indicator.setIconColor(contrastColor);
-            indicator.setLabelColor(contrastColor);
-            indicator.setStripColor(contrastColor);
+    public static View createView(final String name, final Context context,
+                                  final AttributeSet attrs) {
+        return createView(name, context, attrs, 0);
+    }
+
+    public static View createView(final String name, final Context context,
+                                  final AttributeSet attrs, final int tintColor) {
+        View view = null;
+        try {
+            view = newViewInstance(name, context, attrs);
+        } catch (final Exception e) {
+            // In this case we want to let the base class take a crack
+            // at it.
         }
-        indicator.updateAppearance();
+        for (final String prefix : sClassPrefixList) {
+            try {
+                view = newViewInstance(prefix + name, context, attrs);
+            } catch (final Exception e) {
+                // In this case we want to let the base class take a crack
+                // at it.
+            }
+        }
+        if (view != null) {
+            applyColorTintForView(view, tintColor);
+        }
+        return view;
     }
 
-    public static boolean isWindowFloating(Context context, int theme) {
-        final TypedArray a;
-        if (theme != 0) {
-            //noinspection ConstantConditions
-            a = context.obtainStyledAttributes(null, new int[]{android.R.attr.windowIsFloating}, 0, theme);
-        } else {
-            a = context.obtainStyledAttributes(new int[]{android.R.attr.windowIsFloating});
+    public static Drawable getSupportActionBarBackground(final Context context, final int themeRes) {
+        @SuppressWarnings("ConstantConditions")
+        final TypedArray array = context.obtainStyledAttributes(null, new int[]{android.R.attr.background},
+                R.attr.actionBarStyle, themeRes);
+        try {
+            return array.getDrawable(0);
+        } finally {
+            array.recycle();
         }
+    }
+
+    @Deprecated
+    public static Drawable getActionBarBackground(final Context context, final int themeRes) {
+        @SuppressWarnings("ConstantConditions")
+        final TypedArray array = context.obtainStyledAttributes(null, new int[]{android.R.attr.background},
+                android.R.attr.actionBarStyle, themeRes);
         try {
-            return a.getBoolean(0, false);
+            return array.getDrawable(0);
         } finally {
-            a.recycle();
+            array.recycle();
         }
     }
 
-    public static void resetCheatSheet(ActionMenuView menuView) {
-        final OnLongClickListener listener = new OnLongClickListener() {
-            @Override
-            public boolean onLongClick(View v) {
-                if (((ActionMenuItemView) v).hasText()) return false;
-                final MenuItem menuItem = ((ActionMenuItemView) v).getItemData();
-                Utils.showMenuItemToast(v, menuItem.getTitle(), true);
-                return true;
-            }
-        };
-        for (int i = 0, j = menuView.getChildCount(); i < j; i++) {
-            final View child = menuView.getChildAt(i);
-            if (!(child instanceof ActionMenuItemView)) continue;
-            final ActionMenuItemView itemView = (ActionMenuItemView) child;
-            final MenuItem menuItem = itemView.getItemData();
-            if (menuItem.hasSubMenu()) continue;
-            itemView.setOnLongClickListener(listener);
+    @NonNull
+    public static Drawable getActionBarBackground(final Context context, final int themeRes,
+                                                  final int accentColor, boolean outlineEnabled) {
+        final int actionBarColor;
+        if (isDarkTheme(themeRes)) {
+            actionBarColor = context.getResources().getColor(R.color.background_color_action_bar_dark);
+        } else {
+            actionBarColor = accentColor;
         }
+        final ColorDrawable d = new ActionBarColorDrawable(actionBarColor, outlineEnabled);
+        return applyActionBarDrawable(context, d, isTransparentBackground(context));
     }
 
-    @SuppressLint("NewApi")
-    public static void setActionBarOverflowColor(Toolbar toolbar, int itemColor) {
-        if (toolbar == null) return;
-        final ActionMenuView actionMenuView = ViewUtils.findViewByType(toolbar, ActionMenuView.class);
-        if (actionMenuView == null) return;
-        View overflowView = null;
-        for (int i = 0, j = actionMenuView.getChildCount(); i < j; i++) {
-            final View child = actionMenuView.getChildAt(i);
-            final ActionMenuView.LayoutParams lp = (ActionMenuView.LayoutParams) child.getLayoutParams();
-            if (lp.isOverflowButton) {
-                overflowView = child;
-                break;
-            }
+    public static Context getActionBarContext(final Context context) {
+        @SuppressLint("InlinedApi")
+        final TypedArray a = context.obtainStyledAttributes(new int[]{R.attr.actionBarTheme,
+                R.attr.actionBarWidgetTheme, android.R.attr.actionBarTheme,
+                android.R.attr.actionBarWidgetTheme});
+        final int resId;
+        if (a.hasValue(0) || a.hasValue(1)) {
+            resId = a.hasValue(0) ? a.getResourceId(0, 0) : a.getResourceId(1, 0);
+        } else {
+            resId = a.hasValue(2) ? a.getResourceId(2, 0) : a.getResourceId(3, 0);
         }
-        if (!(overflowView instanceof ImageView)) return;
-        final Drawable drawable = ((ImageView) overflowView).getDrawable();
-        if (drawable == null) return;
-        drawable.setColorFilter(itemColor, Mode.SRC_ATOP);
+        a.recycle();
+        if (resId == 0) return context;
+        return new ContextThemeWrapper(context, resId);
     }
 
-    public static void setCompatToolbarOverlay(Activity activity, Drawable background) {
-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) return;
-        final View view = activity.getWindow().findViewById(android.support.v7.appcompat.R.id.decor_content_parent);
-        if (!(view instanceof ActionBarOverlayLayout)) return;
+    public static float getActionBarElevation(final Context context) {
+        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) return 0;
+        @SuppressLint("InlinedApi")
+        @SuppressWarnings("ConstantConditions")
+        final TypedArray a = context.obtainStyledAttributes(null, new int[]{android.R.attr.elevation},
+                android.R.attr.actionBarStyle, 0);
         try {
-            final Field field = ActionBarOverlayLayout.class.getDeclaredField("mWindowContentOverlay");
-            field.setAccessible(true);
-            field.set(view, background);
-        } catch (Exception ignore) {
+            return a.getDimension(0, 0);
+        } finally {
+            a.recycle();
         }
     }
 
-    public static void wrapMenuIcon(@NonNull Menu menu, int itemColor, int subItemColor, int... excludeGroups) {
-        for (int i = 0, j = menu.size(); i < j; i++) {
-            final MenuItem item = menu.getItem(i);
-            wrapMenuItemIcon(item, itemColor, excludeGroups);
-            if (item.hasSubMenu()) {
-                wrapMenuIcon(item.getSubMenu(), subItemColor, subItemColor, excludeGroups);
-            }
+    public static Drawable getActionBarHomeAsUpIndicator(android.support.v7.app.ActionBar actionBar) {
+        final Context context = actionBar.getThemedContext();
+        @SuppressWarnings("ConstantConditions")
+        final TypedArray a = context.obtainStyledAttributes(null, R.styleable.ActionBar, R.attr.actionBarStyle, 0);
+        try {
+            return a.getDrawable(R.styleable.ActionBar_homeAsUpIndicator);
+        } finally {
+            a.recycle();
         }
     }
 
-    public static void wrapMenuItemIcon(@NonNull MenuItem item, int itemColor, int... excludeGroups) {
-        if (ArrayUtils.contains(excludeGroups, item.getGroupId())) return;
-        final Drawable icon = item.getIcon();
-        if (icon == null) return;
-        if (icon instanceof ActionIconDrawable) {
-            ((ActionIconDrawable) icon).setDefaultColor(itemColor);
-            item.setIcon(icon);
-            return;
+    public static int getActionBarPopupThemeRes(final Context context) {
+        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) return 0;
+        @SuppressLint("InlinedApi")
+        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.actionBarPopupTheme});
+        try {
+            return a.getResourceId(0, 0);
+        } finally {
+            a.recycle();
         }
-        icon.mutate();
-        final Drawable.Callback callback = icon.getCallback();
-        final ActionIconDrawable newIcon = new ActionIconDrawable(icon, itemColor);
-        newIcon.setCallback(callback);
-        item.setIcon(newIcon);
     }
 
+    public static Drawable getActionBarSplitBackground(final Context context, final int themeRes) {
+        @SuppressWarnings("ConstantConditions")
+        final TypedArray a = context.obtainStyledAttributes(null, new int[]{android.R.attr.backgroundSplit},
+                android.R.attr.actionBarStyle, themeRes);
+        final Drawable d = a.getDrawable(0);
+        a.recycle();
+        return applyActionBarDrawable(context, d, isTransparentBackground(context));
+    }
 
-    public static void wrapMenuIcon(ActionMenuView view, int... excludeGroups) {
-        final Resources resources = view.getResources();
-        final int colorDark = resources.getColor(R.color.action_icon_dark);
-        final int colorLight = resources.getColor(R.color.action_icon_light);
-        wrapMenuIcon(view, colorDark, colorLight, excludeGroups);
+    @NonNull
+    public static Drawable getActionBarStackedBackground(final Context context, final int themeRes,
+                                                         final int accentColor, boolean outlineEnabled) {
+        final int actionBarColor;
+        if (isDarkTheme(themeRes)) {
+            actionBarColor = context.getResources().getColor(R.color.background_color_action_bar_dark);
+        } else {
+            actionBarColor = accentColor;
+        }
+        final ColorDrawable d = new ActionBarColorDrawable(actionBarColor, outlineEnabled);
+        return applyActionBarDrawable(context, d, isTransparentBackground(context));
     }
 
-    public static void wrapMenuIcon(ActionMenuView view, int colorDark, int colorLight, int... excludeGroups) {
-        final int itemBackgroundColor = ThemeUtils.getThemeBackgroundColor(view.getContext());
-        final int popupItemBackgroundColor = ThemeUtils.getThemeBackgroundColor(view.getContext(), view.getPopupTheme());
-        final int itemColor = ColorUtils.getContrastYIQ(itemBackgroundColor, colorDark, colorLight);
-        final int popupItemColor = ColorUtils.getContrastYIQ(popupItemBackgroundColor, colorDark, colorLight);
-        final Menu menu = view.getMenu();
-        final int childCount = view.getChildCount();
-        for (int i = 0, j = menu.size(), k = 0; i < j; i++) {
-            final MenuItem item = menu.getItem(i);
-            wrapMenuItemIcon(item, itemColor, excludeGroups);
-            if (item.hasSubMenu()) {
-                wrapMenuIcon(menu, popupItemColor, popupItemColor, excludeGroups);
-            }
-            if (item.isVisible()) {
-                k++;
-            }
-        }
+    public static int getCardBackgroundColor(final Context context) {
+        final TypedArray a = context.obtainStyledAttributes(new int[]{R.attr.cardItemBackgroundColor});
+        final int color = a.getColor(0, Color.TRANSPARENT);
+        a.recycle();
+        final int themeAlpha = getThemeAlpha(context);
+        return themeAlpha << 24 | (0x00FFFFFF & color);
     }
 
-    public static void wrapToolbarMenuIcon(Toolbar view, int itemColor, int popupItemColor, int... excludeGroups) {
-        final Menu menu = view.getMenu();
-        final int childCount = view.getChildCount();
-        for (int i = 0, j = menu.size(), k = 0; i < j; i++) {
-            final MenuItem item = menu.getItem(i);
-            wrapMenuItemIcon(item, itemColor, excludeGroups);
-            if (item.hasSubMenu()) {
-                wrapMenuIcon(menu, popupItemColor, popupItemColor, excludeGroups);
-            }
-            if (item.isVisible()) {
-                k++;
-            }
+    public static Drawable getCompatToolbarOverlay(Activity activity) {
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) return null;
+        final View view = activity.getWindow().findViewById(android.support.v7.appcompat.R.id.decor_content_parent);
+        if (!(view instanceof ActionBarOverlayLayout)) return null;
+        try {
+            final Field field = ActionBarOverlayLayout.class.getDeclaredField("mWindowContentOverlay");
+            field.setAccessible(true);
+            return (Drawable) field.get(view);
+        } catch (Exception ignore) {
         }
+        return null;
     }
 
+    public static int getComposeThemeResource(final Context context) {
+        return getComposeThemeResource(getThemeNameOption(context));
+    }
 
-    public static void wrapMenuIcon(Context context, Menu menu, int... excludeGroups) {
-        final int backgroundColor = ThemeUtils.getThemeBackgroundColor(context);
-        wrapMenuIcon(context, backgroundColor, backgroundColor, menu, excludeGroups);
+    public static int getComposeThemeResource(final String name) {
+        if (VALUE_THEME_NAME_DARK.equals(name)) return R.style.Theme_Twidere_Dark_Compose;
+        return R.style.Theme_Twidere_Light_Compose;
     }
 
-    public static void wrapMenuIcon(Context context, int backgroundColor, int popupBackgroundColor,
-                                    Menu menu, int... excludeGroups) {
-        final Resources resources = context.getResources();
-        final int colorDark = resources.getColor(R.color.action_icon_dark);
-        final int colorLight = resources.getColor(R.color.action_icon_light);
-        final int itemColor = ColorUtils.getContrastYIQ(backgroundColor, colorDark, colorLight);
-        final int popupItemColor = ColorUtils.getContrastYIQ(popupBackgroundColor, colorDark, colorLight);
-        for (int i = 0, j = menu.size(), k = 0; i < j; i++) {
-            final MenuItem item = menu.getItem(i);
-            wrapMenuItemIcon(item, itemColor, excludeGroups);
-            if (item.hasSubMenu()) {
-                wrapMenuIcon(menu, popupItemColor, popupItemColor, excludeGroups);
-            }
-            if (item.isVisible()) {
-                k++;
-            }
-        }
+    public static int getDialogThemeResource(final Context context) {
+        return getDialogThemeResource(getThemeNameOption(context));
     }
 
-    public static void applyThemeAlphaToDrawable(final Context context, final Drawable d) {
-        if (context == null || d == null) return;
-        d.setAlpha(getThemeAlpha(getThemeResource(context)));
+    public static int getDialogThemeResource(final String name) {
+        if (VALUE_THEME_NAME_DARK.equals(name)) return R.style.Theme_Twidere_Dark_Dialog;
+        return R.style.Theme_Twidere_Light_Dialog;
     }
 
-    public static void applyThemeBackgroundAlphaToDrawable(final Context context, final Drawable d) {
-        if (context == null || d == null) return;
-        d.setAlpha(getUserThemeBackgroundAlpha(context));
+    public static Context getDialogThemedContext(final Context context) {
+        return new ContextThemeWrapper(context, getDialogThemeResource(context));
     }
 
+    public static int getDialogWhenLargeThemeResource(final Context context) {
+        return getDialogWhenLargeThemeResource(getThemeNameOption(context));
+    }
 
-    public static int getActionBarPopupThemeRes(final Context context) {
-        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) return 0;
-        @SuppressLint("InlinedApi")
-        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.actionBarPopupTheme});
-        try {
-            return a.getResourceId(0, 0);
-        } finally {
-            a.recycle();
+    public static int getDialogWhenLargeThemeResource(final String name) {
+        if (VALUE_THEME_NAME_DARK.equals(name)) {
+            return R.style.Theme_Twidere_Dark_DialogWhenLarge;
         }
+        return R.style.Theme_Twidere_Light_DialogWhenLarge;
     }
 
-    public static void applyColorFilterToMenuIcon(Activity activity, Menu menu) {
-        final ActionBar actionBar = activity.getActionBar();
-        final Context context = actionBar != null ? actionBar.getThemedContext() : activity;
-        final int color = getThemeForegroundColor(context);
-        final int popupTheme = getActionBarPopupThemeRes(context);
-        final int popupColor = getThemeForegroundColor(context, popupTheme);
-        final int highlightColor = getUserAccentColor(activity);
-        applyColorFilterToMenuIcon(menu, color, popupColor, highlightColor, Mode.SRC_ATOP);
+    public static int getDrawerThemeResource(final Context context) {
+        return getDrawerThemeResource(getThemeResource(context));
     }
 
-    public static void applyColorFilterToMenuIcon(final Menu menu, final int color,
-                                                  final int highlightColor, final Mode mode,
-                                                  final int... excludedGroups) {
-        applyColorFilterToMenuIcon(menu, color, color, highlightColor, mode, excludedGroups);
+    public static int getDrawerThemeResource(final int themeRes) {
+        return R.style.Theme_Twidere_Drawer_Dark;
     }
 
-    public static void applyColorFilterToMenuIcon(final Menu menu, final int color, final int popupColor,
-                                                  final int highlightColor, final Mode mode,
-                                                  final int... excludedGroups) {
-        for (int i = 0, j = menu.size(); i < j; i++) {
-            final MenuItem item = menu.getItem(i);
-            final Drawable icon = item.getIcon();
-            final ContextMenuInfo info = item.getMenuInfo();
-            if (icon != null && !ArrayUtils.contains(excludedGroups, item.getGroupId())) {
-                icon.mutate();
-                if (info instanceof TwidereMenuInfo) {
-                    final TwidereMenuInfo sInfo = (TwidereMenuInfo) info;
-                    icon.setColorFilter(sInfo.isHighlight() ?
-                            sInfo.getHighlightColor(highlightColor) : color, mode);
-                } else {
-                    icon.setColorFilter(color, mode);
-                }
-            }
-            if (item.hasSubMenu()) {
-                // SubMenu item is always in popup
-                applyColorFilterToMenuIcon(item.getSubMenu(), popupColor, popupColor, highlightColor, mode, excludedGroups);
-            }
+    public static Drawable getImageHighlightDrawable(final Context context) {
+        final Drawable d = getSelectableItemBackgroundDrawable(context);
+        if (d != null) {
+            d.setAlpha(0x80);
         }
+        return d;
     }
 
-    public static View createView(final String name, final Context context,
-                                  final AttributeSet attrs) {
-        return createView(name, context, attrs, 0);
-    }
-
-    public static View createView(final String name, final Context context,
-                                  final AttributeSet attrs, final int tintColor) {
-        View view = null;
-        try {
-            view = newViewInstance(name, context, attrs);
-        } catch (final Exception e) {
-            // In this case we want to let the base class take a crack
-            // at it.
-        }
-        for (final String prefix : sClassPrefixList) {
-            try {
-                view = newViewInstance(prefix + name, context, attrs);
-            } catch (final Exception e) {
-                // In this case we want to let the base class take a crack
-                // at it.
-            }
-        }
-        if (view != null) {
-            applyColorTintForView(view, tintColor);
-        }
-        return view;
+    public static int getNoDisplayThemeResource(final Context context) {
+        if (context == null) return R.style.Theme_Twidere_Dark_NoDisplay;
+        final SharedPreferencesWrapper pref = getSharedPreferencesWrapper(context);
+        final String theme = pref.getString(KEY_THEME, VALUE_THEME_NAME_TWIDERE);
+        if (VALUE_THEME_NAME_DARK.equals(theme)) return R.style.Theme_Twidere_Dark_NoDisplay;
+        return R.style.Theme_Twidere_Light_NoDisplay;
     }
 
     public static int getOptimalLinkColor(int linkColor, int color) {
@@ -483,40 +473,33 @@ public static int getQuickSearchBarThemeResource(final String name) {
         return R.style.Theme_Twidere_Light_QuickSearchBar;
     }
 
-    private static void applyColorTintForView(View view, int tintColor) {
-        if (view instanceof IThemedView) {
-            final ColorStateList tintList = ColorStateList.valueOf(tintColor);
-            ((IThemedView) view).setThemeTintColor(tintList);
-        } else if (view instanceof ProgressBar) {
-            final ColorStateList tintList = ColorStateList.valueOf(tintColor);
-            final ProgressBar progressBar = (ProgressBar) view;
-            ViewUtils.setProgressTintList(progressBar, tintList);
-            ViewUtils.setProgressBackgroundTintList(progressBar, tintList);
-            ViewUtils.setIndeterminateTintList(progressBar, tintList);
-        } else if (view instanceof CompoundButton) {
-            final ColorStateList tintList = ColorStateList.valueOf(tintColor);
-            final CompoundButton compoundButton = (CompoundButton) view;
-            ViewUtils.setButtonTintList(compoundButton, tintList);
-        }
-        // TODO support TintableBackgroundView
+    public static Resources getResources(final Context context) {
+        return context.getResources();
     }
 
-    public static float getSupportActionBarElevation(final Context context) {
-        @SuppressWarnings("ConstantConditions")
-        final TypedArray a = context.obtainStyledAttributes(null, new int[]{R.attr.elevation}, R.attr.actionBarStyle, 0);
+    public static Drawable getSelectableItemBackgroundDrawable(final Context context) {
+        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.selectableItemBackground});
         try {
-            return a.getDimension(0, 0);
+            return a.getDrawable(0);
         } finally {
             a.recycle();
         }
     }
 
-    public static float getActionBarElevation(final Context context) {
-        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) return 0;
-        @SuppressLint("InlinedApi")
+    public static int getSettingsThemeResource(final Context context) {
+        return getSettingsThemeResource(getThemeNameOption(context));
+    }
+
+    public static int getSettingsThemeResource(final String name) {
+        if (VALUE_THEME_NAME_TWIDERE.equals(name) || VALUE_THEME_NAME_LIGHT.equals(name))
+            return R.style.Theme_Twidere_Settings_Light_DarkActionBar;
+        else if (VALUE_THEME_NAME_DARK.equals(name)) return R.style.Theme_Twidere_Settings_Dark;
+        return R.style.Theme_Twidere_Settings_Light_DarkActionBar;
+    }
+
+    public static float getSupportActionBarElevation(final Context context) {
         @SuppressWarnings("ConstantConditions")
-        final TypedArray a = context.obtainStyledAttributes(null, new int[]{android.R.attr.elevation},
-                android.R.attr.actionBarStyle, 0);
+        final TypedArray a = context.obtainStyledAttributes(null, new int[]{R.attr.elevation}, R.attr.actionBarStyle, 0);
         try {
             return a.getDimension(0, 0);
         } finally {
@@ -524,199 +507,65 @@ public static float getActionBarElevation(final Context context) {
         }
     }
 
+    public static int getTextAppearanceLarge(final Context context) {
+        // final Context wrapped = getThemedContext(context,
+        // getResources(context));
+        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.textAppearanceLarge});
+        final int textAppearance = a.getResourceId(0, android.R.style.TextAppearance_Holo_Large);
+        a.recycle();
+        return textAppearance;
+    }
 
-    @Deprecated
-    public static Drawable getActionBarBackground(final Context context, final int themeRes) {
-        @SuppressWarnings("ConstantConditions")
-        final TypedArray a1 = context.obtainStyledAttributes(null, new int[]{android.R.attr.background},
-                R.attr.actionBarStyle, themeRes);
+    public static int getTextColorPrimary(final Context context) {
+        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.textColorPrimary});
         try {
-            if (a1.hasValue(0)) {
-                return applyActionBarDrawable(context, a1.getDrawable(0), isTransparentBackground(context));
-            }
+            return a.getColor(0, Color.TRANSPARENT);
         } finally {
-            a1.recycle();
+            a.recycle();
         }
+    }
+
+    public static int getTextColorSecondary(final Context context) {
         @SuppressWarnings("ConstantConditions")
-        final TypedArray a2 = context.obtainStyledAttributes(null, new int[]{android.R.attr.background},
-                android.R.attr.actionBarStyle, themeRes);
+        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.textColorSecondary});
         try {
-            if (a2.hasValue(0)) {
-                return applyActionBarDrawable(context, a2.getDrawable(0), isTransparentBackground(context));
-            }
+            return a.getColor(0, Color.TRANSPARENT);
         } finally {
-            a2.recycle();
+            a.recycle();
         }
-        return null;
     }
 
-    @NonNull
-    public static Drawable getActionBarBackground(final Context context, final int themeRes,
-                                                  final int accentColor, boolean outlineEnabled) {
-        final int actionBarColor;
-        if (isDarkTheme(themeRes)) {
-            actionBarColor = context.getResources().getColor(R.color.background_color_action_bar_dark);
-        } else {
-            actionBarColor = accentColor;
-        }
-        final ColorDrawable d = new ActionBarColorDrawable(actionBarColor, outlineEnabled);
-        return applyActionBarDrawable(context, d, isTransparentBackground(context));
-    }
-
-    @NonNull
-    public static Drawable getActionBarStackedBackground(final Context context, final int themeRes,
-                                                         final int accentColor, boolean outlineEnabled) {
-        final int actionBarColor;
-        if (isDarkTheme(themeRes)) {
-            actionBarColor = context.getResources().getColor(R.color.background_color_action_bar_dark);
-        } else {
-            actionBarColor = accentColor;
-        }
-        final ColorDrawable d = new ActionBarColorDrawable(actionBarColor, outlineEnabled);
-        return applyActionBarDrawable(context, d, isTransparentBackground(context));
-    }
-
-    public static Context getActionBarContext(final Context context) {
-        @SuppressLint("InlinedApi")
-        final TypedArray a = context.obtainStyledAttributes(new int[]{R.attr.actionBarTheme,
-                R.attr.actionBarWidgetTheme, android.R.attr.actionBarTheme,
-                android.R.attr.actionBarWidgetTheme});
-        final int resId;
-        if (a.hasValue(0) || a.hasValue(1)) {
-            resId = a.hasValue(0) ? a.getResourceId(0, 0) : a.getResourceId(1, 0);
-        } else {
-            resId = a.hasValue(2) ? a.getResourceId(2, 0) : a.getResourceId(3, 0);
-        }
-        a.recycle();
-        if (resId == 0) return context;
-        return new ContextThemeWrapper(context, resId);
-    }
-
-
-    public static Drawable getActionBarSplitBackground(final Context context, final int themeRes) {
-        @SuppressWarnings("ConstantConditions")
-        final TypedArray a = context.obtainStyledAttributes(null, new int[]{android.R.attr.backgroundSplit},
-                android.R.attr.actionBarStyle, themeRes);
-        final Drawable d = a.getDrawable(0);
-        a.recycle();
-        return applyActionBarDrawable(context, d, isTransparentBackground(context));
-    }
-
-    public static int getCardBackgroundColor(final Context context) {
-        final TypedArray a = context.obtainStyledAttributes(new int[]{R.attr.cardItemBackgroundColor});
-        final int color = a.getColor(0, Color.TRANSPARENT);
-        a.recycle();
-        final int themeAlpha = getThemeAlpha(context);
-        return themeAlpha << 24 | (0x00FFFFFF & color);
-    }
-
-    public static int getComposeThemeResource(final Context context) {
-        return getComposeThemeResource(getThemeNameOption(context));
-    }
-
-    public static int getComposeThemeResource(final String name) {
-        if (VALUE_THEME_NAME_DARK.equals(name)) return R.style.Theme_Twidere_Dark_Compose;
-        return R.style.Theme_Twidere_Light_Compose;
-    }
-
-    public static Context getDialogThemedContext(final Context context) {
-        return new ContextThemeWrapper(context, getDialogThemeResource(context));
-    }
-
-    public static int getDialogThemeResource(final Context context) {
-        return getDialogThemeResource(getThemeNameOption(context));
-    }
-
-    public static int getDialogThemeResource(final String name) {
-        if (VALUE_THEME_NAME_DARK.equals(name)) return R.style.Theme_Twidere_Dark_Dialog;
-        return R.style.Theme_Twidere_Light_Dialog;
-    }
-
-    public static int getDrawerThemeResource(final Context context) {
-        return getDrawerThemeResource(getThemeResource(context));
-    }
-
-    public static int getDrawerThemeResource(final int themeRes) {
-        return R.style.Theme_Twidere_Drawer_Dark;
-    }
-
-    public static Drawable getImageHighlightDrawable(final Context context) {
-        final Drawable d = getSelectableItemBackgroundDrawable(context);
-        if (d != null) {
-            d.setAlpha(0x80);
-        }
-        return d;
-    }
-
-    public static int getNoDisplayThemeResource(final Context context) {
-        if (context == null) return R.style.Theme_Twidere_Dark_NoDisplay;
-        final SharedPreferencesWrapper pref = getSharedPreferencesWrapper(context);
-        final String theme = pref.getString(KEY_THEME, VALUE_THEME_NAME_TWIDERE);
-        if (VALUE_THEME_NAME_DARK.equals(theme)) return R.style.Theme_Twidere_Dark_NoDisplay;
-        return R.style.Theme_Twidere_Light_NoDisplay;
+    public static int getThemeAlpha(final Context context) {
+        return getThemeAlpha(getThemeResource(context));
     }
 
-    public static Resources getResources(final Context context) {
-        return context.getResources();
+    public static int getThemeAlpha(final int themeRes) {
+        return 0xff;
     }
 
-
-    public static Drawable getSelectableItemBackgroundDrawable(final Context context) {
-        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.selectableItemBackground});
+    public static int getThemeBackgroundColor(final Context context) {
+        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.colorBackground});
         try {
-            return a.getDrawable(0);
+            return a.getColor(0, 0);
         } finally {
             a.recycle();
         }
     }
 
-    public static int getSettingsThemeResource(final Context context) {
-        return getSettingsThemeResource(getThemeNameOption(context));
-    }
-
-    public static int getSettingsThemeResource(final String name) {
-        if (VALUE_THEME_NAME_TWIDERE.equals(name) || VALUE_THEME_NAME_LIGHT.equals(name))
-            return R.style.Theme_Twidere_Settings_Light_DarkActionBar;
-        else if (VALUE_THEME_NAME_DARK.equals(name)) return R.style.Theme_Twidere_Settings_Dark;
-        return R.style.Theme_Twidere_Settings_Light_DarkActionBar;
-    }
-
-    public static int getTextAppearanceLarge(final Context context) {
-        // final Context wrapped = getThemedContext(context,
-        // getResources(context));
-        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.textAppearanceLarge});
-        final int textAppearance = a.getResourceId(0, android.R.style.TextAppearance_Holo_Large);
-        a.recycle();
-        return textAppearance;
-    }
-
-    public static int getTextColorPrimary(final Context context) {
-        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.textColorPrimary});
-        try {
-            return a.getColor(0, Color.TRANSPARENT);
-        } finally {
-            a.recycle();
+    public static int getThemeBackgroundColor(final Context context, int themeRes) {
+        if (themeRes == 0) {
+            return getThemeBackgroundColor(context);
         }
-    }
-
-    public static int getTextColorSecondary(final Context context) {
         @SuppressWarnings("ConstantConditions")
-        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.textColorSecondary});
+        final TypedArray a = context.obtainStyledAttributes(null, new int[]{android.R.attr.colorBackground},
+                0, themeRes);
         try {
-            return a.getColor(0, Color.TRANSPARENT);
+            return a.getColor(0, 0);
         } finally {
             a.recycle();
         }
     }
 
-    public static int getThemeAlpha(final Context context) {
-        return getThemeAlpha(getThemeResource(context));
-    }
-
-    public static int getThemeAlpha(final int themeRes) {
-        return 0xff;
-    }
-
     public static String getThemeBackgroundOption(final Context context) {
         if (context == null) return VALUE_THEME_BACKGROUND_DEFAULT;
         final SharedPreferencesWrapper pref = getSharedPreferencesWrapper(context);
@@ -733,12 +582,17 @@ public static int getThemeColor(final Context context) {
         }
     }
 
-    public static Context getThemedContext(final Context context) {
-        return context;
-    }
-
-    public static Context getThemedContext(final Context context, final Resources res) {
-        return context;
+    public static int getThemeColor(Context context, int themeResourceId) {
+        final Context appContext = context.getApplicationContext();
+        final Resources res = appContext.getResources();
+        @SuppressWarnings("ConstantConditions")
+        final TypedArray a = appContext.obtainStyledAttributes(null,
+                new int[]{android.R.attr.colorActivatedHighlight}, 0, themeResourceId);
+        try {
+            return a.getColor(0, res.getColor(R.color.material_light_blue));
+        } finally {
+            a.recycle();
+        }
     }
 
     public static String getThemeFontFamily(final Context context) {
@@ -749,29 +603,6 @@ public static String getThemeFontFamily(final Context context) {
         return VALUE_THEME_FONT_FAMILY_REGULAR;
     }
 
-    public static int getThemeBackgroundColor(final Context context) {
-        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.colorBackground});
-        try {
-            return a.getColor(0, 0);
-        } finally {
-            a.recycle();
-        }
-    }
-
-    public static int getThemeBackgroundColor(final Context context, int themeRes) {
-        if (themeRes == 0) {
-            return getThemeBackgroundColor(context);
-        }
-        @SuppressWarnings("ConstantConditions")
-        final TypedArray a = context.obtainStyledAttributes(null, new int[]{android.R.attr.colorBackground},
-                0, themeRes);
-        try {
-            return a.getColor(0, 0);
-        } finally {
-            a.recycle();
-        }
-    }
-
     public static int getThemeForegroundColor(final Context context) {
         return getThemeForegroundColor(context, 0);
     }
@@ -786,14 +617,6 @@ public static int getThemeForegroundColor(final Context context, int theme) {
         }
     }
 
-
-    @NonNull
-    private static SharedPreferencesWrapper getSharedPreferencesWrapper(Context context) {
-        final Context appContext = context.getApplicationContext();
-        return SharedPreferencesWrapper.getInstance(appContext, SHARED_PREFERENCES_NAME,
-                Context.MODE_PRIVATE);
-    }
-
     public static String getThemeNameOption(final Context context) {
         if (context == null) return VALUE_THEME_NAME_TWIDERE;
         final SharedPreferencesWrapper pref = getSharedPreferencesWrapper(context);
@@ -804,10 +627,6 @@ public static int getThemeResource(final Context context) {
         return getThemeResource(getThemeNameOption(context));
     }
 
-    public static int getDialogWhenLargeThemeResource(final Context context) {
-        return getDialogWhenLargeThemeResource(getThemeNameOption(context));
-    }
-
     public static int getThemeResource(final String name) {
         if (VALUE_THEME_NAME_DARK.equals(name)) {
             return R.style.Theme_Twidere_Dark;
@@ -815,11 +634,12 @@ public static int getThemeResource(final String name) {
         return R.style.Theme_Twidere_Light;
     }
 
-    public static int getDialogWhenLargeThemeResource(final String name) {
-        if (VALUE_THEME_NAME_DARK.equals(name)) {
-            return R.style.Theme_Twidere_Dark_DialogWhenLarge;
-        }
-        return R.style.Theme_Twidere_Light_DialogWhenLarge;
+    public static Context getThemedContext(final Context context) {
+        return context;
+    }
+
+    public static Context getThemedContext(final Context context, final Resources res) {
+        return context;
     }
 
     public static int getTitleTextAppearance(final Context context) {
@@ -831,6 +651,14 @@ public static int getTitleTextAppearance(final Context context) {
         return textAppearance;
     }
 
+    public static int getUserAccentColor(final Context context) {
+        if (context == null) return Color.TRANSPARENT;
+        final SharedPreferencesWrapper pref = getSharedPreferencesWrapper(context);
+        final Resources res = context.getResources();
+        final int def = res.getColor(R.color.branding_color);
+        return pref.getInt(KEY_THEME_COLOR, def);
+    }
+
     public static int getUserHighlightColor(final Context context) {
         final int color = getUserLinkTextColor(context);
         final int red = Color.red(color), green = Color.green(color), blue = Color.blue(color);
@@ -850,21 +678,12 @@ public static int getUserLinkTextColor(final Context context) {
         return Color.HSVToColor(hsv);
     }
 
-
     public static int getUserThemeBackgroundAlpha(final Context context) {
         if (context == null) return DEFAULT_THEME_BACKGROUND_ALPHA;
         final SharedPreferencesWrapper pref = getSharedPreferencesWrapper(context);
         return pref.getInt(KEY_THEME_BACKGROUND_ALPHA, DEFAULT_THEME_BACKGROUND_ALPHA);
     }
 
-    public static int getUserAccentColor(final Context context) {
-        if (context == null) return Color.TRANSPARENT;
-        final SharedPreferencesWrapper pref = getSharedPreferencesWrapper(context);
-        final Resources res = context.getResources();
-        final int def = res.getColor(R.color.branding_color);
-        return pref.getInt(KEY_THEME_COLOR, def);
-    }
-
     public static Typeface getUserTypeface(final Context context, final Typeface defTypeface) {
         if (context == null || Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN)
             return Typeface.DEFAULT;
@@ -879,42 +698,75 @@ public static int getViewerThemeResource(final Context context) {
         return R.style.Theme_Twidere_Viewer;
     }
 
-    public static Drawable getWindowBackground(final Context context) {
+    public static Drawable getWindowBackgroundApplyAlpha(final Context context, final int alpha) {
         final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.windowBackground});
         final Drawable d = a.getDrawable(0);
         a.recycle();
-        if (isTransparentBackground(context)) {
-            applyThemeBackgroundAlphaToDrawable(context, d);
+        if (d != null) {
+            d.setAlpha(alpha);
         }
         return d;
     }
 
-    public static Drawable getWindowBackground(final Context context, int theme) {
+    public static Drawable getWindowBackgroundFromTheme(final Context context, int theme) {
         @SuppressWarnings("ConstantConditions")
         final TypedArray a = context.obtainStyledAttributes(null, new int[]{android.R.attr.windowBackground}, 0, theme);
-        final Drawable d = a.getDrawable(0);
-        a.recycle();
-        if (isTransparentBackground(context)) {
-            applyThemeBackgroundAlphaToDrawable(context, d);
+        try {
+            return a.getDrawable(0);
+        } finally {
+            a.recycle();
         }
-        return d;
     }
 
-    public static Drawable getWindowBackgroundApplyAlpha(final Context context, final int alpha) {
+    public static Drawable getWindowBackground(final Context context) {
         final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.windowBackground});
-        final Drawable d = a.getDrawable(0);
-        a.recycle();
-        if (d != null) {
-            d.setAlpha(alpha);
-        }
-        return d;
+        try {
+            return a.getDrawable(0);
+        } finally {
+            a.recycle();
+        }
     }
 
     public static Drawable getWindowContentOverlay(final Context context) {
         final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.windowContentOverlay});
-        final Drawable d = a.getDrawable(0);
-        a.recycle();
-        return d;
+        try {
+            return a.getDrawable(0);
+        } finally {
+            a.recycle();
+        }
+    }
+
+    public static void initPagerIndicatorAsActionBarTab(FragmentActivity activity, TabPagerIndicator indicator) {
+        final float supportActionBarElevation = getSupportActionBarElevation(activity);
+        ViewCompat.setElevation(indicator, supportActionBarElevation);
+        if (!(activity instanceof IThemedActivity)) return;
+        final int themeRes = ((IThemedActivity) activity).getCurrentThemeResourceId();
+        final int themeColor = ((IThemedActivity) activity).getCurrentThemeColor();
+        final int contrastColor = ColorUtils.getContrastYIQ(themeColor, 192);
+        ViewUtils.setBackground(indicator, getActionBarStackedBackground(activity, themeRes, themeColor, true));
+        if (isDarkTheme(themeRes)) {
+            final int foregroundColor = getThemeForegroundColor(activity);
+            indicator.setIconColor(foregroundColor);
+            indicator.setLabelColor(foregroundColor);
+            indicator.setStripColor(themeColor);
+        } else {
+            indicator.setIconColor(contrastColor);
+            indicator.setLabelColor(contrastColor);
+            indicator.setStripColor(contrastColor);
+        }
+        indicator.updateAppearance();
+    }
+
+    public static void initTextView(TextView view) {
+        if (view.isInEditMode()) return;
+        final Context context = view.getContext();
+//        view.setLinkTextColor(ThemeUtils.getUserLinkTextColor(context));
+//        view.setHighlightColor(ThemeUtils.getUserHighlightColor(context));
+        view.setTypeface(ThemeUtils.getUserTypeface(context, view.getTypeface()));
+    }
+
+    public static boolean isColoredActionBar(int themeRes) {
+        return !isDarkTheme(themeRes);
     }
 
     public static boolean isDarkTheme(final Context context) {
@@ -940,6 +792,21 @@ public static boolean isTransparentBackground(final String option) {
         return VALUE_THEME_BACKGROUND_TRANSPARENT.equals(option);
     }
 
+    public static boolean isWindowFloating(Context context, int theme) {
+        final TypedArray a;
+        if (theme != 0) {
+            //noinspection ConstantConditions
+            a = context.obtainStyledAttributes(null, new int[]{android.R.attr.windowIsFloating}, 0, theme);
+        } else {
+            a = context.obtainStyledAttributes(new int[]{android.R.attr.windowIsFloating});
+        }
+        try {
+            return a.getBoolean(0, false);
+        } finally {
+            a.recycle();
+        }
+    }
+
     public static void overrideActivityCloseAnimation(final Activity activity) {
         TypedArray a = activity.obtainStyledAttributes(new int[]{android.R.attr.windowAnimationStyle});
         final int windowAnimationStyleResId = a.getResourceId(0, 0);
@@ -979,97 +846,225 @@ public static void overrideNormalActivityCloseAnimation(final Activity activity)
         activity.overridePendingTransition(activityCloseEnterAnimation, activityCloseExitAnimation);
     }
 
+    public static void resetCheatSheet(ActionMenuView menuView) {
+        final OnLongClickListener listener = new OnLongClickListener() {
+            @Override
+            public boolean onLongClick(View v) {
+                if (((ActionMenuItemView) v).hasText()) return false;
+                final MenuItem menuItem = ((ActionMenuItemView) v).getItemData();
+                Utils.showMenuItemToast(v, menuItem.getTitle(), true);
+                return true;
+            }
+        };
+        for (int i = 0, j = menuView.getChildCount(); i < j; i++) {
+            final View child = menuView.getChildAt(i);
+            if (!(child instanceof ActionMenuItemView)) continue;
+            final ActionMenuItemView itemView = (ActionMenuItemView) child;
+            final MenuItem menuItem = itemView.getItemData();
+            if (menuItem.hasSubMenu()) continue;
+            itemView.setOnLongClickListener(listener);
+        }
+    }
+
+    public static void setActionBarItemsColor(Window window, android.support.v7.app.ActionBar actionBar, int itemColor) {
+        final Drawable drawable = getActionBarHomeAsUpIndicator(actionBar);
+        if (drawable != null) {
+            drawable.setColorFilter(itemColor, Mode.SRC_ATOP);
+        }
+        actionBar.setHomeAsUpIndicator(drawable);
+        setActionBarTitleTextColor(window, itemColor);
+    }
 
-    private static Drawable applyActionBarDrawable(final Context context, final Drawable d, final boolean applyAlpha) {
-        if (d == null) return null;
-        d.mutate();
-//        DrawableCompat.setTint(d, getUserAccentColor(context));
-        if (applyAlpha) {
-            d.setAlpha(getThemeAlpha(context));
+    @SuppressLint("NewApi")
+    public static void setActionBarOverflowColor(Toolbar toolbar, int itemColor) {
+        if (toolbar == null) return;
+        final ActionMenuView actionMenuView = ViewUtils.findViewByType(toolbar, ActionMenuView.class);
+        if (actionMenuView == null) return;
+        View overflowView = null;
+        for (int i = 0, j = actionMenuView.getChildCount(); i < j; i++) {
+            final View child = actionMenuView.getChildAt(i);
+            final ActionMenuView.LayoutParams lp = (ActionMenuView.LayoutParams) child.getLayoutParams();
+            if (lp.isOverflowButton) {
+                overflowView = child;
+                break;
+            }
         }
-        return d;
+        if (!(overflowView instanceof ImageView)) return;
+        final Drawable drawable = ((ImageView) overflowView).getDrawable();
+        if (drawable == null) return;
+        drawable.setColorFilter(itemColor, Mode.SRC_ATOP);
     }
 
-    private static View newViewInstance(final String className, final Context context, final AttributeSet attrs)
-            throws ClassNotFoundException, NoSuchMethodException, InstantiationException, IllegalAccessException,
-            InvocationTargetException {
-        final Class<?> viewCls = Class.forName(className);
-        final Constructor<?> constructor = viewCls.getConstructor(Context.class, AttributeSet.class);
-        return (View) constructor.newInstance(context, attrs);
+    public static void setActionBarSubtitleTextColor(Window window, int itemColor) {
+        final View actionBarView = window.findViewById(android.support.v7.appcompat.R.id.action_bar);
+        if (actionBarView instanceof Toolbar) {
+            ((Toolbar) actionBarView).setSubtitleTextColor(itemColor);
+        }
     }
 
-    public static int getThemeColor(Context context, int themeResourceId) {
-        final Context appContext = context.getApplicationContext();
-        final Resources res = appContext.getResources();
-        @SuppressWarnings("ConstantConditions")
-        final TypedArray a = appContext.obtainStyledAttributes(null,
-                new int[]{android.R.attr.colorActivatedHighlight}, 0, themeResourceId);
+    public static void setActionBarTitleTextColor(Window window, int itemColor) {
+        final View actionBarView = window.findViewById(android.support.v7.appcompat.R.id.action_bar);
+        if (actionBarView instanceof Toolbar) {
+            ((Toolbar) actionBarView).setTitleTextColor(itemColor);
+        }
+    }
+
+    public static void setCompatToolbarOverlay(Activity activity, Drawable background) {
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) return;
+        final View view = activity.getWindow().findViewById(android.support.v7.appcompat.R.id.decor_content_parent);
+        if (!(view instanceof ActionBarOverlayLayout)) return;
         try {
-            return a.getColor(0, res.getColor(R.color.material_light_blue));
-        } finally {
-            a.recycle();
+            final Field field = ActionBarOverlayLayout.class.getDeclaredField("mWindowContentOverlay");
+            field.setAccessible(true);
+            field.set(view, background);
+        } catch (Exception ignore) {
         }
     }
 
-    public static boolean isColoredActionBar(int themeRes) {
-        return !isDarkTheme(themeRes);
+    public static void setupDrawerBackground(Context context, View view) {
+        if (!(context instanceof IThemedActivity)) return;
+        final int themeRes = ((IThemedActivity) context).getCurrentThemeResourceId();
+        final int drawerThemeRes = getDrawerThemeResource(themeRes);
+        final String backgroundOption = ((IThemedActivity) context).getThemeBackgroundOption();
+        final int alpha = ((IThemedActivity) context).getCurrentThemeBackgroundAlpha();
+        final Drawable d = getWindowBackgroundFromTheme(context, drawerThemeRes);
+        if (d != null && isTransparentBackground(backgroundOption)) {
+            d.setAlpha(alpha);
+        }
+        ViewUtils.setBackground(view, d);
     }
 
-    public static void initTextView(TextView view) {
-        if (view.isInEditMode()) return;
-        final Context context = view.getContext();
-//        view.setLinkTextColor(ThemeUtils.getUserLinkTextColor(context));
-//        view.setHighlightColor(ThemeUtils.getUserHighlightColor(context));
-        view.setTypeface(ThemeUtils.getUserTypeface(context, view.getTypeface()));
+    public static void wrapMenuIcon(@NonNull Menu menu, int itemColor, int subItemColor, int... excludeGroups) {
+        for (int i = 0, j = menu.size(); i < j; i++) {
+            final MenuItem item = menu.getItem(i);
+            wrapMenuItemIcon(item, itemColor, excludeGroups);
+            if (item.hasSubMenu()) {
+                wrapMenuIcon(item.getSubMenu(), subItemColor, subItemColor, excludeGroups);
+            }
+        }
     }
 
-    public static void applyParagraphSpacing(TextView textView, float multiplier) {
-        final SpannableStringBuilder builder = SpannableStringBuilder.valueOf(textView.getText());
-        int prevLineBreak, currLineBreak = 0;
-        for (int i = 0, j = builder.length(); i < j; i++) {
-            if (builder.charAt(i) == '\n') {
-                prevLineBreak = currLineBreak;
-                currLineBreak = i;
-                if (currLineBreak > 0) {
-                    builder.setSpan(new ParagraphSpacingSpan(multiplier), prevLineBreak, currLineBreak,
-                            Spanned.SPAN_INCLUSIVE_INCLUSIVE);
-                }
+    public static void wrapMenuIcon(ActionMenuView view, int... excludeGroups) {
+        final Resources resources = view.getResources();
+        final int colorDark = resources.getColor(R.color.action_icon_dark);
+        final int colorLight = resources.getColor(R.color.action_icon_light);
+        wrapMenuIcon(view, colorDark, colorLight, excludeGroups);
+    }
+
+    public static void wrapMenuIcon(ActionMenuView view, int colorDark, int colorLight, int... excludeGroups) {
+        final int itemBackgroundColor = ThemeUtils.getThemeBackgroundColor(view.getContext());
+        final int popupItemBackgroundColor = ThemeUtils.getThemeBackgroundColor(view.getContext(), view.getPopupTheme());
+        final int itemColor = ColorUtils.getContrastYIQ(itemBackgroundColor, colorDark, colorLight);
+        final int popupItemColor = ColorUtils.getContrastYIQ(popupItemBackgroundColor, colorDark, colorLight);
+        final Menu menu = view.getMenu();
+        final int childCount = view.getChildCount();
+        for (int i = 0, j = menu.size(), k = 0; i < j; i++) {
+            final MenuItem item = menu.getItem(i);
+            wrapMenuItemIcon(item, itemColor, excludeGroups);
+            if (item.hasSubMenu()) {
+                wrapMenuIcon(menu, popupItemColor, popupItemColor, excludeGroups);
+            }
+            if (item.isVisible()) {
+                k++;
             }
         }
-        textView.setText(builder);
     }
 
-    public static void setActionBarItemsColor(Window window, android.support.v7.app.ActionBar actionBar, int itemColor) {
-        final Drawable drawable = getActionBarHomeAsUpIndicator(actionBar);
-        if (drawable != null) {
-            drawable.setColorFilter(itemColor, Mode.SRC_ATOP);
+    public static void wrapMenuIcon(Context context, Menu menu, int... excludeGroups) {
+        final int backgroundColor = ThemeUtils.getThemeBackgroundColor(context);
+        wrapMenuIcon(context, backgroundColor, backgroundColor, menu, excludeGroups);
+    }
+
+    public static void wrapMenuIcon(Context context, int backgroundColor, int popupBackgroundColor,
+                                    Menu menu, int... excludeGroups) {
+        final Resources resources = context.getResources();
+        final int colorDark = resources.getColor(R.color.action_icon_dark);
+        final int colorLight = resources.getColor(R.color.action_icon_light);
+        final int itemColor = ColorUtils.getContrastYIQ(backgroundColor, colorDark, colorLight);
+        final int popupItemColor = ColorUtils.getContrastYIQ(popupBackgroundColor, colorDark, colorLight);
+        for (int i = 0, j = menu.size(), k = 0; i < j; i++) {
+            final MenuItem item = menu.getItem(i);
+            wrapMenuItemIcon(item, itemColor, excludeGroups);
+            if (item.hasSubMenu()) {
+                wrapMenuIcon(menu, popupItemColor, popupItemColor, excludeGroups);
+            }
+            if (item.isVisible()) {
+                k++;
+            }
         }
-        actionBar.setHomeAsUpIndicator(drawable);
-        setActionBarTitleTextColor(window, itemColor);
     }
 
-    public static void setActionBarTitleTextColor(Window window, int itemColor) {
-        final View actionBarView = window.findViewById(android.support.v7.appcompat.R.id.action_bar);
-        if (actionBarView instanceof Toolbar) {
-            ((Toolbar) actionBarView).setTitleTextColor(itemColor);
+    public static void wrapMenuItemIcon(@NonNull MenuItem item, int itemColor, int... excludeGroups) {
+        if (ArrayUtils.contains(excludeGroups, item.getGroupId())) return;
+        final Drawable icon = item.getIcon();
+        if (icon == null) return;
+        if (icon instanceof ActionIconDrawable) {
+            ((ActionIconDrawable) icon).setDefaultColor(itemColor);
+            item.setIcon(icon);
+            return;
         }
+        icon.mutate();
+        final Drawable.Callback callback = icon.getCallback();
+        final ActionIconDrawable newIcon = new ActionIconDrawable(icon, itemColor);
+        newIcon.setCallback(callback);
+        item.setIcon(newIcon);
     }
 
-    public static void setActionBarSubtitleTextColor(Window window, int itemColor) {
-        final View actionBarView = window.findViewById(android.support.v7.appcompat.R.id.action_bar);
-        if (actionBarView instanceof Toolbar) {
-            ((Toolbar) actionBarView).setSubtitleTextColor(itemColor);
+    public static void wrapToolbarMenuIcon(Toolbar view, int itemColor, int popupItemColor, int... excludeGroups) {
+        final Menu menu = view.getMenu();
+        final int childCount = view.getChildCount();
+        for (int i = 0, j = menu.size(), k = 0; i < j; i++) {
+            final MenuItem item = menu.getItem(i);
+            wrapMenuItemIcon(item, itemColor, excludeGroups);
+            if (item.hasSubMenu()) {
+                wrapMenuIcon(menu, popupItemColor, popupItemColor, excludeGroups);
+            }
+            if (item.isVisible()) {
+                k++;
+            }
         }
     }
 
-    public static Drawable getActionBarHomeAsUpIndicator(android.support.v7.app.ActionBar actionBar) {
-        final Context context = actionBar.getThemedContext();
-        @SuppressWarnings("ConstantConditions")
-        final TypedArray a = context.obtainStyledAttributes(null, R.styleable.ActionBar, R.attr.actionBarStyle, 0);
-        try {
-            return a.getDrawable(R.styleable.ActionBar_homeAsUpIndicator);
-        } finally {
-            a.recycle();
+    private static Drawable applyActionBarDrawable(final Context context, final Drawable d, final boolean applyAlpha) {
+        if (d == null) return null;
+        d.mutate();
+//        DrawableCompat.setTint(d, getUserAccentColor(context));
+        if (applyAlpha) {
+            d.setAlpha(getThemeAlpha(context));
+        }
+        return d;
+    }
+
+    private static void applyColorTintForView(View view, int tintColor) {
+        if (view instanceof IThemedView) {
+            final ColorStateList tintList = ColorStateList.valueOf(tintColor);
+            ((IThemedView) view).setThemeTintColor(tintList);
+        } else if (view instanceof ProgressBar) {
+            final ColorStateList tintList = ColorStateList.valueOf(tintColor);
+            final ProgressBar progressBar = (ProgressBar) view;
+            ViewUtils.setProgressTintList(progressBar, tintList);
+            ViewUtils.setProgressBackgroundTintList(progressBar, tintList);
+            ViewUtils.setIndeterminateTintList(progressBar, tintList);
+        } else if (view instanceof CompoundButton) {
+            final ColorStateList tintList = ColorStateList.valueOf(tintColor);
+            final CompoundButton compoundButton = (CompoundButton) view;
+            ViewUtils.setButtonTintList(compoundButton, tintList);
         }
+        // TODO support TintableBackgroundView
+    }
+
+    @NonNull
+    private static SharedPreferencesWrapper getSharedPreferencesWrapper(Context context) {
+        final Context appContext = context.getApplicationContext();
+        return SharedPreferencesWrapper.getInstance(appContext, SHARED_PREFERENCES_NAME,
+                Context.MODE_PRIVATE);
+    }
+
+    private static View newViewInstance(final String className, final Context context, final AttributeSet attrs)
+            throws ClassNotFoundException, NoSuchMethodException, InstantiationException, IllegalAccessException,
+            InvocationTargetException {
+        final Class<?> viewCls = Class.forName(className);
+        final Constructor<?> constructor = viewCls.getConstructor(Context.class, AttributeSet.class);
+        return (View) constructor.newInstance(context, attrs);
     }
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/LeftDrawerFrameLayout.java b/twidere/src/main/java/org/mariotaku/twidere/view/LeftDrawerFrameLayout.java
index c8ec2b8eeb..6dd2c8e7b1 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/LeftDrawerFrameLayout.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/LeftDrawerFrameLayout.java
@@ -24,12 +24,11 @@
 import android.graphics.Paint;
 import android.graphics.PorterDuff;
 import android.graphics.PorterDuffXfermode;
-import android.graphics.drawable.Drawable;
+import android.support.annotation.NonNull;
 import android.util.AttributeSet;
 import android.widget.FrameLayout;
 
 import org.mariotaku.twidere.util.ThemeUtils;
-import org.mariotaku.twidere.util.ViewUtils;
 
 public class LeftDrawerFrameLayout extends FrameLayout {
 
@@ -47,8 +46,7 @@ public LeftDrawerFrameLayout(final Context context, final AttributeSet attrs) {
 
     public LeftDrawerFrameLayout(final Context context, final AttributeSet attrs, final int defStyle) {
         super(context, attrs, defStyle);
-        final Drawable bg = ThemeUtils.getWindowBackground(context, ThemeUtils.getDrawerThemeResource(context));
-        ViewUtils.setBackground(this, bg);
+        ThemeUtils.setupDrawerBackground(context, this);
         setWillNotDraw(false);
         mClipPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
     }
@@ -79,7 +77,7 @@ public void setScrollScale(final float scrollScale) {
     }
 
     @Override
-    protected void dispatchDraw(final Canvas canvas) {
+    protected void dispatchDraw(@NonNull final Canvas canvas) {
         super.dispatchDraw(canvas);
         if (mClipEnabled && mPercentOpen > 0 && mPercentOpen < 1) {
             final int left = Math.round(getWidth() * (1 - (1 - mPercentOpen) * (1 - mScrollScale)));
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/RightDrawerFrameLayout.java b/twidere/src/main/java/org/mariotaku/twidere/view/RightDrawerFrameLayout.java
index eb5e68bee0..9f48977486 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/RightDrawerFrameLayout.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/RightDrawerFrameLayout.java
@@ -24,12 +24,10 @@
 import android.graphics.Paint;
 import android.graphics.PorterDuff;
 import android.graphics.PorterDuffXfermode;
-import android.graphics.drawable.Drawable;
 import android.util.AttributeSet;
 import android.widget.FrameLayout;
 
 import org.mariotaku.twidere.util.ThemeUtils;
-import org.mariotaku.twidere.util.ViewUtils;
 
 public class RightDrawerFrameLayout extends FrameLayout {
 
@@ -47,8 +45,7 @@ public RightDrawerFrameLayout(final Context context, final AttributeSet attrs) {
 
     public RightDrawerFrameLayout(final Context context, final AttributeSet attrs, final int defStyle) {
         super(context, attrs, defStyle);
-        final Drawable bg = ThemeUtils.getWindowBackground(context, ThemeUtils.getDrawerThemeResource(context));
-        ViewUtils.setBackground(this, bg);
+        ThemeUtils.setupDrawerBackground(context, this);
         setWillNotDraw(false);
         mClipPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
     }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/TabPagerIndicator.java b/twidere/src/main/java/org/mariotaku/twidere/view/TabPagerIndicator.java
index 5d9c7bf310..353a79d1ff 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/TabPagerIndicator.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/TabPagerIndicator.java
@@ -68,7 +68,7 @@ public TabPagerIndicator(Context context, AttributeSet attrs, int defStyle) {
         final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.TabPagerIndicator);
         setTabExpandEnabled(a.getBoolean(R.styleable.TabPagerIndicator_tabExpandEnabled, false));
         setHorizontalPadding(a.getDimensionPixelSize(R.styleable.TabPagerIndicator_tabHorizontalPadding, 0));
-        setVerticalPadding(a.getDimensionPixelSize(R.styleable.TabPagerIndicator_tabHorizontalPadding, 0));
+        setVerticalPadding(a.getDimensionPixelSize(R.styleable.TabPagerIndicator_tabVerticalPadding, 0));
         setStripColor(a.getColor(R.styleable.TabPagerIndicator_tabStripColor, 0));
         setIconColor(a.getColor(R.styleable.TabPagerIndicator_tabIconColor, 0));
         setLabelColor(a.getColor(R.styleable.TabPagerIndicator_tabLabelColor, ThemeUtils.getTextColorPrimary(context)));
diff --git a/twidere/src/main/res-localized/values-ar/strings.xml b/twidere/src/main/res-localized/values-ar/strings.xml
index b7cee3f1e5..993a330d85 100755
--- a/twidere/src/main/res-localized/values-ar/strings.xml
+++ b/twidere/src/main/res-localized/values-ar/strings.xml
@@ -436,7 +436,7 @@
   <string name="users_statuses"> </string>
   <string name="card_animation"> </string>
   <string name="name_first">  </string>
-  <string name="next"></string>
+  <string name="next_step"></string>
   <string name="settings_wizard"> </string>
   <string name="wizard_page_welcome_title"></string>
   <string name="wizard_page_welcome_text">  .\n     </string>
diff --git a/twidere/src/main/res-localized/values-ca/strings.xml b/twidere/src/main/res-localized/values-ca/strings.xml
index 1b52265ed5..729de5c155 100755
--- a/twidere/src/main/res-localized/values-ca/strings.xml
+++ b/twidere/src/main/res-localized/values-ca/strings.xml
@@ -476,7 +476,7 @@
   <string name="users_statuses">Piulades de l\'usuari</string>
   <string name="card_animation">Animaci de les targetes</string>
   <string name="name_first">Mostra el nom al principi</string>
-  <string name="next">Segent</string>
+  <string name="next_step">Segent</string>
   <string name="settings_wizard">Ajudant de configuraci</string>
   <string name="wizard_page_welcome_title">Benvingut/da</string>
   <string name="wizard_page_welcome_text">Grcies per escollir el Twidere.\nVoleu configurar-lo ara?</string>
diff --git a/twidere/src/main/res-localized/values-cs/strings.xml b/twidere/src/main/res-localized/values-cs/strings.xml
index e11210776a..c13a23832e 100755
--- a/twidere/src/main/res-localized/values-cs/strings.xml
+++ b/twidere/src/main/res-localized/values-cs/strings.xml
@@ -89,7 +89,7 @@
   <string name="discard">Zahodit</string>
   <string name="preview">Nhled</string>
   <string name="ask">Dotaz</string>
-  <string name="next">Dal</string>
+  <string name="next_step">Dal</string>
   <string name="wizard_page_welcome_yes">Ano</string>
   <string name="wizard_page_finished_title">Dokoneno</string>
 </resources>
diff --git a/twidere/src/main/res-localized/values-de/strings.xml b/twidere/src/main/res-localized/values-de/strings.xml
index b98bcc341e..2708b16dd4 100755
--- a/twidere/src/main/res-localized/values-de/strings.xml
+++ b/twidere/src/main/res-localized/values-de/strings.xml
@@ -487,7 +487,7 @@
   <string name="users_statuses">Tweets des Benutzers</string>
   <string name="card_animation">Animierte Karten</string>
   <string name="name_first">Name zuerst anzeigen</string>
-  <string name="next">Weiter</string>
+  <string name="next_step">Weiter</string>
   <string name="settings_wizard">Einstellungsdialog</string>
   <string name="wizard_page_welcome_title">Willkomen</string>
   <string name="wizard_page_welcome_text">Danke, dass du dich fr Twidere entschieden hast.\nMchtest du die Anwendung jetzt konfigurieren?</string>
diff --git a/twidere/src/main/res-localized/values-es/strings.xml b/twidere/src/main/res-localized/values-es/strings.xml
index 11a1b3a7dc..b5839e56b8 100755
--- a/twidere/src/main/res-localized/values-es/strings.xml
+++ b/twidere/src/main/res-localized/values-es/strings.xml
@@ -490,7 +490,7 @@
   <string name="users_statuses">Tweets de los usuarios</string>
   <string name="card_animation">Animacin en tarjetas</string>
   <string name="name_first">Mostrar nombre primero</string>
-  <string name="next">Siguiente</string>
+  <string name="next_step">Siguiente</string>
   <string name="settings_wizard">Asistente de configuracin</string>
   <string name="wizard_page_welcome_title">Bienvenido</string>
   <string name="wizard_page_welcome_text">Gracias por escoger Twidere.\nQuieres configurarlo ahora?</string>
diff --git a/twidere/src/main/res-localized/values-fi/strings.xml b/twidere/src/main/res-localized/values-fi/strings.xml
index d970b27660..af86892bbc 100755
--- a/twidere/src/main/res-localized/values-fi/strings.xml
+++ b/twidere/src/main/res-localized/values-fi/strings.xml
@@ -475,7 +475,7 @@
   <string name="users_statuses">Kyttjn twiitit</string>
   <string name="card_animation">Korttianimaatio</string>
   <string name="name_first">Nyt ensin nimi</string>
-  <string name="next">Seuraava</string>
+  <string name="next_step">Seuraava</string>
   <string name="settings_wizard">Ohjatut asetukset</string>
   <string name="wizard_page_welcome_title">Tervetuloa</string>
   <string name="wizard_page_welcome_text">Kiitos, ett valitsit Twideren\nHaluatko mritt asetukset heti?</string>
diff --git a/twidere/src/main/res-localized/values-fr/strings.xml b/twidere/src/main/res-localized/values-fr/strings.xml
index d40bba63af..1a825286de 100755
--- a/twidere/src/main/res-localized/values-fr/strings.xml
+++ b/twidere/src/main/res-localized/values-fr/strings.xml
@@ -488,7 +488,7 @@
   <string name="users_statuses">Tweets de l\'utilisateur</string>
   <string name="card_animation">Animation de la carte</string>
   <string name="name_first">Afficher le nom en premier</string>
-  <string name="next">Suivant</string>
+  <string name="next_step">Suivant</string>
   <string name="settings_wizard">Assistant de configuration</string>
   <string name="wizard_page_welcome_title">Bienvenue</string>
   <string name="wizard_page_welcome_text">Merci d\'avoir choisi Twidere.\nVoulez-vous le configurer maintenant ?</string>
diff --git a/twidere/src/main/res-localized/values-hu/strings.xml b/twidere/src/main/res-localized/values-hu/strings.xml
index 46a33ef4ba..857e57c29b 100755
--- a/twidere/src/main/res-localized/values-hu/strings.xml
+++ b/twidere/src/main/res-localized/values-hu/strings.xml
@@ -370,7 +370,7 @@
   <string name="link_highlight_option">Link kiemelsi lehetsg</string>
   <string name="users_statuses">Felhasznl tweetjei</string>
   <string name="name_first">Elszr a nv jelenjen meg</string>
-  <string name="next">Kvetkez</string>
+  <string name="next_step">Kvetkez</string>
   <string name="settings_wizard">Belltsok varzsl</string>
   <string name="wizard_page_welcome_text">Ksznjk, hogy a Twidere programot vlasztotta.\nSzeretn most konfigurlni?</string>
   <string name="wizard_page_welcome_yes">Igen</string>
diff --git a/twidere/src/main/res-localized/values-in/strings.xml b/twidere/src/main/res-localized/values-in/strings.xml
index 2013c80015..6c21db695c 100755
--- a/twidere/src/main/res-localized/values-in/strings.xml
+++ b/twidere/src/main/res-localized/values-in/strings.xml
@@ -479,7 +479,7 @@
   <string name="users_statuses">Twit pengguna</string>
   <string name="card_animation">Animasi kartu</string>
   <string name="name_first">Tampilkan nama depan</string>
-  <string name="next">Lanjut</string>
+  <string name="next_step">Lanjut</string>
   <string name="settings_wizard">Pengaturan</string>
   <string name="wizard_page_welcome_title">Selamat datang</string>
   <string name="wizard_page_welcome_text">Terima kasih telah memilih Twidere.\nAnda mau konfigurasi sekarang?</string>
diff --git a/twidere/src/main/res-localized/values-it/strings.xml b/twidere/src/main/res-localized/values-it/strings.xml
index 7ce1722e29..590f2e94a0 100755
--- a/twidere/src/main/res-localized/values-it/strings.xml
+++ b/twidere/src/main/res-localized/values-it/strings.xml
@@ -485,7 +485,7 @@
   <string name="users_statuses">Tweet dell\'utente</string>
   <string name="card_animation">Animazione delle schede</string>
   <string name="name_first">Visualizza prima il nome</string>
-  <string name="next">Prossimo</string>
+  <string name="next_step">Prossimo</string>
   <string name="settings_wizard">Impostazione guidata</string>
   <string name="wizard_page_welcome_title">Benvenuto</string>
   <string name="wizard_page_welcome_text">Grazie per aver scelto Twidere.\nVuoi configurarlo adesso?</string>
diff --git a/twidere/src/main/res-localized/values-ja/strings.xml b/twidere/src/main/res-localized/values-ja/strings.xml
index 017d126441..562ad7972c 100755
--- a/twidere/src/main/res-localized/values-ja/strings.xml
+++ b/twidere/src/main/res-localized/values-ja/strings.xml
@@ -468,7 +468,7 @@
   <string name="users_statuses"></string>
   <string name="card_animation"></string>
   <string name="name_first"></string>
-  <string name="next"></string>
+  <string name="next_step"></string>
   <string name="settings_wizard"></string>
   <string name="wizard_page_welcome_title"></string>
   <string name="wizard_page_welcome_text">Twidere\n?</string>
diff --git a/twidere/src/main/res-localized/values-ko/strings.xml b/twidere/src/main/res-localized/values-ko/strings.xml
index d336fab47b..22f8aeec14 100755
--- a/twidere/src/main/res-localized/values-ko/strings.xml
+++ b/twidere/src/main/res-localized/values-ko/strings.xml
@@ -475,7 +475,7 @@
   <string name="users_statuses"> </string>
   <string name="card_animation"> </string>
   <string name="name_first">  </string>
-  <string name="next"></string>
+  <string name="next_step"></string>
   <string name="settings_wizard"> </string>
   <string name="wizard_page_welcome_title">.</string>
   <string name="wizard_page_welcome_text">Twidere    .\n ?</string>
diff --git a/twidere/src/main/res-localized/values-nl/strings.xml b/twidere/src/main/res-localized/values-nl/strings.xml
index 3ab8ef2dca..7e87374098 100755
--- a/twidere/src/main/res-localized/values-nl/strings.xml
+++ b/twidere/src/main/res-localized/values-nl/strings.xml
@@ -457,7 +457,7 @@
   <string name="users_statuses">Gebruikers tweets</string>
   <string name="card_animation">Kaart animatie</string>
   <string name="name_first">Toon naam eerst</string>
-  <string name="next">Volgende</string>
+  <string name="next_step">Volgende</string>
   <string name="settings_wizard">Instellingen tovenaar</string>
   <string name="wizard_page_welcome_title">Welkom</string>
   <string name="wizard_page_welcome_text">Bedankt voor het kiezen van Twidere!\nWil je het nu configureren?</string>
diff --git a/twidere/src/main/res-localized/values-pl/strings.xml b/twidere/src/main/res-localized/values-pl/strings.xml
index e35a741766..30984b101a 100755
--- a/twidere/src/main/res-localized/values-pl/strings.xml
+++ b/twidere/src/main/res-localized/values-pl/strings.xml
@@ -475,7 +475,7 @@ Twidere uywa znacznie prostszego mechanizmu logowania, bez otwierania okna prz
   <string name="users_statuses">Tweety uytkownika</string>
   <string name="card_animation">Animacja tweetw</string>
   <string name="name_first">Najpierw wywietlana nazwa</string>
-  <string name="next">Dalej</string>
+  <string name="next_step">Dalej</string>
   <string name="settings_wizard">Kreator ustawie</string>
   <string name="wizard_page_welcome_title">Witamy</string>
   <string name="wizard_page_welcome_text">Dzikujemy za wybranie Twidere.\nCzy chcesz go skonfigurowa teraz?</string>
diff --git a/twidere/src/main/res-localized/values-pt/strings.xml b/twidere/src/main/res-localized/values-pt/strings.xml
index e08614ad8b..693125057a 100755
--- a/twidere/src/main/res-localized/values-pt/strings.xml
+++ b/twidere/src/main/res-localized/values-pt/strings.xml
@@ -460,7 +460,7 @@
   <string name="users_statuses">Tweets do usurio</string>
   <string name="card_animation">Carto animado</string>
   <string name="name_first">Exibir o nome primeiro</string>
-  <string name="next">Prximo</string>
+  <string name="next_step">Prximo</string>
   <string name="settings_wizard">Assistente de configurao</string>
   <string name="wizard_page_welcome_title">Bem-vindo</string>
   <string name="wizard_page_welcome_text">Obrigado por escolher o Twidere.\nO que voc quer configurar agora?</string>
diff --git a/twidere/src/main/res-localized/values-ru/strings.xml b/twidere/src/main/res-localized/values-ru/strings.xml
index 7be397f559..7079c3046d 100755
--- a/twidere/src/main/res-localized/values-ru/strings.xml
+++ b/twidere/src/main/res-localized/values-ru/strings.xml
@@ -489,7 +489,7 @@
   <string name="users_statuses"> </string>
   <string name="card_animation"> </string>
   <string name="name_first">  </string>
-  <string name="next"></string>
+  <string name="next_step"></string>
   <string name="settings_wizard"> </string>
   <string name="wizard_page_welcome_title"> </string>
   <string name="wizard_page_welcome_text">  ,   Twidere.      ?</string>
diff --git a/twidere/src/main/res-localized/values-tr/strings.xml b/twidere/src/main/res-localized/values-tr/strings.xml
index 51b65f5616..01f8a3ec13 100755
--- a/twidere/src/main/res-localized/values-tr/strings.xml
+++ b/twidere/src/main/res-localized/values-tr/strings.xml
@@ -475,7 +475,7 @@
   <string name="users_statuses">Kullancnn tweet\'lar</string>
   <string name="card_animation">Kart animasyonu</string>
   <string name="name_first">smi ilk gster</string>
-  <string name="next">Sonraki</string>
+  <string name="next_step">Sonraki</string>
   <string name="settings_wizard">Ayar sihirbaz</string>
   <string name="wizard_page_welcome_title">Merhaba</string>
   <string name="wizard_page_welcome_text">Twidere\' setiiniz iin teekkrler.\nimdi ayarlamak istermisin?</string>
diff --git a/twidere/src/main/res-localized/values-uk/strings.xml b/twidere/src/main/res-localized/values-uk/strings.xml
index 48bfa0bd55..40aa03b066 100755
--- a/twidere/src/main/res-localized/values-uk/strings.xml
+++ b/twidere/src/main/res-localized/values-uk/strings.xml
@@ -444,7 +444,7 @@
   <string name="users_statuses"> </string>
   <string name="card_animation"> </string>
   <string name="name_first">  \'</string>
-  <string name="next"></string>
+  <string name="next_step"></string>
   <string name="settings_wizard"> </string>
   <string name="wizard_page_welcome_title"> </string>
   <string name="wizard_page_welcome_text">   Twidere.\n     ?</string>
diff --git a/twidere/src/main/res-localized/values-zh-rCN/strings.xml b/twidere/src/main/res-localized/values-zh-rCN/strings.xml
index 5b6852a6b1..f1b3d3c7cc 100755
--- a/twidere/src/main/res-localized/values-zh-rCN/strings.xml
+++ b/twidere/src/main/res-localized/values-zh-rCN/strings.xml
@@ -490,7 +490,7 @@
   <string name="users_statuses"></string>
   <string name="card_animation"></string>
   <string name="name_first"></string>
-  <string name="next"></string>
+  <string name="next_step"></string>
   <string name="settings_wizard"></string>
   <string name="wizard_page_welcome_title"></string>
   <string name="wizard_page_welcome_text">Twidere\n</string>
diff --git a/twidere/src/main/res-localized/values-zh/strings.xml b/twidere/src/main/res-localized/values-zh/strings.xml
index abccf6136f..6003a8f303 100755
--- a/twidere/src/main/res-localized/values-zh/strings.xml
+++ b/twidere/src/main/res-localized/values-zh/strings.xml
@@ -490,7 +490,7 @@
   <string name="users_statuses"></string>
   <string name="card_animation"></string>
   <string name="name_first"></string>
-  <string name="next"></string>
+  <string name="next_step"></string>
   <string name="settings_wizard"></string>
   <string name="wizard_page_welcome_title"></string>
   <string name="wizard_page_welcome_text"> Twidere\n</string>
diff --git a/twidere/src/main/res/layout/list_item_two_line_small.xml b/twidere/src/main/res/layout/list_item_two_line_small.xml
index ab8c243863..a8de148855 100644
--- a/twidere/src/main/res/layout/list_item_two_line_small.xml
+++ b/twidere/src/main/res/layout/list_item_two_line_small.xml
@@ -27,9 +27,10 @@
     android:orientation="horizontal"
     android:padding="@dimen/element_spacing_small">
 
-    <ImageView
+    <org.mariotaku.twidere.view.ShapedImageView
         android:id="@android:id/icon"
         android:layout_width="@dimen/icon_size_list_item_small"
+        style="?profileImageStyle"
         android:layout_height="@dimen/icon_size_list_item_small"
         android:contentDescription="@string/icon"
         android:scaleType="fitCenter"/>
diff --git a/twidere/src/main/res/values/strings.xml b/twidere/src/main/res/values/strings.xml
index d09ff46885..1169b76049 100644
--- a/twidere/src/main/res/values/strings.xml
+++ b/twidere/src/main/res/values/strings.xml
@@ -477,8 +477,11 @@
     <string name="users_statuses">User\'s tweets</string>
     <string name="card_animation">Card animation</string>
     <string name="name_first">Display name first</string>
-    <string name="next">Next</string>
-    <string name="previous">Previous</string>
+    <string name="next_step">Next</string>
+    <!-- Previous item (tweet, user etc.) -->
+    <string name="previous_item">Previous</string>
+    <!-- Next item (tweet, user etc.) -->
+    <string name="next_item">Next</string>
     <string name="settings_wizard">Settings wizard</string>
     <string name="wizard_page_welcome_title">Welcome</string>
     <string name="wizard_page_welcome_text">Thanks for choosing Twidere.\nWould you like to config it now?</string>
@@ -737,7 +740,7 @@
     <string name="N_statuses_quantity_other"><xliff:g id="count">%d</xliff:g> tweets</string>
     <string name="N_favorites_quantity_one"><xliff:g id="count">%d</xliff:g> favorites</string>
     <string name="N_favorites_quantity_other"><xliff:g id="count">%d</xliff:g> favorites</string>
-    <string name="drafts_hint_messages">Your unsent tweets will goes here</string>
+    <string name="drafts_hint_messages">Your unsent tweets will save here</string>
     <string name="keyboard_shortcuts">Keyboard shortcuts</string>
     <string name="keyboard_shortcut_hint">Press keys</string>
     <string name="conflicts_with_name">Conflicts with <xliff:g id="name">%s</xliff:g></string>
