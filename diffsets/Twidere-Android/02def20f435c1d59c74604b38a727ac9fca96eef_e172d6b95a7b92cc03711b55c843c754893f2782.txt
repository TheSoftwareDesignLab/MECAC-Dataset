diff --git a/twidere.component.common/src/main/java/org/mariotaku/twidere/util/filter/FiltersSubscriptionProvider.java b/twidere.component.common/src/main/java/org/mariotaku/twidere/util/filter/FiltersSubscriptionProvider.java
index e6e2cd8dec..3fde3b7d8d 100644
--- a/twidere.component.common/src/main/java/org/mariotaku/twidere/util/filter/FiltersSubscriptionProvider.java
+++ b/twidere.component.common/src/main/java/org/mariotaku/twidere/util/filter/FiltersSubscriptionProvider.java
@@ -14,6 +14,10 @@
 public interface FiltersSubscriptionProvider {
     boolean fetchFilters() throws IOException;
 
+    boolean firstAdded();
+
+    boolean deleteLocalData();
+
     @Nullable
     List<FiltersData.UserItem> getUsers();
 
diff --git a/twidere/build.gradle b/twidere/build.gradle
index d8314a7844..44db702d35 100644
--- a/twidere/build.gradle
+++ b/twidere/build.gradle
@@ -168,7 +168,7 @@ dependencies {
     compile 'net.ypresto.androidtranscoder:android-transcoder:0.2.0'
     compile 'com.github.mariotaku.MediaViewerLibrary:base:0.9.17'
     compile 'com.github.mariotaku.MediaViewerLibrary:subsample-image-view:0.9.17'
-    compile 'com.github.mariotaku.SQLiteQB:library:0.9.8'
+    compile 'com.github.mariotaku:SQLiteQB:0.9.9'
     compile 'com.github.mariotaku.ObjectCursor:core:0.9.12'
     compile 'com.github.mariotaku:MultiValueSwitch:0.9.7'
     compile 'com.github.mariotaku:AbstractTask:0.9.4'
diff --git a/twidere/src/main/AndroidManifest.xml b/twidere/src/main/AndroidManifest.xml
index 3b3d582366..74c400be40 100644
--- a/twidere/src/main/AndroidManifest.xml
+++ b/twidere/src/main/AndroidManifest.xml
@@ -419,6 +419,9 @@
                 <data
                     android:host="twidere.mariotaku.org"
                     android:pathPrefix="/external"/>
+                <data
+                    android:host="twidere.org"
+                    android:pathPrefix="/external"/>
 
                 <action android:name="android.intent.action.VIEW"/>
                 <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/DataStoreUtils.java b/twidere/src/main/java/org/mariotaku/twidere/util/DataStoreUtils.java
index c5d5243d53..27629700ac 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/DataStoreUtils.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/DataStoreUtils.java
@@ -1089,9 +1089,9 @@ public static void removeFromFilter(Context context, Collection<ParcelableUser>
             }
             linkValues.add(linkWithoutScheme);
         }
-        ContentResolverUtils.bulkDelete(cr, Filters.Users.CONTENT_URI, Filters.Users.USER_KEY, userKeyValues, null);
-        ContentResolverUtils.bulkDelete(cr, Filters.Keywords.CONTENT_URI, Filters.Keywords.VALUE, keywordValues, null);
-        ContentResolverUtils.bulkDelete(cr, Filters.Links.CONTENT_URI, Filters.Links.VALUE, linkValues, null);
+        ContentResolverUtils.bulkDelete(cr, Filters.Users.CONTENT_URI, Filters.Users.USER_KEY, false, userKeyValues, null);
+        ContentResolverUtils.bulkDelete(cr, Filters.Keywords.CONTENT_URI, Filters.Keywords.VALUE, false, keywordValues, null);
+        ContentResolverUtils.bulkDelete(cr, Filters.Links.CONTENT_URI, Filters.Links.VALUE, false, linkValues, null);
     }
 
     public interface UpdateActivityAction {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/content/ContentResolverUtils.java b/twidere/src/main/java/org/mariotaku/twidere/util/content/ContentResolverUtils.java
index ed30dd3b26..e01b794355 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/content/ContentResolverUtils.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/content/ContentResolverUtils.java
@@ -26,8 +26,6 @@
 import android.support.annotation.Nullable;
 import android.text.TextUtils;
 
-import org.mariotaku.sqliteqb.library.ArgsArray;
-import org.mariotaku.sqliteqb.library.Columns;
 import org.mariotaku.sqliteqb.library.Expression;
 import org.mariotaku.twidere.util.TwidereArrayUtils;
 
@@ -42,15 +40,15 @@ private ContentResolverUtils() {
     }
 
     public static <T> int bulkDelete(@NonNull final ContentResolver resolver, @NonNull final Uri uri,
-                                     @NonNull final String inColumn, @Nullable final Collection<T> colValues,
-                                     final String extraWhere) {
+                                     @NonNull final String matchColumn, final boolean notIn,
+                                     @Nullable final Collection<T> colValues, final String extraWhere) {
         if (colValues == null) return 0;
-        return bulkDelete(resolver, uri, inColumn, colValues.toArray(), extraWhere);
+        return bulkDelete(resolver, uri, matchColumn, notIn, colValues.toArray(), extraWhere);
     }
 
     public static int bulkDelete(@NonNull final ContentResolver resolver, @NonNull final Uri uri,
-                                 @NonNull final String inColumn, @Nullable final Object colValues,
-                                 final String extraWhere) {
+                                 @NonNull final String matchColumn, final boolean notIn,
+                                 @Nullable final Object colValues, final String extraWhere) {
         if (colValues == null) return 0;
         final int colValuesLength = Array.getLength(colValues), blocksCount = colValuesLength / MAX_BULK_COUNT + 1;
         int rowsDeleted = 0;
@@ -58,8 +56,12 @@ public static int bulkDelete(@NonNull final ContentResolver resolver, @NonNull f
             final int start = i * MAX_BULK_COUNT, end = Math.min(start + MAX_BULK_COUNT,
                     colValuesLength);
             final String[] block = TwidereArrayUtils.toStringArray(colValues, start, end);
-            final StringBuilder where = new StringBuilder(Expression.in(new Columns.Column(inColumn),
-                    new ArgsArray(block.length)).getSQL());
+            final StringBuilder where;
+            if (notIn) {
+                where = new StringBuilder(Expression.notInArgs(matchColumn, block.length).getSQL());
+            } else {
+                where = new StringBuilder(Expression.inArgs(matchColumn, block.length).getSQL());
+            }
             if (!TextUtils.isEmpty(extraWhere)) {
                 where.append(" AND ").append(extraWhere);
             }
diff --git a/twidere/src/main/kotlin/org/mariotaku/ktextension/TextViewExtensions.kt b/twidere/src/main/kotlin/org/mariotaku/ktextension/TextViewExtensions.kt
index 52b4e9a26e..b5eff078e2 100644
--- a/twidere/src/main/kotlin/org/mariotaku/ktextension/TextViewExtensions.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/ktextension/TextViewExtensions.kt
@@ -1,6 +1,13 @@
 package org.mariotaku.ktextension
 
+import android.graphics.Typeface
 import android.widget.TextView
 
 val TextView.empty: Boolean
     get() = length() <= 0
+
+fun TextView.applyFontFamily(lightFont: Boolean) {
+    if (lightFont) {
+        typeface = Typeface.create("sans-serif-light", typeface.style)
+    }
+}
\ No newline at end of file
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/activity/QuickSearchBarActivity.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/activity/QuickSearchBarActivity.kt
index 4992280b2c..2e013e540e 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/activity/QuickSearchBarActivity.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/activity/QuickSearchBarActivity.kt
@@ -85,7 +85,7 @@ class QuickSearchBarActivity : BaseActivity(), OnClickListener, LoaderCallbacks<
         }
         adapter.addRemovedPositions(reverseSortedPositions)
         ContentResolverUtils.bulkDelete(contentResolver, SearchHistory.CONTENT_URI,
-                SearchHistory._ID, ids, null)
+                SearchHistory._ID, false, ids, null)
         supportLoaderManager.restartLoader(0, null, this)
     }
 
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/activity/WebLinkHandlerActivity.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/activity/WebLinkHandlerActivity.kt
index d14cac22d6..386ba12f2e 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/activity/WebLinkHandlerActivity.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/activity/WebLinkHandlerActivity.kt
@@ -2,13 +2,11 @@ package org.mariotaku.twidere.activity
 
 import android.app.Activity
 import android.content.Intent
-import android.content.UriMatcher
 import android.net.Uri
 import android.os.Bundle
 import android.text.TextUtils
 import org.apache.commons.lang3.ArrayUtils
 import org.mariotaku.ktextension.toLong
-import org.mariotaku.twidere.Constants
 import org.mariotaku.twidere.R
 import org.mariotaku.twidere.TwidereConstants.*
 import org.mariotaku.twidere.app.TwidereApplication
@@ -32,7 +30,7 @@ class WebLinkHandlerActivity : Activity() {
         val (handledIntent, handledSuccessfully) = when (uri.host) {
             "twitter.com", "www.twitter.com", "mobile.twitter.com" -> handleTwitterLink(regulateTwitterUri(uri))
             "fanfou.com" -> handleFanfouLink(uri)
-            "twidere.mariotaku.org" -> handleTwidereExternalLink(uri)
+            "twidere.org", "twidere.mariotaku.org" -> handleTwidereExternalLink(uri)
             else -> Pair(null, false)
         }
         if (handledIntent != null) {
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/DummyItemAdapter.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/DummyItemAdapter.kt
index ff289ed0b3..ae09d1e2e2 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/DummyItemAdapter.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/DummyItemAdapter.kt
@@ -43,6 +43,7 @@ class DummyItemAdapter @JvmOverloads constructor(
     override var textSize: Float = 0f
     override var linkHighlightingStyle: Int = 0
     override var nameFirst: Boolean = false
+    override var lightFont: Boolean = false
     override var profileImageEnabled: Boolean = false
     override var sensitiveContentEnabled: Boolean = false
     override var mediaPreviewEnabled: Boolean = false
@@ -182,6 +183,7 @@ class DummyItemAdapter @JvmOverloads constructor(
         sensitiveContentEnabled = preferences[displaySensitiveContentsKey]
         showCardActions = !preferences[hideCardActionsKey]
         linkHighlightingStyle = preferences[linkHighlightOptionKey]
+        lightFont = preferences[lightFontKey]
         useStarsForLikes = preferences[iWantMyStarsBackKey]
         showAbsoluteTime = preferences[showAbsoluteTimeKey]
     }
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/ParcelableStatusesAdapter.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/ParcelableStatusesAdapter.kt
index 6584010a51..69a6e30602 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/ParcelableStatusesAdapter.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/ParcelableStatusesAdapter.kt
@@ -37,12 +37,8 @@ import org.mariotaku.twidere.adapter.iface.IItemCountsAdapter
 import org.mariotaku.twidere.adapter.iface.ILoadMoreSupportAdapter
 import org.mariotaku.twidere.adapter.iface.ILoadMoreSupportAdapter.Companion.ITEM_VIEW_TYPE_LOAD_INDICATOR
 import org.mariotaku.twidere.adapter.iface.IStatusesAdapter
+import org.mariotaku.twidere.constant.*
 import org.mariotaku.twidere.constant.SharedPreferenceConstants.KEY_DISPLAY_SENSITIVE_CONTENTS
-import org.mariotaku.twidere.constant.SharedPreferenceConstants.KEY_LINK_HIGHLIGHT_OPTION
-import org.mariotaku.twidere.constant.hideCardActionsKey
-import org.mariotaku.twidere.constant.iWantMyStarsBackKey
-import org.mariotaku.twidere.constant.mediaPreviewStyleKey
-import org.mariotaku.twidere.constant.nameFirstKey
 import org.mariotaku.twidere.model.ObjectId
 import org.mariotaku.twidere.model.ParcelableStatus
 import org.mariotaku.twidere.model.ParcelableStatusCursorIndices
@@ -75,9 +71,10 @@ abstract class ParcelableStatusesAdapter(
     final override val nameFirst: Boolean = preferences[nameFirstKey]
     final override val useStarsForLikes: Boolean = preferences[iWantMyStarsBackKey]
     @TwidereLinkify.HighlightStyle
-    final override val linkHighlightingStyle: Int
-    final override val mediaPreviewEnabled: Boolean
-    final override val sensitiveContentEnabled: Boolean
+    final override val linkHighlightingStyle: Int = preferences[linkHighlightOptionKey]
+    final override val lightFont: Boolean = preferences[lightFontKey]
+    final override val mediaPreviewEnabled: Boolean = Utils.isMediaPreviewEnabled(context, preferences)
+    final override val sensitiveContentEnabled: Boolean = preferences.getBoolean(KEY_DISPLAY_SENSITIVE_CONTENTS, false)
     private val showCardActions: Boolean = !preferences[hideCardActionsKey]
 
     private val gapLoadingIds: MutableSet<ObjectId> = HashSet()
@@ -121,9 +118,6 @@ abstract class ParcelableStatusesAdapter(
 
     init {
         mediaLoadingHandler = MediaLoadingHandler(*progressViewIds)
-        linkHighlightingStyle = Utils.getLinkHighlightingStyleInt(preferences.getString(KEY_LINK_HIGHLIGHT_OPTION, null))
-        mediaPreviewEnabled = Utils.isMediaPreviewEnabled(context, preferences)
-        sensitiveContentEnabled = preferences.getBoolean(KEY_DISPLAY_SENSITIVE_CONTENTS, false)
         val handler = StatusAdapterLinkClickHandler<List<ParcelableStatus>>(context, preferences)
         twidereLinkify = TwidereLinkify(handler)
         handler.setAdapter(this)
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/iface/IStatusesAdapter.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/iface/IStatusesAdapter.kt
index 890782d3a8..0136d3d936 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/iface/IStatusesAdapter.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/adapter/iface/IStatusesAdapter.kt
@@ -15,6 +15,8 @@ interface IStatusesAdapter<in Data> : IContentAdapter, IGapSupportedAdapter {
     @TwidereLinkify.HighlightStyle
     val linkHighlightingStyle: Int
 
+    val lightFont: Boolean
+
     @CardMediaContainer.PreviewStyle
     val mediaPreviewStyle: Int
 
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/constant/PreferenceKeys.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/constant/PreferenceKeys.kt
index 45338624e2..909943d836 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/constant/PreferenceKeys.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/constant/PreferenceKeys.kt
@@ -58,6 +58,7 @@ val filterUnavailableQuoteStatusesKey = KBooleanKey("filter_unavailable_quote_st
 val filterPossibilitySensitiveStatusesKey = KBooleanKey("filter_possibility_sensitive_statuses", false)
 val chromeCustomTabKey = KBooleanKey("chrome_custom_tab", true)
 val usageStatisticsKey = KBooleanKey(KEY_USAGE_STATISTICS, false)
+val lightFontKey = KBooleanKey("light_font", false)
 
 object themeBackgroundAlphaKey : KSimpleKey<Int>(KEY_THEME_BACKGROUND_ALPHA, 0xFF) {
     override fun read(preferences: SharedPreferences): Int {
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/AddStatusFilterDialogFragment.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/AddStatusFilterDialogFragment.kt
index 15f2c236d9..f0b9a10750 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/AddStatusFilterDialogFragment.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/AddStatusFilterDialogFragment.kt
@@ -105,9 +105,9 @@ class AddStatusFilterDialogFragment : BaseDialogFragment() {
                 }
             }
             val resolver = context.contentResolver
-            ContentResolverUtils.bulkDelete(resolver, Filters.Users.CONTENT_URI, Filters.Users.USER_KEY, userKeys, null)
-            ContentResolverUtils.bulkDelete(resolver, Filters.Keywords.CONTENT_URI, Filters.Keywords.VALUE, keywords, null)
-            ContentResolverUtils.bulkDelete(resolver, Filters.Sources.CONTENT_URI, Filters.Sources.VALUE, sources, null)
+            ContentResolverUtils.bulkDelete(resolver, Filters.Users.CONTENT_URI, Filters.Users.USER_KEY, false, userKeys, null)
+            ContentResolverUtils.bulkDelete(resolver, Filters.Keywords.CONTENT_URI, Filters.Keywords.VALUE, false, keywords, null)
+            ContentResolverUtils.bulkDelete(resolver, Filters.Sources.CONTENT_URI, Filters.Sources.VALUE, false, sources, null)
             ContentResolverUtils.bulkInsert(resolver, Filters.Users.CONTENT_URI, userValues)
             ContentResolverUtils.bulkInsert(resolver, Filters.Keywords.CONTENT_URI, keywordValues)
             ContentResolverUtils.bulkInsert(resolver, Filters.Sources.CONTENT_URI, sourceValues)
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/StatusFragment.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/StatusFragment.kt
index 6923477629..e462d136c2 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/StatusFragment.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/StatusFragment.kt
@@ -69,6 +69,7 @@ import kotlinx.android.synthetic.main.fragment_status.*
 import kotlinx.android.synthetic.main.header_status_common.view.*
 import kotlinx.android.synthetic.main.layout_content_fragment_common.*
 import org.mariotaku.kpreferences.get
+import org.mariotaku.ktextension.applyFontFamily
 import org.mariotaku.ktextension.findPositionByItemId
 import org.mariotaku.microblog.library.MicroBlogException
 import org.mariotaku.microblog.library.twitter.model.Paging
@@ -1170,6 +1171,9 @@ class StatusFragment : BaseFragment(), LoaderCallbacks<SingleResponse<Parcelable
             val resources = activity.resources
             itemView.countsUsers.addItemDecoration(SpacingItemDecoration(resources.getDimensionPixelOffset(R.dimen.element_spacing_normal)))
 
+
+            itemView.text.applyFontFamily(adapter.lightFont)
+            itemView.quotedText.applyFontFamily(adapter.lightFont)
         }
 
 
@@ -1178,15 +1182,11 @@ class StatusFragment : BaseFragment(), LoaderCallbacks<SingleResponse<Parcelable
                 private val statusAdapter: StatusAdapter
         ) : BaseRecyclerViewAdapter<ViewHolder>(statusAdapter.context) {
 
-            private val inflater: LayoutInflater
+            private val inflater = LayoutInflater.from(statusAdapter.context)
 
             private var counts: List<LabeledCount>? = null
             private var users: List<ParcelableUser>? = null
 
-            init {
-                inflater = LayoutInflater.from(statusAdapter.context)
-            }
-
             override fun onBindViewHolder(holder: ViewHolder, position: Int) {
                 when (holder.itemViewType) {
                     ITEM_VIEW_TYPE_USER -> {
@@ -1461,6 +1461,7 @@ class StatusFragment : BaseFragment(), LoaderCallbacks<SingleResponse<Parcelable
         private val cardBackgroundColor: Int
         override val mediaPreviewStyle: Int
         override val linkHighlightingStyle: Int
+        override val lightFont: Boolean
         override val mediaPreviewEnabled: Boolean
         override val sensitiveContentEnabled: Boolean
         private val mShowCardActions: Boolean
@@ -1511,6 +1512,7 @@ class StatusFragment : BaseFragment(), LoaderCallbacks<SingleResponse<Parcelable
                     ThemeUtils.getThemeBackgroundOption(context),
                     ThemeUtils.getUserThemeBackgroundAlpha(context))
             nameFirst = preferences[nameFirstKey]
+            lightFont = preferences[lightFontKey]
             mediaPreviewStyle = preferences[mediaPreviewStyleKey]
             linkHighlightingStyle = preferences[linkHighlightOptionKey]
             mediaPreviewEnabled = preferences[mediaPreviewKey]
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/filter/FiltersSubscriptionsFragment.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/filter/FiltersSubscriptionsFragment.kt
index 0773572bd4..899d7aa6e8 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/filter/FiltersSubscriptionsFragment.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/filter/FiltersSubscriptionsFragment.kt
@@ -1,5 +1,6 @@
 package org.mariotaku.twidere.fragment.filter
 
+import android.annotation.SuppressLint
 import android.app.Activity
 import android.app.Dialog
 import android.content.Context
@@ -14,21 +15,26 @@ import android.support.v4.content.Loader
 import android.support.v4.widget.SimpleCursorAdapter
 import android.support.v7.app.AlertDialog
 import android.view.*
+import android.widget.AbsListView
+import android.widget.ListView
 import android.widget.TextView
 import com.rengwuxian.materialedittext.MaterialEditText
 import kotlinx.android.synthetic.main.layout_list_with_empty_view.*
 import okhttp3.HttpUrl
 import org.mariotaku.abstask.library.TaskStarter
-import org.mariotaku.ktextension.Bundle
-import org.mariotaku.ktextension.empty
-import org.mariotaku.ktextension.isEmpty
-import org.mariotaku.ktextension.set
+import org.mariotaku.ktextension.*
+import org.mariotaku.sqliteqb.library.Expression
 import org.mariotaku.twidere.R
 import org.mariotaku.twidere.TwidereConstants.REQUEST_PURCHASE_EXTRA_FEATURES
 import org.mariotaku.twidere.constant.IntentConstants.EXTRA_ACTION
 import org.mariotaku.twidere.constant.IntentConstants.INTENT_PACKAGE_PREFIX
+import org.mariotaku.twidere.extension.invertSelection
 import org.mariotaku.twidere.extension.model.getComponentLabel
+import org.mariotaku.twidere.extension.model.instantiateComponent
 import org.mariotaku.twidere.extension.model.setupUrl
+import org.mariotaku.twidere.extension.selectAll
+import org.mariotaku.twidere.extension.selectNone
+import org.mariotaku.twidere.extension.updateSelectionItems
 import org.mariotaku.twidere.fragment.BaseDialogFragment
 import org.mariotaku.twidere.fragment.BaseFragment
 import org.mariotaku.twidere.fragment.ExtraFeaturesIntroductionDialogFragment
@@ -40,16 +46,20 @@ import org.mariotaku.twidere.model.analyzer.PurchaseFinished
 import org.mariotaku.twidere.provider.TwidereDataStore.Filters
 import org.mariotaku.twidere.task.filter.RefreshFiltersSubscriptionsTask
 import org.mariotaku.twidere.util.Analyzer
+import org.mariotaku.twidere.util.content.ContentResolverUtils
 import org.mariotaku.twidere.util.premium.ExtraFeaturesService
 import org.mariotaku.twidere.util.view.SimpleTextWatcher
 import java.lang.ref.WeakReference
 
+
 /**
  * Created by mariotaku on 2016/12/31.
  */
-class FiltersSubscriptionsFragment : BaseFragment(), LoaderManager.LoaderCallbacks<Cursor> {
+class FiltersSubscriptionsFragment : BaseFragment(), LoaderManager.LoaderCallbacks<Cursor>,
+        AbsListView.MultiChoiceModeListener {
 
     private lateinit var adapter: FilterSubscriptionsAdapter
+    private var actionMode: ActionMode? = null
 
     override fun onActivityCreated(savedInstanceState: Bundle?) {
         super.onActivityCreated(savedInstanceState)
@@ -57,6 +67,8 @@ class FiltersSubscriptionsFragment : BaseFragment(), LoaderManager.LoaderCallbac
 
         adapter = FilterSubscriptionsAdapter(context)
         listView.adapter = adapter
+        listView.choiceMode = ListView.CHOICE_MODE_MULTIPLE_MODAL
+        listView.setMultiChoiceModeListener(this)
 
         listContainer.visibility = View.GONE
         progressContainer.visibility = View.VISIBLE
@@ -125,12 +137,13 @@ class FiltersSubscriptionsFragment : BaseFragment(), LoaderManager.LoaderCallbac
             }
             R.id.refresh -> {
                 executeAfterFragmentResumed { fragment ->
-                    val dfRef = WeakReference(ProgressDialogFragment.show(fragment.childFragmentManager, "refresh_filters"))
+                    val dfRef = WeakReference(ProgressDialogFragment.show(fragment.childFragmentManager,
+                            FRAGMENT_TAG_RREFRESH_FILTERS))
                     val task = RefreshFiltersSubscriptionsTask(fragment.context)
                     val fragmentRef = WeakReference(fragment)
                     task.callback = {
                         fragmentRef.get()?.executeAfterFragmentResumed { fragment ->
-                            val df = dfRef.get() ?: fragment.childFragmentManager.findFragmentByTag("refresh_filters") as? DialogFragment
+                            val df = dfRef.get() ?: fragment.childFragmentManager.findFragmentByTag(FRAGMENT_TAG_RREFRESH_FILTERS) as? DialogFragment
                             df?.dismiss()
                         }
                     }
@@ -172,6 +185,74 @@ class FiltersSubscriptionsFragment : BaseFragment(), LoaderManager.LoaderCallbac
         progressContainer.visibility = View.GONE
     }
 
+    override fun onItemCheckedStateChanged(mode: ActionMode?, position: Int, id: Long, checked: Boolean) {
+
+    }
+
+
+    override fun onCreateActionMode(mode: ActionMode, menu: Menu): Boolean {
+        actionMode = mode
+        mode.menuInflater.inflate(R.menu.action_multi_select_items, menu)
+        menu.setGroupAvailability(R.id.selection_group, true)
+        return true
+    }
+
+    override fun onPrepareActionMode(mode: ActionMode, menu: Menu): Boolean {
+        listView.updateSelectionItems(menu)
+        return true
+    }
+
+    override fun onActionItemClicked(mode: ActionMode, item: MenuItem): Boolean {
+        when (item.itemId) {
+            R.id.delete -> {
+                performDeletion()
+                mode.finish()
+            }
+            R.id.select_all -> {
+                listView.selectAll()
+            }
+            R.id.select_none -> {
+                listView.selectNone()
+            }
+            R.id.invert_selection -> {
+                listView.invertSelection()
+            }
+        }
+        return true
+    }
+
+    override fun onDestroyActionMode(mode: ActionMode) {
+        actionMode = null
+    }
+
+    @SuppressLint("Recycle")
+    private fun performDeletion() {
+        val ids = listView.checkedItemIds
+        val resolver = context.contentResolver
+        val where = Expression.inArgs(Filters.Subscriptions._ID, ids.size).sql
+        val whereArgs = ids.toStringArray()
+        resolver.query(Filters.Subscriptions.CONTENT_URI, Filters.Subscriptions.COLUMNS, where,
+                whereArgs, null)?.useCursor { cursor ->
+            val indices = FiltersSubscriptionCursorIndices(cursor)
+            cursor.moveToFirst()
+            while (!cursor.isAfterLast) {
+                val subscription = indices.newObject(cursor)
+                subscription.instantiateComponent(context)?.deleteLocalData()
+                cursor.moveToNext()
+            }
+        }
+        ContentResolverUtils.bulkDelete(resolver, Filters.Subscriptions.CONTENT_URI, Filters._ID,
+                false, ids, null)
+        ContentResolverUtils.bulkDelete(resolver, Filters.Users.CONTENT_URI, Filters.Users.SOURCE,
+                false, ids, null)
+        ContentResolverUtils.bulkDelete(resolver, Filters.Keywords.CONTENT_URI, Filters.Keywords.SOURCE,
+                false, ids, null)
+        ContentResolverUtils.bulkDelete(resolver, Filters.Sources.CONTENT_URI, Filters.Sources.SOURCE,
+                false, ids, null)
+        ContentResolverUtils.bulkDelete(resolver, Filters.Links.CONTENT_URI, Filters.Links.SOURCE,
+                false, ids, null)
+    }
+
     private fun showAddUrlSubscription() {
         val df = AddUrlSubscriptionDialogFragment()
         df.arguments = Bundle {
@@ -216,6 +297,8 @@ class FiltersSubscriptionsFragment : BaseFragment(), LoaderManager.LoaderCallbac
                 val subscription = FiltersSubscription()
                 subscription.name = editName.text.toString()
                 subscription.setupUrl(editUrl.text.toString())
+                val component = subscription.instantiateComponent(context) ?: return@setPositiveButton
+                component.firstAdded()
                 context.contentResolver.insert(Filters.Subscriptions.CONTENT_URI, FiltersSubscriptionValuesCreator.create(subscription))
             }
             builder.setNegativeButton(android.R.string.cancel, null)
@@ -257,6 +340,7 @@ class FiltersSubscriptionsFragment : BaseFragment(), LoaderManager.LoaderCallbac
         const val REQUEST_ADD_URL_SUBSCRIPTION_PURCHASE = 101
         const val EXTRA_ADD_SUBSCRIPTION_URL = "add_subscription.url"
         const val EXTRA_ADD_SUBSCRIPTION_NAME = "add_subscription.name"
+        private const val FRAGMENT_TAG_RREFRESH_FILTERS = "refresh_filters"
     }
 }
 
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/task/GetTrendsTask.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/task/GetTrendsTask.kt
index bbcc74e2e8..32b81789fa 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/task/GetTrendsTask.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/task/GetTrendsTask.kt
@@ -72,7 +72,7 @@ abstract class GetTrendsTask(
             }
             cr.delete(uri, null, null)
             ContentResolverUtils.bulkInsert(cr, uri, valuesArray)
-            ContentResolverUtils.bulkDelete(cr, TwidereDataStore.CachedHashtags.CONTENT_URI, TwidereDataStore.CachedHashtags.NAME, hashtags, null)
+            ContentResolverUtils.bulkDelete(cr, TwidereDataStore.CachedHashtags.CONTENT_URI, TwidereDataStore.CachedHashtags.NAME, false, hashtags, null)
             ContentResolverUtils.bulkInsert(cr, TwidereDataStore.CachedHashtags.CONTENT_URI,
                     hashtagValues.toTypedArray())
         }
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/task/filter/RefreshFiltersSubscriptionsTask.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/task/filter/RefreshFiltersSubscriptionsTask.kt
index f0ec5647eb..caa82642cb 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/task/filter/RefreshFiltersSubscriptionsTask.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/task/filter/RefreshFiltersSubscriptionsTask.kt
@@ -1,5 +1,6 @@
 package org.mariotaku.twidere.task.filter
 
+import android.annotation.SuppressLint
 import android.content.ContentResolver
 import android.content.Context
 import android.net.Uri
@@ -12,32 +13,56 @@ import org.mariotaku.twidere.model.FiltersSubscriptionCursorIndices
 import org.mariotaku.twidere.model.`FiltersData$BaseItemValuesCreator`
 import org.mariotaku.twidere.model.`FiltersData$UserItemValuesCreator`
 import org.mariotaku.twidere.provider.TwidereDataStore.Filters
+import org.mariotaku.twidere.util.DebugLog
 import org.mariotaku.twidere.util.content.ContentResolverUtils
+import org.mariotaku.twidere.util.sync.LOGTAG_SYNC
 import java.io.IOException
+import java.util.*
 
 class RefreshFiltersSubscriptionsTask(val context: Context) : AbstractTask<Unit?, Boolean, (Boolean) -> Unit>() {
 
+    @SuppressLint("Recycle")
     override fun doLongOperation(param: Unit?): Boolean {
         val resolver = context.contentResolver
-        return resolver.query(Filters.Subscriptions.CONTENT_URI, Filters.Subscriptions.COLUMNS, null, null, null)?.useCursor { cursor ->
+        val sourceIds = ArrayList<Long>()
+        resolver.query(Filters.Subscriptions.CONTENT_URI, Filters.Subscriptions.COLUMNS, null, null, null)?.useCursor { cursor ->
             val indices = FiltersSubscriptionCursorIndices(cursor)
-            cursor.moveToPosition(-1)
-            while (cursor.moveToNext()) {
+            cursor.moveToFirst()
+            while (!cursor.isAfterLast) {
                 val subscription = indices.newObject(cursor)
-                val component = subscription.instantiateComponent(context) ?: continue
-                try {
-                    if (component.fetchFilters()) {
-                        updateUserItems(resolver, component.users, subscription.id)
-                        updateBaseItems(resolver, component.keywords, Filters.Keywords.CONTENT_URI, subscription.id)
-                        updateBaseItems(resolver, component.links, Filters.Links.CONTENT_URI, subscription.id)
-                        updateBaseItems(resolver, component.sources, Filters.Sources.CONTENT_URI, subscription.id)
+                sourceIds.add(subscription.id)
+                val component = subscription.instantiateComponent(context)
+                if (component != null) {
+                    try {
+                        if (component.fetchFilters()) {
+                            updateUserItems(resolver, component.users, subscription.id)
+                            updateBaseItems(resolver, component.keywords, Filters.Keywords.CONTENT_URI, subscription.id)
+                            updateBaseItems(resolver, component.links, Filters.Links.CONTENT_URI, subscription.id)
+                            updateBaseItems(resolver, component.sources, Filters.Sources.CONTENT_URI, subscription.id)
+                        }
+                    } catch (e: IOException) {
+                        DebugLog.w(LOGTAG_SYNC, "Unable to refresh filters", e)
                     }
-                } catch (e: IOException) {
-                    // Ignore
                 }
+                cursor.moveToNext()
             }
-            return@useCursor true
-        } ?: false
+        }
+        // Delete 'orphaned' filter items with `sourceId` > 0
+        val extraWhere = Expression.greaterThan(Filters.SOURCE, 0).sql
+        ContentResolverUtils.bulkDelete(resolver, Filters.Users.CONTENT_URI, Filters.Users.SOURCE,
+                true, sourceIds, extraWhere)
+        ContentResolverUtils.bulkDelete(resolver, Filters.Keywords.CONTENT_URI, Filters.Keywords.SOURCE,
+                true, sourceIds, extraWhere)
+        ContentResolverUtils.bulkDelete(resolver, Filters.Sources.CONTENT_URI, Filters.Sources.SOURCE,
+                true, sourceIds, extraWhere)
+        ContentResolverUtils.bulkDelete(resolver, Filters.Links.CONTENT_URI, Filters.Links.SOURCE,
+                true, sourceIds, extraWhere)
+        try {
+            Thread.sleep(1000)
+        } catch (e: InterruptedException) {
+            return false
+        }
+        return true
     }
 
     override fun afterExecute(callback: ((Boolean) -> Unit)?, result: Boolean) {
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/util/MultiSelectEventHandler.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/util/MultiSelectEventHandler.kt
index faef475b59..0e9c0e3c6f 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/util/MultiSelectEventHandler.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/util/MultiSelectEventHandler.kt
@@ -130,7 +130,7 @@ class MultiSelectEventHandler(
                     }
                 }
                 ContentResolverUtils.bulkDelete(resolver, Filters.Users.CONTENT_URI,
-                        Filters.Users.USER_KEY, userIds, null)
+                        Filters.Users.USER_KEY, false, userIds, null)
                 ContentResolverUtils.bulkInsert(resolver, Filters.Users.CONTENT_URI, valuesList)
                 Toast.makeText(activity, R.string.message_toast_users_filters_added, Toast.LENGTH_SHORT).show()
                 mode.finish()
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/util/filter/UrlFiltersSubscriptionProvider.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/util/filter/UrlFiltersSubscriptionProvider.kt
index 21a612d1be..2382048a4f 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/util/filter/UrlFiltersSubscriptionProvider.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/util/filter/UrlFiltersSubscriptionProvider.kt
@@ -75,6 +75,15 @@ class UrlFiltersSubscriptionProvider(context: Context, val arguments: Arguments)
         }
     }
 
+    override fun firstAdded(): Boolean {
+        etagCache[arguments.url] = null
+        return true
+    }
+    override fun deleteLocalData(): Boolean {
+        etagCache[arguments.url] = null
+        return true
+    }
+
     override fun getUsers(): List<FiltersData.UserItem>? {
         return filters?.users
     }
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/util/sync/FileBasedDraftsSyncAction.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/util/sync/FileBasedDraftsSyncAction.kt
index 7dfc3439fb..c0e0c84383 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/util/sync/FileBasedDraftsSyncAction.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/util/sync/FileBasedDraftsSyncAction.kt
@@ -143,7 +143,7 @@ abstract class FileBasedDraftsSyncAction<RemoteFileInfo>(val context: Context) :
             val fileList = removeLocalIdsList.joinToString(",") { "$it.eml" }
             DebugLog.d(LOGTAG_SYNC, "Removing local drafts $fileList")
             ContentResolverUtils.bulkDelete(context.contentResolver, Drafts.CONTENT_URI,
-                    Drafts.UNIQUE_ID, removeLocalIdsList, null)
+                    Drafts.UNIQUE_ID, false, removeLocalIdsList, null)
         }
 
         // Remove remote items
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/util/sync/FileBasedFiltersDataSyncAction.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/util/sync/FileBasedFiltersDataSyncAction.kt
index 8ee23f7c8e..9be202683d 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/util/sync/FileBasedFiltersDataSyncAction.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/util/sync/FileBasedFiltersDataSyncAction.kt
@@ -53,13 +53,13 @@ abstract class FileBasedFiltersDataSyncAction<DownloadSession : Closeable, Uploa
 
     override fun removeFromLocal(data: FiltersData) {
         ContentResolverUtils.bulkDelete(context.contentResolver, Filters.Users.CONTENT_URI,
-                Filters.Users.USER_KEY, data.users?.map { it.userKey }, null)
+                Filters.Users.USER_KEY, false, data.users?.map { it.userKey }, null)
         ContentResolverUtils.bulkDelete(context.contentResolver, Filters.Keywords.CONTENT_URI,
-                Filters.Keywords.VALUE, data.keywords?.map { it.value }, null)
+                Filters.Keywords.VALUE, false, data.keywords?.map { it.value }, null)
         ContentResolverUtils.bulkDelete(context.contentResolver, Filters.Sources.CONTENT_URI,
-                Filters.Sources.VALUE, data.sources?.map { it.value }, null)
+                Filters.Sources.VALUE, false, data.sources?.map { it.value }, null)
         ContentResolverUtils.bulkDelete(context.contentResolver, Filters.Links.CONTENT_URI,
-                Filters.Links.VALUE, data.links?.map { it.value }, null)
+                Filters.Links.VALUE, false, data.links?.map { it.value }, null)
     }
 
     override fun newData(): FiltersData {
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/view/holder/StatusViewHolder.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/view/holder/StatusViewHolder.kt
index 1b02ccf8e3..537ff02dc7 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/view/holder/StatusViewHolder.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/view/holder/StatusViewHolder.kt
@@ -10,6 +10,7 @@ import android.view.View.OnClickListener
 import android.view.View.OnLongClickListener
 import android.widget.ImageView
 import kotlinx.android.synthetic.main.list_item_status.view.*
+import org.mariotaku.ktextension.applyFontFamily
 import org.mariotaku.twidere.Constants
 import org.mariotaku.twidere.R
 import org.mariotaku.twidere.TwidereConstants.USER_TYPE_FANFOU_COM
@@ -83,6 +84,8 @@ class StatusViewHolder(private val adapter: IStatusesAdapter<*>, itemView: View)
             View.inflate(quotedMediaPreview.context, R.layout.layout_card_media_preview,
                     itemView.quotedMediaPreview)
         }
+        textView.applyFontFamily(adapter.lightFont)
+        quotedTextView.applyFontFamily(adapter.lightFont)
     }
 
 
@@ -639,5 +642,5 @@ class StatusViewHolder(private val adapter: IStatusesAdapter<*>, itemView: View)
         }
     }
 
-
 }
+
diff --git a/twidere/src/main/res/values-w600dp/bools.xml b/twidere/src/main/res/values-sw600dp-land/bools.xml
similarity index 100%
rename from twidere/src/main/res/values-w600dp/bools.xml
rename to twidere/src/main/res/values-sw600dp-land/bools.xml
diff --git a/twidere/src/main/res/values-sw820dp/bools.xml b/twidere/src/main/res/values-sw820dp/bools.xml
new file mode 100644
index 0000000000..835b687e7d
--- /dev/null
+++ b/twidere/src/main/res/values-sw820dp/bools.xml
@@ -0,0 +1,9 @@
+<?xml version="1.0" encoding="utf-8"?>
+<resources>
+
+    <bool name="default_display_tab_label">true</bool>
+
+    <!-- Config for home screen -->
+    <bool name="home_tab_has_multiple_columns">true</bool>
+
+</resources>
\ No newline at end of file
diff --git a/twidere/src/main/res/values/strings.xml b/twidere/src/main/res/values/strings.xml
index 1f66f73645..d69e6ccfd6 100644
--- a/twidere/src/main/res/values/strings.xml
+++ b/twidere/src/main/res/values/strings.xml
@@ -865,6 +865,7 @@
     <string name="preference_title_database_item_limit">Database size limit</string>
     <string name="preference_title_filter_manage_subscriptions">Manage</string>
     <string name="preference_title_filter_subscriptions">Filter subscriptions</string>
+    <string name="preference_title_light_font">Light font</string>
     <string name="preference_title_storage">Storage</string>
     <string name="preference_title_translate">Translate</string>
 
diff --git a/twidere/src/main/res/xml/preferences_cards.xml b/twidere/src/main/res/xml/preferences_cards.xml
index 42493806bf..583f8d6221 100644
--- a/twidere/src/main/res/xml/preferences_cards.xml
+++ b/twidere/src/main/res/xml/preferences_cards.xml
@@ -69,6 +69,15 @@
             android:value="true"/>
     </org.mariotaku.twidere.preference.LinkHighlightPreference>
 
+    <SwitchPreferenceCompat
+        android:defaultValue="false"
+        android:key="light_font"
+        android:order="28"
+        android:title="@string/preference_title_light_font">
+        <extra
+            android:name="should_recreate"
+            android:value="true"/>
+    </SwitchPreferenceCompat>
     <SwitchPreferenceCompat
         android:defaultValue="false"
         android:key="hide_card_actions"
