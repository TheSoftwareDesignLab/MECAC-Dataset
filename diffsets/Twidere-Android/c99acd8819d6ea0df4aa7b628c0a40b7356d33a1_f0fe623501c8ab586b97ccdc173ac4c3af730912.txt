diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/activity/ComposeActivity.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/activity/ComposeActivity.kt
index 1de4afe3aa..62a1524859 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/activity/ComposeActivity.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/activity/ComposeActivity.kt
@@ -661,7 +661,7 @@ class ComposeActivity : BaseActivity(), OnMenuItemClickListener, OnClickListener
             R.id.location_precise -> {
                 attachLocationChecked = true
                 attachPreciseLocationChecked = true
-                locationText.tag = null
+                locationLabel.tag = null
             }
             R.id.location_coarse -> {
                 attachLocationChecked = true
@@ -1053,7 +1053,6 @@ class ComposeActivity : BaseActivity(), OnMenuItemClickListener, OnClickListener
         val replyToName = userColorNameManager.getDisplayName(status, nameFirst)
         replyLabel.text = getString(R.string.quote_name_text, replyToName, status.text_unescaped)
         replyLabel.visibility = View.VISIBLE
-        replyLabelDivider.visibility = View.VISIBLE
     }
 
     private fun showReplyLabel(status: ParcelableStatus?) {
@@ -1064,12 +1063,10 @@ class ComposeActivity : BaseActivity(), OnMenuItemClickListener, OnClickListener
         val replyToName = userColorNameManager.getDisplayName(status, nameFirst)
         replyLabel.text = getString(R.string.reply_to_name_text, replyToName, status.text_unescaped)
         replyLabel.visibility = View.VISIBLE
-        replyLabelDivider.visibility = View.VISIBLE
     }
 
     private fun hideLabel() {
         replyLabel.visibility = View.GONE
-        replyLabelDivider.visibility = View.GONE
     }
 
     private fun handleReplyIntent(status: ParcelableStatus?): Boolean {
@@ -1346,17 +1343,17 @@ class ComposeActivity : BaseActivity(), OnMenuItemClickListener, OnClickListener
         if (location != null) {
             val attachPreciseLocation = kPreferences[attachPreciseLocationKey]
             if (attachPreciseLocation) {
-                locationText.text = ParcelableLocationUtils.getHumanReadableString(location, 3)
+                locationLabel.text = ParcelableLocationUtils.getHumanReadableString(location, 3)
             } else {
-                if (locationText.tag == null || location != recentLocation) {
+                if (locationLabel.tag == null || location != recentLocation) {
                     val task = DisplayPlaceNameTask(this)
                     task.params = location
-                    task.callback = locationText
+                    task.callback = locationLabel
                     TaskStarter.execute(task)
                 }
             }
         } else {
-            locationText.setText(R.string.unknown_location)
+            locationLabel.setText(R.string.unknown_location)
         }
         recentLocation = location
     }
@@ -1382,7 +1379,7 @@ class ComposeActivity : BaseActivity(), OnMenuItemClickListener, OnClickListener
         }
         val provider = locationManager.getBestProvider(criteria, true)
         if (provider != null) {
-            locationText.setText(R.string.getting_location)
+            locationLabel.setText(R.string.getting_location)
             locationListener = ComposeLocationListener(this)
             locationManager.requestLocationUpdates(provider, 0, 0f, locationListener)
             val location = Utils.getCachedLocation(this)
@@ -1411,14 +1408,14 @@ class ComposeActivity : BaseActivity(), OnMenuItemClickListener, OnClickListener
 
     private fun updateLocationState() {
         if (kPreferences[attachLocationKey]) {
-            locationContainer.visibility = View.VISIBLE
+            locationLabel.visibility = View.VISIBLE
             if (recentLocation != null) {
                 setRecentLocation(recentLocation)
             } else {
-                locationText.setText(R.string.getting_location)
+                locationLabel.setText(R.string.getting_location)
             }
         } else {
-            locationContainer.visibility = View.GONE
+            locationLabel.visibility = View.GONE
         }
     }
 
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/AbsStatusesFragment.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/AbsStatusesFragment.kt
index b66fab4cc8..0ded8e1895 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/AbsStatusesFragment.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/AbsStatusesFragment.kt
@@ -112,7 +112,10 @@ abstract class AbsStatusesFragment : AbsContentListRecyclerViewFragment<Parcelab
      * Used for 'restore position' feature
      */
     protected open val currentReadPositionTag: String?
-        get() = if (readPositionTag == null || tabId < 0) null else "${readPositionTag}_${tabId}_current"
+        get() {
+            val positionTag = readPositionTagWithArguments ?: readPositionTag ?: return null
+            return if (tabId < 0) null else "${positionTag}_${tabId}_current"
+        }
 
     override val extraContentPadding: Rect
         get() {
@@ -488,13 +491,17 @@ abstract class AbsStatusesFragment : AbsContentListRecyclerViewFragment<Parcelab
         if (host == null) return
         if (position == RecyclerView.NO_POSITION || adapter.getStatusCount(false) <= 0) return
         val status = adapter.getStatus(position)
-        val positionKey = if (status.position_key > 0) status.position_key else status.timestamp
+        val readPosition = if (useSortIdAsReadPosition) {
+            status.sort_id
+        } else {
+            status.position_key
+        }
         readPositionTagWithArguments?.let {
             accountKeys.map { accountKey -> Utils.getReadPositionTagWithAccount(it, accountKey) }
-                    .forEach { readStateManager.setPosition(it, positionKey) }
+                    .forEach { readStateManager.setPosition(it, readPosition) }
         }
         currentReadPositionTag?.let {
-            readStateManager.setPosition(it, positionKey, true)
+            readStateManager.setPosition(it, readPosition, true)
         }
     }
 
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/HomeTimelineFragment.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/HomeTimelineFragment.kt
index d3ee88ec00..5218a212cf 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/HomeTimelineFragment.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/HomeTimelineFragment.kt
@@ -88,12 +88,8 @@ class HomeTimelineFragment : CursorStatusesFragment() {
         return super.processWhere(where, whereArgs)
     }
 
-    override val timelineType: String
-        @TimelineType
-        get() = TimelineType.HOME
+    override val timelineType: String = TimelineType.HOME
 
-    override val readPositionTag: String?
-        @ReadPositionTag
-        get() = ReadPositionTag.HOME_TIMELINE
+    override val readPositionTag: String = ReadPositionTag.HOME_TIMELINE
 
 }
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/UserTimelineFragment.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/UserTimelineFragment.kt
index 7e89700971..59574775d6 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/UserTimelineFragment.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/fragment/UserTimelineFragment.kt
@@ -35,9 +35,7 @@ import java.util.*
  */
 class UserTimelineFragment : ParcelableStatusesFragment() {
 
-    override val timelineType: String
-        @TimelineType
-        get() = TimelineType.USER
+    override val timelineType: String = TimelineType.USER
 
     val pinnedStatusIds: Array<String>?
         get() = (parentFragment as? UserTimelineFragmentDelegate)?.pinnedStatusIds
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/util/cache/JsonCache.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/util/cache/JsonCache.kt
index 2b66baa3cd..40cf01d9bd 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/util/cache/JsonCache.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/util/cache/JsonCache.kt
@@ -44,8 +44,14 @@ class JsonCache(val cacheDir: File) {
     }
 
     fun <T> saveList(key: String, list: List<T>, cls: Class<T>) {
-        cache?.get(key)?.getFile(0)?.outputStream()?.use {
-            LoganSquare.serialize(list, it, cls)
+        val editor = cache?.edit(key) ?: return
+        try {
+            editor.getFile(0)?.outputStream()?.use {
+                LoganSquare.serialize(list, it, cls)
+            }
+            editor.commit()
+        } finally {
+            editor.abortUnlessCommitted()
         }
     }
 }
diff --git a/twidere/src/main/kotlin/org/mariotaku/twidere/view/ActionIconThemedTextView.kt b/twidere/src/main/kotlin/org/mariotaku/twidere/view/ActionIconThemedTextView.kt
index 8d89afac08..bc8e4ffc9e 100644
--- a/twidere/src/main/kotlin/org/mariotaku/twidere/view/ActionIconThemedTextView.kt
+++ b/twidere/src/main/kotlin/org/mariotaku/twidere/view/ActionIconThemedTextView.kt
@@ -107,9 +107,11 @@ class ActionIconThemedTextView(
             } else {
                 color = disabledColor
             }
-            if (iconWidth > 0 && iconHeight > 0) {
-                d.setBounds(0, 0, iconWidth, iconHeight)
-            }
+
+            val top = (d.intrinsicHeight - iconHeight) / 2
+            val left = (d.intrinsicWidth - iconWidth) / 2
+            d.setBounds(left, top, left + iconWidth, top + iconHeight)
+
             d.setColorFilter(color, Mode.SRC_ATOP)
         }
     }
diff --git a/twidere/src/main/res/layout/activity_compose.xml b/twidere/src/main/res/layout/activity_compose.xml
index b78c3acf86..29a212fdf1 100644
--- a/twidere/src/main/res/layout/activity_compose.xml
+++ b/twidere/src/main/res/layout/activity_compose.xml
@@ -41,9 +41,7 @@
             <LinearLayout
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
-                android:minHeight="160dp"
-                android:orientation="vertical"
-                android:paddingBottom="@dimen/element_spacing_normal">
+                android:orientation="vertical">
 
                 <org.mariotaku.twidere.view.FixedTextView
                     android:id="@+id/replyLabel"
@@ -55,61 +53,48 @@
                     android:padding="@dimen/element_spacing_normal"
                     tools:text="In reply to name: A quick brown fox jumps over the lazy dog"/>
 
-                <View
-                    android:id="@+id/replyLabelDivider"
-                    android:layout_width="match_parent"
-                    android:layout_height="1dp"
-                    android:background="?dividerVertical"/>
-
-                <org.mariotaku.twidere.view.ComposeEditText
-                    android:id="@+id/editText"
-                    android:layout_width="match_parent"
-                    android:layout_height="wrap_content"
-                    android:background="@null"
-                    android:gravity="top"
-                    android:hint="@string/status_hint"
-                    android:inputType="textMultiLine|textLongMessage|textCapSentences"
-                    android:padding="@dimen/element_spacing_normal"/>
-
-                <org.mariotaku.twidere.view.ExtendedRecyclerView
-                    android:id="@+id/attachedMediaPreview"
-                    android:layout_width="match_parent"
-                    android:layout_height="128dp"
-                    android:clipChildren="false"
-                    tools:listitem="@layout/grid_item_media_editor"/>
-
                 <LinearLayout
-                    android:id="@+id/locationContainer"
-                    android:layout_width="wrap_content"
+                    android:layout_width="match_parent"
                     android:layout_height="wrap_content"
-                    android:background="?selectableItemBackground"
-                    android:clickable="false"
-                    android:gravity="center_vertical"
-                    android:orientation="horizontal"
-                    android:paddingBottom="@dimen/element_spacing_small"
-                    android:paddingLeft="@dimen/element_spacing_normal"
-                    android:paddingRight="@dimen/element_spacing_normal"
-                    android:paddingTop="@dimen/element_spacing_small">
+                    android:minHeight="160dp"
+                    android:orientation="vertical"
+                    android:paddingBottom="@dimen/element_spacing_normal">
 
-                    <org.mariotaku.twidere.view.IconActionView
-                        android:id="@+id/locationIcon"
-                        android:layout_width="18dp"
-                        android:layout_height="18dp"
-                        android:src="@drawable/ic_action_location"
-                        app:iabColor="?android:textColorSecondary"/>
+                    <org.mariotaku.twidere.view.ComposeEditText
+                        android:id="@+id/editText"
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:background="@null"
+                        android:gravity="top"
+                        android:hint="@string/status_hint"
+                        android:inputType="textMultiLine|textLongMessage|textCapSentences"
+                        android:padding="@dimen/element_spacing_normal"/>
+
+                    <org.mariotaku.twidere.view.ExtendedRecyclerView
+                        android:id="@+id/attachedMediaPreview"
+                        android:layout_width="match_parent"
+                        android:layout_height="128dp"
+                        android:clipChildren="false"
+                        android:paddingLeft="@dimen/element_spacing_small"
+                        android:paddingRight="@dimen/element_spacing_small"
+                        tools:listitem="@layout/grid_item_media_editor"/>
 
-                    <org.mariotaku.twidere.view.FixedTextView
-                        android:id="@+id/locationText"
+                    <org.mariotaku.twidere.view.ActionIconThemedTextView
+                        android:id="@+id/locationLabel"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
+                        android:layout_marginBottom="@dimen/element_spacing_minus_normal"
+                        android:drawableLeft="@drawable/ic_action_location"
+                        android:drawableStart="@drawable/ic_action_location"
+                        android:gravity="center_vertical"
                         android:maxLines="1"
-                        android:paddingLeft="@dimen/element_spacing_small"
-                        android:paddingRight="@dimen/element_spacing_small"
                         android:textColor="?android:textColorSecondary"
+                        app:iabColor="?android:textColorSecondary"
+                        app:iabIconHeight="20dp"
+                        app:iabIconWidth="20dp"
                         tools:text="11.4, 51.4"/>
 
                 </LinearLayout>
-
             </LinearLayout>
         </org.mariotaku.twidere.view.MaxHeightScrollView>
 
