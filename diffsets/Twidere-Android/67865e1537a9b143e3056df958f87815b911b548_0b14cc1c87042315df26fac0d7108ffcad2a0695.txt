diff --git a/twidere.component.common/src/main/java/org/mariotaku/twidere/model/ParcelableStatus.java b/twidere.component.common/src/main/java/org/mariotaku/twidere/model/ParcelableStatus.java
index 792c03aadf..9ca9e241ca 100644
--- a/twidere.component.common/src/main/java/org/mariotaku/twidere/model/ParcelableStatus.java
+++ b/twidere.component.common/src/main/java/org/mariotaku/twidere/model/ParcelableStatus.java
@@ -73,6 +73,10 @@ public int compare(final ParcelableStatus object1, final ParcelableStatus object
     @CursorField(Statuses.STATUS_TIMESTAMP)
     public long timestamp;
     @ParcelableThisPlease
+    @JsonField(name = "position_key")
+    @CursorField(Statuses.POSITION_KEY)
+    public long position_key;
+    @ParcelableThisPlease
     @JsonField(name = "user_id", typeConverter = UserKeyConverter.class)
     @CursorField(value = Statuses.USER_ID, converter = UserKeyCursorFieldConverter.class)
     public UserKey user_key;
diff --git a/twidere.component.common/src/main/java/org/mariotaku/twidere/provider/TwidereDataStore.java b/twidere.component.common/src/main/java/org/mariotaku/twidere/provider/TwidereDataStore.java
index a0c42e217e..6590384233 100644
--- a/twidere.component.common/src/main/java/org/mariotaku/twidere/provider/TwidereDataStore.java
+++ b/twidere.component.common/src/main/java/org/mariotaku/twidere/provider/TwidereDataStore.java
@@ -878,6 +878,8 @@ interface Statuses extends BaseColumns, InsertedDateColumns, AccountSupportColum
 
         String EXTRAS = "extras";
 
+        String POSITION_KEY = "position_key";
+
         String[] COLUMNS = {_ID, ACCOUNT_KEY, STATUS_ID, SORT_ID, USER_ID, STATUS_TIMESTAMP,
                 TEXT_HTML, TEXT_PLAIN, TEXT_UNESCAPED, USER_NAME, USER_SCREEN_NAME,
                 USER_PROFILE_IMAGE_URL, IN_REPLY_TO_STATUS_ID, IN_REPLY_TO_USER_ID, IN_REPLY_TO_USER_NAME,
@@ -890,7 +892,7 @@ interface Statuses extends BaseColumns, InsertedDateColumns, AccountSupportColum
                 IS_QUOTE, IS_FAVORITE, IS_PROTECTED, IS_VERIFIED, IS_FOLLOWING, IS_GAP,
                 IS_POSSIBLY_SENSITIVE, MEDIA_JSON, MENTIONS_JSON, QUOTED_MEDIA_JSON, CARD_NAME, CARD,
                 PLACE_FULL_NAME, LANG, RETWEETED, QUOTED_LOCATION, QUOTED_PLACE_FULL_NAME, INSERTED_DATE,
-                EXTRAS};
+                EXTRAS, POSITION_KEY};
 
         String[] TYPES = {TYPE_PRIMARY_KEY, TYPE_TEXT_NOT_NULL, TYPE_TEXT_NOT_NULL, TYPE_INT,
                 TYPE_INT, TYPE_INT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT,
@@ -901,7 +903,7 @@ interface Statuses extends BaseColumns, InsertedDateColumns, AccountSupportColum
                 TYPE_BOOLEAN, TYPE_BOOLEAN, TYPE_BOOLEAN, TYPE_BOOLEAN, TYPE_BOOLEAN, TYPE_BOOLEAN,
                 TYPE_BOOLEAN, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT,
                 TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_BOOLEAN, TYPE_TEXT, TYPE_TEXT, INSERTED_DATE_TYPE,
-                TYPE_TEXT};
+                TYPE_TEXT, TYPE_INT};
 
     }
 
@@ -924,7 +926,7 @@ interface Activities extends BaseColumns, InsertedDateColumns, AccountSupportCol
         String IS_GAP = "status_is_gap";
         String MIN_SORT_POSITION = "min_position";
         String MAX_SORT_POSITION = "max_position";
-        ;
+
         String MIN_REQUEST_POSITION = "min_request_position";
         String MAX_REQUEST_POSITION = "max_request_position";
         String SOURCES = "sources";
@@ -936,18 +938,20 @@ interface Activities extends BaseColumns, InsertedDateColumns, AccountSupportCol
         String TARGET_OBJECT_USER_LISTS = "target_object_user_lists";
         String TARGET_OBJECT_USERS = "target_object_users";
 
+        String POSITION_KEY = "position_key";
+
         String[] COLUMNS = {_ID, ACCOUNT_KEY, ACTION, TIMESTAMP, STATUS_ID, STATUS_USER_ID,
                 STATUS_RETWEETED_BY_USER_ID, STATUS_QUOTED_USER_ID, STATUS_SOURCE, STATUS_QUOTE_SOURCE,
                 STATUS_TEXT_PLAIN, STATUS_QUOTE_TEXT_PLAIN, STATUS_TEXT_HTML, STATUS_QUOTE_TEXT_HTML,
                 IS_GAP, MIN_SORT_POSITION, MAX_SORT_POSITION, SOURCES, SOURCE_IDS, TARGET_STATUSES, TARGET_USERS,
                 TARGET_USER_LISTS, TARGET_OBJECT_STATUSES, TARGET_OBJECT_USER_LISTS, TARGET_OBJECT_USERS,
                 STATUS_RETWEET_ID, STATUS_USER_FOLLOWING, INSERTED_DATE, MIN_REQUEST_POSITION,
-                MAX_REQUEST_POSITION};
+                MAX_REQUEST_POSITION, POSITION_KEY};
         String[] TYPES = {TYPE_PRIMARY_KEY, TYPE_TEXT, TYPE_TEXT, TYPE_INT, TYPE_INT, TYPE_INT,
                 TYPE_INT, TYPE_INT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT,
                 TYPE_BOOLEAN, TYPE_INT, TYPE_INT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_TEXT,
                 TYPE_TEXT, TYPE_TEXT, TYPE_TEXT, TYPE_INT, TYPE_BOOLEAN, INSERTED_DATE_TYPE, TYPE_TEXT,
-                TYPE_TEXT};
+                TYPE_TEXT, TYPE_INT};
 
         String DEFAULT_SORT_ORDER = TIMESTAMP + " DESC";
 
diff --git a/twidere.extension.twitlonger/src/main/java/org/mariotaku/twidere/extension/twitlonger/Utils.java b/twidere.extension.twitlonger/src/main/java/org/mariotaku/twidere/extension/twitlonger/Utils.java
index ed873d1046..24e588c815 100644
--- a/twidere.extension.twitlonger/src/main/java/org/mariotaku/twidere/extension/twitlonger/Utils.java
+++ b/twidere.extension.twitlonger/src/main/java/org/mariotaku/twidere/extension/twitlonger/Utils.java
@@ -1,23 +1,23 @@
 package org.mariotaku.twidere.extension.twitlonger;
 
-import java.util.regex.Pattern;
-
 import android.text.TextUtils;
 
+import java.util.regex.Pattern;
+
 public class Utils {
 
-	private static final Pattern PATTERN_TWITLONGER = Pattern.compile(
-			"(https?:\\/\\/)(tl\\.gd|www.twitlonger.com\\/show)\\/([\\w\\d]+)", Pattern.CASE_INSENSITIVE);
-	private static final int GROUP_TWITLONGER_ID = 3;
+    private static final Pattern PATTERN_TWITLONGER = Pattern.compile(
+            "(https?://)(tl\\.gd|www.twitlonger.com/show)/([\\w\\d]+)", Pattern.CASE_INSENSITIVE);
+    private static final int GROUP_TWITLONGER_ID = 3;
+
+    public static String getTwitLongerId(String text) {
+        if (TextUtils.isEmpty(text)) return null;
+        return PATTERN_TWITLONGER.matcher(text).group(GROUP_TWITLONGER_ID);
+    }
 
-	public static String getTwitLongerId(String text) {
-		if (TextUtils.isEmpty(text)) return null;
-		return PATTERN_TWITLONGER.matcher(text).group(GROUP_TWITLONGER_ID);
-	}
+    public static String getTwitLongerUrl(String text) {
+        if (TextUtils.isEmpty(text)) return null;
+        return PATTERN_TWITLONGER.matcher(text).group();
+    }
 
-	public static String getTwitLongerUrl(String text) {
-		if (TextUtils.isEmpty(text)) return null;
-		return PATTERN_TWITLONGER.matcher(text).group();
-	}
-	
 }
diff --git a/twidere/src/main/java/com/afollestad/appthemeengine/inflation/ATEMultiAutoCompleteTextView2.java b/twidere/src/main/java/com/afollestad/appthemeengine/inflation/ATEMultiAutoCompleteTextView2.java
deleted file mode 100644
index 37b85bbd5b..0000000000
--- a/twidere/src/main/java/com/afollestad/appthemeengine/inflation/ATEMultiAutoCompleteTextView2.java
+++ /dev/null
@@ -1,63 +0,0 @@
-package com.afollestad.appthemeengine.inflation;
-
-import android.content.Context;
-import android.support.annotation.Nullable;
-import android.support.v7.widget.AppCompatMultiAutoCompleteTextView;
-import android.util.AttributeSet;
-
-import com.afollestad.appthemeengine.ATE;
-import com.afollestad.appthemeengine.ATEActivity;
-import com.afollestad.appthemeengine.tagprocessors.ATEDefaultTags;
-
-/**
- * @author Aidan Follestad (afollestad)
- */
-public class ATEMultiAutoCompleteTextView2 extends AppCompatMultiAutoCompleteTextView implements ViewInterface, PostInflationApplier {
-
-    public ATEMultiAutoCompleteTextView2(Context context) {
-        super(context);
-        init(context, null);
-    }
-
-    public ATEMultiAutoCompleteTextView2(Context context, AttributeSet attrs) {
-        super(context, attrs);
-        init(context, null);
-    }
-
-    public ATEMultiAutoCompleteTextView2(Context context, AttributeSet attrs, @Nullable ATEActivity keyContext, boolean waitForInflate) {
-        super(context, attrs);
-        mWaitForInflate = waitForInflate;
-        init(context, keyContext);
-    }
-
-    private boolean mWaitForInflate;
-    private ATEActivity mKeyContext;
-
-    private void init(Context context, @Nullable ATEActivity keyContext) {
-        ATEDefaultTags.process(this);
-        if (mWaitForInflate) {
-            mKeyContext = keyContext;
-            ATE.addPostInflationView(this);
-            return;
-        }
-        ATEViewUtil.init(keyContext, this, context);
-    }
-
-    @Override
-    public boolean setsStatusBarColor() {
-        return false;
-    }
-
-    @Override
-    public boolean setsToolbarColor() {
-        return false;
-    }
-
-    @Override
-    public void postApply() {
-        if(!mWaitForInflate) return;
-        mWaitForInflate = false;
-        ATEViewUtil.init(mKeyContext, this, getContext());
-        mKeyContext = null;
-    }
-}
diff --git a/twidere/src/main/java/org/mariotaku/twidere/Constants.java b/twidere/src/main/java/org/mariotaku/twidere/Constants.java
index 4d5d38f96b..3b09895ee1 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/Constants.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/Constants.java
@@ -34,7 +34,7 @@
 public interface Constants extends TwidereConstants {
 
     String DATABASES_NAME = "twidere.sqlite";
-    int DATABASES_VERSION = 133;
+    int DATABASES_VERSION = 134;
 
     int MENU_GROUP_STATUS_EXTENSION = 10;
     int MENU_GROUP_COMPOSE_EXTENSION = 11;
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/HomeActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/HomeActivity.java
index e9cd391267..4f2231d329 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/HomeActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/HomeActivity.java
@@ -672,25 +672,38 @@ private int handleIntent(final Intent intent, final boolean handleExtraIntent,
         if (handleExtraIntent && refreshOnStart) {
             mTwitterWrapper.refreshAll();
         }
+        final Intent extraIntent = intent.getParcelableExtra(EXTRA_EXTRA_INTENT);
 
         final Uri uri = intent.getData();
         @CustomTabType
         final String tabType = uri != null ? Utils.matchTabType(uri) : null;
         int initialTab = -1;
         if (tabType != null) {
-            final UserKey accountId = UserKey.valueOf(uri.getQueryParameter(QUERY_PARAM_ACCOUNT_KEY));
+            final UserKey accountKey = UserKey.valueOf(uri.getQueryParameter(QUERY_PARAM_ACCOUNT_KEY));
             for (int i = 0, j = mPagerAdapter.getCount(); i < j; i++) {
                 final SupportTabSpec tab = mPagerAdapter.getTab(i);
                 if (tabType.equals(CustomTabUtils.getTabTypeAlias(tab.type))) {
                     if (tab.args != null && CustomTabUtils.hasAccountId(this, tab.args,
-                            getActivatedAccountKeys(), accountId)) {
+                            getActivatedAccountKeys(), accountKey)) {
                         initialTab = i;
                         break;
                     }
                 }
             }
+            if (initialTab == -1 && (extraIntent == null || !handleExtraIntent)) {
+                // Tab not found, open account specific page
+                switch (tabType) {
+                    case CustomTabType.NOTIFICATIONS_TIMELINE: {
+                        IntentUtils.openInteractions(this, accountKey);
+                        return -1;
+                    }
+                    case CustomTabType.DIRECT_MESSAGES: {
+                        IntentUtils.openDirectMessages(this, accountKey);
+                        return -1;
+                    }
+                }
+            }
         }
-        final Intent extraIntent = intent.getParcelableExtra(EXTRA_EXTRA_INTENT);
         if (extraIntent != null && handleExtraIntent) {
             extraIntent.setExtrasClassLoader(getClassLoader());
             startActivity(extraIntent);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/activity/LinkHandlerActivity.java b/twidere/src/main/java/org/mariotaku/twidere/activity/LinkHandlerActivity.java
index 5f03728cc2..268c42617f 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/activity/LinkHandlerActivity.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/activity/LinkHandlerActivity.java
@@ -174,6 +174,7 @@ protected void onCreate(final Bundle savedInstanceState) {
                 supportRequestWindowFeature(WindowCompat.FEATURE_ACTION_MODE_OVERLAY);
             }
         }
+
         super.onCreate(savedInstanceState);
 
         if (fragment == null) {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/adapter/DummyStatusHolderAdapter.java b/twidere/src/main/java/org/mariotaku/twidere/adapter/DummyStatusHolderAdapter.java
index f664abb43f..ac2b49f4b5 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/adapter/DummyStatusHolderAdapter.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/adapter/DummyStatusHolderAdapter.java
@@ -192,6 +192,11 @@ public long getStatusTimestamp(int adapterPosition) {
         return -1;
     }
 
+    @Override
+    public long getStatusPositionKey(int adapterPosition) {
+        return -1;
+    }
+
     @Override
     @Nullable
     public UserKey getAccountKey(int position) {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/adapter/ParcelableStatusesAdapter.java b/twidere/src/main/java/org/mariotaku/twidere/adapter/ParcelableStatusesAdapter.java
index c67e9a0776..d8b6901b77 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/adapter/ParcelableStatusesAdapter.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/adapter/ParcelableStatusesAdapter.java
@@ -163,7 +163,6 @@ public String getStatusId(int adapterPosition) {
         return mData.get(dataPosition).id;
     }
 
-
     @Override
     public long getStatusTimestamp(int adapterPosition) {
         int dataPosition = adapterPosition - getStatusStartIndex();
@@ -176,6 +175,23 @@ public long getStatusTimestamp(int adapterPosition) {
         return mData.get(dataPosition).timestamp;
     }
 
+    @Override
+    public long getStatusPositionKey(int adapterPosition) {
+        int dataPosition = adapterPosition - getStatusStartIndex();
+        if (dataPosition < 0 || dataPosition >= getStatusCount()) return -1;
+        if (mData instanceof ObjectCursor) {
+            final Cursor cursor = ((ObjectCursor) mData).getCursor(dataPosition);
+            final ParcelableStatusCursorIndices indices = (ParcelableStatusCursorIndices) ((ObjectCursor) mData).getIndices();
+            final long positionKey = cursor.getLong(indices.position_key);
+            if (positionKey > 0) return positionKey;
+            return cursor.getLong(indices.timestamp);
+        }
+        final ParcelableStatus status = mData.get(dataPosition);
+        final long positionKey = status.position_key;
+        if (positionKey > 0) return positionKey;
+        return status.timestamp;
+    }
+
     @Override
     public UserKey getAccountKey(int adapterPosition) {
         int dataPosition = adapterPosition - getStatusStartIndex();
diff --git a/twidere/src/main/java/org/mariotaku/twidere/adapter/iface/IStatusesAdapter.java b/twidere/src/main/java/org/mariotaku/twidere/adapter/iface/IStatusesAdapter.java
index 9952223484..8b4f63dc71 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/adapter/iface/IStatusesAdapter.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/adapter/iface/IStatusesAdapter.java
@@ -29,6 +29,8 @@ public interface IStatusesAdapter<Data> extends IContentCardAdapter, IGapSupport
 
     long getStatusTimestamp(int adapterPosition);
 
+    long getStatusPositionKey(int adapterPosition);
+
     @Nullable
     UserKey getAccountKey(int position);
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/app/TwidereApplication.java b/twidere/src/main/java/org/mariotaku/twidere/app/TwidereApplication.java
index 01e00132e4..8dfdd0937e 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/app/TwidereApplication.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/app/TwidereApplication.java
@@ -67,6 +67,7 @@
 import org.mariotaku.twidere.util.theme.ActionBarContextViewViewProcessor;
 import org.mariotaku.twidere.util.theme.ExtendedSwipeRefreshLayoutViewProcessor;
 import org.mariotaku.twidere.util.theme.FloatingActionButtonViewProcessor;
+import org.mariotaku.twidere.util.theme.FontFamilyTagProcessor;
 import org.mariotaku.twidere.util.theme.IconActionButtonTagProcessor;
 import org.mariotaku.twidere.util.theme.OptimalLinkColorTagProcessor;
 import org.mariotaku.twidere.util.theme.ProfileImageViewViewProcessor;
@@ -92,6 +93,7 @@ public class TwidereApplication extends Application implements Constants,
     private SQLiteDatabase mDatabase;
 
     private ProfileImageViewViewProcessor mProfileImageViewViewProcessor;
+    private FontFamilyTagProcessor mFontFamilyTagProcessor;
 
     @NonNull
     public static TwidereApplication getInstance(@NonNull final Context context) {
@@ -134,15 +136,18 @@ public void onCreate() {
         if (BuildConfig.DEBUG) {
             StrictModeUtils.detectAllVmPolicy();
         }
+        mProfileImageViewViewProcessor = new ProfileImageViewViewProcessor();
+        mFontFamilyTagProcessor = new FontFamilyTagProcessor();
+
         ATE.registerViewProcessor(TabPagerIndicator.class, new TabPagerIndicatorViewProcessor());
         ATE.registerViewProcessor(FloatingActionButton.class, new FloatingActionButtonViewProcessor());
         ATE.registerViewProcessor(ActionBarContextView.class, new ActionBarContextViewViewProcessor());
         ATE.registerViewProcessor(ExtendedSwipeRefreshLayout.class, new ExtendedSwipeRefreshLayoutViewProcessor());
         ATE.registerViewProcessor(TimelineContentTextView.class, new TimelineContentTextViewViewProcessor());
         ATE.registerViewProcessor(ProgressWheel.class, new ProgressWheelViewProcessor());
-        mProfileImageViewViewProcessor = new ProfileImageViewViewProcessor();
         ATE.registerViewProcessor(ProfileImageView.class, mProfileImageViewViewProcessor);
-        ATE.registerTagProcessor("optimal_link_color", new OptimalLinkColorTagProcessor());
+        ATE.registerTagProcessor(OptimalLinkColorTagProcessor.TAG, new OptimalLinkColorTagProcessor());
+        ATE.registerTagProcessor(FontFamilyTagProcessor.TAG, mFontFamilyTagProcessor);
         ATE.registerTagProcessor(IconActionButtonTagProcessor.PREFIX_COLOR,
                 new IconActionButtonTagProcessor(IconActionButtonTagProcessor.PREFIX_COLOR));
         ATE.registerTagProcessor(IconActionButtonTagProcessor.PREFIX_COLOR_ACTIVATED,
@@ -150,6 +155,11 @@ public void onCreate() {
         ATE.registerTagProcessor(IconActionButtonTagProcessor.PREFIX_COLOR_DISABLED,
                 new IconActionButtonTagProcessor(IconActionButtonTagProcessor.PREFIX_COLOR_DISABLED));
         final SharedPreferences preferences = getSharedPreferences();
+
+
+        mProfileImageViewViewProcessor.setStyle(Utils.getProfileImageStyle(preferences));
+        mFontFamilyTagProcessor.setFontFamily(ThemeUtils.getThemeFontFamily(preferences));
+
         final int themeColor = preferences.getInt(KEY_THEME_COLOR, ContextCompat.getColor(this,
                 R.color.branding_color));
         if (!ATE.config(this, VALUE_THEME_NAME_LIGHT).isConfigured()) {
@@ -316,6 +326,11 @@ public void onSharedPreferenceChanged(final SharedPreferences preferences, final
                 mProfileImageViewViewProcessor.setStyle(Utils.getProfileImageStyle(preferences.getString(key, null)));
                 break;
             }
+            case KEY_THEME_FONT_FAMILY: {
+                Config.markChanged(this, VALUE_THEME_NAME_LIGHT, VALUE_THEME_NAME_DARK);
+                mFontFamilyTagProcessor.setFontFamily(ThemeUtils.getThemeFontFamily(preferences));
+                break;
+            }
             case KEY_THEME_COLOR: {
                 final int themeColor = preferences.getInt(key, ContextCompat.getColor(this,
                         R.color.branding_color));
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/AbsStatusesFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/AbsStatusesFragment.java
index 51721a2209..714e16c0d9 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/AbsStatusesFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/AbsStatusesFragment.java
@@ -249,7 +249,7 @@ public final void onLoadFinished(Loader<List<ParcelableStatus>> loader, List<Par
         final ParcelableStatusesAdapter adapter = getAdapter();
         final boolean rememberPosition = mPreferences.getBoolean(KEY_REMEMBER_POSITION, false);
         final boolean readFromBottom = mPreferences.getBoolean(KEY_READ_FROM_BOTTOM, false);
-        long lastReadTimestamp;
+        long lastReadPositionKey;
         final int lastVisiblePos, lastVisibleTop;
         final String tag = getCurrentReadPositionTag();
         final LinearLayoutManager layoutManager = getLayoutManager();
@@ -262,14 +262,14 @@ public final void onLoadFinished(Loader<List<ParcelableStatus>> loader, List<Par
             final int statusStartIndex = adapter.getStatusStartIndex();
             final int statusEndIndex = statusStartIndex + adapter.getStatusCount();
             final int lastItemIndex = Math.min(statusEndIndex, lastVisiblePos);
-            lastReadTimestamp = adapter.getStatusTimestamp(lastItemIndex);
+            lastReadPositionKey = adapter.getStatusPositionKey(lastItemIndex);
             final View positionView = layoutManager.findViewByPosition(lastItemIndex);
             lastVisibleTop = positionView != null ? positionView.getTop() : 0;
         } else if (rememberPosition && tag != null) {
-            lastReadTimestamp = mReadStateManager.getPosition(tag);
+            lastReadPositionKey = mReadStateManager.getPosition(tag);
             lastVisibleTop = 0;
         } else {
-            lastReadTimestamp = -1;
+            lastReadPositionKey = -1;
             lastVisibleTop = 0;
         }
         adapter.setData(data);
@@ -277,10 +277,10 @@ public final void onLoadFinished(Loader<List<ParcelableStatus>> loader, List<Par
         // The last status is statusEndExclusiveIndex - 1
         final int statusEndExclusiveIndex = statusStartIndex + adapter.getStatusCount();
         if (statusEndExclusiveIndex >= 0 && rememberPosition && tag != null) {
-            final long lastItemId = adapter.getStatusTimestamp(statusEndExclusiveIndex - 1);
+            final long lastPositionKey = adapter.getStatusPositionKey(statusEndExclusiveIndex - 1);
             // Status corresponds to last read id was deleted, use last item id instead
-            if (lastItemId != -1 && lastReadTimestamp > 0 && lastReadTimestamp < lastItemId) {
-                lastReadTimestamp = lastItemId;
+            if (lastPositionKey != -1 && lastReadPositionKey > 0 && lastReadPositionKey < lastPositionKey) {
+                lastReadPositionKey = lastPositionKey;
             }
         }
         setRefreshEnabled(true);
@@ -296,7 +296,7 @@ public final void onLoadFinished(Loader<List<ParcelableStatus>> loader, List<Par
             for (int i = statusStartIndex; i < statusEndExclusiveIndex; i++) {
                 // Assume statuses are descend sorted by id, so break at first status with id
                 // lesser equals than read position
-                if (lastReadTimestamp != -1 && adapter.getStatusTimestamp(i) <= lastReadTimestamp) {
+                if (lastReadPositionKey != -1 && adapter.getStatusPositionKey(i) <= lastReadPositionKey) {
                     pos = i;
                     break;
                 }
@@ -543,8 +543,9 @@ protected final void saveReadPosition(int position) {
         final ParcelableStatusesAdapter adapter = getAdapter();
         final ParcelableStatus status = adapter.getStatus(position);
         if (status == null) return;
-        mReadStateManager.setPosition(readPositionTag, status.timestamp);
-        mReadStateManager.setPosition(getCurrentReadPositionTag(), status.timestamp, true);
+        final long positionKey = status.position_key > 0 ? status.position_key : status.timestamp;
+        mReadStateManager.setPosition(readPositionTag, positionKey);
+        mReadStateManager.setPosition(getCurrentReadPositionTag(), positionKey, true);
     }
 
     @NonNull
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/CursorStatusesFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/CursorStatusesFragment.java
index 8037ba82ed..fda97fc686 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/CursorStatusesFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/CursorStatusesFragment.java
@@ -156,7 +156,7 @@ public void notifyFavoriteTask(FavoriteTaskEvent event) {
                 final int startIndex = adapter.getStatusStartIndex();
                 for (int i = firstVisiblePosition, j = lastVisiblePosition + 1; i < j; i++) {
                     if (status.account_key.equals(adapter.getAccountKey(i)) &&
-                            adapter.getStatusId(i) == status.id) {
+                            status.id.equals(adapter.getStatusId(i))) {
                         data.set(i - startIndex, status);
                         return;
                     }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/StatusFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/StatusFragment.java
index a31d37e502..094f40b270 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/StatusFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/StatusFragment.java
@@ -1828,6 +1828,13 @@ public long getStatusTimestamp(int position) {
             return status != null ? status.timestamp : -1;
         }
 
+        @Override
+        public long getStatusPositionKey(int position) {
+            final ParcelableStatus status = getStatus(position);
+            if (status == null) return -1;
+            return status.position_key > 0 ? status.timestamp : getStatusTimestamp(position);
+        }
+
         @Override
         public UserKey getAccountKey(int position) {
             final ParcelableStatus status = getStatus(position);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/UserFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/UserFragment.java
index 898cff982a..6375ca5911 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/UserFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/UserFragment.java
@@ -52,12 +52,10 @@
 import android.support.v4.content.AsyncTaskLoader;
 import android.support.v4.content.Loader;
 import android.support.v4.content.res.ResourcesCompat;
-import android.support.v4.view.OnApplyWindowInsetsListener;
 import android.support.v4.view.ViewCompat;
 import android.support.v4.view.ViewPager;
 import android.support.v4.view.ViewPager.OnPageChangeListener;
 import android.support.v4.view.WindowCompat;
-import android.support.v4.view.WindowInsetsCompat;
 import android.support.v7.app.ActionBar;
 import android.support.v7.app.AppCompatActivity;
 import android.support.v7.widget.Toolbar;
@@ -152,12 +150,14 @@
 import org.mariotaku.twidere.util.support.ViewSupport;
 import org.mariotaku.twidere.util.support.WindowSupport;
 import org.mariotaku.twidere.view.ColorLabelRelativeLayout;
+import org.mariotaku.twidere.view.ExtendedRelativeLayout;
 import org.mariotaku.twidere.view.HeaderDrawerLayout;
 import org.mariotaku.twidere.view.HeaderDrawerLayout.DrawerCallback;
 import org.mariotaku.twidere.view.ProfileBannerImageView;
+import org.mariotaku.twidere.view.ProfileBannerSpace;
 import org.mariotaku.twidere.view.ShapedImageView;
 import org.mariotaku.twidere.view.TabPagerIndicator;
-import org.mariotaku.twidere.view.iface.IExtendedView;
+import org.mariotaku.twidere.view.TintedStatusFrameLayout;
 import org.mariotaku.twidere.view.iface.IExtendedView.OnSizeChangedListener;
 
 import java.util.Calendar;
@@ -199,14 +199,14 @@ public class UserFragment extends BaseSupportFragment implements OnClickListener
     private ColorLabelRelativeLayout mProfileNameContainer;
     private View mProgressContainer, mHeaderErrorContainer;
     private View mCardContent;
-    private View mProfileBannerSpace;
+    private ProfileBannerSpace mProfileBannerSpace;
     private HeaderDrawerLayout mHeaderDrawerLayout;
     private ViewPager mViewPager;
     private TabPagerIndicator mPagerIndicator;
     private View mPagerOverlay;
     private View mErrorOverlay;
     private View mProfileBannerContainer;
-    private View mProfileContentContainer;
+    private ExtendedRelativeLayout mProfileContentContainer;
     private Button mFollowButton;
     private ProgressBar mFollowProgress;
     private View mPagesContent, mPagesErrorContainer;
@@ -216,6 +216,7 @@ public class UserFragment extends BaseSupportFragment implements OnClickListener
     private View mProfileDetailsContainer;
     private View mFollowingYouIndicator;
     private Toolbar mToolbar;
+    private TintedStatusFrameLayout mTintedStatusFrameLayout;
 
     private ActionBarDrawable mActionBarBackground;
     private SupportTabsAdapter mPagerAdapter;
@@ -370,7 +371,7 @@ private void showRelationship(@Nullable final ParcelableUser user,
         } else if (!relationship.isSourceFollowingTarget() && user.is_protected) {
             mPagesErrorContainer.setVisibility(View.VISIBLE);
             final String displayName = mUserColorNameManager.getDisplayName(user, mNameFirst, true);
-            mPagesErrorText.setText(getString(R.string.user_protected_summary, displayName));
+            mPagesErrorText.setText(R.string.user_protected_summary);
             mPagesErrorIcon.setImageResource(R.drawable.ic_info_locked);
             mPagesContent.setVisibility(View.GONE);
         } else {
@@ -792,6 +793,32 @@ public void onSharedElementEnd(List<String> sharedElementNames, List<View> share
         ViewCompat.setTransitionName(mProfileTypeView, TRANSITION_NAME_PROFILE_TYPE);
 //        ViewCompat.setTransitionName(mCardView, TRANSITION_NAME_CARD);
 
+
+        mTintedStatusFrameLayout.setWindowInsetsListener(new TintedStatusFrameLayout.WindowInsetsListener() {
+            @Override
+            public void onApplyWindowInsets(int left, int top, int right, int bottom) {
+                mProfileContentContainer.setPadding(0, top, 0, 0);
+                mProfileBannerSpace.setStatusBarHeight(top);
+
+                if (mProfileBannerSpace.getToolbarHeight() == 0) {
+                    int toolbarHeight = mToolbar.getMeasuredHeight();
+                    if (toolbarHeight == 0) {
+                        toolbarHeight = ThemeUtils.getActionBarHeight(getContext());
+                    }
+                    mProfileBannerSpace.setToolbarHeight(toolbarHeight);
+                }
+            }
+
+        });
+        mProfileContentContainer.setOnSizeChangedListener(new OnSizeChangedListener() {
+            @Override
+            public void onSizeChanged(View view, int w, int h, int oldw, int oldh) {
+                final int toolbarHeight = mToolbar.getMeasuredHeight();
+                mHeaderDrawerLayout.setPadding(0, toolbarHeight, 0, 0);
+                mProfileBannerSpace.setToolbarHeight(toolbarHeight);
+            }
+        });
+
         mHeaderDrawerLayout.setDrawerCallback(this);
 
         mPagerAdapter = new SupportTabsAdapter(activity, getChildFragmentManager());
@@ -1135,7 +1162,7 @@ public boolean onOptionsItemSelected(final MenuItem item) {
     @Override
     public void onViewCreated(final View view, final Bundle savedInstanceState) {
         super.onViewCreated(view, savedInstanceState);
-
+        mTintedStatusFrameLayout = (TintedStatusFrameLayout) view;
         mToolbar = (Toolbar) view.findViewById(R.id.toolbar);
         mHeaderDrawerLayout = (HeaderDrawerLayout) view.findViewById(R.id.user_profile_drawer);
         final View headerView = mHeaderDrawerLayout.getHeader();
@@ -1148,7 +1175,7 @@ public void onViewCreated(final View view, final Bundle savedInstanceState) {
         mProfileBannerView = (ProfileBannerImageView) view.findViewById(R.id.profile_banner);
         mProfileBirthdayBannerView = view.findViewById(R.id.profile_birthday_banner);
         mProfileBannerContainer = view.findViewById(R.id.profile_banner_container);
-        mProfileContentContainer = view.findViewById(R.id.profile_content_container);
+        mProfileContentContainer = (ExtendedRelativeLayout) view.findViewById(R.id.profile_content_container);
         mNameView = (TextView) headerView.findViewById(R.id.name);
         mScreenNameView = (TextView) headerView.findViewById(R.id.screen_name);
         mDescriptionView = (TextView) headerView.findViewById(R.id.description);
@@ -1169,7 +1196,7 @@ public void onViewCreated(final View view, final Bundle savedInstanceState) {
         mDescriptionContainer = headerView.findViewById(R.id.description_container);
         mLocationContainer = headerView.findViewById(R.id.location_container);
         mURLContainer = headerView.findViewById(R.id.url_container);
-        mProfileBannerSpace = headerView.findViewById(R.id.profile_banner_space);
+        mProfileBannerSpace = (ProfileBannerSpace) headerView.findViewById(R.id.profile_banner_space);
         mViewPager = (ViewPager) contentView.findViewById(R.id.view_pager);
         mPagerIndicator = (TabPagerIndicator) contentView.findViewById(R.id.toolbar_tabs);
         mPagerOverlay = contentView.findViewById(R.id.pager_window_overlay);
@@ -1189,32 +1216,6 @@ public void onViewCreated(final View view, final Bundle savedInstanceState) {
             ((AppCompatActivity) host).setSupportActionBar(mToolbar);
         }
 
-//        ((IExtendedView) view).setOnFitSystemWindowsListener(new IExtendedView.OnFitSystemWindowsListener() {
-//            @Override
-//            public void onFitSystemWindows(Rect insets) {
-//                mProfileContentContainer.setPadding(0, insets.top, 0, 0);
-//            }
-//        });
-        ((IExtendedView) view).setOnSizeChangedListener(new OnSizeChangedListener() {
-            @Override
-            public void onSizeChanged(View view, int w, int h, int oldw, int oldh) {
-                final int paddingTop = mToolbar.getMeasuredHeight();
-                mHeaderDrawerLayout.setPadding(0, paddingTop, 0, 0);
-            }
-        });
-        //TODO FUCK STATUS BAR COLOR
-        if (ViewCompat.getFitsSystemWindows(view)) {
-            view.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN |
-                    View.SYSTEM_UI_FLAG_LAYOUT_STABLE);
-            ViewCompat.setOnApplyWindowInsetsListener(view, new OnApplyWindowInsetsListener() {
-                @Override
-                public WindowInsetsCompat onApplyWindowInsets(View v, WindowInsetsCompat insets) {
-                    mProfileContentContainer.setPadding(0, insets.getSystemWindowInsetTop(), 0, 0);
-                    return insets.consumeSystemWindowInsets();
-                }
-            });
-        }
-
     }
 
     @Override
@@ -1304,6 +1305,7 @@ public boolean setupWindow(FragmentActivity activity) {
             ((AppCompatActivity) activity).supportRequestWindowFeature(Window.FEATURE_NO_TITLE);
             ((AppCompatActivity) activity).supportRequestWindowFeature(WindowCompat.FEATURE_ACTION_MODE_OVERLAY);
         }
+        WindowSupport.setStatusBarColor(activity.getWindow(), Color.TRANSPARENT);
         return true;
     }
 
@@ -1623,10 +1625,10 @@ private void updateScrollOffset(int offset) {
         final BaseActivity activity = (BaseActivity) getActivity();
 
 
-        final int statusBarColor = (int) sArgbEvaluator.evaluate(factor, ATEUtil.darkenColor(0xA0000000),
+        final int statusBarColor = (int) sArgbEvaluator.evaluate(factor, 0xA0000000,
                 ATEUtil.darkenColor(mPrimaryColorDark));
         final Window window = activity.getWindow();
-        WindowSupport.setStatusBarColor(window, statusBarColor);
+        mTintedStatusFrameLayout.setStatusBarColor(statusBarColor);
         ThemeUtils.setLightStatusBar(window, ATEUtil.isColorLight(statusBarColor));
         int stackedTabColor = mPrimaryColor;
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/fragment/UserListFragment.java b/twidere/src/main/java/org/mariotaku/twidere/fragment/UserListFragment.java
index 96368d5ea9..484f595579 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/fragment/UserListFragment.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/fragment/UserListFragment.java
@@ -27,7 +27,6 @@
 import android.content.DialogInterface;
 import android.content.Intent;
 import android.content.IntentFilter;
-import android.graphics.Rect;
 import android.nfc.NdefMessage;
 import android.nfc.NdefRecord;
 import android.nfc.NfcAdapter.CreateNdefMessageCallback;
@@ -35,23 +34,19 @@
 import android.os.Bundle;
 import android.support.annotation.NonNull;
 import android.support.v4.app.DialogFragment;
-import android.support.v4.app.Fragment;
 import android.support.v4.app.FragmentActivity;
 import android.support.v4.app.LoaderManager;
 import android.support.v4.app.LoaderManager.LoaderCallbacks;
 import android.support.v4.content.AsyncTaskLoader;
 import android.support.v4.content.Loader;
-import android.support.v4.view.ViewPager;
 import android.support.v7.app.AlertDialog;
 import android.text.TextUtils;
 import android.util.Log;
-import android.view.LayoutInflater;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
 import android.view.View;
 import android.view.View.OnClickListener;
-import android.view.ViewGroup;
 import android.widget.CheckBox;
 
 import com.rengwuxian.materialedittext.MaterialEditText;
@@ -59,7 +54,6 @@
 import org.mariotaku.twidere.R;
 import org.mariotaku.twidere.activity.AccountSelectorActivity;
 import org.mariotaku.twidere.activity.UserListSelectorActivity;
-import org.mariotaku.twidere.activity.iface.IThemedActivity;
 import org.mariotaku.twidere.adapter.SupportTabsAdapter;
 import org.mariotaku.twidere.api.twitter.Twitter;
 import org.mariotaku.twidere.api.twitter.TwitterException;
@@ -67,7 +61,6 @@
 import org.mariotaku.twidere.api.twitter.model.UserListUpdate;
 import org.mariotaku.twidere.fragment.iface.IBaseFragment.SystemWindowsInsetsCallback;
 import org.mariotaku.twidere.fragment.iface.SupportFragmentCallback;
-import org.mariotaku.twidere.graphic.EmptyDrawable;
 import org.mariotaku.twidere.model.ParcelableUser;
 import org.mariotaku.twidere.model.ParcelableUserList;
 import org.mariotaku.twidere.model.SingleResponse;
@@ -82,17 +75,11 @@
 import org.mariotaku.twidere.util.ThemeUtils;
 import org.mariotaku.twidere.util.TwitterAPIFactory;
 import org.mariotaku.twidere.util.Utils;
-import org.mariotaku.twidere.view.TabPagerIndicator;
 
-public class UserListFragment extends BaseSupportFragment implements OnClickListener,
+public class UserListFragment extends AbsToolbarTabPagesFragment implements OnClickListener,
         LoaderCallbacks<SingleResponse<ParcelableUserList>>, SystemWindowsInsetsCallback,
         SupportFragmentCallback {
 
-    private ViewPager mViewPager;
-    private TabPagerIndicator mPagerIndicator;
-    private View mPagerOverlay;
-
-    private SupportTabsAdapter mPagerAdapter;
     private boolean mUserListLoaderInitialized;
 
     private ParcelableUserList mUserList;
@@ -131,28 +118,11 @@ public void displayUserList(final ParcelableUserList userList) {
         invalidateOptionsMenu();
     }
 
-    @Override
-    public Fragment getCurrentVisibleFragment() {
-        final int currentItem = mViewPager.getCurrentItem();
-        if (currentItem < 0 || currentItem >= mPagerAdapter.getCount()) return null;
-        return (Fragment) mPagerAdapter.instantiateItem(mViewPager, currentItem);
-    }
-
-    @Override
-    public boolean triggerRefresh(int position) {
-        return false;
-    }
-
-    @Override
-    public boolean getSystemWindowsInsets(Rect insets) {
-        return false;
-    }
-
-    public void getUserListInfo(final boolean omit_intent_extra) {
+    public void getUserListInfo(final boolean omitIntentExtra) {
         final LoaderManager lm = getLoaderManager();
         lm.destroyLoader(0);
         final Bundle args = new Bundle(getArguments());
-        args.putBoolean(EXTRA_OMIT_INTENT_EXTRA, omit_intent_extra);
+        args.putBoolean(EXTRA_OMIT_INTENT_EXTRA, omitIntentExtra);
         if (!mUserListLoaderInitialized) {
             lm.initLoader(0, args, this);
             mUserListLoaderInitialized = true;
@@ -187,11 +157,6 @@ public void onActivityResult(final int requestCode, final int resultCode, final
         super.onActivityResult(requestCode, resultCode, data);
     }
 
-    @Override
-    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
-        return inflater.inflate(R.layout.fragment_content_pages, container, false);
-    }
-
     @Override
     public void onActivityCreated(final Bundle savedInstanceState) {
         super.onActivityCreated(savedInstanceState);
@@ -210,13 +175,30 @@ public NdefMessage createNdefMessage(NfcEvent event) {
             }
         });
 
-        mPagerAdapter = new SupportTabsAdapter(activity, getChildFragmentManager());
-
-        mViewPager.setAdapter(mPagerAdapter);
-        mPagerIndicator.setViewPager(mViewPager);
-        mPagerIndicator.setTabDisplayOption(TabPagerIndicator.LABEL);
         getUserListInfo(false);
-        setupUserPages();
+    }
+
+    @Override
+    protected void addTabs(SupportTabsAdapter adapter) {
+        final Bundle args = getArguments(), tabArgs = new Bundle();
+        if (args.containsKey(EXTRA_USER_LIST)) {
+            final ParcelableUserList userList = args.getParcelable(EXTRA_USER_LIST);
+            assert userList != null;
+            tabArgs.putParcelable(EXTRA_ACCOUNT_KEY, userList.account_key);
+            tabArgs.putString(EXTRA_USER_ID, userList.user_key.getId());
+            tabArgs.putString(EXTRA_SCREEN_NAME, userList.user_screen_name);
+            tabArgs.putLong(EXTRA_LIST_ID, userList.id);
+            tabArgs.putString(EXTRA_LIST_NAME, userList.name);
+        } else {
+            tabArgs.putParcelable(EXTRA_ACCOUNT_KEY, args.getParcelable(EXTRA_ACCOUNT_KEY));
+            tabArgs.getString(EXTRA_USER_ID, args.getString(EXTRA_USER_ID));
+            tabArgs.putString(EXTRA_SCREEN_NAME, args.getString(EXTRA_SCREEN_NAME));
+            tabArgs.putLong(EXTRA_LIST_ID, args.getLong(EXTRA_LIST_ID, -1));
+            tabArgs.putString(EXTRA_LIST_NAME, args.getString(EXTRA_LIST_NAME));
+        }
+        adapter.addTab(UserListTimelineFragment.class, tabArgs, getString(R.string.statuses), null, 0, null);
+        adapter.addTab(UserListMembersFragment.class, tabArgs, getString(R.string.members), null, 1, null);
+        adapter.addTab(UserListSubscribersFragment.class, tabArgs, getString(R.string.subscribers), null, 2, null);
     }
 
     private ParcelableUserList getUserList() {
@@ -390,47 +372,6 @@ public void onLoaderReset(final Loader<SingleResponse<ParcelableUserList>> loade
 
     }
 
-    @Override
-    public void onViewCreated(final View view, final Bundle savedInstanceState) {
-        super.onViewCreated(view, savedInstanceState);
-        mViewPager = (ViewPager) view.findViewById(R.id.view_pager);
-        mPagerIndicator = (TabPagerIndicator) view.findViewById(R.id.toolbar_tabs);
-        mPagerOverlay = view.findViewById(R.id.pager_window_overlay);
-    }
-
-    private void setupUserPages() {
-        final Bundle args = getArguments(), tabArgs = new Bundle();
-        if (args.containsKey(EXTRA_USER_LIST)) {
-            final ParcelableUserList userList = args.getParcelable(EXTRA_USER_LIST);
-            assert userList != null;
-            tabArgs.putParcelable(EXTRA_ACCOUNT_KEY, userList.account_key);
-            tabArgs.putString(EXTRA_USER_ID, userList.user_key.getId());
-            tabArgs.putString(EXTRA_SCREEN_NAME, userList.user_screen_name);
-            tabArgs.putLong(EXTRA_LIST_ID, userList.id);
-            tabArgs.putString(EXTRA_LIST_NAME, userList.name);
-        } else {
-            tabArgs.putParcelable(EXTRA_ACCOUNT_KEY, args.getParcelable(EXTRA_ACCOUNT_KEY));
-            tabArgs.getString(EXTRA_USER_ID, args.getString(EXTRA_USER_ID));
-            tabArgs.putString(EXTRA_SCREEN_NAME, args.getString(EXTRA_SCREEN_NAME));
-            tabArgs.putLong(EXTRA_LIST_ID, args.getLong(EXTRA_LIST_ID, -1));
-            tabArgs.putString(EXTRA_LIST_NAME, args.getString(EXTRA_LIST_NAME));
-        }
-        mPagerAdapter.addTab(UserListTimelineFragment.class, tabArgs, getString(R.string.statuses), null, 0, null);
-        mPagerAdapter.addTab(UserListMembersFragment.class, tabArgs, getString(R.string.members), null, 1, null);
-        mPagerAdapter.addTab(UserListSubscribersFragment.class, tabArgs, getString(R.string.subscribers), null, 2, null);
-
-        final FragmentActivity activity = getActivity();
-        ThemeUtils.setCompatToolbarOverlay(activity, new EmptyDrawable());
-        ThemeUtils.setWindowOverlayViewOverlay(activity, new EmptyDrawable());
-
-        if (activity instanceof IThemedActivity) {
-            final String backgroundOption = ((IThemedActivity) activity).getCurrentThemeBackgroundOption();
-            final boolean isTransparent = ThemeUtils.isTransparentBackground(backgroundOption);
-            final int actionBarAlpha = isTransparent ? ThemeUtils.getActionBarAlpha(ThemeUtils.getUserThemeBackgroundAlpha(activity)) : 0xFF;
-            mPagerIndicator.setAlpha(actionBarAlpha / 255f);
-        }
-    }
-
     public static class EditUserListDialogFragment extends BaseSupportDialogFragment implements
             DialogInterface.OnClickListener {
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/model/CustomTabConfiguration.java b/twidere/src/main/java/org/mariotaku/twidere/model/CustomTabConfiguration.java
index 7294362161..ad456a3685 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/model/CustomTabConfiguration.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/model/CustomTabConfiguration.java
@@ -19,6 +19,8 @@
 
 package org.mariotaku.twidere.model;
 
+import android.support.annotation.DrawableRes;
+import android.support.annotation.StringRes;
 import android.support.v4.app.Fragment;
 
 import org.mariotaku.twidere.TwidereConstants;
@@ -28,154 +30,161 @@
 
 public final class CustomTabConfiguration {
 
-	public static final int FIELD_TYPE_NONE = 0;
-	public static final int FIELD_TYPE_USER = 1;
-	public static final int FIELD_TYPE_USER_LIST = 2;
-	public static final int FIELD_TYPE_TEXT = 3;
-
-	public static final int ACCOUNT_NONE = 0;
-	public static final int ACCOUNT_REQUIRED = 1;
-	public static final int ACCOUNT_OPTIONAL = 2;
-
-	private final int title, icon, secondaryFieldType, secondaryFieldTitle, sortPosition, accountRequirement;
-	private final Class<? extends Fragment> cls;
-	private final String secondaryFieldTextKey;
-	private final boolean singleTab;
-	private final ExtraConfiguration[] extraConfigurations;
-
-	public CustomTabConfiguration(final Class<? extends Fragment> cls, final int title, final int icon,
-			final int accountRequirement, final int secondaryFieldType, final int sortPosition,
-			final boolean singleTab, final ExtraConfiguration... extraConfigurations) {
-		this(cls, title, icon, accountRequirement, secondaryFieldType, 0, TwidereConstants.EXTRA_TEXT, sortPosition,
-				singleTab, extraConfigurations);
-	}
-
-	public CustomTabConfiguration(final Class<? extends Fragment> cls, final int title, final int icon,
-			final int accountRequirement, final int secondaryFieldType, final int sortPosition,
-			final ExtraConfiguration... extraConfigurations) {
-		this(cls, title, icon, accountRequirement, secondaryFieldType, 0, TwidereConstants.EXTRA_TEXT, sortPosition,
-				false, extraConfigurations);
-	}
-
-	public CustomTabConfiguration(final Class<? extends Fragment> cls, final int title, final int icon,
-			final int accountRequirement, final int secondaryFieldType, final int secondaryFieldTitle,
-			final String secondaryFieldTextKey, final int sortPosition, final boolean singleTab,
-			final ExtraConfiguration... extraConfigurations) {
-		this.cls = cls;
-		this.title = title;
-		this.icon = icon;
-		this.sortPosition = sortPosition;
-		this.accountRequirement = accountRequirement;
-		this.secondaryFieldType = secondaryFieldType;
-		this.secondaryFieldTitle = secondaryFieldTitle;
-		this.secondaryFieldTextKey = secondaryFieldTextKey;
-		this.singleTab = singleTab;
-		this.extraConfigurations = extraConfigurations;
-	}
-
-	public CustomTabConfiguration(final Class<? extends Fragment> cls, final int title, final int icon,
-			final int accountRequirement, final int secondaryFieldType, final int secondaryFieldTitle,
-			final String secondaryFieldTextKey, final int sortPosition, final ExtraConfiguration... extraConfigurations) {
-		this(cls, title, icon, accountRequirement, secondaryFieldType, 0, secondaryFieldTextKey, sortPosition, false,
-				extraConfigurations);
-	}
-
-	public int getAccountRequirement() {
-		return accountRequirement;
-	}
-
-	public int getDefaultIcon() {
-		return icon;
-	}
-
-	public int getDefaultTitle() {
-		return title;
-	}
-
-	public ExtraConfiguration[] getExtraConfigurations() {
-		return extraConfigurations;
-	}
-
-	public Class<? extends Fragment> getFragmentClass() {
-		return cls;
-	}
-
-	public String getSecondaryFieldTextKey() {
-		return secondaryFieldTextKey;
-	}
-
-	public int getSecondaryFieldTitle() {
-		return secondaryFieldTitle;
-	}
-
-	public int getSecondaryFieldType() {
-		return secondaryFieldType;
-	}
-
-	public int getSortPosition() {
-		return sortPosition;
-	}
-
-	public boolean isSingleTab() {
-		return singleTab;
-	}
-
-	@Override
-	public String toString() {
-		return "CustomTabConfiguration{title=" + title + ", icon=" + icon + ", secondaryFieldType="
-				+ secondaryFieldType + ", secondaryFieldTitle=" + secondaryFieldTitle + ", sortPosition="
-				+ sortPosition + ", accountRequirement=" + accountRequirement + ", cls=" + cls
-				+ ", secondaryFieldTextKey=" + secondaryFieldTextKey + ", singleTab=" + singleTab + "}";
-	}
-
-	public static class CustomTabConfigurationComparator implements Comparator<Entry<String, CustomTabConfiguration>> {
-
-		public static final CustomTabConfigurationComparator SINGLETON = new CustomTabConfigurationComparator();
-
-		@Override
-		public int compare(final Entry<String, CustomTabConfiguration> lhs,
-				final Entry<String, CustomTabConfiguration> rhs) {
-			return lhs.getValue().getSortPosition() - rhs.getValue().getSortPosition();
-		}
-
-	}
-
-	public static class ExtraConfiguration {
-		private final String key;
-		private final int titleRes;
-		private final Type type;
-		private final Object defaultValue;
-
-		public ExtraConfiguration(final String key, final int titleRes, final Type type, final Object defaultValue) {
-			this.key = key;
-			this.titleRes = titleRes;
-			this.type = type;
-			this.defaultValue = defaultValue;
-		}
-
-		public boolean defaultBoolean() {
-			return (Boolean) defaultValue;
-		}
-
-		public String getKey() {
-			return key;
-		}
-
-		public int getTitleRes() {
-			return titleRes;
-		}
-
-		public Type getType() {
-			return type;
-		}
-
-		public static ExtraConfiguration newBoolean(final String key, final int titleRes, final boolean def) {
-			return new ExtraConfiguration(key, titleRes, Type.BOOLEAN, def);
-		}
-
-		public enum Type {
-			BOOLEAN
-		}
-	}
+    public static final int FIELD_TYPE_NONE = 0;
+    public static final int FIELD_TYPE_USER = 1;
+    public static final int FIELD_TYPE_USER_LIST = 2;
+    public static final int FIELD_TYPE_TEXT = 3;
+
+    public static final int ACCOUNT_NONE = 0;
+    public static final int ACCOUNT_REQUIRED = 1;
+    public static final int ACCOUNT_OPTIONAL = 2;
+
+    @StringRes
+    private final int title;
+    @DrawableRes
+    private final int icon;
+    private final int secondaryFieldType;
+    private final int secondaryFieldTitle;
+    private final int sortPosition;
+    private final int accountRequirement;
+    private final Class<? extends Fragment> cls;
+    private final String secondaryFieldTextKey;
+    private final boolean singleTab;
+    private final ExtraConfiguration[] extraConfigurations;
+
+    public CustomTabConfiguration(final Class<? extends Fragment> cls, final int title, final int icon,
+                                  final int accountRequirement, final int secondaryFieldType, final int sortPosition,
+                                  final boolean singleTab, final ExtraConfiguration... extraConfigurations) {
+        this(cls, title, icon, accountRequirement, secondaryFieldType, 0, TwidereConstants.EXTRA_TEXT, sortPosition,
+                singleTab, extraConfigurations);
+    }
+
+    public CustomTabConfiguration(final Class<? extends Fragment> cls, final int title, final int icon,
+                                  final int accountRequirement, final int secondaryFieldType, final int sortPosition,
+                                  final ExtraConfiguration... extraConfigurations) {
+        this(cls, title, icon, accountRequirement, secondaryFieldType, 0, TwidereConstants.EXTRA_TEXT, sortPosition,
+                false, extraConfigurations);
+    }
+
+    public CustomTabConfiguration(final Class<? extends Fragment> cls, final int title, final int icon,
+                                  final int accountRequirement, final int secondaryFieldType, final int secondaryFieldTitle,
+                                  final String secondaryFieldTextKey, final int sortPosition, final boolean singleTab,
+                                  final ExtraConfiguration... extraConfigurations) {
+        this.cls = cls;
+        this.title = title;
+        this.icon = icon;
+        this.sortPosition = sortPosition;
+        this.accountRequirement = accountRequirement;
+        this.secondaryFieldType = secondaryFieldType;
+        this.secondaryFieldTitle = secondaryFieldTitle;
+        this.secondaryFieldTextKey = secondaryFieldTextKey;
+        this.singleTab = singleTab;
+        this.extraConfigurations = extraConfigurations;
+    }
+
+    public CustomTabConfiguration(final Class<? extends Fragment> cls, final int title, final int icon,
+                                  final int accountRequirement, final int secondaryFieldType, final int secondaryFieldTitle,
+                                  final String secondaryFieldTextKey, final int sortPosition, final ExtraConfiguration... extraConfigurations) {
+        this(cls, title, icon, accountRequirement, secondaryFieldType, 0, secondaryFieldTextKey, sortPosition, false,
+                extraConfigurations);
+    }
+
+    public int getAccountRequirement() {
+        return accountRequirement;
+    }
+
+    public int getDefaultIcon() {
+        return icon;
+    }
+
+    public int getDefaultTitle() {
+        return title;
+    }
+
+    public ExtraConfiguration[] getExtraConfigurations() {
+        return extraConfigurations;
+    }
+
+    public Class<? extends Fragment> getFragmentClass() {
+        return cls;
+    }
+
+    public String getSecondaryFieldTextKey() {
+        return secondaryFieldTextKey;
+    }
+
+    public int getSecondaryFieldTitle() {
+        return secondaryFieldTitle;
+    }
+
+    public int getSecondaryFieldType() {
+        return secondaryFieldType;
+    }
+
+    public int getSortPosition() {
+        return sortPosition;
+    }
+
+    public boolean isSingleTab() {
+        return singleTab;
+    }
+
+    @Override
+    public String toString() {
+        return "CustomTabConfiguration{title=" + title + ", icon=" + icon + ", secondaryFieldType="
+                + secondaryFieldType + ", secondaryFieldTitle=" + secondaryFieldTitle + ", sortPosition="
+                + sortPosition + ", accountRequirement=" + accountRequirement + ", cls=" + cls
+                + ", secondaryFieldTextKey=" + secondaryFieldTextKey + ", singleTab=" + singleTab + "}";
+    }
+
+    public static class CustomTabConfigurationComparator implements Comparator<Entry<String, CustomTabConfiguration>> {
+
+        public static final CustomTabConfigurationComparator SINGLETON = new CustomTabConfigurationComparator();
+
+        @Override
+        public int compare(final Entry<String, CustomTabConfiguration> lhs,
+                           final Entry<String, CustomTabConfiguration> rhs) {
+            return lhs.getValue().getSortPosition() - rhs.getValue().getSortPosition();
+        }
+
+    }
+
+    public static class ExtraConfiguration {
+        private final String key;
+        private final int titleRes;
+        private final Type type;
+        private final Object defaultValue;
+
+        public ExtraConfiguration(final String key, final int titleRes, final Type type, final Object defaultValue) {
+            this.key = key;
+            this.titleRes = titleRes;
+            this.type = type;
+            this.defaultValue = defaultValue;
+        }
+
+        public boolean defaultBoolean() {
+            return (Boolean) defaultValue;
+        }
+
+        public String getKey() {
+            return key;
+        }
+
+        public int getTitleRes() {
+            return titleRes;
+        }
+
+        public Type getType() {
+            return type;
+        }
+
+        public static ExtraConfiguration newBoolean(final String key, final int titleRes, final boolean def) {
+            return new ExtraConfiguration(key, titleRes, Type.BOOLEAN, def);
+        }
+
+        public enum Type {
+            BOOLEAN
+        }
+    }
 
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/preference/AccountsListPreference.java b/twidere/src/main/java/org/mariotaku/twidere/preference/AccountsListPreference.java
index 17af493e0c..19157ae997 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/preference/AccountsListPreference.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/preference/AccountsListPreference.java
@@ -55,7 +55,6 @@
 
 public abstract class AccountsListPreference extends PreferenceCategory implements Constants {
 
-    private static final int[] ATTRS = {R.attr.switchKey, R.attr.switchDefault};
     @Nullable
     private final String mSwitchKey;
     private final boolean mSwitchDefault;
@@ -70,9 +69,9 @@ public AccountsListPreference(final Context context, final AttributeSet attrs) {
 
     public AccountsListPreference(final Context context, final AttributeSet attrs, final int defStyle) {
         super(context, attrs, defStyle);
-        final TypedArray a = context.obtainStyledAttributes(attrs, ATTRS);
-        mSwitchKey = a.getString(0);
-        mSwitchDefault = a.getBoolean(1, false);
+        final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.AccountsListPreference);
+        mSwitchKey = a.getString(R.styleable.AccountsListPreference_switchKey);
+        mSwitchDefault = a.getBoolean(R.styleable.AccountsListPreference_switchDefault, false);
         a.recycle();
     }
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/preference/RingtonePreference.java b/twidere/src/main/java/org/mariotaku/twidere/preference/RingtonePreference.java
index 1c70ecfb5b..2a4fb1832e 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/preference/RingtonePreference.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/preference/RingtonePreference.java
@@ -42,6 +42,7 @@
 import com.afollestad.materialdialogs.MaterialDialog;
 
 import org.mariotaku.sqliteqb.library.Expression;
+import org.mariotaku.twidere.R;
 import org.mariotaku.twidere.preference.iface.IDialogPreference;
 
 import static android.text.TextUtils.isEmpty;
@@ -55,12 +56,11 @@ public class RingtonePreference extends DialogPreference implements IDialogPrefe
 
     public RingtonePreference(final Context context, final AttributeSet attrs) {
         super(context, attrs);
-        final int[] styleable = {android.R.attr.ringtoneType, android.R.attr.showDefault,
-                android.R.attr.showSilent};
-        TypedArray a = context.obtainStyledAttributes(attrs, styleable);
-        mRingtoneType = a.getInt(0, RingtoneManager.TYPE_RINGTONE);
-        mShowDefault = a.getBoolean(1, true);
-        mShowSilent = a.getBoolean(2, true);
+        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.RingtonePreference);
+        mRingtoneType = a.getInt(R.styleable.RingtonePreference_android_ringtoneType,
+                RingtoneManager.TYPE_RINGTONE);
+        mShowDefault = a.getBoolean(R.styleable.RingtonePreference_android_showDefault, true);
+        mShowSilent = a.getBoolean(R.styleable.RingtonePreference_android_showSilent, true);
         a.recycle();
     }
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/task/twitter/GetActivitiesTask.java b/twidere/src/main/java/org/mariotaku/twidere/task/twitter/GetActivitiesTask.java
index 4a8a598d2c..54347b4a79 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/task/twitter/GetActivitiesTask.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/task/twitter/GetActivitiesTask.java
@@ -26,7 +26,6 @@
 import org.mariotaku.twidere.model.util.ParcelableActivityUtils;
 import org.mariotaku.twidere.model.util.ParcelableCredentialsUtils;
 import org.mariotaku.twidere.provider.TwidereDataStore.Activities;
-import org.mariotaku.twidere.provider.TwidereDataStore.Statuses;
 import org.mariotaku.twidere.task.AbstractTask;
 import org.mariotaku.twidere.util.ContentValuesCreator;
 import org.mariotaku.twidere.util.DataStoreUtils;
@@ -148,7 +147,7 @@ private void storeActivities(ContentResolver cr, int loadItemLimit, UserKey acco
                 deleteBound[1] = Math.max(deleteBound[1], parcelableActivity.max_sort_position);
             }
             final ContentValues values = ContentValuesCreator.createActivity(parcelableActivity);
-            values.put(Statuses.INSERTED_DATE, System.currentTimeMillis());
+            values.put(Activities.INSERTED_DATE, System.currentTimeMillis());
             valuesList.add(values);
         }
         if (deleteBound[0] > 0 && deleteBound[1] > 0) {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/task/twitter/GetStatusesTask.java b/twidere/src/main/java/org/mariotaku/twidere/task/twitter/GetStatusesTask.java
index 1961ce0af3..60a0f62928 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/task/twitter/GetStatusesTask.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/task/twitter/GetStatusesTask.java
@@ -6,7 +6,6 @@
 import android.database.Cursor;
 import android.net.Uri;
 import android.support.annotation.NonNull;
-import android.support.annotation.UiThread;
 import android.util.Log;
 
 import com.squareup.otto.Bus;
@@ -23,9 +22,12 @@
 import org.mariotaku.twidere.api.twitter.model.Paging;
 import org.mariotaku.twidere.api.twitter.model.ResponseList;
 import org.mariotaku.twidere.api.twitter.model.Status;
+import org.mariotaku.twidere.model.ParcelableStatus;
+import org.mariotaku.twidere.model.ParcelableStatusValuesCreator;
 import org.mariotaku.twidere.model.RefreshTaskParam;
 import org.mariotaku.twidere.model.UserKey;
 import org.mariotaku.twidere.model.message.GetStatusesTaskEvent;
+import org.mariotaku.twidere.model.util.ParcelableStatusUtils;
 import org.mariotaku.twidere.provider.TwidereDataStore.AccountSupportColumns;
 import org.mariotaku.twidere.provider.TwidereDataStore.Statuses;
 import org.mariotaku.twidere.task.AbstractTask;
@@ -87,9 +89,8 @@ public void afterExecute(RefreshTaskParam params, List<TwitterWrapper.StatusList
         bus.post(new GetStatusesTaskEvent(getContentUri(), false, AsyncTwitterWrapper.getException(result)));
     }
 
-
-    @UiThread
-    public void notifyStart() {
+    @Override
+    protected void beforeExecute(RefreshTaskParam refreshTaskParam) {
         bus.post(new GetStatusesTaskEvent(getContentUri(), true, null));
     }
 
@@ -166,13 +167,10 @@ public List<TwitterWrapper.StatusListResponse> doLongOperation(final RefreshTask
     @NonNull
     protected abstract String getErrorInfoKey();
 
-    private void storeStatus(final UserKey accountKey, final List<Status> statuses,
+    private void storeStatus(@NonNull final UserKey accountKey, @NonNull final List<Status> statuses,
                              final String sinceId, final String maxId,
                              final long sinceSortId, final long maxSortId,
                              int loadItemLimit, final boolean notify) {
-        if (statuses == null || statuses.isEmpty() || accountKey == null) {
-            return;
-        }
         final Uri uri = getContentUri();
         final ContentResolver resolver = context.getContentResolver();
         final boolean noItemsBefore = DataStoreUtils.getStatusCount(context, uri, accountKey) <= 0;
@@ -180,17 +178,28 @@ private void storeStatus(final UserKey accountKey, final List<Status> statuses,
         final String[] statusIds = new String[statuses.size()];
         int minIdx = -1;
         boolean hasIntersection = false;
-        for (int i = 0, j = statuses.size(); i < j; i++) {
-            final Status status = statuses.get(i);
-            values[i] = ContentValuesCreator.createStatus(status, accountKey);
-            values[i].put(Statuses.INSERTED_DATE, System.currentTimeMillis());
-            if (minIdx == -1 || status.compareTo(statuses.get(minIdx)) < 0) {
-                minIdx = i;
-            }
-            if (sinceId != null && status.getSortId() <= sinceSortId) {
-                hasIntersection = true;
+        if (!statuses.isEmpty()) {
+            final long firstSortId = statuses.get(0).getSortId();
+            final long lastSortId = statuses.get(statuses.size() - 1).getSortId();
+            // Get id diff of first and last item
+            long sortDiff = firstSortId - lastSortId;
+
+            for (int i = 0, j = statuses.size(); i < j; i++) {
+                final Status item = statuses.get(i);
+                final ParcelableStatus status = ParcelableStatusUtils.fromStatus(item, accountKey,
+                        false);
+                values[i] = ParcelableStatusValuesCreator.create(status);
+                values[i].put(Statuses.INSERTED_DATE, System.currentTimeMillis());
+                values[i].put(Statuses.POSITION_KEY, getPositionKey(status.timestamp, status.sort_id,
+                        lastSortId, sortDiff));
+                if (minIdx == -1 || item.compareTo(statuses.get(minIdx)) < 0) {
+                    minIdx = i;
+                }
+                if (sinceId != null && item.getSortId() <= sinceSortId) {
+                    hasIntersection = true;
+                }
+                statusIds[i] = item.getId();
             }
-            statusIds[i] = status.getId();
         }
         // Delete all rows conflicting before new data inserted.
         final Expression accountWhere = Expression.equalsArgs(AccountSupportColumns.ACCOUNT_KEY);
@@ -241,5 +250,9 @@ private void storeStatus(final UserKey accountKey, final List<Status> statuses,
         }
     }
 
+    public static long getPositionKey(long timestamp, long sortId, long lastSortId, long sortDiff) {
+        if (sortDiff == 0) return timestamp;
+        return timestamp + (sortId - lastSortId) * 499 / sortDiff;
+    }
 
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/CustomTabUtils.java b/twidere/src/main/java/org/mariotaku/twidere/util/CustomTabUtils.java
index cc3480a01d..54a8a2c8b7 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/CustomTabUtils.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/CustomTabUtils.java
@@ -316,8 +316,8 @@ else if (type.contains("/")) {
     public static String getTabTypeName(final Context context, final String type) {
         if (context == null) return null;
         final CustomTabConfiguration conf = getTabConfiguration(type);
-        final Integer res_id = conf != null ? conf.getDefaultTitle() : null;
-        return res_id != null ? context.getString(res_id) : null;
+        if (conf == null) return null;
+        return context.getString(conf.getDefaultTitle());
     }
 
     public static boolean isSingleTab(final String type) {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java b/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
index da1af9945f..5790841be9 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/ThemeUtils.java
@@ -168,17 +168,6 @@ public static Drawable getCompatToolbarOverlay(Activity activity) {
         return null;
     }
 
-    public static int getContrastForegroundColor(Context context, int color) {
-        final int[] colors = new int[2];
-        getDarkLightForegroundColors(context, colors);
-        if (!isLightTheme(context) || TwidereColorUtils.getYIQLuminance(color) <= ACCENT_COLOR_THRESHOLD) {
-            //return light text color
-            return colors[1];
-        }
-        //return dark text color
-        return colors[0];
-    }
-
 
     public static int getContrastColor(int color, int darkColor, int lightColor) {
         if (TwidereColorUtils.getYIQLuminance(color) <= ACCENT_COLOR_THRESHOLD) {
@@ -262,21 +251,6 @@ public static int getTextColorPrimary(final Context context) {
     }
 
 
-    public static void getDarkLightForegroundColors(final Context context, int[] colors) {
-        final TypedArray a = context.obtainStyledAttributes(ATTRS_COLOR_FOREGROUND_AND_INVERSE);
-        try {
-            if (isLightTheme(context)) {
-                colors[0] = a.getColor(0, Color.WHITE);
-                colors[1] = a.getColor(1, Color.BLACK);
-            } else {
-                colors[0] = a.getColor(1, Color.WHITE);
-                colors[1] = a.getColor(0, Color.BLACK);
-            }
-        } finally {
-            a.recycle();
-        }
-    }
-
     public static int getThemeBackgroundColor(final Context context) {
         final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.colorBackground});
         try {
@@ -316,9 +290,7 @@ public static int getThemeColor(Context context) {
         }
     }
 
-    public static String getThemeFontFamily(final Context context) {
-        if (context == null) return VALUE_THEME_FONT_FAMILY_REGULAR;
-        final SharedPreferencesWrapper pref = getSharedPreferencesWrapper(context);
+    public static String getThemeFontFamily(@NonNull  final SharedPreferences pref) {
         final String fontFamily = pref.getString(KEY_THEME_FONT_FAMILY, VALUE_THEME_FONT_FAMILY_REGULAR);
         if (!TextUtils.isEmpty(fontFamily)) return fontFamily;
         return VALUE_THEME_FONT_FAMILY_REGULAR;
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/Utils.java b/twidere/src/main/java/org/mariotaku/twidere/util/Utils.java
index ec14218d10..070c9c718b 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/Utils.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/Utils.java
@@ -126,7 +126,6 @@
 import org.mariotaku.twidere.api.twitter.model.RateLimitStatus;
 import org.mariotaku.twidere.api.twitter.model.Relationship;
 import org.mariotaku.twidere.api.twitter.model.Status;
-import org.mariotaku.twidere.fragment.iface.IBaseFragment.SystemWindowsInsetsCallback;
 import org.mariotaku.twidere.fragment.AccountsManagerFragment;
 import org.mariotaku.twidere.fragment.DirectMessagesFragment;
 import org.mariotaku.twidere.fragment.DraftsFragment;
@@ -160,6 +159,7 @@
 import org.mariotaku.twidere.fragment.UserProfileEditorFragment;
 import org.mariotaku.twidere.fragment.UserTimelineFragment;
 import org.mariotaku.twidere.fragment.UsersListFragment;
+import org.mariotaku.twidere.fragment.iface.IBaseFragment.SystemWindowsInsetsCallback;
 import org.mariotaku.twidere.graphic.PaddingDrawable;
 import org.mariotaku.twidere.model.AccountPreferences;
 import org.mariotaku.twidere.model.ParcelableAccount;
@@ -1375,6 +1375,12 @@ public static int getProfileImageStyle(Context context) {
         return getProfileImageStyle(style);
     }
 
+    @ShapeStyle
+    public static int getProfileImageStyle(@NonNull SharedPreferences prefs) {
+        final String style = prefs.getString(KEY_PROFILE_IMAGE_STYLE, null);
+        return getProfileImageStyle(style);
+    }
+
     @ShapeStyle
     public static int getProfileImageStyle(String style) {
         if (VALUE_PROFILE_IMAGE_STYLE_SQUARE.equalsIgnoreCase(style)) {
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/theme/FontFamilyTagProcessor.java b/twidere/src/main/java/org/mariotaku/twidere/util/theme/FontFamilyTagProcessor.java
new file mode 100644
index 0000000000..ebbb2f158b
--- /dev/null
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/theme/FontFamilyTagProcessor.java
@@ -0,0 +1,40 @@
+package org.mariotaku.twidere.util.theme;
+
+import android.content.Context;
+import android.graphics.Typeface;
+import android.support.annotation.NonNull;
+import android.support.annotation.Nullable;
+import android.view.View;
+import android.widget.TextView;
+
+import com.afollestad.appthemeengine.tagprocessors.TagProcessor;
+
+import org.mariotaku.twidere.util.ThemeUtils;
+
+/**
+ * Created by mariotaku on 16/3/19.
+ */
+public class FontFamilyTagProcessor extends TagProcessor {
+    public static final String TAG = "font_family";
+    private String mFontFamily;
+
+    @Override
+    public boolean isTypeSupported(@NonNull View view) {
+        return view instanceof TextView;
+    }
+
+    @Override
+    public void process(@NonNull Context context, @Nullable String key, @NonNull View view,
+                        @NonNull String suffix) {
+        TextView textView = (TextView) view;
+        final Typeface defTypeface = textView.getTypeface();
+        Typeface typeface = ThemeUtils.getUserTypeface(context, mFontFamily, defTypeface);
+        if (defTypeface != typeface) {
+            textView.setTypeface(typeface);
+        }
+    }
+
+    public void setFontFamily(String fontFamily) {
+        mFontFamily = fontFamily;
+    }
+}
diff --git a/twidere/src/main/java/org/mariotaku/twidere/util/theme/OptimalLinkColorTagProcessor.java b/twidere/src/main/java/org/mariotaku/twidere/util/theme/OptimalLinkColorTagProcessor.java
index a57cd9eac6..9dfdd9a211 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/util/theme/OptimalLinkColorTagProcessor.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/util/theme/OptimalLinkColorTagProcessor.java
@@ -15,6 +15,8 @@
  * Created by mariotaku on 16/3/18.
  */
 public class OptimalLinkColorTagProcessor extends TagProcessor {
+    public static final String TAG = "optimal_link_color";
+
     @Override
     public boolean isTypeSupported(@NonNull View view) {
         return view instanceof TextView;
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/BadgeView.java b/twidere/src/main/java/org/mariotaku/twidere/view/BadgeView.java
index f10542b020..a50f4f3bfa 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/BadgeView.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/BadgeView.java
@@ -10,6 +10,8 @@
 import android.util.AttributeSet;
 import android.view.View;
 
+import org.mariotaku.twidere.R;
+
 /**
  * Created by mariotaku on 14/11/16.
  */
@@ -31,10 +33,9 @@ public BadgeView(Context context, AttributeSet attrs) {
     public BadgeView(Context context, AttributeSet attrs, int defStyleAttr) {
         super(context, attrs, defStyleAttr);
         mTextPaint = new TextPaint(TextPaint.ANTI_ALIAS_FLAG);
-        final TypedArray a = context.obtainStyledAttributes(attrs,
-                new int[]{android.R.attr.textColor, android.R.attr.text});
-        setColor(a.getColor(0, Color.WHITE));
-        setText(a.getString(1));
+        final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.BadgeView);
+        setColor(a.getColor(R.styleable.BadgeView_android_textColor, Color.WHITE));
+        setText(a.getString(R.styleable.BadgeView_android_text));
         a.recycle();
         mTextPaint.setTextAlign(Align.CENTER);
         mTextBounds = new Rect();
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/CardMediaContainer.java b/twidere/src/main/java/org/mariotaku/twidere/view/CardMediaContainer.java
index a813f9e96a..f714266854 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/CardMediaContainer.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/CardMediaContainer.java
@@ -66,10 +66,9 @@ public CardMediaContainer(Context context, AttributeSet attrs) {
 
     public CardMediaContainer(Context context, AttributeSet attrs, int defStyleAttr) {
         super(context, attrs, defStyleAttr);
-        final TypedArray a = context.obtainStyledAttributes(attrs, new int[]{
-                android.R.attr.horizontalSpacing, android.R.attr.verticalSpacing});
-        mHorizontalSpacing = a.getDimensionPixelSize(0, 0);
-        mVerticalSpacing = a.getDimensionPixelSize(1, 0);
+        final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CardMediaContainer);
+        mHorizontalSpacing = a.getDimensionPixelSize(R.styleable.CardMediaContainer_android_horizontalSpacing, 0);
+        mVerticalSpacing = a.getDimensionPixelSize(R.styleable.CardMediaContainer_android_verticalSpacing, 0);
         a.recycle();
     }
 
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/ComposeEditText.java b/twidere/src/main/java/org/mariotaku/twidere/view/ComposeEditText.java
index e75c8b0802..03fc217230 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/ComposeEditText.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/ComposeEditText.java
@@ -31,16 +31,14 @@
 import android.widget.AdapterView;
 
 import com.afollestad.appthemeengine.inflation.ATEMultiAutoCompleteTextView;
-import com.afollestad.appthemeengine.inflation.ATEMultiAutoCompleteTextView2;
 
-import org.mariotaku.twidere.R;
 import org.mariotaku.twidere.adapter.ComposeAutoCompleteAdapter;
 import org.mariotaku.twidere.model.UserKey;
 import org.mariotaku.twidere.util.EmojiSupportUtils;
 import org.mariotaku.twidere.util.widget.StatusTextTokenizer;
 import org.mariotaku.twidere.view.iface.IThemeBackgroundTintView;
 
-public class ComposeEditText extends ATEMultiAutoCompleteTextView2 implements IThemeBackgroundTintView {
+public class ComposeEditText extends ATEMultiAutoCompleteTextView implements IThemeBackgroundTintView {
 
     private ComposeAutoCompleteAdapter mAdapter;
     private UserKey mAccountKey;
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/ProfileBannerSpace.java b/twidere/src/main/java/org/mariotaku/twidere/view/ProfileBannerSpace.java
index 131ef54830..15821da8d1 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/ProfileBannerSpace.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/ProfileBannerSpace.java
@@ -3,17 +3,13 @@
 import android.annotation.SuppressLint;
 import android.content.Context;
 import android.graphics.Canvas;
-import android.graphics.Rect;
 import android.support.annotation.NonNull;
 import android.util.AttributeSet;
 import android.view.View;
 
-import org.mariotaku.twidere.util.ThemeUtils;
-
 public class ProfileBannerSpace extends View {
 
-    private final Rect mSystemWindowsInsets;
-    private final int mActionBarHeight;
+    private int mStatusBarHeight, mToolbarHeight;
 
     /**
      * {@inheritDoc}
@@ -35,8 +31,6 @@ public ProfileBannerSpace(final Context context, final AttributeSet attrs) {
      */
     public ProfileBannerSpace(final Context context, final AttributeSet attrs, final int defStyle) {
         super(context, attrs, defStyle);
-        mSystemWindowsInsets = new Rect();
-        mActionBarHeight = ThemeUtils.getActionBarHeight(context);
     }
 
     /**
@@ -49,18 +43,28 @@ public ProfileBannerSpace(final Context context, final AttributeSet attrs, final
     public void draw(@NonNull final Canvas canvas) {
     }
 
-    @Deprecated
-    @Override
-    protected boolean fitSystemWindows(@NonNull Rect insets) {
-        mSystemWindowsInsets.set(insets);
-        return super.fitSystemWindows(insets);
+    public void setStatusBarHeight(int offset) {
+        mStatusBarHeight = offset;
+        requestLayout();
+    }
+
+    public void setToolbarHeight(int toolbarHeight) {
+        mToolbarHeight = toolbarHeight;
+        requestLayout();
+    }
+
+    public int getStatusBarHeight() {
+        return mStatusBarHeight;
+    }
+
+    public int getToolbarHeight() {
+        return mToolbarHeight;
     }
 
     @Override
     protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec) {
-        final int insetsTop = mSystemWindowsInsets.top;
-        final int top = insetsTop <= 0 || insetsTop < mActionBarHeight ? insetsTop + mActionBarHeight : insetsTop;
-        final int width = MeasureSpec.getSize(widthMeasureSpec), height = width / 2 - top;
+        final int width = MeasureSpec.getSize(widthMeasureSpec), height = width / 2
+                - mStatusBarHeight - mToolbarHeight;
         setMeasuredDimension(width, height);
         super.onMeasure(widthMeasureSpec, MeasureSpec.makeMeasureSpec(height, MeasureSpec.EXACTLY));
     }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/StatusTextCountView.java b/twidere/src/main/java/org/mariotaku/twidere/view/StatusTextCountView.java
index 06e7ca2c4d..b6d7cf74a4 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/StatusTextCountView.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/StatusTextCountView.java
@@ -22,6 +22,7 @@
 import android.content.Context;
 import android.content.res.TypedArray;
 import android.graphics.Color;
+import android.support.annotation.ColorInt;
 import android.support.v7.widget.AppCompatTextView;
 import android.util.AttributeSet;
 
@@ -33,6 +34,7 @@
 
 public class StatusTextCountView extends AppCompatTextView {
 
+    @ColorInt
     private final int mTextColor;
     private final Locale mLocale;
     private int mTextCount;
@@ -87,8 +89,15 @@ public void updateTextCount() {
         final float hue = exceededLimit ? nearLimit ? 5 * (maxLength - count) : 50 : 0;
         final float[] textColorHsv = new float[3];
         Color.colorToHSV(mTextColor, textColorHsv);
-        final float[] errorColorHsv = {hue, 1.0f, 0.75f + textColorHsv[2] / 4};
-        setTextColor(count >= maxLength - 10 ? Color.HSVToColor(errorColorHsv) : mTextColor);
+        final float[] errorColorHsv = new float[3];
+        errorColorHsv[0] = hue;
+        errorColorHsv[1] = 1;
+        errorColorHsv[2] = 0.75f + textColorHsv[2] / 4;
+        if (count >= maxLength - 10) {
+            setTextColor(Color.HSVToColor(errorColorHsv));
+        } else {
+            setTextColor(mTextColor);
+        }
     }
 
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/TintedStatusFrameLayout.java b/twidere/src/main/java/org/mariotaku/twidere/view/TintedStatusFrameLayout.java
index e6958888be..db2ec02841 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/TintedStatusFrameLayout.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/TintedStatusFrameLayout.java
@@ -25,27 +25,30 @@
 import android.graphics.Color;
 import android.graphics.Paint;
 import android.graphics.Rect;
+import android.os.Build;
 import android.support.annotation.NonNull;
+import android.support.v4.view.ViewCompat;
+import android.support.v4.view.WindowInsetsCompat;
 import android.util.AttributeSet;
+import android.view.View;
+
+import com.afollestad.appthemeengine.inflation.ViewInterface;
 
 import org.mariotaku.twidere.R;
-import org.mariotaku.twidere.util.TwidereMathUtils;
-import org.mariotaku.twidere.util.Utils;
 import org.mariotaku.twidere.view.iface.TintedStatusLayout;
 
 /**
  * Created by mariotaku on 14/11/26.
  */
-public class TintedStatusFrameLayout extends ExtendedFrameLayout implements TintedStatusLayout {
+public class TintedStatusFrameLayout extends ExtendedFrameLayout implements TintedStatusLayout,
+        ViewInterface {
 
-    private final Paint mBlackPaint, mShadowPaint, mColorPaint;
+    private final Paint mColorPaint;
     private boolean mSetPadding;
 
     private int mStatusBarHeight;
-    private float mFactor;
-    private int mColorAlpha, mShadowAlpha;
-    private boolean mDrawShadow, mDrawColor;
     private Rect mSystemWindowsInsets;
+    private WindowInsetsListener mWindowInsetsListener;
 
     public TintedStatusFrameLayout(Context context) {
         this(context, null);
@@ -60,53 +63,39 @@ public TintedStatusFrameLayout(Context context, AttributeSet attrs, int defStyle
         final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.TintedStatusLayout);
         setSetPaddingEnabled(a.getBoolean(R.styleable.TintedStatusLayout_setPadding, false));
         a.recycle();
-        mBlackPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
-        mBlackPaint.setColor(Color.BLACK);
-        mShadowPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
         mColorPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
         mSystemWindowsInsets = new Rect();
         setWillNotDraw(false);
-        setFactor(1);
-    }
-
-
-    @Override
-    public void setColor(int color) {
-        setColor(color, Color.alpha(color));
-    }
-
-    @Override
-    public void setColor(int color, int alpha) {
-        mColorPaint.setColor(color);
-        mColorAlpha = alpha;
-        updateAlpha();
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
+            setSystemUiVisibility(SYSTEM_UI_FLAG_LAYOUT_STABLE | SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);
+            ViewCompat.setOnApplyWindowInsetsListener(this, new android.support.v4.view.OnApplyWindowInsetsListener() {
+                @Override
+                public WindowInsetsCompat onApplyWindowInsets(View v, WindowInsetsCompat insets) {
+                    final int top = insets.getSystemWindowInsetTop();
+                    final int left = insets.getSystemWindowInsetLeft();
+                    final int right = insets.getSystemWindowInsetRight();
+                    final int bottom = insets.getSystemWindowInsetBottom();
+                    if (mSetPadding) {
+                        setPadding(left, top, right, bottom);
+                    }
+                    setStatusBarHeight(top);
+                    if (mWindowInsetsListener != null) {
+                        mWindowInsetsListener.onApplyWindowInsets(left, top, right, bottom);
+                    }
+                    return insets.consumeSystemWindowInsets();
+                }
+            });
+        }
     }
 
-    @Override
-    public void setDrawColor(boolean color) {
-        mDrawColor = color;
-        invalidate();
-    }
 
     @Override
-    public void setDrawShadow(boolean shadow) {
-        mDrawShadow = shadow;
+    public void setStatusBarColor(int color) {
+        mColorPaint.setColor(0xFF000000 | color);
+        mColorPaint.setAlpha(Color.alpha(color));
         invalidate();
     }
 
-    @Override
-    public void setFactor(float f) {
-        mFactor = f;
-        updateAlpha();
-    }
-
-    @Override
-    public void setShadowColor(int color) {
-        mShadowPaint.setColor(color);
-        mShadowAlpha = Color.alpha(color);
-        updateAlpha();
-    }
-
     @Override
     public void setSetPaddingEnabled(boolean enabled) {
         mSetPadding = enabled;
@@ -117,36 +106,33 @@ public void setStatusBarHeight(int height) {
         invalidate();
     }
 
-    @Override
-    public void getSystemWindowsInsets(Rect insets) {
-        insets.set(mSystemWindowsInsets);
-    }
-
     @Override
     protected void dispatchDraw(@NonNull Canvas canvas) {
         super.dispatchDraw(canvas);
-        if (mDrawShadow) {
-            canvas.drawRect(0, 0, canvas.getWidth(), mStatusBarHeight, mShadowPaint);
-        } else if (mDrawColor) {
-//            canvas.drawRect(0, 0, canvas.getWidth(), mStatusBarHeight, mBlackPaint);
-        }
-        canvas.drawRect(0, 0, canvas.getWidth(), mStatusBarHeight, mDrawColor ? mColorPaint : mBlackPaint);
+        canvas.drawRect(0, 0, canvas.getWidth(), mStatusBarHeight, mColorPaint);
     }
 
     @Override
     protected boolean fitSystemWindows(@NonNull Rect insets) {
-        setStatusBarHeight(Utils.getInsetsTopWithoutActionBarHeight(getContext(), insets.top));
-        if (mSetPadding) {
-            setPadding(insets.left, insets.top, insets.right, insets.bottom);
-        }
         mSystemWindowsInsets.set(insets);
-        return super.fitSystemWindows(insets);
+        return true;
     }
 
-    private void updateAlpha() {
-        final float f = mFactor;
-        mShadowPaint.setAlpha(Math.round(mShadowAlpha * TwidereMathUtils.clamp(1 - f, 0, 1)));
-        mColorPaint.setAlpha(Math.round(mColorAlpha * TwidereMathUtils.clamp(f, 0, 1)));
-        invalidate();
+    @Override
+    public boolean setsStatusBarColor() {
+        return true;
+    }
+
+    @Override
+    public boolean setsToolbarColor() {
+        return false;
+    }
+
+    public void setWindowInsetsListener(WindowInsetsListener listener) {
+        mWindowInsetsListener = listener;
+    }
+
+    public interface WindowInsetsListener {
+        void onApplyWindowInsets(int left, int top, int right, int bottom);
     }
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/TintedStatusNativeActionModeAwareLayout.java b/twidere/src/main/java/org/mariotaku/twidere/view/TintedStatusNativeActionModeAwareLayout.java
deleted file mode 100644
index 097b07661c..0000000000
--- a/twidere/src/main/java/org/mariotaku/twidere/view/TintedStatusNativeActionModeAwareLayout.java
+++ /dev/null
@@ -1,53 +0,0 @@
-/*
- *                 Twidere - Twitter client for Android
- *
- *  Copyright (C) 2012-2015 Mariotaku Lee <mariotaku.lee@gmail.com>
- *
- *  This program is free software: you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation, either version 3 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
- */
-
-package org.mariotaku.twidere.view;
-
-import android.annotation.TargetApi;
-import android.content.Context;
-import android.os.Build;
-import android.util.AttributeSet;
-import android.view.ActionMode;
-import android.view.View;
-
-@TargetApi(Build.VERSION_CODES.HONEYCOMB)
-public class TintedStatusNativeActionModeAwareLayout extends TintedStatusFrameLayout {
-
-    private OnActionModeForChildListener mActionModeForChildListener;
-
-    public TintedStatusNativeActionModeAwareLayout(Context context, AttributeSet attrs) {
-        super(context, attrs);
-    }
-
-    public void setActionModeForChildListener(OnActionModeForChildListener listener) {
-        mActionModeForChildListener = listener;
-    }
-
-    @Override
-    public ActionMode startActionModeForChild(View originalView, ActionMode.Callback callback) {
-        if (mActionModeForChildListener != null) {
-            return mActionModeForChildListener.startActionModeForChild(originalView, callback);
-        }
-        return super.startActionModeForChild(originalView, callback);
-    }
-
-    public interface OnActionModeForChildListener {
-        ActionMode startActionModeForChild(View originalView, ActionMode.Callback callback);
-    }
-}
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/holder/MessageViewHolder.java b/twidere/src/main/java/org/mariotaku/twidere/view/holder/MessageViewHolder.java
index bdf8b2c073..8719cece59 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/holder/MessageViewHolder.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/holder/MessageViewHolder.java
@@ -58,13 +58,11 @@ public MessageViewHolder(final MessageConversationAdapter adapter, final View it
         super(itemView);
         this.adapter = adapter;
         final Context context = itemView.getContext();
-        final TypedArray a = context.obtainStyledAttributes(new int[]{android.R.attr.textColorPrimary,
-                android.R.attr.textColorPrimaryInverse, android.R.attr.textColorSecondary,
-                android.R.attr.textColorSecondaryInverse});
-        textColorPrimary = a.getColor(0, 0);
-        textColorPrimaryInverse = a.getColor(1, 0);
-        textColorSecondary = a.getColor(2, 0);
-        textColorSecondaryInverse = a.getColor(3, 0);
+        final TypedArray a = context.obtainStyledAttributes(R.styleable.MessageViewHolder);
+        textColorPrimary = a.getColor(R.styleable.MessageViewHolder_android_textColorPrimary, 0);
+        textColorPrimaryInverse = a.getColor(R.styleable.MessageViewHolder_android_textColorPrimaryInverse, 0);
+        textColorSecondary = a.getColor(R.styleable.MessageViewHolder_android_textColorSecondary, 0);
+        textColorSecondaryInverse = a.getColor(R.styleable.MessageViewHolder_android_textColorSecondaryInverse, 0);
         a.recycle();
         messageContent = (MessageBubbleView) itemView.findViewById(R.id.message_content);
         textView = (TextView) itemView.findViewById(R.id.text);
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/iface/TintedStatusLayout.java b/twidere/src/main/java/org/mariotaku/twidere/view/iface/TintedStatusLayout.java
index aa16235eab..25f485be81 100644
--- a/twidere/src/main/java/org/mariotaku/twidere/view/iface/TintedStatusLayout.java
+++ b/twidere/src/main/java/org/mariotaku/twidere/view/iface/TintedStatusLayout.java
@@ -25,19 +25,8 @@
  * Created by mariotaku on 15/4/27.
  */
 public interface TintedStatusLayout extends IExtendedView {
-    void setColor(int color);
-
-    void setColor(int color, int alpha);
-
-    void setDrawColor(boolean color);
-
-    void setDrawShadow(boolean shadow);
-
-    void setFactor(float f);
-
-    void setShadowColor(int color);
+    void setStatusBarColor(int color);
 
     void setSetPaddingEnabled(boolean enabled);
 
-    void getSystemWindowsInsets(Rect insets);
 }
diff --git a/twidere/src/main/java/org/mariotaku/twidere/view/themed/BackgroundTintImageButton.java b/twidere/src/main/java/org/mariotaku/twidere/view/themed/BackgroundTintImageButton.java
deleted file mode 100644
index da6a8f1307..0000000000
--- a/twidere/src/main/java/org/mariotaku/twidere/view/themed/BackgroundTintImageButton.java
+++ /dev/null
@@ -1,69 +0,0 @@
-/*
- * Twidere - Twitter client for Android
- *
- *  Copyright (C) 2012-2015 Mariotaku Lee <mariotaku.lee@gmail.com>
- *
- *  This program is free software: you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation, either version 3 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
- */
-
-package org.mariotaku.twidere.view.themed;
-
-import android.content.Context;
-import android.content.res.ColorStateList;
-import android.content.res.TypedArray;
-import android.graphics.PorterDuff.Mode;
-import android.support.annotation.NonNull;
-import android.util.AttributeSet;
-import android.widget.ImageButton;
-
-import org.mariotaku.twidere.view.iface.IThemeBackgroundTintView;
-
-/**
- * Created by mariotaku on 14/11/5.
- */
-public class BackgroundTintImageButton extends ImageButton implements IThemeBackgroundTintView {
-
-    private final int mDefaultColor;
-
-    public BackgroundTintImageButton(Context context) {
-        this(context, null);
-    }
-
-    public BackgroundTintImageButton(Context context, AttributeSet attrs) {
-        this(context, attrs, android.R.attr.imageButtonStyle);
-    }
-
-    public BackgroundTintImageButton(Context context, AttributeSet attrs, int defStyleAttr) {
-        super(context, attrs, defStyleAttr);
-        final TypedArray a = context.obtainStyledAttributes(attrs, new int[]{android.R.attr.color,
-                android.R.attr.colorForeground});
-        if (a.hasValue(0)) {
-            mDefaultColor = a.getColor(0, 0);
-        } else {
-            mDefaultColor = a.getColor(1, 0);
-        }
-        setColorFilter(mDefaultColor, Mode.SRC_ATOP);
-        a.recycle();
-    }
-
-    public int getDefaultColor() {
-        return mDefaultColor;
-    }
-
-
-    @Override
-    public void setBackgroundTintColor(@NonNull ColorStateList color) {
-        setColorFilter(color.getDefaultColor());
-    }
-}
diff --git a/twidere/src/main/res/layout/activity_account_selector.xml b/twidere/src/main/res/layout/activity_account_selector.xml
index 577603d3cf..ccb296f6a3 100644
--- a/twidere/src/main/res/layout/activity_account_selector.xml
+++ b/twidere/src/main/res/layout/activity_account_selector.xml
@@ -26,7 +26,7 @@
     android:divider="?android:dividerVertical"
     android:orientation="vertical"
     android:showDividers="middle"
-    tools:context=".activity.SelectAccountActivity">
+    tools:context=".activity.AccountSelectorActivity">
 
     <ListView
         android:id="@android:id/list"
diff --git a/twidere/src/main/res/layout/card_item_status_common.xml b/twidere/src/main/res/layout/card_item_status_common.xml
index 9fd94f7e3e..7bc4099fa3 100644
--- a/twidere/src/main/res/layout/card_item_status_common.xml
+++ b/twidere/src/main/res/layout/card_item_status_common.xml
@@ -87,6 +87,7 @@
             android:gravity="center_vertical|start"
             android:minHeight="@dimen/element_size_small"
             android:singleLine="true"
+            android:tag="font_family|user"
             android:textAppearance="?android:attr/textAppearanceSmall"
             android:visibility="gone"
             tools:text="Mariotaku and 10 others retweeted"
@@ -150,6 +151,7 @@
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:orientation="horizontal"
+                    android:tag="font_family|user"
                     app:nv_primaryTextColor="?android:textColorPrimary"
                     app:nv_primaryTextStyle="bold"
                     app:nv_secondaryTextColor="?android:textColorSecondary"/>
@@ -161,6 +163,7 @@
                     android:gravity="center_vertical"
                     android:paddingTop="@dimen/element_spacing_xsmall"
                     android:singleLine="true"
+                    android:tag="font_family|user"
                     android:textAppearance="?android:textAppearanceSmall"
                     tools:text="10 mins ago"
                     tools:textSize="@dimen/text_size_extra_small"/>
@@ -193,6 +196,7 @@
             android:layout_marginTop="@dimen/element_spacing_small"
             android:paddingLeft="@dimen/element_spacing_normal"
             android:paddingRight="@dimen/element_spacing_normal"
+            android:tag="font_family|user"
             android:textAppearance="?android:attr/textAppearanceSmall"
             android:textColor="?android:attr/textColorPrimary"
             android:visibility="visible"
@@ -249,6 +253,7 @@
             android:paddingLeft="@dimen/element_spacing_normal"
             android:paddingRight="@dimen/element_spacing_normal"
             android:paddingTop="@dimen/element_spacing_small"
+            android:tag="font_family|user"
             android:visibility="gone"
             app:nv_primaryTextColor="?android:textColorPrimary"
             app:nv_primaryTextStyle="bold"
@@ -265,6 +270,7 @@
             android:paddingLeft="@dimen/element_spacing_normal"
             android:paddingRight="@dimen/element_spacing_normal"
             android:paddingTop="@dimen/element_spacing_small"
+            android:tag="font_family|user"
             android:textAppearance="?android:attr/textAppearanceSmall"
             android:textColor="?android:attr/textColorPrimary"
             android:visibility="gone"
@@ -334,6 +340,7 @@
                 android:focusable="false"
                 android:gravity="center"
                 android:minHeight="@dimen/button_size_content_card"
+                android:tag="font_family|user"
                 android:textAppearance="?android:textAppearanceSmall"
                 tools:text="255"/>
 
@@ -356,6 +363,7 @@
                 android:focusable="false"
                 android:gravity="center"
                 android:minHeight="@dimen/button_size_content_card"
+                android:tag="font_family|user"
                 android:textAppearance="?android:textAppearanceSmall"
                 tools:text="255"/>
 
@@ -378,6 +386,7 @@
                 android:focusable="false"
                 android:gravity="center"
                 android:minHeight="@dimen/button_size_content_card"
+                android:tag="font_family|user"
                 android:textAppearance="?android:textAppearanceSmall"
                 tools:text="255"/>
 
diff --git a/twidere/src/main/res/layout/card_item_status_compact.xml b/twidere/src/main/res/layout/card_item_status_compact.xml
index f611a6d5df..b54c1c71bb 100644
--- a/twidere/src/main/res/layout/card_item_status_compact.xml
+++ b/twidere/src/main/res/layout/card_item_status_compact.xml
@@ -65,6 +65,7 @@
             android:gravity="center_vertical|start"
             android:minHeight="@dimen/element_size_small"
             android:singleLine="true"
+            android:tag="font_family|user"
             android:textAppearance="?android:attr/textAppearanceSmall"
             android:visibility="gone"
             tools:text="Retweeted by Mariotaku"
@@ -130,6 +131,7 @@
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
+                    android:tag="font_family|user"
                     app:nv_primaryTextColor="?android:textColorPrimary"
                     app:nv_primaryTextStyle="bold"
                     app:nv_secondaryTextColor="?android:textColorSecondary"/>
@@ -139,6 +141,7 @@
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="0"
+                    android:tag="font_family|user"
                     android:textAppearance="?android:textAppearanceSmall"
                     tools:text="42 mins ago"
                     tools:textSize="@dimen/text_size_extra_small"/>
@@ -161,6 +164,7 @@
                 android:layout_alignStart="@+id/profile_container"
                 android:layout_below="@id/profile_container"
                 android:paddingTop="@dimen/element_spacing_small"
+                android:tag="font_family|user"
                 android:textAppearance="?android:attr/textAppearanceSmall"
                 android:textColor="?android:attr/textColorPrimary"
                 android:visibility="visible"
@@ -206,6 +210,7 @@
                 android:layout_toRightOf="@+id/quote_indicator"
                 android:gravity="center_vertical|start"
                 android:orientation="horizontal"
+                android:tag="font_family|user"
                 android:visibility="gone"
                 app:nv_primaryTextColor="?android:textColorPrimary"
                 app:nv_primaryTextStyle="bold"
@@ -221,6 +226,7 @@
                 android:layout_toRightOf="@+id/quote_indicator"
                 android:paddingBottom="@dimen/element_spacing_small"
                 android:paddingTop="@dimen/element_spacing_small"
+                android:tag="font_family|user"
                 android:textAppearance="?android:attr/textAppearanceSmall"
                 android:textColor="?android:attr/textColorPrimary"
                 android:visibility="gone"
@@ -295,6 +301,7 @@
                 android:focusable="false"
                 android:gravity="center"
                 android:minHeight="@dimen/button_size_content_card_compact"
+                android:tag="font_family|user"
                 android:textAppearance="?android:textAppearanceSmall"
                 tools:text="255"/>
 
@@ -319,6 +326,7 @@
                 android:focusable="false"
                 android:gravity="center"
                 android:minHeight="@dimen/button_size_content_card_compact"
+                android:tag="font_family|user"
                 android:textAppearance="?android:textAppearanceSmall"
                 tools:text="255"/>
 
@@ -343,6 +351,7 @@
                 android:focusable="false"
                 android:gravity="center"
                 android:minHeight="@dimen/button_size_content_card_compact"
+                android:tag="font_family|user"
                 android:textAppearance="?android:textAppearanceSmall"
                 tools:text="255"/>
 
diff --git a/twidere/src/main/res/layout/fragment_messages_conversation.xml b/twidere/src/main/res/layout/fragment_messages_conversation.xml
index 15aff35344..0b064e8597 100644
--- a/twidere/src/main/res/layout/fragment_messages_conversation.xml
+++ b/twidere/src/main/res/layout/fragment_messages_conversation.xml
@@ -23,7 +23,7 @@
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
-    tools:context=".fragment.DirectMessagesConversationFragment">
+    tools:context=".fragment.MessagesConversationFragment">
 
     <RelativeLayout
         android:id="@+id/conversation_container"
diff --git a/twidere/src/main/res/layout/fragment_user.xml b/twidere/src/main/res/layout/fragment_user.xml
index 9590fd2164..d4e1227160 100644
--- a/twidere/src/main/res/layout/fragment_user.xml
+++ b/twidere/src/main/res/layout/fragment_user.xml
@@ -17,12 +17,13 @@
   ~  along with this program.  If not, see <http://www.gnu.org/licenses/>.
   -->
 
-<org.mariotaku.twidere.view.ExtendedFrameLayout
+<org.mariotaku.twidere.view.TintedStatusFrameLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
-    android:fitsSystemWindows="false">
+    android:fitsSystemWindows="true"
+    app:setPadding="false">
 
     <RelativeLayout
         android:id="@+id/profile_banner_container"
@@ -50,7 +51,7 @@
         </FrameLayout>
     </RelativeLayout>
 
-    <RelativeLayout
+    <org.mariotaku.twidere.view.ExtendedRelativeLayout
         android:id="@+id/profile_content_container"
         android:layout_width="match_parent"
         android:layout_height="match_parent">
@@ -76,6 +77,6 @@
             android:elevation="@dimen/toolbar_elevation"
             android:tag="ate_ignore"
             app:popupTheme="?actionBarPopupTheme"/>
-    </RelativeLayout>
+    </org.mariotaku.twidere.view.ExtendedRelativeLayout>
 
-</org.mariotaku.twidere.view.ExtendedFrameLayout>
\ No newline at end of file
+</org.mariotaku.twidere.view.TintedStatusFrameLayout>
\ No newline at end of file
diff --git a/twidere/src/main/res/layout/header_status_common.xml b/twidere/src/main/res/layout/header_status_common.xml
index 6eea3ab761..7be5ac823c 100644
--- a/twidere/src/main/res/layout/header_status_common.xml
+++ b/twidere/src/main/res/layout/header_status_common.xml
@@ -41,6 +41,7 @@
         android:minHeight="@dimen/element_size_small"
         android:padding="@dimen/element_spacing_normal"
         android:singleLine="true"
+        android:tag="font_family|user"
         android:textAppearance="?android:attr/textAppearanceSmall"
         android:textColor="?android:textColorSecondary"
         tools:text="Retweeted by Mariotaku"/>
@@ -103,6 +104,7 @@
                 android:id="@+id/name"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
+                android:tag="font_family|user"
                 app:nv_primaryTextColor="?android:textColorPrimary"
                 app:nv_secondaryTextColor="?android:textColorSecondary"
                 app:nv_twoLine="false"/>
@@ -113,6 +115,7 @@
                 android:layout_height="wrap_content"
                 android:layout_marginTop="@dimen/element_spacing_small"
                 android:gravity="center_vertical"
+                android:tag="font_family|user"
                 android:textAppearance="?android:attr/textAppearanceSmall"
                 tools:text="Jan 1 2015 0:00  Twidere"/>
 
@@ -157,6 +160,7 @@
         android:layout_marginTop="@dimen/element_spacing_small"
         android:paddingLeft="@dimen/element_spacing_normal"
         android:paddingRight="@dimen/element_spacing_normal"
+        android:tag="font_family|user"
         android:textAppearance="?android:textAppearanceMedium"
         android:textColor="?android:textColorPrimary"
         android:visibility="visible"
@@ -182,6 +186,7 @@
             android:gravity="center_vertical"
             android:padding="@dimen/element_spacing_normal"
             android:singleLine="true"
+            android:tag="font_family|user"
             android:text="@string/unknown_language"
             android:textAppearance="?android:attr/textAppearanceSmall"
             android:textColor="?android:textColorSecondary"/>
@@ -191,6 +196,7 @@
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:padding="@dimen/element_spacing_normal"
+            android:tag="font_family|user"
             android:textColor="?android:textColorPrimary"
             android:visibility="gone"
             tools:text="@string/sample_status_text"/>
@@ -221,6 +227,7 @@
         android:orientation="horizontal"
         android:paddingLeft="@dimen/element_spacing_normal"
         android:paddingRight="@dimen/element_spacing_normal"
+        android:tag="font_family|user"
         android:visibility="gone"
         app:nv_primaryTextColor="?android:textColorPrimary"
         app:nv_secondaryTextColor="?android:textColorSecondary"
@@ -236,6 +243,7 @@
         android:layout_toEndOf="@+id/quote_indicator"
         android:layout_toRightOf="@+id/quote_indicator"
         android:singleLine="false"
+        android:tag="font_family|user"
         android:textAppearance="?android:textAppearanceMedium"
         android:textColor="?android:textColorPrimary"
         android:visibility="gone"
@@ -284,6 +292,7 @@
                 android:drawableLeft="@drawable/ic_action_gallery"
                 android:drawableStart="@drawable/ic_action_gallery"
                 android:gravity="center_vertical"
+                android:tag="font_family|user"
                 android:text="@string/load_media"
                 android:textAppearance="?android:attr/textAppearanceMedium"
                 android:textStyle="bold"/>
@@ -314,6 +323,7 @@
         android:gravity="center_vertical"
         android:padding="@dimen/element_spacing_normal"
         android:singleLine="true"
+        android:tag="font_family|user"
         android:text="@string/view_map"
         android:textAppearance="?android:attr/textAppearanceSmall"
         android:textColor="?android:textColorSecondary"/>
@@ -332,6 +342,7 @@
         android:gravity="center_vertical"
         android:padding="@dimen/element_spacing_normal"
         android:singleLine="true"
+        android:tag="font_family|user"
         android:text="@string/original_status"
         android:textAppearance="?android:attr/textAppearanceSmall"
         android:textColor="?android:textColorSecondary"/>
diff --git a/twidere/src/main/res/layout/list_item_message_entry.xml b/twidere/src/main/res/layout/list_item_message_entry.xml
index d5c83ba9fd..363342c83d 100644
--- a/twidere/src/main/res/layout/list_item_message_entry.xml
+++ b/twidere/src/main/res/layout/list_item_message_entry.xml
@@ -31,7 +31,7 @@
     android:paddingLeft="@dimen/element_spacing_normal"
     android:paddingRight="@dimen/element_spacing_normal"
     app:ignorePadding="true"
-    tools:context=".adapter.DirectMessagesEntryAdapter">
+    tools:context=".adapter.MessageEntriesAdapter">
 
     <org.mariotaku.twidere.view.ShapedImageView
         android:id="@+id/profile_image"
diff --git a/twidere/src/main/res/values/attrs.xml b/twidere/src/main/res/values/attrs.xml
index babb11a01e..562ca4c387 100644
--- a/twidere/src/main/res/values/attrs.xml
+++ b/twidere/src/main/res/values/attrs.xml
@@ -104,6 +104,25 @@
     <declare-styleable name="TintedStatusLayout">
         <attr name="setPadding" format="boolean"/>
     </declare-styleable>
+    <declare-styleable name="BadgeView">
+        <attr name="android:textColor"/>
+        <attr name="android:text"/>
+    </declare-styleable>
+    <declare-styleable name="CardMediaContainer">
+        <attr name="android:horizontalSpacing"/>
+        <attr name="android:verticalSpacing"/>
+    </declare-styleable>
+    <declare-styleable name="MessageViewHolder">
+        <attr name="android:textColorPrimary"/>
+        <attr name="android:textColorPrimaryInverse"/>
+        <attr name="android:textColorSecondary"/>
+        <attr name="android:textColorSecondaryInverse"/>
+    </declare-styleable>
+    <declare-styleable name="RingtonePreference">
+        <attr name="android:ringtoneType"/>
+        <attr name="android:showDefault"/>
+        <attr name="android:showSilent"/>
+    </declare-styleable>
     <attr name="notificationType">
         <flag name="none" value="0"/>
         <flag name="ringtone" value="1"/>
diff --git a/twidere/src/main/res/xml/preferences_about.xml b/twidere/src/main/res/xml/preferences_about.xml
index b109add871..8ed620f086 100644
--- a/twidere/src/main/res/xml/preferences_about.xml
+++ b/twidere/src/main/res/xml/preferences_about.xml
@@ -1,24 +1,27 @@
 <?xml version="1.0" encoding="utf-8"?>
-<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
+<!--suppress AndroidElementNotAllowed -->
+<PreferenceScreen
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    android:title="@string/about">
 
     <PreferenceCategory
         android:key="cat_about"
         android:title="@string/about">
-        <org.mariotaku.twidere.preference.AppVersionPreference />
+        <org.mariotaku.twidere.preference.AppVersionPreference/>
 
         <Preference
             android:summary="@string/project_name"
             android:title="@string/project_account">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=583328497&amp;finish_only=true" />
+                android:data="twidere://user?user_id=583328497&amp;finish_only=true"/>
         </Preference>
         <Preference
             android:summary="@string/developer_name"
             android:title="@string/developed_by">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=57610574&amp;finish_only=true" />
+                android:data="twidere://user?user_id=57610574&amp;finish_only=true"/>
         </Preference>
     </PreferenceCategory>
     <PreferenceCategory
@@ -27,14 +30,14 @@
         <Preference android:title="@string/translate">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="http://crowdin.net/project/twidere" />
+                android:data="http://crowdin.net/project/twidere"/>
         </Preference>
         <Preference
             android:summary="@string/contributors_list_summary"
             android:title="@string/translators">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user_list_members?list_id=99024901&amp;user_id=583328497&amp;finish_only=true" />
+                android:data="twidere://user_list_members?list_id=99024901&amp;user_id=583328497&amp;finish_only=true"/>
         </Preference>
     </PreferenceCategory>
     <PreferenceCategory android:title="@string/special_thanks_to">
@@ -43,56 +46,56 @@
             android:title="Rieya">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="http://rieya.me" />
+                android:data="http://rieya.me"/>
         </Preference>
         <Preference
             android:summary="Icon designer for 0.0.7 version"
             android:title="ilovinheart">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=144878723&amp;finish_only=true" />
+                android:data="twidere://user?user_id=144878723&amp;finish_only=true"/>
         </Preference>
         <Preference
             android:summary="Adjusted icon from 0.0.13 version to 0.2.9.10 version"
             android:title="lordfriend">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=450691326&amp;finish_only=true" />
+                android:data="twidere://user?user_id=450691326&amp;finish_only=true"/>
         </Preference>
         <Preference
             android:summary="Designed 3D Twidere icon"
             android:title="Linkzero">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=12630242&amp;finish_only=true" />
+                android:data="twidere://user?user_id=12630242&amp;finish_only=true"/>
         </Preference>
         <Preference
             android:summary="He taught me some useful things about SQLite"
             android:title="impulseplus">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=332135263&amp;finish_only=true" />
+                android:data="twidere://user?user_id=332135263&amp;finish_only=true"/>
         </Preference>
         <Preference
             android:summary="Checked Japanese translation for Luigi Van"
             android:title="Lin Yan">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=218536728&amp;finish_only=true" />
+                android:data="twidere://user?user_id=218536728&amp;finish_only=true"/>
         </Preference>
         <Preference
             android:summary="Redesigned interface, polished settings &amp; writing style"
             android:title="Uucky Lee">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=1062473329&amp;finish_only=true" />
+                android:data="twidere://user?user_id=1062473329&amp;finish_only=true"/>
         </Preference>
         <Preference
             android:summary="Special birthday banner image"
             android:title="sacrish">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=7758552&amp;finish_only=true" />
+                android:data="twidere://user?user_id=7758552&amp;finish_only=true"/>
         </Preference>
     </PreferenceCategory>
     <PreferenceCategory android:title="@string/sponsored_by">
@@ -101,7 +104,7 @@
             android:title="@string/kuma_union">
             <intent
                 android:action="android.intent.action.VIEW"
-                android:data="twidere://user?user_id=514378421&amp;finish_only=true" />
+                android:data="twidere://user?user_id=514378421&amp;finish_only=true"/>
         </Preference>
     </PreferenceCategory>
 
diff --git a/twidere/src/main/res/xml/preferences_account_notifications.xml b/twidere/src/main/res/xml/preferences_account_notifications.xml
index 98b457b681..4608c94b90 100644
--- a/twidere/src/main/res/xml/preferences_account_notifications.xml
+++ b/twidere/src/main/res/xml/preferences_account_notifications.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
diff --git a/twidere/src/main/res/xml/preferences_account_refresh.xml b/twidere/src/main/res/xml/preferences_account_refresh.xml
index eb9d52a8a3..77f89340ae 100644
--- a/twidere/src/main/res/xml/preferences_account_refresh.xml
+++ b/twidere/src/main/res/xml/preferences_account_refresh.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:title="@string/auto_refresh">
diff --git a/twidere/src/main/res/xml/preferences_advanced_network.xml b/twidere/src/main/res/xml/preferences_advanced_network.xml
index d478ea443c..ca5d413c73 100644
--- a/twidere/src/main/res/xml/preferences_advanced_network.xml
+++ b/twidere/src/main/res/xml/preferences_advanced_network.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:title="@string/advanced">
diff --git a/twidere/src/main/res/xml/preferences_hidden.xml b/twidere/src/main/res/xml/preferences_hidden.xml
index 3062749228..c2755ab60f 100644
--- a/twidere/src/main/res/xml/preferences_hidden.xml
+++ b/twidere/src/main/res/xml/preferences_hidden.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
diff --git a/twidere/src/main/res/xml/preferences_keyboard_shortcuts.xml b/twidere/src/main/res/xml/preferences_keyboard_shortcuts.xml
index 2a6f523734..8aa18ae88a 100644
--- a/twidere/src/main/res/xml/preferences_keyboard_shortcuts.xml
+++ b/twidere/src/main/res/xml/preferences_keyboard_shortcuts.xml
@@ -1,5 +1,8 @@
 <?xml version="1.0" encoding="utf-8"?>
-<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
+<!--suppress AndroidElementNotAllowed -->
+<PreferenceScreen
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    android:title="@string/keyboard_shortcuts">
     <PreferenceCategory
         android:key="cat_general"
         android:title="@string/general">
diff --git a/twidere/src/main/res/xml/preferences_network.xml b/twidere/src/main/res/xml/preferences_network.xml
index b909ec394b..a72a18226e 100644
--- a/twidere/src/main/res/xml/preferences_network.xml
+++ b/twidere/src/main/res/xml/preferences_network.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:title="@string/network">
diff --git a/twidere/src/main/res/xml/preferences_notifications.xml b/twidere/src/main/res/xml/preferences_notifications.xml
index 7189c10eb6..b8ec2e8b6e 100644
--- a/twidere/src/main/res/xml/preferences_notifications.xml
+++ b/twidere/src/main/res/xml/preferences_notifications.xml
@@ -1,5 +1,7 @@
 <?xml version="1.0" encoding="utf-8"?>
-<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
+<!--suppress AndroidElementNotAllowed -->
+<PreferenceScreen
+    xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
     android:title="@string/notifications">
 
@@ -7,7 +9,7 @@
         android:key="cat_accounts"
         android:title="@string/accounts"
         app:switchDefault="true"
-        app:switchKey="notification" />
+        app:switchKey="notification"/>
 
     <PreferenceCategory
         android:key="cat_general"
@@ -18,13 +20,13 @@
             android:key="combined_notifications"
             android:summaryOff="@string/combined_notifications_summary_off"
             android:summaryOn="@string/combined_notifications_summary_on"
-            android:title="@string/combined_notifications" />
+            android:title="@string/combined_notifications"/>
 
         <SwitchPreferenceCompat
             android:defaultValue="false"
             android:key="pebble_notifications"
             android:summary="@string/pebble_notifications_summary"
-            android:title="@string/pebble_notifications" />
+            android:title="@string/pebble_notifications"/>
     </PreferenceCategory>
 
 </PreferenceScreen>
\ No newline at end of file
diff --git a/twidere/src/main/res/xml/preferences_refresh.xml b/twidere/src/main/res/xml/preferences_refresh.xml
index ea88da303e..349cc73269 100644
--- a/twidere/src/main/res/xml/preferences_refresh.xml
+++ b/twidere/src/main/res/xml/preferences_refresh.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
diff --git a/twidere/src/main/res/xml/preferences_theme.xml b/twidere/src/main/res/xml/preferences_theme.xml
index 0ad09ddc06..c3e49224cb 100644
--- a/twidere/src/main/res/xml/preferences_theme.xml
+++ b/twidere/src/main/res/xml/preferences_theme.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
diff --git a/twidere/src/main/res/xml/settings_wizard_page_hints.xml b/twidere/src/main/res/xml/settings_wizard_page_hints.xml
index 17d483e770..137ffb78f9 100644
--- a/twidere/src/main/res/xml/settings_wizard_page_hints.xml
+++ b/twidere/src/main/res/xml/settings_wizard_page_hints.xml
@@ -1,31 +1,33 @@
 <?xml version="1.0" encoding="utf-8"?>
-<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
+<!--suppress AndroidElementNotAllowed -->
+<PreferenceScreen
+    xmlns:android="http://schemas.android.com/apk/res/android"
     android:title="@string/hints">
 
     <org.mariotaku.twidere.preference.ForegroundColorIconPreference
         android:icon="@drawable/ic_action_location"
         android:order="11"
         android:summary="@string/wizard_hint_summary_location_requirement"
-        android:title="@string/wizard_hint_title_location_requirement" />
+        android:title="@string/wizard_hint_title_location_requirement"/>
     <org.mariotaku.twidere.preference.ForegroundColorIconPreference
         android:icon="@drawable/ic_action_storage"
         android:order="12"
         android:summary="@string/wizard_hint_summary_storage_requirement"
-        android:title="@string/wizard_hint_title_storage_requirement" />
+        android:title="@string/wizard_hint_title_storage_requirement"/>
     <org.mariotaku.twidere.preference.ForegroundColorIconPreference
         android:icon="@drawable/ic_action_accounts"
         android:order="13"
         android:summary="@string/wizard_hint_compose_select_account"
-        android:title="@string/select_account" />
+        android:title="@string/select_account"/>
     <org.mariotaku.twidere.preference.ForegroundColorIconPreference
         android:icon="@drawable/ic_action_speaker_muted"
         android:order="14"
         android:summary="@string/wizard_hint_filters"
-        android:title="@string/filters" />
+        android:title="@string/filters"/>
     <org.mariotaku.twidere.preference.ForegroundColorIconPreference
         android:icon="@drawable/ic_action_refresh"
         android:order="15"
         android:summary="@string/wizard_hint_rate_limit"
-        android:title="@string/rate_limit" />
+        android:title="@string/rate_limit"/>
 
 </PreferenceScreen>
\ No newline at end of file
diff --git a/twidere/src/main/res/xml/settings_wizard_page_tab.xml b/twidere/src/main/res/xml/settings_wizard_page_tab.xml
index 0695b6749b..fc773c8644 100644
--- a/twidere/src/main/res/xml/settings_wizard_page_tab.xml
+++ b/twidere/src/main/res/xml/settings_wizard_page_tab.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:title="@string/tabs">
diff --git a/twidere/src/main/res/xml/settings_wizard_page_welcome.xml b/twidere/src/main/res/xml/settings_wizard_page_welcome.xml
index 3f2112661a..bf4f9214d8 100644
--- a/twidere/src/main/res/xml/settings_wizard_page_welcome.xml
+++ b/twidere/src/main/res/xml/settings_wizard_page_welcome.xml
@@ -1,4 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
+<!--suppress AndroidElementNotAllowed -->
 <PreferenceScreen
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:title="@string/wizard_page_welcome_title">
