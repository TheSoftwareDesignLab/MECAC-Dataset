diff --git a/MediaWikiKit/MediaWikiKit.xcodeproj/project.pbxproj b/MediaWikiKit/MediaWikiKit.xcodeproj/project.pbxproj
deleted file mode 100644
index a30a60e68e0..00000000000
--- a/MediaWikiKit/MediaWikiKit.xcodeproj/project.pbxproj
+++ /dev/null
@@ -1,632 +0,0 @@
-// !$*UTF8*$!
-{
-	archiveVersion = 1;
-	classes = {
-	};
-	objectVersion = 46;
-	objects = {
-
-/* Begin PBXBuildFile section */
-		D4209C9E1A3A50C9000E1A60 /* MWKSectionList.m in Sources */ = {isa = PBXBuildFile; fileRef = D4209C9D1A3A50C9000E1A60 /* MWKSectionList.m */; };
-		D4209C9F1A3A50C9000E1A60 /* MWKSectionList.m in Sources */ = {isa = PBXBuildFile; fileRef = D4209C9D1A3A50C9000E1A60 /* MWKSectionList.m */; };
-		D44EA7851A1BCC0300631A1D /* MWKUserDataStore.m in Sources */ = {isa = PBXBuildFile; fileRef = D44EA7841A1BCC0300631A1D /* MWKUserDataStore.m */; };
-		D44EA7861A1BCC0300631A1D /* MWKUserDataStore.m in Sources */ = {isa = PBXBuildFile; fileRef = D44EA7841A1BCC0300631A1D /* MWKUserDataStore.m */; };
-		D44EA7891A1BCD1400631A1D /* MWKRecentSearchEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = D44EA7881A1BCD1400631A1D /* MWKRecentSearchEntry.m */; };
-		D44EA78A1A1BCD1400631A1D /* MWKRecentSearchEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = D44EA7881A1BCD1400631A1D /* MWKRecentSearchEntry.m */; };
-		D44EA78D1A1BCD2600631A1D /* MWKRecentSearchList.m in Sources */ = {isa = PBXBuildFile; fileRef = D44EA78C1A1BCD2600631A1D /* MWKRecentSearchList.m */; };
-		D44EA78E1A1BCD2600631A1D /* MWKRecentSearchList.m in Sources */ = {isa = PBXBuildFile; fileRef = D44EA78C1A1BCD2600631A1D /* MWKRecentSearchList.m */; };
-		D44EA7901A1BDDAD00631A1D /* MWKHistoryListTests.m in Sources */ = {isa = PBXBuildFile; fileRef = D44EA78F1A1BDDAD00631A1D /* MWKHistoryListTests.m */; };
-		D4612CED1A116E97008945A5 /* MWKSavedPageEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = D4612CEC1A116E97008945A5 /* MWKSavedPageEntry.m */; };
-		D4612CEE1A116E97008945A5 /* MWKSavedPageEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = D4612CEC1A116E97008945A5 /* MWKSavedPageEntry.m */; };
-		D47F56281A1A89B4004D9856 /* MWKHistoryList.m in Sources */ = {isa = PBXBuildFile; fileRef = D47F56271A1A89B4004D9856 /* MWKHistoryList.m */; };
-		D47F56291A1A89B4004D9856 /* MWKHistoryList.m in Sources */ = {isa = PBXBuildFile; fileRef = D47F56271A1A89B4004D9856 /* MWKHistoryList.m */; };
-		D48405A619E473E6006F4139 /* MediaWikiKit.h in CopyFiles */ = {isa = PBXBuildFile; fileRef = D48405A519E473E6006F4139 /* MediaWikiKit.h */; };
-		D48405BF19E47526006F4139 /* MWKSection.m in Sources */ = {isa = PBXBuildFile; fileRef = D48405BE19E47526006F4139 /* MWKSection.m */; };
-		D48405C019E47526006F4139 /* MWKSection.m in Sources */ = {isa = PBXBuildFile; fileRef = D48405BE19E47526006F4139 /* MWKSection.m */; };
-		D48405C319E47535006F4139 /* MWKArticle.m in Sources */ = {isa = PBXBuildFile; fileRef = D48405C219E47535006F4139 /* MWKArticle.m */; };
-		D48405C419E47535006F4139 /* MWKArticle.m in Sources */ = {isa = PBXBuildFile; fileRef = D48405C219E47535006F4139 /* MWKArticle.m */; };
-		D48405C719E47542006F4139 /* MWKImage.m in Sources */ = {isa = PBXBuildFile; fileRef = D48405C619E47542006F4139 /* MWKImage.m */; };
-		D48405C819E47542006F4139 /* MWKImage.m in Sources */ = {isa = PBXBuildFile; fileRef = D48405C619E47542006F4139 /* MWKImage.m */; };
-		D48405CB19E47559006F4139 /* MWKTitle.m in Sources */ = {isa = PBXBuildFile; fileRef = D48405CA19E47559006F4139 /* MWKTitle.m */; };
-		D48405CC19E47559006F4139 /* MWKTitle.m in Sources */ = {isa = PBXBuildFile; fileRef = D48405CA19E47559006F4139 /* MWKTitle.m */; };
-		D494A6FE19F6C7C30098AA18 /* MWKProtectionStatus.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A6FD19F6C7C30098AA18 /* MWKProtectionStatus.m */; };
-		D494A6FF19F6C7C30098AA18 /* MWKProtectionStatus.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A6FD19F6C7C30098AA18 /* MWKProtectionStatus.m */; };
-		D494A70119F6CAB30098AA18 /* MWKProtectionStatusTests.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A70019F6CAB30098AA18 /* MWKProtectionStatusTests.m */; };
-		D494A70319F6CADA0098AA18 /* protection-obama.json in Resources */ = {isa = PBXBuildFile; fileRef = D494A70219F6CADA0098AA18 /* protection-obama.json */; };
-		D494A70519F6CB090098AA18 /* protection-empty.json in Resources */ = {isa = PBXBuildFile; fileRef = D494A70419F6CB090098AA18 /* protection-empty.json */; };
-		D494A70819F6CC5B0098AA18 /* MWKSiteDataObject.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A70719F6CC5B0098AA18 /* MWKSiteDataObject.m */; };
-		D494A70919F6CC5B0098AA18 /* MWKSiteDataObject.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A70719F6CC5B0098AA18 /* MWKSiteDataObject.m */; };
-		D494A70E19F6E8F20098AA18 /* MWKDataStore.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A70D19F6E8F20098AA18 /* MWKDataStore.m */; };
-		D494A70F19F6E8F20098AA18 /* MWKDataStore.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A70D19F6E8F20098AA18 /* MWKDataStore.m */; };
-		D494A71119F6ECC10098AA18 /* MWKDataStorePathTests.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A71019F6ECC10098AA18 /* MWKDataStorePathTests.m */; };
-		D494A71319F70F910098AA18 /* MWKDataStoreStorageTests.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A71219F70F910098AA18 /* MWKDataStoreStorageTests.m */; };
-		D494A71819F7103D0098AA18 /* MWKTestCase.m in Sources */ = {isa = PBXBuildFile; fileRef = D494A71719F7103D0098AA18 /* MWKTestCase.m */; };
-		D497FCE71A08013F004A36A5 /* MWKSavedPageList.m in Sources */ = {isa = PBXBuildFile; fileRef = D497FCE61A08013F004A36A5 /* MWKSavedPageList.m */; };
-		D497FCE81A08013F004A36A5 /* MWKSavedPageList.m in Sources */ = {isa = PBXBuildFile; fileRef = D497FCE61A08013F004A36A5 /* MWKSavedPageList.m */; };
-		D497FCEB1A080151004A36A5 /* MWKHistoryEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = D497FCEA1A080151004A36A5 /* MWKHistoryEntry.m */; };
-		D497FCEC1A080151004A36A5 /* MWKHistoryEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = D497FCEA1A080151004A36A5 /* MWKHistoryEntry.m */; };
-		D49ADCCA1A0028A70010F839 /* MWKImageStorageTests.m in Sources */ = {isa = PBXBuildFile; fileRef = D49ADCC91A0028A70010F839 /* MWKImageStorageTests.m */; };
-		D49ADCCC1A0031580010F839 /* golden-gate.jpg in Resources */ = {isa = PBXBuildFile; fileRef = D49ADCCB1A0031580010F839 /* golden-gate.jpg */; };
-		D49ADCCE1A00346B0010F839 /* MWKArticleStoreTestCase.m in Sources */ = {isa = PBXBuildFile; fileRef = D49ADCCD1A00346B0010F839 /* MWKArticleStoreTestCase.m */; };
-		D4B94B1C1A2FB7D2007FC79B /* organization-anon.json in Resources */ = {isa = PBXBuildFile; fileRef = D4B94B1B1A2FB7D2007FC79B /* organization-anon.json */; };
-		D4B94B1F1A2FE975007FC79B /* MWKImageList.m in Sources */ = {isa = PBXBuildFile; fileRef = D4B94B1E1A2FE975007FC79B /* MWKImageList.m */; };
-		D4B94B201A2FE975007FC79B /* MWKImageList.m in Sources */ = {isa = PBXBuildFile; fileRef = D4B94B1E1A2FE975007FC79B /* MWKImageList.m */; };
-		D4C3FA5519E4783A00EB08CC /* MWKSite.m in Sources */ = {isa = PBXBuildFile; fileRef = D4C3FA5419E4783A00EB08CC /* MWKSite.m */; };
-		D4C3FA5A19E47AA500EB08CC /* MWKSiteTests.m in Sources */ = {isa = PBXBuildFile; fileRef = D4C3FA5919E47AA500EB08CC /* MWKSiteTests.m */; };
-		D4C3FA5B19E47ABE00EB08CC /* MWKSite.m in Sources */ = {isa = PBXBuildFile; fileRef = D4C3FA5419E4783A00EB08CC /* MWKSite.m */; };
-		D4C3FA5D19E47D4700EB08CC /* MWKTitleTests.m in Sources */ = {isa = PBXBuildFile; fileRef = D4C3FA5C19E47D4700EB08CC /* MWKTitleTests.m */; };
-		D4DDF45219EDCE6800C6BC10 /* section0.json in Resources */ = {isa = PBXBuildFile; fileRef = D4DDF45019EDCE6800C6BC10 /* section0.json */; };
-		D4DDF45319EDCE6800C6BC10 /* TemplateIcon2x.png in Resources */ = {isa = PBXBuildFile; fileRef = D4DDF45119EDCE6800C6BC10 /* TemplateIcon2x.png */; };
-		D4DDF45519EDCE9000C6BC10 /* test-notes.txt in Resources */ = {isa = PBXBuildFile; fileRef = D4DDF45419EDCE9000C6BC10 /* test-notes.txt */; };
-		D4DDF45719EDCED100C6BC10 /* section1-end.json in Resources */ = {isa = PBXBuildFile; fileRef = D4DDF45619EDCED100C6BC10 /* section1-end.json */; };
-		D4DDF45A19EDD22200C6BC10 /* MWKUser.m in Sources */ = {isa = PBXBuildFile; fileRef = D4DDF45919EDD22200C6BC10 /* MWKUser.m */; };
-		D4DDF45B19EDD22200C6BC10 /* MWKUser.m in Sources */ = {isa = PBXBuildFile; fileRef = D4DDF45919EDD22200C6BC10 /* MWKUser.m */; };
-		D4DDF45E19EE1FD900C6BC10 /* MWKDataObject.m in Sources */ = {isa = PBXBuildFile; fileRef = D4DDF45D19EE1FD900C6BC10 /* MWKDataObject.m */; };
-		D4DDF45F19EE1FD900C6BC10 /* MWKDataObject.m in Sources */ = {isa = PBXBuildFile; fileRef = D4DDF45D19EE1FD900C6BC10 /* MWKDataObject.m */; };
-		D4DDF46119F055C800C6BC10 /* MWKUserTests.m in Sources */ = {isa = PBXBuildFile; fileRef = D4DDF46019F055C800C6BC10 /* MWKUserTests.m */; };
-		D4DDF46319F0560400C6BC10 /* user-loggedin.json in Resources */ = {isa = PBXBuildFile; fileRef = D4DDF46219F0560400C6BC10 /* user-loggedin.json */; };
-		D4DDF46519F0561500C6BC10 /* user-anon.json in Resources */ = {isa = PBXBuildFile; fileRef = D4DDF46419F0561500C6BC10 /* user-anon.json */; };
-		D4F9560D1A69B2AC00E9A2C4 /* MWKImageMetadata.m in Sources */ = {isa = PBXBuildFile; fileRef = D4F9560C1A69B2AC00E9A2C4 /* MWKImageMetadata.m */; };
-		D4F9560E1A69B2AC00E9A2C4 /* MWKImageMetadata.m in Sources */ = {isa = PBXBuildFile; fileRef = D4F9560C1A69B2AC00E9A2C4 /* MWKImageMetadata.m */; };
-		D4F956111A69B7BE00E9A2C4 /* MWKImageMetadataItem.m in Sources */ = {isa = PBXBuildFile; fileRef = D4F956101A69B7BE00E9A2C4 /* MWKImageMetadataItem.m */; };
-		D4F956121A69B7BE00E9A2C4 /* MWKImageMetadataItem.m in Sources */ = {isa = PBXBuildFile; fileRef = D4F956101A69B7BE00E9A2C4 /* MWKImageMetadataItem.m */; };
-/* End PBXBuildFile section */
-
-/* Begin PBXCopyFilesBuildPhase section */
-		D48405A019E473E6006F4139 /* CopyFiles */ = {
-			isa = PBXCopyFilesBuildPhase;
-			buildActionMask = 2147483647;
-			dstPath = "include/$(PRODUCT_NAME)";
-			dstSubfolderSpec = 16;
-			files = (
-				D48405A619E473E6006F4139 /* MediaWikiKit.h in CopyFiles */,
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
-/* End PBXCopyFilesBuildPhase section */
-
-/* Begin PBXFileReference section */
-		D4209C9C1A3A50C9000E1A60 /* MWKSectionList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSectionList.h; sourceTree = "<group>"; };
-		D4209C9D1A3A50C9000E1A60 /* MWKSectionList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSectionList.m; sourceTree = "<group>"; };
-		D44EA7831A1BCC0300631A1D /* MWKUserDataStore.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKUserDataStore.h; sourceTree = "<group>"; };
-		D44EA7841A1BCC0300631A1D /* MWKUserDataStore.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKUserDataStore.m; sourceTree = "<group>"; };
-		D44EA7871A1BCD1400631A1D /* MWKRecentSearchEntry.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKRecentSearchEntry.h; sourceTree = "<group>"; };
-		D44EA7881A1BCD1400631A1D /* MWKRecentSearchEntry.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKRecentSearchEntry.m; sourceTree = "<group>"; };
-		D44EA78B1A1BCD2600631A1D /* MWKRecentSearchList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKRecentSearchList.h; sourceTree = "<group>"; };
-		D44EA78C1A1BCD2600631A1D /* MWKRecentSearchList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKRecentSearchList.m; sourceTree = "<group>"; };
-		D44EA78F1A1BDDAD00631A1D /* MWKHistoryListTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKHistoryListTests.m; sourceTree = "<group>"; };
-		D4612CEB1A116E97008945A5 /* MWKSavedPageEntry.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSavedPageEntry.h; sourceTree = "<group>"; };
-		D4612CEC1A116E97008945A5 /* MWKSavedPageEntry.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSavedPageEntry.m; sourceTree = "<group>"; };
-		D47F56261A1A89B4004D9856 /* MWKHistoryList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKHistoryList.h; sourceTree = "<group>"; };
-		D47F56271A1A89B4004D9856 /* MWKHistoryList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKHistoryList.m; sourceTree = "<group>"; };
-		D48405A219E473E6006F4139 /* libMediaWikiKit.a */ = {isa = PBXFileReference; explicitFileType = archive.ar; includeInIndex = 0; path = libMediaWikiKit.a; sourceTree = BUILT_PRODUCTS_DIR; };
-		D48405A519E473E6006F4139 /* MediaWikiKit.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; path = MediaWikiKit.h; sourceTree = "<group>"; };
-		D48405AD19E473E7006F4139 /* MediaWikiKitTests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = MediaWikiKitTests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };
-		D48405B019E473E7006F4139 /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
-		D48405BD19E47526006F4139 /* MWKSection.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSection.h; sourceTree = "<group>"; };
-		D48405BE19E47526006F4139 /* MWKSection.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSection.m; sourceTree = "<group>"; };
-		D48405C119E47535006F4139 /* MWKArticle.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKArticle.h; sourceTree = "<group>"; };
-		D48405C219E47535006F4139 /* MWKArticle.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKArticle.m; sourceTree = "<group>"; };
-		D48405C519E47542006F4139 /* MWKImage.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKImage.h; sourceTree = "<group>"; };
-		D48405C619E47542006F4139 /* MWKImage.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImage.m; sourceTree = "<group>"; };
-		D48405C919E47559006F4139 /* MWKTitle.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKTitle.h; sourceTree = "<group>"; };
-		D48405CA19E47559006F4139 /* MWKTitle.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKTitle.m; sourceTree = "<group>"; };
-		D494A6FC19F6C7C30098AA18 /* MWKProtectionStatus.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKProtectionStatus.h; sourceTree = "<group>"; };
-		D494A6FD19F6C7C30098AA18 /* MWKProtectionStatus.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKProtectionStatus.m; sourceTree = "<group>"; };
-		D494A70019F6CAB30098AA18 /* MWKProtectionStatusTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKProtectionStatusTests.m; sourceTree = "<group>"; };
-		D494A70219F6CADA0098AA18 /* protection-obama.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "protection-obama.json"; sourceTree = "<group>"; };
-		D494A70419F6CB090098AA18 /* protection-empty.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "protection-empty.json"; sourceTree = "<group>"; };
-		D494A70619F6CC5B0098AA18 /* MWKSiteDataObject.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSiteDataObject.h; sourceTree = "<group>"; };
-		D494A70719F6CC5B0098AA18 /* MWKSiteDataObject.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSiteDataObject.m; sourceTree = "<group>"; };
-		D494A70C19F6E8F20098AA18 /* MWKDataStore.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKDataStore.h; sourceTree = "<group>"; };
-		D494A70D19F6E8F20098AA18 /* MWKDataStore.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKDataStore.m; sourceTree = "<group>"; };
-		D494A71019F6ECC10098AA18 /* MWKDataStorePathTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKDataStorePathTests.m; sourceTree = "<group>"; };
-		D494A71219F70F910098AA18 /* MWKDataStoreStorageTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKDataStoreStorageTests.m; sourceTree = "<group>"; };
-		D494A71619F7103D0098AA18 /* MWKTestCase.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKTestCase.h; sourceTree = "<group>"; };
-		D494A71719F7103D0098AA18 /* MWKTestCase.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKTestCase.m; sourceTree = "<group>"; };
-		D497FCE51A08013F004A36A5 /* MWKSavedPageList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSavedPageList.h; sourceTree = "<group>"; };
-		D497FCE61A08013F004A36A5 /* MWKSavedPageList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSavedPageList.m; sourceTree = "<group>"; };
-		D497FCE91A080151004A36A5 /* MWKHistoryEntry.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKHistoryEntry.h; sourceTree = "<group>"; };
-		D497FCEA1A080151004A36A5 /* MWKHistoryEntry.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKHistoryEntry.m; sourceTree = "<group>"; };
-		D49ADCC91A0028A70010F839 /* MWKImageStorageTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageStorageTests.m; sourceTree = "<group>"; };
-		D49ADCCB1A0031580010F839 /* golden-gate.jpg */ = {isa = PBXFileReference; lastKnownFileType = image.jpeg; path = "golden-gate.jpg"; sourceTree = "<group>"; };
-		D49ADCCD1A00346B0010F839 /* MWKArticleStoreTestCase.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKArticleStoreTestCase.m; sourceTree = "<group>"; };
-		D49ADCCF1A0041570010F839 /* MWKArticleStoreTestCase.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; path = MWKArticleStoreTestCase.h; sourceTree = "<group>"; };
-		D4B94B1B1A2FB7D2007FC79B /* organization-anon.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "organization-anon.json"; sourceTree = "<group>"; };
-		D4B94B1D1A2FE975007FC79B /* MWKImageList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKImageList.h; sourceTree = "<group>"; };
-		D4B94B1E1A2FE975007FC79B /* MWKImageList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageList.m; sourceTree = "<group>"; };
-		D4C3FA5319E4783A00EB08CC /* MWKSite.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSite.h; sourceTree = "<group>"; };
-		D4C3FA5419E4783A00EB08CC /* MWKSite.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSite.m; sourceTree = "<group>"; };
-		D4C3FA5919E47AA500EB08CC /* MWKSiteTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSiteTests.m; sourceTree = "<group>"; };
-		D4C3FA5C19E47D4700EB08CC /* MWKTitleTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKTitleTests.m; sourceTree = "<group>"; };
-		D4DDF45019EDCE6800C6BC10 /* section0.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = section0.json; sourceTree = "<group>"; };
-		D4DDF45119EDCE6800C6BC10 /* TemplateIcon2x.png */ = {isa = PBXFileReference; lastKnownFileType = image.png; path = TemplateIcon2x.png; sourceTree = "<group>"; };
-		D4DDF45419EDCE9000C6BC10 /* test-notes.txt */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text; path = "test-notes.txt"; sourceTree = "<group>"; };
-		D4DDF45619EDCED100C6BC10 /* section1-end.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "section1-end.json"; sourceTree = "<group>"; };
-		D4DDF45819EDD22200C6BC10 /* MWKUser.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKUser.h; sourceTree = "<group>"; };
-		D4DDF45919EDD22200C6BC10 /* MWKUser.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKUser.m; sourceTree = "<group>"; };
-		D4DDF45C19EE1FD900C6BC10 /* MWKDataObject.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKDataObject.h; sourceTree = "<group>"; };
-		D4DDF45D19EE1FD900C6BC10 /* MWKDataObject.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKDataObject.m; sourceTree = "<group>"; };
-		D4DDF46019F055C800C6BC10 /* MWKUserTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKUserTests.m; sourceTree = "<group>"; };
-		D4DDF46219F0560400C6BC10 /* user-loggedin.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "user-loggedin.json"; sourceTree = "<group>"; };
-		D4DDF46419F0561500C6BC10 /* user-anon.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "user-anon.json"; sourceTree = "<group>"; };
-		D4F9560B1A69B2AC00E9A2C4 /* MWKImageMetadata.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKImageMetadata.h; sourceTree = "<group>"; };
-		D4F9560C1A69B2AC00E9A2C4 /* MWKImageMetadata.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageMetadata.m; sourceTree = "<group>"; };
-		D4F9560F1A69B7BE00E9A2C4 /* MWKImageMetadataItem.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKImageMetadataItem.h; sourceTree = "<group>"; };
-		D4F956101A69B7BE00E9A2C4 /* MWKImageMetadataItem.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageMetadataItem.m; sourceTree = "<group>"; };
-/* End PBXFileReference section */
-
-/* Begin PBXFrameworksBuildPhase section */
-		D484059F19E473E6006F4139 /* Frameworks */ = {
-			isa = PBXFrameworksBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
-		D48405AA19E473E7006F4139 /* Frameworks */ = {
-			isa = PBXFrameworksBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
-/* End PBXFrameworksBuildPhase section */
-
-/* Begin PBXGroup section */
-		D484059919E473E6006F4139 = {
-			isa = PBXGroup;
-			children = (
-				D48405A419E473E6006F4139 /* MediaWikiKit */,
-				D48405AE19E473E7006F4139 /* MediaWikiKitTests */,
-				D48405A319E473E6006F4139 /* Products */,
-			);
-			sourceTree = "<group>";
-		};
-		D48405A319E473E6006F4139 /* Products */ = {
-			isa = PBXGroup;
-			children = (
-				D48405A219E473E6006F4139 /* libMediaWikiKit.a */,
-				D48405AD19E473E7006F4139 /* MediaWikiKitTests.xctest */,
-			);
-			name = Products;
-			sourceTree = "<group>";
-		};
-		D48405A419E473E6006F4139 /* MediaWikiKit */ = {
-			isa = PBXGroup;
-			children = (
-				D48405A519E473E6006F4139 /* MediaWikiKit.h */,
-				D4C3FA5719E478C200EB08CC /* Metadata classes */,
-				D4C3FA5619E478AA00EB08CC /* Data classes */,
-				D4C3FA5819E478CC00EB08CC /* Data i/o */,
-			);
-			path = MediaWikiKit;
-			sourceTree = "<group>";
-		};
-		D48405AE19E473E7006F4139 /* MediaWikiKitTests */ = {
-			isa = PBXGroup;
-			children = (
-				D48405AF19E473E7006F4139 /* Supporting Files */,
-				D494A71619F7103D0098AA18 /* MWKTestCase.h */,
-				D494A71719F7103D0098AA18 /* MWKTestCase.m */,
-				D49ADCCF1A0041570010F839 /* MWKArticleStoreTestCase.h */,
-				D49ADCCD1A00346B0010F839 /* MWKArticleStoreTestCase.m */,
-				D4DDF45119EDCE6800C6BC10 /* TemplateIcon2x.png */,
-				D494A71919F7113A0098AA18 /* Test data */,
-				D4C3FA5919E47AA500EB08CC /* MWKSiteTests.m */,
-				D4C3FA5C19E47D4700EB08CC /* MWKTitleTests.m */,
-				D4DDF46019F055C800C6BC10 /* MWKUserTests.m */,
-				D494A70019F6CAB30098AA18 /* MWKProtectionStatusTests.m */,
-				D494A71019F6ECC10098AA18 /* MWKDataStorePathTests.m */,
-				D494A71219F70F910098AA18 /* MWKDataStoreStorageTests.m */,
-				D49ADCC91A0028A70010F839 /* MWKImageStorageTests.m */,
-				D44EA78F1A1BDDAD00631A1D /* MWKHistoryListTests.m */,
-			);
-			path = MediaWikiKitTests;
-			sourceTree = "<group>";
-		};
-		D48405AF19E473E7006F4139 /* Supporting Files */ = {
-			isa = PBXGroup;
-			children = (
-				D48405B019E473E7006F4139 /* Info.plist */,
-			);
-			name = "Supporting Files";
-			sourceTree = "<group>";
-		};
-		D494A71919F7113A0098AA18 /* Test data */ = {
-			isa = PBXGroup;
-			children = (
-				D4B94B1B1A2FB7D2007FC79B /* organization-anon.json */,
-				D49ADCCB1A0031580010F839 /* golden-gate.jpg */,
-				D4DDF45419EDCE9000C6BC10 /* test-notes.txt */,
-				D4DDF46219F0560400C6BC10 /* user-loggedin.json */,
-				D4DDF46419F0561500C6BC10 /* user-anon.json */,
-				D494A70219F6CADA0098AA18 /* protection-obama.json */,
-				D494A70419F6CB090098AA18 /* protection-empty.json */,
-				D4DDF45019EDCE6800C6BC10 /* section0.json */,
-				D4DDF45619EDCED100C6BC10 /* section1-end.json */,
-			);
-			name = "Test data";
-			sourceTree = "<group>";
-		};
-		D4C3FA5619E478AA00EB08CC /* Data classes */ = {
-			isa = PBXGroup;
-			children = (
-				D4DDF45C19EE1FD900C6BC10 /* MWKDataObject.h */,
-				D4DDF45D19EE1FD900C6BC10 /* MWKDataObject.m */,
-				D494A70619F6CC5B0098AA18 /* MWKSiteDataObject.h */,
-				D494A70719F6CC5B0098AA18 /* MWKSiteDataObject.m */,
-				D4DDF45819EDD22200C6BC10 /* MWKUser.h */,
-				D4DDF45919EDD22200C6BC10 /* MWKUser.m */,
-				D48405BD19E47526006F4139 /* MWKSection.h */,
-				D48405BE19E47526006F4139 /* MWKSection.m */,
-				D48405C519E47542006F4139 /* MWKImage.h */,
-				D48405C619E47542006F4139 /* MWKImage.m */,
-				D494A6FC19F6C7C30098AA18 /* MWKProtectionStatus.h */,
-				D494A6FD19F6C7C30098AA18 /* MWKProtectionStatus.m */,
-				D4612CEB1A116E97008945A5 /* MWKSavedPageEntry.h */,
-				D4612CEC1A116E97008945A5 /* MWKSavedPageEntry.m */,
-				D497FCE51A08013F004A36A5 /* MWKSavedPageList.h */,
-				D497FCE61A08013F004A36A5 /* MWKSavedPageList.m */,
-				D497FCE91A080151004A36A5 /* MWKHistoryEntry.h */,
-				D497FCEA1A080151004A36A5 /* MWKHistoryEntry.m */,
-				D47F56261A1A89B4004D9856 /* MWKHistoryList.h */,
-				D47F56271A1A89B4004D9856 /* MWKHistoryList.m */,
-				D44EA7871A1BCD1400631A1D /* MWKRecentSearchEntry.h */,
-				D44EA7881A1BCD1400631A1D /* MWKRecentSearchEntry.m */,
-				D44EA78B1A1BCD2600631A1D /* MWKRecentSearchList.h */,
-				D44EA78C1A1BCD2600631A1D /* MWKRecentSearchList.m */,
-				D4F9560F1A69B7BE00E9A2C4 /* MWKImageMetadataItem.h */,
-				D4F956101A69B7BE00E9A2C4 /* MWKImageMetadataItem.m */,
-			);
-			name = "Data classes";
-			sourceTree = "<group>";
-		};
-		D4C3FA5719E478C200EB08CC /* Metadata classes */ = {
-			isa = PBXGroup;
-			children = (
-				D4C3FA5319E4783A00EB08CC /* MWKSite.h */,
-				D4C3FA5419E4783A00EB08CC /* MWKSite.m */,
-				D48405C919E47559006F4139 /* MWKTitle.h */,
-				D48405CA19E47559006F4139 /* MWKTitle.m */,
-			);
-			name = "Metadata classes";
-			sourceTree = "<group>";
-		};
-		D4C3FA5819E478CC00EB08CC /* Data i/o */ = {
-			isa = PBXGroup;
-			children = (
-				D494A70C19F6E8F20098AA18 /* MWKDataStore.h */,
-				D494A70D19F6E8F20098AA18 /* MWKDataStore.m */,
-				D48405C119E47535006F4139 /* MWKArticle.h */,
-				D48405C219E47535006F4139 /* MWKArticle.m */,
-				D44EA7831A1BCC0300631A1D /* MWKUserDataStore.h */,
-				D44EA7841A1BCC0300631A1D /* MWKUserDataStore.m */,
-				D4B94B1D1A2FE975007FC79B /* MWKImageList.h */,
-				D4B94B1E1A2FE975007FC79B /* MWKImageList.m */,
-				D4209C9C1A3A50C9000E1A60 /* MWKSectionList.h */,
-				D4209C9D1A3A50C9000E1A60 /* MWKSectionList.m */,
-				D4F9560B1A69B2AC00E9A2C4 /* MWKImageMetadata.h */,
-				D4F9560C1A69B2AC00E9A2C4 /* MWKImageMetadata.m */,
-			);
-			name = "Data i/o";
-			sourceTree = "<group>";
-		};
-/* End PBXGroup section */
-
-/* Begin PBXNativeTarget section */
-		D48405A119E473E6006F4139 /* MediaWikiKit */ = {
-			isa = PBXNativeTarget;
-			buildConfigurationList = D48405B319E473E7006F4139 /* Build configuration list for PBXNativeTarget "MediaWikiKit" */;
-			buildPhases = (
-				D484059E19E473E6006F4139 /* Sources */,
-				D484059F19E473E6006F4139 /* Frameworks */,
-				D48405A019E473E6006F4139 /* CopyFiles */,
-			);
-			buildRules = (
-			);
-			dependencies = (
-			);
-			name = MediaWikiKit;
-			productName = MediaWikiKit;
-			productReference = D48405A219E473E6006F4139 /* libMediaWikiKit.a */;
-			productType = "com.apple.product-type.library.static";
-		};
-		D48405AC19E473E7006F4139 /* MediaWikiKitTests */ = {
-			isa = PBXNativeTarget;
-			buildConfigurationList = D48405B619E473E7006F4139 /* Build configuration list for PBXNativeTarget "MediaWikiKitTests" */;
-			buildPhases = (
-				D48405A919E473E7006F4139 /* Sources */,
-				D48405AA19E473E7006F4139 /* Frameworks */,
-				D48405AB19E473E7006F4139 /* Resources */,
-			);
-			buildRules = (
-			);
-			dependencies = (
-			);
-			name = MediaWikiKitTests;
-			productName = MediaWikiKitTests;
-			productReference = D48405AD19E473E7006F4139 /* MediaWikiKitTests.xctest */;
-			productType = "com.apple.product-type.bundle.unit-test";
-		};
-/* End PBXNativeTarget section */
-
-/* Begin PBXProject section */
-		D484059A19E473E6006F4139 /* Project object */ = {
-			isa = PBXProject;
-			attributes = {
-				LastUpgradeCheck = 0600;
-				ORGANIZATIONNAME = "Wikimedia Foundation";
-				TargetAttributes = {
-					D48405A119E473E6006F4139 = {
-						CreatedOnToolsVersion = 6.0.1;
-					};
-					D48405AC19E473E7006F4139 = {
-						CreatedOnToolsVersion = 6.0.1;
-					};
-				};
-			};
-			buildConfigurationList = D484059D19E473E6006F4139 /* Build configuration list for PBXProject "MediaWikiKit" */;
-			compatibilityVersion = "Xcode 3.2";
-			developmentRegion = English;
-			hasScannedForEncodings = 0;
-			knownRegions = (
-				en,
-			);
-			mainGroup = D484059919E473E6006F4139;
-			productRefGroup = D48405A319E473E6006F4139 /* Products */;
-			projectDirPath = "";
-			projectRoot = "";
-			targets = (
-				D48405A119E473E6006F4139 /* MediaWikiKit */,
-				D48405AC19E473E7006F4139 /* MediaWikiKitTests */,
-			);
-		};
-/* End PBXProject section */
-
-/* Begin PBXResourcesBuildPhase section */
-		D48405AB19E473E7006F4139 /* Resources */ = {
-			isa = PBXResourcesBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-				D494A70519F6CB090098AA18 /* protection-empty.json in Resources */,
-				D4DDF45319EDCE6800C6BC10 /* TemplateIcon2x.png in Resources */,
-				D4B94B1C1A2FB7D2007FC79B /* organization-anon.json in Resources */,
-				D4DDF45519EDCE9000C6BC10 /* test-notes.txt in Resources */,
-				D4DDF46519F0561500C6BC10 /* user-anon.json in Resources */,
-				D4DDF45219EDCE6800C6BC10 /* section0.json in Resources */,
-				D4DDF45719EDCED100C6BC10 /* section1-end.json in Resources */,
-				D49ADCCC1A0031580010F839 /* golden-gate.jpg in Resources */,
-				D4DDF46319F0560400C6BC10 /* user-loggedin.json in Resources */,
-				D494A70319F6CADA0098AA18 /* protection-obama.json in Resources */,
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
-/* End PBXResourcesBuildPhase section */
-
-/* Begin PBXSourcesBuildPhase section */
-		D484059E19E473E6006F4139 /* Sources */ = {
-			isa = PBXSourcesBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-				D4C3FA5519E4783A00EB08CC /* MWKSite.m in Sources */,
-				D48405BF19E47526006F4139 /* MWKSection.m in Sources */,
-				D494A70819F6CC5B0098AA18 /* MWKSiteDataObject.m in Sources */,
-				D48405CB19E47559006F4139 /* MWKTitle.m in Sources */,
-				D497FCEB1A080151004A36A5 /* MWKHistoryEntry.m in Sources */,
-				D4DDF45E19EE1FD900C6BC10 /* MWKDataObject.m in Sources */,
-				D44EA78D1A1BCD2600631A1D /* MWKRecentSearchList.m in Sources */,
-				D44EA7851A1BCC0300631A1D /* MWKUserDataStore.m in Sources */,
-				D48405C319E47535006F4139 /* MWKArticle.m in Sources */,
-				D494A6FE19F6C7C30098AA18 /* MWKProtectionStatus.m in Sources */,
-				D494A70E19F6E8F20098AA18 /* MWKDataStore.m in Sources */,
-				D47F56281A1A89B4004D9856 /* MWKHistoryList.m in Sources */,
-				D4612CED1A116E97008945A5 /* MWKSavedPageEntry.m in Sources */,
-				D4B94B1F1A2FE975007FC79B /* MWKImageList.m in Sources */,
-				D4F9560D1A69B2AC00E9A2C4 /* MWKImageMetadata.m in Sources */,
-				D4209C9E1A3A50C9000E1A60 /* MWKSectionList.m in Sources */,
-				D4F956111A69B7BE00E9A2C4 /* MWKImageMetadataItem.m in Sources */,
-				D497FCE71A08013F004A36A5 /* MWKSavedPageList.m in Sources */,
-				D4DDF45A19EDD22200C6BC10 /* MWKUser.m in Sources */,
-				D48405C719E47542006F4139 /* MWKImage.m in Sources */,
-				D44EA7891A1BCD1400631A1D /* MWKRecentSearchEntry.m in Sources */,
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
-		D48405A919E473E7006F4139 /* Sources */ = {
-			isa = PBXSourcesBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-				D4C3FA5B19E47ABE00EB08CC /* MWKSite.m in Sources */,
-				D48405C419E47535006F4139 /* MWKArticle.m in Sources */,
-				D44EA7901A1BDDAD00631A1D /* MWKHistoryListTests.m in Sources */,
-				D494A70919F6CC5B0098AA18 /* MWKSiteDataObject.m in Sources */,
-				D494A6FF19F6C7C30098AA18 /* MWKProtectionStatus.m in Sources */,
-				D47F56291A1A89B4004D9856 /* MWKHistoryList.m in Sources */,
-				D44EA78E1A1BCD2600631A1D /* MWKRecentSearchList.m in Sources */,
-				D4F956121A69B7BE00E9A2C4 /* MWKImageMetadataItem.m in Sources */,
-				D48405C019E47526006F4139 /* MWKSection.m in Sources */,
-				D48405C819E47542006F4139 /* MWKImage.m in Sources */,
-				D49ADCCA1A0028A70010F839 /* MWKImageStorageTests.m in Sources */,
-				D4DDF46119F055C800C6BC10 /* MWKUserTests.m in Sources */,
-				D4C3FA5D19E47D4700EB08CC /* MWKTitleTests.m in Sources */,
-				D4F9560E1A69B2AC00E9A2C4 /* MWKImageMetadata.m in Sources */,
-				D497FCE81A08013F004A36A5 /* MWKSavedPageList.m in Sources */,
-				D494A71119F6ECC10098AA18 /* MWKDataStorePathTests.m in Sources */,
-				D4B94B201A2FE975007FC79B /* MWKImageList.m in Sources */,
-				D494A71819F7103D0098AA18 /* MWKTestCase.m in Sources */,
-				D494A71319F70F910098AA18 /* MWKDataStoreStorageTests.m in Sources */,
-				D49ADCCE1A00346B0010F839 /* MWKArticleStoreTestCase.m in Sources */,
-				D494A70119F6CAB30098AA18 /* MWKProtectionStatusTests.m in Sources */,
-				D44EA7861A1BCC0300631A1D /* MWKUserDataStore.m in Sources */,
-				D48405CC19E47559006F4139 /* MWKTitle.m in Sources */,
-				D4C3FA5A19E47AA500EB08CC /* MWKSiteTests.m in Sources */,
-				D497FCEC1A080151004A36A5 /* MWKHistoryEntry.m in Sources */,
-				D4DDF45F19EE1FD900C6BC10 /* MWKDataObject.m in Sources */,
-				D4DDF45B19EDD22200C6BC10 /* MWKUser.m in Sources */,
-				D494A70F19F6E8F20098AA18 /* MWKDataStore.m in Sources */,
-				D4612CEE1A116E97008945A5 /* MWKSavedPageEntry.m in Sources */,
-				D4209C9F1A3A50C9000E1A60 /* MWKSectionList.m in Sources */,
-				D44EA78A1A1BCD1400631A1D /* MWKRecentSearchEntry.m in Sources */,
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-		};
-/* End PBXSourcesBuildPhase section */
-
-/* Begin XCBuildConfiguration section */
-		D48405B119E473E7006F4139 /* Debug */ = {
-			isa = XCBuildConfiguration;
-			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				CLANG_CXX_LANGUAGE_STANDARD = "gnu++0x";
-				CLANG_CXX_LIBRARY = "libc++";
-				CLANG_ENABLE_MODULES = YES;
-				CLANG_ENABLE_OBJC_ARC = YES;
-				CLANG_WARN_BOOL_CONVERSION = YES;
-				CLANG_WARN_CONSTANT_CONVERSION = YES;
-				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
-				CLANG_WARN_EMPTY_BODY = YES;
-				CLANG_WARN_ENUM_CONVERSION = YES;
-				CLANG_WARN_INT_CONVERSION = YES;
-				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
-				CLANG_WARN_UNREACHABLE_CODE = YES;
-				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
-				COPY_PHASE_STRIP = NO;
-				ENABLE_STRICT_OBJC_MSGSEND = YES;
-				GCC_C_LANGUAGE_STANDARD = gnu99;
-				GCC_DYNAMIC_NO_PIC = NO;
-				GCC_OPTIMIZATION_LEVEL = 0;
-				GCC_PREPROCESSOR_DEFINITIONS = (
-					"DEBUG=1",
-					"$(inherited)",
-				);
-				GCC_SYMBOLS_PRIVATE_EXTERN = NO;
-				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
-				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
-				GCC_WARN_UNDECLARED_SELECTOR = YES;
-				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
-				GCC_WARN_UNUSED_FUNCTION = YES;
-				GCC_WARN_UNUSED_VARIABLE = YES;
-				IPHONEOS_DEPLOYMENT_TARGET = 8.0;
-				MTL_ENABLE_DEBUG_INFO = YES;
-				ONLY_ACTIVE_ARCH = YES;
-				SDKROOT = iphoneos;
-			};
-			name = Debug;
-		};
-		D48405B219E473E7006F4139 /* Release */ = {
-			isa = XCBuildConfiguration;
-			buildSettings = {
-				ALWAYS_SEARCH_USER_PATHS = NO;
-				CLANG_CXX_LANGUAGE_STANDARD = "gnu++0x";
-				CLANG_CXX_LIBRARY = "libc++";
-				CLANG_ENABLE_MODULES = YES;
-				CLANG_ENABLE_OBJC_ARC = YES;
-				CLANG_WARN_BOOL_CONVERSION = YES;
-				CLANG_WARN_CONSTANT_CONVERSION = YES;
-				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
-				CLANG_WARN_EMPTY_BODY = YES;
-				CLANG_WARN_ENUM_CONVERSION = YES;
-				CLANG_WARN_INT_CONVERSION = YES;
-				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
-				CLANG_WARN_UNREACHABLE_CODE = YES;
-				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
-				COPY_PHASE_STRIP = YES;
-				ENABLE_NS_ASSERTIONS = NO;
-				ENABLE_STRICT_OBJC_MSGSEND = YES;
-				GCC_C_LANGUAGE_STANDARD = gnu99;
-				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
-				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
-				GCC_WARN_UNDECLARED_SELECTOR = YES;
-				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
-				GCC_WARN_UNUSED_FUNCTION = YES;
-				GCC_WARN_UNUSED_VARIABLE = YES;
-				IPHONEOS_DEPLOYMENT_TARGET = 8.0;
-				MTL_ENABLE_DEBUG_INFO = NO;
-				SDKROOT = iphoneos;
-				VALIDATE_PRODUCT = YES;
-			};
-			name = Release;
-		};
-		D48405B419E473E7006F4139 /* Debug */ = {
-			isa = XCBuildConfiguration;
-			buildSettings = {
-				OTHER_LDFLAGS = "-ObjC";
-				PRODUCT_NAME = "$(TARGET_NAME)";
-				SKIP_INSTALL = YES;
-			};
-			name = Debug;
-		};
-		D48405B519E473E7006F4139 /* Release */ = {
-			isa = XCBuildConfiguration;
-			buildSettings = {
-				OTHER_LDFLAGS = "-ObjC";
-				PRODUCT_NAME = "$(TARGET_NAME)";
-				SKIP_INSTALL = YES;
-			};
-			name = Release;
-		};
-		D48405B719E473E7006F4139 /* Debug */ = {
-			isa = XCBuildConfiguration;
-			buildSettings = {
-				FRAMEWORK_SEARCH_PATHS = (
-					"$(SDKROOT)/Developer/Library/Frameworks",
-					"$(inherited)",
-				);
-				GCC_PREPROCESSOR_DEFINITIONS = (
-					"DEBUG=1",
-					"$(inherited)",
-				);
-				INFOPLIST_FILE = MediaWikiKitTests/Info.plist;
-				LD_RUNPATH_SEARCH_PATHS = "$(inherited) @executable_path/Frameworks @loader_path/Frameworks";
-				PRODUCT_NAME = "$(TARGET_NAME)";
-			};
-			name = Debug;
-		};
-		D48405B819E473E7006F4139 /* Release */ = {
-			isa = XCBuildConfiguration;
-			buildSettings = {
-				FRAMEWORK_SEARCH_PATHS = (
-					"$(SDKROOT)/Developer/Library/Frameworks",
-					"$(inherited)",
-				);
-				INFOPLIST_FILE = MediaWikiKitTests/Info.plist;
-				LD_RUNPATH_SEARCH_PATHS = "$(inherited) @executable_path/Frameworks @loader_path/Frameworks";
-				PRODUCT_NAME = "$(TARGET_NAME)";
-			};
-			name = Release;
-		};
-/* End XCBuildConfiguration section */
-
-/* Begin XCConfigurationList section */
-		D484059D19E473E6006F4139 /* Build configuration list for PBXProject "MediaWikiKit" */ = {
-			isa = XCConfigurationList;
-			buildConfigurations = (
-				D48405B119E473E7006F4139 /* Debug */,
-				D48405B219E473E7006F4139 /* Release */,
-			);
-			defaultConfigurationIsVisible = 0;
-			defaultConfigurationName = Release;
-		};
-		D48405B319E473E7006F4139 /* Build configuration list for PBXNativeTarget "MediaWikiKit" */ = {
-			isa = XCConfigurationList;
-			buildConfigurations = (
-				D48405B419E473E7006F4139 /* Debug */,
-				D48405B519E473E7006F4139 /* Release */,
-			);
-			defaultConfigurationIsVisible = 0;
-			defaultConfigurationName = Release;
-		};
-		D48405B619E473E7006F4139 /* Build configuration list for PBXNativeTarget "MediaWikiKitTests" */ = {
-			isa = XCConfigurationList;
-			buildConfigurations = (
-				D48405B719E473E7006F4139 /* Debug */,
-				D48405B819E473E7006F4139 /* Release */,
-			);
-			defaultConfigurationIsVisible = 0;
-			defaultConfigurationName = Release;
-		};
-/* End XCConfigurationList section */
-	};
-	rootObject = D484059A19E473E6006F4139 /* Project object */;
-}
diff --git a/MediaWikiKit/MediaWikiKit/MWKDataStore.h b/MediaWikiKit/MediaWikiKit/MWKDataStore.h
index a948348d9b6..19b8e380e54 100644
--- a/MediaWikiKit/MediaWikiKit/MWKDataStore.h
+++ b/MediaWikiKit/MediaWikiKit/MWKDataStore.h
@@ -15,59 +15,80 @@
 @class MWKImage;
 @class MWKHistoryList;
 @class MWKSavedPageList;
+@class MWKRecentSearchList;
 @class MWKUserDataStore;
-@class MWKImageMetadata;
+@class MWKImageInfo;
+
+FOUNDATION_EXPORT NSString* const MWKDataStoreValidImageSitePrefix;
 
 @interface MWKDataStore : NSObject
 
 @property (readonly) NSString *basePath;
 
--(instancetype)initWithBasePath:(NSString *)basePath;
+- (instancetype)initWithBasePath:(NSString *)basePath;
 
 // Path methods
--(NSString *)pathForPath:(NSString *)path;
--(NSString *)pathForSites;
--(NSString *)pathForSite:(MWKSite *)site;
--(NSString *)pathForArticlesWithSite:(MWKSite *)site;
--(NSString *)pathForTitle:(MWKTitle *)title;
--(NSString *)pathForArticle:(MWKArticle *)article;
--(NSString *)pathForSectionsWithTitle:(MWKTitle *)title;
--(NSString *)pathForSectionId:(NSUInteger)sectionId title:(MWKTitle *)title;
--(NSString *)pathForSection:(MWKSection *)section;
--(NSString *)pathForImagesWithTitle:(MWKTitle *)title;
--(NSString *)pathForImageURL:(NSString *)url title:(MWKTitle *)title;
--(NSString *)pathForImage:(MWKImage *)image;
--(NSString *)pathForImageMetadata:(MWKImageMetadata *)imageMetadata;
+- (NSString *)joinWithBasePath:(NSString *)path;
+- (NSString *)pathForSites;
+- (NSString *)pathForSite:(MWKSite *)site;
+- (NSString *)pathForArticlesWithSite:(MWKSite *)site;
+- (NSString *)pathForTitle:(MWKTitle *)title;
+
+/**
+ * Path to the directory which contains data for the specified article.
+ * @see -pathForTitle:
+ */
+- (NSString *)pathForArticle:(MWKArticle *)article;
+- (NSString *)pathForSectionsWithTitle:(MWKTitle *)title;
+- (NSString *)pathForSectionId:(NSUInteger)sectionId title:(MWKTitle *)title;
+- (NSString *)pathForSection:(MWKSection *)section;
+- (NSString *)pathForImagesWithTitle:(MWKTitle *)title;
+- (NSString *)pathForImageURL:(NSString *)url title:(MWKTitle *)title;
+- (NSString *)pathForImage:(MWKImage *)image;
+
+/**
+ * The path where the image info is stored for a given article.
+ * @param article The @c MWKArticle which contains the desired image info.
+ * @return The path to the <b>.plist</b> file where image info for an article would be stored.
+ */
+- (NSString *)pathForArticleImageInfo:(MWKArticle*)article;
 
 // Raw save methods
--(void)saveArticle:(MWKArticle *)article;
--(void)saveSection:(MWKSection *)section;
--(void)saveSectionText:(NSString *)html section:(MWKSection *)section;
--(void)saveImage:(MWKImage *)image;
--(void)saveImageData:(NSData *)data image:(MWKImage *)image;
--(void)saveHistoryList:(MWKHistoryList *)list;
--(void)saveSavedPageList:(MWKSavedPageList *)list;
--(void)saveRecentSearchList:(MWKRecentSearchList *)list;
--(void)saveImageList:(MWKImageList *)imageList;
--(void)saveImageMetadata:(MWKImageMetadata *)imageMetadata;
+- (void)saveArticle:(MWKArticle *)article;
+- (void)saveSection:(MWKSection *)section;
+- (void)saveSectionText:(NSString *)html section:(MWKSection *)section;
+- (void)saveImage:(MWKImage *)image;
+- (void)saveImageData:(NSData *)data image:(MWKImage *)image;
+- (void)saveHistoryList:(MWKHistoryList *)list;
+- (void)saveSavedPageList:(MWKSavedPageList *)list;
+- (void)saveRecentSearchList:(MWKRecentSearchList *)list;
+- (void)saveImageList:(MWKImageList *)imageList;
 
+/**
+ * Save an array of image info objects which belong to the specified article.
+ * @param imageInfo An array of @c MWKImageInfo objects belonging to the specified article.
+ * @param article   The article which contains the specified images.
+ * @discussion Image info objects are stored under an article so they can be easily referenced and removed alongside
+ *             the article.
+ */
+- (void)saveImageInfo:(NSArray*)imageInfo forArticle:(MWKArticle*)article;
 
 // Raw load methods
--(MWKArticle *)articleWithTitle:(MWKTitle *)title;
--(MWKSection *)sectionWithId:(NSUInteger)sectionId article:(MWKArticle *)article;
--(NSString *)sectionTextWithId:(NSUInteger)sectionId article:(MWKArticle *)article;
--(MWKImage *)imageWithURL:(NSString *)url article:(MWKArticle *)article;
--(NSData *)imageDataWithImage:(MWKImage *)image;
--(MWKHistoryList *)historyList;
--(MWKSavedPageList *)savedPageList;
--(MWKRecentSearchList *)recentSearchList;
--(MWKImageMetadata *)imageMetadataWithName:(NSString *)name article:(MWKArticle *)article;
+- (MWKArticle *)articleWithTitle:(MWKTitle *)title;
+- (MWKSection *)sectionWithId:(NSUInteger)sectionId article:(MWKArticle *)article;
+- (NSString *)sectionTextWithId:(NSUInteger)sectionId article:(MWKArticle *)article;
+- (MWKImage *)imageWithURL:(NSString *)url article:(MWKArticle *)article;
+- (NSData *)imageDataWithImage:(MWKImage *)image;
+- (MWKHistoryList *)historyList;
+- (MWKSavedPageList *)savedPageList;
+- (MWKRecentSearchList *)recentSearchList;
+- (NSArray*)imageInfoForArticle:(MWKArticle*)article;
 
 // Storage helper methods
--(MWKUserDataStore *)userDataStore;
+- (MWKUserDataStore *)userDataStore;
 
--(MWKImageList *)imageListWithArticle:(MWKArticle *)article section:(MWKSection *)section;
+- (MWKImageList *)imageListWithArticle:(MWKArticle *)article section:(MWKSection *)section;
 
--(void)iterateOverArticles:(void(^)(MWKArticle *))block;
+- (void)iterateOverArticles:(void(^)(MWKArticle *))block;
 
 @end
diff --git a/MediaWikiKit/MediaWikiKit/MWKDataStore.m b/MediaWikiKit/MediaWikiKit/MWKDataStore.m
index c12680e08e1..b819c5da01e 100644
--- a/MediaWikiKit/MediaWikiKit/MWKDataStore.m
+++ b/MediaWikiKit/MediaWikiKit/MWKDataStore.m
@@ -8,9 +8,14 @@
 
 #import "MediaWikiKit.h"
 
+#import <BlocksKit/BlocksKit.h>
+
+NSString* const MWKDataStoreValidImageSitePrefix = @"//upload.wikimedia.org/";
+static NSString* const MWKImageInfoFilename = @"ImageInfo.plist";
+
 @implementation MWKDataStore
 
--(instancetype)initWithBasePath:(NSString *)basePath
+- (instancetype)initWithBasePath:(NSString *)basePath
 {
     self = [self init];
     if (self) {
@@ -21,87 +26,84 @@ -(instancetype)initWithBasePath:(NSString *)basePath
 
 #pragma mark - path methods
 
--(NSString *)pathForPath:(NSString *)path
+- (NSString *)joinWithBasePath:(NSString *)path
 {
     return [self.basePath stringByAppendingPathComponent:path];
 }
 
--(NSString *)pathForSites
+- (NSString *)pathForSites
 {
-    return [self pathForPath:@"sites"];
+    return [self joinWithBasePath:@"sites"];
 }
 
--(NSString *)pathForSite:(MWKSite *)site
+- (NSString *)pathForSite:(MWKSite *)site
 {
     NSString *sitesPath = [self pathForSites];
     NSString *domainPath = [sitesPath stringByAppendingPathComponent:site.domain];
     return [domainPath stringByAppendingPathComponent:site.language];
 }
 
--(NSString *)pathForArticlesWithSite:(MWKSite *)site
+- (NSString *)pathForArticlesWithSite:(MWKSite *)site
 {
     NSString *sitePath = [self pathForSite:site];
     return [sitePath stringByAppendingPathComponent:@"articles"];
 }
 
--(NSString *)pathForTitle:(MWKTitle *)title
+/// Returns the folder where data for the correspnoding title is stored.
+- (NSString *)pathForTitle:(MWKTitle *)title
 {
     NSString *articlesPath = [self pathForArticlesWithSite:title.site];
     NSString *encTitle = [self safeFilenameWithString:title.prefixedDBKey];
     return [articlesPath stringByAppendingPathComponent:encTitle];
 }
 
--(NSString *)pathForArticle:(MWKArticle *)article
+- (NSString *)pathForArticle:(MWKArticle *)article
 {
     return [self pathForTitle:article.title];
 }
 
--(NSString *)pathForSectionsWithTitle:(MWKTitle *)title
+- (NSString *)pathForSectionsWithTitle:(MWKTitle *)title
 {
     NSString *articlePath = [self pathForTitle:title];
     return [articlePath stringByAppendingPathComponent:@"sections"];
 }
 
--(NSString *)pathForSectionId:(NSUInteger)sectionId title:(MWKTitle *)title
+- (NSString *)pathForSectionId:(NSUInteger)sectionId title:(MWKTitle *)title
 {
     NSString *sectionsPath = [self pathForSectionsWithTitle:title];
     NSString *sectionName = [NSString stringWithFormat:@"%d", (int)sectionId];
     return [sectionsPath stringByAppendingPathComponent:sectionName];
 }
 
--(NSString *)pathForSection:(MWKSection *)section
+- (NSString *)pathForSection:(MWKSection *)section
 {
     return [self pathForSectionId:section.sectionId title:section.title];
 }
 
--(NSString *)pathForImagesWithTitle:(MWKTitle *)title
+- (NSString *)pathForImagesWithTitle:(MWKTitle *)title
 {
     NSString *articlePath = [self pathForTitle:title];
     return [articlePath stringByAppendingPathComponent:@"Images"];
 }
 
--(NSString *)pathForImageURL:(NSString *)url title:(MWKTitle *)title
+- (NSString *)pathForImageURL:(NSString *)url title:(MWKTitle *)title
 {
     NSString *imagesPath = [self pathForImagesWithTitle:title];
     NSString *encURL = [self safeFilenameWithImageURL:url];
     return [imagesPath stringByAppendingPathComponent:encURL];
 }
 
--(NSString *)pathForImage:(MWKImage *)image
+- (NSString *)pathForImage:(MWKImage *)image
 {
     return [self pathForImageURL:image.sourceURL title:image.article.title];
 }
 
--(NSString *)pathForImageMetadata:(MWKImageMetadata *)imageMetadata
+- (NSString *)pathForArticleImageInfo:(MWKArticle*)article
 {
-    NSString *safeName = [self safeFilenameWithString:imageMetadata.name];
-
-    NSString *articlePath = [self pathForArticle:imageMetadata.article];
-    NSString *metadataPath = [articlePath stringByAppendingPathComponent:@"ImageMetadata"];
-    return [metadataPath stringByAppendingPathComponent:safeName];
+    return [[self pathForArticle:article] stringByAppendingPathComponent:MWKImageInfoFilename];
 }
 
--(NSString *)safeFilenameWithString:(NSString *)str
+- (NSString *)safeFilenameWithString:(NSString *)str
 {
     // Escape only % and / with percent style for readability
     NSString *encodedStr = [str stringByReplacingOccurrencesOfString:@"%" withString:@"%25"];
@@ -110,12 +112,12 @@ -(NSString *)safeFilenameWithString:(NSString *)str
     return encodedStr;
 }
 
--(NSString *)stringWithSafeFilename:(NSString *)str
+- (NSString *)stringWithSafeFilename:(NSString *)str
 {
     return [str stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
 }
 
--(NSString *)safeFilenameWithImageURL:(NSString *)str
+- (NSString *)safeFilenameWithImageURL:(NSString *)str
 {
     if ([str hasPrefix:@"http:"]) {
         str = [str substringFromIndex:[@"http:" length]];
@@ -123,9 +125,8 @@ -(NSString *)safeFilenameWithImageURL:(NSString *)str
     if ([str hasPrefix:@"https:"]) {
         str = [str substringFromIndex:[@"https:" length]];
     }
-    NSString *prefix = @"//upload.wikimedia.org/";
-    if ([str hasPrefix:prefix]) {
-        NSString *suffix = [str substringFromIndex:[prefix length]];
+    if ([str hasPrefix:MWKDataStoreValidImageSitePrefix]) {
+        NSString *suffix = [str substringFromIndex:[MWKDataStoreValidImageSitePrefix length]];
         NSString *fileName = [suffix lastPathComponent];
 
         // Image URLs are already percent-encoded, so don't double-encode em.
@@ -146,12 +147,11 @@ -(NSString *)safeFilenameWithImageURL:(NSString *)str
                                        reason:@"Tried to save non-upload.wikimedia.org URL as image"
                                      userInfo:@{@"str": str ? str : [NSNull null]}];
     }
-    
 }
 
 #pragma mark - save methods
 
--(void)ensurePathExists:(NSString *)path
+- (void)ensurePathExists:(NSString *)path
 {
     NSError *err;
     [[NSFileManager defaultManager] createDirectoryAtPath:path
@@ -165,84 +165,80 @@ -(void)ensurePathExists:(NSString *)path
     }
 }
 
--(void)saveDictionary:(NSDictionary *)dict path:(NSString *)path name:(NSString *)name
+- (void)saveFile:(NSString*)filename atPath:(NSString*)path byPerforming:(NSError*(^)(NSString*))saveBlock
 {
     [self ensurePathExists:path];
-    
-    NSString *filePath = [path stringByAppendingPathComponent:name];
-    if (![dict writeToFile:filePath atomically:YES]) {
+    NSString *absolutePath = [path stringByAppendingPathComponent:filename];
+    NSError *error = saveBlock(absolutePath);
+    if (error) {
         @throw [NSException exceptionWithName:@"MWKDataStoreException"
-                                       reason:@"dictionary file atomic write failure"
-                                     userInfo:@{@"filePath": filePath}];
+                                       reason:[NSString stringWithFormat:@"Failed to save %@ in %@.", filename, path]
+                                     userInfo:NSDictionaryOfVariableBindings(error)];
     }
 }
 
--(void)saveString:(NSString *)string path:(NSString *)path name:(NSString *)name
+- (void)saveArray:(NSArray*)array path:(NSString*)path name:(NSString*)name
 {
-    [self ensurePathExists:path];
-    
-    NSError *err;
-    NSString *filePath = [path stringByAppendingPathComponent:name];
-    if (![string writeToFile:filePath atomically:YES encoding:NSUTF8StringEncoding error:&err]) {
-        if (err) {
-            @throw [NSException exceptionWithName:@"MWKDataStoreException"
-                                           reason:[err description]
-                                         userInfo:@{@"filePath": filePath, @"err": err}];
-        } else {
-            @throw [NSException exceptionWithName:@"MWKDataStoreException"
-                                           reason:@"string file atomic write failure"
-                                         userInfo:@{@"filePath": filePath}];
-        }
-    }
+    [self saveFile:name atPath:path byPerforming:^NSError *(NSString *absPath) {
+        return [array writeToFile:absPath atomically:YES] ?
+                nil : [NSError errorWithDomain:@"MWKDataStoreArrayWriteToFileFailedException" code:1 userInfo:nil];
+    }];
 }
 
--(void)saveData:(NSData *)data path:(NSString *)path name:(NSString *)name
+- (void)saveDictionary:(NSDictionary *)dict path:(NSString *)path name:(NSString *)name
 {
-    [self ensurePathExists:path];
-    
-    NSError *err;
-    NSString *filePath = [path stringByAppendingPathComponent:name];
-    if (![data writeToFile:filePath options:NSDataWritingAtomic error:&err]) {
-        if (err) {
-            @throw [NSException exceptionWithName:@"MWKDataStoreException"
-                                           reason:[err description]
-                                         userInfo:@{@"filePath": filePath, @"err": err}];
-        } else {
-            @throw [NSException exceptionWithName:@"MWKDataStoreException"
-                                           reason:@"data file atomic write failure"
-                                         userInfo:@{@"filePath": filePath}];
-        }
-    }
+    [self saveFile:name atPath:path byPerforming:^NSError*(NSString *absPath) {
+        return [dict writeToFile:absPath atomically:YES] ?
+                nil : [NSError errorWithDomain:@"MWKDataStoreDictWriteToFileFailedException" code:1 userInfo:nil];
+    }];
+}
+
+- (void)saveString:(NSString *)string path:(NSString *)path name:(NSString *)name
+{
+    [self saveFile:name atPath:path byPerforming:^NSError *(NSString *absPath) {
+        NSError *err = nil;
+        [string writeToFile:absPath atomically:YES encoding:NSUTF8StringEncoding error:&err];
+        return err;
+    }];
 }
 
--(void)saveArticle:(MWKArticle *)article
+- (void)saveData:(NSData *)data path:(NSString *)path name:(NSString *)name
+{
+    [self saveFile:name atPath:path byPerforming:^NSError *(NSString *absPath) {
+        NSError *err = nil;
+        [data writeToFile:absPath options:NSDataWritingAtomic error:&err];
+        return err;
+    }];
+}
+
+- (void)saveArticle:(MWKArticle *)article
 {
     NSString *path = [self pathForArticle:article];
     NSDictionary *export = [article dataExport];
     [self saveDictionary:export path:path name:@"Article.plist"];
 }
 
--(void)saveSection:(MWKSection *)section
+- (void)saveSection:(MWKSection *)section
 {
     NSString *path = [self pathForSection:section];
     NSDictionary *export = [section dataExport];
     [self saveDictionary:export path:path name:@"Section.plist"];
 }
 
--(void)saveSectionText:(NSString *)html section:(MWKSection *)section
+- (void)saveSectionText:(NSString *)html section:(MWKSection *)section
 {
     NSString *path = [self pathForSection:section];
     [self saveString:html path:path name:@"Section.html"];
 }
 
--(void)saveImage:(MWKImage *)image
+- (void)saveImage:(MWKImage *)image
 {
     NSString *path = [self pathForImage:image];
     NSDictionary *export = [image dataExport];
     [self saveDictionary:export path:path name:@"Image.plist"];
 }
 
--(void)saveImageData:(NSData *)data image:(MWKImage *)image
+- (void)saveImageData:(NSData *)data image:(MWKImage *)image
 {
     NSString *path = [self pathForImage:image];
     NSString *filename = [@"Image" stringByAppendingPathExtension:image.extension];
@@ -252,28 +248,28 @@ -(void)saveImageData:(NSData *)data image:(MWKImage *)image
     [self saveImage:image];
 }
 
--(void)saveHistoryList:(MWKHistoryList *)list
+- (void)saveHistoryList:(MWKHistoryList *)list
 {
     NSString *path = self.basePath;
     NSDictionary *export = [list dataExport];
     [self saveDictionary:export path:path name:@"History.plist"];
 }
 
--(void)saveSavedPageList:(MWKSavedPageList *)list
+- (void)saveSavedPageList:(MWKSavedPageList *)list
 {
     NSString *path = self.basePath;
     NSDictionary *export = [list dataExport];
     [self saveDictionary:export path:path name:@"SavedPages.plist"];
 }
 
--(void)saveRecentSearchList:(MWKRecentSearchList *)list
+- (void)saveRecentSearchList:(MWKRecentSearchList *)list
 {
     NSString *path = self.basePath;
     NSDictionary *export = [list dataExport];
     [self saveDictionary:export path:path name:@"RecentSearches.plist"];
 }
 
--(void)saveImageList:(MWKImageList *)imageList
+- (void)saveImageList:(MWKImageList *)imageList
 {
     NSString *path;
     if (imageList.section) {
@@ -285,18 +281,17 @@ -(void)saveImageList:(MWKImageList *)imageList
     [self saveDictionary:export path:path name:@"Images.plist"];
 }
 
--(void)saveImageMetadata:(MWKImageMetadata *)imageMetadata
+- (void)saveImageInfo:(NSArray*)imageInfo forArticle:(MWKArticle*)article
 {
-    NSString *path = [self pathForImageMetadata:imageMetadata];
-    NSDictionary *export = [imageMetadata dataExport];
-    [self saveDictionary:export path:path name:@"ImageMetadata.plist"];
+    [self saveArray:[imageInfo bk_map:^id(MWKImageInfo *obj) { return [obj dataExport]; }]
+               path:[self pathForArticle:article]
+               name:MWKImageInfoFilename];
 }
 
-
 #pragma mark - load methods
 
 /// May return nil if no article data available.
--(MWKArticle *)articleWithTitle:(MWKTitle *)title
+- (MWKArticle *)articleWithTitle:(MWKTitle *)title
 {
     NSString *path = [self pathForTitle:title];
     NSString *filePath = [path stringByAppendingPathComponent:@"Article.plist"];
@@ -308,7 +303,7 @@ -(MWKArticle *)articleWithTitle:(MWKTitle *)title
     }
 }
 
--(MWKSection *)sectionWithId:(NSUInteger)sectionId article:(MWKArticle *)article
+- (MWKSection *)sectionWithId:(NSUInteger)sectionId article:(MWKArticle *)article
 {
     NSString *path = [self pathForSectionId:sectionId title:article.title];
     NSString *filePath = [path stringByAppendingPathComponent:@"Section.plist"];
@@ -316,7 +311,7 @@ -(MWKSection *)sectionWithId:(NSUInteger)sectionId article:(MWKArticle *)article
     return [[MWKSection alloc] initWithArticle:article dict:dict];
 }
 
--(NSString *)sectionTextWithId:(NSUInteger)sectionId article:(MWKArticle *)article
+- (NSString *)sectionTextWithId:(NSUInteger)sectionId article:(MWKArticle *)article
 {
     NSString *path = [self pathForSectionId:sectionId title:article.title];
     NSString *filePath = [path stringByAppendingPathComponent:@"Section.html"];
@@ -332,7 +327,7 @@ -(NSString *)sectionTextWithId:(NSUInteger)sectionId article:(MWKArticle *)artic
     return html;
 }
 
--(MWKImage *)imageWithURL:(NSString *)url article:(MWKArticle *)article
+- (MWKImage *)imageWithURL:(NSString *)url article:(MWKArticle *)article
 {
     if (url == nil) {
         return nil;
@@ -349,7 +344,7 @@ -(MWKImage *)imageWithURL:(NSString *)url article:(MWKArticle *)article
     }
 }
 
--(NSData *)imageDataWithImage:(MWKImage *)image
+- (NSData *)imageDataWithImage:(MWKImage *)image
 {
     if (image == nil) {
         NSLog(@"nil image passed to imageDataWithImage");
@@ -368,7 +363,7 @@ -(NSData *)imageDataWithImage:(MWKImage *)image
     return data;
 }
 
--(MWKHistoryList *)historyList
+- (MWKHistoryList *)historyList
 {
     NSString *path = self.basePath;
     NSString *filePath = [path stringByAppendingPathComponent:@"History.plist"];
@@ -381,7 +376,7 @@ -(MWKHistoryList *)historyList
     }
 }
 
--(MWKSavedPageList *)savedPageList
+- (MWKSavedPageList *)savedPageList
 {
     NSString *path = self.basePath;
     NSString *filePath = [path stringByAppendingPathComponent:@"SavedPages.plist"];
@@ -394,7 +389,7 @@ -(MWKSavedPageList *)savedPageList
     }
 }
 
--(MWKRecentSearchList *)recentSearchList
+- (MWKRecentSearchList *)recentSearchList
 {
     NSString *path = self.basePath;
     NSString *filePath = [path stringByAppendingPathComponent:@"RecentSearches.plist"];
@@ -407,30 +402,24 @@ -(MWKRecentSearchList *)recentSearchList
     }
 }
 
--(MWKImageMetadata *)imageMetadataWithName:(NSString *)name article:(MWKArticle *)article
+- (NSArray*)imageInfoForArticle:(MWKArticle*)article;
 {
-    MWKImageMetadata *stub = [[MWKImageMetadata alloc] initWithArticle:article name:name];
-    NSString *path = [self pathForImageMetadata:stub];
-    NSString *filePath = [path stringByAppendingPathComponent:@"ImageMetadata.plist"];
-    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:filePath];
-    if (dict) {
-        return [[MWKImageMetadata alloc] initWithArticle:article name:name dict:dict];
-    } else {
-        return nil;
-    }
+    NSArray *array = [NSArray arrayWithContentsOfFile:[self pathForArticleImageInfo:article]];
+    return array ?
+        [array bk_map:^MWKImageInfo*(id obj) {
+            return [MWKImageInfo imageInfoWithExportedData:obj];
+        }]
+        : nil;
 }
 
-
-
 #pragma mark - helper methods
 
--(MWKUserDataStore *)userDataStore
+- (MWKUserDataStore *)userDataStore
 {
     return [[MWKUserDataStore alloc] initWithDataStore:self];
 }
 
-
--(MWKImageList *)imageListWithArticle:(MWKArticle *)article section:(MWKSection *)section
+- (MWKImageList *)imageListWithArticle:(MWKArticle *)article section:(MWKSection *)section
 {
     NSString *path;
     if (section) {
@@ -447,7 +436,7 @@ -(MWKImageList *)imageListWithArticle:(MWKArticle *)article section:(MWKSection
     }
 }
 
--(void)iterateOverArticles:(void(^)(MWKArticle *))block
+- (void)iterateOverArticles:(void(^)(MWKArticle *))block
 {
     NSFileManager *fm = [NSFileManager defaultManager];
     NSString *articlePath = [self pathForSites];
diff --git a/MediaWikiKit/MediaWikiKit/MWKImage.h b/MediaWikiKit/MediaWikiKit/MWKImage.h
index c685a8e0d46..a9829edfbc4 100644
--- a/MediaWikiKit/MediaWikiKit/MWKImage.h
+++ b/MediaWikiKit/MediaWikiKit/MWKImage.h
@@ -7,12 +7,11 @@
 //
 
 #import "UIKit/UIKit.h"
-
 #import "MWKSiteDataObject.h"
 
 @class MWKTitle;
 @class MWKArticle;
-@class MWKImageMetadata;
+@class MWKImageInfo;
 
 @interface MWKImage : MWKSiteDataObject
 
@@ -33,6 +32,13 @@
 @property (copy) NSNumber *width;
 @property (copy) NSNumber *height;
 
+/**
+ * A relative URL pointing at the file page associated with this image.
+ * @discussion Typical format is: @c "/wiki/File:Image_file_Name".
+ * @see -[ArticleFetcher createImageRecordsForSection:]
+ */
+@property (copy) NSString *filePageURL;
+
 // Local storage status
 @property (readonly) BOOL isCached;
 
@@ -41,6 +47,8 @@
 
 -(void)importImageData:(NSData *)data;
 
+- (BOOL)isEqualToImage:(MWKImage*)image;
+
 // internal
 -(void)updateWithData:(NSData *)data;
 -(void)updateLastAccessed;
@@ -49,9 +57,47 @@
 -(UIImage *)asUIImage;
 
 -(MWKImage *)largestVariant;
--(MWKImageMetadata *)metadata;
 
-+(NSString *)fileNameNoSizePrefix:(NSString *)sourceURL;
+/// Return the folder containing the image file from receiver's @c sourceURL.
+- (NSString*)basename;
+
+/**
+ * The receiver's canonical filename, after normalization.
+ * @see -canonicalFilenameFromSourceURL
+ * @see WMFNormalizedPageTitle()
+ */
+- (NSString*)canonicalFilename;
+
+/**
+ * The receiver's canonical filename, with any present percent encodings and underscores.
+ * @see +canonicalFilenameFromSourceURL:
+ */
+- (NSString*)canonicalFilenameFromSourceURL;
+
+/**
+ * The name of the image "file" associatd with @c sourceURL (without the XXXpx prefix).
+ * @param sourceURL A @c NSURL pointing to an image file in the format @c "//site/.../Filename.jpg[/XXXpx-Filename.jpg".
+ * @note This method returns the filename <b>with</b> percent encodings.
+ */
++ (NSString *)fileNameNoSizePrefix:(NSString *)sourceURL;
+
+/// The name of the image "file" associatd with the receiver, with percent encodings replaced.
++ (NSString*)canonicalFilenameFromSourceURL:(NSString*)sourceURL;
+
 +(int)fileSizePrefix:(NSString *)sourceURL;
 
+/**
+ * Checks if two images are variants of each other <b>but not exactly the same image</b>.
+ * @discussion For example: <br/>
+ @code
+ MWKImage *img; // sourceURL = .../foo.jpg/440px-foo.jpg
+ MWKImage *imgAtOtherRes; // sourceURL = .../foo.jpg/7200px-foo.jpg
+ MWKImage *otherImage; // sourceURL = .../bar.jpg/440px-bar.jpg
+ [img isVariantOfImage:imgAtOtherRes]; //< returns YES
+ [img isVariantOfImage:otherImage]; //< returns YES
+ [img isVariantOfImage:img]; //< returns NO
+ @endcode
+ */
+- (BOOL)isVariantOfImage:(MWKImage*)otherImage;
+
 @end
diff --git a/MediaWikiKit/MediaWikiKit/MWKImage.m b/MediaWikiKit/MediaWikiKit/MWKImage.m
index 2f3e46fdc27..34876f34015 100644
--- a/MediaWikiKit/MediaWikiKit/MWKImage.m
+++ b/MediaWikiKit/MediaWikiKit/MWKImage.m
@@ -7,7 +7,7 @@
 //
 
 #import "UIKit/UIKit.h"
-
+#import "WikipediaAppUtils.h"
 #import "MediaWikiKit.h"
 
 @implementation MWKImage
@@ -38,6 +38,7 @@ -(instancetype)initWithArticle:(MWKArticle *)article dict:(NSDictionary *)dict
         _mimeType = [self optionalString:@"mimeType" dict:dict];
         _width = [self optionalNumber:@"width" dict:dict];
         _height = [self optionalNumber:@"height" dict:dict];
+        _filePageURL = dict[@"filePageURL"];
     }
     return self;
 }
@@ -52,8 +53,27 @@ -(NSString *)fileName
     return [self.sourceURL lastPathComponent];
 }
 
+- (NSString*)basename
+{
+    NSArray *sourceURLComponents = [self.sourceURL componentsSeparatedByString:@"/"];
+    NSParameterAssert(sourceURLComponents.count >= 2);
+    return sourceURLComponents[sourceURLComponents.count - 2];
+}
+
+- (NSString*)canonicalFilename
+{
+    return WMFNormalizedPageTitle([self canonicalFilenameFromSourceURL]);
+}
+
+- (NSString*)canonicalFilenameFromSourceURL
+{
+    return [MWKImage canonicalFilenameFromSourceURL:self.sourceURL];
+}
+
 +(NSString *)fileNameNoSizePrefix:(NSString *)sourceURL
 {
+    if (!sourceURL) { return nil; }
+
     NSString *fileName = [sourceURL lastPathComponent];
     NSRegularExpression *re = [NSRegularExpression regularExpressionWithPattern:@"^\\d+px-(.*)$" options:0 error:nil];
     NSArray *matches = [re matchesInString:fileName options:0 range:NSMakeRange(0, [fileName length])];
@@ -64,6 +84,11 @@ +(NSString *)fileNameNoSizePrefix:(NSString *)sourceURL
     }
 }
 
++ (NSString*)canonicalFilenameFromSourceURL:(NSString *)sourceURL
+{
+    return [[self fileNameNoSizePrefix:sourceURL] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
+}
+
 +(int)fileSizePrefix:(NSString *)sourceURL
 {
     NSString *fileName = [sourceURL lastPathComponent];
@@ -100,7 +125,10 @@ -(id)dataExport
     if (self.height) {
         dict[@"height"] = self.height;
     }
-    return [NSDictionary dictionaryWithDictionary:dict];
+    if (self.filePageURL) {
+        dict[@"filePageURL"] = self.filePageURL;
+    }
+    return [dict copy];
 }
 
 -(void)importImageData:(NSData *)data
@@ -151,12 +179,6 @@ -(MWKImage *)largestVariant
     return [self.article imageWithURL:largestURL];
 }
 
--(MWKImageMetadata *)metadata
-{
-    return [self.article.dataStore imageMetadataWithName:self.fileNameNoSizePrefix
-                                                 article:self.article];
-}
-
 -(BOOL)isCached
 {
     // @fixme maybe make this more efficient
@@ -164,4 +186,38 @@ -(BOOL)isCached
     return (data != nil);
 }
 
+- (BOOL)isEqual:(id)object
+{
+    if (self == object) {
+        return YES;
+    } else if ([object isKindOfClass:[MWKImage class]]) {
+        return [self isEqualToImage:object];
+    } else {
+        return NO;
+    }
+}
+
+- (BOOL)isEqualToImage:(MWKImage*)image
+{
+    return self == image || [self.fileName isEqualToString:image.fileName];
+}
+
+- (NSUInteger)hash
+{
+    return [self.fileName hash];
+}
+
+- (BOOL)isVariantOfImage:(MWKImage *)otherImage
+{
+    // !!!: this might not be reliable due to underscore, percent encodings, and other unknowns w/ image filenames
+    return [self.fileNameNoSizePrefix isEqualToString:otherImage.fileNameNoSizePrefix]
+            && ![self isEqualToImage:otherImage];
+}
+
+- (NSString*)description
+{
+    return [NSString stringWithFormat:@"%@ article: %@ sourceURL: %@",
+                                     [super description], self.article.title, self.sourceURL];
+}
+
 @end
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageInfo+MWKImageComparison.h b/MediaWikiKit/MediaWikiKit/MWKImageInfo+MWKImageComparison.h
new file mode 100644
index 00000000000..a8d6d2c79b6
--- /dev/null
+++ b/MediaWikiKit/MediaWikiKit/MWKImageInfo+MWKImageComparison.h
@@ -0,0 +1,28 @@
+//
+//  MWKImageInfo+MWKImageComparison.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/9/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKImageInfo.h"
+#import "MWKImage.h"
+
+FOUNDATION_EXPORT NSString* const MWKImageAssociationKeyPath;
+
+@interface MWKImageInfo (MWKImageComparison)
+
+- (id)imageAssociationValue;
+
+- (BOOL)isAssociatedWithImage:(MWKImage*)image;
+
+@end
+
+@interface MWKImage (MWKImageInfoComparison)
+
+- (id)infoAssociationValue;
+
+- (BOOL)isAssociatedWithInfo:(MWKImageInfo*)info;
+
+@end
\ No newline at end of file
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageInfo+MWKImageComparison.m b/MediaWikiKit/MediaWikiKit/MWKImageInfo+MWKImageComparison.m
new file mode 100644
index 00000000000..7d08be2c455
--- /dev/null
+++ b/MediaWikiKit/MediaWikiKit/MWKImageInfo+MWKImageComparison.m
@@ -0,0 +1,41 @@
+//
+//  MWKImageInfo+MWKImageComparison.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/9/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKImageInfo+MWKImageComparison.h"
+#import "MWKImage.h"
+#import "WikipediaAppUtils.h"
+
+NSString* const MWKImageAssociationKeyPath = @"canonicalFilename";
+
+@implementation MWKImageInfo (MWKImageComparison)
+
+- (id)imageAssociationValue
+{
+    return self.canonicalFilename;
+}
+
+- (BOOL)isAssociatedWithImage:(MWKImage *)image
+{
+    return [self.canonicalFilename isEqualToString:image.canonicalFilename];
+}
+
+@end
+
+@implementation MWKImage (MWKImageInfoComparison)
+
+- (id)infoAssociationValue
+{
+    return self.canonicalFilename;
+}
+
+- (BOOL)isAssociatedWithInfo:(MWKImageInfo *)info
+{
+    return [info isAssociatedWithImage:self];
+}
+
+@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageInfo.h b/MediaWikiKit/MediaWikiKit/MWKImageInfo.h
new file mode 100644
index 00000000000..6f8847597aa
--- /dev/null
+++ b/MediaWikiKit/MediaWikiKit/MWKImageInfo.h
@@ -0,0 +1,52 @@
+//
+//  MWKImageMetadata.h
+//  MediaWikiKit
+//
+//  Created by Brion on 1/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKDataObject.h"
+#import "MWKLicense.h"
+
+@interface MWKImageInfo : MWKDataObject
+
+/// Name of the canonical file associated with this image, in the format @c "File:Some_file_name.extension".
+@property (nonatomic, readonly, copy) NSString *canonicalPageTitle;
+
+/// URL pointing at the canonical file associated with this gallery item, e.g. @c "//site/.../Some_file_name.extension".
+@property (nonatomic, readonly) NSURL *canonicalFileURL;
+
+/// Short description of the image contents (e.g. "John Smith posing for a picture").
+@property (nonatomic, readonly, copy) NSString *imageDescription;
+
+@property (nonatomic, readonly) MWKLicense *license;
+
+/// URL pointing to the corresponding file page for the receiver.
+@property (nonatomic, readonly) NSURL *filePageURL;
+
+/// URL pointing at the original image (at the uploaded resolution).
+@property (nonatomic, readonly) NSURL *imageURL;
+
+/// URL pointing at a thumbnail version of the image at @c imageURL.
+@property (nonatomic, readonly) NSURL *imageThumbURL;
+
+/// Name of the entity owning this image.
+@property (nonatomic, readonly, copy) NSString *owner;
+
+/// Factory method for creating an instance from the output of @c exportData.
++ (instancetype)imageInfoWithExportedData:(NSDictionary*)exportedData;
+
+- (instancetype)initWithCanonicalPageTitle:(NSString*)canonicalPageTitle
+                          canonicalFileURL:(NSURL*)canonicalFileURL
+                          imageDescription:(NSString*)imageDescription
+                                   license:(MWKLicense*)license
+                               filePageURL:(NSURL*)filePageURL
+                                  imageURL:(NSURL*)imageURL
+                             imageThumbURL:(NSURL*)imageThumbURL
+                                     owner:(NSString*)owner;
+
+/// Name of the canonical file associated with the receiver, without the "File:" prefix.
+- (NSString*)canonicalFilename;
+
+@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageInfo.m b/MediaWikiKit/MediaWikiKit/MWKImageInfo.m
new file mode 100644
index 00000000000..818623c7696
--- /dev/null
+++ b/MediaWikiKit/MediaWikiKit/MWKImageInfo.m
@@ -0,0 +1,131 @@
+// //  MWKImageMetadata.m
+//  MediaWikiKit
+//
+//  Created by Brion on 1/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MediaWikiKit.h"
+#import "NSMutableDictionary+WMFMaybeSet.h"
+#import "WikipediaAppUtils.h"
+
+// !!!: don't change key constants w/o writing conversion code to pull values from the old keys
+
+// Model Version 1.0.0
+NSString* const mWKImageInfoModelVersionKey = @"modelVersion";
+NSUInteger const MWKImageInfoModelVersion_1 = 1;
+
+NSString* const MWKImageInfoCanonicalPageTitleKey = @"canonicalPageTitle";
+NSString* const MWKImageInfoCanonicalFileURLKey = @"canonicalFileURL";
+NSString* const MWKImageInfoImageDescriptionKey = @"imageDescription";
+NSString* const MWKImageInfoFilePageURLKey = @"filePageURL";
+NSString* const MWKImageInfoImageURLKey = @"imageURL";
+NSString* const MWKImageInfoImageThumbURLKey = @"imageThumbURL";
+NSString* const MWKImageInfoOwnerKey = @"owner";
+NSString* const MWKImageInfoLicenseKey = @"license";
+
+@implementation MWKImageInfo
+
+- (instancetype)initWithCanonicalPageTitle:(NSString *)canonicalPageTitle
+                          canonicalFileURL:(NSURL*)canonicalFileURL
+                          imageDescription:(NSString*)imageDescription
+                                   license:(MWKLicense*)license
+                               filePageURL:(NSURL*)filePageURL
+                                  imageURL:(NSURL*)imageURL
+                             imageThumbURL:(NSURL*)imageThumbURL
+                                     owner:(NSString*)owner
+{
+    // !!!: not sure what's guaranteed by the API
+    //NSParameterAssert(canonicalPageTitle.length);
+    //NSParameterAssert(canonicalFileURL.absoluteString.length);
+    //NSParameterAssert([imageURL.absoluteString length]);
+    self = [super init];
+    if (self) {
+        _canonicalPageTitle = [canonicalPageTitle copy];
+        _imageDescription = [imageDescription copy];
+        _owner = [owner copy];
+        _license = license;
+        _canonicalFileURL = canonicalFileURL;
+        _filePageURL = filePageURL;
+        _imageURL = imageURL;
+        _imageThumbURL = imageThumbURL;
+    }
+    return self;
+}
+
++ (instancetype)imageInfoWithExportedData:(NSDictionary*)exportedData
+{
+    // assume all model versions are 1.0.0
+    return [[MWKImageInfo alloc]
+            initWithCanonicalPageTitle:exportedData[MWKImageInfoCanonicalPageTitleKey]
+            canonicalFileURL:[NSURL URLWithString:exportedData[MWKImageInfoCanonicalFileURLKey]]
+            imageDescription:exportedData[MWKImageInfoImageDescriptionKey]
+            license:[MWKLicense licenseWithExportedData:exportedData[MWKImageInfoLicenseKey]]
+            filePageURL:[NSURL URLWithString:exportedData[MWKImageInfoFilePageURLKey]]
+            imageURL:[NSURL URLWithString:exportedData[MWKImageInfoImageURLKey]]
+            imageThumbURL:[NSURL URLWithString:exportedData[MWKImageInfoImageThumbURLKey]]
+            owner:exportedData[MWKImageInfoOwnerKey]];
+}
+
+- (NSDictionary*)dataExport
+{
+    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithCapacity:6];
+
+    dict[mWKImageInfoModelVersionKey]  = @(MWKImageInfoModelVersion_1);
+
+    [dict wmf_maybeSetObject:self.canonicalPageTitle forKey:MWKImageInfoCanonicalPageTitleKey];
+    [dict wmf_maybeSetObject:self.canonicalFileURL.absoluteString forKey:MWKImageInfoCanonicalFileURLKey];
+    [dict wmf_maybeSetObject:self.imageDescription forKey:MWKImageInfoImageDescriptionKey];
+    [dict wmf_maybeSetObject:self.filePageURL.absoluteString forKey:MWKImageInfoFilePageURLKey];
+    [dict wmf_maybeSetObject:self.imageURL.absoluteString forKey:MWKImageInfoImageURLKey];
+    [dict wmf_maybeSetObject:self.imageThumbURL.absoluteString forKey:MWKImageInfoImageThumbURLKey];
+    [dict wmf_maybeSetObject:self.owner forKey:MWKImageInfoOwnerKey];
+
+#warning TODO(bgerstle): only store the license "hash" or something and save the licenses separately
+    [dict wmf_maybeSetObject:[self.license dataExport] forKey:MWKImageInfoLicenseKey];
+
+    return [dict copy];
+}
+
+- (BOOL)isEqual:(id)obj
+{
+    if (obj == self) { return YES; }
+    else if ([obj isKindOfClass:[MWKImageInfo class]]) { return [self isEqualToGalleryItem:obj]; }
+    else { return NO; }
+}
+
+- (BOOL)isEqualToGalleryItem:(MWKImageInfo*)other
+{
+    return WMF_EQUAL(self.canonicalPageTitle, isEqualToString:, other.canonicalPageTitle)
+            && WMF_IS_EQUAL(self.canonicalFileURL, other.canonicalFileURL)
+            && WMF_EQUAL(self.imageDescription, isEqualToString:, other.imageDescription)
+            && WMF_EQUAL(self.license, isEqualToLicense:, other.license)
+            && WMF_IS_EQUAL(self.filePageURL, other.filePageURL)
+            && WMF_IS_EQUAL(self.imageURL, other.imageURL)
+            && WMF_IS_EQUAL(self.imageThumbURL, other.imageThumbURL)
+            && WMF_EQUAL(self.owner, isEqualToString:, other.owner);
+}
+
+- (NSUInteger)hash
+{
+    return [self.canonicalPageTitle hash] ^ CircularBitwiseRotation([self.imageURL hash], 1);
+}
+
+- (NSString*)description
+{
+    return [NSString stringWithFormat:@"%@ %@ %@", [super description], self.canonicalPageTitle, self.imageURL];
+}
+
+#pragma mark - Calculated properties
+
+- (NSString*)canonicalFilename
+{
+    if (self.canonicalPageTitle.length > 5) {
+        // string after "File:" prefix
+        return [self.canonicalPageTitle substringFromIndex:5];
+    } else {
+        return nil;
+    }
+}
+
+@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageList.h b/MediaWikiKit/MediaWikiKit/MWKImageList.h
index 3826e489d65..e373bce9e04 100644
--- a/MediaWikiKit/MediaWikiKit/MWKImageList.h
+++ b/MediaWikiKit/MediaWikiKit/MWKImageList.h
@@ -8,6 +8,8 @@
 
 #import "MWKSiteDataObject.h"
 
+@class MWKArticle;
+@class MWKSection;
 @class MWKImage;
 
 @interface MWKImageList : MWKSiteDataObject <NSFastEnumeration>
@@ -25,6 +27,12 @@
 
 -(BOOL)hasImageURL:(NSString *)imageURL;
 
+- (MWKImage*)imageWithURL:(NSString*)imageURL;
+
+- (NSUInteger)indexOfImage:(MWKImage*)image;
+
+- (BOOL)containsImage:(MWKImage*)image;
+
 /**
  * Return an array of known URLs for the same image that a URL has been given for,
  * ordered by pixel size (smallest to largest).
@@ -41,6 +49,20 @@
  */
 -(NSString *)largestImageVariant:(NSString *)image;
 
+/**
+ * Searches the receiver for a cached image variant matching @c sourceURL.
+ * @return An @c MWKImage object or @c nil if no matching variant is found.
+ */
+- (MWKImage*)largestImageVariantForURL:(NSString*)sourceURL;
+
+/**
+ * Reduce the receiver by removing all but the largest variants of the contained images, preserving order.
+ * @warning In an effort to make this method more reliable, it should always return an image for each entry in the list,
+ *          but some of the returned images might not be cached.
+ * @return A non-empty array of @c MWKImage objects or @c nil if there are no uncached images.
+ */
+- (NSArray*)uniqueLargestVariants;
+
 @property (readonly) BOOL dirty;
 
 -(void)save;
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageList.m b/MediaWikiKit/MediaWikiKit/MWKImageList.m
index 2b85abf9aa3..013394eae7a 100644
--- a/MediaWikiKit/MediaWikiKit/MWKImageList.m
+++ b/MediaWikiKit/MediaWikiKit/MWKImageList.m
@@ -15,6 +15,38 @@ @implementation MWKImageList {
     unsigned long mutationState;
 }
 
+- (instancetype)initWithSite:(MWKSite *)site
+{
+    self = [super initWithSite:site];
+    if (self) {
+        entries = [[NSMutableArray alloc] init];
+        mutationState = 0;
+        entriesByURL = [[NSMutableDictionary alloc] init];
+        entriesByNameWithoutSize = [[NSMutableDictionary alloc] init];
+    }
+    return self;
+}
+-(instancetype)initWithArticle:(MWKArticle *)article section:(MWKSection *)section
+{
+    self = [self initWithSite:section.site];
+    if (self) {
+        _article = article;
+        _section = section;
+    }
+    return self;
+}
+
+-(instancetype)initWithArticle:(MWKArticle *)article section:(MWKSection *)section dict:(NSDictionary *)dict
+{
+    self = [self initWithArticle:article section:section];
+    if (self) {
+        for (NSString *url in dict[@"entries"]) {
+            [self addImageURL:url];
+        }
+    }
+    return self;
+}
+
 -(void)addImageURL:(NSString *)imageURL
 {
     [entries addObject:imageURL];
@@ -43,7 +75,6 @@ -(NSString *)imageURLAtIndex:(NSUInteger)index
         return nil;
     }
 }
-
 -(MWKImage *)objectAtIndexedSubscript:(NSUInteger)index
 {
     NSString *imageURL = [self imageURLAtIndex:index];
@@ -52,7 +83,12 @@ -(MWKImage *)objectAtIndexedSubscript:(NSUInteger)index
 
 -(BOOL)hasImageURL:(NSString *)imageURL
 {
-    return (entriesByURL[imageURL] != nil);
+    return [self imageWithURL:imageURL] != nil;
+}
+
+- (MWKImage*)imageWithURL:(NSString *)imageURL
+{
+    return entriesByURL[imageURL];
 }
 
 -(NSArray *)imageSizeVariants:(NSString *)imageURL
@@ -84,45 +120,52 @@ -(NSArray *)imageSizeVariants:(NSString *)imageURL
 }
 
 -(NSString *)largestImageVariant:(NSString *)imageURL
+{
+    return [self largestImageVariantForURL:imageURL].sourceURL;
+}
+
+- (MWKImage*)largestImageVariantForURL:(NSString *)imageURL cachedOnly:(BOOL)cachedOnly
 {
     NSArray *arr = [self imageSizeVariants:imageURL];
     for (NSString *variantURL in [arr reverseObjectEnumerator]) {
         MWKImage *image = [self.article imageWithURL:variantURL];
-        if (image.isCached) {
-            return variantURL;
+        if (!cachedOnly || image.isCached) {
+            return image;
         }
     }
     return nil;
 }
 
 
-#pragma mark - data i/o
+- (MWKImage*)largestImageVariantForURL:(NSString *)imageURL
+{
+    return [self largestImageVariantForURL:imageURL cachedOnly:YES];
+}
 
--(instancetype)initWithArticle:(MWKArticle *)article section:(MWKSection *)section
+- (NSUInteger)indexOfImage:(MWKImage*)image
 {
-    self = [self initWithSite:section.site];
-    if (self) {
-        _article = article;
-        _section = section;
-        entries = [[NSMutableArray alloc] init];
-        mutationState = 0;
-        entriesByURL = [[NSMutableDictionary alloc] init];
-        entriesByNameWithoutSize = [[NSMutableDictionary alloc] init];
-    }
-    return self;
+    return [entries indexOfObject:image.sourceURL];
 }
 
--(instancetype)initWithArticle:(MWKArticle *)article section:(MWKSection *)section dict:(NSDictionary *)dict
+- (BOOL)containsImage:(MWKImage*)image
 {
-    self = [self initWithArticle:article section:section];
-    if (self) {
-        for (NSString *url in dict[@"entries"]) {
-            [self addImageURL:url];
-        }
+    return [entries containsObject:image.sourceURL];
+}
+
+- (NSArray*)uniqueLargestVariants
+{
+    if (!entries || entries.count == 0) { return nil; }
+    NSMutableOrderedSet *resultBuilder = [[NSMutableOrderedSet alloc] initWithCapacity:entries.count];
+    for (NSString *sourceURL in entries) {
+        MWKImage *image = [self largestImageVariantForURL:sourceURL cachedOnly:NO];
+        NSAssert(image, @"Couldn't retrieve image record for image list entry: %@", sourceURL);
+        [resultBuilder addObject:image];
     }
-    return self;
+    return [resultBuilder array];
 }
 
+#pragma mark - data i/o
+
 -(id)dataExport
 {
     return @{@"entries": entries};
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageMetadata.h b/MediaWikiKit/MediaWikiKit/MWKImageMetadata.h
deleted file mode 100644
index eea78673e58..00000000000
--- a/MediaWikiKit/MediaWikiKit/MWKImageMetadata.h
+++ /dev/null
@@ -1,35 +0,0 @@
-//
-//  MWKImageMetadata.h
-//  MediaWikiKit
-//
-//  Created by Brion on 1/16/15.
-//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
-//
-
-#import "MWKSiteDataObject.h"
-
-@class MWKArticle;
-@class MWKImage;
-
-@interface MWKImageMetadata : MWKSiteDataObject
-
-@property (readonly) MWKArticle *article;
-@property (readonly) NSString *name;
-
-// Everything as MWKImageMetadataItem objects
-@property (readonly) NSDictionary *extmetadata;
-
-// Some handy props
-@property (readonly) NSString *license;          // text
-@property (readonly) NSString *licenseShortName; // text?
-@property (readonly) NSString *licenseUrl;       // link
-@property (readonly) NSString *artist;           // HTML
-@property (readonly) NSString *imageDescription; // HTML
-
--(instancetype)initWithArticle:(MWKArticle *)article name:(NSString *)name;
--(instancetype)initWithArticle:(MWKArticle *)article name:(NSString *)name dict:(NSDictionary *)dict;
-
--(void)save;
--(void)remove;
-
-@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageMetadata.m b/MediaWikiKit/MediaWikiKit/MWKImageMetadata.m
deleted file mode 100644
index 554f649f89d..00000000000
--- a/MediaWikiKit/MediaWikiKit/MWKImageMetadata.m
+++ /dev/null
@@ -1,120 +0,0 @@
-//
-//  MWKImageMetadata.m
-//  MediaWikiKit
-//
-//  Created by Brion on 1/16/15.
-//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
-//
-
-#import "MediaWikiKit.h"
-
-@implementation MWKImageMetadata {
-    NSDictionary *_extmetadata;
-}
-
--(instancetype)initWithArticle:(MWKArticle *)article name:(NSString *)name
-{
-    self = [self initWithSite:article.site];
-    if (self) {
-        _article = article;
-        _name = name;
-        _extmetadata = @{};
-    }
-    return self;
-}
-
--(instancetype)initWithArticle:(MWKArticle *)article name:(NSString *)name dict:(NSDictionary *)dict
-{
-    self = [self initWithArticle:article name:name];
-    if (self) {
-        _extmetadata = [self parseImageMetadata:dict];
-    }
-    return self;
-}
-
--(NSDictionary *)parseImageMetadata:(NSDictionary *)dict
-{
-    NSArray *imageinfos = dict[@"imageinfo"];
-    if (imageinfos == nil || [imageinfos count] == 0) {
-        return @{};
-    }
-    
-    NSDictionary *imageinfo = imageinfos[0];
-    NSMutableDictionary *outdict = [[NSMutableDictionary alloc] init];
-    for (NSString *key in [imageinfo keyEnumerator]) {
-        outdict[key] = [[MWKImageMetadataItem alloc] initWithDict:imageinfo[key]];
-    }
-    return [NSDictionary dictionaryWithDictionary:outdict];
-}
-
--(NSDictionary *)dataExport
-{
-    NSMutableDictionary *fields = [[NSMutableDictionary alloc] init];
-    for (NSString *key in [self.extmetadata keyEnumerator]) {
-        MWKImageMetadataItem *item = self.extmetadata[key];
-        fields[key] = [item dataExport];
-    }
-    return @{@"imageinfo": @[fields]};
-}
-
-#pragma mark - io methods
-
--(void)save
-{
-    [self.article.dataStore saveImageMetadata:self];
-}
-
--(NSString *)basePath
-{
-    NSString *articlePath = [self.article.dataStore pathForArticle:self.article];
-    NSString *metaPath = [articlePath stringByAppendingPathComponent:@"ImageMetadata"];
-
-    // note: names are validated server-side. scary!
-    return [metaPath stringByAppendingPathComponent:self.name];
-}
-
--(void)remove
-{
-    NSString *path = [self.article.dataStore pathForImageMetadata:self];
-
-    NSError *err = nil;
-    [[NSFileManager defaultManager] removeItemAtPath:path error:&err];
-    
-    if (err) {
-        NSLog(@"err deleting image metadata: %@", err);
-    }
-}
-
-#pragma mark - convenience properties
-
--(NSString *)license
-{
-    MWKImageMetadataItem *item = self.extmetadata[@"License"];
-    return item ? item.value : @"";
-}
-
--(NSString *)licenseShortName
-{
-    MWKImageMetadataItem *item = self.extmetadata[@"LicenseShortName"];
-    return item ? item.value : @"";
-}
-
--(NSString *)licenseUrl
-{
-    MWKImageMetadataItem *item = self.extmetadata[@"LicenseUrl"];
-    return item ? item.value : @"";
-}
-
--(NSString *)artist
-{
-    MWKImageMetadataItem *item = self.extmetadata[@"Artist"];
-    return item ? item.value : @"";
-}
-
--(NSString *)imageDescription
-{
-    MWKImageMetadataItem *item = self.extmetadata[@"ImageDescription"];
-    return item ? item.value : @"";
-}
-
-@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageMetadataItem.h b/MediaWikiKit/MediaWikiKit/MWKImageMetadataItem.h
deleted file mode 100644
index abde451ba1b..00000000000
--- a/MediaWikiKit/MediaWikiKit/MWKImageMetadataItem.h
+++ /dev/null
@@ -1,19 +0,0 @@
-//
-//  MWKImageMetadataItem.h
-//  MediaWikiKit
-//
-//  Created by Brion on 1/16/15.
-//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
-//
-
-#import "MWKDataObject.h"
-
-@interface MWKImageMetadataItem : MWKDataObject
-
-@property (readonly) NSString *value;
-@property (readonly) NSString *source;
-@property (readonly) BOOL hidden;
-
--(instancetype)initWithDict:(NSDictionary *)dict;
-
-@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKImageMetadataItem.m b/MediaWikiKit/MediaWikiKit/MWKImageMetadataItem.m
deleted file mode 100644
index dc8f1878f3a..00000000000
--- a/MediaWikiKit/MediaWikiKit/MWKImageMetadataItem.m
+++ /dev/null
@@ -1,45 +0,0 @@
-//
-//  MWKImageMetadataItem.m
-//  MediaWikiKit
-//
-//  Created by Brion on 1/16/15.
-//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
-//
-
-#import "MWKImageMetadataItem.h"
-
-@implementation MWKImageMetadataItem
-
--(instancetype)initWithDict:(NSDictionary *)dict
-{
-    self = [super init];
-    if (self) {
-        if (dict[@"value"] != nil) {
-            _value = dict[@"value"];
-        } else {
-            _value = @"";
-        }
-
-        if (dict[@"source"] != nil) {
-            _source = dict[@"source"];
-        } else {
-            _source = @"";
-        }
-
-        _hidden = (dict[@"hidden"] != nil);
-    }
-    return self;
-}
-
--(NSDictionary *)dataExport
-{
-    NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
-    dict[@"value"] = self.value;
-    dict[@"source"] = self.source;
-    if (self.hidden) {
-        dict[@"hidden"] = @"";
-    }
-    return [NSDictionary dictionaryWithDictionary:dict];
-}
-
-@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKLicense.h b/MediaWikiKit/MediaWikiKit/MWKLicense.h
new file mode 100644
index 00000000000..04f11070287
--- /dev/null
+++ b/MediaWikiKit/MediaWikiKit/MWKLicense.h
@@ -0,0 +1,27 @@
+//
+//  MWKLicense.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/10/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKDataObject.h"
+
+@interface MWKLicense : MWKDataObject
+
+@property (nonatomic, readonly, copy) NSString *code;
+
+@property (nonatomic, readonly, copy) NSString *shortDescription;
+
+@property (nonatomic, readonly) NSURL *URL;
+
++ (instancetype)licenseWithExportedData:(NSDictionary*)exportedData;
+
+- (instancetype)initWithCode:(NSString*)code
+            shortDescription:(NSString*)shortDescription
+                         URL:(NSURL*)URL;
+
+- (BOOL)isEqualToLicense:(MWKLicense*)other;
+
+@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKLicense.m b/MediaWikiKit/MediaWikiKit/MWKLicense.m
new file mode 100644
index 00000000000..aaa2dcccb2f
--- /dev/null
+++ b/MediaWikiKit/MediaWikiKit/MWKLicense.m
@@ -0,0 +1,69 @@
+//
+//  MWKLicense.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/10/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKLicense.h"
+#import "NSMutableDictionary+WMFMaybeSet.h"
+
+static NSString* const MWKLicenseCodeKey = @"code";
+static NSString* const MWKLicenseShortDescKey = @"shortDescription";
+static NSString* const MWKLicenseURLKey = @"URL";
+
+@implementation MWKLicense
+
+- (instancetype)initWithCode:(NSString*)code
+            shortDescription:(NSString*)shortDescription
+                         URL:(NSURL*)URL
+{
+    self = [super init];
+    if (self) {
+        _code = [code copy];
+        _shortDescription = [shortDescription copy];
+        _URL = URL;
+    }
+    return self;
+}
+
++ (instancetype)licenseWithExportedData:(NSDictionary*)exportedData
+{
+    return [[MWKLicense alloc] initWithCode:exportedData[MWKLicenseCodeKey]
+                           shortDescription:exportedData[MWKLicenseShortDescKey]
+                                        URL:[NSURL URLWithString:exportedData[MWKLicenseURLKey]]];
+}
+
+- (id)dataExport
+{
+    NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithCapacity:3];
+    [dict wmf_maybeSetObject:self.code forKey:MWKLicenseCodeKey];
+    [dict wmf_maybeSetObject:self.shortDescription forKey:MWKLicenseShortDescKey];
+    [dict wmf_maybeSetObject:self.URL.absoluteString forKey:MWKLicenseURLKey];
+    return dict;
+}
+
+- (BOOL)isEqual:(id)object
+{
+    if (self == object) { return YES; }
+    else if ([object isKindOfClass:[MWKLicense class]]) { return [self isEqualToLicense:object]; }
+    else { return NO; }
+}
+
+- (BOOL)isEqualToLicense:(MWKLicense*)other
+{
+    return [self.code isEqualToString:other.code];
+}
+
+- (NSUInteger)hash
+{
+    return [self.code hash];
+}
+
+- (NSString*)description
+{
+    return [NSString stringWithFormat:@"%@ %@ %@", [super description], self.code, self.shortDescription];
+}
+
+@end
diff --git a/MediaWikiKit/MediaWikiKit/MWKSite.h b/MediaWikiKit/MediaWikiKit/MWKSite.h
index f15c157999b..03aca973a79 100644
--- a/MediaWikiKit/MediaWikiKit/MWKSite.h
+++ b/MediaWikiKit/MediaWikiKit/MWKSite.h
@@ -21,4 +21,6 @@
 
 + (MWKSite *)siteWithDomain:(NSString *)domain language:(NSString *)language;
 
+- (BOOL)isEqualToSite:(MWKSite*)other;
+
 @end
diff --git a/MediaWikiKit/MediaWikiKit/MWKSite.m b/MediaWikiKit/MediaWikiKit/MWKSite.m
index 3377879f359..ecc5f5304f2 100644
--- a/MediaWikiKit/MediaWikiKit/MWKSite.m
+++ b/MediaWikiKit/MediaWikiKit/MWKSite.m
@@ -2,6 +2,7 @@
 //  Copyright (c) 2013 Wikimedia Foundation. Provided under MIT-style license; please copy and modify!
 
 #import "MediaWikiKit.h"
+#import "WikipediaAppUtils.h"
 
 @implementation MWKSite
 
@@ -42,12 +43,10 @@ - (BOOL)isEqual:(id)object
 {
     if (object == nil) {
         return NO;
-    } else if (![object isKindOfClass:[MWKSite class]]) {
-        return NO;
+    } else if ([object isKindOfClass:[MWKSite class]]) {
+        return [self isEqualToSite:object];
     } else {
-        MWKSite *other = object;
-        return [self.domain isEqualToString:other.domain] &&
-               [self.language isEqualToString:other.language];
+        return NO;
     }
 }
 
@@ -55,6 +54,9 @@ - (BOOL)isEqual:(id)object
 
 + (MWKSite *)siteWithDomain:(NSString *)domain language:(NSString *)language
 {
+    // if this fails, make the rest of this method thread safe
+    NSParameterAssert([NSThread isMainThread]);
+
     static NSMutableDictionary *cachedSites = nil;
     if (cachedSites == nil) {
         cachedSites = [[NSMutableDictionary alloc] init];
@@ -68,9 +70,15 @@ + (MWKSite *)siteWithDomain:(NSString *)domain language:(NSString *)language
     return site;
 }
 
+- (BOOL)isEqualToSite:(MWKSite*)other
+{
+    return [self.domain isEqualToString:other.domain]
+            && [self.language isEqualToString:other.language];
+}
+
 - (NSUInteger)hash
 {
-    return [self.domain hash] ^ [self.language hash];
+    return [self.domain hash] ^ CircularBitwiseRotation([self.language hash], 1);
 }
 
 @end
diff --git a/MediaWikiKit/MediaWikiKit/MediaWikiKit.h b/MediaWikiKit/MediaWikiKit/MediaWikiKit.h
index 89324e31fd1..2001f21f181 100644
--- a/MediaWikiKit/MediaWikiKit/MediaWikiKit.h
+++ b/MediaWikiKit/MediaWikiKit/MediaWikiKit.h
@@ -39,6 +39,5 @@
 #import "MWKImageList.h"
 
 #import "MWKUserDataStore.h"
-#import "MWKImageMetadataItem.h"
-#import "MWKImageMetadata.h"
+#import "MWKImageInfo.h"
 
diff --git a/MediaWikiKit/MediaWikiKitTests/Info.plist b/MediaWikiKit/MediaWikiKitTests/Info.plist
deleted file mode 100644
index 8aee0b8964b..00000000000
--- a/MediaWikiKit/MediaWikiKitTests/Info.plist
+++ /dev/null
@@ -1,24 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
-<plist version="1.0">
-<dict>
-	<key>CFBundleDevelopmentRegion</key>
-	<string>en</string>
-	<key>CFBundleExecutable</key>
-	<string>$(EXECUTABLE_NAME)</string>
-	<key>CFBundleIdentifier</key>
-	<string>org.wikimedia.$(PRODUCT_NAME:rfc1034identifier)</string>
-	<key>CFBundleInfoDictionaryVersion</key>
-	<string>6.0</string>
-	<key>CFBundleName</key>
-	<string>$(PRODUCT_NAME)</string>
-	<key>CFBundlePackageType</key>
-	<string>BNDL</string>
-	<key>CFBundleShortVersionString</key>
-	<string>1.0</string>
-	<key>CFBundleSignature</key>
-	<string>????</string>
-	<key>CFBundleVersion</key>
-	<string>1</string>
-</dict>
-</plist>
diff --git a/MediaWikiKit/MediaWikiKitTests/MWKImageInfo+MWKImageComparisonTests.m b/MediaWikiKit/MediaWikiKitTests/MWKImageInfo+MWKImageComparisonTests.m
new file mode 100644
index 00000000000..29063661afa
--- /dev/null
+++ b/MediaWikiKit/MediaWikiKitTests/MWKImageInfo+MWKImageComparisonTests.m
@@ -0,0 +1,63 @@
+//
+//  MWKImageInfo+MWKImageComparisonTests.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/12/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKImageInfo+MWKImageComparison.h"
+#import "MWKImage.h"
+#import <XCTest/XCTest.h>
+
+#define HC_SHORTHAND 1
+#import <OCHamcrest/OCHamcrest.h>
+
+@interface MWKImageInfo_MWKImageComparisonTests : XCTestCase
+
+@end
+
+@implementation MWKImageInfo_MWKImageComparisonTests
+
+- (MWKImageInfo*)infoAssociatedWithFilename:(NSString*)filename
+{
+    return [[MWKImageInfo alloc] initWithCanonicalPageTitle:[@"File:" stringByAppendingString:filename]
+                                           canonicalFileURL:nil
+                                           imageDescription:nil
+                                                    license:nil
+                                                filePageURL:nil
+                                                   imageURL:nil
+                                                      owner:nil];
+}
+
+- (MWKImage*)imageAssociatedWithFilename:(NSString*)filename
+{
+    NSString *testFilenameForURL = [filename stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
+    return [[MWKImage alloc] initWithArticle:nil
+                                   sourceURL:[NSString stringWithFormat:@"foo/%@/440px-%@",
+                                                                        testFilenameForURL, testFilenameForURL]];
+}
+
+- (void)testAssociation
+{
+    NSString *testFilename = @"some-file name";
+    MWKImage *image = [self imageAssociatedWithFilename:testFilename];
+    MWKImageInfo *info = [self infoAssociatedWithFilename:testFilename];
+    assertThat(image.infoAssociationValue,
+               is(allOf(equalTo(info.imageAssociationValue),
+                        equalTo([info valueForKeyPath:MWKImageAssociationKeyPath]),
+                        equalTo([image valueForKeyPath:MWKImageAssociationKeyPath]), nil)));
+    XCTAssertTrue([info isAssociatedWithImage:image]);
+    XCTAssertTrue([image isAssociatedWithInfo:info]);
+}
+
+- (void)testDisassociation
+{
+    MWKImage *image = [self imageAssociatedWithFilename:@"some-file name"];
+    MWKImageInfo *info = [self infoAssociatedWithFilename:@"other file name"];
+    assertThat([image valueForKeyPath:MWKImageAssociationKeyPath],
+               isNot([info valueForKeyPath:MWKImageAssociationKeyPath]));
+    XCTAssertFalse([info isAssociatedWithImage:image]);
+}
+
+@end
diff --git a/MediaWikiKit/MediaWikiKitTests/MWKImageListTests.m b/MediaWikiKit/MediaWikiKitTests/MWKImageListTests.m
new file mode 100644
index 00000000000..0427a6d43e0
--- /dev/null
+++ b/MediaWikiKit/MediaWikiKitTests/MWKImageListTests.m
@@ -0,0 +1,63 @@
+//
+//  MWKImageListTests.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/6/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <Foundation/Foundation.h>
+#import <XCTest/XCTest.h>
+#import <BlocksKit/BlocksKit.h>
+
+#define HC_SHORTHAND 1
+#import <OCHamcrest/OCHamcrest.h>
+
+#define MOCKITO_SHORTHAND 1
+#import <OCMockito/OCMockito.h>
+
+#import "MWKArticle.h"
+#import "MWKSection.h"
+#import "MWKSectionList.h"
+#import "MWKDataStore.h"
+#import "MWKImageList.h"
+
+@interface MWKImageListTests : XCTestCase
+@property (nonatomic, strong) NSString* tempDataStoreDir;
+@end
+
+@implementation MWKImageListTests
+
+- (void)setUp
+{
+    [super setUp];
+    _tempDataStoreDir = [NSTemporaryDirectory() stringByAppendingPathComponent:[[NSUUID UUID] UUIDString]];
+}
+
+- (void)tearDown
+{
+    [super tearDown];
+    [[NSFileManager defaultManager] removeItemAtPath:_tempDataStoreDir error:nil];
+}
+
+- (void)testUniqueLargestVariants
+{
+    MWKDataStore *tmpDataStore = [[MWKDataStore alloc] initWithBasePath:self.tempDataStoreDir];
+
+    // create article w/ mock section to prevent crashing due to image import side effects
+    MWKArticle *article = [[MWKArticle alloc] initWithTitle:nil dataStore:tmpDataStore];
+    [article.sections addSection:mock([MWKSection class])];
+
+    NSArray *dummySourceURLs = [@[@"10px-a.jpg", @"10px-b.jpg", @"100px-a.jpg", @"10px-c.jpg"] bk_map:^id(id obj) {
+        return [MWKDataStoreValidImageSitePrefix stringByAppendingString:obj];
+    }];
+
+    [dummySourceURLs bk_each:^(NSString* sourceURL) {
+        [article importImageURL:sourceURL sectionId:0];
+    }];
+
+    assertThat([[article.images uniqueLargestVariants] valueForKeyPath:@"sourceURL.lastPathComponent"],
+               is(equalTo(@[@"100px-a.jpg", @"10px-b.jpg", @"10px-c.jpg"])));
+}
+
+@end
diff --git a/Wikipedia.xcodeproj/project.pbxproj b/Wikipedia.xcodeproj/project.pbxproj
index 6fa17b232bd..379bc488180 100644
--- a/Wikipedia.xcodeproj/project.pbxproj
+++ b/Wikipedia.xcodeproj/project.pbxproj
@@ -178,10 +178,104 @@
 		04F27B7618FE0F2E00EDD838 /* PageHistoryResultPrototypeView.xib in Resources */ = {isa = PBXBuildFile; fileRef = 04F27B7018FE0F2E00EDD838 /* PageHistoryResultPrototypeView.xib */; };
 		04F27B7818FE0F2E00EDD838 /* PageHistoryViewController.m in Sources */ = {isa = PBXBuildFile; fileRef = 04F27B7418FE0F2E00EDD838 /* PageHistoryViewController.m */; };
 		04F39590186CF80100B0D6FC /* TOCViewController.m in Sources */ = {isa = PBXBuildFile; fileRef = 04F3958F186CF80100B0D6FC /* TOCViewController.m */; };
+		08D631F71A69B1AB00D87AD0 /* WMFImageGalleryViewController.m in Sources */ = {isa = PBXBuildFile; fileRef = 08D631F61A69B1AB00D87AD0 /* WMFImageGalleryViewController.m */; };
+		08D631FA1A69B8CD00D87AD0 /* WMFImageGalleryCollectionViewCell.m in Sources */ = {isa = PBXBuildFile; fileRef = 08D631F91A69B8CD00D87AD0 /* WMFImageGalleryCollectionViewCell.m */; };
 		701FF5EE601DEA3FCAB7EFD3 /* libPods.a in Frameworks */ = {isa = PBXBuildFile; fileRef = D82982ED992F47428037BDF2 /* libPods.a */; };
 		954BA118838BF8BA6B01C34A /* libPods-WikipediaUnitTests.a in Frameworks */ = {isa = PBXBuildFile; fileRef = 8CE61C6963F825760822A28A /* libPods-WikipediaUnitTests.a */; };
 		BC42735D1A7C73B300068882 /* NSArray+Predicate.m in Sources */ = {isa = PBXBuildFile; fileRef = 04CBAC7219A9B786009F3D7E /* NSArray+Predicate.m */; };
 		BC42735E1A7C73B300068882 /* NSArray+PredicateTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BC8309C81A7C370B003FC5C7 /* NSArray+PredicateTests.m */; };
+		BC50C37F1A83C784006DC7AF /* WMFNetworkUtilities.m in Sources */ = {isa = PBXBuildFile; fileRef = BC50C37E1A83C784006DC7AF /* WMFNetworkUtilities.m */; };
+		BC50C3831A83C88F006DC7AF /* WMFJoinedPropertyParametersTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BC50C3821A83C88F006DC7AF /* WMFJoinedPropertyParametersTests.m */; };
+		BC50C3841A83C96D006DC7AF /* WMFNetworkUtilities.m in Sources */ = {isa = PBXBuildFile; fileRef = BC50C37E1A83C784006DC7AF /* WMFNetworkUtilities.m */; };
+		BC50C3871A83CBDA006DC7AF /* MWKImageInfoResponseSerializer.m in Sources */ = {isa = PBXBuildFile; fileRef = BC50C3861A83CBDA006DC7AF /* MWKImageInfoResponseSerializer.m */; };
+		BC86B9361A92966B00B4C039 /* AFHTTPRequestOperationManager+UniqueRequests.m in Sources */ = {isa = PBXBuildFile; fileRef = BC86B9351A92966B00B4C039 /* AFHTTPRequestOperationManager+UniqueRequests.m */; };
+		BC86B93D1A929CC500B4C039 /* UICollectionViewFlowLayout+NSCopying.m in Sources */ = {isa = PBXBuildFile; fileRef = BC86B93C1A929CC500B4C039 /* UICollectionViewFlowLayout+NSCopying.m */; };
+		BC86B9401A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.m in Sources */ = {isa = PBXBuildFile; fileRef = BC86B93F1A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.m */; };
+		BC86B9411A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.m in Sources */ = {isa = PBXBuildFile; fileRef = BC86B93F1A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.m */; };
+		BC955BC71A82BEFD000EF9E4 /* MWKImageInfoFetcher.m in Sources */ = {isa = PBXBuildFile; fileRef = BC955BC61A82BEFD000EF9E4 /* MWKImageInfoFetcher.m */; };
+		BC955BCF1A82C2FA000EF9E4 /* AFHTTPRequestOperationManager+WMFConfig.m in Sources */ = {isa = PBXBuildFile; fileRef = BC955BCE1A82C2FA000EF9E4 /* AFHTTPRequestOperationManager+WMFConfig.m */; };
+		BCB58F441A890D9700465627 /* MWKImageInfo+MWKImageComparison.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F431A890D9700465627 /* MWKImageInfo+MWKImageComparison.m */; };
+		BCB58F451A890D9700465627 /* MWKImageInfo+MWKImageComparison.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F431A890D9700465627 /* MWKImageInfo+MWKImageComparison.m */; };
+		BCB58F481A891FDB00465627 /* WebViewController+ImageGalleryPresentation.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F471A891FDB00465627 /* WebViewController+ImageGalleryPresentation.m */; };
+		BCB58F541A894D3E00465627 /* WMFImageGalleryDetailOverlayView.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F531A894D3E00465627 /* WMFImageGalleryDetailOverlayView.m */; };
+		BCB58F591A89747400465627 /* WMFImageGalleryDetailOverlayView.xib in Resources */ = {isa = PBXBuildFile; fileRef = BCB58F581A89747400465627 /* WMFImageGalleryDetailOverlayView.xib */; };
+		BCB58F631A8A9F1000465627 /* MWKLicense.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F621A8A9F1000465627 /* MWKLicense.m */; };
+		BCB58F641A8A9F1000465627 /* MWKLicense.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F621A8A9F1000465627 /* MWKLicense.m */; };
+		BCB58F671A8AA22200465627 /* MWKLicense+ToGlyph.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F661A8AA22200465627 /* MWKLicense+ToGlyph.m */; };
+		BCB58F681A8AA22200465627 /* MWKLicense+ToGlyph.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F661A8AA22200465627 /* MWKLicense+ToGlyph.m */; };
+		BCB58F781A8D081E00465627 /* NSArray+BKIndex.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F771A8D081E00465627 /* NSArray+BKIndex.m */; };
+		BCB58F791A8D081E00465627 /* NSArray+BKIndex.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F771A8D081E00465627 /* NSArray+BKIndex.m */; };
+		BCB58F7C1A8D0C8E00465627 /* NSArray+BKIndexTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F7B1A8D0C8E00465627 /* NSArray+BKIndexTests.m */; };
+		BCB58F7E1A8D1B8400465627 /* MWKImageInfo+MWKImageComparisonTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB58F7D1A8D1B8400465627 /* MWKImageInfo+MWKImageComparisonTests.m */; };
+		BCB669611A83D7B300C7B1FE /* WMFErrorForApiErrorObjectTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669601A83D7B300C7B1FE /* WMFErrorForApiErrorObjectTests.m */; };
+		BCB669631A83DB8F00C7B1FE /* MWKImageInfoResponseSerializer.m in Sources */ = {isa = PBXBuildFile; fileRef = BC50C3861A83CBDA006DC7AF /* MWKImageInfoResponseSerializer.m */; };
+		BCB669731A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669721A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.m */; };
+		BCB669741A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669721A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.m */; };
+		BCB669761A83F59300C7B1FE /* NSMutableDictionary+MaybeSetTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669751A83F59300C7B1FE /* NSMutableDictionary+MaybeSetTests.m */; };
+		BCB669A41A83F6C400C7B1FE /* MWKSite.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669791A83F6C300C7B1FE /* MWKSite.m */; };
+		BCB669A51A83F6C400C7B1FE /* MWKTitle.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6697B1A83F6C300C7B1FE /* MWKTitle.m */; };
+		BCB669A61A83F6C400C7B1FE /* MWKDataObject.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6697E1A83F6C300C7B1FE /* MWKDataObject.m */; };
+		BCB669A71A83F6C400C7B1FE /* MWKSiteDataObject.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669801A83F6C300C7B1FE /* MWKSiteDataObject.m */; };
+		BCB669A81A83F6C400C7B1FE /* MWKUser.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669821A83F6C300C7B1FE /* MWKUser.m */; };
+		BCB669A91A83F6C400C7B1FE /* MWKSection.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669841A83F6C300C7B1FE /* MWKSection.m */; };
+		BCB669AA1A83F6C400C7B1FE /* MWKImage.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669861A83F6C300C7B1FE /* MWKImage.m */; };
+		BCB669AB1A83F6C400C7B1FE /* MWKProtectionStatus.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669881A83F6C300C7B1FE /* MWKProtectionStatus.m */; };
+		BCB669AC1A83F6C400C7B1FE /* MWKSavedPageEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6698A1A83F6C300C7B1FE /* MWKSavedPageEntry.m */; };
+		BCB669AD1A83F6C400C7B1FE /* MWKSavedPageList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6698C1A83F6C300C7B1FE /* MWKSavedPageList.m */; };
+		BCB669AE1A83F6C400C7B1FE /* MWKHistoryEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6698E1A83F6C300C7B1FE /* MWKHistoryEntry.m */; };
+		BCB669AF1A83F6C400C7B1FE /* MWKHistoryList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669901A83F6C300C7B1FE /* MWKHistoryList.m */; };
+		BCB669B01A83F6C400C7B1FE /* MWKRecentSearchEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669921A83F6C300C7B1FE /* MWKRecentSearchEntry.m */; };
+		BCB669B11A83F6C400C7B1FE /* MWKRecentSearchList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669941A83F6C300C7B1FE /* MWKRecentSearchList.m */; };
+		BCB669B21A83F6C400C7B1FE /* MWKImageInfo.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669971A83F6C300C7B1FE /* MWKImageInfo.m */; };
+		BCB669B31A83F6C400C7B1FE /* MWKDataStore.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669991A83F6C300C7B1FE /* MWKDataStore.m */; };
+		BCB669B41A83F6C400C7B1FE /* MWKArticle.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6699B1A83F6C300C7B1FE /* MWKArticle.m */; };
+		BCB669B51A83F6C400C7B1FE /* MWKUserDataStore.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6699D1A83F6C300C7B1FE /* MWKUserDataStore.m */; };
+		BCB669B61A83F6C400C7B1FE /* MWKImageList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6699F1A83F6C300C7B1FE /* MWKImageList.m */; };
+		BCB669B71A83F6C400C7B1FE /* MWKSectionList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669A11A83F6C300C7B1FE /* MWKSectionList.m */; };
+		BCB669D31A83F6D300C7B1FE /* MWKTestCase.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669BB1A83F6D300C7B1FE /* MWKTestCase.m */; };
+		BCB669D41A83F6D300C7B1FE /* MWKArticleStoreTestCase.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669BD1A83F6D300C7B1FE /* MWKArticleStoreTestCase.m */; };
+		BCB669D51A83F6D300C7B1FE /* TemplateIcon2x.png in Resources */ = {isa = PBXBuildFile; fileRef = BCB669BE1A83F6D300C7B1FE /* TemplateIcon2x.png */; };
+		BCB669D61A83F6D300C7B1FE /* organization-anon.json in Resources */ = {isa = PBXBuildFile; fileRef = BCB669BF1A83F6D300C7B1FE /* organization-anon.json */; };
+		BCB669D71A83F6D300C7B1FE /* golden-gate.jpg in Resources */ = {isa = PBXBuildFile; fileRef = BCB669C01A83F6D300C7B1FE /* golden-gate.jpg */; };
+		BCB669D81A83F6D300C7B1FE /* test-notes.txt in Resources */ = {isa = PBXBuildFile; fileRef = BCB669C11A83F6D300C7B1FE /* test-notes.txt */; };
+		BCB669D91A83F6D300C7B1FE /* user-loggedin.json in Resources */ = {isa = PBXBuildFile; fileRef = BCB669C21A83F6D300C7B1FE /* user-loggedin.json */; };
+		BCB669DA1A83F6D300C7B1FE /* user-anon.json in Resources */ = {isa = PBXBuildFile; fileRef = BCB669C31A83F6D300C7B1FE /* user-anon.json */; };
+		BCB669DB1A83F6D300C7B1FE /* protection-obama.json in Resources */ = {isa = PBXBuildFile; fileRef = BCB669C41A83F6D300C7B1FE /* protection-obama.json */; };
+		BCB669DC1A83F6D300C7B1FE /* protection-empty.json in Resources */ = {isa = PBXBuildFile; fileRef = BCB669C51A83F6D300C7B1FE /* protection-empty.json */; };
+		BCB669DD1A83F6D300C7B1FE /* section0.json in Resources */ = {isa = PBXBuildFile; fileRef = BCB669C61A83F6D300C7B1FE /* section0.json */; };
+		BCB669DE1A83F6D300C7B1FE /* section1-end.json in Resources */ = {isa = PBXBuildFile; fileRef = BCB669C71A83F6D300C7B1FE /* section1-end.json */; };
+		BCB669DF1A83F6D300C7B1FE /* MWKSiteTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669C91A83F6D300C7B1FE /* MWKSiteTests.m */; };
+		BCB669E01A83F6D300C7B1FE /* MWKTitleTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669CA1A83F6D300C7B1FE /* MWKTitleTests.m */; };
+		BCB669E11A83F6D300C7B1FE /* MWKUserTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669CB1A83F6D300C7B1FE /* MWKUserTests.m */; };
+		BCB669E21A83F6D300C7B1FE /* MWKProtectionStatusTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669CC1A83F6D300C7B1FE /* MWKProtectionStatusTests.m */; };
+		BCB669E31A83F6D300C7B1FE /* MWKDataStorePathTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669CD1A83F6D300C7B1FE /* MWKDataStorePathTests.m */; };
+		BCB669E41A83F6D300C7B1FE /* MWKDataStoreStorageTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669CE1A83F6D300C7B1FE /* MWKDataStoreStorageTests.m */; };
+		BCB669E51A83F6D300C7B1FE /* MWKImageStorageTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669CF1A83F6D300C7B1FE /* MWKImageStorageTests.m */; };
+		BCB669E61A83F6D300C7B1FE /* MWKHistoryListTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669D01A83F6D300C7B1FE /* MWKHistoryListTests.m */; };
+		BCB669E71A83F71C00C7B1FE /* MWKSite.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669791A83F6C300C7B1FE /* MWKSite.m */; };
+		BCB669E81A83F71C00C7B1FE /* MWKTitle.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6697B1A83F6C300C7B1FE /* MWKTitle.m */; };
+		BCB669E91A83F71C00C7B1FE /* MWKDataObject.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6697E1A83F6C300C7B1FE /* MWKDataObject.m */; };
+		BCB669EA1A83F71C00C7B1FE /* MWKSiteDataObject.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669801A83F6C300C7B1FE /* MWKSiteDataObject.m */; };
+		BCB669EB1A83F71C00C7B1FE /* MWKUser.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669821A83F6C300C7B1FE /* MWKUser.m */; };
+		BCB669EC1A83F71C00C7B1FE /* MWKSection.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669841A83F6C300C7B1FE /* MWKSection.m */; };
+		BCB669ED1A83F71C00C7B1FE /* MWKImage.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669861A83F6C300C7B1FE /* MWKImage.m */; };
+		BCB669EE1A83F71C00C7B1FE /* MWKProtectionStatus.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669881A83F6C300C7B1FE /* MWKProtectionStatus.m */; };
+		BCB669EF1A83F71C00C7B1FE /* MWKSavedPageEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6698A1A83F6C300C7B1FE /* MWKSavedPageEntry.m */; };
+		BCB669F01A83F71C00C7B1FE /* MWKSavedPageList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6698C1A83F6C300C7B1FE /* MWKSavedPageList.m */; };
+		BCB669F11A83F71C00C7B1FE /* MWKHistoryEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6698E1A83F6C300C7B1FE /* MWKHistoryEntry.m */; };
+		BCB669F21A83F71C00C7B1FE /* MWKHistoryList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669901A83F6C300C7B1FE /* MWKHistoryList.m */; };
+		BCB669F31A83F71C00C7B1FE /* MWKRecentSearchEntry.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669921A83F6C300C7B1FE /* MWKRecentSearchEntry.m */; };
+		BCB669F41A83F71C00C7B1FE /* MWKRecentSearchList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669941A83F6C300C7B1FE /* MWKRecentSearchList.m */; };
+		BCB669F51A83F71C00C7B1FE /* MWKImageInfo.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669971A83F6C300C7B1FE /* MWKImageInfo.m */; };
+		BCB669F61A83F71C00C7B1FE /* MWKDataStore.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669991A83F6C300C7B1FE /* MWKDataStore.m */; };
+		BCB669F71A83F71C00C7B1FE /* MWKArticle.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6699B1A83F6C300C7B1FE /* MWKArticle.m */; };
+		BCB669F81A83F71C00C7B1FE /* MWKUserDataStore.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6699D1A83F6C300C7B1FE /* MWKUserDataStore.m */; };
+		BCB669F91A83F71C00C7B1FE /* MWKImageList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB6699F1A83F6C300C7B1FE /* MWKImageList.m */; };
+		BCB669FA1A83F71C00C7B1FE /* MWKSectionList.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669A11A83F6C300C7B1FE /* MWKSectionList.m */; };
+		BCB669FD1A84158200C7B1FE /* CircularBitwiseRotationTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB669FC1A84158200C7B1FE /* CircularBitwiseRotationTests.m */; };
+		BCB66A0C1A85183000C7B1FE /* NSString+WMFHTMLParsing.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB66A0B1A85183000C7B1FE /* NSString+WMFHTMLParsing.m */; };
+		BCB66A0D1A85183000C7B1FE /* NSString+WMFHTMLParsing.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB66A0B1A85183000C7B1FE /* NSString+WMFHTMLParsing.m */; };
+		BCB66A101A851C9B00C7B1FE /* MWKImageListTests.m in Sources */ = {isa = PBXBuildFile; fileRef = BCB66A0F1A851C9B00C7B1FE /* MWKImageListTests.m */; };
 		C46FBA4B1A8530EE00C5730F /* Pods-acknowledgements.plist in Resources */ = {isa = PBXBuildFile; fileRef = C46FBA4A1A8530EE00C5730F /* Pods-acknowledgements.plist */; };
 		C90799BA1A8564C60044E13C /* WMFShareOptionsViewController.m in Sources */ = {isa = PBXBuildFile; fileRef = C90799B91A8564C60044E13C /* WMFShareOptionsViewController.m */; };
 		C9180EC418AED30C006C1DCA /* WikipediaAppUtils.m in Sources */ = {isa = PBXBuildFile; fileRef = C9180EC318AED30C006C1DCA /* WikipediaAppUtils.m */; };
@@ -204,7 +298,6 @@
 		D46CD8C518A1AC4F0042959E /* Localizable.strings in Resources */ = {isa = PBXBuildFile; fileRef = D46CD8C218A1AC4F0042959E /* Localizable.strings */; };
 		D47BF5D4197870390067C3BC /* SavedPagesFunnel.m in Sources */ = {isa = PBXBuildFile; fileRef = D47BF5D3197870390067C3BC /* SavedPagesFunnel.m */; };
 		D47FEE2019C8CB0000B998C8 /* (null) in Resources */ = {isa = PBXBuildFile; };
-		D497FCFB1A080810004A36A5 /* libMediaWikiKit.a in Frameworks */ = {isa = PBXBuildFile; fileRef = D497FCF51A0807EE004A36A5 /* libMediaWikiKit.a */; };
 		D4991439181D51DE00E6073C /* Foundation.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = D4991438181D51DE00E6073C /* Foundation.framework */; };
 		D499143B181D51DE00E6073C /* CoreGraphics.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = D499143A181D51DE00E6073C /* CoreGraphics.framework */; };
 		D499143D181D51DE00E6073C /* UIKit.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = D499143C181D51DE00E6073C /* UIKit.framework */; };
@@ -231,27 +324,6 @@
 /* End PBXBuildFile section */
 
 /* Begin PBXContainerItemProxy section */
-		D497FCF41A0807EE004A36A5 /* PBXContainerItemProxy */ = {
-			isa = PBXContainerItemProxy;
-			containerPortal = D497FCEF1A0807ED004A36A5 /* MediaWikiKit.xcodeproj */;
-			proxyType = 2;
-			remoteGlobalIDString = D48405A219E473E6006F4139;
-			remoteInfo = MediaWikiKit;
-		};
-		D497FCF61A0807EE004A36A5 /* PBXContainerItemProxy */ = {
-			isa = PBXContainerItemProxy;
-			containerPortal = D497FCEF1A0807ED004A36A5 /* MediaWikiKit.xcodeproj */;
-			proxyType = 2;
-			remoteGlobalIDString = D48405AD19E473E7006F4139;
-			remoteInfo = MediaWikiKitTests;
-		};
-		D497FCF91A080800004A36A5 /* PBXContainerItemProxy */ = {
-			isa = PBXContainerItemProxy;
-			containerPortal = D497FCEF1A0807ED004A36A5 /* MediaWikiKit.xcodeproj */;
-			proxyType = 1;
-			remoteGlobalIDString = D48405A119E473E6006F4139;
-			remoteInfo = MediaWikiKit;
-		};
 		D4E6D9151A5C65FA004916C1 /* PBXContainerItemProxy */ = {
 			isa = PBXContainerItemProxy;
 			containerPortal = D4F478441A48CD8500D8043C /* OldDataSchema.xcodeproj */;
@@ -590,12 +662,118 @@
 		04F27B7418FE0F2E00EDD838 /* PageHistoryViewController.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; lineEnding = 0; path = PageHistoryViewController.m; sourceTree = "<group>"; xcLanguageSpecificationIdentifier = xcode.lang.objc; };
 		04F3958E186CF80100B0D6FC /* TOCViewController.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = TOCViewController.h; sourceTree = "<group>"; };
 		04F3958F186CF80100B0D6FC /* TOCViewController.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = TOCViewController.m; sourceTree = "<group>"; };
+		08D631F51A69B1AB00D87AD0 /* WMFImageGalleryViewController.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = WMFImageGalleryViewController.h; path = "Image Gallery/WMFImageGalleryViewController.h"; sourceTree = "<group>"; };
+		08D631F61A69B1AB00D87AD0 /* WMFImageGalleryViewController.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = WMFImageGalleryViewController.m; path = "Image Gallery/WMFImageGalleryViewController.m"; sourceTree = "<group>"; };
+		08D631F81A69B8CD00D87AD0 /* WMFImageGalleryCollectionViewCell.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = WMFImageGalleryCollectionViewCell.h; path = "Image Gallery/WMFImageGalleryCollectionViewCell.h"; sourceTree = "<group>"; };
+		08D631F91A69B8CD00D87AD0 /* WMFImageGalleryCollectionViewCell.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = WMFImageGalleryCollectionViewCell.m; path = "Image Gallery/WMFImageGalleryCollectionViewCell.m"; sourceTree = "<group>"; };
 		17A2F22335C5256576CEDBDD /* Pods-WikipediaUnitTests.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-WikipediaUnitTests.release.xcconfig"; path = "Pods/Target Support Files/Pods-WikipediaUnitTests/Pods-WikipediaUnitTests.release.xcconfig"; sourceTree = "<group>"; };
 		357504E50DA104E39C6ACFEB /* Pods.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = Pods.release.xcconfig; path = "Pods/Target Support Files/Pods/Pods.release.xcconfig"; sourceTree = "<group>"; };
 		8CE61C6963F825760822A28A /* libPods-WikipediaUnitTests.a */ = {isa = PBXFileReference; explicitFileType = archive.ar; includeInIndex = 0; path = "libPods-WikipediaUnitTests.a"; sourceTree = BUILT_PRODUCTS_DIR; };
 		BC4273521A7C736800068882 /* WikipediaUnitTests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = WikipediaUnitTests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };
+		BC50C37D1A83C784006DC7AF /* WMFNetworkUtilities.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = WMFNetworkUtilities.h; sourceTree = "<group>"; };
+		BC50C37E1A83C784006DC7AF /* WMFNetworkUtilities.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = WMFNetworkUtilities.m; sourceTree = "<group>"; };
+		BC50C3821A83C88F006DC7AF /* WMFJoinedPropertyParametersTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = WMFJoinedPropertyParametersTests.m; sourceTree = "<group>"; };
+		BC50C3851A83CBDA006DC7AF /* MWKImageInfoResponseSerializer.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = MWKImageInfoResponseSerializer.h; path = Serializers/MWKImageInfoResponseSerializer.h; sourceTree = "<group>"; };
+		BC50C3861A83CBDA006DC7AF /* MWKImageInfoResponseSerializer.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = MWKImageInfoResponseSerializer.m; path = Serializers/MWKImageInfoResponseSerializer.m; sourceTree = "<group>"; };
 		BC8309961A7BF935003FC5C7 /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
 		BC8309C81A7C370B003FC5C7 /* NSArray+PredicateTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = "NSArray+PredicateTests.m"; path = "Utilities/NSArray+PredicateTests.m"; sourceTree = "<group>"; };
+		BC86B9341A92966B00B4C039 /* AFHTTPRequestOperationManager+UniqueRequests.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "AFHTTPRequestOperationManager+UniqueRequests.h"; sourceTree = "<group>"; };
+		BC86B9351A92966B00B4C039 /* AFHTTPRequestOperationManager+UniqueRequests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "AFHTTPRequestOperationManager+UniqueRequests.m"; sourceTree = "<group>"; };
+		BC86B93B1A929CC500B4C039 /* UICollectionViewFlowLayout+NSCopying.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "UICollectionViewFlowLayout+NSCopying.h"; sourceTree = "<group>"; };
+		BC86B93C1A929CC500B4C039 /* UICollectionViewFlowLayout+NSCopying.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "UICollectionViewFlowLayout+NSCopying.m"; sourceTree = "<group>"; };
+		BC86B93E1A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "UICollectionViewFlowLayout+WMFItemSizeThatFits.h"; sourceTree = "<group>"; };
+		BC86B93F1A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "UICollectionViewFlowLayout+WMFItemSizeThatFits.m"; sourceTree = "<group>"; };
+		BC955BC51A82BEFD000EF9E4 /* MWKImageInfoFetcher.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKImageInfoFetcher.h; sourceTree = "<group>"; };
+		BC955BC61A82BEFD000EF9E4 /* MWKImageInfoFetcher.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageInfoFetcher.m; sourceTree = "<group>"; };
+		BC955BCD1A82C2FA000EF9E4 /* AFHTTPRequestOperationManager+WMFConfig.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = "AFHTTPRequestOperationManager+WMFConfig.h"; path = "Queues/AFHTTPRequestOperationManager+WMFConfig.h"; sourceTree = "<group>"; };
+		BC955BCE1A82C2FA000EF9E4 /* AFHTTPRequestOperationManager+WMFConfig.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = "AFHTTPRequestOperationManager+WMFConfig.m"; path = "Queues/AFHTTPRequestOperationManager+WMFConfig.m"; sourceTree = "<group>"; };
+		BCB58F421A890D9700465627 /* MWKImageInfo+MWKImageComparison.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "MWKImageInfo+MWKImageComparison.h"; sourceTree = "<group>"; };
+		BCB58F431A890D9700465627 /* MWKImageInfo+MWKImageComparison.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "MWKImageInfo+MWKImageComparison.m"; sourceTree = "<group>"; };
+		BCB58F461A891FDB00465627 /* WebViewController+ImageGalleryPresentation.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "WebViewController+ImageGalleryPresentation.h"; sourceTree = "<group>"; };
+		BCB58F471A891FDB00465627 /* WebViewController+ImageGalleryPresentation.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "WebViewController+ImageGalleryPresentation.m"; sourceTree = "<group>"; };
+		BCB58F491A89202F00465627 /* WebViewController_Private.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = WebViewController_Private.h; sourceTree = "<group>"; };
+		BCB58F521A894D3E00465627 /* WMFImageGalleryDetailOverlayView.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = WMFImageGalleryDetailOverlayView.h; path = "Image Gallery/WMFImageGalleryDetailOverlayView.h"; sourceTree = "<group>"; };
+		BCB58F531A894D3E00465627 /* WMFImageGalleryDetailOverlayView.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = WMFImageGalleryDetailOverlayView.m; path = "Image Gallery/WMFImageGalleryDetailOverlayView.m"; sourceTree = "<group>"; };
+		BCB58F581A89747400465627 /* WMFImageGalleryDetailOverlayView.xib */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = file.xib; name = WMFImageGalleryDetailOverlayView.xib; path = "Image Gallery/WMFImageGalleryDetailOverlayView.xib"; sourceTree = "<group>"; };
+		BCB58F611A8A9F1000465627 /* MWKLicense.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKLicense.h; sourceTree = "<group>"; };
+		BCB58F621A8A9F1000465627 /* MWKLicense.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKLicense.m; sourceTree = "<group>"; };
+		BCB58F651A8AA22200465627 /* MWKLicense+ToGlyph.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "MWKLicense+ToGlyph.h"; sourceTree = "<group>"; };
+		BCB58F661A8AA22200465627 /* MWKLicense+ToGlyph.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "MWKLicense+ToGlyph.m"; sourceTree = "<group>"; };
+		BCB58F761A8D081E00465627 /* NSArray+BKIndex.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "NSArray+BKIndex.h"; sourceTree = "<group>"; };
+		BCB58F771A8D081E00465627 /* NSArray+BKIndex.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "NSArray+BKIndex.m"; sourceTree = "<group>"; };
+		BCB58F7B1A8D0C8E00465627 /* NSArray+BKIndexTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "NSArray+BKIndexTests.m"; sourceTree = "<group>"; };
+		BCB58F7D1A8D1B8400465627 /* MWKImageInfo+MWKImageComparisonTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "MWKImageInfo+MWKImageComparisonTests.m"; sourceTree = "<group>"; };
+		BCB669601A83D7B300C7B1FE /* WMFErrorForApiErrorObjectTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = WMFErrorForApiErrorObjectTests.m; sourceTree = "<group>"; };
+		BCB669711A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "NSMutableDictionary+WMFMaybeSet.h"; sourceTree = "<group>"; };
+		BCB669721A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "NSMutableDictionary+WMFMaybeSet.m"; sourceTree = "<group>"; };
+		BCB669751A83F59300C7B1FE /* NSMutableDictionary+MaybeSetTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "NSMutableDictionary+MaybeSetTests.m"; sourceTree = "<group>"; };
+		BCB669771A83F6C300C7B1FE /* MediaWikiKit.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MediaWikiKit.h; sourceTree = "<group>"; };
+		BCB669781A83F6C300C7B1FE /* MWKSite.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSite.h; sourceTree = "<group>"; };
+		BCB669791A83F6C300C7B1FE /* MWKSite.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSite.m; sourceTree = "<group>"; };
+		BCB6697A1A83F6C300C7B1FE /* MWKTitle.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKTitle.h; sourceTree = "<group>"; };
+		BCB6697B1A83F6C300C7B1FE /* MWKTitle.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKTitle.m; sourceTree = "<group>"; };
+		BCB6697D1A83F6C300C7B1FE /* MWKDataObject.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKDataObject.h; sourceTree = "<group>"; };
+		BCB6697E1A83F6C300C7B1FE /* MWKDataObject.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKDataObject.m; sourceTree = "<group>"; };
+		BCB6697F1A83F6C300C7B1FE /* MWKSiteDataObject.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSiteDataObject.h; sourceTree = "<group>"; };
+		BCB669801A83F6C300C7B1FE /* MWKSiteDataObject.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSiteDataObject.m; sourceTree = "<group>"; };
+		BCB669811A83F6C300C7B1FE /* MWKUser.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKUser.h; sourceTree = "<group>"; };
+		BCB669821A83F6C300C7B1FE /* MWKUser.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKUser.m; sourceTree = "<group>"; };
+		BCB669831A83F6C300C7B1FE /* MWKSection.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSection.h; sourceTree = "<group>"; };
+		BCB669841A83F6C300C7B1FE /* MWKSection.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSection.m; sourceTree = "<group>"; };
+		BCB669851A83F6C300C7B1FE /* MWKImage.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKImage.h; sourceTree = "<group>"; };
+		BCB669861A83F6C300C7B1FE /* MWKImage.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImage.m; sourceTree = "<group>"; };
+		BCB669871A83F6C300C7B1FE /* MWKProtectionStatus.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKProtectionStatus.h; sourceTree = "<group>"; };
+		BCB669881A83F6C300C7B1FE /* MWKProtectionStatus.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKProtectionStatus.m; sourceTree = "<group>"; };
+		BCB669891A83F6C300C7B1FE /* MWKSavedPageEntry.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSavedPageEntry.h; sourceTree = "<group>"; };
+		BCB6698A1A83F6C300C7B1FE /* MWKSavedPageEntry.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSavedPageEntry.m; sourceTree = "<group>"; };
+		BCB6698B1A83F6C300C7B1FE /* MWKSavedPageList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSavedPageList.h; sourceTree = "<group>"; };
+		BCB6698C1A83F6C300C7B1FE /* MWKSavedPageList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSavedPageList.m; sourceTree = "<group>"; };
+		BCB6698D1A83F6C300C7B1FE /* MWKHistoryEntry.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKHistoryEntry.h; sourceTree = "<group>"; };
+		BCB6698E1A83F6C300C7B1FE /* MWKHistoryEntry.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKHistoryEntry.m; sourceTree = "<group>"; };
+		BCB6698F1A83F6C300C7B1FE /* MWKHistoryList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKHistoryList.h; sourceTree = "<group>"; };
+		BCB669901A83F6C300C7B1FE /* MWKHistoryList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKHistoryList.m; sourceTree = "<group>"; };
+		BCB669911A83F6C300C7B1FE /* MWKRecentSearchEntry.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKRecentSearchEntry.h; sourceTree = "<group>"; };
+		BCB669921A83F6C300C7B1FE /* MWKRecentSearchEntry.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKRecentSearchEntry.m; sourceTree = "<group>"; };
+		BCB669931A83F6C300C7B1FE /* MWKRecentSearchList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKRecentSearchList.h; sourceTree = "<group>"; };
+		BCB669941A83F6C300C7B1FE /* MWKRecentSearchList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKRecentSearchList.m; sourceTree = "<group>"; };
+		BCB669961A83F6C300C7B1FE /* MWKImageInfo.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKImageInfo.h; sourceTree = "<group>"; };
+		BCB669971A83F6C300C7B1FE /* MWKImageInfo.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageInfo.m; sourceTree = "<group>"; };
+		BCB669981A83F6C300C7B1FE /* MWKDataStore.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKDataStore.h; sourceTree = "<group>"; };
+		BCB669991A83F6C300C7B1FE /* MWKDataStore.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKDataStore.m; sourceTree = "<group>"; };
+		BCB6699A1A83F6C300C7B1FE /* MWKArticle.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKArticle.h; sourceTree = "<group>"; };
+		BCB6699B1A83F6C300C7B1FE /* MWKArticle.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKArticle.m; sourceTree = "<group>"; };
+		BCB6699C1A83F6C300C7B1FE /* MWKUserDataStore.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKUserDataStore.h; sourceTree = "<group>"; };
+		BCB6699D1A83F6C300C7B1FE /* MWKUserDataStore.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKUserDataStore.m; sourceTree = "<group>"; };
+		BCB6699E1A83F6C300C7B1FE /* MWKImageList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKImageList.h; sourceTree = "<group>"; };
+		BCB6699F1A83F6C300C7B1FE /* MWKImageList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageList.m; sourceTree = "<group>"; };
+		BCB669A01A83F6C300C7B1FE /* MWKSectionList.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKSectionList.h; sourceTree = "<group>"; };
+		BCB669A11A83F6C300C7B1FE /* MWKSectionList.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSectionList.m; sourceTree = "<group>"; };
+		BCB669BA1A83F6D300C7B1FE /* MWKTestCase.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKTestCase.h; sourceTree = "<group>"; };
+		BCB669BB1A83F6D300C7B1FE /* MWKTestCase.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKTestCase.m; sourceTree = "<group>"; };
+		BCB669BC1A83F6D300C7B1FE /* MWKArticleStoreTestCase.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = MWKArticleStoreTestCase.h; sourceTree = "<group>"; };
+		BCB669BD1A83F6D300C7B1FE /* MWKArticleStoreTestCase.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKArticleStoreTestCase.m; sourceTree = "<group>"; };
+		BCB669BE1A83F6D300C7B1FE /* TemplateIcon2x.png */ = {isa = PBXFileReference; lastKnownFileType = image.png; path = TemplateIcon2x.png; sourceTree = "<group>"; };
+		BCB669BF1A83F6D300C7B1FE /* organization-anon.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "organization-anon.json"; sourceTree = "<group>"; };
+		BCB669C01A83F6D300C7B1FE /* golden-gate.jpg */ = {isa = PBXFileReference; lastKnownFileType = image.jpeg; path = "golden-gate.jpg"; sourceTree = "<group>"; };
+		BCB669C11A83F6D300C7B1FE /* test-notes.txt */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text; path = "test-notes.txt"; sourceTree = "<group>"; };
+		BCB669C21A83F6D300C7B1FE /* user-loggedin.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "user-loggedin.json"; sourceTree = "<group>"; };
+		BCB669C31A83F6D300C7B1FE /* user-anon.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "user-anon.json"; sourceTree = "<group>"; };
+		BCB669C41A83F6D300C7B1FE /* protection-obama.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "protection-obama.json"; sourceTree = "<group>"; };
+		BCB669C51A83F6D300C7B1FE /* protection-empty.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "protection-empty.json"; sourceTree = "<group>"; };
+		BCB669C61A83F6D300C7B1FE /* section0.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = section0.json; sourceTree = "<group>"; };
+		BCB669C71A83F6D300C7B1FE /* section1-end.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = "section1-end.json"; sourceTree = "<group>"; };
+		BCB669C91A83F6D300C7B1FE /* MWKSiteTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKSiteTests.m; sourceTree = "<group>"; };
+		BCB669CA1A83F6D300C7B1FE /* MWKTitleTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKTitleTests.m; sourceTree = "<group>"; };
+		BCB669CB1A83F6D300C7B1FE /* MWKUserTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKUserTests.m; sourceTree = "<group>"; };
+		BCB669CC1A83F6D300C7B1FE /* MWKProtectionStatusTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKProtectionStatusTests.m; sourceTree = "<group>"; };
+		BCB669CD1A83F6D300C7B1FE /* MWKDataStorePathTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKDataStorePathTests.m; sourceTree = "<group>"; };
+		BCB669CE1A83F6D300C7B1FE /* MWKDataStoreStorageTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKDataStoreStorageTests.m; sourceTree = "<group>"; };
+		BCB669CF1A83F6D300C7B1FE /* MWKImageStorageTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageStorageTests.m; sourceTree = "<group>"; };
+		BCB669D01A83F6D300C7B1FE /* MWKHistoryListTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKHistoryListTests.m; sourceTree = "<group>"; };
+		BCB669FC1A84158200C7B1FE /* CircularBitwiseRotationTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = CircularBitwiseRotationTests.m; sourceTree = "<group>"; };
+		BCB66A0A1A85183000C7B1FE /* NSString+WMFHTMLParsing.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "NSString+WMFHTMLParsing.h"; sourceTree = "<group>"; };
+		BCB66A0B1A85183000C7B1FE /* NSString+WMFHTMLParsing.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = "NSString+WMFHTMLParsing.m"; sourceTree = "<group>"; };
+		BCB66A0F1A851C9B00C7B1FE /* MWKImageListTests.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = MWKImageListTests.m; sourceTree = "<group>"; };
 		C46FBA4A1A8530EE00C5730F /* Pods-acknowledgements.plist */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.plist.xml; name = "Pods-acknowledgements.plist"; path = "../../../Pods/Target Support Files/Pods/Pods-acknowledgements.plist"; sourceTree = "<group>"; };
 		C90799B81A8564C60044E13C /* WMFShareOptionsViewController.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = WMFShareOptionsViewController.h; path = ShareCard/WMFShareOptionsViewController.h; sourceTree = "<group>"; };
 		C90799B91A8564C60044E13C /* WMFShareOptionsViewController.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = WMFShareOptionsViewController.m; path = ShareCard/WMFShareOptionsViewController.m; sourceTree = "<group>"; };
@@ -748,7 +926,6 @@
 		D47FEE2619C8CB6B00B998C8 /* cs */ = {isa = PBXFileReference; lastKnownFileType = text.plist.strings; name = cs; path = cs.lproj/Main_iPhone.strings; sourceTree = "<group>"; };
 		D47FEE2719C8CBB400B998C8 /* ta */ = {isa = PBXFileReference; lastKnownFileType = text.plist.strings; name = ta; path = ta.lproj/Main_iPhone.strings; sourceTree = "<group>"; };
 		D47FEE2819C8CC2600B998C8 /* pt-BR */ = {isa = PBXFileReference; lastKnownFileType = text.plist.strings; name = "pt-BR"; path = "pt-BR.lproj/Localizable.strings"; sourceTree = "<group>"; };
-		D497FCEF1A0807ED004A36A5 /* MediaWikiKit.xcodeproj */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.pb-project"; name = MediaWikiKit.xcodeproj; path = MediaWikiKit/MediaWikiKit.xcodeproj; sourceTree = "<group>"; };
 		D4991435181D51DE00E6073C /* Wikipedia.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = Wikipedia.app; sourceTree = BUILT_PRODUCTS_DIR; };
 		D4991438181D51DE00E6073C /* Foundation.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Foundation.framework; path = System/Library/Frameworks/Foundation.framework; sourceTree = SDKROOT; };
 		D499143A181D51DE00E6073C /* CoreGraphics.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = CoreGraphics.framework; path = System/Library/Frameworks/CoreGraphics.framework; sourceTree = SDKROOT; };
@@ -867,7 +1044,6 @@
 			files = (
 				D4E6D9121A5C65F9004916C1 /* CoreData.framework in Frameworks */,
 				D4F478741A48D1B100D8043C /* libOldDataSchema.a in Frameworks */,
-				D497FCFB1A080810004A36A5 /* libMediaWikiKit.a in Frameworks */,
 				D4E8A8A919085CEA00DA4765 /* libsqlite3.dylib in Frameworks */,
 				04D34DB21863D39000610A87 /* libxml2.dylib in Frameworks */,
 				D499143B181D51DE00E6073C /* CoreGraphics.framework in Frameworks */,
@@ -1075,7 +1251,10 @@
 			isa = PBXGroup;
 			children = (
 				0447862D185145090050563B /* WebViewController.h */,
+				BCB58F491A89202F00465627 /* WebViewController_Private.h */,
 				0447862E185145090050563B /* WebViewController.m */,
+				BCB58F461A891FDB00465627 /* WebViewController+ImageGalleryPresentation.h */,
+				BCB58F471A891FDB00465627 /* WebViewController+ImageGalleryPresentation.m */,
 			);
 			path = WebView;
 			sourceTree = "<group>";
@@ -1195,8 +1374,13 @@
 		0487041519F824D700B7D307 /* Networking */ = {
 			isa = PBXGroup;
 			children = (
+				BCB669621A83DB8100C7B1FE /* Serializers */,
 				0487045619F8262600B7D307 /* Fetchers */,
 				0487043F19F824D700B7D307 /* Queues */,
+				BC955BCD1A82C2FA000EF9E4 /* AFHTTPRequestOperationManager+WMFConfig.h */,
+				BC955BCE1A82C2FA000EF9E4 /* AFHTTPRequestOperationManager+WMFConfig.m */,
+				BC50C37D1A83C784006DC7AF /* WMFNetworkUtilities.h */,
+				BC50C37E1A83C784006DC7AF /* WMFNetworkUtilities.m */,
 			);
 			path = Networking;
 			sourceTree = "<group>";
@@ -1252,6 +1436,8 @@
 				0487047B19F8262600B7D307 /* WikiTextSectionFetcher.m */,
 				0487047C19F8262600B7D307 /* WikiTextSectionUploader.h */,
 				0487047D19F8262600B7D307 /* WikiTextSectionUploader.m */,
+				BC955BC51A82BEFD000EF9E4 /* MWKImageInfoFetcher.h */,
+				BC955BC61A82BEFD000EF9E4 /* MWKImageInfoFetcher.m */,
 			);
 			path = Fetchers;
 			sourceTree = "<group>";
@@ -1388,6 +1574,7 @@
 				D401C2B71A659DD600D4D127 /* DataMigration */,
 				041C55CF1950B260006CE0EF /* EditSummary */,
 				0447861F185145090050563B /* History */,
+				08D631F11A69B17F00D87AD0 /* Image Gallery */,
 				041A3B5718E11ED90079FF1C /* Languages */,
 				0449E63218A9844000D51524 /* Login */,
 				04E106301A3560030046DC27 /* LeadImage */,
@@ -1414,6 +1601,8 @@
 		04C43AB7183442FC006C643B /* Categories */ = {
 			isa = PBXGroup;
 			children = (
+				BCB669711A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.h */,
+				BCB669721A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.m */,
 				043F18DA18D9691D00D8489A /* TopActionSheet */,
 				04CBAC7119A9B786009F3D7E /* NSArray+Predicate.h */,
 				04CBAC7219A9B786009F3D7E /* NSArray+Predicate.m */,
@@ -1490,6 +1679,18 @@
 				04BA489F1A80062E00CB5CAE /* UIFont+WMFStyle.h */,
 				04BA48A01A80062E00CB5CAE /* UIFont+WMFStyle.m */,
 				04D149D818877343006B4104 /* Alerts */,
+				BCB66A0A1A85183000C7B1FE /* NSString+WMFHTMLParsing.h */,
+				BCB66A0B1A85183000C7B1FE /* NSString+WMFHTMLParsing.m */,
+				BCB58F651A8AA22200465627 /* MWKLicense+ToGlyph.h */,
+				BCB58F661A8AA22200465627 /* MWKLicense+ToGlyph.m */,
+				BCB58F761A8D081E00465627 /* NSArray+BKIndex.h */,
+				BCB58F771A8D081E00465627 /* NSArray+BKIndex.m */,
+				BC86B9341A92966B00B4C039 /* AFHTTPRequestOperationManager+UniqueRequests.h */,
+				BC86B9351A92966B00B4C039 /* AFHTTPRequestOperationManager+UniqueRequests.m */,
+				BC86B93B1A929CC500B4C039 /* UICollectionViewFlowLayout+NSCopying.h */,
+				BC86B93C1A929CC500B4C039 /* UICollectionViewFlowLayout+NSCopying.m */,
+				BC86B93E1A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.h */,
+				BC86B93F1A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.m */,
 			);
 			path = Categories;
 			sourceTree = "<group>";
@@ -1620,11 +1821,27 @@
 			path = TableOfContents;
 			sourceTree = "<group>";
 		};
+		08D631F11A69B17F00D87AD0 /* Image Gallery */ = {
+			isa = PBXGroup;
+			children = (
+				08D631F51A69B1AB00D87AD0 /* WMFImageGalleryViewController.h */,
+				08D631F61A69B1AB00D87AD0 /* WMFImageGalleryViewController.m */,
+				BC86B94C1A9391E200B4C039 /* Views */,
+			);
+			name = "Image Gallery";
+			sourceTree = "<group>";
+		};
 		BC8309941A7BF935003FC5C7 /* WikipediaUnitTests */ = {
 			isa = PBXGroup;
 			children = (
+				BCB669D11A83F6D300C7B1FE /* MediaWikiKitTests */,
 				BC8309951A7BF935003FC5C7 /* Supporting Files */,
 				BC8309C81A7C370B003FC5C7 /* NSArray+PredicateTests.m */,
+				BC50C3821A83C88F006DC7AF /* WMFJoinedPropertyParametersTests.m */,
+				BCB669601A83D7B300C7B1FE /* WMFErrorForApiErrorObjectTests.m */,
+				BCB669751A83F59300C7B1FE /* NSMutableDictionary+MaybeSetTests.m */,
+				BCB669FC1A84158200C7B1FE /* CircularBitwiseRotationTests.m */,
+				BCB58F7B1A8D0C8E00465627 /* NSArray+BKIndexTests.m */,
 			);
 			path = WikipediaUnitTests;
 			sourceTree = "<group>";
@@ -1637,6 +1854,152 @@
 			name = "Supporting Files";
 			sourceTree = "<group>";
 		};
+		BC86B94C1A9391E200B4C039 /* Views */ = {
+			isa = PBXGroup;
+			children = (
+				08D631F81A69B8CD00D87AD0 /* WMFImageGalleryCollectionViewCell.h */,
+				08D631F91A69B8CD00D87AD0 /* WMFImageGalleryCollectionViewCell.m */,
+				BCB58F521A894D3E00465627 /* WMFImageGalleryDetailOverlayView.h */,
+				BCB58F531A894D3E00465627 /* WMFImageGalleryDetailOverlayView.m */,
+				BCB58F581A89747400465627 /* WMFImageGalleryDetailOverlayView.xib */,
+			);
+			name = Views;
+			sourceTree = "<group>";
+		};
+		BCB58F401A890D8200465627 /* Categories */ = {
+			isa = PBXGroup;
+			children = (
+				BCB58F421A890D9700465627 /* MWKImageInfo+MWKImageComparison.h */,
+				BCB58F431A890D9700465627 /* MWKImageInfo+MWKImageComparison.m */,
+			);
+			name = Categories;
+			sourceTree = "<group>";
+		};
+		BCB669621A83DB8100C7B1FE /* Serializers */ = {
+			isa = PBXGroup;
+			children = (
+				BC50C3851A83CBDA006DC7AF /* MWKImageInfoResponseSerializer.h */,
+				BC50C3861A83CBDA006DC7AF /* MWKImageInfoResponseSerializer.m */,
+			);
+			name = Serializers;
+			sourceTree = "<group>";
+		};
+		BCB6697C1A83F6C300C7B1FE /* Metadata classes */ = {
+			isa = PBXGroup;
+			children = (
+				BCB669781A83F6C300C7B1FE /* MWKSite.h */,
+				BCB669791A83F6C300C7B1FE /* MWKSite.m */,
+				BCB6697A1A83F6C300C7B1FE /* MWKTitle.h */,
+				BCB6697B1A83F6C300C7B1FE /* MWKTitle.m */,
+			);
+			name = "Metadata classes";
+			sourceTree = "<group>";
+		};
+		BCB669951A83F6C300C7B1FE /* Data classes */ = {
+			isa = PBXGroup;
+			children = (
+				BCB6697D1A83F6C300C7B1FE /* MWKDataObject.h */,
+				BCB6697E1A83F6C300C7B1FE /* MWKDataObject.m */,
+				BCB6697F1A83F6C300C7B1FE /* MWKSiteDataObject.h */,
+				BCB669801A83F6C300C7B1FE /* MWKSiteDataObject.m */,
+				BCB669811A83F6C300C7B1FE /* MWKUser.h */,
+				BCB669821A83F6C300C7B1FE /* MWKUser.m */,
+				BCB669831A83F6C300C7B1FE /* MWKSection.h */,
+				BCB669841A83F6C300C7B1FE /* MWKSection.m */,
+				BCB669851A83F6C300C7B1FE /* MWKImage.h */,
+				BCB669861A83F6C300C7B1FE /* MWKImage.m */,
+				BCB669871A83F6C300C7B1FE /* MWKProtectionStatus.h */,
+				BCB669881A83F6C300C7B1FE /* MWKProtectionStatus.m */,
+				BCB669891A83F6C300C7B1FE /* MWKSavedPageEntry.h */,
+				BCB6698A1A83F6C300C7B1FE /* MWKSavedPageEntry.m */,
+				BCB6698B1A83F6C300C7B1FE /* MWKSavedPageList.h */,
+				BCB6698C1A83F6C300C7B1FE /* MWKSavedPageList.m */,
+				BCB6698D1A83F6C300C7B1FE /* MWKHistoryEntry.h */,
+				BCB6698E1A83F6C300C7B1FE /* MWKHistoryEntry.m */,
+				BCB6698F1A83F6C300C7B1FE /* MWKHistoryList.h */,
+				BCB669901A83F6C300C7B1FE /* MWKHistoryList.m */,
+				BCB669911A83F6C300C7B1FE /* MWKRecentSearchEntry.h */,
+				BCB669921A83F6C300C7B1FE /* MWKRecentSearchEntry.m */,
+				BCB669931A83F6C300C7B1FE /* MWKRecentSearchList.h */,
+				BCB669941A83F6C300C7B1FE /* MWKRecentSearchList.m */,
+				BCB58F611A8A9F1000465627 /* MWKLicense.h */,
+				BCB58F621A8A9F1000465627 /* MWKLicense.m */,
+			);
+			name = "Data classes";
+			sourceTree = "<group>";
+		};
+		BCB669A21A83F6C300C7B1FE /* Data i/o */ = {
+			isa = PBXGroup;
+			children = (
+				BCB669961A83F6C300C7B1FE /* MWKImageInfo.h */,
+				BCB669971A83F6C300C7B1FE /* MWKImageInfo.m */,
+				BCB669981A83F6C300C7B1FE /* MWKDataStore.h */,
+				BCB669991A83F6C300C7B1FE /* MWKDataStore.m */,
+				BCB6699A1A83F6C300C7B1FE /* MWKArticle.h */,
+				BCB6699B1A83F6C300C7B1FE /* MWKArticle.m */,
+				BCB6699C1A83F6C300C7B1FE /* MWKUserDataStore.h */,
+				BCB6699D1A83F6C300C7B1FE /* MWKUserDataStore.m */,
+				BCB6699E1A83F6C300C7B1FE /* MWKImageList.h */,
+				BCB6699F1A83F6C300C7B1FE /* MWKImageList.m */,
+				BCB669A01A83F6C300C7B1FE /* MWKSectionList.h */,
+				BCB669A11A83F6C300C7B1FE /* MWKSectionList.m */,
+			);
+			name = "Data i/o";
+			sourceTree = "<group>";
+		};
+		BCB669A31A83F6C300C7B1FE /* MediaWikiKit */ = {
+			isa = PBXGroup;
+			children = (
+				BCB58F401A890D8200465627 /* Categories */,
+				BCB669771A83F6C300C7B1FE /* MediaWikiKit.h */,
+				BCB6697C1A83F6C300C7B1FE /* Metadata classes */,
+				BCB669951A83F6C300C7B1FE /* Data classes */,
+				BCB669A21A83F6C300C7B1FE /* Data i/o */,
+			);
+			name = MediaWikiKit;
+			path = MediaWikiKit/MediaWikiKit;
+			sourceTree = "<group>";
+		};
+		BCB669C81A83F6D300C7B1FE /* Test data */ = {
+			isa = PBXGroup;
+			children = (
+				BCB669BF1A83F6D300C7B1FE /* organization-anon.json */,
+				BCB669C01A83F6D300C7B1FE /* golden-gate.jpg */,
+				BCB669C11A83F6D300C7B1FE /* test-notes.txt */,
+				BCB669C21A83F6D300C7B1FE /* user-loggedin.json */,
+				BCB669C31A83F6D300C7B1FE /* user-anon.json */,
+				BCB669C41A83F6D300C7B1FE /* protection-obama.json */,
+				BCB669C51A83F6D300C7B1FE /* protection-empty.json */,
+				BCB669C61A83F6D300C7B1FE /* section0.json */,
+				BCB669C71A83F6D300C7B1FE /* section1-end.json */,
+			);
+			name = "Test data";
+			sourceTree = "<group>";
+		};
+		BCB669D11A83F6D300C7B1FE /* MediaWikiKitTests */ = {
+			isa = PBXGroup;
+			children = (
+				BCB669BA1A83F6D300C7B1FE /* MWKTestCase.h */,
+				BCB669BB1A83F6D300C7B1FE /* MWKTestCase.m */,
+				BCB669BC1A83F6D300C7B1FE /* MWKArticleStoreTestCase.h */,
+				BCB669BD1A83F6D300C7B1FE /* MWKArticleStoreTestCase.m */,
+				BCB669BE1A83F6D300C7B1FE /* TemplateIcon2x.png */,
+				BCB669C81A83F6D300C7B1FE /* Test data */,
+				BCB669C91A83F6D300C7B1FE /* MWKSiteTests.m */,
+				BCB669CA1A83F6D300C7B1FE /* MWKTitleTests.m */,
+				BCB669CB1A83F6D300C7B1FE /* MWKUserTests.m */,
+				BCB669CC1A83F6D300C7B1FE /* MWKProtectionStatusTests.m */,
+				BCB669CD1A83F6D300C7B1FE /* MWKDataStorePathTests.m */,
+				BCB669CE1A83F6D300C7B1FE /* MWKDataStoreStorageTests.m */,
+				BCB669CF1A83F6D300C7B1FE /* MWKImageStorageTests.m */,
+				BCB669D01A83F6D300C7B1FE /* MWKHistoryListTests.m */,
+				BCB66A0F1A851C9B00C7B1FE /* MWKImageListTests.m */,
+				BCB58F7D1A8D1B8400465627 /* MWKImageInfo+MWKImageComparisonTests.m */,
+			);
+			name = MediaWikiKitTests;
+			path = ../MediaWikiKit/MediaWikiKitTests;
+			sourceTree = "<group>";
+		};
 		C9180EC118AED30C006C1DCA /* mw-utils */ = {
 			isa = PBXGroup;
 			children = (
@@ -1675,26 +2038,17 @@
 			name = DataMigration;
 			sourceTree = "<group>";
 		};
-		D497FCF01A0807ED004A36A5 /* Products */ = {
-			isa = PBXGroup;
-			children = (
-				D497FCF51A0807EE004A36A5 /* libMediaWikiKit.a */,
-				D497FCF71A0807EE004A36A5 /* MediaWikiKitTests.xctest */,
-			);
-			name = Products;
-			sourceTree = "<group>";
-		};
 		D499142C181D51DE00E6073C = {
 			isa = PBXGroup;
 			children = (
 				D499143E181D51DE00E6073C /* Wikipedia */,
+				BCB669A31A83F6C300C7B1FE /* MediaWikiKit */,
 				04E9A78218F73C7200F7ECF7 /* www */,
 				D4991453181D51DE00E6073C /* Images.xcassets */,
 				BC8309941A7BF935003FC5C7 /* WikipediaUnitTests */,
 				D4991437181D51DE00E6073C /* Frameworks */,
 				D4991436181D51DE00E6073C /* Products */,
 				D4F478441A48CD8500D8043C /* OldDataSchema.xcodeproj */,
-				D497FCEF1A0807ED004A36A5 /* MediaWikiKit.xcodeproj */,
 				EC30571054CC4DC4EE743503 /* Pods */,
 			);
 			sourceTree = "<group>";
@@ -1895,7 +2249,6 @@
 			);
 			dependencies = (
 				D4F478761A48D1BB00D8043C /* PBXTargetDependency */,
-				D497FCFA1A080800004A36A5 /* PBXTargetDependency */,
 			);
 			name = Wikipedia;
 			productName = "Wikipedia-iOS";
@@ -2005,10 +2358,6 @@
 			productRefGroup = D4991436181D51DE00E6073C /* Products */;
 			projectDirPath = "";
 			projectReferences = (
-				{
-					ProductGroup = D497FCF01A0807ED004A36A5 /* Products */;
-					ProjectRef = D497FCEF1A0807ED004A36A5 /* MediaWikiKit.xcodeproj */;
-				},
 				{
 					ProductGroup = D4F478451A48CD8500D8043C /* Products */;
 					ProjectRef = D4F478441A48CD8500D8043C /* OldDataSchema.xcodeproj */;
@@ -2023,20 +2372,6 @@
 /* End PBXProject section */
 
 /* Begin PBXReferenceProxy section */
-		D497FCF51A0807EE004A36A5 /* libMediaWikiKit.a */ = {
-			isa = PBXReferenceProxy;
-			fileType = archive.ar;
-			path = libMediaWikiKit.a;
-			remoteRef = D497FCF41A0807EE004A36A5 /* PBXContainerItemProxy */;
-			sourceTree = BUILT_PRODUCTS_DIR;
-		};
-		D497FCF71A0807EE004A36A5 /* MediaWikiKitTests.xctest */ = {
-			isa = PBXReferenceProxy;
-			fileType = wrapper.cfbundle;
-			path = MediaWikiKitTests.xctest;
-			remoteRef = D497FCF61A0807EE004A36A5 /* PBXContainerItemProxy */;
-			sourceTree = BUILT_PRODUCTS_DIR;
-		};
 		D4E6D9161A5C65FA004916C1 /* OldDataSchemaBundle.bundle */ = {
 			isa = PBXReferenceProxy;
 			fileType = wrapper.cfbundle;
@@ -2058,6 +2393,16 @@
 			isa = PBXResourcesBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
+				BCB669D81A83F6D300C7B1FE /* test-notes.txt in Resources */,
+				BCB669DE1A83F6D300C7B1FE /* section1-end.json in Resources */,
+				BCB669DC1A83F6D300C7B1FE /* protection-empty.json in Resources */,
+				BCB669DB1A83F6D300C7B1FE /* protection-obama.json in Resources */,
+				BCB669D51A83F6D300C7B1FE /* TemplateIcon2x.png in Resources */,
+				BCB669DD1A83F6D300C7B1FE /* section0.json in Resources */,
+				BCB669D71A83F6D300C7B1FE /* golden-gate.jpg in Resources */,
+				BCB669D61A83F6D300C7B1FE /* organization-anon.json in Resources */,
+				BCB669D91A83F6D300C7B1FE /* user-loggedin.json in Resources */,
+				BCB669DA1A83F6D300C7B1FE /* user-anon.json in Resources */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -2102,6 +2447,7 @@
 				C9EBF7D11A8D51AA006FBD41 /* cc_white.png in Resources */,
 				04C91CF219554B310035ED1B /* logo-onboarding.png in Resources */,
 				045A9F0D18F6090E0057EA85 /* assets in Resources */,
+				BCB58F591A89747400465627 /* WMFImageGalleryDetailOverlayView.xib in Resources */,
 				D47FEE2019C8CB0000B998C8 /* (null) in Resources */,
 				04123638189C29EA00E0CF8E /* abuse-filter-flag-white@2x.png in Resources */,
 				04C91CEF195520990035ED1B /* logo-onboarding-subtitle@2x.png in Resources */,
@@ -2276,9 +2622,55 @@
 			isa = PBXSourcesBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
+				BCB669611A83D7B300C7B1FE /* WMFErrorForApiErrorObjectTests.m in Sources */,
+				BCB66A101A851C9B00C7B1FE /* MWKImageListTests.m in Sources */,
+				BCB669FA1A83F71C00C7B1FE /* MWKSectionList.m in Sources */,
+				BCB669631A83DB8F00C7B1FE /* MWKImageInfoResponseSerializer.m in Sources */,
+				BCB669761A83F59300C7B1FE /* NSMutableDictionary+MaybeSetTests.m in Sources */,
+				BC50C3831A83C88F006DC7AF /* WMFJoinedPropertyParametersTests.m in Sources */,
+				BCB669E01A83F6D300C7B1FE /* MWKTitleTests.m in Sources */,
+				BCB58F451A890D9700465627 /* MWKImageInfo+MWKImageComparison.m in Sources */,
 				BC42735E1A7C73B300068882 /* NSArray+PredicateTests.m in Sources */,
+				BCB669F01A83F71C00C7B1FE /* MWKSavedPageList.m in Sources */,
+				BCB669FD1A84158200C7B1FE /* CircularBitwiseRotationTests.m in Sources */,
+				BCB669D31A83F6D300C7B1FE /* MWKTestCase.m in Sources */,
+				BCB669E51A83F6D300C7B1FE /* MWKImageStorageTests.m in Sources */,
+				BCB669F51A83F71C00C7B1FE /* MWKImageInfo.m in Sources */,
+				BCB669F71A83F71C00C7B1FE /* MWKArticle.m in Sources */,
+				BCB669F91A83F71C00C7B1FE /* MWKImageList.m in Sources */,
+				BCB669F81A83F71C00C7B1FE /* MWKUserDataStore.m in Sources */,
+				BCB669F31A83F71C00C7B1FE /* MWKRecentSearchEntry.m in Sources */,
+				BCB669F61A83F71C00C7B1FE /* MWKDataStore.m in Sources */,
+				BCB669E71A83F71C00C7B1FE /* MWKSite.m in Sources */,
+				BCB58F7C1A8D0C8E00465627 /* NSArray+BKIndexTests.m in Sources */,
+				BCB58F7E1A8D1B8400465627 /* MWKImageInfo+MWKImageComparisonTests.m in Sources */,
+				BC50C3841A83C96D006DC7AF /* WMFNetworkUtilities.m in Sources */,
+				BCB669F11A83F71C00C7B1FE /* MWKHistoryEntry.m in Sources */,
+				BCB669EB1A83F71C00C7B1FE /* MWKUser.m in Sources */,
+				BCB669ED1A83F71C00C7B1FE /* MWKImage.m in Sources */,
+				BCB669E31A83F6D300C7B1FE /* MWKDataStorePathTests.m in Sources */,
+				BCB669E11A83F6D300C7B1FE /* MWKUserTests.m in Sources */,
+				BCB58F791A8D081E00465627 /* NSArray+BKIndex.m in Sources */,
+				BCB669E91A83F71C00C7B1FE /* MWKDataObject.m in Sources */,
+				BCB669EF1A83F71C00C7B1FE /* MWKSavedPageEntry.m in Sources */,
+				BCB669E41A83F6D300C7B1FE /* MWKDataStoreStorageTests.m in Sources */,
+				BCB669D41A83F6D300C7B1FE /* MWKArticleStoreTestCase.m in Sources */,
+				BCB669E81A83F71C00C7B1FE /* MWKTitle.m in Sources */,
+				BCB669E21A83F6D300C7B1FE /* MWKProtectionStatusTests.m in Sources */,
+				BCB669DF1A83F6D300C7B1FE /* MWKSiteTests.m in Sources */,
+				BCB58F641A8A9F1000465627 /* MWKLicense.m in Sources */,
+				BCB669F21A83F71C00C7B1FE /* MWKHistoryList.m in Sources */,
+				BCB669E61A83F6D300C7B1FE /* MWKHistoryListTests.m in Sources */,
 				BC42735D1A7C73B300068882 /* NSArray+Predicate.m in Sources */,
+				BCB669EA1A83F71C00C7B1FE /* MWKSiteDataObject.m in Sources */,
+				BC86B9411A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.m in Sources */,
+				BCB669EC1A83F71C00C7B1FE /* MWKSection.m in Sources */,
+				BCB58F681A8AA22200465627 /* MWKLicense+ToGlyph.m in Sources */,
+				BCB66A0D1A85183000C7B1FE /* NSString+WMFHTMLParsing.m in Sources */,
+				BCB669EE1A83F71C00C7B1FE /* MWKProtectionStatus.m in Sources */,
+				BCB669F41A83F71C00C7B1FE /* MWKRecentSearchList.m in Sources */,
 				04BA48A21A80062F00CB5CAE /* UIFont+WMFStyle.m in Sources */,
+				BCB669741A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.m in Sources */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -2288,6 +2680,7 @@
 			files = (
 				D49B2ED2196C687C002F035D /* PullToRefreshViewController.m in Sources */,
 				0449E63518A9845C00D51524 /* LoginViewController.m in Sources */,
+				BCB669A61A83F6C400C7B1FE /* MWKDataObject.m in Sources */,
 				04DB0BEA18BD37F900B4BCF3 /* UIScrollView+ScrollSubviewToLocation.m in Sources */,
 				0487048B19F8262600B7D307 /* RandomArticleFetcher.m in Sources */,
 				042A5B36192591520095E172 /* TopMenuTextField.m in Sources */,
@@ -2300,12 +2693,15 @@
 				0487048A19F8262600B7D307 /* PreviewHtmlFetcher.m in Sources */,
 				C9180EC418AED30C006C1DCA /* WikipediaAppUtils.m in Sources */,
 				04EDEE311A21CB4100798076 /* UIScreen+Extras.m in Sources */,
+				BCB669A91A83F6C400C7B1FE /* MWKSection.m in Sources */,
+				BCB669B61A83F6C400C7B1FE /* MWKImageList.m in Sources */,
 				04CFA126194B94A10088269A /* MenuLabel.m in Sources */,
 				04B0EA4A190B2348007458AF /* PreviewLicenseView.m in Sources */,
 				0462A6D11A1FE016009412D4 /* SearchResultAttributedString.m in Sources */,
 				0487047F19F8262600B7D307 /* AccountCreator.m in Sources */,
 				04038E701A15734B00DBD1DF /* SearchMessageLabel.m in Sources */,
 				0487048619F8262600B7D307 /* LanguageLinksFetcher.m in Sources */,
+				BCB58F481A891FDB00465627 /* WebViewController+ImageGalleryPresentation.m in Sources */,
 				0449E63918AAA26A00D51524 /* NSHTTPCookieStorage+CloneCookie.m in Sources */,
 				04C695CE18ED08D900D9F2DA /* UIView+SearchSubviews.m in Sources */,
 				0487048E19F8262600B7D307 /* WikipediaZeroMessageFetcher.m in Sources */,
@@ -2317,6 +2713,7 @@
 				0463639818A844570049EE4F /* KeychainCredentials.m in Sources */,
 				04414DDB1A140FAF00A41B4E /* SearchDidYouMeanButton.m in Sources */,
 				04530AFB1935C2B500022512 /* EmptySegue.m in Sources */,
+				BCB669B41A83F6C400C7B1FE /* MWKArticle.m in Sources */,
 				044BD6B618849AD000FFE4BE /* SectionEditorViewController.m in Sources */,
 				042B3996192EAEEA0066B270 /* ShareMenuSavePageActivity.m in Sources */,
 				0429301018604898002A13FC /* SavedPagesViewController.m in Sources */,
@@ -2332,6 +2729,7 @@
 				04292FF2185FBA70002A13FC /* SearchResultCell.m in Sources */,
 				04F0E2EA186EDC1A00468738 /* UIWebView+ElementLocation.m in Sources */,
 				0447866F1852B5010050563B /* SessionSingleton.m in Sources */,
+				BCB669AA1A83F6C400C7B1FE /* MWKImage.m in Sources */,
 				D4E8A8A4190835C100DA4765 /* DataMigrator.m in Sources */,
 				0443961B1A3C11A30081557D /* NearbyResultCollectionCell.m in Sources */,
 				0487048519F8262600B7D307 /* EditTokenFetcher.m in Sources */,
@@ -2346,6 +2744,7 @@
 				04142A8F184F974E006EF779 /* NSDate-Utilities.m in Sources */,
 				0487048C19F8262600B7D307 /* SearchResultFetcher.m in Sources */,
 				04090A3B187FB7D000577EDF /* UIView+Debugging.m in Sources */,
+				BCB669B11A83F6C400C7B1FE /* MWKRecentSearchList.m in Sources */,
 				04DD89B118BFE63A00DD5DAD /* PreviewAndSaveViewController.m in Sources */,
 				0487048819F8262600B7D307 /* NearbyFetcher.m in Sources */,
 				0415581C18ADFA5D00B81A59 /* UIImage+ColorMask.m in Sources */,
@@ -2360,12 +2759,15 @@
 				04E106341A3560030046DC27 /* LeadImageContainer.m in Sources */,
 				0487048019F8262600B7D307 /* AccountLogin.m in Sources */,
 				04D149DD18877343006B4104 /* AlertLabel.m in Sources */,
+				BCB669AE1A83F6C400C7B1FE /* MWKHistoryEntry.m in Sources */,
 				0433542618A093C5009305F0 /* UIView+RemoveConstraints.m in Sources */,
 				C98990341A699DE000AF44FC /* WMFShareCardViewController.m in Sources */,
 				047801BE18AE987900DBB747 /* UIButton+ColorMask.m in Sources */,
+				BC86B93D1A929CC500B4C039 /* UICollectionViewFlowLayout+NSCopying.m in Sources */,
 				0429300A18604898002A13FC /* SavedPagesResultCell.m in Sources */,
 				0487048419F8262600B7D307 /* CaptchaResetter.m in Sources */,
 				D407E6411A51DBDA00CCC8B1 /* SchemaConverter.m in Sources */,
+				BCB669A71A83F6C400C7B1FE /* MWKSiteDataObject.m in Sources */,
 				04821CD119895EDC007558F6 /* ReferenceGradientView.m in Sources */,
 				0460F8DC19B0F932001BC59B /* CenteredPathView.m in Sources */,
 				0472BC18193AD88C00C40BDA /* MWKSection+DisplayHtml.m in Sources */,
@@ -2373,63 +2775,89 @@
 				04B6925018E77B2A00F88D8A /* UIWebView+HideScrollGradient.m in Sources */,
 				047E95511996DD030046A122 /* NearbyViewController.m in Sources */,
 				04AE520519DB5E0900F89B92 /* NSObject+ConstraintsScale.m in Sources */,
+				BC86B9401A929D7900B4C039 /* UICollectionViewFlowLayout+WMFItemSizeThatFits.m in Sources */,
 				D401C2C01A659E5000D4D127 /* DataMigrationProgressViewController.m in Sources */,
 				04CCCFF01935093A00E3F60C /* SecondaryMenuViewController.m in Sources */,
 				D4B0AE0B19366A2C00F0AC90 /* ReadingActionFunnel.m in Sources */,
 				04BA48A11A80062F00CB5CAE /* UIFont+WMFStyle.m in Sources */,
 				0452C810195D0F03007925A6 /* UIViewController+ModalPop.m in Sources */,
 				0487049019F8262600B7D307 /* WikiTextSectionUploader.m in Sources */,
+				BCB58F631A8A9F1000465627 /* MWKLicense.m in Sources */,
 				041C55D21950B27D006CE0EF /* EditSummaryViewController.m in Sources */,
 				04CCA0C01983086D000E982A /* ReferencesVC.m in Sources */,
 				04C43ABE183442FC006C643B /* NSRunLoop+TimeOutAndFlag.m in Sources */,
 				0487048719F8262600B7D307 /* LoginTokenFetcher.m in Sources */,
 				D4B0AE0E19366A5400F0AC90 /* LoginFunnel.m in Sources */,
+				BC50C3871A83CBDA006DC7AF /* MWKImageInfoResponseSerializer.m in Sources */,
 				0487048919F8262600B7D307 /* PageHistoryFetcher.m in Sources */,
 				C94BE3EE1A8169ED00F2105B /* WMFShareFunnel.m in Sources */,
+				BCB58F671A8AA22200465627 /* MWKLicense+ToGlyph.m in Sources */,
 				04C757671A1A9E1B0084AC39 /* RecentSearchesViewController.m in Sources */,
 				04C43AAE18344131006C643B /* CommunicationBridge.m in Sources */,
 				04224501197F5E09005DD0BF /* BulletedLabel.m in Sources */,
 				C979727D1A731F2D00C6ED7A /* WMFShareOptionsView.m in Sources */,
 				C91A86F41A8BCB680088A801 /* WMFShareCardImageContainer.m in Sources */,
 				04B6050C193522650007185A /* WikiGlyphButton.m in Sources */,
+				BCB58F781A8D081E00465627 /* NSArray+BKIndex.m in Sources */,
 				042A5B2C19253E690095E172 /* BottomMenuViewController.m in Sources */,
 				0433542218A023FE009305F0 /* UIViewController+HideKeyboard.m in Sources */,
 				0484E3DE19D9D19B0085D18D /* UIView+ConstraintsScale.m in Sources */,
 				0452C803195CB216007925A6 /* UIViewController+ModalsSearch.m in Sources */,
 				04CCA0C319830A44000E982A /* ReferenceVC.m in Sources */,
+				BCB669B71A83F6C400C7B1FE /* MWKSectionList.m in Sources */,
+				BCB66A0C1A85183000C7B1FE /* NSString+WMFHTMLParsing.m in Sources */,
+				BCB669AF1A83F6C400C7B1FE /* MWKHistoryList.m in Sources */,
+				BC50C37F1A83C784006DC7AF /* WMFNetworkUtilities.m in Sources */,
+				BCB58F441A890D9700465627 /* MWKImageInfo+MWKImageComparison.m in Sources */,
+				BCB669AD1A83F6C400C7B1FE /* MWKSavedPageList.m in Sources */,
 				04B91AB718E4D5B200FFAA1C /* TabularScrollView.m in Sources */,
 				04C695D218ED213000D9F2DA /* UIScrollView+NoHorizontalScrolling.m in Sources */,
 				04E106381A3560A90046DC27 /* LeadImageTitleLabel.m in Sources */,
 				04F0E2EE186FB2D100468738 /* TOCSectionCellView.m in Sources */,
 				04D122321899B8AC006B9A30 /* AlertWebView.m in Sources */,
 				04C0A0781936786000D55325 /* UIViewController+ModalPresent.m in Sources */,
+				BC86B9361A92966B00B4C039 /* AFHTTPRequestOperationManager+UniqueRequests.m in Sources */,
 				D4991449181D51DE00E6073C /* AppDelegate.m in Sources */,
+				BCB669A81A83F6C400C7B1FE /* MWKUser.m in Sources */,
+				BCB669AB1A83F6C400C7B1FE /* MWKProtectionStatus.m in Sources */,
 				04C9509D19EF02980013F3C0 /* EventLogger.m in Sources */,
 				D4E8A8A719084F1300DA4765 /* SQLiteHelper.m in Sources */,
 				04F39590186CF80100B0D6FC /* TOCViewController.m in Sources */,
 				0439317619FB092600386E8F /* UIWebView+LoadAssetsHtml.m in Sources */,
 				04B91AA718E34BBC00FFAA1C /* UIView+TemporaryAnimatedXF.m in Sources */,
 				04224500197F5E09005DD0BF /* AbuseFilterAlert.m in Sources */,
+				BCB669731A83F58600C7B1FE /* NSMutableDictionary+WMFMaybeSet.m in Sources */,
 				D4B0AE0819366A0A00F0AC90 /* CreateAccountFunnel.m in Sources */,
+				BCB669B51A83F6C400C7B1FE /* MWKUserDataStore.m in Sources */,
 				0487045519F824D700B7D307 /* QueuesSingleton.m in Sources */,
 				04F27B7818FE0F2E00EDD838 /* PageHistoryViewController.m in Sources */,
+				BCB669A41A83F6C400C7B1FE /* MWKSite.m in Sources */,
+				BCB669AC1A83F6C400C7B1FE /* MWKSavedPageEntry.m in Sources */,
 				049B640C18AAF36200D98BD4 /* UIViewController+SearchChildViewControllers.m in Sources */,
 				04A97E8718B81D5D0046B166 /* AccountCreationViewController.m in Sources */,
 				04530AF81935C07500022512 /* ModalContentViewController.m in Sources */,
 				0487048219F8262600B7D307 /* AssetsFileFetcher.m in Sources */,
+				BC955BC71A82BEFD000EF9E4 /* MWKImageInfoFetcher.m in Sources */,
 				04C7576E1A1AA2D00084AC39 /* RecentSearchCell.m in Sources */,
+				BCB58F541A894D3E00465627 /* WMFImageGalleryDetailOverlayView.m in Sources */,
 				045424461A429E8800F1DF2F /* FocalImage.m in Sources */,
 				04292FF8185FBB0B002A13FC /* SearchResultsController.m in Sources */,
 				04478633185145090050563B /* HistoryViewController.m in Sources */,
+				BCB669B21A83F6C400C7B1FE /* MWKImageInfo.m in Sources */,
 				D4B0AE051936604700F0AC90 /* EditFunnel.m in Sources */,
 				0487048319F8262600B7D307 /* FetcherBase.m in Sources */,
 				D4F277FE194235B50032BA38 /* ToCInteractionFunnel.m in Sources */,
+				BCB669B31A83F6C400C7B1FE /* MWKDataStore.m in Sources */,
 				0400EB0318AAEEC60043ECE2 /* UINavigationController+SearchNavStack.m in Sources */,
 				0487048D19F8262600B7D307 /* ThumbnailFetcher.m in Sources */,
+				BCB669B01A83F6C400C7B1FE /* MWKRecentSearchEntry.m in Sources */,
+				BC955BCF1A82C2FA000EF9E4 /* AFHTTPRequestOperationManager+WMFConfig.m in Sources */,
 				04530AF51935BF4D00022512 /* ModalMenuAndContentViewController.m in Sources */,
 				041A3B6218E11ED90079FF1C /* LanguagesViewController.m in Sources */,
 				0493C2CC1952373100EBB973 /* DataHousekeeping.m in Sources */,
 				043F18E118D9691D00D8489A /* TopActionSheetLabel.m in Sources */,
+				BCB669A51A83F6C400C7B1FE /* MWKTitle.m in Sources */,
+				08D631F71A69B1AB00D87AD0 /* WMFImageGalleryViewController.m in Sources */,
 				0412CC621925366C0010E616 /* RootViewController.m in Sources */,
 				04272E7B1940EEBC00CC682F /* AssetsFile.m in Sources */,
 				042A5B2919253E570095E172 /* TopMenuViewController.m in Sources */,
@@ -2444,6 +2872,7 @@
 				04B0EA45190AFDD8007458AF /* ArticleImporter.m in Sources */,
 				042A5B2619253D2A0095E172 /* CenterNavController.m in Sources */,
 				04B162F119284A6F00B1ABC2 /* BottomMenuContainerView.m in Sources */,
+				08D631FA1A69B8CD00D87AD0 /* WMFImageGalleryCollectionViewCell.m in Sources */,
 				D4B0AE0219365F7C00F0AC90 /* EventLoggingFunnel.m in Sources */,
 				042A5B2F19257F900095E172 /* TopMenuContainerView.m in Sources */,
 			);
@@ -2452,11 +2881,6 @@
 /* End PBXSourcesBuildPhase section */
 
 /* Begin PBXTargetDependency section */
-		D497FCFA1A080800004A36A5 /* PBXTargetDependency */ = {
-			isa = PBXTargetDependency;
-			name = MediaWikiKit;
-			targetProxy = D497FCF91A080800004A36A5 /* PBXContainerItemProxy */;
-		};
 		D4F478761A48D1BB00D8043C /* PBXTargetDependency */ = {
 			isa = PBXTargetDependency;
 			name = OldDataSchema;
@@ -2819,6 +3243,8 @@
 				WARNING_CFLAGS = (
 					"$(inherited)",
 					"-Werror=switch",
+					"-Werror=arc-retain-cycles",
+					"-Werror=incompatible-pointer-types",
 				);
 				WRAPPER_EXTENSION = app;
 			};
@@ -2852,6 +3278,8 @@
 				WARNING_CFLAGS = (
 					"$(inherited)",
 					"-Werror=switch",
+					"-Werror=arc-retain-cycles",
+					"-Werror=incompatible-pointer-types",
 				);
 				WRAPPER_EXTENSION = app;
 			};
diff --git a/WikipediaUnitTests/CircularBitwiseRotationTests.m b/WikipediaUnitTests/CircularBitwiseRotationTests.m
new file mode 100644
index 00000000000..46b112e9ea4
--- /dev/null
+++ b/WikipediaUnitTests/CircularBitwiseRotationTests.m
@@ -0,0 +1,35 @@
+//
+//  CircularBitwiseRotationTests.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/5/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <UIKit/UIKit.h>
+#import <XCTest/XCTest.h>
+
+<<<<<<< HEAD
+#import "WMF_FunUtilities.h"
+=======
+#import "WikipediaAppUtils.h"
+>>>>>>> 8fab4cb... image gallery
+
+@interface CircularBitwiseRotationTests : XCTestCase
+
+@end
+
+@implementation CircularBitwiseRotationTests
+
+- (void)testExamples
+{
+    NSUInteger testValue = 0b00000001;
+    NSUInteger len = sizeof(testValue) * CHAR_BIT;
+    XCTAssertEqual(CircularBitwiseRotation(testValue, 0), 0b001);
+    XCTAssertEqual(CircularBitwiseRotation(testValue, 1), 0b00000010);
+    XCTAssertEqual(CircularBitwiseRotation(testValue, 2), 0b00000100);
+    XCTAssertEqual(CircularBitwiseRotation(testValue, len), 0b00000001);
+    XCTAssertEqual(CircularBitwiseRotation(testValue, len + 1), 0b00000010);
+}
+
+@end
diff --git a/WikipediaUnitTests/NSArray+BKIndexTests.m b/WikipediaUnitTests/NSArray+BKIndexTests.m
new file mode 100644
index 00000000000..1f5f8c68eb0
--- /dev/null
+++ b/WikipediaUnitTests/NSArray+BKIndexTests.m
@@ -0,0 +1,40 @@
+//
+//  NSArray+BKIndexTests.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/12/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "NSArray+BKIndex.h"
+#import <XCTest/XCTest.h>
+<<<<<<< HEAD
+#import "WMF_FunUtilities.h"
+=======
+#import "WikipediaAppUtils.h"
+>>>>>>> 8fab4cb... image gallery
+
+#define HC_SHORTHAND 1
+#import <OCHamcrest/OCHamcrest.h>
+
+@interface NSArray_BKIndexTests : XCTestCase
+
+@end
+
+@implementation NSArray_BKIndexTests
+
+- (void)testEmpty
+{
+    assertThat([@[] bk_indexWithKeypath:WMF_SAFE_KEYPATH([NSString new], lowercaseString)], isEmpty());
+}
+
+- (void)testExamples
+{
+    assertThat(([@[@"foo", @"Foo", @"bar"] bk_indexWithKeypath:WMF_SAFE_KEYPATH([NSString new], lowercaseString)]),
+               hasEntries(
+                    @"foo", @"Foo",
+                    @"bar", @"bar", nil
+               ));
+}
+
+@end
diff --git a/WikipediaUnitTests/NSMutableDictionary+MaybeSetTests.m b/WikipediaUnitTests/NSMutableDictionary+MaybeSetTests.m
new file mode 100644
index 00000000000..a613c5d5940
--- /dev/null
+++ b/WikipediaUnitTests/NSMutableDictionary+MaybeSetTests.m
@@ -0,0 +1,39 @@
+//
+//  NSMutableDictionary+WMFMaybeSetTests.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/5/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <UIKit/UIKit.h>
+#import <XCTest/XCTest.h>
+
+#define HC_SHORTHAND 1
+#import <OCHamcrest/OCHamcrest.h>
+
+#import "NSMutableDictionary+WMFMaybeSet.h"
+
+@interface NSMutableDictionary_WMFMaybeSetTests : XCTestCase
+
+@end
+
+@implementation NSMutableDictionary_WMFMaybeSetTests
+
+- (void)testNotNil
+{
+    NSMutableDictionary *testDict = [NSMutableDictionary new];
+    assertThat(@([testDict maybeSetObject:@"foo" forKey:@"bar"]), is(@YES));
+    assertThat(testDict, is(equalTo(@{@"bar": @"foo"})));
+    assertThat(@([testDict maybeSetObject:@"biz" forKey:@"bar"]), is(@YES));
+    assertThat(testDict, is(equalTo(@{@"bar": @"biz"})));
+}
+
+- (void)testNil
+{
+    NSMutableDictionary *testDict = [NSMutableDictionary new];
+    assertThat(@([testDict maybeSetObject:nil forKey:@"bar"]), is(@NO));
+    assertThat(testDict, isEmpty());
+}
+
+@end
diff --git a/WikipediaUnitTests/WMFErrorForApiErrorObjectTests.m b/WikipediaUnitTests/WMFErrorForApiErrorObjectTests.m
new file mode 100644
index 00000000000..b46f2a4cc01
--- /dev/null
+++ b/WikipediaUnitTests/WMFErrorForApiErrorObjectTests.m
@@ -0,0 +1,52 @@
+//
+//  WMFErrorForApiErrorObjectTests.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/5/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <UIKit/UIKit.h>
+#import <XCTest/XCTest.h>
+
+#import "WMFNetworkUtilities.h"
+
+#define HC_SHORTHAND 1
+#import <OCHamcrest/OCHamcrest.h>
+
+@interface WMFErrorForApiErrorObjectTests : XCTestCase
+
+@end
+
+@implementation WMFErrorForApiErrorObjectTests
+
+- (void)testExample
+{
+    NSDictionary *apiErrorObj = @{
+        @"code": @"badcontinue",
+        @"info": @"Invalid continue param. You should pass the original value returned by the previous query",
+        @"*": @"See https://en.wikipedia.org/w/api.php for API usage"
+    };
+    assertThat(WMFErrorForApiErrorObject(apiErrorObj),
+               allOf(hasProperty(@"domain", WMFNetworkingErrorDomain),
+                     hasProperty(@"userInfo", hasEntries(NSLocalizedDescriptionKey, apiErrorObj[@"code"],
+                                                         NSLocalizedFailureReasonErrorKey, apiErrorObj[@"info"],
+                                                         NSLocalizedRecoverySuggestionErrorKey, apiErrorObj[@"*"],
+                                                         nil)),
+                     nil));
+}
+
+- (void)testMissingFields
+{
+    assertThat(WMFErrorForApiErrorObject(@{}),
+               allOf(hasProperty(@"domain", WMFNetworkingErrorDomain),
+                     hasProperty(@"userInfo", isEmpty()),
+                     nil));
+}
+
+- (void)testNil
+{
+    assertThat(WMFErrorForApiErrorObject(nil), is(nilValue()));
+}
+
+@end
diff --git a/WikipediaUnitTests/WMFJoinedPropertyParametersTests.m b/WikipediaUnitTests/WMFJoinedPropertyParametersTests.m
new file mode 100644
index 00000000000..3e58f79afa9
--- /dev/null
+++ b/WikipediaUnitTests/WMFJoinedPropertyParametersTests.m
@@ -0,0 +1,42 @@
+//
+//  WMFNetworkUtilitiesTests.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/5/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <UIKit/UIKit.h>
+#import <XCTest/XCTest.h>
+#import "WMFNetworkUtilities.h"
+
+#define HC_SHORTHAND 1
+#import <OCHamcrest/OCHamcrest.h>
+
+@interface WMFJoinedPropertyParametersTests : XCTestCase
+
+@end
+
+@implementation WMFJoinedPropertyParametersTests
+
+- (void)testNonEmptyArray
+{
+    assertThat(WMFJoinedPropertyParameters(@[@"foo", @"bar", @"baz"]), is(@"foo|bar|baz"));
+}
+
+- (void)testUnaryArray
+{
+    assertThat(WMFJoinedPropertyParameters(@[@"foo"]), is(@"foo"));
+}
+
+- (void)testEmptyArray
+{
+    assertThat(WMFJoinedPropertyParameters(@[]), is(@""));
+}
+
+- (void)testNil
+{
+    assertThat(WMFJoinedPropertyParameters(nil), is(@""));
+}
+
+@end
diff --git a/wikipedia/AppDelegate.m b/wikipedia/AppDelegate.m
index dc3a01b4e5e..45b3431c05d 100644
--- a/wikipedia/AppDelegate.m
+++ b/wikipedia/AppDelegate.m
@@ -14,13 +14,13 @@ - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(
     [self registerStandardUserDefaults];
     [self systemWideStyleOverrides];
 
-    // Set the shared url cache to our custom NSURLCache which re-routes images to
-    // our article cache.
-    //TODO: update the app to occasionally check total size of our article cache and if its file exceeded some threshold size prune its image entries
-    // (probably by Image.lastDateAccessed)
-    URLCache *urlCache = [[URLCache alloc] initWithMemoryCapacity: 1024 * 1024 * 8
-                                                     diskCapacity: 1024 * 1024 * 25
-                                                         diskPath: nil];
+    /*
+     Set the shared url cache to our custom NSURLCache which re-routes images to
+     our article cache.
+     */
+    URLCache *urlCache = [[URLCache alloc] initWithMemoryCapacity:MegabytesToBytes(8)
+                                                     diskCapacity:MegabytesToBytes(25)
+                                                         diskPath:nil];
     [NSURLCache setSharedURLCache:urlCache];
     
     // Enables Alignment Rect highlighting for debugging
@@ -33,7 +33,9 @@ - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(
 
 #if TARGET_IPHONE_SIMULATOR
     // From: http://pinkstone.co.uk/where-is-the-documents-directory-for-the-ios-8-simulator/
-    NSLog(@"\n\n\nSimulator Documents Directory:\n%@\n\n\n", [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject]);
+    NSLog(@"\n\n\nSimulator Documents Directory:\n%@\n\n\n",
+          [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory
+                                                  inDomains:NSUserDomainMask] lastObject]);
 #endif
 
     return YES;
diff --git a/wikipedia/Categories/AFHTTPRequestOperationManager+UniqueRequests.h b/wikipedia/Categories/AFHTTPRequestOperationManager+UniqueRequests.h
new file mode 100644
index 00000000000..69d2fbbbe05
--- /dev/null
+++ b/wikipedia/Categories/AFHTTPRequestOperationManager+UniqueRequests.h
@@ -0,0 +1,35 @@
+//
+//  AFHTTPRequestOperationManager+UniqueRequests.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "AFHTTPRequestOperationManager.h"
+
+@interface AFHTTPRequestOperationManager (UniqueRequests)
+
+/**
+ * Find an <b>executing</b> operation matching the specified criteria.
+ * @param method        The HTTP method, e.g. @c @"GET".
+ * @param URLString     The URL, sans any query parameters.
+ * @param parameters    Any request parameters which would be passed to the receiver's @c requestSerializer.
+ * @return An operation with a request which matches the output of the receiver's @c requestSerializer when given the
+ *         specified arguments, or @c nil if none is found.
+ */
+- (AFHTTPRequestOperation*)wmf_findOperationWithMethod:(NSString*)method
+                                             URLString:(NSString *)URLString
+                                            parameters:(id)parameters;
+
+/**
+ * Send a @c GET request, if there isn't a similar operation already in flight.
+ * @see -wmf_findOperationWithMethod:URLString:parameters
+ * @see -GET:parameters:success:failure
+ */
+- (AFHTTPRequestOperation*)wmf_idempotentGET:(NSString*)URLString
+                                  parameters:(id)parameters
+                                     success:(void(^)(AFHTTPRequestOperation* op, id response))success
+                                     failure:(void(^)(AFHTTPRequestOperation* op, NSError* error))failure;
+
+@end
diff --git a/wikipedia/Categories/AFHTTPRequestOperationManager+UniqueRequests.m b/wikipedia/Categories/AFHTTPRequestOperationManager+UniqueRequests.m
new file mode 100644
index 00000000000..4bcfc62c068
--- /dev/null
+++ b/wikipedia/Categories/AFHTTPRequestOperationManager+UniqueRequests.m
@@ -0,0 +1,41 @@
+//
+//  AFHTTPRequestOperationManager+UniqueRequests.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "AFHTTPRequestOperationManager+UniqueRequests.h"
+#import <BlocksKit/BlocksKit.h>
+
+@implementation AFHTTPRequestOperationManager (UniqueRequests)
+
+- (AFHTTPRequestOperation*)wmf_findOperationWithMethod:(NSString*)method
+                                             URLString:(NSString *)URLString
+                                            parameters:(id)parameters
+{
+    NSURLRequest *request = [self.requestSerializer requestWithMethod:method
+                                                            URLString:URLString
+                                                           parameters:parameters
+                                                                error:nil];
+    return request ?
+        [self.operationQueue.operations bk_match:^BOOL(AFHTTPRequestOperation *op) {
+            return [op.request isEqual:request];
+        }]
+        : nil;
+}
+
+- (AFHTTPRequestOperation*)wmf_idempotentGET:(NSString*)URLString
+                                  parameters:(id)parameters
+                                     success:(void(^)(AFHTTPRequestOperation* op, id response))success
+                                     failure:(void(^)(AFHTTPRequestOperation* op, NSError* error))failure
+{
+    if ([self wmf_findOperationWithMethod:@"GET" URLString:URLString parameters:parameters]) {
+        return nil;
+    } else {
+        return [self GET:URLString parameters:parameters success:success failure:failure];
+    }
+}
+
+@end
diff --git a/wikipedia/Categories/MWKLicense+ToGlyph.h b/wikipedia/Categories/MWKLicense+ToGlyph.h
new file mode 100644
index 00000000000..03efbbc406d
--- /dev/null
+++ b/wikipedia/Categories/MWKLicense+ToGlyph.h
@@ -0,0 +1,15 @@
+//
+//  MWKLicense+ToGlyph.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/10/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKLicense.h"
+
+@interface MWKLicense (ToGlyph)
+
+- (NSString*)toGlyph;
+
+@end
diff --git a/wikipedia/Categories/MWKLicense+ToGlyph.m b/wikipedia/Categories/MWKLicense+ToGlyph.m
new file mode 100644
index 00000000000..8bf1ddc9ad4
--- /dev/null
+++ b/wikipedia/Categories/MWKLicense+ToGlyph.m
@@ -0,0 +1,25 @@
+//
+//  MWKLicense+ToGlyph.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/10/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKLicense+ToGlyph.h"
+#import "WikiGlyph_Chars.h"
+
+@implementation MWKLicense (ToGlyph)
+
+- (NSString*)toGlyph
+{
+    if ([self.code isEqualToString:@"pd"]) {
+        return WIKIGLYPH_PUBLIC_DOMAIN;
+    } else if ([self.code hasPrefix:@"cc"]) {
+        return WIKIGLYPH_CC;
+    } else {
+        return nil;
+    }
+}
+
+@end
diff --git a/wikipedia/Categories/NSArray+BKIndex.h b/wikipedia/Categories/NSArray+BKIndex.h
new file mode 100644
index 00000000000..e3a73f265a9
--- /dev/null
+++ b/wikipedia/Categories/NSArray+BKIndex.h
@@ -0,0 +1,31 @@
+//
+//  NSArray+BKIndex.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/12/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <Foundation/Foundation.h>
+
+/// Extends BlocksKit with indexing functionality.
+@interface NSArray (BKIndex)
+
+/**
+ * Create a dictionary comprised of the indexed contents of the receiver.
+ * @param index A block which returns the indexing key for a given object.
+ * @note This will also implicitly remove objects with the same key, as determined by @c index, with the last object
+ *       with said key will be in the resulting dictionary.
+ * @return A dictionary where keys are the values returned by @c index and the values are the corresponding objects.
+ * @see -bk_reduce:withBlock:
+ */
+- (NSDictionary*)bk_index:(id<NSCopying>(^)(id))index;
+
+/**
+ * Index objects in the receiver using their values for @c keypath as the index.
+ * @param keypath A keypath which is KVC-compliant for all objects in the receiver.
+ * @see -bk_index:
+ */
+- (NSDictionary*)bk_indexWithKeypath:(NSString*)keypath;
+
+@end
diff --git a/wikipedia/Categories/NSArray+BKIndex.m b/wikipedia/Categories/NSArray+BKIndex.m
new file mode 100644
index 00000000000..de127b13b2a
--- /dev/null
+++ b/wikipedia/Categories/NSArray+BKIndex.m
@@ -0,0 +1,30 @@
+//
+//  NSArray+BKIndex.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/12/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "NSArray+BKIndex.h"
+#import <BlocksKit/BlocksKit.h>
+
+@implementation NSArray (BKIndex)
+
+- (NSDictionary*)bk_index:(id<NSCopying>(^)(id))index
+{
+    return [self bk_reduce:[NSMutableDictionary dictionaryWithCapacity:self.count]
+                 withBlock:^NSMutableDictionary*(NSMutableDictionary *acc, id obj) {
+        acc[index(obj)] = obj;
+        return acc;
+    }];
+}
+
+- (NSDictionary*)bk_indexWithKeypath:(NSString *)keypath
+{
+    return [self bk_index:^id<NSCopying>(id obj) {
+        return [obj valueForKeyPath:keypath];
+    }];
+}
+
+@end
diff --git a/wikipedia/Categories/NSMutableDictionary+WMFMaybeSet.h b/wikipedia/Categories/NSMutableDictionary+WMFMaybeSet.h
new file mode 100644
index 00000000000..a2cbf8427cb
--- /dev/null
+++ b/wikipedia/Categories/NSMutableDictionary+WMFMaybeSet.h
@@ -0,0 +1,7 @@
+#import <Foundation/Foundation.h>
+
+@interface NSMutableDictionary (WMFMaybeSet)
+
+- (BOOL)wmf_maybeSetObject:(id)obj forKey:(id<NSCopying>)key;
+
+@end
diff --git a/wikipedia/Categories/NSMutableDictionary+WMFMaybeSet.m b/wikipedia/Categories/NSMutableDictionary+WMFMaybeSet.m
new file mode 100644
index 00000000000..1cce89462e9
--- /dev/null
+++ b/wikipedia/Categories/NSMutableDictionary+WMFMaybeSet.m
@@ -0,0 +1,15 @@
+#import "NSMutableDictionary+WMFMaybeSet.h"
+
+@implementation NSMutableDictionary (WMFMaybeSet)
+
+- (BOOL)wmf_maybeSetObject:(id)obj forKey:(id<NSCopying>)key
+{
+    if (obj) {
+        self[key] = obj;
+        return YES;
+    } else {
+        return NO;
+    }
+}
+
+@end
diff --git a/wikipedia/Categories/NSString+WMFHTMLParsing.h b/wikipedia/Categories/NSString+WMFHTMLParsing.h
new file mode 100644
index 00000000000..c0c59a4e72e
--- /dev/null
+++ b/wikipedia/Categories/NSString+WMFHTMLParsing.h
@@ -0,0 +1,25 @@
+#import <Foundation/Foundation.h>
+
+@interface NSString (WMFHTMLParsing)
+
+/// Parse the receiver as HTML and return the content of any text nodes found.
+- (NSArray*)wmf_htmlTextNodes;
+
+/**
+ * Parse the receiver as HTML and return text node content joined by a space.
+ * @discussion
+ *
+ * For example, given <code>"\<p\>Some string \<b\>with a bold substring\</b\>\</p\>"</code>,
+ * this method would return <code>"Some string with a bold substring"</code>.
+ *
+ * @see wmf_htmlTextNodes
+ */
+- (NSString*)wmf_joinedHtmlTextNodes;
+
+/**
+ * Parse the receiver as HTML and return concatenated text node content, separated by @c delimiter.
+ * @see wmf_htmlTextNodes
+ */
+- (NSString*)wmf_joinedHtmlTextNodesWithDelimiter:(NSString*)delimiter;
+
+@end
diff --git a/wikipedia/Categories/NSString+WMFHTMLParsing.m b/wikipedia/Categories/NSString+WMFHTMLParsing.m
new file mode 100644
index 00000000000..782b14dda98
--- /dev/null
+++ b/wikipedia/Categories/NSString+WMFHTMLParsing.m
@@ -0,0 +1,25 @@
+#import "NSString+WMFHTMLParsing.h"
+#import "WikipediaAppUtils.h"
+#import <hpple/TFHpple.h>
+
+@implementation NSString (WMFHTMLParsing)
+
+- (NSArray*)wmf_htmlTextNodes
+{
+    return [[[[TFHpple alloc]
+            initWithHTMLData:[self dataUsingEncoding:NSUTF8StringEncoding]]
+            searchWithXPathQuery:@"//text()"]
+            valueForKey:WMF_SAFE_KEYPATH([TFHppleElement new], content)];
+}
+
+- (NSString*)wmf_joinedHtmlTextNodes
+{
+    return [self wmf_joinedHtmlTextNodesWithDelimiter:@" "];
+}
+
+- (NSString*)wmf_joinedHtmlTextNodesWithDelimiter:(NSString*)delimiter
+{
+    return [[self wmf_htmlTextNodes] componentsJoinedByString:delimiter];
+}
+
+@end
diff --git a/wikipedia/Categories/UICollectionViewFlowLayout+NSCopying.h b/wikipedia/Categories/UICollectionViewFlowLayout+NSCopying.h
new file mode 100644
index 00000000000..84224e82878
--- /dev/null
+++ b/wikipedia/Categories/UICollectionViewFlowLayout+NSCopying.h
@@ -0,0 +1,21 @@
+//
+//  UICollectionViewFlowLayout+NSCopying.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <UIKit/UIKit.h>
+
+@interface UICollectionViewFlowLayout (NSCopying)
+<NSCopying>
+
+/**
+ * Returns a copy of the receiver.
+ * @note Certain properties aren't copyable, including registered nibs or classes for reuse identifiers. Also, the
+ *       receiver's @c collectionView isn't copied, since it is only set after being set into a collection view.
+ */
+- (instancetype)copyWithZone:(NSZone *)zone;
+
+@end
diff --git a/wikipedia/Categories/UICollectionViewFlowLayout+NSCopying.m b/wikipedia/Categories/UICollectionViewFlowLayout+NSCopying.m
new file mode 100644
index 00000000000..ffef11ba631
--- /dev/null
+++ b/wikipedia/Categories/UICollectionViewFlowLayout+NSCopying.m
@@ -0,0 +1,29 @@
+//
+//  UICollectionViewFlowLayout+NSCopying.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "UICollectionViewFlowLayout+NSCopying.h"
+
+@implementation UICollectionViewFlowLayout (NSCopying)
+
+- (instancetype)copyWithZone:(NSZone *)zone
+{
+    UICollectionViewFlowLayout *copy = [[self class] new];
+    copy.scrollDirection = self.scrollDirection;
+    copy.minimumInteritemSpacing = self.minimumInteritemSpacing;
+    copy.sectionInset = self.sectionInset;
+    copy.minimumLineSpacing = self.minimumLineSpacing;
+    copy.itemSize = self.itemSize;
+    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 8.0) {
+        copy.estimatedItemSize = self.estimatedItemSize;
+    }
+    copy.headerReferenceSize = self.headerReferenceSize;
+    copy.footerReferenceSize = self.footerReferenceSize;
+    return copy;
+}
+
+@end
diff --git a/wikipedia/Categories/UICollectionViewFlowLayout+WMFItemSizeThatFits.h b/wikipedia/Categories/UICollectionViewFlowLayout+WMFItemSizeThatFits.h
new file mode 100644
index 00000000000..8750b9ef97e
--- /dev/null
+++ b/wikipedia/Categories/UICollectionViewFlowLayout+WMFItemSizeThatFits.h
@@ -0,0 +1,18 @@
+#import <UIKit/UIKit.h>
+
+@interface UICollectionViewFlowLayout (WMFItemSizeThatFits)
+
+/**
+ * Calculate a @c CGSize that fills @c size, minus any spacing or inset configured on the receiver.
+ * @param size The size an item should try to fill.
+ * @return The fitting @c CGSize, or @c CGSizeZero if the specified size is too small.
+ */
+- (CGSize)wmf_itemSizeThatFits:(CGSize)size;
+
+/// Set the receiver's @c itemSize to fit within the bounds of its @c collectionView.
+- (void)wmf_itemSizeToFit;
+
+/// Equivalent to @c -wmf_itemSizeToFit, but will raise an assertion if the fitting @c itemSize is @c CGSizeZero.
+- (void)wmf_strictItemSizeToFit;
+
+@end
diff --git a/wikipedia/Categories/UICollectionViewFlowLayout+WMFItemSizeThatFits.m b/wikipedia/Categories/UICollectionViewFlowLayout+WMFItemSizeThatFits.m
new file mode 100644
index 00000000000..850d72243ff
--- /dev/null
+++ b/wikipedia/Categories/UICollectionViewFlowLayout+WMFItemSizeThatFits.m
@@ -0,0 +1,31 @@
+#import "UICollectionViewFlowLayout+WMFItemSizeThatFits.h"
+
+@implementation UICollectionViewFlowLayout (WMFItemSizeThatFits)
+
+- (CGSize)wmf_itemSizeThatFits:(CGSize)size
+{
+    return CGSizeMake(fmaxf(size.width
+                              - self.sectionInset.left
+                              - self.sectionInset.right
+                              - self.minimumInteritemSpacing,
+                            0.f),
+                      fmaxf(size.height
+                              - self.sectionInset.top
+                              - self.sectionInset.bottom
+                              - self.minimumLineSpacing,
+                            0.f));
+}
+
+- (void)wmf_itemSizeToFit
+{
+    self.itemSize = [self wmf_itemSizeThatFits:self.collectionView.bounds.size];
+}
+
+- (void)wmf_strictItemSizeToFit
+{
+    CGSize sizeThatFits = [self wmf_itemSizeThatFits:self.collectionView.bounds.size];
+    NSParameterAssert(!CGSizeEqualToSize(sizeThatFits, CGSizeZero));
+    self.itemSize = sizeThatFits;
+}
+
+@end
diff --git a/wikipedia/Categories/UIFont+WMFStyle.m b/wikipedia/Categories/UIFont+WMFStyle.m
index 48bf2b846aa..8882b5d91eb 100644
--- a/wikipedia/Categories/UIFont+WMFStyle.m
+++ b/wikipedia/Categories/UIFont+WMFStyle.m
@@ -10,7 +10,7 @@ +(UIFont *)wmf_glyphFontOfSize:(CGFloat)fontSize;
     UIFont *font = [UIFont fontWithName:@"WikiFont-Glyphs" size:fontSize];
 
     NSAssert(font, @"Unable to load glyph font");
-    
+
     return font;
 }
 
diff --git a/wikipedia/Defines/WikiGlyph_Chars.h b/wikipedia/Defines/WikiGlyph_Chars.h
index f2769f7fdb3..054e660f1a8 100644
--- a/wikipedia/Defines/WikiGlyph_Chars.h
+++ b/wikipedia/Defines/WikiGlyph_Chars.h
@@ -25,3 +25,5 @@
 #define WIKIGLYPH_PENCIL                @"\ue967"
 #define WIKIGLYPH_LINK                  @"\ue968"
 #define WIKIGLYPH_CC                    @"\ue969"
+#define WIKIGLYPH_CITE                  @"\ue970"
+#define WIKIGLYPH_PUBLIC_DOMAIN         @"\ue971"
diff --git a/wikipedia/Networking/Fetchers/ArticleFetcher.m b/wikipedia/Networking/Fetchers/ArticleFetcher.m
index 3dd0e94befb..868892957cd 100644
--- a/wikipedia/Networking/Fetchers/ArticleFetcher.m
+++ b/wikipedia/Networking/Fetchers/ArticleFetcher.m
@@ -2,6 +2,7 @@
 //  Copyright (c) 2014 Wikimedia Foundation. Provided under MIT-style license; please copy and modify!
 
 #import "ArticleFetcher.h"
+#import "WMFNetworkUtilities.h"
 #import "Defines.h"
 #import "QueuesSingleton.h"
 #import "NSString+Extras.h"
@@ -132,15 +133,35 @@ -(NSDictionary *)getParamsForTitle:(NSString *)title
     NSMutableDictionary *params = @{
     @"format": @"json",
     @"action": @"mobileview",
-    @"sectionprop": @"toclevel|line|anchor|level|number|fromtitle|index",
+    @"sectionprop": WMFJoinedPropertyParameters(@[
+      @"toclevel",
+      @"line",
+      @"anchor",
+      @"level",
+      @"number",
+      @"fromtitle",
+      @"index"]),
     @"noheadings": @"true",
     @"sections": @"all",
     @"page": title,
     @"thumbsize": @(LEAD_IMAGE_WIDTH),
-    @"prop": @"sections|text|lastmodified|lastmodifiedby|languagecount|id|protection|editable|displaytitle|thumb|description",
+    @"prop": WMFJoinedPropertyParameters(@[
+      @"sections",
+      @"text",
+      @"lastmodified",
+      @"lastmodifiedby",
+      @"languagecount",
+      @"id",
+      @"protection",
+      @"editable",
+      @"displaytitle",
+      @"thumb",
+      @"description",
+      @"image"])
     }.mutableCopy;
 
     if ([SessionSingleton sharedInstance].sendUsageReports) {
+        // !!!: (bgerstle Feb 4 2015) we're getting an "unrecognized parameter" warning for appInstallID
         ReadingActionFunnel *funnel = [[ReadingActionFunnel alloc] init];
         params[@"appInstallID"] = funnel.appInstallID;
     }
@@ -207,13 +228,6 @@ -(void)removeMCCMNCHeaderFromRequestSerializer: (AFHTTPRequestSerializer *)reque
     [requestSerializer setValue:nil forHTTPHeaderField:@"X-MCCMNC"];
 }
 
-/*
--(void)dealloc
-{
-    NSLog(@"DEALLOC'ING ARTICLE FETCHER!");
-}
-*/
-
 -(void)createImageRecordsForSection:(int)sectionId
 {
     NSString *html = self.article.sections[sectionId].text;
@@ -231,16 +245,28 @@ -(void)createImageRecordsForSection:(int)sectionId
     
     NSData *sectionHtmlData = [html dataUsingEncoding:NSUTF8StringEncoding];
     TFHpple *sectionParser = [TFHpple hppleWithHTMLData:sectionHtmlData];
-    //NSString *imageXpathQuery = @"//img[@src]";
-    NSString *imageXpathQuery = @"//img[@src][not(ancestor::table[@class='navbox'])]";
+    NSString *imageLinkElementsXpathQuery = @"//a[@class='image']";
     // ^ the navbox exclusion prevents images from the hidden navbox table from appearing
     // in the last section's TOC cell.
     
-    NSArray *imageNodes = [sectionParser searchWithXPathQuery:imageXpathQuery];
+    NSArray *imageLinks = [sectionParser searchWithXPathQuery:imageLinkElementsXpathQuery];
     NSUInteger imageIndexInSection = 0;
     
-    for (TFHppleElement *imageNode in imageNodes) {
-        
+    for (TFHppleElement *linkNode in imageLinks) {
+        NSInteger imageNodeIndex = [linkNode.children indexOfObjectPassingTest:^BOOL(TFHppleElement *child, NSUInteger idx, BOOL *stop) {
+            if ([child.tagName isEqualToString:@"img"]) {
+                *stop = YES;
+                return YES;
+            } else {
+                return NO;
+            }
+        }];
+        NSParameterAssert(imageNodeIndex != NSNotFound);
+        if (imageNodeIndex == NSNotFound) {
+            // TODO: handle this error somehow, for now, go to the next linkNode
+            continue;
+        }
+        TFHppleElement *imageNode = linkNode.children[imageNodeIndex];
         NSString *height = imageNode.attributes[@"height"];
         NSString *width = imageNode.attributes[@"width"];
         
@@ -254,7 +280,6 @@ -(void)createImageRecordsForSection:(int)sectionId
             continue;
         }
         
-        NSString *alt = imageNode.attributes[@"alt"];
         NSString *src = imageNode.attributes[@"src"];
         int density = 1;
         
@@ -293,63 +318,10 @@ -(void)createImageRecordsForSection:(int)sectionId
         }
         
         MWKImage *image = [self.article importImageURL:src sectionId:sectionId];
+        // update filepage url and then save
+        image.filePageURL = linkNode.attributes[@"href"];
         [image save];
-        //Image *image = (Image *)[context getEntityForName: @"Image" withPredicateFormat:@"sourceUrl == %@", src];
-        
-        if (image) {
-            // If Image record already exists, update its attributes.
-            /*
-            image.alt = alt;
-            image.height = @(height.integerValue * density);
-            image.width = @(width.integerValue * density);
-             */
-        }else{
-            // If no Image record, create one setting its "data" attribute to nil. This allows the record to be
-            // created so it can be associated with the section in which this , then when the URLCache intercepts the request for this image
-            //image = [NSEntityDescription insertNewObjectForEntityForName:@"Image" inManagedObjectContext:context];
-            image = [self.article importImageURL:src sectionId:sectionId];
-            
-            /*
-             Moved imageData into own entity:
-             "For small to modest sized BLOBs (and CLOBs), you should create a separate
-             entity for the data and create a to-one relationship in place of the attribute."
-             See: http://stackoverflow.com/a/9288796/135557
-             
-             This allows core data to lazily load the image blob data only when it's needed.
-             */
-            /*
-            image.imageData = [NSEntityDescription insertNewObjectForEntityForName:@"ImageData" inManagedObjectContext:context];
-            
-            image.imageData.data = [[NSData alloc] init];
-            image.dataSize = @(image.imageData.data.length);
-            image.fileName = [src lastPathComponent];
-            image.fileNameNoSizePrefix = [image.fileName getWikiImageFileNameWithoutSizePrefix];
-            image.extension = [src pathExtension];
-            image.imageDescription = nil;
-            image.sourceUrl = src;
-            image.dateRetrieved = [NSDate date];
-            image.dateLastAccessed = [NSDate date];
-            image.width = @(width.integerValue * density);
-            image.height = @(height.integerValue * density);
-            image.mimeType = [image.extension getImageMimeTypeForExtension];
-            */
-        }
-        
-        // If imageSection doesn't already exist with the same index and image, create sectionImage record
-        // associating the image record (from line above) with section record and setting its index to the
-        // order from img tag parsing.
-        /*
-        SectionImage *sectionImage = (SectionImage *)[context getEntityForName: @"SectionImage"
-                                                           withPredicateFormat: @"section == %@ AND index == %@ AND image.sourceUrl == %@",
-                                                      self, @(imageIndexInSection), src
-                                                      ];
-        if (!sectionImage) {
-            sectionImage = [NSEntityDescription insertNewObjectForEntityForName:@"SectionImage" inManagedObjectContext:context];
-            sectionImage.image = image;
-            sectionImage.index = @(imageIndexInSection);
-            sectionImage.section = self;
-        }
-         */
+
         imageIndexInSection ++;
     }
     
@@ -371,15 +343,16 @@ -(void)associateThumbFromTempDirWithArticle
             thumbURL = [thumbURL getUrlWithoutScheme];
             
             // Associate Search/Nearby thumb url with article.thumbnailURL.
-            if (thumbURL) self.article.thumbnailURL = thumbURL;
+            if (thumbURL) { self.article.thumbnailURL = thumbURL; }
             
-            NSArray *cachePaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
-            NSString *cachePath = [cachePaths objectAtIndex:0];
-            
-            NSString *cacheFilePath = [cachePath stringByAppendingPathComponent:thumbURL.lastPathComponent];
+
+            NSString *cacheFilePath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES)
+                                        firstObject]
+                                        stringByAppendingPathComponent:thumbURL.lastPathComponent];
             BOOL isDirectory = NO;
-            BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:cacheFilePath isDirectory:&isDirectory];
-            if (fileExists) {
+            BOOL cachedFileExists = [[NSFileManager defaultManager] fileExistsAtPath:cacheFilePath
+                                                                         isDirectory:&isDirectory];
+            if (cachedFileExists) {
                 NSError *error = nil;
                 NSData *data = [NSData dataWithContentsOfFile:cacheFilePath options:0 error:&error];
                 if (!error) {
diff --git a/wikipedia/Networking/Fetchers/MWKImageInfoFetcher.h b/wikipedia/Networking/Fetchers/MWKImageInfoFetcher.h
new file mode 100644
index 00000000000..82834e43706
--- /dev/null
+++ b/wikipedia/Networking/Fetchers/MWKImageInfoFetcher.h
@@ -0,0 +1,29 @@
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/4/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "FetcherBase.h"
+
+@class MWKArticle;
+@class MWKSite;
+@class AFHTTPRequestOperation;
+@class AFHTTPRequestOperationManager;
+
+@interface MWKImageInfoFetcher : FetcherBase
+
+- (instancetype)initWithDelegate:(id<FetchFinishedDelegate>)delegate;
+
+/**
+ * Fetch the imageinfo for the given image page titles.
+ * @param imageTitles One or more page titles to get imageinfo for (e.g. @c "File:My_Image_Title.jpg).
+ * @param site        The wikipedia site which should be targeted (e.g. @c "en").
+ * @return An operation which can be used to set success and failure handling or cancel the originating request.
+ */
+- (AFHTTPRequestOperation*)fetchInfoForPageTitles:(NSArray*)imageTitles fromSite:(MWKSite*)site;
+
+/// Fetch the imageinfo for images in the specified article.
+- (AFHTTPRequestOperation*)fetchInfoForArticle:(MWKArticle*)article;
+
+@end
diff --git a/wikipedia/Networking/Fetchers/MWKImageInfoFetcher.m b/wikipedia/Networking/Fetchers/MWKImageInfoFetcher.m
new file mode 100644
index 00000000000..886515a9224
--- /dev/null
+++ b/wikipedia/Networking/Fetchers/MWKImageInfoFetcher.m
@@ -0,0 +1,96 @@
+// //  ArticleImageInfoFetcher.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/4/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKImageInfoFetcher.h"
+#import "WMFNetworkUtilities.h"
+#import "AFHTTPRequestOperationManager+WMFConfig.h"
+#import "MWKImageInfoResponseSerializer.h"
+#import "MWKArticle.h"
+#import "MWKImageList.h"
+#import <BlocksKit/BlocksKit.h>
+
+// FIXME: remove this soon
+#import "SessionSingleton.h"
+
+@interface MWKImageInfoFetcher ()
+
+@property (nonatomic, strong, readonly) AFHTTPRequestOperationManager *manager;
+
+// Designated initializer, can be used to inject a mock request manager while testing.
+- (instancetype)initWithDelegate:(id<FetchFinishedDelegate>)delegate
+                  requestManager:(AFHTTPRequestOperationManager*)requestManager;
+
+@end
+
+@implementation MWKImageInfoFetcher
+
+- (instancetype)initWithDelegate:(id<FetchFinishedDelegate>)delegate
+{
+    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    manager.responseSerializer = [MWKImageInfoResponseSerializer serializer];
+    return [self initWithDelegate:delegate requestManager:manager];
+}
+
+- (instancetype)initWithDelegate:(id<FetchFinishedDelegate>)delegate
+                  requestManager:(AFHTTPRequestOperationManager *)requestManager
+{
+    NSParameterAssert(requestManager);
+    self = [super init];
+    if (self) {
+        self.fetchFinishedDelegate = delegate;
+        _manager = requestManager;
+    }
+    return self;
+}
+
+- (AFHTTPRequestOperation*)fetchInfoForArticle:(MWKArticle *)article
+{
+    NSArray *filesToBeFetched = [[article.images uniqueLargestVariants] bk_map:^NSString*(MWKImage *image) {
+        NSAssert(image.canonicalFilename.length, @"Unable to form canonical filename from image: %@", image.sourceURL);
+        return [@"File:" stringByAppendingString:image.canonicalFilename];
+    }];
+    return [self fetchInfoForPageTitles:filesToBeFetched fromSite:article.site];
+}
+
+- (AFHTTPRequestOperation*)fetchInfoForPageTitles:(NSArray*)imageTitles fromSite:(MWKSite*)site
+{
+    NSParameterAssert([imageTitles count]);
+    NSParameterAssert(site);
+    NSAssert(site.language.length, @"Site must have a non-empty language in order to send requests: %@", site);
+
+    // TODO: loosen this coupling
+    NSString *url = [[[SessionSingleton sharedInstance] urlForLanguage:site.language] absoluteString];
+    NSAssert(url, @"Unable to form URL for language: %@", site.language);
+
+    __weak MWKImageInfoFetcher *weakSelf = self;
+    AFHTTPRequestOperation *request =
+    [self.manager
+     GET:url
+     parameters:@{
+        @"format": @"json",
+        @"action": @"query",
+        @"titles": WMFJoinedPropertyParameters(imageTitles),
+        @"rawcontinue": @"", //< suppress old continue warning
+        @"prop": @"imageinfo",
+        @"iiprop": WMFJoinedPropertyParameters(@[@"url", @"extmetadata"]),
+        @"iiextmetadatafilter": WMFJoinedPropertyParameters([MWKImageInfoResponseSerializer requiredExtMetadataKeys]),
+        // 1280 is a well-populated image width in back-end cache that gives good-enough quality on most iOS devices
+        @"iiurlwidth": @1280,
+     }
+     success:^(AFHTTPRequestOperation *operation, NSArray *galleryItems) {
+        MWKImageInfoFetcher *strSelf = weakSelf;
+        if (!strSelf) { return; }
+        [strSelf finishWithError:nil fetchedData:galleryItems];
+     } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
+        MWKImageInfoFetcher *strSelf = weakSelf;
+        if (!strSelf) { return; }
+        [strSelf finishWithError:error fetchedData:nil];
+     }];
+    return request;
+}
+
+@end
diff --git a/wikipedia/Networking/Queues/AFHTTPRequestOperationManager+WMFConfig.h b/wikipedia/Networking/Queues/AFHTTPRequestOperationManager+WMFConfig.h
new file mode 100644
index 00000000000..b5867ee3d85
--- /dev/null
+++ b/wikipedia/Networking/Queues/AFHTTPRequestOperationManager+WMFConfig.h
@@ -0,0 +1,23 @@
+//
+//  AFHTTPRequestOperationManager+WMFConfig.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/4/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <AFNetworking/AFHTTPRequestOperationManager.h>
+
+@interface AFHTTPRequestOperationManager (WMFConfig)
+
+/**
+ * Create a new instance configured with WMF application settings:
+ * - proprietary request headers
+ * - JSON response serializer
+ */
++ (instancetype)wmf_createDefaultManager;
+
+/// Configure the receiver to use WMF proprietary request headers.
+- (void)wmf_applyAppRequestHeaders;
+
+@end
diff --git a/wikipedia/Networking/Queues/AFHTTPRequestOperationManager+WMFConfig.m b/wikipedia/Networking/Queues/AFHTTPRequestOperationManager+WMFConfig.m
new file mode 100644
index 00000000000..e16547e832f
--- /dev/null
+++ b/wikipedia/Networking/Queues/AFHTTPRequestOperationManager+WMFConfig.m
@@ -0,0 +1,35 @@
+//
+//  AFHTTPRequestOperationManager+WMFConfig.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/4/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "AFHTTPRequestOperationManager+WMFConfig.h"
+#import "SessionSingleton.h"
+#import "ReadingActionFunnel.h"
+#import "WikipediaAppUtils.h"
+
+@implementation AFHTTPRequestOperationManager (WMFConfig)
+
++ (instancetype)wmf_createDefaultManager
+{
+    AFHTTPRequestOperationManager *manager = [self manager];
+    [manager wmf_applyAppRequestHeaders];
+    return manager;
+}
+
+- (void)wmf_applyAppRequestHeaders
+{
+    NSParameterAssert(self.requestSerializer);
+    [self.requestSerializer setValue:@"gzip" forHTTPHeaderField:@"Accept-Encoding"];
+    [self.requestSerializer setValue:[WikipediaAppUtils versionedUserAgent] forHTTPHeaderField:@"User-Agent"];
+    // Add the app install ID to the header, but only if the user has not opted out of logging
+    if ([SessionSingleton sharedInstance].sendUsageReports) {
+        ReadingActionFunnel *funnel = [[ReadingActionFunnel alloc] init];
+        [self.requestSerializer setValue:funnel.appInstallID forHTTPHeaderField:@"X-WMF-UUID"];
+    }
+}
+
+@end
diff --git a/wikipedia/Networking/Queues/QueuesSingleton.m b/wikipedia/Networking/Queues/QueuesSingleton.m
index be590ba98d9..818e457abd6 100644
--- a/wikipedia/Networking/Queues/QueuesSingleton.m
+++ b/wikipedia/Networking/Queues/QueuesSingleton.m
@@ -5,6 +5,8 @@
 #import "WikipediaAppUtils.h"
 #import "ReadingActionFunnel.h"
 #import "SessionSingleton.h"
+#import "AFHTTPRequestOperationManager+WMFConfig.h"
+#import <BlocksKit/BlocksKit.h>
 
 @implementation QueuesSingleton
 
@@ -29,104 +31,28 @@ - (id)init
 
 -(void)reset
 {
-    [self setupManagers];
-    
-    [self setRequestHeadersForManagers:@[
-                                         self.loginFetchManager,
-                                         self.articleFetchManager,
-                                         self.savedPagesFetchManager,
-                                         self.searchResultsFetchManager,
-                                         self.sectionWikiTextDownloadManager,
-                                         self.sectionWikiTextUploadManager,
-                                         self.sectionPreviewHtmlFetchManager,
-                                         self.languageLinksFetcher,
-                                         self.zeroRatedMessageFetchManager,
-                                         self.accountCreationFetchManager,
-                                         self.pageHistoryFetchManager,
-                                         self.assetsFetchManager,
-                                         self.nearbyFetchManager
-                                         ]];
-    
-    [self setDefaultSerializerForManagers:@[
-                                            self.articleFetchManager,
-                                            self.nearbyFetchManager,
-                                            self.searchResultsFetchManager,
-                                            self.assetsFetchManager,
-                                            self.articleFetchManager
-                                            ]];
-    
-    //[self setupQMonitorLogging];
-}
-
--(void)setupManagers
-{
-    self.loginFetchManager = [AFHTTPRequestOperationManager manager];
-    self.articleFetchManager = [AFHTTPRequestOperationManager manager];
-    self.savedPagesFetchManager = [AFHTTPRequestOperationManager manager];
-    self.searchResultsFetchManager = [AFHTTPRequestOperationManager manager];
-    self.sectionWikiTextDownloadManager = [AFHTTPRequestOperationManager manager];
-    self.sectionWikiTextUploadManager = [AFHTTPRequestOperationManager manager];
-    self.sectionPreviewHtmlFetchManager = [AFHTTPRequestOperationManager manager];
-    self.languageLinksFetcher = [AFHTTPRequestOperationManager manager];
-    self.zeroRatedMessageFetchManager = [AFHTTPRequestOperationManager manager];
-    self.accountCreationFetchManager = [AFHTTPRequestOperationManager manager];
-    self.pageHistoryFetchManager = [AFHTTPRequestOperationManager manager];
-    self.assetsFetchManager = [AFHTTPRequestOperationManager manager];
-    self.nearbyFetchManager = [AFHTTPRequestOperationManager manager];
-}
-
--(void)setRequestHeadersForManagers:(NSArray *)managers
-{
-    for (AFHTTPRequestOperationManager *manager in managers.copy) {
-        [self setRequestHeadersForManager:manager];
-    }
-}
-
--(void)setDefaultSerializerForManagers:(NSArray *)managers
-{
-    // Set the responseSerializer to AFHTTPResponseSerializer, so that it will no longer
-    // try to parse the JSON - needed because we use some managers to fetch different
-    // content types, say, both nearby json api data *and* thumbnails. Thumb responses
-    // are not json! And some managers, like the assetsFetchManager don't retrieve json
-    // at all.
-    // From: http://stackoverflow.com/a/21621530
-    for (AFHTTPRequestOperationManager *manager in managers.copy) {
-        manager.responseSerializer = [AFHTTPResponseSerializer serializer];
-    }
-}
-
--(void)setRequestHeadersForManager:(AFHTTPRequestOperationManager *)manager
-{
-    [manager.requestSerializer setValue:@"gzip" forHTTPHeaderField:@"Accept-Encoding"];
-    [manager.requestSerializer setValue:[WikipediaAppUtils versionedUserAgent] forHTTPHeaderField:@"User-Agent"];
-    // Add the app install ID to the header, but only if the user has not opted out of logging
-    if ([SessionSingleton sharedInstance].sendUsageReports) {
-        ReadingActionFunnel *funnel = [[ReadingActionFunnel alloc] init];
-        [manager.requestSerializer setValue:funnel.appInstallID forHTTPHeaderField:@"X-WMF-UUID"];
-    }
-
-    // x-www-form-urlencoded is default, so probably don't need it.
-    // See: http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1
-    //[manager.requestSerializer setValue:@"application/x-www-form-urlencoded; charset=UTF-8" forHTTPHeaderField:@"Content-Type"];
-}
-
--(void)setupQMonitorLogging
-{
-    // Listen in on the Q's op counts to ensure they go away properly.
-    [self.articleFetchManager.operationQueue addObserver:self forKeyPath:@"operationCount" options:NSKeyValueObservingOptionNew context:nil];
-    [self.searchResultsFetchManager.operationQueue addObserver:self forKeyPath:@"operationCount" options:NSKeyValueObservingOptionNew context:nil];
-}
-
-- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
-{
-    if ([keyPath isEqualToString:@"operationCount"]) {
-        dispatch_async(dispatch_get_main_queue(), ^(){
-            NSLog(@"QUEUE OP COUNTS: Search %lu, Article %lu",
-                (unsigned long)self.searchResultsFetchManager.operationQueue.operationCount,
-                (unsigned long)self.articleFetchManager.operationQueue.operationCount
-            );
-        });
-    }
+    self.loginFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.savedPagesFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.sectionWikiTextDownloadManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.sectionWikiTextUploadManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.sectionPreviewHtmlFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.languageLinksFetcher = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.zeroRatedMessageFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.accountCreationFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.pageHistoryFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+
+    self.assetsFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.nearbyFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.articleFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+    self.searchResultsFetchManager = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+
+    [@[self.assetsFetchManager,
+       self.nearbyFetchManager,
+       self.articleFetchManager,
+       self.searchResultsFetchManager]
+     bk_each:^(AFHTTPRequestOperationManager *manager) {
+         manager.responseSerializer = [AFHTTPResponseSerializer serializer];
+     }];
 }
 
 @end
diff --git a/wikipedia/Networking/Serializers/MWKImageInfoResponseSerializer.h b/wikipedia/Networking/Serializers/MWKImageInfoResponseSerializer.h
new file mode 100644
index 00000000000..76601e7b1c6
--- /dev/null
+++ b/wikipedia/Networking/Serializers/MWKImageInfoResponseSerializer.h
@@ -0,0 +1,16 @@
+//
+//  WMFImageMetadataSerializer.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/5/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <AFNetworking/AFURLResponseSerialization.h>
+
+
+@interface MWKImageInfoResponseSerializer : AFJSONResponseSerializer
+
++ (NSArray*)requiredExtMetadataKeys;
+
+@end
diff --git a/wikipedia/Networking/Serializers/MWKImageInfoResponseSerializer.m b/wikipedia/Networking/Serializers/MWKImageInfoResponseSerializer.m
new file mode 100644
index 00000000000..8c687cb40c0
--- /dev/null
+++ b/wikipedia/Networking/Serializers/MWKImageInfoResponseSerializer.m
@@ -0,0 +1,74 @@
+//
+//  WMFImageMetadataSerializer.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/5/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "MWKImageInfoResponseSerializer.h"
+#import "WMFNetworkUtilities.h"
+#import "MWKImageInfo.h"
+#import "NSString+WMFHTMLParsing.h"
+
+/// Required extmetadata keys, don't forget to add new ones to +requiredExtMetadataKeys!
+static NSString* const ExtMetadataImageDescriptionKey = @"ImageDescription";
+static NSString* const ExtMetadataArtistKey = @"Artist";
+static NSString* const ExtMetadataLicenseUrlKey = @"LicenseUrl";
+static NSString* const ExtMetadataLicenseShortNameKey = @"LicenseShortName";
+static NSString* const ExtMetadataLicenseKey = @"License";
+
+@implementation MWKImageInfoResponseSerializer
+
++ (NSArray*)requiredExtMetadataKeys
+{
+    return @[ExtMetadataLicenseKey,
+             ExtMetadataLicenseUrlKey,
+             ExtMetadataLicenseShortNameKey,
+             ExtMetadataImageDescriptionKey,
+             ExtMetadataArtistKey];
+}
+
+- (id)responseObjectForResponse:(NSURLResponse *)response
+                           data:(NSData *)data
+                          error:(NSError *__autoreleasing *)error
+{
+    NSDictionary *json = [super responseObjectForResponse:response data:data error:error];
+    if (!json || *error) { return nil; }
+    NSDictionary *apiError = json[@"error"];
+    if (apiError) {
+        if (error) {
+            *error = WMFErrorForApiErrorObject(apiError);
+        }
+        return nil;
+    }
+    NSDictionary *indexedImages = json[@"query"][@"pages"];
+    NSMutableArray *itemListBuilder = [NSMutableArray arrayWithCapacity:[[indexedImages allKeys] count]];
+    [indexedImages enumerateKeysAndObjectsUsingBlock:^(NSString *key, NSDictionary *image, BOOL *stop) {
+        NSDictionary *imageInfo = [image[@"imageinfo"] firstObject];
+        NSDictionary *extMetadata = imageInfo[@"extmetadata"];
+        // !!!: workaround for a nasty bug in JSON serialization in the back-end
+        if (![extMetadata isKindOfClass:[NSDictionary class]]) {
+            extMetadata = nil;
+        }
+        MWKLicense *license =
+            [[MWKLicense alloc]
+             initWithCode:extMetadata[ExtMetadataLicenseKey][@"value"]
+             shortDescription:extMetadata[ExtMetadataLicenseShortNameKey][@"value"]
+             URL:[NSURL URLWithString:extMetadata[ExtMetadataLicenseUrlKey][@"value"]]];
+        MWKImageInfo *item =
+            [[MWKImageInfo alloc]
+             initWithCanonicalPageTitle:image[@"title"]
+             canonicalFileURL:[NSURL URLWithString:imageInfo[@"url"]]
+             imageDescription:[extMetadata[ExtMetadataImageDescriptionKey][@"value"] wmf_joinedHtmlTextNodes]
+             license:license
+             filePageURL:[NSURL URLWithString:imageInfo[@"descriptionurl"]]
+             imageURL:[NSURL URLWithString:imageInfo[@"url"]]
+             imageThumbURL:[NSURL URLWithString:imageInfo[@"thumburl"]]
+             owner:[extMetadata[ExtMetadataArtistKey][@"value"] wmf_joinedHtmlTextNodes]];
+        [itemListBuilder addObject:item];
+    }];
+    return itemListBuilder;
+}
+
+@end
diff --git a/wikipedia/Networking/WMFNetworkUtilities.h b/wikipedia/Networking/WMFNetworkUtilities.h
new file mode 100644
index 00000000000..7da496c3544
--- /dev/null
+++ b/wikipedia/Networking/WMFNetworkUtilities.h
@@ -0,0 +1,28 @@
+//
+//  WMFNetworkUtilities.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/5/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <Foundation/Foundation.h>
+
+/// @name Constants
+
+FOUNDATION_EXPORT NSString* const WMFNetworkingErrorDomain;
+
+typedef NS_ENUM(NSInteger, WMFNetworkingError) {
+    WMFNetworkingError_APIError
+};
+
+
+/// @name Functions
+
+/**
+ * Take an array of strings and concatenate them with "|" as a delimiter.
+ * @return A string of the concatenated elements, or an empty string if @c props is empty or @c nil.
+ */
+FOUNDATION_EXPORT NSString* WMFJoinedPropertyParameters(NSArray *props);
+
+FOUNDATION_EXPORT NSError* WMFErrorForApiErrorObject(NSDictionary *apiError);
diff --git a/wikipedia/Networking/WMFNetworkUtilities.m b/wikipedia/Networking/WMFNetworkUtilities.m
new file mode 100644
index 00000000000..28cbacae0f0
--- /dev/null
+++ b/wikipedia/Networking/WMFNetworkUtilities.m
@@ -0,0 +1,31 @@
+//
+//  WMFNetworkUtilities.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/5/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "WMFNetworkUtilities.h"
+#import "NSMutableDictionary+WMFMaybeSet.h"
+
+NSString* const WMFNetworkingErrorDomain = @"WMFNetworkingErrorDomain";
+
+NSString * WMFJoinedPropertyParameters(NSArray *props)
+{
+    return [props ?: @[] componentsJoinedByString:@"|"];
+}
+
+NSError* WMFErrorForApiErrorObject(NSDictionary* apiError)
+{
+    if (!apiError) { return nil; }
+    // build the dictionary this way to avoid early nil termination caused by missing keys in the error obj
+    NSMutableDictionary *userInfoBuilder = [NSMutableDictionary dictionaryWithCapacity:3];
+    void(^maybeMapApiToUserInfo)(NSString*,NSString*) = ^(NSString* userInfoKey, NSString *apiErrorKey) {
+        [userInfoBuilder wmf_maybeSetObject:apiError[apiErrorKey] forKey:userInfoKey];
+    };
+    maybeMapApiToUserInfo(NSLocalizedDescriptionKey, @"code");
+    maybeMapApiToUserInfo(NSLocalizedFailureReasonErrorKey, @"info");
+    maybeMapApiToUserInfo(NSLocalizedRecoverySuggestionErrorKey, @"*");
+    return [NSError errorWithDomain:WMFNetworkingErrorDomain code:WMFNetworkingError_APIError userInfo:userInfoBuilder];
+}
\ No newline at end of file
diff --git a/wikipedia/View Controllers/Image Gallery/WMFImageGalleryCollectionViewCell.h b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryCollectionViewCell.h
new file mode 100644
index 00000000000..080a38af7fe
--- /dev/null
+++ b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryCollectionViewCell.h	
@@ -0,0 +1,17 @@
+//
+//  MWKImageGalleryCollectionViewCell.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 1/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <UIKit/UIKit.h>
+
+@class WMFImageGalleryDetailOverlayView;
+
+@interface WMFImageGalleryCollectionViewCell : UICollectionViewCell
+@property (nonatomic) UIImage *image;
+@property (nonatomic, weak, readonly) WMFImageGalleryDetailOverlayView *detailOverlayView;
+
+@end
diff --git a/wikipedia/View Controllers/Image Gallery/WMFImageGalleryCollectionViewCell.m b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryCollectionViewCell.m
new file mode 100644
index 00000000000..3eae7e75a57
--- /dev/null
+++ b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryCollectionViewCell.m	
@@ -0,0 +1,131 @@
+// //  MWKImageGalleryCollectionViewCell.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 1/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "WMFImageGalleryCollectionViewCell.h"
+#import "WMFImageGalleryDetailOverlayView.h"
+#import <BlocksKit/BlocksKit.h>
+
+@interface WMFImageGalleryCollectionViewCell ()
+<UIScrollViewDelegate>
+@property (nonatomic, weak, readonly) UIImageView *imageView;
+@property (nonatomic, weak, readonly) UIScrollView *imageContainerView;
+@end
+
+@implementation WMFImageGalleryCollectionViewCell
+
+- (instancetype)initWithFrame:(CGRect)frame
+{
+    self = [super initWithFrame:frame];
+    if (self) {
+        self.contentView.backgroundColor = [UIColor blackColor];
+        self.backgroundView.backgroundColor = [UIColor blackColor];
+        self.backgroundColor = [UIColor blackColor];
+
+        // image view's frame fills the scroll view's *bounds*, and zooming transforms it to the natural image size
+        UIImageView *imageView = [[UIImageView alloc] initWithFrame:self.contentView.bounds];
+        imageView.contentMode = UIViewContentModeScaleAspectFit;
+        _imageView = imageView;
+
+        // scroll view fills content view's bounds
+        UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:self.contentView.bounds];
+        imageScrollView.delegate = self;
+        _imageContainerView = imageScrollView;
+
+        // scroll view & image view layout is done programmatically
+        [imageScrollView addSubview:imageView];
+        [self.contentView addSubview:imageScrollView];
+
+        // detail overlay has a fixed height, set at the bottom of the content view, above the scroll view
+        NSNumber *detailHeight = @150.f;
+        WMFImageGalleryDetailOverlayView *detailOverlayView =
+            [[[NSBundle mainBundle] loadNibNamed:NSStringFromClass([WMFImageGalleryDetailOverlayView class])
+                                           owner:nil
+                                         options:nil] firstObject];
+
+        NSParameterAssert(detailOverlayView);
+        detailOverlayView.translatesAutoresizingMaskIntoConstraints = NO;
+
+        [self.contentView addSubview:detailOverlayView];
+        _detailOverlayView = detailOverlayView;
+
+        [self.contentView addConstraints:
+         [NSLayoutConstraint constraintsWithVisualFormat:@"V:[detailOverlayView(<=detailHeight@1000)]|"
+                                                 options:0
+                                                 metrics:NSDictionaryOfVariableBindings(detailHeight)
+                                                   views:NSDictionaryOfVariableBindings(detailOverlayView)]];
+
+        [self.contentView addConstraints:
+         [NSLayoutConstraint constraintsWithVisualFormat:@"H:|[detailOverlayView]|"
+                                                 options:0
+                                                 metrics:nil
+                                                   views:NSDictionaryOfVariableBindings(detailOverlayView)]];
+    }
+    return self;
+}
+
+- (void)prepareForReuse
+{
+    [super prepareForReuse];
+    self.image = nil;
+    self.detailOverlayView.imageDescriptionLabel.text = nil;
+    [self.detailOverlayView.ownerButton setAttributedTitle:nil forState:UIControlStateNormal];
+    self.detailOverlayView.hidden = YES;
+    self.detailOverlayView.ownerTapCallback = nil;
+}
+
+- (void)layoutSubviews
+{
+    [super layoutSubviews];
+
+    // scroll view zoom must be reset before resizing
+    // TODO: find current zoom rect and re-zoom to it once new max is set
+    self.imageContainerView.zoomScale = 1.f;
+
+    // set scroll view & image view to fill content view
+    self.imageContainerView.frame = self.contentView.bounds;
+    self.imageContainerView.contentSize = self.contentView.bounds.size;
+    self.imageView.frame = self.imageContainerView.bounds;
+
+    if (self.imageView.image) {
+        // max zoom * imageView.bounds.size = image.size
+        float const containerToNaturalWidthScale =
+            self.image.size.width / self.contentView.bounds.size.width;
+        float const containterToNaturalHeightScale =
+            self.image.size.height / self.contentView.bounds.size.height;
+        // max zoom scale should never be < min zoom scale (1)
+        self.imageContainerView.maximumZoomScale =
+            fmaxf(1.f, fmaxf(containerToNaturalWidthScale, containterToNaturalHeightScale));
+    } else {
+        self.imageContainerView.maximumZoomScale = 1.0;
+    }
+
+    self.imageContainerView.contentOffset = CGPointZero;
+    self.imageContainerView.zoomScale = self.imageContainerView.minimumZoomScale;
+}
+
+#pragma mark - Getters & Setters
+
+- (UIImage*)image
+{
+    return self.imageView.image;
+}
+
+- (void)setImage:(UIImage *)image
+{
+    if (self.imageView.image == image || [self.imageView.image isEqual:image]) { return; }
+    self.imageView.image = image;
+    [self setNeedsLayout];
+}
+
+#pragma mark - UIScrollViewDelegate
+
+- (UIView*)viewForZoomingInScrollView:(UIScrollView *)imageScrollView
+{
+    return self.imageView;
+}
+
+@end
diff --git a/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.h b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.h
new file mode 100644
index 00000000000..7080d89e2e9
--- /dev/null
+++ b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.h	
@@ -0,0 +1,18 @@
+//
+//  WMFImageGalleryDetailOverlayView.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/9/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <UIKit/UIKit.h>
+
+@interface WMFImageGalleryDetailOverlayView : UIView
+
+@property (nonatomic, copy) dispatch_block_t ownerTapCallback;
+
+- (UILabel*)imageDescriptionLabel;
+- (UIButton*)ownerButton;
+
+@end
diff --git a/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.m b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.m
new file mode 100644
index 00000000000..55e82584ceb
--- /dev/null
+++ b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.m	
@@ -0,0 +1,56 @@
+//
+//  WMFImageGalleryDetailOverlayView.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/9/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "WMFImageGalleryDetailOverlayView.h"
+#import <QuartzCore/CAGradientLayer.h>
+#import "PaddedLabel.h"
+#import "UIFont+WMFStyle.h"
+#import "WikiGlyph_Chars.h"
+
+@interface WMFImageGalleryDetailOverlayView ()
+@property (nonatomic, weak) IBOutlet UILabel *imageDescriptionLabel;
+@property (nonatomic, weak) IBOutlet UIButton *ownerButton;
+
+- (IBAction)didTapOwnerButton;
+
+@end
+
+@implementation WMFImageGalleryDetailOverlayView
+
+- (instancetype)initWithFrame:(CGRect)frame
+{
+    [NSException raise:@"ViewRequiresNibInstantiationException"
+                format:@"%@ is expecting to be loaded from a nib.", NSStringFromClass([self class])];
+    return nil;
+}
+
++ (Class)layerClass
+{
+    return [CAGradientLayer class];
+}
+
+- (CAGradientLayer*)gradientLayer
+{
+    return (CAGradientLayer*)self.layer;
+}
+
+- (void)awakeFromNib
+{
+    [super awakeFromNib];
+    [[self gradientLayer] setLocations:@[@0, @1]];
+    [[self gradientLayer] setColors:@[(id)[UIColor blackColor].CGColor, (id)[UIColor clearColor].CGColor]];
+    [[self gradientLayer] setStartPoint:CGPointMake(0.5, 0.7)];
+    [[self gradientLayer] setEndPoint:CGPointMake(0.5, 0.0)];
+}
+
+- (IBAction)didTapOwnerButton
+{
+    if (self.ownerTapCallback) { self.ownerTapCallback(); }
+}
+
+@end
diff --git a/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.xib b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.xib
new file mode 100644
index 00000000000..014ee8e2cbe
--- /dev/null
+++ b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryDetailOverlayView.xib	
@@ -0,0 +1,51 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="6254" systemVersion="14C109" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES">
+    <dependencies>
+        <deployment identifier="iOS"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="6247"/>
+    </dependencies>
+    <objects>
+        <placeholder placeholderIdentifier="IBFilesOwner" id="-1" userLabel="File's Owner"/>
+        <placeholder placeholderIdentifier="IBFirstResponder" id="-2" customClass="UIResponder"/>
+        <view opaque="NO" contentMode="scaleToFill" id="iN0-l3-epB" customClass="WMFImageGalleryDetailOverlayView">
+            <rect key="frame" x="0.0" y="0.0" width="438" height="169"/>
+            <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
+            <subviews>
+                <label opaque="NO" userInteractionEnabled="NO" contentMode="scaleToFill" verticalHuggingPriority="249" horizontalCompressionResistancePriority="250" verticalCompressionResistancePriority="250" placeholderIntrinsicWidth="388" placeholderIntrinsicHeight="100" text="" lineBreakMode="tailTruncation" numberOfLines="0" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" preferredMaxLayoutWidth="0.0" translatesAutoresizingMaskIntoConstraints="NO" id="I6f-Vm-XuX" userLabel="Image Description">
+                    <rect key="frame" x="20" y="20" width="398" height="87"/>
+                    <fontDescription key="fontDescription" type="system" pointSize="17"/>
+                    <color key="textColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
+                    <nil key="highlightedColor"/>
+                </label>
+                <button opaque="NO" contentMode="scaleToFill" contentHorizontalAlignment="fill" contentVerticalAlignment="fill" lineBreakMode="tailTruncation" translatesAutoresizingMaskIntoConstraints="NO" id="l6E-b6-poB">
+                    <rect key="frame" x="20" y="115" width="398" height="34"/>
+                    <state key="normal">
+                        <color key="titleColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
+                        <color key="titleShadowColor" white="0.5" alpha="1" colorSpace="calibratedWhite"/>
+                    </state>
+                    <connections>
+                        <action selector="didTapOwnerButton" destination="iN0-l3-epB" eventType="touchUpInside" id="jaw-0w-iI9"/>
+                    </connections>
+                </button>
+            </subviews>
+            <color key="backgroundColor" white="0.0" alpha="0.0" colorSpace="calibratedWhite"/>
+            <constraints>
+                <constraint firstItem="I6f-Vm-XuX" firstAttribute="top" secondItem="iN0-l3-epB" secondAttribute="top" constant="20" symbolic="YES" id="0L5-I0-Yi9"/>
+                <constraint firstItem="I6f-Vm-XuX" firstAttribute="leading" secondItem="iN0-l3-epB" secondAttribute="leading" constant="20" symbolic="YES" id="2k3-u8-8nA"/>
+                <constraint firstAttribute="bottom" relation="greaterThanOrEqual" secondItem="l6E-b6-poB" secondAttribute="bottom" constant="20" symbolic="YES" id="C0m-08-D2d"/>
+                <constraint firstAttribute="bottom" secondItem="l6E-b6-poB" secondAttribute="bottom" constant="20" symbolic="YES" id="PWz-xR-vOr"/>
+                <constraint firstItem="l6E-b6-poB" firstAttribute="leading" secondItem="iN0-l3-epB" secondAttribute="leading" constant="20" symbolic="YES" id="e6B-Lc-WcL"/>
+                <constraint firstItem="l6E-b6-poB" firstAttribute="top" secondItem="I6f-Vm-XuX" secondAttribute="bottom" constant="8" symbolic="YES" id="eSj-hx-LwA"/>
+                <constraint firstAttribute="trailing" secondItem="l6E-b6-poB" secondAttribute="trailing" constant="20" symbolic="YES" id="jVU-lo-Wm4"/>
+                <constraint firstAttribute="trailing" relation="greaterThanOrEqual" secondItem="l6E-b6-poB" secondAttribute="trailing" constant="20" symbolic="YES" id="plD-UM-3Zz"/>
+                <constraint firstAttribute="trailing" secondItem="I6f-Vm-XuX" secondAttribute="trailing" constant="20" symbolic="YES" id="tll-y7-tNL"/>
+            </constraints>
+            <freeformSimulatedSizeMetrics key="simulatedDestinationMetrics"/>
+            <connections>
+                <outlet property="imageDescriptionLabel" destination="I6f-Vm-XuX" id="fUv-oF-GNJ"/>
+                <outlet property="ownerButton" destination="l6E-b6-poB" id="y4l-ZK-1vr"/>
+            </connections>
+            <point key="canvasLocation" x="-1358" y="34.5"/>
+        </view>
+    </objects>
+</document>
diff --git a/wikipedia/View Controllers/Image Gallery/WMFImageGalleryViewController.h b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryViewController.h
new file mode 100644
index 00000000000..444e4311251
--- /dev/null
+++ b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryViewController.h	
@@ -0,0 +1,31 @@
+//
+//  MWKImageGalleryViewController.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 1/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import <UIKit/UIKit.h>
+
+@class MWKArticle;
+
+/// View controller which renders an article's images in a fullscreen, scrollable gallery.
+@interface WMFImageGalleryViewController : UICollectionViewController
+
+/// The article whose images are being displayed.
+@property (nonatomic, readonly) MWKArticle* article;
+
+/// Index of the currently visible image within the article's images.
+@property (nonatomic) NSUInteger visibleImageIndex;
+
+/**
+ * Designated initializer.
+ * @param article The article which will be the source of images for the gallery.
+ * @return A new @c MWKImageGalleryViewController.
+ */
+- (instancetype)initWithArticle:(MWKArticle*)article;
+
+- (void)setVisibleImageIndex:(NSUInteger)visibleImageIndex animated:(BOOL)animated;
+
+@end
diff --git a/wikipedia/View Controllers/Image Gallery/WMFImageGalleryViewController.m b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryViewController.m
new file mode 100644
index 00000000000..24755178e0e
--- /dev/null
+++ b/wikipedia/View Controllers/Image Gallery/WMFImageGalleryViewController.m	
@@ -0,0 +1,535 @@
+//
+//  WMFImageGalleryViewController.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 1/16/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "WMFImageGalleryViewController.h"
+#import <BlocksKit/BlocksKit.h>
+#import <AFNetworking/AFNetworking.h>
+#import "NSArray+BKIndex.h"
+#import "WikipediaAppUtils.h"
+#import "SessionSingleton.h"
+#import "MWNetworkActivityIndicatorManager.h"
+
+// View
+#import "WMFImageGalleryCollectionViewCell.h"
+#import "WMFImageGalleryDetailOverlayView.h"
+#import "UIFont+WMFStyle.h"
+#import "WikiGlyph_Chars.h"
+#import "UICollectionViewFlowLayout+NSCopying.h"
+#import "UICollectionViewFlowLayout+WMFItemSizeThatFits.h"
+#import "UIViewController+Alert.h"
+
+// Model
+#import "MWKDataStore.h"
+#import "MWKImage.h"
+#import "MWKLicense+ToGlyph.h"
+#import "MWKImageInfo+MWKImageComparison.h"
+
+// Networking
+#import "AFHTTPRequestOperationManager+WMFConfig.h"
+#import "AFHTTPRequestOperationManager+UniqueRequests.h"
+#import "MWKImageInfoFetcher.h"
+#import "MWKImageInfoResponseSerializer.h"
+
+#if 0
+#define ImgGalleryLog(...) NSLog(__VA_ARGS__)
+#else
+#define ImgGalleryLog(...)
+#endif
+
+@interface WMFImageGalleryViewController ()
+<UIGestureRecognizerDelegate>
+{
+    MWKImageInfoFetcher *_imageInfoFetcher;
+    AFHTTPRequestOperationManager *_imageFetcher;
+    NSDictionary *_indexedImageInfo;
+    NSArray *_uniqueArticleImages;
+}
+
+@property (nonatomic) BOOL didSetInitialItemSize;
+@property (nonatomic) BOOL didPerformInitialLayout;
+@property (nonatomic) BOOL didApplyInitialVisibleImageIndex;
+
+@property (nonatomic, weak, readonly) UIButton *closeButton;
+@property (nonatomic, getter=isChromeHidden) BOOL chromeHidden;
+@property (nonatomic, weak, readonly) UITapGestureRecognizer *chromeTapGestureRecognizer;
+
+@property (nonatomic, strong, readonly) AFHTTPRequestOperationManager *imageFetcher;
+@property (nonatomic, strong, readonly) MWKImageInfoFetcher *imageInfoFetcher;
+
+/// Array of the article's images without duplicates in order of appearance.
+@property (nonatomic, strong, readonly) NSArray *uniqueArticleImages;
+
+/// Map of canonical filenames to image info objects.
+@property (nonatomic, strong, readonly) NSDictionary *indexedImageInfo;
+
+/// Map of URLs to bitmaps, serves as a simple cache for uncompressed images.
+// !!!: This means we're store image data in 2 different memory locations, but we save a lot of time by not decoding
+@property (nonatomic, strong, readonly) NSMutableDictionary *bitmapsForImageURL;
+
+- (MWKDataStore*)dataStore;
+
+@end
+
+static NSAttributedString* ConcatOwnerAndLicense(NSString *owner, MWKLicense *license)
+{
+    NSMutableAttributedString *result = [NSMutableAttributedString new];
+    NSString *licenseGlyph = [license toGlyph];
+    if (licenseGlyph) {
+        [result appendAttributedString:
+         [[NSAttributedString alloc]
+          initWithString:[licenseGlyph stringByAppendingString:@" "]
+          attributes:@{NSFontAttributeName: [UIFont wmf_glyphFontOfSize:[UIFont labelFontSize]],
+                       NSForegroundColorAttributeName: [UIColor whiteColor]}]];
+    }
+    if (owner) {
+        [result appendAttributedString:
+         [[NSAttributedString alloc]
+          initWithString:owner
+          attributes:@{NSFontAttributeName: [UIFont systemFontOfSize:[UIFont labelFontSize]],
+                       NSForegroundColorAttributeName: [UIColor whiteColor]}]];
+    }
+    return result;
+}
+
+static NSString* const WMFImageGalleryCollectionViewCellReuseId = @"WMFImageGalleryCollectionViewCellReuseId";
+
+@implementation WMFImageGalleryViewController
+
+- (instancetype)initWithArticle:(MWKArticle *)article
+{
+    // TODO(bgerstle): use non-zero inset, disable bouncing, and customize scroll target to land images in center
+    UICollectionViewFlowLayout *defaultLayout = [[UICollectionViewFlowLayout alloc] init];
+    defaultLayout.sectionInset = UIEdgeInsetsZero;
+    defaultLayout.minimumInteritemSpacing = 0.f;
+    defaultLayout.minimumLineSpacing = 0.f;
+    defaultLayout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
+    // itemSize is based on view bounds, so we need to wait until it is about to appear to set it
+
+    self = [super initWithCollectionViewLayout:defaultLayout];
+    if (self) {
+        _article = article;
+        _bitmapsForImageURL = [NSMutableDictionary dictionaryWithCapacity:[_uniqueArticleImages count]];
+        _chromeHidden = NO;
+    }
+    return self;
+}
+
+- (BOOL)prefersStatusBarHidden
+{
+    return YES;
+}
+
+- (void)didReceiveMemoryWarning
+{
+    [super didReceiveMemoryWarning];
+    [self.bitmapsForImageURL removeAllObjects];
+}
+
+#pragma mark - Getters
+
+- (NSArray*)uniqueArticleImages
+{
+    if (!_uniqueArticleImages) {
+         _uniqueArticleImages = [self.article.images uniqueLargestVariants];
+    }
+    return _uniqueArticleImages;
+}
+
+- (NSDictionary*)indexedImageInfo
+{
+    if (!_indexedImageInfo) {
+        _indexedImageInfo = [[self.dataStore imageInfoForArticle:self.article]
+                             bk_indexWithKeypath:MWKImageAssociationKeyPath];
+    }
+    return _indexedImageInfo;
+}
+
+- (AFHTTPRequestOperationManager*)imageFetcher
+{
+    if (!_imageFetcher) {
+        _imageFetcher = [AFHTTPRequestOperationManager wmf_createDefaultManager];
+        _imageFetcher.responseSerializer = [AFImageResponseSerializer serializer];
+    }
+    return _imageFetcher;
+}
+
+- (MWKImageInfoFetcher*)imageInfoFetcher
+{
+    if (!_imageInfoFetcher) {
+        _imageInfoFetcher = [[MWKImageInfoFetcher alloc] initWithDelegate:nil];
+    }
+    return _imageInfoFetcher;
+}
+
+- (MWKDataStore*)dataStore
+{
+    return self.article.dataStore;
+}
+
+- (UICollectionViewFlowLayout*)collectionViewFlowLayout
+{
+    UICollectionViewFlowLayout *flowLayout = (UICollectionViewFlowLayout*)self.collectionView.collectionViewLayout;
+    if ([flowLayout isKindOfClass:[UICollectionViewFlowLayout class]]) {
+        return flowLayout;
+    } else if (flowLayout) {
+        [NSException raise:@"InvalidCollectionViewLayoutSubclass"
+                    format:@"%@ expected %@ to be a subclass of %@",
+                            self, flowLayout, NSStringFromClass([UICollectionViewFlowLayout class])];
+    }
+    return nil;
+}
+
+#pragma mark - Networking & Persistence
+
+- (void)fetchImageInfo
+{
+    [[MWNetworkActivityIndicatorManager sharedManager] push];
+    AFHTTPRequestOperation *requestOperation = [self.imageInfoFetcher fetchInfoForArticle:self.article];
+    requestOperation.completionQueue = dispatch_get_main_queue();
+
+    __weak WMFImageGalleryViewController *weakSelf = self;
+    [requestOperation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
+        [[MWNetworkActivityIndicatorManager sharedManager] pop];
+        WMFImageGalleryViewController *strSelf = weakSelf;
+        if (!strSelf) { return; }
+        // persist to disk then update UI
+        [[strSelf dataStore] saveImageInfo:operation.responseObject forArticle:strSelf.article];
+        [strSelf updateImageInfo:operation.responseObject];
+    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
+        [[MWNetworkActivityIndicatorManager sharedManager] pop];
+        WMFImageGalleryViewController *strSelf = weakSelf;
+        BOOL wasCancelled = [operation.error.domain isEqualToString:NSURLErrorDomain]
+                            && operation.error.code == NSURLErrorCancelled;
+        if (strSelf && !wasCancelled) {
+            [strSelf showAlert:error.localizedDescription type:ALERT_TYPE_TOP duration:-1];
+        }
+    }];
+}
+
+- (void)updateImageInfo:(NSArray*)imageInfo
+{
+    _indexedImageInfo = [imageInfo bk_indexWithKeypath:MWKImageAssociationKeyPath];
+    [self.collectionView reloadItemsAtIndexPaths:self.collectionView.indexPathsForVisibleItems];
+}
+
+#pragma mark - View event handling
+
+- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
+                                duration:(NSTimeInterval)duration
+{
+    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
+    if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)
+        == UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
+        return;
+    }
+
+    // need to capture visibleImageIndex before the animation, else collectionViewDelegate methods will throw it off
+    NSUInteger currentImageIndex = self.visibleImageIndex;
+    CGSize currentSize = self.view.bounds.size;
+    CGSize newBounds = CGSizeMake(currentSize.height, currentSize.width);
+    [UIView animateWithDuration:duration
+                          delay:0
+                        options:UIViewAnimationOptionAllowAnimatedContent | UIViewAnimationOptionBeginFromCurrentState
+                     animations:^{
+        self.collectionViewFlowLayout.itemSize = [self.collectionViewFlowLayout wmf_itemSizeThatFits:newBounds];
+    }
+                     completion:^ (BOOL finished) {
+        self.visibleImageIndex = currentImageIndex;
+    }];
+}
+
+- (void)viewWillAppear:(BOOL)animated
+{
+    [super viewWillAppear:animated];
+    // set this before, otherwise it won't be true inside other calls like viewDidLayoutSubviews
+    _didSetInitialItemSize = YES;
+    [self.collectionViewFlowLayout wmf_strictItemSizeToFit];
+    [self applyChromeHidden:animated];
+}
+
+- (void)viewDidAppear:(BOOL)animated
+{
+    [super viewDidAppear:animated];
+    // assert that all the expected state transitions happened
+    NSParameterAssert(_didSetInitialItemSize);
+    NSParameterAssert(_didPerformInitialLayout);
+    NSParameterAssert(_didApplyInitialVisibleImageIndex);
+}
+
+- (void)viewDidLayoutSubviews
+{
+    [super viewDidLayoutSubviews];
+
+    // reset item size once the collection view has been laid out
+    if (_didSetInitialItemSize && !_didPerformInitialLayout) {
+        _didPerformInitialLayout = YES;
+        [self applyVisibleImageIndex:NO];
+        // only set the flag *after* the visible index has been updated, to make sure UICollectionViewDelegate
+        // callbacks don't override it
+        _didApplyInitialVisibleImageIndex = YES;
+    }
+}
+
+- (void)viewDidLoad
+{
+    [super viewDidLoad];
+
+
+    // manually layout closeButton so we can programmatically increase it's hit size
+    NSString* closeButtonTitle = WIKIGLYPH_X;
+    UIFont* closeButtonFont = [UIFont wmf_glyphFontOfSize:[UIFont buttonFontSize]];
+    CGRect closeButtonFrame = CGRectInset((CGRect){
+                                            .origin = CGPointMake(8.f, 8.f),
+                                            .size = [closeButtonTitle sizeWithFont:closeButtonFont]
+                                          },
+                                          -15.f,
+                                          -15.f);
+    UIButton *closeButton = [[UIButton alloc] initWithFrame:closeButtonFrame];
+    closeButton.titleLabel.font = closeButtonFont;
+    [closeButton setTitle:closeButtonTitle forState:UIControlStateNormal];
+    [closeButton setTitleShadowColor:[UIColor blackColor] forState:UIControlStateNormal];
+    closeButton.titleLabel.shadowOffset = CGSizeMake(1.f, 1.f);
+    [closeButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
+    [closeButton addTarget:self
+                    action:@selector(didTouchCloseButton:)
+          forControlEvents:UIControlEventTouchUpInside];
+    [self.view addSubview:closeButton];
+    _closeButton = closeButton;
+
+    UITapGestureRecognizer *chromeTapGestureRecognizer =
+        [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTapView:)];
+
+    // make sure taps don't interfere w/ other gestures
+    chromeTapGestureRecognizer.delaysTouchesBegan = NO;
+    chromeTapGestureRecognizer.delaysTouchesEnded = NO;
+    chromeTapGestureRecognizer.cancelsTouchesInView = NO;
+    chromeTapGestureRecognizer.delegate = self;
+
+    // NOTE(bgerstle): recognizer must be added to collection view so as to not disrupt interactions w/ overlay UI
+    [self.collectionView addGestureRecognizer:chromeTapGestureRecognizer];
+    _chromeTapGestureRecognizer = chromeTapGestureRecognizer;
+
+    [self.collectionView registerClass:[WMFImageGalleryCollectionViewCell class]
+            forCellWithReuseIdentifier:WMFImageGalleryCollectionViewCellReuseId];
+
+    self.collectionView.pagingEnabled = YES;
+
+    [self fetchImageInfo];
+}
+
+#pragma mark - Chrome
+
+- (void)didTapView:(UITapGestureRecognizer*)sender
+{
+    [self toggleChromeHidden:YES];
+}
+
+- (void)toggleChromeHidden:(BOOL)animated
+{
+    [self setChromeHidden:![self isChromeHidden] animated:animated];
+}
+
+- (void)setChromeHidden:(BOOL)hidden
+{
+    [self setChromeHidden:hidden animated:NO];
+}
+
+- (void)setChromeHidden:(BOOL)hidden animated:(BOOL)animated
+{
+    if (_chromeHidden == hidden) { return; }
+    _chromeHidden = hidden;
+    [self applyChromeHidden:animated];
+}
+
+- (void)applyChromeHiddenToSubview:(UIView*)subview animated:(BOOL)animated
+{
+    if (animated) {
+        CATransition *fadeAnimation = [CATransition animation];
+        fadeAnimation.type = kCATransitionFade;
+        fadeAnimation.duration = [CATransaction animationDuration];
+        [subview.layer addAnimation:fadeAnimation forKey:@"com.wikimedia.wikipedia.imagegallery.chrome"];
+    }
+    [subview setHidden:[self isChromeHidden]];
+}
+
+- (void)applyChromeHidden:(BOOL)animated
+{
+    [self applyChromeHiddenToSubview:self.closeButton animated:animated];
+    for (WMFImageGalleryCollectionViewCell *cell in self.collectionView.visibleCells) {
+        [self applyChromeHiddenToSubview:cell.detailOverlayView animated:animated];
+    }
+}
+
+#pragma mark - Dismissal
+
+- (void)didTouchCloseButton:(id)sender
+{
+    [self dismissViewControllerAnimated:YES completion:nil];
+}
+
+#pragma mark - Visible Image Index
+
+- (void)applyVisibleImageIndex:(BOOL)animated
+{
+    if ([self isViewLoaded]) {
+        [self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:self.visibleImageIndex inSection:0]
+                                    atScrollPosition:UICollectionViewScrollPositionLeft
+                                            animated:animated];
+    }
+}
+
+- (void)setVisibleImageIndex:(NSUInteger)visibleImageIndex animated:(BOOL)animated
+{
+    if (visibleImageIndex == _visibleImageIndex) { return; }
+    NSParameterAssert(visibleImageIndex < self.uniqueArticleImages.count);
+    _visibleImageIndex = visibleImageIndex;
+    [self applyVisibleImageIndex:animated];
+}
+
+- (void)setVisibleImageIndex:(NSUInteger)visibleImageIndex
+{
+    [self setVisibleImageIndex:visibleImageIndex animated:NO];
+}
+
+#pragma mark - UIGestureRecognizerDelegate
+
+- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
+        shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
+{
+    return gestureRecognizer != self.chromeTapGestureRecognizer;
+}
+
+- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
+        shouldRequireFailureOfGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
+{
+    return gestureRecognizer == self.chromeTapGestureRecognizer;
+}
+
+#pragma mark - CollectionView
+
+#pragma mark Delegate
+
+- (void)collectionView:(UICollectionView *)collectionView
+       willDisplayCell:(UICollectionViewCell *)cell
+    forItemAtIndexPath:(NSIndexPath *)indexPath
+{
+    // only apply after initial visible index has been set
+    if (_didApplyInitialVisibleImageIndex) {
+        // silently update the visible image index (i.e. do *not* use the setter!)
+        _visibleImageIndex = indexPath.item;
+    }
+}
+
+#pragma mark DataSource
+
+- (UICollectionViewCell*)collectionView:(UICollectionView *)collectionView
+                 cellForItemAtIndexPath:(NSIndexPath *)indexPath
+{
+    WMFImageGalleryCollectionViewCell *cell =
+        (WMFImageGalleryCollectionViewCell*)
+        [collectionView dequeueReusableCellWithReuseIdentifier:WMFImageGalleryCollectionViewCellReuseId
+                                                  forIndexPath:indexPath];
+    MWKImage *imageStub = self.uniqueArticleImages[indexPath.item];
+    MWKImageInfo *infoForImage = self.indexedImageInfo[imageStub.infoAssociationValue];
+
+    cell.detailOverlayView.hidden = [self isChromeHidden];
+
+    cell.detailOverlayView.imageDescriptionLabel.text = infoForImage.imageDescription ?: @"";
+
+    [cell.detailOverlayView.ownerButton
+     setAttributedTitle:ConcatOwnerAndLicense(infoForImage.owner, infoForImage.license)
+     forState:UIControlStateNormal];
+
+    cell.detailOverlayView.ownerTapCallback = ^{
+        [[UIApplication sharedApplication] openURL:infoForImage.license.URL];
+    };
+
+    [self updateImageForCell:cell atIndexPath:indexPath image:imageStub info:infoForImage];
+
+    return cell;
+}
+
+- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
+{
+    return self.uniqueArticleImages.count;
+}
+
+#pragma mark - Cell Updates
+
+- (void)updateImageAtIndexPath:(NSIndexPath*)indexPath
+{
+    NSParameterAssert(indexPath);
+    MWKImage *image = self.uniqueArticleImages[indexPath.item];
+    MWKImageInfo *infoForImage = self.indexedImageInfo[image.infoAssociationValue];
+    WMFImageGalleryCollectionViewCell *cell =
+        (WMFImageGalleryCollectionViewCell*)[self.collectionView cellForItemAtIndexPath:indexPath];
+    [self updateImageForCell:cell atIndexPath:indexPath image:image info:infoForImage];
+}
+
+- (void)updateImageForCell:(WMFImageGalleryCollectionViewCell*)cell
+               atIndexPath:(NSIndexPath*)indexPath
+                     image:(MWKImage*)image
+                      info:(MWKImageInfo*)infoForImage
+{
+    NSParameterAssert(cell);
+    NSParameterAssert(indexPath);
+    NSParameterAssert(image);
+    UIImage *cachedBitmap = infoForImage.imageThumbURL ? self.bitmapsForImageURL[infoForImage.imageThumbURL] : nil;
+    if (cachedBitmap) {
+        ImgGalleryLog(@"Using cached bitmap for %@ at %@", infoForImage.imageThumbURL, indexPath);
+        cell.image = cachedBitmap;
+    } else {
+        ImgGalleryLog(@"Using article image (%@) as placeholder for thumbnail of cell %@", image.sourceURL, indexPath);
+        // !!!: -asUIImage reads from disk AND has to decompress image data, maybe we should move it off the main thread?
+        cell.image = [image asUIImage];
+        [self fetchImage:infoForImage.imageThumbURL forCellAtIndexPath:indexPath];
+    }
+}
+
+- (void)fetchImage:(NSURL*)imageURL forCellAtIndexPath:(NSIndexPath*)indexPath
+{
+    if (!imageURL) { return; }
+    NSParameterAssert(indexPath);
+
+    ImgGalleryLog(@"Fetching image at %@ for cell %@", imageURL.absoluteString, indexPath);
+
+    // TEMP(bgerstle): create a MWKImage record to ensure compressed image data is written to disk and cached
+    [[[MWKImage alloc] initWithArticle:self.article sourceURL:imageURL.absoluteString] save];
+
+    __weak WMFImageGalleryViewController *weakSelf = self;
+    AFHTTPRequestOperation *request =
+        [self.imageFetcher
+         wmf_idempotentGET:imageURL.absoluteString
+         parameters:nil
+         success:^(AFHTTPRequestOperation *operation, UIImage *image) {
+             dispatch_async(dispatch_get_main_queue(), ^{
+                 [[MWNetworkActivityIndicatorManager sharedManager] pop];
+                 WMFImageGalleryViewController *strSelf = weakSelf;
+                 if (!strSelf) { return; }
+                 ImgGalleryLog(@"Retrieved high-res image at %@ for cell %@", imageURL, indexPath);
+                 NSCParameterAssert(image);
+                 self.bitmapsForImageURL[imageURL] = image;
+                 WMFImageGalleryCollectionViewCell *cell =
+                     (WMFImageGalleryCollectionViewCell*)[self.collectionView cellForItemAtIndexPath:indexPath];
+                 cell.image = image;
+             });
+         }
+         failure:^(AFHTTPRequestOperation *operation, NSError *error) {
+             ImgGalleryLog(@"Failed to fetch image at %@ for cell %@: %@", operation.request.URL, indexPath, error);
+             dispatch_async(dispatch_get_main_queue(), ^{
+                 [[MWNetworkActivityIndicatorManager sharedManager] pop];
+             });
+         }];
+
+    if (request) {
+        // request will be nil if no request was sent (if another operation is already requesting the specified image)
+        [[MWNetworkActivityIndicatorManager sharedManager] push];
+    }
+}
+
+@end
diff --git a/wikipedia/View Controllers/LeadImage/LeadImageContainer.h b/wikipedia/View Controllers/LeadImage/LeadImageContainer.h
index 32b0dbd6b6a..43dfcd60e70 100644
--- a/wikipedia/View Controllers/LeadImage/LeadImageContainer.h	
+++ b/wikipedia/View Controllers/LeadImage/LeadImageContainer.h	
@@ -9,7 +9,7 @@
     -(void)leadImageHeightChangedTo: (NSNumber *)height;
 @end
 
-@interface LeadImageContainer : UIView <FetchFinishedDelegate>
+@interface LeadImageContainer : UIControl <FetchFinishedDelegate>
 
 -(void)showForArticle:(MWKArticle *)article;
 
diff --git a/wikipedia/View Controllers/LeadImage/LeadImageContainer.m b/wikipedia/View Controllers/LeadImage/LeadImageContainer.m
index f82b54358fe..29ebbea1eed 100644
--- a/wikipedia/View Controllers/LeadImage/LeadImageContainer.m	
+++ b/wikipedia/View Controllers/LeadImage/LeadImageContainer.m	
@@ -22,7 +22,12 @@
 the image to best center the currently hightlighted face.
 Do *not* leave this set to YES for release.
 */
-#define HIGHLIGHT_FOCAL_FACE NO
+#if DEBUG
+#define HIGHLIGHT_FOCAL_FACE 0
+#else
+// disable in release builds
+#define HIGHLIGHT_FOCAL_FACE 0
+#endif
 
 @interface LeadImageContainer()
 
@@ -54,21 +59,19 @@ -(void)awakeFromNib
                                                       [self updateNonImageElements];
                                                       
                                                   }];
+    #if HIGHLIGHT_FOCAL_FACE
+    // Testing code so we can hit "Command-Shift-M" to toggle through focal images.
+    [[NSNotificationCenter defaultCenter] addObserverForName: UIApplicationDidReceiveMemoryWarningNotification
+                                                      object: nil
+                                                       queue: [NSOperationQueue mainQueue]
+                                                  usingBlock: ^(NSNotification *note) {
 
-    if (HIGHLIGHT_FOCAL_FACE) {
-
-        // Testing code so we can hit "Command-Shift-M" to toggle through focal images.
-        [[NSNotificationCenter defaultCenter] addObserverForName: UIApplicationDidReceiveMemoryWarningNotification
-                                                          object: nil
-                                                           queue: [NSOperationQueue mainQueue]
-                                                      usingBlock: ^(NSNotification *note) {
-
-                                                          // Repeated calls to getFaceBounds returns next face bounds each time.
-                                                          self.focalFaceBounds = [self.image getFaceBounds];
-                                                          [self setNeedsDisplay];
+                                                      // Repeated calls to getFaceBounds returns next face bounds each time.
+                                                      self.focalFaceBounds = [self.image getFaceBounds];
+                                                      [self setNeedsDisplay];
 
-                                                      }];
-    }
+                                                  }];
+    #endif
 
     // Important! "clipsToBounds" must be "NO" so super long titles lay out properly!
     self.clipsToBounds = NO;
diff --git a/wikipedia/View Controllers/LeadImage/LeadImageContainer.xib b/wikipedia/View Controllers/LeadImage/LeadImageContainer.xib
index 83ea2703680..4ea8f79a034 100644
--- a/wikipedia/View Controllers/LeadImage/LeadImageContainer.xib	
+++ b/wikipedia/View Controllers/LeadImage/LeadImageContainer.xib	
@@ -11,7 +11,7 @@
             <rect key="frame" x="0.0" y="0.0" width="363" height="223"/>
             <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
             <subviews>
-                <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="QrQ-tJ-JFg" userLabel="Title Description Container">
+                <view userInteractionEnabled="NO" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="QrQ-tJ-JFg" userLabel="Title Description Container">
                     <rect key="frame" x="0.0" y="158" width="363" height="65"/>
                     <subviews>
                         <label opaque="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" lineBreakMode="wordWrap" numberOfLines="0" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="Mg1-h3-cDH" userLabel="Title Label" customClass="LeadImageTitleLabel">
@@ -41,6 +41,7 @@
                 </view>
             </subviews>
             <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="calibratedWhite"/>
+            <gestureRecognizers/>
             <constraints>
                 <constraint firstItem="QrQ-tJ-JFg" firstAttribute="leading" secondItem="iN0-l3-epB" secondAttribute="leading" id="PYF-36-bR4"/>
                 <constraint firstAttribute="trailing" secondItem="QrQ-tJ-JFg" secondAttribute="trailing" id="RQe-yG-bqL"/>
diff --git a/wikipedia/View Controllers/SearchResults/SearchResultPrototypeView.xib b/wikipedia/View Controllers/SearchResults/SearchResultPrototypeView.xib
index e2c3b5bb2c0..7689e673dc3 100644
--- a/wikipedia/View Controllers/SearchResults/SearchResultPrototypeView.xib	
+++ b/wikipedia/View Controllers/SearchResults/SearchResultPrototypeView.xib	
@@ -1,8 +1,8 @@
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
-<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="6250" systemVersion="14B25" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES">
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="6254" systemVersion="14C109" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES">
     <dependencies>
         <deployment identifier="iOS"/>
-        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="6244"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="6247"/>
     </dependencies>
     <objects>
         <placeholder placeholderIdentifier="IBFilesOwner" id="-1" userLabel="File's Owner"/>
diff --git a/wikipedia/View Controllers/WebView/WebViewController+ImageGalleryPresentation.h b/wikipedia/View Controllers/WebView/WebViewController+ImageGalleryPresentation.h
new file mode 100644
index 00000000000..5cfd433a935
--- /dev/null
+++ b/wikipedia/View Controllers/WebView/WebViewController+ImageGalleryPresentation.h	
@@ -0,0 +1,15 @@
+//
+//  WebViewController+ImageGalleryPresentation.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/9/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "WebViewController.h"
+
+@interface WebViewController (ImageGalleryPresentation)
+
+- (void)presentGalleryForArticle:(MWKArticle*)article showingImage:(MWKImage*)selectedImage;
+
+@end
diff --git a/wikipedia/View Controllers/WebView/WebViewController+ImageGalleryPresentation.m b/wikipedia/View Controllers/WebView/WebViewController+ImageGalleryPresentation.m
new file mode 100644
index 00000000000..54a429976e9
--- /dev/null
+++ b/wikipedia/View Controllers/WebView/WebViewController+ImageGalleryPresentation.m	
@@ -0,0 +1,46 @@
+//
+//  WebViewController+ImageGalleryPresentation.m
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/9/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "WebViewController_Private.h"
+#import "WebViewController+ImageGalleryPresentation.h"
+#import "WMFImageGalleryViewController.h"
+
+@implementation WebViewController (ImageGalleryPresentation)
+
+- (void)presentGalleryForArticle:(MWKArticle*)article showingImage:(MWKImage*)selectedImage
+{
+    [self cancelArticleLoading];
+    [self cancelSearchLoading];
+
+    NSArray *images = [session.article.images uniqueLargestVariants];
+
+    // !!!: hack until we fix race condition between images loading and tap
+    if (!images || images.count == 0) { return; }
+
+    NSInteger selectedImageIndex =
+        [images indexOfObjectPassingTest:
+         ^BOOL(MWKImage *image, NSUInteger idx, BOOL *stop) {
+             if ([image isEqualToImage:selectedImage] || [image isVariantOfImage:selectedImage]) {
+                 *stop = YES;
+                 return YES;
+             }
+             return NO;
+         }];
+
+    if (selectedImageIndex == NSNotFound) {
+        NSLog(@"WARNING: falling back to showing the first image.");
+        selectedImageIndex = 0;
+    }
+
+    WMFImageGalleryViewController *gallery =
+        [[WMFImageGalleryViewController alloc] initWithArticle:article];
+    gallery.visibleImageIndex = selectedImageIndex;
+    [self presentViewController:gallery animated:YES completion:nil];
+}
+
+@end
diff --git a/wikipedia/View Controllers/WebView/WebViewController.h b/wikipedia/View Controllers/WebView/WebViewController.h
index 54d38d3345d..647d78296fd 100644
--- a/wikipedia/View Controllers/WebView/WebViewController.h	
+++ b/wikipedia/View Controllers/WebView/WebViewController.h	
@@ -18,8 +18,6 @@ extern NSString *const WebViewControllerShareSelectedText;
 
 @interface WebViewController : PullToRefreshViewController <UIWebViewDelegate, UIScrollViewDelegate, UIGestureRecognizerDelegate, UIAlertViewDelegate, FetchFinishedDelegate, LeadImageHeightDelegate, DataMigrationProgressDelegete>
 
-
-
 @property (weak, nonatomic) IBOutlet UIWebView *webView;
 @property (nonatomic) BOOL bottomMenuHidden;
 @property (nonatomic) BOOL referencesHidden;
diff --git a/wikipedia/View Controllers/WebView/WebViewController.m b/wikipedia/View Controllers/WebView/WebViewController.m
index 9092e9357cf..81eccb9c9ad 100644
--- a/wikipedia/View Controllers/WebView/WebViewController.m	
+++ b/wikipedia/View Controllers/WebView/WebViewController.m	
@@ -1,153 +1,17 @@
 //  Created by Brion on 10/27/13.
 //  Copyright (c) 2013 Wikimedia Foundation. Provided under MIT-style license; please copy and modify!
 
-#import "WebViewController.h"
-
-#import "WikipediaAppUtils.h"
-#import "WikipediaZeroMessageFetcher.h"
-#import "SectionEditorViewController.h"
-#import "CommunicationBridge.h"
-#import "TOCViewController.h"
-#import "SessionSingleton.h"
-#import "QueuesSingleton.h"
-#import "TopMenuTextField.h"
-#import "TopMenuTextFieldContainer.h"
-#import "MWLanguageInfo.h"
-#import "CenterNavController.h"
-#import "Defines.h"
-#import "UIViewController+SearchChildViewControllers.h"
-#import "UIScrollView+NoHorizontalScrolling.h"
-#import "UIViewController+HideKeyboard.h"
-#import "UIWebView+HideScrollGradient.h"
-#import "UIWebView+ElementLocation.h"
-#import "UIView+RemoveConstraints.h"
-#import "UIViewController+Alert.h"
-#import "NSString+Extras.h"
-#import "PaddedLabel.h"
-#import "RootViewController.h"
-#import "TopMenuViewController.h"
-#import "BottomMenuViewController.h"
-#import "LanguagesViewController.h"
-#import "ModalMenuAndContentViewController.h"
-#import "UIViewController+ModalPresent.h"
-#import "MWKSection+DisplayHtml.h"
-#import "EditFunnel.h"
-#import "ProtectedEditAttemptFunnel.h"
-#import "DataHousekeeping.h"
-#import "NSDate-Utilities.h"
-#import "AccountCreationViewController.h"
-#import "OnboardingViewController.h"
-#import "TopMenuContainerView.h"
-#import "WikiGlyph_Chars.h"
-#import "UINavigationController+TopActionSheet.h"
-#import "ReferencesVC.h"
-#import "WMF_Colors.h"
-#import "NSArray+Predicate.h"
-#import "WikiGlyphButton.h"
-#import "WikiGlyphLabel.h"
-#import "NSString+FormattedAttributedString.h"
-#import "SavedPagesFunnel.h"
-#import "ArticleFetcher.h"
-#import "AssetsFileFetcher.h"
+#import "WebViewController_Private.h"
 
-#import "LeadImageContainer.h"
-#import "DataMigrationProgressViewController.h"
-#import "UIFont+WMFStyle.h"
-
-//#import "UIView+Debugging.h"
-
-#define TOC_TOGGLE_ANIMATION_DURATION @0.225f
-
-#define SCROLL_INDICATOR_LEFT_MARGIN 2.0
-#define SCROLL_INDICATOR_WIDTH 4.0
-#define SCROLL_INDICATOR_HEIGHT 25.0
-#define SCROLL_INDICATOR_CORNER_RADIUS 2.0f
-#define SCROLL_INDICATOR_BORDER_WIDTH 1.0f
-#define SCROLL_INDICATOR_BORDER_COLOR [UIColor lightGrayColor]
-#define SCROLL_INDICATOR_BACKGROUND_COLOR [UIColor whiteColor]
-
-#define BOTTOM_SCROLL_LIMIT_HEIGHT 2000
-
-// This controls how fast the swipe has to be (side-to-side).
-#define TOC_SWIPE_TRIGGER_MIN_X_VELOCITY 600.0f
-// This controls what angle from the horizontal axis will trigger the swipe.
-#define TOC_SWIPE_TRIGGER_MAX_ANGLE 45.0f
-
-// TODO: rename the WebViewControllerVariableNames once we rename this class
-NSString *const WebViewControllerTextWasHighlighted = @"textWasSelected";
-NSString *const WebViewControllerWillShareNotification = @"SelectionShare";
-NSString *const WebViewControllerShareBegin = @"beginShare";
-NSString *const WebViewControllerShareSelectedText = @"selectedText";
-NSString *const kSelectedStringJS = @"window.getSelection().toString()";
-static const int kMinimumTextSelectionLength = 10;
-
-@interface WebViewController () <LanguageSelectionDelegate>{
-
-}
-
-@property (strong, nonatomic) CommunicationBridge *bridge;
-
-@property (nonatomic) CGPoint lastScrollOffset;
-
-@property (nonatomic) BOOL unsafeToScroll;
-
-@property (nonatomic) float relativeScrollOffsetBeforeRotate;
-@property (nonatomic) NSUInteger sectionToEditId;
-
-@property (strong, nonatomic) NSDictionary *adjacentHistoryIDs;
-@property (strong, nonatomic) NSString *externalUrl;
-
-@property (weak, nonatomic) IBOutlet UIView *bottomBarView;
-
-@property (weak, nonatomic) IBOutlet NSLayoutConstraint *tocViewWidthConstraint;
-@property (weak, nonatomic) IBOutlet NSLayoutConstraint *tocViewLeadingConstraint;
-
-@property (strong, nonatomic) UIView *scrollIndicatorView;
-@property (strong, nonatomic) NSLayoutConstraint *scrollIndicatorViewTopConstraint;
-@property (strong, nonatomic) NSLayoutConstraint *scrollIndicatorViewHeightConstraint;
-
-@property (strong, nonatomic) TOCViewController *tocVC;
-
-@property (strong, nonatomic) UIPanGestureRecognizer* panSwipeRecognizer;
-
-@property (strong, nonatomic) IBOutlet PaddedLabel *zeroStatusLabel;
-
-@property (nonatomic) BOOL unsafeToToggleTOC;
-
-@property (strong, nonatomic) ReferencesVC *referencesVC;
-@property (weak, nonatomic) IBOutlet UIView *referencesContainerView;
-
-@property (strong, nonatomic) NSLayoutConstraint *bottomBarViewBottomConstraint;
-@property (strong, nonatomic) IBOutlet NSLayoutConstraint *referencesContainerViewBottomConstraint;
-@property (strong, nonatomic) IBOutlet NSLayoutConstraint *referencesContainerViewHeightConstraint;
-
-@property (copy) NSString *jumpToFragment;
-
-@property (nonatomic) BOOL editable;
-@property (copy) MWKProtectionStatus *protectionStatus;
-
-// These are presently only used by updateHistoryDateVisitedForArticleBeingNavigatedFrom method.
-@property (strong, nonatomic) MWKTitle *currentTitle;
-
-@property (weak, nonatomic) IBOutlet NSLayoutConstraint *bottomNavHeightConstraint;
-
-@property (strong, nonatomic) UIActivityIndicatorView *activityIndicator;
-@property (strong, nonatomic) UIView *activityIndicatorBackgroundView;
-
-@property (strong, nonatomic) LeadImageContainer *leadImageContainer;
-
-@property (strong, nonatomic) IBOutlet NSLayoutConstraint *webViewBottomConstraint;
-
-@property (nonatomic) BOOL didLastNavigateByBackOrForward;
-
-@end
+NSString* const WebViewControllerTextWasHighlighted = @"textWasSelected";
+NSString* const WebViewControllerWillShareNotification = @"SelectionShare";
+NSString* const WebViewControllerShareBegin = @"beginShare";
+NSString* const WebViewControllerShareSelectedText = @"selectedText";
+NSString* const kSelectedStringJS = @"window.getSelection().toString()";
 
 #pragma mark Internal variables
 
-@implementation WebViewController {
-    CGFloat scrollViewDragBeganVerticalOffset_;
-    SessionSingleton *session;
-}
+@implementation WebViewController
 
 - (BOOL)prefersStatusBarHidden
 {
@@ -921,24 +785,27 @@ -(void)setupBridge
 
     __weak WebViewController *weakSelf = self;
     [self.bridge addListener:@"linkClicked" withBlock:^(NSString *messageType, NSDictionary *payload) {
+        WebViewController *strSelf = weakSelf;
+        if (!strSelf) { return; }
+
         NSString *href = payload[@"href"];
 
-        if([weakSelf tocDrawerIsOpen]){
-            [weakSelf tocHide];
+        if([strSelf tocDrawerIsOpen]){
+            [strSelf tocHide];
             return;
         }
 
-        if(!weakSelf.referencesHidden) [weakSelf referencesHide];
+        if(!strSelf.referencesHidden) [strSelf referencesHide];
         
         // @todo merge this link title extraction into MWSite
         if ([href hasPrefix:@"/wiki/"]) {
 
             // Ensure the menu is visible when navigating to new page.
-            [weakSelf animateTopAndBottomMenuReveal];
+            [strSelf animateTopAndBottomMenuReveal];
         
             MWKTitle *pageTitle = [[SessionSingleton sharedInstance].site titleWithInternalLink:href];
 
-            [weakSelf navigateToPage: pageTitle
+            [strSelf navigateToPage: pageTitle
                      discoveryMethod: MWK_DISCOVERY_METHOD_LINK
                 showLoadingIndicator: YES];
         } else if ([href hasPrefix:@"http:"] || [href hasPrefix:@"https:"] || [href hasPrefix:@"//"]) {
@@ -953,11 +820,11 @@ -(void)setupBridge
             // Then validate if it's still in Wikipedia land and branch appropriately.
             if ([SessionSingleton sharedInstance].zeroConfigState.disposition &&
                 [[NSUserDefaults standardUserDefaults] boolForKey:@"ZeroWarnWhenLeaving"]) {
-                weakSelf.externalUrl = href;
+                strSelf.externalUrl = href;
                 UIAlertView *dialog = [[UIAlertView alloc]
                                        initWithTitle:MWLocalizedString(@"zero-interstitial-title", nil)
                                        message:MWLocalizedString(@"zero-interstitial-leave-app", nil)
-                                       delegate:weakSelf
+                                       delegate:strSelf
                                        cancelButtonTitle:MWLocalizedString(@"zero-interstitial-cancel", nil)
                                        otherButtonTitles:MWLocalizedString(@"zero-interstitial-continue", nil)
                                        , nil];
@@ -970,63 +837,76 @@ -(void)setupBridge
     }];
 
     [self.bridge addListener:@"editClicked" withBlock:^(NSString *messageType, NSDictionary *payload) {
+        WebViewController *strSelf = weakSelf;
+        if (!strSelf) { return; }
 
-        if([weakSelf tocDrawerIsOpen]){
-            [weakSelf tocHide];
+        if([strSelf tocDrawerIsOpen]){
+            [strSelf tocHide];
             return;
         }
         
-        if (weakSelf.editable) {
-            weakSelf.sectionToEditId = [payload[@"sectionId"] integerValue];
-            [weakSelf showSectionEditor];
+        if (strSelf.editable) {
+            strSelf.sectionToEditId = [payload[@"sectionId"] integerValue];
+            [strSelf showSectionEditor];
         } else {
             ProtectedEditAttemptFunnel *funnel = [[ProtectedEditAttemptFunnel alloc] init];
-            [funnel logProtectionStatus:[[weakSelf.protectionStatus allowedGroupsForAction:@"edit"] componentsJoinedByString:@","]];
-            [weakSelf showProtectedDialog];
+            [funnel logProtectionStatus:[[strSelf.protectionStatus allowedGroupsForAction:@"edit"] componentsJoinedByString:@","]];
+            [strSelf showProtectedDialog];
         }
     }];
     
     [self.bridge addListener:@"langClicked" withBlock:^(NSString *messageType, NSDictionary *payload) {
-        if([weakSelf tocDrawerIsOpen]){
-            [weakSelf tocHide];
+        WebViewController *strSelf = weakSelf;
+        if (!strSelf) { return; }
+
+        if([strSelf tocDrawerIsOpen]){
+            [strSelf tocHide];
             return;
         }
 
         NSLog(@"Language button pushed");
-        [weakSelf languageButtonPushed];
+        [strSelf languageButtonPushed];
     }];
     
     [self.bridge addListener:@"historyClicked" withBlock:^(NSString *messageType, NSDictionary *payload) {
-        if([weakSelf tocDrawerIsOpen]){
-            [weakSelf tocHide];
+        WebViewController *strSelf = weakSelf;
+        if (!strSelf) { return; }
+
+        if([strSelf tocDrawerIsOpen]){
+            [strSelf tocHide];
             return;
         }
 
-        [weakSelf historyButtonPushed];
+        [strSelf historyButtonPushed];
     }];
     
     [self.bridge addListener:@"nonAnchorTouchEndedWithoutDragging" withBlock:^(NSString *messageType, NSDictionary *payload) {
+        WebViewController *strSelf = weakSelf;
+        if (!strSelf) { return; }
+
         NSLog(@"nonAnchorTouchEndedWithoutDragging = %@", payload);
 
         // Tiny delay prevents menus from occasionally appearing when user swipes to reveal toc.
-        [weakSelf performSelector:@selector(animateTopAndBottomMenuReveal) withObject:nil afterDelay:0.05];
+        [strSelf performSelector:@selector(animateTopAndBottomMenuReveal) withObject:nil afterDelay:0.05];
 
         // nonAnchorTouchEndedWithoutDragging is used so TOC may be hidden if user tapped, but did *not* drag.
         // Used because UIWebView is difficult to attach one-finger touch events to.
-        [weakSelf tocHide];
+        [strSelf tocHide];
 
-        [weakSelf referencesHide];
+        [strSelf referencesHide];
     }];
     
     [self.bridge addListener:@"referenceClicked" withBlock:^(NSString *messageType, NSDictionary *payload) {
+        WebViewController *strSelf = weakSelf;
+        if (!strSelf) { return; }
 
-        if([weakSelf tocDrawerIsOpen]){
-            [weakSelf tocHide];
+        if([strSelf tocDrawerIsOpen]){
+            [strSelf tocHide];
             return;
         }
 
         //NSLog(@"referenceClicked: %@", payload);
-        [weakSelf referencesShow:payload];
+        [strSelf referencesShow:payload];
         
     }];
     
@@ -1034,6 +914,17 @@ -(void)setupBridge
                                                           action:@selector(shareSnippet:)];
     [UIMenuController sharedMenuController].menuItems = @[shareSnippet];
 
+    [self.bridge addListener:@"imageClicked" withBlock:^(NSString *type, NSDictionary *payload) {
+        WebViewController *strSelf = weakSelf;
+        if (!strSelf) { return; }
+
+        NSString *selectedImageURL = payload[@"url"];
+        NSCParameterAssert(selectedImageURL.length);
+        MWKImage *selectedImage = [strSelf->session.article.images largestImageVariantForURL:selectedImageURL];
+        NSCParameterAssert(selectedImage);
+        [strSelf presentGalleryForArticle:strSelf->session.article showingImage:selectedImage];
+    }];
+
     self.unsafeToScroll = NO;
 }
 
@@ -1337,6 +1228,7 @@ - (void)didReceiveMemoryWarning
     //NSLog(@"articleFetchManager.operationCount = %lu", (unsigned long)[QueuesSingleton sharedInstance].articleFetchManager.operationQueue.operationCount);
 }
 
+#if DEBUG
 -(void)toggleImageSheet
 {
     // Quick hack for confirming images for article have routed properly to core data store.
@@ -1383,6 +1275,7 @@ -(void)toggleImageSheet
         [NAV topActionSheetHide];
     }
 }
+#endif
 
 -(void)updateHistoryDateVisitedForArticleBeingNavigatedFrom
 {
@@ -1469,51 +1362,52 @@ - (void)fetchFinished: (id)sender
                 // Redirect if necessary.
                 MWKTitle *redirectedTitle = article.redirected;
                 if (redirectedTitle) {
-					// Get discovery method for call to "retrieveArticleForPageTitle:".
-					// There should only be a single history item (at most).
-					MWKHistoryEntry *history = [session.userDataStore.historyList entryForTitle:article.title];
-					// Get the article's discovery method.
-					MWKHistoryDiscoveryMethod discoveryMethod =
-					(history) ? history.discoveryMethod : MWK_DISCOVERY_METHOD_SEARCH;
-					
-					// Remove the article so it doesn't get saved.
+                    // Get discovery method for call to "retrieveArticleForPageTitle:".
+                    // There should only be a single history item (at most).
+                    MWKHistoryEntry *history = [session.userDataStore.historyList entryForTitle:article.title];
+                    // Get the article's discovery method.
+                    MWKHistoryDiscoveryMethod discoveryMethod =
+                    (history) ? history.discoveryMethod : MWK_DISCOVERY_METHOD_SEARCH;
+
+                    // Remove the article so it doesn't get saved.
                     [session.userDataStore.historyList removeEntry:history];
                     [session.article remove];
-					
-					// Redirect!
-					[self retrieveArticleForPageTitle: redirectedTitle
-									  discoveryMethod: discoveryMethod];
-					return;
-				}
-
-				// Update the toc and web view.
-				[self.tocVC setTocSectionDataForSections:article.sections];
-				[self displayArticle:article.title];
-				
-			}
-				break;
-			case FETCH_FINAL_STATUS_FAILED:
-			{
-				NSString *errorMsg = error.localizedDescription;
-				[self showAlert:errorMsg type:ALERT_TYPE_TOP duration:-1];
+
+                    // Redirect!
+                    [self retrieveArticleForPageTitle: redirectedTitle
+                                      discoveryMethod: discoveryMethod];
+                    return;
+                }
+
+                // Update the toc and web view.
+                [self.tocVC setTocSectionDataForSections:article.sections];
+                [self displayArticle:article.title];
+
+
+            }
+                break;
+            case FETCH_FINAL_STATUS_FAILED:
+            {
+                NSString *errorMsg = error.localizedDescription;
+                [self showAlert:errorMsg type:ALERT_TYPE_TOP duration:-1];
 
                 [self loadingIndicatorHide];
-				
-				// Remove the article so it doesn't get saved.
-				//[article.managedObjectContext deleteObject:article];
-				[article remove];
-			}
-				break;
-			case FETCH_FINAL_STATUS_CANCELLED:
-			{
-				// Remove the article so it doesn't get saved.
-				//[article.managedObjectContext deleteObject:article];
-				[article remove];
-			}
-				break;
-				
-			default:
-				break;
+
+                // Remove the article so it doesn't get saved.
+                //[article.managedObjectContext deleteObject:article];
+                [article remove];
+            }
+                break;
+            case FETCH_FINAL_STATUS_CANCELLED:
+            {
+                // Remove the article so it doesn't get saved.
+                //[article.managedObjectContext deleteObject:article];
+                [article remove];
+            }
+                break;
+
+            default:
+                break;
                 
         }
 
@@ -1550,15 +1444,24 @@ - (void)fetchFinished: (id)sender
                 break;
         }
     }
+}
+
+- (void)cancelArticleLoading
+{
+   [[QueuesSingleton sharedInstance].articleFetchManager.operationQueue cancelAllOperations];
+}
 
+- (void)cancelSearchLoading
+{
+    [[QueuesSingleton sharedInstance].searchResultsFetchManager.operationQueue cancelAllOperations];
 }
 
 - (void)retrieveArticleForPageTitle: (MWKTitle *)pageTitle
                     discoveryMethod: (MWKHistoryDiscoveryMethod)discoveryMethod
 {
     // Cancel certain in-progress fetches.
-    [[QueuesSingleton sharedInstance].articleFetchManager.operationQueue cancelAllOperations];
-    [[QueuesSingleton sharedInstance].searchResultsFetchManager.operationQueue cancelAllOperations];
+    [self cancelSearchLoading];
+    [self cancelArticleLoading];
     
     self.currentTitle = pageTitle;
     session.title = pageTitle;
@@ -1611,6 +1514,8 @@ - (void)retrieveArticleForPageTitle: (MWKTitle *)pageTitle
         (void)[[ArticleFetcher alloc] initAndFetchSectionsForArticle: session.article
                                                          withManager: [QueuesSingleton sharedInstance].articleFetchManager
                                                   thenNotifyDelegate: self];
+
+
     }
 }
 
@@ -2242,18 +2147,22 @@ -(void)setupLeadImageContainer
 
     self.leadImageContainer.delegate = self;
 
+    [self.leadImageContainer addTarget:self
+                                action:@selector(didTouchLeadImage:)
+                      forControlEvents:UIControlEventTouchUpInside];
+
     // Because of autolayout weirdness with adding subview's to UIWebView's
     // scrollview (which is done so we'll get scroll tracking and scaling
     // when TOC appears for free), autoresizingMask is used - this also means
     // we need to manually update leadImageContainer's frame on rotate - which
     // is presently done in its "updateNonImageElements" method.
     self.leadImageContainer.autoresizingMask =
-    (UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleWidth);
+        (UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleWidth);
     
     [self.webView.scrollView addSubview:self.leadImageContainer];
     
     self.leadImageContainer.frame =
-    (CGRect){{0, 0}, {self.webView.scrollView.frame.size.width, LEAD_IMAGE_CONTAINER_HEIGHT}};
+        (CGRect){{0, 0}, {self.webView.scrollView.frame.size.width, LEAD_IMAGE_CONTAINER_HEIGHT}};
 }
 
 - (void)leadImageHeightChangedTo: (NSNumber *)height
@@ -2291,4 +2200,9 @@ - (NSString *) getSelectedtext
     return selectedText.length < kMinimumTextSelectionLength ? @"" : selectedText;
 }
 
+- (void)didTouchLeadImage:(id)sender
+{
+    [self presentGalleryForArticle:session.article showingImage:session.article.image];
+}
+
 @end
diff --git a/wikipedia/View Controllers/WebView/WebViewController_Private.h b/wikipedia/View Controllers/WebView/WebViewController_Private.h
new file mode 100644
index 00000000000..2a4a2332af2
--- /dev/null
+++ b/wikipedia/View Controllers/WebView/WebViewController_Private.h	
@@ -0,0 +1,151 @@
+//
+//  WebViewController_Private.h
+//  Wikipedia
+//
+//  Created by Brian Gerstle on 2/9/15.
+//  Copyright (c) 2015 Wikimedia Foundation. All rights reserved.
+//
+
+#import "WebViewController.h"
+
+#import "WikipediaAppUtils.h"
+#import "WikipediaZeroMessageFetcher.h"
+#import "SectionEditorViewController.h"
+#import "CommunicationBridge.h"
+#import "TOCViewController.h"
+#import "SessionSingleton.h"
+#import "QueuesSingleton.h"
+#import "TopMenuTextField.h"
+#import "TopMenuTextFieldContainer.h"
+#import "MWLanguageInfo.h"
+#import "CenterNavController.h"
+#import "Defines.h"
+#import "UIViewController+SearchChildViewControllers.h"
+#import "UIScrollView+NoHorizontalScrolling.h"
+#import "UIViewController+HideKeyboard.h"
+#import "UIWebView+HideScrollGradient.h"
+#import "UIWebView+ElementLocation.h"
+#import "UIView+RemoveConstraints.h"
+#import "UIViewController+Alert.h"
+#import "NSString+Extras.h"
+#import "PaddedLabel.h"
+#import "RootViewController.h"
+#import "TopMenuViewController.h"
+#import "BottomMenuViewController.h"
+#import "LanguagesViewController.h"
+#import "ModalMenuAndContentViewController.h"
+#import "UIViewController+ModalPresent.h"
+#import "MWKSection+DisplayHtml.h"
+#import "EditFunnel.h"
+#import "ProtectedEditAttemptFunnel.h"
+#import "DataHousekeeping.h"
+#import "NSDate-Utilities.h"
+#import "AccountCreationViewController.h"
+#import "OnboardingViewController.h"
+#import "TopMenuContainerView.h"
+#import "WikiGlyph_Chars.h"
+#import "UINavigationController+TopActionSheet.h"
+#import "ReferencesVC.h"
+#import "WMF_Colors.h"
+#import "NSArray+Predicate.h"
+#import "WikiGlyphButton.h"
+#import "WikiGlyphLabel.h"
+#import "NSString+FormattedAttributedString.h"
+#import "SavedPagesFunnel.h"
+#import "ArticleFetcher.h"
+#import "AssetsFileFetcher.h"
+
+#import "LeadImageContainer.h"
+#import "DataMigrationProgressViewController.h"
+#import "UIFont+WMFStyle.h"
+#import "WebViewController+ImageGalleryPresentation.h"
+
+//#import "UIView+Debugging.h"
+
+#define TOC_TOGGLE_ANIMATION_DURATION @0.225f
+
+#define SCROLL_INDICATOR_LEFT_MARGIN 2.0
+#define SCROLL_INDICATOR_WIDTH 4.0
+#define SCROLL_INDICATOR_HEIGHT 25.0
+#define SCROLL_INDICATOR_CORNER_RADIUS 2.0f
+#define SCROLL_INDICATOR_BORDER_WIDTH 1.0f
+#define SCROLL_INDICATOR_BORDER_COLOR [UIColor lightGrayColor]
+#define SCROLL_INDICATOR_BACKGROUND_COLOR [UIColor whiteColor]
+
+#define BOTTOM_SCROLL_LIMIT_HEIGHT 2000
+
+// This controls how fast the swipe has to be (side-to-side).
+#define TOC_SWIPE_TRIGGER_MIN_X_VELOCITY 600.0f
+// This controls what angle from the horizontal axis will trigger the swipe.
+#define TOC_SWIPE_TRIGGER_MAX_ANGLE 45.0f
+
+// TODO: rename the WebViewControllerVariableNames once we rename this class
+
+static const int kMinimumTextSelectionLength = 10;
+
+@interface WebViewController () <LanguageSelectionDelegate>
+{
+    CGFloat scrollViewDragBeganVerticalOffset_;
+    SessionSingleton *session;
+}
+
+@property (strong, nonatomic) CommunicationBridge *bridge;
+
+@property (nonatomic) CGPoint lastScrollOffset;
+
+@property (nonatomic) BOOL unsafeToScroll;
+
+@property (nonatomic) float relativeScrollOffsetBeforeRotate;
+@property (nonatomic) NSUInteger sectionToEditId;
+
+@property (strong, nonatomic) NSDictionary *adjacentHistoryIDs;
+@property (strong, nonatomic) NSString *externalUrl;
+
+@property (weak, nonatomic) IBOutlet UIView *bottomBarView;
+
+@property (weak, nonatomic) IBOutlet NSLayoutConstraint *tocViewWidthConstraint;
+@property (weak, nonatomic) IBOutlet NSLayoutConstraint *tocViewLeadingConstraint;
+
+@property (strong, nonatomic) UIView *scrollIndicatorView;
+@property (strong, nonatomic) NSLayoutConstraint *scrollIndicatorViewTopConstraint;
+@property (strong, nonatomic) NSLayoutConstraint *scrollIndicatorViewHeightConstraint;
+
+@property (strong, nonatomic) TOCViewController *tocVC;
+
+@property (strong, nonatomic) UIPanGestureRecognizer* panSwipeRecognizer;
+
+@property (strong, nonatomic) IBOutlet PaddedLabel *zeroStatusLabel;
+
+@property (nonatomic) BOOL unsafeToToggleTOC;
+
+@property (strong, nonatomic) ReferencesVC *referencesVC;
+@property (weak, nonatomic) IBOutlet UIView *referencesContainerView;
+
+@property (strong, nonatomic) NSLayoutConstraint *bottomBarViewBottomConstraint;
+@property (strong, nonatomic) IBOutlet NSLayoutConstraint *referencesContainerViewBottomConstraint;
+@property (strong, nonatomic) IBOutlet NSLayoutConstraint *referencesContainerViewHeightConstraint;
+
+@property (copy) NSString *jumpToFragment;
+
+@property (nonatomic) BOOL editable;
+@property (copy) MWKProtectionStatus *protectionStatus;
+
+// These are presently only used by updateHistoryDateVisitedForArticleBeingNavigatedFrom method.
+@property (strong, nonatomic) MWKTitle *currentTitle;
+
+@property (weak, nonatomic) IBOutlet NSLayoutConstraint *bottomNavHeightConstraint;
+
+@property (strong, nonatomic) UIActivityIndicatorView *activityIndicator;
+@property (strong, nonatomic) UIView *activityIndicatorBackgroundView;
+
+@property (strong, nonatomic) LeadImageContainer *leadImageContainer;
+
+@property (strong, nonatomic) IBOutlet NSLayoutConstraint *webViewBottomConstraint;
+
+@property (nonatomic) BOOL didLastNavigateByBackOrForward;
+
+- (void)cancelArticleLoading;
+
+- (void)cancelSearchLoading;
+
+@end
diff --git a/wikipedia/mw-utils/WikipediaAppUtils.h b/wikipedia/mw-utils/WikipediaAppUtils.h
index 9dfa504dbc9..adee508135c 100644
--- a/wikipedia/mw-utils/WikipediaAppUtils.h
+++ b/wikipedia/mw-utils/WikipediaAppUtils.h
@@ -5,6 +5,45 @@
 
 #define MWLocalizedString(key, throwaway) [WikipediaAppUtils localizedStringForKey:key]
 
+
+/**
+ * Provides compile time checking for keypaths on a given object.
+ * @discussion Example usage:
+ *
+ *      WMF_SAFE_KEYPATH([NSString new], lowercaseString); //< @"lowercaseString"
+ *      WMF_SAFE_KEYPATH([NSString new], fooBar); //< compiler error!
+ *
+ * @note Inspired by [EXTKeypathCoding.h](https://github.com/jspahrsummers/libextobjc/blob/master/extobjc/EXTKeyPathCoding.h#L14)
+ */
+#define WMF_SAFE_KEYPATH(obj, keyp) ((NO, (void)obj.keyp), @#keyp)
+
+/**
+ * Compare two *objects* using @c == and <code>[a sel b]</code>, where @c sel is a equality selector
+ * (e.g. @c isEqualToString:).
+ * @param a   First object, can be @c nil.
+ * @param sel The selector used to compare @c a to @c b, if <code>a == b</code> is @c false.
+ * @param b   Second object, can be @c nil.
+ * @return @c YES if the objects are the same pointer or invoking @c sel returns @c YES, otherwise @c NO.
+ */
+#define WMF_EQUAL(a, sel, b) (((a) == (b)) && ([(a) sel (b)]))
+
+/**
+ * Compare two objects using `==` and `isEqual:`.
+ * @see WMF_EQUAL
+ */
+#define WMF_IS_EQUAL(a, b) (WMF_EQUAL(a, isEqual:, b))
+
+/// Circularly rotate an unsigned int (useful when implementing <code>-[NSObject hash]</code>).
+FOUNDATION_EXPORT NSUInteger CircularBitwiseRotation(NSUInteger x, NSUInteger s)
+__attribute__((pure, always_inline, const));
+
+/// Conert @c m megabytes to bytes.
+FOUNDATION_EXPORT NSUInteger MegabytesToBytes(NSUInteger m)
+__attribute__((pure, always_inline, const));
+
+/// Normalizes page titles extracted from URLs, replacing percent escapes and underscores.
+FOUNDATION_EXPORT NSString* WMFNormalizedPageTitle(NSString* rawPageTitle);
+
 @interface WikipediaAppUtils : NSObject
 
 +(NSString*) appVersion;
diff --git a/wikipedia/mw-utils/WikipediaAppUtils.m b/wikipedia/mw-utils/WikipediaAppUtils.m
index abebe4d88d8..960bd0c8c5b 100644
--- a/wikipedia/mw-utils/WikipediaAppUtils.m
+++ b/wikipedia/mw-utils/WikipediaAppUtils.m
@@ -4,6 +4,23 @@
 #import "WikipediaAppUtils.h"
 #import "AssetsFile.h"
 
+NSUInteger MegabytesToBytes(NSUInteger m)
+{
+    static NSUInteger const MEGABYTE = 1 << 20;
+    return m * MEGABYTE;
+}
+
+NSUInteger CircularBitwiseRotation(NSUInteger x, NSUInteger s)
+{
+    return (x << s) | (x >> (sizeof(x)*CHAR_BIT - s));
+}
+
+NSString* WMFNormalizedPageTitle(NSString* rawPageTitle)
+{
+    return [[rawPageTitle stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]
+            stringByReplacingOccurrencesOfString:@"_" withString:@" "];
+}
+
 @implementation WikipediaAppUtils
 
 +(NSString*) appVersion
diff --git a/www/js/bridge.js b/www/js/bridge.js
index a4e06fb729f..646d2a98835 100644
--- a/www/js/bridge.js
+++ b/www/js/bridge.js
@@ -1,3 +1,4 @@
+(function (module) {
 
 function Bridge() {
 }
@@ -24,7 +25,7 @@ Bridge.prototype.registerListener = function( messageType, callback ) {
 Bridge.prototype.sendMessage = function( messageType, payload ) {
     var messagePack = { type: messageType, payload: payload };
     var url = "x-wikipedia-bridge:" + encodeURIComponent( JSON.stringify( messagePack ) );
-    
+
     // quick iframe version based on http://stackoverflow.com/a/6508343/82439
     // fixme can this be an XHR instead? check Cordova current state
     var iframe = document.createElement('iframe');
@@ -35,3 +36,5 @@ Bridge.prototype.sendMessage = function( messageType, payload ) {
 };
 
 module.exports = new Bridge();
+
+})(module);
diff --git a/www/js/listeners.js b/www/js/listeners.js
index ab0a3047b94..78d6d8b1c85 100644
--- a/www/js/listeners.js
+++ b/www/js/listeners.js
@@ -1,3 +1,4 @@
+(function (module) {
 var bridge = require("./bridge");
 var transformer = require("./transformer");
 var refs = require("./refs");
@@ -69,7 +70,7 @@ function findParent(element, selector) {
         var selectorName = matches[1] || null;
         var selectorClass = matches[2] || null;
         var selectorId = matches[3] || null;
-        
+
         var candidate = element;
         while (candidate) {
             do {
@@ -97,19 +98,21 @@ document.onclick = function() {
     // "fight" with items in the touchEndedWithoutDragging handler.
     // Add click/tap handling to touchEndedWithoutDragging instead.
     event.preventDefault(); // <-- Do not remove!
-}
+};
 
-touchDownY = 0.0;
-function touchStart(event){
-    touchDownY = parseInt(event.changedTouches[0].clientY);
-}
-document.addEventListener("touchstart", touchStart, "false");
+// track where initial touches start
+var touchDownY = 0.0;
+document.addEventListener(
+            "touchstart",
+            function (event) {
+                touchDownY = parseInt(event.changedTouches[0].clientY);
+            }, false);
 
 function handleTouchEnded(event){
     var touchobj = event.changedTouches[0];
     touchEndY = parseInt(touchobj.clientY);
-    if (((touchDownY - touchEndY) == 0) && (event.changedTouches.length == 1)) {
-        // None of our tap events should fire if the user dragged the page at all.
+    if (((touchDownY - touchEndY) === 0) && (event.changedTouches.length === 1)) {
+        // None of our tap events should fire if the user dragged vertically.
         touchEndedWithoutDragging(event);
     }
 }
@@ -131,31 +134,41 @@ function touchEndedWithoutDragging(event){
             // If it is a link to an anchor in the current page, just scroll to it
             document.getElementById( href.substring( 1 ) ).scrollIntoView();
         } else {
-            bridge.sendMessage( 'linkClicked', { href: anchorTarget.getAttribute( "href" ) });
-        }
-    
+            var anchorClass = anchorTarget.getAttribute('class');
+            if (typeof anchorClass === 'string' && anchorClass.indexOf('image') !== -1) {
+                bridge.sendMessage('imageClicked', { url: event.target.getAttribute('src') });
+            } else {
+                bridge.sendMessage( 'linkClicked', { href: anchorTarget.getAttribute( "href" ) });
+            }
+         }
+
     // Handle BUTTON tag taps.
-    }else{
+    } else {
         var buttonTarget = findParent(event.target, 'BUTTON');
-        var buttonTargetFound = buttonTarget && (buttonTarget.tagName === "BUTTON") ? true : false;
-        if(buttonTargetFound){
+        if (buttonTarget && (buttonTarget.tagName === "BUTTON")){
             if (buttonTarget.id === "mw-language-button") {
                 bridge.sendMessage( 'langClicked', {} );
             }else if (buttonTarget.id === "mw-last-modified") {
                 bridge.sendMessage( 'historyClicked', {} );
             }
-        }else{
+        } else {
             // Do NOT prevent default behavior -- this is needed to for instance
             // handle deselection of text.
-            bridge.sendMessage( 'nonAnchorTouchEndedWithoutDragging', { id: event.target.getAttribute( "id" ), tagName: event.target.tagName});
+            bridge.sendMessage('nonAnchorTouchEndedWithoutDragging',
+                               {
+                                   id: event.target.getAttribute( "id" ),
+                                   tagName: event.target.tagName
+                               });
         }
     }
 }
 
-document.addEventListener("touchend", handleTouchEnded, "false");
+document.addEventListener("touchend", handleTouchEnded, false);
 
 bridge.registerListener( "setLeadImageDivHeight", function( payload ) {
     var div = document.getElementById( "lead_image_div" );
     if (payload.height == div.offsetHeight) return;
     div.style.height = payload.height + 'px';
 });
+
+})(module);
diff --git a/www/package.json b/www/package.json
index 8eee1e7ead2..385ba642504 100644
--- a/www/package.json
+++ b/www/package.json
@@ -4,10 +4,11 @@
   "repository": "https://gerrit.wikimedia.org/r/apps/ios/wikipedia",
   "version": "0.1.0",
   "devDependencies": {
-    "grunt-cli": "~0.1.13",
-    "grunt-contrib-jshint": "~0.8.0",
     "grunt-browserify": "~1.3.0",
+    "grunt-cli": "~0.1.13",
     "grunt-contrib-copy": "~0.5.0",
-    "grunt-contrib-less": "~0.9.0"
+    "grunt-contrib-jshint": "~0.8.0",
+    "grunt-contrib-less": "~0.9.0",
+    "jshint": "^2.6.0"
   }
 }
