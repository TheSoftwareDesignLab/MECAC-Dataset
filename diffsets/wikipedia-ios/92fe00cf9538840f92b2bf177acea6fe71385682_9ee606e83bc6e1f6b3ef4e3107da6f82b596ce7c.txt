diff --git a/Wikipedia.xcodeproj/project.pbxproj b/Wikipedia.xcodeproj/project.pbxproj
index 5bb833fa711..60382fc558c 100644
--- a/Wikipedia.xcodeproj/project.pbxproj
+++ b/Wikipedia.xcodeproj/project.pbxproj
@@ -1168,7 +1168,6 @@
 		83B87ECC1F71431F00F342F1 /* ArticleCollectionViewCell+ListDisplay.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83B87EC61F713BC200F342F1 /* ArticleCollectionViewCell+ListDisplay.swift */; };
 		83BF87D01FA7463300EAF3DD /* WMFFIFOCache.h in Headers */ = {isa = PBXBuildFile; fileRef = 83BF87CE1FA7463300EAF3DD /* WMFFIFOCache.h */; settings = {ATTRIBUTES = (Public, ); }; };
 		83BF87D11FA7463300EAF3DD /* WMFFIFOCache.m in Sources */ = {isa = PBXBuildFile; fileRef = 83BF87CF1FA7463300EAF3DD /* WMFFIFOCache.m */; };
-		83C0656623D2023D001821BC /* ArticleViewController+TableOfContents.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C0656523D2023D001821BC /* ArticleViewController+TableOfContents.swift */; };
 		83C0656723D2023D001821BC /* ArticleViewController+TableOfContents.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C0656523D2023D001821BC /* ArticleViewController+TableOfContents.swift */; };
 		83C0656823D2023D001821BC /* ArticleViewController+TableOfContents.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C0656523D2023D001821BC /* ArticleViewController+TableOfContents.swift */; };
 		83C0656923D2023D001821BC /* ArticleViewController+TableOfContents.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C0656523D2023D001821BC /* ArticleViewController+TableOfContents.swift */; };
@@ -1176,6 +1175,11 @@
 		83C0656C23D23220001821BC /* TableOfContentsItem.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C0656A23D23220001821BC /* TableOfContentsItem.swift */; };
 		83C0656D23D23220001821BC /* TableOfContentsItem.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C0656A23D23220001821BC /* TableOfContentsItem.swift */; };
 		83C0656E23D23220001821BC /* TableOfContentsItem.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C0656A23D23220001821BC /* TableOfContentsItem.swift */; };
+		83C0656F23D25A3E001821BC /* ArticleViewController+TableOfContents.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C0656523D2023D001821BC /* ArticleViewController+TableOfContents.swift */; };
+		83C0657123D2618F001821BC /* Utilities.js in Resources */ = {isa = PBXBuildFile; fileRef = 83C0657023D2618F001821BC /* Utilities.js */; };
+		83C0657223D2618F001821BC /* Utilities.js in Resources */ = {isa = PBXBuildFile; fileRef = 83C0657023D2618F001821BC /* Utilities.js */; };
+		83C0657323D2618F001821BC /* Utilities.js in Resources */ = {isa = PBXBuildFile; fileRef = 83C0657023D2618F001821BC /* Utilities.js */; };
+		83C0657423D2618F001821BC /* Utilities.js in Resources */ = {isa = PBXBuildFile; fileRef = 83C0657023D2618F001821BC /* Utilities.js */; };
 		83C643582239508600FC16BF /* RandomArticleFetcher.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83C6435222394F0300FC16BF /* RandomArticleFetcher.swift */; };
 		83CA612A20D1675800EF0C4A /* ExploreCardViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83CA612920D1675800EF0C4A /* ExploreCardViewController.swift */; };
 		83CA612B20D1675800EF0C4A /* ExploreCardViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 83CA612920D1675800EF0C4A /* ExploreCardViewController.swift */; };
@@ -3702,6 +3706,7 @@
 		83BF87CF1FA7463300EAF3DD /* WMFFIFOCache.m */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.objc; path = WMFFIFOCache.m; sourceTree = "<group>"; };
 		83C0656523D2023D001821BC /* ArticleViewController+TableOfContents.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = "ArticleViewController+TableOfContents.swift"; sourceTree = "<group>"; };
 		83C0656A23D23220001821BC /* TableOfContentsItem.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = TableOfContentsItem.swift; sourceTree = "<group>"; };
+		83C0657023D2618F001821BC /* Utilities.js */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.javascript; path = Utilities.js; sourceTree = "<group>"; };
 		83C6435222394F0300FC16BF /* RandomArticleFetcher.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = RandomArticleFetcher.swift; sourceTree = "<group>"; };
 		83CA612920D1675800EF0C4A /* ExploreCardViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ExploreCardViewController.swift; sourceTree = "<group>"; };
 		83CCB287209CA4E600D31565 /* NSRegularExpression+HTML.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; path = "NSRegularExpression+HTML.h"; sourceTree = "<group>"; };
@@ -6176,6 +6181,7 @@
 			children = (
 				67DC5BEE23A1427C00B03A84 /* ActionHandlerScript.swift */,
 				67DC5BE223A017CA00B03A84 /* ArticleViewController.swift */,
+				83C0657023D2618F001821BC /* Utilities.js */,
 				83C0656523D2023D001821BC /* ArticleViewController+TableOfContents.swift */,
 				67DC5BE823A03FE700B03A84 /* ArticleToolbarController.swift */,
 				83F1096323D0D4F6003F3E9E /* ArticlePreviewingDelegate.swift */,
@@ -9498,6 +9504,7 @@
 				67CEF25F234FCA8100D5CA6C /* DiffListContextCell.xib in Resources */,
 				D84F2BFD1D2FEE6300963D42 /* WMFRandomDiceButtonRoll.js in Resources */,
 				D8D92B601DF22E1700B95311 /* NotificationBackgroundSuccess.png in Resources */,
+				83C0657123D2618F001821BC /* Utilities.js in Resources */,
 				7A9A611821124CF500403154 /* CreateNewReadingListButtonView.xib in Resources */,
 				7A16C4EB212D941C00F0D5EC /* SubSettingsViewController.xib in Resources */,
 				7A8422582268DA2C0074648E /* InsertMediaSearchResultPreviewingViewController.xib in Resources */,
@@ -9695,6 +9702,7 @@
 				7A393289236CBDD500A89C2F /* PageHistoryComparisonSelectionViewController.xib in Resources */,
 				BA4524201F324C3100439C42 /* FontSizeSliderViewController.xib in Resources */,
 				B0D3E714214AF776007578BA /* DescriptionEditViewController.storyboard in Resources */,
+				83C0657423D2618F001821BC /* Utilities.js in Resources */,
 				BA45242C1F32500C00439C42 /* TextSizeChangeExampleViewController.xib in Resources */,
 				6782DBF323453799003FA21B /* DiffHeaderCompareView.xib in Resources */,
 				7ADF498321B45CEE009EA338 /* TextFormattingPlainToolbarView.xib in Resources */,
@@ -9819,6 +9827,7 @@
 				7A393287236CBDD500A89C2F /* PageHistoryComparisonSelectionViewController.xib in Resources */,
 				BA45241E1F324C3100439C42 /* FontSizeSliderViewController.xib in Resources */,
 				B0D3E712214AF776007578BA /* DescriptionEditViewController.storyboard in Resources */,
+				83C0657223D2618F001821BC /* Utilities.js in Resources */,
 				BA45242A1F32500C00439C42 /* TextSizeChangeExampleViewController.xib in Resources */,
 				6782DBF123453799003FA21B /* DiffHeaderCompareView.xib in Resources */,
 				7ADF498121B45CEE009EA338 /* TextFormattingPlainToolbarView.xib in Resources */,
@@ -9943,6 +9952,7 @@
 				7A393288236CBDD500A89C2F /* PageHistoryComparisonSelectionViewController.xib in Resources */,
 				BA45241F1F324C3100439C42 /* FontSizeSliderViewController.xib in Resources */,
 				B0D3E713214AF776007578BA /* DescriptionEditViewController.storyboard in Resources */,
+				83C0657323D2618F001821BC /* Utilities.js in Resources */,
 				BA45242B1F32500C00439C42 /* TextSizeChangeExampleViewController.xib in Resources */,
 				6782DBF223453799003FA21B /* DiffHeaderCompareView.xib in Resources */,
 				7ADF498221B45CEE009EA338 /* TextFormattingPlainToolbarView.xib in Resources */,
@@ -10729,7 +10739,6 @@
 				83FBE9751F6181E00026C7EB /* ShareAFactActivityImageItemProvider.swift in Sources */,
 				D84F2C031D30162700963D42 /* WMFFirstRandomViewController.m in Sources */,
 				7A28126320D3F84A009B42B5 /* FeedCardSettingsViewController.swift in Sources */,
-				83C0656623D2023D001821BC /* ArticleViewController+TableOfContents.swift in Sources */,
 				8386BDF62386D735007EE89D /* ViewController+URLHandling.swift in Sources */,
 				8386BDFB2386D754007EE89D /* SinglePageWebViewController.swift in Sources */,
 				B0D4916F21F999A3002BBDD3 /* EditSaveViewController.swift in Sources */,
@@ -10798,6 +10807,7 @@
 				834CC34B21075B7600F62818 /* UITabBar+Theme.swift in Sources */,
 				D88FCAE11E4B776600505A9F /* MapUtilities.swift in Sources */,
 				7AB20A0C22FC8432006FECB4 /* PageHistoryCountsViewController.swift in Sources */,
+				83C0656F23D25A3E001821BC /* ArticleViewController+TableOfContents.swift in Sources */,
 				6706A21722925FD2004774E2 /* InfoBannerView.swift in Sources */,
 				B068EDE0206B183500C827D1 /* Progress+ProgressUI.swift in Sources */,
 				7A9F06192266432200856321 /* InsertMediaSettingsTextTableViewCell.swift in Sources */,
diff --git a/Wikipedia/Code/ActionHandlerScript.swift b/Wikipedia/Code/ActionHandlerScript.swift
index 03f96fd6127..451ead35893 100644
--- a/Wikipedia/Code/ActionHandlerScript.swift
+++ b/Wikipedia/Code/ActionHandlerScript.swift
@@ -72,4 +72,21 @@ final class PageContentService   {
                super.init(source: source, injectionTime: .atDocumentEnd, forMainFrameOnly: true)
         }
     }
+    
+    final class UtilitiesScript: WKUserScript {
+        static let source: String = {
+            guard
+                let fileURL = Bundle.main.url(forResource: "Utilities", withExtension: "js"),
+                let data = try? Data(contentsOf: fileURL),
+                let jsString = String(data: data, encoding: .utf8)
+            else {
+                return ""
+            }
+            return jsString
+        }()
+        
+        required override init() {
+            super.init(source: UtilitiesScript.source, injectionTime: .atDocumentEnd, forMainFrameOnly: true)
+        }
+    }
 }
diff --git a/Wikipedia/Code/ArticleViewController+TableOfContents.swift b/Wikipedia/Code/ArticleViewController+TableOfContents.swift
index 1bd9dae88c3..a562668fa99 100644
--- a/Wikipedia/Code/ArticleViewController+TableOfContents.swift
+++ b/Wikipedia/Code/ArticleViewController+TableOfContents.swift
@@ -32,6 +32,19 @@ extension ArticleViewController {
             }
             present(tocVC, animated: true)
         }
+        
+        toolbarController.update()
+    }
+    
+    func hideTableOfContents() {
+        tableOfContents.isVisible = false
+        switch tableOfContents.displayMode {
+        case .inline:
+            UserDefaults.wmf.wmf_setTableOfContentsIsVisibleInline(false)
+            updateTableOfContentsLayout(animated: true)
+        case .modal:
+            dismiss(animated: true)
+        }
         toolbarController.update()
     }
     
@@ -127,43 +140,29 @@ extension ArticleViewController : TableOfContentsViewControllerDelegate {
     }
     
     public func tableOfContentsController(_ controller: TableOfContentsViewController, didSelectItem item: TableOfContentsItem) {
+        switch tableOfContents.displayMode {
+        case .inline:
+            scroll(to: item.anchor, animated: true)
+            dispatchOnMainQueueAfterDelayInSeconds(1) {
+                self.webView.wmf_accessibilityCursor(toFragment: item.anchor)
+            }
+        case .modal:
+            tableOfContents.isVisible = false
+            scroll(to: item.anchor, animated: true)
+            var dismissVCCompletionHandler: (() -> Void)?
+            // HAX: webview has issues scrolling when browser view is out of bounds, disable animation if needed
+               dismissVCCompletionHandler = {
+                   // HAX: This is terrible, but iOS events not under our control would steal our focus if we didn't wait long enough here and due to problems in UIWebView, we cannot work around it either.
+                   dispatchOnMainQueueAfterDelayInSeconds(1) {
+                    self.webView.wmf_accessibilityCursor(toFragment: item.anchor)
+                   }
+               }
 
-//        switch tableOfContentsDisplayMode {
-//        case .inline:
-//            if let section = item as? MWKSection {
-//                self.currentSection = section
-//                self.anchorToRestoreScrollOffset = section.anchor
-//                self.scroll(toAnchor: section.anchor, animated: true)
-//                dispatchOnMainQueueAfterDelayInSeconds(1) {
-//                    self.webViewController.accessibilityCursor(to: section)
-//                }
-//            } else {
-//                scrollToFooterSection(for: item)
-//            }
-//        case .modal:
-//            fallthrough
-//        default:
-//            tableOfContentsDisplayState = .modalHidden
-//            var dismissVCCompletionHandler: (() -> Void)?
-//            if let section = item as? MWKSection {
-//                self.currentSection = section
-//                // HAX: webview has issues scrolling when browser view is out of bounds, disable animation if needed
-//                self.scroll(toAnchor: section.anchor, animated: true)
-//                dismissVCCompletionHandler = {
-//                    // HAX: This is terrible, but iOS events not under our control would steal our focus if we didn't wait long enough here and due to problems in UIWebView, we cannot work around it either.
-//                    dispatchOnMainQueueAfterDelayInSeconds(1) {
-//                        self.webViewController.accessibilityCursor(to: section)
-//                    }
-//                }
-//            } else {
-//                scrollToFooterSection(for: item)
-//            }
-//
-//            // Don't dismiss immediately - it looks jarring - let the user see the ToC selection before dismissing
-//            dispatchOnMainQueueAfterDelayInSeconds(0.15) {
-//                self.dismiss(animated: true, completion: dismissVCCompletionHandler)
-//            }
-//        }
+            // Don't dismiss immediately - it looks jarring - let the user see the ToC selection before dismissing
+            dispatchOnMainQueueAfterDelayInSeconds(0.15) {
+                self.dismiss(animated: true, completion: dismissVCCompletionHandler)
+            }
+        }
     }
 
     private func scrollToFooterSection(for item: TableOfContentsItem) {
@@ -200,7 +199,10 @@ extension ArticleViewController : TableOfContentsViewControllerDelegate {
 extension ArticleViewController {
 
     @objc func handleTableOfContentsCloseGesture(_ swipeGestureRecoginzer: UIGestureRecognizer) {
-        
+        guard swipeGestureRecoginzer.state == .ended, tableOfContents.isVisible else {
+            return
+        }
+        hideTableOfContents()
     }
     /**
      Create ToC items.
diff --git a/Wikipedia/Code/ArticleViewController.swift b/Wikipedia/Code/ArticleViewController.swift
index a0c42f98b17..bb2aac0f121 100644
--- a/Wikipedia/Code/ArticleViewController.swift
+++ b/Wikipedia/Code/ArticleViewController.swift
@@ -224,9 +224,9 @@ class ArticleViewController: ViewController {
     internal func handleLink(with title: String) {
         guard let host = articleURL.host,
             let newArticleURL = ArticleURLConverter.desktopURL(host: host, title: title) else {
-            assertionFailure("Failure initializing new Article VC")
-            //tonitodo: error state
-            return
+                assertionFailure("Failure initializing new Article VC")
+                //tonitodo: error state
+                return
         }
         navigate(to: newArticleURL)
     }
@@ -245,6 +245,64 @@ class ArticleViewController: ViewController {
         }()
     }
     var tableOfContents: TableOfContentsState = TableOfContentsState()
+    
+    // MARK: Scroll
+    
+    func scroll(to anchor: String, animated: Bool, completion: (() -> Void)? = nil) {
+        guard !anchor.isEmpty else {
+            webView.scrollView.scrollRectToVisible(CGRect(x: 0, y: 1, width: 1, height: 1), animated: animated)
+            completion?()
+            return
+        }
+        webView.getScrollRectForHtmlElement(withId: anchor) { (rect) in
+            assert(Thread.isMainThread)
+            guard !rect.isNull else {
+                completion?()
+                return
+            }
+            let point = CGPoint(x: self.webView.scrollView.contentOffset.x, y: rect.origin.y + self.webView.iOS12yOffsetHack + self.navigationBar.hiddenHeight)
+            self.scroll(to: point, animated: animated, completion: completion)
+        }
+    }
+    
+    var scrollViewAnimationCompletions: [() -> Void] = []
+    func scroll(to offset: CGPoint, animated: Bool, completion: (() -> Void)? = nil) {
+        assert(Thread.isMainThread)
+        let scrollView = webView.scrollView
+        guard !offset.x.isNaN && !offset.x.isInfinite && !offset.y.isNaN && !offset.y.isInfinite else {
+            completion?()
+            return
+        }
+        guard WMFDistanceBetweenPoints(offset, scrollView.contentOffset) >= 2 else {
+            completion?()
+            return
+        }
+        guard animated else {
+            scrollView.setContentOffset(offset, animated: false)
+            completion?()
+            return
+        }
+        /*
+         Setting scrollView.contentOffset inside of an animation block
+         results in a broken animation https://phabricator.wikimedia.org/T232689
+         Calling [scrollView setContentOffset:offset animated:YES] inside
+         of an animation block fixes the animation but doesn't guarantee
+         the content offset will be updated when the animation's completion
+         block is called.
+         It appears the only reliable way to get a callback after the default
+         animation is to use scrollViewDidEndScrollingAnimation
+         */
+        if let completion = completion {
+            scrollViewAnimationCompletions.insert(completion, at: 0)
+        }
+        scrollView.setContentOffset(offset, animated: true)
+    }
+    
+    override func scrollViewDidEndScrollingAnimation(_ scrollView: UIScrollView) {
+        super.scrollViewDidEndScrollingAnimation(scrollView)
+        // call the first completion
+        scrollViewAnimationCompletions.popLast()?()
+    }
 }
 
 private extension ArticleViewController {
@@ -324,6 +382,7 @@ private extension ArticleViewController {
         toolbarController.setSavedState(isSaved: article.isSaved)
         setToolbarHidden(false, animated: false)
     }
+            
 }
 
 extension ArticleViewController: ArticleWebMessageHandling {
diff --git a/Wikipedia/Code/ArticleWebMessagingController.swift b/Wikipedia/Code/ArticleWebMessagingController.swift
index da7a3bed9e0..8bdf0b596dd 100644
--- a/Wikipedia/Code/ArticleWebMessagingController.swift
+++ b/Wikipedia/Code/ArticleWebMessagingController.swift
@@ -43,6 +43,8 @@ class ArticleWebMessagingController: NSObject {
             contentController.addUserScript(pcsSetup)
             let propertiesScript = PageContentService.PropertiesScript(messageHandlerName: messageHandlerName)
             contentController.addUserScript(propertiesScript)
+            let utilitiesScript = PageContentService.UtilitiesScript()
+            contentController.addUserScript(utilitiesScript)
         } catch let error {
             WMFAlertManager.sharedInstance.showErrorAlert(error as NSError, sticky: true, dismissPreviousAlerts: false)
         }
diff --git a/Wikipedia/Code/Utilities.js b/Wikipedia/Code/Utilities.js
new file mode 100644
index 00000000000..3652b905943
--- /dev/null
+++ b/Wikipedia/Code/Utilities.js
@@ -0,0 +1,17 @@
+const getElementRect = element => {
+  const rect = element.getBoundingClientRect()
+  // Important: use "X", "Y", "Width" and "Height" keys so we can use CGRectMakeWithDictionaryRepresentation in native land to convert to CGRect.
+  return {
+    Y: rect.top,
+    X: rect.left,
+    Width: rect.width,
+    Height: rect.height
+  }
+}
+
+
+window.wmf = {
+    elementLocation: {
+        getElementRect
+    }
+}
