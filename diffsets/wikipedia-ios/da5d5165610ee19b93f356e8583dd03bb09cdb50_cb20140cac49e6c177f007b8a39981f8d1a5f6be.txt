diff --git a/Wikipedia/Code/PreviewWebViewContainer.m b/Wikipedia/Code/PreviewWebViewContainer.m
index 6fb90623d69..54329f1da17 100644
--- a/Wikipedia/Code/PreviewWebViewContainer.m
+++ b/Wikipedia/Code/PreviewWebViewContainer.m
@@ -37,7 +37,7 @@ - (WKWebViewConfiguration*)configuration {
      "            window.webkit.messageHandlers.clicks.postMessage({'anchorClicked': { 'href': href }});"
      "        }"
      "};"
-     "window.setLanguage('%@', '%@', '%@');",
+     "window.wmf.utilities.setLanguage('%@', '%@', '%@');",
      langInfo.code,
      langInfo.dir,
      uidir
diff --git a/Wikipedia/Code/WKWebView+ElementLocation.m b/Wikipedia/Code/WKWebView+ElementLocation.m
index e9dd669dd19..92a50b1625b 100644
--- a/Wikipedia/Code/WKWebView+ElementLocation.m
+++ b/Wikipedia/Code/WKWebView+ElementLocation.m
@@ -6,7 +6,7 @@
 @implementation WKWebView (ElementLocation)
 
 - (void)getScreenRectForHtmlElementWithId:(NSString*)elementId completion:(void (^)(CGRect rect))completion {
-    [self getScreenRectForHtmlElementFromJavascriptString:[NSString stringWithFormat:@"window.elementLocation.getElementRect(document.getElementById('%@'));", elementId]
+    [self getScreenRectForHtmlElementFromJavascriptString:[NSString stringWithFormat:@"window.wmf.elementLocation.getElementRect(document.getElementById('%@'));", elementId]
                                                completion:completion];
 }
 
@@ -18,7 +18,7 @@ - (void)getScrollViewRectForHtmlElementWithId:(NSString*)elementId completion:(v
 }
 
 - (void)getScreenRectForHtmlImageWithSrc:(NSString*)src completion:(void (^)(CGRect rect))completion {
-    [self getScreenRectForHtmlElementFromJavascriptString:[NSString stringWithFormat:@"window.elementLocation.getElementRect(window.elementLocation.getImageWithSrc('%@'));", src]
+    [self getScreenRectForHtmlElementFromJavascriptString:[NSString stringWithFormat:@"window.wmf.elementLocation.getElementRect(window.wmf.elementLocation.getImageWithSrc('%@'));", src]
                                                completion:completion];
 }
 
@@ -58,7 +58,7 @@ - (void)getScreenRectForHtmlElementFromJavascriptString:(NSString*)javascriptStr
 }
 
 - (void)getIndexOfTopOnScreenElementWithPrefix:(NSString*)prefix count:(NSUInteger)count completion:(void (^)(id index, NSError* error))completion {
-    [self evaluateJavaScript:[NSString stringWithFormat:@"window.elementLocation.getIndexOfFirstOnScreenElement('%@', %lu)", prefix, count]
+    [self evaluateJavaScript:[NSString stringWithFormat:@"window.wmf.elementLocation.getIndexOfFirstOnScreenElement('%@', %lu)", prefix, count]
            completionHandler:^(id _Nullable index, NSError* _Nullable error) {
         completion(index, error);
     }];
diff --git a/Wikipedia/Code/WebViewController.m b/Wikipedia/Code/WebViewController.m
index f078dd91238..2072a783c58 100644
--- a/Wikipedia/Code/WebViewController.m
+++ b/Wikipedia/Code/WebViewController.m
@@ -113,7 +113,7 @@ - (NSString*)apostropheEscapedArticleLanguageLocalizedStringForKey:(NSString*)ke
 
 - (NSString*)tableTransformJS {
     return
-        [NSString stringWithFormat:@"window.transformer.transform('hideTables', document, %d, '%@', '%@', '%@');",
+        [NSString stringWithFormat:@"window.wmf.transformer.transform('hideTables', document, %d, '%@', '%@', '%@');",
          self.article.isMain,
          [self apostropheEscapedArticleLanguageLocalizedStringForKey:@"info-box-title"],
          [self apostropheEscapedArticleLanguageLocalizedStringForKey:@"table-title-other"],
@@ -131,13 +131,13 @@ - (void)userContentController:(WKUserContentController*)userContentController di
             MWLanguageInfo* languageInfo = [MWLanguageInfo languageInfoForCode:self.article.site.language];
             NSString* uidir              = ([[UIApplication sharedApplication] wmf_isRTL] ? @"rtl" : @"ltr");
             
-            [self.webView evaluateJavaScript:[NSString stringWithFormat:@"window.setLanguage('%@', '%@', '%@')",
+            [self.webView evaluateJavaScript:[NSString stringWithFormat:@"window.wmf.utilities.setLanguage('%@', '%@', '%@')",
                                               languageInfo.code,
                                               languageInfo.dir,
                                               uidir
                                               ] completionHandler:nil];
         }else if ([message.body isEqualToString:@"setPageProtected"] && !self.article.editable) {
-            [self.webView evaluateJavaScript:@"window.setPageProtected()" completionHandler:nil];
+            [self.webView evaluateJavaScript:@"window.wmf.utilities.setPageProtected()" completionHandler:nil];
         }
     } else if ([message.name isEqualToString:@"sendJavascriptConsoleLogMessageToXcodeConsole"]) {
 #if DEBUG
@@ -232,13 +232,13 @@ - (WKWebViewConfiguration*)configuration {
     [userContentController addScriptMessageHandler:[[WeakScriptMessageDelegate alloc] initWithDelegate:self] name:@"articleState"];
 
     NSString* earlyJavascriptTransforms = @""
-                                          "transformer.transform( 'moveFirstGoodParagraphUp', document );"
-                                          "transformer.transform( 'hideRedlinks', document );"
-                                          "transformer.transform( 'disableFilePageEdit', document );"
-                                          "transformer.transform( 'addImageOverflowXContainers', document );"
+                                          "window.wmf.transformer.transform( 'moveFirstGoodParagraphUp', document );"
+                                          "window.wmf.transformer.transform( 'hideRedlinks', document );"
+                                          "window.wmf.transformer.transform( 'disableFilePageEdit', document );"
+                                          "window.wmf.transformer.transform( 'addImageOverflowXContainers', document );"
                                           // 'addImageOverflowXContainers' needs to happen before 'widenImages'.
                                           // See "enwiki > Counties of England > Scope and structure > Local government"
-                                          "transformer.transform( 'widenImages', document );"
+                                          "window.wmf.transformer.transform( 'widenImages', document );"
                                           "window.webkit.messageHandlers.articleState.postMessage('articleLoaded');"
                                           "console.log = function(message){window.webkit.messageHandlers.sendJavascriptConsoleLogMessageToXcodeConsole.postMessage({'message': message});};";
 
@@ -605,13 +605,17 @@ - (void)scrollToFragment:(NSString*)fragment {
     [self scrollToFragment:fragment animated:YES];
 }
 
+//- (void)didReceiveMemoryWarning {
+//    [self scrollToFragment:@"Charts" animated:NO];
+//}
+
 - (void)scrollToFragment:(NSString*)fragment animated:(BOOL)animated {
     if (fragment.length == 0) {
         // No section so scroll to top. (Used when "Introduction" is selected.)
         [self.webView.scrollView scrollRectToVisible:CGRectMake(0, 1, 1, 1) animated:animated];
     } else {
         if (!animated) {
-            [self.webView evaluateJavaScript:[NSString stringWithFormat:@"window.scrollToFragment('%@')", fragment] completionHandler:nil];
+            [self.webView evaluateJavaScript:[NSString stringWithFormat:@"window.wmf.utilities.scrollToFragment('%@')", fragment] completionHandler:nil];
             return;
         }
         [self.webView getScrollViewRectForHtmlElementWithId:fragment completion:^(CGRect rect) {
@@ -631,7 +635,7 @@ - (void)accessibilityCursorToSection:(MWKSection*)section {
     // This might shift the visual scroll position. To prevent it affecting other users,
     // we will only do it when we detect than an assistive technology which actually needs this is running.
     if (UIAccessibilityIsVoiceOverRunning()) {
-        [self.webView evaluateJavaScript:[NSString stringWithFormat:@"window.accessibilityCursorToFragment('%@')", section.anchor] completionHandler:nil];
+        [self.webView evaluateJavaScript:[NSString stringWithFormat:@"window.wmf.utilities.accessibilityCursorToFragment('%@')", section.anchor] completionHandler:nil];
     }
 }
 
diff --git a/Wikipedia/assets/abusefilter.html b/Wikipedia/assets/abusefilter.html
index 5b6f4048820..9689c5a42f1 100644
--- a/Wikipedia/assets/abusefilter.html
+++ b/Wikipedia/assets/abusefilter.html
@@ -2,7 +2,7 @@
 <html class="content-ltr ui-ltr" dir="ltr">
     <head>
     <meta charset="UTF-8">
-    <script src="bundle.js"></script>
+    <script src="index.js"></script>
     <meta name="viewport" id="viewport" content="width=device-width, user-scalable=no">
     <link href="abusefilter.css" rel="stylesheet" type="text/css"></link>
     
diff --git a/Wikipedia/assets/index.html b/Wikipedia/assets/index.html
index 0411a862887..b5c4691e033 100644
--- a/Wikipedia/assets/index.html
+++ b/Wikipedia/assets/index.html
@@ -2,7 +2,7 @@
 <html>
     <head>
     <meta charset="UTF-8">
-    <script src="bundle.js"></script>
+    <script src="index.js"></script>
     <meta name="viewport" id="viewport" content="width=device-width, user-scalable=no">
     <link href="styles.css" rel="stylesheet" type="text/css"></link>
     <link href="styleoverrides.css" rel="stylesheet" type="text/css"></link>
diff --git a/Wikipedia/assets/bundle.js b/Wikipedia/assets/index.js
similarity index 92%
rename from Wikipedia/assets/bundle.js
rename to Wikipedia/assets/index.js
index 11176b8b04e..c3496110786 100644
--- a/Wikipedia/assets/bundle.js
+++ b/Wikipedia/assets/index.js
@@ -1,4 +1,12 @@
 (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
+var wmf = {};
+
+wmf.elementLocation = require("./js/elementLocation");
+wmf.transformer = require("./js/transformer");
+wmf.utilities = require("./js/utilities");
+
+window.wmf = wmf;
+},{"./js/elementLocation":2,"./js/transformer":5,"./js/utilities":12}],2:[function(require,module,exports){
 //  Created by Monte Hurd on 12/28/13.
 //  Used by methods in "UIWebView+ElementLocation.h" category.
 //  Copyright (c) 2013 Wikimedia Foundation. Provided under MIT-style license; please copy and modify!
@@ -60,27 +68,11 @@ exports.getURLForElementAtPoint = function (x, y){
 };
 
 
-},{}],2:[function(require,module,exports){
-(function (global){
+},{}],3:[function(require,module,exports){
 (function () {
 var refs = require("./refs");
 var utilities = require("./utilities");
 
-function setLanguage(lang, dir, uidir){
-     var html = document.querySelector( "html" );
-     html.lang = lang;
-     html.dir = dir;
-     html.classList.add( 'content-' + dir );
-     html.classList.add( 'ui-' + uidir );
-     document.querySelector('base').href = 'https://' + lang + '.wikipedia.org/';
-}
-global.setLanguage = setLanguage;
-
-function setPageProtected(){
-    document.getElementsByTagName( "html" )[0].classList.add( "page-protected" );
-}
-global.setPageProtected = setPageProtected;
-
 document.onclick = function() {
     // Reminder: resist adding any click/tap handling here - they can
     // "fight" with items in the touchEndedWithoutDragging handler.
@@ -166,7 +158,7 @@ document.addEventListener("touchend", handleTouchEnded, false);
  // 3D Touch peeking listeners.
  document.addEventListener("touchstart", function (event) {
                            // Send message with url (if any) from touch element to native land.
-                           window.webkit.messageHandlers.peek.postMessage({"touchedElementURL": window.elementLocation.getURLForElementAtPoint(event.changedTouches[0].pageX, event.changedTouches[0].pageY)});
+                           window.webkit.messageHandlers.peek.postMessage({"touchedElementURL": window.wmf.elementLocation.getURLForElementAtPoint(event.changedTouches[0].pageX, event.changedTouches[0].pageY)});
                            }, false);
  
  document.addEventListener("touchend", function () {
@@ -175,16 +167,7 @@ document.addEventListener("touchend", handleTouchEnded, false);
                            }, false);
 })();
 
-}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
-},{"./refs":4,"./utilities":14}],3:[function(require,module,exports){
-
-var elementLocation = require("./elementLocation");
-var transformer = require("./transformer");
-
-window.elementLocation = elementLocation;
-window.transformer = transformer;
-
-},{"./elementLocation":1,"./transformer":6}],4:[function(require,module,exports){
+},{"./refs":4,"./utilities":12}],4:[function(require,module,exports){
 
 function isReference( href ) {
     return ( href.slice( 0, 10 ) === "#cite_note" );
@@ -307,30 +290,6 @@ exports.isReference = isReference;
 exports.sendNearbyReferences = sendNearbyReferences;
 
 },{}],5:[function(require,module,exports){
-(function (global){
-function scrollToFragment(fragmentId){
-    location.hash = '';
-    location.hash = fragmentId;
-}
-
-global.scrollToFragment = scrollToFragment;
-
-function accessibilityCursorToFragment(fragmentId){
-    /* Attempt to move accessibility cursor to fragment. We need to /change/ focus,
-     in order to have the desired effect, so we first give focus to the body element,
-     then move it to the desired fragment. */
-    var focus_element = document.getElementById(fragmentId);
-    var other_element = document.body;
-    other_element.setAttribute('tabindex', 0);
-    other_element.focus();
-    focus_element.setAttribute('tabindex', 0);
-    focus_element.focus();
-}
-
-global.accessibilityCursorToFragment = accessibilityCursorToFragment;
-
-}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
-},{}],6:[function(require,module,exports){
 function Transformer() {
 }
 
@@ -353,15 +312,7 @@ Transformer.prototype.transform = function( transform ) {
 
 module.exports = new Transformer();
 
-},{}],7:[function(require,module,exports){
-
-require("./transforms/collapseTables");
-require("./transforms/relocateFirstParagraph");
-require("./transforms/hideRedLinks");
-require("./transforms/disableFilePageEdit");
-require("./transforms/addImageOverflowContainers");
-
-},{"./transforms/addImageOverflowContainers":8,"./transforms/collapseTables":9,"./transforms/disableFilePageEdit":10,"./transforms/hideRedLinks":11,"./transforms/relocateFirstParagraph":12}],8:[function(require,module,exports){
+},{}],6:[function(require,module,exports){
 var transformer = require("../transformer");
 var utilities = require("../utilities");
 
@@ -407,7 +358,7 @@ transformer.register( "addImageOverflowXContainers", function( content ) {
     }
 } );
 
-},{"../transformer":6,"../utilities":14}],9:[function(require,module,exports){
+},{"../transformer":5,"../utilities":12}],7:[function(require,module,exports){
 var transformer = require("../transformer");
 var utilities = require("../utilities");
 
@@ -567,7 +518,7 @@ transformer.register( "hideTables", function( content , isMainPage, titleInfobox
     }
 } );
 
-},{"../transformer":6,"../utilities":14}],10:[function(require,module,exports){
+},{"../transformer":5,"../utilities":12}],8:[function(require,module,exports){
 var transformer = require("../transformer");
 
 transformer.register( "disableFilePageEdit", function( content ) {
@@ -593,7 +544,7 @@ transformer.register( "disableFilePageEdit", function( content ) {
     }
 } );
 
-},{"../transformer":6}],11:[function(require,module,exports){
+},{"../transformer":5}],9:[function(require,module,exports){
 var transformer = require("../transformer");
 
 transformer.register( "hideRedlinks", function( content ) {
@@ -604,7 +555,7 @@ transformer.register( "hideRedlinks", function( content ) {
 	}
 } );
 
-},{"../transformer":6}],12:[function(require,module,exports){
+},{"../transformer":5}],10:[function(require,module,exports){
 var transformer = require("../transformer");
 
 transformer.register( "moveFirstGoodParagraphUp", function( content ) {
@@ -685,7 +636,7 @@ transformer.register( "moveFirstGoodParagraphUp", function( content ) {
     block_0.insertBefore(fragmentOfItemsToRelocate, edit_section_button_0.nextSibling);
 });
 
-},{"../transformer":6}],13:[function(require,module,exports){
+},{"../transformer":5}],11:[function(require,module,exports){
 var transformer = require("../transformer");
 var utilities = require("../utilities");
 
@@ -821,7 +772,7 @@ transformer.register( "widenImages", function( content ) {
     }
 } );
 
-},{"../transformer":6,"../utilities":14}],14:[function(require,module,exports){
+},{"../transformer":5,"../utilities":12}],12:[function(require,module,exports){
 
 // Implementation of https://developer.mozilla.org/en-US/docs/Web/API/Element/closest
 function findClosest (el, selector) {
@@ -838,7 +789,41 @@ function isNestedInTable(el) {
     return false;
 }
 
+function setLanguage(lang, dir, uidir){
+    var html = document.querySelector( "html" );
+    html.lang = lang;
+    html.dir = dir;
+    html.classList.add( 'content-' + dir );
+    html.classList.add( 'ui-' + uidir );
+    document.querySelector('base').href = 'https://' + lang + '.wikipedia.org/';
+}
+
+function setPageProtected(){
+    document.getElementsByTagName( "html" )[0].classList.add( "page-protected" );
+}
+
+function scrollToFragment(fragmentId){
+    location.hash = '';
+    location.hash = fragmentId;
+}
+
+function accessibilityCursorToFragment(fragmentId){
+    /* Attempt to move accessibility cursor to fragment. We need to /change/ focus,
+     in order to have the desired effect, so we first give focus to the body element,
+     then move it to the desired fragment. */
+    var focus_element = document.getElementById(fragmentId);
+    var other_element = document.body;
+    other_element.setAttribute('tabindex', 0);
+    other_element.focus();
+    focus_element.setAttribute('tabindex', 0);
+    focus_element.focus();
+}
+
+exports.accessibilityCursorToFragment = accessibilityCursorToFragment;
+exports.scrollToFragment = scrollToFragment;
+exports.setPageProtected = setPageProtected;
+exports.setLanguage = setLanguage;
 exports.findClosest = findClosest;
 exports.isNestedInTable = isNestedInTable;
 
-},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14]);
+},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12]);
diff --git a/Wikipedia/assets/preview.html b/Wikipedia/assets/preview.html
index 5f62b65f449..b209f74fff6 100644
--- a/Wikipedia/assets/preview.html
+++ b/Wikipedia/assets/preview.html
@@ -2,6 +2,7 @@
 <html>
     <head>
     <meta charset="UTF-8">
+    <script src="preview.js"></script>
     <meta name="viewport" id="viewport" content="width=device-width, user-scalable=no">
     <link href="preview.css" rel="stylesheet" type="text/css"></link>
     <link href="styleoverrides.css" rel="stylesheet" type="text/css"></link>
diff --git a/Wikipedia/assets/preview.js b/Wikipedia/assets/preview.js
new file mode 100644
index 00000000000..f79f5430f44
--- /dev/null
+++ b/Wikipedia/assets/preview.js
@@ -0,0 +1,61 @@
+(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
+
+// Implementation of https://developer.mozilla.org/en-US/docs/Web/API/Element/closest
+function findClosest (el, selector) {
+    while ((el = el.parentElement) && !el.matches(selector));
+    return el;
+}
+
+function isNestedInTable(el) {
+    while ((el = el.parentElement)){
+        if(el.tagName === 'TD'){
+            return true;
+        }
+    }
+    return false;
+}
+
+function setLanguage(lang, dir, uidir){
+    var html = document.querySelector( "html" );
+    html.lang = lang;
+    html.dir = dir;
+    html.classList.add( 'content-' + dir );
+    html.classList.add( 'ui-' + uidir );
+    document.querySelector('base').href = 'https://' + lang + '.wikipedia.org/';
+}
+
+function setPageProtected(){
+    document.getElementsByTagName( "html" )[0].classList.add( "page-protected" );
+}
+
+function scrollToFragment(fragmentId){
+    location.hash = '';
+    location.hash = fragmentId;
+}
+
+function accessibilityCursorToFragment(fragmentId){
+    /* Attempt to move accessibility cursor to fragment. We need to /change/ focus,
+     in order to have the desired effect, so we first give focus to the body element,
+     then move it to the desired fragment. */
+    var focus_element = document.getElementById(fragmentId);
+    var other_element = document.body;
+    other_element.setAttribute('tabindex', 0);
+    other_element.focus();
+    focus_element.setAttribute('tabindex', 0);
+    focus_element.focus();
+}
+
+exports.accessibilityCursorToFragment = accessibilityCursorToFragment;
+exports.scrollToFragment = scrollToFragment;
+exports.setPageProtected = setPageProtected;
+exports.setLanguage = setLanguage;
+exports.findClosest = findClosest;
+exports.isNestedInTable = isNestedInTable;
+
+},{}],2:[function(require,module,exports){
+var wmf = {};
+
+wmf.utilities = require("./js/utilities");
+
+window.wmf = wmf;
+},{"./js/utilities":1}]},{},[2,1]);
diff --git a/www/Gruntfile.js b/www/Gruntfile.js
index 15d90dbcd89..ce4f02874c6 100644
--- a/www/Gruntfile.js
+++ b/www/Gruntfile.js
@@ -1,5 +1,5 @@
 module.exports = function (grunt) {
-  var allScriptFiles = "js/**/*.js";
+  var allJSFilesInJSFolder = "js/**/*.js";
 
   var distFolder = '../wikipedia/assets/';
 
@@ -11,9 +11,13 @@ module.exports = function (grunt) {
   grunt.initConfig( {
 
     browserify: {
-      dist: {
-        src: allScriptFiles,
-        dest: distFolder + "bundle.js"
+      distMain: {
+        src: ["index-main.js", allJSFilesInJSFolder, "!preview-main.js"],
+        dest: distFolder + "index.js"
+      },
+      distPreview: {
+        src: ["preview-main.js", "js/utilities.js"],
+        dest: distFolder + "preview.js"
       }
     },
 
@@ -31,7 +35,7 @@ module.exports = function (grunt) {
     },
 
     jshint: {
-      allFiles: allScriptFiles,
+      allFiles: allJSFilesInJSFolder,
       options: {
         jshintrc: true
       }
diff --git a/www/abusefilter.html b/www/abusefilter.html
index 5b6f4048820..9689c5a42f1 100644
--- a/www/abusefilter.html
+++ b/www/abusefilter.html
@@ -2,7 +2,7 @@
 <html class="content-ltr ui-ltr" dir="ltr">
     <head>
     <meta charset="UTF-8">
-    <script src="bundle.js"></script>
+    <script src="index.js"></script>
     <meta name="viewport" id="viewport" content="width=device-width, user-scalable=no">
     <link href="abusefilter.css" rel="stylesheet" type="text/css"></link>
     
diff --git a/www/index-main.js b/www/index-main.js
new file mode 100644
index 00000000000..7b296870bbe
--- /dev/null
+++ b/www/index-main.js
@@ -0,0 +1,7 @@
+var wmf = {};
+
+wmf.elementLocation = require("./js/elementLocation");
+wmf.transformer = require("./js/transformer");
+wmf.utilities = require("./js/utilities");
+
+window.wmf = wmf;
\ No newline at end of file
diff --git a/www/index.html b/www/index.html
index 0411a862887..b5c4691e033 100644
--- a/www/index.html
+++ b/www/index.html
@@ -2,7 +2,7 @@
 <html>
     <head>
     <meta charset="UTF-8">
-    <script src="bundle.js"></script>
+    <script src="index.js"></script>
     <meta name="viewport" id="viewport" content="width=device-width, user-scalable=no">
     <link href="styles.css" rel="stylesheet" type="text/css"></link>
     <link href="styleoverrides.css" rel="stylesheet" type="text/css"></link>
diff --git a/www/js/listeners.js b/www/js/listeners.js
index 2be4495ed98..aacc759c2d8 100644
--- a/www/js/listeners.js
+++ b/www/js/listeners.js
@@ -2,21 +2,6 @@
 var refs = require("./refs");
 var utilities = require("./utilities");
 
-function setLanguage(lang, dir, uidir){
-     var html = document.querySelector( "html" );
-     html.lang = lang;
-     html.dir = dir;
-     html.classList.add( 'content-' + dir );
-     html.classList.add( 'ui-' + uidir );
-     document.querySelector('base').href = 'https://' + lang + '.wikipedia.org/';
-}
-global.setLanguage = setLanguage;
-
-function setPageProtected(){
-    document.getElementsByTagName( "html" )[0].classList.add( "page-protected" );
-}
-global.setPageProtected = setPageProtected;
-
 document.onclick = function() {
     // Reminder: resist adding any click/tap handling here - they can
     // "fight" with items in the touchEndedWithoutDragging handler.
@@ -102,7 +87,7 @@ document.addEventListener("touchend", handleTouchEnded, false);
  // 3D Touch peeking listeners.
  document.addEventListener("touchstart", function (event) {
                            // Send message with url (if any) from touch element to native land.
-                           window.webkit.messageHandlers.peek.postMessage({"touchedElementURL": window.elementLocation.getURLForElementAtPoint(event.changedTouches[0].pageX, event.changedTouches[0].pageY)});
+                           window.webkit.messageHandlers.peek.postMessage({"touchedElementURL": window.wmf.elementLocation.getURLForElementAtPoint(event.changedTouches[0].pageX, event.changedTouches[0].pageY)});
                            }, false);
  
  document.addEventListener("touchend", function () {
diff --git a/www/js/main.js b/www/js/main.js
deleted file mode 100644
index 88c57cbbce7..00000000000
--- a/www/js/main.js
+++ /dev/null
@@ -1,6 +0,0 @@
-
-var elementLocation = require("./elementLocation");
-var transformer = require("./transformer");
-
-window.elementLocation = elementLocation;
-window.transformer = transformer;
diff --git a/www/js/scrollToFragment.js b/www/js/scrollToFragment.js
deleted file mode 100644
index 5cd56460c02..00000000000
--- a/www/js/scrollToFragment.js
+++ /dev/null
@@ -1,20 +0,0 @@
-function scrollToFragment(fragmentId){
-    location.hash = '';
-    location.hash = fragmentId;
-}
-
-global.scrollToFragment = scrollToFragment;
-
-function accessibilityCursorToFragment(fragmentId){
-    /* Attempt to move accessibility cursor to fragment. We need to /change/ focus,
-     in order to have the desired effect, so we first give focus to the body element,
-     then move it to the desired fragment. */
-    var focus_element = document.getElementById(fragmentId);
-    var other_element = document.body;
-    other_element.setAttribute('tabindex', 0);
-    other_element.focus();
-    focus_element.setAttribute('tabindex', 0);
-    focus_element.focus();
-}
-
-global.accessibilityCursorToFragment = accessibilityCursorToFragment;
diff --git a/www/js/transforms.js b/www/js/transforms.js
deleted file mode 100644
index eeab8c4f628..00000000000
--- a/www/js/transforms.js
+++ /dev/null
@@ -1,6 +0,0 @@
-
-require("./transforms/collapseTables");
-require("./transforms/relocateFirstParagraph");
-require("./transforms/hideRedLinks");
-require("./transforms/disableFilePageEdit");
-require("./transforms/addImageOverflowContainers");
diff --git a/www/js/utilities.js b/www/js/utilities.js
index 865b2a1cec1..36d54b5f75b 100644
--- a/www/js/utilities.js
+++ b/www/js/utilities.js
@@ -14,5 +14,39 @@ function isNestedInTable(el) {
     return false;
 }
 
+function setLanguage(lang, dir, uidir){
+    var html = document.querySelector( "html" );
+    html.lang = lang;
+    html.dir = dir;
+    html.classList.add( 'content-' + dir );
+    html.classList.add( 'ui-' + uidir );
+    document.querySelector('base').href = 'https://' + lang + '.wikipedia.org/';
+}
+
+function setPageProtected(){
+    document.getElementsByTagName( "html" )[0].classList.add( "page-protected" );
+}
+
+function scrollToFragment(fragmentId){
+    location.hash = '';
+    location.hash = fragmentId;
+}
+
+function accessibilityCursorToFragment(fragmentId){
+    /* Attempt to move accessibility cursor to fragment. We need to /change/ focus,
+     in order to have the desired effect, so we first give focus to the body element,
+     then move it to the desired fragment. */
+    var focus_element = document.getElementById(fragmentId);
+    var other_element = document.body;
+    other_element.setAttribute('tabindex', 0);
+    other_element.focus();
+    focus_element.setAttribute('tabindex', 0);
+    focus_element.focus();
+}
+
+exports.accessibilityCursorToFragment = accessibilityCursorToFragment;
+exports.scrollToFragment = scrollToFragment;
+exports.setPageProtected = setPageProtected;
+exports.setLanguage = setLanguage;
 exports.findClosest = findClosest;
 exports.isNestedInTable = isNestedInTable;
diff --git a/www/preview-main.js b/www/preview-main.js
new file mode 100644
index 00000000000..b36c74043ea
--- /dev/null
+++ b/www/preview-main.js
@@ -0,0 +1,5 @@
+var wmf = {};
+
+wmf.utilities = require("./js/utilities");
+
+window.wmf = wmf;
\ No newline at end of file
diff --git a/www/preview.html b/www/preview.html
index 5f62b65f449..b209f74fff6 100644
--- a/www/preview.html
+++ b/www/preview.html
@@ -2,6 +2,7 @@
 <html>
     <head>
     <meta charset="UTF-8">
+    <script src="preview.js"></script>
     <meta name="viewport" id="viewport" content="width=device-width, user-scalable=no">
     <link href="preview.css" rel="stylesheet" type="text/css"></link>
     <link href="styleoverrides.css" rel="stylesheet" type="text/css"></link>
