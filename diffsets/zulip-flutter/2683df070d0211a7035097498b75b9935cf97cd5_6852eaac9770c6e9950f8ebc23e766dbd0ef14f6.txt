diff --git a/lib/widgets/compose_box.dart b/lib/widgets/compose_box.dart
index 005321719d..11d27d5402 100644
--- a/lib/widgets/compose_box.dart
+++ b/lib/widgets/compose_box.dart
@@ -1523,14 +1523,26 @@ class _ComposeBoxState extends State<ComposeBox> with PerAccountStoreAwareStateM
 
   @override
   void onNewStore() {
+    final newStore = PerAccountStoreWidget.of(context);
+
+    final controller = _controller;
+    if (controller == null) {
+      _setNewController(newStore);
+      return;
+    }
+
+    switch (controller) {
+      case StreamComposeBoxController():
+        controller.topic.store = newStore;
+      case FixedDestinationComposeBoxController():
+        // no reference to the store that needs updating
+    }
+  }
+
+  void _setNewController(PerAccountStore store) {
     switch (widget.narrow) {
       case ChannelNarrow():
-        final store = PerAccountStoreWidget.of(context);
-        if (_controller == null) {
-          _controller = StreamComposeBoxController(store: store);
-        } else {
-          (controller as StreamComposeBoxController).topic.store = store;
-        }
+        _controller = StreamComposeBoxController(store: store);
       case TopicNarrow():
       case DmNarrow():
         _controller = FixedDestinationComposeBoxController();
diff --git a/test/widgets/compose_box_test.dart b/test/widgets/compose_box_test.dart
index e02fd97a15..65740a8d1e 100644
--- a/test/widgets/compose_box_test.dart
+++ b/test/widgets/compose_box_test.dart
@@ -28,6 +28,7 @@ import '../api/fake_api.dart';
 import '../example_data.dart' as eg;
 import '../flutter_checks.dart';
 import '../model/binding.dart';
+import '../model/store_checks.dart';
 import '../model/test_store.dart';
 import '../model/typing_status_test.dart';
 import '../stdlib_checks.dart';
@@ -58,14 +59,14 @@ void main() {
     zulipFeatureLevel ??= eg.futureZulipFeatureLevel;
     final selfAccount = eg.account(user: selfUser, zulipFeatureLevel: zulipFeatureLevel);
     await testBinding.globalStore.add(selfAccount, eg.initialSnapshot(
+      realmUsers: [selfUser, ...otherUsers],
+      streams: streams,
       zulipFeatureLevel: zulipFeatureLevel,
       realmMandatoryTopics: mandatoryTopics,
     ));
 
     store = await testBinding.globalStore.perAccount(selfAccount.id);
 
-    await store.addUsers([selfUser, ...otherUsers]);
-    await store.addStreams(streams);
     connection = store.connection as FakeApiConnection;
 
     await tester.pumpWidget(TestZulipApp(accountId: selfAccount.id,
@@ -111,6 +112,11 @@ void main() {
     await tester.enterText(contentInputFinder, content);
   }
 
+  void checkContentInputValue(WidgetTester tester, String expected) {
+    check(tester.widget<TextField>(contentInputFinder))
+      .controller.isNotNull().value.text.equals(expected);
+  }
+
   Future<void> tapSendButton(WidgetTester tester) async {
     connection.prepare(json: SendMessageResult(id: 123).toJson());
     await tester.tap(find.byIcon(ZulipIcons.send));
@@ -1239,4 +1245,39 @@ void main() {
         maxHeight: verticalPadding + 170 * 1.5, maxVisibleLines: 6);
     });
   });
+
+  group('ComposeBoxState new-event-queue transition', () {
+    testWidgets('content input not cleared when store changes', (tester) async {
+      // Regression test for: https://github.com/zulip/zulip-flutter/issues/1470
+
+      TypingNotifier.debugEnable = false;
+      addTearDown(TypingNotifier.debugReset);
+
+      final channel = eg.stream();
+      await prepareComposeBox(tester,
+        narrow: eg.topicNarrow(channel.streamId, 'topic'), streams: [channel]);
+
+      await enterContent(tester, 'some content');
+      checkContentInputValue(tester, 'some content');
+
+      store.updateMachine!
+        ..debugPauseLoop()
+        ..poll()
+        ..debugPrepareLoopError(
+            eg.apiExceptionBadEventQueueId(queueId: store.queueId))
+        ..debugAdvanceLoop();
+      await tester.pump();
+
+      final newStore = testBinding.globalStore.perAccountSync(store.accountId)!;
+      check(newStore)
+        // a new store has replaced the old one
+        ..not((it) => it.identicalTo(store))
+        // new store has the same boring data, in order to present a compose box
+        // that allows composing, instead of a no-posting-permission banner
+        ..accountId.equals(store.accountId)
+        ..streams.containsKey(channel.streamId);
+
+      checkContentInputValue(tester, 'some content');
+    });
+  });
 }
