diff --git a/lib/widgets/message_list.dart b/lib/widgets/message_list.dart
index b76412e0cb..83c3d9b799 100644
--- a/lib/widgets/message_list.dart
+++ b/lib/widgets/message_list.dart
@@ -322,6 +322,27 @@ class ScrollToBottomButton extends StatelessWidget {
   }
 }
 
+class RecipientHeader extends StatelessWidget {
+  const RecipientHeader({super.key, required this.message});
+
+  final Message message;
+
+  @override
+  Widget build(BuildContext context) {
+    // TODO recipient headings depend on narrow
+    final message = this.message;
+    switch (message) {
+      case StreamMessage():
+        final store = PerAccountStoreWidget.of(context);
+        final subscription = store.subscriptions[message.streamId];
+        return StreamTopicRecipientHeader(
+          message: message, streamColor: colorForStream(subscription));
+      case DmMessage():
+        return DmRecipientHeader(message: message);
+    }
+  }
+}
+
 class MessageItem extends StatelessWidget {
   const MessageItem({
     super.key,
@@ -334,24 +355,18 @@ class MessageItem extends StatelessWidget {
 
   @override
   Widget build(BuildContext context) {
-    // TODO recipient headings depend on narrow
-
     final store = PerAccountStoreWidget.of(context);
     final message = item.message;
 
     Color highlightBorderColor;
     Color restBorderColor;
-    Widget recipientHeader;
     if (message is StreamMessage) {
       final subscription = store.subscriptions[message.streamId];
       highlightBorderColor = colorForStream(subscription);
       restBorderColor = _kStreamMessageBorderColor;
-      recipientHeader = StreamTopicRecipientHeader(
-        message: message, streamColor: highlightBorderColor);
     } else if (message is DmMessage) {
       highlightBorderColor = _kDmRecipientHeaderColor;
       restBorderColor = _kDmRecipientHeaderColor;
-      recipientHeader = DmRecipientHeader(message: message);
     } else {
       throw Exception("impossible message type: ${message.runtimeType}");
     }
@@ -368,7 +383,7 @@ class MessageItem extends StatelessWidget {
         left: recipientBorder, bottom: restBorder, right: restBorder));
 
     return StickyHeader(
-      header: recipientHeader,
+      header: RecipientHeader(message: message),
       content: Column(children: [
         DecoratedBox(
           decoration: borderDecoration,
