diff --git a/lib/widgets/color.dart b/lib/widgets/color.dart
new file mode 100644
index 0000000000..85fd60ba18
--- /dev/null
+++ b/lib/widgets/color.dart
@@ -0,0 +1,18 @@
+import 'dart:ui';
+
+import 'package:flutter_color_models/flutter_color_models.dart';
+
+// This function promises to deal with "LCH" lightness, not "LAB" lightness,
+// but it's not yet true. We haven't found a Dart libary that can work with LCH:
+//   <https://chat.zulip.org/#narrow/stream/243-mobile-team/topic/design.3A.20.23F117.20.22Inbox.22.20screen/near/1677537>
+// We use LAB because some quick reading suggests that the "L" axis
+// is the same in both representations:
+//   <https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/lch>
+//
+// TODO try LCH; see linked discussion
+Color clampLchLightness(Color color, num lowerLimit, num upperLimit) {
+  final asLab = LabColor.fromColor(color);
+  return asLab
+    .copyWith(lightness: asLab.lightness.clamp(lowerLimit, upperLimit))
+    .toColor();
+}
diff --git a/lib/widgets/unread_count_badge.dart b/lib/widgets/unread_count_badge.dart
index 6a05b06d48..a24108cbc7 100644
--- a/lib/widgets/unread_count_badge.dart
+++ b/lib/widgets/unread_count_badge.dart
@@ -1,8 +1,8 @@
 import 'dart:ui';
 
-import 'package:flutter_color_models/flutter_color_models.dart';
 import 'package:flutter/material.dart';
 
+import 'color.dart';
 import 'text.dart';
 
 /// A widget to display a given number of unreads in a conversation.
@@ -37,25 +37,10 @@ class UnreadCountBadge extends StatelessWidget {
     // Follows `.unread-count` in Vlad's replit:
     //   <https://replit.com/@VladKorobov/zulip-sidebar#script.js>
     //   <https://chat.zulip.org/#narrow/stream/243-mobile-team/topic/design.3A.20.23F117.20.22Inbox.22.20screen/near/1624484>
-
-    // The design uses "LCH", not "LAB", but we haven't found a Dart libary
-    // that can work with LCH:
-    //   <https://replit.com/@VladKorobov/zulip-sidebar#script.js>
-    //   <https://chat.zulip.org/#narrow/stream/243-mobile-team/topic/design.3A.20.23F117.20.22Inbox.22.20screen/near/1677537>
-    // We use LAB because some quick reading suggests that the "L" axis
-    // is the same in both representations:
-    //   <https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/lch>
-    // and because the design doesn't use the LCH representation except to
-    // adjust an "L" value.
     //
-    // TODO try LCH; see linked discussion
     // TODO fix bug where our results differ from the replit's (see unit tests)
     // TODO profiling for expensive computation
-    final asLab = LabColor.fromColor(baseStreamColor!);
-    return asLab
-      .copyWith(lightness: asLab.lightness.clamp(30, 70))
-      .toColor()
-      .withOpacity(0.3);
+    return clampLchLightness(baseStreamColor!, 30, 70).withOpacity(0.3);
   }
 
   @override
