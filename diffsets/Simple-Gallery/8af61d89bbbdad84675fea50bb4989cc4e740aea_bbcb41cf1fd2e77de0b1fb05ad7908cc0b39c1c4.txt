diff --git a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/activities/MediaActivity.kt b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/activities/MediaActivity.kt
index a4f9ba824c..c8d0773764 100644
--- a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/activities/MediaActivity.kt
+++ b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/activities/MediaActivity.kt
@@ -855,7 +855,7 @@ class MediaActivity : SimpleActivity(), MediaOperationsListener {
         }
     }
 
-    override fun tryDeleteFiles(fileDirItems: ArrayList<FileDirItem>, onDelete: () -> Unit) {
+    override fun tryDeleteFiles(fileDirItems: ArrayList<FileDirItem>) {
         val filtered = fileDirItems.filter { !getIsPathDirectory(it.path) && it.path.isMediaFile() } as ArrayList
         if (filtered.isEmpty()) {
             return
@@ -867,7 +867,7 @@ class MediaActivity : SimpleActivity(), MediaOperationsListener {
 
             movePathsInRecycleBin(filtered.map { it.path } as ArrayList<String>) {
                 if (it) {
-                    deleteFilteredFiles(filtered, onDelete)
+                    deleteFilteredFiles(filtered)
                 } else {
                     toast(R.string.unknown_error_occurred)
                 }
@@ -875,17 +875,15 @@ class MediaActivity : SimpleActivity(), MediaOperationsListener {
         } else {
             val deletingItems = resources.getQuantityString(R.plurals.deleting_items, filtered.size, filtered.size)
             toast(deletingItems)
-            deleteFilteredFiles(filtered, onDelete)
+            deleteFilteredFiles(filtered)
         }
     }
 
     private fun shouldSkipAuthentication() = intent.getBooleanExtra(SKIP_AUTHENTICATION, false)
 
-    private fun deleteFilteredFiles(filtered: ArrayList<FileDirItem>, onDelete: () -> Unit) {
-        deleteFiles(filtered) { deleteSuccess ->
-            if (deleteSuccess) {
-                onDelete.invoke()
-            } else {
+    private fun deleteFilteredFiles(filtered: ArrayList<FileDirItem>) {
+        deleteFiles(filtered) {
+            if (!it) {
                 toast(R.string.unknown_error_occurred)
                 return@deleteFiles
             }
diff --git a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/activities/SearchActivity.kt b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/activities/SearchActivity.kt
index fa4ec65ef7..73af513a2c 100644
--- a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/activities/SearchActivity.kt
+++ b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/activities/SearchActivity.kt
@@ -25,6 +25,7 @@ import com.simplemobiletools.gallery.pro.helpers.*
 import com.simplemobiletools.gallery.pro.interfaces.MediaOperationsListener
 import com.simplemobiletools.gallery.pro.models.Medium
 import com.simplemobiletools.gallery.pro.models.ThumbnailItem
+import kotlinx.android.synthetic.main.activity_main.*
 import kotlinx.android.synthetic.main.activity_search.*
 import java.io.File
 
@@ -251,7 +252,7 @@ class SearchActivity : SimpleActivity(), MediaOperationsListener {
         startAsyncTask(true)
     }
 
-    override fun tryDeleteFiles(fileDirItems: ArrayList<FileDirItem>, onDelete: () -> Unit) {
+    override fun tryDeleteFiles(fileDirItems: ArrayList<FileDirItem>) {
         val filtered = fileDirItems.filter { File(it.path).isFile && it.path.isMediaFile() } as ArrayList
         if (filtered.isEmpty()) {
             return
@@ -263,7 +264,7 @@ class SearchActivity : SimpleActivity(), MediaOperationsListener {
 
             movePathsInRecycleBin(filtered.map { it.path } as ArrayList<String>) {
                 if (it) {
-                    deleteFilteredFiles(filtered, onDelete)
+                    deleteFilteredFiles(filtered)
                 } else {
                     toast(R.string.unknown_error_occurred)
                 }
@@ -271,15 +272,13 @@ class SearchActivity : SimpleActivity(), MediaOperationsListener {
         } else {
             val deletingItems = resources.getQuantityString(R.plurals.deleting_items, filtered.size, filtered.size)
             toast(deletingItems)
-            deleteFilteredFiles(filtered, onDelete)
+            deleteFilteredFiles(filtered)
         }
     }
 
-    private fun deleteFilteredFiles(filtered: ArrayList<FileDirItem>, onDelete: () -> Unit) {
-        deleteFiles(filtered) { deleteSuccess ->
-            if (deleteSuccess) {
-                onDelete.invoke()
-            } else {
+    private fun deleteFilteredFiles(filtered: ArrayList<FileDirItem>) {
+        deleteFiles(filtered) {
+            if (!it) {
                 toast(R.string.unknown_error_occurred)
                 return@deleteFiles
             }
diff --git a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/adapters/DirectoryAdapter.kt b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/adapters/DirectoryAdapter.kt
index 84e92b7268..85556a175e 100644
--- a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/adapters/DirectoryAdapter.kt
+++ b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/adapters/DirectoryAdapter.kt
@@ -626,36 +626,42 @@ class DirectoryAdapter(
                 return@handleSAFDialog
             }
 
-            var foldersToDelete = ArrayList<File>(selectedKeys.size)
-            selectedDirs.forEach {
-                if (it.areFavorites() || it.isRecycleBin()) {
-                    if (it.isRecycleBin()) {
-                        tryEmptyRecycleBin(false)
-                    } else {
-                        ensureBackgroundThread {
-                            activity.mediaDB.clearFavorites()
-                            activity.favoritesDB.clearFavorites()
-                            listener?.refreshItems()
+            activity.handleSAFDeleteSdk30Dialog(SAFPath){
+                if (!it) {
+                    return@handleSAFDeleteSdk30Dialog
+                }
+
+                var foldersToDelete = ArrayList<File>(selectedKeys.size)
+                selectedDirs.forEach {
+                    if (it.areFavorites() || it.isRecycleBin()) {
+                        if (it.isRecycleBin()) {
+                            tryEmptyRecycleBin(false)
+                        } else {
+                            ensureBackgroundThread {
+                                activity.mediaDB.clearFavorites()
+                                activity.favoritesDB.clearFavorites()
+                                listener?.refreshItems()
+                            }
                         }
-                    }
 
-                    if (selectedKeys.size == 1) {
-                        finishActMode()
+                        if (selectedKeys.size == 1) {
+                            finishActMode()
+                        }
+                    } else {
+                        foldersToDelete.add(File(it.path))
                     }
-                } else {
-                    foldersToDelete.add(File(it.path))
                 }
-            }
 
-            if (foldersToDelete.size == 1) {
-                activity.handleLockedFolderOpening(foldersToDelete.first().absolutePath) { success ->
-                    if (success) {
-                        listener?.deleteFolders(foldersToDelete)
+                if (foldersToDelete.size == 1) {
+                    activity.handleLockedFolderOpening(foldersToDelete.first().absolutePath) { success ->
+                        if (success) {
+                            listener?.deleteFolders(foldersToDelete)
+                        }
                     }
+                } else {
+                    foldersToDelete = foldersToDelete.filter { !config.isFolderProtected(it.absolutePath) }.toMutableList() as ArrayList<File>
+                    listener?.deleteFolders(foldersToDelete)
                 }
-            } else {
-                foldersToDelete = foldersToDelete.filter { !config.isFolderProtected(it.absolutePath) }.toMutableList() as ArrayList<File>
-                listener?.deleteFolders(foldersToDelete)
             }
         }
     }
diff --git a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/adapters/MediaAdapter.kt b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/adapters/MediaAdapter.kt
index 036cf82ecc..78d68bca32 100644
--- a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/adapters/MediaAdapter.kt
+++ b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/adapters/MediaAdapter.kt
@@ -459,27 +459,35 @@ class MediaAdapter(
             return
         }
 
-        val SAFPath = getSelectedPaths().firstOrNull { activity.needsStupidWritePermissions(it) } ?: getFirstSelectedItemPath() ?: return
+        val selectedItems = getSelectedItems()
+        val selectedPaths = selectedItems.map { it.path } as ArrayList<String>
+        val SAFPath = selectedPaths.firstOrNull { activity.needsStupidWritePermissions(it) } ?: getFirstSelectedItemPath() ?: return
         activity.handleSAFDialog(SAFPath) {
             if (!it) {
                 return@handleSAFDialog
             }
 
-            val fileDirItems = ArrayList<FileDirItem>(selectedKeys.size)
-            val removeMedia = ArrayList<Medium>(selectedKeys.size)
-            val positions = getSelectedItemPositions()
+            val sdk30SafPath = selectedPaths.firstOrNull { activity.isAccessibleWithSAFSdk30(it) } ?: getFirstSelectedItemPath() ?: return@handleSAFDialog
+            activity.handleSAFDeleteSdk30Dialog(sdk30SafPath){
+                if (!it) {
+                    return@handleSAFDeleteSdk30Dialog
+                }
 
-            getSelectedItems().forEach {
-                fileDirItems.add(FileDirItem(it.path, it.name))
-                removeMedia.add(it)
-            }
+                val fileDirItems = ArrayList<FileDirItem>(selectedKeys.size)
+                val removeMedia = ArrayList<Medium>(selectedKeys.size)
+                val positions = getSelectedItemPositions()
+
+                selectedItems.forEach {
+                    fileDirItems.add(FileDirItem(it.path, it.name))
+                    removeMedia.add(it)
+                }
 
-            media.removeAll(removeMedia)
-            listener?.tryDeleteFiles(fileDirItems){
+                media.removeAll(removeMedia)
+                listener?.tryDeleteFiles(fileDirItems)
+                listener?.updateMediaGridDecoration(media)
                 removeSelectedItems(positions)
                 currentMediaHash = media.hashCode()
             }
-            listener?.updateMediaGridDecoration(media)
         }
     }
 
diff --git a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/interfaces/MediaOperationsListener.kt b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/interfaces/MediaOperationsListener.kt
index b25c92e018..997adc44fb 100644
--- a/app/src/main/kotlin/com/simplemobiletools/gallery/pro/interfaces/MediaOperationsListener.kt
+++ b/app/src/main/kotlin/com/simplemobiletools/gallery/pro/interfaces/MediaOperationsListener.kt
@@ -6,7 +6,7 @@ import com.simplemobiletools.gallery.pro.models.ThumbnailItem
 interface MediaOperationsListener {
     fun refreshItems()
 
-    fun tryDeleteFiles(fileDirItems: ArrayList<FileDirItem>, onDelete: () -> Unit)
+    fun tryDeleteFiles(fileDirItems: ArrayList<FileDirItem>)
 
     fun selectedPaths(paths: ArrayList<String>)
 
