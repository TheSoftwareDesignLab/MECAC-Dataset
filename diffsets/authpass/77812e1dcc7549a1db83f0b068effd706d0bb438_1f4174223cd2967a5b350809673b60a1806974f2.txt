diff --git a/authpass/lib/ui/screens/manage_file.dart b/authpass/lib/ui/screens/manage_file.dart
index 25ca6b8ab..f086e4181 100644
--- a/authpass/lib/ui/screens/manage_file.dart
+++ b/authpass/lib/ui/screens/manage_file.dart
@@ -1,21 +1,37 @@
-import 'dart:io';
-
-import 'package:authpass/bloc/app_data.dart';
 import 'package:authpass/bloc/kdbx/file_source.dart';
-import 'package:authpass/bloc/kdbx/file_source_local.dart';
 import 'package:authpass/bloc/kdbx_bloc.dart';
 import 'package:authpass/cloud_storage/cloud_storage_bloc.dart';
-import 'package:authpass/cloud_storage/cloud_storage_provider.dart';
-import 'package:authpass/cloud_storage/cloud_storage_ui.dart';
 import 'package:authpass/env/_base.dart';
 import 'package:authpass/theme.dart';
 import 'package:authpass/ui/screens/select_file_screen.dart';
-import 'package:authpass/bloc/kdbx/file_source_ui.dart';
+import 'package:authpass/ui/widgets/save_file.dart';
 import 'package:authpass/utils/dialog_utils.dart';
 import 'package:authpass/utils/logging_utils.dart';
+import 'package:authpass/bloc/kdbx/file_source.dart';
+import 'package:authpass/bloc/kdbx/file_source_local.dart';
+import 'package:authpass/bloc/kdbx_bloc.dart';
+import 'package:authpass/cloud_storage/cloud_storage_provider.dart';
+import 'package:authpass/bloc/kdbx/file_source_ui.dart';
+import 'package:authpass/utils/platform.dart';
+import 'package:logging/logging.dart';
+import 'package:macos_secure_bookmarks/macos_secure_bookmarks.dart';
 import 'package:authpass/utils/platform.dart';
 import 'package:file_chooser/file_chooser.dart';
 import 'package:file_picker_writable/file_picker_writable.dart';
+import 'dart:io';
+
+import 'package:authpass/bloc/app_data.dart';
+import 'package:authpass/bloc/kdbx/file_source_local.dart';
+import 'package:authpass/cloud_storage/cloud_storage_provider.dart';
+import 'package:authpass/cloud_storage/cloud_storage_ui.dart';
+import 'package:path/path.dart' as path;
+import 'package:flutter/material.dart';
+import 'package:provider/provider.dart';
+
+import 'package:flutter_async_utils/flutter_async_utils.dart'
+    hide FutureTaskStateMixin;
+import 'package:flutter_async_utils/flutter_async_utils.dart';
+import 'package:font_awesome_flutter/font_awesome_flutter.dart';
 import 'package:flutter/material.dart';
 import 'package:flutter/services.dart';
 import 'package:flutter/widgets.dart';
@@ -23,11 +39,9 @@ import 'package:flutter_async_utils/flutter_async_utils.dart'
     hide FutureTaskStateMixin;
 import 'package:flutter_async_utils/flutter_async_utils.dart';
 import 'package:flutter_colorpicker/flutter_colorpicker.dart';
-import 'package:font_awesome_flutter/font_awesome_flutter.dart';
+
 import 'package:kdbx/kdbx.dart';
 import 'package:logging/logging.dart';
-import 'package:macos_secure_bookmarks/macos_secure_bookmarks.dart';
-import 'package:path/path.dart' as path;
 import 'package:provider/provider.dart';
 
 final _logger = Logger('manage_file');
@@ -135,8 +149,7 @@ class _ManageFileState extends State<ManageFile> with FutureTaskStateMixin {
 
   void _init() {
     _logger.fine('Updating widget. _init()');
-    _kdbxBloc = Provider.of<KdbxBloc>(context);
-    _file = _kdbxBloc.fileForFileSource(widget.fileSource);
+    _file = Provider.of<KdbxBloc>(context).fileForFileSource(widget.fileSource);
 //    _databaseName.text = _file.kdbxFile.body.meta.databaseName.get();
   }
 
@@ -185,30 +198,35 @@ class _ManageFileState extends State<ManageFile> with FutureTaskStateMixin {
                 ListTile(
                   title: const Text('Path'),
                   subtitle: Text(_file.fileSource.displayPath),
-                  trailing: PopupMenuButton<VoidCallback>(
-                    onSelected: (action) => action(),
+                  trailing: PopupMenuButton<String>(
+                    onSelected: (_) => print("Popped"),
                     itemBuilder: (context) => [
                       PopupMenuItem(
-                        child: const ListTile(
-                          leading: Icon(FontAwesomeIcons.hdd),
-                          title: Text('Save As...'),
-                          subtitle: Text('Local File'),
-                        ),
-                        value: () {
-                          _saveAsLocalFile();
-                        },
-                      ),
+                          child: SaveFileAs(
+                            'Save As...',
+                            _file,
+                            //Due to the onTap listener inside the underlying ListTile PopupMenuItem doesnt receive the selected event
+                            onClose: () {
+                              Navigator.pop(context, "local");
+                            },
+                            icon: Icon(FontAwesomeIcons.hdd),
+                            onFileSourceChanged: widget.onFileSourceChanged,
+                            subtitle: 'Local File',
+                          ),
+                          value: "local"),
                       ...cloudStorageBloc.availableCloudStorage.map(
                         (cs) => PopupMenuItem(
-                          child: ListTile(
-                            leading: Icon(cs.displayIcon.iconData),
-                            title: const Text('Save As...'),
-                            subtitle: Text('${cs.displayName}'),
-                          ),
-                          value: () {
-                            _saveAsCloudStorage(cs);
-                          },
-                        ),
+                            child: SaveFileAs(
+                              'Save As...',
+                              _file,
+                              //Due to the onTap listener inside the underlying ListTile PopupMenuItem doesnt receive the selected event
+                              onClose: () {
+                                Navigator.pop(context, cs.id);
+                              },
+                              onFileSourceChanged: widget.onFileSourceChanged,
+                              cs: cs,
+                            ),
+                            value: cs.id),
                       ),
                     ],
                   ),
@@ -338,92 +356,6 @@ class _ManageFileState extends State<ManageFile> with FutureTaskStateMixin {
     }
     return ret;
   }
-
-  Future<void> _saveAsLocalFile() async {
-    if (AuthPassPlatform.isIOS || AuthPassPlatform.isAndroid) {
-      final fileInfo = await FileSourceLocal.createFileInNewTempDirectory(
-          '${path.basenameWithoutExtension(_file.fileSource.displayPath)}.kdbx',
-          (tempFile) async {
-        return await FilePickerWritable().openFileForCreate(
-          fileName:
-              '${path.basenameWithoutExtension(_file.fileSource.displayPath)}.kdbx',
-          writer: (file) async {
-            _logger.fine('Writing placeholder into $file');
-            await file.writeAsString('<placeholder>');
-          },
-        );
-      });
-
-      if (fileInfo == null) {
-        _logger.info('User cancelled file picker.');
-        return;
-      }
-      _logger.fine('writing to ${fileInfo.uri} / ${fileInfo.fileName}');
-      final newFile = await _kdbxBloc.saveAs(
-          _file,
-          FileSourceLocal(
-            File(fileInfo.fileName),
-            databaseName: _file.fileSource.displayName,
-            uuid: AppDataBloc.createUuid(),
-            filePickerIdentifier: fileInfo.toJsonString(),
-          ));
-      widget.onFileSourceChanged(newFile.fileSource);
-      if (!mounted) {
-        _logger.severe(
-            '$runtimeType We are no longer mounted after writing file.');
-        return;
-      }
-//      setState(() {
-//        _file = newFile;
-//      });
-      return;
-    }
-    final result = await showSavePanel(
-      suggestedFileName: path.basename(widget.fileSource.displayPath),
-      confirmButtonText: 'Save',
-    );
-    if (result.canceled) {
-      return;
-    }
-
-    final pathFile = result.paths.first;
-    final outputFile = File(pathFile);
-    String macOsBookmark;
-    if (AuthPassPlatform.isMacOS) {
-      // create a dummy file, so we can create a secure bookmark.
-      await outputFile.writeAsString('.');
-      macOsBookmark = await SecureBookmarks().bookmark(outputFile);
-    }
-    final newFile = await _kdbxBloc.saveAs(
-      _file,
-      FileSourceLocal(
-        outputFile,
-        uuid: AppDataBloc.createUuid(),
-        macOsSecureBookmark: macOsBookmark,
-      ),
-    );
-    widget.onFileSourceChanged(newFile.fileSource);
-  }
-
-  Future<void> _saveAsCloudStorage(CloudStorageProvider cs) async {
-    final createFileInfo =
-        await Navigator.of(context).push(CloudStorageSelector.route(
-      cs,
-      CloudStorageBrowserConfig(
-          defaultFileName: path.basename(_file.fileSource.displayPath),
-          isSave: true),
-    ));
-    if (createFileInfo != null) {
-      await asyncRunTask((progress) async {
-        final newFile =
-            await _kdbxBloc.saveAsNewFile(_file, createFileInfo, cs);
-        setState(() {
-          _file = newFile;
-        });
-      });
-//      cs.saveEntity(, bytes, previousMetadata)
-    }
-  }
 }
 
 class CircleColor extends StatelessWidget {
diff --git a/authpass/lib/ui/widgets/save_file.dart b/authpass/lib/ui/widgets/save_file.dart
new file mode 100644
index 000000000..c9448a76e
--- /dev/null
+++ b/authpass/lib/ui/widgets/save_file.dart
@@ -0,0 +1,170 @@
+import 'package:authpass/bloc/kdbx/file_source.dart';
+import 'package:authpass/bloc/kdbx/file_source_local.dart';
+import 'package:authpass/bloc/kdbx_bloc.dart';
+import 'package:authpass/cloud_storage/cloud_storage_provider.dart';
+import 'package:authpass/bloc/kdbx/file_source_ui.dart';
+import 'package:authpass/utils/platform.dart';
+import 'package:logging/logging.dart';
+import 'package:macos_secure_bookmarks/macos_secure_bookmarks.dart';
+import 'package:authpass/utils/platform.dart';
+import 'package:file_chooser/file_chooser.dart';
+import 'package:file_picker_writable/file_picker_writable.dart';
+import 'dart:io';
+
+import 'package:authpass/bloc/app_data.dart';
+import 'package:authpass/bloc/kdbx/file_source_local.dart';
+import 'package:authpass/cloud_storage/cloud_storage_provider.dart';
+import 'package:authpass/cloud_storage/cloud_storage_ui.dart';
+import 'package:path/path.dart' as path;
+import 'package:flutter/material.dart';
+import 'package:provider/provider.dart';
+
+import 'package:flutter_async_utils/flutter_async_utils.dart'
+    hide FutureTaskStateMixin;
+import 'package:flutter_async_utils/flutter_async_utils.dart';
+
+final _logger = Logger('manage_file');
+
+class SaveFileAs extends StatefulWidget {
+  SaveFileAs(this.title, this.file,
+      {this.onFileSourceChanged,
+      this.onClose,
+      this.icon,
+      this.cs,
+      this.subtitle})
+      : assert((icon != null && subtitle != null) || cs != null) {
+    local = cs == null;
+  }
+
+  Function onClose;
+  Function onFileSourceChanged;
+  KdbxOpenedFile file;
+  String title;
+  String subtitle;
+  Icon icon;
+  bool local;
+  CloudStorageProvider cs;
+
+  @override
+  _SaveFileAsState createState() => _SaveFileAsState();
+}
+
+class _SaveFileAsState extends State<SaveFileAs> {
+  KdbxBloc kdbxBloc;
+
+  @override
+  void initState() {
+    super.initState();
+  }
+
+  @override
+  void didChangeDependencies() {
+    _init();
+    super.didChangeDependencies();
+  }
+
+  void _init() {
+    if (kdbxBloc == null) {
+      kdbxBloc = Provider.of<KdbxBloc>(context);
+    }
+  }
+
+  @override
+  Widget build(BuildContext context) {
+    return ListTile(
+      leading: widget.icon ?? Icon(widget.cs.displayIcon.iconData),
+      title: Text(widget.title),
+      subtitle: Text(widget.subtitle ?? widget.cs.displayName),
+      onTap: () {
+        widget.onClose?.call();
+        widget.local ? _saveAsLocalFile() : _saveAsCloudStorage(widget.cs);
+      },
+    );
+  }
+
+  Future<void> _saveAsLocalFile() async {
+    if (AuthPassPlatform.isIOS || AuthPassPlatform.isAndroid) {
+      final fileInfo = await FileSourceLocal.createFileInNewTempDirectory(
+          '${path.basenameWithoutExtension(widget.file.fileSource.displayPath)}.kdbx',
+          (tempFile) async {
+        return await FilePickerWritable().openFileForCreate(
+          fileName:
+              '${path.basenameWithoutExtension(widget.file.fileSource.displayPath)}.kdbx',
+          writer: (file) async {
+            _logger.fine('Writing placeholder into $file');
+            await file.writeAsString('<placeholder>');
+          },
+        );
+      });
+
+      if (fileInfo == null) {
+        _logger.info('User cancelled file picker.');
+        return;
+      }
+      _logger.fine('writing to ${fileInfo.uri} / ${fileInfo.fileName}');
+      final newFile = await kdbxBloc.saveAs(
+          widget.file,
+          FileSourceLocal(
+            File(fileInfo.fileName),
+            databaseName: widget.file.fileSource.displayName,
+            uuid: AppDataBloc.createUuid(),
+            filePickerIdentifier: fileInfo.toJsonString(),
+          ));
+      widget.onFileSourceChanged?.call(newFile.fileSource);
+      if (!mounted) {
+        _logger.severe(
+            '$runtimeType We are no longer mounted after writing file.');
+        return;
+      }
+//      setState(() {
+//        _file = newFile;
+//      });
+      return;
+    }
+    final result = await showSavePanel(
+      suggestedFileName: path.basename(widget.file.fileSource.displayPath),
+      confirmButtonText: 'Save',
+    );
+    if (result.canceled) {
+      return;
+    }
+
+    final pathFile = result.paths.first;
+    final outputFile = File(pathFile);
+    String macOsBookmark;
+    if (AuthPassPlatform.isMacOS) {
+      // create a dummy file, so we can create a secure bookmark.
+      await outputFile.writeAsString('.');
+      macOsBookmark = await SecureBookmarks().bookmark(outputFile);
+    }
+    final newFile = await kdbxBloc.saveAs(
+      widget.file,
+      FileSourceLocal(
+        outputFile,
+        uuid: AppDataBloc.createUuid(),
+        macOsSecureBookmark: macOsBookmark,
+      ),
+    );
+    widget.onFileSourceChanged?.call(newFile.fileSource);
+  }
+
+  Future<void> _saveAsCloudStorage(CloudStorageProvider cs) async {
+    final createFileInfo =
+        await Navigator.of(context).push(CloudStorageSelector.route(
+      cs,
+      CloudStorageBrowserConfig(
+          defaultFileName: path.basename(widget.file.fileSource.displayPath),
+          isSave: true),
+    ));
+    if (createFileInfo != null) {
+      final newFile =
+          await kdbxBloc.saveAsNewFile(widget.file, createFileInfo, cs);
+      //onFileSourceChanged should have the same effect as this setState by getting relayed to ManageFileScreen where the state of it is set
+      //setState(() {
+      //  widget.file = newFile;
+      //});
+      widget.onFileSourceChanged?.call(newFile.fileSource);
+//      cs.saveEntity(, bytes, previousMetadata)
+    }
+  }
+}
