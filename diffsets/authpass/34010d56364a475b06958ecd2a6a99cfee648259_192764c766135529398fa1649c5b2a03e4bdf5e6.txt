diff --git a/authpass/lib/ui/screens/cloud/cloud_mail_read.dart b/authpass/lib/ui/screens/cloud/cloud_mail_read.dart
index d225019a9..bc7e31282 100644
--- a/authpass/lib/ui/screens/cloud/cloud_mail_read.dart
+++ b/authpass/lib/ui/screens/cloud/cloud_mail_read.dart
@@ -9,10 +9,11 @@ import 'package:flutter/material.dart';
 import 'package:flutter/widgets.dart';
 import 'package:flutter_html/flutter_html.dart';
 import 'package:flutter_linkify/flutter_linkify.dart';
+import 'package:font_awesome_flutter/font_awesome_flutter.dart';
 import 'package:provider/provider.dart';
 import 'package:flinq/flinq.dart';
 
-class EmailReadScreen extends StatelessWidget {
+class EmailReadScreen extends StatefulWidget {
   const EmailReadScreen({
     Key key,
     @required this.bloc,
@@ -32,33 +33,72 @@ class EmailReadScreen extends StatelessWidget {
   final AuthPassCloudBloc bloc;
   final EmailMessage emailMessage;
 
+  @override
+  _EmailReadScreenState createState() => _EmailReadScreenState();
+}
+
+class _EmailReadScreenState extends State<EmailReadScreen> {
+  bool _forcePlainText = false;
+
   @override
   Widget build(BuildContext context) {
-    return Scaffold(
-      appBar: AppBar(
-        title: Text('${emailMessage.subject}'),
-        actions: <Widget>[
-          Builder(
-            builder: (context) => IconButton(
-                icon: const Icon(Icons.delete),
-                onPressed: () async {
-                  Navigator.of(context).pop();
-                  await bloc.deleteMail(emailMessage);
+    return RetryFutureBuilder<enough.MimeMessage>(
+      produceFuture: (context) => widget.bloc.loadMail(widget.emailMessage),
+      scaffoldBuilder: (context, child, snapshot) {
+        bool hasHtml = false;
+        bool hasText = false;
+        if (snapshot.hasData) {
+          hasHtml = snapshot.data.decodeTextHtmlPart() != null;
+          hasText = snapshot.data.decodeTextPlainPart() != null;
+        }
+        return Scaffold(
+          appBar: AppBar(
+            title: Text('${widget.emailMessage.subject}'),
+            actions: <Widget>[
+              if (hasText && hasHtml) ...[
+                IconButton(
+                    icon: _forcePlainText
+                        ? const Icon(FontAwesomeIcons.html5)
+                        : const Icon(FontAwesomeIcons.removeFormat),
+                    onPressed: () {
+                      setState(() {
+                        _forcePlainText = !_forcePlainText;
+                      });
+                    }),
+              ],
+              Builder(
+                builder: (context) => IconButton(
+                    icon: const Icon(Icons.delete),
+                    onPressed: () async {
+                      Navigator.of(context).pop();
+                      await widget.bloc.deleteMail(widget.emailMessage);
 //                  Scaffold.of(context).
-                }),
+                    }),
+              ),
+            ],
           ),
-        ],
+          body: child,
+        );
+      },
+      builder: (context, message) => EmailRead(
+        bloc: widget.bloc,
+        message: message,
+        forcePlainText: _forcePlainText,
       ),
-      body: EmailRead(bloc: bloc, emailMessage: emailMessage),
     );
   }
 }
 
 class EmailRead extends StatelessWidget {
-  const EmailRead({Key key, @required this.bloc, @required this.emailMessage})
+  const EmailRead(
+      {Key key,
+      @required this.bloc,
+      @required this.message,
+      this.forcePlainText})
       : super(key: key);
   final AuthPassCloudBloc bloc;
-  final EmailMessage emailMessage;
+  final enough.MimeMessage message;
+  final bool forcePlainText;
 
   @override
   Widget build(BuildContext context) {
@@ -67,81 +107,75 @@ class EmailRead extends StatelessWidget {
           height: 1.4,
         );
     final formatUtil = context.watch<FormatUtils>();
-    return RetryFutureBuilder<enough.MimeMessage>(
-      produceFuture: (context) => bloc.loadMail(emailMessage),
-      builder: (context, message) {
-        final htmlData = message.decodeTextHtmlPart();
-        final headers = {
-          'Subject': message.decodeHeaderValue('subject'),
-          'From': message
-              .decodeHeaderMailAddressValue('from')
-              .firstOrNull
-              ?.toString(),
-          'Date':
-              formatUtil.formatDateFull(message.decodeHeaderDateValue('date')),
+    final htmlData = message.decodeTextHtmlPart();
+    final headers = {
+      'Subject': message.decodeHeaderValue('subject'),
+      'From':
+          message.decodeHeaderMailAddressValue('from').firstOrNull?.toString(),
+      'Date': formatUtil.formatDateFull(message.decodeHeaderDateValue('date')),
 //          'To': message.decodeHeaderValue('to'),
-        };
-        final textSpans = headers.entries
-            .where((element) => element.value != null)
-            .expand((e) => [
-                  TextSpan(text: '${e.key}: '),
-                  TextSpan(
-                    text: e.value,
-                    style: const TextStyle(fontWeight: FontWeight.bold),
-                  ),
-                  const TextSpan(text: '\n'),
-                ])
-            .toList()
-              ..removeLast();
-        return Column(
-          crossAxisAlignment: CrossAxisAlignment.stretch,
-          children: <Widget>[
-            Material(
-              elevation: 1,
-              color: Theme.of(context).cardColor,
-              child: Container(
-                padding: const EdgeInsets.all(16),
-                child: RichText(
-                  text: TextSpan(children: textSpans, style: textStyle),
+    };
+    final textSpans = headers.entries
+        .where((element) => element.value != null)
+        .expand((e) => [
+              TextSpan(text: '${e.key}: '),
+              TextSpan(
+                text: e.value,
+                style: const TextStyle(fontWeight: FontWeight.bold),
+              ),
+              const TextSpan(text: '\n'),
+            ])
+        .toList()
+          ..removeLast();
+    return Column(
+      crossAxisAlignment: CrossAxisAlignment.stretch,
+      children: <Widget>[
+        Material(
+          elevation: 1,
+          color: Theme.of(context).cardColor,
+          child: Container(
+            padding: const EdgeInsets.all(16),
+            child: RichText(
+              text: TextSpan(children: textSpans, style: textStyle),
 //                'Subject: ${message.decodeHeaderValue('subject')}\n'
 //                'Date: ${formatUtil.formatDateFull(message.decodeHeaderDateValue('date'))}',
-                  maxLines: null,
-                ),
-              ),
+              maxLines: null,
             ),
-            htmlData != null
-                ? Expanded(
-                    child: SingleChildScrollView(
-                      child: Html(
-                        data: htmlData,
-                        onLinkTap: (link) {
-                          DialogUtils.openUrl(link);
-                        },
-                      ),
-                    ),
-                  )
-                : Expanded(
-                    child: SingleChildScrollView(
-                      child: Padding(
-                        padding: const EdgeInsets.all(16.0),
-                        child: Linkify(
-                          text: message.decodeTextPlainPart() ??
-                              message.decodeContentText(),
-                          maxLines: null,
-                          options: LinkifyOptions(
-                            humanize: false,
-                          ),
-                          onOpen: (link) async {
-                            await DialogUtils.openUrl(link.url);
-                          },
-                          style: textStyle,
-                        ),
+          ),
+        ),
+        htmlData != null && !forcePlainText
+            ? Expanded(
+                child: SingleChildScrollView(
+                  child: Html(
+                    data: htmlData,
+                    onLinkTap: (link) {
+                      DialogUtils.openUrl(link);
+                    },
+                  ),
+                ),
+              )
+            : Expanded(
+                child: SingleChildScrollView(
+                  child: Padding(
+                    padding: const EdgeInsets.all(16.0),
+                    child: SelectableLinkify(
+//                    child: Linkify(
+                      text: (message.decodeTextPlainPart() ??
+                              message.decodeContentText())
+                          .replaceAll('\r', ''),
+                      maxLines: null,
+                      options: LinkifyOptions(
+                        humanize: false,
                       ),
+                      onOpen: (link) async {
+                        await DialogUtils.openUrl(link.url);
+                      },
+                      style: textStyle,
                     ),
                   ),
-          ],
-        );
-      },
+                ),
+              ),
+      ],
     );
   }
 }
diff --git a/authpass/lib/ui/widgets/async/retry_future_builder.dart b/authpass/lib/ui/widgets/async/retry_future_builder.dart
index e422ea05b..ad7539185 100644
--- a/authpass/lib/ui/widgets/async/retry_future_builder.dart
+++ b/authpass/lib/ui/widgets/async/retry_future_builder.dart
@@ -8,6 +8,8 @@ final _logger = Logger('retry_future_builder');
 
 typedef FutureProducer<T> = Future<T> Function(BuildContext context);
 typedef StreamProducer<T> = Stream<T> Function(BuildContext context);
+typedef ScaffoldBuilder<T> = Widget Function(
+    BuildContext context, Widget body, AsyncSnapshot<T> snapshot);
 typedef DataWidgetBuilder<T> = Widget Function(BuildContext context, T data);
 
 class RetryFutureBuilder<T> extends StatefulWidget {
@@ -15,10 +17,16 @@ class RetryFutureBuilder<T> extends StatefulWidget {
     Key key,
     @required this.produceFuture,
     @required this.builder,
+    this.scaffoldBuilder = defaultScaffoldBuilder,
   }) : super(key: key);
 
   final FutureProducer<T> produceFuture;
   final DataWidgetBuilder<T> builder;
+  final ScaffoldBuilder<T> scaffoldBuilder;
+
+  static Widget defaultScaffoldBuilder(
+          BuildContext context, Widget body, dynamic _) =>
+      body;
 
   @override
   _RetryFutureBuilderState createState() => _RetryFutureBuilderState<T>();
@@ -47,26 +55,35 @@ class _RetryFutureBuilderState<T> extends State<RetryFutureBuilder<T>> {
       future: _future,
       builder: (context, snapshot) {
         if (snapshot.hasData) {
-          return widget.builder(context, snapshot.data);
+          final child = widget.builder(context, snapshot.data);
+          return widget.scaffoldBuilder(context, child, snapshot);
         }
         if (snapshot.hasError) {
           _logger.warning('Error while creating future.', snapshot.error);
-          return Column(
-            mainAxisSize: MainAxisSize.min,
-            children: <Widget>[
-              Text('Error during api call. ${snapshot.error}'),
-              RaisedButton(
-                child: const Text('Retry'),
-                onPressed: () {
-                  setState(() {
-                    _future = widget.produceFuture(context);
-                  });
-                },
-              ),
-            ],
+          return widget.scaffoldBuilder(
+            context,
+            Column(
+              mainAxisSize: MainAxisSize.min,
+              children: <Widget>[
+                Text('Error during api call. ${snapshot.error}'),
+                RaisedButton(
+                  child: const Text('Retry'),
+                  onPressed: () {
+                    setState(() {
+                      _future = widget.produceFuture(context);
+                    });
+                  },
+                ),
+              ],
+            ),
+            snapshot,
           );
         } else {
-          return const Center(child: CircularProgressIndicator());
+          return widget.scaffoldBuilder(
+            context,
+            const Center(child: CircularProgressIndicator()),
+            snapshot,
+          );
         }
       },
     );
diff --git a/authpass/macos/Podfile b/authpass/macos/Podfile
index 5a354cb14..07712c0a3 100644
--- a/authpass/macos/Podfile
+++ b/authpass/macos/Podfile
@@ -1,6 +1,3 @@
-# Using a CDN with CocoaPods 1.7.2 or later can save a lot of time on pod installation, but it's experimental rather than the default.
-# source 'https://cdn.cocoapods.org/'
-
 platform :osx, '10.12'
 
 # CocoaPods analytics sends network stats synchronously affecting flutter build latency.
@@ -8,8 +5,7 @@ ENV['COCOAPODS_DISABLE_STATS'] = 'true'
 
 project 'Runner', {
   'Debug' => :debug,
-  # TODO: Add Profile support to projects.
-  #'Profile' => :release,
+  'Profile' => :release,
   'Release' => :release,
 }
 
@@ -48,6 +44,7 @@ end
 
 target 'Runner' do
   use_frameworks!
+  use_modular_headers!
 
   # Prepare symlinks folder. We use symlinks to avoid having Podfile.lock
   # referring to absolute paths on developers' machines.
diff --git a/authpass/macos/Podfile.lock b/authpass/macos/Podfile.lock
index 998923040..cb57ba0a2 100644
--- a/authpass/macos/Podfile.lock
+++ b/authpass/macos/Podfile.lock
@@ -24,7 +24,7 @@ DEPENDENCIES:
   - biometric_storage (from `Flutter/ephemeral/.symlinks/plugins/biometric_storage/macos`)
   - file_chooser (from `Flutter/ephemeral/.symlinks/plugins/file_chooser/macos`)
   - file_picker_writable (from `Flutter/ephemeral/.symlinks/plugins/file_picker_writable/macos`)
-  - FlutterMacOS (from `Flutter/ephemeral/.symlinks/flutter/darwin-x64-release`)
+  - FlutterMacOS (from `Flutter/ephemeral/.symlinks/flutter/darwin-x64`)
   - macos_secure_bookmarks (from `Flutter/ephemeral/.symlinks/plugins/macos_secure_bookmarks/macos`)
   - package_info (from `Flutter/ephemeral/.symlinks/plugins/package_info/macos`)
   - path_provider (from `Flutter/ephemeral/.symlinks/plugins/path_provider/macos`)
@@ -42,7 +42,7 @@ EXTERNAL SOURCES:
   file_picker_writable:
     :path: Flutter/ephemeral/.symlinks/plugins/file_picker_writable/macos
   FlutterMacOS:
-    :path: Flutter/ephemeral/.symlinks/flutter/darwin-x64-release
+    :path: Flutter/ephemeral/.symlinks/flutter/darwin-x64
   macos_secure_bookmarks:
     :path: Flutter/ephemeral/.symlinks/plugins/macos_secure_bookmarks/macos
   package_info:
@@ -58,7 +58,7 @@ EXTERNAL SOURCES:
 
 SPEC CHECKSUMS:
   argon2_ffi: ea9adefd65ac7236d1af897150c27f4c7db90d12
-  biometric_storage: ecdb7121134e025b5217a084a5d9aa17d6ec5042
+  biometric_storage: 43caa6e7ef00e8e19c074216e7e1786dacda9e76
   file_chooser: 24432cf5dc836722b05c11c2a0a30d19c3c9b996
   file_picker_writable: 91694d55c22f8430d4be119f0afb49755e65cd0c
   FlutterMacOS: 15bea8a44d2fa024068daa0140371c020b4b6ff9
@@ -69,6 +69,6 @@ SPEC CHECKSUMS:
   url_launcher: af78307ef9bafff91273b34f1c6c0c86a0004fd7
   url_launcher_macos: 45af3d61de06997666568a7149c1be98b41c95d4
 
-PODFILE CHECKSUM: 3d7f23e3a499e4f844c299df7bc01f656165c909
+PODFILE CHECKSUM: 77099ba0c243b0cab165ba0601a9995e35fa19fb
 
 COCOAPODS: 1.9.3
diff --git a/authpass/macos/Runner.xcodeproj/project.pbxproj b/authpass/macos/Runner.xcodeproj/project.pbxproj
index aaca355c5..a684a5ead 100644
--- a/authpass/macos/Runner.xcodeproj/project.pbxproj
+++ b/authpass/macos/Runner.xcodeproj/project.pbxproj
@@ -443,7 +443,7 @@
 				);
 				MACOSX_DEPLOYMENT_TARGET = 10.12;
 				PROVISIONING_PROFILE_SPECIFIER = "Herbert mac App Development";
-				SWIFT_VERSION = 4.0;
+				SWIFT_VERSION = 5.0;
 			};
 			name = Profile;
 		};
@@ -578,7 +578,7 @@
 				MACOSX_DEPLOYMENT_TARGET = 10.12;
 				PROVISIONING_PROFILE_SPECIFIER = "Herbert mac App Development";
 				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
-				SWIFT_VERSION = 4.0;
+				SWIFT_VERSION = 5.0;
 			};
 			name = Debug;
 		};
@@ -605,7 +605,7 @@
 				);
 				MACOSX_DEPLOYMENT_TARGET = 10.12;
 				PROVISIONING_PROFILE_SPECIFIER = "AuthPass Mac Distribution";
-				SWIFT_VERSION = 4.0;
+				SWIFT_VERSION = 5.0;
 			};
 			name = Release;
 		};
