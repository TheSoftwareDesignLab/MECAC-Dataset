diff --git a/authpass/CHANGELOG.md b/authpass/CHANGELOG.md
index 81afebebf..5978c346e 100644
--- a/authpass/CHANGELOG.md
+++ b/authpass/CHANGELOG.md
@@ -1,3 +1,8 @@
+# 1.8.1 - 2021-07-13
+
+* Fixed bug when reading cloud email.
+* Fixed bug with cloud storage ui.
+
 # 1.8.0 - 2021-07-09
 
 * Upgrade to Flutter 2.4 / Migrate all code to nnbd to improve stability.
diff --git a/authpass/lib/bloc/app_data.dart b/authpass/lib/bloc/app_data.dart
index 883d3ff21..6fd7c973d 100644
--- a/authpass/lib/bloc/app_data.dart
+++ b/authpass/lib/bloc/app_data.dart
@@ -111,7 +111,7 @@ abstract class OpenedFile implements Built<OpenedFile, OpenedFileBuilder> {
             b
               ..sourceType = OpenedFilesSourceType.CloudStorage
               ..sourcePath = json.encode({
-                SOURCE_CLOUD_STORAGE_ID: fileSource.provider!.id,
+                SOURCE_CLOUD_STORAGE_ID: fileSource.provider.id,
                 SOURCE_CLOUD_STORAGE_DATA: fileSource.fileInfo,
               })
               ..name = dbName;
diff --git a/authpass/lib/bloc/kdbx/file_source_cloud_storage.dart b/authpass/lib/bloc/kdbx/file_source_cloud_storage.dart
index e5470ee64..de7ffc75f 100644
--- a/authpass/lib/bloc/kdbx/file_source_cloud_storage.dart
+++ b/authpass/lib/bloc/kdbx/file_source_cloud_storage.dart
@@ -18,9 +18,9 @@ class FileContentCached {
     required this.cacheDate,
     required this.cacheSize,
   }) : assert(cacheDate.isUtc);
-  factory FileContentCached.fromJson(Map<String, Object> json) =>
+  factory FileContentCached.fromJson(Map<String, dynamic> json) =>
       FileContentCached(
-        metadata: json['metadata'] as Map<String, Object>?,
+        metadata: json['metadata'] as Map<String, dynamic>?,
         cacheDate: DateTime.fromMillisecondsSinceEpoch(
           json['cacheDate'] as int,
           isUtc: true,
@@ -56,21 +56,21 @@ class FileSourceCloudStorage extends FileSource {
 
   static Directory? _cacheDir;
 
-  Future<Directory> _getCacheDir() => provider!.pathUtil
+  Future<Directory> _getCacheDir() => provider.pathUtil
       .getTemporaryDirectory(subNamespace: 'cloud_storage_cache');
 
-  final CloudStorageProvider? provider;
+  final CloudStorageProvider provider;
 
   final Map<String, String?> fileInfo;
 
   @override
-  String get typeDebug => '$runtimeType:${provider!.id}';
+  String get typeDebug => '$runtimeType:${provider.id}';
 
   @override
-  String get displayNameFromPath => provider!.displayNameFromPath(fileInfo);
+  String get displayNameFromPath => provider.displayNameFromPath(fileInfo);
 
   @override
-  String get displayPath => provider!.displayPath(fileInfo);
+  String get displayPath => provider.displayPath(fileInfo);
 
   File _cacheMetadataFile(String cacheDirPath) =>
       File(path.join(cacheDirPath, '$uuid.kdbx.json'));
@@ -86,7 +86,7 @@ class FileSourceCloudStorage extends FileSource {
     try {
       if (metadataFile.existsSync()) {
         final cacheInfo = FileContentCached.fromJson(json
-            .decode(await metadataFile.readAsString()) as Map<String, Object>);
+            .decode(await metadataFile.readAsString()) as Map<String, dynamic>);
         final content = await kdbxFile.readAsBytes();
         if (content.length != cacheInfo.cacheSize) {
           throw StateError('Cached size does not match size in '
@@ -100,7 +100,7 @@ class FileSourceCloudStorage extends FileSource {
 
     // after cache got loaded, download new version.
     _logger.finer('loading ${toString()}');
-    final freshContent = await provider!.loadFile(fileInfo);
+    final freshContent = await provider.loadFile(fileInfo);
     yield freshContent;
     unawaited(_writeCache(freshContent));
   }
@@ -132,14 +132,13 @@ class FileSourceCloudStorage extends FileSource {
   @override
   Future<Map<String, dynamic>> write(
       Uint8List bytes, Map<String, dynamic>? previousMetadata) async {
-    final metadata =
-        await provider!.saveFile(fileInfo, bytes, previousMetadata);
+    final metadata = await provider.saveFile(fileInfo, bytes, previousMetadata);
     await _writeCache(FileContent(bytes, metadata));
     return metadata;
   }
 
   @override
-  FileSourceIcon get displayIcon => provider!.displayIcon;
+  FileSourceIcon get displayIcon => provider.displayIcon;
 
   @override
   FileSource copyWithDatabaseName(String databaseName) =>
diff --git a/authpass/lib/cloud_storage/cloud_storage_ui.dart b/authpass/lib/cloud_storage/cloud_storage_ui.dart
index afe5069ad..bd6254f71 100644
--- a/authpass/lib/cloud_storage/cloud_storage_ui.dart
+++ b/authpass/lib/cloud_storage/cloud_storage_ui.dart
@@ -16,10 +16,11 @@ import 'package:simple_form_field_validator/simple_form_field_validator.dart';
 final _logger = Logger('authpass.google_drive_ui');
 
 class CloudStorageSelector extends StatefulWidget {
-  const CloudStorageSelector({Key? key, this.provider, this.browserConfig})
+  const CloudStorageSelector(
+      {Key? key, required this.provider, this.browserConfig})
       : super(key: key);
 
-  final CloudStorageProvider? provider;
+  final CloudStorageProvider provider;
   final CloudStorageSelectorConfig? browserConfig;
 
   @override
@@ -43,9 +44,9 @@ class _CloudStorageSelectorState extends State<CloudStorageSelector> {
   @override
   void initState() {
     super.initState();
-    widget.provider!.loadSavedAuth().then((val) => setState(() {}));
+    widget.provider.loadSavedAuth().then((val) => setState(() {}));
     if (widget.browserConfig is CloudStorageBrowserConfig ||
-        !(widget.provider!.supportSearch)) {
+        !(widget.provider.supportSearch)) {
       _isSearch = false;
     } else {
       _isSearch = true;
@@ -57,20 +58,20 @@ class _CloudStorageSelectorState extends State<CloudStorageSelector> {
     final config = widget.browserConfig;
     return Scaffold(
       appBar: AppBar(
-        title: Text('CloudStorage - ${widget.provider!.displayName}'),
-        actions: widget.provider!.isAuthenticated != true
+        title: Text('CloudStorage - ${widget.provider.displayName}'),
+        actions: widget.provider.isAuthenticated != true
             ? null
             : <Widget>[
                 IconButton(
                   onPressed: () {
-                    widget.provider!.logout();
+                    widget.provider.logout();
                     setState(() {});
                   },
                   icon: const Icon(FontAwesomeIcons.signOutAlt),
                 ),
               ],
       ),
-      body: widget.provider!.isAuthenticated != true
+      body: widget.provider.isAuthenticated != true
           ? Center(
               child: CloudStorageAuthentication(
                   provider: widget.provider, onSuccess: () => setState(() {})))
@@ -176,9 +177,10 @@ class CloudStorageAuthentication extends StatelessWidget {
 }
 
 class CloudStorageSearch extends StatefulWidget {
-  const CloudStorageSearch({Key? key, this.provider}) : super(key: key);
+  const CloudStorageSearch({Key? key, required this.provider})
+      : super(key: key);
 
-  final CloudStorageProvider? provider;
+  final CloudStorageProvider provider;
 
   @override
   _CloudStorageSearchState createState() => _CloudStorageSearchState();
@@ -249,7 +251,7 @@ class _CloudStorageSearchState extends State<CloudStorageSearch>
   Future<void> _search() => asyncRunTask(
         () async {
           final results =
-              await widget.provider!.search(name: _searchController.text);
+              await widget.provider.search(name: _searchController.text);
           _logger.fine('Got results:');
           for (final result in results.results!) {
             _logger.fine('${result!.name} (${result.id}');
@@ -313,7 +315,7 @@ class CloudStorageBrowser extends StatefulWidget {
     required this.provider,
     required this.config,
   }) : super(key: key);
-  final CloudStorageProvider? provider;
+  final CloudStorageProvider provider;
   final CloudStorageBrowserConfig config;
 
   @override
@@ -331,13 +333,13 @@ class _CloudStorageBrowserState extends State<CloudStorageBrowser>
   @override
   void initState() {
     super.initState();
-    _fileNameController.text = widget.config.defaultFileName!;
+    _fileNameController.text = widget.config.defaultFileName ?? '';
     _listFolder();
   }
 
   Future<void> _listFolder() async {
     await asyncRunTask((progress) async {
-      final response = await widget.provider!.list(parent: _folder);
+      final response = await widget.provider.list(parent: _folder);
       setState(() {
         _response = response.rebuild((b) => b.results
           ..where((c) => c!.type != CloudStorageEntityType.unknown)
@@ -496,9 +498,8 @@ class _UrlUsernamePasswordDialogState extends State<UrlUsernamePasswordDialog> {
               ),
               autocorrect: false,
               validator: SValidator.notEmpty(msg: 'Please enter a Url') +
-                      SValidator.isTrue((str) => _urlRegex.hasMatch(str!),
-                          'Please enter a valid url with http:// or https://')
-                  as String? Function(String?)?,
+                  SValidator.isTrue((str) => _urlRegex.hasMatch(str!),
+                      'Please enter a valid url with http:// or https://'),
             ),
             TextFormField(
               controller: _username,
diff --git a/authpass/lib/ui/screens/cloud/cloud_auth.dart b/authpass/lib/ui/screens/cloud/cloud_auth.dart
index d24af0ec2..8fef2f0c2 100644
--- a/authpass/lib/ui/screens/cloud/cloud_auth.dart
+++ b/authpass/lib/ui/screens/cloud/cloud_auth.dart
@@ -96,9 +96,8 @@ class __EnterEmailAddressState extends State<_EnterEmailAddress>
             textInputAction: TextInputAction.send,
             onEditingComplete: () {},
             validator: SValidator.notEmpty(
-                        msg: 'Please enter a valid email address.') +
-                    SValidator.email(msg: 'Please enter a valid email address.')
-                as String? Function(String?)?,
+                    msg: 'Please enter a valid email address.') +
+                SValidator.email(msg: 'Please enter a valid email address.'),
           ),
           ElevatedButton(
             onPressed: _submitCallback(),
diff --git a/authpass/test/cloud_storage/generic_cloud_storage.dart b/authpass/test/cloud_storage/generic_cloud_storage.dart
index 0dda01306..06e544174 100644
--- a/authpass/test/cloud_storage/generic_cloud_storage.dart
+++ b/authpass/test/cloud_storage/generic_cloud_storage.dart
@@ -1,6 +1,8 @@
 import 'dart:convert';
 import 'dart:typed_data';
 
+import 'package:authpass/bloc/kdbx/file_content.dart';
+import 'package:authpass/bloc/kdbx/file_source_cloud_storage.dart';
 import 'package:authpass/bloc/kdbx/storage_exception.dart';
 import 'package:authpass/cloud_storage/cloud_storage_provider.dart';
 import 'package:authpass/utils/uuid_util.dart';
@@ -11,12 +13,12 @@ import 'package:test/test.dart';
 final _logger = Logger('generic_cloud_storage');
 
 void simpleCloudStorageTestSuite({
-  required CloudStorageProvider? Function() providerCb,
+  required CloudStorageProvider Function() providerCb,
   Future<CloudStorageEntity?>? Function(CloudStorageProvider? provider)?
       selectParent,
 }) {
   late String uuid;
-  CloudStorageProvider? provider;
+  late CloudStorageProvider provider;
 
   final saveString1 = utf8.encode('Lorem Ipsum') as Uint8List;
   final saveString2 = utf8.encode('Lorem Ipsum New Content') as Uint8List;
@@ -36,7 +38,7 @@ void simpleCloudStorageTestSuite({
   test('create and update', () async {
     final parent = await selectParent!(provider);
     final fileName = 'authpass_test_$uuid.txt';
-    final fileSource = await provider!.createEntity(
+    final fileSource = await provider.createEntity(
         CloudStorageSelectorSaveResult(parent, fileName), saveString1);
 
     final content1 = await fileSource.content().last;
@@ -62,7 +64,7 @@ void simpleCloudStorageTestSuite({
   test('create, load and conflict', () async {
     final parent = await selectParent!(provider);
     final fileName = 'authpass_test_$uuid.txt';
-    final fileSource = await provider!.createEntity(
+    final fileSource = await provider.createEntity(
         CloudStorageSelectorSaveResult(parent, fileName), saveString1);
 
     final content1 = await fileSource.content().last;
@@ -84,7 +86,7 @@ void simpleCloudStorageTestSuite({
   test('create, conflict', () async {
     final parent = await selectParent!(provider);
     final fileName = 'authpass_test_$uuid.txt';
-    final fileSource = await provider!.createEntity(
+    final fileSource = await provider.createEntity(
         CloudStorageSelectorSaveResult(parent, fileName), saveString1);
     final content1 = fileSource.cached;
     await fileSource.contentWrite(saveString2);
@@ -93,4 +95,23 @@ void simpleCloudStorageTestSuite({
       await fileSource.write(saveString3, content1!.metadata);
     }, throwsA(isA<StorageConflictException>()));
   });
+
+  test('create, load from cache', () async {
+    final parent = await selectParent!(provider);
+    final fileName = 'authpass_test_$uuid.txt';
+    final fileSource = await provider.createEntity(
+        CloudStorageSelectorSaveResult(parent, fileName), saveString1);
+    if (fileSource is FileSourceCloudStorage) {
+      final fileInfo = fileSource.fileInfo;
+      {
+        final loadedFile = provider.toFileSource(fileInfo,
+            uuid: fileSource.uuid, initialCachedContent: null);
+        await loadedFile.content().last;
+      }
+      final loadedFile = provider.toFileSource(fileInfo,
+          uuid: fileSource.uuid, initialCachedContent: null);
+      expect(await loadedFile.content().map((event) => event.source).toList(),
+          [FileContentSource.cache, FileContentSource.origin]);
+    }
+  });
 }
diff --git a/authpass/test/cloud_storage/webdav_test.dart b/authpass/test/cloud_storage/webdav_test.dart
index b39b7da19..a5c0f507f 100644
--- a/authpass/test/cloud_storage/webdav_test.dart
+++ b/authpass/test/cloud_storage/webdav_test.dart
@@ -27,12 +27,12 @@ void main() {
   _logger.fine('Starting webdav test for URL: $webDavUrl');
 
   group('simple webdav test', () {
-    WebDavProvider? provider;
+    late WebDavProvider provider;
     setUp(() async {
       // final env = await TestUtil.createEnv();
       provider = WebDavProvider(helper: CloudStorageHelperMock());
       // authenticate
-      final result = await provider!.startAuth((prompt) async {
+      final result = await provider.startAuth((prompt) async {
         if (prompt is UserAuthenticationPrompt<UrlUsernamePasswordResult,
             UrlUsernamePasswordPromptData>) {
           prompt.result(UrlUsernamePasswordResult(
