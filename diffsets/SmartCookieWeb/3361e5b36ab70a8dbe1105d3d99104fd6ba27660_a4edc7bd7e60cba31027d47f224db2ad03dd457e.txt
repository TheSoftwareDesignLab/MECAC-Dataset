diff --git a/app/src/main/java/com/cookiegames/smartcookie/IncognitoActivity.kt b/app/src/main/java/com/cookiegames/smartcookie/IncognitoActivity.kt
index 9f2ede4d..7c1959f1 100644
--- a/app/src/main/java/com/cookiegames/smartcookie/IncognitoActivity.kt
+++ b/app/src/main/java/com/cookiegames/smartcookie/IncognitoActivity.kt
@@ -32,12 +32,7 @@ class IncognitoActivity : BrowserActivity() {
 
 
     override fun onCreateOptionsMenu(menu: Menu): Boolean {
-        menuInflater.inflate(R.menu.incognito, menu)
-        if (menu is MenuBuilder) {
-            menu.setOptionalIconsVisible(true)
-        }
-        menu.findItem(R.id.quit_app).setVisible(userPreferences.showExtraOptions)
-        return super.onCreateOptionsMenu(menu)
+        return false
     }
 
     @Suppress("RedundantOverride")
diff --git a/app/src/main/java/com/cookiegames/smartcookie/browser/activity/BrowserActivity.kt b/app/src/main/java/com/cookiegames/smartcookie/browser/activity/BrowserActivity.kt
index b32a4e30..753c21ef 100644
--- a/app/src/main/java/com/cookiegames/smartcookie/browser/activity/BrowserActivity.kt
+++ b/app/src/main/java/com/cookiegames/smartcookie/browser/activity/BrowserActivity.kt
@@ -23,6 +23,7 @@ import android.preference.PreferenceManager
 import android.provider.MediaStore
 import android.util.DisplayMetrics
 import android.util.Log
+import android.util.TypedValue
 import android.view.*
 import android.view.View.*
 import android.view.ViewGroup.LayoutParams
@@ -42,13 +43,15 @@ import androidx.core.content.ContextCompat
 import androidx.core.graphics.drawable.toBitmap
 import androidx.core.net.toUri
 import androidx.core.view.GravityCompat
+import androidx.core.view.marginLeft
+import androidx.core.view.marginRight
+import androidx.core.view.marginTop
 import androidx.drawerlayout.widget.DrawerLayout
 import androidx.palette.graphics.Palette
 import butterknife.ButterKnife
 import com.anthonycr.grant.PermissionsManager
 import com.cookiegames.smartcookie.AppTheme
 import com.cookiegames.smartcookie.IncognitoActivity
-import com.cookiegames.smartcookie.MainActivity
 import com.cookiegames.smartcookie.R
 import com.cookiegames.smartcookie.browser.*
 import com.cookiegames.smartcookie.browser.bookmarks.BookmarksDrawerView
@@ -75,10 +78,8 @@ import com.cookiegames.smartcookie.interpolator.BezierDecelerateInterpolator
 import com.cookiegames.smartcookie.log.Logger
 import com.cookiegames.smartcookie.notifications.IncognitoNotification
 import com.cookiegames.smartcookie.popup.PopUpClass
-import com.cookiegames.smartcookie.reading.activity.ReadingActivity
 import com.cookiegames.smartcookie.search.SearchEngineProvider
 import com.cookiegames.smartcookie.search.SuggestionsAdapter
-import com.cookiegames.smartcookie.settings.activity.SettingsActivity
 import com.cookiegames.smartcookie.ssl.SslState
 import com.cookiegames.smartcookie.ssl.createSslDrawableForState
 import com.cookiegames.smartcookie.ssl.showSslDialog
@@ -98,6 +99,7 @@ import kotlinx.android.synthetic.main.toolbar.*
 import java.io.IOException
 import java.util.*
 import javax.inject.Inject
+import kotlin.math.roundToInt
 import kotlin.system.exitProcess
 
 abstract class BrowserActivity : ThemableBrowserActivity(), BrowserView, UIController, OnClickListener {
@@ -220,7 +222,7 @@ abstract class BrowserActivity : ThemableBrowserActivity(), BrowserView, UIContr
     lateinit var bookmarksDialogBuilder: LightningDialogBuilder
 
     // Image
-    private var webPageBitmap: Bitmap? = null
+    var webPageBitmap: Bitmap? = null
     private val backgroundDrawable = ColorDrawable()
     private var incognitoNotification: IncognitoNotification? = null
 
@@ -239,7 +241,7 @@ abstract class BrowserActivity : ThemableBrowserActivity(), BrowserView, UIContr
     /**
      * Determines if the current browser instance is in incognito mode or not.
      */
-    protected abstract fun isIncognito(): Boolean
+    abstract fun isIncognito(): Boolean
 
     /**
      * Choose the behavior when the controller closes the view.
@@ -325,6 +327,19 @@ abstract class BrowserActivity : ThemableBrowserActivity(), BrowserView, UIContr
         left_drawer.setLayerType(LAYER_TYPE_NONE, null)
         right_drawer.setLayerType(LAYER_TYPE_NONE, null)
 
+        if(userPreferences.bottomBar && userPreferences.navbar){
+            val sizeInDP = 56f
+
+            val marginInDp = TypedValue.applyDimension(
+                    TypedValue.COMPLEX_UNIT_DIP, sizeInDP, resources
+                    .displayMetrics)
+
+            val param = toolbar.layoutParams as ViewGroup.MarginLayoutParams
+            param.setMargins(toolbar.marginLeft,toolbar.marginTop,toolbar.marginRight,marginInDp.roundToInt())
+            toolbar.layoutParams = param
+
+        }
+
 
         setNavigationDrawerWidth()
         drawer_layout.addDrawerListener(DrawerLocker())
@@ -439,6 +454,11 @@ abstract class BrowserActivity : ThemableBrowserActivity(), BrowserView, UIContr
         }
 
 
+        if(isDarkTheme && userPreferences.navbar){
+            extraBar.setBackgroundColor(resources.getColor(R.color.black))
+        }
+
+
         // create the search EditText in the ToolBar
         searchView = customView.findViewById<SearchView>(R.id.search).apply {
             search_ssl_status.setOnClickListener {
@@ -581,7 +601,7 @@ abstract class BrowserActivity : ThemableBrowserActivity(), BrowserView, UIContr
         R.id.tabs_toolbar_container
     }
 
-    private fun getBookmarkDrawer(): View = if (swapBookmarksAndTabs) {
+    fun getBookmarkDrawer(): View = if (swapBookmarksAndTabs) {
         left_drawer
     } else {
         right_drawer
@@ -870,115 +890,6 @@ abstract class BrowserActivity : ThemableBrowserActivity(), BrowserView, UIContr
         return super.dispatchKeyEvent(event)
     }
 
-    override fun onOptionsItemSelected(item: MenuItem): Boolean {
-        val currentView = tabsManager.currentTab
-        val currentUrl = currentView?.url
-        // Handle action buttons
-        when (item.itemId) {
-            android.R.id.home -> {
-                if (drawer_layout.isDrawerOpen(getBookmarkDrawer())) {
-                    drawer_layout.closeDrawer(getBookmarkDrawer())
-                }
-                return true
-            }
-            R.id.action_back -> {
-                if (currentView?.canGoBack() == true) {
-                    currentView.goBack()
-                }
-                return true
-            }
-            R.id.action_forward -> {
-                if (currentView?.canGoForward() == true) {
-                    currentView.goForward()
-                }
-                return true
-            }
-            R.id.action_add_to_homescreen -> {
-                if (currentView != null
-                        && currentView.url.isNotBlank()
-                        && !currentView.url.isSpecialUrl()) {
-                    HistoryEntry(currentView.url, currentView.title).also {
-                        Utils.createShortcut(this, it, currentView.favicon ?: webPageBitmap!!)
-                        logger.log(TAG, "Creating shortcut: ${it.title} ${it.url}")
-                    }
-                }
-                return true
-            }
-            R.id.action_new_tab -> {
-                presenter?.newTab(homePageInitializer, true)
-                return true
-            }
-            R.id.action_incognito -> {
-                startActivity(IncognitoActivity.createIntent(this))
-                overridePendingTransition(R.anim.slide_up_in, R.anim.fade_out_scale)
-                return true
-            }
-            R.id.action_share -> {
-                IntentUtils(this).shareUrl(currentUrl, currentView?.title)
-                return true
-            }
-            R.id.action_print -> {
-                currentView!!.webView?.let { currentView.createWebPagePrint(it) }
-                return true
-            }
-            R.id.action_bookmarks -> {
-                openBookmarks()
-                return true
-            }
-            R.id.action_copy -> {
-                if (currentUrl != null && !currentUrl.isSpecialUrl()) {
-                    clipboardManager.copyToClipboard(currentUrl)
-                    snackbar(R.string.message_link_copied)
-                }
-                return true
-            }
-            R.id.action_settings -> {
-                startActivity(Intent(this, SettingsActivity::class.java))
-                return true
-            }
-            R.id.action_history -> {
-                openHistory()
-                return true
-            }
-            R.id.action_downloads -> {
-                openDownloads()
-                return true
-            }
-            R.id.translate -> {
-                currentView?.loadUrl("https://translatetheweb.com/?scw=yes&a=" + currentUrl!!)
-                return true
-            }
-            R.id.action_add_bookmark -> {
-                if (currentUrl != null && !currentUrl.isSpecialUrl()) {
-                    addBookmark(currentView.title, currentUrl)
-                }
-                return true
-            }
-            R.id.action_find -> {
-                findInPage()
-                return true
-            }
-            R.id.quit_private -> {
-                val back = Intent(this, MainActivity::class.java)
-                startActivity(back)
-                finish()
-                return true
-            }
-            R.id.quit_app -> {
-                this.finish()
-                System.exit(0)
-                return true
-            }
-            R.id.action_reading_mode -> {
-                if (currentUrl != null) {
-                    ReadingActivity.launch(this, currentUrl)
-                }
-                return true
-            }
-            else -> return super.onOptionsItemSelected(item)
-        }
-    }
-
 
     // By using a manager, adds a bookmark and notifies third parties about that
     private fun addBookmark(title: String, url: String) {
diff --git a/app/src/main/java/com/cookiegames/smartcookie/dialog/BrowserDialog.kt b/app/src/main/java/com/cookiegames/smartcookie/dialog/BrowserDialog.kt
index 15695473..d2eec747 100644
--- a/app/src/main/java/com/cookiegames/smartcookie/dialog/BrowserDialog.kt
+++ b/app/src/main/java/com/cookiegames/smartcookie/dialog/BrowserDialog.kt
@@ -45,7 +45,7 @@ object BrowserDialog {
     ) = show(activity, activity.getString(title), *items)
 
     fun showWithIcons(context: Context, title: String?, vararg items: DialogItem) {
-        val builder = AlertDialog.Builder(context)
+        val builder = MaterialAlertDialogBuilder(context)
 
         val layout = context.inflater.inflate(R.layout.list_dialog, null)
 
@@ -83,7 +83,7 @@ object BrowserDialog {
      * the dialog.
      */
     fun showListChoices(activity: Activity, @StringRes title: Int, vararg items: DialogItem) {
-        AlertDialog.Builder(activity).apply {
+        MaterialAlertDialogBuilder(activity).apply {
             setTitle(title)
 
             val choices = items.map { activity.getString(it.title) }.toTypedArray()
@@ -98,7 +98,7 @@ object BrowserDialog {
 
     @JvmStatic
     fun show(activity: Activity, title: String?, vararg items: DialogItem) {
-        val builder = AlertDialog.Builder(activity)
+        val builder = MaterialAlertDialogBuilder(activity)
 
         val layout = activity.inflater.inflate(R.layout.list_dialog, null)
 
@@ -144,7 +144,7 @@ object BrowserDialog {
         } else {
             activity.getString(message)
         }
-        AlertDialog.Builder(activity).apply {
+        MaterialAlertDialogBuilder(activity).apply {
             setTitle(title)
             setMessage(messageValue)
             setOnCancelListener { onCancel() }
@@ -201,9 +201,9 @@ object BrowserDialog {
     /**
      * Show the custom dialog with the custom builder arguments applied.
      */
-    fun showCustomDialog(activity: Activity?, block: AlertDialog.Builder.(Activity) -> Unit) {
+    fun showCustomDialog(activity: Activity?, block: MaterialAlertDialogBuilder.(Activity) -> Unit) {
         activity?.let {
-            AlertDialog.Builder(activity).apply {
+            MaterialAlertDialogBuilder(activity).apply {
                 block(it)
                 resizeAndShow()
             }
diff --git a/app/src/main/java/com/cookiegames/smartcookie/html/homepage/HomePageFactory.kt b/app/src/main/java/com/cookiegames/smartcookie/html/homepage/HomePageFactory.kt
index c5884c1f..07f05179 100644
--- a/app/src/main/java/com/cookiegames/smartcookie/html/homepage/HomePageFactory.kt
+++ b/app/src/main/java/com/cookiegames/smartcookie/html/homepage/HomePageFactory.kt
@@ -89,11 +89,17 @@ class HomePageFactory @Inject constructor(
                 else if(userPreferences.startPageThemeEnabled && userPreferences.useTheme == AppTheme.BLACK){
                     it.write(content + "<style>body {\n" +
                             "    background-color: #000000;\n" +
+                            "} .text, .edit{" +
+                            "color: #ffffff;" +
+                            "fill: #ffffff;" +
                             "}</style>")
                 }
                 else if(userPreferences.startPageThemeEnabled && userPreferences.useTheme == AppTheme.DARK){
                     it.write(content + "<style>body {\n" +
                             "    background-color: #2a2a2a;\n" +
+                            "} .text, .edit{" +
+                            "color: #ffffff;" +
+                            "fill: #ffffff;" +
                             "}</style>")
                 }
                 else{
diff --git a/app/src/main/java/com/cookiegames/smartcookie/popup/CustomAdapter.java b/app/src/main/java/com/cookiegames/smartcookie/popup/CustomAdapter.java
deleted file mode 100644
index a398631a..00000000
--- a/app/src/main/java/com/cookiegames/smartcookie/popup/CustomAdapter.java
+++ /dev/null
@@ -1,85 +0,0 @@
-// Copyright 2020 CookieJarApps
-package com.cookiegames.smartcookie.popup;
-
-import android.content.Context;
-import android.content.res.ColorStateList;
-import android.content.res.Resources;
-import android.graphics.PorterDuff;
-import android.util.Log;
-import android.util.TypedValue;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.BaseAdapter;
-import android.widget.ImageView;
-import android.widget.TextView;
-
-import androidx.annotation.ColorInt;
-import androidx.core.content.ContextCompat;
-import androidx.core.widget.ImageViewCompat;
-
-import com.cookiegames.smartcookie.AppTheme;
-import com.cookiegames.smartcookie.R;
-import com.cookiegames.smartcookie.preference.UserPreferences;
-
-import javax.inject.Inject;
-
-public class CustomAdapter extends BaseAdapter {
-
-    private Context mContext;
-    private String[]  Title;
-    private int[] imge;
-
-    public CustomAdapter(Context context, String[] text1,int[] imageIds) {
-        mContext = context;
-        Title = text1;
-        imge = imageIds;
-
-    }
-
-    public int getCount() {
-        // TODO Auto-generated method stub
-        return Title.length;
-    }
-
-    public Object getItem(int arg0) {
-        // TODO Auto-generated method stub
-        return null;
-    }
-
-    public long getItemId(int position) {
-        // TODO Auto-generated method stub
-        return position;
-    }
-
-    public View getView(int position, View convertView, ViewGroup parent) {
-
-        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
-        View row;
-        row = inflater.inflate(R.layout.menu_row, parent, false);
-        TextView title;
-        ImageView i1;
-        i1 = (ImageView) row.findViewById(R.id.imgIcon);
-        title = (TextView) row.findViewById(R.id.txtTitle);
-        title.setTextSize(14);
-        title.setText(Title[position]);
-        i1.setImageResource(imge[position]);
-        int tint = ContextCompat.getColor(mContext, R.color.black);
-
-        TypedValue typedValue = new TypedValue();
-        Resources.Theme theme = mContext.getTheme();
-        theme.resolveAttribute(R.attr.iconColor, typedValue, true);
-        @ColorInt int color = typedValue.data;
-
-        if(color == -16777216){
-            tint = ContextCompat.getColor(mContext, R.color.black);
-        }
-        else{
-            tint = ContextCompat.getColor(mContext, R.color.white);
-        }
-
-        ImageViewCompat.setImageTintList(i1, ColorStateList.valueOf(tint));
-
-        return (row);
-    }
-}
\ No newline at end of file
diff --git a/app/src/main/java/com/cookiegames/smartcookie/popup/CustomAdapter.kt b/app/src/main/java/com/cookiegames/smartcookie/popup/CustomAdapter.kt
new file mode 100644
index 00000000..9d527980
--- /dev/null
+++ b/app/src/main/java/com/cookiegames/smartcookie/popup/CustomAdapter.kt
@@ -0,0 +1,68 @@
+// Copyright 2020 CookieJarApps
+package com.cookiegames.smartcookie.popup
+
+import android.content.Context
+import android.content.res.ColorStateList
+import android.util.TypedValue
+import android.view.LayoutInflater
+import android.view.View
+import android.view.ViewGroup
+import android.widget.BaseAdapter
+import android.widget.ImageView
+import android.widget.TextView
+import androidx.annotation.ColorInt
+import androidx.annotation.Nullable
+import androidx.core.content.ContextCompat
+import androidx.core.widget.ImageViewCompat
+import com.cookiegames.smartcookie.R
+import com.cookiegames.smartcookie.preference.UserPreferences
+import javax.inject.Inject
+
+class CustomAdapter(private val mContext: Context, private val Title: Array<String>, private val imge: IntArray) : BaseAdapter() {
+
+    @Inject
+    lateinit var userPreferences: UserPreferences
+
+    override fun getCount(): Int {
+        // TODO Auto-generated method stub
+        return Title.size
+    }
+
+    override fun getItemId(position: Int): Long {
+        // TODO Auto-generated method stub
+        return position.toLong()
+    }
+
+    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
+        val inflater = mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater
+        val row: View
+        row = inflater.inflate(R.layout.menu_row, parent, false)
+        val title: TextView
+        val i1: ImageView
+        i1 = row.findViewById<View>(R.id.imgIcon) as ImageView
+        title = row.findViewById<View>(R.id.txtTitle) as TextView
+        title.textSize = 14f
+        title.text = Title[position]
+        i1.setImageResource(imge[position])
+        var tint = ContextCompat.getColor(mContext, R.color.black)
+        val typedValue = TypedValue()
+        val theme = mContext.theme
+        theme.resolveAttribute(R.attr.iconColor, typedValue, true)
+        @ColorInt val color = typedValue.data
+        // Horrifically hacky, TODO: find another way to get the theme here, this'll break if I add new themes
+        if (color == -16777216) {
+            tint = ContextCompat.getColor(mContext, R.color.black)
+            title.setTextColor(ContextCompat.getColor(mContext, R.color.black))
+        } else {
+            tint = ContextCompat.getColor(mContext, R.color.white)
+            title.setTextColor(ContextCompat.getColor(mContext, R.color.white))
+        }
+        ImageViewCompat.setImageTintList(i1, ColorStateList.valueOf(tint))
+        return row
+    }
+
+    override fun getItem(position: Int): Any {
+        return Title.get(position)
+    }
+
+}
\ No newline at end of file
diff --git a/app/src/main/java/com/cookiegames/smartcookie/popup/PopUpClass.kt b/app/src/main/java/com/cookiegames/smartcookie/popup/PopUpClass.kt
index c8ba1d8d..553ec580 100644
--- a/app/src/main/java/com/cookiegames/smartcookie/popup/PopUpClass.kt
+++ b/app/src/main/java/com/cookiegames/smartcookie/popup/PopUpClass.kt
@@ -8,21 +8,32 @@ import android.content.Intent
 import android.graphics.Color
 import android.graphics.drawable.ColorDrawable
 import android.os.Build
+import android.util.Log
 import android.util.TypedValue
 import android.view.Gravity
 import android.view.LayoutInflater
 import android.view.View
 import android.widget.*
 import android.widget.AdapterView.OnItemClickListener
+import androidx.constraintlayout.widget.ConstraintLayout
+import com.cookiegames.smartcookie.AppTheme
 import com.cookiegames.smartcookie.IncognitoActivity
 import com.cookiegames.smartcookie.R
 import com.cookiegames.smartcookie.browser.TabsManager
 import com.cookiegames.smartcookie.browser.activity.BrowserActivity
 import com.cookiegames.smartcookie.controller.UIController
+import com.cookiegames.smartcookie.database.HistoryEntry
 import com.cookiegames.smartcookie.di.injector
 import com.cookiegames.smartcookie.dialog.BrowserDialog
+import com.cookiegames.smartcookie.extensions.copyToClipboard
+import com.cookiegames.smartcookie.extensions.snackbar
 import com.cookiegames.smartcookie.preference.UserPreferences
+import com.cookiegames.smartcookie.reading.activity.ReadingActivity
 import com.cookiegames.smartcookie.settings.activity.SettingsActivity
+import com.cookiegames.smartcookie.utils.IntentUtils
+import com.cookiegames.smartcookie.utils.Utils
+import com.cookiegames.smartcookie.utils.isSpecialUrl
+import kotlinx.android.synthetic.main.activity_main.*
 import kotlinx.android.synthetic.main.search_interface.*
 import java.util.*
 import javax.inject.Inject
@@ -44,6 +55,7 @@ class PopUpClass {
         val inflater = view.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater
         val popupView = inflater.inflate(R.layout.toolbar_menu, null)
         val r = view.context.resources
+
         val px = Math.round(TypedValue.applyDimension(
                 TypedValue.COMPLEX_UNIT_DIP, 228f, r.displayMetrics))
 
@@ -59,6 +71,16 @@ class PopUpClass {
         val popupWindow = PopupWindow(popupView, px, height, focusable)
         val relView = popupView.findViewById<RelativeLayout>(R.id.toolbar_menu)
 
+        if(activity.isIncognito()){
+            val incognitoHeight = Math.round(TypedValue.applyDimension(
+                    TypedValue.COMPLEX_UNIT_DIP, 628f, r.displayMetrics))
+            popupView.findViewById<ConstraintLayout>(R.id.transparent_container).maxHeight = incognitoHeight
+            popupView.findViewById<ConstraintLayout>(R.id.transparent_container).setBackgroundColor(view.context.resources.getColor(R.color.black))
+        }
+        else if(userPreferences.useTheme == AppTheme.DARK || userPreferences.useTheme == AppTheme.BLACK){
+            popupView.findViewById<ConstraintLayout>(R.id.transparent_container).setBackgroundColor(view.context.resources.getColor(R.color.black))
+        }
+
         //Set the location of the window on the screen
         if (userPreferences!!.bottomBar) {
             popupWindow.animationStyle = R.style.ToolbarAnimReverse
@@ -70,68 +92,85 @@ class PopUpClass {
         }
         popupWindow.setBackgroundDrawable(ColorDrawable(Color.WHITE))
         val resources = view.context.resources
-        val textString = arrayOf(resources.getString(R.string.action_new_tab), resources.getString(R.string.action_incognito), resources.getString(R.string.action_share), resources.getString(R.string.action_print), resources.getString(R.string.action_history), resources.getString(R.string.action_downloads), resources.getString(R.string.action_find), resources.getString(R.string.action_copy), resources.getString(R.string.action_add_to_homescreen), resources.getString(R.string.action_bookmarks), resources.getString(R.string.reading_mode), resources.getString(R.string.settings))
-        val drawableIds = intArrayOf(R.drawable.ic_round_add, R.drawable.incognito_mode, R.drawable.ic_share_black_24dp, R.drawable.ic_round_print_24, R.drawable.ic_history, R.drawable.ic_file_download_black_24dp, R.drawable.ic_search, R.drawable.ic_content_copy_black_24dp, R.drawable.ic_round_smartphone, R.drawable.state_ic_bookmark, R.drawable.ic_action_reading, R.drawable.ic_round_settings)
+        var textString = arrayOf(resources.getString(R.string.action_new_tab), resources.getString(R.string.action_incognito), resources.getString(R.string.action_share), resources.getString(R.string.action_print), resources.getString(R.string.action_history), resources.getString(R.string.action_downloads), resources.getString(R.string.action_find), resources.getString(R.string.action_copy), resources.getString(R.string.action_add_to_homescreen), resources.getString(R.string.action_bookmarks), resources.getString(R.string.reading_mode), resources.getString(R.string.settings))
+        var drawableIds = intArrayOf(R.drawable.ic_round_add, R.drawable.incognito_mode, R.drawable.ic_share_black_24dp, R.drawable.ic_round_print_24, R.drawable.ic_history, R.drawable.ic_file_download_black_24dp, R.drawable.ic_search, R.drawable.ic_content_copy_black_24dp, R.drawable.ic_round_smartphone, R.drawable.state_ic_bookmark, R.drawable.ic_action_reading, R.drawable.ic_round_settings)
+
+        if(activity.isIncognito()){
+            textString = arrayOf(resources.getString(R.string.action_new_tab), resources.getString(R.string.action_print), resources.getString(R.string.action_find), resources.getString(R.string.action_copy), resources.getString(R.string.action_add_to_homescreen), resources.getString(R.string.action_bookmarks), resources.getString(R.string.reading_mode), resources.getString(R.string.settings), resources.getString(R.string.quit_private))
+            drawableIds = intArrayOf(R.drawable.ic_round_add, R.drawable.ic_round_print_24, R.drawable.ic_search, R.drawable.ic_content_copy_black_24dp, R.drawable.ic_round_smartphone, R.drawable.state_ic_bookmark, R.drawable.ic_action_reading, R.drawable.ic_round_settings, R.drawable.ic_action_back)
+        }
+
+
         if (userPreferences!!.bottomBar) {
-            Collections.reverse(Arrays.asList(*textString))
+            textString.reverse()
             for (i in 0 until drawableIds.size / 2) {
                 val temp = drawableIds[i]
                 drawableIds[i] = drawableIds[drawableIds.size - i - 1]
                 drawableIds[drawableIds.size - i - 1] = temp
             }
         }
+
         val adapter = CustomAdapter(view.context, textString, drawableIds)
         list = popupView.findViewById<ListView>(R.id.menuList)
         list?.setAdapter(adapter)
         list?.setOnItemClickListener(OnItemClickListener { parent, view, position, id ->
             var positionList = intArrayOf(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)
-            var currentView = uiController!!.getTabModel().currentTab
-            var currentUrl = uiController!!.getTabModel().currentTab?.url
-            if (userPreferences!!.bottomBar) {
+            if(activity.isIncognito() && !userPreferences.bottomBar){
+                positionList = intArrayOf(0, 3, 6, 7, 8, 9, 10, 11, 12)
+            }
+            else if(activity.isIncognito()){
+                positionList = intArrayOf(12, 11, 10, 9, 8, 7, 6, 3, 0)
+            }
+            else if(userPreferences.bottomBar){
                 positionList = intArrayOf(11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0)
             }
-            if (position == positionList[0]) {
+            var currentView = activity.tabsManager.currentTab
+            var currentUrl = uiController!!.getTabModel().currentTab?.url
+
+            if (positionList[position] == 0) {
                 uiController!!.newTabButtonClicked()
-            } else if (position == positionList[1]) {
+            } else if (positionList[position] == 1) {
                 val incognito = Intent(view.context, IncognitoActivity::class.java)
                 view.context.startActivity(incognito)
-            } else if (position == positionList[2]) {
-                val shareIntent = Intent(Intent.ACTION_SEND)
-                shareIntent.type = "text/plain"
-                if (currentView?.title != null) {
-                    shareIntent.putExtra(Intent.EXTRA_SUBJECT, currentView.title)
-                }
-                shareIntent.putExtra(Intent.EXTRA_TEXT, currentUrl)
-                view.context.startActivity(Intent.createChooser(shareIntent, view.context.getString(R.string.dialog_title_share)))
-            } else if (position == positionList[3]) {
+            } else if (positionList[position] == 2) {
+                IntentUtils(activity).shareUrl(currentUrl, currentView?.title)
+            } else if (positionList[position] == 3) {
                 currentView!!.webView?.let { currentView.createWebPagePrint(it) }
-            } else if (position == positionList[4]) {
+            } else if (positionList[position] == 4) {
                 currentView?.loadHistoryPage()
-            } else if (position == positionList[5]) {
+            } else if (positionList[position] == 5) {
                 currentView?.loadDownloadsPage()
-            } else if (position == positionList[6]) {
+            } else if (positionList[position] == 6) {
                 activity.findInPage()
-            } else if (position == positionList[7]) {
-                val incognito = Intent(view.context, IncognitoActivity::class.java)
-                view.context.startActivity(incognito)
-            } else if (position == positionList[8]) {
-                val incognito = Intent(view.context, IncognitoActivity::class.java)
-                view.context.startActivity(incognito)
-            } else if (position == positionList[9]) {
-                val incognito = Intent(view.context, IncognitoActivity::class.java)
-                view.context.startActivity(incognito)
-            } else if (position == positionList[10]) {
-                val incognito = Intent(view.context, IncognitoActivity::class.java)
-                view.context.startActivity(incognito)
-            } else if (position == positionList[11]) {
-                val incognito = Intent(view.context, SettingsActivity::class.java)
-                view.context.startActivity(incognito)
+            } else if (positionList[position] == 7) {
+                if (currentUrl != null && !currentUrl.isSpecialUrl()) {
+                    activity.clipboardManager.copyToClipboard(currentUrl)
+                    activity.snackbar(R.string.message_link_copied)
+                }
+            } else if (positionList[position] == 8) {
+                if (currentView != null
+                        && currentView.url.isNotBlank()
+                        && !currentView.url.isSpecialUrl()) {
+                    HistoryEntry(currentView.url, currentView.title).also {
+                        Utils.createShortcut(activity, it, currentView.favicon ?: activity.webPageBitmap!!)
+                    }
+                }
+            } else if (positionList[position] == 9) {
+               activity.drawer_layout.openDrawer(activity.getBookmarkDrawer())
+            } else if (positionList[position] == 10) {
+                if (currentUrl != null) {
+                    ReadingActivity.launch(view.context, currentUrl)
+                }
+            } else if (positionList[position] == 11) {
+                val settings = Intent(view.context, SettingsActivity::class.java)
+                view.context.startActivity(settings)
+            }
+            else if (positionList[position] == 12) {
+                activity.onBackPressed()
+                activity.finish()
             }
             popupWindow.dismiss()
         })
-        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
-            popupWindow.elevation = 20f
-        }
 
 
         //Handler for clicking on the inactive zone of the window
diff --git a/app/src/main/java/com/cookiegames/smartcookie/settings/fragment/DisplaySettingsFragment.kt b/app/src/main/java/com/cookiegames/smartcookie/settings/fragment/DisplaySettingsFragment.kt
index 9402954c..4593ef30 100644
--- a/app/src/main/java/com/cookiegames/smartcookie/settings/fragment/DisplaySettingsFragment.kt
+++ b/app/src/main/java/com/cookiegames/smartcookie/settings/fragment/DisplaySettingsFragment.kt
@@ -27,6 +27,7 @@ import com.cookiegames.smartcookie.browser.DrawerLineChoice
 import com.cookiegames.smartcookie.browser.DrawerSizeChoice
 import com.flask.colorpicker.ColorPickerView
 import com.flask.colorpicker.builder.ColorPickerDialogBuilder
+import com.google.android.material.dialog.MaterialAlertDialogBuilder
 import org.w3c.dom.Text
 
 
@@ -268,7 +269,7 @@ class DisplaySettingsFragment : AbstractSettingsFragment() {
 
     private fun showTextSizePicker() {
         val maxValue = 7
-        AlertDialog.Builder(requireContext()).apply {
+        MaterialAlertDialogBuilder(requireContext()).apply {
             val layoutInflater = activity?.layoutInflater
             val customView = (layoutInflater?.inflate(R.layout.dialog_seek_bar, null) as LinearLayout).apply {
                 val text = TextView(activity).apply {
@@ -303,7 +304,7 @@ class DisplaySettingsFragment : AbstractSettingsFragment() {
 
     private fun showThemePicker(summaryUpdater: SummaryUpdater) {
        val currentTheme = userPreferences.useTheme
-        AlertDialog.Builder(requireContext()).apply {
+        MaterialAlertDialogBuilder(requireContext()).apply {
             setTitle(resources.getString(R.string.theme))
             val values = AppTheme.values().map { Pair(it, it.toDisplayString()) }
             withSingleChoiceItems(values, userPreferences.useTheme) {
diff --git a/app/src/main/res/drawable/toolbar_color.xml b/app/src/main/res/drawable/toolbar_color.xml
new file mode 100644
index 00000000..aca8b9de
--- /dev/null
+++ b/app/src/main/res/drawable/toolbar_color.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+    <item android:state_checked="true" android:color="?attr/iconColor" />
+    <item android:color="?attr/iconColor"  />
+</selector>
diff --git a/app/src/main/res/drawable/translate.xml b/app/src/main/res/drawable/translate.xml
index 6ddc244f..3a6759ed 100644
--- a/app/src/main/res/drawable/translate.xml
+++ b/app/src/main/res/drawable/translate.xml
@@ -2,6 +2,7 @@
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
     android:width="24dp"
     android:height="24dp"
+    android:tint="?attr/iconColorState"
     android:viewportWidth="24"
     android:viewportHeight="24">
 
diff --git a/app/src/main/res/layout/activity_main.xml b/app/src/main/res/layout/activity_main.xml
index f309a715..1c1ff328 100644
--- a/app/src/main/res/layout/activity_main.xml
+++ b/app/src/main/res/layout/activity_main.xml
@@ -59,16 +59,19 @@
 </androidx.coordinatorlayout.widget.CoordinatorLayout>
 
         <com.google.android.material.bottomnavigation.BottomNavigationView
-            android:background="@color/white"
             android:id="@+id/bottom_navigation"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
-            app:menu="@menu/bottom_menu"
-            app:labelVisibilityMode="labeled"
+            app:itemIconTint="@drawable/toolbar_color"
+            app:itemTextColor="?attr/iconColor"
             android:layout_alignParentBottom="true"
-            android:translationZ="0dp"
+            android:layout_gravity="bottom"
+            android:background="@color/white"
             android:outlineAmbientShadowColor="@android:color/transparent"
             android:outlineSpotShadowColor="@android:color/transparent"
+            android:translationZ="0dp"
+            app:labelVisibilityMode="labeled"
+            app:menu="@menu/bottom_menu"
             />
 
 
diff --git a/app/src/main/res/layout/activity_main_btm.xml b/app/src/main/res/layout/activity_main_btm.xml
index 5f348463..1ce74e98 100644
--- a/app/src/main/res/layout/activity_main_btm.xml
+++ b/app/src/main/res/layout/activity_main_btm.xml
@@ -22,8 +22,7 @@
                 android:id="@+id/ui_layout"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
-                android:orientation="vertical"
-                android:layout_weight="1">
+                android:orientation="vertical">
 
                 <include
                     layout="@layout/browser_content"/>
@@ -54,20 +53,23 @@
                 android:weightSum="1"/>
 
         </androidx.drawerlayout.widget.DrawerLayout>
-
 </androidx.coordinatorlayout.widget.CoordinatorLayout>
+    <com.google.android.material.bottomnavigation.BottomNavigationView
+        android:id="@+id/bottom_navigation"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        app:itemIconTint="@drawable/toolbar_color"
+        app:itemTextColor="?attr/iconColor"
+        android:layout_alignParentBottom="true"
+        android:layout_gravity="bottom"
+        android:background="@color/white"
+        android:outlineAmbientShadowColor="@android:color/transparent"
+        android:outlineSpotShadowColor="@android:color/transparent"
+        android:translationZ="0dp"
+        app:labelVisibilityMode="labeled"
+        app:menu="@menu/bottom_menu"/>
+
+
 
-<com.google.android.material.bottomnavigation.BottomNavigationView
-android:background="@color/white"
-android:id="@+id/bottom_navigation"
-android:layout_width="match_parent"
-android:layout_height="wrap_content"
-app:menu="@menu/bottom_menu"
-app:labelVisibilityMode="labeled"
-android:layout_alignParentBottom="true"
-android:translationZ="0dp"
-android:outlineAmbientShadowColor="@android:color/transparent"
-android:outlineSpotShadowColor="@android:color/transparent"
-    />
+</RelativeLayout>
 
-    </RelativeLayout>
diff --git a/app/src/main/res/layout/toolbar_btm.xml b/app/src/main/res/layout/toolbar_btm.xml
index 42e00509..068d13e4 100644
--- a/app/src/main/res/layout/toolbar_btm.xml
+++ b/app/src/main/res/layout/toolbar_btm.xml
@@ -19,13 +19,11 @@
         android:id="@+id/toolbar"
         android:layout_width="match_parent"
         android:layout_height="?attr/actionBarSize"
-        android:paddingBottom="0dp"
+        android:layout_marginBottom="0dp"
         android:paddingLeft="0dp"
-        android:paddingRight="0dp"
         android:paddingTop="2dp"
         app:contentInsetEnd="0dp"
-        app:contentInsetStart="0dp"
-        />
+        app:contentInsetStart="0dp" />
 
     <LinearLayout
         android:layout_width="match_parent"
diff --git a/app/src/main/res/layout/toolbar_menu.xml b/app/src/main/res/layout/toolbar_menu.xml
index 3924aade..e8a90e3d 100644
--- a/app/src/main/res/layout/toolbar_menu.xml
+++ b/app/src/main/res/layout/toolbar_menu.xml
@@ -71,7 +71,7 @@
                 android:paddingStart="6dp"
                 android:paddingTop="4dp"
                 android:paddingEnd="6dp"
-                app:srcCompat="@drawable/ic_action_refresh" />
+                app:srcCompat="@drawable/ic_action_delete" />
 
 
         </LinearLayout>
diff --git a/app/src/main/res/values-v21/styles.xml b/app/src/main/res/values-v21/styles.xml
index 04ff6a4d..77046b2a 100644
--- a/app/src/main/res/values-v21/styles.xml
+++ b/app/src/main/res/values-v21/styles.xml
@@ -27,13 +27,8 @@
         <item name="listBackground">?attr/listChoiceBackgroundIndicator</item>
         <item name="progressBackgroundColor">@color/transparent</item>
         <item name="android:windowDrawsSystemBarBackgrounds">true</item>
-        <item name="android:statusBarColor">@color/secondary_color</item>
+        <item name="android:statusBarColor">@color/status_bar</item>
         <item name="android:windowTranslucentStatus">false</item>
-        <!-- READ THIS:
-            windowTranslucentStatus will set a semitransparent color to the status bar
-            primaryColorDark will set a color below the actual status bar color that
-                will be below the navigation drawers, but above the content of the app
-            windowDrawsSystemBarBackgrounds
         -->
     </style>
     <!-- Regular themes -->
@@ -44,7 +39,7 @@
         <item name="listBackground">?attr/listChoiceBackgroundIndicator</item>
         <item name="progressBackgroundColor">@color/transparent</item>
         <item name="android:windowDrawsSystemBarBackgrounds">true</item>
-        <item name="android:statusBarColor">@color/secondary_color</item>
+        <item name="android:statusBarColor">@color/primary_color_dark</item>
         <item name="android:windowTranslucentStatus">false</item>
     </style>
 
diff --git a/app/src/main/res/values/colors.xml b/app/src/main/res/values/colors.xml
index 3ea70a96..153fbc2a 100644
--- a/app/src/main/res/values/colors.xml
+++ b/app/src/main/res/values/colors.xml
@@ -8,11 +8,11 @@
     <color name="gray_list_bg">#0d000000</color>
 
     <color name="primary_color">#FFFFFF</color>
-    <color name="secondary_color">#66000000</color>
+    <color name="secondary_color">#8d4e00</color>
     <color name="accent_color">#C88C36</color>
 
-    <color name="cyanea_primary_reference">#FFFFFF</color>
-    <color name="cyanea_accent_reference">#C88C36</color>
+    <color name="status_bar">#9C9C9C</color>
+
 
     <color name="color_green">#ACDF87</color>
     <color name="color_yellow">#FEFEBE</color>
diff --git a/app/src/main/res/values/styles.xml b/app/src/main/res/values/styles.xml
index e44eac67..ad0c8551 100644
--- a/app/src/main/res/values/styles.xml
+++ b/app/src/main/res/values/styles.xml
@@ -46,7 +46,7 @@
     <style name="Theme.BaseLightTheme" parent="Theme.MaterialComponents.Light">
 
         <!-- Theme Colors -->
-        <item name="colorPrimary">@color/black</item>
+        <item name="colorPrimary">@color/accent_color</item>
 
         <item name="colorPrimaryDark">@color/transparent</item>
         <item name="colorAccent">@color/accent_color</item>
@@ -70,10 +70,10 @@
 
     </style>
 
-    <style name="Theme.BaseDarkTheme" parent="Theme.AppCompat">
+    <style name="Theme.BaseDarkTheme" parent="Theme.MaterialComponents">
 
         <!-- Theme colors -->
-        <item name="colorPrimary">@color/primary_color_dark</item>
+        <item name="colorPrimary">@color/secondary_color</item>
         <item name="colorPrimaryDark">@color/primary_color_dark</item>
         <item name="colorAccent">@color/accent_color</item>
         <item name="drawerBackground">@color/drawer_background_dark</item>
@@ -96,10 +96,10 @@
 
     </style>
 
-    <style name="Theme.BaseBlackTheme" parent="Theme.AppCompat">
+    <style name="Theme.BaseBlackTheme" parent="Theme.MaterialComponents">
 
         <!-- Theme Colors -->
-        <item name="colorPrimary">@color/black</item>
+        <item name="colorPrimary">@color/secondary_color</item>
         <item name="colorPrimaryDark">@color/black</item>
         <item name="colorAccent">@color/accent_color</item>
         <item name="drawerBackground">@color/black</item>
