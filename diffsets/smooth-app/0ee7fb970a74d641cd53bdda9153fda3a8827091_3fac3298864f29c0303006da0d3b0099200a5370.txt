diff --git a/packages/smooth_app/ios/Runner.xcodeproj/project.pbxproj b/packages/smooth_app/ios/Runner.xcodeproj/project.pbxproj
index db4500d59c98..463cf5395f83 100644
--- a/packages/smooth_app/ios/Runner.xcodeproj/project.pbxproj
+++ b/packages/smooth_app/ios/Runner.xcodeproj/project.pbxproj
@@ -8,7 +8,7 @@
 
 /* Begin PBXBuildFile section */
 		1498D2341E8E89220040F4C2 /* GeneratedPluginRegistrant.m in Sources */ = {isa = PBXBuildFile; fileRef = 1498D2331E8E89220040F4C2 /* GeneratedPluginRegistrant.m */; };
-		37E515302A985A5147086AB4 /* Pods_Runner.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 94EE41E7D0B7C1ECD5836920 /* Pods_Runner.framework */; };
+		14E17F8572CE386247711669 /* Pods_Runner.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = ED17CDB3AC0E967540F576BC /* Pods_Runner.framework */; };
 		3B3967161E833CAA004F5970 /* AppFrameworkInfo.plist in Resources */ = {isa = PBXBuildFile; fileRef = 3B3967151E833CAA004F5970 /* AppFrameworkInfo.plist */; };
 		74858FAF1ED2DC5600515810 /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = 74858FAE1ED2DC5600515810 /* AppDelegate.swift */; };
 		97C146FC1CF9000F007C117D /* Main.storyboard in Resources */ = {isa = PBXBuildFile; fileRef = 97C146FA1CF9000F007C117D /* Main.storyboard */; };
@@ -32,12 +32,12 @@
 /* Begin PBXFileReference section */
 		1498D2321E8E86230040F4C2 /* GeneratedPluginRegistrant.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; path = GeneratedPluginRegistrant.h; sourceTree = "<group>"; };
 		1498D2331E8E89220040F4C2 /* GeneratedPluginRegistrant.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = GeneratedPluginRegistrant.m; sourceTree = "<group>"; };
+		17BA8918CA2D4BC195046659 /* Pods-Runner.profile.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-Runner.profile.xcconfig"; path = "Target Support Files/Pods-Runner/Pods-Runner.profile.xcconfig"; sourceTree = "<group>"; };
 		3B3967151E833CAA004F5970 /* AppFrameworkInfo.plist */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.plist.xml; name = AppFrameworkInfo.plist; path = Flutter/AppFrameworkInfo.plist; sourceTree = "<group>"; };
+		49FCE33285BB3CEDB9CB40DA /* Pods-Runner.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-Runner.debug.xcconfig"; path = "Target Support Files/Pods-Runner/Pods-Runner.debug.xcconfig"; sourceTree = "<group>"; };
 		74858FAD1ED2DC5600515810 /* Runner-Bridging-Header.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; path = "Runner-Bridging-Header.h"; sourceTree = "<group>"; };
 		74858FAE1ED2DC5600515810 /* AppDelegate.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = AppDelegate.swift; sourceTree = "<group>"; };
 		7AFA3C8E1D35360C0083082E /* Release.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; name = Release.xcconfig; path = Flutter/Release.xcconfig; sourceTree = "<group>"; };
-		9027473C76FE9AA0548EE8FB /* Pods-Runner.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-Runner.release.xcconfig"; path = "Target Support Files/Pods-Runner/Pods-Runner.release.xcconfig"; sourceTree = "<group>"; };
-		94EE41E7D0B7C1ECD5836920 /* Pods_Runner.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = Pods_Runner.framework; sourceTree = BUILT_PRODUCTS_DIR; };
 		9740EEB21CF90195004384FC /* Debug.xcconfig */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.xcconfig; name = Debug.xcconfig; path = Flutter/Debug.xcconfig; sourceTree = "<group>"; };
 		9740EEB31CF90195004384FC /* Generated.xcconfig */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.xcconfig; name = Generated.xcconfig; path = Flutter/Generated.xcconfig; sourceTree = "<group>"; };
 		97C146EE1CF9000F007C117D /* Runner.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = Runner.app; sourceTree = BUILT_PRODUCTS_DIR; };
@@ -45,8 +45,8 @@
 		97C146FD1CF9000F007C117D /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; path = Assets.xcassets; sourceTree = "<group>"; };
 		97C147001CF9000F007C117D /* Base */ = {isa = PBXFileReference; lastKnownFileType = file.storyboard; name = Base; path = Base.lproj/LaunchScreen.storyboard; sourceTree = "<group>"; };
 		97C147021CF9000F007C117D /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
-		C0DBB900E27C01D5AEB2DECC /* Pods-Runner.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-Runner.debug.xcconfig"; path = "Target Support Files/Pods-Runner/Pods-Runner.debug.xcconfig"; sourceTree = "<group>"; };
-		F5CD823EDCAC9897A4525E0D /* Pods-Runner.profile.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-Runner.profile.xcconfig"; path = "Target Support Files/Pods-Runner/Pods-Runner.profile.xcconfig"; sourceTree = "<group>"; };
+		9E79FDA81D2D251C84EAF44A /* Pods-Runner.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-Runner.release.xcconfig"; path = "Target Support Files/Pods-Runner/Pods-Runner.release.xcconfig"; sourceTree = "<group>"; };
+		ED17CDB3AC0E967540F576BC /* Pods_Runner.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = Pods_Runner.framework; sourceTree = BUILT_PRODUCTS_DIR; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -54,13 +54,32 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				37E515302A985A5147086AB4 /* Pods_Runner.framework in Frameworks */,
+				14E17F8572CE386247711669 /* Pods_Runner.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
 /* End PBXFrameworksBuildPhase section */
 
 /* Begin PBXGroup section */
+		443E0076D115C215ED1B710A /* Frameworks */ = {
+			isa = PBXGroup;
+			children = (
+				ED17CDB3AC0E967540F576BC /* Pods_Runner.framework */,
+			);
+			name = Frameworks;
+			sourceTree = "<group>";
+		};
+		797A030D3D5D8C5E17B534E1 /* Pods */ = {
+			isa = PBXGroup;
+			children = (
+				49FCE33285BB3CEDB9CB40DA /* Pods-Runner.debug.xcconfig */,
+				9E79FDA81D2D251C84EAF44A /* Pods-Runner.release.xcconfig */,
+				17BA8918CA2D4BC195046659 /* Pods-Runner.profile.xcconfig */,
+			);
+			name = Pods;
+			path = Pods;
+			sourceTree = "<group>";
+		};
 		9740EEB11CF90186004384FC /* Flutter */ = {
 			isa = PBXGroup;
 			children = (
@@ -78,8 +97,8 @@
 				9740EEB11CF90186004384FC /* Flutter */,
 				97C146F01CF9000F007C117D /* Runner */,
 				97C146EF1CF9000F007C117D /* Products */,
-				9F0ACB595AA7E640026B62CA /* Pods */,
-				B8B9787CC8C805091651F89B /* Frameworks */,
+				797A030D3D5D8C5E17B534E1 /* Pods */,
+				443E0076D115C215ED1B710A /* Frameworks */,
 			);
 			sourceTree = "<group>";
 		};
@@ -114,25 +133,6 @@
 			name = "Supporting Files";
 			sourceTree = "<group>";
 		};
-		9F0ACB595AA7E640026B62CA /* Pods */ = {
-			isa = PBXGroup;
-			children = (
-				C0DBB900E27C01D5AEB2DECC /* Pods-Runner.debug.xcconfig */,
-				9027473C76FE9AA0548EE8FB /* Pods-Runner.release.xcconfig */,
-				F5CD823EDCAC9897A4525E0D /* Pods-Runner.profile.xcconfig */,
-			);
-			name = Pods;
-			path = Pods;
-			sourceTree = "<group>";
-		};
-		B8B9787CC8C805091651F89B /* Frameworks */ = {
-			isa = PBXGroup;
-			children = (
-				94EE41E7D0B7C1ECD5836920 /* Pods_Runner.framework */,
-			);
-			name = Frameworks;
-			sourceTree = "<group>";
-		};
 /* End PBXGroup section */
 
 /* Begin PBXNativeTarget section */
@@ -140,14 +140,14 @@
 			isa = PBXNativeTarget;
 			buildConfigurationList = 97C147051CF9000F007C117D /* Build configuration list for PBXNativeTarget "Runner" */;
 			buildPhases = (
-				9BFA9DD10FB8D1989DAF4B00 /* [CP] Check Pods Manifest.lock */,
+				135C37CBA0AA1C9188FDA4FF /* [CP] Check Pods Manifest.lock */,
 				9740EEB61CF901F6004384FC /* Run Script */,
 				97C146EA1CF9000F007C117D /* Sources */,
 				97C146EB1CF9000F007C117D /* Frameworks */,
 				97C146EC1CF9000F007C117D /* Resources */,
 				9705A1C41CF9048500538489 /* Embed Frameworks */,
 				3B06AD1E1E4923F5004D2608 /* Thin Binary */,
-				977B29F6D11D7EB06287A662 /* [CP] Embed Pods Frameworks */,
+				D9FF42268352864A4C1EF1D7 /* [CP] Embed Pods Frameworks */,
 			);
 			buildRules = (
 			);
@@ -206,6 +206,28 @@
 /* End PBXResourcesBuildPhase section */
 
 /* Begin PBXShellScriptBuildPhase section */
+		135C37CBA0AA1C9188FDA4FF /* [CP] Check Pods Manifest.lock */ = {
+			isa = PBXShellScriptBuildPhase;
+			buildActionMask = 2147483647;
+			files = (
+			);
+			inputFileListPaths = (
+			);
+			inputPaths = (
+				"${PODS_PODFILE_DIR_PATH}/Podfile.lock",
+				"${PODS_ROOT}/Manifest.lock",
+			);
+			name = "[CP] Check Pods Manifest.lock";
+			outputFileListPaths = (
+			);
+			outputPaths = (
+				"$(DERIVED_FILE_DIR)/Pods-Runner-checkManifestLockResult.txt",
+			);
+			runOnlyForDeploymentPostprocessing = 0;
+			shellPath = /bin/sh;
+			shellScript = "diff \"${PODS_PODFILE_DIR_PATH}/Podfile.lock\" \"${PODS_ROOT}/Manifest.lock\" > /dev/null\nif [ $? != 0 ] ; then\n    # print error to STDERR\n    echo \"error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation.\" >&2\n    exit 1\nfi\n# This output is used by Xcode 'outputs' to avoid re-running this script phase.\necho \"SUCCESS\" > \"${SCRIPT_OUTPUT_FILE_0}\"\n";
+			showEnvVarsInLog = 0;
+		};
 		3B06AD1E1E4923F5004D2608 /* Thin Binary */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
@@ -234,74 +256,50 @@
 			shellPath = /bin/sh;
 			shellScript = "/bin/sh \"$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh\" build";
 		};
-		977B29F6D11D7EB06287A662 /* [CP] Embed Pods Frameworks */ = {
+		D9FF42268352864A4C1EF1D7 /* [CP] Embed Pods Frameworks */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
 			);
 			inputPaths = (
 				"${PODS_ROOT}/Target Support Files/Pods-Runner/Pods-Runner-frameworks.sh",
-				"${BUILT_PRODUCTS_DIR}/FMDB/FMDB.framework",
 				"${BUILT_PRODUCTS_DIR}/MTBBarcodeScanner/MTBBarcodeScanner.framework",
 				"${BUILT_PRODUCTS_DIR}/Sentry/Sentry.framework",
 				"${BUILT_PRODUCTS_DIR}/TOCropViewController/TOCropViewController.framework",
 				"${BUILT_PRODUCTS_DIR}/fk_user_agent/fk_user_agent.framework",
-				"${BUILT_PRODUCTS_DIR}/flutter_keyboard_visibility/flutter_keyboard_visibility.framework",
+				"${BUILT_PRODUCTS_DIR}/flutter_secure_storage/flutter_secure_storage.framework",
 				"${BUILT_PRODUCTS_DIR}/image_cropper/image_cropper.framework",
 				"${BUILT_PRODUCTS_DIR}/image_picker/image_picker.framework",
+				"${BUILT_PRODUCTS_DIR}/iso_countries/iso_countries.framework",
 				"${BUILT_PRODUCTS_DIR}/package_info_plus/package_info_plus.framework",
+				"${BUILT_PRODUCTS_DIR}/path_provider_ios/path_provider_ios.framework",
 				"${BUILT_PRODUCTS_DIR}/qr_code_scanner/qr_code_scanner.framework",
 				"${BUILT_PRODUCTS_DIR}/sentry_flutter/sentry_flutter.framework",
-				"${BUILT_PRODUCTS_DIR}/share_plus/share_plus.framework",
-				"${BUILT_PRODUCTS_DIR}/shared_preferences/shared_preferences.framework",
-				"${BUILT_PRODUCTS_DIR}/sqflite/sqflite.framework",
-				"${BUILT_PRODUCTS_DIR}/url_launcher/url_launcher.framework",
+				"${BUILT_PRODUCTS_DIR}/shared_preferences_ios/shared_preferences_ios.framework",
+				"${BUILT_PRODUCTS_DIR}/url_launcher_ios/url_launcher_ios.framework",
 			);
 			name = "[CP] Embed Pods Frameworks";
 			outputPaths = (
-				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/FMDB.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/MTBBarcodeScanner.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/Sentry.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/TOCropViewController.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/fk_user_agent.framework",
-				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/flutter_keyboard_visibility.framework",
+				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/flutter_secure_storage.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/image_cropper.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/image_picker.framework",
+				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/iso_countries.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/package_info_plus.framework",
+				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/path_provider_ios.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/qr_code_scanner.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/sentry_flutter.framework",
-				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/share_plus.framework",
-				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/shared_preferences.framework",
-				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/sqflite.framework",
-				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/url_launcher.framework",
+				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/shared_preferences_ios.framework",
+				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/url_launcher_ios.framework",
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
 			shellScript = "\"${PODS_ROOT}/Target Support Files/Pods-Runner/Pods-Runner-frameworks.sh\"\n";
 			showEnvVarsInLog = 0;
 		};
-		9BFA9DD10FB8D1989DAF4B00 /* [CP] Check Pods Manifest.lock */ = {
-			isa = PBXShellScriptBuildPhase;
-			buildActionMask = 2147483647;
-			files = (
-			);
-			inputFileListPaths = (
-			);
-			inputPaths = (
-				"${PODS_PODFILE_DIR_PATH}/Podfile.lock",
-				"${PODS_ROOT}/Manifest.lock",
-			);
-			name = "[CP] Check Pods Manifest.lock";
-			outputFileListPaths = (
-			);
-			outputPaths = (
-				"$(DERIVED_FILE_DIR)/Pods-Runner-checkManifestLockResult.txt",
-			);
-			runOnlyForDeploymentPostprocessing = 0;
-			shellPath = /bin/sh;
-			shellScript = "diff \"${PODS_PODFILE_DIR_PATH}/Podfile.lock\" \"${PODS_ROOT}/Manifest.lock\" > /dev/null\nif [ $? != 0 ] ; then\n    # print error to STDERR\n    echo \"error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation.\" >&2\n    exit 1\nfi\n# This output is used by Xcode 'outputs' to avoid re-running this script phase.\necho \"SUCCESS\" > \"${SCRIPT_OUTPUT_FILE_0}\"\n";
-			showEnvVarsInLog = 0;
-		};
 /* End PBXShellScriptBuildPhase section */
 
 /* Begin PBXSourcesBuildPhase section */
diff --git a/packages/smooth_app/lib/pages/user_preferences_page.dart b/packages/smooth_app/lib/pages/user_preferences_page.dart
index 422e70e4f1d6..1940b5c918c3 100644
--- a/packages/smooth_app/lib/pages/user_preferences_page.dart
+++ b/packages/smooth_app/lib/pages/user_preferences_page.dart
@@ -10,6 +10,7 @@ import 'package:smooth_app/pages/settings_page.dart';
 import 'package:smooth_app/pages/user_management/login_page.dart';
 import 'package:smooth_app/themes/smooth_theme.dart';
 import 'package:smooth_app/widgets/attribute_button.dart';
+import 'package:smooth_app/widgets/attribute_helper.dart';
 
 /// Preferences page for attribute importances
 class UserPreferencesPage extends StatelessWidget {
@@ -130,7 +131,7 @@ class UserPreferencesPage extends StatelessWidget {
             Container(
               color: SmoothTheme.getColor(
                 Theme.of(context).colorScheme,
-                AttributeButton.WARNING_COLOR,
+                WARNING_COLOR,
                 ColorDestination.BUTTON_BACKGROUND,
               ),
               width: double.infinity,
@@ -141,7 +142,7 @@ class UserPreferencesPage extends StatelessWidget {
                 style: TextStyle(
                   color: SmoothTheme.getColor(
                     Theme.of(context).colorScheme,
-                    AttributeButton.WARNING_COLOR,
+                    WARNING_COLOR,
                     ColorDestination.BUTTON_FOREGROUND,
                   ),
                 ),
diff --git a/packages/smooth_app/lib/widgets/attribute_button.dart b/packages/smooth_app/lib/widgets/attribute_button.dart
index 7702e4eeef17..fe24919a8d51 100644
--- a/packages/smooth_app/lib/widgets/attribute_button.dart
+++ b/packages/smooth_app/lib/widgets/attribute_button.dart
@@ -1,14 +1,14 @@
 import 'package:flutter/material.dart';
 import 'package:flutter_gen/gen_l10n/app_localizations.dart';
-import 'package:flutter_svg/flutter_svg.dart';
 import 'package:openfoodfacts/model/Attribute.dart';
-import 'package:openfoodfacts/model/AttributeGroup.dart';
 import 'package:openfoodfacts/personalized_search/preference_importance.dart';
 import 'package:provider/provider.dart';
 import 'package:smooth_app/cards/category_cards/svg_cache.dart';
 import 'package:smooth_app/data_models/product_preferences.dart';
 import 'package:smooth_app/themes/smooth_theme.dart';
 import 'package:smooth_app/themes/theme_provider.dart';
+import 'package:smooth_app/widgets/attribute_dialog.dart';
+import 'package:smooth_app/widgets/attribute_helper.dart';
 import 'package:smooth_ui_library/buttons/smooth_simple_button.dart';
 import 'package:smooth_ui_library/dialogs/smooth_alert_dialog.dart';
 
@@ -22,28 +22,6 @@ class AttributeButton extends StatelessWidget {
   final Attribute attribute;
   final ProductPreferences productPreferences;
 
-  /// Importance ids we're dealing with in the project
-  ///
-  /// Note: for UX reasons we ignore "very important"
-  /// cf. https://github.com/openfoodfacts/smooth-app/issues/671
-  static const List<String> _importanceIds = <String>[
-    PreferenceImportance.ID_NOT_IMPORTANT,
-    PreferenceImportance.ID_IMPORTANT,
-    PreferenceImportance.ID_MANDATORY,
-  ];
-
-  static const MaterialColor WARNING_COLOR = Colors.deepOrange;
-
-  static const Map<String, String> _IMPORTANCE_SVG_ASSETS = <String, String>{
-    PreferenceImportance.ID_IMPORTANT: 'assets/data/important.svg',
-    PreferenceImportance.ID_MANDATORY: 'assets/data/mandatory.svg',
-  };
-
-  static const Map<String, double> _IMPORTANCE_OPACITIES = <String, double>{
-    PreferenceImportance.ID_IMPORTANT: .5,
-    PreferenceImportance.ID_MANDATORY: 1,
-  };
-
   @override
   Widget build(BuildContext context) {
     final ColorScheme colorScheme = Theme.of(context).colorScheme;
@@ -67,142 +45,25 @@ class AttributeButton extends StatelessWidget {
       ColorDestination.SURFACE_FOREGROUND,
     );
     final Color? foregroundColor =
-        _getForegroundColor(strongForegroundColor!, importanceId);
+        getForegroundColor(strongForegroundColor!, importanceId);
+    final AppLocalizations appLocalizations = AppLocalizations.of(context)!;
     return ListTile(
-      tileColor: _getBackgroundColor(strongBackgroundColor!, importanceId),
+      tileColor: getBackgroundColor(strongBackgroundColor!, importanceId),
       title: Text(attribute.name!, style: TextStyle(color: foregroundColor)),
       leading: SvgCache(attribute.iconUrl, width: 40),
-      trailing: _getIcon(importanceId, foregroundColor),
-      onTap: () async => onTap(
+      trailing: getIcon(importanceId, foregroundColor),
+      onTap: () async => showDialog<String>(
         context: context,
-        attributeId: attribute.id!,
-        productPreferences: productPreferences,
-        themeProvider: themeProvider,
-      ),
-    );
-  }
-
-  static Future<void> onTap({
-    required final BuildContext context,
-    required final String attributeId,
-    required final ProductPreferences productPreferences,
-    required final ThemeProvider themeProvider,
-  }) async {
-    final Attribute? attribute =
-        productPreferences.getReferenceAttribute(attributeId);
-    final ColorScheme colorScheme = Theme.of(context).colorScheme;
-    final AppLocalizations appLocalizations = AppLocalizations.of(context)!;
-    final String importanceId =
-        productPreferences.getImportanceIdForAttributeId(attributeId);
-    final MaterialColor materialColor =
-        SmoothTheme.getMaterialColor(themeProvider);
-    final Color? strongBackgroundColor = SmoothTheme.getColor(
-      colorScheme,
-      materialColor,
-      ColorDestination.SURFACE_BACKGROUND,
-    );
-    final Color? strongForegroundColor = SmoothTheme.getColor(
-      colorScheme,
-      materialColor,
-      ColorDestination.SURFACE_FOREGROUND,
-    );
-    final List<Widget> children = <Widget>[
-      ListTile(
-        leading: SvgCache(attribute!.iconUrl, width: 40),
-        title: Text(attribute.settingName!),
-      ),
-    ];
-    final AttributeGroup attributeGroup =
-        productPreferences.getAttributeGroup(attributeId);
-    if (attributeGroup.warning != null) {
-      children.add(
-        Container(
-          padding: const EdgeInsets.all(8.0),
-          color: SmoothTheme.getColor(
-            colorScheme,
-            WARNING_COLOR,
-            ColorDestination.BUTTON_BACKGROUND,
-          ),
-          width: double.infinity,
-          child: Text(
-            attributeGroup.warning!,
-            style: TextStyle(
-              color: SmoothTheme.getColor(
-                colorScheme,
-                WARNING_COLOR,
-                ColorDestination.BUTTON_FOREGROUND,
-              ),
+        builder: (final BuildContext context) => SmoothAlertDialog(
+          body: AttributeDialog(attribute.id!, productPreferences),
+          actions: <SmoothSimpleButton>[
+            SmoothSimpleButton(
+              text: appLocalizations.cancel,
+              onPressed: () => Navigator.pop(context),
             ),
-          ),
-        ),
-      );
-    }
-    for (final String item in _importanceIds) {
-      final Color? foregroundColor =
-          _getForegroundColor(strongForegroundColor!, item);
-      children.add(
-        ListTile(
-          tileColor: _getBackgroundColor(strongBackgroundColor!, item),
-          leading: importanceId == item
-              ? Icon(Icons.radio_button_checked, color: foregroundColor)
-              : Icon(Icons.radio_button_unchecked, color: foregroundColor),
-          title: Text(
-            productPreferences
-                .getPreferenceImportanceFromImportanceId(item)!
-                .name!,
-            style: TextStyle(color: foregroundColor),
-          ),
-          onTap: () => Navigator.pop<String>(context, item),
-          trailing: _getIcon(item, foregroundColor),
-        ),
-      );
-    }
-    final String? result = await showDialog<String>(
-      context: context,
-      builder: (final BuildContext context) => SmoothAlertDialog(
-        body: Column(
-          mainAxisAlignment: MainAxisAlignment.start,
-          crossAxisAlignment: CrossAxisAlignment.start,
-          children: children,
+          ],
         ),
-        actions: <SmoothSimpleButton>[
-          SmoothSimpleButton(
-            text: appLocalizations.cancel,
-            onPressed: () => Navigator.pop(context),
-          ),
-        ],
       ),
     );
-    if (result == null) {
-      return;
-    }
-    productPreferences.setImportance(attributeId, result);
-  }
-
-  static Widget? _getIcon(final String importanceId, final Color? color) {
-    final String? svgAsset = _IMPORTANCE_SVG_ASSETS[importanceId];
-    if (svgAsset == null) {
-      return null;
-    }
-    return SvgPicture.asset(svgAsset, color: color, height: 32);
   }
-
-  static Color? _getBackgroundColor(
-    final Color strongBackgroundColor,
-    final String importanceId,
-  ) {
-    final double? opacity = _IMPORTANCE_OPACITIES[importanceId];
-    if (opacity == null) {
-      return null;
-    }
-    return strongBackgroundColor.withOpacity(opacity);
-  }
-
-  static Color? _getForegroundColor(
-    final Color strongForegroundColor,
-    final String importanceId,
-  ) =>
-      importanceId == PreferenceImportance.ID_NOT_IMPORTANT
-          ? null
-          : strongForegroundColor;
 }
diff --git a/packages/smooth_app/lib/widgets/attribute_dialog.dart b/packages/smooth_app/lib/widgets/attribute_dialog.dart
new file mode 100644
index 000000000000..19472d785662
--- /dev/null
+++ b/packages/smooth_app/lib/widgets/attribute_dialog.dart
@@ -0,0 +1,115 @@
+import 'package:flutter/material.dart';
+import 'package:openfoodfacts/model/Attribute.dart';
+import 'package:openfoodfacts/model/AttributeGroup.dart';
+import 'package:openfoodfacts/personalized_search/preference_importance.dart';
+import 'package:provider/provider.dart';
+import 'package:smooth_app/cards/category_cards/svg_cache.dart';
+import 'package:smooth_app/data_models/product_preferences.dart';
+import 'package:smooth_app/themes/smooth_theme.dart';
+import 'package:smooth_app/themes/theme_provider.dart';
+import 'package:smooth_app/widgets/attribute_helper.dart';
+
+/// Vertical list of radio buttons used to set the importance of an attribute.
+///
+/// To be used in an alert dialog because it exits with `Navigator.pop`
+class AttributeDialog extends StatelessWidget {
+  const AttributeDialog(
+    this.attributeId,
+    this.productPreferences,
+  );
+
+  final String attributeId;
+  final ProductPreferences productPreferences;
+
+  /// Importance ids we're dealing with in the project
+  ///
+  /// Note: for UX reasons we ignore "very important"
+  /// cf. https://github.com/openfoodfacts/smooth-app/issues/671
+  static const List<String> _importanceIds = <String>[
+    PreferenceImportance.ID_NOT_IMPORTANT,
+    PreferenceImportance.ID_IMPORTANT,
+    PreferenceImportance.ID_MANDATORY,
+  ];
+
+  @override
+  Widget build(BuildContext context) {
+    final ThemeProvider themeProvider = context.watch<ThemeProvider>();
+    final Attribute? attribute =
+        productPreferences.getReferenceAttribute(attributeId);
+    final ColorScheme colorScheme = Theme.of(context).colorScheme;
+    final String importanceId =
+        productPreferences.getImportanceIdForAttributeId(attributeId);
+    final MaterialColor materialColor =
+        SmoothTheme.getMaterialColor(themeProvider);
+    final Color? strongBackgroundColor = SmoothTheme.getColor(
+      colorScheme,
+      materialColor,
+      ColorDestination.SURFACE_BACKGROUND,
+    );
+    final Color? strongForegroundColor = SmoothTheme.getColor(
+      colorScheme,
+      materialColor,
+      ColorDestination.SURFACE_FOREGROUND,
+    );
+    final List<Widget> children = <Widget>[
+      ListTile(
+        leading: SvgCache(attribute!.iconUrl, width: 40),
+        title: Text(attribute.settingName!),
+      ),
+    ];
+    final AttributeGroup attributeGroup =
+        productPreferences.getAttributeGroup(attributeId);
+    if (attributeGroup.warning != null) {
+      children.add(
+        Container(
+          padding: const EdgeInsets.all(8.0),
+          color: SmoothTheme.getColor(
+            colorScheme,
+            WARNING_COLOR,
+            ColorDestination.BUTTON_BACKGROUND,
+          ),
+          width: double.infinity,
+          child: Text(
+            attributeGroup.warning!,
+            style: TextStyle(
+              color: SmoothTheme.getColor(
+                colorScheme,
+                WARNING_COLOR,
+                ColorDestination.BUTTON_FOREGROUND,
+              ),
+            ),
+          ),
+        ),
+      );
+    }
+
+    for (final String item in _importanceIds) {
+      final Color? foregroundColor =
+          getForegroundColor(strongForegroundColor!, item);
+      children.add(
+        ListTile(
+          tileColor: getBackgroundColor(strongBackgroundColor!, item),
+          leading: importanceId == item
+              ? Icon(Icons.radio_button_checked, color: foregroundColor)
+              : Icon(Icons.radio_button_unchecked, color: foregroundColor),
+          title: Text(
+            productPreferences
+                .getPreferenceImportanceFromImportanceId(item)!
+                .name!,
+            style: TextStyle(color: foregroundColor),
+          ),
+          onTap: () {
+            productPreferences.setImportance(attribute.id!, item);
+            Navigator.pop(context);
+          },
+          trailing: getIcon(item, foregroundColor),
+        ),
+      );
+    }
+    return Column(
+      mainAxisAlignment: MainAxisAlignment.start,
+      crossAxisAlignment: CrossAxisAlignment.start,
+      children: children,
+    );
+  }
+}
diff --git a/packages/smooth_app/lib/widgets/attribute_helper.dart b/packages/smooth_app/lib/widgets/attribute_helper.dart
new file mode 100644
index 000000000000..f27e68450f2d
--- /dev/null
+++ b/packages/smooth_app/lib/widgets/attribute_helper.dart
@@ -0,0 +1,44 @@
+import 'package:flutter/material.dart';
+import 'package:flutter_svg/flutter_svg.dart';
+import 'package:openfoodfacts/personalized_search/preference_importance.dart';
+
+// Common values and methods for attribute display
+
+const MaterialColor WARNING_COLOR = Colors.deepOrange;
+
+const Map<String, String> _IMPORTANCE_SVG_ASSETS = <String, String>{
+  PreferenceImportance.ID_IMPORTANT: 'assets/data/important.svg',
+  PreferenceImportance.ID_MANDATORY: 'assets/data/mandatory.svg',
+};
+
+const Map<String, double> _IMPORTANCE_OPACITIES = <String, double>{
+  PreferenceImportance.ID_IMPORTANT: .5,
+  PreferenceImportance.ID_MANDATORY: 1,
+};
+
+Widget? getIcon(final String importanceId, final Color? color) {
+  final String? svgAsset = _IMPORTANCE_SVG_ASSETS[importanceId];
+  if (svgAsset == null) {
+    return null;
+  }
+  return SvgPicture.asset(svgAsset, color: color, height: 32);
+}
+
+Color? getBackgroundColor(
+  final Color strongBackgroundColor,
+  final String importanceId,
+) {
+  final double? opacity = _IMPORTANCE_OPACITIES[importanceId];
+  if (opacity == null) {
+    return null;
+  }
+  return strongBackgroundColor.withOpacity(opacity);
+}
+
+Color? getForegroundColor(
+  final Color strongForegroundColor,
+  final String importanceId,
+) =>
+    importanceId == PreferenceImportance.ID_NOT_IMPORTANT
+        ? null
+        : strongForegroundColor;
diff --git a/packages/smooth_app/pubspec.lock b/packages/smooth_app/pubspec.lock
index f5a9b577a3df..589f48dbd1ae 100644
--- a/packages/smooth_app/pubspec.lock
+++ b/packages/smooth_app/pubspec.lock
@@ -42,7 +42,7 @@ packages:
       name: async
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "2.8.2"
+    version: "2.8.1"
   boolean_selector:
     dependency: transitive
     description:
@@ -84,7 +84,7 @@ packages:
       name: characters
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "1.2.0"
+    version: "1.1.0"
   charcode:
     dependency: transitive
     description:
@@ -461,7 +461,7 @@ packages:
       name: matcher
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "0.12.11"
+    version: "0.12.10"
   matomo:
     dependency: "direct main"
     description:
@@ -851,7 +851,7 @@ packages:
       name: test_api
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "0.4.3"
+    version: "0.4.2"
   transparent_image:
     dependency: transitive
     description:
@@ -963,7 +963,7 @@ packages:
       name: vector_math
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "2.1.1"
+    version: "2.1.0"
   visibility_detector:
     dependency: "direct main"
     description:
diff --git a/packages/smooth_ui_library/example/pubspec.lock b/packages/smooth_ui_library/example/pubspec.lock
index 5b6eee6e0792..1834e606ff36 100644
--- a/packages/smooth_ui_library/example/pubspec.lock
+++ b/packages/smooth_ui_library/example/pubspec.lock
@@ -14,7 +14,7 @@ packages:
       name: async
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "2.8.2"
+    version: "2.8.1"
   boolean_selector:
     dependency: transitive
     description:
@@ -28,7 +28,7 @@ packages:
       name: characters
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "1.2.0"
+    version: "1.1.0"
   charcode:
     dependency: transitive
     description:
@@ -136,7 +136,7 @@ packages:
       name: matcher
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "0.12.11"
+    version: "0.12.10"
   meta:
     dependency: transitive
     description:
@@ -253,7 +253,7 @@ packages:
       name: test_api
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "0.4.3"
+    version: "0.4.2"
   typed_data:
     dependency: transitive
     description:
@@ -267,7 +267,7 @@ packages:
       name: vector_math
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "2.1.1"
+    version: "2.1.0"
   xml:
     dependency: transitive
     description:
diff --git a/packages/smooth_ui_library/pubspec.lock b/packages/smooth_ui_library/pubspec.lock
index 0162965c3f52..f52a8824e7f9 100644
--- a/packages/smooth_ui_library/pubspec.lock
+++ b/packages/smooth_ui_library/pubspec.lock
@@ -14,7 +14,7 @@ packages:
       name: async
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "2.8.2"
+    version: "2.8.1"
   boolean_selector:
     dependency: transitive
     description:
@@ -28,7 +28,7 @@ packages:
       name: characters
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "1.2.0"
+    version: "1.1.0"
   charcode:
     dependency: transitive
     description:
@@ -129,7 +129,7 @@ packages:
       name: matcher
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "0.12.11"
+    version: "0.12.10"
   meta:
     dependency: transitive
     description:
@@ -225,7 +225,7 @@ packages:
       name: test_api
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "0.4.3"
+    version: "0.4.2"
   typed_data:
     dependency: transitive
     description:
@@ -239,7 +239,7 @@ packages:
       name: vector_math
       url: "https://pub.dartlang.org"
     source: hosted
-    version: "2.1.1"
+    version: "2.1.0"
   xml:
     dependency: transitive
     description:
