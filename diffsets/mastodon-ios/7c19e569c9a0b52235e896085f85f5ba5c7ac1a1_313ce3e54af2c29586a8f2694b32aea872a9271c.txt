diff --git a/Mastodon.xcodeproj/project.pbxproj b/Mastodon.xcodeproj/project.pbxproj
index 8940bc4e39..ce2d2e55c8 100644
--- a/Mastodon.xcodeproj/project.pbxproj
+++ b/Mastodon.xcodeproj/project.pbxproj
@@ -10,6 +10,11 @@
 		2D04F42525C255B9003F936F /* APIService+PublicTimeline.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D04F42425C255B9003F936F /* APIService+PublicTimeline.swift */; };
 		2D152A8C25C295CC009AA50C /* TimelinePostView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D152A8B25C295CC009AA50C /* TimelinePostView.swift */; };
 		2D152A9225C2980C009AA50C /* UIFont.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D152A9125C2980C009AA50C /* UIFont.swift */; };
+		2D42FF6125C8177C004A627A /* ActiveLabel in Frameworks */ = {isa = PBXBuildFile; productRef = 2D42FF6025C8177C004A627A /* ActiveLabel */; };
+		2D42FF6B25C817D2004A627A /* MastodonContent.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D42FF6A25C817D2004A627A /* MastodonContent.swift */; };
+		2D42FF7E25C82218004A627A /* ActionToolBarContainer.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D42FF7D25C82218004A627A /* ActionToolBarContainer.swift */; };
+		2D42FF8525C8224F004A627A /* HitTestExpandedButton.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D42FF8425C8224F004A627A /* HitTestExpandedButton.swift */; };
+		2D42FF8F25C8228A004A627A /* UIButton.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D42FF8E25C8228A004A627A /* UIButton.swift */; };
 		2D46975E25C2A54100CF4AA9 /* NSLayoutConstraint.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D46975D25C2A54100CF4AA9 /* NSLayoutConstraint.swift */; };
 		2D46976425C2A71500CF4AA9 /* UIIamge.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D46976325C2A71500CF4AA9 /* UIIamge.swift */; };
 		2D61335825C188A000CAE157 /* APIService+Persist+Timeline.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D61335725C188A000CAE157 /* APIService+Persist+Timeline.swift */; };
@@ -26,7 +31,6 @@
 		2D927F0825C7E9A8004F19B8 /* Tag.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D927F0725C7E9A8004F19B8 /* Tag.swift */; };
 		2D927F0E25C7E9C9004F19B8 /* History.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D927F0D25C7E9C9004F19B8 /* History.swift */; };
 		2D927F1425C7EDD9004F19B8 /* Emoji.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D927F1325C7EDD9004F19B8 /* Emoji.swift */; };
-		2D9BB87B25C3FEF200678AB6 /* String.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2D9BB87A25C3FEF200678AB6 /* String.swift */; };
 		2DF123A725C3B0210020F248 /* ActiveLabel.swift in Sources */ = {isa = PBXBuildFile; fileRef = 2DF123A625C3B0210020F248 /* ActiveLabel.swift */; };
 		3533495136D843E85211E3E2 /* Pods_Mastodon_MastodonUITests.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = A1B4523A7981F1044DE89C21 /* Pods_Mastodon_MastodonUITests.framework */; };
 		5D526FE225BE9AC400460CB9 /* MastodonSDK in Frameworks */ = {isa = PBXBuildFile; productRef = 5D526FE125BE9AC400460CB9 /* MastodonSDK */; };
@@ -124,6 +128,10 @@
 		2D04F42425C255B9003F936F /* APIService+PublicTimeline.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = "APIService+PublicTimeline.swift"; sourceTree = "<group>"; };
 		2D152A8B25C295CC009AA50C /* TimelinePostView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = TimelinePostView.swift; sourceTree = "<group>"; };
 		2D152A9125C2980C009AA50C /* UIFont.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = UIFont.swift; sourceTree = "<group>"; };
+		2D42FF6A25C817D2004A627A /* MastodonContent.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = MastodonContent.swift; sourceTree = "<group>"; };
+		2D42FF7D25C82218004A627A /* ActionToolBarContainer.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ActionToolBarContainer.swift; sourceTree = "<group>"; };
+		2D42FF8425C8224F004A627A /* HitTestExpandedButton.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = HitTestExpandedButton.swift; sourceTree = "<group>"; };
+		2D42FF8E25C8228A004A627A /* UIButton.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = UIButton.swift; sourceTree = "<group>"; };
 		2D46975D25C2A54100CF4AA9 /* NSLayoutConstraint.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = NSLayoutConstraint.swift; sourceTree = "<group>"; };
 		2D46976325C2A71500CF4AA9 /* UIIamge.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = UIIamge.swift; sourceTree = "<group>"; };
 		2D61335725C188A000CAE157 /* APIService+Persist+Timeline.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = "APIService+Persist+Timeline.swift"; sourceTree = "<group>"; };
@@ -139,7 +147,6 @@
 		2D927F0725C7E9A8004F19B8 /* Tag.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Tag.swift; sourceTree = "<group>"; };
 		2D927F0D25C7E9C9004F19B8 /* History.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = History.swift; sourceTree = "<group>"; };
 		2D927F1325C7EDD9004F19B8 /* Emoji.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Emoji.swift; sourceTree = "<group>"; };
-		2D9BB87A25C3FEF200678AB6 /* String.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = String.swift; sourceTree = "<group>"; };
 		2DF123A625C3B0210020F248 /* ActiveLabel.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ActiveLabel.swift; sourceTree = "<group>"; };
 		2E1F6A67FDF9771D3E064FDC /* Pods-Mastodon.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-Mastodon.debug.xcconfig"; path = "Target Support Files/Pods-Mastodon/Pods-Mastodon.debug.xcconfig"; sourceTree = "<group>"; };
 		459EA4F43058CAB47719E963 /* Pods-Mastodon-MastodonUITests.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = "Pods-Mastodon-MastodonUITests.debug.xcconfig"; path = "Target Support Files/Pods-Mastodon-MastodonUITests/Pods-Mastodon-MastodonUITests.debug.xcconfig"; sourceTree = "<group>"; };
@@ -202,6 +209,7 @@
 			buildActionMask = 2147483647;
 			files = (
 				DB89BA0325C10FD0008580ED /* CoreDataStack.framework in Frameworks */,
+				2D42FF6125C8177C004A627A /* ActiveLabel in Frameworks */,
 				5D526FE225BE9AC400460CB9 /* MastodonSDK in Frameworks */,
 				2D61336925C18A4F00CAE157 /* AlamofireNetworkActivityIndicator in Frameworks */,
 				7A9135D4559750AF07CA9BE4 /* Pods_Mastodon.framework in Frameworks */,
@@ -264,6 +272,22 @@
 			path = Content;
 			sourceTree = "<group>";
 		};
+		2D42FF7C25C82207004A627A /* ToolBar */ = {
+			isa = PBXGroup;
+			children = (
+				2D42FF7D25C82218004A627A /* ActionToolBarContainer.swift */,
+			);
+			path = ToolBar;
+			sourceTree = "<group>";
+		};
+		2D42FF8325C82245004A627A /* Button */ = {
+			isa = PBXGroup;
+			children = (
+				2D42FF8425C8224F004A627A /* HitTestExpandedButton.swift */,
+			);
+			path = Button;
+			sourceTree = "<group>";
+		};
 		2D61335525C1886800CAE157 /* Service */ = {
 			isa = PBXGroup;
 			children = (
@@ -321,6 +345,8 @@
 		2D7631A525C1532D00929FB9 /* View */ = {
 			isa = PBXGroup;
 			children = (
+				2D42FF8325C82245004A627A /* Button */,
+				2D42FF7C25C82207004A627A /* ToolBar */,
 				2D152A8A25C295B8009AA50C /* Content */,
 				2D7631A625C1533800929FB9 /* TableviewCell */,
 			);
@@ -549,7 +575,8 @@
 				2D46975D25C2A54100CF4AA9 /* NSLayoutConstraint.swift */,
 				2D46976325C2A71500CF4AA9 /* UIIamge.swift */,
 				2DF123A625C3B0210020F248 /* ActiveLabel.swift */,
-				2D9BB87A25C3FEF200678AB6 /* String.swift */,
+				2D42FF6A25C817D2004A627A /* MastodonContent.swift */,
+				2D42FF8E25C8228A004A627A /* UIButton.swift */,
 			);
 			path = Extension;
 			sourceTree = "<group>";
@@ -590,6 +617,7 @@
 				DB3D0FF225BAA61700EAA174 /* AlamofireImage */,
 				5D526FE125BE9AC400460CB9 /* MastodonSDK */,
 				2D61336825C18A4F00CAE157 /* AlamofireNetworkActivityIndicator */,
+				2D42FF6025C8177C004A627A /* ActiveLabel */,
 			);
 			productName = Mastodon;
 			productReference = DB427DD225BAA00100D1B89D /* Mastodon.app */;
@@ -714,6 +742,7 @@
 			packageReferences = (
 				DB3D0FF125BAA61700EAA174 /* XCRemoteSwiftPackageReference "AlamofireImage" */,
 				2D61336725C18A4F00CAE157 /* XCRemoteSwiftPackageReference "AlamofireNetworkActivityIndicator" */,
+				2D42FF5F25C8177C004A627A /* XCRemoteSwiftPackageReference "ActiveLabel" */,
 			);
 			productRefGroup = DB427DD325BAA00100D1B89D /* Products */;
 			projectDirPath = "";
@@ -898,8 +927,9 @@
 				2D7631B325C159F700929FB9 /* Item.swift in Sources */,
 				2D61335E25C1894B00CAE157 /* APIService.swift in Sources */,
 				DB8AF53025C13561002E6C99 /* AppContext.swift in Sources */,
-				2D9BB87B25C3FEF200678AB6 /* String.swift in Sources */,
 				2D152A8C25C295CC009AA50C /* TimelinePostView.swift in Sources */,
+				2D42FF8525C8224F004A627A /* HitTestExpandedButton.swift in Sources */,
+				2D42FF8F25C8228A004A627A /* UIButton.swift in Sources */,
 				2D61335825C188A000CAE157 /* APIService+Persist+Timeline.swift in Sources */,
 				DB8AF52F25C13561002E6C99 /* DocumentStore.swift in Sources */,
 				2DF123A725C3B0210020F248 /* ActiveLabel.swift in Sources */,
@@ -907,6 +937,7 @@
 				2D46975E25C2A54100CF4AA9 /* NSLayoutConstraint.swift in Sources */,
 				2D46976425C2A71500CF4AA9 /* UIIamge.swift in Sources */,
 				DB8AF55D25C138B7002E6C99 /* UIViewController.swift in Sources */,
+				2D42FF7E25C82218004A627A /* ActionToolBarContainer.swift in Sources */,
 				DB8AF55025C13703002E6C99 /* MainTabBarController.swift in Sources */,
 				DB8AF54525C13647002E6C99 /* NeedsDependency.swift in Sources */,
 				2D76319F25C1521200929FB9 /* TimelineSection.swift in Sources */,
@@ -914,6 +945,7 @@
 				DB8AF54425C13647002E6C99 /* SceneCoordinator.swift in Sources */,
 				2D04F42525C255B9003F936F /* APIService+PublicTimeline.swift in Sources */,
 				2D76317D25C14DF500929FB9 /* PublicTimelineViewController+StatusProvider.swift in Sources */,
+				2D42FF6B25C817D2004A627A /* MastodonContent.swift in Sources */,
 				DB8AF52E25C13561002E6C99 /* ViewStateStore.swift in Sources */,
 				DB8AF55725C137A8002E6C99 /* HomeViewController.swift in Sources */,
 				2D76318325C14E8F00929FB9 /* PublicTimelineViewModel+Diffable.swift in Sources */,
@@ -1431,6 +1463,14 @@
 /* End XCConfigurationList section */
 
 /* Begin XCRemoteSwiftPackageReference section */
+		2D42FF5F25C8177C004A627A /* XCRemoteSwiftPackageReference "ActiveLabel" */ = {
+			isa = XCRemoteSwiftPackageReference;
+			repositoryURL = "https://github.com/TwidereProject/ActiveLabel.swift";
+			requirement = {
+				kind = upToNextMajorVersion;
+				minimumVersion = 3.0.0;
+			};
+		};
 		2D61336725C18A4F00CAE157 /* XCRemoteSwiftPackageReference "AlamofireNetworkActivityIndicator" */ = {
 			isa = XCRemoteSwiftPackageReference;
 			repositoryURL = "https://github.com/Alamofire/AlamofireNetworkActivityIndicator";
@@ -1450,6 +1490,11 @@
 /* End XCRemoteSwiftPackageReference section */
 
 /* Begin XCSwiftPackageProductDependency section */
+		2D42FF6025C8177C004A627A /* ActiveLabel */ = {
+			isa = XCSwiftPackageProductDependency;
+			package = 2D42FF5F25C8177C004A627A /* XCRemoteSwiftPackageReference "ActiveLabel" */;
+			productName = ActiveLabel;
+		};
 		2D61336825C18A4F00CAE157 /* AlamofireNetworkActivityIndicator */ = {
 			isa = XCSwiftPackageProductDependency;
 			package = 2D61336725C18A4F00CAE157 /* XCRemoteSwiftPackageReference "AlamofireNetworkActivityIndicator" */;
diff --git a/Mastodon.xcworkspace/xcshareddata/swiftpm/Package.resolved b/Mastodon.xcworkspace/xcshareddata/swiftpm/Package.resolved
index ce4ca455cb..bc75b28000 100644
--- a/Mastodon.xcworkspace/xcshareddata/swiftpm/Package.resolved
+++ b/Mastodon.xcworkspace/xcshareddata/swiftpm/Package.resolved
@@ -1,6 +1,15 @@
 {
   "object": {
     "pins": [
+      {
+        "package": "ActiveLabel",
+        "repositoryURL": "https://github.com/TwidereProject/ActiveLabel.swift",
+        "state": {
+          "branch": null,
+          "revision": "3d8115c992c44358eabbb21ffc4616f4d56028b1",
+          "version": "3.0.0"
+        }
+      },
       {
         "package": "Alamofire",
         "repositoryURL": "https://github.com/Alamofire/Alamofire.git",
diff --git a/Mastodon/Diffiable/Section/TimelineSection.swift b/Mastodon/Diffiable/Section/TimelineSection.swift
index 49345c1771..4e439ec2b6 100644
--- a/Mastodon/Diffiable/Section/TimelineSection.swift
+++ b/Mastodon/Diffiable/Section/TimelineSection.swift
@@ -45,10 +45,19 @@ extension TimelineSection {
         cell: TimelinePostTableViewCell,
         toot: Toot
     ) {
+        // set name username avatar
         cell.timelinePostView.nameLabel.text = toot.author.displayName
-        cell.timelinePostView.usernameLabel.text =  toot.author.username
-        cell.timelinePostView.avatarImageView.af.setImage(withURL: URL(string: toot.author.avatar)!)
+        cell.timelinePostView.usernameLabel.text = "@" + toot.author.username
+        cell.timelinePostView.avatarImageView.af.setImage(
+            withURL: URL(string: toot.author.avatar)!,
+            placeholderImage: UIImage.placeholder(color: .systemFill),
+            imageTransition: .crossDissolve(0.2)
+        )
+        // set text
         cell.timelinePostView.activeTextLabel.config(content: toot.content)
+        // set date
+        let createdAt = toot.createdAt
+        cell.timelinePostView.dateLabel.text = createdAt.shortTimeAgoSinceNow
     }
 }
 
diff --git a/Mastodon/Extension/ActiveLabel.swift b/Mastodon/Extension/ActiveLabel.swift
index 8423e8b974..6e08d72681 100644
--- a/Mastodon/Extension/ActiveLabel.swift
+++ b/Mastodon/Extension/ActiveLabel.swift
@@ -8,7 +8,7 @@
 import UIKit
 import Foundation
 import ActiveLabel
-
+import os.log
 
 extension ActiveLabel {
     
@@ -24,7 +24,7 @@ extension ActiveLabel {
         case .default:
 //            urlMaximumLength = 30
             font = .preferredFont(forTextStyle: .body)
-            textColor = UIColor.label.withAlphaComponent(0.8)
+            textColor = .white
         case .timelineHeaderView:
             font = .preferredFont(forTextStyle: .footnote)
             textColor = .secondaryLabel
@@ -40,9 +40,18 @@ extension ActiveLabel {
 }
 
 extension ActiveLabel {
-    func config(content:String) {
-        let html = content.replacingOccurrences(of: "</p><p>", with: "<br /><br />").replacingOccurrences(of: "<p>", with: "").replacingOccurrences(of: "</p>", with: "")
-        text = html.toPlainText()
+    func config(content: String) {
+        if let parseResult = try? TootContent.parse(toot: content) {
+            activeEntities.removeAll()
+            numberOfLines = 0
+            font = UIFont(name: "SFProText-Regular", size: 16)
+            textColor = .white
+            URLColor = .systemRed
+            mentionColor = .systemGreen
+            hashtagColor = .systemBlue
+            text = parseResult.trimmed
+            activeEntities = parseResult.activeEntities
+        }
     }
 }
 
diff --git a/Mastodon/Extension/MastodonContent.swift b/Mastodon/Extension/MastodonContent.swift
new file mode 100755
index 0000000000..3e6b072d67
--- /dev/null
+++ b/Mastodon/Extension/MastodonContent.swift
@@ -0,0 +1,302 @@
+//
+//  MastodonContent.swift
+//  Mastodon
+//
+//  Created by MainasuK Cirno on 2021/2/1.
+//
+
+import Foundation
+import Kanna
+import ActiveLabel
+
+enum TootContent {
+    
+    static func parse(toot: String) throws -> TootContent.ParseResult {
+        let toot = toot.replacingOccurrences(of: "<br/>", with: "\n")
+        let rootNode = try Node.parse(document: toot)
+        let text = String(rootNode.text)
+        
+        var activeEntities: [ActiveEntity] = []
+        let entities = TootContent.Node.entities(in: rootNode)
+        for entity in entities {
+            let range = NSRange(entity.text.startIndex..<entity.text.endIndex, in: text)
+            
+            switch entity.type {
+            case .url:
+                guard let href = entity.href else { continue }
+                activeEntities.append(ActiveEntity(range: range, type: .url(original: href, trimmed: entity.hrefEllipsis ?? href)))
+            case .hashtag:
+                var userInfo: [AnyHashable: Any] = [:]
+                entity.href.flatMap { href in
+                    userInfo["href"] = href
+                }
+                let hashtag = String(entity.text).deletingPrefix("#")
+                activeEntities.append(ActiveEntity(range: range, type: .hashtag(hashtag, userInfo: userInfo)))
+            case .mention:
+                var userInfo: [AnyHashable: Any] = [:]
+                entity.href.flatMap { href in
+                    userInfo["href"] = href
+                }
+                let mention = String(entity.text).deletingPrefix("@")
+                activeEntities.append(ActiveEntity(range: range, type: .mention(mention, userInfo: userInfo)))
+            default:
+                continue
+            }
+        }
+        
+        var trimmed = text
+        for activeEntity in activeEntities {
+            guard case .url = activeEntity.type else { continue }
+            TootContent.trimEntity(toot: &trimmed, activeEntity: activeEntity, activeEntities: activeEntities)
+        }
+
+        return ParseResult(
+            document: toot,
+            original: text,
+            trimmed: trimmed,
+            activeEntities: activeEntities
+        )
+    }
+    
+    static func trimEntity(toot: inout String, activeEntity: ActiveEntity, activeEntities: [ActiveEntity]) {
+        guard case let .url(original, trimmed, _) = activeEntity.type else { return }
+        guard let index = activeEntities.firstIndex(where: { $0.range == activeEntity.range }) else { return }
+        guard let range = Range(activeEntity.range, in: toot) else { return }
+        toot.replaceSubrange(range, with: trimmed)
+        
+        let offset = trimmed.count - original.count
+        activeEntity.range.length += offset
+        
+        let moveActiveEntities = Array(activeEntities[index...].dropFirst())
+        for moveActiveEntity in moveActiveEntities {
+            moveActiveEntity.range.location += offset
+        }
+    }
+        
+}
+
+extension String {
+    // ref: https://www.hackingwithswift.com/example-code/strings/how-to-remove-a-prefix-from-a-string
+    func deletingPrefix(_ prefix: String) -> String {
+        guard self.hasPrefix(prefix) else { return self }
+        return String(self.dropFirst(prefix.count))
+    }
+}
+
+extension TootContent {
+    struct ParseResult {
+        let document: String
+        let original: String
+        let trimmed: String
+        let activeEntities: [ActiveEntity]
+    }
+}
+
+
+extension TootContent {
+    
+    class Node {
+        
+        let level: Int
+        let type: Type?
+        
+        // substring text
+        let text: Substring
+        
+        // range in parent String
+        var range: Range<String.Index> {
+            return text.startIndex..<text.endIndex
+        }
+        
+        let tagName: String?
+        let classNames: Set<String>
+        let href: String?
+        let hrefEllipsis: String?
+        
+        let children: [Node]
+        
+        init(
+            level: Int,
+            text: Substring,
+            tagName: String?,
+            className: String?,
+            href: String?,
+            hrefEllipsis: String?,
+            children: [Node]
+        ) {
+            let _classNames: Set<String> = {
+                guard let className = className else { return Set() }
+                return Set(className.components(separatedBy: " "))
+            }()
+            let _type: Type? = {
+                if tagName == "a" && !_classNames.contains("mention") {
+                    return .url
+                }
+                
+                if _classNames.contains("mention") {
+                    if _classNames.contains("u-url") {
+                        return .mention
+                    } else if _classNames.contains("hashtag") {
+                        return .hashtag
+                    }
+                }
+                
+                return nil
+            }()
+            self.level = level
+            self.type = _type
+            self.text = text
+            self.tagName = tagName
+            self.classNames = _classNames
+            self.href = href
+            self.hrefEllipsis = hrefEllipsis
+            self.children = children
+        }
+        
+        static func parse(document: String) throws -> TootContent.Node {
+            let html = try HTML(html: document, encoding: .utf8)
+            let body = html.body ?? nil
+            let text = body?.text ?? ""
+            let level = 0
+            let children: [TootContent.Node] = body.flatMap { body in
+                return Node.parse(element: body, parentText: text[...], parentLevel: level + 1)
+            } ?? []
+            let node = Node(
+                level: level,
+                text: text[...],
+                tagName: body?.tagName,
+                className: body?.className,
+                href: nil,
+                hrefEllipsis: nil,
+                children: children
+            )
+            
+            return node
+        }
+        
+        static func parse(element: XMLElement, parentText: Substring, parentLevel: Int) -> [Node] {
+            let parent = element
+            let scanner = Scanner(string: String(parentText))
+            scanner.charactersToBeSkipped = .none
+            
+            var element = parent.at_css(":first-child")
+            var children: [Node] = []
+            
+            while let _element = element {
+                let _text = _element.text ?? ""
+                
+                // scan element text
+                _ = scanner.scanUpToString(_text)
+                let startIndexOffset = scanner.currentIndex.utf16Offset(in: scanner.string)
+                guard scanner.scanString(_text) != nil else {
+                    assertionFailure()
+                    continue
+                }
+                let endIndexOffset = scanner.currentIndex.utf16Offset(in: scanner.string)
+                
+                // locate substring
+                let startIndex = parentText.utf16.index(parentText.utf16.startIndex, offsetBy: startIndexOffset)
+                let endIndex = parentText.utf16.index(parentText.utf16.startIndex, offsetBy: endIndexOffset)
+                let text = Substring(parentText.utf16[startIndex..<endIndex])
+                
+                let href = _element["href"]
+                let hrefEllipsis = href.flatMap { _ in _element.at_css(".ellipsis")?.text }
+                
+                let level = parentLevel + 1
+                let node = Node(
+                    level: level,
+                    text: text,
+                    tagName: _element.tagName,
+                    className: _element.className,
+                    href: href,
+                    hrefEllipsis: hrefEllipsis,
+                    children: Node.parse(element: _element, parentText: text, parentLevel: level + 1)
+                )
+                children.append(node)
+                element = _element.nextSibling
+            }
+            
+            return children
+        }
+        
+        static func collect(
+            node: Node,
+            where predicate: (Node) -> Bool
+        ) -> [Node] {
+            var nodes: [Node] = []
+            
+            if predicate(node) {
+                nodes.append(node)
+            }
+            
+            for child in node.children {
+                nodes.append(contentsOf: Node.collect(node: child, where: predicate))
+            }
+            return nodes
+        }
+        
+    }
+    
+}
+
+extension TootContent.Node {
+    enum `Type` {
+        case url
+        case mention
+        case hashtag
+    }
+    
+    static func entities(in node: TootContent.Node) -> [TootContent.Node] {
+        return TootContent.Node.collect(node: node) { node in node.type != nil }
+    }
+    
+    static func hashtags(in node: TootContent.Node) -> [TootContent.Node] {
+        return TootContent.Node.collect(node: node) { node in node.type == .hashtag }
+    }
+    
+    static func mentions(in node: TootContent.Node) -> [TootContent.Node] {
+        return TootContent.Node.collect(node: node) { node in node.type == .mention }
+    }
+    
+    static func urls(in node: TootContent.Node) -> [TootContent.Node] {
+        return TootContent.Node.collect(node: node) { node in node.type == .url }
+    }
+    
+}
+
+extension TootContent.Node: CustomDebugStringConvertible {
+    var debugDescription: String {
+        let linkInfo: String = {
+            switch (href, hrefEllipsis) {
+            case (nil, nil):
+                return ""
+            case (let href, let hrefEllipsis):
+                return "(\(href ?? "nil") - \(hrefEllipsis ?? "nil"))"
+            }
+        }()
+        let classNamesInfo: String = {
+            guard !classNames.isEmpty else { return "" }
+            let names = Array(classNames)
+                .sorted()
+                .joined(separator: ", ")
+            return "@[\(names)]"
+        }()
+        let nodeDescription = String(
+            format: "<%@>%@%@: %@",
+            tagName ?? "",
+            classNamesInfo,
+            linkInfo,
+            String(text)
+        )
+        guard !children.isEmpty else {
+            return nodeDescription
+        }
+        
+        let indent = Array(repeating: "  ", count: level).joined()
+        let childrenDescription = children
+            .map { indent + $0.debugDescription }
+            .joined(separator: "\n")
+        
+        return nodeDescription + "\n" + childrenDescription
+    }
+}
diff --git a/Mastodon/Extension/String.swift b/Mastodon/Extension/String.swift
deleted file mode 100644
index b583d3f694..0000000000
--- a/Mastodon/Extension/String.swift
+++ /dev/null
@@ -1,39 +0,0 @@
-//
-//  String.swift
-//  Mastodon
-//
-//  Created by sxiaojian on 2021/1/29.
-//
-
-import Foundation
-extension String {
-    public func pregReplace(pattern: String, with: String, options: NSRegularExpression.Options = []) -> String {
-        // swiftlint:disable force_try
-        let regex = try! NSRegularExpression(pattern: pattern, options: options)
-        return regex.stringByReplacingMatches(in: self, options: [], range: NSRange(location: 0, length: nsLength), withTemplate: with)
-    }
-}
-extension String {
-    public var nsLength: Int {
-        let string_NS = self as NSString
-        return string_NS.length
-    }
-}
-extension String {
-    func toPlainText() -> String {
-        return self.pregReplace(pattern: "<br.+?>", with: "\n")
-            .replacingOccurrences(of: "</p><p>", with: "\n\n")
-            .pregReplace(pattern: "<.+?>", with: "")
-            .replacingOccurrences(of: "&lt;", with: "<")
-            .replacingOccurrences(of: "&gt;", with: ">")
-            .replacingOccurrences(of: "&apos;", with: "'")
-            .replacingOccurrences(of: "&quot;", with: "\"")
-            .replacingOccurrences(of: "&amp;", with: "&")
-    }
-}
-extension String {
-    func string(in nsrange: NSRange) -> String? {
-        guard let range = Range(nsrange, in: self) else { return nil }
-        return String(self[range])
-    }
-}
diff --git a/Mastodon/Extension/UIButton.swift b/Mastodon/Extension/UIButton.swift
new file mode 100644
index 0000000000..916ad222da
--- /dev/null
+++ b/Mastodon/Extension/UIButton.swift
@@ -0,0 +1,45 @@
+//
+//  UIButton.swift
+//  Mastodon
+//
+//  Created by sxiaojian on 2021/2/1.
+//
+
+import UIKit
+
+extension UIButton {
+    func setInsets(
+        forContentPadding contentPadding: UIEdgeInsets,
+        imageTitlePadding: CGFloat
+    ) {
+        switch UIApplication.shared.userInterfaceLayoutDirection {
+        case .rightToLeft:
+            self.contentEdgeInsets = UIEdgeInsets(
+                top: contentPadding.top,
+                left: contentPadding.left + imageTitlePadding,
+                bottom: contentPadding.bottom,
+                right: contentPadding.right
+            )
+            self.titleEdgeInsets = UIEdgeInsets(
+                top: 0,
+                left: -imageTitlePadding,
+                bottom: 0,
+                right: imageTitlePadding
+            )
+        default:
+            self.contentEdgeInsets = UIEdgeInsets(
+                top: contentPadding.top,
+                left: contentPadding.left,
+                bottom: contentPadding.bottom,
+                right: contentPadding.right + imageTitlePadding
+            )
+            self.titleEdgeInsets = UIEdgeInsets(
+                top: 0,
+                left: imageTitlePadding,
+                bottom: 0,
+                right: -imageTitlePadding
+            )
+        }
+    }
+}
+
diff --git a/Mastodon/Generated/Assets.swift b/Mastodon/Generated/Assets.swift
index 62a06accc7..8b798ab710 100644
--- a/Mastodon/Generated/Assets.swift
+++ b/Mastodon/Generated/Assets.swift
@@ -12,6 +12,8 @@
 // Deprecated typealiases
 @available(*, deprecated, renamed: "ColorAsset.Color", message: "This typealias will be removed in SwiftGen 7.0")
 internal typealias AssetColorTypeAlias = ColorAsset.Color
+@available(*, deprecated, renamed: "ImageAsset.Image", message: "This typealias will be removed in SwiftGen 7.0")
+internal typealias AssetImageTypeAlias = ImageAsset.Image
 
 // swiftlint:disable superfluous_disable_command file_length implicit_return
 
@@ -20,6 +22,27 @@ internal typealias AssetColorTypeAlias = ColorAsset.Color
 // swiftlint:disable identifier_name line_length nesting type_body_length type_name
 internal enum Asset {
   internal static let accentColor = ColorAsset(name: "AccentColor")
+  internal enum Colors {
+    internal static let likeOrange = ColorAsset(name: "Colors/like.orange")
+    internal static let tootDark = ColorAsset(name: "Colors/toot.dark")
+    internal static let tootGray = ColorAsset(name: "Colors/toot.gray")
+    internal static let tootWhite = ColorAsset(name: "Colors/toot.white")
+  }
+  internal enum ToolBar {
+    internal static let bookmark = ImageAsset(name: "ToolBar/bookmark")
+    internal static let lock = ImageAsset(name: "ToolBar/lock")
+    internal static let more = ImageAsset(name: "ToolBar/more")
+    internal static let reply = ImageAsset(name: "ToolBar/reply")
+    internal static let retoot = ImageAsset(name: "ToolBar/retoot")
+    internal static let star = ImageAsset(name: "ToolBar/star")
+  }
+  internal enum TootTimeline {
+    internal static let email = ImageAsset(name: "TootTimeline/email")
+    internal static let global = ImageAsset(name: "TootTimeline/global")
+    internal static let lock = ImageAsset(name: "TootTimeline/lock")
+    internal static let textlock = ImageAsset(name: "TootTimeline/textlock")
+    internal static let unlock = ImageAsset(name: "TootTimeline/unlock")
+  }
 }
 // swiftlint:enable identifier_name line_length nesting type_body_length type_name
 
@@ -61,6 +84,47 @@ internal extension ColorAsset.Color {
   }
 }
 
+internal struct ImageAsset {
+  internal fileprivate(set) var name: String
+
+  #if os(macOS)
+  internal typealias Image = NSImage
+  #elseif os(iOS) || os(tvOS) || os(watchOS)
+  internal typealias Image = UIImage
+  #endif
+
+  internal var image: Image {
+    let bundle = BundleToken.bundle
+    #if os(iOS) || os(tvOS)
+    let image = Image(named: name, in: bundle, compatibleWith: nil)
+    #elseif os(macOS)
+    let name = NSImage.Name(self.name)
+    let image = (bundle == .main) ? NSImage(named: name) : bundle.image(forResource: name)
+    #elseif os(watchOS)
+    let image = Image(named: name)
+    #endif
+    guard let result = image else {
+      fatalError("Unable to load image asset named \(name).")
+    }
+    return result
+  }
+}
+
+internal extension ImageAsset.Image {
+  @available(macOS, deprecated,
+    message: "This initializer is unsafe on macOS, please use the ImageAsset.image property")
+  convenience init?(asset: ImageAsset) {
+    #if os(iOS) || os(tvOS)
+    let bundle = BundleToken.bundle
+    self.init(named: asset.name, in: bundle, compatibleWith: nil)
+    #elseif os(macOS)
+    self.init(named: NSImage.Name(asset.name))
+    #elseif os(watchOS)
+    self.init(named: asset.name)
+    #endif
+  }
+}
+
 // swiftlint:disable convenience_type
 private final class BundleToken {
   static let bundle: Bundle = {
diff --git a/Mastodon/Resources/Assets.xcassets/Colors/Contents.json b/Mastodon/Resources/Assets.xcassets/Colors/Contents.json
new file mode 100644
index 0000000000..6e965652df
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/Colors/Contents.json
@@ -0,0 +1,9 @@
+{
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  },
+  "properties" : {
+    "provides-namespace" : true
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/Colors/Toot.Dark.colorset/Contents.json b/Mastodon/Resources/Assets.xcassets/Colors/Toot.Dark.colorset/Contents.json
new file mode 100644
index 0000000000..ca15c25d77
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/Colors/Toot.Dark.colorset/Contents.json
@@ -0,0 +1,38 @@
+{
+  "colors" : [
+    {
+      "color" : {
+        "color-space" : "extended-srgb",
+        "components" : {
+          "alpha" : "1.000",
+          "blue" : "55",
+          "green" : "45",
+          "red" : "41"
+        }
+      },
+      "idiom" : "universal"
+    },
+    {
+      "appearances" : [
+        {
+          "appearance" : "luminosity",
+          "value" : "dark"
+        }
+      ],
+      "color" : {
+        "color-space" : "srgb",
+        "components" : {
+          "alpha" : "1.000",
+          "blue" : "55",
+          "green" : "45",
+          "red" : "41"
+        }
+      },
+      "idiom" : "universal"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/Colors/Toot.Gray.colorset/Contents.json b/Mastodon/Resources/Assets.xcassets/Colors/Toot.Gray.colorset/Contents.json
new file mode 100644
index 0000000000..d06ba8456e
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/Colors/Toot.Gray.colorset/Contents.json
@@ -0,0 +1,38 @@
+{
+  "colors" : [
+    {
+      "color" : {
+        "color-space" : "srgb",
+        "components" : {
+          "alpha" : "1.000",
+          "blue" : "132",
+          "green" : "105",
+          "red" : "96"
+        }
+      },
+      "idiom" : "universal"
+    },
+    {
+      "appearances" : [
+        {
+          "appearance" : "luminosity",
+          "value" : "dark"
+        }
+      ],
+      "color" : {
+        "color-space" : "srgb",
+        "components" : {
+          "alpha" : "1.000",
+          "blue" : "132",
+          "green" : "105",
+          "red" : "96"
+        }
+      },
+      "idiom" : "universal"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/Colors/Toot.White.colorset/Contents.json b/Mastodon/Resources/Assets.xcassets/Colors/Toot.White.colorset/Contents.json
new file mode 100644
index 0000000000..43e2bc5878
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/Colors/Toot.White.colorset/Contents.json
@@ -0,0 +1,41 @@
+{
+  "colors" : [
+    {
+      "color" : {
+        "color-space" : "srgb",
+        "components" : {
+          "alpha" : "1.000",
+          "blue" : "1.000",
+          "green" : "1.000",
+          "red" : "1.000"
+        }
+      },
+      "idiom" : "universal"
+    },
+    {
+      "appearances" : [
+        {
+          "appearance" : "luminosity",
+          "value" : "dark"
+        }
+      ],
+      "color" : {
+        "color-space" : "srgb",
+        "components" : {
+          "alpha" : "1.000",
+          "blue" : "1.000",
+          "green" : "1.000",
+          "red" : "1.000"
+        }
+      },
+      "idiom" : "universal"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  },
+  "properties" : {
+    "localizable" : true
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/Colors/like.orange.colorset/Contents.json b/Mastodon/Resources/Assets.xcassets/Colors/like.orange.colorset/Contents.json
new file mode 100644
index 0000000000..b50f8fa6ce
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/Colors/like.orange.colorset/Contents.json
@@ -0,0 +1,38 @@
+{
+  "colors" : [
+    {
+      "color" : {
+        "color-space" : "srgb",
+        "components" : {
+          "alpha" : "1.000",
+          "blue" : "10",
+          "green" : "159",
+          "red" : "255"
+        }
+      },
+      "idiom" : "universal"
+    },
+    {
+      "appearances" : [
+        {
+          "appearance" : "luminosity",
+          "value" : "dark"
+        }
+      ],
+      "color" : {
+        "color-space" : "srgb",
+        "components" : {
+          "alpha" : "1.000",
+          "blue" : "10",
+          "green" : "159",
+          "red" : "255"
+        }
+      },
+      "idiom" : "universal"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/Contents.json b/Mastodon/Resources/Assets.xcassets/ToolBar/Contents.json
new file mode 100644
index 0000000000..6e965652df
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/ToolBar/Contents.json
@@ -0,0 +1,9 @@
+{
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  },
+  "properties" : {
+    "provides-namespace" : true
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/bookmark.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/ToolBar/bookmark.imageset/Contents.json
new file mode 100644
index 0000000000..4a79584faf
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/ToolBar/bookmark.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "bookmark.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/bookmark.imageset/bookmark.pdf b/Mastodon/Resources/Assets.xcassets/ToolBar/bookmark.imageset/bookmark.pdf
new file mode 100644
index 0000000000..846a6e5721
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/ToolBar/bookmark.imageset/bookmark.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/lock.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/ToolBar/lock.imageset/Contents.json
new file mode 100644
index 0000000000..fe86d28551
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/ToolBar/lock.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "lock.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/lock.imageset/lock.pdf b/Mastodon/Resources/Assets.xcassets/ToolBar/lock.imageset/lock.pdf
new file mode 100644
index 0000000000..3aabb0bd0b
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/ToolBar/lock.imageset/lock.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/more.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/ToolBar/more.imageset/Contents.json
new file mode 100644
index 0000000000..d6d5bc04d1
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/ToolBar/more.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "more.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/more.imageset/more.pdf b/Mastodon/Resources/Assets.xcassets/ToolBar/more.imageset/more.pdf
new file mode 100644
index 0000000000..93abdd80a9
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/ToolBar/more.imageset/more.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/reply.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/ToolBar/reply.imageset/Contents.json
new file mode 100644
index 0000000000..37b4fcb418
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/ToolBar/reply.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "reply all.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/reply.imageset/reply all.pdf b/Mastodon/Resources/Assets.xcassets/ToolBar/reply.imageset/reply all.pdf
new file mode 100644
index 0000000000..a23ce83344
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/ToolBar/reply.imageset/reply all.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/retoot.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/ToolBar/retoot.imageset/Contents.json
new file mode 100644
index 0000000000..04488ee0af
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/ToolBar/retoot.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "retoot.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/retoot.imageset/retoot.pdf b/Mastodon/Resources/Assets.xcassets/ToolBar/retoot.imageset/retoot.pdf
new file mode 100644
index 0000000000..7cce18192e
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/ToolBar/retoot.imageset/retoot.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/star.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/ToolBar/star.imageset/Contents.json
new file mode 100644
index 0000000000..80fb0f24a9
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/ToolBar/star.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "star.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/ToolBar/star.imageset/star.pdf b/Mastodon/Resources/Assets.xcassets/ToolBar/star.imageset/star.pdf
new file mode 100644
index 0000000000..b95a8f64ec
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/ToolBar/star.imageset/star.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/Contents.json b/Mastodon/Resources/Assets.xcassets/TootTimeline/Contents.json
new file mode 100644
index 0000000000..6e965652df
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/TootTimeline/Contents.json
@@ -0,0 +1,9 @@
+{
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  },
+  "properties" : {
+    "provides-namespace" : true
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/Global.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/TootTimeline/Global.imageset/Contents.json
new file mode 100644
index 0000000000..cc2565e2ac
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/TootTimeline/Global.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "globe-americas.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/Global.imageset/globe-americas.pdf b/Mastodon/Resources/Assets.xcassets/TootTimeline/Global.imageset/globe-americas.pdf
new file mode 100644
index 0000000000..623ec96914
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/TootTimeline/Global.imageset/globe-americas.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/Textlock.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/TootTimeline/Textlock.imageset/Contents.json
new file mode 100644
index 0000000000..05f0e9c975
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/TootTimeline/Textlock.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "Textlock.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/Textlock.imageset/Textlock.pdf b/Mastodon/Resources/Assets.xcassets/TootTimeline/Textlock.imageset/Textlock.pdf
new file mode 100644
index 0000000000..0aba1b6500
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/TootTimeline/Textlock.imageset/Textlock.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/email.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/TootTimeline/email.imageset/Contents.json
new file mode 100644
index 0000000000..0604f1eff1
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/TootTimeline/email.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "icon_email.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/email.imageset/icon_email.pdf b/Mastodon/Resources/Assets.xcassets/TootTimeline/email.imageset/icon_email.pdf
new file mode 100644
index 0000000000..4114c2dcca
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/TootTimeline/email.imageset/icon_email.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/lock.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/TootTimeline/lock.imageset/Contents.json
new file mode 100644
index 0000000000..c83be324a1
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/TootTimeline/lock.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "Iconlock.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/lock.imageset/Iconlock.pdf b/Mastodon/Resources/Assets.xcassets/TootTimeline/lock.imageset/Iconlock.pdf
new file mode 100644
index 0000000000..235e9242ae
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/TootTimeline/lock.imageset/Iconlock.pdf differ
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/unlock.imageset/Contents.json b/Mastodon/Resources/Assets.xcassets/TootTimeline/unlock.imageset/Contents.json
new file mode 100644
index 0000000000..372e28767e
--- /dev/null
+++ b/Mastodon/Resources/Assets.xcassets/TootTimeline/unlock.imageset/Contents.json
@@ -0,0 +1,21 @@
+{
+  "images" : [
+    {
+      "filename" : "Iconunlock.pdf",
+      "idiom" : "universal",
+      "scale" : "1x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "2x"
+    },
+    {
+      "idiom" : "universal",
+      "scale" : "3x"
+    }
+  ],
+  "info" : {
+    "author" : "xcode",
+    "version" : 1
+  }
+}
diff --git a/Mastodon/Resources/Assets.xcassets/TootTimeline/unlock.imageset/Iconunlock.pdf b/Mastodon/Resources/Assets.xcassets/TootTimeline/unlock.imageset/Iconunlock.pdf
new file mode 100644
index 0000000000..09d2143d56
Binary files /dev/null and b/Mastodon/Resources/Assets.xcassets/TootTimeline/unlock.imageset/Iconunlock.pdf differ
diff --git a/Mastodon/Scene/PublicTimeline/PublicTimelineViewController.swift b/Mastodon/Scene/PublicTimeline/PublicTimelineViewController.swift
index 251b98451e..6ade6bceb7 100644
--- a/Mastodon/Scene/PublicTimeline/PublicTimelineViewController.swift
+++ b/Mastodon/Scene/PublicTimeline/PublicTimelineViewController.swift
@@ -42,7 +42,7 @@ extension PublicTimelineViewController {
         
         tableView.translatesAutoresizingMaskIntoConstraints = false
         view.addSubview(tableView)
-        tableView.backgroundColor = .systemBackground
+        tableView.backgroundColor = Asset.Colors.tootDark.color
         NSLayoutConstraint.activate([
             tableView.topAnchor.constraint(equalTo: view.topAnchor),
             tableView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
@@ -71,7 +71,7 @@ extension PublicTimelineViewController {
                 }
             } receiveValue: { response in
                 let tootsIDs = response.value.map { $0.id }
-                self.viewModel.tweetIDs.value = tootsIDs
+                self.viewModel.tootIDs.value = tootsIDs
             }
             .store(in: &viewModel.disposeBag)
     }
diff --git a/Mastodon/Scene/PublicTimeline/PublicTimelineViewModel+Diffable.swift b/Mastodon/Scene/PublicTimeline/PublicTimelineViewModel+Diffable.swift
index 575884ce60..c2ee8e5db5 100644
--- a/Mastodon/Scene/PublicTimeline/PublicTimelineViewModel+Diffable.swift
+++ b/Mastodon/Scene/PublicTimeline/PublicTimelineViewModel+Diffable.swift
@@ -36,7 +36,7 @@ extension PublicTimelineViewModel: NSFetchedResultsControllerDelegate {
     func controller(_ controller: NSFetchedResultsController<NSFetchRequestResult>, didChangeContentWith snapshot: NSDiffableDataSourceSnapshotReference) {
         os_log("%{public}s[%{public}ld], %{public}s", ((#file as NSString).lastPathComponent), #line, #function)
         
-        let indexes = tweetIDs.value
+        let indexes = tootIDs.value
         let toots = fetchedResultsController.fetchedObjects ?? []
         guard toots.count == indexes.count else { return }
         
diff --git a/Mastodon/Scene/PublicTimeline/PublicTimelineViewModel.swift b/Mastodon/Scene/PublicTimeline/PublicTimelineViewModel.swift
index 2e43bd6d2f..2150bb25b0 100644
--- a/Mastodon/Scene/PublicTimeline/PublicTimelineViewModel.swift
+++ b/Mastodon/Scene/PublicTimeline/PublicTimelineViewModel.swift
@@ -27,7 +27,7 @@ class PublicTimelineViewModel: NSObject {
     // output
     var diffableDataSource: UITableViewDiffableDataSource<TimelineSection, Item>?
 
-    let tweetIDs = CurrentValueSubject<[String], Never>([])
+    let tootIDs = CurrentValueSubject<[String], Never>([])
     let items = CurrentValueSubject<[Item], Never>([])
     var cellFrameCache = NSCache<NSNumber, NSValue>()
     
@@ -67,7 +67,7 @@ class PublicTimelineViewModel: NSObject {
             }
             .store(in: &disposeBag)
         
-        tweetIDs
+        tootIDs
             .receive(on: DispatchQueue.main)
             .sink { [weak self] ids in
                 guard let self = self else { return }
diff --git a/Mastodon/Scene/Share/View/Button/HitTestExpandedButton.swift b/Mastodon/Scene/Share/View/Button/HitTestExpandedButton.swift
new file mode 100644
index 0000000000..f56e7e7ee0
--- /dev/null
+++ b/Mastodon/Scene/Share/View/Button/HitTestExpandedButton.swift
@@ -0,0 +1,18 @@
+//
+//  HitTestExpandedButton.swift
+//  Mastodon
+//
+//  Created by sxiaojian on 2021/2/1.
+//
+
+import UIKit
+
+final class HitTestExpandedButton: UIButton {
+    
+    var expandEdgeInsets = UIEdgeInsets(top: -10, left: -10, bottom: -10, right: -10)
+    
+    override func point(inside point: CGPoint, with event: UIEvent?) -> Bool {
+        return bounds.inset(by: expandEdgeInsets).contains(point)
+    }
+    
+}
diff --git a/Mastodon/Scene/Share/View/Content/TimelinePostView.swift b/Mastodon/Scene/Share/View/Content/TimelinePostView.swift
index 44443361c3..e75371a40b 100644
--- a/Mastodon/Scene/Share/View/Content/TimelinePostView.swift
+++ b/Mastodon/Scene/Share/View/Content/TimelinePostView.swift
@@ -13,33 +13,60 @@ final class TimelinePostView: UIView {
     
     static let avatarImageViewSize = CGSize(width: 44, height: 44)
     
-    let avatarImageView = UIImageView()
+    let avatarImageView: UIImageView = {
+        let imageView = UIImageView()
+        imageView.layer.masksToBounds = true
+        imageView.layer.cornerRadius = avatarImageViewSize.width/2
+        imageView.layer.cornerCurve = .continuous
+        imageView.contentMode = .scaleAspectFill
+        return imageView
+    }()
+    
+    let visibilityImageView: UIImageView = {
+        let imageView = UIImageView(image: Asset.TootTimeline.global.image.withRenderingMode(.alwaysTemplate))
+        imageView.tintColor = Asset.Colors.tootGray.color
+        return imageView
+    }()
+    
+    let lockImageView: UIImageView = {
+        let imageview = UIImageView(image: Asset.TootTimeline.textlock.image.withRenderingMode(.alwaysTemplate))
+        imageview.tintColor = Asset.Colors.tootGray.color
+        imageview.isHidden = true
+        return imageview
+    }()
     
     let nameLabel: UILabel = {
         let label = UILabel()
-        label.font = .preferredFont(forTextStyle: .headline)
-        label.textColor = .label
+        label.font = UIFont(name: "Roboto-Medium", size: 14)
+        label.textColor = Asset.Colors.tootWhite.color
+        
         label.text = "Alice"
         return label
     }()
     
     let usernameLabel: UILabel = {
         let label = UILabel()
-        label.font = .preferredFont(forTextStyle: .subheadline)
-        label.textColor = .secondaryLabel
+        label.textColor = Asset.Colors.tootGray.color
+        label.font = UIFont(name: "Roboto-Regular", size: 14)
         label.text = "@alice"
         return label
     }()
     
     let dateLabel: UILabel = {
         let label = UILabel()
-        label.font = UIFont.preferredMonospacedFont(withTextStyle: .callout)
+        label.font = UIFont(name: "Roboto-Regular", size: 14)
         label.textAlignment = UIApplication.shared.userInterfaceLayoutDirection == .rightToLeft ? .left : .right
-        label.textColor = .secondaryLabel
+        label.textColor = Asset.Colors.tootGray.color
         label.text = "1d"
         return label
     }()
     
+    let actionToolbarContainer: ActionToolbarContainer = {
+        let actionToolbarContainer = ActionToolbarContainer()
+        actionToolbarContainer.configure(for: .inline)
+        return actionToolbarContainer
+    }()
+    
     let mainContainerStackView = UIStackView()
     
     let activeTextLabel = ActiveLabel(style: .default)
@@ -59,7 +86,7 @@ final class TimelinePostView: UIView {
 extension TimelinePostView {
     
     func _init() {
-        // container: [retweet | post]
+        // container: [retoot | post]
         let containerStackView = UIStackView()
         containerStackView.axis = .vertical
         containerStackView.spacing = 8
@@ -73,7 +100,7 @@ extension TimelinePostView {
             bottomAnchor.constraint(equalTo: containerStackView.bottomAnchor),
         ])
         
-        // post container: [user avatar | tweet container]
+        // post container: [user avatar | toot container]
         let postContainerStackView = UIStackView()
         containerStackView.addArrangedSubview(postContainerStackView)
         postContainerStackView.axis = .horizontal
@@ -88,36 +115,47 @@ extension TimelinePostView {
             avatarImageView.heightAnchor.constraint(equalToConstant: TimelinePostView.avatarImageViewSize.height).priority(.required - 1),
         ])
 
-        // tweet container: [user meta container | main container | action toolbar]
-        let tweetContainerStackView = UIStackView()
-        postContainerStackView.addArrangedSubview(tweetContainerStackView)
-        tweetContainerStackView.axis = .vertical
-        tweetContainerStackView.spacing = 2
+        // toot container: [user meta container | main container | action toolbar]
+        let tootContainerStackView = UIStackView()
+        postContainerStackView.addArrangedSubview(tootContainerStackView)
+        tootContainerStackView.axis = .vertical
+        tootContainerStackView.spacing = 2
         
-        // user meta container: [name | lock | username | date | menu]
+        // user meta container: [name | lock | username | visiablity | date ]
         let userMetaContainerStackView = UIStackView()
-        tweetContainerStackView.addArrangedSubview(userMetaContainerStackView)
+        tootContainerStackView.addArrangedSubview(userMetaContainerStackView)
         userMetaContainerStackView.axis = .horizontal
         userMetaContainerStackView.alignment = .center
         userMetaContainerStackView.spacing = 6
         userMetaContainerStackView.addArrangedSubview(nameLabel)
+        userMetaContainerStackView.addArrangedSubview(lockImageView)
         userMetaContainerStackView.addArrangedSubview(usernameLabel)
+        userMetaContainerStackView.addArrangedSubview(visibilityImageView)
         userMetaContainerStackView.addArrangedSubview(dateLabel)
         nameLabel.setContentHuggingPriority(.defaultHigh + 10, for: .horizontal)
         nameLabel.setContentCompressionResistancePriority(.defaultHigh, for: .horizontal)
-        usernameLabel.setContentHuggingPriority(.defaultHigh + 3, for: .horizontal)
+        lockImageView.setContentCompressionResistancePriority(.defaultHigh + 1, for: .horizontal)
+        lockImageView.setContentHuggingPriority(.defaultHigh + 1, for: .horizontal)
+        usernameLabel.setContentHuggingPriority(.defaultHigh - 3, for: .horizontal)
         usernameLabel.setContentCompressionResistancePriority(.defaultHigh - 1, for: .horizontal)
-        dateLabel.setContentHuggingPriority(.defaultLow, for: .horizontal)
+        visibilityImageView.setContentCompressionResistancePriority(.defaultHigh + 1, for: .horizontal)
+        visibilityImageView.setContentHuggingPriority(.defaultHigh + 1, for: .horizontal)
+        dateLabel.setContentHuggingPriority(.defaultHigh, for: .horizontal)
         dateLabel.setContentCompressionResistancePriority(.required - 2, for: .horizontal)
         
         // main container: [text | image / video | quote | geo]
-        tweetContainerStackView.addArrangedSubview(mainContainerStackView)
+        tootContainerStackView.addArrangedSubview(mainContainerStackView)
         mainContainerStackView.axis = .vertical
         mainContainerStackView.spacing = 8
         activeTextLabel.translatesAutoresizingMaskIntoConstraints = false
         mainContainerStackView.addArrangedSubview(activeTextLabel)
 
         activeTextLabel.setContentCompressionResistancePriority(.required - 2, for: .vertical)
+        
+        // action toolbar
+        actionToolbarContainer.translatesAutoresizingMaskIntoConstraints = false
+        tootContainerStackView.addArrangedSubview(actionToolbarContainer)
+        actionToolbarContainer.setContentCompressionResistancePriority(.defaultLow, for: .vertical)
 
     }
     
diff --git a/Mastodon/Scene/Share/View/TableviewCell/TimelinePostTableViewCell.swift b/Mastodon/Scene/Share/View/TableviewCell/TimelinePostTableViewCell.swift
index 3ca5e0c22b..487ba68c6c 100644
--- a/Mastodon/Scene/Share/View/TableviewCell/TimelinePostTableViewCell.swift
+++ b/Mastodon/Scene/Share/View/TableviewCell/TimelinePostTableViewCell.swift
@@ -17,8 +17,8 @@ protocol TimelinePostTableViewCellDelegate: class {
 
 final class TimelinePostTableViewCell: UITableViewCell {
     
-    static let verticalMargin: CGFloat = 16         // without retweet indicator
-    static let verticalMarginAlt: CGFloat = 8       // with retweet indicator
+    static let verticalMargin: CGFloat = 16         // without retoot indicator
+    static let verticalMarginAlt: CGFloat = 8       // with retoot indicator
     
     weak var delegate: TimelinePostTableViewCellDelegate?
     
@@ -50,6 +50,8 @@ final class TimelinePostTableViewCell: UITableViewCell {
 extension TimelinePostTableViewCell {
     
     private func _init() {
+        self.backgroundColor = Asset.Colors.tootDark.color
+        self.selectionStyle = .none
         timelinePostView.translatesAutoresizingMaskIntoConstraints = false
         timelinePostViewTopLayoutConstraint = timelinePostView.topAnchor.constraint(equalTo: contentView.topAnchor, constant: TimelinePostTableViewCell.verticalMargin)
         contentView.addSubview(timelinePostView)
diff --git a/Mastodon/Scene/Share/View/ToolBar/ActionToolBarContainer.swift b/Mastodon/Scene/Share/View/ToolBar/ActionToolBarContainer.swift
new file mode 100644
index 0000000000..4403e4b837
--- /dev/null
+++ b/Mastodon/Scene/Share/View/ToolBar/ActionToolBarContainer.swift
@@ -0,0 +1,201 @@
+//
+//  ActionToolBarContainer.swift
+//  Mastodon
+//
+//  Created by sxiaojian on 2021/2/1.
+//
+
+import os.log
+import UIKit
+
+protocol ActionToolbarContainerDelegate: class {
+    func actionToolbarContainer(_ actionToolbarContainer: ActionToolbarContainer, replayButtonDidPressed sender: UIButton)
+    func actionToolbarContainer(_ actionToolbarContainer: ActionToolbarContainer, retootButtonDidPressed sender: UIButton)
+    func actionToolbarContainer(_ actionToolbarContainer: ActionToolbarContainer, starButtonDidPressed sender: UIButton)
+    func actionToolbarContainer(_ actionToolbarContainer: ActionToolbarContainer, bookmarkButtonDidPressed sender: UIButton)
+    func actionToolbarContainer(_ actionToolbarContainer: ActionToolbarContainer, moreButtonDidPressed sender: UIButton)
+    
+}
+
+
+final class ActionToolbarContainer: UIView {
+        
+    let replyButton     = HitTestExpandedButton()
+    let retootButton    = HitTestExpandedButton()
+    let starButton      = HitTestExpandedButton()
+    let bookmartButton  = HitTestExpandedButton()
+    let moreButton      = HitTestExpandedButton()
+    
+    var isstarButtonHighlight: Bool = false {
+        didSet { isstarButtonHighlightStateDidChange(to: isstarButtonHighlight) }
+    }
+    
+    weak var delegate: ActionToolbarContainerDelegate?
+    
+    private let container = UIStackView()
+    private var style: Style?
+        
+    override init(frame: CGRect) {
+        super.init(frame: frame)
+        _init()
+    }
+    
+    required init?(coder: NSCoder) {
+        super.init(coder: coder)
+        _init()
+    }
+    
+}
+
+extension ActionToolbarContainer {
+
+    private func _init() {
+        container.translatesAutoresizingMaskIntoConstraints = false
+        addSubview(container)
+        NSLayoutConstraint.activate([
+            container.topAnchor.constraint(equalTo: topAnchor),
+            container.leadingAnchor.constraint(equalTo: leadingAnchor),
+            trailingAnchor.constraint(equalTo: container.trailingAnchor),
+            bottomAnchor.constraint(equalTo: container.bottomAnchor),
+        ])
+        
+        replyButton.addTarget(self, action: #selector(ActionToolbarContainer.replyButtonDidPressed(_:)), for: .touchUpInside)
+        retootButton.addTarget(self, action: #selector(ActionToolbarContainer.retootButtonDidPressed(_:)), for: .touchUpInside)
+        starButton.addTarget(self, action: #selector(ActionToolbarContainer.starButtonDidPressed(_:)), for: .touchUpInside)
+        bookmartButton.addTarget(self, action: #selector(ActionToolbarContainer.bookmarkButtonDidPressed(_:)), for: .touchUpInside)
+        moreButton.addTarget(self, action: #selector(ActionToolbarContainer.moreButtonDidPressed(_:)), for: .touchUpInside)
+    }
+    
+}
+
+extension ActionToolbarContainer {
+    
+    enum Style {
+        case inline
+        case plain
+        
+        var buttonTitleImagePadding: CGFloat {
+            switch self {
+            case .inline:       return 4.0
+            case .plain:        return 0
+            }
+        }
+    }
+    
+    func configure(for style: Style) {
+        guard needsConfigure(for: style) else {
+            return
+        }
+        
+        self.style = style
+        container.arrangedSubviews.forEach { subview in
+            container.removeArrangedSubview(subview)
+            subview.removeFromSuperview()
+        }
+        
+        let buttons = [replyButton, retootButton, starButton,bookmartButton, moreButton]
+        buttons.forEach { button in
+            button.tintColor = Asset.Colors.tootGray.color
+            button.titleLabel?.font = .monospacedDigitSystemFont(ofSize: 12, weight: .regular)
+            button.setTitle("", for: .normal)
+            button.setTitleColor(.secondaryLabel, for: .normal)
+            button.setInsets(forContentPadding: .zero, imageTitlePadding: style.buttonTitleImagePadding)
+        }
+        
+        switch style {
+        case .inline:
+            buttons.forEach { button in
+                button.contentHorizontalAlignment = .leading
+            }
+            replyButton.setImage(Asset.ToolBar.reply.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            retootButton.setImage(Asset.ToolBar.retoot.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            starButton.setImage(Asset.ToolBar.star.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            bookmartButton.setImage(Asset.ToolBar.bookmark.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            moreButton.setImage(Asset.ToolBar.more.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            
+            container.axis = .horizontal
+            container.distribution = .fill
+            
+            replyButton.translatesAutoresizingMaskIntoConstraints = false
+            retootButton.translatesAutoresizingMaskIntoConstraints = false
+            starButton.translatesAutoresizingMaskIntoConstraints = false
+            bookmartButton.translatesAutoresizingMaskIntoConstraints = false
+            moreButton.translatesAutoresizingMaskIntoConstraints = false
+            container.addArrangedSubview(replyButton)
+            container.addArrangedSubview(retootButton)
+            container.addArrangedSubview(starButton)
+            container.addArrangedSubview(bookmartButton)
+            container.addArrangedSubview(moreButton)
+            NSLayoutConstraint.activate([
+                replyButton.heightAnchor.constraint(equalToConstant: 40).priority(.defaultHigh),
+                replyButton.heightAnchor.constraint(equalTo: retootButton.heightAnchor).priority(.defaultHigh),
+                replyButton.heightAnchor.constraint(equalTo: starButton.heightAnchor).priority(.defaultHigh),
+                replyButton.heightAnchor.constraint(equalTo: moreButton.heightAnchor).priority(.defaultHigh),
+                replyButton.heightAnchor.constraint(equalTo: bookmartButton.heightAnchor).priority(.defaultHigh),
+                replyButton.widthAnchor.constraint(equalTo: retootButton.widthAnchor).priority(.defaultHigh),
+                replyButton.widthAnchor.constraint(equalTo: starButton.widthAnchor).priority(.defaultHigh),
+                replyButton.widthAnchor.constraint(equalTo: bookmartButton.widthAnchor).priority(.defaultHigh),
+            ])
+            moreButton.setContentHuggingPriority(.defaultHigh, for: .horizontal)
+            moreButton.setContentCompressionResistancePriority(.defaultHigh, for: .horizontal)
+            
+        case .plain:
+            buttons.forEach { button in
+                button.contentHorizontalAlignment = .center
+            }
+            replyButton.setImage(Asset.ToolBar.reply.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            retootButton.setImage(Asset.ToolBar.retoot.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            starButton.setImage(Asset.ToolBar.bookmark.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            bookmartButton.setImage(Asset.ToolBar.bookmark.image.withRenderingMode(.alwaysTemplate), for: .normal)
+            
+            container.axis = .horizontal
+            container.spacing = 8
+            container.distribution = .fillEqually
+            
+            container.addArrangedSubview(replyButton)
+            container.addArrangedSubview(retootButton)
+            container.addArrangedSubview(starButton)
+            container.addArrangedSubview(bookmartButton)
+        }
+    }
+    
+    private func needsConfigure(for style: Style) -> Bool {
+        guard let oldStyle = self.style else { return true }
+        return oldStyle != style
+    }
+    
+    private func isstarButtonHighlightStateDidChange(to isHighlight: Bool) {
+        let tintColor = isHighlight ? Asset.Colors.likeOrange.color : Asset.Colors.tootGray.color
+        starButton.tintColor = tintColor
+        starButton.setTitleColor(tintColor, for: .normal)
+        starButton.setTitleColor(tintColor, for: .highlighted)
+    }
+}
+
+extension ActionToolbarContainer {
+    
+    @objc private func replyButtonDidPressed(_ sender: UIButton) {
+        os_log("%{public}s[%{public}ld], %{public}s", ((#file as NSString).lastPathComponent), #line, #function)
+        delegate?.actionToolbarContainer(self, replayButtonDidPressed: sender)
+    }
+    
+    @objc private func retootButtonDidPressed(_ sender: UIButton) {
+        os_log("%{public}s[%{public}ld], %{public}s", ((#file as NSString).lastPathComponent), #line, #function)
+        delegate?.actionToolbarContainer(self, retootButtonDidPressed: sender)
+    }
+    
+    @objc private func starButtonDidPressed(_ sender: UIButton) {
+        os_log("%{public}s[%{public}ld], %{public}s", ((#file as NSString).lastPathComponent), #line, #function)
+        delegate?.actionToolbarContainer(self, starButtonDidPressed: sender)
+    }
+    
+    @objc private func moreButtonDidPressed(_ sender: UIButton) {
+        os_log("%{public}s[%{public}ld], %{public}s", ((#file as NSString).lastPathComponent), #line, #function)
+        delegate?.actionToolbarContainer(self, moreButtonDidPressed: sender)
+    }
+    @objc private func bookmarkButtonDidPressed(_ sender: UIButton) {
+        os_log("%{public}s[%{public}ld], %{public}s", ((#file as NSString).lastPathComponent), #line, #function)
+        delegate?.actionToolbarContainer(self, bookmarkButtonDidPressed: sender)
+    }
+    
+}
diff --git a/Mastodon/Service/APIService+PublicTimeline.swift b/Mastodon/Service/APIService+PublicTimeline.swift
index ac05de1849..6b73409cfa 100644
--- a/Mastodon/Service/APIService+PublicTimeline.swift
+++ b/Mastodon/Service/APIService+PublicTimeline.swift
@@ -16,10 +16,6 @@ extension APIService {
     
     static let publicTimelineRequestWindowInSec: TimeInterval = 15 * 60
     
-    // incoming tweet - retweet relationship could be:
-    // A1. incoming tweet NOT in local timeline, retweet NOT  in local (never see tweet and retweet)
-    // A2. incoming tweet NOT in local timeline, retweet      in local (never see tweet but saw retweet before)
-    // A3. incoming tweet     in local timeline, retweet MUST in local (saw tweet before)
     func publicTimeline(
         count: Int = 20,
         domain: String
diff --git a/Mastodon/Service/Persist/APIService+Persist+Timeline.swift b/Mastodon/Service/Persist/APIService+Persist+Timeline.swift
index c2d1602d59..5778062520 100644
--- a/Mastodon/Service/Persist/APIService+Persist+Timeline.swift
+++ b/Mastodon/Service/Persist/APIService+Persist+Timeline.swift
@@ -23,11 +23,45 @@ extension APIService.Persist {
         persistType: PersistTimelineType
     ) -> AnyPublisher<Result<Void, Error>, Never> {
         return managedObjectContext.performChanges {
-            let toots = response.value
-            let _ = toots.map {
+            let toot = response.value
+            let _ = toot.map {
                 let userProperty = MastodonUser.Property(id: $0.account.id, domain: domain, acct: $0.account.acct, username: $0.account.username, displayName: $0.account.displayName,avatar: $0.account.avatar,avatarStatic: $0.account.avatarStatic, createdAt: $0.createdAt, networkDate: $0.createdAt)
                 let author = MastodonUser.insert(into: managedObjectContext, property: userProperty)
-                let tootProperty = Toot.Property(id: $0.id, domain: domain, content: $0.content, createdAt: $0.createdAt, networkDate: $0.createdAt)
+                let metions = $0.mentions?.compactMap({ (mention) -> Mention in
+                    Mention.insert(into: managedObjectContext, property: Mention.Property(id: mention.id, username: mention.username, acct: mention.acct, url: mention.url))
+                })
+                let emojis = $0.emojis?.compactMap({ (emoji) -> Emoji in
+                    Emoji.insert(into: managedObjectContext, property: Emoji.Property(shortcode: emoji.shortcode, url: emoji.url, staticURL: emoji.staticURL, visibleInPicker: emoji.visibleInPicker))
+                })
+                let tootProperty = Toot.Property(
+                    domain: domain,
+                    id: $0.id,
+                    uri: $0.uri,
+                    createdAt: $0.createdAt,
+                    content: $0.content,
+                    visibility: $0.visibility,
+                    sensitive: $0.sensitive ?? false,
+                    spoilerText: $0.spoilerText,
+                    mentions: metions,
+                    emojis: emojis,
+                    reblogsCount: $0.reblogsCount,
+                    favouritesCount: $0.favouritesCount,
+                    repliesCount: $0.repliesCount ?? 0,
+                    url: $0.uri,
+                    inReplyToID: $0.inReplyToID,
+                    inReplyToAccountID: $0.inReplyToAccountID,
+                    reblog: nil,   //TODO 
+                    language: $0.language,
+                    text: $0.text,
+                    favourited: $0.favourited ?? false,
+                    reblogged: $0.reblogged ?? false,
+                    muted: $0.muted ?? false,
+                    bookmarked: $0.bookmarked ?? false,
+                    pinned: $0.pinned ?? false,
+                    updatedAt: response.networkDate,
+                    deletedAt: nil,
+                    author: author,
+                    homeTimelineIndexes: nil)
                 Toot.insert(into: managedObjectContext, property: tootProperty, author: author)
             }
         }.eraseToAnyPublisher()
diff --git a/Podfile b/Podfile
index dee59e4d9a..e9aaee930f 100644
--- a/Podfile
+++ b/Podfile
@@ -9,7 +9,7 @@ target 'Mastodon' do
    # misc
   pod 'SwiftGen', '~> 6.4.0'
   pod 'DateToolsSwift', '~> 5.0.0'
-  pod 'ActiveLabel', git: 'https://github.com/ReticentJohn/ActiveLabel.swift.git', branch: 'master'
+  pod 'Kanna', '~> 5.2.2'
   target 'MastodonTests' do
     inherit! :search_paths
     # Pods for testing
diff --git a/Podfile.lock b/Podfile.lock
index 94ee59e39a..7da6a1e240 100644
--- a/Podfile.lock
+++ b/Podfile.lock
@@ -1,33 +1,24 @@
 PODS:
-  - ActiveLabel (1.1.0)
   - DateToolsSwift (5.0.0)
+  - Kanna (5.2.4)
   - SwiftGen (6.4.0)
 
 DEPENDENCIES:
-  - ActiveLabel (from `https://github.com/ReticentJohn/ActiveLabel.swift.git`, branch `master`)
   - DateToolsSwift (~> 5.0.0)
+  - Kanna (~> 5.2.2)
   - SwiftGen (~> 6.4.0)
 
 SPEC REPOS:
   trunk:
     - DateToolsSwift
+    - Kanna
     - SwiftGen
 
-EXTERNAL SOURCES:
-  ActiveLabel:
-    :branch: master
-    :git: https://github.com/ReticentJohn/ActiveLabel.swift.git
-
-CHECKOUT OPTIONS:
-  ActiveLabel:
-    :commit: 01dd31cbbd1b3fec33b0c024b011e6b932794eff
-    :git: https://github.com/ReticentJohn/ActiveLabel.swift.git
-
 SPEC CHECKSUMS:
-  ActiveLabel: 5e3f4de79a1952d4604b845a0610d4776e4b82b3
   DateToolsSwift: 4207ada6ad615d8dc076323d27037c94916dbfa6
+  Kanna: b9d00d7c11428308c7f95e1f1f84b8205f567a8f
   SwiftGen: 67860cc7c3cfc2ed25b9b74cfd55495fc89f9108
 
-PODFILE CHECKSUM: 7fd5233d3180e2f7f67c96a28abbc20c6eddac93
+PODFILE CHECKSUM: 8b24099ae9ac02698d464cc508af9550352c85cb
 
 COCOAPODS: 1.10.1
