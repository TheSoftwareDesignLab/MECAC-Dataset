diff --git a/lib/main.dart b/lib/main.dart
index 90c2c85d644..f82eae61a64 100644
--- a/lib/main.dart
+++ b/lib/main.dart
@@ -1,3 +1,4 @@
+import 'package:invoiceninja_flutter/ui/app/app_builder.dart';
 import 'package:invoiceninja_flutter/ui/app/invoice/invoice_email_vm.dart';
 import 'package:redux/redux.dart';
 import 'package:flutter_localizations/flutter_localizations.dart';
@@ -54,82 +55,82 @@ void main() async {
 
 class InvoiceNinjaApp extends StatefulWidget {
   final Store<AppState> store;
-  const InvoiceNinjaApp({Key key, this.store})
-      : super(key: key);
+
+  const InvoiceNinjaApp({Key key, this.store}) : super(key: key);
 
   @override
   InvoiceNinjaAppState createState() => InvoiceNinjaAppState();
 }
 
 class InvoiceNinjaAppState extends State<InvoiceNinjaApp> {
-
   @override
   Widget build(BuildContext context) {
     return StoreProvider<AppState>(
       store: widget.store,
-      child: MaterialApp(
-        debugShowCheckedModeBanner: false,
-        localizationsDelegates: [
-          const AppLocalizationsDelegate(),
-          GlobalMaterialLocalizations.delegate,
-        ],
-
-        // light theme
-        theme: widget.store.state.uiState.enableDarkMode
-            ? ThemeData(
-                brightness: Brightness.dark,
-                accentColor: Colors.lightBlueAccent,
-              )
-            : ThemeData().copyWith(
-                //accentColor: Colors.lightBlueAccent,
-                primaryColor: const Color(0xFF117cc1),
-                primaryColorLight: const Color(0xFF5dabf4),
-                primaryColorDark: const Color(0xFF0D5D91),
-                indicatorColor: Colors.white,
-                bottomAppBarColor: Colors.grey.shade300,
-                backgroundColor: Colors.grey.shade200,
-                buttonColor: const Color(0xFF0D5D91),
-              ),
-
-        title: 'Invoice Ninja',
-        routes: {
-          InitScreen.route: (context) => InitScreen(),
-          LoginScreen.route: (context) {
-            return LoginScreen();
-          },
-          DashboardScreen.route: (context) {
-            if (widget.store.state.dashboardState.isStale) {
-              widget.store.dispatch(LoadDashboard());
-            }
-            return DashboardScreen();
-          },
-          ProductScreen.route: (context) {
-            if (widget.store.state.productState.isStale) {
-              widget.store.dispatch(LoadProducts());
-            }
-            return ProductScreen();
-          },
-          ProductEditScreen.route: (context) => ProductEditScreen(),
-          ClientScreen.route: (context) {
-            if (widget.store.state.clientState.isStale) {
-              widget.store.dispatch(LoadClients());
-            }
-            return ClientScreen();
-          },
-          ClientViewScreen.route: (context) => ClientViewScreen(),
-          ClientEditScreen.route: (context) => ClientEditScreen(),
-          InvoiceScreen.route: (context) {
-            if (widget.store.state.invoiceState.isStale) {
-              widget.store.dispatch(LoadInvoices());
-            }
-            return InvoiceScreen();
-          },
-          InvoiceViewScreen.route: (context) => InvoiceViewScreen(),
-          InvoiceEditScreen.route: (context) => InvoiceEditScreen(),
-          InvoiceEmailScreen.route: (context) => InvoiceEmailScreen(),
-          SettingsScreen.route: (context) => SettingsScreen(),
-        },
-      ),
+      child: AppBuilder(
+          builder: (context) {
+            return MaterialApp(
+              debugShowCheckedModeBanner: false,
+              localizationsDelegates: [
+                const AppLocalizationsDelegate(),
+                GlobalMaterialLocalizations.delegate,
+              ],
+              // light theme
+              theme: widget.store.state.uiState.enableDarkMode
+                  ? ThemeData(
+                      brightness: Brightness.dark,
+                      accentColor: Colors.lightBlueAccent,
+                    )
+                  : ThemeData().copyWith(
+                      //accentColor: Colors.lightBlueAccent,
+                      primaryColor: const Color(0xFF117cc1),
+                      primaryColorLight: const Color(0xFF5dabf4),
+                      primaryColorDark: const Color(0xFF0D5D91),
+                      indicatorColor: Colors.white,
+                      bottomAppBarColor: Colors.grey.shade300,
+                      backgroundColor: Colors.grey.shade200,
+                      buttonColor: const Color(0xFF0D5D91),
+                    ),
+              title: 'Invoice Ninja',
+              routes: {
+                InitScreen.route: (context) => InitScreen(),
+                LoginScreen.route: (context) {
+                  return LoginScreen();
+                },
+                DashboardScreen.route: (context) {
+                  if (widget.store.state.dashboardState.isStale) {
+                    widget.store.dispatch(LoadDashboard());
+                  }
+                  return DashboardScreen();
+                },
+                ProductScreen.route: (context) {
+                  if (widget.store.state.productState.isStale) {
+                    widget.store.dispatch(LoadProducts());
+                  }
+                  return ProductScreen();
+                },
+                ProductEditScreen.route: (context) => ProductEditScreen(),
+                ClientScreen.route: (context) {
+                  if (widget.store.state.clientState.isStale) {
+                    widget.store.dispatch(LoadClients());
+                  }
+                  return ClientScreen();
+                },
+                ClientViewScreen.route: (context) => ClientViewScreen(),
+                ClientEditScreen.route: (context) => ClientEditScreen(),
+                InvoiceScreen.route: (context) {
+                  if (widget.store.state.invoiceState.isStale) {
+                    widget.store.dispatch(LoadInvoices());
+                  }
+                  return InvoiceScreen();
+                },
+                InvoiceViewScreen.route: (context) => InvoiceViewScreen(),
+                InvoiceEditScreen.route: (context) => InvoiceEditScreen(),
+                InvoiceEmailScreen.route: (context) => InvoiceEmailScreen(),
+                SettingsScreen.route: (context) => SettingsScreen(),
+              },
+            );
+          }),
     );
   }
 }
diff --git a/lib/ui/app/app_builder.dart b/lib/ui/app/app_builder.dart
new file mode 100644
index 00000000000..1c61777106a
--- /dev/null
+++ b/lib/ui/app/app_builder.dart
@@ -0,0 +1,28 @@
+import 'package:flutter/material.dart';
+
+class AppBuilder extends StatefulWidget {
+  final Function(BuildContext) builder;
+
+  const AppBuilder(
+      {Key key, this.builder})
+      : super(key: key);
+
+  @override
+  AppBuilderState createState() => new AppBuilderState();
+
+  static AppBuilderState of(BuildContext context) {
+    return context.ancestorStateOfType(const TypeMatcher<AppBuilderState>());
+  }
+}
+
+class AppBuilderState extends State<AppBuilder> {
+
+  @override
+  Widget build(BuildContext context) {
+    return widget.builder(context);
+  }
+
+  void rebuild() {
+    setState(() => true);
+  }
+}
diff --git a/lib/ui/settings/settings_list_vm.dart b/lib/ui/settings/settings_list_vm.dart
index 6a9a6c90d31..ea0cbd05eaf 100644
--- a/lib/ui/settings/settings_list_vm.dart
+++ b/lib/ui/settings/settings_list_vm.dart
@@ -5,6 +5,7 @@ import 'package:invoiceninja_flutter/constants.dart';
 import 'package:invoiceninja_flutter/redux/app/app_actions.dart';
 import 'package:invoiceninja_flutter/redux/dashboard/dashboard_actions.dart';
 import 'package:invoiceninja_flutter/ui/app/dialogs/loading_dialog.dart';
+import 'package:invoiceninja_flutter/ui/app/app_builder.dart';
 import 'package:invoiceninja_flutter/utils/completers.dart';
 import 'package:invoiceninja_flutter/utils/localization.dart';
 import 'package:invoiceninja_flutter/utils/platforms.dart';
@@ -88,22 +89,6 @@ class SettingsListVM {
       );
     }
 
-    void _warnRestart(BuildContext context) {
-      final localization = AppLocalization.of(context);
-      showDialog<AlertDialog>(
-        context: context,
-        builder: (BuildContext context) => AlertDialog(
-              semanticLabel: localization.restartAppToApplyChange,
-              title: Text(localization.restartAppToApplyChange),
-              actions: <Widget>[
-                new FlatButton(
-                    child: Text(localization.ok.toUpperCase()),
-                    onPressed: () => Navigator.pop(context))
-              ],
-            ),
-      );
-    }
-
     return SettingsListVM(
         onLogoutTap: (BuildContext context) => _confirmLogout(context),
         onRefreshTap: (BuildContext context) => _refreshData(context),
@@ -111,7 +96,7 @@ class SettingsListVM {
           final SharedPreferences prefs = await SharedPreferences.getInstance();
           prefs.setBool(kSharedPrefEnableDarkMode, value);
           store.dispatch(UserSettingsChanged(enableDarkMode: value));
-          _warnRestart(context);
+          AppBuilder.of(context).rebuild();
         },
         enableDarkMode: store.state.uiState.enableDarkMode);
   }
