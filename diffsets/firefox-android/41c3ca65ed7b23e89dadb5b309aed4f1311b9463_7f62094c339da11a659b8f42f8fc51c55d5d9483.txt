diff --git a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteAddFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteAddFragment.kt
index 66af0f460af1..d2da9b3a7b47 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteAddFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteAddFragment.kt
@@ -65,12 +65,12 @@ class AutocompleteAddFragment : Fragment(), CoroutineScope {
         super.onPause()
     }
 
-    override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {
-        inflater?.inflate(R.menu.menu_autocomplete_add, menu)
+    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
+        inflater.inflate(R.menu.menu_autocomplete_add, menu)
     }
 
-    override fun onOptionsItemSelected(item: MenuItem?): Boolean {
-        if (item?.itemId == R.id.save) {
+    override fun onOptionsItemSelected(item: MenuItem): Boolean {
+        if (item.itemId == R.id.save) {
 
             val domain = domainView.text.toString()
                     .trim()
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteListFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteListFragment.kt
index bfd33d6be2f8..4ca12b4c660b 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteListFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteListFragment.kt
@@ -150,12 +150,12 @@ open class AutocompleteListFragment : Fragment(), CoroutineScope {
         super.onPause()
     }
 
-    override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {
-        inflater?.inflate(R.menu.menu_autocomplete_list, menu)
+    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
+        inflater.inflate(R.menu.menu_autocomplete_list, menu)
     }
 
-    override fun onPrepareOptionsMenu(menu: Menu?) {
-        val removeItem = menu?.findItem(R.id.remove)
+    override fun onPrepareOptionsMenu(menu: Menu) {
+        val removeItem = menu.findItem(R.id.remove)
 
         removeItem?.let {
             it.isVisible = isSelectionMode() || domainList.adapter!!.itemCount > 1
@@ -164,7 +164,7 @@ open class AutocompleteListFragment : Fragment(), CoroutineScope {
         }
     }
 
-    override fun onOptionsItemSelected(item: MenuItem?): Boolean = when (item?.itemId) {
+    override fun onOptionsItemSelected(item: MenuItem): Boolean = when (item.itemId) {
         R.id.remove -> {
             fragmentManager!!
                     .beginTransaction()
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteRemoveFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteRemoveFragment.kt
index 5a4812c70297..0239de48fa79 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteRemoveFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteRemoveFragment.kt
@@ -26,11 +26,11 @@ class AutocompleteRemoveFragment : AutocompleteListFragment(), CoroutineScope {
     override val coroutineContext: CoroutineContext
         get() = job + Dispatchers.Main
 
-    override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {
-        inflater?.inflate(R.menu.menu_autocomplete_remove, menu)
+    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
+        inflater.inflate(R.menu.menu_autocomplete_remove, menu)
     }
 
-    override fun onOptionsItemSelected(item: MenuItem?): Boolean = when (item?.itemId) {
+    override fun onOptionsItemSelected(item: MenuItem): Boolean = when (item.itemId) {
         R.id.remove -> {
             removeSelectedDomains(activity!!.applicationContext)
             true
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationDialogFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationDialogFragment.kt
index 0140cbbaa26a..f3b8519426bb 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationDialogFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationDialogFragment.kt
@@ -34,7 +34,7 @@ class BiometricAuthenticationDialogFragment : AppCompatDialogFragment(), Lifecyc
         setStyle(DialogFragment.STYLE_NORMAL, android.R.style.Theme_Material_Light_Dialog)
     }
 
-    override fun onCancel(dialog: DialogInterface?) {
+    override fun onCancel(dialog: DialogInterface) {
         super.onCancel(dialog)
         val startMain = Intent(Intent.ACTION_MAIN)
         startMain.addCategory(Intent.CATEGORY_HOME)
@@ -56,8 +56,8 @@ class BiometricAuthenticationDialogFragment : AppCompatDialogFragment(), Lifecyc
 
         val biometricDialog = dialog
         this.isCancelable = true
-        biometricDialog.setCanceledOnTouchOutside(false)
-        biometricDialog.setTitle(
+        biometricDialog?.setCanceledOnTouchOutside(false)
+        biometricDialog?.setTitle(
             context!!.getString(
                 R.string.biometric_auth_title,
                 context!!.getString(R.string.app_name)
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/broadcastreceiver/DownloadBroadcastReceiver.java b/focus-android/app/src/main/java/org/mozilla/focus/broadcastreceiver/DownloadBroadcastReceiver.java
index 4b9bb7a416c7..33fd168ff53b 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/broadcastreceiver/DownloadBroadcastReceiver.java
+++ b/focus-android/app/src/main/java/org/mozilla/focus/broadcastreceiver/DownloadBroadcastReceiver.java
@@ -64,8 +64,8 @@ private void displaySnackbar(final Context context, long completedDownloadRefere
                     final String decoded = Uri.decode(localUri);
                     File file = new File(decoded);
                     final String mimeType = cursor.getString(cursor.getColumnIndex(DownloadManager.COLUMN_MEDIA_TYPE));
-                    String fileName = DownloadUtils.guessFileName(null, decoded, null);
-                    final String fileName2 = DownloadUtils.guessFileName(null, decoded, mimeType);
+                    String fileName = DownloadUtils.guessFileName(null, null, decoded, null);
+                    final String fileName2 = DownloadUtils.guessFileName(null, null, decoded, mimeType);
                     // Rename the file extension if it lacks a known MIME type and the server provided a Content-Type header.
                     if (!fileName.equals(fileName2)) {
                         final File file2 = new File(file.getParent(), fileName2);
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/customtabs/CustomTabsService.java b/focus-android/app/src/main/java/org/mozilla/focus/customtabs/CustomTabsService.java
index e3d618071bd8..42d0fefce935 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/customtabs/CustomTabsService.java
+++ b/focus-android/app/src/main/java/org/mozilla/focus/customtabs/CustomTabsService.java
@@ -29,6 +29,9 @@ public boolean newSession(ICustomTabsCallback callback) {
                 return true;
             }
 
+            @Override
+            public boolean newSessionWithExtras(ICustomTabsCallback callback, Bundle extras) { return true; }
+
             @Override
             public boolean mayLaunchUrl(ICustomTabsCallback callback, Uri url, Bundle extras, List<Bundle> otherLikelyBundles) {
                 return true;
@@ -50,6 +53,13 @@ public boolean requestPostMessageChannel(ICustomTabsCallback iCustomTabsCallback
                 return false;
             }
 
+            @Override
+            public boolean requestPostMessageChannelWithExtras(ICustomTabsCallback callback,
+                                                               Uri uri,
+                                                               Bundle extras) {
+                return false;
+            }
+
             @Override
             public int postMessage(ICustomTabsCallback iCustomTabsCallback, String s,
                                    Bundle bundle) {
@@ -60,6 +70,11 @@ public int postMessage(ICustomTabsCallback iCustomTabsCallback, String s,
             public boolean validateRelationship(ICustomTabsCallback iCustomTabsCallback, int i, Uri uri, Bundle bundle) {
                 return false;
             }
+
+            @Override
+            public boolean receiveFile(ICustomTabsCallback callback, Uri uri, int i, Bundle bundle) {
+                return false;
+            }
         };
     }
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsListFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsListFragment.kt
index 54b292843d7c..3af1d99193c6 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsListFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsListFragment.kt
@@ -145,12 +145,12 @@ open class ExceptionsListFragment : Fragment(), CoroutineScope {
         super.onStop()
     }
 
-    override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {
-        inflater?.inflate(R.menu.menu_exceptions_list, menu)
+    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
+        inflater.inflate(R.menu.menu_exceptions_list, menu)
     }
 
-    override fun onPrepareOptionsMenu(menu: Menu?) {
-        val removeItem = menu?.findItem(R.id.remove)
+    override fun onPrepareOptionsMenu(menu: Menu) {
+        val removeItem = menu.findItem(R.id.remove)
 
         removeItem?.let {
             it.isVisible = isSelectionMode() || exceptionList.adapter!!.itemCount > 0
@@ -160,7 +160,7 @@ open class ExceptionsListFragment : Fragment(), CoroutineScope {
         }
     }
 
-    override fun onOptionsItemSelected(item: MenuItem?): Boolean = when (item?.itemId) {
+    override fun onOptionsItemSelected(item: MenuItem): Boolean = when (item.itemId) {
         R.id.remove -> {
             fragmentManager!!
                 .beginTransaction()
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsRemoveFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsRemoveFragment.kt
index cb8b4346fdbe..78d59fd5d13e 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsRemoveFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsRemoveFragment.kt
@@ -18,11 +18,11 @@ import org.mozilla.focus.telemetry.TelemetryWrapper
 
 class ExceptionsRemoveFragment : ExceptionsListFragment() {
 
-    override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {
-        inflater?.inflate(R.menu.menu_autocomplete_remove, menu)
+    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
+        inflater.inflate(R.menu.menu_autocomplete_remove, menu)
     }
 
-    override fun onOptionsItemSelected(item: MenuItem?): Boolean = when (item?.itemId) {
+    override fun onOptionsItemSelected(item: MenuItem): Boolean = when (item.itemId) {
         R.id.remove -> {
             removeSelectedDomains(activity!!.applicationContext)
             true
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
index 32b59fed3161..897c14f1ad8a 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
@@ -896,6 +896,7 @@ class BrowserFragment : WebFragment(), LifecycleObserver, View.OnClickListener,
         else
             DownloadUtils.guessFileName(
                 download.contentDisposition,
+                null,
                 download.url,
                 download.mimeType
             )
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/DownloadDialogFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/DownloadDialogFragment.kt
index eeb8a88bb278..b6fb2e4b71ab 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/DownloadDialogFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/DownloadDialogFragment.kt
@@ -100,6 +100,7 @@ class DownloadDialogFragment : DialogFragment() {
 
             val fileName = download.fileName ?: DownloadUtils.guessFileName(
                 download.contentDisposition,
+                null,
                 download.url,
                 download.mimeType
             )
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/FirstrunFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/FirstrunFragment.kt
index 0d3a0e3ac011..a83f5540b520 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/FirstrunFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/FirstrunFragment.kt
@@ -28,7 +28,7 @@ class FirstrunFragment : Fragment(), View.OnClickListener {
 
     private var background: View? = null
 
-    override fun onAttach(context: Context?) {
+    override fun onAttach(context: Context) {
         super.onAttach(context)
 
         val transition = TransitionInflater.from(context).inflateTransition(R.transition.firstrun_exit)
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/UrlInputFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/UrlInputFragment.kt
index b4bd3e4bc960..6330467986d0 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/UrlInputFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/UrlInputFragment.kt
@@ -393,10 +393,10 @@ class UrlInputFragment :
         ViewUtils.showKeyboard(urlView)
     }
 
-    override fun onConfigurationChanged(newConfig: Configuration?) {
+    override fun onConfigurationChanged(newConfig: Configuration) {
         super.onConfigurationChanged(newConfig)
 
-        if (newConfig?.orientation != Configuration.ORIENTATION_UNDEFINED) {
+        if (newConfig.orientation != Configuration.ORIENTATION_UNDEFINED) {
             // This is a hack to make the HomeMenu actually stick on top of the menuView (#3287)
 
             displayedPopupMenu?.let {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/BaseSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/BaseSettingsFragment.kt
index 9d6145cdb935..69b305a5d12a 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/BaseSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/BaseSettingsFragment.kt
@@ -25,7 +25,7 @@ abstract class BaseSettingsFragment : PreferenceFragmentCompat() {
         list?.divider = null
     }
 
-    override fun onAttach(context: Context?) {
+    override fun onAttach(context: Context) {
         super.onAttach(context)
         if (activity !is ActionBarUpdater) {
             throw IllegalArgumentException("Parent activity must implement ActionBarUpdater")
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/InstalledSearchEnginesSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/InstalledSearchEnginesSettingsFragment.kt
index f12801c8675a..f981be0e48fa 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/InstalledSearchEnginesSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/InstalledSearchEnginesSettingsFragment.kt
@@ -42,9 +42,9 @@ class InstalledSearchEnginesSettingsFragment : BaseSettingsFragment() {
         inflater.inflate(R.menu.menu_search_engines, menu)
     }
 
-    override fun onPrepareOptionsMenu(menu: Menu?) {
+    override fun onPrepareOptionsMenu(menu: Menu) {
         super.onPrepareOptionsMenu(menu)
-        menu?.findItem(R.id.menu_restore_default_engines)?.let {
+        menu.findItem(R.id.menu_restore_default_engines)?.let {
             it.isEnabled = !CustomSearchEngineStore.hasAllDefaultSearchEngines(activity!!)
         }
     }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/ManualAddSearchEngineSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/ManualAddSearchEngineSettingsFragment.kt
index dbb42d9fc58e..ef866cf835c4 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/ManualAddSearchEngineSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/ManualAddSearchEngineSettingsFragment.kt
@@ -78,11 +78,11 @@ class ManualAddSearchEngineSettingsFragment : BaseSettingsFragment() {
         menuItemForActiveAsyncTask = null
     }
 
-    override fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {
-        inflater?.inflate(R.menu.menu_search_engine_manual_add, menu)
+    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
+        inflater.inflate(R.menu.menu_search_engine_manual_add, menu)
     }
 
-    override fun onOptionsItemSelected(item: MenuItem?): Boolean {
+    override fun onOptionsItemSelected(item: MenuItem): Boolean {
         val openLearnMore = {
             val url = SupportUtils.getSumoURLForTopic(context!!,
                     SupportUtils.SumoTopic.ADD_SEARCH_ENGINE)
@@ -111,7 +111,7 @@ class ManualAddSearchEngineSettingsFragment : BaseSettingsFragment() {
             }
         }
 
-        when (item?.itemId) {
+        when (item.itemId) {
             R.id.learn_more -> openLearnMore()
             R.id.menu_save_search_engine -> saveSearchEngine()
             else -> return super.onOptionsItemSelected(item)
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/RemoveSearchEnginesSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/RemoveSearchEnginesSettingsFragment.kt
index 306bed9b19c6..660f8eadf345 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/RemoveSearchEnginesSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/RemoveSearchEnginesSettingsFragment.kt
@@ -38,14 +38,14 @@ class RemoveSearchEnginesSettingsFragment : BaseSettingsFragment() {
         inflater.inflate(R.menu.menu_remove_search_engines, menu)
     }
 
-    override fun onPrepareOptionsMenu(menu: Menu?) {
+    override fun onPrepareOptionsMenu(menu: Menu) {
         super.onPrepareOptionsMenu(menu)
         view?.post {
             val pref = preferenceScreen
                     .findPreference(resources.getString(R.string.pref_key_multiselect_search_engine_list))
                     as MultiselectSearchEngineListPreference
 
-            menu?.findItem(R.id.menu_delete_items)?.let {
+            menu.findItem(R.id.menu_delete_items)?.let {
                 ViewUtils.setMenuItemEnabled(it, pref.atLeastOneEngineChecked())
             }
         }
diff --git a/focus-android/build.gradle b/focus-android/build.gradle
index 5c2a2c453a5c..50007a5d1e46 100644
--- a/focus-android/build.gradle
+++ b/focus-android/build.gradle
@@ -6,8 +6,8 @@ buildscript {
     ext.espresso_version = '3.1.0-alpha4'
     ext.kotlin_version = '1.3.61'
     ext.coroutines_version = '1.3.0'
-    ext.mozilla_components_version = '12.0.0'
-    ext.gecko_release_version = '71.0.20200108003105'
+    ext.mozilla_components_version = '31.0.0'
+    ext.gecko_release_version = '72.0.20200107212822'
 
     repositories {
         google()
