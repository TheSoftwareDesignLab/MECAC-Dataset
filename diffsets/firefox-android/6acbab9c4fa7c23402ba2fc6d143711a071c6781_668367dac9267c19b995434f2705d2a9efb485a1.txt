diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/CustomTabActivity.kt b/focus-android/app/src/main/java/org/mozilla/focus/activity/CustomTabActivity.kt
index 4faa941bf918..a10d41fe3c93 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/activity/CustomTabActivity.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/activity/CustomTabActivity.kt
@@ -19,7 +19,7 @@ class CustomTabActivity : MainActivity() {
         SessionManager.getInstance().getCustomTabSessionByCustomTabIdOrThrow(customTabId)
     }
 
-    override fun isCustomTabMode(): Boolean = true
+    override val isCustomTabMode: Boolean = true
 
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
@@ -43,5 +43,5 @@ class CustomTabActivity : MainActivity() {
         }
     }
 
-    override fun getCurrentSessionForActivity() = customTabSession
+    override val currentSessionForActivity = customTabSession
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.java b/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.java
deleted file mode 100644
index da24659a06a0..000000000000
--- a/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.java
+++ /dev/null
@@ -1,24 +0,0 @@
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-package org.mozilla.focus.activity;
-
-import android.app.Activity;
-import android.os.Bundle;
-import android.support.annotation.Nullable;
-
-import org.mozilla.focus.session.SessionManager;
-import org.mozilla.focus.telemetry.TelemetryWrapper;
-
-public class EraseShortcutActivity extends Activity {
-    @Override
-    protected void onCreate(@Nullable Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-
-        SessionManager.getInstance().removeAllSessions();
-
-        TelemetryWrapper.eraseShortcutEvent();
-
-        finishAndRemoveTask();
-    }
-}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.kt b/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.kt
new file mode 100644
index 000000000000..bcfc581dd931
--- /dev/null
+++ b/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.kt
@@ -0,0 +1,23 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.focus.activity
+
+import android.app.Activity
+import android.os.Bundle
+
+import org.mozilla.focus.session.SessionManager
+import org.mozilla.focus.telemetry.TelemetryWrapper
+
+class EraseShortcutActivity : Activity() {
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+
+        SessionManager.getInstance().removeAllSessions()
+
+        TelemetryWrapper.eraseShortcutEvent()
+
+        finishAndRemoveTask()
+    }
+}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.java b/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.java
deleted file mode 100644
index d6ea7c3c8195..000000000000
--- a/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.java
+++ /dev/null
@@ -1,94 +0,0 @@
-/* -*- Mode: Java; c-basic-offset: 4; tab-width: 4; indent-tabs-mode: nil; -*-
- * This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-package org.mozilla.focus.activity;
-
-import android.app.Activity;
-import android.content.Context;
-import android.content.Intent;
-import android.content.pm.ActivityInfo;
-import android.content.pm.ResolveInfo;
-import android.net.Uri;
-import android.os.Bundle;
-import android.support.annotation.Nullable;
-import android.webkit.WebView;
-
-import org.mozilla.focus.telemetry.TelemetryWrapper;
-import org.mozilla.focus.utils.AppConstants;
-import org.mozilla.focus.utils.Browsers;
-
-/**
- * Helper activity that will open the Google Play store by following a redirect URL.
- */
-public class InstallFirefoxActivity extends Activity {
-    private static final String REDIRECT_URL = "https://app.adjust.com/gs1ao4";
-
-    private WebView webView;
-
-    public static ActivityInfo resolveAppStore(Context context) {
-        final ResolveInfo resolveInfo = context.getPackageManager()
-                .resolveActivity(createStoreIntent(), 0);
-
-        if (resolveInfo == null || resolveInfo.activityInfo == null) {
-            return null;
-        }
-
-        if (!resolveInfo.activityInfo.exported) {
-            // We are not allowed to launch this activity.
-            return null;
-        }
-
-        return resolveInfo.activityInfo;
-    }
-
-    private static Intent createStoreIntent() {
-        return new Intent(Intent.ACTION_VIEW,
-                Uri.parse("market://details?id=" + Browsers.KnownBrowser.FIREFOX.packageName));
-    }
-
-    public static void open(Context context) {
-        if (AppConstants.INSTANCE.isKlarBuild()) {
-            // Redirect to Google Play directly
-            context.startActivity(createStoreIntent());
-        } else {
-            // Start this activity to load the redirect URL in a WebView.
-            final Intent intent = new Intent(context, InstallFirefoxActivity.class);
-            context.startActivity(intent);
-        }
-
-        TelemetryWrapper.installFirefoxEvent();
-    }
-
-    @Override
-    protected void onCreate(@Nullable Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-
-        webView = new WebView(this);
-
-        setContentView(webView);
-
-        webView.loadUrl(REDIRECT_URL);
-    }
-
-    @Override
-    protected void onPause() {
-        super.onPause();
-
-        if (webView != null) {
-            webView.onPause();
-        }
-
-        finish();
-    }
-
-    @Override
-    protected void onDestroy() {
-        super.onDestroy();
-
-        if (webView != null) {
-            webView.destroy();
-        }
-    }
-}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.kt b/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.kt
new file mode 100644
index 000000000000..d102ef434e8d
--- /dev/null
+++ b/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.kt
@@ -0,0 +1,89 @@
+/* -*- Mode: Java; c-basic-offset: 4; tab-width: 4; indent-tabs-mode: nil; -*-
+ * This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.focus.activity
+
+import android.app.Activity
+import android.content.Context
+import android.content.Intent
+import android.content.pm.ActivityInfo
+import android.net.Uri
+import android.os.Bundle
+import android.webkit.WebView
+
+import org.mozilla.focus.telemetry.TelemetryWrapper
+import org.mozilla.focus.utils.AppConstants
+import org.mozilla.focus.utils.Browsers
+
+/**
+ * Helper activity that will open the Google Play store by following a redirect URL.
+ */
+class InstallFirefoxActivity : Activity() {
+
+    private var webView: WebView? = null
+
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+
+        webView = WebView(this)
+
+        setContentView(webView)
+
+        webView!!.loadUrl(REDIRECT_URL)
+    }
+
+    override fun onPause() {
+        super.onPause()
+
+        if (webView != null) {
+            webView!!.onPause()
+        }
+
+        finish()
+    }
+
+    override fun onDestroy() {
+        super.onDestroy()
+
+        if (webView != null) {
+            webView!!.destroy()
+        }
+    }
+
+    companion object {
+        private const val REDIRECT_URL = "https://app.adjust.com/gs1ao4"
+
+        fun resolveAppStore(context: Context): ActivityInfo? {
+            val resolveInfo = context.packageManager.resolveActivity(createStoreIntent(), 0)
+
+            if (resolveInfo?.activityInfo == null) {
+                return null
+            }
+
+            return if (!resolveInfo.activityInfo.exported) {
+                // We are not allowed to launch this activity.
+                null
+            } else resolveInfo.activityInfo
+        }
+
+        private fun createStoreIntent(): Intent {
+            return Intent(Intent.ACTION_VIEW,
+                    Uri.parse("market://details?id=" + Browsers.KnownBrowser.FIREFOX.packageName))
+        }
+
+        fun open(context: Context) {
+            if (AppConstants.isKlarBuild) {
+                // Redirect to Google Play directly
+                context.startActivity(createStoreIntent())
+            } else {
+                // Start this activity to load the redirect URL in a WebView.
+                val intent = Intent(context, InstallFirefoxActivity::class.java)
+                context.startActivity(intent)
+            }
+
+            TelemetryWrapper.installFirefoxEvent()
+        }
+    }
+}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.java b/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.java
deleted file mode 100644
index 0f35e463ae43..000000000000
--- a/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.java
+++ /dev/null
@@ -1,325 +0,0 @@
-/* -*- Mode: Java; c-basic-offset: 4; tab-width: 4; indent-tabs-mode: nil; -*-
- * This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-package org.mozilla.focus.activity;
-
-import android.arch.lifecycle.Observer;
-import android.arch.lifecycle.ViewModelProviders;
-import android.content.Context;
-import android.content.Intent;
-import android.os.Bundle;
-import android.preference.PreferenceManager;
-import android.support.annotation.NonNull;
-import android.support.annotation.Nullable;
-import android.support.v4.app.FragmentManager;
-import android.support.v4.app.FragmentTransaction;
-import android.util.AttributeSet;
-import android.view.View;
-import android.view.WindowManager;
-
-import org.mozilla.focus.R;
-import org.mozilla.focus.architecture.NonNullObserver;
-import org.mozilla.focus.biometrics.Biometrics;
-import org.mozilla.focus.fragment.BrowserFragment;
-import org.mozilla.focus.fragment.FirstrunFragment;
-import org.mozilla.focus.fragment.UrlInputFragment;
-import org.mozilla.focus.locale.LocaleAwareAppCompatActivity;
-import org.mozilla.focus.session.Session;
-import org.mozilla.focus.session.SessionManager;
-import org.mozilla.focus.session.ui.SessionsSheetFragment;
-import org.mozilla.focus.settings.ExperimentsSettingsFragment;
-import org.mozilla.focus.telemetry.SentryWrapper;
-import org.mozilla.focus.telemetry.TelemetryWrapper;
-import org.mozilla.focus.utils.Settings;
-import org.mozilla.focus.utils.ViewUtils;
-import org.mozilla.focus.viewmodel.MainViewModel;
-import org.mozilla.focus.web.IWebView;
-import org.mozilla.focus.web.WebViewProvider;
-
-import java.util.List;
-
-import mozilla.components.support.utils.SafeIntent;
-
-public class MainActivity extends LocaleAwareAppCompatActivity {
-    public static final String ACTION_ERASE = "erase";
-    public static final String ACTION_OPEN = "open";
-
-    public static final String EXTRA_TEXT_SELECTION = "text_selection";
-    public static final String EXTRA_NOTIFICATION = "notification";
-
-    private static final String EXTRA_SHORTCUT = "shortcut";
-
-    private final SessionManager sessionManager;
-
-    public MainActivity() {
-        sessionManager = SessionManager.getInstance();
-    }
-
-    @Override
-    protected void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-
-        SentryWrapper.INSTANCE.init(this);
-
-        initViewModel();
-
-        if (Settings.getInstance(this).shouldUseSecureMode()) {
-            getWindow().addFlags(WindowManager.LayoutParams.FLAG_SECURE);
-        }
-
-        getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);
-
-        setContentView(R.layout.activity_main);
-
-        final SafeIntent intent = new SafeIntent(getIntent());
-
-        if (intent.isLauncherIntent()) {
-            TelemetryWrapper.openFromIconEvent();
-        }
-
-        sessionManager.handleIntent(this, intent, savedInstanceState);
-
-        registerSessionObserver();
-
-        WebViewProvider.INSTANCE.preload(this);
-    }
-
-    private void initViewModel() {
-        MainViewModel viewModel = ViewModelProviders.of(this).get(MainViewModel.class);
-        viewModel.getExperimentsLiveData().observe(this, new Observer<Boolean>() {
-            @Override
-            public void onChanged(@Nullable Boolean aBoolean) {
-                if (aBoolean) {
-                    ExperimentsSettingsFragment preferenceFragment = new ExperimentsSettingsFragment();
-                    getSupportFragmentManager()
-                            .beginTransaction()
-                            .replace(R.id.container, preferenceFragment, ExperimentsSettingsFragment.FRAGMENT_TAG)
-                            .addToBackStack(null)
-                            .commitAllowingStateLoss();
-                }
-            }
-        });
-    }
-
-    private void registerSessionObserver() {
-        (isCustomTabMode()
-                ? sessionManager.getCustomTabSessions()
-                : sessionManager.getSessions()
-        ).observe(this,  new NonNullObserver<List<Session>>() {
-            private boolean wasSessionsEmpty = false;
-
-            @Override
-            public void onValueChanged(@NonNull List<Session> sessions) {
-                if (sessions.isEmpty()) {
-                    // There's no active session. Show the URL input screen so that the user can
-                    // start a new session.
-                    showUrlInputScreen();
-                    wasSessionsEmpty = true;
-                } else {
-                    // This happens when we move from 0 to 1 sessions: either on startup or after an erase.
-                    if (wasSessionsEmpty) {
-                        WebViewProvider.INSTANCE.performNewBrowserSessionCleanup();
-                        wasSessionsEmpty = false;
-                    }
-
-                    // We have at least one session. Show a fragment for the current session.
-                    showBrowserScreenForCurrentSession();
-                }
-
-                // If needed show the first run tour on top of the browser or url input fragment.
-                if (Settings.getInstance(MainActivity.this).shouldShowFirstrun()) {
-                    showFirstrun();
-                }
-            }
-        });
-    }
-
-    protected boolean isCustomTabMode() {
-        return false;
-    }
-
-    @Override
-    public void applyLocale() {
-        // We don't care here: all our fragments update themselves as appropriate
-    }
-
-    @Override
-    protected void onResume() {
-        super.onResume();
-
-        TelemetryWrapper.startSession();
-        checkBiometricStillValid();
-
-        if (Settings.getInstance(this).shouldUseSecureMode()) {
-            getWindow().addFlags(WindowManager.LayoutParams.FLAG_SECURE);
-        } else {
-            getWindow().clearFlags(WindowManager.LayoutParams.FLAG_SECURE);
-        }
-    }
-
-    @Override
-    protected void onPause() {
-        if (isFinishing()) {
-            WebViewProvider.INSTANCE.performCleanup(this);
-        }
-
-        super.onPause();
-
-        TelemetryWrapper.stopSession();
-    }
-
-    @Override
-    protected void onStop() {
-        super.onStop();
-
-        TelemetryWrapper.stopMainActivity();
-    }
-
-    @Override
-    protected void onNewIntent(Intent unsafeIntent) {
-        final SafeIntent intent = new SafeIntent(unsafeIntent);
-
-        sessionManager.handleNewIntent(this, intent);
-
-        final String action = intent.getAction();
-
-        if (ACTION_OPEN.equals(action)) {
-            TelemetryWrapper.openNotificationActionEvent();
-        }
-
-        if (ACTION_ERASE.equals(action)) {
-            processEraseAction(intent);
-        }
-
-        if (intent.isLauncherIntent()) {
-            TelemetryWrapper.resumeFromIconEvent();
-        }
-    }
-
-    private void processEraseAction(final SafeIntent intent) {
-        final boolean fromShortcut = intent.getBooleanExtra(EXTRA_SHORTCUT, false);
-        final boolean fromNotification = intent.getBooleanExtra(EXTRA_NOTIFICATION, false);
-
-        SessionManager.getInstance().removeAllSessions();
-
-        if (fromShortcut) {
-            TelemetryWrapper.eraseShortcutEvent();
-        } else if (fromNotification) {
-            TelemetryWrapper.eraseAndOpenNotificationActionEvent();
-        }
-    }
-
-    private void showUrlInputScreen() {
-        final FragmentManager fragmentManager = getSupportFragmentManager();
-        final BrowserFragment browserFragment = (BrowserFragment) fragmentManager.findFragmentByTag(BrowserFragment.FRAGMENT_TAG);
-
-        final boolean isShowingBrowser = browserFragment != null;
-
-        if (isShowingBrowser) {
-            ViewUtils.showBrandedSnackbar(findViewById(android.R.id.content),
-                    R.string.feedback_erase,
-                    getResources().getInteger(R.integer.erase_snackbar_delay));
-        }
-
-        // We add the url input fragment to the layout if it doesn't exist yet.
-        final FragmentTransaction transaction = fragmentManager
-                .beginTransaction();
-
-        // We only want to play the animation if a browser fragment is added and resumed.
-        // If it is not resumed then the application is currently in the process of resuming
-        // and the session was removed while the app was in the background (e.g. via the
-        // notification). In this case we do not want to show the content and remove the
-        // browser fragment immediately.
-        boolean shouldAnimate = isShowingBrowser && browserFragment.isResumed();
-
-        if (shouldAnimate) {
-            transaction.setCustomAnimations(0, R.anim.erase_animation);
-        }
-
-        transaction
-                .replace(R.id.container, UrlInputFragment.createWithoutSession(), UrlInputFragment.FRAGMENT_TAG)
-                .commit();
-    }
-
-    private void showFirstrun() {
-        getSupportFragmentManager()
-                .beginTransaction()
-                .add(R.id.container, FirstrunFragment.create(), FirstrunFragment.FRAGMENT_TAG)
-                .commit();
-    }
-
-    protected Session getCurrentSessionForActivity() {
-        return sessionManager.getCurrentSession();
-    }
-
-    protected void showBrowserScreenForCurrentSession() {
-        final Session currentSession = getCurrentSessionForActivity();
-        final FragmentManager fragmentManager = getSupportFragmentManager();
-
-        final BrowserFragment fragment = (BrowserFragment) fragmentManager.findFragmentByTag(BrowserFragment.FRAGMENT_TAG);
-        if (fragment != null && fragment.getSession().isSameAs(currentSession)) {
-            // There's already a BrowserFragment displaying this session.
-            return;
-        }
-
-        fragmentManager
-                .beginTransaction()
-                .replace(R.id.container, BrowserFragment.createForSession(currentSession), BrowserFragment.FRAGMENT_TAG)
-                .commit();
-    }
-
-    @Override
-    public View onCreateView(String name, Context context, AttributeSet attrs) {
-        if (name.equals(IWebView.class.getName())) {
-            // Inject our implementation of IWebView from the WebViewProvider.
-            return WebViewProvider.INSTANCE.create(this, attrs);
-        }
-
-        return super.onCreateView(name, context, attrs);
-    }
-
-    @Override
-    public void onBackPressed() {
-        final FragmentManager fragmentManager = getSupportFragmentManager();
-
-        final SessionsSheetFragment sessionsSheetFragment = (SessionsSheetFragment) fragmentManager.findFragmentByTag(SessionsSheetFragment.FRAGMENT_TAG);
-        if (sessionsSheetFragment != null &&
-                sessionsSheetFragment.isVisible() &&
-                sessionsSheetFragment.onBackPressed()) {
-            // SessionsSheetFragment handles back presses itself (custom animations).
-            return;
-        }
-
-        final UrlInputFragment urlInputFragment = (UrlInputFragment) fragmentManager.findFragmentByTag(UrlInputFragment.FRAGMENT_TAG);
-        if (urlInputFragment != null &&
-                urlInputFragment.isVisible() &&
-                urlInputFragment.onBackPressed()) {
-            // The URL input fragment has handled the back press. It does its own animations so
-            // we do not try to remove it from outside.
-            return;
-        }
-
-        final BrowserFragment browserFragment = (BrowserFragment) fragmentManager.findFragmentByTag(BrowserFragment.FRAGMENT_TAG);
-        if (browserFragment != null &&
-                browserFragment.isVisible() &&
-                browserFragment.onBackPressed()) {
-            // The Browser fragment handles back presses on its own because it might just go back
-            // in the browsing history.
-            return;
-        }
-
-        super.onBackPressed();
-    }
-
-    // Handles the edge case of a user removing all enrolled prints while auth was enabled
-    private void checkBiometricStillValid() {
-        // Disable biometrics if the user is no longer eligible due to un-enrolling fingerprints:
-        if (!Biometrics.INSTANCE.hasFingerprintHardware(this)) {
-            PreferenceManager.getDefaultSharedPreferences(this)
-                    .edit().putBoolean(getString(R.string.pref_key_biometric),
-                    false).apply();
-        }
-    }
-}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.kt b/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.kt
new file mode 100644
index 000000000000..3bfa1f987b13
--- /dev/null
+++ b/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.kt
@@ -0,0 +1,300 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.focus.activity
+
+import android.arch.lifecycle.Observer
+import android.arch.lifecycle.ViewModelProviders
+import android.content.Context
+import android.content.Intent
+import android.os.Bundle
+import android.preference.PreferenceManager
+import android.util.AttributeSet
+import android.view.View
+import android.view.WindowManager
+import mozilla.components.support.utils.SafeIntent
+import org.mozilla.focus.R
+import org.mozilla.focus.architecture.NonNullObserver
+import org.mozilla.focus.biometrics.Biometrics
+import org.mozilla.focus.fragment.BrowserFragment
+import org.mozilla.focus.fragment.FirstrunFragment
+import org.mozilla.focus.fragment.UrlInputFragment
+import org.mozilla.focus.locale.LocaleAwareAppCompatActivity
+import org.mozilla.focus.session.Session
+import org.mozilla.focus.session.SessionManager
+import org.mozilla.focus.session.ui.SessionsSheetFragment
+import org.mozilla.focus.settings.ExperimentsSettingsFragment
+import org.mozilla.focus.telemetry.SentryWrapper
+import org.mozilla.focus.telemetry.TelemetryWrapper
+import org.mozilla.focus.utils.Settings
+import org.mozilla.focus.utils.ViewUtils
+import org.mozilla.focus.viewmodel.MainViewModel
+import org.mozilla.focus.web.IWebView
+import org.mozilla.focus.web.WebViewProvider
+
+@Suppress("TooManyFunctions")
+open class MainActivity : LocaleAwareAppCompatActivity() {
+    private val sessionManager: SessionManager = SessionManager.getInstance()
+
+    protected open val isCustomTabMode: Boolean
+        get() = false
+
+    protected open val currentSessionForActivity: Session
+        get() = sessionManager.currentSession
+
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+
+        SentryWrapper.init(this)
+
+        initViewModel()
+
+        if (Settings.getInstance(this).shouldUseSecureMode()) {
+            window.addFlags(WindowManager.LayoutParams.FLAG_SECURE)
+        }
+
+        window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_LAYOUT_STABLE or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
+
+        setContentView(R.layout.activity_main)
+
+        val intent = SafeIntent(intent)
+
+        if (intent.isLauncherIntent) {
+            TelemetryWrapper.openFromIconEvent()
+        }
+
+        sessionManager.handleIntent(this, intent, savedInstanceState)
+
+        registerSessionObserver()
+
+        WebViewProvider.preload(this)
+    }
+
+    private fun initViewModel() {
+        val viewModel = ViewModelProviders.of(this).get(MainViewModel::class.java)
+        viewModel.getExperimentsLiveData().observe(this, Observer { aBoolean ->
+            if (aBoolean!!) {
+                val preferenceFragment = ExperimentsSettingsFragment()
+                supportFragmentManager
+                        .beginTransaction()
+                        .replace(R.id.container, preferenceFragment, ExperimentsSettingsFragment.FRAGMENT_TAG)
+                        .addToBackStack(null)
+                        .commitAllowingStateLoss()
+            }
+        })
+    }
+
+    private fun registerSessionObserver() {
+        (if (isCustomTabMode)
+            sessionManager.customTabSessions
+        else
+            sessionManager.sessions).observe(this, object : NonNullObserver<List<Session>>() {
+            private var wasSessionsEmpty = false
+
+            public override fun onValueChanged(t: List<Session>) {
+                if (t.isEmpty()) {
+                    // There's no active session. Show the URL input screen so that the user can
+                    // start a new session.
+                    showUrlInputScreen()
+                    wasSessionsEmpty = true
+                } else {
+                    // This happens when we move from 0 to 1 sessions: either on startup or after an erase.
+                    if (wasSessionsEmpty) {
+                        WebViewProvider.performNewBrowserSessionCleanup()
+                        wasSessionsEmpty = false
+                    }
+
+                    // We have at least one session. Show a fragment for the current session.
+                    showBrowserScreenForCurrentSession()
+                }
+
+                // If needed show the first run tour on top of the browser or url input fragment.
+                if (Settings.getInstance(this@MainActivity).shouldShowFirstrun()) {
+                    showFirstrun()
+                }
+            }
+        })
+    }
+
+    override fun applyLocale() {
+        // We don't care here: all our fragments update themselves as appropriate
+    }
+
+    override fun onResume() {
+        super.onResume()
+
+        TelemetryWrapper.startSession()
+        checkBiometricStillValid()
+
+        if (Settings.getInstance(this).shouldUseSecureMode()) {
+            window.addFlags(WindowManager.LayoutParams.FLAG_SECURE)
+        } else {
+            window.clearFlags(WindowManager.LayoutParams.FLAG_SECURE)
+        }
+    }
+
+    override fun onPause() {
+        if (isFinishing) {
+            WebViewProvider.performCleanup(this)
+        }
+
+        super.onPause()
+
+        TelemetryWrapper.stopSession()
+    }
+
+    override fun onStop() {
+        super.onStop()
+
+        TelemetryWrapper.stopMainActivity()
+    }
+
+    override fun onNewIntent(unsafeIntent: Intent) {
+        val intent = SafeIntent(unsafeIntent)
+
+        sessionManager.handleNewIntent(this, intent)
+
+        val action = intent.action
+
+        if (ACTION_OPEN == action) {
+            TelemetryWrapper.openNotificationActionEvent()
+        }
+
+        if (ACTION_ERASE == action) {
+            processEraseAction(intent)
+        }
+
+        if (intent.isLauncherIntent) {
+            TelemetryWrapper.resumeFromIconEvent()
+        }
+    }
+
+    private fun processEraseAction(intent: SafeIntent) {
+        val fromShortcut = intent.getBooleanExtra(EXTRA_SHORTCUT, false)
+        val fromNotification = intent.getBooleanExtra(EXTRA_NOTIFICATION, false)
+
+        SessionManager.getInstance().removeAllSessions()
+
+        if (fromShortcut) {
+            TelemetryWrapper.eraseShortcutEvent()
+        } else if (fromNotification) {
+            TelemetryWrapper.eraseAndOpenNotificationActionEvent()
+        }
+    }
+
+    private fun showUrlInputScreen() {
+        val fragmentManager = supportFragmentManager
+        val browserFragment = fragmentManager.findFragmentByTag(BrowserFragment.FRAGMENT_TAG) as BrowserFragment?
+
+        val isShowingBrowser = browserFragment != null
+
+        if (isShowingBrowser) {
+            ViewUtils.showBrandedSnackbar(findViewById(android.R.id.content),
+                    R.string.feedback_erase,
+                    resources.getInteger(R.integer.erase_snackbar_delay))
+        }
+
+        // We add the url input fragment to the layout if it doesn't exist yet.
+        val transaction = fragmentManager
+                .beginTransaction()
+
+        // We only want to play the animation if a browser fragment is added and resumed.
+        // If it is not resumed then the application is currently in the process of resuming
+        // and the session was removed while the app was in the background (e.g. via the
+        // notification). In this case we do not want to show the content and remove the
+        // browser fragment immediately.
+        val shouldAnimate = isShowingBrowser && browserFragment!!.isResumed
+
+        if (shouldAnimate) {
+            transaction.setCustomAnimations(0, R.anim.erase_animation)
+        }
+
+        transaction
+                .replace(R.id.container, UrlInputFragment.createWithoutSession(), UrlInputFragment.FRAGMENT_TAG)
+                .commit()
+    }
+
+    private fun showFirstrun() {
+        supportFragmentManager
+                .beginTransaction()
+                .add(R.id.container, FirstrunFragment.create(), FirstrunFragment.FRAGMENT_TAG)
+                .commit()
+    }
+
+    protected fun showBrowserScreenForCurrentSession() {
+        val currentSession = currentSessionForActivity
+        val fragmentManager = supportFragmentManager
+
+        val fragment = fragmentManager.findFragmentByTag(BrowserFragment.FRAGMENT_TAG) as BrowserFragment?
+        if (fragment != null && fragment.session.isSameAs(currentSession)) {
+            // There's already a BrowserFragment displaying this session.
+            return
+        }
+
+        fragmentManager
+                .beginTransaction()
+                .replace(R.id.container, BrowserFragment.createForSession(currentSession), BrowserFragment.FRAGMENT_TAG)
+                .commit()
+    }
+
+    override fun onCreateView(name: String, context: Context, attrs: AttributeSet): View? {
+        return if (name == IWebView::class.java.name) {
+            // Inject our implementation of IWebView from the WebViewProvider.
+            WebViewProvider.create(this, attrs)
+        } else super.onCreateView(name, context, attrs)
+    }
+
+    override fun onBackPressed() {
+        val fragmentManager = supportFragmentManager
+
+        val sessionsSheetFragment = fragmentManager.findFragmentByTag(
+            SessionsSheetFragment.FRAGMENT_TAG) as SessionsSheetFragment?
+        if (sessionsSheetFragment != null &&
+                sessionsSheetFragment.isVisible &&
+                sessionsSheetFragment.onBackPressed()) {
+            // SessionsSheetFragment handles back presses itself (custom animations).
+            return
+        }
+
+        val urlInputFragment = fragmentManager.findFragmentByTag(UrlInputFragment.FRAGMENT_TAG) as UrlInputFragment?
+        if (urlInputFragment != null &&
+                urlInputFragment.isVisible &&
+                urlInputFragment.onBackPressed()) {
+            // The URL input fragment has handled the back press. It does its own animations so
+            // we do not try to remove it from outside.
+            return
+        }
+
+        val browserFragment = fragmentManager.findFragmentByTag(BrowserFragment.FRAGMENT_TAG) as BrowserFragment?
+        if (browserFragment != null &&
+                browserFragment.isVisible &&
+                browserFragment.onBackPressed()) {
+            // The Browser fragment handles back presses on its own because it might just go back
+            // in the browsing history.
+            return
+        }
+
+        super.onBackPressed()
+    }
+
+    // Handles the edge case of a user removing all enrolled prints while auth was enabled
+    private fun checkBiometricStillValid() {
+        // Disable biometrics if the user is no longer eligible due to un-enrolling fingerprints:
+        if (!Biometrics.hasFingerprintHardware(this)) {
+            PreferenceManager.getDefaultSharedPreferences(this)
+                    .edit().putBoolean(getString(R.string.pref_key_biometric),
+                            false).apply()
+        }
+    }
+
+    companion object {
+        const val ACTION_ERASE = "erase"
+        const val ACTION_OPEN = "open"
+
+        const val EXTRA_TEXT_SELECTION = "text_selection"
+        const val EXTRA_NOTIFICATION = "notification"
+
+        private const val EXTRA_SHORTCUT = "shortcut"
+    }
+}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/TextActionActivity.java b/focus-android/app/src/main/java/org/mozilla/focus/activity/TextActionActivity.java
deleted file mode 100644
index 512037c8c828..000000000000
--- a/focus-android/app/src/main/java/org/mozilla/focus/activity/TextActionActivity.java
+++ /dev/null
@@ -1,49 +0,0 @@
-/* -*- Mode: Java; c-basic-offset: 4; tab-width: 4; indent-tabs-mode: nil; -*-
- * This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-package org.mozilla.focus.activity;
-
-import android.app.Activity;
-import android.content.Intent;
-import android.net.Uri;
-import android.os.Build;
-import android.os.Bundle;
-import android.support.annotation.Nullable;
-import android.support.annotation.RequiresApi;
-
-import org.mozilla.focus.utils.UrlUtils;
-
-import mozilla.components.support.utils.SafeIntent;
-
-/**
- * Activity for receiving and processing an ACTION_PROCESS_TEXT intent.
- */
-public class TextActionActivity extends Activity {
-    @RequiresApi(api = Build.VERSION_CODES.M)
-    @Override
-    protected void onCreate(@Nullable Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-
-        final SafeIntent intent = new SafeIntent(getIntent());
-
-        final CharSequence searchTextCharSequence = intent.getCharSequenceExtra(Intent.EXTRA_PROCESS_TEXT);
-        final String searchText;
-        if (searchTextCharSequence != null) {
-            searchText = searchTextCharSequence.toString();
-        } else {
-            searchText = "";
-        }
-        final String searchUrl = UrlUtils.createSearchUrl(this, searchText);
-
-        final Intent searchIntent = new Intent(this, MainActivity.class);
-        searchIntent.setAction(Intent.ACTION_VIEW);
-        searchIntent.putExtra(MainActivity.EXTRA_TEXT_SELECTION, true);
-        searchIntent.setData(Uri.parse(searchUrl));
-
-        startActivity(searchIntent);
-
-        finish();
-    }
-}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/TextActionActivity.kt b/focus-android/app/src/main/java/org/mozilla/focus/activity/TextActionActivity.kt
new file mode 100644
index 000000000000..838b00a85a6e
--- /dev/null
+++ b/focus-android/app/src/main/java/org/mozilla/focus/activity/TextActionActivity.kt
@@ -0,0 +1,45 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.focus.activity
+
+import android.app.Activity
+import android.content.Intent
+import android.net.Uri
+import android.os.Build
+import android.os.Bundle
+import android.support.annotation.RequiresApi
+
+import org.mozilla.focus.utils.UrlUtils
+
+import mozilla.components.support.utils.SafeIntent
+
+/**
+ * Activity for receiving and processing an ACTION_PROCESS_TEXT intent.
+ */
+class TextActionActivity : Activity() {
+    @RequiresApi(api = Build.VERSION_CODES.M)
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+
+        val intent = SafeIntent(intent)
+
+        val searchTextCharSequence = intent.getCharSequenceExtra(Intent.EXTRA_PROCESS_TEXT)
+        val searchText = if (searchTextCharSequence != null) {
+            searchTextCharSequence.toString()
+        } else {
+            ""
+        }
+        val searchUrl = UrlUtils.createSearchUrl(this, searchText)
+
+        val searchIntent = Intent(this, MainActivity::class.java)
+        searchIntent.action = Intent.ACTION_VIEW
+        searchIntent.putExtra(MainActivity.EXTRA_TEXT_SELECTION, true)
+        searchIntent.data = Uri.parse(searchUrl)
+
+        startActivity(searchIntent)
+
+        finish()
+    }
+}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.java b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.java
index 8e85ce625848..24e17deea212 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.java
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.java
@@ -1195,7 +1195,7 @@ public void onClick(View view) {
                 final ActivityInfo[] apps = browsers.getInstalledBrowsers();
                 final ActivityInfo store = browsers.hasFirefoxBrandedBrowserInstalled()
                         ? null
-                        : InstallFirefoxActivity.resolveAppStore(getContext());
+                        : InstallFirefoxActivity.Companion.resolveAppStore(getContext());
 
                 final OpenWithFragment fragment = OpenWithFragment.newInstance(
                         apps,
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/open/InstallBannerViewHolder.java b/focus-android/app/src/main/java/org/mozilla/focus/open/InstallBannerViewHolder.java
index 1aea8b7409ca..09c69aa2296e 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/open/InstallBannerViewHolder.java
+++ b/focus-android/app/src/main/java/org/mozilla/focus/open/InstallBannerViewHolder.java
@@ -30,6 +30,6 @@ public void bind(AppAdapter.App store) {
 
     @Override
     public void onClick(View view) {
-        InstallFirefoxActivity.open(view.getContext());
+        InstallFirefoxActivity.Companion.open(view.getContext());
     }
 }
