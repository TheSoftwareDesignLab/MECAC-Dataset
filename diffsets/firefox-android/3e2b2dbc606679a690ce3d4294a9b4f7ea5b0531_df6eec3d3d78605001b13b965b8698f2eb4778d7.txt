diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/FirstRunDialogueTest.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/FirstRunDialogueTest.kt
index f440ab7bc0d3..ee5f6450f579 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/FirstRunDialogueTest.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/FirstRunDialogueTest.kt
@@ -70,8 +70,6 @@ class FirstRunDialogueTest {
 
         homeScreen {
             skipFirstRun()
-            verifyHomeScreenTipIsDisplayed(true)
-            // hide the keyboard to have a scrollable tips carousel
             closeSoftKeyboard()
             verifyHomeScreenTipIsDisplayed(true)
             scrollLeftTipsCarousel()
@@ -80,6 +78,7 @@ class FirstRunDialogueTest {
         searchScreen {
         }.loadPage(pageUrl) {
         }.clearBrowsingData {
+            closeSoftKeyboard()
             verifyHomeScreenTipIsDisplayed(true)
         }
     }
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/BrowserRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/BrowserRobot.kt
index 6997753af207..9f98ae2362e7 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/BrowserRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/BrowserRobot.kt
@@ -139,6 +139,16 @@ class BrowserRobot {
         mDevice.findObject(UiSelector().textContains("OK")).click()
     }
 
+    fun waitForSiteSecurityIconShown() {
+        assertTrue(
+            mDevice.findObject(
+                UiSelector().resourceId(
+                    "$packageName:id/mozac_browser_toolbar_tracking_protection_indicator"
+                )
+            ).waitForExists(waitingTime)
+        )
+    }
+
     fun verifySiteSecurityIconShown(): ViewInteraction = securityIcon.check(matches(isDisplayed()))
 
     fun verifySiteSecurityIndicatorShown(): ViewInteraction = site_security_indicator.check(matches(isDisplayed()))
@@ -203,6 +213,13 @@ class BrowserRobot {
             ThreeDotMainMenuRobot().interact()
             return ThreeDotMainMenuRobot.Transition()
         }
+
+        fun openSiteSettingsMenu(interact: HomeScreenRobot.() -> Unit): HomeScreenRobot.Transition {
+            securityIcon.perform(click())
+
+            HomeScreenRobot().interact()
+            return HomeScreenRobot.Transition()
+        }
     }
 }
 
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/HomeScreenRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/HomeScreenRobot.kt
index eacbce38d219..a2f5c866ffce 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/HomeScreenRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/HomeScreenRobot.kt
@@ -9,6 +9,7 @@ import androidx.test.espresso.action.ViewActions.click
 import androidx.test.espresso.assertion.ViewAssertions.matches
 import androidx.test.espresso.matcher.ViewMatchers.isDisplayed
 import androidx.test.espresso.matcher.ViewMatchers.withId
+import androidx.test.espresso.matcher.ViewMatchers.withText
 import androidx.test.uiautomator.UiSelector
 import junit.framework.TestCase.assertFalse
 import org.junit.Assert.assertTrue
@@ -28,20 +29,19 @@ class HomeScreenRobot {
     fun skipFirstRun() = onView(withId(R.id.skip)).perform(click())
 
     fun verifyOnboardingFirstSlide() {
-        assertTrue(firstSlide.waitForExists(waitingTime))
+        firstSlide.check(matches(isDisplayed()))
     }
 
     fun verifyOnboardingSecondSlide() {
-        assertTrue(secondSlide.waitForExists(waitingTime))
+        secondSlide.check(matches(isDisplayed()))
     }
 
     fun verifyOnboardingThirdSlide() {
-        assertTrue(thirdSlide.waitForExists(waitingTime))
+        thirdSlide.check(matches(isDisplayed()))
     }
 
     fun verifyOnboardingLastSlide() {
-        assertTrue(lastSlide.waitForExists(waitingTime))
-        assertTrue(finishBtn.text == "OK, GOT IT!")
+        lastSlide.check(matches(isDisplayed()))
     }
 
     fun clickOnboardingNextBtn() = nextBtn.click()
@@ -58,7 +58,7 @@ class HomeScreenRobot {
 
     fun scrollLeftTipsCarousel() {
         assertTrue(homeScreenTips.isScrollable)
-        homeScreenTips.swipeLeft(2)
+        homeScreenTips.swipeLeft(4)
     }
 
     class Transition {
@@ -87,25 +87,13 @@ private val editURLBar =
 private val mainMenu = onView(withId(R.id.menuView))
 
 /********* First Run Locators  */
-private val firstSlide = mDevice.findObject(
-    UiSelector()
-        .text("Power up your privacy")
-)
+private val firstSlide = onView(withText(R.string.firstrun_defaultbrowser_title))
 
-private val secondSlide = mDevice.findObject(
-    UiSelector()
-        .text("Your search, your way")
-)
+private val secondSlide = onView(withText(R.string.firstrun_search_title))
 
-private val thirdSlide = mDevice.findObject(
-    UiSelector()
-        .text("Add shortcuts to your home screen")
-)
+private val thirdSlide = onView(withText(R.string.firstrun_shortcut_title))
 
-private val lastSlide = mDevice.findObject(
-    UiSelector()
-        .text("Make privacy a habit")
-)
+private val lastSlide = onView(withText(R.string.firstrun_privacy_title))
 
 private val nextBtn = mDevice.findObject(
     UiSelector()
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsRobot.kt
index d3fd0d893c07..660f18378616 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsRobot.kt
@@ -12,6 +12,7 @@ import androidx.test.uiautomator.UiScrollable
 import androidx.test.uiautomator.UiSelector
 import org.junit.Assert.assertTrue
 import org.mozilla.focus.R
+import org.mozilla.focus.helpers.TestHelper.getStringResource
 import org.mozilla.focus.helpers.TestHelper.packageName
 import org.mozilla.focus.helpers.TestHelper.waitingTime
 
@@ -37,7 +38,7 @@ class SettingsRobot {
         }
 
         fun openGeneralSettingsMenu(
-            localizedText: String = "General",
+            localizedText: String = getStringResource(R.string.preference_category_general),
             interact: SettingsGeneralMenuRobot.() -> Unit
         ): SettingsGeneralMenuRobot.Transition {
             generalSettingsMenu(localizedText).waitForExists(waitingTime)
@@ -91,7 +92,7 @@ class SettingsRobot {
 private val settingsMenuList =
     UiScrollable(UiSelector().resourceId("$packageName:id/recycler_view"))
 
-private fun generalSettingsMenu(localizedText: String = "General") =
+private fun generalSettingsMenu(localizedText: String = getStringResource(R.string.preference_category_general)) =
     settingsMenuList.getChild(
         UiSelector()
             .text(localizedText)
@@ -99,22 +100,22 @@ private fun generalSettingsMenu(localizedText: String = "General") =
 
 private val searchSettingsMenu = settingsMenuList.getChild(
     UiSelector()
-        .text("Search")
+        .text(getStringResource(R.string.preference_category_search))
 )
 
 private val privacySettingsMenu = settingsMenuList.getChild(
     UiSelector()
-        .text("Privacy & Security")
+        .text(getStringResource(R.string.preference_privacy_and_security_header))
 )
 
 private val advancedSettingsMenu = settingsMenuList.getChild(
     UiSelector()
-        .text("Advanced")
+        .text(getStringResource(R.string.preference_category_advanced))
 )
 
 private val mozillaSettingsMenu = settingsMenuList.getChild(
     UiSelector()
-        .text("Mozilla")
+        .text(getStringResource(R.string.preference_mozilla_summary))
 )
 
 private val whatsNewButton = onView(withId(R.id.menu_whats_new))
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsSearchMenuRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsSearchMenuRobot.kt
index 1cc317263db7..110bba3371f5 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsSearchMenuRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsSearchMenuRobot.kt
@@ -18,6 +18,7 @@ import androidx.test.uiautomator.UiSelector
 import org.junit.Assert.assertTrue
 import org.mozilla.focus.R
 import org.mozilla.focus.helpers.TestHelper.appContext
+import org.mozilla.focus.helpers.TestHelper.getStringResource
 import org.mozilla.focus.helpers.TestHelper.mDevice
 import org.mozilla.focus.helpers.TestHelper.packageName
 import org.mozilla.focus.helpers.TestHelper.waitingTime
@@ -97,7 +98,7 @@ class SearchSettingsRobot {
 
 private val searchEngineSubMenu =
     UiScrollable(UiSelector().resourceId("$packageName:id/recycler_view"))
-        .getChild(UiSelector().text("Search engine"))
+        .getChild(UiSelector().text(getStringResource(R.string.preference_search_engine_label)))
 
 private val searchEngineList = UiScrollable(
     UiSelector()
@@ -112,7 +113,10 @@ private val searchSuggestionsSwitch: UiObject =
 
 private val urlAutocompleteSubMenu =
     UiScrollable(UiSelector().resourceId("$packageName:id/recycler_view"))
-        .getChildByText(UiSelector().text("URL Autocomplete"), "URL Autocomplete", true)
+        .getChildByText(
+            UiSelector().text(getStringResource(R.string.preference_subitem_autocomplete)),
+            getStringResource(R.string.preference_subitem_autocomplete), true,
+        )
 
 private val manageSitesSubMenu = onView(withText(R.string.preference_autocomplete_subitem_manage_sites))
 
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/ThreeDotMainMenuRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/ThreeDotMainMenuRobot.kt
index 0b9d9b877fac..dcda472d33ae 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/ThreeDotMainMenuRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/ThreeDotMainMenuRobot.kt
@@ -14,6 +14,8 @@ import androidx.test.espresso.matcher.ViewMatchers.withText
 import androidx.test.uiautomator.UiSelector
 import junit.framework.TestCase.assertTrue
 import org.hamcrest.Matchers.allOf
+import org.mozilla.focus.R
+import org.mozilla.focus.helpers.TestHelper.getStringResource
 import org.mozilla.focus.helpers.TestHelper.mDevice
 import org.mozilla.focus.helpers.TestHelper.packageName
 import org.mozilla.focus.helpers.TestHelper.waitingTime
@@ -55,7 +57,7 @@ class ThreeDotMainMenuRobot {
 
     class Transition {
         fun openSettings(
-            localizedText: String = "Settings",
+            localizedText: String = getStringResource(R.string.menu_settings),
             interact: SettingsRobot.() -> Unit
         ): SettingsRobot.Transition {
             mDevice.findObject(UiSelector().text(localizedText)).waitForExists(waitingTime)
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/helpers/TestHelper.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/helpers/TestHelper.kt
index 9f685721f3ab..61b8b289b7e9 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/helpers/TestHelper.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/helpers/TestHelper.kt
@@ -39,7 +39,7 @@ import java.nio.charset.StandardCharsets
 object TestHelper {
     @JvmField
     var mDevice = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation())
-    const val waitingTime = DateUtils.SECOND_IN_MILLIS * 4
+    const val waitingTime = DateUtils.SECOND_IN_MILLIS * 15
     const val webPageLoadwaitingTime = DateUtils.SECOND_IN_MILLIS * 15
 
     @JvmStatic
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/FirstRunScreenshots.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/FirstRunScreenshots.kt
index 30d33e9d7c42..3ef63638f3c6 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/FirstRunScreenshots.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/FirstRunScreenshots.kt
@@ -5,7 +5,7 @@ package org.mozilla.focus.screenshots
 
 import android.os.SystemClock
 import androidx.test.rule.ActivityTestRule
-import org.junit.ClassRule
+import org.junit.Ignore
 import org.junit.Rule
 import org.junit.Test
 import org.mozilla.focus.activity.MainActivity
@@ -15,16 +15,17 @@ import tools.fastlane.screengrab.Screengrab
 import tools.fastlane.screengrab.locale.LocaleTestRule
 
 class FirstRunScreenshots : ScreenshotTest() {
-    @Rule @JvmField
+    @Rule
+    @JvmField
     var mActivityTestRule: ActivityTestRule<MainActivity> =
         object : MainActivityFirstrunTestRule(true, true) {
         }
 
-    companion object {
-        @get: ClassRule
-        val localeTestRule = LocaleTestRule()
-    }
+    @Rule
+    @JvmField
+    val localeTestRule = LocaleTestRule()
 
+    @Ignore
     @Test
     fun takeScreenshotsOfFirstrun() {
         homeScreen {
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/HomeScreenScreenshots.java b/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/HomeScreenScreenshots.java
deleted file mode 100644
index 2e72192dcb13..000000000000
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/HomeScreenScreenshots.java
+++ /dev/null
@@ -1,85 +0,0 @@
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-package org.mozilla.focus.screenshots;
-
-import android.os.SystemClock;
-
-import androidx.test.runner.AndroidJUnit4;
-
-import org.junit.ClassRule;
-import org.junit.Ignore;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mozilla.focus.R;
-import org.mozilla.focus.helpers.TestHelper;
-
-import tools.fastlane.screengrab.Screengrab;
-import tools.fastlane.screengrab.locale.LocaleTestRule;
-
-import static androidx.test.espresso.Espresso.onView;
-import static androidx.test.espresso.action.ViewActions.click;
-import static androidx.test.espresso.action.ViewActions.pressImeActionButton;
-import static androidx.test.espresso.action.ViewActions.replaceText;
-import static androidx.test.espresso.assertion.ViewAssertions.matches;
-import static androidx.test.espresso.matcher.ViewMatchers.hasFocus;
-import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;
-import static androidx.test.espresso.matcher.ViewMatchers.withId;
-import static androidx.test.espresso.matcher.ViewMatchers.withText;
-
-@Ignore("Screenshots not required for now, to be re-enabled if needed")
-@RunWith(AndroidJUnit4.class)
-public class HomeScreenScreenshots extends ScreenshotTest {
-
-    @ClassRule
-    public static final LocaleTestRule localeTestRule = new LocaleTestRule();
-
-    private enum TipTypes {
-        TIP_CREATETP (1),
-        TIP_CREATEHS (2),
-        TIP_CREATEDEFAULTBROWSER (3),
-        TIP_AC_URL (4),
-        TIP_NEWTAB (5),
-        TIP_REQDESKTOP (6);
-        private int value;
-
-        TipTypes(int value) {
-            this.value = value;
-        }
-    }
-
-    @Test
-    public void takeScreenshotOfHomeScreen() {
-        onView(withId(R.id.mozac_browser_toolbar_edit_url_view))
-                .check(matches(isDisplayed()))
-                .check(matches(hasFocus()));
-        SystemClock.sleep(5000);
-        Screengrab.screenshot("Home_View");
-    }
-
-    @Test
-    public void takeScreenshotOfMenu() {
-        TestHelper.menuButton.perform(click());
-
-        onView(withText(R.string.menu_whats_new))
-                .check(matches(isDisplayed()));
-
-        Screengrab.screenshot("MainViewMenu");
-    }
-
-    @Test
-    public void takeScreenshotOfTips() {
-        for (TipTypes tip: TipTypes.values()) {
-            onView(withId(R.id.mozac_browser_toolbar_edit_url_view))
-                    .check(matches(isDisplayed()))
-                    .check(matches(hasFocus()))
-                    .perform(click(), replaceText("l10n:tip:" + tip.value), pressImeActionButton());
-
-            onView(withId(R.id.home_tips))
-                    .check(matches(isDisplayed()));
-            Screengrab.screenshot("MainViewTip_" + tip.name());
-            onView(withId(R.id.mozac_browser_toolbar_edit_url_view)).perform(click());
-        }
-    }
-}
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/HomeScreenScreenshots.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/HomeScreenScreenshots.kt
new file mode 100644
index 000000000000..e7d4152aa8e0
--- /dev/null
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/HomeScreenScreenshots.kt
@@ -0,0 +1,127 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+package org.mozilla.focus.screenshots
+
+import android.os.SystemClock
+import androidx.appcompat.app.AppCompatDelegate
+import androidx.test.espresso.Espresso
+import androidx.test.espresso.Espresso.onView
+import androidx.test.espresso.ViewInteraction
+import androidx.test.espresso.action.ViewActions
+import androidx.test.espresso.assertion.ViewAssertions.matches
+import androidx.test.espresso.matcher.ViewMatchers
+import androidx.test.espresso.matcher.ViewMatchers.isDisplayed
+import androidx.test.espresso.matcher.ViewMatchers.withId
+import androidx.test.rule.ActivityTestRule
+import androidx.test.uiautomator.UiObject
+import androidx.test.uiautomator.UiSelector
+import org.junit.Before
+import org.junit.Rule
+import org.junit.Test
+import org.mozilla.focus.R
+import org.mozilla.focus.activity.MainActivity
+import org.mozilla.focus.activity.robots.homeScreen
+import org.mozilla.focus.helpers.MainActivityFirstrunTestRule
+import org.mozilla.focus.helpers.TestHelper
+import org.mozilla.focus.helpers.TestHelper.waitForWebContent
+import tools.fastlane.screengrab.Screengrab
+import tools.fastlane.screengrab.locale.LocaleTestRule
+import java.util.Locale
+
+class HomeScreenScreenshots : ScreenshotTest() {
+    @Rule @JvmField
+    var mActivityTestRule: ActivityTestRule<MainActivity> =
+        object : MainActivityFirstrunTestRule(true, false) {
+        }
+
+    @Rule @JvmField
+    val localeTestRule = LocaleTestRule()
+
+    @Before
+    fun setUp() {
+        mActivityTestRule.runOnUiThread {
+            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES)
+        }
+    }
+
+    @Test
+    fun takeScreenshotsOfHomeScreen() {
+        onView(withId(R.id.mozac_browser_toolbar_edit_url_view))
+            .check(matches(isDisplayed()))
+            .check(matches(ViewMatchers.hasFocus()))
+        SystemClock.sleep(5000)
+        editURLBar.click()
+        typeInSearchBar("")
+
+        Screengrab.screenshot("Home_View")
+    }
+
+    @Test
+    fun takeScreenshotShortCutsHomeScreen() {
+        homeScreen {
+            addSiteToShortCuts("mozilla.com")
+            addSiteToShortCuts("pocket.com")
+            addSiteToShortCuts("relay.com")
+            addSiteToShortCuts("monitor.firefox.com")
+            TestHelper.mDevice.waitForIdle()
+            Espresso.closeSoftKeyboard()
+            SystemClock.sleep(5000)
+            Screengrab.screenshot("ShortCuts")
+        }
+    }
+
+    @Test
+    fun openWebsiteFocus() {
+        var currentLocale: String = Locale.getDefault().getLanguage()
+
+        editURLBar.click()
+        SystemClock.sleep(1000)
+
+        typeInSearchBar("www.mozilla.org/" + currentLocale + "/firefox/browsers/mobile/focus/")
+        TestHelper.mDevice.waitForIdle()
+        TestHelper.mDevice.pressEnter()
+        waitForWebContent()
+        TestHelper.waitForWebSiteTitleLoad()
+
+        SystemClock.sleep(30000)
+        waitForWebContent()
+        Screengrab.screenshot("FocusWebsite")
+    }
+
+    private fun addSiteToShortCuts(website: String) {
+        editURLBar.click()
+        SystemClock.sleep(1000)
+        typeInSearchBar(website)
+        TestHelper.mDevice.pressEnter()
+        TestHelper.mDevice.waitForIdle()
+        menuButton.click()
+        TestHelper.mDevice.waitForIdle()
+        addToShortCuts()
+        TestHelper.mDevice.waitForIdle()
+        eraseButton.click()
+        TestHelper.mDevice.waitForIdle()
+    }
+    private val editURLBar: UiObject =
+        TestHelper.mDevice.findObject(
+            UiSelector().resourceId("${TestHelper.packageName}:id/mozac_browser_toolbar_edit_url_view")
+        )
+
+    private fun typeInSearchBar(searchString: String) {
+        searchBar.clearTextField()
+        searchBar.text = searchString
+    }
+
+    private val searchBar =
+        TestHelper.mDevice.findObject(UiSelector().resourceId("${TestHelper.packageName}:id/mozac_browser_toolbar_edit_url_view"))
+
+    private val menuButton =
+        TestHelper.mDevice.findObject(UiSelector().resourceId("${TestHelper.packageName}:id/mozac_browser_toolbar_menu"))
+
+    private fun addToShortCuts(): ViewInteraction? = onView(ViewMatchers.withText(R.string.menu_add_to_shortcuts)).perform(
+        ViewActions.click()
+    )
+
+    private val eraseButton =
+        TestHelper.mDevice.findObject(UiSelector().resourceId("${TestHelper.packageName}:id/erase"))
+}
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/SettingsScreenshots.java b/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/SettingsScreenshots.java
deleted file mode 100644
index 6587fbadba46..000000000000
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/SettingsScreenshots.java
+++ /dev/null
@@ -1,281 +0,0 @@
-/* This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-package org.mozilla.focus.screenshots;
-
-import android.content.Context;
-import android.os.SystemClock;
-
-import androidx.preference.PreferenceManager;
-import androidx.test.InstrumentationRegistry;
-import androidx.test.espresso.Espresso;
-import androidx.test.runner.AndroidJUnit4;
-import androidx.test.uiautomator.UiObject;
-import androidx.test.uiautomator.UiScrollable;
-import androidx.test.uiautomator.UiSelector;
-
-import org.junit.Before;
-import org.junit.ClassRule;
-import org.junit.Ignore;
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.mozilla.focus.R;
-
-import java.util.Collections;
-
-import mozilla.components.browser.domains.CustomDomains;
-import tools.fastlane.screengrab.Screengrab;
-import tools.fastlane.screengrab.locale.LocaleTestRule;
-
-import static androidx.test.espresso.Espresso.onView;
-import static androidx.test.espresso.Espresso.openActionBarOverflowOrOptionsMenu;
-import static androidx.test.espresso.action.ViewActions.click;
-import static androidx.test.espresso.assertion.ViewAssertions.matches;
-import static androidx.test.espresso.contrib.RecyclerViewActions.scrollToPosition;
-import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;
-import static androidx.test.espresso.matcher.ViewMatchers.isEnabled;
-import static androidx.test.espresso.matcher.ViewMatchers.withClassName;
-import static androidx.test.espresso.matcher.ViewMatchers.withId;
-import static androidx.test.espresso.matcher.ViewMatchers.withResourceName;
-import static androidx.test.espresso.matcher.ViewMatchers.withText;
-import static org.hamcrest.Matchers.allOf;
-import static org.hamcrest.Matchers.containsString;
-import static org.mozilla.focus.fragment.FirstrunFragment.FIRSTRUN_PREF;
-import static org.mozilla.focus.helpers.EspressoHelper.assertToolbarMatchesText;
-import static org.mozilla.focus.helpers.EspressoHelper.openSettings;
-
-@Ignore("See: https://github.com/mozilla-mobile/mobile-test-eng/issues/305")
-@RunWith(AndroidJUnit4.class)
-public class SettingsScreenshots extends ScreenshotTest {
-
-    @ClassRule
-    public static final LocaleTestRule localeTestRule = new LocaleTestRule();
-
-    @Before
-    public void clearSettings() {
-        PreferenceManager.getDefaultSharedPreferences(
-                InstrumentationRegistry.getInstrumentation().getTargetContext())
-                .edit()
-                .clear()
-                .apply();
-        CustomDomains.INSTANCE.save(
-                InstrumentationRegistry.getInstrumentation().getTargetContext(),
-                Collections.emptyList());
-
-        final Context appContext = InstrumentationRegistry.getInstrumentation()
-                .getTargetContext()
-                .getApplicationContext();
-        PreferenceManager.getDefaultSharedPreferences(appContext)
-                .edit()
-                .putBoolean(FIRSTRUN_PREF, true)
-                .apply();
-    }
-
-    @Test
-    public void takeScreenShotsOfSettings() throws Exception {
-        SystemClock.sleep(5000);
-        openSettings();
-
-        Screengrab.screenshot("Settings_View_Top");
-
-        /* General Settings */
-        onView(withText(R.string.preference_category_general))
-                .perform(click());
-
-        /* Language List (First page only */
-        onView(withText(R.string.preference_language))
-                .perform(click());
-
-        // Cancel button is not translated in some locales, and there are no R.id defined
-        // That can be checked in the language list dialog
-        UiObject CancelBtn =  device.findObject(new UiSelector()
-                .resourceId("android:id/button2")
-                .enabled(true));
-        CancelBtn.waitForExists(waitingTime);
-
-        Screengrab.screenshot("Language_Selection");
-        CancelBtn.click();
-        onView(withText(R.string.preference_language))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("General_Submenu");
-        Espresso.pressBack();
-
-        /* Search Engine List */
-        onView(withText(R.string.preference_category_search))
-                .perform(click());
-        Screengrab.screenshot("Search_Submenu");
-        onView(allOf(withText(R.string.preference_search_engine_label),
-                withResourceName("title")))
-                .perform(click());
-        onView(withText(R.string.preference_search_installed_search_engines))
-                .check(matches(isDisplayed()));
-
-        Screengrab.screenshot("SearchEngine_Selection");
-
-        /* Remove Search Engine page */
-        openActionBarOverflowOrOptionsMenu(InstrumentationRegistry.getContext());
-        device.waitForIdle();       // wait until dialog fully appears
-        onView(withText(R.string.preference_search_remove))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("SearchEngine_Search_Engine_Menu");
-        // Menu items don't have ids, so we have to match by text
-        onView(withText(R.string.preference_search_remove))
-                .perform(click());
-        device.waitForIdle();       // wait until dialog fully disappears
-        assertToolbarMatchesText(R.string.preference_search_remove_title);
-        Screengrab.screenshot("SearchEngine_Remove_Search_Engines");
-        Espresso.pressBack();
-
-        /* Manual Search Engine page */
-        final String addEngineLabel = getString(R.string.preference_search_add2);
-        onView(withText(addEngineLabel))
-                .check(matches(isEnabled()))
-                .perform(click());
-        onView(withId(R.id.edit_engine_name))
-                .check(matches(isEnabled()));
-        Screengrab.screenshot("SearchEngine_Add_Search_Engine");
-        onView(withId(R.id.menu_save_search_engine))
-                .check(matches(isEnabled()))
-                .perform(click());
-        Screengrab.screenshot("SearchEngine_Add_Search_Engine_Warning");
-        onView(withClassName(containsString("ImageButton")))
-                .check(matches(isEnabled()))
-                .perform(click());
-
-        device.waitForIdle();
-        Espresso.pressBack();
-        device.waitForIdle();
-
-        /* Tap autocomplete menu */
-        /*  TODO: Reenable after fixing AndroidX migration issues
-        onView(
-                allOf(withId(R.id.recycler_view),
-                        childAtPosition(
-                                withId(android.R.id.list_container),
-                                0)))
-            .perform(actionOnItemAtPosition(2, click()));
-
-        onView(withText(getString(R.string.preference_autocomplete_subitem_manage_sites)))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("Autocomplete_Menu_Item");
-        */
-
-        /* Add custom URL */
-        /* TODO: Reenable after fixing AndroidX migration issues
-        onView(childAtPosition(withId(R.id.recycler_view), 4)).perform(click());
-
-        //        onView(childAtPosition(withId(R.id.recycler_view), 0)).perform(actionOnItemAtPosition(4, click()));
-
-        final String addCustomURLAction = getString(R.string.preference_autocomplete_action_add);
-        onView(withText(addCustomURLAction))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("Autocomplete_Custom_URL_List");
-
-        onView(withText(addCustomURLAction))
-                .perform(click());
-        onView(withId(R.id.domainView))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("Autocomplete_Add_Custom_URL_Dialog");
-        onView(withId(R.id.save))
-                .perform(click());
-       Screengrab.screenshot("Autocomplete_Add_Custom_URL_Error_Popup");
-
-        onView(withId(R.id.domainView))
-                .perform(replaceText("screenshot.com"), closeSoftKeyboard());
-        onView(withId(R.id.save))
-                .perform(click());
-        SystemClock.sleep(500);
-        Screengrab.screenshot("Autocomplete_Add_Custom_URL_Saved_Popup");
-        onView(withText(addCustomURLAction))
-                .check(matches(isDisplayed()));
-        */
-
-        /* Remove menu */
-        /* TODO: Reenable after fixing AndroidX migration issues
-        final String removeMenu = getString(R.string.preference_autocomplete_menu_remove);
-        openActionBarOverflowOrOptionsMenu(InstrumentationRegistry.getContext());
-        device.waitForIdle();   // wait until dialog fully appears
-        onView(withText(removeMenu))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("Autocomplete_Custom_URL_Remove_Menu_Item");
-        onView(withText(removeMenu))
-                .perform(click());
-        device.waitForIdle();   // wait until dialog fully disappears
-        */
-        /* Remove dialog */
-        /* TODO: Reenable after fixing AndroidX migration issues
-        onView(withText(getString(R.string.preference_autocomplete_title_remove)))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("Autocomplete_Custom_URL_Remove_Dialog");
-        Espresso.pressBack();
-        onView(withText(addCustomURLAction))
-                .check(matches(isDisplayed()));
-        Espresso.pressBack();
-        Espresso.pressBack();
-        Espresso.pressBack();
-        */
-
-        // "Mozilla" submenu
-        onView(withText(R.string.preference_category_mozilla))
-                .perform(click());
-        Screengrab.screenshot("Mozilla_Submenu");
-
-        // "About" screen
-        final String aboutLabel = getString(R.string.preference_about, getString(R.string.app_name));
-
-        onView(withText(aboutLabel))
-                .check(matches(isDisplayed()))
-                .perform(click());
-
-        onView(withId(R.id.infofragment))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("About_Page");
-
-        // leave about page, tap menu and go to settings again
-        device.pressBack();
-
-        // "Your rights" screen
-        final String yourRightsLabel = getString(R.string.menu_rights);
-
-        onView(withText(yourRightsLabel))
-                .check(matches(isDisplayed()))
-                .perform(click());
-
-        onView(withId(R.id.infofragment))
-                .check(matches(isDisplayed()));
-
-        Screengrab.screenshot("YourRights_Page");
-        device.pressBack();
-        device.pressBack();
-
-        // "Privacy & Security" submenu
-        onView(withText(R.string.preference_privacy_and_security_header))
-                .perform(click());
-        Screengrab.screenshot("Privacy_Security_Submenu_top");
-        UiScrollable settingsView = new UiScrollable(new UiSelector().scrollable(true));
-        if (settingsView.exists()) {        // On tablet, this will not be found
-            settingsView.scrollToEnd(5);
-            Screengrab.screenshot("Privacy_Security_Submenu_bottom");
-        }
-
-        // Block Cookies dialog
-        onView(withResourceName("recycler_view"))
-                .perform(scrollToPosition(5));
-        onView(withText(R.string.preference_privacy_category_cookies))
-                .perform(click());
-        CancelBtn.waitForExists(waitingTime);
-        Screengrab.screenshot("Block_cookies_dialog");
-        CancelBtn.click();
-        onView(withText(R.string.preference_privacy_and_security_header))
-                .check(matches(isDisplayed()));
-        device.pressBack();
-
-        // Advanced
-        onView(withText(R.string.preference_category_advanced))
-                .perform(click());
-        onView(withText(R.string.preference_remote_debugging))
-                .check(matches(isDisplayed()));
-        Screengrab.screenshot("Advanced_Page");
-    }
-}
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/SettingsScreenshots.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/SettingsScreenshots.kt
new file mode 100644
index 000000000000..769b484cd21e
--- /dev/null
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/screenshots/SettingsScreenshots.kt
@@ -0,0 +1,70 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+package org.mozilla.focus.screenshots
+
+import android.os.SystemClock
+import androidx.appcompat.app.AppCompatDelegate
+import androidx.appcompat.app.AppCompatDelegate.MODE_NIGHT_YES
+import androidx.test.rule.ActivityTestRule
+import org.junit.Before
+import org.junit.Rule
+import org.junit.Test
+import org.mozilla.focus.activity.MainActivity
+import org.mozilla.focus.activity.robots.homeScreen
+import org.mozilla.focus.activity.robots.searchScreen
+import org.mozilla.focus.helpers.MainActivityFirstrunTestRule
+import org.mozilla.focus.helpers.TestHelper
+import tools.fastlane.screengrab.Screengrab
+import tools.fastlane.screengrab.locale.LocaleTestRule
+
+class SettingsScreenshots : ScreenshotTest() {
+    @Rule
+    @JvmField
+    var mActivityTestRule: ActivityTestRule<MainActivity> =
+        object : MainActivityFirstrunTestRule(true, false) {
+        }
+
+    @Before
+    fun setUp() {
+        mActivityTestRule.runOnUiThread {
+            AppCompatDelegate.setDefaultNightMode(MODE_NIGHT_YES)
+        }
+    }
+
+    @Rule
+    @JvmField
+    val localeTestRule = LocaleTestRule()
+
+    @Test
+    fun takeScreenshotOfSiteSettings() {
+        val pageUrl = "https://www.mozilla.org"
+
+        searchScreen {
+        }.loadPage(pageUrl) {
+            waitForSiteSecurityIconShown()
+            verifySiteSecurityIconShown()
+            SystemClock.sleep(5000)
+            TestHelper.waitForWebSiteTitleLoad()
+            TestHelper.waitForWebContent()
+            SystemClock.sleep(3000)
+        }.openSiteSettingsMenu {
+            SystemClock.sleep(5000)
+            Screengrab.screenshot("SiteSettingsSubMenu_View")
+        }
+    }
+
+    @Test
+    fun takeScreenshotOfSearchSettings() {
+        homeScreen {
+        }.openMainMenu {
+        }.openSettings {
+            verifySettingsMenuItems()
+        }.openSearchSettingsMenu {
+            verifySearchSettingsItems()
+            openSearchEngineSubMenu()
+            SystemClock.sleep(5000)
+            Screengrab.screenshot("SearchEngineSubMenu_View")
+        }
+    }
+}
