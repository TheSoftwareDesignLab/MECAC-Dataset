diff --git a/focus-android/app/build.gradle b/focus-android/app/build.gradle
index 874e3c495493..708e455db9ac 100644
--- a/focus-android/app/build.gradle
+++ b/focus-android/app/build.gradle
@@ -56,6 +56,10 @@ android {
         }
     }
     testOptions {
+        unitTests {
+            includeAndroidResources = true
+        }
+
         unitTests.all {
             jacoco {
                 includeNoLocationClasses = true
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/session/NotificationSessionObserverTest.java b/focus-android/app/src/test/java/org/mozilla/focus/session/NotificationSessionObserverTest.java
index 4fbf8da5fcaf..28a2224354a4 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/session/NotificationSessionObserverTest.java
+++ b/focus-android/app/src/test/java/org/mozilla/focus/session/NotificationSessionObserverTest.java
@@ -31,6 +31,7 @@ public void testEmptySession() {
 
         verify(context).stopService(anyIntent());
         verify(context, never()).startService(anyIntent());
+        verify(context, never()).startForegroundService(anyIntent());
     }
 
     @Test
@@ -42,6 +43,7 @@ public void testNullSession() {
 
         verify(context, never()).stopService(anyIntent());
         verify(context, never()).startService(anyIntent());
+        verify(context, never()).startForegroundService(anyIntent());
     }
 
     @Test
@@ -54,7 +56,7 @@ public void testSingleSession() {
         observer.onChanged(sessions);
 
         verify(context, never()).stopService(anyIntent());
-        verify(context).startService(anyIntent());
+        verify(context).startForegroundService(anyIntent());
     }
 
     @Test
@@ -70,7 +72,7 @@ public void testMultipleSessions() {
         observer.onChanged(sessions);
 
         verify(context, never()).stopService(anyIntent());
-        verify(context).startService(anyIntent());
+        verify(context).startForegroundService(anyIntent());
     }
 
     private Intent anyIntent() {
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/session/SessionManagerTest.java b/focus-android/app/src/test/java/org/mozilla/focus/session/SessionManagerTest.java
index 4c52ebd6d4b1..dde65e908ab6 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/session/SessionManagerTest.java
+++ b/focus-android/app/src/test/java/org/mozilla/focus/session/SessionManagerTest.java
@@ -222,7 +222,7 @@ public void testRemovingSessions() {
 
         sessionManager.createSession(Source.USER_ENTERED, TEST_URL);
         sessionManager.createSession(Source.VIEW, TEST_URL_2);
-        sessionManager.createSession(Source.CUSTOM_TAB, TEST_URL_3);
+        sessionManager.createSession(Source.SHARE, TEST_URL_3);
 
         {
             final List<Session> sessions = sessionManager.getSessions().getValue();
@@ -231,7 +231,7 @@ public void testRemovingSessions() {
 
         {
             final Session currentSession = sessionManager.getCurrentSession();
-            assertEquals(Source.CUSTOM_TAB, currentSession.getSource());
+            assertEquals(Source.SHARE, currentSession.getSource());
             assertEquals(TEST_URL_3, currentSession.getUrl().getValue());
         }
 
@@ -263,7 +263,7 @@ public void testRemovingAllSessions() {
 
         sessionManager.createSession(Source.USER_ENTERED, TEST_URL);
         sessionManager.createSession(Source.VIEW, TEST_URL_2);
-        sessionManager.createSession(Source.CUSTOM_TAB, TEST_URL_3);
+        sessionManager.createSession(Source.SHARE, TEST_URL_3);
 
         assertTrue(sessionManager.hasSession());
         assertEquals(3, sessionManager.getSessions().getValue().size());
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/utils/SupportUtilsTest.java b/focus-android/app/src/test/java/org/mozilla/focus/utils/SupportUtilsTest.java
index 9a468f612356..2214ea20c9ab 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/utils/SupportUtilsTest.java
+++ b/focus-android/app/src/test/java/org/mozilla/focus/utils/SupportUtilsTest.java
@@ -1,5 +1,7 @@
 package org.mozilla.focus.utils;
 
+import android.content.Context;
+
 import org.junit.Test;
 import org.junit.runner.RunWith;
 import org.robolectric.RobolectricTestRunner;
@@ -25,12 +27,15 @@ public void cleanup() {
      */
     @Test
     public void getSumoURLForTopic() throws Exception {
+        final Context context = RuntimeEnvironment.application;
+        final String versionName = context.getPackageManager().getPackageInfo(context.getPackageName(), 0).versionName;
+
         Locale.setDefault(Locale.GERMANY);
-        assertEquals("https://support.mozilla.org/1/mobile/null/Android/de-DE/foobar",
+        assertEquals("https://support.mozilla.org/1/mobile/" + versionName + "/Android/de-DE/foobar",
                 SupportUtils.getSumoURLForTopic(RuntimeEnvironment.application, "foobar"));
 
         Locale.setDefault(Locale.CANADA_FRENCH);
-        assertEquals("https://support.mozilla.org/1/mobile/null/Android/fr-CA/foobar",
+        assertEquals("https://support.mozilla.org/1/mobile/" + versionName + "/Android/fr-CA/foobar",
                 SupportUtils.getSumoURLForTopic(RuntimeEnvironment.application, "foobar"));
     }
 
diff --git a/focus-android/app/src/testWebview/java/org/mozilla/focus/web/WebViewProviderTest.java b/focus-android/app/src/testWebview/java/org/mozilla/focus/web/WebViewProviderTest.java
index 0afdc4c77459..ceebf5ad577f 100644
--- a/focus-android/app/src/testWebview/java/org/mozilla/focus/web/WebViewProviderTest.java
+++ b/focus-android/app/src/testWebview/java/org/mozilla/focus/web/WebViewProviderTest.java
@@ -1,5 +1,6 @@
 package org.mozilla.focus.web;
 
+import android.content.Context;
 import android.os.Build;
 import android.webkit.WebSettings;
 
@@ -46,7 +47,10 @@ public class WebViewProviderTest {
     }
 
     @Test
-    public void buildUserAgentString() {
+    public void buildUserAgentString() throws Exception {
+        final Context context = RuntimeEnvironment.application;
+        final String versionName = context.getPackageManager().getPackageInfo(context.getPackageName(), 0).versionName;
+
         // It's actually possible to get a normal webview instance with real settings and user
         // agent string, which buildUserAgentString() can successfully operate on. However we can't
         // easily test that the output is expected (without simply replicating what buildUserAgentString does),
@@ -55,8 +59,8 @@ public void buildUserAgentString() {
         WebSettings testSettings = mock(WebSettings.class);
         when(testSettings.getUserAgentString()).thenReturn("Mozilla/5.0 (Linux; U; Android 4.0.3; ko-kr; LG-L160L Build/IML74K) AppleWebkit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30");
 
-        assertEquals("Mozilla/5.0 (Linux; Android " + Build.VERSION.RELEASE + ") AppleWebkit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30 fakeappname/null",
-                WebViewProvider.buildUserAgentString(RuntimeEnvironment.application, testSettings, "fakeappname"));
+        assertEquals("Mozilla/5.0 (Linux; Android " + Build.VERSION.RELEASE + ") AppleWebkit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30 fakeappname/" + versionName,
+                WebViewProvider.buildUserAgentString(context, testSettings, "fakeappname"));
     }
 
 }
\ No newline at end of file
diff --git a/focus-android/app/src/testWebview/java/org/mozilla/focus/webview/matcher/UrlMatcherTest.java b/focus-android/app/src/testWebview/java/org/mozilla/focus/webview/matcher/UrlMatcherTest.java
index 6cc6a620e370..7e7561ef14ca 100644
--- a/focus-android/app/src/testWebview/java/org/mozilla/focus/webview/matcher/UrlMatcherTest.java
+++ b/focus-android/app/src/testWebview/java/org/mozilla/focus/webview/matcher/UrlMatcherTest.java
@@ -84,7 +84,7 @@ public void categoriesWork() {
 
                 categoryPrefMap.put(categoryName, categoryName);
             }
-            editor.commit();
+            editor.apply();
         }
 
         final UrlMatcher matcher = new UrlMatcher(RuntimeEnvironment.application, categoryPrefMap, categories, null);
@@ -121,7 +121,7 @@ public void categoriesWork() {
                     }
                 }
             }
-            editor.commit();
+            editor.apply();
 
             for (int currentCategory = 0; currentCategory < CAT_COUNT; currentCategory++) {
                 final int currentBit = 1 << currentCategory;
