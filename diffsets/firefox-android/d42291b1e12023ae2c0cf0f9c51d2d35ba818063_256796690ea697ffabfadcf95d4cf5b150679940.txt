diff --git a/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationDialogFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationDialogFragment.kt
index 35b1f143b271..3778f8eeb94f 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationDialogFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationDialogFragment.kt
@@ -89,7 +89,7 @@ class BiometricAuthenticationDialogFragment : AppCompatDialogFragment(), Lifecyc
     }
 
     private fun biometricNewSessionButtonClicked() {
-        val listener = targetFragment as BiometricAuthenticationListener?
+        val listener = parentFragment as BiometricAuthenticationListener?
 
         if (openedFromExternalLink) {
             listener?.biometricCreateNewSessionWithLink()
@@ -111,7 +111,7 @@ class BiometricAuthenticationDialogFragment : AppCompatDialogFragment(), Lifecyc
     }
 
     fun onAuthenticated() {
-        val listener = targetFragment as BiometricAuthenticationListener?
+        val listener = parentFragment as BiometricAuthenticationListener?
         if (listener != null) {
             listener.onAuthSuccess()
             dismiss()
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/AddToHomescreenDialogFragment.java b/focus-android/app/src/main/java/org/mozilla/focus/fragment/AddToHomescreenDialogFragment.java
deleted file mode 100644
index 065c5d79e046..000000000000
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/AddToHomescreenDialogFragment.java
+++ /dev/null
@@ -1,123 +0,0 @@
-/* -*- Mode: Java; c-basic-offset: 4; tab-width: 4; indent-tabs-mode: nil; -*-
- * This Source Code Form is subject to the terms of the Mozilla Public
- * License, v. 2.0. If a copy of the MPL was not distributed with this
- * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
-
-package org.mozilla.focus.fragment;
-
-import android.app.Dialog;
-import android.graphics.Bitmap;
-import android.os.Bundle;
-import android.preference.PreferenceManager;
-import android.support.annotation.NonNull;
-import android.support.v4.app.DialogFragment;
-import android.support.v7.app.AlertDialog;
-import android.text.TextUtils;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.Window;
-import android.view.WindowManager;
-import android.widget.Button;
-import android.widget.EditText;
-import android.widget.ImageView;
-import android.widget.LinearLayout;
-import org.mozilla.focus.R;
-import org.mozilla.focus.shortcut.HomeScreen;
-import org.mozilla.focus.shortcut.IconGenerator;
-import org.mozilla.focus.telemetry.TelemetryWrapper;
-
-/**
- * Fragment displaying a dialog where a user can change the title for a homescreen shortcut
- */
-public class AddToHomescreenDialogFragment extends DialogFragment {
-    public static final String FRAGMENT_TAG = "add-to-homescreen-prompt-dialog";
-    private static final String URL = "url";
-    private static final String TITLE = "title";
-    private static final String BLOCKING_ENABLED = "blocking_enabled";
-    private static final String REQUEST_DESKTOP = "request_desktop";
-
-    public static AddToHomescreenDialogFragment newInstance(final String url, final String title, final boolean blockingEnabled, final boolean requestDesktop) {
-        AddToHomescreenDialogFragment frag = new AddToHomescreenDialogFragment();
-        final Bundle args = new Bundle();
-        args.putString(URL, url);
-        args.putString(TITLE, title);
-        args.putBoolean(BLOCKING_ENABLED, blockingEnabled);
-        args.putBoolean(REQUEST_DESKTOP, requestDesktop);
-        frag.setArguments(args);
-        return frag;
-    }
-
-    @NonNull
-    @Override
-    public AlertDialog onCreateDialog(Bundle bundle) {
-        final String url = getArguments().getString(URL);
-        final String title = getArguments().getString(TITLE);
-        final boolean blockingEnabled = getArguments().getBoolean(BLOCKING_ENABLED);
-        final boolean requestDesktop = getArguments().getBoolean(REQUEST_DESKTOP);
-
-        final AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.DialogStyle);
-        builder.setCancelable(true);
-        builder.setTitle(getActivity().getString(R.string.menu_add_to_home_screen));
-
-        final LayoutInflater inflater = getActivity().getLayoutInflater();
-        final View dialogView = inflater.inflate(R.layout.add_to_homescreen, null);
-        builder.setView(dialogView);
-
-        // For the dialog we display the Pre Oreo version of the icon because the Oreo+
-        // adaptive launcher icon does not have a mask applied until we create the shortcut
-        final Bitmap iconBitmap = IconGenerator.generateLauncherIconPreOreo(getContext(), IconGenerator.getRepresentativeCharacter(url));
-        final ImageView iconView = dialogView.findViewById(R.id.homescreen_icon);
-        iconView.setImageBitmap(iconBitmap);
-
-        final ImageView blockIcon = dialogView.findViewById(R.id.homescreen_dialog_block_icon);
-        blockIcon.setImageResource(R.drawable.ic_tracking_protection_disabled);
-
-        final Button addToHomescreenDialogCancelButton = dialogView.findViewById(R.id.addtohomescreen_dialog_cancel);
-        final Button addToHomescreenDialogConfirmButton = dialogView.findViewById(R.id.addtohomescreen_dialog_add);
-
-        final LinearLayout warning = dialogView.findViewById(R.id.homescreen_dialog_warning_layout);
-        warning.setVisibility(blockingEnabled ? View.GONE : View.VISIBLE);
-
-        final EditText editableTitle = dialogView.findViewById(R.id.edit_title);
-
-        if (!TextUtils.isEmpty(title)) {
-            editableTitle.setText(title);
-            editableTitle.setSelection(title.length());
-        }
-
-        addToHomescreenDialogCancelButton.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                TelemetryWrapper.cancelAddToHomescreenShortcutEvent();
-                dismiss();
-            }
-        });
-
-        addToHomescreenDialogConfirmButton.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                HomeScreen.installShortCut(getContext(), IconGenerator.generateLauncherIcon(getContext(), url), url,
-                        editableTitle.getText().toString().trim(), blockingEnabled, requestDesktop);
-                TelemetryWrapper.addToHomescreenShortcutEvent();
-                PreferenceManager.getDefaultSharedPreferences(getContext()).edit()
-                        .putBoolean(getContext().getString(R.string.has_added_to_home_screen),
-                                true).apply();
-                dismiss();
-            }
-        });
-        AlertDialog dialog = builder.create();
-        return dialog;
-    }
-
-    @Override
-    public void onActivityCreated(Bundle savedInstanceState) {
-        super.onActivityCreated(savedInstanceState);
-        final Dialog dialog = getDialog();
-        if (dialog != null) {
-            final Window window = dialog.getWindow();
-            if (window != null) {
-                window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);
-            }
-        }
-    }
-}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/AddToHomescreenDialogFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/AddToHomescreenDialogFragment.kt
new file mode 100644
index 000000000000..375b17dc84e9
--- /dev/null
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/AddToHomescreenDialogFragment.kt
@@ -0,0 +1,128 @@
+/* -*- Mode: Java; c-basic-offset: 4; tab-width: 4; indent-tabs-mode: nil; -*-
+ * This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.focus.fragment
+
+import android.os.Bundle
+import android.preference.PreferenceManager
+import android.support.v4.app.DialogFragment
+import android.support.v7.app.AlertDialog
+import android.text.TextUtils
+import android.view.View
+import android.view.WindowManager
+import android.widget.Button
+import android.widget.EditText
+import android.widget.ImageView
+import android.widget.LinearLayout
+import org.mozilla.focus.R
+import org.mozilla.focus.shortcut.HomeScreen
+import org.mozilla.focus.shortcut.IconGenerator
+import org.mozilla.focus.telemetry.TelemetryWrapper
+
+/**
+ * Fragment displaying a dialog where a user can change the title for a homescreen shortcut
+ */
+class AddToHomescreenDialogFragment : DialogFragment() {
+
+    @Suppress("LongMethod")
+    override fun onCreateDialog(bundle: Bundle?): AlertDialog {
+        val url = arguments!!.getString(URL)
+        val title = arguments!!.getString(TITLE)
+        val blockingEnabled = arguments!!.getBoolean(BLOCKING_ENABLED)
+        val requestDesktop = arguments!!.getBoolean(REQUEST_DESKTOP)
+
+        val builder = AlertDialog.Builder(activity!!, R.style.DialogStyle)
+        builder.setCancelable(true)
+        builder.setTitle(requireActivity().getString(R.string.menu_add_to_home_screen))
+
+        val inflater = requireActivity().layoutInflater
+        val dialogView = inflater.inflate(R.layout.add_to_homescreen, null)
+        builder.setView(dialogView)
+
+        // For the dialog we display the Pre Oreo version of the icon because the Oreo+
+        // adaptive launcher icon does not have a mask applied until we create the shortcut
+        val iconBitmap = IconGenerator.generateLauncherIconPreOreo(
+            context!!,
+            IconGenerator.getRepresentativeCharacter(url)
+        )
+        val iconView = dialogView.findViewById<ImageView>(R.id.homescreen_icon)
+        iconView.setImageBitmap(iconBitmap)
+
+        val blockIcon = dialogView.findViewById<ImageView>(R.id.homescreen_dialog_block_icon)
+        blockIcon.setImageResource(R.drawable.ic_tracking_protection_disabled)
+
+        val addToHomescreenDialogCancelButton =
+            dialogView.findViewById<Button>(R.id.addtohomescreen_dialog_cancel)
+        val addToHomescreenDialogConfirmButton =
+            dialogView.findViewById<Button>(R.id.addtohomescreen_dialog_add)
+
+        val warning = dialogView.findViewById<LinearLayout>(R.id.homescreen_dialog_warning_layout)
+        warning.visibility = if (blockingEnabled) View.GONE else View.VISIBLE
+
+        val editableTitle = dialogView.findViewById<EditText>(R.id.edit_title)
+
+        if (!TextUtils.isEmpty(title)) {
+            editableTitle.setText(title)
+            editableTitle.setSelection(title!!.length)
+        }
+
+        addToHomescreenDialogCancelButton.setOnClickListener {
+            TelemetryWrapper.cancelAddToHomescreenShortcutEvent()
+            dismiss()
+        }
+
+        addToHomescreenDialogConfirmButton.setOnClickListener {
+            HomeScreen.installShortCut(
+                context,
+                IconGenerator.generateLauncherIcon(context!!, url),
+                url,
+                editableTitle.text.toString().trim { it <= ' ' },
+                blockingEnabled,
+                requestDesktop
+            )
+            TelemetryWrapper.addToHomescreenShortcutEvent()
+            PreferenceManager.getDefaultSharedPreferences(context).edit()
+                .putBoolean(
+                    context!!.getString(R.string.has_added_to_home_screen),
+                    true
+                ).apply()
+            dismiss()
+        }
+        return builder.create()
+    }
+
+    override fun onActivityCreated(savedInstanceState: Bundle?) {
+        super.onActivityCreated(savedInstanceState)
+        val dialog = dialog
+        if (dialog != null) {
+            val window = dialog.window
+            window?.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE)
+        }
+    }
+
+    companion object {
+        val FRAGMENT_TAG = "add-to-homescreen-prompt-dialog"
+        private val URL = "url"
+        private val TITLE = "title"
+        private val BLOCKING_ENABLED = "blocking_enabled"
+        private val REQUEST_DESKTOP = "request_desktop"
+
+        fun newInstance(
+            url: String,
+            title: String,
+            blockingEnabled: Boolean,
+            requestDesktop: Boolean
+        ): AddToHomescreenDialogFragment {
+            val frag = AddToHomescreenDialogFragment()
+            val args = Bundle()
+            args.putString(URL, url)
+            args.putString(TITLE, title)
+            args.putBoolean(BLOCKING_ENABLED, blockingEnabled)
+            args.putBoolean(REQUEST_DESKTOP, requestDesktop)
+            frag.arguments = args
+            return frag
+        }
+    }
+}
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
index 140915a63fd6..a06098f4e9ca 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
@@ -668,16 +668,15 @@ class BrowserFragment : WebFragment(), LifecycleObserver, View.OnClickListener,
     }
 
     internal fun showDownloadPromptDialog(download: Download) {
-        val fragmentManager = fragmentManager
+        val fragmentManager = childFragmentManager
 
-        if (fragmentManager!!.findFragmentByTag(DownloadDialogFragment.FRAGMENT_TAG) != null) {
+        if (fragmentManager.findFragmentByTag(DownloadDialogFragment.FRAGMENT_TAG) != null) {
             // We are already displaying a download dialog fragment (Probably a restored fragment).
             // No need to show another one.
             return
         }
 
         val downloadDialogFragment = DownloadDialogFragment.newInstance(download)
-        downloadDialogFragment.setTargetFragment(this@BrowserFragment, REQUEST_CODE_DOWNLOAD_DIALOG)
 
         try {
             downloadDialogFragment.show(fragmentManager, DownloadDialogFragment.FRAGMENT_TAG)
@@ -749,9 +748,9 @@ class BrowserFragment : WebFragment(), LifecycleObserver, View.OnClickListener,
     }
 
     internal fun showAddToHomescreenDialog(url: String, title: String) {
-        val fragmentManager = fragmentManager
+        val fragmentManager = childFragmentManager
 
-        if (fragmentManager!!.findFragmentByTag(AddToHomescreenDialogFragment.FRAGMENT_TAG) != null) {
+        if (fragmentManager.findFragmentByTag(AddToHomescreenDialogFragment.FRAGMENT_TAG) != null) {
             // We are already displaying a homescreen dialog fragment (Probably a restored fragment).
             // No need to show another one.
             return
@@ -763,12 +762,12 @@ class BrowserFragment : WebFragment(), LifecycleObserver, View.OnClickListener,
             session.trackerBlockingEnabled,
             session.shouldRequestDesktopSite
         )
-        addToHomescreenDialogFragment.setTargetFragment(
-            this@BrowserFragment,
-            REQUEST_CODE_ADD_TO_HOMESCREEN_DIALOG)
 
         try {
-            addToHomescreenDialogFragment.show(fragmentManager, AddToHomescreenDialogFragment.FRAGMENT_TAG)
+            addToHomescreenDialogFragment.show(
+                fragmentManager,
+                AddToHomescreenDialogFragment.FRAGMENT_TAG
+            )
         } catch (e: IllegalStateException) {
             // It can happen that at this point in time the activity is already in the background
             // and onSaveInstanceState() has already been called. Fragment transactions are not
@@ -854,7 +853,7 @@ class BrowserFragment : WebFragment(), LifecycleObserver, View.OnClickListener,
 
     @RequiresApi(api = Build.VERSION_CODES.M)
     private fun displayBiometricPromptIfNeeded() {
-        val fragmentManager = requireActivity().supportFragmentManager
+        val fragmentManager = childFragmentManager
 
         // Check that we need to auth and that the fragment isn't already displayed
         if (biometricController!!.needsAuth || openedFromExternalLink) {
@@ -867,12 +866,16 @@ class BrowserFragment : WebFragment(), LifecycleObserver, View.OnClickListener,
                 return
             }
 
-            biometricController!!.biometricFragment!!.setTargetFragment(
-                this@BrowserFragment, REQUEST_CODE_BIOMETRIC_PROMPT)
-            biometricController!!.biometricFragment!!.show(
-                fragmentManager,
-                BiometricAuthenticationDialogFragment.FRAGMENT_TAG
-            )
+            try {
+                biometricController!!.biometricFragment!!.show(
+                    fragmentManager,
+                    BiometricAuthenticationDialogFragment.FRAGMENT_TAG
+                )
+            } catch (e: IllegalStateException) {
+                // It can happen that at this point in time the activity is already in the background
+                // and onSaveInstanceState() has already been called. Fragment transactions are not
+                // allowed after that anymore.
+            }
         } else {
             view!!.alpha = 1f
         }
@@ -1476,9 +1479,6 @@ class BrowserFragment : WebFragment(), LifecycleObserver, View.OnClickListener,
         private const val RESTORE_KEY_DOWNLOAD = "download"
 
         private const val INITIAL_PROGRESS = 5
-        private const val REQUEST_CODE_DOWNLOAD_DIALOG = 300
-        private const val REQUEST_CODE_ADD_TO_HOMESCREEN_DIALOG = 301
-        private const val REQUEST_CODE_BIOMETRIC_PROMPT = 302
 
         @JvmStatic
         fun createForSession(session: Session): BrowserFragment {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/DownloadDialogFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/DownloadDialogFragment.kt
index 38d7095020fa..a6b14ea95d8a 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/DownloadDialogFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/DownloadDialogFragment.kt
@@ -61,7 +61,7 @@ class DownloadDialogFragment : DialogFragment() {
     }
 
     private fun sendDownloadDialogButtonClicked(download: Download?, shouldDownload: Boolean) {
-        val listener = targetFragment as DownloadDialogListener?
+        val listener = parentFragment as DownloadDialogListener?
         listener?.onFinishDownloadDialog(download, shouldDownload)
         dismiss()
     }
