diff --git a/focus-android/app/build.gradle b/focus-android/app/build.gradle
index 146f36b86e12..ad0046e75972 100644
--- a/focus-android/app/build.gradle
+++ b/focus-android/app/build.gradle
@@ -42,9 +42,11 @@ android {
             minifyEnabled true
             shrinkResources true
             proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
+            matchingFallbacks = ['release']
         }
         debug {
             applicationIdSuffix ".debug"
+            matchingFallbacks = ['debug']
         }
         beta {
             initWith release
@@ -155,13 +157,16 @@ dependencies {
     implementation "org.mozilla.components:feature-tabs:${AndroidComponents.VERSION}"
     implementation "org.mozilla.components:lib-crash:${AndroidComponents.VERSION}"
     implementation "org.mozilla.components:lib-state:${AndroidComponents.VERSION}"
-    implementation "org.mozilla.components:service-telemetry:$mozilla_components_version_telemetry"
+    implementation "org.mozilla.components:service-glean:${AndroidComponents.VERSION}"
     implementation "org.mozilla.components:service-location:${AndroidComponents.VERSION}"
     implementation "org.mozilla.components:support-ktx:${AndroidComponents.VERSION}"
     implementation "org.mozilla.components:support-utils:${AndroidComponents.VERSION}"
     implementation "org.mozilla.components:ui-autocomplete:${AndroidComponents.VERSION}"
     implementation "org.mozilla.components:ui-colors:${AndroidComponents.VERSION}"
 
+    implementation 'com.squareup.okhttp3:okhttp:3.14.1'
+    implementation project(':service-telemetry')
+
     implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
     implementation "org.jetbrains.kotlinx:kotlinx-coroutines-android:${coroutines_version}"
 
diff --git a/focus-android/service-telemetry/.gitignore b/focus-android/service-telemetry/.gitignore
new file mode 100644
index 000000000000..42afabfd2abe
--- /dev/null
+++ b/focus-android/service-telemetry/.gitignore
@@ -0,0 +1 @@
+/build
\ No newline at end of file
diff --git a/focus-android/service-telemetry/README.md b/focus-android/service-telemetry/README.md
new file mode 100644
index 000000000000..cf75c3fe43e0
--- /dev/null
+++ b/focus-android/service-telemetry/README.md
@@ -0,0 +1,9 @@
+# [Android Components](../../../README.md) > Service > Telemetry
+
+A generic library for sending telemetry pings from Android applications to Mozilla's telemetry service.
+
+## Deprecated
+This component is now deprecated: only maintenance fixes will be provided and no new feature development will happen.
+Use [the Glean SDK](../glean) instead.
+
+This instance is a vendored version of the Android Components library taken from the 57.0.9 release.
\ No newline at end of file
diff --git a/focus-android/service-telemetry/build.gradle b/focus-android/service-telemetry/build.gradle
new file mode 100644
index 000000000000..df05c0affd93
--- /dev/null
+++ b/focus-android/service-telemetry/build.gradle
@@ -0,0 +1,40 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+apply plugin: 'com.android.library'
+apply plugin: 'kotlin-android'
+
+android {
+    compileSdkVersion 29
+
+    defaultConfig {
+        minSdkVersion 21
+        targetSdkVersion 29
+    }
+
+    buildTypes {
+        release {
+            minifyEnabled false
+            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
+        }
+    }
+}
+
+dependencies {
+    implementation "org.mozilla.components:support-base:${AndroidComponents.VERSION}"
+    implementation "org.mozilla.components:concept-fetch:${AndroidComponents.VERSION}"
+
+    implementation "androidx.annotation:annotation:$support_libraries_version"
+
+    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
+
+    testImplementation "junit:junit:4.12"
+    testImplementation "org.robolectric:robolectric:4.4" // required to support api level 28
+    testImplementation 'org.mockito:mockito-core:2.24.5'
+
+    testImplementation 'com.squareup.okhttp3:mockwebserver:3.11.0'
+
+    testImplementation "org.mozilla.components:lib-fetch-httpurlconnection:${AndroidComponents.VERSION}"
+    testImplementation "org.mozilla.components:lib-fetch-okhttp:${AndroidComponents.VERSION}"
+}
\ No newline at end of file
diff --git a/focus-android/service-telemetry/proguard-rules.pro b/focus-android/service-telemetry/proguard-rules.pro
new file mode 100644
index 000000000000..481bb4348141
--- /dev/null
+++ b/focus-android/service-telemetry/proguard-rules.pro
@@ -0,0 +1,21 @@
+# Add project specific ProGuard rules here.
+# You can control the set of applied configuration files using the
+# proguardFiles setting in build.gradle.
+#
+# For more details, see
+#   http://developer.android.com/guide/developing/tools/proguard.html
+
+# If your project uses WebView with JS, uncomment the following
+# and specify the fully qualified class name to the JavaScript interface
+# class:
+#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
+#   public *;
+#}
+
+# Uncomment this to preserve the line number information for
+# debugging stack traces.
+#-keepattributes SourceFile,LineNumberTable
+
+# If you keep the line number information, uncomment this to
+# hide the original source file name.
+#-renamesourcefileattribute SourceFile
\ No newline at end of file
diff --git a/focus-android/service-telemetry/src/main/AndroidManifest.xml b/focus-android/service-telemetry/src/main/AndroidManifest.xml
new file mode 100644
index 000000000000..288b897fc012
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/AndroidManifest.xml
@@ -0,0 +1,16 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!-- This Source Code Form is subject to the terms of the Mozilla Public
+   - License, v. 2.0. If a copy of the MPL was not distributed with this
+   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
+<manifest package="org.mozilla.telemetry"
+    xmlns:android="http://schemas.android.com/apk/res/android">
+
+    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
+
+    <application>
+        <service
+            android:name=".schedule.jobscheduler.TelemetryJobService"
+            android:permission="android.permission.BIND_JOB_SERVICE" />
+    </application>
+
+</manifest>
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/Telemetry.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/Telemetry.java
new file mode 100644
index 000000000000..1eadb4bc63ab
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/Telemetry.java
@@ -0,0 +1,315 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.annotation.RestrictTo;
+import androidx.annotation.VisibleForTesting;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.event.TelemetryEvent;
+import org.mozilla.telemetry.measurement.ClientIdMeasurement;
+import org.mozilla.telemetry.measurement.DefaultSearchMeasurement;
+import org.mozilla.telemetry.measurement.EventsMeasurement;
+import org.mozilla.telemetry.measurement.ExperimentsMapMeasurement;
+import org.mozilla.telemetry.net.TelemetryClient;
+import org.mozilla.telemetry.ping.TelemetryCorePingBuilder;
+import org.mozilla.telemetry.ping.TelemetryEventPingBuilder;
+import org.mozilla.telemetry.ping.TelemetryMobileEventPingBuilder;
+import org.mozilla.telemetry.ping.TelemetryPing;
+import org.mozilla.telemetry.ping.TelemetryPingBuilder;
+import org.mozilla.telemetry.ping.TelemetryPocketEventPingBuilder;
+import org.mozilla.telemetry.schedule.TelemetryScheduler;
+import org.mozilla.telemetry.storage.TelemetryStorage;
+
+import java.util.Collection;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Map;
+import java.util.concurrent.ExecutorService;
+import java.util.concurrent.Executors;
+
+import kotlin.Unit;
+import kotlin.jvm.functions.Function0;
+
+/**
+ * @deprecated The whole service-telemetry library is deprecated. Please use the
+ *              <a href="https://mozilla.github.io/glean/book/index.html">Glean SDK</a> instead.
+ */
+//@Deprecated
+public class Telemetry {
+    private final TelemetryConfiguration configuration;
+    private final TelemetryStorage storage;
+    private final TelemetryClient client;
+    private final TelemetryScheduler scheduler;
+
+    private final Map<String, TelemetryPingBuilder> pingBuilders;
+    private final ExecutorService executor = Executors.newSingleThreadExecutor();
+
+    public Telemetry(TelemetryConfiguration configuration, TelemetryStorage storage,
+                     TelemetryClient client, TelemetryScheduler scheduler) {
+        this.configuration = configuration;
+        this.storage = storage;
+        this.client = client;
+        this.scheduler = scheduler;
+
+        pingBuilders = new HashMap<>();
+    }
+
+    public Telemetry addPingBuilder(TelemetryPingBuilder builder) {
+        pingBuilders.put(builder.getType(), builder);
+        return this;
+    }
+
+    /**
+     * Returns a previously added ping builder or null if no ping builder of the given type has been added.
+     */
+    @Nullable
+    public TelemetryPingBuilder getPingBuilder(final String pingType) {
+        return pingBuilders.get(pingType);
+    }
+
+    public Telemetry queuePing(final String pingType) {
+        if (!configuration.isCollectionEnabled()) {
+            return this;
+        }
+
+        executor.submit(new Runnable() {
+            @Override
+            public void run() {
+                final TelemetryPingBuilder pingBuilder = pingBuilders.get(pingType);
+
+                if (!pingBuilder.canBuild()) {
+                    // We do not always want to build a ping. Sometimes we want to collect enough data so that
+                    // it is worth sending a ping. Here we exit early if the ping builder implementation
+                    // signals that it's not time to build a ping yet.
+                    return;
+                }
+
+                final TelemetryPing ping = pingBuilder.build();
+                storage.store(ping);
+            }
+        });
+
+        return this;
+    }
+
+    public Telemetry queueEvent(final TelemetryEvent event) {
+        if (!configuration.isCollectionEnabled()) {
+            return this;
+        }
+
+        executor.submit(new Runnable() {
+            @Override
+            public void run() {
+                // We migrated from focus-event to mobile-event and unfortunately, this code was hard-coded to expect
+                // a focus-event ping builder. We work around this by checking our new hardcoded code first for the new
+                // ping type and then falling back on the legacy ping type.
+                final TelemetryPingBuilder mobileEventBuilder = pingBuilders.get(TelemetryMobileEventPingBuilder.TYPE);
+                final TelemetryPingBuilder focusEventBuilder = pingBuilders.get(TelemetryEventPingBuilder.TYPE);
+                final EventsMeasurement measurement;
+                final String addedPingType;
+                if (mobileEventBuilder != null) {
+                    measurement = ((TelemetryMobileEventPingBuilder) mobileEventBuilder).getEventsMeasurement();
+                    addedPingType = mobileEventBuilder.getType();
+                } else if (focusEventBuilder != null) {
+                    measurement = ((TelemetryEventPingBuilder) focusEventBuilder).getEventsMeasurement();
+                    addedPingType = focusEventBuilder.getType();
+                } else {
+                    throw new IllegalStateException("Expect either TelemetryEventPingBuilder or " +
+                            "TelemetryMobileEventPingBuilder to be added to queue events");
+                }
+                measurement.add(event);
+                if (measurement.getEventCount() >= configuration.getMaximumNumberOfEventsPerPing()) {
+                    queuePing(addedPingType);
+                }
+            }
+        });
+
+        return this;
+    }
+
+    public Collection<TelemetryPingBuilder> getBuilders() {
+        return pingBuilders.values();
+    }
+
+    public Telemetry scheduleUpload() {
+        if (!configuration.isUploadEnabled()) {
+            return this;
+        }
+
+        executor.submit(new Runnable() {
+            @Override
+            public void run() {
+                scheduler.scheduleUpload(configuration);
+            }
+        });
+        return this;
+    }
+
+    public void recordSessionStart() {
+        if (!configuration.isCollectionEnabled()) {
+            return;
+        }
+
+        if (!pingBuilders.containsKey(TelemetryCorePingBuilder.TYPE)) {
+            throw new IllegalStateException("This configuration does not contain a core ping builder");
+        }
+
+        final TelemetryCorePingBuilder builder = (TelemetryCorePingBuilder) pingBuilders.get(TelemetryCorePingBuilder.TYPE);
+
+        builder.getSessionDurationMeasurement().recordSessionStart();
+        builder.getSessionCountMeasurement().countSession();
+    }
+
+    public Telemetry recordSessionEnd(Function0<Unit> onFailure) {
+        if (!configuration.isCollectionEnabled()) {
+            return this;
+        }
+
+        if (!pingBuilders.containsKey(TelemetryCorePingBuilder.TYPE)) {
+            throw new IllegalStateException("This configuration does not contain a core ping builder");
+        }
+
+        final TelemetryCorePingBuilder builder = (TelemetryCorePingBuilder) pingBuilders.get(TelemetryCorePingBuilder.TYPE);
+        boolean endedSuccessfully = builder.getSessionDurationMeasurement().recordSessionEnd();
+        if (!endedSuccessfully) {
+            onFailure.invoke();
+        }
+
+        return this;
+    }
+
+    public Telemetry recordSessionEnd() {
+        return recordSessionEnd(new Function0<Unit>() {
+            @Override
+            public Unit invoke() {
+                throw new IllegalStateException("Expected session to be started before session end is called");
+            }
+        });
+    }
+
+    /**
+     * Record a search for the given location and search engine identifier.
+     *
+     * Common location values used by Fennec and Focus:
+     *
+     * actionbar:  the user types in the url bar and hits enter to use the default search engine
+     * listitem:   the user selects a search engine from the list of secondary search engines at
+     *             the bottom of the screen
+     * suggestion: the user clicks on a search suggestion or, in the case that suggestions are
+     *             disabled, the row corresponding with the main engine
+     *
+     * @param location where search was started.
+     * @param identifier of the used search engine.
+     */
+    public Telemetry recordSearch(@NonNull  String location, @NonNull String identifier) {
+        if (!configuration.isCollectionEnabled()) {
+            return this;
+        }
+
+        if (!pingBuilders.containsKey(TelemetryCorePingBuilder.TYPE)) {
+            throw new IllegalStateException("This configuration does not contain a core ping builder");
+        }
+
+        final TelemetryCorePingBuilder builder = (TelemetryCorePingBuilder) pingBuilders.get(TelemetryCorePingBuilder.TYPE);
+        builder.getSearchesMeasurement()
+                .recordSearch(location, identifier);
+
+        return this;
+    }
+
+    /**
+     * Records the list of active experiments
+     *
+     * @param activeExperimentsIds list of active experiments ids
+     */
+    public Telemetry recordActiveExperiments(List<String> activeExperimentsIds) {
+        if (!configuration.isCollectionEnabled()) {
+            return this;
+        }
+
+        if (!pingBuilders.containsKey(TelemetryCorePingBuilder.TYPE)) {
+            throw new IllegalStateException("This configuration does not contain a core ping builder");
+        }
+
+        final TelemetryCorePingBuilder builder = (TelemetryCorePingBuilder) pingBuilders.get(TelemetryCorePingBuilder.TYPE);
+        builder.getExperimentsMeasurement()
+                .setActiveExperiments(activeExperimentsIds);
+
+        return this;
+    }
+
+    /**
+     * Records all experiments the client knows of in the event ping.
+     *
+     * @param experiments A map of experiments the client knows of. Mapping experiment name to a Boolean value that is
+     *                    true if the client is part of the experiment and false if the client is not part of the
+     *                    experiment.
+     */
+    public Telemetry recordExperiments(Map<String, Boolean> experiments) {
+        if (!configuration.isCollectionEnabled()) {
+            return this;
+        }
+
+        final TelemetryPingBuilder mobileEventBuilder = pingBuilders.get(TelemetryMobileEventPingBuilder.TYPE);
+        final TelemetryPingBuilder focusEventBuilder = pingBuilders.get(TelemetryEventPingBuilder.TYPE);
+
+        final ExperimentsMapMeasurement measurement;
+
+        if (mobileEventBuilder != null) {
+            measurement = ((TelemetryMobileEventPingBuilder) mobileEventBuilder).getExperimentsMapMeasurement();
+        } else if (focusEventBuilder != null) {
+            measurement = ((TelemetryEventPingBuilder) focusEventBuilder).getExperimentsMapMeasurement();
+        } else {
+            throw new IllegalStateException("Expect either TelemetryEventPingBuilder or " +
+                    "TelemetryMobileEventPingBuilder to be record experiments");
+        }
+
+        measurement.setExperiments(experiments);
+
+        return this;
+    }
+
+    public Telemetry setDefaultSearchProvider(DefaultSearchMeasurement.DefaultSearchEngineProvider provider) {
+        if (!pingBuilders.containsKey(TelemetryCorePingBuilder.TYPE)) {
+            throw new IllegalStateException("This configuration does not contain a core ping builder");
+        }
+
+        final TelemetryCorePingBuilder builder = (TelemetryCorePingBuilder) pingBuilders.get(TelemetryCorePingBuilder.TYPE);
+        builder.getDefaultSearchMeasurement()
+                .setDefaultSearchEngineProvider(provider);
+
+        return this;
+    }
+
+    public TelemetryClient getClient() {
+        return client;
+    }
+
+    public TelemetryStorage getStorage() {
+        return storage;
+    }
+
+    public TelemetryConfiguration getConfiguration() {
+        return configuration;
+    }
+
+    /**
+     * Returns the unique client id for this installation (UUID).
+     */
+    public String getClientId() {
+        return (String) new ClientIdMeasurement(configuration).flush();
+    }
+
+    /**
+     * @hide
+     */
+    @RestrictTo(RestrictTo.Scope.LIBRARY)
+    @VisibleForTesting ExecutorService getExecutor() {
+        return executor;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/TelemetryHolder.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/TelemetryHolder.java
new file mode 100644
index 000000000000..c777eb04c19a
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/TelemetryHolder.java
@@ -0,0 +1,30 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry;
+
+/**
+ * Holder of a static reference to the Telemetry instance. This is required for background services
+ * that somehow need to get access to the configuration and storage. This is not particular nice.
+ * Hopefully we can replace this with something better.
+ *
+ * @deprecated The whole service-telemetry library is deprecated. Please use the
+ *              <a href="https://mozilla.github.io/glean/book/index.html">Glean SDK</a> instead.
+ */
+//@Deprecated
+public class TelemetryHolder {
+    private static Telemetry telemetry;
+
+    public static void set(Telemetry telemetry) {
+        TelemetryHolder.telemetry = telemetry;
+    }
+
+    public static Telemetry get() {
+        if (telemetry == null) {
+            throw new IllegalStateException("You need to call set() on TelemetryHolder in your application class");
+        }
+
+        return telemetry;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/config/TelemetryConfiguration.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/config/TelemetryConfiguration.java
new file mode 100644
index 000000000000..e0c8778e6249
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/config/TelemetryConfiguration.java
@@ -0,0 +1,420 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.config;
+
+import android.content.Context;
+import android.content.SharedPreferences;
+
+import org.mozilla.telemetry.measurement.SettingsMeasurement;
+import org.mozilla.telemetry.util.ContextUtils;
+
+import java.io.File;
+import java.util.Collections;
+import java.util.HashSet;
+import java.util.Set;
+
+/**
+ * The TelemetryConfiguration class collects the information describing the telemetry setup of an app.
+ *
+ * There are some parts that every app needs to configure: Where should measurements store data?
+ * What servers are we actually uploading pings to? This class should provide good defaults so that
+ * in the best case it is not needed to modify the configuration.
+ */
+public class TelemetryConfiguration {
+    private static final String DEFAULT_DATA_DIRECTORY = "telemetry";
+    private static final String DEFAULT_SHARED_PREFERENCE = "telemetry_preferences";
+    private static final String DEFAULT_ENDPOINT = "https://incoming.telemetry.mozilla.org";
+    private static final String DEFAULT_USER_AGENT = "Telemetry/1.0 (Android)";
+
+    private static final long DEFAULT_INITAL_BACKOFF_FOR_UPLOAD = 30000;
+    private static final int DEFAULT_CONNECT_TIMEOUT = 10000;
+    private static final int DEFAULT_READ_TIMEOUT = 30000;
+    private static final int DEFAULT_MINIMUM_EVENTS_FOR_UPLOAD = 3;
+    private static final String DEFAULT_UPDATE_CHANNEL = "unknown";
+    private static final int DEFAULT_MAXIMUM_NUMBER_OF_PINGS_PER_EVENT = 500;
+    private static final int DEFAULT_MAXIMUM_PINGS_PER_TYPE = 40;
+    private static final int DEFAULT_MAXIMUM_PING_UPLOADS_PER_DAY = 100;
+
+    private static final long classLoadTimestampMillis = System.currentTimeMillis();
+
+    private final Context context;
+
+    private String appName;
+    private String appVersion;
+    private String buildId;
+    private String updateChannel;
+    private boolean collectionEnabled;
+    private boolean uploadEnabled;
+    private String serverEndpoint;
+    private File dataDirectory;
+    private Set<String> telemetryPreferences;
+    private long initialBackoffForUpload;
+    private int connectTimeout;
+    private int readTimeout;
+    private String userAgent;
+    private int minimumEventsForUpload;
+    private int maximumNumberOfEventsPerPing;
+    private int maximumNumberOfPingsPerType;
+    private int maximumNumberOfPingUploadsPerDay;
+    private SettingsMeasurement.SettingsProvider settingsProvider;
+
+    public TelemetryConfiguration(Context context) {
+        this.context = context.getApplicationContext();
+        this.telemetryPreferences = Collections.emptySet();
+
+        setAppName(ContextUtils.getAppName(context));
+        setAppVersion(ContextUtils.getVersionName(context));
+        setBuildId(String.valueOf(ContextUtils.getVersionCode(context)));
+        setUpdateChannel(DEFAULT_UPDATE_CHANNEL);
+        setDataDirectory(new File(context.getApplicationInfo().dataDir, DEFAULT_DATA_DIRECTORY));
+        setServerEndpoint(DEFAULT_ENDPOINT);
+        setInitialBackoffForUpload(DEFAULT_INITAL_BACKOFF_FOR_UPLOAD);
+        setConnectTimeout(DEFAULT_CONNECT_TIMEOUT);
+        setReadTimeout(DEFAULT_READ_TIMEOUT);
+        setUserAgent(DEFAULT_USER_AGENT);
+        setMinimumEventsForUpload(DEFAULT_MINIMUM_EVENTS_FOR_UPLOAD);
+        setCollectionEnabled(true);
+        setUploadEnabled(true);
+        setMaximumNumberOfEventsPerPing(DEFAULT_MAXIMUM_NUMBER_OF_PINGS_PER_EVENT);
+        setMaximumNumberOfPingsPerType(DEFAULT_MAXIMUM_PINGS_PER_TYPE);
+        setMaximumNumberOfPingUploadsPerDay(DEFAULT_MAXIMUM_PING_UPLOADS_PER_DAY);
+        setSettingsProvider(new SettingsMeasurement.SharedPreferenceSettingsProvider());
+    }
+
+    /**
+     * Application context this library is running in.
+     */
+    public Context getContext() {
+        return context;
+    }
+
+    /**
+     * Set the root directory where telemetry components should store data.
+     */
+    public TelemetryConfiguration setDataDirectory(File dataDirectory) {
+        if (!dataDirectory.exists() && !dataDirectory.mkdirs()) {
+            throw new IllegalStateException(
+                    "Telemetry data directory does not exist and can't be created: " + dataDirectory.getAbsolutePath());
+        }
+
+        if (!dataDirectory.isDirectory() || !dataDirectory.canWrite()) {
+            throw new IllegalStateException(
+                    "Telemetry data directory is not writeable directory" + dataDirectory.getAbsolutePath());
+        }
+
+        this.dataDirectory = dataDirectory;
+
+        return this;
+    }
+
+    /**
+     * Get the root directory where telemetry components should store data.
+     */
+    public File getDataDirectory() {
+        return dataDirectory;
+    }
+
+    /**
+     * Set the server endpoint to upload telemetry pings to. And endpoint value should include the
+     * schema and no trailing slash, e.g.: https://telemetry.example.org
+     */
+    public TelemetryConfiguration setServerEndpoint(String endpoint) {
+        this.serverEndpoint = endpoint;
+        return this;
+    }
+
+    /**
+     * Set the server endpoint to upload telemetry pings to.
+     */
+    public String getServerEndpoint() {
+        return serverEndpoint;
+    }
+
+    /**
+     * Get shared preference for storing telemetry related data.
+     */
+    public SharedPreferences getSharedPreferences() {
+        return context.getSharedPreferences(DEFAULT_SHARED_PREFERENCE, Context.MODE_PRIVATE);
+    }
+
+    /**
+     * Set a list of preference keys that are important for telemetry. Some measurements and pings
+     * might use this to determine what preferences should be reported.
+     */
+    public TelemetryConfiguration setPreferencesImportantForTelemetry(String... preferences) {
+        Set<String> set = new HashSet<>();
+        Collections.addAll(set, preferences);
+
+        this.telemetryPreferences = set;
+
+        return this;
+    }
+
+    /**
+     * Get a list of preference keys that are important for telemetry.
+     */
+    public Set<String> getPreferencesImportantForTelemetry() {
+        return telemetryPreferences;
+    }
+
+    /**
+     * Get the interval (in milliseconds) to wait initially after a ping upload has failed.
+     */
+    public long getInitialBackoffForUpload() {
+        return initialBackoffForUpload;
+    }
+
+    /**
+     * Set the interval (in milliseconds) to wait initially after a ping upload has failed.
+     */
+    public TelemetryConfiguration setInitialBackoffForUpload(long initialBackoffForUpload) {
+        this.initialBackoffForUpload = initialBackoffForUpload;
+        return this;
+    }
+
+    /**
+     * Returns setting for connect timeout (milliseconds). A value of 0 implies that the option is
+     * disabled (i.e., timeout of infinity).
+     */
+    public int getConnectTimeout() {
+        return connectTimeout;
+    }
+
+    /**
+     * Returns setting for read timeout. 0 return implies that the option is disabled (i.e., timeout
+     * of infinity).
+     */
+    public int getReadTimeout() {
+        return readTimeout;
+    }
+
+    /**
+     * Sets a specified timeout value, in milliseconds, to be used when opening a communications
+     * link to the telemetry endpoint.
+     *
+     * If the timeout expires before the connection can be established, the ping upload will be
+     * retried at a later time. A timeout of zero is interpreted as an infinite timeout.
+     */
+    public TelemetryConfiguration setConnectTimeout(int connectTimeout) {
+        this.connectTimeout = connectTimeout;
+        return this;
+    }
+
+    /**
+     * Sets the read timeout to a specified timeout, in milliseconds. A non-zero value specifies the
+     * timeout when reading from the telemetry endpoint. If the timeout expires before there is data
+     * available for read, the ping upload will be retried later. A timeout of zero is interpreted as
+     * an infinite timeout.
+     */
+    public TelemetryConfiguration setReadTimeout(int readTimeout) {
+        this.readTimeout = readTimeout;
+        return this;
+    }
+
+    /**
+     * Get the user agent used when communicating with the telemetry endpoint.
+     */
+    public String getUserAgent() {
+        return userAgent;
+    }
+
+    /**
+     * Set the user agent used when communicating with the telemetry endpoint.
+     */
+    public TelemetryConfiguration setUserAgent(String userAgent) {
+        this.userAgent = userAgent;
+        return this;
+    }
+
+    /**
+     * Get the minimum number of telemetry events that need to be fired before even trying to upload
+     * an event ping.
+     */
+    public int getMinimumEventsForUpload() {
+        return minimumEventsForUpload;
+    }
+
+    /**
+     * Set the minimum number of telemetry events that need to be fired before even trying to upload
+     * an event ping. The default value is 3. The minimum needs to be >= 1.
+     */
+    public TelemetryConfiguration setMinimumEventsForUpload(int minimumEventsForUpload) {
+        if (minimumEventsForUpload <= 0) {
+            throw new IllegalArgumentException("minimumEventsForUpload needs to be >= 1");
+        }
+
+        this.minimumEventsForUpload = minimumEventsForUpload;
+        return this;
+    }
+
+    /**
+     * Is collecting telemetry data enabled?
+     */
+    public boolean isCollectionEnabled() {
+        return collectionEnabled;
+    }
+
+    /**
+     * Enable or disable collection of telemetry data. Local dev builds should disable this to avoid
+     * collecting and sending any data.
+     */
+    public TelemetryConfiguration setCollectionEnabled(boolean collectionEnabled) {
+        this.collectionEnabled = collectionEnabled;
+        return this;
+    }
+
+    /**
+     * Enable or disable the upload of collected telemetry data. This is usually set based on a
+     * user visible preference.
+     */
+    public TelemetryConfiguration setUploadEnabled(boolean uploadEnabled) {
+        this.uploadEnabled = uploadEnabled;
+        return this;
+    }
+
+    /**
+     * Is uploading collected telemetry data enable?
+     */
+    public boolean isUploadEnabled() {
+        return uploadEnabled;
+    }
+
+    /**
+     * Get the name of the app. This value is used as one dimension when uploading telemetry to the
+     * HTTP Edge server.
+     */
+    public String getAppName() {
+        return appName;
+    }
+
+    /**
+     * Set the name of the app. This value is used as one dimension when uploading telemetry to the
+     * HTTP Edge server.
+     */
+    public TelemetryConfiguration setAppName(String appName) {
+        this.appName = appName;
+        return this;
+    }
+
+    /**
+     * Set the update channel of the app (e.g. beta, release). This value is used as one dimension
+     * when uploading telemetry to the HTTP Edge server.
+     */
+    public TelemetryConfiguration setUpdateChannel(String updateChannel) {
+        this.updateChannel = updateChannel;
+        return this;
+    }
+
+    /**
+     * Get the update channel of the app (e.g. beta, release). This value is used as one dimension
+     * when uploading telemetry to the HTTP Edge server.
+     */
+    public String getUpdateChannel() {
+        return updateChannel;
+    }
+
+    /**
+     * Get the version of the app (e.g. 45.0.1). This value is used as one dimension when uploading
+     * telemetry to the HTTP Edge server.
+     */
+    public String getAppVersion() {
+        return appVersion;
+    }
+
+    /**
+     * Set the version of the app (e.g. 45.0.1). This value is used as one dimension when uploading
+     * telemetry to the HTTP Edge server.
+     */
+    public TelemetryConfiguration setAppVersion(String appVersion) {
+        this.appVersion = appVersion;
+        return this;
+    }
+
+    /**
+     * Get the build id of the app (e.g. 20150125030202). This value is used as one dimension when
+     * uploading telemetry to the HTTP Edge server.
+     */
+    public String getBuildId() {
+        return buildId;
+    }
+
+    /**
+     * Get the build id of the app (e.g. 20150125030202). This value is used as one dimension when
+     * uploading telemetry to the HTTP Edge server.
+     */
+    public TelemetryConfiguration setBuildId(String buildId) {
+        this.buildId = buildId;
+        return this;
+    }
+
+    /**
+     * Set the maximum number of events per ping. If this limit is reached a ping will built and
+     * stored automatically. The number of stored and uploaded pings might be limited too.
+     */
+    public TelemetryConfiguration setMaximumNumberOfEventsPerPing(int maximumNumberOfEventsPerPing) {
+        this.maximumNumberOfEventsPerPing = maximumNumberOfEventsPerPing;
+        return this;
+    }
+
+    /**
+     * Get the maximum number of events per ping.
+     */
+    public int getMaximumNumberOfEventsPerPing() {
+        return maximumNumberOfEventsPerPing;
+    }
+
+    /**
+     * Set the maximum number of pings that will be stored for a given ping type. If more types
+     * are in the local store then pings will be removed (oldest first). For this to happen the
+     * maximum needs to be reached without any successful upload.
+     */
+    public TelemetryConfiguration setMaximumNumberOfPingsPerType(int maximumNumberOfPingsPerType) {
+        this.maximumNumberOfPingsPerType = maximumNumberOfPingsPerType;
+        return this;
+    }
+
+    /**
+     * Get the maximum number of pings that will be stored (for upload).
+     */
+    public int getMaximumNumberOfPingsPerType() {
+        return maximumNumberOfPingsPerType;
+    }
+
+    /**
+     * Get the maximum number of pings that should be uploaded per day.
+     */
+    public int getMaximumNumberOfPingUploadsPerDay() {
+        return maximumNumberOfPingUploadsPerDay;
+    }
+
+    /**
+     * Set the maximum number of pings uploaded per day. This limit is enforced for every type. If
+     * you have 2 ping types and set a limit of 100 pings per day then in total 200 pings per day
+     * could be uploaded.
+     */
+    public TelemetryConfiguration setMaximumNumberOfPingUploadsPerDay(int maximumNumberOfPingUploadsPerDay) {
+        this.maximumNumberOfPingUploadsPerDay = maximumNumberOfPingUploadsPerDay;
+        return this;
+    }
+
+    /**
+     * Get the provider for reading app settings.
+     */
+    public SettingsMeasurement.SettingsProvider getSettingsProvider() {
+        return settingsProvider;
+    }
+
+    /**
+     * Set a provider for reading app settings.
+     */
+    public TelemetryConfiguration setSettingsProvider(SettingsMeasurement.SettingsProvider settingsProvider) {
+        this.settingsProvider = settingsProvider;
+        return this;
+    }
+
+    public long getClassLoadTimestampMillis() {
+        return classLoadTimestampMillis;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/event/TelemetryEvent.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/event/TelemetryEvent.java
new file mode 100644
index 000000000000..5fe6c6fc6be7
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/event/TelemetryEvent.java
@@ -0,0 +1,148 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.event;
+
+import android.os.SystemClock;
+import androidx.annotation.CheckResult;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.annotation.RestrictTo;
+import org.json.JSONArray;
+import org.json.JSONObject;
+import org.mozilla.telemetry.TelemetryHolder;
+import org.mozilla.telemetry.util.StringUtils;
+
+import java.util.HashMap;
+import java.util.Map;
+
+/**
+ * TelemetryEvent specifies a common events data format, which allows for broader, shared usage of
+ * data processing tools.
+ */
+public class TelemetryEvent {
+    private static final long startTime = SystemClock.elapsedRealtime();
+
+    private static final int MAX_LENGTH_CATEGORY = 30;
+    private static final int MAX_LENGTH_METHOD = 20;
+    private static final int MAX_LENGTH_OBJECT = 20;
+    private static final int MAX_LENGTH_VALUE = 80;
+    private static final int MAX_EXTRA_KEYS = 200;
+    private static final int MAX_LENGTH_EXTRA_KEY = 15;
+    private static final int MAX_LENGTH_EXTRA_VALUE = 80;
+
+    /**
+     * Create a new event with mandatory category, method and object.
+     *
+     * @param category identifier. The category is a group name for events and helps to avoid name conflicts.
+     * @param method identifier. This describes the type of event that occured, e.g. click, keydown or focus.
+     * @param object identifier. This is the object the event occured on, e.g. reload_button or urlbar.
+     */
+    @CheckResult
+    public static TelemetryEvent create(@NonNull String category, @NonNull String method, @Nullable String object) {
+        return new TelemetryEvent(category, method, object, null);
+    }
+
+    /**
+     * Create a new event with mandatory category, method, object and value.
+     *
+     * @param category identifier. The category is a group name for events and helps to avoid name conflicts.
+     * @param method identifier. This describes the type of event that occured, e.g. click, keydown or focus.
+     * @param object identifier. This is the object the event occured on, e.g. reload_button or urlbar.
+     * @param value This is a user defined value, providing context for the event.
+     */
+    @CheckResult
+    public static TelemetryEvent create(@NonNull String category, @NonNull String method, @Nullable String object, String value) {
+        return new TelemetryEvent(category, method, object, value);
+    }
+
+    /**
+     * Positive number. This is the time in ms when the event was recorded, relative to the main
+     * process start time.
+     */
+    private final long timestamp;
+
+    /**
+     * Identifier. The category is a group name for events and helps to avoid name conflicts.
+     */
+    private final String category;
+
+    /**
+     * Identifier. This describes the type of event that occurred, e.g. click, keydown or focus.
+     */
+    private final String method;
+
+    /**
+     * Identifier. This is the object the event occurred on, e.g. reload_button or urlbar.
+     */
+    private @Nullable final String object;
+
+    /**
+     * Optional, may be null. This is a user defined value, providing context for the event.
+     */
+    private @Nullable String value;
+
+    /**
+     * Optional, may be null. This is an object of the form {"key": "value", ...}, used for events
+     * where additional context is needed.
+     */
+    private final Map<String, Object> extras;
+
+    private TelemetryEvent(@NonNull String category, @NonNull String method, @Nullable String object, @Nullable String value) {
+        timestamp = SystemClock.elapsedRealtime() - startTime;
+
+        // We are naively assuming that all strings here are ASCII (1 character = 1 bytes) as the max lengths are defined in bytes
+        // There's an opportunity here to make this more strict and throw - however we may want to make this configurable.
+        this.category = StringUtils.safeSubstring(category, 0, MAX_LENGTH_CATEGORY);
+        this.method = StringUtils.safeSubstring(method, 0, MAX_LENGTH_METHOD);
+        this.object = object == null ? null : StringUtils.safeSubstring(object, 0, MAX_LENGTH_OBJECT);
+        this.value = value == null ? null : StringUtils.safeSubstring(value, 0, MAX_LENGTH_VALUE);
+        this.extras = new HashMap<>();
+    }
+
+    public TelemetryEvent extra(String key, String value) {
+        if (extras.size() > MAX_EXTRA_KEYS) {
+            throw new IllegalArgumentException("Exceeding limit of " + MAX_EXTRA_KEYS + " extra keys");
+        }
+
+        extras.put(StringUtils.safeSubstring(key, 0, MAX_LENGTH_EXTRA_KEY),
+                StringUtils.safeSubstring(value, 0, MAX_LENGTH_EXTRA_VALUE));
+
+        return this;
+    }
+
+    /**
+     * Queue this event to be sent with the next event ping.
+     */
+    public void queue() {
+        TelemetryHolder.get().queueEvent(this);
+    }
+
+    /**
+     * Create a JSON representation of this event for storing and sending it.
+     */
+    @RestrictTo(RestrictTo.Scope.LIBRARY)
+    public String toJSON() {
+        final JSONArray array = new JSONArray();
+
+        array.put(timestamp);
+        array.put(category);
+        array.put(method);
+        array.put(object);
+
+        if (value != null) {
+            array.put(value);
+        }
+
+        if (extras != null && !extras.isEmpty()) {
+            if (value == null) {
+                array.put(null);
+            }
+
+            array.put(new JSONObject(extras));
+        }
+
+        return array.toString();
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ArchMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ArchMeasurement.java
new file mode 100644
index 000000000000..2d53f6c72cc3
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ArchMeasurement.java
@@ -0,0 +1,32 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.os.Build;
+import androidx.annotation.VisibleForTesting;
+
+import java.util.Locale;
+
+public class ArchMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "arch";
+
+    public ArchMeasurement() {
+        super(FIELD_NAME);
+    }
+
+    @Override
+    public Object flush() {
+        return getArchitecture();
+    }
+
+    @VisibleForTesting String getArchitecture() {
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
+            return Build.SUPPORTED_ABIS[0];
+        } else {
+            //noinspection deprecation
+            return Build.CPU_ABI;
+        }
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ClientIdMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ClientIdMeasurement.java
new file mode 100644
index 000000000000..d3f9eaba111b
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ClientIdMeasurement.java
@@ -0,0 +1,55 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.content.SharedPreferences;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+import java.util.UUID;
+
+/**
+ * A unique, randomly generated UUID for this client.
+ */
+public class ClientIdMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "clientId";
+
+    private static final String PREFERENCE_CLIENT_ID = "client_id";
+
+    private TelemetryConfiguration configuration;
+    private String clientId;
+
+    public ClientIdMeasurement(TelemetryConfiguration configuration) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+    }
+
+    @Override
+    public Object flush() {
+        if (clientId == null) {
+            clientId = generateClientId(configuration);
+        }
+
+        return clientId;
+    }
+
+    private static synchronized String generateClientId(final TelemetryConfiguration configuration) {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        if (preferences.contains(PREFERENCE_CLIENT_ID)) {
+            // We already generated a client id in the past. Let's use it.
+            return preferences.getString(PREFERENCE_CLIENT_ID, /* unused default value */ null);
+        }
+
+        final String clientId = UUID.randomUUID().toString();
+
+        preferences.edit()
+                .putString(PREFERENCE_CLIENT_ID, clientId)
+                .apply();
+
+        return clientId;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedDateMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedDateMeasurement.java
new file mode 100644
index 000000000000..527c355fc893
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedDateMeasurement.java
@@ -0,0 +1,26 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import java.text.DateFormat;
+import java.text.SimpleDateFormat;
+import java.util.Calendar;
+import java.util.Locale;
+
+public class CreatedDateMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "created";
+
+    public CreatedDateMeasurement() {
+        super(FIELD_NAME);
+    }
+
+    @Override
+    public Object flush() {
+        final DateFormat pingCreationDateFormat = new SimpleDateFormat("yyyy-MM-dd", Locale.US);
+        final Calendar nowCalendar = Calendar.getInstance();
+
+        return pingCreationDateFormat.format(nowCalendar.getTime());
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedDateMeasurementNew.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedDateMeasurementNew.java
new file mode 100644
index 000000000000..452988a62bd0
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedDateMeasurementNew.java
@@ -0,0 +1,29 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import java.text.DateFormat;
+import java.text.SimpleDateFormat;
+import java.util.Calendar;
+import java.util.Locale;
+
+/**
+ * The field 'created' from CreatedDateMeasurement will be deprecated for the `createdDate` field
+ */
+public class CreatedDateMeasurementNew extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "createdDate";
+
+    public CreatedDateMeasurementNew() {
+        super(FIELD_NAME);
+    }
+
+    @Override
+    public Object flush() {
+        final DateFormat pingCreationDateFormat = new SimpleDateFormat("yyyy-MM-dd", Locale.US);
+        final Calendar nowCalendar = Calendar.getInstance();
+
+        return pingCreationDateFormat.format(nowCalendar.getTime());
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedTimestampMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedTimestampMeasurement.java
new file mode 100644
index 000000000000..c96b851711ad
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedTimestampMeasurement.java
@@ -0,0 +1,18 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+public class CreatedTimestampMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "created";
+
+    public CreatedTimestampMeasurement() {
+        super(FIELD_NAME);
+    }
+
+    @Override
+    public Object flush() {
+        return System.currentTimeMillis();
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedTimestampMeasurementNew.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedTimestampMeasurementNew.java
new file mode 100644
index 000000000000..c552b35d69a8
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/CreatedTimestampMeasurementNew.java
@@ -0,0 +1,21 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+/**
+ * The field 'created' from CreatedTimestampMeasurement will be deprecated for the `createdTimestamp` field
+ */
+public class CreatedTimestampMeasurementNew extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "createdTimestamp";
+
+    public CreatedTimestampMeasurementNew() {
+        super(FIELD_NAME);
+    }
+
+    @Override
+    public Object flush() {
+        return System.currentTimeMillis();
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/DefaultSearchMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/DefaultSearchMeasurement.java
new file mode 100644
index 000000000000..ce6e5558ca91
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/DefaultSearchMeasurement.java
@@ -0,0 +1,35 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import org.json.JSONObject;
+
+public class DefaultSearchMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "defaultSearch";
+
+    public interface DefaultSearchEngineProvider {
+        String getDefaultSearchEngineIdentifier();
+    }
+
+    private DefaultSearchEngineProvider provider;
+
+    public DefaultSearchMeasurement() {
+        super (FIELD_NAME);
+    }
+
+    public void setDefaultSearchEngineProvider(DefaultSearchEngineProvider provider) {
+        this.provider = provider;
+    }
+
+    @Override
+    public Object flush() {
+        if (provider == null) {
+            return JSONObject.NULL;
+        }
+
+        final String identifier = provider.getDefaultSearchEngineIdentifier();
+        return identifier != null ? identifier :JSONObject.NULL;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/DeviceMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/DeviceMeasurement.java
new file mode 100644
index 000000000000..e7981ac9ae05
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/DeviceMeasurement.java
@@ -0,0 +1,36 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.os.Build;
+import androidx.annotation.NonNull;
+import androidx.annotation.VisibleForTesting;
+
+import org.mozilla.telemetry.util.StringUtils;
+
+public class DeviceMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "device";
+
+    public DeviceMeasurement() {
+        super(FIELD_NAME);
+    }
+
+    @Override
+    public Object flush() {
+        // We limit the device descriptor to 32 characters because it can get long. We give fewer
+        // characters to the manufacturer because we're less likely to have manufacturers with
+        // similar names than we are for a manufacturer to have two devices with the similar names
+        // (e.g. Galaxy S6 vs. Galaxy Note 6).
+        return StringUtils.safeSubstring(getManufacturer(), 0, 12) + '-' +  StringUtils.safeSubstring(getModel(), 0, 19);
+    }
+
+    @VisibleForTesting String getManufacturer() {
+        return Build.MANUFACTURER;
+    }
+
+    @VisibleForTesting String getModel() {
+        return Build.MODEL;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/EventsMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/EventsMeasurement.java
new file mode 100644
index 000000000000..78d9a2121375
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/EventsMeasurement.java
@@ -0,0 +1,158 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.content.SharedPreferences;
+import androidx.annotation.VisibleForTesting;
+import android.util.Log;
+
+import org.json.JSONArray;
+import org.json.JSONException;
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.event.TelemetryEvent;
+import org.mozilla.telemetry.util.IOUtils;
+
+import java.io.BufferedReader;
+import java.io.BufferedWriter;
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.FileNotFoundException;
+import java.io.FileOutputStream;
+import java.io.IOException;
+import java.io.InputStreamReader;
+import java.io.OutputStreamWriter;
+
+import mozilla.components.support.base.log.logger.Logger;
+
+public class EventsMeasurement extends TelemetryMeasurement {
+    private static final String LOG_TAG = EventsMeasurement.class.getSimpleName();
+
+    private static final int VERSION = 1;
+    private static final String FIELD_NAME = "events";
+
+    private static final String PREFERENCE_EVENT_COUNT = "event_count";
+
+    private TelemetryConfiguration configuration;
+    private Logger logger;
+    private String filename;
+
+    public EventsMeasurement(TelemetryConfiguration configuration) {
+        this(configuration, "events");
+    }
+
+    public EventsMeasurement(TelemetryConfiguration configuration, String filename) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+        this.logger = new Logger("telemetry/events");
+        this.filename = filename;
+    }
+
+    public EventsMeasurement add(final TelemetryEvent event) {
+        saveEventToDisk(event);
+        return this;
+    }
+
+    @Override
+    public Object flush() {
+        return readAndClearEventsFromDisk();
+    }
+
+    private synchronized JSONArray readAndClearEventsFromDisk() {
+        final JSONArray events = new JSONArray();
+        final File file = getEventFile();
+
+        FileInputStream stream = null;
+
+        try {
+            stream = new FileInputStream(file);
+
+            final BufferedReader reader = new BufferedReader(new InputStreamReader(stream));
+
+            String line;
+
+            while ((line = reader.readLine()) != null) {
+                try {
+                    JSONArray event = new JSONArray(line);
+                    events.put(event);
+
+                    resetEventCount();
+                } catch (JSONException e) {
+                    // Let's log a warning and move on. This event is lost.
+                    logger.warn("Could not parse event from disk", e);
+                }
+            }
+        } catch (FileNotFoundException e) {
+            // This shouldn't happen because we do not create event pings if there are no events.
+            // However in case the file disappears: Continue with no events.
+            return new JSONArray();
+        } catch (IOException e) {
+            // Handling this exception at this time is tricky: We might have been able to read some
+            // events at the time this exception occurred. We can either try to add them to the
+            // ping and remove the file or we retry later again.
+
+            // We just log an error here. This means we are going to continue building the ping
+            // with the events we were able to read from disk. The events file will be removed and
+            // we might potentially lose events that we couldn't ready because of the exception.
+            logger.warn("IOException while reading events from disk", e);
+        } finally {
+            IOUtils.safeClose(stream);
+
+            if (!file.delete()) {
+                logger.warn("Events file could not be deleted", new IOException());
+            }
+        }
+
+        return events;
+    }
+
+    @VisibleForTesting File getEventFile() {
+        return new File(configuration.getDataDirectory(), filename + VERSION);
+    }
+
+    private synchronized void saveEventToDisk(TelemetryEvent event) {
+        FileOutputStream stream = null;
+
+        try {
+            stream = new FileOutputStream(getEventFile(), true);
+
+            final BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stream));
+            writer.write(event.toJSON());
+            writer.newLine();
+            writer.flush();
+            writer.close();
+
+            countEvent();
+        } catch (IOException e) {
+            logger.warn("IOException while writing event to disk", e);
+        } finally {
+            IOUtils.safeClose(stream);
+        }
+    }
+
+    private synchronized void countEvent() {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        long count = preferences.getLong(PREFERENCE_EVENT_COUNT, 0);
+
+        preferences.edit()
+                .putLong(PREFERENCE_EVENT_COUNT, ++count)
+                .apply();
+    }
+
+    private synchronized void resetEventCount() {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        preferences.edit()
+                .putLong(PREFERENCE_EVENT_COUNT, 0)
+                .apply();
+    }
+
+    public long getEventCount() {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        return preferences.getLong(PREFERENCE_EVENT_COUNT, 0);
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ExperimentsMapMeasurement.kt b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ExperimentsMapMeasurement.kt
new file mode 100644
index 000000000000..4c16c1428bda
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ExperimentsMapMeasurement.kt
@@ -0,0 +1,24 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement
+
+import org.json.JSONObject
+
+private const val FIELD_NAME = "experiments"
+
+private const val VALUE_CONTROL = "control"
+private const val VALUE_BRANCH = "branch"
+
+class ExperimentsMapMeasurement : TelemetryMeasurement(FIELD_NAME) {
+    private val map = JSONObject()
+
+    fun setExperiments(experiments: Map<String, Boolean>) {
+        experiments.forEach { entry ->
+            map.put(entry.key, if (entry.value) VALUE_BRANCH else VALUE_CONTROL)
+        }
+    }
+
+    override fun flush() = map
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ExperimentsMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ExperimentsMeasurement.java
new file mode 100644
index 000000000000..a0141482ca0d
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ExperimentsMeasurement.java
@@ -0,0 +1,28 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import org.json.JSONArray;
+
+import java.util.List;
+
+public class ExperimentsMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "experiments";
+    private JSONArray experimentsIds;
+
+    public ExperimentsMeasurement() {
+        super(FIELD_NAME);
+        experimentsIds = new JSONArray();
+    }
+
+    public void setActiveExperiments(List<String> activeExperimentsIds) {
+        experimentsIds = new JSONArray(activeExperimentsIds);
+    }
+
+    @Override
+    public Object flush() {
+        return experimentsIds;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/FirstRunProfileDateMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/FirstRunProfileDateMeasurement.java
new file mode 100644
index 000000000000..57cc2e59442d
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/FirstRunProfileDateMeasurement.java
@@ -0,0 +1,62 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.content.SharedPreferences;
+import androidx.annotation.VisibleForTesting;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+import java.util.concurrent.TimeUnit;
+
+/**
+ * This measurement will save the timestamp of the first time it was instantiated and report this
+ * as profile creation date.
+ */
+public class FirstRunProfileDateMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "profileDate";
+
+    private static final String PREFERENCE_KEY = "profile_date";
+
+    private TelemetryConfiguration configuration;
+
+    public FirstRunProfileDateMeasurement(TelemetryConfiguration configuration) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+
+        ensureValueExists();
+    }
+
+    @VisibleForTesting void ensureValueExists() {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        if (preferences.contains(PREFERENCE_KEY)) {
+            return;
+        }
+
+        preferences.edit()
+                .putLong(PREFERENCE_KEY, now())
+                .apply();
+    }
+
+    @Override
+    public Object flush() {
+        return getProfileDateInDays();
+    }
+
+    /**
+     * Profile creation date in days since UNIX epoch.
+     */
+    private long getProfileDateInDays() {
+        long profileDateMilliseconds = configuration.getSharedPreferences().getLong(PREFERENCE_KEY, now());
+
+        return (long) Math.floor((double) profileDateMilliseconds / TimeUnit.DAYS.toMillis(1));
+    }
+
+    @VisibleForTesting long now() {
+        return System.currentTimeMillis();
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/LocaleMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/LocaleMeasurement.java
new file mode 100644
index 000000000000..fa1f66bbf5d5
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/LocaleMeasurement.java
@@ -0,0 +1,67 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import java.util.Locale;
+
+public class LocaleMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "locale";
+
+    public LocaleMeasurement() {
+        super(FIELD_NAME);
+    }
+
+    @Override
+    public Object flush() {
+        return getLanguageTag(Locale.getDefault());
+    }
+
+    /**
+     * Gecko uses locale codes like "es-ES", whereas a Java {@link Locale}
+     * stringifies as "es_ES".
+     *
+     * This method approximates the Java 7 method
+     * <code>Locale#toLanguageTag()</code>.
+     *
+     * @return a locale string suitable for passing to Gecko.
+     */
+    public String getLanguageTag(final Locale locale) {
+        // If this were Java 7:
+        // return locale.toLanguageTag();
+
+        final String language = getLanguage(locale);
+        final String country = locale.getCountry(); // Can be an empty string.
+        if (country.equals("")) {
+            return language;
+        }
+        return language + "-" + country;
+    }
+
+    /**
+     * Sometimes we want just the language for a locale, not the entire language
+     * tag. But Java's .getLanguage method is wrong.
+     *
+     * @return a language string, such as "he" for the Hebrew locales.
+     */
+    private String getLanguage(final Locale locale) {
+        // Can, but should never be, an empty string.
+        final String language = locale.getLanguage();
+
+        // Modernize certain language codes.
+        if (language.equals("iw")) {
+            return "he";
+        }
+
+        if (language.equals("in")) {
+            return "id";
+        }
+
+        if (language.equals("ji")) {
+            return "yi";
+        }
+
+        return language;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/MetricsMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/MetricsMeasurement.java
new file mode 100644
index 000000000000..8ac2e14c975d
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/MetricsMeasurement.java
@@ -0,0 +1,22 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import org.json.JSONObject;
+
+public class MetricsMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "metrics";
+    private JSONObject snapshot;
+
+    public MetricsMeasurement(JSONObject snapshot) {
+        super(FIELD_NAME);
+        this.snapshot = snapshot;
+    }
+
+    @Override
+    public Object flush() {
+        return snapshot;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/OperatingSystemMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/OperatingSystemMeasurement.java
new file mode 100644
index 000000000000..2907bfa7185a
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/OperatingSystemMeasurement.java
@@ -0,0 +1,14 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+public class OperatingSystemMeasurement extends StaticMeasurement {
+    private static final String FIELD_NAME = "os";
+    private static final String FIELD_VALUE = "Android";
+
+    public OperatingSystemMeasurement() {
+        super(FIELD_NAME, FIELD_VALUE);
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/OperatingSystemVersionMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/OperatingSystemVersionMeasurement.java
new file mode 100644
index 000000000000..d35f3da025ec
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/OperatingSystemVersionMeasurement.java
@@ -0,0 +1,15 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.os.Build;
+
+public class OperatingSystemVersionMeasurement extends StaticMeasurement {
+    private static final String FIELD_NAME = "osversion";
+
+    public OperatingSystemVersionMeasurement() {
+        super(FIELD_NAME, Integer.toString(Build.VERSION.SDK_INT));
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/PocketIdMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/PocketIdMeasurement.java
new file mode 100644
index 000000000000..23c29d76aaf0
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/PocketIdMeasurement.java
@@ -0,0 +1,56 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.content.SharedPreferences;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+import java.util.UUID;
+
+/**
+ * A unique, randomly generated UUID for this pocket client for fire-tv instance.
+ * This is distinct from the telemetry clientId. The clientId should not be able to be tied to the pocketId in any way.
+ */
+public class PocketIdMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "pocketId";
+
+    private static final String PREFERENCE_POCKET_ID = "pocket_id";
+
+    private TelemetryConfiguration configuration;
+    private String pocketId;
+
+    public PocketIdMeasurement(TelemetryConfiguration configuration) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+    }
+
+    @Override
+    public Object flush() {
+        if (pocketId == null) {
+            pocketId = generateClientId(configuration);
+        }
+
+        return pocketId;
+    }
+
+    private static synchronized String generateClientId(final TelemetryConfiguration configuration) {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        if (preferences.contains(PREFERENCE_POCKET_ID)) {
+            // We already generated a pocket id in the past. Let's use it.
+            return preferences.getString(PREFERENCE_POCKET_ID, /* unused default value */ null);
+        }
+
+        final String pocketId = UUID.randomUUID().toString();
+
+        preferences.edit()
+                .putString(PREFERENCE_POCKET_ID, pocketId)
+                .apply();
+
+        return pocketId;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ProcessStartTimestampMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ProcessStartTimestampMeasurement.java
new file mode 100644
index 000000000000..dd6a220d2276
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/ProcessStartTimestampMeasurement.java
@@ -0,0 +1,26 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+public class ProcessStartTimestampMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "processStartTimestamp";
+
+    private final long processLoadTimestampMillis;
+
+    public ProcessStartTimestampMeasurement(final TelemetryConfiguration configuration) {
+        super(FIELD_NAME);
+
+        // Ideally, we'd get the process start time, but considering Telemetry is
+        // expected to be loaded early in the Activity lifecycle, this is good enough.
+        processLoadTimestampMillis = configuration.getClassLoadTimestampMillis();
+    }
+
+    @Override
+    public Object flush() {
+        return processLoadTimestampMillis;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SearchesMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SearchesMeasurement.java
new file mode 100644
index 000000000000..a2b42b9573a7
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SearchesMeasurement.java
@@ -0,0 +1,124 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.content.SharedPreferences;
+import androidx.annotation.NonNull;
+
+import org.json.JSONException;
+import org.json.JSONObject;
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+import java.util.Collections;
+import java.util.HashSet;
+import java.util.Set;
+
+/**
+ * A TelemetryMeasurement implementation to count the number of times a user has searched with a
+ * specific engine from a specific location.
+ */
+public class SearchesMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "searches";
+
+    private static final String PREFERENCE_SEARCH_KEYSET = "measurements-search-count-keyset";
+    private static final String PREFERENCE_SEARCH_PREFIX = "measurements-search-count-engine-";
+
+    public static final String LOCATION_ACTIONBAR = "actionbar";
+    public static final String LOCATION_SUGGESTION = "suggestion";
+    public static final String LOCATION_LISTITEM = "listitem";
+
+    private final TelemetryConfiguration configuration;
+
+    public SearchesMeasurement(TelemetryConfiguration configuration) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+    }
+
+    @Override
+    public Object flush() {
+        return getSearchCountMapAndReset();
+    }
+
+    /**
+     * Get the stored search counts and reset all of them.
+     */
+    private synchronized JSONObject getSearchCountMapAndReset() {
+        try {
+            final SharedPreferences preferences = configuration.getSharedPreferences();
+            final SharedPreferences.Editor editor = preferences.edit();
+
+            final JSONObject object = new JSONObject();
+
+            final Set<String> keys = preferences.getStringSet(PREFERENCE_SEARCH_KEYSET, Collections.<String>emptySet());
+            for (String locationAndIdentifier : keys) {
+                final String key = getEngineSearchCountKey(locationAndIdentifier);
+
+                object.put(locationAndIdentifier, preferences.getInt(key, 0));
+                editor.remove(key);
+            }
+
+            editor.remove(PREFERENCE_SEARCH_KEYSET)
+                    .apply();
+
+            return object;
+        } catch (JSONException e) {
+            throw new AssertionError("Should not happen: Can't construct search count JSON", e);
+        }
+    }
+
+    /**
+     * Record a search for the given location and search engine identifier.
+     *
+     * @param location where search was started.
+     * @param identifier of the used search engine.
+     */
+    public synchronized void recordSearch(@NonNull String location, @NonNull String identifier) {
+        final String locationAndIdentifier = location + "." + identifier;
+
+        storeCount(locationAndIdentifier);
+        storeKey(locationAndIdentifier);
+    }
+
+    /**
+     * Store count for this engine in preferences.
+     */
+    private void storeCount(String locationAndIdentifier) {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        final String key = getEngineSearchCountKey(locationAndIdentifier);
+
+        final int count = preferences.getInt(key, 0);
+
+        preferences.edit()
+                .putInt(key, count + 1)
+                .apply();
+    }
+
+    /**
+     * Store name of this engine in preferences so that we can retrieve the count later.
+     */
+    private void storeKey(String locationAndIdentifier) {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        final Set<String> keys = preferences.getStringSet(PREFERENCE_SEARCH_KEYSET, Collections.<String>emptySet());
+        if (keys.contains(locationAndIdentifier)) {
+            // We already know about this key.
+            return;
+        }
+
+        // Create a copy that we can modify
+        final Set<String> updatedKeys = new HashSet<>(keys);
+        updatedKeys.add(locationAndIdentifier);
+
+        preferences.edit()
+                .putStringSet(PREFERENCE_SEARCH_KEYSET, updatedKeys)
+                .apply();
+    }
+
+    private static String getEngineSearchCountKey(String locationAndIdentifier) {
+        return PREFERENCE_SEARCH_PREFIX + locationAndIdentifier;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SequenceMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SequenceMeasurement.java
new file mode 100644
index 000000000000..9f90665bf3f8
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SequenceMeasurement.java
@@ -0,0 +1,43 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.content.SharedPreferences;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.ping.TelemetryPingBuilder;
+
+public class SequenceMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "seq";
+
+    private static final String PREFERENCE_PREFIX = "sequence_";
+
+    private final TelemetryConfiguration configuration;
+    private final String preferenceKeySequence;
+
+    public SequenceMeasurement(TelemetryConfiguration configuration, TelemetryPingBuilder ping) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+        this.preferenceKeySequence = PREFERENCE_PREFIX + ping.getType();
+    }
+
+    @Override
+    public Object flush() {
+        return getAndIncrementSequence();
+    }
+
+    private synchronized long getAndIncrementSequence() {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        long sequence = preferences.getLong(preferenceKeySequence, 0);
+
+        preferences.edit()
+                .putLong(preferenceKeySequence, ++sequence)
+                .apply();
+
+        return sequence;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SessionCountMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SessionCountMeasurement.java
new file mode 100644
index 000000000000..6bfa955e0939
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SessionCountMeasurement.java
@@ -0,0 +1,50 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.content.SharedPreferences;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+public class SessionCountMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "sessions";
+
+    private static final String PREFERENCE_COUNT = "session_count";
+
+    private final TelemetryConfiguration configuration;
+
+    public SessionCountMeasurement(TelemetryConfiguration configuration) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+    }
+
+    public synchronized void countSession() {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        long count = preferences.getLong(PREFERENCE_COUNT, 0);
+
+        preferences.edit()
+                .putLong(PREFERENCE_COUNT, ++count)
+                .apply();
+    }
+
+    @Override
+    public Object flush() {
+        return getAndResetCount();
+    }
+
+    private synchronized long getAndResetCount() {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        long count = preferences.getLong(PREFERENCE_COUNT, 0);
+
+        preferences.edit()
+                .putLong(PREFERENCE_COUNT, 0)
+                .apply();
+
+        return count;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SessionDurationMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SessionDurationMeasurement.java
new file mode 100644
index 000000000000..133e7c7e64c1
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SessionDurationMeasurement.java
@@ -0,0 +1,81 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.content.SharedPreferences;
+import androidx.annotation.VisibleForTesting;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+import java.util.concurrent.TimeUnit;
+
+public class SessionDurationMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "durations";
+
+    private static final String PREFERENCE_DURATION = "session_duration";
+
+    private final TelemetryConfiguration configuration;
+
+    private boolean sessionStarted = false;
+    private long timeAtSessionStartNano = -1;
+
+    public SessionDurationMeasurement(TelemetryConfiguration configuration) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+    }
+
+    public synchronized void recordSessionStart() {
+        if (sessionStarted) {
+            throw new IllegalStateException("Trying to start session but it is already started");
+        }
+
+        sessionStarted = true;
+        timeAtSessionStartNano = getSystemTimeNano();
+    }
+
+    public synchronized boolean recordSessionEnd() {
+        if (!sessionStarted) {
+            return false;
+        }
+
+        sessionStarted = false;
+
+        final long sessionElapsedSeconds = TimeUnit.NANOSECONDS.toSeconds(getSystemTimeNano() - timeAtSessionStartNano);
+
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        final long totalElapsedSeconds = preferences.getLong(PREFERENCE_DURATION, 0);
+
+        preferences.edit()
+                .putLong(PREFERENCE_DURATION, totalElapsedSeconds + sessionElapsedSeconds)
+                .apply();
+        return true;
+    }
+
+    @Override
+    public Object flush() {
+        return getAndResetDuration();
+    }
+
+    private synchronized long getAndResetDuration() {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        long duration = preferences.getLong(PREFERENCE_DURATION, 0);
+
+        preferences.edit()
+                .putLong(PREFERENCE_DURATION, 0)
+                .apply();
+
+        return duration;
+    }
+
+    /**
+     * Returns (roughly) the system uptime in nanoseconds.
+     */
+    @VisibleForTesting long getSystemTimeNano() {
+        return System.nanoTime();
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SettingsMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SettingsMeasurement.java
new file mode 100644
index 000000000000..36c0c81881ab
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/SettingsMeasurement.java
@@ -0,0 +1,109 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import android.preference.PreferenceManager;
+
+import org.json.JSONException;
+import org.json.JSONObject;
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+import java.util.Map;
+import java.util.Set;
+
+public class SettingsMeasurement extends TelemetryMeasurement {
+    /**
+     * A generic interface for implementations that can provide settings values.
+     */
+    public interface SettingsProvider {
+        /**
+         * Notify this provider that we are going to read values from it. Some providers might need
+         * to perform some actions to be able to provide a fresh set of values.
+         */
+        void update(TelemetryConfiguration configuration);
+
+        /**
+         * Returns true if a settings value is available for the given key.
+         */
+        boolean containsKey(String key);
+
+        /**
+         * Get the setting value for the given key.
+         */
+        Object getValue(String key);
+
+        /**
+         * Notify the provider that we finished reading from it and that it can release resources now.
+         */
+        void release();
+    }
+
+    /**
+     * Setting provider implementation that reads values from SharedPreferences.
+     */
+    public static class SharedPreferenceSettingsProvider implements SettingsProvider {
+        private Map<String, ?> preferences;
+
+        @Override
+        public void update(TelemetryConfiguration configuration) {
+            preferences = PreferenceManager.getDefaultSharedPreferences(
+                    configuration.getContext()).getAll();
+        }
+
+        @Override
+        public boolean containsKey(String key) {
+            return preferences != null && preferences.containsKey(key);
+        }
+
+        @Override
+        public Object getValue(String key) {
+            return preferences.get(key);
+        }
+
+        @Override
+        public void release() {
+            preferences = null;
+        }
+    }
+
+    private static final String FIELD_NAME = "settings";
+
+    private final TelemetryConfiguration configuration;
+
+    public SettingsMeasurement(TelemetryConfiguration configuration) {
+        super(FIELD_NAME);
+
+        this.configuration = configuration;
+    }
+
+    @Override
+    public Object flush() {
+        final SettingsProvider settingsProvider = configuration.getSettingsProvider();
+        settingsProvider.update(configuration);
+
+        final JSONObject object = new JSONObject();
+
+        final Set<String> preferenceKeys = configuration.getPreferencesImportantForTelemetry();
+        if (preferenceKeys.isEmpty()) {
+            return object;
+        }
+
+        for (String key : preferenceKeys) {
+            try {
+                if (settingsProvider.containsKey(key)) {
+                    object.put(key, String.valueOf(settingsProvider.getValue(key)));
+                } else {
+                    object.put(key, JSONObject.NULL);
+                }
+            } catch (JSONException e) {
+                throw new AssertionError("Preference value can't be serialized to JSON", e);
+            }
+        }
+
+        settingsProvider.release();
+
+        return object;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/StaticMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/StaticMeasurement.java
new file mode 100644
index 000000000000..ffc52ce49746
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/StaticMeasurement.java
@@ -0,0 +1,20 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+public class StaticMeasurement extends TelemetryMeasurement {
+    private final Object value;
+
+    public StaticMeasurement(String fieldName, Object value) {
+        super(fieldName);
+
+        this.value = value;
+    }
+
+    @Override
+    public Object flush() {
+        return value;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/TelemetryMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/TelemetryMeasurement.java
new file mode 100644
index 000000000000..410074d542aa
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/TelemetryMeasurement.java
@@ -0,0 +1,30 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+public abstract class TelemetryMeasurement {
+    private final String fieldName;
+
+    public TelemetryMeasurement(String fieldName) {
+        this.fieldName = fieldName;
+    }
+
+    public String getFieldName() {
+        return fieldName;
+    }
+
+    /**
+     * Flush this measurement in order for serializing a ping. Calling this method should create
+     * an Object representing the current state of this measurement. Optionally this measurement
+     * might be reset.
+     *
+     * For example a TelemetryMeasurement implementation for the OS version of the device might
+     * just return a String like "7.0.1".
+     * However a TelemetryMeasurement implementation for counting the usage of search engines might
+     * return a HashMap mapping search engine names to search counts. Additionally those counts will
+     * be reset after flushing.
+     */
+    public abstract Object flush();
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/TimezoneOffsetMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/TimezoneOffsetMeasurement.java
new file mode 100644
index 000000000000..f9e6c06300dd
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/TimezoneOffsetMeasurement.java
@@ -0,0 +1,42 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.VisibleForTesting;
+
+import java.util.Calendar;
+import java.util.concurrent.TimeUnit;
+
+public class TimezoneOffsetMeasurement extends TelemetryMeasurement {
+    private static final String FIELD_NAME = "tz";
+
+    public TimezoneOffsetMeasurement() {
+        super(FIELD_NAME);
+    }
+
+    @Override
+    public Object flush() {
+        return getTimezoneOffsetInMinutesForGivenDate(now());
+    }
+
+    /**
+     * Returns the time zone offset for the given date in minutes. The date makes a difference due to daylight
+     * savings time in some regions. We return minutes because we can accurately represent time zones that are
+     * offset by non-integer hour values, e.g. parts of New Zealand at UTC+12:45.
+     *
+     * @param calendar A calendar with the appropriate time zone & date already set.
+     */
+    private static int getTimezoneOffsetInMinutesForGivenDate(@NonNull final Calendar calendar) {
+        // via Date.getTimezoneOffset deprecated docs (note: it had incorrect order of operations).
+        // Also, we cast to int because we should never overflow here - the max should be GMT+14 = 840.
+        return (int) TimeUnit.MILLISECONDS.toMinutes(calendar.get(Calendar.ZONE_OFFSET) + calendar.get(Calendar.DST_OFFSET));
+    }
+
+    @VisibleForTesting Calendar now() {
+        return Calendar.getInstance();
+    }
+}
+
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/VersionMeasurement.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/VersionMeasurement.java
new file mode 100644
index 000000000000..9a269d69c1fc
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/measurement/VersionMeasurement.java
@@ -0,0 +1,17 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.measurement;
+
+public class VersionMeasurement extends StaticMeasurement {
+    private static final String FIELD_NAME = "v";
+
+    public VersionMeasurement(int version) {
+        super(FIELD_NAME, version);
+
+        if (version <= 0) {
+            throw new IllegalArgumentException("Version should be a positive integer > 0");
+        }
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/net/TelemetryClient.kt b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/net/TelemetryClient.kt
new file mode 100644
index 000000000000..883c8ed81add
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/net/TelemetryClient.kt
@@ -0,0 +1,91 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.net
+
+import androidx.annotation.VisibleForTesting
+import mozilla.components.concept.fetch.Client
+import mozilla.components.concept.fetch.MutableHeaders
+import mozilla.components.concept.fetch.Request
+import mozilla.components.concept.fetch.Response
+import mozilla.components.support.base.log.logger.Logger
+import org.mozilla.telemetry.config.TelemetryConfiguration
+import java.io.IOException
+import java.text.SimpleDateFormat
+import java.util.Calendar
+import java.util.Locale
+import java.util.TimeZone
+import java.util.concurrent.TimeUnit
+
+class TelemetryClient(
+    private val client: Client
+) {
+    private val logger = Logger("telemetry/client")
+
+    fun uploadPing(configuration: TelemetryConfiguration, path: String, serializedPing: String): Boolean {
+        val request = Request(
+            url = configuration.serverEndpoint + path,
+            method = Request.Method.POST,
+            connectTimeout = Pair(configuration.connectTimeout.toLong(), TimeUnit.MILLISECONDS),
+            readTimeout = Pair(configuration.readTimeout.toLong(), TimeUnit.MILLISECONDS),
+            headers = MutableHeaders(
+                "Content-Type" to "application/json; charset=utf-8",
+                "User-Agent" to configuration.userAgent,
+                "Date" to createDateHeaderValue()
+            ),
+            body = Request.Body.fromString(serializedPing))
+
+        val status = try {
+            client.fetch(request).use { response -> response.status }
+        } catch (e: IOException) {
+            logger.warn("IOException while uploading ping", e)
+            return false
+        }
+
+        logger.debug("Ping upload: $status")
+
+        return when (status) {
+            in Response.SUCCESS_STATUS_RANGE -> {
+                // Known success errors (2xx):
+                // 200 - OK. Request accepted into the pipeline.
+
+                // We treat all success codes as successful upload even though we only expect 200.
+                true
+            }
+
+            in Response.CLIENT_ERROR_STATUS_RANGE -> {
+                // Known client (4xx) errors:
+                // 404 - not found - POST/PUT to an unknown namespace
+                // 405 - wrong request type (anything other than POST/PUT)
+                // 411 - missing content-length header
+                // 413 - request body too large (Note that if we have badly-behaved clients that
+                //       retry on 4XX, we should send back 202 on body/path too long).
+                // 414 - request path too long (See above)
+
+                // Something our client did is not correct. It's unlikely that the client is going
+                // to recover from this by re-trying again, so we just log and error and report a
+                // successful upload to the service.
+                logger.error("Server returned client error code: $status")
+                true
+            }
+
+            else -> {
+                // Known other errors:
+                // 500 - internal error
+
+                // For all other errors we log a warning an try again at a later time.
+                logger.warn("Server returned response code: $status")
+                false
+            }
+        }
+    }
+
+    @VisibleForTesting
+    internal fun createDateHeaderValue(): String {
+        val calendar = Calendar.getInstance()
+        val dateFormat = SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z", Locale.US)
+        dateFormat.timeZone = TimeZone.getTimeZone("GMT")
+        return dateFormat.format(calendar.time)
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryCorePingBuilder.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryCorePingBuilder.java
new file mode 100644
index 000000000000..cca7b6812d7b
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryCorePingBuilder.java
@@ -0,0 +1,84 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.ping;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.measurement.ArchMeasurement;
+import org.mozilla.telemetry.measurement.CreatedDateMeasurement;
+import org.mozilla.telemetry.measurement.DefaultSearchMeasurement;
+import org.mozilla.telemetry.measurement.DeviceMeasurement;
+import org.mozilla.telemetry.measurement.ExperimentsMeasurement;
+import org.mozilla.telemetry.measurement.FirstRunProfileDateMeasurement;
+import org.mozilla.telemetry.measurement.LocaleMeasurement;
+import org.mozilla.telemetry.measurement.OperatingSystemMeasurement;
+import org.mozilla.telemetry.measurement.OperatingSystemVersionMeasurement;
+import org.mozilla.telemetry.measurement.SearchesMeasurement;
+import org.mozilla.telemetry.measurement.SequenceMeasurement;
+import org.mozilla.telemetry.measurement.SessionCountMeasurement;
+import org.mozilla.telemetry.measurement.SessionDurationMeasurement;
+import org.mozilla.telemetry.measurement.TimezoneOffsetMeasurement;
+
+/**
+ * This mobile-specific ping is intended to provide the most critical data in a concise format,
+ * allowing for frequent uploads.
+ *
+ * Since this ping is used to measure retention, it should be sent each time the app is opened.
+ *
+ * https://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/data/core-ping.html
+ */
+public class TelemetryCorePingBuilder extends TelemetryPingBuilder {
+    public static final String TYPE = "core";
+    private static final int VERSION = 7;
+
+    private SessionCountMeasurement sessionCountMeasurement;
+    private SessionDurationMeasurement sessionDurationMeasurement;
+    private DefaultSearchMeasurement defaultSearchMeasurement;
+    private SearchesMeasurement searchesMeasurement;
+    private ExperimentsMeasurement experimentsMeasurement;
+
+    public TelemetryCorePingBuilder(TelemetryConfiguration configuration) {
+        super(configuration, TYPE, VERSION);
+
+        addMeasurement(new SequenceMeasurement(configuration, this));
+        addMeasurement(new LocaleMeasurement());
+        addMeasurement(new OperatingSystemMeasurement());
+        addMeasurement(new OperatingSystemVersionMeasurement());
+        addMeasurement(new DeviceMeasurement());
+        addMeasurement(new ArchMeasurement());
+        addMeasurement(new FirstRunProfileDateMeasurement(configuration));
+        addMeasurement(defaultSearchMeasurement = new DefaultSearchMeasurement());
+        addMeasurement(new CreatedDateMeasurement());
+        addMeasurement(new TimezoneOffsetMeasurement());
+        addMeasurement(sessionCountMeasurement = new SessionCountMeasurement(configuration));
+        addMeasurement(sessionDurationMeasurement = new SessionDurationMeasurement(configuration));
+        addMeasurement(searchesMeasurement = new SearchesMeasurement(configuration));
+        addMeasurement(experimentsMeasurement = new ExperimentsMeasurement());
+    }
+
+    public SessionCountMeasurement getSessionCountMeasurement() {
+        return sessionCountMeasurement;
+    }
+
+    public SessionDurationMeasurement getSessionDurationMeasurement() {
+        return sessionDurationMeasurement;
+    }
+
+    public SearchesMeasurement getSearchesMeasurement() {
+        return searchesMeasurement;
+    }
+
+    public DefaultSearchMeasurement getDefaultSearchMeasurement() {
+        return defaultSearchMeasurement;
+    }
+
+    public ExperimentsMeasurement getExperimentsMeasurement() {
+        return experimentsMeasurement;
+    }
+
+    @Override
+    protected String getUploadPath(final String documentId) {
+        return super.getUploadPath(documentId) + "?v=4";
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryEventPingBuilder.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryEventPingBuilder.java
new file mode 100644
index 000000000000..f6db8c1abb6d
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryEventPingBuilder.java
@@ -0,0 +1,56 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.ping;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.measurement.*;
+
+/**
+ * A telemetry ping builder for pings of type "focus-event".
+ *
+ * @deprecated prefer {@link TelemetryMobileEventPingBuilder}. "focus-event" was the original type but
+ * we're migrating to the generic "mobile-event" type. In order to prevent breaking public APIs, we couldn't
+ * change this class directly and copied it into the new ping type.
+ */
+@Deprecated
+public class TelemetryEventPingBuilder extends TelemetryPingBuilder {
+    public static final String TYPE = "focus-event";
+    private static final int VERSION = 1;
+
+    private EventsMeasurement eventsMeasurement;
+    private ExperimentsMapMeasurement experimentsMapMeasurement;
+
+    public TelemetryEventPingBuilder(TelemetryConfiguration configuration) {
+        super(configuration, TYPE, VERSION);
+
+        addMeasurement(new SequenceMeasurement(configuration, this));
+        addMeasurement(new LocaleMeasurement());
+        addMeasurement(new OperatingSystemMeasurement());
+        addMeasurement(new OperatingSystemVersionMeasurement());
+        addMeasurement(new CreatedTimestampMeasurement());
+        addMeasurement(new TimezoneOffsetMeasurement());
+        addMeasurement(new SettingsMeasurement(configuration));
+        addMeasurement(eventsMeasurement = new EventsMeasurement(configuration));
+        addMeasurement(experimentsMapMeasurement = new ExperimentsMapMeasurement());
+    }
+
+    public EventsMeasurement getEventsMeasurement() {
+        return eventsMeasurement;
+    }
+
+    public ExperimentsMapMeasurement getExperimentsMapMeasurement() {
+        return experimentsMapMeasurement;
+    }
+
+    @Override
+    public boolean canBuild() {
+        return eventsMeasurement.getEventCount() >= getConfiguration().getMinimumEventsForUpload();
+    }
+
+    @Override
+    protected String getUploadPath(final String documentId) {
+        return super.getUploadPath(documentId) + "?v=4";
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryMobileEventPingBuilder.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryMobileEventPingBuilder.java
new file mode 100644
index 000000000000..2a9e11a84583
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryMobileEventPingBuilder.java
@@ -0,0 +1,55 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.ping;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.measurement.*;
+
+/**
+ * A telemetry ping builder for events of type "mobile-event".
+ *
+ * See the schema for more details:
+ *   https://github.com/mozilla-services/mozilla-pipeline-schemas/blob/master/schemas/telemetry/mobile-event/mobile-event.1.schema.json
+ */
+public class TelemetryMobileEventPingBuilder extends TelemetryPingBuilder {
+    public static final String TYPE = "mobile-event";
+    private static final int VERSION = 1;
+
+    private EventsMeasurement eventsMeasurement;
+    private ExperimentsMapMeasurement experimentsMapMeasurement;
+
+    public TelemetryMobileEventPingBuilder(TelemetryConfiguration configuration) {
+        super(configuration, TYPE, VERSION);
+
+        addMeasurement(new ProcessStartTimestampMeasurement(configuration));
+        addMeasurement(new SequenceMeasurement(configuration, this));
+        addMeasurement(new LocaleMeasurement());
+        addMeasurement(new OperatingSystemMeasurement());
+        addMeasurement(new OperatingSystemVersionMeasurement());
+        addMeasurement(new CreatedTimestampMeasurement());
+        addMeasurement(new TimezoneOffsetMeasurement());
+        addMeasurement(new SettingsMeasurement(configuration));
+        addMeasurement(eventsMeasurement = new EventsMeasurement(configuration));
+        addMeasurement(experimentsMapMeasurement = new ExperimentsMapMeasurement());
+    }
+
+    public EventsMeasurement getEventsMeasurement() {
+        return eventsMeasurement;
+    }
+
+    public ExperimentsMapMeasurement getExperimentsMapMeasurement() {
+        return experimentsMapMeasurement;
+    }
+
+    @Override
+    public boolean canBuild() {
+        return eventsMeasurement.getEventCount() >= getConfiguration().getMinimumEventsForUpload();
+    }
+
+    @Override
+    protected String getUploadPath(final String documentId) {
+        return super.getUploadPath(documentId) + "?v=4";
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryMobileMetricsPingBuilder.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryMobileMetricsPingBuilder.java
new file mode 100644
index 000000000000..7b923efd2eaa
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryMobileMetricsPingBuilder.java
@@ -0,0 +1,53 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.ping;
+
+import org.json.JSONObject;
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.measurement.ArchMeasurement;
+import org.mozilla.telemetry.measurement.CreatedDateMeasurementNew;
+import org.mozilla.telemetry.measurement.CreatedTimestampMeasurementNew;
+import org.mozilla.telemetry.measurement.DeviceMeasurement;
+import org.mozilla.telemetry.measurement.FirstRunProfileDateMeasurement;
+import org.mozilla.telemetry.measurement.LocaleMeasurement;
+import org.mozilla.telemetry.measurement.MetricsMeasurement;
+import org.mozilla.telemetry.measurement.OperatingSystemMeasurement;
+import org.mozilla.telemetry.measurement.OperatingSystemVersionMeasurement;
+import org.mozilla.telemetry.measurement.ProcessStartTimestampMeasurement;
+import org.mozilla.telemetry.measurement.SequenceMeasurement;
+import org.mozilla.telemetry.measurement.TimezoneOffsetMeasurement;
+
+/**
+ * A telemetry ping builder for events of type "mobile-metrics".
+ *
+ * See the schema for more details:
+ *   https://github.com/mozilla-services/mozilla-pipeline-schemas/blob/master/schemas/telemetry/mobile-metrics/mobile-metrics.1.schema.json
+ */
+public class TelemetryMobileMetricsPingBuilder extends TelemetryPingBuilder {
+    public static final String TYPE = "mobile-metrics";
+    private static final int VERSION = 1;
+
+    public TelemetryMobileMetricsPingBuilder(JSONObject snapshots, TelemetryConfiguration configuration) {
+        super(configuration, TYPE, VERSION);
+
+        addMeasurement(new ProcessStartTimestampMeasurement(configuration));
+        addMeasurement(new SequenceMeasurement(configuration, this));
+        addMeasurement(new LocaleMeasurement());
+        addMeasurement(new DeviceMeasurement());
+        addMeasurement(new ArchMeasurement());
+        addMeasurement(new FirstRunProfileDateMeasurement(configuration));
+        addMeasurement(new OperatingSystemMeasurement());
+        addMeasurement(new OperatingSystemVersionMeasurement());
+        addMeasurement(new CreatedDateMeasurementNew());
+        addMeasurement(new CreatedTimestampMeasurementNew());
+        addMeasurement(new TimezoneOffsetMeasurement());
+        addMeasurement(new MetricsMeasurement(snapshots));
+    }
+
+    @Override
+    protected String getUploadPath(final String documentId) {
+        return super.getUploadPath(documentId) + "?v=4";
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPing.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPing.java
new file mode 100644
index 000000000000..719808dbe21e
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPing.java
@@ -0,0 +1,37 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.ping;
+
+import java.util.Map;
+
+public class TelemetryPing {
+    private final String type;
+    private final String documentId;
+    private final String uploadPath;
+    private final Map<String, Object> measurementResults;
+
+    /* package */ TelemetryPing(String type, String documentId, String uploadPath, Map<String, Object> measurementResults) {
+        this.type = type;
+        this.documentId = documentId;
+        this.uploadPath = uploadPath;
+        this.measurementResults = measurementResults;
+    }
+
+    public String getType() {
+        return type;
+    }
+
+    public String getDocumentId() {
+        return documentId;
+    }
+
+    public String getUploadPath() {
+        return uploadPath;
+    }
+
+    public Map<String, Object> getMeasurementResults() {
+        return measurementResults;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPingBuilder.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPingBuilder.java
new file mode 100644
index 000000000000..73d2d4583722
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPingBuilder.java
@@ -0,0 +1,99 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.ping;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.RestrictTo;
+import androidx.annotation.VisibleForTesting;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.measurement.ClientIdMeasurement;
+import org.mozilla.telemetry.measurement.TelemetryMeasurement;
+import org.mozilla.telemetry.measurement.VersionMeasurement;
+
+import java.util.LinkedHashMap;
+import java.util.LinkedList;
+import java.util.List;
+import java.util.Map;
+import java.util.UUID;
+
+public abstract class TelemetryPingBuilder {
+    private final String type;
+    private final List<TelemetryMeasurement> measurements;
+
+    private TelemetryConfiguration configuration;
+
+    public TelemetryPingBuilder(@NonNull TelemetryConfiguration configuration, @NonNull String type, int version) {
+        this.configuration = configuration;
+        this.type = type;
+        this.measurements = new LinkedList<>();
+
+        // All pings contain a version and a client id (with exception below)
+        addMeasurement(new VersionMeasurement(version));
+        if (shouldIncludeClientId()) {
+            addMeasurement(new ClientIdMeasurement(configuration));
+        }
+    }
+
+    public TelemetryConfiguration getConfiguration() {
+        return configuration;
+    }
+
+    // Fire-tv pocket telemetry ping should not include client-id (see #1606)
+    protected boolean shouldIncludeClientId() {
+        return true;
+    }
+
+    @NonNull
+    public String getType() {
+        return type;
+    }
+
+    protected void addMeasurement(TelemetryMeasurement measurement) {
+        measurements.add(measurement);
+    }
+
+    public boolean canBuild() {
+        return true;
+    }
+
+    public TelemetryPing build() {
+        final String documentId = generateDocumentId();
+
+        return new TelemetryPing(
+                getType(),
+                documentId,
+                getUploadPath(documentId),
+                flushMeasurements());
+    }
+
+    protected String getUploadPath(final String documentId) {
+        final TelemetryConfiguration configuration = getConfiguration();
+
+        return String.format("/submit/telemetry/%s/%s/%s/%s/%s/%s",
+                documentId,
+                getType(),
+                configuration.getAppName(),
+                configuration.getAppVersion(),
+                configuration.getUpdateChannel(),
+                configuration.getBuildId());
+    }
+
+    private Map<String, Object> flushMeasurements() {
+        final Map<String, Object> measurementResults = new LinkedHashMap<>();
+
+        for (TelemetryMeasurement measurement : measurements) {
+            measurementResults.put(measurement.getFieldName(), measurement.flush());
+        }
+
+        return measurementResults;
+    }
+
+    @VisibleForTesting
+    @RestrictTo(RestrictTo.Scope.LIBRARY)
+    public String generateDocumentId() {
+        return UUID.randomUUID().toString();
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPocketEventPingBuilder.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPocketEventPingBuilder.java
new file mode 100644
index 000000000000..1eb2d6d05d0f
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/ping/TelemetryPocketEventPingBuilder.java
@@ -0,0 +1,62 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.ping;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.measurement.CreatedTimestampMeasurement;
+import org.mozilla.telemetry.measurement.DeviceMeasurement;
+import org.mozilla.telemetry.measurement.EventsMeasurement;
+import org.mozilla.telemetry.measurement.LocaleMeasurement;
+import org.mozilla.telemetry.measurement.OperatingSystemMeasurement;
+import org.mozilla.telemetry.measurement.OperatingSystemVersionMeasurement;
+import org.mozilla.telemetry.measurement.PocketIdMeasurement;
+import org.mozilla.telemetry.measurement.ProcessStartTimestampMeasurement;
+import org.mozilla.telemetry.measurement.SequenceMeasurement;
+import org.mozilla.telemetry.measurement.TimezoneOffsetMeasurement;
+
+/**
+ * A telemetry ping builder for events of type "fire-tv-events".
+ *
+ * See the schema for more details:
+ *   https://github.com/mozilla-services/mozilla-pipeline-schemas/blob/dc458113a7a523e60a9ba50e1174a3b1e0cfdc24/schemas/pocket/fire-tv-events/fire-tv-events.1.schema.json
+ */
+public class TelemetryPocketEventPingBuilder extends TelemetryPingBuilder {
+    public static final String TYPE = "fire-tv-events";
+    private static final int VERSION = 1;
+
+    private EventsMeasurement eventsMeasurement;
+
+    public TelemetryPocketEventPingBuilder(TelemetryConfiguration configuration) {
+        super(configuration, TYPE, VERSION);
+
+        addMeasurement(new PocketIdMeasurement(configuration));
+        addMeasurement(new ProcessStartTimestampMeasurement(configuration));
+        addMeasurement(new SequenceMeasurement(configuration, this));
+        addMeasurement(new LocaleMeasurement());
+        addMeasurement(new DeviceMeasurement());
+        addMeasurement(new OperatingSystemMeasurement());
+        addMeasurement(new OperatingSystemVersionMeasurement());
+        addMeasurement(new CreatedTimestampMeasurement());
+        addMeasurement(new TimezoneOffsetMeasurement());
+        addMeasurement(eventsMeasurement = new EventsMeasurement(configuration, "pocket-events"));
+    }
+
+    @Override
+    protected boolean shouldIncludeClientId() {
+        return false;
+    }
+
+    public EventsMeasurement getEventsMeasurement() {
+        return eventsMeasurement;
+    }
+
+    @Override
+    protected String getUploadPath(final String documentId) {
+        return String.format("/submit/pocket/%s/%s/%s",
+                getType(),
+                VERSION,
+                documentId);
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/TelemetryScheduler.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/TelemetryScheduler.java
new file mode 100644
index 000000000000..72c9b1502844
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/TelemetryScheduler.java
@@ -0,0 +1,11 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.schedule;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+
+public interface TelemetryScheduler {
+    void scheduleUpload(TelemetryConfiguration configuration);
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/jobscheduler/JobSchedulerTelemetryScheduler.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/jobscheduler/JobSchedulerTelemetryScheduler.java
new file mode 100644
index 000000000000..29f3683ce4fb
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/jobscheduler/JobSchedulerTelemetryScheduler.java
@@ -0,0 +1,46 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.schedule.jobscheduler;
+
+import android.app.job.JobInfo;
+import android.app.job.JobScheduler;
+import android.content.ComponentName;
+import android.content.Context;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.schedule.TelemetryScheduler;
+
+/**
+ * TelemetryScheduler implementation that uses Android's JobScheduler API to schedule ping uploads.
+ */
+public class JobSchedulerTelemetryScheduler implements TelemetryScheduler {
+    private static final int DEFAULT_JOB_ID = 42;
+
+    private final int jobId;
+
+    public JobSchedulerTelemetryScheduler() {
+        this(DEFAULT_JOB_ID);
+    }
+
+    public JobSchedulerTelemetryScheduler(int jobId) {
+        this.jobId = jobId;
+    }
+
+    @Override
+    public void scheduleUpload(TelemetryConfiguration configuration) {
+        final ComponentName jobService = new ComponentName(configuration.getContext(), TelemetryJobService.class);
+
+        final JobInfo jobInfo = new JobInfo.Builder(jobId, jobService)
+                .setRequiredNetworkType(JobInfo.NETWORK_TYPE_ANY)
+                .setPersisted(true)
+                .setBackoffCriteria(configuration.getInitialBackoffForUpload(), JobInfo.BACKOFF_POLICY_EXPONENTIAL)
+                .build();
+
+        final JobScheduler scheduler = (JobScheduler) configuration.getContext()
+                .getSystemService(Context.JOB_SCHEDULER_SERVICE);
+
+        scheduler.schedule(jobInfo);
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/jobscheduler/TelemetryJobService.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/jobscheduler/TelemetryJobService.java
new file mode 100644
index 000000000000..f58a93b9cc38
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/schedule/jobscheduler/TelemetryJobService.java
@@ -0,0 +1,157 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.schedule.jobscheduler;
+
+import android.annotation.SuppressLint;
+import android.app.job.JobParameters;
+import android.app.job.JobService;
+import android.content.SharedPreferences;
+import android.os.AsyncTask;
+import androidx.annotation.VisibleForTesting;
+import android.util.Log;
+
+import org.mozilla.telemetry.Telemetry;
+import org.mozilla.telemetry.TelemetryHolder;
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.net.TelemetryClient;
+import org.mozilla.telemetry.ping.TelemetryPingBuilder;
+import org.mozilla.telemetry.storage.TelemetryStorage;
+
+import java.util.Calendar;
+
+import mozilla.components.support.base.log.logger.Logger;
+
+public class TelemetryJobService extends JobService {
+    private static final String PREFERENCE_UPLOAD_COUNT_PREFIX = "upload_count_";
+    private static final String PREFERENCE_LAST_UPLOAD_PREFIX = "last_uploade_";
+
+    private final Logger logger = new Logger("telemetry/service");
+    private UploadPingsTask uploadTask;
+
+    @Override
+    public boolean onStartJob(JobParameters params) {
+        uploadTask = new UploadPingsTask();
+        uploadTask.execute(params);
+        return true;
+    }
+
+    @Override
+    public boolean onStopJob(JobParameters params) {
+        if (uploadTask != null) {
+            uploadTask.cancel(true);
+        }
+        return true;
+    }
+
+    @SuppressLint("StaticFieldLeak") // This needs to be fixed (#111)
+    private class UploadPingsTask extends AsyncTask<JobParameters, Void, Void> {
+        @Override
+        protected Void doInBackground(JobParameters... params) {
+            final JobParameters parameters = params[0];
+            uploadPingsInBackground(this, parameters);
+            return null;
+        }
+    }
+
+    @VisibleForTesting public void uploadPingsInBackground(AsyncTask task, JobParameters parameters) {
+        final Telemetry telemetry = TelemetryHolder.get();
+        final TelemetryConfiguration configuration = telemetry.getConfiguration();
+        final TelemetryStorage storage = telemetry.getStorage();
+
+        for (TelemetryPingBuilder builder : telemetry.getBuilders()) {
+            final String pingType = builder.getType();
+            logger.debug("Performing upload of ping type: " + pingType, null);
+
+            if (task.isCancelled()) {
+                logger.debug("Job stopped. Exiting.", null);
+                return; // Job will be rescheduled from onStopJob().
+            }
+
+            if (storage.countStoredPings(pingType) == 0) {
+                logger.debug("No pings of type " + pingType + " to upload", null);
+                continue;
+            }
+
+            if (hasReachedUploadLimit(configuration, pingType)) {
+                logger.debug("Daily upload limit for type " + pingType + " reached", null);
+                continue;
+            }
+
+            if (!performPingUpload(telemetry, pingType)) {
+                logger.info("Upload aborted. Rescheduling job if limit not reached.", null);
+                jobFinished(parameters, !hasReachedUploadLimit(configuration, pingType));
+                return;
+            }
+        }
+
+        logger.debug("All uploads performed", null);
+        jobFinished(parameters, false);
+    }
+
+    /**
+     * Increment the upload counter for this ping type.
+     */
+    private boolean incrementUploadCount(TelemetryConfiguration configuration, String pingType) {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        final long lastUpload = preferences.getLong(PREFERENCE_LAST_UPLOAD_PREFIX + pingType, 0);
+        final long now = now();
+
+        final long count = isSameDay(lastUpload, now)
+                ? preferences.getLong(PREFERENCE_UPLOAD_COUNT_PREFIX + pingType, 0) + 1
+                : 1;
+
+        preferences.edit()
+                .putLong(PREFERENCE_LAST_UPLOAD_PREFIX + pingType, now)
+                .putLong(PREFERENCE_UPLOAD_COUNT_PREFIX + pingType, count)
+                .apply();
+
+        return true;
+    }
+
+    /**
+     * Return true if the upload limit for this ping type has been reached.
+     */
+    private boolean hasReachedUploadLimit(TelemetryConfiguration configuration, String pingType) {
+        final SharedPreferences preferences = configuration.getSharedPreferences();
+
+        final long lastUpload = preferences.getLong(PREFERENCE_LAST_UPLOAD_PREFIX + pingType, 0);
+        final long count = preferences.getLong(PREFERENCE_UPLOAD_COUNT_PREFIX + pingType, 0);
+
+        return isSameDay(lastUpload, now())
+                && count >= configuration.getMaximumNumberOfPingUploadsPerDay();
+    }
+
+    @VisibleForTesting boolean isSameDay(long timestamp1, long timestamp2) {
+        final Calendar calendar1 = Calendar.getInstance();
+        calendar1.setTimeInMillis(timestamp1);
+
+        final Calendar calendar2 = Calendar.getInstance();
+        calendar2.setTimeInMillis(timestamp2);
+
+        return (calendar1.get(Calendar.ERA) == calendar2.get(Calendar.ERA) &&
+                calendar1.get(Calendar.YEAR) == calendar2.get(Calendar.YEAR) &&
+                calendar1.get(Calendar.DAY_OF_YEAR) == calendar2.get(Calendar.DAY_OF_YEAR));
+    }
+
+    @VisibleForTesting long now() {
+        return System.currentTimeMillis();
+    }
+
+    private boolean performPingUpload(Telemetry telemetry, final String pingType) {
+        final TelemetryConfiguration configuration = telemetry.getConfiguration();
+        final TelemetryStorage storage = telemetry.getStorage();
+        final TelemetryClient client = telemetry.getClient();
+
+        return storage.process(pingType, new TelemetryStorage.TelemetryStorageCallback() {
+            @Override
+            public boolean onTelemetryPingLoaded(String path, String serializedPing) {
+                return !hasReachedUploadLimit(configuration, pingType)
+                        && client.uploadPing(configuration, path, serializedPing)
+                        && incrementUploadCount(configuration, pingType);
+            }
+        });
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/serialize/JSONPingSerializer.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/serialize/JSONPingSerializer.java
new file mode 100644
index 000000000000..6d0447011814
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/serialize/JSONPingSerializer.java
@@ -0,0 +1,31 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.serialize;
+
+import org.json.JSONException;
+import org.json.JSONObject;
+import org.mozilla.telemetry.ping.TelemetryPing;
+
+import java.util.Map;
+
+/**
+ * TelemetryPingSerializer that uses the org.json library provided by the Android system.
+ */
+public class JSONPingSerializer implements TelemetryPingSerializer {
+    @Override
+    public String serialize(TelemetryPing ping) {
+        try {
+            final JSONObject object = new JSONObject();
+
+            for (Map.Entry<String, Object> result : ping.getMeasurementResults().entrySet()) {
+                object.put(result.getKey(), result.getValue());
+            }
+
+            return object.toString();
+        } catch (JSONException e) {
+            throw new AssertionError("Can't serialize ping", e);
+        }
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/serialize/TelemetryPingSerializer.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/serialize/TelemetryPingSerializer.java
new file mode 100644
index 000000000000..d514e991e5f2
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/serialize/TelemetryPingSerializer.java
@@ -0,0 +1,11 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.serialize;
+
+import org.mozilla.telemetry.ping.TelemetryPing;
+
+public interface TelemetryPingSerializer {
+    String serialize(TelemetryPing ping);
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/storage/FileTelemetryStorage.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/storage/FileTelemetryStorage.java
new file mode 100644
index 000000000000..9fd7d000d6e1
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/storage/FileTelemetryStorage.java
@@ -0,0 +1,166 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.storage;
+
+import androidx.annotation.RestrictTo;
+import androidx.annotation.VisibleForTesting;
+import android.util.Log;
+
+import org.mozilla.telemetry.config.TelemetryConfiguration;
+import org.mozilla.telemetry.ping.TelemetryPing;
+import org.mozilla.telemetry.serialize.TelemetryPingSerializer;
+import org.mozilla.telemetry.util.FileUtils;
+import org.mozilla.telemetry.util.IOUtils;
+
+import java.io.BufferedReader;
+import java.io.BufferedWriter;
+import java.io.File;
+import java.io.FileNotFoundException;
+import java.io.FileOutputStream;
+import java.io.FileReader;
+import java.io.FilenameFilter;
+import java.io.IOException;
+import java.io.OutputStreamWriter;
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.Collections;
+import java.util.List;
+import java.util.regex.Pattern;
+
+import mozilla.components.support.base.log.logger.Logger;
+
+/**
+ * TelemetryStorage implementation that stores pings as files on disk.
+ */
+public class FileTelemetryStorage implements TelemetryStorage {
+    private static final String FILE_PATTERN = "[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}";
+    private static final String STORAGE_DIRECTORY = "storage";
+
+    private final Logger logger;
+    private final TelemetryConfiguration configuration;
+    private final TelemetryPingSerializer serializer;
+
+    private final File storageDirectory;
+
+    public FileTelemetryStorage(TelemetryConfiguration configuration, TelemetryPingSerializer serializer) {
+        this.logger = new Logger("telemetry/storage");
+        this.configuration = configuration;
+        this.serializer = serializer;
+
+        this.storageDirectory = new File(configuration.getDataDirectory(), STORAGE_DIRECTORY);
+
+        FileUtils.assertDirectory(storageDirectory);
+    }
+
+    @Override
+    public synchronized void store(TelemetryPing ping) {
+        storePing(ping);
+        maybePrunePings(ping.getType());
+    }
+
+    @Override
+    public boolean process(String pingType, TelemetryStorageCallback callback) {
+        for (File file : listPingFiles(pingType)) {
+            FileReader reader = null;
+
+            try {
+                final BufferedReader bufferedReader = new BufferedReader(reader = new FileReader(file));
+                final String path = bufferedReader.readLine();
+                final String serializedPing = bufferedReader.readLine();
+
+                final boolean processed = serializedPing == null || callback.onTelemetryPingLoaded(path, serializedPing);
+
+                if (processed) {
+                    if (!file.delete()) {
+                        logger.warn("Could not delete local ping file after processing", new IOException());
+                    }
+                } else {
+                    // The callback couldn't process this file. Let's stop and rety later.
+                    return false;
+                }
+            } catch (FileNotFoundException e) {
+                // This shouldn't happen after we queried the directory. But whatever. Let's continue.
+            } catch(IOException e) {
+                // Something is not right. Let's stop.
+                return false;
+            } finally {
+                IOUtils.safeClose(reader);
+            }
+        }
+
+        return true;
+    }
+
+    private void storePing(TelemetryPing ping) {
+        final File pingStorageDirectory = new File(storageDirectory, ping.getType());
+        FileUtils.assertDirectory(pingStorageDirectory);
+
+        final String serializedPing = serializer.serialize(ping);
+
+        final File pingFile = new File(pingStorageDirectory, ping.getDocumentId());
+
+        FileOutputStream stream = null;
+
+        try {
+            stream = new FileOutputStream(pingFile, true);
+
+            final BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stream));
+            writer.write(ping.getUploadPath());
+            writer.newLine();
+            writer.write(serializedPing);
+            writer.newLine();
+            writer.flush();
+            writer.close();
+        } catch (IOException e) {
+            logger.warn("IOException while writing event to disk", e);
+        } finally {
+            IOUtils.safeClose(stream);
+        }
+    }
+
+    private void maybePrunePings(final String pingType) {
+        final File[] files = listPingFiles(pingType);
+
+        final int pingsToRemove = files.length - configuration.getMaximumNumberOfPingsPerType();
+
+        if (pingsToRemove <= 0) {
+            return;
+        }
+
+        final List<File> sortedFiles = new ArrayList<>(Arrays.asList(files));
+        Collections.sort(sortedFiles, new FileUtils.FileLastModifiedComparator());
+
+        for (File file : sortedFiles) {
+            System.out.println(file.lastModified() + " " + file.getAbsolutePath());
+        }
+
+        for (int i = 0; i < pingsToRemove; i++) {
+            final File file = sortedFiles.get(i);
+
+            if (!file.delete()) {
+                logger.warn("Can't prune ping file: " + file.getAbsolutePath(), new IOException());
+            }
+        }
+    }
+
+    @VisibleForTesting File[] listPingFiles(String pingType) {
+        final File pingStorageDirectory = new File(storageDirectory, pingType);
+
+        final Pattern uuidPattern = Pattern.compile(FILE_PATTERN);
+
+        final FilenameFilter uuidFilenameFilter = new FileUtils.FilenameRegexFilter(uuidPattern);
+        final File[] files = pingStorageDirectory.listFiles(uuidFilenameFilter);
+        if (files == null) {
+            return new File[0];
+        }
+        return files;
+    }
+
+    @Override
+    @RestrictTo(RestrictTo.Scope.LIBRARY)
+    public int countStoredPings(String pingType) {
+        return listPingFiles(pingType).length;
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/storage/TelemetryStorage.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/storage/TelemetryStorage.java
new file mode 100644
index 000000000000..affa1f9643c8
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/storage/TelemetryStorage.java
@@ -0,0 +1,19 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.storage;
+
+import org.mozilla.telemetry.ping.TelemetryPing;
+
+public interface TelemetryStorage {
+    interface TelemetryStorageCallback {
+        boolean onTelemetryPingLoaded(String path, String serializedPing);
+    }
+
+    void store(TelemetryPing ping);
+
+    boolean process(String pingType, TelemetryStorageCallback callback);
+
+    int countStoredPings(String pingType);
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/ContextUtils.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/ContextUtils.java
new file mode 100644
index 000000000000..527abb991a8d
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/ContextUtils.java
@@ -0,0 +1,43 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.util;
+
+import android.content.Context;
+import android.content.pm.ApplicationInfo;
+import android.content.pm.PackageInfo;
+import android.content.pm.PackageManager;
+import androidx.annotation.RestrictTo;
+
+@RestrictTo(RestrictTo.Scope.LIBRARY)
+public class ContextUtils {
+    public static String getVersionName(Context context) {
+        return getPackageInfo(context).versionName;
+    }
+
+    public static int getVersionCode(Context context) {
+        return getPackageInfo(context).versionCode;
+    }
+
+    public static String getAppName(Context context) {
+        final PackageManager packageManager = context.getPackageManager();
+        return getApplicationInfo(context).loadLabel(packageManager).toString();
+    }
+
+    private static PackageInfo getPackageInfo(Context context) {
+        try {
+            return context.getPackageManager().getPackageInfo(context.getPackageName(), 0);
+        } catch (PackageManager.NameNotFoundException e) {
+            throw new AssertionError("Could not get own package info");
+        }
+    }
+
+    private static ApplicationInfo getApplicationInfo(Context context) {
+        try {
+            return context.getPackageManager().getApplicationInfo(context.getPackageName(), 0);
+        } catch (PackageManager.NameNotFoundException e) {
+            throw new AssertionError("Could not get own package info");
+        }
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/FileUtils.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/FileUtils.java
new file mode 100644
index 000000000000..e89c53d03b45
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/FileUtils.java
@@ -0,0 +1,67 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.util;
+
+import androidx.annotation.RestrictTo;
+
+import java.io.File;
+import java.io.FilenameFilter;
+import java.util.Comparator;
+import java.util.regex.Matcher;
+import java.util.regex.Pattern;
+
+@RestrictTo(RestrictTo.Scope.LIBRARY)
+public class FileUtils {
+    public static void assertDirectory(File directory) {
+        if (!directory.exists() && !directory.mkdirs()) {
+            throw new IllegalStateException(
+                    "Directory doesn't exist and can't be created: " + directory.getAbsolutePath());
+        }
+
+        if (!directory.isDirectory() || !directory.canWrite()) {
+            throw new IllegalStateException(
+                    "Directory is not writable directory: " + directory.getAbsolutePath());
+        }
+    }
+
+    public static class FilenameRegexFilter implements FilenameFilter {
+        private final Pattern mPattern;
+
+        // Each time `Pattern.matcher` is called, a new matcher is created. We can avoid the excessive object creation
+        // by caching the returned matcher and calling `Matcher.reset` on it. Since Matcher's are not thread safe,
+        // this assumes `FilenameFilter.accept` is not run in parallel (which, according to the source, it is not).
+        private Matcher mCachedMatcher;
+
+        public FilenameRegexFilter(final Pattern pattern) {
+            mPattern = pattern;
+        }
+
+        @Override
+        public boolean accept(final File dir, final String filename) {
+            if (mCachedMatcher == null) {
+                mCachedMatcher = mPattern.matcher(filename);
+            } else {
+                mCachedMatcher.reset(filename);
+            }
+            return mCachedMatcher.matches();
+        }
+    }
+
+    public static class FileLastModifiedComparator implements Comparator<File> {
+        @Override
+        public int compare(final File lhs, final File rhs) {
+            // Long.compare is API 19+.
+            final long lhsModified = lhs.lastModified();
+            final long rhsModified = rhs.lastModified();
+            if (lhsModified < rhsModified) {
+                return -1;
+            } else if (lhsModified == rhsModified) {
+                return 0;
+            } else {
+                return 1;
+            }
+        }
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/IOUtils.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/IOUtils.java
new file mode 100644
index 000000000000..44241a2a3cdc
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/IOUtils.java
@@ -0,0 +1,21 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.util;
+
+import androidx.annotation.RestrictTo;
+
+import java.io.Closeable;
+import java.io.IOException;
+
+@RestrictTo(RestrictTo.Scope.LIBRARY)
+public class IOUtils {
+    public static void safeClose(Closeable stream) {
+        try {
+            if (stream != null) {
+                stream.close();
+            }
+        } catch (IOException ignored) { }
+    }
+}
diff --git a/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/StringUtils.java b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/StringUtils.java
new file mode 100644
index 000000000000..226dacc83914
--- /dev/null
+++ b/focus-android/service-telemetry/src/main/java/org/mozilla/telemetry/util/StringUtils.java
@@ -0,0 +1,17 @@
+/* This Source Code Form is subject to the terms of the Mozilla Public
+ * License, v. 2.0. If a copy of the MPL was not distributed with this
+ * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
+
+package org.mozilla.telemetry.util;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.RestrictTo;
+
+@RestrictTo(RestrictTo.Scope.LIBRARY)
+public class StringUtils {
+    public static String safeSubstring(@NonNull final String str, final int start, final int end) {
+        return str.substring(
+                Math.max(0, start),
+                Math.min(end, str.length()));
+    }
+}
diff --git a/focus-android/settings.gradle b/focus-android/settings.gradle
index 7546ed61b316..073fa8399e9c 100644
--- a/focus-android/settings.gradle
+++ b/focus-android/settings.gradle
@@ -7,4 +7,5 @@ pluginManagement {
     }
 }
 
-include ':app'
\ No newline at end of file
+include ':app'
+include ':service-telemetry'
