diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/MultitaskingTest.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/MultitaskingTest.kt
index 2db024fb16dc..061b5c575bd2 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/MultitaskingTest.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/MultitaskingTest.kt
@@ -32,10 +32,10 @@ import org.mozilla.focus.testAnnotations.SmokeTest
 class MultitaskingTest {
     private lateinit var webServer: MockWebServer
     private val store = InstrumentationRegistry.getInstrumentation()
-                            .targetContext
-                            .applicationContext
-                            .components
-                            .store
+        .targetContext
+        .applicationContext
+        .components
+        .store
 
     @get: Rule
     var mActivityTestRule = MainActivityFirstrunTestRule(showFirstRun = false)
@@ -85,7 +85,7 @@ class MultitaskingTest {
             selectTab(firstPageTitle)
             verifyPageContent("Tab 1")
 
-        // Remove all tabs via the tabs tray
+            // Remove all tabs via the tabs tray
         }.eraseBrowsingHistoryFromTabsTray {
             verifySnackBarText(getStringResource(R.string.feedback_erase2))
             TestCase.assertTrue(store.state.privateTabs.isEmpty())
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SafeBrowsingTest.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SafeBrowsingTest.kt
index 3523fe2e943e..3a12bd4ab9ba 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SafeBrowsingTest.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SafeBrowsingTest.kt
@@ -24,7 +24,7 @@ class SafeBrowsingTest {
     private val malwareWarning = getStringResource(R.string.mozac_browser_errorpages_safe_browsing_malware_uri_title)
     private val phishingWarning = getStringResource(R.string.mozac_browser_errorpages_safe_phishing_uri_title)
     private val unwantedSoftwareWarning =
-            getStringResource(R.string.mozac_browser_errorpages_safe_browsing_unwanted_uri_title)
+        getStringResource(R.string.mozac_browser_errorpages_safe_browsing_unwanted_uri_title)
     private val harmfulSiteWarning = getStringResource(R.string.mozac_browser_errorpages_safe_harmful_uri_title)
     private val tryAgainButton = getStringResource(R.string.mozac_browser_errorpages_page_refresh)
 
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SearchTest.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SearchTest.kt
index 5dc6a539f23b..c67636c0f4bd 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SearchTest.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SearchTest.kt
@@ -69,10 +69,10 @@ class SearchTest {
             allowEnableSearchSuggestions()
 
             searchSuggestionsIdlingResources =
-                    RecyclerViewIdlingResource(
-                            mActivityTestRule.activity.findViewById(R.id.suggestionList),
-                            1
-                    )
+                RecyclerViewIdlingResource(
+                    mActivityTestRule.activity.findViewById(R.id.suggestionList),
+                    1
+                )
             IdlingRegistry.getInstance().register(searchSuggestionsIdlingResources!!)
 
             verifyHintForSearch(searchString)
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SwitchLocaleTest.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SwitchLocaleTest.kt
index d92d2239c1c6..cc534a1d850f 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SwitchLocaleTest.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/SwitchLocaleTest.kt
@@ -14,15 +14,15 @@ import org.junit.rules.TestWatcher
 import org.junit.runner.Description
 import org.mozilla.focus.activity.robots.homeScreen
 import org.mozilla.focus.helpers.MainActivityFirstrunTestRule
+import org.mozilla.focus.helpers.StringsHelper.EN_FRENCH_LOCALE
 import org.mozilla.focus.helpers.StringsHelper.EN_LANGUAGE_MENU_HEADING
 import org.mozilla.focus.helpers.StringsHelper.FR_ENGLISH_LOCALE
 import org.mozilla.focus.helpers.StringsHelper.FR_GENERAL_HEADING
 import org.mozilla.focus.helpers.StringsHelper.FR_HELP
 import org.mozilla.focus.helpers.StringsHelper.FR_LANGUAGE_MENU
-import org.mozilla.focus.helpers.StringsHelper.EN_FRENCH_LOCALE
+import org.mozilla.focus.helpers.StringsHelper.FR_LANGUAGE_SYSTEM_DEFAULT
 import org.mozilla.focus.helpers.StringsHelper.FR_MOTTO
 import org.mozilla.focus.helpers.StringsHelper.FR_SETTINGS
-import org.mozilla.focus.helpers.StringsHelper.FR_LANGUAGE_SYSTEM_DEFAULT
 import org.mozilla.focus.helpers.TestHelper.exitToTop
 import org.mozilla.focus.helpers.TestHelper.verifyTranslatedTextExists
 import java.util.Locale
@@ -69,7 +69,7 @@ class SwitchLocaleTest {
         }.openMainMenu {
             verifyTranslatedTextExists(FR_SETTINGS)
             verifyTranslatedTextExists(FR_HELP)
-        /* change back to system locale, verify the locale is changed */
+            /* change back to system locale, verify the locale is changed */
         }.openSettings(FR_SETTINGS) {
         }.openGeneralSettingsMenu(FR_GENERAL_HEADING) {
             openLanguageSelectionMenu(FR_LANGUAGE_MENU)
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/ToggleBlockTest.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/ToggleBlockTest.kt
index c0020470ee4e..88c9b61a529f 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/ToggleBlockTest.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/ToggleBlockTest.kt
@@ -96,9 +96,13 @@ class ToggleBlockTest {
 
         // Blocking is on
         Espresso.onView(ViewMatchers.withId(R.id.mozac_browser_toolbar_tracking_protection_indicator))
-            .check(ViewAssertions.matches(ViewMatchers.withContentDescription(
-                R.string.mozac_browser_toolbar_content_description_tracking_protection_on_no_trackers_blocked
-            )))
+            .check(
+                ViewAssertions.matches(
+                    ViewMatchers.withContentDescription(
+                        R.string.mozac_browser_toolbar_content_description_tracking_protection_on_no_trackers_blocked
+                    )
+                )
+            )
 
         // Open the menu
         Espresso.onView(ViewMatchers.withId(R.id.menuView))
@@ -115,9 +119,13 @@ class ToggleBlockTest {
 
         // Now the blocking badge is visible
         Espresso.onView(ViewMatchers.withId(R.id.mozac_browser_toolbar_tracking_protection_indicator))
-            .check(ViewAssertions.matches(ViewMatchers.withContentDescription(
-                R.string.mozac_browser_toolbar_content_description_tracking_protection_off_for_a_site1
-            )))
+            .check(
+                ViewAssertions.matches(
+                    ViewMatchers.withContentDescription(
+                        R.string.mozac_browser_toolbar_content_description_tracking_protection_off_for_a_site1
+                    )
+                )
+            )
         Espresso.onView(ViewMatchers.withId(R.id.webview)).perform(ViewActions.click())
 
         // Open the menu again. Now the switch is disabled and the tracker count should be disabled.
@@ -165,9 +173,13 @@ class ToggleBlockTest {
 
         // Blocking is on
         Espresso.onView(ViewMatchers.withId(R.id.mozac_browser_toolbar_tracking_protection_indicator))
-            .check(ViewAssertions.matches(ViewMatchers.withContentDescription(
-                R.string.mozac_browser_toolbar_content_description_tracking_protection_on_no_trackers_blocked
-            )))
+            .check(
+                ViewAssertions.matches(
+                    ViewMatchers.withContentDescription(
+                        R.string.mozac_browser_toolbar_content_description_tracking_protection_on_no_trackers_blocked
+                    )
+                )
+            )
 
         // Open the menu again. Now the switch is disabled and the tracker count should be disabled.
         Espresso.onView(ViewMatchers.withId(R.id.menuView))
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/URLExceptionTest.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/URLExceptionTest.kt
index 098e0f46953f..ac256b27dc5b 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/URLExceptionTest.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/URLExceptionTest.kt
@@ -105,9 +105,13 @@ class URLExceptionTest {
 
         // The blocking badge is not disabled
         Espresso.onView(ViewMatchers.withId(R.id.mozac_browser_toolbar_tracking_protection_indicator))
-            .check(ViewAssertions.matches(ViewMatchers.withContentDescription(
-                R.string.mozac_browser_toolbar_content_description_tracking_protection_on_no_trackers_blocked
-            )))
+            .check(
+                ViewAssertions.matches(
+                    ViewMatchers.withContentDescription(
+                        R.string.mozac_browser_toolbar_content_description_tracking_protection_on_no_trackers_blocked
+                    )
+                )
+            )
 
         // Open the menu
         Espresso.onView(ViewMatchers.withId(R.id.menuView))
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/AddToHomeScreenRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/AddToHomeScreenRobot.kt
index 628097c9d8cc..1f6e18db4840 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/AddToHomeScreenRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/AddToHomeScreenRobot.kt
@@ -42,8 +42,8 @@ class AddToHomeScreenRobot {
             deviceHomeScreen().setAsHorizontalList()
 
             fun shortcut() =
-                    deviceHomeScreen()
-                            .getChildByText(UiSelector().text(title), title, true)
+                deviceHomeScreen()
+                    .getChildByText(UiSelector().text(title), title, true)
             shortcut().waitForExists(waitingTime)
             shortcut().clickAndWaitForNewWindow()
 
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/BrowserRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/BrowserRobot.kt
index f6a7b36b74c1..e540e56a971a 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/BrowserRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/BrowserRobot.kt
@@ -35,8 +35,9 @@ class BrowserRobot {
         )
 
     fun verifyBrowserView() =
-        assertTrue(mDevice.findObject(UiSelector().resourceId("$packageName:id/webview"))
-            .waitForExists(webPageLoadwaitingTime)
+        assertTrue(
+            mDevice.findObject(UiSelector().resourceId("$packageName:id/webview"))
+                .waitForExists(webPageLoadwaitingTime)
         )
 
     fun verifyPageContent(expectedText: String) {
@@ -110,14 +111,14 @@ class BrowserRobot {
 
     fun clickPlayButton() {
         val playButton =
-                mDevice.findObject(UiSelector().text("Play"))
+            mDevice.findObject(UiSelector().text("Play"))
         playButton.waitForExists(webPageLoadwaitingTime)
         playButton.click()
     }
 
     fun clickPauseButton() {
         val pauseButton =
-                mDevice.findObject(UiSelector().text("Pause"))
+            mDevice.findObject(UiSelector().text("Pause"))
         pauseButton.waitForExists(webPageLoadwaitingTime)
         pauseButton.click()
     }
@@ -161,8 +162,8 @@ class BrowserRobot {
 
         fun clearBrowsingData(interact: HomeScreenRobot.() -> Unit): HomeScreenRobot.Transition {
             floatingEraseButton
-                    .check(matches(isCompletelyDisplayed()))
-                    .perform(click())
+                .check(matches(isCompletelyDisplayed()))
+                .perform(click())
 
             HomeScreenRobot().interact()
             return HomeScreenRobot.Transition()
@@ -224,7 +225,7 @@ private val tabsTrayEraseHistoryButton = onView(withText(R.string.tabs_tray_acti
 private val mainMenu = onView(withId(R.id.mozac_browser_toolbar_menu))
 
 private val shareAppsList =
-        mDevice.findObject(UiSelector().resourceId("android:id/resolver_list"))
+    mDevice.findObject(UiSelector().resourceId("android:id/resolver_list"))
 
 private val securityIcon = onView(withId(R.id.mozac_browser_toolbar_security_indicator))
 
@@ -233,6 +234,6 @@ private val site_identity_state = onView(withId(R.id.site_identity_state))
 private val site_identity_title = onView(withId(R.id.site_identity_title))
 
 private val site_identity_Icon =
-        mDevice.findObject(UiSelector().resourceId("$packageName:id/site_identity_icon"))
+    mDevice.findObject(UiSelector().resourceId("$packageName:id/site_identity_icon"))
 
 private val certificateVerifier = onView(withId(R.id.verifier))
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/HomeScreenRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/HomeScreenRobot.kt
index 06dae3d33cb5..38abf300f9f3 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/HomeScreenRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/HomeScreenRobot.kt
@@ -76,9 +76,9 @@ fun homeScreen(interact: HomeScreenRobot.() -> Unit): HomeScreenRobot.Transition
 }
 
 private val editURLBar =
-        mDevice.findObject(
-                UiSelector().resourceId("$packageName:id/mozac_browser_toolbar_edit_url_view")
-        )
+    mDevice.findObject(
+        UiSelector().resourceId("$packageName:id/mozac_browser_toolbar_edit_url_view")
+    )
 
 private val mainMenu = onView(withId(R.id.menuView))
 
@@ -116,4 +116,4 @@ private val finishBtn = mDevice.findObject(
 )
 
 private val homeScreenTips =
-        mDevice.findObject(UiSelector().resourceId("$packageName:id/homeViewTipsLabel"))
+    mDevice.findObject(UiSelector().resourceId("$packageName:id/homeViewTipsLabel"))
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsGeneralMenuRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsGeneralMenuRobot.kt
index f7c7612afae0..22aa5d4c510f 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsGeneralMenuRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsGeneralMenuRobot.kt
@@ -34,8 +34,8 @@ class SettingsGeneralMenuRobot {
 
     fun clickSetDefaultBrowser() {
         defaultBrowserSwitch
-                .check(matches(isDisplayed()))
-                .perform(click())
+            .check(matches(isDisplayed()))
+            .perform(click())
     }
 
     fun verifyAndroidDefaultAppsMenuAppears() {
@@ -51,19 +51,21 @@ class SettingsGeneralMenuRobot {
     fun selectAlwaysOpenWithFocus() {
         mDevice.findObject(UiSelector().text(appName)).click()
         mDevice.findObject(
-                UiSelector()
-                        .resourceId("android:id/button_always")
-                        .enabled(true)
+            UiSelector()
+                .resourceId("android:id/button_always")
+                .enabled(true)
         ).click()
     }
 
     fun verifySwitchIsToggled(checked: Boolean) {
-        onView(withId(R.id.switch_widget)).check(matches(
+        onView(withId(R.id.switch_widget)).check(
+            matches(
                 if (checked)
                     isChecked()
                 else
                     isNotChecked()
-        ))
+            )
+        )
     }
 
     fun openLanguageSelectionMenu(localizedText: String = "Language"): ViewInteraction =
@@ -88,13 +90,13 @@ private val defaultBrowserSwitch = onView(withText("Make Firefox Focus default b
 private val switchToNewTabToggleButton = onView(withText("Switch to link in new tab immediately"))
 
 private val openWithDialogTitle = mDevice.findObject(
-        UiSelector()
-                .text("Open with")
+    UiSelector()
+        .text("Open with")
 )
 
 private val openWithList = mDevice.findObject(
-        UiSelector()
-                .resourceId("android:id/resolver_list")
+    UiSelector()
+        .resourceId("android:id/resolver_list")
 )
 
 private fun languageMenuButton(localizedText: String) = onView(withText(localizedText))
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsMozillaMenuRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsMozillaMenuRobot.kt
index 125ad61de401..e2236059b36f 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsMozillaMenuRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsMozillaMenuRobot.kt
@@ -31,8 +31,8 @@ class SettingsMozillaMenuRobot {
 
     fun switchHomeScreenTips() {
         showTipsSwitch
-                .check(matches(isDisplayed()))
-                .perform(click())
+            .check(matches(isDisplayed()))
+            .perform(click())
     }
 
     fun openAboutPage() {
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsPrivacyMenuRobot.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsPrivacyMenuRobot.kt
index fcdd2b0a4d28..3adc12490a8d 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsPrivacyMenuRobot.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/activity/robots/SettingsPrivacyMenuRobot.kt
@@ -41,7 +41,7 @@ class SettingsPrivacyMenuRobot {
 }
 
 private val privacySettingsList =
-        UiScrollable(UiSelector().resourceId("$packageName:id/recycler_view"))
+    UiScrollable(UiSelector().resourceId("$packageName:id/recycler_view"))
 
 private fun adTrackersBlockSwitch(): ViewInteraction {
     privacySettingsList
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/helpers/EspressoHelper.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/helpers/EspressoHelper.kt
index 408000847d61..df39eb55a814 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/helpers/EspressoHelper.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/helpers/EspressoHelper.kt
@@ -79,8 +79,10 @@ object EspressoHelper {
 
             public override fun matchesSafely(view: View): Boolean {
                 val parent = view.parent
-                return (parent is ViewGroup && parentMatcher.matches(parent) &&
-                        view == parent.getChildAt(position))
+                return (
+                    parent is ViewGroup && parentMatcher.matches(parent) &&
+                        view == parent.getChildAt(position)
+                    )
             }
         }
     }
diff --git a/focus-android/app/src/androidTest/java/org/mozilla/focus/privacy/LocalSessionStorageTest.kt b/focus-android/app/src/androidTest/java/org/mozilla/focus/privacy/LocalSessionStorageTest.kt
index 9e7d1e87b446..198ad7217da1 100644
--- a/focus-android/app/src/androidTest/java/org/mozilla/focus/privacy/LocalSessionStorageTest.kt
+++ b/focus-android/app/src/androidTest/java/org/mozilla/focus/privacy/LocalSessionStorageTest.kt
@@ -36,12 +36,18 @@ class LocalSessionStorageTest {
     fun setUp() {
         webServer = MockWebServer()
         try {
-            webServer.enqueue(MockResponse()
-                    .setBody(readTestAsset("storage_start.html")))
-            webServer.enqueue(MockResponse()
-                    .setBody(readTestAsset("storage_check.html")))
-            webServer.enqueue(MockResponse()
-                    .setBody(readTestAsset("storage_check.html")))
+            webServer.enqueue(
+                MockResponse()
+                    .setBody(readTestAsset("storage_start.html"))
+            )
+            webServer.enqueue(
+                MockResponse()
+                    .setBody(readTestAsset("storage_check.html"))
+            )
+            webServer.enqueue(
+                MockResponse()
+                    .setBody(readTestAsset("storage_check.html"))
+            )
             webServer.start()
         } catch (e: IOException) {
             throw AssertionError("Could not start web server", e)
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/Components.kt b/focus-android/app/src/main/java/org/mozilla/focus/Components.kt
index f182d33e45ae..76540540f278 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/Components.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/Components.kt
@@ -71,20 +71,22 @@ class Components(
     private val clientOverride: Client? = null
 ) {
     val appStore: AppStore by lazy {
-        AppStore(AppState(
-            screen = determineInitialScreen(context)
-        ))
+        AppStore(
+            AppState(
+                screen = determineInitialScreen(context)
+            )
+        )
     }
 
     val engineDefaultSettings by lazy {
         val settings = Settings.getInstance(context)
 
         DefaultSettings(
-                requestInterceptor = LocalizedContentInterceptor(context),
-                trackingProtectionPolicy = settings.createTrackingProtectionPolicy(),
-                javascriptEnabled = !settings.shouldBlockJavaScript(),
-                remoteDebuggingEnabled = settings.shouldEnableRemoteDebugging(),
-                webFontsEnabled = !settings.shouldBlockWebFonts()
+            requestInterceptor = LocalizedContentInterceptor(context),
+            trackingProtectionPolicy = settings.createTrackingProtectionPolicy(),
+            javascriptEnabled = !settings.shouldBlockJavaScript(),
+            remoteDebuggingEnabled = settings.shouldEnableRemoteDebugging(),
+            webFontsEnabled = !settings.shouldBlockWebFonts()
         )
     }
 
@@ -214,7 +216,8 @@ private fun createCrashReporter(context: Context): CrashReporter {
         context,
         0,
         intent,
-        0)
+        0
+    )
 
     return CrashReporter(
         context = context,
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/FocusApplication.kt b/focus-android/app/src/main/java/org/mozilla/focus/FocusApplication.kt
index f397d01f8f73..e1ff5fac3be3 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/FocusApplication.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/FocusApplication.kt
@@ -80,11 +80,11 @@ open class FocusApplication : LocaleAwareApplication(), CoroutineScope {
 
         val threadPolicyBuilder = StrictMode.ThreadPolicy.Builder().detectAll()
         val vmPolicyBuilder = StrictMode.VmPolicy.Builder()
-                .detectActivityLeaks()
-                .detectFileUriExposure()
-                .detectLeakedClosableObjects()
-                .detectLeakedRegistrationObjects()
-                .detectLeakedSqlLiteObjects()
+            .detectActivityLeaks()
+            .detectFileUriExposure()
+            .detectLeakedClosableObjects()
+            .detectLeakedRegistrationObjects()
+            .detectLeakedSqlLiteObjects()
 
         threadPolicyBuilder.penaltyLog()
         vmPolicyBuilder.penaltyLog()
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.kt b/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.kt
index 5699c02cf2b3..54d56570153a 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/activity/EraseShortcutActivity.kt
@@ -6,7 +6,6 @@ package org.mozilla.focus.activity
 import android.app.Activity
 import android.os.Bundle
 import org.mozilla.focus.ext.components
-
 import org.mozilla.focus.telemetry.TelemetryWrapper
 
 class EraseShortcutActivity : Activity() {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.kt b/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.kt
index d102ef434e8d..5d5910426707 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/activity/InstallFirefoxActivity.kt
@@ -12,7 +12,6 @@ import android.content.pm.ActivityInfo
 import android.net.Uri
 import android.os.Bundle
 import android.webkit.WebView
-
 import org.mozilla.focus.telemetry.TelemetryWrapper
 import org.mozilla.focus.utils.AppConstants
 import org.mozilla.focus.utils.Browsers
@@ -69,8 +68,10 @@ class InstallFirefoxActivity : Activity() {
         }
 
         private fun createStoreIntent(): Intent {
-            return Intent(Intent.ACTION_VIEW,
-                    Uri.parse("market://details?id=" + Browsers.KnownBrowser.FIREFOX.packageName))
+            return Intent(
+                Intent.ACTION_VIEW,
+                Uri.parse("market://details?id=" + Browsers.KnownBrowser.FIREFOX.packageName)
+            )
         }
 
         fun open(context: Context) {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.kt b/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.kt
index 073b6a48cdc7..96ab046ce75d 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/activity/MainActivity.kt
@@ -71,9 +71,9 @@ open class MainActivity : LocaleAwareAppCompatActivity() {
 
         val launchCount = Settings.getInstance(this).getAppLaunchCount()
         PreferenceManager.getDefaultSharedPreferences(this)
-                .edit()
-                .putInt(getString(R.string.app_launch_count), launchCount + 1)
-                .apply()
+            .edit()
+            .putInt(getString(R.string.app_launch_count), launchCount + 1)
+            .apply()
 
         lifecycle.addObserver(navigator)
     }
@@ -113,7 +113,7 @@ open class MainActivity : LocaleAwareAppCompatActivity() {
     override fun onNewIntent(unsafeIntent: Intent) {
         if (Crash.isCrashIntent(unsafeIntent)) {
             val browserFragment = supportFragmentManager
-                    .findFragmentByTag(BrowserFragment.FRAGMENT_TAG) as BrowserFragment?
+                .findFragmentByTag(BrowserFragment.FRAGMENT_TAG) as BrowserFragment?
             val crash = Crash.fromIntent(unsafeIntent)
 
             browserFragment?.handleTabCrash(crash)
@@ -122,9 +122,11 @@ open class MainActivity : LocaleAwareAppCompatActivity() {
         val intent = SafeIntent(unsafeIntent)
 
         if (intent.dataString.equals(SupportUtils.OPEN_WITH_DEFAULT_BROWSER_URL)) {
-            components.appStore.dispatch(AppAction.OpenSettings(
-                page = Screen.Settings.Page.General
-            ))
+            components.appStore.dispatch(
+                AppAction.OpenSettings(
+                    page = Screen.Settings.Page.General
+                )
+            )
             super.onNewIntent(unsafeIntent)
             return
         }
@@ -173,18 +175,21 @@ open class MainActivity : LocaleAwareAppCompatActivity() {
         val fragmentManager = supportFragmentManager
 
         val sessionsSheetFragment = fragmentManager.findFragmentByTag(
-            TabSheetFragment.FRAGMENT_TAG) as TabSheetFragment?
+            TabSheetFragment.FRAGMENT_TAG
+        ) as TabSheetFragment?
         if (sessionsSheetFragment != null &&
-                sessionsSheetFragment.isVisible &&
-                sessionsSheetFragment.onBackPressed()) {
+            sessionsSheetFragment.isVisible &&
+            sessionsSheetFragment.onBackPressed()
+        ) {
             // SessionsSheetFragment handles back presses itself (custom animations).
             return
         }
 
         val urlInputFragment = fragmentManager.findFragmentByTag(UrlInputFragment.FRAGMENT_TAG) as UrlInputFragment?
         if (urlInputFragment != null &&
-                urlInputFragment.isVisible &&
-                urlInputFragment.onBackPressed()) {
+            urlInputFragment.isVisible &&
+            urlInputFragment.onBackPressed()
+        ) {
             // The URL input fragment has handled the back press. It does its own animations so
             // we do not try to remove it from outside.
             return
@@ -192,8 +197,9 @@ open class MainActivity : LocaleAwareAppCompatActivity() {
 
         val browserFragment = fragmentManager.findFragmentByTag(BrowserFragment.FRAGMENT_TAG) as BrowserFragment?
         if (browserFragment != null &&
-                browserFragment.isVisible &&
-                browserFragment.onBackPressed()) {
+            browserFragment.isVisible &&
+            browserFragment.onBackPressed()
+        ) {
             // The Browser fragment handles back presses on its own because it might just go back
             // in the browsing history.
             return
@@ -228,8 +234,10 @@ open class MainActivity : LocaleAwareAppCompatActivity() {
         // Disable biometrics if the user is no longer eligible due to un-enrolling fingerprints:
         if (!Biometrics.hasFingerprintHardware(this)) {
             PreferenceManager.getDefaultSharedPreferences(this)
-                    .edit().putBoolean(getString(R.string.pref_key_biometric),
-                            false).apply()
+                .edit().putBoolean(
+                    getString(R.string.pref_key_biometric),
+                    false
+                ).apply()
         }
     }
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteAddFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteAddFragment.kt
index 59fd80dd994b..8b2ad010cab0 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteAddFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteAddFragment.kt
@@ -52,7 +52,7 @@ class AutocompleteAddFragment : BaseSettingsLikeFragment(), CoroutineScope {
     }
 
     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View =
-            inflater.inflate(R.layout.fragment_autocomplete_add_domain, container, false)
+        inflater.inflate(R.layout.fragment_autocomplete_add_domain, container, false)
 
     override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
         super.onViewCreated(view, savedInstanceState)
@@ -73,8 +73,8 @@ class AutocompleteAddFragment : BaseSettingsLikeFragment(), CoroutineScope {
         if (item.itemId == R.id.save) {
 
             val domain = domainView.text.toString()
-                    .trim()
-                    .lowercase()
+                .trim()
+                .lowercase()
 
             launch(IO) {
                 val domains = CustomDomains.load(requireActivity())
@@ -108,8 +108,10 @@ class AutocompleteAddFragment : BaseSettingsLikeFragment(), CoroutineScope {
 
         ViewUtils.showBrandedSnackbar(view, R.string.preference_autocomplete_add_confirmation, 0)
 
-        requireComponents.appStore.dispatch(AppAction.NavigateUp(
-            requireComponents.store.state.selectedTabId
-        ))
+        requireComponents.appStore.dispatch(
+            AppAction.NavigateUp(
+                requireComponents.store.state.selectedTabId
+            )
+        )
     }
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteListFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteListFragment.kt
index 71e435517f64..c4e3d8ecfff8 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteListFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompleteListFragment.kt
@@ -53,58 +53,58 @@ open class AutocompleteListFragment : BaseSettingsLikeFragment(), CoroutineScope
      * ItemTouchHelper for reordering items in the domain list.
      */
     val itemTouchHelper: ItemTouchHelper = ItemTouchHelper(
-            object : SimpleCallback(ItemTouchHelper.UP or ItemTouchHelper.DOWN, 0) {
-                override fun onMove(
-                    recyclerView: RecyclerView,
-                    viewHolder: RecyclerView.ViewHolder,
-                    target: RecyclerView.ViewHolder
-                ): Boolean {
-                    val from = viewHolder.bindingAdapterPosition
-                    val to = target.bindingAdapterPosition
-
-                    (recyclerView.adapter as DomainListAdapter).move(from, to)
-
-                    return true
-                }
-
-                override fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int) {}
+        object : SimpleCallback(ItemTouchHelper.UP or ItemTouchHelper.DOWN, 0) {
+            override fun onMove(
+                recyclerView: RecyclerView,
+                viewHolder: RecyclerView.ViewHolder,
+                target: RecyclerView.ViewHolder
+            ): Boolean {
+                val from = viewHolder.bindingAdapterPosition
+                val to = target.bindingAdapterPosition
+
+                (recyclerView.adapter as DomainListAdapter).move(from, to)
+
+                return true
+            }
 
-                override fun getMovementFlags(recyclerView: RecyclerView, viewHolder: RecyclerView.ViewHolder): Int {
-                    if (viewHolder is AddActionViewHolder) {
-                        return ItemTouchHelper.Callback.makeMovementFlags(0, 0)
-                    }
+            override fun onSwiped(viewHolder: RecyclerView.ViewHolder, direction: Int) {}
 
-                    return super.getMovementFlags(recyclerView, viewHolder)
+            override fun getMovementFlags(recyclerView: RecyclerView, viewHolder: RecyclerView.ViewHolder): Int {
+                if (viewHolder is AddActionViewHolder) {
+                    return ItemTouchHelper.Callback.makeMovementFlags(0, 0)
                 }
 
-                override fun onSelectedChanged(viewHolder: RecyclerView.ViewHolder?, actionState: Int) {
-                    super.onSelectedChanged(viewHolder, actionState)
+                return super.getMovementFlags(recyclerView, viewHolder)
+            }
+
+            override fun onSelectedChanged(viewHolder: RecyclerView.ViewHolder?, actionState: Int) {
+                super.onSelectedChanged(viewHolder, actionState)
 
-                    if (viewHolder is DomainViewHolder) {
-                        viewHolder.onSelected()
-                    }
+                if (viewHolder is DomainViewHolder) {
+                    viewHolder.onSelected()
                 }
+            }
 
-                override fun clearView(recyclerView: RecyclerView, viewHolder: RecyclerView.ViewHolder) {
-                    super.clearView(recyclerView, viewHolder)
+            override fun clearView(recyclerView: RecyclerView, viewHolder: RecyclerView.ViewHolder) {
+                super.clearView(recyclerView, viewHolder)
 
-                    if (viewHolder is DomainViewHolder) {
-                        viewHolder.onCleared()
-                    }
+                if (viewHolder is DomainViewHolder) {
+                    viewHolder.onCleared()
                 }
+            }
 
-                override fun canDropOver(
-                    recyclerView: RecyclerView,
-                    current: RecyclerView.ViewHolder,
-                    target: RecyclerView.ViewHolder
-                ): Boolean {
-                    if (target is AddActionViewHolder) {
-                        return false
-                    }
-
-                    return super.canDropOver(recyclerView, current, target)
+            override fun canDropOver(
+                recyclerView: RecyclerView,
+                current: RecyclerView.ViewHolder,
+                target: RecyclerView.ViewHolder
+            ): Boolean {
+                if (target is AddActionViewHolder) {
+                    return false
                 }
-    })
+
+                return super.canDropOver(recyclerView, current, target)
+            }
+        })
 
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
@@ -118,7 +118,7 @@ open class AutocompleteListFragment : BaseSettingsLikeFragment(), CoroutineScope
     open fun isSelectionMode() = false
 
     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View =
-            inflater.inflate(R.layout.fragment_autocomplete_customdomains, container, false)
+        inflater.inflate(R.layout.fragment_autocomplete_customdomains, container, false)
 
     override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
         super.onViewCreated(view, savedInstanceState)
@@ -196,34 +196,37 @@ open class AutocompleteListFragment : BaseSettingsLikeFragment(), CoroutineScope
         }
 
         override fun getItemViewType(position: Int) =
-                when (position) {
-                    domains.size -> AddActionViewHolder.LAYOUT_ID
-                    else -> DomainViewHolder.LAYOUT_ID
-                }
+            when (position) {
+                domains.size -> AddActionViewHolder.LAYOUT_ID
+                else -> DomainViewHolder.LAYOUT_ID
+            }
 
         override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder =
-                when (viewType) {
-                    AddActionViewHolder.LAYOUT_ID ->
-                            AddActionViewHolder(
-                                    this@AutocompleteListFragment,
-                                    LayoutInflater.from(parent.context).inflate(viewType, parent, false))
-                    DomainViewHolder.LAYOUT_ID ->
-                            DomainViewHolder(
-                                    LayoutInflater.from(parent.context).inflate(viewType, parent, false),
-                                    { AutocompleteDomainFormatter.format(it) })
-                    else -> throw IllegalArgumentException("Unknown view type: $viewType")
-                }
+            when (viewType) {
+                AddActionViewHolder.LAYOUT_ID ->
+                    AddActionViewHolder(
+                        this@AutocompleteListFragment,
+                        LayoutInflater.from(parent.context).inflate(viewType, parent, false)
+                    )
+                DomainViewHolder.LAYOUT_ID ->
+                    DomainViewHolder(
+                        LayoutInflater.from(parent.context).inflate(viewType, parent, false),
+                        { AutocompleteDomainFormatter.format(it) }
+                    )
+                else -> throw IllegalArgumentException("Unknown view type: $viewType")
+            }
 
         override fun getItemCount(): Int = domains.size + if (isSelectionMode()) 0 else 1
 
         override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
             if (holder is DomainViewHolder) {
                 holder.bind(
-                        domains[position],
-                        isSelectionMode(),
-                        selectedDomains,
-                        itemTouchHelper,
-                        this@AutocompleteListFragment)
+                    domains[position],
+                    isSelectionMode(),
+                    selectedDomains,
+                    itemTouchHelper,
+                    this@AutocompleteListFragment
+                )
             }
         }
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompletePreference.kt b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompletePreference.kt
index d83afc3bf216..2bfc1bdce2f8 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompletePreference.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/autocomplete/AutocompletePreference.kt
@@ -5,10 +5,10 @@
 package org.mozilla.focus.autocomplete
 
 import android.content.Context
-import androidx.preference.Preference
-import androidx.preference.PreferenceViewHolder
 import android.util.AttributeSet
 import android.widget.TextView
+import androidx.preference.Preference
+import androidx.preference.PreferenceViewHolder
 import org.mozilla.focus.R
 import org.mozilla.focus.utils.Settings
 
@@ -26,9 +26,11 @@ class AutocompletePreference(context: Context?, attrs: AttributeSet?) : Preferen
         summaryView = holder!!.findViewById(android.R.id.summary) as TextView
         summaryView?.setText(
             if (settings.shouldAutocompleteFromShippedDomainList() ||
-                settings.shouldAutocompleteFromCustomDomainList())
+                settings.shouldAutocompleteFromCustomDomainList()
+            )
                 R.string.preference_state_on
             else
-                R.string.preference_state_off)
+                R.string.preference_state_off
+        )
     }
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationHandler.kt b/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationHandler.kt
index 841c6689af51..807536d5f988 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationHandler.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/biometrics/BiometricAuthenticationHandler.kt
@@ -38,9 +38,11 @@ class BiometricAuthenticationHandler(
         keyGenerator = KeyGenerator.getInstance(KeyProperties.KEY_ALGORITHM_AES, "AndroidKeyStore")
 
         createKey(DEFAULT_KEY_NAME, false)
-        val defaultCipher = Cipher.getInstance(KeyProperties.KEY_ALGORITHM_AES + "/" +
+        val defaultCipher = Cipher.getInstance(
+            KeyProperties.KEY_ALGORITHM_AES + "/" +
                 KeyProperties.BLOCK_MODE_CBC + "/" +
-                KeyProperties.ENCRYPTION_PADDING_PKCS7)
+                KeyProperties.ENCRYPTION_PADDING_PKCS7
+        )
 
         if (initCipher(defaultCipher, DEFAULT_KEY_NAME)) {
             cryptoObject = FingerprintManagerCompat.CryptoObject(defaultCipher)
@@ -61,8 +63,10 @@ class BiometricAuthenticationHandler(
     private fun createKey(keyName: String, invalidatedByBiometricEnrollment: Boolean?) {
         keyStore?.load(null)
 
-        val builder = KeyGenParameterSpec.Builder(keyName,
-            KeyProperties.PURPOSE_ENCRYPT).setBlockModes(KeyProperties.BLOCK_MODE_CBC)
+        val builder = KeyGenParameterSpec.Builder(
+            keyName,
+            KeyProperties.PURPOSE_ENCRYPT
+        ).setBlockModes(KeyProperties.BLOCK_MODE_CBC)
             .setUserAuthenticationRequired(true)
             .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_PKCS7)
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/biometrics/Biometrics.kt b/focus-android/app/src/main/java/org/mozilla/focus/biometrics/Biometrics.kt
index 43773e4f1cdd..2a6fee7d0021 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/biometrics/Biometrics.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/biometrics/Biometrics.kt
@@ -6,10 +6,10 @@
 
 package org.mozilla.focus.biometrics
 
-import android.content.Context
-import androidx.core.hardware.fingerprint.FingerprintManagerCompat
 import android.app.KeyguardManager
+import android.content.Context
 import android.os.Build
+import androidx.core.hardware.fingerprint.FingerprintManagerCompat
 import org.mozilla.focus.utils.Settings
 
 object Biometrics {
@@ -22,13 +22,13 @@ object Biometrics {
         val keyguardManager = context.getSystemService(Context.KEYGUARD_SERVICE) as KeyguardManager
 
         return keyguardManager.isKeyguardSecure &&
-                fingerprintManager.isHardwareDetected &&
-                fingerprintManager.hasEnrolledFingerprints()
+            fingerprintManager.isHardwareDetected &&
+            fingerprintManager.hasEnrolledFingerprints()
     }
 
     fun isBiometricsEnabled(context: Context): Boolean {
         return Build.VERSION.SDK_INT >= Build.VERSION_CODES.M &&
-                Settings.getInstance(context).shouldUseBiometrics() &&
-                hasFingerprintHardware(context)
+            Settings.getInstance(context).shouldUseBiometrics() &&
+            hasFingerprintHardware(context)
     }
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/browser/DisplayToolbar.kt b/focus-android/app/src/main/java/org/mozilla/focus/browser/DisplayToolbar.kt
index 864410bfce4f..dea7b9760160 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/browser/DisplayToolbar.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/browser/DisplayToolbar.kt
@@ -5,8 +5,8 @@
 package org.mozilla.focus.browser
 
 import android.content.Context
-import com.google.android.material.appbar.AppBarLayout
 import android.util.AttributeSet
+import com.google.android.material.appbar.AppBarLayout
 import kotlinx.android.synthetic.main.browser_display_toolbar.view.*
 
 /**
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/browser/binding/BlockingThemeBinding.kt b/focus-android/app/src/main/java/org/mozilla/focus/browser/binding/BlockingThemeBinding.kt
index e2488f7c5b93..bf46dd28c3bc 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/browser/binding/BlockingThemeBinding.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/browser/binding/BlockingThemeBinding.kt
@@ -65,20 +65,24 @@ class BlockingThemeBinding(
         isCustomTab: Boolean,
         enabled: Boolean
     ): TransitionDrawableGroup {
-        statusBar.setBackgroundResource(if (enabled) {
-            R.drawable.animated_background
-        } else {
-            R.drawable.animated_background_disabled
-        })
+        statusBar.setBackgroundResource(
+            if (enabled) {
+                R.drawable.animated_background
+            } else {
+                R.drawable.animated_background_disabled
+            }
+        )
 
         return if (!isCustomTab) {
             // Only update the toolbar background if this is not a custom tab. Custom tabs set their
             // own color and we do not want to override this here.
-            urlBar.setBackgroundResource(if (enabled) {
-                R.drawable.animated_background
-            } else {
-                R.drawable.animated_background_disabled
-            })
+            urlBar.setBackgroundResource(
+                if (enabled) {
+                    R.drawable.animated_background
+                } else {
+                    R.drawable.animated_background_disabled
+                }
+            )
 
             TransitionDrawableGroup(
                 urlBar.background as TransitionDrawable,
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/browser/integration/FullScreenIntegration.kt b/focus-android/app/src/main/java/org/mozilla/focus/browser/integration/FullScreenIntegration.kt
index d5e255459176..809fade41b56 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/browser/integration/FullScreenIntegration.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/browser/integration/FullScreenIntegration.kt
@@ -72,12 +72,14 @@ class FullScreenIntegration(
         val window = activity.window
         window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)
         @Suppress("DEPRECATION") // https://github.com/mozilla-mobile/focus-android/issues/5016
-        window.decorView.systemUiVisibility = (View.SYSTEM_UI_FLAG_LAYOUT_STABLE
+        window.decorView.systemUiVisibility = (
+            View.SYSTEM_UI_FLAG_LAYOUT_STABLE
                 or View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                 or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                 or View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
                 or View.SYSTEM_UI_FLAG_FULLSCREEN
-                or View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY)
+                or View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
+            )
     }
 
     /**
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/browser/integration/NavigationButtonsIntegration.kt b/focus-android/app/src/main/java/org/mozilla/focus/browser/integration/NavigationButtonsIntegration.kt
index af228ac1cc9d..5adc18b490d1 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/browser/integration/NavigationButtonsIntegration.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/browser/integration/NavigationButtonsIntegration.kt
@@ -116,11 +116,13 @@ private class NavigationButton(
         button.contentDescription = contentDescription
         button.isEnabled = enabled
 
-        button.setImageDrawable(if (enabled) {
-            image
-        } else {
-            disabledImage
-        })
+        button.setImageDrawable(
+            if (enabled) {
+                image
+            } else {
+                disabledImage
+            }
+        )
     }
 }
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionDomains.kt b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionDomains.kt
index ead8a265bacf..3f600cf566d8 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionDomains.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionDomains.kt
@@ -25,8 +25,10 @@ object ExceptionDomains {
      */
     fun load(context: Context): List<String> {
         if (exceptions == null) {
-            exceptions = (preferences(context)
-                .getString(KEY_DOMAINS, "") ?: "")
+            exceptions = (
+                preferences(context)
+                    .getString(KEY_DOMAINS, "") ?: ""
+                )
                 .split(SEPARATOR)
                 .filter { !it.isEmpty() }
         }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsListFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsListFragment.kt
index 82021c1ba28c..7ea3f1267017 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsListFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/ExceptionsListFragment.kt
@@ -109,7 +109,7 @@ open class ExceptionsListFragment : BaseSettingsLikeFragment(), CoroutineScope {
         super.onViewCreated(view, savedInstanceState)
 
         exceptionList.layoutManager =
-                LinearLayoutManager(activity, RecyclerView.VERTICAL, false)
+            LinearLayoutManager(activity, RecyclerView.VERTICAL, false)
         exceptionList.adapter = DomainListAdapter()
         exceptionList.setHasFixedSize(true)
 
@@ -124,9 +124,11 @@ open class ExceptionsListFragment : BaseSettingsLikeFragment(), CoroutineScope {
             val exceptions = (exceptionList.adapter as DomainListAdapter).selection()
             TelemetryWrapper.removeAllExceptionDomains(exceptions.count())
 
-            requireComponents.appStore.dispatch(AppAction.NavigateUp(
-                requireComponents.store.state.selectedTabId
-            ))
+            requireComponents.appStore.dispatch(
+                AppAction.NavigateUp(
+                    requireComponents.store.state.selectedTabId
+                )
+            )
         }
     }
 
@@ -201,7 +203,8 @@ open class ExceptionsListFragment : BaseSettingsLikeFragment(), CoroutineScope {
                 DomainViewHolder.LAYOUT_ID ->
                     DomainViewHolder(
                         LayoutInflater.from(parent.context).inflate(viewType, parent, false),
-                        { AutocompleteDomainFormatter.format(it) })
+                        { AutocompleteDomainFormatter.format(it) }
+                    )
                 else -> throw IllegalArgumentException("Unknown view type: $viewType")
             }
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/GeckoExceptionsMigrator.kt b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/GeckoExceptionsMigrator.kt
index b2a58d5bb246..940535ea9ba7 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/exceptions/GeckoExceptionsMigrator.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/exceptions/GeckoExceptionsMigrator.kt
@@ -47,16 +47,18 @@ class GeckoExceptionsMigrator(
      * @return list of custom domains
      */
     private fun fetchExceptions(context: Context): List<String> {
-        return (preferences(context)
-                .getString(KEY_DOMAINS, "") ?: "")
-                .split(SEPARATOR)
-                .filter { it.isNotEmpty() }
+        return (
+            preferences(context)
+                .getString(KEY_DOMAINS, "") ?: ""
+            )
+            .split(SEPARATOR)
+            .filter { it.isNotEmpty() }
     }
 
     private fun isOver(context: Context) = !preferences(context).contains(KEY_DOMAINS)
 
     private fun preferences(context: Context): SharedPreferences =
-            context.getSharedPreferences(PREFERENCE_NAME, Context.MODE_PRIVATE)
+        context.getSharedPreferences(PREFERENCE_NAME, Context.MODE_PRIVATE)
 
     private fun migrate(uri: String) {
         val privateMode = true
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/firstrun/FirstrunCardView.kt b/focus-android/app/src/main/java/org/mozilla/focus/firstrun/FirstrunCardView.kt
index 45f87a13c586..8814e29ca543 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/firstrun/FirstrunCardView.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/firstrun/FirstrunCardView.kt
@@ -5,10 +5,9 @@
 package org.mozilla.focus.firstrun
 
 import android.content.Context
-import androidx.cardview.widget.CardView
 import android.util.AttributeSet
 import android.view.View
-
+import androidx.cardview.widget.CardView
 import org.mozilla.focus.R
 
 class FirstrunCardView @JvmOverloads constructor(
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/firstrun/FirstrunPagerAdapter.kt b/focus-android/app/src/main/java/org/mozilla/focus/firstrun/FirstrunPagerAdapter.kt
index b7f86c3c16e2..37c37a1b8289 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/firstrun/FirstrunPagerAdapter.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/firstrun/FirstrunPagerAdapter.kt
@@ -6,15 +6,14 @@
 package org.mozilla.focus.firstrun
 
 import android.content.Context
-import androidx.viewpager.widget.PagerAdapter
-import androidx.viewpager.widget.ViewPager
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
 import android.widget.Button
 import android.widget.ImageView
 import android.widget.TextView
-
+import androidx.viewpager.widget.PagerAdapter
+import androidx.viewpager.widget.ViewPager
 import org.mozilla.focus.R
 
 class FirstrunPagerAdapter(
@@ -31,22 +30,27 @@ class FirstrunPagerAdapter(
     init {
         val appName = context.getString(R.string.app_name)
         this.pages = arrayOf(
-                FirstrunPage(
-                        context.getString(R.string.firstrun_defaultbrowser_title),
-                        context.getString(R.string.firstrun_defaultbrowser_text2),
-                        R.drawable.onboarding_img1),
-                FirstrunPage(
-                        context.getString(R.string.firstrun_search_title),
-                        context.getString(R.string.firstrun_search_text),
-                        R.drawable.onboarding_img4),
-                FirstrunPage(
-                        context.getString(R.string.firstrun_shortcut_title),
-                        context.getString(R.string.firstrun_shortcut_text, appName),
-                        R.drawable.onboarding_img3),
-                FirstrunPage(
-                        context.getString(R.string.firstrun_privacy_title),
-                        context.getString(R.string.firstrun_privacy_text, appName),
-                        R.drawable.onboarding_img2))
+            FirstrunPage(
+                context.getString(R.string.firstrun_defaultbrowser_title),
+                context.getString(R.string.firstrun_defaultbrowser_text2),
+                R.drawable.onboarding_img1
+            ),
+            FirstrunPage(
+                context.getString(R.string.firstrun_search_title),
+                context.getString(R.string.firstrun_search_text),
+                R.drawable.onboarding_img4
+            ),
+            FirstrunPage(
+                context.getString(R.string.firstrun_shortcut_title),
+                context.getString(R.string.firstrun_shortcut_text, appName),
+                R.drawable.onboarding_img3
+            ),
+            FirstrunPage(
+                context.getString(R.string.firstrun_privacy_title),
+                context.getString(R.string.firstrun_privacy_text, appName),
+                R.drawable.onboarding_img2
+            )
+        )
     }
 
     private fun getView(position: Int, pager: ViewPager): View {
@@ -78,7 +82,7 @@ class FirstrunPagerAdapter(
     }
 
     fun getPageAccessibilityDescription(position: Int): String =
-            pages[position].contentDescription
+        pages[position].contentDescription
 
     override fun isViewFromObject(view: View, any: Any) = view === any
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
index 32c813a1b850..4d8470a12fbe 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
@@ -57,10 +57,10 @@ import org.mozilla.focus.activity.MainActivity
 import org.mozilla.focus.browser.DisplayToolbar
 import org.mozilla.focus.browser.binding.BlockingThemeBinding
 import org.mozilla.focus.browser.binding.TabCountBinding
+import org.mozilla.focus.browser.integration.BrowserMenuController
 import org.mozilla.focus.browser.integration.BrowserToolbarIntegration
 import org.mozilla.focus.browser.integration.FindInPageIntegration
 import org.mozilla.focus.browser.integration.FullScreenIntegration
-import org.mozilla.focus.browser.integration.BrowserMenuController
 import org.mozilla.focus.downloads.DownloadService
 import org.mozilla.focus.engine.EngineSharedPreferencesListener
 import org.mozilla.focus.ext.ifCustomTab
@@ -123,8 +123,8 @@ class BrowserFragment :
      */
     val tab: SessionState
         get() = requireComponents.store.state.findTabOrCustomTab(tabId)
-                // Workaround for tab not existing temporarily.
-                ?: createTab("about:blank")
+            // Workaround for tab not existing temporarily.
+            ?: createTab("about:blank")
 
     @Suppress("LongMethod", "ComplexMethod")
     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
@@ -146,64 +146,80 @@ class BrowserFragment :
 
         val toolbarView = view.findViewById<DisplayToolbar>(R.id.appbar)
 
-        findInPageIntegration.set(FindInPageIntegration(
-            components.store,
-            view.findViewById(R.id.find_in_page),
-            engineView!!
-        ), this, view)
-
-        fullScreenIntegration.set(FullScreenIntegration(
-            requireActivity(),
-            components.store,
-            tab.id,
-            components.sessionUseCases,
-            toolbarView!!,
-            statusBar!!
-        ), this, view)
-
-        contextMenuFeature.set(ContextMenuFeature(
-            parentFragmentManager,
-            components.store,
-            ContextMenuCandidate.defaultCandidates(
+        findInPageIntegration.set(
+            FindInPageIntegration(
+                components.store,
+                view.findViewById(R.id.find_in_page),
+                engineView!!
+            ),
+            this, view
+        )
+
+        fullScreenIntegration.set(
+            FullScreenIntegration(
+                requireActivity(),
+                components.store,
+                tab.id,
+                components.sessionUseCases,
+                toolbarView!!,
+                statusBar!!
+            ),
+            this, view
+        )
+
+        contextMenuFeature.set(
+            ContextMenuFeature(
+                parentFragmentManager,
+                components.store,
+                ContextMenuCandidate.defaultCandidates(
                     requireContext(),
                     components.tabsUseCases,
                     components.contextMenuUseCases,
                     view
-            ) + ContextMenuCandidate.createOpenInExternalAppCandidate(
-                requireContext(),
-                components.appLinksUseCases
+                ) + ContextMenuCandidate.createOpenInExternalAppCandidate(
+                    requireContext(),
+                    components.appLinksUseCases
+                ),
+                engineView!!,
+                requireComponents.contextMenuUseCases
             ),
-            engineView!!,
-            requireComponents.contextMenuUseCases
-        ), this, view)
-
-        sessionFeature.set(SessionFeature(
-            components.store,
-            components.sessionUseCases.goBack,
-            engineView!!,
-            tab.id
-        ), this, view)
-
-        promptFeature.set(PromptFeature(
-            fragment = this,
-            store = components.store,
-            customTabId = tab.id,
-            fragmentManager = parentFragmentManager,
-            onNeedToRequestPermissions = { permissions ->
-                @Suppress("DEPRECATION") // https://github.com/mozilla-mobile/focus-android/issues/4959
-                requestPermissions(permissions, REQUEST_CODE_PROMPT_PERMISSIONS)
-            }
-        ), this, view)
+            this, view
+        )
 
-        downloadsFeature.set(DownloadsFeature(
-            requireContext().applicationContext,
-            components.store,
-            components.downloadsUseCases,
+        sessionFeature.set(
+            SessionFeature(
+                components.store,
+                components.sessionUseCases.goBack,
+                engineView!!,
+                tab.id
+            ),
+            this, view
+        )
+
+        promptFeature.set(
+            PromptFeature(
+                fragment = this,
+                store = components.store,
+                customTabId = tab.id,
+                fragmentManager = parentFragmentManager,
+                onNeedToRequestPermissions = { permissions ->
+                    @Suppress("DEPRECATION") // https://github.com/mozilla-mobile/focus-android/issues/4959
+                    requestPermissions(permissions, REQUEST_CODE_PROMPT_PERMISSIONS)
+                }
+            ),
+            this, view
+        )
+
+        downloadsFeature.set(
+            DownloadsFeature(
+                requireContext().applicationContext,
+                components.store,
+                components.downloadsUseCases,
                 fragmentManager = childFragmentManager,
                 downloadManager = FetchDownloadManager(
-                        requireContext().applicationContext,
-                        components.store,
-                        DownloadService::class
+                    requireContext().applicationContext,
+                    components.store,
+                    DownloadService::class
                 ),
                 onNeedToRequestPermissions = { permissions ->
                     @Suppress("DEPRECATION") // https://github.com/mozilla-mobile/focus-android/issues/4959
@@ -212,14 +228,19 @@ class BrowserFragment :
                 onDownloadStopped = { state, _, status ->
                     showDownloadSnackbar(state, status)
                 }
-        ), this, view)
+            ),
+            this, view
+        )
 
-        shareDownloadFeature.set(ShareDownloadFeature(
-            context = requireContext().applicationContext,
-            httpClient = components.client,
-            store = components.store,
-            tabId = tab.id
-        ), this, view)
+        shareDownloadFeature.set(
+            ShareDownloadFeature(
+                context = requireContext().applicationContext,
+                httpClient = components.client,
+                store = components.store,
+                tabId = tab.id
+            ),
+            this, view
+        )
 
         blockingThemeBinding.set(
             BlockingThemeBinding(
@@ -373,10 +394,10 @@ class BrowserFragment :
         }
 
         fragmentManager
-                .beginTransaction()
-                .addToBackStack(null)
-                .add(R.id.crash_container, crashReporterFragment, CrashReporterFragment.FRAGMENT_TAG)
-                .commit()
+            .beginTransaction()
+            .addToBackStack(null)
+            .add(R.id.crash_container, crashReporterFragment, CrashReporterFragment.FRAGMENT_TAG)
+            .commit()
 
         crash_container.visibility = View.VISIBLE
         tabs.hide()
@@ -386,12 +407,12 @@ class BrowserFragment :
     private fun hideCrashReporter() {
         val fragmentManager = requireActivity().supportFragmentManager
         val fragment = fragmentManager.findFragmentByTag(CrashReporterFragment.FRAGMENT_TAG)
-                ?: return
+            ?: return
 
         fragmentManager
-                .beginTransaction()
-                .remove(fragment)
-                .commit()
+            .beginTransaction()
+            .remove(fragment)
+            .commit()
 
         crash_container.visibility = View.GONE
         tabs.show()
@@ -607,8 +628,8 @@ class BrowserFragment :
 
                 val defaultBrowser = browsers.defaultBrowser
                     ?: throw IllegalStateException("<Open with \$Default> was shown when no default browser is set")
-                    // We only add this menu item when a third party default exists, in
-                    // BrowserMenuAdapter.initializeMenu()
+                // We only add this menu item when a third party default exists, in
+                // BrowserMenuAdapter.initializeMenu()
 
                 val intent = Intent(Intent.ACTION_VIEW, Uri.parse(tab.content.url))
                 intent.setPackage(defaultBrowser.packageName)
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/CrashReporterFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/CrashReporterFragment.kt
index 72e74f4ef43a..e2d1a3775533 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/CrashReporterFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/CrashReporterFragment.kt
@@ -5,10 +5,10 @@
 package org.mozilla.focus.fragment
 
 import android.os.Bundle
-import androidx.fragment.app.Fragment
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
+import androidx.fragment.app.Fragment
 import kotlinx.android.synthetic.main.fragment_crash_reporter.*
 import org.mozilla.focus.R
 import org.mozilla.focus.telemetry.TelemetryWrapper
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/input/InputToolbarIntegration.kt b/focus-android/app/src/main/java/org/mozilla/focus/input/InputToolbarIntegration.kt
index 1c92dc5f2537..2c0c9b7f5b9d 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/input/InputToolbarIntegration.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/input/InputToolbarIntegration.kt
@@ -62,9 +62,11 @@ class InputToolbarIntegration(
             }
 
             if (result != null) {
-                delegate.applyAutocompleteResult(mozilla.components.concept.toolbar.AutocompleteResult(
-                    result.input, result.text, result.url, result.source, result.totalItems
-                ))
+                delegate.applyAutocompleteResult(
+                    mozilla.components.concept.toolbar.AutocompleteResult(
+                        result.input, result.text, result.url, result.source, result.totalItems
+                    )
+                )
             } else {
                 delegate.noAutocompleteResult(text)
             }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/BlockingItemViewHolder.kt b/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/BlockingItemViewHolder.kt
index fd452ee2149b..1a6082996029 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/BlockingItemViewHolder.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/BlockingItemViewHolder.kt
@@ -66,19 +66,22 @@ internal class BlockingItemViewHolder(
 
         // Delay closing the menu and reloading the website a bit so that the user can actually see
         // the switch change its state.
-        ThreadUtils.postToMainThreadDelayed(Runnable {
-            menu.dismiss()
-
-            buttonView.context.components.apply {
-                if (isChecked) {
-                    trackingProtectionUseCases.removeException(fragment.tab.id)
-                } else {
-                    trackingProtectionUseCases.addException(fragment.tab.id)
+        ThreadUtils.postToMainThreadDelayed(
+            Runnable {
+                menu.dismiss()
+
+                buttonView.context.components.apply {
+                    if (isChecked) {
+                        trackingProtectionUseCases.removeException(fragment.tab.id)
+                    } else {
+                        trackingProtectionUseCases.addException(fragment.tab.id)
+                    }
+                    updateExceptionsLocalList(isChecked)
+                    sessionUseCases.reload(fragment.tab.id)
                 }
-                updateExceptionsLocalList(isChecked)
-                sessionUseCases.reload(fragment.tab.id)
-            }
-        }, THUMB_ANIMATION_DURATION)
+            },
+            THUMB_ANIMATION_DURATION
+        )
     }
 
     private fun updateExceptionsLocalList(isChecked: Boolean) {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/BrowserMenuAdapter.kt b/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/BrowserMenuAdapter.kt
index f06f0858bcba..f044997e397c 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/BrowserMenuAdapter.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/BrowserMenuAdapter.kt
@@ -7,16 +7,14 @@ package org.mozilla.focus.menu.browser
 
 import android.app.PendingIntent
 import android.content.Context
-import androidx.recyclerview.widget.RecyclerView
 import android.view.LayoutInflater
 import android.view.ViewGroup
+import androidx.recyclerview.widget.RecyclerView
 import mozilla.components.browser.state.state.CustomTabConfig
-
 import org.mozilla.focus.R
 import org.mozilla.focus.fragment.BrowserFragment
 import org.mozilla.focus.utils.Browsers
 import org.mozilla.focus.utils.HardwareUtils
-
 import java.lang.ref.WeakReference
 
 class BrowserMenuAdapter(
@@ -99,9 +97,11 @@ class BrowserMenuAdapter(
         if (browsers.hasMultipleThirdPartyBrowsers(context)) {
             items.add(
                 MenuItem.Default(
-                    R.id.open_select_browser, resources.getString(
+                    R.id.open_select_browser,
+                    resources.getString(
                         R.string.menu_open_with_a_browser2
-                    ), R.drawable.ic_open_in
+                    ),
+                    R.drawable.ic_open_in
                 )
             )
         }
@@ -118,12 +118,14 @@ class BrowserMenuAdapter(
         if (browsers.hasThirdPartyDefaultBrowser(context)) {
             items.add(
                 MenuItem.Default(
-                    R.id.open_default, resources.getString(
+                    R.id.open_default,
+                    resources.getString(
                         R.string.menu_open_with_default_browser2,
                         browsers.defaultBrowser!!.loadLabel(
                             context.packageManager
                         )
-                    ), 0
+                    ),
+                    0
                 )
             )
         }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/RequestDesktopCheckItemViewHolder.kt b/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/RequestDesktopCheckItemViewHolder.kt
index 6f45b1d4bc14..2ee759c4e203 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/RequestDesktopCheckItemViewHolder.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/menu/browser/RequestDesktopCheckItemViewHolder.kt
@@ -29,12 +29,15 @@ internal class RequestDesktopCheckItemViewHolder/* package */(
 
         // Delay closing the menu and reloading the website a bit so that the user can actually see
         // the switch change its state.
-        ThreadUtils.postToMainThreadDelayed(Runnable {
-            menu.dismiss()
-
-            val url = UrlUtils.stripSchemeAndSubDomain(fragment.tab.content.url)
-            fragment.requireComponents.sessionUseCases.loadUrl(url)
-        }, ANIMATION_DURATION)
+        ThreadUtils.postToMainThreadDelayed(
+            Runnable {
+                menu.dismiss()
+
+                val url = UrlUtils.stripSchemeAndSubDomain(fragment.tab.content.url)
+                fragment.requireComponents.sessionUseCases.loadUrl(url)
+            },
+            ANIMATION_DURATION
+        )
     }
 
     companion object {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/menu/home/HomeMenu.kt b/focus-android/app/src/main/java/org/mozilla/focus/menu/home/HomeMenu.kt
index 270390c6b417..f9ee6c5cd33d 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/menu/home/HomeMenu.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/menu/home/HomeMenu.kt
@@ -7,12 +7,12 @@ package org.mozilla.focus.menu.home
 import android.content.Context
 import android.graphics.Color
 import android.graphics.drawable.ColorDrawable
-import androidx.recyclerview.widget.LinearLayoutManager
-import androidx.recyclerview.widget.RecyclerView
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
 import android.widget.PopupWindow
+import androidx.recyclerview.widget.LinearLayoutManager
+import androidx.recyclerview.widget.RecyclerView
 import kotlinx.android.synthetic.main.menu.view.*
 import org.mozilla.focus.R
 import org.mozilla.focus.utils.ViewUtils
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/navigation/StoreLink.kt b/focus-android/app/src/main/java/org/mozilla/focus/navigation/StoreLink.kt
index f8a85691ce47..efe6b42dc0af 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/navigation/StoreLink.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/navigation/StoreLink.kt
@@ -44,7 +44,8 @@ class StoreLink(
         flow.map { state -> state.privateTabs.isEmpty() }
             .ifChanged()
             .filter { isEmpty -> isEmpty }
-            .collect { appStore.dispatch(AppAction.NoTabs)
-        }
+            .collect {
+                appStore.dispatch(AppAction.NoTabs)
+            }
     }
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/popup/PopupUtils.kt b/focus-android/app/src/main/java/org/mozilla/focus/popup/PopupUtils.kt
index cbbacad801f1..58276c6c25a5 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/popup/PopupUtils.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/popup/PopupUtils.kt
@@ -46,21 +46,27 @@ object PopupUtils {
             if (isSecure)
                 R.string.security_popup_secure_connection
             else
-                R.string.security_popup_insecure_connection)
+                R.string.security_popup_insecure_connection
+        )
 
         if (isSecure) {
-            setSecurityInfoSecure(context, identityState, verifierInfo, verifier,
-                securityInfoIcon)
+            setSecurityInfoSecure(
+                context, identityState, verifierInfo, verifier,
+                securityInfoIcon
+            )
         } else {
             verifier.visibility = View.GONE
             setSecurityInfoInsecure(context, identityState, url, securityInfoIcon)
         }
 
         identityState.compoundDrawablePadding = res.getDimension(
-            R.dimen.doorhanger_drawable_padding).toInt()
+            R.dimen.doorhanger_drawable_padding
+        ).toInt()
 
-        return PopupWindow(popUpView, res.getDimension(R.dimen.doorhanger_width).toInt(),
-            ViewGroup.LayoutParams.WRAP_CONTENT, true)
+        return PopupWindow(
+            popUpView, res.getDimension(R.dimen.doorhanger_width).toInt(),
+            ViewGroup.LayoutParams.WRAP_CONTENT, true
+        )
     }
 
     private fun setOrigin(hostInfo: TextView, origin: String?, url: String) {
@@ -86,11 +92,14 @@ object PopupUtils {
         val checkIcon = DrawableUtils.loadAndTintDrawable(context, R.drawable.ic_check, photonGreen)
         identityState.setCompoundDrawables(
             getScaledDrawable(context, R.dimen.doorhanger_small_icon, checkIcon), null,
-            null, null)
+            null, null
+        )
         identityState.setTextColor(photonGreen)
         if (!TextUtils.isEmpty(verifierInfo)) {
-            verifier.text = context.getString(R.string.security_popup_security_verified,
-                verifierInfo)
+            verifier.text = context.getString(
+                R.string.security_popup_security_verified,
+                verifierInfo
+            )
             verifier.visibility = View.VISIBLE
         } else {
             verifier.visibility = View.GONE
@@ -117,13 +126,18 @@ object PopupUtils {
         } else {
             securityInfoIcon.setImageResource(R.drawable.ic_warning)
             securityInfoIcon.setColorFilter(photonYellow)
-            securityIcon = DrawableUtils.loadAndTintDrawable(context, R.drawable.ic_warning,
-                    photonYellow)
+            securityIcon = DrawableUtils.loadAndTintDrawable(
+                context, R.drawable.ic_warning,
+                photonYellow
+            )
             identityState.setCompoundDrawables(
-                getScaledDrawable(context, R.dimen.doorhanger_small_icon,
-                    securityIcon),
+                getScaledDrawable(
+                    context, R.dimen.doorhanger_small_icon,
+                    securityIcon
+                ),
                 null,
-                null, null)
+                null, null
+            )
         }
     }
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/search/ManualAddSearchEnginePreference.kt b/focus-android/app/src/main/java/org/mozilla/focus/search/ManualAddSearchEnginePreference.kt
index e185453275fe..97ef9991905d 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/search/ManualAddSearchEnginePreference.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/search/ManualAddSearchEnginePreference.kt
@@ -7,9 +7,6 @@ package org.mozilla.focus.search
 import android.content.Context
 import android.os.Bundle
 import android.os.Parcelable
-import com.google.android.material.textfield.TextInputLayout
-import androidx.preference.Preference
-import androidx.preference.PreferenceViewHolder
 import android.text.Editable
 import android.text.TextUtils
 import android.text.TextWatcher
@@ -17,6 +14,9 @@ import android.util.AttributeSet
 import android.view.View
 import android.widget.EditText
 import android.widget.ProgressBar
+import androidx.preference.Preference
+import androidx.preference.PreferenceViewHolder
+import com.google.android.material.textfield.TextInputLayout
 import org.mozilla.focus.R
 import org.mozilla.focus.utils.UrlUtils
 import org.mozilla.focus.utils.ViewUtils
@@ -37,9 +37,9 @@ class ManualAddSearchEnginePreference(context: Context, attrs: AttributeSet) :
         super.onBindViewHolder(holder)
 
         engineNameErrorLayout =
-                holder!!.findViewById(R.id.edit_engine_name_layout) as TextInputLayout
+            holder!!.findViewById(R.id.edit_engine_name_layout) as TextInputLayout
         searchQueryErrorLayout =
-                holder.findViewById(R.id.edit_search_string_layout) as TextInputLayout
+            holder.findViewById(R.id.edit_search_string_layout) as TextInputLayout
 
         engineNameEditText = holder.findViewById(R.id.edit_engine_name) as EditText
         engineNameEditText?.addTextChangedListener(
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/search/MultiselectSearchEngineListPreference.kt b/focus-android/app/src/main/java/org/mozilla/focus/search/MultiselectSearchEngineListPreference.kt
index 2508a9d0b304..5e042aebac62 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/search/MultiselectSearchEngineListPreference.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/search/MultiselectSearchEngineListPreference.kt
@@ -5,15 +5,15 @@
 package org.mozilla.focus.search
 
 import android.content.Context
-import androidx.preference.PreferenceViewHolder
 import android.util.AttributeSet
 import android.widget.CompoundButton
+import androidx.preference.PreferenceViewHolder
 import org.mozilla.focus.R
 import org.mozilla.focus.utils.asActivity
 import java.util.HashSet
 
 class MultiselectSearchEngineListPreference(context: Context, attrs: AttributeSet) :
-        SearchEngineListPreference(context, attrs) {
+    SearchEngineListPreference(context, attrs) {
 
     override val itemResId: Int
         get() = R.layout.search_engine_checkbox_button
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/search/RadioSearchEngineListPreference.kt b/focus-android/app/src/main/java/org/mozilla/focus/search/RadioSearchEngineListPreference.kt
index 275992f95149..a2a4a07c05ed 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/search/RadioSearchEngineListPreference.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/search/RadioSearchEngineListPreference.kt
@@ -41,7 +41,8 @@ class RadioSearchEngineListPreference : SearchEngineListPreference, RadioGroup.O
         /* onCheckedChanged is called intermittently before the search engine table is full, so we
            must check these conditions to prevent crashes and inconsistent states. */
         if (group.childCount != searchEngines.count() || group.getChildAt(checkedId) == null ||
-                !group.getChildAt(checkedId).isPressed) {
+            !group.getChildAt(checkedId).isPressed
+        ) {
             return
         }
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/search/SearchEnginePreference.kt b/focus-android/app/src/main/java/org/mozilla/focus/search/SearchEnginePreference.kt
index 382017cdaf12..4eee186462fe 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/search/SearchEnginePreference.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/search/SearchEnginePreference.kt
@@ -7,8 +7,8 @@ package org.mozilla.focus.search
 
 import android.content.Context
 import android.content.SharedPreferences
-import androidx.preference.Preference
 import android.util.AttributeSet
+import androidx.preference.Preference
 import mozilla.components.browser.state.state.selectedOrDefaultSearchEngine
 import org.mozilla.focus.R
 import org.mozilla.focus.ext.components
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/SearchSuggestionsFetcher.kt b/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/SearchSuggestionsFetcher.kt
index 3c43ff52416a..d540388554bc 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/SearchSuggestionsFetcher.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/SearchSuggestionsFetcher.kt
@@ -17,10 +17,10 @@ import mozilla.components.browser.state.search.SearchEngine
 import mozilla.components.concept.fetch.Client
 import mozilla.components.feature.search.suggestions.SearchSuggestionClient
 import mozilla.components.support.ktx.kotlin.sanitizeURL
-import mozilla.components.concept.fetch.Request as FetchRequest
 import org.mozilla.focus.utils.debounce
 import java.util.concurrent.TimeUnit
 import kotlin.coroutines.CoroutineContext
+import mozilla.components.concept.fetch.Request as FetchRequest
 
 class SearchSuggestionsFetcher(
     searchEngine: SearchEngine?,
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/SearchSuggestionsPreferences.kt b/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/SearchSuggestionsPreferences.kt
index 139c18e2af22..f04fc6a85d3d 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/SearchSuggestionsPreferences.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/SearchSuggestionsPreferences.kt
@@ -20,26 +20,26 @@ class SearchSuggestionsPreferences(private val context: Context) {
 
     fun enableSearchSuggestions() {
         preferences.edit()
-                .putBoolean(TOGGLED_SUGGESTIONS_PREF, true)
-                .putBoolean(context.resources.getString(R.string.pref_key_show_search_suggestions), true)
-                .apply()
+            .putBoolean(TOGGLED_SUGGESTIONS_PREF, true)
+            .putBoolean(context.resources.getString(R.string.pref_key_show_search_suggestions), true)
+            .apply()
 
         TelemetryWrapper.respondToSearchSuggestionPrompt(true)
     }
 
     fun disableSearchSuggestions() {
         preferences.edit()
-                .putBoolean(TOGGLED_SUGGESTIONS_PREF, true)
-                .putBoolean(context.resources.getString(R.string.pref_key_show_search_suggestions), false)
-                .apply()
+            .putBoolean(TOGGLED_SUGGESTIONS_PREF, true)
+            .putBoolean(context.resources.getString(R.string.pref_key_show_search_suggestions), false)
+            .apply()
 
         TelemetryWrapper.respondToSearchSuggestionPrompt(false)
     }
 
     fun dismissNoSuggestionsMessage() {
         preferences.edit()
-                .putBoolean(DISMISSED_NO_SUGGESTIONS_PREF, true)
-                .apply()
+            .putBoolean(DISMISSED_NO_SUGGESTIONS_PREF, true)
+            .apply()
     }
 
     companion object {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/ui/SearchSuggestionsPreference.kt b/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/ui/SearchSuggestionsPreference.kt
index 6ba9a36bddf0..568581b13cf7 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/ui/SearchSuggestionsPreference.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/searchsuggestions/ui/SearchSuggestionsPreference.kt
@@ -18,9 +18,11 @@ class SearchSuggestionsPreference(
     attrs: AttributeSet?
 ) : LearnMoreSwitchPreference(context, attrs) {
     override fun getLearnMoreUrl(): String =
-            SupportUtils.getSumoURLForTopic(context, SupportUtils.SumoTopic.SEARCH_SUGGESTIONS)
+        SupportUtils.getSumoURLForTopic(context, SupportUtils.SumoTopic.SEARCH_SUGGESTIONS)
 
     override fun getDescription(): String? =
-            context.getString(R.string.preference_show_search_suggestions_summary,
-                    context.getString(R.string.app_name))
+        context.getString(
+            R.string.preference_show_search_suggestions_summary,
+            context.getString(R.string.app_name)
+        )
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/session/IntentProcessor.kt b/focus-android/app/src/main/java/org/mozilla/focus/session/IntentProcessor.kt
index e0d2f99db125..aa8f1eda1653 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/session/IntentProcessor.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/session/IntentProcessor.kt
@@ -117,7 +117,8 @@ class IntentProcessor(
                         createSearchSession(
                             SessionState.Source.External.ActionSend(null),
                             SearchUtils.createSearchUrl(context, dataString ?: ""),
-                            dataString ?: "")
+                            dataString ?: ""
+                        )
                     }
                 } else {
                     createSession(SessionState.Source.External.ActionSend(null), dataString ?: "")
@@ -129,38 +130,46 @@ class IntentProcessor(
     }
 
     private fun createSession(source: SessionState.Source, url: String): Result {
-        return Result.Tab(tabsUseCases.addTab(
-            url,
-            source = source,
-            selectTab = true,
-            private = true
-        ))
+        return Result.Tab(
+            tabsUseCases.addTab(
+                url,
+                source = source,
+                selectTab = true,
+                private = true
+            )
+        )
     }
 
     private fun createSearchSession(source: SessionState.Source, url: String, searchTerms: String): Result {
-        return Result.Tab(tabsUseCases.addTab(
-            url,
-            source = source,
-            searchTerms = searchTerms,
-            private = true
-        ))
+        return Result.Tab(
+            tabsUseCases.addTab(
+                url,
+                source = source,
+                searchTerms = searchTerms,
+                private = true
+            )
+        )
     }
 
     private fun createSession(source: SessionState.Source, intent: SafeIntent, url: String): Result {
         return if (isCustomTabIntent(intent.unsafe)) {
-            Result.CustomTab(customTabsUseCases.add(
-                url,
-                createCustomTabConfigFromIntent(intent.unsafe, context.resources),
-                private = true,
-                source = source
-            ))
+            Result.CustomTab(
+                customTabsUseCases.add(
+                    url,
+                    createCustomTabConfigFromIntent(intent.unsafe, context.resources),
+                    private = true,
+                    source = source
+                )
+            )
         } else {
-            Result.Tab(tabsUseCases.addTab(
-                url,
-                source = source,
-                selectTab = true,
-                private = true
-            ))
+            Result.Tab(
+                tabsUseCases.addTab(
+                    url,
+                    source = source,
+                    selectTab = true,
+                    private = true
+                )
+            )
         }
     }
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/session/SessionNotificationService.kt b/focus-android/app/src/main/java/org/mozilla/focus/session/SessionNotificationService.kt
index 05086099e486..07cc432c53e3 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/session/SessionNotificationService.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/session/SessionNotificationService.kt
@@ -16,7 +16,6 @@ import android.os.IBinder
 import androidx.core.app.NotificationCompat
 import androidx.core.content.ContextCompat
 import mozilla.components.support.utils.ThreadUtils
-
 import org.mozilla.focus.R
 import org.mozilla.focus.activity.MainActivity
 import org.mozilla.focus.ext.components
@@ -170,9 +169,11 @@ class SessionNotificationService : Service() {
             // before it times out. so this is a speculative fix to decrease the time between these two
             // calls by running this after potentially expensive calls in FocusApplication.onCreate and
             // BrowserFragment.inflateView by posting it to the end of the main thread.
-            ThreadUtils.postToMainThread(Runnable {
-                context.startService(intent)
-            })
+            ThreadUtils.postToMainThread(
+                Runnable {
+                    context.startService(intent)
+                }
+            )
         }
 
         internal fun stop(context: Context) {
@@ -180,9 +181,11 @@ class SessionNotificationService : Service() {
 
             // We want to make sure we always call stop after start. So we're
             // putting these actions on the same sequential run queue.
-            ThreadUtils.postToMainThread(Runnable {
-                context.stopService(intent)
-            })
+            ThreadUtils.postToMainThread(
+                Runnable {
+                    context.stopService(intent)
+                }
+            )
         }
     }
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/session/ui/EraseViewHolder.kt b/focus-android/app/src/main/java/org/mozilla/focus/session/ui/EraseViewHolder.kt
index e55bf7feac92..cdd59d1c4bf9 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/session/ui/EraseViewHolder.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/session/ui/EraseViewHolder.kt
@@ -6,10 +6,10 @@ package org.mozilla.focus.session.ui
 
 import android.animation.Animator
 import android.animation.AnimatorListenerAdapter
-import androidx.appcompat.content.res.AppCompatResources
-import androidx.recyclerview.widget.RecyclerView
 import android.view.View
 import android.widget.TextView
+import androidx.appcompat.content.res.AppCompatResources
+import androidx.recyclerview.widget.RecyclerView
 import org.mozilla.focus.R
 import org.mozilla.focus.ext.requireComponents
 import org.mozilla.focus.telemetry.TelemetryWrapper
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/session/ui/TabsAdapter.kt b/focus-android/app/src/main/java/org/mozilla/focus/session/ui/TabsAdapter.kt
index 1cfc87c64107..880c4783f77a 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/session/ui/TabsAdapter.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/session/ui/TabsAdapter.kt
@@ -4,10 +4,10 @@
 
 package org.mozilla.focus.session.ui
 
-import androidx.recyclerview.widget.RecyclerView
 import android.view.LayoutInflater
 import android.view.ViewGroup
 import android.widget.TextView
+import androidx.recyclerview.widget.RecyclerView
 import kotlinx.coroutines.flow.Flow
 import kotlinx.coroutines.flow.collect
 import mozilla.components.browser.state.selector.privateTabs
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/AdvancedSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/AdvancedSettingsFragment.kt
index e408d2d679f5..d0634d2fb902 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/AdvancedSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/AdvancedSettingsFragment.kt
@@ -9,8 +9,9 @@ import android.os.Bundle
 import org.mozilla.focus.R
 import org.mozilla.focus.telemetry.TelemetryWrapper
 
-class AdvancedSettingsFragment : BaseSettingsFragment(),
-        SharedPreferences.OnSharedPreferenceChangeListener {
+class AdvancedSettingsFragment :
+    BaseSettingsFragment(),
+    SharedPreferences.OnSharedPreferenceChangeListener {
 
     override fun onCreatePreferences(p0: Bundle?, p1: String?) {
         addPreferencesFromResource(R.xml.advanced_settings)
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/GeneralSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/GeneralSettingsFragment.kt
index 1e16a8b89b60..c6f074a8c6a2 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/GeneralSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/GeneralSettingsFragment.kt
@@ -24,7 +24,8 @@ import org.mozilla.focus.widget.DefaultBrowserPreference
 import org.mozilla.focus.widget.LocaleListPreference
 import java.util.Locale
 
-class GeneralSettingsFragment : BaseSettingsFragment(),
+class GeneralSettingsFragment :
+    BaseSettingsFragment(),
     SharedPreferences.OnSharedPreferenceChangeListener {
 
     private var localeUpdated: Boolean = false
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/MozillaSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/MozillaSettingsFragment.kt
index b277b4911d10..e5ce21721cfe 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/MozillaSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/MozillaSettingsFragment.kt
@@ -17,7 +17,8 @@ import org.mozilla.focus.telemetry.TelemetryWrapper
 import org.mozilla.focus.utils.AppConstants
 import org.mozilla.focus.utils.SupportUtils
 
-class MozillaSettingsFragment : BaseSettingsFragment(),
+class MozillaSettingsFragment :
+    BaseSettingsFragment(),
     SharedPreferences.OnSharedPreferenceChangeListener {
     override fun onCreatePreferences(p0: Bundle?, p1: String?) {
         addPreferencesFromResource(R.xml.mozilla_settings)
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/RemoveSearchEnginesSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/RemoveSearchEnginesSettingsFragment.kt
index f672549e2a10..05310df18445 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/RemoveSearchEnginesSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/RemoveSearchEnginesSettingsFragment.kt
@@ -42,8 +42,8 @@ class RemoveSearchEnginesSettingsFragment : BaseSettingsFragment() {
         super.onPrepareOptionsMenu(menu)
         view?.post {
             val pref = preferenceScreen
-                    .findPreference(resources.getString(R.string.pref_key_multiselect_search_engine_list))
-                    as? MultiselectSearchEngineListPreference
+                .findPreference(resources.getString(R.string.pref_key_multiselect_search_engine_list))
+                as? MultiselectSearchEngineListPreference
 
             menu.findItem(R.id.menu_delete_items)?.let {
                 ViewUtils.setMenuItemEnabled(it, pref!!.atLeastOneEngineChecked())
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/SearchSettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/SearchSettingsFragment.kt
index c50c361fc48e..e2eeae573dc7 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/SearchSettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/SearchSettingsFragment.kt
@@ -13,8 +13,9 @@ import org.mozilla.focus.state.AppAction
 import org.mozilla.focus.state.Screen
 import org.mozilla.focus.telemetry.TelemetryWrapper
 
-class SearchSettingsFragment : BaseSettingsFragment(),
-        SharedPreferences.OnSharedPreferenceChangeListener {
+class SearchSettingsFragment :
+    BaseSettingsFragment(),
+    SharedPreferences.OnSharedPreferenceChangeListener {
     override fun onCreatePreferences(p0: Bundle?, p1: String?) {
         addPreferencesFromResource(R.xml.search_settings)
     }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/privacy/PrivacySecuritySettingsFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/privacy/PrivacySecuritySettingsFragment.kt
index b8f04b2c05cc..b16bc2f4fe16 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/privacy/PrivacySecuritySettingsFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/privacy/PrivacySecuritySettingsFragment.kt
@@ -18,7 +18,8 @@ import org.mozilla.focus.state.Screen
 import org.mozilla.focus.telemetry.TelemetryWrapper
 import org.mozilla.focus.widget.CookiesPreference
 
-class PrivacySecuritySettingsFragment : BaseSettingsFragment(),
+class PrivacySecuritySettingsFragment :
+    BaseSettingsFragment(),
     SharedPreferences.OnSharedPreferenceChangeListener {
     override fun onCreatePreferences(p0: Bundle?, p1: String?) {
         addPreferencesFromResource(R.xml.privacy_security_settings)
@@ -26,7 +27,7 @@ class PrivacySecuritySettingsFragment : BaseSettingsFragment(),
         val biometricPreference: SwitchPreferenceCompat? = findPreference(getString(R.string.pref_key_biometric))
         val appName = getString(R.string.app_name)
         biometricPreference?.summary =
-                getString(R.string.preference_security_biometric_summary, appName)
+            getString(R.string.preference_security_biometric_summary, appName)
 
         // Remove the biometric toggle if the software or hardware do not support it
         if (Build.VERSION.SDK_INT < Build.VERSION_CODES.M || !Biometrics.hasFingerprintHardware(
@@ -66,15 +67,15 @@ class PrivacySecuritySettingsFragment : BaseSettingsFragment(),
 
     private fun updateBiometricsToggleAvailability() {
         val switch = preferenceScreen.findPreference(resources.getString(R.string.pref_key_biometric))
-                as? SwitchPreferenceCompat
+            as? SwitchPreferenceCompat
 
         if (!Biometrics.hasFingerprintHardware(requireContext())) {
             switch?.isChecked = false
             switch?.isEnabled = false
             preferenceManager.sharedPreferences
-                    .edit()
-                    .putBoolean(resources.getString(R.string.pref_key_biometric), false)
-                    .apply()
+                .edit()
+                .putBoolean(resources.getString(R.string.pref_key_biometric), false)
+                .apply()
         } else {
             switch?.isEnabled = true
         }
@@ -110,7 +111,7 @@ class PrivacySecuritySettingsFragment : BaseSettingsFragment(),
         val switch =
             preferenceScreen.findPreference(resources.getString(R.string.pref_key_secure)) as? SwitchPreferenceCompat
         if (preferenceManager.sharedPreferences
-                .getBoolean(
+            .getBoolean(
                     resources.getString(R.string.pref_key_biometric),
                     false
                 )
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/settings/privacy/TrackingProtectionPanel.kt b/focus-android/app/src/main/java/org/mozilla/focus/settings/privacy/TrackingProtectionPanel.kt
index ffa2ed285cf9..4463334e0b15 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/settings/privacy/TrackingProtectionPanel.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/settings/privacy/TrackingProtectionPanel.kt
@@ -5,18 +5,18 @@ package org.mozilla.focus.settings.privacy
 
 import android.content.Context
 import android.view.View
+import android.widget.FrameLayout
+import androidx.appcompat.content.res.AppCompatResources
 import androidx.core.view.isVisible
 import com.google.android.material.bottomsheet.BottomSheetBehavior
 import com.google.android.material.bottomsheet.BottomSheetDialog
-import org.mozilla.focus.R
-import org.mozilla.focus.databinding.DialogTrackingProtectionSheetBinding
-import org.mozilla.focus.ext.installedDate
-import android.widget.FrameLayout
-import androidx.appcompat.content.res.AppCompatResources
 import mozilla.components.browser.icons.IconRequest
 import mozilla.components.support.ktx.android.view.putCompoundDrawablesRelativeWithIntrinsicBounds
+import org.mozilla.focus.R
+import org.mozilla.focus.databinding.DialogTrackingProtectionSheetBinding
 import org.mozilla.focus.ext.beautifyUrl
 import org.mozilla.focus.ext.components
+import org.mozilla.focus.ext.installedDate
 
 @SuppressWarnings("LongParameterList")
 class TrackingProtectionPanel(
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/shortcut/IconGenerator.kt b/focus-android/app/src/main/java/org/mozilla/focus/shortcut/IconGenerator.kt
index e7548373c804..bbd197999ba4 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/shortcut/IconGenerator.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/shortcut/IconGenerator.kt
@@ -13,10 +13,9 @@ import android.graphics.Paint
 import android.graphics.Rect
 import android.net.Uri
 import android.os.Build
-import androidx.vectordrawable.graphics.drawable.VectorDrawableCompat
-import androidx.core.content.ContextCompat
 import android.util.TypedValue
-
+import androidx.core.content.ContextCompat
+import androidx.vectordrawable.graphics.drawable.VectorDrawableCompat
 import org.mozilla.focus.R
 import org.mozilla.focus.utils.UrlUtils
 
@@ -41,10 +40,10 @@ class IconGenerator {
          * on top of a generic launcher icon shape that we provide.
          */
         private fun generateCharacterIcon(context: Context, character: Char) =
-                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O)
-                    generateAdaptiveLauncherIcon(context, character)
-                else
-                    generateLauncherIconPreOreo(context, character)
+            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O)
+                generateAdaptiveLauncherIcon(context, character)
+            else
+                generateLauncherIconPreOreo(context, character)
 
         /*
          * This method needs to be separate from generateAdaptiveLauncherIcon so that we can generate
@@ -69,10 +68,12 @@ class IconGenerator {
         private fun drawVectorOnBitmap(context: Context, vectorId: Int, bitmap: Bitmap, frame: Double): Bitmap {
             val canvas = Canvas(bitmap)
             // Select the area to draw with a frame
-            val rect = Rect((frame * canvas.width).toInt(),
-                    (frame * canvas.height).toInt(),
-                    ((1 - frame) * canvas.width).toInt(),
-                    ((1 - frame) * canvas.height).toInt())
+            val rect = Rect(
+                (frame * canvas.width).toInt(),
+                (frame * canvas.height).toInt(),
+                ((1 - frame) * canvas.width).toInt(),
+                ((1 - frame) * canvas.height).toInt()
+            )
             val icon = VectorDrawableCompat.create(context.resources, vectorId, null)
             icon!!.bounds = rect
             icon.draw(canvas)
@@ -104,17 +105,20 @@ class IconGenerator {
             val paint = Paint()
 
             val textSize = TypedValue.applyDimension(
-                    TypedValue.COMPLEX_UNIT_DIP, TEXT_SIZE_DP, context.resources.displayMetrics)
+                TypedValue.COMPLEX_UNIT_DIP, TEXT_SIZE_DP, context.resources.displayMetrics
+            )
 
             paint.color = Color.WHITE
             paint.textAlign = Paint.Align.CENTER
             paint.textSize = textSize
             paint.isAntiAlias = true
 
-            canvas.drawText(character.toString(),
-                    canvas.width / 2.0f,
-                    canvas.height / 2.0f - (paint.descent() + paint.ascent()) / 2.0f,
-                    paint)
+            canvas.drawText(
+                character.toString(),
+                canvas.width / 2.0f,
+                canvas.height / 2.0f - (paint.descent() + paint.ascent()) / 2.0f,
+                paint
+            )
 
             return bitmap
         }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/telemetry/ActivationPing.kt b/focus-android/app/src/main/java/org/mozilla/focus/telemetry/ActivationPing.kt
index a8611ccad1ef..d2aa58e90ee1 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/telemetry/ActivationPing.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/telemetry/ActivationPing.kt
@@ -21,7 +21,8 @@ class ActivationPing(private val context: Context) {
 
     private val prefs: SharedPreferences by lazy {
         context.getSharedPreferences(
-            "ActivationPing.prefs", Context.MODE_PRIVATE)
+            "ActivationPing.prefs", Context.MODE_PRIVATE
+        )
     }
 
     /**
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/telemetry/GleanMetricsService.kt b/focus-android/app/src/main/java/org/mozilla/focus/telemetry/GleanMetricsService.kt
index 6b4c0c0a8f3a..b6f1d6a0648b 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/telemetry/GleanMetricsService.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/telemetry/GleanMetricsService.kt
@@ -20,8 +20,8 @@ import mozilla.telemetry.glean.Glean
 import mozilla.telemetry.glean.config.Configuration
 import org.mozilla.focus.BuildConfig
 import org.mozilla.focus.Components
-import org.mozilla.focus.GleanMetrics.GleanBuildInfo
 import org.mozilla.focus.GleanMetrics.Browser
+import org.mozilla.focus.GleanMetrics.GleanBuildInfo
 import org.mozilla.focus.GleanMetrics.LegacyIds
 import org.mozilla.focus.GleanMetrics.Pings
 import org.mozilla.focus.ext.components
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/telemetry/TelemetryWrapper.kt b/focus-android/app/src/main/java/org/mozilla/focus/telemetry/TelemetryWrapper.kt
index 8106689cc614..813a34fee6b8 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/telemetry/TelemetryWrapper.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/telemetry/TelemetryWrapper.kt
@@ -48,9 +48,9 @@ import java.util.Locale
 import kotlin.collections.HashSet
 
 @Suppress(
-        // Yes, this a large class with a lot of functions. But it's very simple and still easy to read.
-        "TooManyFunctions",
-        "LargeClass"
+    // Yes, this a large class with a lot of functions. But it's very simple and still easy to read.
+    "TooManyFunctions",
+    "LargeClass"
 )
 object TelemetryWrapper {
     private const val TELEMETRY_APP_NAME_FOCUS = "Focus"
@@ -215,13 +215,15 @@ object TelemetryWrapper {
             val preferences = PreferenceManager.getDefaultSharedPreferences(context)
 
             return preferences.getBoolean(
-                    resources.getString(R.string.pref_key_telemetry), isEnabledByDefault) && !AppConstants.isDevBuild
+                resources.getString(R.string.pref_key_telemetry), isEnabledByDefault
+            ) && !AppConstants.isDevBuild
         } finally {
             StrictMode.setThreadPolicy(threadPolicy)
         }
     }
 
     @JvmStatic
+    @Suppress("LongMethod")
     fun init(context: Context) {
         // When initializing the telemetry library it will make sure that all directories exist and
         // are readable/writable.
@@ -232,39 +234,40 @@ object TelemetryWrapper {
             val telemetryEnabled = isTelemetryEnabled(context)
 
             val configuration = TelemetryConfiguration(context)
-                    .setServerEndpoint("https://incoming.telemetry.mozilla.org")
-                    .setAppName(if (AppConstants.isKlarBuild) TELEMETRY_APP_NAME_KLAR else TELEMETRY_APP_NAME_FOCUS)
-                    .setUpdateChannel(BuildConfig.BUILD_TYPE)
-                    .setPreferencesImportantForTelemetry(
-                            resources.getString(R.string.pref_key_search_engine),
-                            resources.getString(R.string.pref_key_privacy_block_ads),
-                            resources.getString(R.string.pref_key_privacy_block_analytics),
-                            resources.getString(R.string.pref_key_privacy_block_social),
-                            resources.getString(R.string.pref_key_privacy_block_other),
-                            resources.getString(R.string.pref_key_performance_block_javascript),
-                            resources.getString(R.string.pref_key_performance_enable_cookies),
-                            resources.getString(R.string.pref_key_performance_block_webfonts),
-                            resources.getString(R.string.pref_key_locale),
-                            resources.getString(R.string.pref_key_secure),
-                            resources.getString(R.string.pref_key_default_browser),
-                            resources.getString(R.string.pref_key_autocomplete_preinstalled),
-                            resources.getString(R.string.pref_key_autocomplete_custom),
-                            resources.getString(R.string.pref_key_remote_debugging),
-                            resources.getString(R.string.pref_key_homescreen_tips),
-                            resources.getString(R.string.pref_key_open_new_tab),
-                            resources.getString(R.string.pref_key_show_search_suggestions)
-                    )
-                    .setSettingsProvider(TelemetrySettingsProvider(context))
-                    .setCollectionEnabled(telemetryEnabled)
-                    .setUploadEnabled(telemetryEnabled)
-                    .setBuildId(TelemetryConfiguration(context).buildId)
+                .setServerEndpoint("https://incoming.telemetry.mozilla.org")
+                .setAppName(if (AppConstants.isKlarBuild) TELEMETRY_APP_NAME_KLAR else TELEMETRY_APP_NAME_FOCUS)
+                .setUpdateChannel(BuildConfig.BUILD_TYPE)
+                .setPreferencesImportantForTelemetry(
+                    resources.getString(R.string.pref_key_search_engine),
+                    resources.getString(R.string.pref_key_privacy_block_ads),
+                    resources.getString(R.string.pref_key_privacy_block_analytics),
+                    resources.getString(R.string.pref_key_privacy_block_social),
+                    resources.getString(R.string.pref_key_privacy_block_other),
+                    resources.getString(R.string.pref_key_performance_block_javascript),
+                    resources.getString(R.string.pref_key_performance_enable_cookies),
+                    resources.getString(R.string.pref_key_performance_block_webfonts),
+                    resources.getString(R.string.pref_key_locale),
+                    resources.getString(R.string.pref_key_secure),
+                    resources.getString(R.string.pref_key_default_browser),
+                    resources.getString(R.string.pref_key_autocomplete_preinstalled),
+                    resources.getString(R.string.pref_key_autocomplete_custom),
+                    resources.getString(R.string.pref_key_remote_debugging),
+                    resources.getString(R.string.pref_key_homescreen_tips),
+                    resources.getString(R.string.pref_key_open_new_tab),
+                    resources.getString(R.string.pref_key_show_search_suggestions)
+                )
+                .setSettingsProvider(TelemetrySettingsProvider(context))
+                .setCollectionEnabled(telemetryEnabled)
+                .setUploadEnabled(telemetryEnabled)
+                .setBuildId(TelemetryConfiguration(context).buildId)
 
             val serializer = JSONPingSerializer()
             val storage = FileTelemetryStorage(configuration, serializer)
             val client = TelemetryClient(context.components.client.unwrap())
             val scheduler = JobSchedulerTelemetryScheduler()
 
-            TelemetryHolder.set(Telemetry(configuration, storage, client, scheduler)
+            TelemetryHolder.set(
+                Telemetry(configuration, storage, client, scheduler)
                     .addPingBuilder(TelemetryCorePingBuilder(configuration))
                     .addPingBuilder(TelemetryEventPingBuilder(configuration))
                     .also {
@@ -275,17 +278,22 @@ object TelemetryWrapper {
                             val mobileMetrics = metricsStorage.load() ?: JSONObject()
                             metricsStorage.clearStorage()
 
-                            it.addPingBuilder(TelemetryMobileMetricsPingBuilder(mobileMetrics,
-                                    configuration))
+                            it.addPingBuilder(
+                                TelemetryMobileMetricsPingBuilder(
+                                    mobileMetrics,
+                                    configuration
+                                )
+                            )
                         }
 
                         // Record new edited date
                         PreferenceManager.getDefaultSharedPreferences(context)
-                                .edit()
-                                .putLong(LAST_MOBILE_METRICS_PINGS, (dateFormat.format(Date()).toLong()))
-                                .apply()
+                            .edit()
+                            .putLong(LAST_MOBILE_METRICS_PINGS, (dateFormat.format(Date()).toLong()))
+                            .apply()
                     }
-                    .setDefaultSearchProvider(createDefaultSearchProvider(context)))
+                    .setDefaultSearchProvider(createDefaultSearchProvider(context))
+            )
         } finally {
             StrictMode.setThreadPolicy(threadPolicy)
         }
@@ -364,14 +372,14 @@ object TelemetryWrapper {
         histogram = IntArray(HISTOGRAM_SIZE)
 
         TelemetryEvent.create(Category.ACTION, Method.OPEN, Object.BROWSER).extra(
-                Extra.UNIQUE_DOMAINS_COUNT,
-                domainMap.size.toString()
+            Extra.UNIQUE_DOMAINS_COUNT,
+            domainMap.size.toString()
         ).queue()
         domainMap.clear()
 
         TelemetryEvent.create(Category.ACTION, Method.OPEN, Object.BROWSER).extra(
-                Extra.TOTAL_URI_COUNT,
-                numUri.toString()
+            Extra.TOTAL_URI_COUNT,
+            numUri.toString()
         ).queue()
         numUri = 0
 
@@ -381,10 +389,10 @@ object TelemetryWrapper {
     @JvmStatic
     fun stopMainActivity() {
         TelemetryHolder.get()
-                .queuePing(TelemetryCorePingBuilder.TYPE)
-                .queuePing(TelemetryEventPingBuilder.TYPE)
-                .queuePing(TelemetryMobileMetricsPingBuilder.TYPE)
-                .scheduleUpload()
+            .queuePing(TelemetryCorePingBuilder.TYPE)
+            .queuePing(TelemetryEventPingBuilder.TYPE)
+            .queuePing(TelemetryMobileMetricsPingBuilder.TYPE)
+            .scheduleUpload()
     }
 
     @JvmStatic
@@ -448,7 +456,7 @@ object TelemetryWrapper {
     @JvmStatic
     fun closeCustomTabEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.CUSTOM_TAB_CLOSE_BUTTON))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
@@ -481,9 +489,9 @@ object TelemetryWrapper {
         val telemetry = TelemetryHolder.get()
 
         TelemetryEvent
-                .create(Category.ACTION, Method.TYPE_SELECT_QUERY, Object.SEARCH_BAR)
-                .extra(Extra.SEARCH_SUGGESTION, "$isSearchSuggestion")
-                .queue()
+            .create(Category.ACTION, Method.TYPE_SELECT_QUERY, Object.SEARCH_BAR)
+            .extra(Extra.SEARCH_SUGGESTION, "$isSearchSuggestion")
+            .queue()
 
         val searchEngineIdentifier = getDefaultSearchEngineIdentifierForTelemetry(telemetry.configuration.context)
 
@@ -502,34 +510,36 @@ object TelemetryWrapper {
     @JvmStatic
     fun eraseEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.ERASE_BUTTON))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
     fun eraseBackToHomeEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.BACK_BUTTON, Value.ERASE_TO_HOME))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
     fun eraseBackToAppEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.BACK_BUTTON, Value.ERASE_TO_APP))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
     fun eraseNotificationEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.NOTIFICATION, Value.ERASE))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
     fun eraseAndOpenNotificationActionEvent() {
-        withSessionCounts(TelemetryEvent.create(
+        withSessionCounts(
+            TelemetryEvent.create(
                 Category.ACTION,
                 Method.CLICK,
                 Object.NOTIFICATION_ACTION,
-                Value.ERASE_AND_OPEN)
+                Value.ERASE_AND_OPEN
+            )
         ).queue()
     }
 
@@ -541,11 +551,12 @@ object TelemetryWrapper {
     @JvmStatic
     fun closeTabButtonTapped(crashSubmitted: Boolean) {
         TelemetryEvent.create(
-                Category.ACTION,
-                Method.CLICK,
-                Object.CRASH_REPORTER,
-                Value.CLOSE_TAB)
-                .extra(Extra.SUBMIT_CRASH, crashSubmitted.toString()).queue()
+            Category.ACTION,
+            Method.CLICK,
+            Object.CRASH_REPORTER,
+            Value.CLOSE_TAB
+        )
+            .extra(Extra.SUBMIT_CRASH, crashSubmitted.toString()).queue()
     }
 
     @JvmStatic
@@ -561,10 +572,10 @@ object TelemetryWrapper {
     @JvmStatic
     fun addToHomescreenShortcutEvent() {
         TelemetryEvent.create(
-                Category.ACTION,
-                Method.CLICK,
-                Object.ADD_TO_HOMESCREEN_DIALOG,
-                Value.ADD_TO_HOMESCREEN
+            Category.ACTION,
+            Method.CLICK,
+            Object.ADD_TO_HOMESCREEN_DIALOG,
+            Value.ADD_TO_HOMESCREEN
         ).queue()
     }
 
@@ -576,7 +587,7 @@ object TelemetryWrapper {
     @JvmStatic
     fun eraseShortcutEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.SHORTCUT, Value.ERASE))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
@@ -588,14 +599,14 @@ object TelemetryWrapper {
     @JvmStatic
     fun eraseTaskRemoved() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.RECENT_APPS, Value.ERASE))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
     fun settingsEvent(key: String, value: String) {
         TelemetryEvent.create(Category.ACTION, Method.CHANGE, Object.SETTING, key)
-                .extra(Extra.TO, value)
-                .queue()
+            .extra(Extra.TO, value)
+            .queue()
     }
 
     @JvmStatic
@@ -631,7 +642,7 @@ object TelemetryWrapper {
     @JvmStatic
     fun openLinkInNewTabEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.OPEN, Object.BROWSER_CONTEXTMENU, Value.TAB))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
@@ -698,10 +709,10 @@ object TelemetryWrapper {
     @JvmStatic
     fun blockingSwitchEvent(isBlockingEnabled: Boolean) {
         TelemetryEvent.create(
-                Category.ACTION,
-                Method.CLICK,
-                Object.BLOCKING_SWITCH,
-                isBlockingEnabled.toString()
+            Category.ACTION,
+            Method.CLICK,
+            Object.BLOCKING_SWITCH,
+            isBlockingEnabled.toString()
         ).queue()
     }
 
@@ -755,8 +766,8 @@ object TelemetryWrapper {
     @JvmStatic
     fun openWhatsNewEvent(highlighted: Boolean) {
         TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.MENU, Value.WHATS_NEW)
-                .extra(Extra.HIGHLIGHTED, highlighted.toString())
-                .queue()
+            .extra(Extra.HIGHLIGHTED, highlighted.toString())
+            .queue()
     }
 
     @JvmStatic
@@ -772,13 +783,13 @@ object TelemetryWrapper {
     @JvmStatic
     fun switchTabInTabsTrayEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.TABS_TRAY, Value.TAB))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
     fun eraseInTabsTrayEvent() {
         withSessionCounts(TelemetryEvent.create(Category.ACTION, Method.CLICK, Object.TABS_TRAY, Value.ERASE))
-                .queue()
+            .queue()
     }
 
     @JvmStatic
@@ -804,8 +815,8 @@ object TelemetryWrapper {
             else -> "Undefined SSL Error"
         }
         TelemetryEvent.create(Category.ERROR, if (fromPage) Method.PAGE else Method.RESOURCE, Object.BROWSER)
-                .extra(Extra.ERROR_CODE, primaryErrorMessage)
-                .queue()
+            .extra(Extra.ERROR_CODE, primaryErrorMessage)
+            .queue()
     }
 
     enum class AutoCompleteEventSource {
@@ -819,21 +830,21 @@ object TelemetryWrapper {
         }
 
         TelemetryEvent.create(Category.ACTION, Method.SAVE, Object.AUTOCOMPLETE_DOMAIN)
-                .extra(Extra.SOURCE, source)
-                .queue()
+            .extra(Extra.SOURCE, source)
+            .queue()
     }
 
     fun removeAutocompleteDomainsEvent(count: Int) {
         TelemetryEvent.create(Category.ACTION, Method.REMOVE, Object.AUTOCOMPLETE_DOMAIN)
-                .extra(Extra.TOTAL, count.toString())
-                .queue()
+            .extra(Extra.TOTAL, count.toString())
+            .queue()
     }
 
     fun reorderAutocompleteDomainEvent(from: Int, to: Int) {
         TelemetryEvent.create(Category.ACTION, Method.REORDER, Object.AUTOCOMPLETE_DOMAIN)
-                .extra(Extra.FROM, from.toString())
-                .extra(Extra.TO, to.toString())
-                .queue()
+            .extra(Extra.FROM, from.toString())
+            .extra(Extra.TO, to.toString())
+            .queue()
     }
 
     fun autofillShownEvent() {
@@ -848,8 +859,8 @@ object TelemetryWrapper {
     @JvmStatic
     fun setDefaultSearchEngineEvent(source: String) {
         TelemetryEvent.create(Category.ACTION, Method.SAVE, Object.SEARCH_ENGINE_SETTING)
-                .extra(Extra.SOURCE, source)
-                .queue()
+            .extra(Extra.SOURCE, source)
+            .queue()
     }
 
     @JvmStatic
@@ -875,15 +886,15 @@ object TelemetryWrapper {
     @JvmStatic
     fun saveCustomSearchEngineEvent(success: Boolean) {
         TelemetryEvent.create(Category.ACTION, Method.SAVE, Object.CUSTOM_SEARCH_ENGINE)
-                .extra(Extra.SUCCESS, success.toString())
-                .queue()
+            .extra(Extra.SUCCESS, success.toString())
+            .queue()
     }
 
     @JvmStatic
     fun removeSearchEnginesEvent(selected: Int) {
         TelemetryEvent.create(Category.ACTION, Method.REMOVE, Object.REMOVE_SEARCH_ENGINES)
-                .extra(Extra.SELECTED, selected.toString())
-                .queue()
+            .extra(Extra.SELECTED, selected.toString())
+            .queue()
     }
 
     @JvmStatic
@@ -904,8 +915,8 @@ object TelemetryWrapper {
     @JvmStatic
     fun respondToSearchSuggestionPrompt(enable: Boolean) {
         TelemetryEvent
-                .create(Category.ACTION, Method.CLICK, Object.SEARCH_SUGGESTION_PROMPT, "$enable")
-                .queue()
+            .create(Category.ACTION, Method.CLICK, Object.SEARCH_SUGGESTION_PROMPT, "$enable")
+            .queue()
     }
 
     @JvmStatic
@@ -921,7 +932,7 @@ object TelemetryWrapper {
     @JvmStatic
     fun dayPassedSinceLastUpload(context: Context): Boolean {
         val dateOfLastPing = PreferenceManager
-                .getDefaultSharedPreferences(context).getLong(LAST_MOBILE_METRICS_PINGS, 0)
+            .getDefaultSharedPreferences(context).getLong(LAST_MOBILE_METRICS_PINGS, 0)
         // Make sure a minimum of 1 day has passed since we collected data
         val currentDateLong = dateFormat.format(Date()).toLong()
         return currentDateLong > dateOfLastPing
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/tips/TipManager.kt b/focus-android/app/src/main/java/org/mozilla/focus/tips/TipManager.kt
index d90edb320d49..1c73aee6e3b3 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/tips/TipManager.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/tips/TipManager.kt
@@ -62,8 +62,8 @@ class Tip(val id: Int, val text: String, val shouldDisplay: () -> Boolean, val d
 
             val shouldDisplayTrackingProtection = {
                 Settings.getInstance(context).shouldBlockOtherTrackers() ||
-                        Settings.getInstance(context).shouldBlockAdTrackers() ||
-                        Settings.getInstance(context).shouldBlockAnalyticTrackers()
+                    Settings.getInstance(context).shouldBlockAdTrackers() ||
+                    Settings.getInstance(context).shouldBlockAnalyticTrackers()
             }
 
             return Tip(id, name, shouldDisplayTrackingProtection)
@@ -73,7 +73,7 @@ class Tip(val id: Int, val text: String, val shouldDisplay: () -> Boolean, val d
             val id = R.string.tip_add_to_homescreen
             val name = context.resources.getString(id)
             val homescreenURL =
-                    "https://support.mozilla.org/kb/add-web-page-shortcuts-your-home-screen"
+                "https://support.mozilla.org/kb/add-web-page-shortcuts-your-home-screen"
 
             val deepLinkAddToHomescreen = {
                 context.components.tabsUseCases.addTab(
@@ -121,7 +121,7 @@ class Tip(val id: Int, val text: String, val shouldDisplay: () -> Boolean, val d
             val id = R.string.tip_autocomplete_url
             val name = context.resources.getString(id)
             val autocompleteURL =
-                    "https://support.mozilla.org/kb/autocomplete-settings-firefox-focus-address-bar"
+                "https://support.mozilla.org/kb/autocomplete-settings-firefox-focus-address-bar"
 
             val shouldDisplayAutocompleteUrl = {
                 !Settings.getInstance(context).shouldAutocompleteFromCustomDomainList()
@@ -145,7 +145,7 @@ class Tip(val id: Int, val text: String, val shouldDisplay: () -> Boolean, val d
             val id = R.string.tip_open_in_new_tab
             val name = context.resources.getString(id)
             val newTabURL =
-                    "https://support.mozilla.org/kb/open-new-tab-firefox-focus-android"
+                "https://support.mozilla.org/kb/open-new-tab-firefox-focus-android"
 
             val shouldDisplayOpenInNewTab = {
                 !Settings.getInstance(context).hasOpenedInNewTab()
@@ -169,7 +169,7 @@ class Tip(val id: Int, val text: String, val shouldDisplay: () -> Boolean, val d
             val id = R.string.tip_request_desktop2
             val name = context.resources.getString(id)
             val requestDesktopURL =
-                    "https://support.mozilla.org/kb/switch-desktop-view-firefox-focus-android"
+                "https://support.mozilla.org/kb/switch-desktop-view-firefox-focus-android"
 
             val shouldDisplayRequestDesktop = {
                 !Settings.getInstance(context).hasRequestedDesktop()
@@ -197,8 +197,11 @@ class Tip(val id: Int, val text: String, val shouldDisplay: () -> Boolean, val d
                 val launchCount = Settings.getInstance(context).getAppLaunchCount()
                 var shouldDisplay = false
 
-                if (launchCount != 0 && (launchCount == FORCE_SHOW_DISABLE_TIPS_LAUNCH_COUNT ||
-                                launchCount % FORCE_SHOW_DISABLE_TIPS_INTERVAL == 0)) {
+                if (launchCount != 0 && (
+                    launchCount == FORCE_SHOW_DISABLE_TIPS_LAUNCH_COUNT ||
+                        launchCount % FORCE_SHOW_DISABLE_TIPS_INTERVAL == 0
+                    )
+                ) {
                     shouldDisplay = true
                 }
 
@@ -206,9 +209,11 @@ class Tip(val id: Int, val text: String, val shouldDisplay: () -> Boolean, val d
             }
 
             val deepLinkDisableTips = {
-                context.components.appStore.dispatch(AppAction.OpenSettings(
-                    page = Screen.Settings.Page.Mozilla
-                ))
+                context.components.appStore.dispatch(
+                    AppAction.OpenSettings(
+                        page = Screen.Settings.Page.Mozilla
+                    )
+                )
                 TelemetryWrapper.pressTipEvent(id)
             }
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/utils/ContextUtils.kt b/focus-android/app/src/main/java/org/mozilla/focus/utils/ContextUtils.kt
index ebe81397dc85..bf1fdc00783e 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/utils/ContextUtils.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/utils/ContextUtils.kt
@@ -6,9 +6,9 @@ package org.mozilla.focus.utils
 
 import android.app.Activity
 import android.content.Context
-import androidx.fragment.app.FragmentActivity
 import android.view.ContextThemeWrapper
+import androidx.fragment.app.FragmentActivity
 
 fun Context.asActivity() = (this as? ContextThemeWrapper)?.baseContext as? Activity ?: this as? Activity
 fun Context.asFragmentActivity() = (this as? ContextThemeWrapper)?.baseContext as? FragmentActivity
-        ?: this as? FragmentActivity
+    ?: this as? FragmentActivity
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/utils/FileUtils.kt b/focus-android/app/src/main/java/org/mozilla/focus/utils/FileUtils.kt
index c5a850cf8726..3df9e1aeb905 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/utils/FileUtils.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/utils/FileUtils.kt
@@ -21,21 +21,27 @@ private const val SENTRY_CACHE_DIR = "sentry-buffered-events"
 class FileUtils {
     companion object {
         @JvmStatic
-        fun truncateCacheDirectory(context: Context) = deleteContent(context.cacheDir, doNotEraseWhitelist = setOf(
+        fun truncateCacheDirectory(context: Context) = deleteContent(
+            context.cacheDir,
+            doNotEraseWhitelist = setOf(
                 // If the folder or its contents are deleted, WebView will stop using the disk cache entirely.
                 WEBVIEW_CACHE_DIR,
                 SENTRY_CACHE_DIR,
                 MobileMetricsPingStorage.STORAGE_FOLDER
-        ))
+            )
+        )
 
         @JvmStatic
         fun deleteWebViewDirectory(context: Context): Boolean {
             val webviewDirectory = File(context.applicationInfo.dataDir, WEBVIEW_DIRECTORY)
-            return deleteContent(webviewDirectory, doNotEraseWhitelist = setOf(
+            return deleteContent(
+                webviewDirectory,
+                doNotEraseWhitelist = setOf(
                     // If the folder or its contents is deleted, WebStorage.deleteAllData does not clear Local Storage
                     // in memory.
                     LOCAL_STORAGE_DIR
-            ))
+                )
+            )
         }
 
         private fun deleteContent(directory: File, doNotEraseWhitelist: Set<String> = emptySet()): Boolean {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/utils/IntentUtils.kt b/focus-android/app/src/main/java/org/mozilla/focus/utils/IntentUtils.kt
index 37213afe8966..7412ca2e4d4c 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/utils/IntentUtils.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/utils/IntentUtils.kt
@@ -9,9 +9,7 @@ import android.content.Intent
 import android.net.Uri
 import androidx.annotation.StringRes
 import androidx.appcompat.app.AlertDialog
-
 import org.mozilla.focus.R
-
 import java.net.URISyntaxException
 
 object IntentUtils {
@@ -49,11 +47,12 @@ object IntentUtils {
                 val externalAppTitle = info?.loadLabel(packageManager) ?: "(null)"
 
                 showConfirmationDialog(
-                        context,
-                        intent,
-                        context.getString(R.string.external_app_prompt_title),
-                        R.string.external_app_prompt,
-                        externalAppTitle)
+                    context,
+                    intent,
+                    context.getString(R.string.external_app_prompt_title),
+                    R.string.external_app_prompt,
+                    externalAppTitle
+                )
             }
             else -> {
                 val chooserTitle = context.getString(R.string.external_multiple_apps_matched_exit)
@@ -82,9 +81,11 @@ object IntentUtils {
             val info = packageManager.resolveActivity(marketIntent, 0)
             val marketTitle = info?.loadLabel(packageManager) ?: "(null)"
 
-            showConfirmationDialog(context, marketIntent,
-                    context.getString(R.string.external_app_prompt_no_app_title),
-                    R.string.external_app_prompt_no_app, marketTitle)
+            showConfirmationDialog(
+                context, marketIntent,
+                context.getString(R.string.external_app_prompt_no_app_title),
+                R.string.external_app_prompt_no_app, marketTitle
+            )
 
             // Stop loading, we essentially have a result.
             return true
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/utils/Settings.kt b/focus-android/app/src/main/java/org/mozilla/focus/utils/Settings.kt
index 012c1a2fe733..7963ce159427 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/utils/Settings.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/utils/Settings.kt
@@ -94,36 +94,41 @@ class Settings private constructor(
         get() = preferences.getString(getPreferenceKey(R.string.pref_key_search_engine), "")!!
 
     fun shouldBlockImages(): Boolean =
-            // Not shipping in v1 (#188)
+        // Not shipping in v1 (#188)
             /* preferences.getBoolean(
                     resources.getString(R.string.pref_key_performance_block_images),
                     false); */
-            false
+        false
 
     fun shouldEnableRemoteDebugging(): Boolean =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_remote_debugging),
-                    false)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_remote_debugging),
+            false
+        )
 
     fun shouldDisplayHomescreenTips() =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_homescreen_tips),
-                    true)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_homescreen_tips),
+            true
+        )
 
     fun shouldShowSearchSuggestions(): Boolean =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_show_search_suggestions),
-                    false)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_show_search_suggestions),
+            false
+        )
 
     fun shouldBlockWebFonts(): Boolean =
         preferences.getBoolean(
             getPreferenceKey(R.string.pref_key_performance_block_webfonts),
-            false)
+            false
+        )
 
     fun shouldBlockJavaScript(): Boolean =
-            preferences.getBoolean(
-                getPreferenceKey(R.string.pref_key_performance_block_javascript),
-                false)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_performance_block_javascript),
+            false
+        )
 
     fun shouldBlockCookiesValue(): String =
         preferences.getString(
@@ -135,94 +140,109 @@ class Settings private constructor(
         )!!
 
     fun shouldBlockCookies(): Boolean =
-            shouldBlockCookiesValue() == resources.getString(
-                    R.string.preference_privacy_should_block_cookies_yes_option2)
+        shouldBlockCookiesValue() == resources.getString(
+            R.string.preference_privacy_should_block_cookies_yes_option2
+        )
 
     fun shouldBlockThirdPartyCookies(): Boolean =
+        shouldBlockCookiesValue() == resources.getString(
+            R.string.preference_privacy_should_block_cookies_third_party_only_option
+        ) ||
             shouldBlockCookiesValue() == resources.getString(
-                    R.string.preference_privacy_should_block_cookies_third_party_only_option) ||
-                    shouldBlockCookiesValue() == resources.getString(
-                    R.string.preference_privacy_should_block_cookies_yes_option2)
+                R.string.preference_privacy_should_block_cookies_yes_option2
+            )
 
     fun shouldShowFirstrun(): Boolean =
-            !preferences.getBoolean(FirstrunFragment.FIRSTRUN_PREF, false)
+        !preferences.getBoolean(FirstrunFragment.FIRSTRUN_PREF, false)
 
     fun shouldUseBiometrics(): Boolean =
-            preferences.getBoolean(getPreferenceKey(R.string.pref_key_biometric), false)
+        preferences.getBoolean(getPreferenceKey(R.string.pref_key_biometric), false)
 
     fun shouldOpenNewTabs(): Boolean =
         preferences.getBoolean(getPreferenceKey(R.string.pref_key_open_new_tab), false)
 
     fun shouldUseSecureMode(): Boolean =
-            preferences.getBoolean(getPreferenceKey(R.string.pref_key_secure), false)
+        preferences.getBoolean(getPreferenceKey(R.string.pref_key_secure), false)
 
     fun setDefaultSearchEngineByName(name: String) {
         preferences.edit()
-                .putString(getPreferenceKey(R.string.pref_key_search_engine), name)
-                .apply()
+            .putString(getPreferenceKey(R.string.pref_key_search_engine), name)
+            .apply()
     }
 
     fun shouldAutocompleteFromShippedDomainList() =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_autocomplete_preinstalled),
-                    true)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_autocomplete_preinstalled),
+            true
+        )
 
     fun shouldAutocompleteFromCustomDomainList() =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_autocomplete_custom),
-                    true)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_autocomplete_custom),
+            true
+        )
 
     fun shouldBlockAdTrackers() =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_privacy_block_ads),
-                    true)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_privacy_block_ads),
+            true
+        )
 
     fun shouldUseSafeBrowsing() =
         preferences.getBoolean(
             getPreferenceKey(R.string.pref_key_safe_browsing),
-            true)
+            true
+        )
 
     fun shouldBlockAnalyticTrackers() =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_privacy_block_analytics),
-                    true)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_privacy_block_analytics),
+            true
+        )
 
     fun shouldBlockSocialTrackers() =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_privacy_block_social),
-                    true)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_privacy_block_social),
+            true
+        )
 
     fun shouldBlockOtherTrackers() =
-            preferences.getBoolean(
-                    getPreferenceKey(R.string.pref_key_privacy_block_other),
-                    true)
+        preferences.getBoolean(
+            getPreferenceKey(R.string.pref_key_privacy_block_other),
+            true
+        )
 
     fun userHasToggledSearchSuggestions(): Boolean =
-            preferences.getBoolean(SearchSuggestionsPreferences.TOGGLED_SUGGESTIONS_PREF, false)
+        preferences.getBoolean(SearchSuggestionsPreferences.TOGGLED_SUGGESTIONS_PREF, false)
 
     fun userHasDismissedNoSuggestionsMessage(): Boolean =
-            preferences.getBoolean(SearchSuggestionsPreferences.DISMISSED_NO_SUGGESTIONS_PREF, false)
+        preferences.getBoolean(SearchSuggestionsPreferences.DISMISSED_NO_SUGGESTIONS_PREF, false)
 
     fun isDefaultBrowser() = preferences.getBoolean(
         getPreferenceKey(R.string.pref_key_default_browser),
-        false)
+        false
+    )
 
     fun hasOpenedInNewTab() = preferences.getBoolean(
         getPreferenceKey(R.string.has_opened_new_tab),
-        false)
+        false
+    )
 
     fun hasRequestedDesktop() = preferences.getBoolean(
         getPreferenceKey(R.string.has_requested_desktop),
-        false)
+        false
+    )
 
     fun getAppLaunchCount() = preferences.getInt(
-            getPreferenceKey(R.string.app_launch_count),
-            0)
+        getPreferenceKey(R.string.app_launch_count),
+        0
+    )
 
     fun getTotalBlockedTrackersCount() = preferences.getInt(
         getPreferenceKey(R.string.pref_key_privacy_total_trackers_blocked_count),
-        0)
+        0
+    )
 
     private fun getPreferenceKey(resourceId: Int): String =
-            resources.getString(resourceId)
+        resources.getString(resourceId)
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/whatsnew/WhatsNew.kt b/focus-android/app/src/main/java/org/mozilla/focus/whatsnew/WhatsNew.kt
index ce9cd681377c..d7889bb0209f 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/whatsnew/WhatsNew.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/whatsnew/WhatsNew.kt
@@ -87,12 +87,14 @@ class WhatsNew private constructor(private val storage: WhatsNewStorage) {
         }
 
         /**
-        * Convenience function to run from the context.
+         * Convenience function to run from the context.
          */
         @JvmStatic
         fun shouldHighlightWhatsNew(context: Context): Boolean {
-            return shouldHighlightWhatsNew(ContextWhatsNewVersion(context),
-                    SharedPreferenceWhatsNewStorage(context))
+            return shouldHighlightWhatsNew(
+                ContextWhatsNewVersion(context),
+                SharedPreferenceWhatsNewStorage(context)
+            )
         }
 
         /**
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/whatsnew/WhatsNewStorage.kt b/focus-android/app/src/main/java/org/mozilla/focus/whatsnew/WhatsNewStorage.kt
index 2810ca021820..25d28796e54a 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/whatsnew/WhatsNewStorage.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/whatsnew/WhatsNewStorage.kt
@@ -37,8 +37,8 @@ class SharedPreferenceWhatsNewStorage(private val sharedPreference: SharedPrefer
 
     override fun setVersion(version: WhatsNewVersion) {
         sharedPreference.edit()
-                .putString(WhatsNewStorage.PREFERENCE_KEY_APP_NAME, version.version)
-                .apply()
+            .putString(WhatsNewStorage.PREFERENCE_KEY_APP_NAME, version.version)
+            .apply()
     }
 
     override fun getSessionCounter(): Int {
@@ -47,7 +47,7 @@ class SharedPreferenceWhatsNewStorage(private val sharedPreference: SharedPrefer
 
     override fun setSessionCounter(sessionCount: Int) {
         sharedPreference.edit()
-                .putInt(WhatsNewStorage.PREFERENCE_KEY_SESSION_COUNTER, sessionCount)
-                .apply()
+            .putInt(WhatsNewStorage.PREFERENCE_KEY_SESSION_COUNTER, sessionCount)
+            .apply()
     }
 }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/widget/CookiesPreference.kt b/focus-android/app/src/main/java/org/mozilla/focus/widget/CookiesPreference.kt
index bad9980712d3..53f1a1119971 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/widget/CookiesPreference.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/widget/CookiesPreference.kt
@@ -6,11 +6,11 @@ package org.mozilla.focus.widget
 
 import android.R
 import android.content.Context
-import androidx.preference.ListPreference
-import androidx.preference.PreferenceViewHolder
 import android.util.AttributeSet
 import android.view.View
 import androidx.core.view.isVisible
+import androidx.preference.ListPreference
+import androidx.preference.PreferenceViewHolder
 import org.mozilla.focus.utils.Settings
 
 /**
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/widget/IndicatorMenuButton.kt b/focus-android/app/src/main/java/org/mozilla/focus/widget/IndicatorMenuButton.kt
index 2daf81b36b67..c094ef1abad1 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/widget/IndicatorMenuButton.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/widget/IndicatorMenuButton.kt
@@ -17,9 +17,10 @@ class IndicatorMenuButton(context: Context, attrs: AttributeSet) : FrameLayout(c
         isClickable = true
 
         val view = LayoutInflater.from(context).inflate(
-                R.layout.item_indicator_menu_button,
-                this,
-                true)
+            R.layout.item_indicator_menu_button,
+            this,
+            true
+        )
 
         view.findViewById<View>(R.id.dot).visibility = if (WhatsNew.shouldHighlightWhatsNew(context))
             View.VISIBLE
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/widget/TelemetrySwitchPreference.kt b/focus-android/app/src/main/java/org/mozilla/focus/widget/TelemetrySwitchPreference.kt
index 9f43b8273c98..b636f78a90ea 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/widget/TelemetrySwitchPreference.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/widget/TelemetrySwitchPreference.kt
@@ -29,8 +29,8 @@ internal class TelemetrySwitchPreference(context: Context?, attrs: AttributeSet?
     override fun onClick() {
         super.onClick()
         TelemetryHolder.get()
-                .configuration
-                .setUploadEnabled(isChecked).isCollectionEnabled = isChecked
+            .configuration
+            .setUploadEnabled(isChecked).isCollectionEnabled = isChecked
     }
 
     override fun getDescription(): String? {
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/TestFocusApplication.kt b/focus-android/app/src/test/java/org/mozilla/focus/TestFocusApplication.kt
index 6f7d4eb3f5cc..be6a4f337ba7 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/TestFocusApplication.kt
+++ b/focus-android/app/src/test/java/org/mozilla/focus/TestFocusApplication.kt
@@ -40,10 +40,10 @@ class FakeEngine : Engine {
         get() = throw NotImplementedError("Not needed for test")
 
     override fun createView(context: Context, attrs: AttributeSet?): EngineView =
-            throw UnsupportedOperationException()
+        throw UnsupportedOperationException()
 
     override fun createSession(private: Boolean, contextId: String?): EngineSession =
-            throw UnsupportedOperationException()
+        throw UnsupportedOperationException()
 
     override fun createSessionState(json: JSONObject) = FakeEngineSessionState()
 
@@ -54,10 +54,10 @@ class FakeEngine : Engine {
     }
 
     override fun name(): String =
-            throw UnsupportedOperationException()
+        throw UnsupportedOperationException()
 
     override fun speculativeConnect(url: String) =
-            throw UnsupportedOperationException()
+        throw UnsupportedOperationException()
 
     override val profiler: Profiler
         get() = throw NotImplementedError("Not needed for test")
@@ -81,4 +81,4 @@ class FakeClient : Client() {
     override fun fetch(request: Request): Response {
         throw UnsupportedOperationException()
     }
-}
\ No newline at end of file
+}
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/ext/StringTest.kt b/focus-android/app/src/test/java/org/mozilla/focus/ext/StringTest.kt
index e7c65c376367..1a5bb4438444 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/ext/StringTest.kt
+++ b/focus-android/app/src/test/java/org/mozilla/focus/ext/StringTest.kt
@@ -14,52 +14,64 @@ class StringTest {
     @Test
     fun testBeautifyUrl() {
         assertEqualsBeautified(
-                "wikipedia.org/wiki/Adler_Planetarium",
-                "https://en.m.wikipedia.org/wiki/Adler_Planetarium")
+            "wikipedia.org/wiki/Adler_Planetarium",
+            "https://en.m.wikipedia.org/wiki/Adler_Planetarium"
+        )
 
         assertEqualsBeautified(
-                "youtube.com/watch?v=WXqGDW7kuAk",
-                "https://youtube.com/watch?v=WXqGDW7kuAk")
+            "youtube.com/watch?v=WXqGDW7kuAk",
+            "https://youtube.com/watch?v=WXqGDW7kuAk"
+        )
 
         assertEqualsBeautified(
-                "spotify.com/album/6JVdzwuTEaLj7Tga8DpFpz",
-                "http://open.spotify.com/album/6JVdzwuTEaLj7Tga8DpFpz")
+            "spotify.com/album/6JVdzwuTEaLj7Tga8DpFpz",
+            "http://open.spotify.com/album/6JVdzwuTEaLj7Tga8DpFpz"
+        )
 
         assertEqualsBeautified(
-                "google.com/mail//0#inbox/15e34774924ddfb5",
-                "https://mail.google.com/mail/u/0/#inbox/15e34774924ddfb5")
+            "google.com/mail//0#inbox/15e34774924ddfb5",
+            "https://mail.google.com/mail/u/0/#inbox/15e34774924ddfb5"
+        )
 
         assertEqualsBeautified(
-                "google.com/store//details?id=com.facebook.katana",
-                "https://play.google.com/store/apps/details?id=com.facebook.katana&hl=en")
+            "google.com/store//details?id=com.facebook.katana",
+            "https://play.google.com/store/apps/details?id=com.facebook.katana&hl=en"
+        )
 
         assertEqualsBeautified(
-                "amazon.com/Mockingjay-Hunger-Games-Suzanne-Collins//ref=pd_sim_14_2?_encoding=UTF8",
-                "http://amazon.com/Mockingjay-Hunger-Games-Suzanne-Collins/dp/0545663261/ref=pd_sim_14_2?_encoding=UTF8&psc=1&refRID=90ZHE3V976TKBGDR9VAM")
+            "amazon.com/Mockingjay-Hunger-Games-Suzanne-Collins//ref=pd_sim_14_2?_encoding=UTF8",
+            "http://amazon.com/Mockingjay-Hunger-Games-Suzanne-Collins/dp/0545663261/ref=pd_sim_14_2?_encoding=UTF8&psc=1&refRID=90ZHE3V976TKBGDR9VAM"
+        )
 
         assertEqualsBeautified(
-                "usbank.com/Auth/Login",
-                "https://onlinebanking.usbank.com/Auth/Login")
+            "usbank.com/Auth/Login",
+            "https://onlinebanking.usbank.com/Auth/Login"
+        )
 
         assertEqualsBeautified(
-                "wsj.com/articles/mexican-presidential-candidate-calls-for-nafta-talks-to-be-suspended-1504137175",
-                "https://www.wsj.com/articles/mexican-presidential-candidate-calls-for-nafta-talks-to-be-suspended-1504137175")
+            "wsj.com/articles/mexican-presidential-candidate-calls-for-nafta-talks-to-be-suspended-1504137175",
+            "https://www.wsj.com/articles/mexican-presidential-candidate-calls-for-nafta-talks-to-be-suspended-1504137175"
+        )
 
         assertEqualsBeautified(
-                "nytimes.com/2017//princess-diana-death-anniversary.html?hp",
-                "https://www.nytimes.com/2017/08/30/world/europe/princess-diana-death-anniversary.html?hp&action=click&pgtype=Homepage&clickSource=story-heading&module=second-column-region&region=top-news&WT.nav=top-news")
+            "nytimes.com/2017//princess-diana-death-anniversary.html?hp",
+            "https://www.nytimes.com/2017/08/30/world/europe/princess-diana-death-anniversary.html?hp&action=click&pgtype=Homepage&clickSource=story-heading&module=second-column-region&region=top-news&WT.nav=top-news"
+        )
 
         assertEqualsBeautified(
-                "yahoo.co.jp/hl?a=20170830-00000008-jct-soci",
-                "https://headlines.yahoo.co.jp/hl?a=20170830-00000008-jct-soci")
+            "yahoo.co.jp/hl?a=20170830-00000008-jct-soci",
+            "https://headlines.yahoo.co.jp/hl?a=20170830-00000008-jct-soci"
+        )
 
         assertEqualsBeautified(
-                "tomshardware.co.uk/answers//running-guest-network-channel-interference.html",
-                "http://www.tomshardware.co.uk/answers/id-2025922/running-guest-network-channel-interference.html")
+            "tomshardware.co.uk/answers//running-guest-network-channel-interference.html",
+            "http://www.tomshardware.co.uk/answers/id-2025922/running-guest-network-channel-interference.html"
+        )
 
         assertEqualsBeautified(
-                "github.com/mozilla-mobile//1231",
-                "https://github.com/mozilla-mobile/focus-android/issues/1231")
+            "github.com/mozilla-mobile//1231",
+            "https://github.com/mozilla-mobile/focus-android/issues/1231"
+        )
     }
 
     private fun assertEqualsBeautified(expected: String, url: String) {
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/ext/UriTest.kt b/focus-android/app/src/test/java/org/mozilla/focus/ext/UriTest.kt
index b8f83af89177..eb2ced067f53 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/ext/UriTest.kt
+++ b/focus-android/app/src/test/java/org/mozilla/focus/ext/UriTest.kt
@@ -50,26 +50,33 @@ class UriTest {
     fun testTruncatedPathWithMultipleSegments() {
         assertTruncatedPath("/en-US//fast", "https://www.mozilla.org/en-US/firefox/features/fast/")
 
-        assertTruncatedPath("/2017//nasa-hi-seas-mars-analogue-mission-hawaii-mauna-loa",
-                "https://www.theverge.com/2017/9/24/16356876/nasa-hi-seas-mars-analogue-mission-hawaii-mauna-loa")
+        assertTruncatedPath(
+            "/2017//nasa-hi-seas-mars-analogue-mission-hawaii-mauna-loa",
+            "https://www.theverge.com/2017/9/24/16356876/nasa-hi-seas-mars-analogue-mission-hawaii-mauna-loa"
+        )
     }
 
     @Test
     fun testTruncatedPathWithMultipleSegmentsAndFragment() {
         assertTruncatedPath(
-                "/@bfrancis/the-story-of-firefox-os-cb5bf796e8fb",
-                "https://medium.com/@bfrancis/the-story-of-firefox-os-cb5bf796e8fb#931a")
+            "/@bfrancis/the-story-of-firefox-os-cb5bf796e8fb",
+            "https://medium.com/@bfrancis/the-story-of-firefox-os-cb5bf796e8fb#931a"
+        )
     }
 
     private fun assertTruncatedHost(expectedTruncatedPath: String, url: String) {
-        assertEquals("truncatedHost($url)",
-                expectedTruncatedPath,
-                Uri.parse(url).truncatedHost())
+        assertEquals(
+            "truncatedHost($url)",
+            expectedTruncatedPath,
+            Uri.parse(url).truncatedHost()
+        )
     }
 
     private fun assertTruncatedPath(expectedTruncatedPath: String, url: String) {
-        assertEquals("truncatedPath($url)",
-                expectedTruncatedPath,
-                Uri.parse(url).truncatedPath())
+        assertEquals(
+            "truncatedPath($url)",
+            expectedTruncatedPath,
+            Uri.parse(url).truncatedPath()
+        )
     }
 }
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/settings/SearchEngineValidationTest.kt b/focus-android/app/src/test/java/org/mozilla/focus/settings/SearchEngineValidationTest.kt
index 3fa93e873f19..07c032b5bd00 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/settings/SearchEngineValidationTest.kt
+++ b/focus-android/app/src/test/java/org/mozilla/focus/settings/SearchEngineValidationTest.kt
@@ -78,9 +78,9 @@ private fun withMockWebServer(vararg responses: MockResponse, block: (MockWebSer
 private fun MockWebServer.rootUrl(): String = url("/").toString()
 
 private fun responseWithStatus(status: Int) =
-        MockResponse()
-                .setResponseCode(status)
-                .setBody("")
+    MockResponse()
+        .setResponseCode(status)
+        .setBody("")
 
 private class OkHttpWrapper : Client() {
     private val actual = OkHttpClient()
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/telemetry/HistogramTest.kt b/focus-android/app/src/test/java/org/mozilla/focus/telemetry/HistogramTest.kt
index 02f4e1e8253e..0def71b9f462 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/telemetry/HistogramTest.kt
+++ b/focus-android/app/src/test/java/org/mozilla/focus/telemetry/HistogramTest.kt
@@ -4,11 +4,11 @@
 
 package org.mozilla.focus.telemetry
 
+import org.junit.Assert.assertEquals
+import org.junit.Assert.assertTrue
 import org.junit.Test
 import org.junit.runner.RunWith
 import org.robolectric.RobolectricTestRunner
-import org.junit.Assert.assertEquals
-import org.junit.Assert.assertTrue
 
 @RunWith(RobolectricTestRunner::class)
 class HistogramTest {
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/utils/SupportUtilsTest.kt b/focus-android/app/src/test/java/org/mozilla/focus/utils/SupportUtilsTest.kt
index a7555b8a4c5d..6a872ee4f302 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/utils/SupportUtilsTest.kt
+++ b/focus-android/app/src/test/java/org/mozilla/focus/utils/SupportUtilsTest.kt
@@ -63,4 +63,4 @@ class SupportUtilsTest {
             SupportUtils.manifestoURL
         )
     }
-}
\ No newline at end of file
+}
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/whatsnew/WhatsNewTest.kt b/focus-android/app/src/test/java/org/mozilla/focus/whatsnew/WhatsNewTest.kt
index ee9de39efa52..b300396b3b2f 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/whatsnew/WhatsNewTest.kt
+++ b/focus-android/app/src/test/java/org/mozilla/focus/whatsnew/WhatsNewTest.kt
@@ -20,9 +20,9 @@ class WhatsNewTest {
         // Reset all saved and cached values before running a test
 
         PreferenceManager.getDefaultSharedPreferences(ApplicationProvider.getApplicationContext())
-                .edit()
-                .clear()
-                .apply()
+            .edit()
+            .clear()
+            .apply()
 
         WhatsNew.wasUpdatedRecently = null
     }
@@ -78,9 +78,9 @@ class WhatsNewTest {
         assertFalse(WhatsNew.shouldHighlightWhatsNew(ApplicationProvider.getApplicationContext()))
 
         PreferenceManager.getDefaultSharedPreferences(ApplicationProvider.getApplicationContext())
-                .edit()
-                .putString(WhatsNewStorage.PREFERENCE_KEY_APP_NAME, "2.0")
-                .apply()
+            .edit()
+            .putString(WhatsNewStorage.PREFERENCE_KEY_APP_NAME, "2.0")
+            .apply()
 
         for (i in 1..3) {
             // Reset cached value
@@ -98,9 +98,9 @@ class WhatsNewTest {
         assertFalse(WhatsNew.shouldHighlightWhatsNew(ApplicationProvider.getApplicationContext()))
 
         PreferenceManager.getDefaultSharedPreferences(ApplicationProvider.getApplicationContext())
-                .edit()
-                .putString(WhatsNewStorage.PREFERENCE_KEY_APP_NAME, "2.0")
-                .apply()
+            .edit()
+            .putString(WhatsNewStorage.PREFERENCE_KEY_APP_NAME, "2.0")
+            .apply()
 
         // Reset cached value
         WhatsNew.wasUpdatedRecently = null
