diff --git a/focus-android/app/src/test/java/org/mozilla/focus/web/CustomTabConfigTest.java b/focus-android/app/src/test/java/org/mozilla/focus/web/CustomTabConfigTest.java
index 323338008f30..df32e29e22f4 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/web/CustomTabConfigTest.java
+++ b/focus-android/app/src/test/java/org/mozilla/focus/web/CustomTabConfigTest.java
@@ -1,5 +1,6 @@
 package org.mozilla.focus.web;
 
+import android.app.PendingIntent;
 import android.content.Intent;
 import android.os.Bundle;
 import android.os.Parcel;
@@ -10,6 +11,7 @@
 import org.junit.runner.RunWith;
 import org.mozilla.focus.utils.SafeIntent;
 import org.robolectric.RobolectricTestRunner;
+import org.robolectric.RuntimeEnvironment;
 
 import java.lang.reflect.Field;
 
@@ -23,10 +25,12 @@ public class CustomTabConfigTest {
      * work as expected.
      */
     private static class UnparcelableParcel implements Parcelable {
-        UnparcelableParcel() {}
+        // Called when constructing for test purposes
+        UnparcelableParcel() {
+        }
 
+        // Used only when unparceling:
         protected UnparcelableParcel(Parcel in) {
-            // Used when unparceling:
             throw new RuntimeException("Haha");
         }
 
@@ -43,7 +47,8 @@ public UnparcelableParcel[] newArray(int size) {
         };
 
         @Override
-        public void writeToParcel(Parcel dest, int flags) {}
+        public void writeToParcel(Parcel dest, int flags) {
+        }
 
         @Override
         public int describeContents() {
@@ -59,6 +64,28 @@ public void isCustomTabIntent() throws Exception {
         assertTrue(CustomTabConfig.isCustomTabIntent(new SafeIntent(customTabsIntent.intent)));
     }
 
+    @Test
+    public void menuTest() throws Exception {
+        final CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();
+        final PendingIntent pendingIntent = PendingIntent.getActivity(null, 0, null, 0);
+
+        builder.addMenuItem("menuitem1", pendingIntent);
+        builder.addMenuItem("menuitem2", pendingIntent);
+        // We can only handle menu items with an actual PendingIntent, other ones should be ignored:
+        builder.addMenuItem("menuitemIGNORED", null);
+
+        final CustomTabsIntent customTabsIntent = builder.build();
+
+        final CustomTabConfig config = CustomTabConfig.parseCustomTabIntent(RuntimeEnvironment.application, new SafeIntent(customTabsIntent.intent));
+
+        assertEquals("Menu should contain 2 items", 2, config.menuItems.size());
+        final String s = config.menuItems.get(0).name;
+        assertEquals("Unexpected menu item",
+                "menuitem1", config.menuItems.get(0).name);
+        assertEquals("Unexpected menu item",
+                "menuitem2", config.menuItems.get(1).name);
+    }
+
     @Test
     public void malformedExtras() throws Exception {
         final CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();
@@ -67,7 +94,6 @@ public void malformedExtras() throws Exception {
 
         customTabsIntent.intent.putExtra("garbage", new UnparcelableParcel());
 
-        // Warning: yuck
         // We write the extras into a parcel so that we can check what happens when unparcelling fails
         final Parcel parcel = Parcel.obtain();
         final Bundle extras = customTabsIntent.intent.getExtras();
@@ -85,17 +111,16 @@ public void malformedExtras() throws Exception {
         extrasField.set(customTabsIntent.intent, injectedBundle);
         extrasField.setAccessible(false);
 
-        // And we can't access any extra now because unparcelling fails:
+        // And we can't access any extras now because unparcelling fails:
         assertFalse(CustomTabConfig.isCustomTabIntent(new SafeIntent(customTabsIntent.intent)));
 
         // Ensure we don't crash regardless
-        final CustomTabConfig c = CustomTabConfig.parseCustomTabIntent(new SafeIntent(customTabsIntent.intent));
+        final CustomTabConfig c = CustomTabConfig.parseCustomTabIntent(RuntimeEnvironment.application, new SafeIntent(customTabsIntent.intent));
 
         // And we don't have any data:
         assertNull(c.actionButtonConfig);
     }
 
-
     @Test
     public void malformedActionButtonConfig() throws Exception {
         final CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();
@@ -109,7 +134,7 @@ public void malformedActionButtonConfig() throws Exception {
         assertTrue(CustomTabConfig.isCustomTabIntent(new SafeIntent(customTabsIntent.intent)));
 
         // And we still don't crash
-        final CustomTabConfig c = CustomTabConfig.parseCustomTabIntent(new SafeIntent(customTabsIntent.intent));
+        final CustomTabConfig c = CustomTabConfig.parseCustomTabIntent(RuntimeEnvironment.application, new SafeIntent(customTabsIntent.intent));
 
         // But we weren't able to read the action button data because of the unparcelable data
         assertNull(c.actionButtonConfig);
