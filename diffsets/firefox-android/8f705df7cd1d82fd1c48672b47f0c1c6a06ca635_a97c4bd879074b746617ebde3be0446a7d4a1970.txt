diff --git a/focus-android/app/src/main/java/org/mozilla/focus/Components.kt b/focus-android/app/src/main/java/org/mozilla/focus/Components.kt
index e430e69c85c9..c9922cf29794 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/Components.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/Components.kt
@@ -133,7 +133,7 @@ class Components(
     val store by lazy {
         val onboardingFeature = FocusNimbus.features.onboarding
         val cfrMiddleware = if (onboardingFeature.value(context = context).isCfrEnabled) {
-            listOf(CfrMiddleware(context.components))
+            listOf(CfrMiddleware(context))
         } else {
             listOf()
         }
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/cfr/CfrMiddleware.kt b/focus-android/app/src/main/java/org/mozilla/focus/cfr/CfrMiddleware.kt
index 9d3c64117613..2cd2a37650ce 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/cfr/CfrMiddleware.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/cfr/CfrMiddleware.kt
@@ -3,6 +3,7 @@
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 package org.mozilla.focus.cfr
 
+import android.content.Context
 import androidx.core.net.toUri
 import mozilla.components.browser.state.action.BrowserAction
 import mozilla.components.browser.state.action.ContentAction
@@ -11,7 +12,7 @@ import mozilla.components.browser.state.selector.findTabOrCustomTabOrSelectedTab
 import mozilla.components.browser.state.state.BrowserState
 import mozilla.components.lib.state.Middleware
 import mozilla.components.lib.state.MiddlewareContext
-import org.mozilla.focus.Components
+import org.mozilla.focus.ext.components
 import org.mozilla.focus.ext.truncatedHost
 import org.mozilla.focus.nimbus.FocusNimbus
 import org.mozilla.focus.nimbus.Onboarding
@@ -21,16 +22,17 @@ import org.mozilla.focus.utils.ERASE_CFR_LIMIT
 /**
  * Middleware used to intercept browser store actions in order to decide when should we display a specific CFR
  */
-class CfrMiddleware(private val components: Components) : Middleware<BrowserState, BrowserAction> {
+class CfrMiddleware(private val appContext: Context) : Middleware<BrowserState, BrowserAction> {
     private val onboardingFeature = FocusNimbus.features.onboarding
     private lateinit var onboardingConfig: Onboarding
+    private val components = appContext.components
 
     override fun invoke(
         context: MiddlewareContext<BrowserState, BrowserAction>,
         next: (BrowserAction) -> Unit,
         action: BrowserAction
     ) {
-        onboardingConfig = onboardingFeature.value()
+        onboardingConfig = onboardingFeature.value(context = appContext)
         onboardingFeature.recordExposure()
         next(action)
 
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
index 795cbded810f..95b5c18e4117 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/fragment/BrowserFragment.kt
@@ -749,7 +749,7 @@ class BrowserFragment :
         TelemetryWrapper.openFullBrowser()
 
         val multiTabsFeature = FocusNimbus.features.tabs
-        val multiTabsConfig = multiTabsFeature.value()
+        val multiTabsConfig = multiTabsFeature.value(context = requireContext())
         multiTabsFeature.recordExposure()
         if (multiTabsConfig.isMultiTab) {
             requireComponents.customTabsUseCases.migrate(tab.id)
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/navigation/MainActivityNavigation.kt b/focus-android/app/src/main/java/org/mozilla/focus/navigation/MainActivityNavigation.kt
index 75783bed3937..8c521d683be2 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/navigation/MainActivityNavigation.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/navigation/MainActivityNavigation.kt
@@ -138,7 +138,7 @@ class MainActivityNavigation(
      */
     fun firstRun() {
         val onboardingFeature = FocusNimbus.features.onboarding
-        val onboardingConfig = onboardingFeature.value()
+        val onboardingConfig = onboardingFeature.value(activity)
         val onboardingFragment = if (onboardingConfig.isEnabled) {
             OnboardingFragment.create()
         } else {
diff --git a/focus-android/app/src/main/java/org/mozilla/focus/tabs/MergeTabsMiddleware.kt b/focus-android/app/src/main/java/org/mozilla/focus/tabs/MergeTabsMiddleware.kt
index cebc5dc96cbb..0eba32955635 100644
--- a/focus-android/app/src/main/java/org/mozilla/focus/tabs/MergeTabsMiddleware.kt
+++ b/focus-android/app/src/main/java/org/mozilla/focus/tabs/MergeTabsMiddleware.kt
@@ -22,7 +22,7 @@ import org.mozilla.focus.nimbus.FocusNimbus
  * a single tab with a merged state.
  */
 class MergeTabsMiddleware(
-    private val context: Context
+    private val appContext: Context
 ) : Middleware<BrowserState, BrowserAction> {
     override fun invoke(
         context: MiddlewareContext<BrowserState, BrowserAction>,
@@ -30,7 +30,7 @@ class MergeTabsMiddleware(
         action: BrowserAction
     ) {
         val multiTabsFeature = FocusNimbus.features.tabs
-        if (multiTabsFeature.value().isMultiTab || action !is TabListAction.AddTabAction) {
+        if (multiTabsFeature.value(appContext).isMultiTab || action !is TabListAction.AddTabAction) {
             // If the experiment for tabs is enabled then we can just let the reducer create a
             // new tab.
             next(action)
diff --git a/focus-android/app/src/test/java/org/mozilla/focus/cfr/CfrMiddlewareTest.kt b/focus-android/app/src/test/java/org/mozilla/focus/cfr/CfrMiddlewareTest.kt
index 2e9f8a0f2a0b..186cd9b0b90d 100644
--- a/focus-android/app/src/test/java/org/mozilla/focus/cfr/CfrMiddlewareTest.kt
+++ b/focus-android/app/src/test/java/org/mozilla/focus/cfr/CfrMiddlewareTest.kt
@@ -5,7 +5,6 @@ package org.mozilla.focus.cfr
 
 import mozilla.components.browser.state.action.ContentAction
 import mozilla.components.browser.state.action.TabListAction
-import mozilla.components.browser.state.state.BrowserState
 import mozilla.components.browser.state.state.SecurityInfoState
 import mozilla.components.browser.state.state.TabSessionState
 import mozilla.components.browser.state.state.createTab
@@ -19,49 +18,23 @@ import org.junit.Assert.assertTrue
 import org.junit.Before
 import org.junit.Test
 import org.junit.runner.RunWith
-import org.mockito.Mock
-import org.mockito.Mockito.doReturn
 import org.mockito.MockitoAnnotations
-import org.mozilla.focus.Components
+import org.mozilla.focus.ext.components
 import org.mozilla.focus.nimbus.FocusNimbus
 import org.mozilla.focus.nimbus.Onboarding
-import org.mozilla.focus.state.AppState
 import org.mozilla.focus.state.AppStore
-import org.mozilla.focus.state.Screen
-import org.mozilla.focus.utils.Settings
 import org.robolectric.RobolectricTestRunner
 
 @RunWith(RobolectricTestRunner::class)
 class CfrMiddlewareTest {
-    private lateinit var cfrMiddleware: CfrMiddleware
-    private lateinit var browserStore: BrowserStore
-    private lateinit var appStore: AppStore
-    private lateinit var settings: Settings
     private lateinit var onboardingExperiment: Onboarding
-
-    @Mock
-    private lateinit var components: Components
+    private val browserStore: BrowserStore = testContext.components.store
+    private val appStore: AppStore = testContext.components.appStore
 
     @Before
     fun setUp() {
         MockitoAnnotations.openMocks(this)
-
-        cfrMiddleware = CfrMiddleware(components)
         onboardingExperiment = FocusNimbus.features.onboarding.value(testContext)
-        browserStore = BrowserStore(
-            initialState = BrowserState(),
-            middleware = listOf(cfrMiddleware)
-        )
-        appStore = AppStore(
-            AppState(
-                screen = Screen.Home,
-                showTrackingProtectionCfr = false,
-            )
-        )
-        settings = Settings(testContext)
-
-        doReturn(appStore).`when`(components).appStore
-        doReturn(settings).`when`(components).settings
     }
 
     @Test
@@ -69,7 +42,7 @@ class CfrMiddlewareTest {
         if (onboardingExperiment.isCfrEnabled) {
             browserStore.dispatch(TabListAction.AddTabAction(createTab())).joinBlocking()
 
-            assertEquals(1, components.settings.numberOfTabsOpened)
+            assertEquals(1, testContext.components.settings.numberOfTabsOpened)
         }
     }
 
@@ -151,7 +124,10 @@ class CfrMiddlewareTest {
     ): TabSessionState {
         val tab = createTab(tabUrl, id = tabId.toString())
         return tab.copy(
-            content = tab.content.copy(securityInfo = SecurityInfoState(secure = isSecure))
+            content = tab.content.copy(
+                private = true,
+                securityInfo = SecurityInfoState(secure = isSecure)
+            )
         )
     }
 }
