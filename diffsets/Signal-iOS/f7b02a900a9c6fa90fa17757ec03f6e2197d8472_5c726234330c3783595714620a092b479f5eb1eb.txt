diff --git a/Signal.xcodeproj/project.pbxproj b/Signal.xcodeproj/project.pbxproj
index f7f0b202c86..c8092285959 100644
--- a/Signal.xcodeproj/project.pbxproj
+++ b/Signal.xcodeproj/project.pbxproj
@@ -643,6 +643,9 @@
 		88A505FA23DBA1360005C012 /* IntroducingPINs.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A505F923DBA1360005C012 /* IntroducingPINs.swift */; };
 		88A505FC23DBAE4F0005C012 /* Reactions.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A505FB23DBAE4F0005C012 /* Reactions.swift */; };
 		88A595E323AB48E80029E835 /* NotificationServiceExtensionContext.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A595E223AB48E80029E835 /* NotificationServiceExtensionContext.swift */; };
+		88A9419524099F7E000E9700 /* attachment_dark.json in Resources */ = {isa = PBXBuildFile; fileRef = 88A9419424099F7E000E9700 /* attachment_dark.json */; };
+		88A9419724099F85000E9700 /* attachment_light.json in Resources */ = {isa = PBXBuildFile; fileRef = 88A9419624099F85000E9700 /* attachment_light.json */; };
+		88A941992409A391000E9700 /* LottieToggleButton.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A941982409A391000E9700 /* LottieToggleButton.swift */; };
 		88A9729222FA5D4B004B4FBF /* AttachmentFormatPickerView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A9729122FA5D4B004B4FBF /* AttachmentFormatPickerView.swift */; };
 		88A9729422FB4D02004B4FBF /* LocationPicker.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A9729322FB4D02004B4FBF /* LocationPicker.swift */; };
 		88B688B0238F0D1000286F82 /* ReactionsDetailSheet.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88B688AF238F0D1000286F82 /* ReactionsDetailSheet.swift */; };
@@ -1561,6 +1564,9 @@
 		88A505FB23DBAE4F0005C012 /* Reactions.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Reactions.swift; sourceTree = "<group>"; };
 		88A595E223AB48E80029E835 /* NotificationServiceExtensionContext.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = NotificationServiceExtensionContext.swift; sourceTree = "<group>"; };
 		88A695BC232C18DF002F7B9B /* AudioWaveformProgressView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AudioWaveformProgressView.swift; sourceTree = "<group>"; };
+		88A9419424099F7E000E9700 /* attachment_dark.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = attachment_dark.json; sourceTree = "<group>"; };
+		88A9419624099F85000E9700 /* attachment_light.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = attachment_light.json; sourceTree = "<group>"; };
+		88A941982409A391000E9700 /* LottieToggleButton.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = LottieToggleButton.swift; sourceTree = "<group>"; };
 		88A9729122FA5D4B004B4FBF /* AttachmentFormatPickerView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AttachmentFormatPickerView.swift; sourceTree = "<group>"; };
 		88A9729322FB4D02004B4FBF /* LocationPicker.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = LocationPicker.swift; sourceTree = "<group>"; };
 		88B688AF238F0D1000286F82 /* ReactionsDetailSheet.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ReactionsDetailSheet.swift; sourceTree = "<group>"; };
@@ -2887,6 +2893,7 @@
 				45A663C41F92EC760027B59E /* GroupTableViewCell.swift */,
 				886F08A6234958970085C27F /* InputAccessoryViewPlaceholder.swift */,
 				34129B8521EF8779005457A8 /* LinkPreviewView.swift */,
+				88A941982409A391000E9700 /* LottieToggleButton.swift */,
 				45E5A6981F61E6DD001E4A8A /* MarqueeLabel.swift */,
 				34386A53207D271C009F5D9C /* NeverClearView.swift */,
 				34F308A01ECB469700BB7697 /* OWSBezierPathView.h */,
@@ -3000,9 +3007,19 @@
 			path = "Upgrade Views";
 			sourceTree = "<group>";
 		};
+		88A9419324099F6E000E9700 /* Attachment Keyboard */ = {
+			isa = PBXGroup;
+			children = (
+				88A9419424099F7E000E9700 /* attachment_dark.json */,
+				88A9419624099F85000E9700 /* attachment_light.json */,
+			);
+			path = "Attachment Keyboard";
+			sourceTree = "<group>";
+		};
 		88BFD4712335C2A4001797D7 /* Lottie */ = {
 			isa = PBXGroup;
 			children = (
+				88A9419324099F6E000E9700 /* Attachment Keyboard */,
 				8889006223DBB38700F40186 /* Reactions Megaphone */,
 				4C9D34942369EFC7006A4307 /* launchApp.json */,
 				4C9D34842369EA3E006A4307 /* NotificationPermission */,
@@ -3744,11 +3761,13 @@
 				8837F73D23D8DE8500772A32 /* pinCreationSuccess.json in Resources */,
 				8889006E23DBB39B00F40186 /* reactionMegaphone_0.png in Resources */,
 				45B74A7B2044AAB600CD42F8 /* chord.aifc in Resources */,
+				88A9419724099F85000E9700 /* attachment_light.json in Resources */,
 				8889007223DBB39B00F40186 /* reactionMegaphone_4.png in Resources */,
 				45B74A812044AAB600CD42F8 /* chord-quiet.aifc in Resources */,
 				4C9D34952369EFC7006A4307 /* launchApp.json in Resources */,
 				8889006D23DBB39B00F40186 /* reactionMegaphone_1.png in Resources */,
 				45B74A832044AAB600CD42F8 /* circles.aifc in Resources */,
+				88A9419524099F7E000E9700 /* attachment_dark.json in Resources */,
 				45B74A892044AAB600CD42F8 /* circles-quiet.aifc in Resources */,
 				4503F1BF20470A5B00CEE724 /* classic.aifc in Resources */,
 				4503F1BE20470A5B00CEE724 /* classic-quiet.aifc in Resources */,
@@ -4558,6 +4577,7 @@
 				4542DF54208D40AC007B4E76 /* LoadingViewController.swift in Sources */,
 				34D5CCA91EAE3D30005515DB /* AvatarViewHelper.m in Sources */,
 				34D1F0B71F87F8850066283D /* OWSGenericAttachmentView.m in Sources */,
+				88A941992409A391000E9700 /* LottieToggleButton.swift in Sources */,
 				3448E15C22133274004B052E /* OnboardingPermissionsViewController.swift in Sources */,
 				8837F74123DA0B0F00772A32 /* MegaphoneView.swift in Sources */,
 				34D920E720E179C200D51158 /* OWSMessageFooterView.m in Sources */,
diff --git a/Signal/Images.xcassets/x-box-filled-28-dark.imageset/Contents.json b/Signal/Images.xcassets/x-box-filled-28-dark.imageset/Contents.json
deleted file mode 100644
index 5a436a3b078..00000000000
--- a/Signal/Images.xcassets/x-box-filled-28-dark.imageset/Contents.json
+++ /dev/null
@@ -1,23 +0,0 @@
-{
-  "images" : [
-    {
-      "idiom" : "universal",
-      "filename" : "x-box-filled-28.png",
-      "scale" : "1x"
-    },
-    {
-      "idiom" : "universal",
-      "filename" : "x-box-filled-28@2x.png",
-      "scale" : "2x"
-    },
-    {
-      "idiom" : "universal",
-      "filename" : "x-box-filled-28@3x.png",
-      "scale" : "3x"
-    }
-  ],
-  "info" : {
-    "version" : 1,
-    "author" : "xcode"
-  }
-}
\ No newline at end of file
diff --git a/Signal/Images.xcassets/x-box-filled-28-light.imageset/Contents.json b/Signal/Images.xcassets/x-box-filled-28-light.imageset/Contents.json
deleted file mode 100644
index e01e4281353..00000000000
--- a/Signal/Images.xcassets/x-box-filled-28-light.imageset/Contents.json
+++ /dev/null
@@ -1,23 +0,0 @@
-{
-  "images" : [
-    {
-      "idiom" : "universal",
-      "filename" : "x-box-filled-28-light.png",
-      "scale" : "1x"
-    },
-    {
-      "idiom" : "universal",
-      "filename" : "x-box-filled-28-light@2x.png",
-      "scale" : "2x"
-    },
-    {
-      "idiom" : "universal",
-      "filename" : "x-box-filled-28-light@3x.png",
-      "scale" : "3x"
-    }
-  ],
-  "info" : {
-    "version" : 1,
-    "author" : "xcode"
-  }
-}
\ No newline at end of file
diff --git a/Signal/Lottie/Attachment Keyboard/attachment_dark.json b/Signal/Lottie/Attachment Keyboard/attachment_dark.json
new file mode 100644
index 00000000000..178dae3d4fb
--- /dev/null
+++ b/Signal/Lottie/Attachment Keyboard/attachment_dark.json	
@@ -0,0 +1 @@
+{"v":"5.5.2","fr":60,"ip":0,"op":16,"w":280,"h":280,"nm":"Dark","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"X/attachment_keyboard_lottie Outlines","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[45]},{"t":8,"s":[90]}],"ix":10},"p":{"a":0,"k":[140,140,0],"ix":2},"a":{"a":0,"k":[140,140,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[68.943,-58.337],[58.336,-68.943],[0,-10.608],[-58.337,-68.943],[-68.943,-58.337],[-10.607,-0.001],[-68.943,58.335],[-58.337,68.943],[0,10.607],[58.336,68.943],[68.943,58.335],[10.607,-0.001]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.870588243008,0.870588243008,0.870588243008,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[140,140.001],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":16,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"BG/attachment_keyboard_lottie Outlines","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":3,"s":[0]},{"t":10,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[140,140,0],"ix":2},"a":{"a":0,"k":[140,140,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[33.137,0],[0,0],[0,33.137],[0,0],[-33.137,0],[0,0],[0,-33.137],[0,0]],"o":[[0,0],[-33.137,0],[0,0],[0,-33.137],[0,0],[33.137,0],[0,0],[0,33.137]],"v":[[80,140],[-80,140],[-140,80],[-140,-80],[-80,-140],[80,-140],[140,-80],[140,80]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.231000006199,0.231000006199,0.231000006199,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[140,140],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":16,"st":0,"bm":0}],"markers":[]}
\ No newline at end of file
diff --git a/Signal/Lottie/Attachment Keyboard/attachment_light.json b/Signal/Lottie/Attachment Keyboard/attachment_light.json
new file mode 100644
index 00000000000..12c8ef315b0
--- /dev/null
+++ b/Signal/Lottie/Attachment Keyboard/attachment_light.json	
@@ -0,0 +1 @@
+{"v":"5.5.2","fr":60,"ip":0,"op":16,"w":280,"h":280,"nm":"Comp 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"X/attachment_keyboard_lottie Outlines","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[45]},{"t":8,"s":[90]}],"ix":10},"p":{"a":0,"k":[140,140,0],"ix":2},"a":{"a":0,"k":[140,140,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[68.943,-58.337],[58.336,-68.943],[0,-10.608],[-58.337,-68.943],[-68.943,-58.337],[-10.607,-0.001],[-68.943,58.335],[-58.337,68.943],[0,10.607],[58.336,68.943],[68.943,58.335],[10.607,-0.001]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":4,"s":[0.23137255013,0.23137255013,0.23137255013,1]},{"t":7,"s":[1,1,1,1]}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[140,140.001],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":16,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"BG/attachment_keyboard_lottie Outlines","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":3,"s":[0]},{"t":10,"s":[100]}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[140,140,0],"ix":2},"a":{"a":0,"k":[140,140,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[33.137,0],[0,0],[0,33.137],[0,0],[-33.137,0],[0,0],[0,-33.137],[0,0]],"o":[[0,0],[-33.137,0],[0,0],[0,-33.137],[0,0],[33.137,0],[0,0],[0,33.137]],"v":[[80,140],[-80,140],[-140,80],[-140,-80],[-80,-140],[80,-140],[140,-80],[140,80]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.231000010173,0.231000010173,0.231000010173,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[140,140],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":16,"st":0,"bm":0}],"markers":[]}
\ No newline at end of file
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationInputToolbar.m b/Signal/src/ViewControllers/ConversationView/ConversationInputToolbar.m
index e92dba988ab..e7f192b2275 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationInputToolbar.m
+++ b/Signal/src/ViewControllers/ConversationView/ConversationInputToolbar.m
@@ -62,7 +62,7 @@ @interface ConversationInputToolbar () <ConversationTextViewToolbarDelegate,
 
 @property (nonatomic, readonly) ConversationInputTextView *inputTextView;
 @property (nonatomic, readonly) UIButton *cameraButton;
-@property (nonatomic, readonly) UIButton *attachmentButton;
+@property (nonatomic, readonly) LottieToggleButton *attachmentButton;
 @property (nonatomic, readonly) UIButton *sendButton;
 @property (nonatomic, readonly) UIButton *voiceMemoButton;
 @property (nonatomic, readonly) UIButton *stickerButton;
@@ -217,7 +217,7 @@ - (void)createContents
     [self.cameraButton autoSetDimensionsToSize:CGSizeMake(40, kMinToolbarItemHeight)];
     SET_SUBVIEW_ACCESSIBILITY_IDENTIFIER(self, _cameraButton);
 
-    _attachmentButton = [[UIButton alloc] init];
+    _attachmentButton = [[LottieToggleButton alloc] init];
     self.attachmentButton.accessibilityLabel
         = NSLocalizedString(@"ATTACHMENT_LABEL", @"Accessibility label for attaching photos");
     self.attachmentButton.accessibilityHint = NSLocalizedString(
@@ -225,9 +225,8 @@ - (void)createContents
     [self.attachmentButton addTarget:self
                               action:@selector(attachmentButtonPressed)
                     forControlEvents:UIControlEventTouchUpInside];
-    [self.attachmentButton setTemplateImageName:@"plus-24" tintColor:Theme.primaryIconColor];
-    NSString *selectedImageName = [Theme iconName:ThemeIconAttachmentButtonSelected];
-    [self.attachmentButton setImage:[UIImage imageNamed:selectedImageName] forState:UIControlStateSelected];
+    self.attachmentButton.animationName = Theme.isDarkThemeEnabled ? @"attachment_dark" : @"attachment_light";
+    self.attachmentButton.animationSize = CGSizeMake(28, 28);
     [self.attachmentButton autoSetDimensionsToSize:CGSizeMake(55, kMinToolbarItemHeight)];
     SET_SUBVIEW_ACCESSIBILITY_IDENTIFIER(self, _attachmentButton);
 
@@ -576,7 +575,7 @@ - (void)showStickerTooltipIfNecessary
                                           stickerPack:stickerPack
                                        wasTappedBlock:^{
                                            [weakSelf removeStickerTooltip];
-                                           [weakSelf toggleKeyboardType:KeyboardType_Sticker];
+                                           [weakSelf toggleKeyboardType:KeyboardType_Sticker animated:YES];
                                        }];
     self.stickerTooltip = tooltip;
 
@@ -653,7 +652,7 @@ - (void)ensureButtonVisibilityWithIsAnimated:(BOOL)isAnimated doLayout:(BOOL)doL
                                                                     : Theme.primaryIconColor);
         }
 
-        self.attachmentButton.selected = self.desiredKeyboardType == KeyboardType_Attachment;
+        [self.attachmentButton setSelected:self.desiredKeyboardType == KeyboardType_Attachment animated:isAnimated];
 
         [self updateSuggestedStickers];
 
@@ -1127,7 +1126,7 @@ - (void)attachmentButtonPressed
 {
     OWSLogVerbose(@"");
 
-    [self toggleKeyboardType:KeyboardType_Attachment];
+    [self toggleKeyboardType:KeyboardType_Attachment animated:YES];
 }
 
 - (void)stickerButtonPressed
@@ -1145,17 +1144,17 @@ - (void)stickerButtonPressed
         return;
     }
 
-    [self toggleKeyboardType:KeyboardType_Sticker];
+    [self toggleKeyboardType:KeyboardType_Sticker animated:YES];
 }
 
 #pragma mark - Keyboards
 
-- (void)toggleKeyboardType:(KeyboardType)keyboardType
+- (void)toggleKeyboardType:(KeyboardType)keyboardType animated:(BOOL)animated
 {
     OWSAssertDebug(self.inputToolbarDelegate);
 
     if (self.desiredKeyboardType == keyboardType) {
-        self.desiredKeyboardType = KeyboardType_System;
+        [self setDesiredKeyboardType:KeyboardType_System animated:animated];
     } else {
         // For switching to anything other than the system keyboard,
         // make sure this conversation isn't blocked before presenting it.
@@ -1163,19 +1162,24 @@ - (void)toggleKeyboardType:(KeyboardType)keyboardType
             __weak ConversationInputToolbar *weakSelf = self;
             [self.inputToolbarDelegate showUnblockConversationUI:^(BOOL isBlocked) {
                 if (!isBlocked) {
-                    [weakSelf toggleKeyboardType:keyboardType];
+                    [weakSelf toggleKeyboardType:keyboardType animated:animated];
                 }
             }];
             return;
         }
 
-        self.desiredKeyboardType = keyboardType;
+        [self setDesiredKeyboardType:keyboardType animated:animated];
     }
 
     [self beginEditingMessage];
 }
 
 - (void)setDesiredKeyboardType:(KeyboardType)desiredKeyboardType
+{
+    [self setDesiredKeyboardType:desiredKeyboardType animated:NO];
+}
+
+- (void)setDesiredKeyboardType:(KeyboardType)desiredKeyboardType animated:(BOOL)animated
 {
     if (_desiredKeyboardType == desiredKeyboardType) {
         return;
@@ -1183,7 +1187,7 @@ - (void)setDesiredKeyboardType:(KeyboardType)desiredKeyboardType
 
     _desiredKeyboardType = desiredKeyboardType;
 
-    [self ensureButtonVisibilityWithIsAnimated:NO doLayout:YES];
+    [self ensureButtonVisibilityWithIsAnimated:animated doLayout:YES];
 
     if (self.isInputViewFirstResponder) {
         // If any keyboard is presented, make sure the correct
@@ -1219,7 +1223,7 @@ - (void)showStickerKeyboard
     OWSAssertIsOnMainThread();
 
     if (self.desiredKeyboardType != KeyboardType_Sticker) {
-        [self toggleKeyboardType:KeyboardType_Sticker];
+        [self toggleKeyboardType:KeyboardType_Sticker animated:NO];
     }
 }
 
@@ -1228,7 +1232,7 @@ - (void)showAttachmentKeyboard
     OWSAssertIsOnMainThread();
 
     if (self.desiredKeyboardType != KeyboardType_Attachment) {
-        [self toggleKeyboardType:KeyboardType_Attachment];
+        [self toggleKeyboardType:KeyboardType_Attachment animated:NO];
     }
 }
 
diff --git a/Signal/src/views/LottieToggleButton.swift b/Signal/src/views/LottieToggleButton.swift
new file mode 100644
index 00000000000..04a73a4ee44
--- /dev/null
+++ b/Signal/src/views/LottieToggleButton.swift
@@ -0,0 +1,71 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+import Lottie
+
+@objc
+class LottieToggleButton: UIButton {
+    @objc
+    var animationName: String? {
+        didSet {
+            updateAnimationView()
+        }
+    }
+
+    @objc
+    var animationSize: CGSize = .zero {
+        didSet {
+            updateAnimationView()
+        }
+    }
+
+    override var isSelected: Bool {
+        didSet {
+            animationView?.currentProgress = isSelected ? 1 : 0
+        }
+    }
+
+    @objc
+    func setSelected(_ isSelected: Bool, animated: Bool) {
+        AssertIsOnMainThread()
+        guard let animationView = animationView else { return owsFailDebug("missing animation view") }
+
+        if animated {
+            animationView.play(
+                fromProgress: animationView.currentProgress,
+                toProgress: isSelected ? 1 : 0,
+                loopMode: .playOnce
+            ) { [weak self] _ in
+                self?.isSelected = isSelected
+            }
+        } else {
+            self.isSelected = isSelected
+        }
+    }
+
+    private weak var animationView: AnimationView?
+    private func updateAnimationView() {
+        animationView?.removeFromSuperview()
+        guard let animationName = animationName else { return }
+
+        let animationView = AnimationView(name: animationName)
+        self.animationView = animationView
+
+        animationView.isUserInteractionEnabled = false
+        animationView.loopMode = .playOnce
+        animationView.backgroundBehavior = .forceFinish
+        animationView.currentProgress = isSelected ? 1 : 0
+        animationView.contentMode = .scaleAspectFit
+
+        addSubview(animationView)
+
+        if animationSize != .zero {
+            animationView.autoSetDimensions(to: animationSize)
+            animationView.autoCenterInSuperview()
+        } else {
+            animationView.autoPinEdgesToSuperviewEdges()
+        }
+    }
+}
diff --git a/SignalMessaging/appearance/Theme+OWS.swift b/SignalMessaging/appearance/Theme+OWS.swift
index b50e736db3c..3f18f3ea9bd 100644
--- a/SignalMessaging/appearance/Theme+OWS.swift
+++ b/SignalMessaging/appearance/Theme+OWS.swift
@@ -26,7 +26,6 @@ public enum ThemeIcon: UInt {
     case cameraButton
     case micButton
 
-    case attachmentButtonSelected
     case attachmentCamera
     case attachmentContact
     case attachmentFile
@@ -103,8 +102,6 @@ public extension Theme {
             return isDarkThemeEnabled ? "camera-solid-24" : "camera-outline-24"
         case .micButton:
             return isDarkThemeEnabled ? "mic-solid-24" : "mic-outline-24"
-        case .attachmentButtonSelected:
-            return isDarkThemeEnabled ? "x-box-filled-28-dark" : "x-box-filled-28-light"
         case .attachmentCamera:
             return isDarkThemeEnabled ? "camera-outline-32" : "camera-outline-32-with-background"
         case .attachmentContact:
