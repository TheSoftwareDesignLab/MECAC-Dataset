diff --git a/Signal.xcodeproj/project.pbxproj b/Signal.xcodeproj/project.pbxproj
index 3706f13f7e5..fd2428a9384 100644
--- a/Signal.xcodeproj/project.pbxproj
+++ b/Signal.xcodeproj/project.pbxproj
@@ -848,6 +848,7 @@
 		8852759727E1BA64003F2F9B /* Inter-Variable.ttf in Resources */ = {isa = PBXBuildFile; fileRef = 8852758B27E1B7F4003F2F9B /* Inter-Variable.ttf */; };
 		8852759927E1BA7D003F2F9B /* BarlowCondensed-Medium.ttf in Resources */ = {isa = PBXBuildFile; fileRef = 8852759827E1BA7D003F2F9B /* BarlowCondensed-Medium.ttf */; };
 		8852759A27E1BA93003F2F9B /* fontawesome-webfont.ttf in Resources */ = {isa = PBXBuildFile; fileRef = 34330A591E7875FB00DF2FB9 /* fontawesome-webfont.ttf */; };
+		885275C027E26775003F2F9B /* TextAttachmentView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 885275BF27E26775003F2F9B /* TextAttachmentView.swift */; };
 		88535064240829950011D318 /* DateHeaderInteraction.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88535063240829950011D318 /* DateHeaderInteraction.swift */; };
 		8855DF87238F1E0C0066D96F /* EmojiReactorsTableView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 8855DF86238F1E0C0066D96F /* EmojiReactorsTableView.swift */; };
 		8855DF89238F2E690066D96F /* EmojiCountsCollectionView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 8855DF88238F2E690066D96F /* EmojiCountsCollectionView.swift */; };
@@ -2071,6 +2072,7 @@
 		8852758E27E1B9C5003F2F9B /* Parisienne-Regular.ttf */ = {isa = PBXFileReference; lastKnownFileType = file; path = "Parisienne-Regular.ttf"; sourceTree = "<group>"; };
 		8852759427E1BA55003F2F9B /* EBGaramond-Regular.ttf */ = {isa = PBXFileReference; lastKnownFileType = file; path = "EBGaramond-Regular.ttf"; sourceTree = "<group>"; };
 		8852759827E1BA7D003F2F9B /* BarlowCondensed-Medium.ttf */ = {isa = PBXFileReference; lastKnownFileType = file; path = "BarlowCondensed-Medium.ttf"; sourceTree = "<group>"; };
+		885275BF27E26775003F2F9B /* TextAttachmentView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = TextAttachmentView.swift; sourceTree = "<group>"; };
 		88535063240829950011D318 /* DateHeaderInteraction.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = DateHeaderInteraction.swift; sourceTree = "<group>"; };
 		8855DF86238F1E0C0066D96F /* EmojiReactorsTableView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = EmojiReactorsTableView.swift; sourceTree = "<group>"; };
 		8855DF88238F2E690066D96F /* EmojiCountsCollectionView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = EmojiCountsCollectionView.swift; sourceTree = "<group>"; };
@@ -4043,6 +4045,7 @@
 				8852572827DD366D0032073C /* StoriesViewController.swift */,
 				884DB94427DD70F700C6A309 /* IncomingStoryViewModel.swift */,
 				884DB94627DD754700C6A309 /* StoryCell.swift */,
+				885275BF27E26775003F2F9B /* TextAttachmentView.swift */,
 				884DB94A27DE66E000C6A309 /* Context View */,
 			);
 			path = Stories;
@@ -6364,6 +6367,7 @@
 				342FFE6A271EF502000AC89F /* ConversationSearch.swift in Sources */,
 				340D900024FEE6A9007B5504 /* GroupInviteLinksUI.swift in Sources */,
 				34D2CCDA2062E7D000CB1A14 /* OWSScreenLockUI.m in Sources */,
+				885275C027E26775003F2F9B /* TextAttachmentView.swift in Sources */,
 				887B381325F0681400685845 /* AdvancedPrivacySettingsViewController.swift in Sources */,
 				887CD47B247304B600FDD265 /* DeviceTransferService+URL.swift in Sources */,
 				4CA46F4C219CCC630038ABDE /* CaptionView.swift in Sources */,
diff --git a/Signal/src/ViewControllers/HomeView/Stories/Context View/StoryHorizontalPageViewController.swift b/Signal/src/ViewControllers/HomeView/Stories/Context View/StoryHorizontalPageViewController.swift
index b7b3e30fca5..0da0794f7d1 100644
--- a/Signal/src/ViewControllers/HomeView/Stories/Context View/StoryHorizontalPageViewController.swift	
+++ b/Signal/src/ViewControllers/HomeView/Stories/Context View/StoryHorizontalPageViewController.swift	
@@ -132,6 +132,7 @@ class StoryHorizontalPageViewController: OWSViewController {
         let closeButton = OWSButton(imageName: "x-24", tintColor: .ows_white) { [weak self] in
             self?.dismiss(animated: true)
         }
+        closeButton.setShadow()
         closeButton.imageEdgeInsets = UIEdgeInsets(hMargin: 16, vMargin: 16)
         view.addSubview(closeButton)
         closeButton.autoSetDimensions(to: CGSize(square: 56))
@@ -327,13 +328,13 @@ class StoryHorizontalPageViewController: OWSViewController {
 extension StoryHorizontalPageViewController: UIGestureRecognizerDelegate {
     @objc
     func didTapLeft() {
-        guard currentItemViewController?.startAttachmentDownloadIfNecessary() != true else { return }
+        guard currentItemViewController?.willHandleTapGesture(leftTapGestureRecognizer) != true else { return }
         CurrentAppContext().isRTL ? transitionToPreviousItem() : transitionToNextItem()
     }
 
     @objc
     func didTapRight() {
-        guard currentItemViewController?.startAttachmentDownloadIfNecessary() != true else { return }
+        guard currentItemViewController?.willHandleTapGesture(rightTapGestureRecognizer) != true else { return }
         CurrentAppContext().isRTL ? transitionToNextItem() : transitionToPreviousItem()
     }
 
diff --git a/Signal/src/ViewControllers/HomeView/Stories/Context View/StoryItemViewController.swift b/Signal/src/ViewControllers/HomeView/Stories/Context View/StoryItemViewController.swift
index 7fc40a62ce6..3f5940d023d 100644
--- a/Signal/src/ViewControllers/HomeView/Stories/Context View/StoryItemViewController.swift	
+++ b/Signal/src/ViewControllers/HomeView/Stories/Context View/StoryItemViewController.swift	
@@ -32,7 +32,17 @@ class StoryItemViewController: OWSViewController {
         timestampLabel.text = DateUtil.formatTimestampShort(item.message.timestamp)
     }
 
-    func startAttachmentDownloadIfNecessary() -> Bool {
+    func willHandleTapGesture(_ gesture: UITapGestureRecognizer) -> Bool {
+        if startAttachmentDownloadIfNecessary() { return true }
+
+        if let textAttachmentView = mediaView as? TextAttachmentView {
+            return textAttachmentView.willHandleTapGesture(gesture)
+        }
+
+        return false
+    }
+
+    private func startAttachmentDownloadIfNecessary() -> Bool {
         guard case .pointer(let pointer) = item.attachment, ![.enqueued, .downloading].contains(pointer.state) else { return false }
         attachmentDownloads.enqueueDownloadOfAttachments(
             forStoryMessageId: item.message.uniqueId,
@@ -108,20 +118,7 @@ class StoryItemViewController: OWSViewController {
         return constraints
     }()
 
-    private lazy var topGradientView: UIView = {
-        let gradientLayer = CAGradientLayer()
-        gradientLayer.colors = [
-            UIColor.black.withAlphaComponent(0.5).cgColor,
-            UIColor.black.withAlphaComponent(0).cgColor
-        ]
-        let view = OWSLayerView(frame: .zero) { view in
-            gradientLayer.frame = view.bounds
-        }
-        view.layer.addSublayer(gradientLayer)
-        return view
-    }()
-
-    private lazy var bottomGradientView: UIView = {
+    private lazy var gradientProtectionView: UIView = {
         let gradientLayer = CAGradientLayer()
         gradientLayer.colors = [
             UIColor.black.withAlphaComponent(0).cgColor,
@@ -149,15 +146,10 @@ class StoryItemViewController: OWSViewController {
             mediaViewContainer.autoPinEdge(toSuperviewEdge: .bottom)
         }
 
-        mediaViewContainer.addSubview(topGradientView)
-        topGradientView.autoPinWidthToSuperview()
-        topGradientView.autoPinEdge(toSuperviewEdge: .top)
-        topGradientView.autoMatch(.height, to: .height, of: mediaViewContainer, withMultiplier: 0.4)
-
-        mediaViewContainer.addSubview(bottomGradientView)
-        bottomGradientView.autoPinWidthToSuperview()
-        bottomGradientView.autoPinEdge(toSuperviewEdge: .bottom)
-        bottomGradientView.autoMatch(.height, to: .height, of: mediaViewContainer, withMultiplier: 0.4)
+        mediaViewContainer.addSubview(gradientProtectionView)
+        gradientProtectionView.autoPinWidthToSuperview()
+        gradientProtectionView.autoPinEdge(toSuperviewEdge: .bottom)
+        gradientProtectionView.autoMatch(.height, to: .height, of: mediaViewContainer, withMultiplier: 0.4)
 
         createAuthorRow()
 
@@ -297,7 +289,7 @@ class StoryItemViewController: OWSViewController {
         return label
     }
 
-    private var mediaView: UIView?
+    private weak var mediaView: UIView?
     private func updateMediaView() {
         mediaView?.removeFromSuperview()
 
@@ -358,8 +350,7 @@ class StoryItemViewController: OWSViewController {
 
             return container
         case .text(let text):
-            // TODO:
-            return UIView()
+            return TextAttachmentView(attachment: text)
         }
     }
 
diff --git a/Signal/src/ViewControllers/HomeView/Stories/StoryCell.swift b/Signal/src/ViewControllers/HomeView/Stories/StoryCell.swift
index 3eb5b8fb501..5365677f127 100644
--- a/Signal/src/ViewControllers/HomeView/Stories/StoryCell.swift
+++ b/Signal/src/ViewControllers/HomeView/Stories/StoryCell.swift
@@ -80,8 +80,21 @@ class StoryCell: UITableViewCell {
                 owsFailDebug("Unexpected attachment type \(type(of: attachment))")
             }
         case .text(let attachment):
-            // TODO: Render text attachments
-            break
+            let textView = TextAttachmentView(attachment: attachment)
+            // We render the textView at a large 3:2 size (matching the aspect of
+            // the thumbnail container), so the fonts and gradients all render properly
+            // for the preview. We then scale it down to render a "thumbnail" view.
+            let textViewRenderSize = CGSize(width: 375, height: 562.5)
+            textView.frame = CGRect(origin: .zero, size: textViewRenderSize)
+
+            let layerView = OWSLayerView(frame: .zero) { view in
+                textView.transform = .scale(view.width / textViewRenderSize.width)
+                textView.center = view.center
+            }
+            layerView.addSubview(textView)
+
+            attachmentThumbnail.addSubview(layerView)
+            layerView.autoPinEdgesToSuperviewEdges()
         case .missing:
             // TODO: error state
             break
diff --git a/Signal/src/ViewControllers/HomeView/Stories/TextAttachmentView.swift b/Signal/src/ViewControllers/HomeView/Stories/TextAttachmentView.swift
new file mode 100644
index 00000000000..13f12a4022f
--- /dev/null
+++ b/Signal/src/ViewControllers/HomeView/Stories/TextAttachmentView.swift
@@ -0,0 +1,344 @@
+//
+//  Copyright (c) 2022 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+import UIKit
+import SignalServiceKit
+
+class TextAttachmentView: UIView {
+    private(set) weak var linkPreviewView: UIView?
+    private let textAttachment: TextAttachment
+
+    init(attachment: TextAttachment) {
+        self.textAttachment = attachment
+
+        super.init(frame: .zero)
+
+        switch attachment.background {
+        case .color(let color):
+            backgroundColor = color
+        case .gradient(let gradient):
+            addGradientBackground(gradient)
+        }
+
+        let contentStackView = UIStackView()
+        contentStackView.axis = .vertical
+        contentStackView.alignment = .center
+        contentStackView.spacing = 16
+        addSubview(contentStackView)
+        contentStackView.autoPinEdgesToSuperviewEdges()
+
+        let label = UILabel()
+        label.numberOfLines = 0
+        label.textColor = attachment.textForegroundColor ?? Theme.darkThemePrimaryColor
+        label.text = transformedText(attachment.text, for: attachment.textStyle)
+        label.textAlignment = .center
+        label.font = font(for: attachment.textStyle)
+        label.adjustsFontSizeToFitWidth = true
+        label.minimumScaleFactor = 0.2
+
+        if let textBackgroundColor = attachment.textBackgroundColor {
+            let labelBackgroundView = UIView()
+            labelBackgroundView.layoutMargins = UIEdgeInsets(hMargin: 16, vMargin: 16)
+            labelBackgroundView.backgroundColor = textBackgroundColor
+            labelBackgroundView.layer.cornerRadius = 18
+
+            labelBackgroundView.addSubview(label)
+            label.autoPinEdgesToSuperviewMargins()
+
+            let labelWrapper = UIView()
+            labelWrapper.addSubview(labelBackgroundView)
+            labelBackgroundView.autoPinWidthToSuperview(withMargin: 24)
+            labelBackgroundView.autoPinHeightToSuperview()
+            contentStackView.addArrangedSubview(labelWrapper)
+        } else {
+            let labelWrapper = UIView()
+            labelWrapper.addSubview(label)
+            label.autoPinWidthToSuperview(withMargin: 40)
+            label.autoPinHeightToSuperview()
+            contentStackView.addArrangedSubview(labelWrapper)
+        }
+
+        if let linkPreviewView = buildLinkPreviewView(attachment.preview) {
+            let previewWrapper = UIView()
+            previewWrapper.addSubview(linkPreviewView)
+            linkPreviewView.autoPinWidthToSuperview(withMargin: 36)
+            linkPreviewView.autoPinHeightToSuperview()
+            contentStackView.addArrangedSubview(previewWrapper)
+            self.linkPreviewView = linkPreviewView
+        }
+
+        // Keep content vertically centered, but limit to screen size.
+        let topSpacer = UIView.vStretchingSpacer()
+        let bottomSpacer = UIView.vStretchingSpacer()
+        contentStackView.insertArrangedSubview(topSpacer, at: 0)
+        contentStackView.addArrangedSubview(bottomSpacer)
+        topSpacer.autoMatch(.height, to: .height, of: bottomSpacer)
+    }
+
+    private var linkPreviewTooltipView: LinkPreviewTooltipView?
+    func willHandleTapGesture(_ gesture: UITapGestureRecognizer) -> Bool {
+        if let linkPreviewTooltipView = linkPreviewTooltipView {
+            if let container = linkPreviewTooltipView.superview,
+               linkPreviewTooltipView.frame.contains(gesture.location(in: container)) {
+                UIApplication.shared.open(
+                    linkPreviewTooltipView.url,
+                    options: [:],
+                    completionHandler: nil
+                )
+            }
+
+            linkPreviewTooltipView.removeFromSuperview()
+            self.linkPreviewTooltipView = nil
+
+            return true
+        } else if linkPreviewTooltipView == nil,
+                  let linkPreviewView = linkPreviewView,
+                  let urlString = textAttachment.preview?.urlString,
+                  let container = linkPreviewView.superview,
+                  linkPreviewView.frame.contains(gesture.location(in: container)) {
+            let tooltipView = LinkPreviewTooltipView(
+                fromView: self,
+                referenceView: linkPreviewView,
+                url: URL(string: urlString)!
+            )
+            self.linkPreviewTooltipView = tooltipView
+
+            return true
+        }
+
+        return false
+    }
+
+    required init?(coder: NSCoder) {
+        fatalError("init(coder:) has not been implemented")
+    }
+
+    private func transformedText(_ text: String, for textStyle: TextAttachment.TextStyle) -> String {
+        guard case .condensed = textStyle else { return text }
+        return text.uppercased()
+    }
+
+    private func font(for textStyle: TextAttachment.TextStyle) -> UIFont {
+        let attributes: [UIFontDescriptor.AttributeName: Any]
+
+        switch textStyle {
+        case .regular:
+            attributes = [.name: "Inter-Regular_Bold"]
+        case .bold:
+            attributes = [.name: "Inter-Regular_Black"]
+        case .serif:
+            attributes = [.name: "EBGaramond-Regular"]
+        case .script:
+            attributes = [.name: "Parisienne-Regular"]
+        case .condensed:
+            // TODO: Ideally we could set an attribute to make this font
+            // all caps, but iOS deprecated that ability and didn't add
+            // a new equivalent function.
+            attributes = [.name: "BarlowCondensed-Medium"]
+        }
+
+        // TODO: Eventually we'll want to provide a cascadeList here to fallback
+        // to different fonts for different scripts rather than just relying on
+        // the built in OS fallbacks that don't tend to match the desired style.
+        let descriptor = UIFontDescriptor(fontAttributes: attributes)
+
+        return UIFont(descriptor: descriptor, size: 28)
+    }
+
+    private func addGradientBackground(_ gradient: TextAttachment.Background.Gradient) {
+        let gradientLayer = CAGradientLayer()
+        gradientLayer.colors = [
+            gradient.startColor.cgColor,
+            gradient.endColor.cgColor
+        ]
+        gradientLayer.setAngle(gradient.angle)
+
+        let layerView = OWSLayerView(frame: .zero) { view in
+            gradientLayer.frame = view.bounds
+        }
+        layerView.layer.addSublayer(gradientLayer)
+
+        addSubview(layerView)
+        layerView.autoPinEdgesToSuperviewEdges()
+    }
+
+    private static let dateFormatter: DateFormatter = {
+        let formatter = DateFormatter()
+        formatter.dateStyle = .medium
+        formatter.timeStyle = .none
+        return formatter
+    }()
+
+    private func buildLinkPreviewView(_ preview: OWSLinkPreview?) -> UIView? {
+        guard let preview = preview else { return nil }
+
+        let previewHStack = UIStackView()
+        previewHStack.axis = .horizontal
+        previewHStack.alignment = .center
+        previewHStack.spacing = 8
+        previewHStack.isLayoutMarginsRelativeArrangement = true
+        previewHStack.layoutMargins = UIEdgeInsets(hMargin: 12, vMargin: 12)
+        previewHStack.addBackgroundView(withBackgroundColor: .ows_blackAlpha40, cornerRadius: 12)
+
+        if let imageAttachmentId = preview.imageAttachmentId {
+            if let attachment = databaseStorage.read(block: { TSAttachment.anyFetch(uniqueId: imageAttachmentId, transaction: $0) }) {
+                if let stream = attachment as? TSAttachmentStream {
+                    let thumbnailImageView = UIImageView()
+                    thumbnailImageView.layer.cornerRadius = 8
+                    thumbnailImageView.clipsToBounds = true
+                    thumbnailImageView.contentMode = .scaleAspectFill
+                    thumbnailImageView.autoSetDimensions(to: CGSize(square: 76))
+                    previewHStack.addArrangedSubview(thumbnailImageView)
+
+                    stream.thumbnailImageSmall { thumbnail in
+                        thumbnailImageView.image = thumbnail
+                    } failure: {
+                        owsFailDebug("Failed to generate thumbnail preview")
+                    }
+                } else {
+                    Logger.warn("Not rendering thumbnail for undownloaded attachment")
+                }
+            } else {
+                owsFailDebug("Missing attachment with id \(imageAttachmentId)")
+            }
+        }
+
+        let previewVStack = UIStackView()
+        previewVStack.axis = .vertical
+        previewVStack.alignment = .leading
+        previewHStack.addArrangedSubview(previewVStack)
+
+        if let title = preview.title {
+            let titleLabel = UILabel()
+            titleLabel.text = title
+            titleLabel.font = .boldSystemFont(ofSize: 16)
+            titleLabel.textColor = Theme.darkThemePrimaryColor
+            titleLabel.numberOfLines = 2
+            previewVStack.addArrangedSubview(titleLabel)
+        }
+
+        if let description = preview.previewDescription {
+            let descriptionLabel = UILabel()
+            descriptionLabel.text = description
+            descriptionLabel.font = .systemFont(ofSize: 12)
+            descriptionLabel.textColor = Theme.darkThemePrimaryColor
+            descriptionLabel.numberOfLines = 3
+            previewVStack.addArrangedSubview(descriptionLabel)
+        }
+
+        let footerLabel = UILabel()
+        footerLabel.font = .systemFont(ofSize: 12)
+        footerLabel.numberOfLines = 2
+        footerLabel.textColor = Theme.darkThemeSecondaryTextAndIconColor
+        previewVStack.addArrangedSubview(footerLabel)
+
+        var footerText: String
+        if let displayDomain = OWSLinkPreviewManager.displayDomain(forUrl: preview.urlString) {
+            footerText = displayDomain.lowercased()
+        } else {
+            footerText = NSLocalizedString(
+                "LINK_PREVIEW_UNKNOWN_DOMAIN",
+                comment: "Label for link previews with an unknown host."
+            ).uppercased()
+        }
+        if let date = preview.date {
+            footerText.append(" ⋅ \(Self.dateFormatter.string(from: date))")
+        }
+        footerLabel.text = footerText
+
+        return previewHStack
+    }
+}
+
+private extension CAGradientLayer {
+    /// Set's the `startPoint` and `endPoint` of the layer to reflect an angle in degrees
+    /// where 0º starts at 12 o'clock and proceeds in a clockwise direction.
+    func setAngle(_ angle: UInt32) {
+        // While design provides gradients with 0º at 12 o'clock, core animation's
+        // coordinate system works with 0º at 3 o'clock moving in a counter clockwise
+        // direction. We need to convert the provided angle accordingly before
+        // calculating the gradient's start and end points.
+
+        let caAngle =
+            (360 - angle) // Invert to counter clockwise direction
+            + 45 // Rotate 45º counter clockwise to shift the start from 3 o'clock to 12 o'clock
+
+        let radians = CGFloat(caAngle) * .pi / 180.0
+
+        // (x,y) in terms of the signed unit circle
+        var endPoint = CGPoint(x: cos(radians), y: sin(radians))
+
+        // extrapolate to signed unit square
+        if abs(endPoint.x) > abs(endPoint.y) {
+            endPoint.x = endPoint.x > 0 ? 1 : -1
+            endPoint.y = endPoint.x * tan(radians)
+        } else {
+            endPoint.y = endPoint.y > 0 ? 1 : -1
+            endPoint.x = endPoint.y / tan(radians)
+        }
+
+        // The signed unit square is a coordinate space from:
+        // (-1,-1) to (1,1), but the gradient coordinate space
+        // ranges from (0,0) to (1,1) with 0 being the bottom
+        // left. Convert each point accordingly to calculate
+        // the final points.
+        func convertPointToGradientSpace(_ point: CGPoint) -> CGPoint {
+            return CGPoint(
+                x: (point.x + 1) * 0.5,
+                y: 1.0 - (point.y + 1) * 0.5
+            )
+        }
+
+        // The start point will always be at the opposite side of the signed unit square.
+        self.startPoint = convertPointToGradientSpace(CGPoint(x: -endPoint.x, y: -endPoint.y))
+        self.endPoint = convertPointToGradientSpace(endPoint)
+    }
+}
+
+private class LinkPreviewTooltipView: TooltipView {
+    let url: URL
+    init(fromView: UIView, referenceView: UIView, url: URL) {
+        self.url = url
+        super.init(
+            fromView: fromView,
+            widthReferenceView: referenceView,
+            tailReferenceView: referenceView,
+            wasTappedBlock: nil
+        )
+    }
+
+    required init?(coder aDecoder: NSCoder) {
+        fatalError("init(coder:) has not been implemented")
+    }
+
+    public override func bubbleContentView() -> UIView {
+        let titleLabel = UILabel()
+        titleLabel.text = NSLocalizedString(
+            "STORY_LINK_PREVIEW_VISIT_LINK_TOOLTIP",
+            comment: "Tooltip prompting the user to visit a story link."
+        )
+        titleLabel.font = UIFont.ows_dynamicTypeBody2Clamped.ows_semibold
+        titleLabel.textColor = .ows_white
+
+        let urlLabel = UILabel()
+        urlLabel.text = url.absoluteString
+        urlLabel.font = .ows_dynamicTypeCaption1Clamped
+        urlLabel.textColor = .ows_white
+
+        let stackView = UIStackView(arrangedSubviews: [titleLabel, urlLabel])
+        stackView.axis = .vertical
+        stackView.alignment = .leading
+        stackView.spacing = 1
+        stackView.layoutMargins = UIEdgeInsets(hMargin: 16, vMargin: 14)
+        stackView.isLayoutMarginsRelativeArrangement = true
+
+        return stackView
+    }
+
+    public override var bubbleColor: UIColor { .ows_black }
+    public override var bubbleHSpacing: CGFloat { 16 }
+
+    public override var tailDirection: TooltipView.TailDirection { .down }
+}
diff --git a/Signal/translations/en.lproj/Localizable.strings b/Signal/translations/en.lproj/Localizable.strings
index ca8cd30118c..47b57e7d1f3 100644
--- a/Signal/translations/en.lproj/Localizable.strings
+++ b/Signal/translations/en.lproj/Localizable.strings
@@ -6094,6 +6094,9 @@
 /* Title for the stories view. */
 "STORIES_TITLE" = "Stories";
 
+/* Tooltip prompting the user to visit a story link. */
+"STORY_LINK_PREVIEW_VISIT_LINK_TOOLTIP" = "Visit link";
+
 /* Title for the 'Badges' button in sustainer view. */
 "SUBSCRIBER_BADGES" = "Badges";
 
diff --git a/SignalServiceKit/src/Messages/Interactions/OWSLinkPreview.swift b/SignalServiceKit/src/Messages/Interactions/OWSLinkPreview.swift
index b020de12d0e..c6c289020d6 100644
--- a/SignalServiceKit/src/Messages/Interactions/OWSLinkPreview.swift
+++ b/SignalServiceKit/src/Messages/Interactions/OWSLinkPreview.swift
@@ -745,7 +745,7 @@ fileprivate extension HTMLMetadata {
 // MARK: - To be moved
 // Everything after this line should find a new home at some point
 
-fileprivate extension OWSLinkPreviewManager {
+public extension OWSLinkPreviewManager {
     @objc
     class func displayDomain(forUrl urlString: String?) -> String? {
         guard let urlString = urlString else {
diff --git a/SignalServiceKit/src/Messages/Stories/StoryMessage.swift b/SignalServiceKit/src/Messages/Stories/StoryMessage.swift
index 96f62bbe820..65c27015468 100644
--- a/SignalServiceKit/src/Messages/Stories/StoryMessage.swift
+++ b/SignalServiceKit/src/Messages/Stories/StoryMessage.swift
@@ -243,9 +243,9 @@ public struct TextAttachment: Codable {
         case color(UIColor)
         case gradient(Gradient)
         public struct Gradient {
-            let startColor: UIColor
-            let endColor: UIColor
-            let angle: UInt32
+            public let startColor: UIColor
+            public let endColor: UIColor
+            public let angle: UInt32
         }
     }
     public var background: Background {
@@ -286,13 +286,13 @@ public struct TextAttachment: Codable {
             self.textStyle = .condensed
         }
 
-        if proto.hasTextForegroundColor {
+        if proto.textForegroundColor != 0 {
             textForegroundColorHex = proto.textForegroundColor
         } else {
             textForegroundColorHex = nil
         }
 
-        if proto.hasTextBackgroundColor {
+        if proto.textBackgroundColor != 0 {
             textBackgroundColorHex = proto.textBackgroundColor
         } else {
             textBackgroundColorHex = nil
@@ -304,7 +304,7 @@ public struct TextAttachment: Codable {
                 endColorHex: gradient.endColor,
                 angle: gradient.angle
             ))
-        } else if proto.hasColor {
+        } else if proto.color != 0 {
             rawBackground = .color(hex: proto.color)
         } else {
             throw OWSAssertionError("Missing background for attachment.")
