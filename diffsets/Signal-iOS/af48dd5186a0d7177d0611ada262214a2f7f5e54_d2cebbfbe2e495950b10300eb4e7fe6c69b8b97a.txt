diff --git a/Signal/ConversationView/ConversationViewController+OWS.swift b/Signal/ConversationView/ConversationViewController+OWS.swift
index de3e9ff68f..a9b9666db6 100644
--- a/Signal/ConversationView/ConversationViewController+OWS.swift
+++ b/Signal/ConversationView/ConversationViewController+OWS.swift
@@ -95,7 +95,7 @@ extension ConversationViewController {
         let oldInsets = collectionView.contentInset
         var newInsets = oldInsets
 
-        newInsets.bottom = view.keyboardLayoutGuide.layoutFrame.height - view.safeAreaInsets.bottom + (bottomBar.frame.height - bottomBar.safeAreaInsets.bottom)
+        newInsets.bottom = keyboardLayoutGuide.layoutFrame.height - view.safeAreaInsets.bottom + (bottomBar.frame.height - bottomBar.safeAreaInsets.bottom)
         newInsets.top = (bannerView?.height ?? 0)
 
         let wasScrolledToBottom = self.isScrolledToBottom
diff --git a/Signal/ConversationView/ConversationViewController.swift b/Signal/ConversationView/ConversationViewController.swift
index ea63a159a7..d62daff3ff 100644
--- a/Signal/ConversationView/ConversationViewController.swift
+++ b/Signal/ConversationView/ConversationViewController.swift
@@ -265,7 +265,7 @@ public final class ConversationViewController: OWSViewController {
         self.view.addSubview(bottomBar)
         bottomBar.autoPinWidthToSuperview()
         NSLayoutConstraint.activate([
-            bottomBar.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor)
+            bottomBar.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor)
         ])
 
         self.selectionToolbar = self.buildSelectionToolbar()
diff --git a/Signal/Registration/UserInterface/RegistrationPhoneNumberViewController.swift b/Signal/Registration/UserInterface/RegistrationPhoneNumberViewController.swift
index e16e237171..645d6b113e 100644
--- a/Signal/Registration/UserInterface/RegistrationPhoneNumberViewController.swift
+++ b/Signal/Registration/UserInterface/RegistrationPhoneNumberViewController.swift
@@ -247,7 +247,7 @@ class RegistrationPhoneNumberViewController: OWSViewController {
         cancelButton.translatesAutoresizingMaskIntoConstraints = false
         NSLayoutConstraint.activate([
             cancelButton.centerXAnchor.constraint(equalTo: view.centerXAnchor),
-            cancelButton.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor, constant: -24),
+            cancelButton.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor, constant: -24),
         ])
 
         render()
diff --git a/Signal/Registration/UserInterface/RegistrationPinViewController.swift b/Signal/Registration/UserInterface/RegistrationPinViewController.swift
index 5f078fc0a5..66e92cf702 100644
--- a/Signal/Registration/UserInterface/RegistrationPinViewController.swift
+++ b/Signal/Registration/UserInterface/RegistrationPinViewController.swift
@@ -365,7 +365,7 @@ class RegistrationPinViewController: OWSViewController {
             scrollView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
             scrollView.leadingAnchor.constraint(equalTo: view.layoutMarginsGuide.leadingAnchor),
             scrollView.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor),
-            scrollView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            scrollView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         scrollView.addSubview(stackView)
diff --git a/Signal/Registration/UserInterface/RegistrationProfileViewController.swift b/Signal/Registration/UserInterface/RegistrationProfileViewController.swift
index f21fe8d9b9..9d07fb91a1 100644
--- a/Signal/Registration/UserInterface/RegistrationProfileViewController.swift
+++ b/Signal/Registration/UserInterface/RegistrationProfileViewController.swift
@@ -263,7 +263,7 @@ class RegistrationProfileViewController: OWSViewController {
             scrollView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
             scrollView.leadingAnchor.constraint(equalTo: view.layoutMarginsGuide.leadingAnchor),
             scrollView.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor),
-            scrollView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            scrollView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         let stackView = UIStackView()
diff --git a/Signal/Registration/UserInterface/RegistrationVerificationViewController.swift b/Signal/Registration/UserInterface/RegistrationVerificationViewController.swift
index c1cb58cb65..93b6532085 100644
--- a/Signal/Registration/UserInterface/RegistrationVerificationViewController.swift
+++ b/Signal/Registration/UserInterface/RegistrationVerificationViewController.swift
@@ -259,7 +259,7 @@ class RegistrationVerificationViewController: OWSViewController {
             scrollView.topAnchor.constraint(equalTo: view.layoutMarginsGuide.topAnchor),
             scrollView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             scrollView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
-            scrollView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            scrollView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         let stackView = UIStackView()
diff --git a/Signal/Usernames/Selection/UsernameSelectionViewController.swift b/Signal/Usernames/Selection/UsernameSelectionViewController.swift
index 092241b54e..75d2f52acf 100644
--- a/Signal/Usernames/Selection/UsernameSelectionViewController.swift
+++ b/Signal/Usernames/Selection/UsernameSelectionViewController.swift
@@ -317,7 +317,7 @@ class UsernameSelectionViewController: OWSViewController, OWSNavigationChildCont
             wrapperScrollView.topAnchor.constraint(equalTo: view.layoutMarginsGuide.topAnchor),
             wrapperScrollView.leadingAnchor.constraint(equalTo: view.layoutMarginsGuide.leadingAnchor),
             wrapperScrollView.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor),
-            wrapperScrollView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            wrapperScrollView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         let contentLayoutGuide = wrapperScrollView.contentLayoutGuide
diff --git a/Signal/src/ViewControllers/AppSettings/Payments/PaymentsRestoreWalletWordViewController.swift b/Signal/src/ViewControllers/AppSettings/Payments/PaymentsRestoreWalletWordViewController.swift
index 484ae0f376..fa9a65582f 100644
--- a/Signal/src/ViewControllers/AppSettings/Payments/PaymentsRestoreWalletWordViewController.swift
+++ b/Signal/src/ViewControllers/AppSettings/Payments/PaymentsRestoreWalletWordViewController.swift
@@ -65,7 +65,7 @@ public class PaymentsRestoreWalletWordViewController: OWSViewController {
             rootView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
             rootView.leadingAnchor.constraint(equalTo: view.layoutMarginsGuide.leadingAnchor),
             rootView.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor),
-            rootView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            rootView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         updateContents()
diff --git a/Signal/src/ViewControllers/Avatars/AvatarEditViewController.swift b/Signal/src/ViewControllers/Avatars/AvatarEditViewController.swift
index 2ccd1326f5..e53489494d 100644
--- a/Signal/src/ViewControllers/Avatars/AvatarEditViewController.swift
+++ b/Signal/src/ViewControllers/Avatars/AvatarEditViewController.swift
@@ -6,7 +6,7 @@
 import SignalServiceKit
 import SignalUI
 
-class AvatarEditViewController: OWSViewController {
+class AvatarEditViewController: OWSViewController, OWSNavigationChildController {
     private let originalModel: AvatarModel
     private var model: AvatarModel {
         didSet {
@@ -32,9 +32,15 @@ class AvatarEditViewController: OWSViewController {
         return UIDevice.current.isIPad ? .all : .portrait
     }
 
+    var preferredNavigationBarStyle: OWSNavigationBarStyle { .solid }
+
+    var navbarBackgroundColorOverride: UIColor? { UIColor.Signal.groupedBackground }
+
     override func viewDidLoad() {
         super.viewDidLoad()
 
+        view.backgroundColor = UIColor.Signal.groupedBackground
+
         updateNavigation()
         updateHeaderViewState()
         updateFooterViewState()
@@ -46,7 +52,7 @@ class AvatarEditViewController: OWSViewController {
             scrollView.frameLayoutGuide.topAnchor.constraint(equalTo: view.layoutMarginsGuide.topAnchor),
             scrollView.frameLayoutGuide.leadingAnchor.constraint(equalTo: view.readableContentGuide.leadingAnchor),
             scrollView.frameLayoutGuide.trailingAnchor.constraint(equalTo: view.readableContentGuide.trailingAnchor),
-            scrollView.frameLayoutGuide.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor, constant: -8),
+            scrollView.frameLayoutGuide.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor, constant: -8),
         ])
 
         scrollView.addSubview(topHeader)
diff --git a/Signal/src/ViewControllers/Donations/DonateViewController.swift b/Signal/src/ViewControllers/Donations/DonateViewController.swift
index cdc3796c60..9dd9db6aaf 100644
--- a/Signal/src/ViewControllers/Donations/DonateViewController.swift
+++ b/Signal/src/ViewControllers/Donations/DonateViewController.swift
@@ -105,7 +105,7 @@ class DonateViewController: OWSViewController, OWSNavigationChildController {
             scrollView.topAnchor.constraint(equalTo: view.topAnchor),
             scrollView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             scrollView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
-            scrollView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            scrollView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         NotificationCenter.default.addObserver(
diff --git a/Signal/src/ViewControllers/GifPicker/GifPickerViewController.swift b/Signal/src/ViewControllers/GifPicker/GifPickerViewController.swift
index f9ab2991a4..6c0bca750e 100644
--- a/Signal/src/ViewControllers/GifPicker/GifPickerViewController.swift
+++ b/Signal/src/ViewControllers/GifPicker/GifPickerViewController.swift
@@ -295,7 +295,7 @@ class GifPickerViewController: OWSViewController, UISearchBarDelegate, UICollect
             bottomBanner.topAnchor.constraint(equalTo: bottomBannerContainer.topAnchor),
             bottomBanner.leadingAnchor.constraint(equalTo: bottomBannerContainer.leadingAnchor),
             bottomBanner.trailingAnchor.constraint(equalTo: bottomBannerContainer.trailingAnchor),
-            bottomBanner.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            bottomBanner.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         // The Giphy API requires us to "show their trademark prominently" in our GIF experience.
diff --git a/Signal/src/ViewControllers/HomeView/Stories/Replies & Views Sheets/Group Reply Sheet/StoryGroupReplyViewController.swift b/Signal/src/ViewControllers/HomeView/Stories/Replies & Views Sheets/Group Reply Sheet/StoryGroupReplyViewController.swift
index 767ef2597c..c4bde74cbd 100644
--- a/Signal/src/ViewControllers/HomeView/Stories/Replies & Views Sheets/Group Reply Sheet/StoryGroupReplyViewController.swift	
+++ b/Signal/src/ViewControllers/HomeView/Stories/Replies & Views Sheets/Group Reply Sheet/StoryGroupReplyViewController.swift	
@@ -89,7 +89,7 @@ class StoryGroupReplyViewController: OWSViewController, StoryReplySheet {
             bottomBar.topAnchor.constraint(equalTo: tableView.bottomAnchor),
             bottomBar.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             bottomBar.trailingAnchor.constraint(equalTo: view.trailingAnchor),
-            bottomBar.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            bottomBar.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
         // Its a bit silly but this is the easiest way to capture touches
         // and not let them pass up to any parent scrollviews. pans inside the
diff --git a/Signal/src/ViewControllers/HomeView/Stories/Replies & Views Sheets/StoryDirectReplySheet.swift b/Signal/src/ViewControllers/HomeView/Stories/Replies & Views Sheets/StoryDirectReplySheet.swift
index b952030245..985b42d26c 100644
--- a/Signal/src/ViewControllers/HomeView/Stories/Replies & Views Sheets/StoryDirectReplySheet.swift	
+++ b/Signal/src/ViewControllers/HomeView/Stories/Replies & Views Sheets/StoryDirectReplySheet.swift	
@@ -61,7 +61,7 @@ public class StoryDirectReplySheet: OWSViewController, StoryReplySheet {
             inputToolbar.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             inputToolbar.trailingAnchor.constraint(equalTo: view.trailingAnchor),
             inputToolbarBottomConstraint,
-            inputToolbar.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            inputToolbar.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
         self.inputToolbarBottomConstraint = inputToolbarBottomConstraint
     }
diff --git a/Signal/src/ViewControllers/OWSPinConfirmationViewController.swift b/Signal/src/ViewControllers/OWSPinConfirmationViewController.swift
index bf25d8c174..30a14962d1 100644
--- a/Signal/src/ViewControllers/OWSPinConfirmationViewController.swift
+++ b/Signal/src/ViewControllers/OWSPinConfirmationViewController.swift
@@ -91,7 +91,7 @@ public class PinConfirmationViewController: OWSViewController {
         NSLayoutConstraint.activate([
             containerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             containerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
-            containerView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            containerView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         // We want the background to extend to the bottom of the screen
diff --git a/Signal/src/ViewControllers/OWSPinReminderViewController.swift b/Signal/src/ViewControllers/OWSPinReminderViewController.swift
index 446c826d12..0c507b045f 100644
--- a/Signal/src/ViewControllers/OWSPinReminderViewController.swift
+++ b/Signal/src/ViewControllers/OWSPinReminderViewController.swift
@@ -88,7 +88,7 @@ public class PinReminderViewController: OWSViewController {
             containerView.topAnchor.constraint(greaterThanOrEqualTo: view.safeAreaLayoutGuide.topAnchor),
             containerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             containerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
-            containerView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            containerView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         // We want the background to extend to the bottom of the screen
diff --git a/Signal/src/ViewControllers/OWSPinSetupViewController.swift b/Signal/src/ViewControllers/OWSPinSetupViewController.swift
index c8ab2432d6..396ee5b05b 100644
--- a/Signal/src/ViewControllers/OWSPinSetupViewController.swift
+++ b/Signal/src/ViewControllers/OWSPinSetupViewController.swift
@@ -324,7 +324,7 @@ public class PinSetupViewController: OWSViewController, OWSNavigationChildContro
             stackView.topAnchor.constraint(equalTo: view.layoutMarginsGuide.topAnchor),
             stackView.leadingAnchor.constraint(equalTo: view.layoutMarginsGuide.leadingAnchor),
             stackView.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor),
-            stackView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            stackView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         [pinTextField, validationWarningLabel, recommendationLabel].forEach {
diff --git a/Signal/src/ViewControllers/Payments/SendPaymentMemoViewController.swift b/Signal/src/ViewControllers/Payments/SendPaymentMemoViewController.swift
index 78732082c8..debbb93bab 100644
--- a/Signal/src/ViewControllers/Payments/SendPaymentMemoViewController.swift
+++ b/Signal/src/ViewControllers/Payments/SendPaymentMemoViewController.swift
@@ -45,7 +45,7 @@ public class SendPaymentMemoViewController: OWSViewController {
             rootStack.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
             rootStack.leadingAnchor.constraint(equalTo: view.layoutMarginsGuide.leadingAnchor),
             rootStack.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor),
-            rootStack.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor, constant: -16),
+            rootStack.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor, constant: -16),
         ])
 
         updateContents()
diff --git a/Signal/src/ViewControllers/Payments/SendPaymentViewController.swift b/Signal/src/ViewControllers/Payments/SendPaymentViewController.swift
index 0335341c33..3719de152e 100644
--- a/Signal/src/ViewControllers/Payments/SendPaymentViewController.swift
+++ b/Signal/src/ViewControllers/Payments/SendPaymentViewController.swift
@@ -710,7 +710,7 @@ public class SendPaymentViewController: OWSViewController {
             rootStack.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
             rootStack.leadingAnchor.constraint(equalTo: view.layoutMarginsGuide.leadingAnchor, constant: 20),
             rootStack.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor, constant: -20),
-            rootStack.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor, constant: -24),
+            rootStack.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor, constant: -24),
         ])
 
         bigAmountLabel.font = UIFont.regularFont(ofSize: 60)
diff --git a/SignalUI/AttachmentApproval/AttachmentApprovalViewController.swift b/SignalUI/AttachmentApproval/AttachmentApprovalViewController.swift
index 6c238565e3..8b0b46679f 100644
--- a/SignalUI/AttachmentApproval/AttachmentApprovalViewController.swift
+++ b/SignalUI/AttachmentApproval/AttachmentApprovalViewController.swift
@@ -118,7 +118,12 @@ public class AttachmentApprovalViewController: UIPageViewController, UIPageViewC
     private var observerToken: NSObjectProtocol?
 
     private var observingKeyboardNotifications = false
-    private var keyboardHeight: CGFloat = 0
+    private var keyboardHeight: CGFloat = 0 {
+        didSet {
+            guard let iOS15BottomToolviewVerticalPositionConstraint else { return }
+            iOS15BottomToolviewVerticalPositionConstraint.constant = -max(view.safeAreaInsets.bottom, keyboardHeight)
+        }
+    }
 
     public init(options: AttachmentApprovalViewControllerOptions, attachmentApprovalItems: [AttachmentApprovalItem]) {
         assert(attachmentApprovalItems.count > 0)
@@ -197,6 +202,9 @@ public class AttachmentApprovalViewController: UIPageViewController, UIPageViewC
 
     private let bottomToolView = AttachmentApprovalToolbar()
 
+    // Manually adjust position of the bottom toolbar on iOS 15 because `keyboardLayoutGuide` is buggy.
+    private var iOS15BottomToolviewVerticalPositionConstraint: NSLayoutConstraint?
+
     lazy var contentDimmerView: UIView = {
         let dimmerView = UIView()
         dimmerView.backgroundColor = .ows_blackAlpha40
@@ -267,8 +275,16 @@ public class AttachmentApprovalViewController: UIPageViewController, UIPageViewC
         NSLayoutConstraint.activate([
             bottomToolView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             bottomToolView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
-            bottomToolView.contentLayoutGuide.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
         ])
+        if #unavailable(iOS 16) {
+            let constraint = bottomToolView.contentLayoutGuide.bottomAnchor.constraint(equalTo: view.bottomAnchor, constant: -view.safeAreaInsets.bottom)
+            constraint.isActive = true
+            iOS15BottomToolviewVerticalPositionConstraint = constraint
+        } else {
+            NSLayoutConstraint.activate([
+                bottomToolView.contentLayoutGuide.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor)
+            ])
+        }
 
         OWSTableViewController2.removeBackButtonText(viewController: self)
     }
@@ -304,6 +320,9 @@ public class AttachmentApprovalViewController: UIPageViewController, UIPageViewC
     public override func viewSafeAreaInsetsDidChange() {
         super.viewSafeAreaInsetsDidChange()
 
+        if let iOS15BottomToolviewVerticalPositionConstraint {
+            iOS15BottomToolviewVerticalPositionConstraint.constant = -max(view.safeAreaInsets.bottom, keyboardHeight)
+        }
         if let currentPageViewController {
             updateContentLayoutMargins(for: currentPageViewController)
         }
diff --git a/SignalUI/ImageEditor/ImageEditorViewController+Text.swift b/SignalUI/ImageEditor/ImageEditorViewController+Text.swift
index 113100c3f3..6e379fe514 100644
--- a/SignalUI/ImageEditor/ImageEditorViewController+Text.swift
+++ b/SignalUI/ImageEditor/ImageEditorViewController+Text.swift
@@ -78,7 +78,7 @@ extension ImageEditorViewController {
             textViewContainer.topAnchor.constraint(equalTo: view.topAnchor),
             textViewContainer.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             textViewContainer.trailingAnchor.constraint(equalTo: view.trailingAnchor),
-            textViewContainer.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            textViewContainer.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         textViewContainer.addGestureRecognizer(ImageEditorPinchGestureRecognizer(target: self, action: #selector(handleTextPinchGesture(_:))))
diff --git a/SignalUI/RecipientPickers/BaseMemberViewController.swift b/SignalUI/RecipientPickers/BaseMemberViewController.swift
index 1667ce3d70..1bfa6f6ff9 100644
--- a/SignalUI/RecipientPickers/BaseMemberViewController.swift
+++ b/SignalUI/RecipientPickers/BaseMemberViewController.swift
@@ -97,7 +97,7 @@ open class BaseMemberViewController: RecipientPickerContainerViewController {
             recipientPicker.view.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
             recipientPicker.view.leadingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.leadingAnchor),
             recipientPicker.view.trailingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.trailingAnchor),
-            recipientPicker.view.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            recipientPicker.view.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         updateMemberCount()
diff --git a/SignalUI/ViewControllers/OWSTableViewController2.swift b/SignalUI/ViewControllers/OWSTableViewController2.swift
index a367070bb0..00750d2fc6 100644
--- a/SignalUI/ViewControllers/OWSTableViewController2.swift
+++ b/SignalUI/ViewControllers/OWSTableViewController2.swift
@@ -210,12 +210,12 @@ open class OWSTableViewController2: OWSViewController {
         let bottomFooterConstraint: NSLayoutConstraint
         if !shouldHideBottomFooter, let bottomFooter {
             if shouldAvoidKeyboard {
-                bottomFooterConstraint = bottomFooter.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor)
+                bottomFooterConstraint = bottomFooter.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor)
             } else {
                 bottomFooterConstraint = bottomFooter.bottomAnchor.constraint(equalTo: view.bottomAnchor)
             }
         } else if shouldAvoidKeyboard {
-            bottomFooterConstraint = tableView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor)
+            bottomFooterConstraint = tableView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor)
         } else {
             bottomFooterConstraint = tableView.bottomAnchor.constraint(equalTo: view.bottomAnchor)
         }
diff --git a/SignalUI/ViewControllers/OWSViewController.swift b/SignalUI/ViewControllers/OWSViewController.swift
index 7d757a66db..dfc63430e5 100644
--- a/SignalUI/ViewControllers/OWSViewController.swift
+++ b/SignalUI/ViewControllers/OWSViewController.swift
@@ -114,6 +114,21 @@ open class OWSViewController: UIViewController {
 
         self.lifecycle = .notAppeared
 
+        if #unavailable(iOS 16) {
+            let layoutGuide = UILayoutGuide()
+            layoutGuide.identifier = "iOS15KeyboardLayoutGuide"
+            view.addLayoutGuide(layoutGuide)
+            let heightConstraint = layoutGuide.heightAnchor.constraint(equalToConstant: view.safeAreaInsets.bottom)
+            NSLayoutConstraint.activate([
+                layoutGuide.leadingAnchor.constraint(equalTo: view.leadingAnchor),
+                layoutGuide.trailingAnchor.constraint(equalTo: view.trailingAnchor),
+                layoutGuide.bottomAnchor.constraint(equalTo: view.bottomAnchor),
+                heightConstraint,
+            ])
+            iOS15KeyboardLayoutGuide = layoutGuide
+            iOS15KeyboardLayoutGuideHeightConstraint = heightConstraint
+        }
+
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(themeDidChange),
@@ -126,6 +141,8 @@ open class OWSViewController: UIViewController {
         super.viewWillAppear(animated)
 
         self.lifecycle = .willAppear
+
+        observeKeyboardNotificationsIfNeeded()
     }
 
     open override func viewDidAppear(_ animated: Bool) {
@@ -150,6 +167,20 @@ open class OWSViewController: UIViewController {
         self.lifecycle = .notAppeared
     }
 
+    open override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
+        super.viewWillTransition(to: size, with: coordinator)
+
+        // Whatever keyboard frame we knew about is now invalidated.
+        // They keyboard will update us if its on screen, setting this again.
+        lastKnownKeyboardFrame = nil
+    }
+
+    open override func viewSafeAreaInsetsDidChange() {
+        super.viewSafeAreaInsetsDidChange()
+
+        updateiOS15KeyboardLayoutGuide()
+    }
+
     #if DEBUG
     func ensureNavbarAccessibilityIds() {
         guard let navigationBar = navigationController?.navigationBar else {
@@ -221,6 +252,92 @@ open class OWSViewController: UIViewController {
     open override var supportedInterfaceOrientations: UIInterfaceOrientationMask {
         return UIDevice.current.defaultSupportedOrientations
     }
+
+    // MARK: - Keyboard Layout Guide
+
+    // On iOS 15 provides access to last known keyboard frame.
+    // On newer iOS versions this is a proxy for `view.keyboardLayoutGuide`.
+    @available(iOS, deprecated: 16.0)
+    final public var keyboardLayoutGuide: UILayoutGuide {
+        return iOS15KeyboardLayoutGuide ?? view.keyboardLayoutGuide
+    }
+
+    @available(iOS, deprecated: 16.0)
+    private var iOS15KeyboardLayoutGuide: UILayoutGuide?
+
+    @available(iOS, deprecated: 16.0)
+    private var iOS15KeyboardLayoutGuideHeightConstraint: NSLayoutConstraint?
+
+    @available(iOS, deprecated: 16.0)
+    private var isObservingKeyboardNotifications = false
+
+    @available(iOS, deprecated: 16.0)
+    private var lastKnownKeyboardFrame: CGRect?
+
+    @available(iOS, deprecated: 16.0)
+    private static var keyboardNotificationNames: [Notification.Name] = [
+        UIResponder.keyboardWillShowNotification,
+        UIResponder.keyboardDidShowNotification,
+        UIResponder.keyboardWillHideNotification,
+        UIResponder.keyboardDidHideNotification,
+        UIResponder.keyboardWillChangeFrameNotification,
+        UIResponder.keyboardDidChangeFrameNotification
+    ]
+
+    @available(iOS, deprecated: 16.0)
+    private func observeKeyboardNotificationsIfNeeded() {
+        guard #unavailable(iOS 16.0) else { return }
+
+        if isObservingKeyboardNotifications { return }
+        isObservingKeyboardNotifications = true
+
+        Self.keyboardNotificationNames.forEach {
+            NotificationCenter.default.addObserver(
+                self,
+                selector: #selector(handleKeyboardNotificationBase(_:)),
+                name: $0,
+                object: nil
+            )
+        }
+    }
+
+    @available(iOS, deprecated: 16.0)
+    private func stopObservingKeyboardNotifications() {
+        Self.keyboardNotificationNames.forEach {
+            NotificationCenter.default.removeObserver(self, name: $0, object: nil)
+        }
+        isObservingKeyboardNotifications = false
+    }
+
+    @objc
+    @available(iOS, deprecated: 16.0)
+    private func handleKeyboardNotificationBase(_ notification: NSNotification) {
+        let userInfo = notification.userInfo
+        guard let keyboardEndFrame = (userInfo?[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue else {
+            owsFailDebug("Missing keyboard end frame")
+            return
+        }
+
+        let keyboardEndFrameConverted = view.convert(keyboardEndFrame, from: nil)
+        guard keyboardEndFrameConverted != lastKnownKeyboardFrame else {
+            // No change.
+            return
+        }
+        lastKnownKeyboardFrame = keyboardEndFrameConverted
+        updateiOS15KeyboardLayoutGuide()
+    }
+
+    @available(iOS, deprecated: 16.0)
+    private func updateiOS15KeyboardLayoutGuide() {
+        guard let iOS15KeyboardLayoutGuideHeightConstraint else { return }
+
+        var keyboardHeight = view.safeAreaInsets.bottom
+        if let lastKnownKeyboardFrame {
+            keyboardHeight = max(keyboardHeight, view.bounds.maxY - lastKnownKeyboardFrame.minY)
+        }
+        guard iOS15KeyboardLayoutGuideHeightConstraint.constant != keyboardHeight else { return }
+        iOS15KeyboardLayoutGuideHeightConstraint.constant = keyboardHeight
+    }
 }
 
 private class PassthroughTouchSpacerView: SpacerView {
diff --git a/SignalUI/ViewControllers/TextApprovalViewController.swift b/SignalUI/ViewControllers/TextApprovalViewController.swift
index ce1ddd4625..649ecabcf3 100644
--- a/SignalUI/ViewControllers/TextApprovalViewController.swift
+++ b/SignalUI/ViewControllers/TextApprovalViewController.swift
@@ -144,7 +144,7 @@ public class TextApprovalViewController: OWSViewController, BodyRangesTextViewDe
             stackView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
             stackView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
             stackView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
-            stackView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
+            stackView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
         // Text View
