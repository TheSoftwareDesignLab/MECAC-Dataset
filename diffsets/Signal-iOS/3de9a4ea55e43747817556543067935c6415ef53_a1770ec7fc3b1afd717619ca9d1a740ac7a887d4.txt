diff --git a/Signal/src/ViewControllers/DebugUI/DebugUISessionState.m b/Signal/src/ViewControllers/DebugUI/DebugUISessionState.m
index 42358ceb3b3..cbf1eba725b 100644
--- a/Signal/src/ViewControllers/DebugUI/DebugUISessionState.m
+++ b/Signal/src/ViewControllers/DebugUI/DebugUISessionState.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 #import "DebugUISessionState.h"
@@ -20,63 +20,112 @@ - (NSString *)name
 
 - (nullable OWSTableSection *)sectionForThread:(nullable TSThread *)threadParameter
 {
-    OWSAssert([threadParameter isKindOfClass:[TSContactThread class]]);
+    NSMutableArray<OWSTableItem *> *items = [NSMutableArray new];
+    if ([threadParameter isKindOfClass:[TSContactThread class]]) {
+        TSContactThread *thread = (TSContactThread *)threadParameter;
+        [items addObjectsFromArray:@[
+            [OWSTableItem itemWithTitle:@"Log All Recipient Identities"
+                            actionBlock:^{
+                                [OWSRecipientIdentity printAllIdentities];
+                            }],
+            [OWSTableItem itemWithTitle:@"Log All Sessions"
+                            actionBlock:^{
+                                dispatch_async([OWSDispatch sessionStoreQueue], ^{
+                                    [[TSStorageManager sharedManager] printAllSessions];
+                                });
+                            }],
+            [OWSTableItem itemWithTitle:@"Toggle Key Change"
+                            actionBlock:^{
+                                DDLogError(@"Flipping identity Key. Flip again to return.");
 
-    TSContactThread *thread = (TSContactThread *)threadParameter;
+                                OWSIdentityManager *identityManager = [OWSIdentityManager sharedManager];
+                                NSString *recipientId = [thread contactIdentifier];
 
-    return [OWSTableSection
-        sectionWithTitle:self.name
-                   items:@[
-                       [OWSTableItem itemWithTitle:@"Log All Recipient Identities"
-                                       actionBlock:^{
-                                           [OWSRecipientIdentity printAllIdentities];
-                                       }],
-                       [OWSTableItem itemWithTitle:@"Log All Sessions"
-                                       actionBlock:^{
-                                           dispatch_async([OWSDispatch sessionStoreQueue], ^{
-                                               [[TSStorageManager sharedManager] printAllSessions];
-                                           });
-                                       }],
-                       [OWSTableItem itemWithTitle:@"Toggle Key Change"
-                                       actionBlock:^{
-                                           DDLogError(@"Flipping identity Key. Flip again to return.");
+                                NSData *currentKey = [identityManager identityKeyForRecipientId:recipientId];
+                                NSMutableData *flippedKey = [NSMutableData new];
+                                const char *currentKeyBytes = currentKey.bytes;
+                                for (NSUInteger i = 0; i < currentKey.length; i++) {
+                                    const char xorByte = currentKeyBytes[i] ^ 0xff;
+                                    [flippedKey appendBytes:&xorByte length:1];
+                                }
+                                OWSAssert(flippedKey.length == currentKey.length);
+                                [identityManager saveRemoteIdentity:flippedKey recipientId:recipientId];
+                            }],
+            [OWSTableItem itemWithTitle:@"Delete all sessions"
+                            actionBlock:^{
+                                dispatch_async([OWSDispatch sessionStoreQueue], ^{
+                                    [[TSStorageManager sharedManager]
+                                        deleteAllSessionsForContact:thread.contactIdentifier];
+                                });
+                            }],
+            [OWSTableItem itemWithTitle:@"Archive all sessions"
+                            actionBlock:^{
+                                dispatch_async([OWSDispatch sessionStoreQueue], ^{
+                                    [[TSStorageManager sharedManager]
+                                        archiveAllSessionsForContact:thread.contactIdentifier];
+                                });
+                            }],
+            [OWSTableItem itemWithTitle:@"Send session reset"
+                            actionBlock:^{
+                                [OWSSessionResetJob runWithContactThread:thread
+                                                           messageSender:[Environment current].messageSender
+                                                          storageManager:[TSStorageManager sharedManager]];
+                            }],
+        ]];
+    }
 
-                                           OWSIdentityManager *identityManager = [OWSIdentityManager sharedManager];
-                                           NSString *recipientId = [thread contactIdentifier];
+#if DEBUG
+    [items addObjectsFromArray:@[
+        [OWSTableItem itemWithTitle:@"Clear Session and Identity Store"
+                        actionBlock:^{
+                            [DebugUISessionState clearSessionAndIdentityStore];
+                        }],
+        [OWSTableItem itemWithTitle:@"Archive Session and Identity Store"
+                        actionBlock:^{
+                            [DebugUISessionState archiveSessionAndIdentityStore];
+                        }],
+        [OWSTableItem itemWithTitle:@"Restore Session and Identity Store"
+                        actionBlock:^{
+                            [DebugUISessionState restoreSessionAndIdentityStore];
+                        }]
+    ]];
+#endif
 
-                                           NSData *currentKey = [identityManager identityKeyForRecipientId:recipientId];
-                                           NSMutableData *flippedKey = [NSMutableData new];
-                                           const char *currentKeyBytes = currentKey.bytes;
-                                           for (NSUInteger i = 0; i < currentKey.length; i++) {
-                                               const char xorByte = currentKeyBytes[i] ^ 0xff;
-                                               [flippedKey appendBytes:&xorByte length:1];
-                                           }
-                                           OWSAssert(flippedKey.length == currentKey.length);
-                                           [identityManager saveRemoteIdentity:flippedKey recipientId:recipientId];
-                                       }],
-                       [OWSTableItem itemWithTitle:@"Delete all sessions"
-                                       actionBlock:^{
-                                           dispatch_async([OWSDispatch sessionStoreQueue], ^{
-                                               [[TSStorageManager sharedManager]
-                                                   deleteAllSessionsForContact:thread.contactIdentifier];
-                                           });
-                                       }],
-                       [OWSTableItem itemWithTitle:@"Archive all sessions"
-                                       actionBlock:^{
-                                           dispatch_async([OWSDispatch sessionStoreQueue], ^{
-                                               [[TSStorageManager sharedManager]
-                                                   archiveAllSessionsForContact:thread.contactIdentifier];
-                                           });
-                                       }],
-                       [OWSTableItem itemWithTitle:@"Send session reset"
-                                       actionBlock:^{
-                                           [OWSSessionResetJob runWithContactThread:thread
-                                                                      messageSender:[Environment current].messageSender
-                                                                     storageManager:[TSStorageManager sharedManager]];
-                                       }]
-                   ]];
+    return [OWSTableSection sectionWithTitle:self.name items:items];
 }
 
+#if DEBUG
++ (void)clearSessionAndIdentityStore
+{
+    dispatch_async([OWSDispatch sessionStoreQueue], ^{
+        [[TSStorageManager sharedManager] resetSessionStore];
+        dispatch_async(dispatch_get_main_queue(), ^{
+            [[OWSIdentityManager sharedManager] clearIdentityState];
+        });
+    });
+}
+
++ (void)archiveSessionAndIdentityStore
+{
+    dispatch_async([OWSDispatch sessionStoreQueue], ^{
+        [[TSStorageManager sharedManager] archiveSessionStore];
+        dispatch_async(dispatch_get_main_queue(), ^{
+            [[OWSIdentityManager sharedManager] archiveIdentityState];
+        });
+    });
+}
+
++ (void)restoreSessionAndIdentityStore
+{
+    dispatch_async([OWSDispatch sessionStoreQueue], ^{
+        [[TSStorageManager sharedManager] restoreSessionStore];
+        dispatch_async(dispatch_get_main_queue(), ^{
+            [[OWSIdentityManager sharedManager] restoreIdentityState];
+        });
+    });
+}
+#endif
+
 @end
 
 NS_ASSUME_NONNULL_END
diff --git a/Signal/src/ViewControllers/DebugUI/DebugUITableViewController.m b/Signal/src/ViewControllers/DebugUI/DebugUITableViewController.m
index 47d07fb32e4..5213f74f2a6 100644
--- a/Signal/src/ViewControllers/DebugUI/DebugUITableViewController.m
+++ b/Signal/src/ViewControllers/DebugUI/DebugUITableViewController.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 #import "DebugUITableViewController.h"
@@ -79,9 +79,9 @@ + (void)presentDebugUIForThread:(TSThread *)thread fromViewController:(UIViewCon
         addObject:[self itemForSubsection:[DebugUIContacts new] viewController:viewController thread:thread]];
     [subsectionItems
         addObject:[self itemForSubsection:[DebugUIDiskUsage new] viewController:viewController thread:thread]];
+    [subsectionItems
+        addObject:[self itemForSubsection:[DebugUISessionState new] viewController:viewController thread:thread]];
     if ([thread isKindOfClass:[TSContactThread class]]) {
-        [subsectionItems
-            addObject:[self itemForSubsection:[DebugUISessionState new] viewController:viewController thread:thread]];
         [subsectionItems
             addObject:[self itemForSubsection:[DebugUICalling new] viewController:viewController thread:thread]];
     }
@@ -111,6 +111,8 @@ + (void)presentDebugUIFromViewController:(UIViewController *)fromViewController
     [subsectionItems addObject:[self itemForSubsection:[DebugUIContacts new] viewController:viewController thread:nil]];
     [subsectionItems
         addObject:[self itemForSubsection:[DebugUIDiskUsage new] viewController:viewController thread:nil]];
+    [subsectionItems
+        addObject:[self itemForSubsection:[DebugUISessionState new] viewController:viewController thread:nil]];
     [subsectionItems
         addObject:[self itemForSubsection:[DebugUISyncMessages new] viewController:viewController thread:nil]];
     [subsectionItems addObject:[self itemForSubsection:[DebugUIMisc new] viewController:viewController thread:nil]];
diff --git a/Signal/translations/ar.lproj/Localizable.strings b/Signal/translations/ar.lproj/Localizable.strings
index fd39ef3f9a7..2acc4398aac 100644
--- a/Signal/translations/ar.lproj/Localizable.strings
+++ b/Signal/translations/ar.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "وضع علامة \"تم التحقق\"";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "إعادة تعيين هذه الجلسة.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "إعادة تعيين هذه الجلسة";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "إتمام إنشاء المجموعة";
diff --git a/Signal/translations/az_AZ.lproj/Localizable.strings b/Signal/translations/az_AZ.lproj/Localizable.strings
index 14246943bca..5a0adf98440 100644
--- a/Signal/translations/az_AZ.lproj/Localizable.strings
+++ b/Signal/translations/az_AZ.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Sessiyanı yenidən başla.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Sessiyanı yenidən başla";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Finish creating group";
diff --git a/Signal/translations/bg.lproj/Localizable.strings b/Signal/translations/bg.lproj/Localizable.strings
index 83de7299782..0f750056504 100644
--- a/Signal/translations/bg.lproj/Localizable.strings
+++ b/Signal/translations/bg.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Маркирай като проверено";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Нулирай сесията.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Нулирай сесията";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Създай групата";
diff --git a/Signal/translations/bs.lproj/Localizable.strings b/Signal/translations/bs.lproj/Localizable.strings
index 1af7876e4ce..684b7d1464d 100644
--- a/Signal/translations/bs.lproj/Localizable.strings
+++ b/Signal/translations/bs.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Označi provjerenim";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Resetuj ovu sesiju.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Resetuj ovu sesiju";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Završi kreiranje grupe";
diff --git a/Signal/translations/ca.lproj/Localizable.strings b/Signal/translations/ca.lproj/Localizable.strings
index 27dfdfea6f7..3b5f289788f 100644
--- a/Signal/translations/ca.lproj/Localizable.strings
+++ b/Signal/translations/ca.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Marca com a verificat";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reinicia la sessió.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reinicia la sessió";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Acaba de crear el grup";
diff --git a/Signal/translations/cs.lproj/Localizable.strings b/Signal/translations/cs.lproj/Localizable.strings
index 3b17e1b27ff..b48ac6e9d75 100644
--- a/Signal/translations/cs.lproj/Localizable.strings
+++ b/Signal/translations/cs.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Označit jako ověřený";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Resetovat toto sezení.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Resetovat toto sezení";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Dokončit tvorbu skupiny";
diff --git a/Signal/translations/da.lproj/Localizable.strings b/Signal/translations/da.lproj/Localizable.strings
index 390fceb543c..3fc4470de92 100644
--- a/Signal/translations/da.lproj/Localizable.strings
+++ b/Signal/translations/da.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Nulstil denne session.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Nulstil denne session";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Færdigør gruppe opretning";
diff --git a/Signal/translations/fa.lproj/Localizable.strings b/Signal/translations/fa.lproj/Localizable.strings
index 7600f51bcdf..1fe008b1e92 100644
--- a/Signal/translations/fa.lproj/Localizable.strings
+++ b/Signal/translations/fa.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "علامت‌گذاری به عنوان تائید شده";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "بازگردانی این نشست به حالت اولیه.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "بازگردانی این نشست به حالت اولیه";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "اتمام ساخت گروه";
diff --git a/Signal/translations/fi.lproj/Localizable.strings b/Signal/translations/fi.lproj/Localizable.strings
index 20de5b8c3d0..7eeb7448c7a 100644
--- a/Signal/translations/fi.lproj/Localizable.strings
+++ b/Signal/translations/fi.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Merkitse varmennetuksi";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Alusta tämä istunto.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Alusta tämä istunto";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Päätä ryhmän luonti";
diff --git a/Signal/translations/fil.lproj/Localizable.strings b/Signal/translations/fil.lproj/Localizable.strings
index f3e21069f53..8c326dcd059 100644
--- a/Signal/translations/fil.lproj/Localizable.strings
+++ b/Signal/translations/fil.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reset this session.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reset this session";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Finish creating group";
diff --git a/Signal/translations/fr.lproj/Localizable.strings b/Signal/translations/fr.lproj/Localizable.strings
index b0c6295c696..d682bf5f41e 100644
--- a/Signal/translations/fr.lproj/Localizable.strings
+++ b/Signal/translations/fr.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Marquer comme vérifié";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Réinitialiser cette session.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Réinitialiser cette session";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Terminer la création du groupe";
diff --git a/Signal/translations/gl.lproj/Localizable.strings b/Signal/translations/gl.lproj/Localizable.strings
index cd0219b0ff6..d2c68d5025c 100644
--- a/Signal/translations/gl.lproj/Localizable.strings
+++ b/Signal/translations/gl.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Restablecer esta sesión.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Restablecer esta sesión";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Termina de crear o grupo";
diff --git a/Signal/translations/he.lproj/Localizable.strings b/Signal/translations/he.lproj/Localizable.strings
index 0fe7bdb1c37..41a098b8e88 100644
--- a/Signal/translations/he.lproj/Localizable.strings
+++ b/Signal/translations/he.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "סמן כמאומת";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "אתחול ההתחברות הזאת.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "אתחול ההתחברות הזאת";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "סיים יצירת קבוצה";
diff --git a/Signal/translations/hr.lproj/Localizable.strings b/Signal/translations/hr.lproj/Localizable.strings
index d64baba3f97..1b85c5c0a01 100644
--- a/Signal/translations/hr.lproj/Localizable.strings
+++ b/Signal/translations/hr.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Označi provjerenim";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Resetuj ovu sesiju.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Resetuj ovu sesiju";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Završi kreiranje grupe";
diff --git a/Signal/translations/hu.lproj/Localizable.strings b/Signal/translations/hu.lproj/Localizable.strings
index 3ebdf15e686..9b5646c8fa1 100644
--- a/Signal/translations/hu.lproj/Localizable.strings
+++ b/Signal/translations/hu.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Munkamenet alaphelyzetbe állítása.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Munkamenet alaphelyzetbe állítása";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Finish creating group";
diff --git a/Signal/translations/it_IT.lproj/Localizable.strings b/Signal/translations/it_IT.lproj/Localizable.strings
index f2033e0afaf..4378945b74f 100644
--- a/Signal/translations/it_IT.lproj/Localizable.strings
+++ b/Signal/translations/it_IT.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Segna come verificato";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Rosetta questa sessione.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Rosetta questa sessione";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Terminazione creazione gruppo";
diff --git a/Signal/translations/lt.lproj/Localizable.strings b/Signal/translations/lt.lproj/Localizable.strings
index d61a5f9a22e..9f915d19616 100644
--- a/Signal/translations/lt.lproj/Localizable.strings
+++ b/Signal/translations/lt.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Žymėti kaip patvirtintą";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Atstatyti šį seansą.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Atstatyti šį seansą";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Užbaigti grupės kūrimą";
diff --git a/Signal/translations/lv.lproj/Localizable.strings b/Signal/translations/lv.lproj/Localizable.strings
index 519c472b5ec..0663a831d81 100644
--- a/Signal/translations/lv.lproj/Localizable.strings
+++ b/Signal/translations/lv.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Pārtraukt šo sesiju.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Pārtraukt šo sesiju";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Finish creating group";
diff --git a/Signal/translations/mk.lproj/Localizable.strings b/Signal/translations/mk.lproj/Localizable.strings
index bf6364b3913..60486ac8b20 100644
--- a/Signal/translations/mk.lproj/Localizable.strings
+++ b/Signal/translations/mk.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Ресетирајте ја оваа сесија.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Ресетирајте ја оваа сесија";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Завршете со креирање на група";
diff --git a/Signal/translations/nb_NO.lproj/Localizable.strings b/Signal/translations/nb_NO.lproj/Localizable.strings
index 168b3b8233a..b08b5095002 100644
--- a/Signal/translations/nb_NO.lproj/Localizable.strings
+++ b/Signal/translations/nb_NO.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Merk som verifisert";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Tilbakestill denne sesjonen.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Tilbakestill denne sesjonen";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Fullfør oppretting av gruppe";
diff --git a/Signal/translations/nl.lproj/Localizable.strings b/Signal/translations/nl.lproj/Localizable.strings
index 91d52c0ac7e..7a9c9e9f026 100644
--- a/Signal/translations/nl.lproj/Localizable.strings
+++ b/Signal/translations/nl.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Markeren als geverifieerd";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Deze sessie opnieuw instellen.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Deze sessie opnieuw instellen";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Voltooi aanmaken van groep";
diff --git a/Signal/translations/pt_BR.lproj/Localizable.strings b/Signal/translations/pt_BR.lproj/Localizable.strings
index 8d07ccf6df5..95683f12630 100644
--- a/Signal/translations/pt_BR.lproj/Localizable.strings
+++ b/Signal/translations/pt_BR.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Marcar como verificado";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reiniciar esta sessão.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reiniciar esta sessão";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Terminar de criar grupo";
diff --git a/Signal/translations/pt_PT.lproj/Localizable.strings b/Signal/translations/pt_PT.lproj/Localizable.strings
index e03f8b04f4a..2166b1ca1ec 100644
--- a/Signal/translations/pt_PT.lproj/Localizable.strings
+++ b/Signal/translations/pt_PT.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = " Marcar como Verificado ";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reiniciar esta sessão.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reiniciar esta sessão";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Finalizar criação do grupo";
diff --git a/Signal/translations/ro.lproj/Localizable.strings b/Signal/translations/ro.lproj/Localizable.strings
index 01f649c1c95..3498399acb2 100644
--- a/Signal/translations/ro.lproj/Localizable.strings
+++ b/Signal/translations/ro.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Marchează ca verificat";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Resetează sesiunea.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Resetează sesiunea";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Grupul a fost creat";
diff --git a/Signal/translations/ru.lproj/Localizable.strings b/Signal/translations/ru.lproj/Localizable.strings
index 7599f6906be..af5ed3139b4 100644
--- a/Signal/translations/ru.lproj/Localizable.strings
+++ b/Signal/translations/ru.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Отметить как проверенный";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Сбросить сеанс связи.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Сбросить сеанс связи";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Завершение создания группы";
diff --git a/Signal/translations/sl.lproj/Localizable.strings b/Signal/translations/sl.lproj/Localizable.strings
index 15793e3dd7b..1b51c7ec7f1 100644
--- a/Signal/translations/sl.lproj/Localizable.strings
+++ b/Signal/translations/sl.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Označi kot potrjeno";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Ponastavi tekočo sejo.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Ponastavi tekočo sejo";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Končaj z ustvarjanjem skupine";
diff --git a/Signal/translations/sn.lproj/Localizable.strings b/Signal/translations/sn.lproj/Localizable.strings
index 19fdd82a8da..eb446fea00e 100644
--- a/Signal/translations/sn.lproj/Localizable.strings
+++ b/Signal/translations/sn.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Tangisa chikamu ichi.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Tangisa chikamu ichi";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Finish creating group";
diff --git a/Signal/translations/sq.lproj/Localizable.strings b/Signal/translations/sq.lproj/Localizable.strings
index 9ca355a2174..9ed1a90bf2b 100644
--- a/Signal/translations/sq.lproj/Localizable.strings
+++ b/Signal/translations/sq.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Mark as Verified";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reseto sesionin.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Reseto sesionin";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Finish creating group";
diff --git a/Signal/translations/sv_SE.lproj/Localizable.strings b/Signal/translations/sv_SE.lproj/Localizable.strings
index 2cb9fd4aecd..30c4d4a0b23 100644
--- a/Signal/translations/sv_SE.lproj/Localizable.strings
+++ b/Signal/translations/sv_SE.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Markera som verifierad";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Nollställ sessionen.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Nollställ sessionen";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Slutför skapa grupp";
diff --git a/Signal/translations/tr_TR.lproj/Localizable.strings b/Signal/translations/tr_TR.lproj/Localizable.strings
index ce2e3d76b33..9871e94e3aa 100644
--- a/Signal/translations/tr_TR.lproj/Localizable.strings
+++ b/Signal/translations/tr_TR.lproj/Localizable.strings
@@ -665,7 +665,7 @@
 "FINGERPRINT_SCAN_VERIFY_BUTTON" = "Onaylı olarak işaretle";
 
 /* No comment provided by engineer. */
-"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Oturumu yenile.";
+"FINGERPRINT_SHRED_KEYMATERIAL_BUTTON" = "Oturumu yenile";
 
 /* Accessibilty label for finishing new group */
 "FINISH_GROUP_CREATION_LABEL" = "Grup oluşturmayı tamamla";
diff --git a/SignalServiceKit/src/Account/TSAccountManager.m b/SignalServiceKit/src/Account/TSAccountManager.m
index 80a743f88d0..1d67ab05b0d 100644
--- a/SignalServiceKit/src/Account/TSAccountManager.m
+++ b/SignalServiceKit/src/Account/TSAccountManager.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 #import "TSAccountManager.h"
@@ -93,7 +93,9 @@ - (void)resetForRegistration
             [transaction removeAllObjectsInCollection:TSAccountManager_UserAccountCollection];
         }];
     }
-    [[TSStorageManager sharedManager] resetSessionStore];
+    dispatch_async([OWSDispatch sessionStoreQueue], ^{
+        [[TSStorageManager sharedManager] resetSessionStore];
+    });
 }
 
 + (BOOL)isRegistered
diff --git a/SignalServiceKit/src/Messages/OWSIdentityManager.h b/SignalServiceKit/src/Messages/OWSIdentityManager.h
index 51e94150b63..2cde37f4345 100644
--- a/SignalServiceKit/src/Messages/OWSIdentityManager.h
+++ b/SignalServiceKit/src/Messages/OWSIdentityManager.h
@@ -50,6 +50,14 @@ extern const NSUInteger kIdentityKeyLength;
 // This method can be called from any thread.
 - (void)processIncomingSyncMessage:(OWSSignalServiceProtosVerified *)verified;
 
+#pragma mark - Debug
+
+#if DEBUG
+- (void)clearIdentityState;
+- (void)archiveIdentityState;
+- (void)restoreIdentityState;
+#endif
+
 @end
 
 NS_ASSUME_NONNULL_END
diff --git a/SignalServiceKit/src/Messages/OWSIdentityManager.m b/SignalServiceKit/src/Messages/OWSIdentityManager.m
index d441b7f4709..7a613266581 100644
--- a/SignalServiceKit/src/Messages/OWSIdentityManager.m
+++ b/SignalServiceKit/src/Messages/OWSIdentityManager.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 #import "OWSIdentityManager.h"
@@ -8,6 +8,7 @@
 #import "NSNotificationCenter+OWS.h"
 #import "NotificationsProtocol.h"
 #import "OWSError.h"
+#import "OWSFileSystem.h"
 #import "OWSMessageSender.h"
 #import "OWSOutgoingNullMessage.h"
 #import "OWSRecipientIdentity.h"
@@ -133,8 +134,9 @@ - (nullable NSData *)identityKeyForRecipientId:(NSString *)recipientId
 
 - (nullable ECKeyPair *)identityKeyPair
 {
-    return [self.dbConnection keyPairForKey:TSStorageManagerIdentityKeyStoreIdentityKey
-                               inCollection:TSStorageManagerIdentityKeyStoreCollection];
+    ECKeyPair *_Nullable identityKeyPair = [self.dbConnection keyPairForKey:TSStorageManagerIdentityKeyStoreIdentityKey
+                                                               inCollection:TSStorageManagerIdentityKeyStoreCollection];
+    return identityKeyPair;
 }
 
 - (int)localRegistrationId
@@ -745,6 +747,58 @@ - (void)saveChangeMessagesForRecipientId:(NSString *)recipientId
     }];
 }
 
+#pragma mark - Debug
+
+#if DEBUG
+- (void)clearIdentityState
+{
+    [self.dbConnection readWriteWithBlock:^(YapDatabaseReadWriteTransaction *transaction) {
+        NSMutableArray<NSString *> *identityKeysToRemove = [NSMutableArray new];
+        [transaction enumerateKeysInCollection:TSStorageManagerIdentityKeyStoreCollection
+                                    usingBlock:^(NSString *_Nonnull key, BOOL *_Nonnull stop) {
+                                        if ([key isEqualToString:TSStorageManagerIdentityKeyStoreIdentityKey]) {
+                                            // Don't delete our own key.
+                                            return;
+                                        }
+                                        [identityKeysToRemove addObject:key];
+                                    }];
+        for (NSString *key in identityKeysToRemove) {
+            [transaction removeObjectForKey:key inCollection:TSStorageManagerIdentityKeyStoreCollection];
+        }
+        [transaction removeAllObjectsInCollection:TSStorageManagerTrustedKeysCollection];
+    }];
+}
+
+- (NSString *)identityKeySnapshotFilePath
+{
+    NSString *dirPath = [OWSFileSystem appDocumentDirectoryPath];
+    return [dirPath stringByAppendingPathComponent:@".identity-key-snapshot"];
+}
+
+- (NSString *)trustedKeySnapshotFilePath
+{
+    NSString *dirPath = [OWSFileSystem appDocumentDirectoryPath];
+    return [dirPath stringByAppendingPathComponent:@".trusted-key-snapshot"];
+}
+
+- (void)archiveIdentityState
+{
+    [self.dbConnection snapshotCollection:TSStorageManagerIdentityKeyStoreCollection
+                         snapshotFilePath:self.identityKeySnapshotFilePath];
+    [self.dbConnection snapshotCollection:TSStorageManagerTrustedKeysCollection
+                         snapshotFilePath:self.trustedKeySnapshotFilePath];
+}
+
+- (void)restoreIdentityState
+{
+    [self.dbConnection restoreSnapshotOfCollection:TSStorageManagerIdentityKeyStoreCollection
+                                  snapshotFilePath:self.identityKeySnapshotFilePath];
+    [self.dbConnection restoreSnapshotOfCollection:TSStorageManagerTrustedKeysCollection
+                                  snapshotFilePath:self.trustedKeySnapshotFilePath];
+}
+
+#endif
+
 #pragma mark - Notifications
 
 - (void)applicationDidBecomeActive:(NSNotification *)notification
diff --git a/SignalServiceKit/src/Storage/AxolotlStore/TSStorageManager+SessionStore.h b/SignalServiceKit/src/Storage/AxolotlStore/TSStorageManager+SessionStore.h
index 5dff6712bad..4bec5de02f9 100644
--- a/SignalServiceKit/src/Storage/AxolotlStore/TSStorageManager+SessionStore.h
+++ b/SignalServiceKit/src/Storage/AxolotlStore/TSStorageManager+SessionStore.h
@@ -1,9 +1,9 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
-#import <AxolotlKit/SessionStore.h>
 #import "TSStorageManager.h"
+#import <AxolotlKit/SessionStore.h>
 
 @interface TSStorageManager (SessionStore) <SessionStore>
 
@@ -12,6 +12,10 @@
 #pragma mark - debug
 
 - (void)resetSessionStore;
+#if DEBUG
+- (void)archiveSessionStore;
+- (void)restoreSessionStore;
+#endif
 - (void)printAllSessions;
 
 @end
diff --git a/SignalServiceKit/src/Storage/AxolotlStore/TSStorageManager+SessionStore.m b/SignalServiceKit/src/Storage/AxolotlStore/TSStorageManager+SessionStore.m
index b87309b59cb..0d6d9626309 100644
--- a/SignalServiceKit/src/Storage/AxolotlStore/TSStorageManager+SessionStore.m
+++ b/SignalServiceKit/src/Storage/AxolotlStore/TSStorageManager+SessionStore.m
@@ -1,8 +1,10 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
+#import "OWSFileSystem.h"
 #import "TSStorageManager+SessionStore.h"
+#import "YapDatabaseConnection+OWS.h"
 #import <AxolotlKit/SessionRecord.h>
 #import <YapDatabase/YapDatabase.h>
 
@@ -242,4 +244,28 @@ - (void)printAllSessions
     }];
 }
 
+#if DEBUG
+- (NSString *)snapshotFilePath
+{
+    NSString *dirPath = [OWSFileSystem appDocumentDirectoryPath];
+    return [dirPath stringByAppendingPathComponent:@".session-snapshot"];
+}
+
+- (void)archiveSessionStore
+{
+    AssertIsOnSessionStoreQueue();
+
+    [self.sessionDBConnection snapshotCollection:TSStorageManagerSessionStoreCollection
+                                snapshotFilePath:self.snapshotFilePath];
+}
+
+- (void)restoreSessionStore
+{
+    AssertIsOnSessionStoreQueue();
+
+    [self.sessionDBConnection restoreSnapshotOfCollection:TSStorageManagerSessionStoreCollection
+                                         snapshotFilePath:self.snapshotFilePath];
+}
+#endif
+
 @end
diff --git a/SignalServiceKit/src/Storage/YapDatabaseConnection+OWS.h b/SignalServiceKit/src/Storage/YapDatabaseConnection+OWS.h
index 5688a627396..584be964ca3 100644
--- a/SignalServiceKit/src/Storage/YapDatabaseConnection+OWS.h
+++ b/SignalServiceKit/src/Storage/YapDatabaseConnection+OWS.h
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 #import <YapDatabase/YapDatabaseConnection.h>
@@ -38,6 +38,13 @@ NS_ASSUME_NONNULL_BEGIN
 
 - (void)purgeCollection:(NSString *)collection;
 
+#pragma mark - Debug
+
+#if DEBUG
+- (void)snapshotCollection:(NSString *)collection snapshotFilePath:(NSString *)snapshotFilePath;
+- (void)restoreSnapshotOfCollection:(NSString *)collection snapshotFilePath:(NSString *)snapshotFilePath;
+#endif
+
 @end
 
 NS_ASSUME_NONNULL_END
diff --git a/SignalServiceKit/src/Storage/YapDatabaseConnection+OWS.m b/SignalServiceKit/src/Storage/YapDatabaseConnection+OWS.m
index 39b6eaa1fba..f1d67273610 100644
--- a/SignalServiceKit/src/Storage/YapDatabaseConnection+OWS.m
+++ b/SignalServiceKit/src/Storage/YapDatabaseConnection+OWS.m
@@ -1,11 +1,11 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 #import "YapDatabaseConnection+OWS.h"
-#import <Curve25519Kit/Curve25519.h>
 #import <AxolotlKit/PreKeyRecord.h>
 #import <AxolotlKit/SignedPrekeyRecord.h>
+#import <Curve25519Kit/Curve25519.h>
 #import <YapDatabase/YapDatabaseTransaction.h>
 
 NS_ASSUME_NONNULL_BEGIN
@@ -168,6 +168,47 @@ - (void)setDate:(NSDate *)value forKey:(NSString *)key inCollection:(NSString *)
     [self setObject:@(value.timeIntervalSince1970) forKey:key inCollection:collection];
 }
 
+#pragma mark - Debug
+
+#if DEBUG
+- (void)snapshotCollection:(NSString *)collection snapshotFilePath:(NSString *)snapshotFilePath
+{
+    OWSAssert(collection.length > 0);
+    OWSAssert(snapshotFilePath.length > 0);
+
+    NSMutableDictionary<NSString *, id> *snapshot = [NSMutableDictionary new];
+    [self readWithBlock:^(YapDatabaseReadTransaction *_Nonnull transaction) {
+        [transaction
+            enumerateKeysAndObjectsInCollection:collection
+                                     usingBlock:^(NSString *_Nonnull key, id _Nonnull value, BOOL *_Nonnull stop) {
+                                         snapshot[key] = value;
+                                     }];
+    }];
+    NSData *_Nullable data = [NSKeyedArchiver archivedDataWithRootObject:snapshot];
+    OWSAssert(data);
+    BOOL success = [data writeToFile:snapshotFilePath atomically:YES];
+    OWSAssert(success);
+}
+
+- (void)restoreSnapshotOfCollection:(NSString *)collection snapshotFilePath:(NSString *)snapshotFilePath
+{
+    OWSAssert(collection.length > 0);
+    OWSAssert(snapshotFilePath.length > 0);
+
+    NSData *_Nullable data = [NSData dataWithContentsOfFile:snapshotFilePath];
+    OWSAssert(data);
+    NSMutableDictionary<NSString *, id> *_Nullable snapshot = [NSKeyedUnarchiver unarchiveObjectWithData:data];
+    OWSAssert(snapshot);
+
+    [self readWriteWithBlock:^(YapDatabaseReadWriteTransaction *transaction) {
+        [transaction removeAllObjectsInCollection:collection];
+        [snapshot enumerateKeysAndObjectsUsingBlock:^(NSString *_Nonnull key, id _Nonnull value, BOOL *_Nonnull stop) {
+            [transaction setObject:value forKey:key inCollection:collection];
+        }];
+    }];
+}
+#endif
+
 @end
 
 NS_ASSUME_NONNULL_END
