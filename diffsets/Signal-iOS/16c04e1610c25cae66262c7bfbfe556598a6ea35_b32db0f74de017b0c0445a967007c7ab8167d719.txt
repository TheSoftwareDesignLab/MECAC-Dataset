diff --git a/Signal.xcodeproj/project.pbxproj b/Signal.xcodeproj/project.pbxproj
index f46b7e8f632..baa5b346a32 100644
--- a/Signal.xcodeproj/project.pbxproj
+++ b/Signal.xcodeproj/project.pbxproj
@@ -663,6 +663,15 @@
 		888F188623AC5A9E000780E9 /* SignalMessaging.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 453518921FC63DBF00210559 /* SignalMessaging.framework */; };
 		88905E9E229CCA96004E4234 /* ExpirationNagView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88905E9D229CCA96004E4234 /* ExpirationNagView.swift */; };
 		88A357B923639384009D6B9A /* MemberActionSheet.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A357B823639384009D6B9A /* MemberActionSheet.swift */; };
+		88A4CC09246CB0960082211F /* OnboardingTransferChoiceViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC08246CB0960082211F /* OnboardingTransferChoiceViewController.swift */; };
+		88A4CC0C246CC54E0082211F /* OnboardingTransferQRCodeViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC0B246CC54E0082211F /* OnboardingTransferQRCodeViewController.swift */; };
+		88A4CC0E246CD6CC0082211F /* OnboardingTransferProgressViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC0D246CD6CC0082211F /* OnboardingTransferProgressViewController.swift */; };
+		88A4CC10246CE2760082211F /* TransferProgressView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC0F246CE2760082211F /* TransferProgressView.swift */; };
+		88A4CC12246CE2F50082211F /* QRCodeView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC11246CE2F50082211F /* QRCodeView.swift */; };
+		88A4CC17246CE6190082211F /* DeviceTransferNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC16246CE6190082211F /* DeviceTransferNavigationController.swift */; };
+		88A4CC19246CE6810082211F /* DeviceTransferInitialViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC18246CE6810082211F /* DeviceTransferInitialViewController.swift */; };
+		88A4CC1B246CEC8B0082211F /* DeviceTransferQRScanningViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC1A246CEC8B0082211F /* DeviceTransferQRScanningViewController.swift */; };
+		88A4CC1D246D00090082211F /* DeviceTransferProgressViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A4CC1C246D00090082211F /* DeviceTransferProgressViewController.swift */; };
 		88A505F423DA16E10005C012 /* ExperienceUpgradeManager.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A505F323DA16E10005C012 /* ExperienceUpgradeManager.swift */; };
 		88A505FA23DBA1360005C012 /* IntroducingPINs.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A505F923DBA1360005C012 /* IntroducingPINs.swift */; };
 		88A505FC23DBAE4F0005C012 /* Reactions.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A505FB23DBAE4F0005C012 /* Reactions.swift */; };
@@ -1610,6 +1619,15 @@
 		88A358262364020B009D6B9A /* uk */ = {isa = PBXFileReference; lastKnownFileType = text.plist.strings; name = uk; path = translations/uk.lproj/Localizable.strings; sourceTree = "<group>"; };
 		88A3582723640240009D6B9A /* vi */ = {isa = PBXFileReference; lastKnownFileType = text.plist.strings; name = vi; path = translations/vi.lproj/Localizable.strings; sourceTree = "<group>"; };
 		88A35828236402D3009D6B9A /* hi */ = {isa = PBXFileReference; lastKnownFileType = text.plist.strings; name = hi; path = translations/bn.lproj/Localizable.strings; sourceTree = "<group>"; };
+		88A4CC08246CB0960082211F /* OnboardingTransferChoiceViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = OnboardingTransferChoiceViewController.swift; sourceTree = "<group>"; };
+		88A4CC0B246CC54E0082211F /* OnboardingTransferQRCodeViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = OnboardingTransferQRCodeViewController.swift; sourceTree = "<group>"; };
+		88A4CC0D246CD6CC0082211F /* OnboardingTransferProgressViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = OnboardingTransferProgressViewController.swift; sourceTree = "<group>"; };
+		88A4CC0F246CE2760082211F /* TransferProgressView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = TransferProgressView.swift; sourceTree = "<group>"; };
+		88A4CC11246CE2F50082211F /* QRCodeView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = QRCodeView.swift; sourceTree = "<group>"; };
+		88A4CC16246CE6190082211F /* DeviceTransferNavigationController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = DeviceTransferNavigationController.swift; sourceTree = "<group>"; };
+		88A4CC18246CE6810082211F /* DeviceTransferInitialViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = DeviceTransferInitialViewController.swift; sourceTree = "<group>"; };
+		88A4CC1A246CEC8B0082211F /* DeviceTransferQRScanningViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = DeviceTransferQRScanningViewController.swift; sourceTree = "<group>"; };
+		88A4CC1C246D00090082211F /* DeviceTransferProgressViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = DeviceTransferProgressViewController.swift; sourceTree = "<group>"; };
 		88A505F323DA16E10005C012 /* ExperienceUpgradeManager.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ExperienceUpgradeManager.swift; sourceTree = "<group>"; };
 		88A505F923DBA1360005C012 /* IntroducingPINs.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = IntroducingPINs.swift; sourceTree = "<group>"; };
 		88A505FB23DBAE4F0005C012 /* Reactions.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Reactions.swift; sourceTree = "<group>"; };
@@ -1913,6 +1931,7 @@
 		340FC875204DAC8C007AEB0F /* Registration */ = {
 			isa = PBXGroup;
 			children = (
+				88A4CC0A246CB2DC0082211F /* Device Transfer */,
 				4C3A2BC5235661AB004B3986 /* SecondaryLinking */,
 				3441FD9E21A3604F00BB9542 /* BackupRestoreViewController.swift */,
 				349ED98F221B0194008045B0 /* Onboarding2FAViewController.swift */,
@@ -2385,6 +2404,7 @@
 				3448BFC01EDF0EA7005B2D69 /* ConversationView */,
 				346B66301F4E29B200E5122F /* CropScaleImageViewController.swift */,
 				34D8C0221ED3673300188D7C /* DebugUI */,
+				88A4CC13246CE41E0082211F /* Device Transfer */,
 				340E9ABF235F876800FA362C /* ForwardMessageNavigationController.swift */,
 				34BECE2C1F7ABCE000D7438D /* GifPicker */,
 				34386A4C207D0C01009F5D9C /* HomeView */,
@@ -2989,6 +3009,7 @@
 				459311FB1D75C948008DD4F0 /* OWSDeviceTableViewCell.m */,
 				34330AA11E79686200DF2FB9 /* OWSProgressView.h */,
 				34330AA21E79686200DF2FB9 /* OWSProgressView.m */,
+				88A4CC11246CE2F50082211F /* QRCodeView.swift */,
 				4C1885D1218F8E1C00B67051 /* PhotoGridViewCell.swift */,
 				45D308AB2049A439000189E4 /* PinEntryView.h */,
 				45D308AC2049A439000189E4 /* PinEntryView.m */,
@@ -2996,9 +3017,10 @@
 				45A6DAD51EBBF85500893231 /* ReminderView.swift */,
 				450D19111F85236600970622 /* RemoteVideoView.h */,
 				450D19121F85236600970622 /* RemoteVideoView.m */,
+				4C63550122F15A6700A8ECE6 /* ThemeHeaderView.swift */,
+				88A4CC0F246CE2760082211F /* TransferProgressView.swift */,
 				34B6A902218B3F62007C4606 /* TypingIndicatorView.swift */,
 				4C043929220A9EC800BAEA63 /* VoiceNoteLock.swift */,
-				4C63550122F15A6700A8ECE6 /* ThemeHeaderView.swift */,
 			);
 			name = Views;
 			path = views;
@@ -3071,6 +3093,27 @@
 			path = images;
 			sourceTree = "<group>";
 		};
+		88A4CC0A246CB2DC0082211F /* Device Transfer */ = {
+			isa = PBXGroup;
+			children = (
+				88A4CC08246CB0960082211F /* OnboardingTransferChoiceViewController.swift */,
+				88A4CC0B246CC54E0082211F /* OnboardingTransferQRCodeViewController.swift */,
+				88A4CC0D246CD6CC0082211F /* OnboardingTransferProgressViewController.swift */,
+			);
+			path = "Device Transfer";
+			sourceTree = "<group>";
+		};
+		88A4CC13246CE41E0082211F /* Device Transfer */ = {
+			isa = PBXGroup;
+			children = (
+				88A4CC16246CE6190082211F /* DeviceTransferNavigationController.swift */,
+				88A4CC18246CE6810082211F /* DeviceTransferInitialViewController.swift */,
+				88A4CC1C246D00090082211F /* DeviceTransferProgressViewController.swift */,
+				88A4CC1A246CEC8B0082211F /* DeviceTransferQRScanningViewController.swift */,
+			);
+			path = "Device Transfer";
+			sourceTree = "<group>";
+		};
 		88A505F523DBA0C70005C012 /* Experience Upgrades */ = {
 			isa = PBXGroup;
 			children = (
@@ -4557,6 +4600,7 @@
 				886F08A7234958970085C27F /* InputAccessoryViewPlaceholder.swift in Sources */,
 				88C4E38024635337009C9B97 /* DeviceTransferService.swift in Sources */,
 				34D1F0501F7D45A60066283D /* GifPickerCell.swift in Sources */,
+				88A4CC0C246CC54E0082211F /* OnboardingTransferQRCodeViewController.swift in Sources */,
 				881677C522DD2B21007BAF49 /* OWSPinReminderViewController.swift in Sources */,
 				3496957421A301A100DCFE74 /* OWSBackupAPI.swift in Sources */,
 				34D99C931F2937CC00D284D6 /* OWSAnalytics.swift in Sources */,
@@ -4589,6 +4633,7 @@
 				4C4F5EBC22711EEB00F3DD01 /* SendMediaBottomButton.swift in Sources */,
 				88D1D40222EBB5A100F472C5 /* MessageRequestView.swift in Sources */,
 				45CD81EF1DC030E7004C9430 /* SyncPushTokensJob.swift in Sources */,
+				88A4CC0E246CD6CC0082211F /* OnboardingTransferProgressViewController.swift in Sources */,
 				4C0C36F8226647FE0083F19A /* ThreadMapping.swift in Sources */,
 				34D2CCE0206939B400CB1A14 /* DebugUIMessagesAssetLoader.m in Sources */,
 				3416BCAA227763A500E761B4 /* OWSMessageView.m in Sources */,
@@ -4624,6 +4669,7 @@
 				88A9729422FB4D02004B4FBF /* LocationPicker.swift in Sources */,
 				45B27B862037FFB400A539DF /* DebugUIFileBrowser.swift in Sources */,
 				340CCB6A23032762005243B3 /* YDBLegacyMigration.m in Sources */,
+				88A4CC09246CB0960082211F /* OnboardingTransferChoiceViewController.swift in Sources */,
 				3496955D219B605E00DCFE74 /* PhotoCollectionPickerController.swift in Sources */,
 				8835DDFD230CEE8900DC6B66 /* RecipientPickerDelegate.swift in Sources */,
 				34E6003A24251AD50026AD4B /* GroupViewUtils.swift in Sources */,
@@ -4642,10 +4688,12 @@
 				3496955E219B605E00DCFE74 /* PhotoLibrary.swift in Sources */,
 				349ED990221B0194008045B0 /* Onboarding2FAViewController.swift in Sources */,
 				45D231771DC7E8F10034FA89 /* SessionResetJob.swift in Sources */,
+				88A4CC19246CE6810082211F /* DeviceTransferInitialViewController.swift in Sources */,
 				340FC8A9204DAC8D007AEB0F /* NotificationSettingsOptionsViewController.m in Sources */,
 				3425648823E214BC0016905B /* OWSConversationSettingsViewController.swift in Sources */,
 				8835DE01230DBF7E00DC6B66 /* ComposeViewController.swift in Sources */,
 				452037D11EE84975004E4CDF /* DebugUISessionState.m in Sources */,
+				88A4CC12246CE2F50082211F /* QRCodeView.swift in Sources */,
 				D221A09A169C9E5E00537ABF /* main.m in Sources */,
 				3496957221A301A100DCFE74 /* OWSBackup.m in Sources */,
 				34B3F87B1E8DF1700035BE1A /* SplashViewController.swift in Sources */,
@@ -4677,6 +4725,7 @@
 				45C0DC1E1E69011F00E04C47 /* UIStoryboard+OWS.swift in Sources */,
 				4556FA681F54AA9500AF40DD /* DebugUIProfile.swift in Sources */,
 				4C2EBB7F2356B2B900BBC171 /* SecondaryLinkingSetDeviceNameViewController.swift in Sources */,
+				88A4CC17246CE6190082211F /* DeviceTransferNavigationController.swift in Sources */,
 				4C30E224234F9F34009558B7 /* SecondaryLinkingPrepViewController.swift in Sources */,
 				349439D624360C30001045F7 /* AddGroupMembersViewController.swift in Sources */,
 				45A6DAD61EBBF85500893231 /* ReminderView.swift in Sources */,
@@ -4699,6 +4748,7 @@
 				341341EF2187467A00192D59 /* ConversationViewModel.m in Sources */,
 				88D23D2723CEC0C700B0E74B /* WebRTCCallMessageHandler.swift in Sources */,
 				348BB25D20A0C5530047AEC2 /* ContactShareViewHelper.swift in Sources */,
+				88A4CC1B246CEC8B0082211F /* DeviceTransferQRScanningViewController.swift in Sources */,
 				34B3F8801E8DF1700035BE1A /* InviteFlow.swift in Sources */,
 				88535064240829950011D318 /* DateHeaderInteraction.swift in Sources */,
 				457C87B82032645C008D52D6 /* DebugUINotifications.swift in Sources */,
@@ -4730,6 +4780,7 @@
 				34ABC0E421DD20C500ED9469 /* ConversationMessageMapping.swift in Sources */,
 				34D8C0271ED3673300188D7C /* DebugUIMessages.m in Sources */,
 				880BFFEA234590FA00F6FAB1 /* ConversationSplitViewController.swift in Sources */,
+				88A4CC1D246D00090082211F /* DeviceTransferProgressViewController.swift in Sources */,
 				34DBF003206BD5A500025978 /* OWSMessageTextView.m in Sources */,
 				34D1F0B41F86D31D0066283D /* ConversationCollectionView.m in Sources */,
 				45D308AD2049A439000189E4 /* PinEntryView.m in Sources */,
@@ -4812,6 +4863,7 @@
 				3427C64320F500E000EEC730 /* OWSMessageTimerView.m in Sources */,
 				3448E15E221333F5004B052E /* OnboardingController.swift in Sources */,
 				340FC8BD204DAC8D007AEB0F /* ShowGroupMembersViewController.m in Sources */,
+				88A4CC10246CE2760082211F /* TransferProgressView.swift in Sources */,
 				3496956F21A301A100DCFE74 /* OWSBackupLazyRestore.swift in Sources */,
 				347B83F92436820C0019A52C /* GroupViewHelper.swift in Sources */,
 				4C9C510022F495F60054A33F /* BroadcastMediaMessageJob.swift in Sources */,
diff --git a/Signal/Images.xcassets/chevron-left-20.imageset/Contents.json b/Signal/Images.xcassets/chevron-left-20.imageset/Contents.json
new file mode 100644
index 00000000000..4e9f95bb7d5
--- /dev/null
+++ b/Signal/Images.xcassets/chevron-left-20.imageset/Contents.json
@@ -0,0 +1,12 @@
+{
+  "images" : [
+    {
+      "idiom" : "universal",
+      "filename" : "chevron-left-20.pdf"
+    }
+  ],
+  "info" : {
+    "version" : 1,
+    "author" : "xcode"
+  }
+}
\ No newline at end of file
diff --git a/Signal/Images.xcassets/chevron-left-20.imageset/chevron-left-20.pdf b/Signal/Images.xcassets/chevron-left-20.imageset/chevron-left-20.pdf
new file mode 100644
index 00000000000..52a48e24e88
Binary files /dev/null and b/Signal/Images.xcassets/chevron-left-20.imageset/chevron-left-20.pdf differ
diff --git a/Signal/Images.xcassets/chevron-right-20.imageset/Contents.json b/Signal/Images.xcassets/chevron-right-20.imageset/Contents.json
new file mode 100644
index 00000000000..71e2e2dd913
--- /dev/null
+++ b/Signal/Images.xcassets/chevron-right-20.imageset/Contents.json
@@ -0,0 +1,12 @@
+{
+  "images" : [
+    {
+      "idiom" : "universal",
+      "filename" : "chevron-right-20.pdf"
+    }
+  ],
+  "info" : {
+    "version" : 1,
+    "author" : "xcode"
+  }
+}
\ No newline at end of file
diff --git a/Signal/Images.xcassets/chevron-right-20.imageset/chevron-right-20.pdf b/Signal/Images.xcassets/chevron-right-20.imageset/chevron-right-20.pdf
new file mode 100644
index 00000000000..f087a924ed2
Binary files /dev/null and b/Signal/Images.xcassets/chevron-right-20.imageset/chevron-right-20.pdf differ
diff --git a/Signal/Images.xcassets/register-icon.imageset/Contents.json b/Signal/Images.xcassets/register-icon.imageset/Contents.json
new file mode 100644
index 00000000000..09fef82b9ed
--- /dev/null
+++ b/Signal/Images.xcassets/register-icon.imageset/Contents.json
@@ -0,0 +1,12 @@
+{
+  "images" : [
+    {
+      "idiom" : "universal",
+      "filename" : "register-icon.pdf"
+    }
+  ],
+  "info" : {
+    "version" : 1,
+    "author" : "xcode"
+  }
+}
\ No newline at end of file
diff --git a/Signal/Images.xcassets/register-icon.imageset/register-icon.pdf b/Signal/Images.xcassets/register-icon.imageset/register-icon.pdf
new file mode 100644
index 00000000000..c84601a4814
Binary files /dev/null and b/Signal/Images.xcassets/register-icon.imageset/register-icon.pdf differ
diff --git a/Signal/Images.xcassets/transfer-icon.imageset/Contents.json b/Signal/Images.xcassets/transfer-icon.imageset/Contents.json
new file mode 100644
index 00000000000..5af5b8d5bfd
--- /dev/null
+++ b/Signal/Images.xcassets/transfer-icon.imageset/Contents.json
@@ -0,0 +1,12 @@
+{
+  "images" : [
+    {
+      "idiom" : "universal",
+      "filename" : "transfer-icon.pdf"
+    }
+  ],
+  "info" : {
+    "version" : 1,
+    "author" : "xcode"
+  }
+}
\ No newline at end of file
diff --git a/Signal/Images.xcassets/transfer-icon.imageset/transfer-icon.pdf b/Signal/Images.xcassets/transfer-icon.imageset/transfer-icon.pdf
new file mode 100644
index 00000000000..a439e3cd7a4
Binary files /dev/null and b/Signal/Images.xcassets/transfer-icon.imageset/transfer-icon.pdf differ
diff --git a/Signal/src/AppDelegate.h b/Signal/src/AppDelegate.h
index 3c563548a97..22c6db734af 100644
--- a/Signal/src/AppDelegate.h
+++ b/Signal/src/AppDelegate.h
@@ -1,11 +1,14 @@
 //
-//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
 //
 
 #import <UIKit/UIKit.h>
 
 extern NSString *const AppDelegateStoryboardMain;
 
+extern NSString *const kURLSchemeSGNLKey;
+extern NSString *const kURLHostTransferPrefix;
+
 @interface AppDelegate : UIResponder <UIApplicationDelegate>
 
 @end
diff --git a/Signal/src/AppDelegate.m b/Signal/src/AppDelegate.m
index 126984885c8..852cee97d27 100644
--- a/Signal/src/AppDelegate.m
+++ b/Signal/src/AppDelegate.m
@@ -48,9 +48,10 @@
 NSString *const AppDelegateStoryboardMain = @"Main";
 
 static NSString *const kInitialViewControllerIdentifier = @"UserInitialViewController";
-static NSString *const kURLSchemeSGNLKey                = @"sgnl";
+NSString *const kURLSchemeSGNLKey = @"sgnl";
 static NSString *const kURLHostVerifyPrefix             = @"verify";
 static NSString *const kURLHostAddStickersPrefix = @"addstickers";
+NSString *const kURLHostTransferPrefix = @"transfer";
 
 static NSTimeInterval launchStartedAt;
 
diff --git a/Signal/src/Models/AccountManager.swift b/Signal/src/Models/AccountManager.swift
index 1241a75f3f5..f1f868a74a9 100644
--- a/Signal/src/Models/AccountManager.swift
+++ b/Signal/src/Models/AccountManager.swift
@@ -136,7 +136,7 @@ public class AccountManager: NSObject {
         }
     }
 
-    func register(verificationCode: String, pin: String?) -> Promise<Void> {
+    func register(verificationCode: String, pin: String?, checkForAvailableTransfer: Bool) -> Promise<Void> {
         guard verificationCode.count > 0 else {
             let error = OWSErrorWithCodeDescription(.userError,
                                                     NSLocalizedString("REGISTRATION_ERROR_BLANK_VERIFICATION_CODE",
@@ -146,7 +146,7 @@ public class AccountManager: NSObject {
 
         Logger.debug("registering with signal server")
         let registrationPromise: Promise<Void> = firstly {
-            self.registerForTextSecure(verificationCode: verificationCode, pin: pin)
+            self.registerForTextSecure(verificationCode: verificationCode, pin: pin, checkForAvailableTransfer: checkForAvailableTransfer)
         }.then { response -> Promise<Void> in
             assert(!FeatureFlags.allowUUIDOnlyContacts || response.uuid != nil)
             self.tsAccountManager.uuidAwaitingVerification = response.uuid
@@ -331,7 +331,7 @@ public class AccountManager: NSObject {
         var hasPreviouslyUsedKBS = false
     }
 
-    private func registerForTextSecure(verificationCode: String, pin: String?) -> Promise<RegistrationResponse> {
+    private func registerForTextSecure(verificationCode: String, pin: String?, checkForAvailableTransfer: Bool) -> Promise<RegistrationResponse> {
         let serverAuthToken = generateServerAuthToken()
 
         return Promise<Any?> { resolver in
@@ -342,7 +342,8 @@ public class AccountManager: NSObject {
             let request = OWSRequestFactory.verifyPrimaryDeviceRequest(verificationCode: verificationCode,
                                                                        phoneNumber: phoneNumber,
                                                                        authKey: serverAuthToken,
-                                                                       pin: pin)
+                                                                       pin: pin,
+                                                                       checkForAvailableTransfer: checkForAvailableTransfer)
 
             tsAccountManager.verifyAccount(with: request,
                                            success: resolver.fulfill,
diff --git a/Signal/src/Signal-Bridging-Header.h b/Signal/src/Signal-Bridging-Header.h
index 7db65488dc5..b9a45464254 100644
--- a/Signal/src/Signal-Bridging-Header.h
+++ b/Signal/src/Signal-Bridging-Header.h
@@ -7,6 +7,7 @@
 
 // Separate iOS Frameworks from other imports.
 #import "AVAudioSession+OWS.h"
+#import "AppDelegate.h"
 #import "AppSettingsViewController.h"
 #import "AttachmentUploadView.h"
 #import "AvatarViewHelper.h"
diff --git a/Signal/src/ViewControllers/Device Transfer/DeviceTransferInitialViewController.swift b/Signal/src/ViewControllers/Device Transfer/DeviceTransferInitialViewController.swift
new file mode 100644
index 00000000000..ed4299d9faf
--- /dev/null
+++ b/Signal/src/ViewControllers/Device Transfer/DeviceTransferInitialViewController.swift	
@@ -0,0 +1,46 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+
+class DeviceTransferInitialViewController: DeviceTransferBaseViewController {
+    override func viewDidLoad() {
+        super.viewDidLoad()
+
+        let titleLabel = self.titleLabel(
+            text: NSLocalizedString("DEVICE_TRANSFER_PROMPT_TITLE",
+                                    comment: "The title on the acttion sheet prompting the user if they want to transfer their device.")
+        )
+        contentView.addArrangedSubview(titleLabel)
+
+        contentView.addArrangedSubview(.spacer(withHeight: 12))
+
+        let explanationLabel = self.explanationLabel(
+            explanationText: NSLocalizedString("DEVICE_TRANSFER_PROMPT_EXPLANATION",
+                                               comment: "The explanation on the action sheet prompting the user if they want to transfer their device.")
+        )
+        contentView.addArrangedSubview(explanationLabel)
+
+        let topSpacer = UIView.vStretchingSpacer()
+        contentView.addArrangedSubview(topSpacer)
+
+        let iconView = UIImageView(image: #imageLiteral(resourceName: "transfer-icon"))
+        iconView.contentMode = .scaleAspectFit
+        iconView.autoSetDimension(.height, toSize: 110)
+        contentView.addArrangedSubview(iconView)
+
+        let bottomSpacer = UIView.vStretchingSpacer()
+        contentView.addArrangedSubview(bottomSpacer)
+        topSpacer.autoMatch(.height, to: .height, of: bottomSpacer)
+
+        let nextButton = button(title: CommonStrings.nextButton, selector: #selector(didTapNext))
+        contentView.addArrangedSubview(nextButton)
+    }
+
+    @objc
+    func didTapNext() {
+        let qrScanner = DeviceTransferQRScanningViewController()
+        navigationController?.pushViewController(qrScanner, animated: true)
+    }
+}
diff --git a/Signal/src/ViewControllers/Device Transfer/DeviceTransferNavigationController.swift b/Signal/src/ViewControllers/Device Transfer/DeviceTransferNavigationController.swift
new file mode 100644
index 00000000000..31320cde32f
--- /dev/null
+++ b/Signal/src/ViewControllers/Device Transfer/DeviceTransferNavigationController.swift	
@@ -0,0 +1,135 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+
+class DeviceTransferNavigationController: UINavigationController {
+    var deviceTransferService: DeviceTransferService { .shared }
+
+    required init() {
+        super.init(nibName: nil, bundle: nil)
+    }
+
+    override func viewDidLoad() {
+        super.viewDidLoad()
+
+        pushViewController(DeviceTransferInitialViewController(), animated: false)
+        setNavigationBarHidden(true, animated: false)
+
+        let dismissButton = UIButton()
+        dismissButton.setTemplateImageName("x-24", tintColor: Theme.primaryIconColor)
+        dismissButton.addTarget(self, action: #selector(tappedDismiss), for: .touchUpInside)
+
+        view.addSubview(dismissButton)
+
+        dismissButton.autoSetDimensions(to: CGSize(square: 40))
+        dismissButton.autoPinEdge(toSuperviewEdge: .leading, withInset: 8)
+        dismissButton.autoPinEdge(toSuperviewEdge: .top, withInset: 10)
+    }
+
+    required init?(coder aDecoder: NSCoder) {
+        fatalError("init(coder:) has not been implemented")
+    }
+
+    @objc
+    func tappedDismiss() {
+        AssertIsOnMainThread()
+
+        if let topVC = topViewController as? DeviceTransferBaseViewController, topVC.requiresDismissConfirmation {
+            let actionSheet = ActionSheetController(
+                title: NSLocalizedString("DEVICE_TRANSFER_CANCEL_CONFIRMATION_TITLE",
+                                         comment: "The title of the dialog asking the user if they want to cancel a device transfer"),
+                message: NSLocalizedString("DEVICE_TRANSFER_CANCEL_CONFIRMATION_MESSAGE",
+                                           comment: "The message of the dialog asking the user if they want to cancel a device transfer")
+            )
+            actionSheet.addAction(OWSActionSheets.cancelAction)
+
+            let okAction = ActionSheetAction(
+                title: CommonStrings.okayButton,
+                style: .default
+            ) { _ in
+                self.dismissActionSheet()
+            }
+            actionSheet.addAction(okAction)
+
+            present(actionSheet, animated: true)
+        } else {
+            dismissActionSheet()
+        }
+    }
+
+    func dismissActionSheet() {
+        AssertIsOnMainThread()
+
+        deviceTransferService.cancelTransferToNewDevice()
+
+        actionSheetController?.dismiss(animated: true, completion: nil)
+    }
+
+    var actionSheetController: ActionSheetController?
+    func present(fromViewController: UIViewController) {
+        let actionSheetController = ActionSheetController()
+        self.actionSheetController = actionSheetController
+        actionSheetController.customHeader = view
+        view.autoSetDimension(.height, toSize: 440)
+        fromViewController.presentActionSheet(actionSheetController)
+    }
+}
+
+class DeviceTransferBaseViewController: UIViewController {
+    var transferNavigationController: DeviceTransferNavigationController? {
+        return navigationController as? DeviceTransferNavigationController
+    }
+
+    var requiresDismissConfirmation: Bool { false }
+
+    let contentView = UIStackView()
+
+    override func loadView() {
+        view = UIView()
+        view.backgroundColor = Theme.backgroundColor
+
+        view.addSubview(contentView)
+        contentView.autoPinEdgesToSuperviewEdges()
+
+        contentView.isLayoutMarginsRelativeArrangement = true
+        contentView.layoutMargins = UIEdgeInsets(top: 16, leading: 32, bottom: 16, trailing: 32)
+        contentView.axis = .vertical
+    }
+
+    func titleLabel(text: String) -> UILabel {
+        let titleLabel = UILabel()
+        titleLabel.text = text
+        titleLabel.textColor = Theme.primaryTextColor
+        titleLabel.font = UIFont.ows_dynamicTypeTitle2.ows_semibold()
+        titleLabel.numberOfLines = 0
+        titleLabel.lineBreakMode = .byWordWrapping
+        titleLabel.textAlignment = .center
+        return titleLabel
+    }
+
+    func explanationLabel(explanationText: String) -> UILabel {
+        let explanationLabel = UILabel()
+        explanationLabel.textColor = Theme.secondaryTextAndIconColor
+        explanationLabel.font = .ows_dynamicTypeBody2
+        explanationLabel.text = explanationText
+        explanationLabel.numberOfLines = 0
+        explanationLabel.textAlignment = .center
+        explanationLabel.lineBreakMode = .byWordWrapping
+        return explanationLabel
+    }
+
+    func button(title: String, selector: Selector) -> OWSFlatButton {
+        let font = UIFont.ows_dynamicTypeBodyClamped.ows_semibold()
+        let buttonHeight = OWSFlatButton.heightForFont(font)
+        let button = OWSFlatButton.button(title: title,
+                                          font: font,
+                                          titleColor: .white,
+                                          backgroundColor: .ows_accentBlue,
+                                          target: self,
+                                          selector: selector)
+        button.autoSetDimension(.height, toSize: buttonHeight)
+        return button
+    }
+}
diff --git a/Signal/src/ViewControllers/Device Transfer/DeviceTransferProgressViewController.swift b/Signal/src/ViewControllers/Device Transfer/DeviceTransferProgressViewController.swift
new file mode 100644
index 00000000000..ac82e31dfdb
--- /dev/null
+++ b/Signal/src/ViewControllers/Device Transfer/DeviceTransferProgressViewController.swift	
@@ -0,0 +1,113 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+import MultipeerConnectivity
+
+class DeviceTransferProgressViewController: DeviceTransferBaseViewController {
+    var deviceTransferService: DeviceTransferService { .shared }
+
+    override var requiresDismissConfirmation: Bool { true }
+
+    let progressView: TransferProgressView
+    init(progress: Progress) {
+        self.progressView = TransferProgressView(progress: progress)
+        super.init(nibName: nil, bundle: nil)
+    }
+
+    required init?(coder: NSCoder) {
+        fatalError("init(coder:) has not been implemented")
+    }
+
+    override func viewDidLoad() {
+        super.viewDidLoad()
+
+        let titleLabel = self.titleLabel(
+            text: NSLocalizedString("DEVICE_TRANSFER_TRANSFERRING_TITLE",
+                                    comment: "The title on the action sheet that shows transfer progress")
+        )
+        contentView.addArrangedSubview(titleLabel)
+
+        contentView.addArrangedSubview(.spacer(withHeight: 12))
+
+        let explanationLabel = self.explanationLabel(
+            explanationText: NSLocalizedString("DEVICE_TRANSFER_TRANSFERRING_EXPLANATION",
+                                               comment: "The explanation on the action sheet that shows transfer progress")
+        )
+        contentView.addArrangedSubview(explanationLabel)
+
+        let topSpacer = UIView.vStretchingSpacer()
+        contentView.addArrangedSubview(topSpacer)
+
+        contentView.addArrangedSubview(progressView)
+
+        let bottomSpacer = UIView.vStretchingSpacer()
+        contentView.addArrangedSubview(bottomSpacer)
+        topSpacer.autoMatch(.height, to: .height, of: bottomSpacer)
+    }
+
+    override public func viewWillAppear(_ animated: Bool) {
+        super.viewWillAppear(animated)
+
+        progressView.startUpdatingProgress()
+
+        deviceTransferService.addObserver(self)
+    }
+
+    public override func viewWillDisappear(_ animated: Bool) {
+        super.viewWillDisappear(animated)
+
+        progressView.stopUpdatingProgress()
+
+        deviceTransferService.removeObserver(self)
+        deviceTransferService.cancelTransferFromOldDevice()
+    }
+
+    @objc
+    func didTapNext() {
+        let qrScanner = DeviceTransferQRScanningViewController()
+        navigationController?.pushViewController(qrScanner, animated: true)
+    }
+}
+
+extension DeviceTransferProgressViewController: DeviceTransferServiceObserver {
+    func deviceTransferServiceDiscoveredNewDevice(peerId: MCPeerID, discoveryInfo: [String: String]?) {}
+
+    func deviceTransferServiceDidStartTransfer(progress: Progress) {}
+
+    func deviceTransferServiceDidEndTransfer(error: DeviceTransferService.Error?) {
+        deviceTransferService.removeObserver(self)
+
+        guard let error = error else {
+            transferNavigationController?.dismissActionSheet()
+            return
+        }
+
+        switch error {
+        case .assertion:
+            progressView.renderError(
+                text: NSLocalizedString("DEVICE_TRANSFER_ERROR_GENERIC",
+                                        comment: "An error indicating that something went wrong with the transfer and it could not complete")
+            )
+        case .cancel:
+            // User initiated, nothing to do
+            break
+        case .certificateMismatch:
+            progressView.renderError(
+                text: NSLocalizedString("DEVICE_TRANSFER_ERROR_CERTIFICATE_MISMATCH",
+                                        comment: "An error indicating that we were unable to verify the indentity of the new device to complete the transfer")
+            )
+        case .notEnoughSpace:
+            owsFailDebug("This should never happen on the old device")
+        case .unsupportedVersion:
+            progressView.renderError(
+                text: NSLocalizedString("DEVICE_TRANSFER_ERROR_UNSUPPORTED_VERSION",
+                                        comment: "An error indicating the user must update their device before trying to transfer.")
+            )
+            break
+        case .modeMismatch:
+            owsFailDebug("this should never happen")
+        }
+    }
+}
diff --git a/Signal/src/ViewControllers/Device Transfer/DeviceTransferQRScanningViewController.swift b/Signal/src/ViewControllers/Device Transfer/DeviceTransferQRScanningViewController.swift
new file mode 100644
index 00000000000..2fa87adcf26
--- /dev/null
+++ b/Signal/src/ViewControllers/Device Transfer/DeviceTransferQRScanningViewController.swift	
@@ -0,0 +1,163 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+import ZXingObjC
+import MultipeerConnectivity
+
+class DeviceTransferQRScanningViewController: DeviceTransferBaseViewController {
+    var deviceTransferService: DeviceTransferService { .shared }
+
+    var capture: ZXCapture?
+    var isCapturing = false
+
+    lazy var maskingContainerView: UIView = {
+        let view = UIView()
+        view.addSubview(maskingView)
+        maskingView.autoPinHeightToSuperview()
+        maskingView.autoHCenterInSuperview()
+        return view
+    }()
+    lazy var maskingView: UIView = {
+        let maskingView = OWSBezierPathView()
+        maskingView.autoPinToSquareAspectRatio()
+        maskingView.configureShapeLayerBlock = { layer, bounds in
+            let path = UIBezierPath(rect: bounds)
+
+            let circlePath = UIBezierPath(roundedRect: bounds, cornerRadius: bounds.size.height * 0.5)
+            path.append(circlePath)
+            path.usesEvenOddFillRule = true
+
+            layer.path = path.cgPath
+            layer.fillRule = .evenOdd
+            layer.fillColor = Theme.backgroundColor.cgColor
+        }
+        return maskingView
+    }()
+
+    override func viewDidLoad() {
+        super.viewDidLoad()
+
+        let titleLabel = self.titleLabel(
+            text: NSLocalizedString("DEVICE_TRANSFER_SCANNING_TITLE",
+                                    comment: "The title for the action sheet asking the user to scan the QR code to transfer")
+        )
+        contentView.addArrangedSubview(titleLabel)
+
+        contentView.addArrangedSubview(.spacer(withHeight: 12))
+
+        let explanationLabel = self.explanationLabel(
+            explanationText: NSLocalizedString("DEVICE_TRANSFER_SCANNING_EXPLANATION",
+                                               comment: "The explanation for the action sheet asking the user to scan the QR code to transfer")
+        )
+        contentView.addArrangedSubview(explanationLabel)
+
+        contentView.addArrangedSubview(.spacer(withHeight: 25))
+
+        contentView.addArrangedSubview(maskingContainerView)
+
+        contentView.addArrangedSubview(.vStretchingSpacer())
+    }
+
+    override func viewWillAppear(_ animated: Bool) {
+        super.viewWillAppear(animated)
+
+        guard !isCapturing else { return }
+
+        DispatchQueue.global().async {
+            if let capture = self.capture {
+                capture.start()
+            } else {
+                let capture = ZXCapture()
+                self.capture = capture
+                capture.camera = capture.back()
+                capture.focusMode = .continuousAutoFocus
+                capture.delegate = self
+            }
+
+            DispatchQueue.main.async {
+                guard let capture = self.capture else { return }
+                capture.layer.frame = self.maskingView.frame
+                self.maskingContainerView.layer.addSublayer(capture.layer)
+                self.maskingContainerView.bringSubviewToFront(self.maskingView)
+                capture.start()
+
+                self.isCapturing = true
+            }
+        }
+    }
+
+    override func viewWillDisappear(_ animated: Bool) {
+        super.viewWillDisappear(animated)
+        capture?.stop()
+        isCapturing = false
+    }
+}
+
+extension DeviceTransferQRScanningViewController: ZXCaptureDelegate {
+    func captureResult(_ capture: ZXCapture!, result: ZXResult!) {
+        guard isCapturing else { return }
+
+        guard let result = result, let text = result.text, let scannedURL = URL(string: text) else {
+            return owsFailDebug("scan returned bad result")
+        }
+
+        capture?.stop()
+        isCapturing = false
+
+        do {
+            let (peerId, certificateHash) = try deviceTransferService.parseTrasnsferURL(scannedURL)
+            deviceTransferService.addObserver(self)
+            try deviceTransferService.transferAccountToNewDevice(with: peerId, certificateHash: certificateHash)
+        } catch {
+            owsFailDebug("Something went wrong \(error)")
+
+            if let error = error as? DeviceTransferService.Error {
+                switch error {
+                case .unsupportedVersion:
+                    OWSActionSheets.showActionSheet(
+                        title: NSLocalizedString("DEVICE_TRANSFER_ERROR_UNSUPPORTED_VERSION",
+                                                 comment: "An error indicating the user must update their device before trying to transfer.")
+                    )
+                    return
+                case .modeMismatch:
+                    let desiredMode: DeviceTransferService.TransferMode =
+                        TSAccountManager.sharedInstance().isPrimaryDevice ? .linked : .primary
+                    switch desiredMode {
+                    case .linked:
+                        OWSActionSheets.showActionSheet(
+                            title: NSLocalizedString("DEVICE_TRANSFER_ERROR_MODE_MISMATCH_LINKED",
+                                                     comment: "An error indicating the user must scan this code with a linked device to transfer.")
+                        )
+                    case .primary:
+                        OWSActionSheets.showActionSheet(
+                            title: NSLocalizedString("DEVICE_TRANSFER_ERROR_MODE_MISMATCH_PRIMARY",
+                                                     comment: "An error indicating the user must scan this code with a primary device to transfer.")
+                        )
+                    }
+                    return
+                default:
+                    break
+                }
+            }
+
+            OWSActionSheets.showActionSheet(
+                title: NSLocalizedString("DEVICE_TRANSFER_ERROR_GENERIC",
+                                         comment: "An error indicating that something went wrong with the transfer and it could not complete")
+            )
+        }
+    }
+}
+
+extension DeviceTransferQRScanningViewController: DeviceTransferServiceObserver {
+    func deviceTransferServiceDiscoveredNewDevice(peerId: MCPeerID, discoveryInfo: [String: String]?) {}
+
+    func deviceTransferServiceDidStartTransfer(progress: Progress) {
+        deviceTransferService.removeObserver(self)
+        let vc = DeviceTransferProgressViewController(progress: progress)
+        navigationController?.pushViewController(vc, animated: true)
+    }
+
+    func deviceTransferServiceDidEndTransfer(error: DeviceTransferService.Error?) {}
+}
diff --git a/Signal/src/ViewControllers/HomeView/ConversationSplitViewController.swift b/Signal/src/ViewControllers/HomeView/ConversationSplitViewController.swift
index 91cf81af59c..0314209b31b 100644
--- a/Signal/src/ViewControllers/HomeView/ConversationSplitViewController.swift
+++ b/Signal/src/ViewControllers/HomeView/ConversationSplitViewController.swift
@@ -3,18 +3,20 @@
 //
 
 import Foundation
+import MultipeerConnectivity
 
 @objc
 class ConversationSplitViewController: UISplitViewController, ConversationSplit {
 
     // MARK: - Dependencies
 
-    var databaseStorage: SDSDatabaseStorage {
-        return .shared
-    }
+    var databaseStorage: SDSDatabaseStorage { .shared }
+    var deviceTransferService: DeviceTransferService { .shared }
 
     // MARK: -
 
+    fileprivate var deviceTransferNavController: DeviceTransferNavigationController?
+
     private let conversationListVC = ConversationListViewController()
     private let detailPlaceholderVC = NoSelectedConversationViewController()
 
@@ -602,3 +604,30 @@ private class NoSelectedConversationViewController: OWSViewController {
         logoImageView.tintColor = Theme.isDarkThemeEnabled ? .ows_gray05 : .ows_gray65
     }
 }
+
+extension ConversationSplitViewController: DeviceTransferServiceObserver {
+    override func viewWillAppear(_ animated: Bool) {
+        super.viewWillAppear(animated)
+
+        deviceTransferService.addObserver(self)
+        deviceTransferService.startListeningForNewDevices()
+    }
+
+    override func viewWillDisappear(_ animated: Bool) {
+        super.viewWillDisappear(animated)
+
+        deviceTransferService.removeObserver(self)
+        deviceTransferService.stopListeningForNewDevices()
+    }
+
+    func deviceTransferServiceDiscoveredNewDevice(peerId: MCPeerID, discoveryInfo: [String: String]?) {
+        guard deviceTransferNavController?.presentingViewController == nil else { return }
+        let navController = DeviceTransferNavigationController()
+        deviceTransferNavController = navController
+        navController.present(fromViewController: self)
+    }
+
+    func deviceTransferServiceDidStartTransfer(progress: Progress) {}
+
+    func deviceTransferServiceDidEndTransfer(error: DeviceTransferService.Error?) {}
+}
diff --git a/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferChoiceViewController.swift b/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferChoiceViewController.swift
new file mode 100644
index 00000000000..27b63e363f9
--- /dev/null
+++ b/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferChoiceViewController.swift	
@@ -0,0 +1,194 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import UIKit
+
+@objc
+public class OnboardingTransferChoiceViewController: OnboardingBaseViewController {
+
+    override var primaryLayoutMargins: UIEdgeInsets {
+        var defaultMargins = super.primaryLayoutMargins
+        // we want the choice buttons to have less padding on the left and right. consequently,
+        // we will need to add an extra 16 to all the text on this page.
+        defaultMargins.left = 16
+        defaultMargins.right = 16
+        return defaultMargins
+    }
+
+    override public func loadView() {
+        view = UIView()
+        view.addSubview(primaryView)
+        primaryView.autoPinEdgesToSuperviewEdges()
+
+        view.backgroundColor = Theme.backgroundColor
+
+        let titleLabel = self.titleLabel(
+            text: NSLocalizedString("DEVICE_TRANSFER_CHOICE_TITLE",
+                                    comment: "The title for the device transfer 'choice' view")
+        )
+        titleLabel.accessibilityIdentifier = "onboarding.transferChoice." + "titleLabel"
+
+        let explanationLabel = self.explanationLabel(
+            explanationText: NSLocalizedString("DEVICE_TRANSFER_CHOICE_EXPLANATION",
+                                               comment: "The explanation for the device transfer 'choice' view")
+        )
+        explanationLabel.accessibilityIdentifier = "onboarding.transferChoice." + "explanationLabel"
+
+        let warningLabel = self.explanationLabel(
+            explanationText: NSLocalizedString("DEVICE_TRANSFER_CHOICE_WARNING",
+                                               comment: "A warning for the device transfer 'choice' view indicating you can only have one device registered with your number")
+        )
+        warningLabel.accessibilityIdentifier = "onboarding.transferChoice." + "warningLabel"
+
+        let transferButton = choiceButton(
+            title: NSLocalizedString("DEVICE_TRANSFER_CHOICE_TRANSFER_TITLE",
+                                     comment: "The title for the device transfer 'choice' view 'transfer' option"),
+            body: NSLocalizedString("DEVICE_TRANSFER_CHOICE_TRANSFER_BODY",
+                                    comment: "The body for the device transfer 'choice' view 'transfer' option"),
+            icon: #imageLiteral(resourceName: "transfer-icon"),
+            selector: #selector(didSelectTransfer)
+        )
+        transferButton.accessibilityIdentifier = "onboarding.transferChoice." + "transferButton"
+
+        let registerButton = choiceButton(
+            title: NSLocalizedString("DEVICE_TRANSFER_CHOICE_REGISTER_TITLE",
+                                     comment: "The title for the device transfer 'choice' view 'register' option"),
+            body: NSLocalizedString("DEVICE_TRANSFER_CHOICE_REGISTER_BODY",
+                                    comment: "The body for the device transfer 'choice' view 'register' option"),
+            icon: #imageLiteral(resourceName: "register-icon"),
+            selector: #selector(didSelectRegister)
+        )
+        registerButton.accessibilityIdentifier = "onboarding.transferChoice." + "registerButton"
+
+        let topStackView = UIStackView(arrangedSubviews: [
+            titleLabel,
+            UIView.spacer(withHeight: 12),
+            explanationLabel
+        ])
+        topStackView.axis = .vertical
+        topStackView.alignment = .fill
+        topStackView.isLayoutMarginsRelativeArrangement = true
+        topStackView.layoutMargins = UIEdgeInsets(top: 0, leading: 16, bottom: 0, trailing: 16)
+
+        let bottomStackView = UIStackView(arrangedSubviews: [warningLabel])
+        bottomStackView.axis = .vertical
+        bottomStackView.alignment = .fill
+        bottomStackView.isLayoutMarginsRelativeArrangement = true
+        bottomStackView.layoutMargins = UIEdgeInsets(top: 0, leading: 16, bottom: 0, trailing: 16)
+
+        let topSpacer = UIView.vStretchingSpacer()
+        let bottomSpacer = UIView.vStretchingSpacer()
+
+        let stackView = UIStackView(arrangedSubviews: [
+            topStackView,
+            topSpacer,
+            transferButton,
+            UIView.spacer(withHeight: 12),
+            registerButton,
+            bottomSpacer,
+            bottomStackView
+        ])
+        stackView.axis = .vertical
+        stackView.alignment = .fill
+        primaryView.addSubview(stackView)
+        stackView.autoPinEdgesToSuperviewMargins()
+
+        topSpacer.autoMatch(.height, to: .height, of: bottomSpacer)
+    }
+
+    func choiceButton(title: String, body: String, icon: UIImage, selector: Selector) -> OWSFlatButton {
+        let button = OWSFlatButton()
+        button.setBackgroundColors(upColor: Theme.isDarkThemeEnabled ? .ows_gray80 : .ows_gray02)
+        button.layer.cornerRadius = 8
+        button.clipsToBounds = true
+
+        // Icon
+
+        let iconContainer = UIView()
+        let iconView = UIImageView(image: icon)
+        iconView.contentMode = .scaleAspectFit
+        iconContainer.addSubview(iconView)
+        iconView.autoPinWidthToSuperview()
+        iconView.autoSetDimensions(to: CGSize(square: 56))
+        iconView.autoVCenterInSuperview()
+        iconView.autoMatch(.height, to: .height, of: iconContainer, withOffset: 0, relation: .lessThanOrEqual)
+
+        // Labels
+
+        let titleLabel = UILabel()
+        titleLabel.text = title
+        titleLabel.numberOfLines = 0
+        titleLabel.lineBreakMode = .byWordWrapping
+        titleLabel.font = UIFont.ows_dynamicTypeBody.ows_semibold()
+        titleLabel.textColor = Theme.primaryTextColor
+
+        let bodyLabel = UILabel()
+        bodyLabel.text = body
+        bodyLabel.numberOfLines = 0
+        bodyLabel.lineBreakMode = .byWordWrapping
+        bodyLabel.font = .ows_dynamicTypeBody2
+        bodyLabel.textColor = Theme.secondaryTextAndIconColor
+
+        let topSpacer = UIView.vStretchingSpacer()
+        let bottomSpacer = UIView.vStretchingSpacer()
+
+        let vStack = UIStackView(arrangedSubviews: [
+            topSpacer,
+            titleLabel,
+            bodyLabel,
+            bottomSpacer
+        ])
+        vStack.axis = .vertical
+        vStack.spacing = 8
+
+        topSpacer.autoMatch(.height, to: .height, of: bottomSpacer)
+
+        // Disclosure Indicator
+
+        let disclosureIconName = CurrentAppContext().isRTL ? "chevron-left-20" : "chevron-right-20"
+
+        let disclosureContainer = UIView()
+        let disclosureView = UIImageView()
+        disclosureView.setTemplateImageName(disclosureIconName, tintColor: Theme.secondaryTextAndIconColor)
+        disclosureView.contentMode = .scaleAspectFit
+        disclosureContainer.addSubview(disclosureView)
+        disclosureView.autoPinEdgesToSuperviewEdges()
+        disclosureView.autoSetDimension(.width, toSize: 20)
+
+        let hStack = UIStackView(arrangedSubviews: [
+            iconContainer,
+            vStack,
+            disclosureContainer
+        ])
+        hStack.axis = .horizontal
+        hStack.spacing = 16
+        hStack.isLayoutMarginsRelativeArrangement = true
+        hStack.layoutMargins = UIEdgeInsets(top: 24, leading: 10, bottom: 24, trailing: 8.5)
+        hStack.isUserInteractionEnabled = false
+
+        button.addSubview(hStack)
+        hStack.autoPinEdgesToSuperviewEdges()
+
+        button.addTarget(target: self, selector: selector)
+
+        return button
+    }
+
+    // MARK: - Events
+
+    @objc func didSelectTransfer() {
+        Logger.info("")
+
+        onboardingController.transferAccount(fromViewController: self)
+    }
+
+    @objc func didSelectRegister() {
+        Logger.info("")
+
+        onboardingController.submitVerification(fromViewController: self, checkForAvailableTransfer: false, completion: { outcome in
+            guard outcome != .success else { return }
+            owsFailDebug("Unexpected error on transfer choice view \(outcome)")
+        })
+    }
+}
diff --git a/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferProgressViewController.swift b/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferProgressViewController.swift
new file mode 100644
index 00000000000..234e985ca84
--- /dev/null
+++ b/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferProgressViewController.swift	
@@ -0,0 +1,129 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import UIKit
+import MultipeerConnectivity
+
+@objc
+public class OnboardingTransferProgressViewController: OnboardingBaseViewController {
+    var deviceTransferService: DeviceTransferService { .shared }
+
+    let progressView: TransferProgressView
+
+    public init(onboardingController: OnboardingController, progress: Progress) {
+        self.progressView = TransferProgressView(progress: progress)
+        super.init(onboardingController: onboardingController)
+    }
+
+    override public func loadView() {
+        view = UIView()
+        view.addSubview(primaryView)
+        primaryView.autoPinEdgesToSuperviewEdges()
+
+        view.backgroundColor = Theme.backgroundColor
+
+        let titleLabel = self.titleLabel(
+            text: NSLocalizedString("DEVICE_TRANSFER_RECEIVING_TITLE",
+                                    comment: "The title on the view that shows receiving progress")
+        )
+        primaryView.addSubview(titleLabel)
+        titleLabel.accessibilityIdentifier = "onboarding.transferProgress.titleLabel"
+        titleLabel.setContentHuggingHigh()
+
+        let explanationLabel = self.explanationLabel(
+            explanationText: NSLocalizedString("DEVICE_TRANSFER_RECEIVING_EXPLANATION",
+                                               comment: "The explanation on the view that shows receiving progress")
+        )
+        explanationLabel.accessibilityIdentifier = "onboarding.transferProgress.bodyLabel"
+        explanationLabel.setContentHuggingHigh()
+
+        let cancelButton = self.linkButton(title: CommonStrings.cancelButton, selector: #selector(didTapCancel))
+
+        let topSpacer = UIView.vStretchingSpacer()
+        let bottomSpacer = UIView.vStretchingSpacer()
+
+        let stackView = UIStackView(arrangedSubviews: [
+            titleLabel,
+            explanationLabel,
+            topSpacer,
+            progressView,
+            bottomSpacer,
+            cancelButton
+        ])
+        stackView.axis = .vertical
+        stackView.alignment = .fill
+        stackView.spacing = 12
+        primaryView.addSubview(stackView)
+        stackView.autoPinEdgesToSuperviewMargins()
+
+        topSpacer.autoMatch(.height, to: .height, of: bottomSpacer)
+    }
+
+    override public func viewWillAppear(_ animated: Bool) {
+        super.viewWillAppear(animated)
+
+        progressView.startUpdatingProgress()
+
+        deviceTransferService.addObserver(self)
+    }
+
+    public override func viewWillDisappear(_ animated: Bool) {
+        super.viewWillDisappear(animated)
+
+        progressView.stopUpdatingProgress()
+
+        deviceTransferService.removeObserver(self)
+        deviceTransferService.cancelTransferFromOldDevice()
+    }
+
+    // MARK: - Events
+
+    @objc
+    func didTapCancel() {
+        Logger.info("")
+
+        guard let navigationController = navigationController else {
+            return owsFailDebug("unexpectedly missing nav controller")
+        }
+
+        onboardingController.pushStartDeviceRegistrationView(onto: navigationController)
+    }
+}
+
+extension OnboardingTransferProgressViewController: DeviceTransferServiceObserver {
+    func deviceTransferServiceDiscoveredNewDevice(peerId: MCPeerID, discoveryInfo: [String: String]?) {}
+
+    func deviceTransferServiceDidStartTransfer(progress: Progress) {}
+
+    func deviceTransferServiceDidEndTransfer(error: DeviceTransferService.Error?) {
+        guard let error = error else { return }
+
+        switch error {
+        case .assertion:
+            progressView.renderError(
+                text: NSLocalizedString("DEVICE_TRANSFER_ERROR_GENERIC",
+                                        comment: "An error indicating that something went wrong with the transfer and it could not complete")
+            )
+        case .cancel:
+            // User initiated, nothing to do
+            break
+        case .certificateMismatch:
+            owsFailDebug("This should never happen on the new device")
+        case .notEnoughSpace:
+            progressView.renderError(
+                text: NSLocalizedString("DEVICE_TRANSFER_ERROR_NOT_ENOUGH_SPACE",
+                                        comment: "An error indicating that the user does not have enough free space on their device to complete the transfer")
+            )
+            break
+        case .unsupportedVersion:
+            progressView.renderError(
+                text: NSLocalizedString("DEVICE_TRANSFER_ERROR_UNSUPPORTED_VERSION",
+                                        comment: "An error indicating the user must update their device before trying to transfer.")
+            )
+            break
+        case .modeMismatch:
+            owsFailDebug("This should never happen on the new device")
+        }
+    }
+}
diff --git a/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferQRCodeViewController.swift b/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferQRCodeViewController.swift
new file mode 100644
index 00000000000..faffb2297e7
--- /dev/null
+++ b/Signal/src/ViewControllers/Registration/Device Transfer/OnboardingTransferQRCodeViewController.swift	
@@ -0,0 +1,109 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+import MultipeerConnectivity
+
+public class OnboardingTransferQRCodeViewController: OnboardingBaseViewController {
+
+    var deviceTransferService: DeviceTransferService { .shared }
+
+    private let qrCodeView = QRCodeView()
+
+    override public func loadView() {
+        view = UIView()
+        view.addSubview(primaryView)
+        primaryView.autoPinEdgesToSuperviewEdges()
+
+        view.backgroundColor = Theme.backgroundColor
+
+        let titleLabel = self.titleLabel(
+            text: NSLocalizedString("DEVICE_TRANSFER_QRCODE_TITLE",
+                                    comment: "The title for the device transfer qr code view")
+        )
+        primaryView.addSubview(titleLabel)
+        titleLabel.accessibilityIdentifier = "onboarding.transferQRCode.titleLabel"
+        titleLabel.setContentHuggingHigh()
+
+        let explanationLabel = self.explanationLabel(
+            explanationText: NSLocalizedString("DEVICE_TRANSFER_QRCODE_EXPLANATION",
+                                               comment: "The explanation for the device transfer qr code view")
+        )
+        explanationLabel.accessibilityIdentifier = "onboarding.transferQRCode.bodyLabel"
+        explanationLabel.setContentHuggingHigh()
+
+        qrCodeView.setContentHuggingVerticalLow()
+
+        let explanationLabel2 = self.explanationLabel(
+            explanationText: NSLocalizedString("DEVICE_TRANSFER_QRCODE_EXPLANATION2",
+            comment: "The second explanation for the device transfer qr code view")
+        )
+        explanationLabel2.setContentHuggingHigh()
+
+        let cancelButton = self.linkButton(title: CommonStrings.cancelButton, selector: #selector(didTapCancel))
+
+        let stackView = UIStackView(arrangedSubviews: [
+            titleLabel,
+            explanationLabel,
+            qrCodeView,
+            explanationLabel2,
+            UIView.vStretchingSpacer(),
+            cancelButton
+        ])
+        stackView.axis = .vertical
+        stackView.alignment = .fill
+        stackView.spacing = 12
+        primaryView.addSubview(stackView)
+        stackView.autoPinEdgesToSuperviewMargins()
+    }
+
+    override public func viewDidAppear(_ animated: Bool) {
+        super.viewDidAppear(animated)
+
+        deviceTransferService.addObserver(self)
+
+        do {
+            let url = try deviceTransferService.startAcceptingTransfersFromOldDevices(
+                mode: onboardingController.onboardingMode == .provisioning ? .linked : .primary
+            )
+            try qrCodeView.setQR(url: url)
+        } catch {
+            owsFailDebug("error \(error)")
+        }
+    }
+
+    public override func viewWillDisappear(_ animated: Bool) {
+        super.viewWillDisappear(animated)
+
+        deviceTransferService.removeObserver(self)
+        deviceTransferService.stopAcceptingTransfersFromOldDevices()
+    }
+
+    // MARK: - Events
+
+    @objc
+    func didTapCancel() {
+        Logger.info("")
+
+        guard let navigationController = navigationController else {
+            return owsFailDebug("unexpectedly missing nav controller")
+        }
+
+        onboardingController.pushStartDeviceRegistrationView(onto: navigationController)
+    }
+}
+
+extension OnboardingTransferQRCodeViewController: DeviceTransferServiceObserver {
+    func deviceTransferServiceDiscoveredNewDevice(peerId: MCPeerID, discoveryInfo: [String: String]?) {}
+
+    func deviceTransferServiceDidStartTransfer(progress: Progress) {
+        onboardingController.accountTransferInProgress(fromViewController: self, progress: progress)
+    }
+
+    func deviceTransferServiceDidEndTransfer(error: DeviceTransferService.Error?) {
+        if let error = error {
+            owsFailDebug("unexpected error while rendering QR code \(error)")
+        }
+    }
+}
diff --git a/Signal/src/ViewControllers/Registration/OnboardingBaseViewController.swift b/Signal/src/ViewControllers/Registration/OnboardingBaseViewController.swift
index 96337462f39..0ad2e023d3a 100644
--- a/Signal/src/ViewControllers/Registration/OnboardingBaseViewController.swift
+++ b/Signal/src/ViewControllers/Registration/OnboardingBaseViewController.swift
@@ -102,6 +102,8 @@ public class OnboardingBaseViewController: OWSViewController {
     public override func viewDidLoad() {
         super.viewDidLoad()
 
+        primaryView.layoutMargins = primaryLayoutMargins
+
         self.shouldBottomViewReserveSpaceForKeyboard = true
 
         if shouldShowBackButton() {
diff --git a/Signal/src/ViewControllers/Registration/OnboardingController.swift b/Signal/src/ViewControllers/Registration/OnboardingController.swift
index e21bf74e1fe..82dcd89467d 100644
--- a/Signal/src/ViewControllers/Registration/OnboardingController.swift
+++ b/Signal/src/ViewControllers/Registration/OnboardingController.swift
@@ -329,7 +329,7 @@ public class OnboardingController: NSObject {
         pushStartDeviceRegistrationView(onto: navigationController)
     }
 
-    private func pushStartDeviceRegistrationView(onto navigationController: UINavigationController) {
+    func pushStartDeviceRegistrationView(onto navigationController: UINavigationController) {
         AssertIsOnMainThread()
 
         if onboardingMode == .provisioning {
@@ -717,6 +717,65 @@ public class OnboardingController: NSObject {
                                         message: nsError.localizedRecoverySuggestion)
     }
 
+    // MARK: - Transfer
+
+    func transferAccount(fromViewController: UIViewController) {
+        AssertIsOnMainThread()
+
+        Logger.info("")
+
+        guard let navigationController = fromViewController.navigationController else {
+            owsFailDebug("Missing navigationController")
+            return
+        }
+
+        guard !(navigationController.topViewController is OnboardingTransferQRCodeViewController) else {
+            // qr code view is already presented, we don't need to push it again.
+            return
+        }
+
+        let view = OnboardingTransferQRCodeViewController(onboardingController: self)
+        navigationController.pushViewController(view, animated: true)
+    }
+
+    func accountTransferInProgress(fromViewController: UIViewController, progress: Progress) {
+        AssertIsOnMainThread()
+
+        Logger.info("")
+
+        guard let navigationController = fromViewController.navigationController else {
+            owsFailDebug("Missing navigationController")
+            return
+        }
+
+        guard !(navigationController.topViewController is OnboardingTransferProgressViewController) else {
+            // qr code view is already presented, we don't need to push it again.
+            return
+        }
+
+        let view = OnboardingTransferProgressViewController(onboardingController: self, progress: progress)
+        navigationController.pushViewController(view, animated: true)
+    }
+
+    public func presentTransferOptions(viewController: UIViewController) {
+        AssertIsOnMainThread()
+
+        Logger.info("")
+
+        guard let navigationController = viewController.navigationController else {
+            owsFailDebug("Missing navigationController")
+            return
+        }
+
+        guard !(navigationController.topViewController is OnboardingTransferChoiceViewController) else {
+            // transfer view is already presented, we don't need to push it again.
+            return
+        }
+
+        let view = OnboardingTransferChoiceViewController(onboardingController: self)
+        navigationController.pushViewController(view, animated: true)
+    }
+
     // MARK: - Verification
 
     public enum VerificationOutcome: Equatable {
@@ -732,6 +791,7 @@ public class OnboardingController: NSObject {
     }
 
     public func submitVerification(fromViewController: UIViewController,
+                                   checkForAvailableTransfer: Bool = true,
                                    completion : @escaping (VerificationOutcome) -> Void) {
         AssertIsOnMainThread()
 
@@ -801,7 +861,11 @@ public class OnboardingController: NSObject {
         ModalActivityIndicatorViewController.present(fromViewController: fromViewController,
                                                      canCancel: true) { (modal) in
 
-                                                        self.accountManager.register(verificationCode: verificationCode, pin: twoFAPin)
+                                                        self.accountManager.register(
+                                                            verificationCode: verificationCode,
+                                                            pin: twoFAPin,
+                                                            checkForAvailableTransfer: checkForAvailableTransfer
+                                                        )
                                                             .then { _ -> Promise<Void> in
                                                                 // Re-enable 2FA and RegLock with the registered pin, if any
                                                                 if let pin = twoFAPin {
@@ -855,6 +919,11 @@ public class OnboardingController: NSObject {
             completion(.invalid2FAPin)
 
             onboardingDidRequire2FAPin(viewController: fromViewController)
+        } else if error.domain == OWSSignalServiceKitErrorDomain &&
+            error.code == OWSErrorCode.registrationTransferAvailable.rawValue {
+            Logger.info("Transfer available")
+
+            presentTransferOptions(viewController: fromViewController)
         } else {
             if error.domain == OWSSignalServiceKitErrorDomain &&
                 error.code == OWSErrorCode.userError.rawValue {
diff --git a/Signal/src/ViewControllers/Registration/SecondaryLinking/SecondaryLinkingQRCodeViewController.swift b/Signal/src/ViewControllers/Registration/SecondaryLinking/SecondaryLinkingQRCodeViewController.swift
index 0afdb3f946e..2a8e9d6792d 100644
--- a/Signal/src/ViewControllers/Registration/SecondaryLinking/SecondaryLinkingQRCodeViewController.swift
+++ b/Signal/src/ViewControllers/Registration/SecondaryLinking/SecondaryLinkingQRCodeViewController.swift
@@ -15,7 +15,7 @@ public class SecondaryLinkingQRCodeViewController: OnboardingBaseViewController
         super.init(onboardingController: provisioningController.onboardingController)
     }
 
-    let qrCodeView = ProvisioningQRCodeView()
+    let qrCodeView = QRCodeView()
 
     override public func loadView() {
         view = UIView()
@@ -95,7 +95,7 @@ public class SecondaryLinkingQRCodeViewController: OnboardingBaseViewController
         hasFetchedAndSetQRCode = true
 
         provisioningController.getProvisioningURL().done { url in
-            self.qrCodeView.setQRImage(try buildQRImage(url: url))
+            try self.qrCodeView.setQR(url: url)
         }.catch { error in
             let title = NSLocalizedString("SECONDARY_DEVICE_ERROR_FETCHING_LINKING_CODE", comment: "alert title")
             let alert = ActionSheetController(title: title, message: error.localizedDescription)
@@ -111,100 +111,3 @@ public class SecondaryLinkingQRCodeViewController: OnboardingBaseViewController
         }.retainUntilComplete()
     }
 }
-
-private func buildQRImage(url: URL) throws -> UIImage {
-    guard let urlData: Data = url.absoluteString.data(using: .utf8) else {
-        throw OWSAssertionError("urlData was unexpectedly nil")
-    }
-
-    guard let filter = CIFilter(name: "CIQRCodeGenerator") else {
-        throw OWSAssertionError("filter was unexpectedly nil")
-    }
-    filter.setDefaults()
-    filter.setValue(urlData, forKey: "inputMessage")
-
-    guard let ciImage = filter.outputImage else {
-        throw OWSAssertionError("ciImage was unexpectedly nil")
-    }
-
-    // UIImages backed by a CIImage won't render without antialiasing, so we convert the backing
-    // image to a CGImage, which can be scaled crisply.
-    let context = CIContext(options: nil)
-    guard let cgImage = context.createCGImage(ciImage, from: ciImage.extent) else {
-        throw OWSAssertionError("cgImage was unexpectedly nil")
-    }
-
-    let image = UIImage(cgImage: cgImage)
-
-    return image
-}
-
-public class ProvisioningQRCodeView: UIView {
-
-    // MARK: - UIView overrides
-
-    public override init(frame: CGRect) {
-        super.init(frame: frame)
-
-        addSubview(qrCodeWrapper)
-        qrCodeWrapper.autoCenterInSuperview()
-        qrCodeWrapper.autoPinToSquareAspectRatio()
-        NSLayoutConstraint.autoSetPriority(.defaultLow) {
-            qrCodeWrapper.autoPinEdgesToSuperviewMargins()
-        }
-
-        qrCodeWrapper.addSubview(placeholderView)
-        placeholderView.autoPinEdgesToSuperviewMargins()
-    }
-
-    required init?(coder aDecoder: NSCoder) {
-        fatalError("init(coder:) has not been implemented")
-    }
-
-    override public func layoutSubviews() {
-        super.layoutSubviews()
-        qrCodeWrapper.layer.cornerRadius = qrCodeWrapper.frame.width / 2
-    }
-
-    // MARK: - Subviews
-
-    var qrCodeView: UIView?
-
-    lazy var qrCodeWrapper: UIView = {
-        let wrapper = UIView()
-        wrapper.backgroundColor = .ows_gray02
-        return wrapper
-    }()
-
-    lazy var placeholderView: UIView = {
-        let placeholder = UIView()
-
-        let activityIndicator = UIActivityIndicatorView(style: .white)
-        placeholder.addSubview(activityIndicator)
-        activityIndicator.autoCenterInSuperview()
-        activityIndicator.autoSetDimensions(to: .init(width: 40, height: 40))
-        activityIndicator.startAnimating()
-
-        return placeholder
-    }()
-
-    // MARK: -
-
-    public func setQRImage(_ qrImage: UIImage) {
-        assert(qrCodeView == nil)
-        placeholderView.removeFromSuperview()
-
-        let qrCodeView = UIImageView(image: qrImage)
-
-        // Don't antialias QR Codes.
-        qrCodeView.layer.magnificationFilter = .nearest
-        qrCodeView.layer.minificationFilter = .nearest
-
-        self.qrCodeView = qrCodeView
-
-        qrCodeWrapper.addSubview(qrCodeView)
-        qrCodeView.autoPinToSquareAspectRatio()
-        qrCodeView.autoCenterInSuperview()
-        qrCodeView.autoMatch(.height, to: .height, of: qrCodeWrapper, withMultiplier: 0.6)
-    }
-}
diff --git a/Signal/src/util/Device Transfer/DeviceTransferService.swift b/Signal/src/util/Device Transfer/DeviceTransferService.swift
index d955c1f4c70..f29937101f9 100644
--- a/Signal/src/util/Device Transfer/DeviceTransferService.swift	
+++ b/Signal/src/util/Device Transfer/DeviceTransferService.swift	
@@ -17,8 +17,8 @@ class DeviceTransferService: NSObject {
     enum Error: Swift.Error {
         case assertion
         case cancel
-        case timeout
         case certificateMismatch
+        case modeMismatch
         case notEnoughSpace
         case unsupportedVersion
     }
@@ -72,6 +72,7 @@ class DeviceTransferService: NSObject {
 
     var tsAccountManager: TSAccountManager { .sharedInstance() }
     var databaseStorage: SDSDatabaseStorage { .shared }
+    var sleepManager: DeviceSleepManager { .sharedInstance }
 
     fileprivate static let pendingTransferDirectory = OWSFileSystem.appSharedDataDirectoryPath() + "/transfer/"
     fileprivate static let pendingTransferFilesDirectory = OWSFileSystem.appSharedDataDirectoryPath() + "/transfer/files/"
@@ -89,7 +90,17 @@ class DeviceTransferService: NSObject {
     }
 
     fileprivate var identity: SecIdentity?
-    fileprivate var session: MCSession?
+    fileprivate var session: MCSession? {
+        didSet {
+            if let oldValue = oldValue {
+                sleepManager.removeBlock(blockObject: oldValue)
+            }
+
+            if let session = session {
+                sleepManager.addBlock(blockObject: session)
+            }
+        }
+    }
     fileprivate lazy var peerId = MCPeerID(displayName: UUID().uuidString)
 
     private lazy var newDeviceServiceBrowser: MCNearbyServiceBrowser = {
@@ -133,7 +144,12 @@ class DeviceTransferService: NSObject {
 
     // MARK: - New Device
 
-    func startAcceptingTransfersFromOldDevices() throws {
+    enum TransferMode: String {
+        case linked
+        case primary
+    }
+
+    func startAcceptingTransfersFromOldDevices(mode: TransferMode) throws -> URL {
         // Create an identity to use for our TLS sessions, the old device
         // will verify this identity via the QR code
         let identity = try SelfSignedIdentity.create(name: "IncomingDeviceTransfer", validForDays: 1)
@@ -144,11 +160,12 @@ class DeviceTransferService: NSObject {
         self.session = session
 
         newDeviceServiceAdvertiser.startAdvertisingPeer()
+
+        return try urlForTransfer(mode: mode)
     }
 
     func stopAcceptingTransfersFromOldDevices() {
         newDeviceServiceAdvertiser.stopAdvertisingPeer()
-        cancelTransferFromOldDevice()
     }
 
     func cancelTransferFromOldDevice() {
@@ -221,6 +238,82 @@ class DeviceTransferService: NSObject {
         stopTransfer()
     }
 
+    // MARK: - URL
+
+    private static let currentTransferVersion = 1
+
+    private static let versionKey = "version"
+    private static let peerIdKey = "peerId"
+    private static let certificateHashKey = "certificateHash"
+    private static let transferModeKey = "transferMode"
+
+    private func urlForTransfer(mode: TransferMode) throws -> URL {
+        guard let identity = identity else {
+            throw OWSAssertionError("unexpectedly missing identity")
+        }
+
+        var components = URLComponents()
+        components.scheme = kURLSchemeSGNLKey
+        components.path = kURLHostTransferPrefix
+
+        guard let base64CertificateHash = try identity.computeCertificateHash().base64EncodedString().encodeURIComponent else {
+            throw OWSAssertionError("failed to get base64 certificate hash")
+        }
+
+        guard let base64PeerId = NSKeyedArchiver.archivedData(withRootObject: peerId).base64EncodedString().encodeURIComponent else {
+            throw OWSAssertionError("failed to get base64 peerId")
+        }
+
+        let queryItems = [
+            DeviceTransferService.versionKey: String(DeviceTransferService.currentTransferVersion),
+            DeviceTransferService.transferModeKey: mode.rawValue,
+            DeviceTransferService.certificateHashKey: base64CertificateHash,
+            DeviceTransferService.peerIdKey: base64PeerId
+        ]
+
+        components.queryItems = queryItems.map { URLQueryItem(name: $0.key, value: $0.value) }
+
+        return components.url!
+    }
+
+    func parseTrasnsferURL(_ url: URL) throws -> (peerId: MCPeerID, certificateHash: Data) {
+        guard let components = URLComponents(url: url, resolvingAgainstBaseURL: false), let queryItems = components.queryItems else {
+            throw OWSAssertionError("Invalid url")
+        }
+
+        let queryItemsDictionary = [String: String](uniqueKeysWithValues: queryItems.compactMap { item in
+            guard let value = item.value else { return nil }
+            return (item.name, value)
+        })
+
+        guard let version = queryItemsDictionary[DeviceTransferService.versionKey],
+            Int(version) == DeviceTransferService.currentTransferVersion else {
+            throw Error.unsupportedVersion
+        }
+
+        let currentMode: TransferMode = tsAccountManager.isPrimaryDevice ? .primary : .linked
+
+        guard let rawMode = queryItemsDictionary[DeviceTransferService.transferModeKey],
+            rawMode == currentMode.rawValue else {
+            throw Error.modeMismatch
+        }
+
+        guard let base64CertificateHash = queryItemsDictionary[DeviceTransferService.certificateHashKey],
+            let uriDecodedHash = base64CertificateHash.removingPercentEncoding,
+            let certificateHash = Data(base64Encoded: uriDecodedHash) else {
+                throw OWSAssertionError("failed to decode certificate hash")
+        }
+
+        guard let base64PeerId = queryItemsDictionary[DeviceTransferService.peerIdKey],
+            let uriDecodedPeerId = base64PeerId.removingPercentEncoding,
+            let peerIdData = Data(base64Encoded: uriDecodedPeerId),
+            let peerId = try NSKeyedUnarchiver.unarchiveTopLevelObjectWithData(peerIdData) as? MCPeerID else {
+                throw OWSAssertionError("failed to decode MCPeerId")
+        }
+
+        return (peerId, certificateHash)
+    }
+
     // MARK: - Observation
 
     private var observers = [Weak<DeviceTransferServiceObserver>]()
@@ -484,6 +577,7 @@ class DeviceTransferService: NSObject {
         session = nil
         identity = nil
 
+        tsAccountManager.isTransferInProgress = false
         transferState = .idle
 
         stopThroughputCalculation()
@@ -700,7 +794,9 @@ class DeviceTransferService: NSObject {
         }
 
         when(fulfilled: promises).done {
-            self.tsAccountManager.wasTransferred = true
+            if !FeatureFlags.deviceTransferThrowAway {
+                self.tsAccountManager.wasTransferred = true
+            }
             try self.sendDoneMessage(to: newDevicePeerId)
         }.catch { error in
             self.failTransfer(.assertion, "\(error)")
diff --git a/Signal/src/views/QRCodeView.swift b/Signal/src/views/QRCodeView.swift
new file mode 100644
index 00000000000..348a8cc6ff9
--- /dev/null
+++ b/Signal/src/views/QRCodeView.swift
@@ -0,0 +1,118 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+
+class QRCodeView: UIView {
+
+    // MARK: - UIView overrides
+
+    public override init(frame: CGRect) {
+        super.init(frame: frame)
+
+        addSubview(qrCodeWrapper)
+        qrCodeWrapper.autoCenterInSuperview()
+        qrCodeWrapper.autoPinToSquareAspectRatio()
+        qrCodeWrapper.autoSetDimension(
+            .width,
+            toSize: UIDevice.current.isNarrowerThanIPhone6 ? 256 : 311,
+            relation: .greaterThanOrEqual
+        )
+        NSLayoutConstraint.autoSetPriority(.defaultLow) {
+            qrCodeWrapper.autoPinEdgesToSuperviewMargins()
+        }
+
+        qrCodeWrapper.addSubview(placeholderView)
+        placeholderView.autoPinEdgesToSuperviewMargins()
+    }
+
+    required init?(coder aDecoder: NSCoder) {
+        fatalError("init(coder:) has not been implemented")
+    }
+
+    override public func layoutSubviews() {
+        super.layoutSubviews()
+        qrCodeWrapper.layer.cornerRadius = qrCodeWrapper.frame.width / 2
+    }
+
+    // MARK: - Subviews
+
+    var qrCodeView: UIView?
+
+    lazy var qrCodeWrapper: UIView = {
+        let wrapper = UIView()
+        wrapper.backgroundColor = .ows_gray02
+        return wrapper
+    }()
+
+    lazy var placeholderView: UIView = {
+        let placeholder = UIView()
+
+        let activityIndicator = UIActivityIndicatorView(style: .whiteLarge)
+        placeholder.addSubview(activityIndicator)
+        activityIndicator.color = Theme.lightThemePrimaryColor
+        activityIndicator.autoCenterInSuperview()
+        activityIndicator.autoSetDimensions(to: .init(width: 40, height: 40))
+        activityIndicator.startAnimating()
+
+        return placeholder
+    }()
+
+    // MARK: -
+
+    func setQR(url: URL) throws { setQR(image: try buildQRImage(url: url)) }
+
+    func setQR(image: UIImage) {
+        assert(qrCodeView == nil)
+        placeholderView.removeFromSuperview()
+
+        let qrCodeView = UIImageView(image: image)
+
+        // Don't antialias QR Codes.
+        qrCodeView.layer.magnificationFilter = .nearest
+        qrCodeView.layer.minificationFilter = .nearest
+
+        self.qrCodeView = qrCodeView
+
+        qrCodeWrapper.addSubview(qrCodeView)
+        qrCodeView.autoPinToSquareAspectRatio()
+        qrCodeView.autoCenterInSuperview()
+        qrCodeView.autoMatch(.height, to: .height, of: qrCodeWrapper, withMultiplier: 0.6)
+    }
+
+    private func buildQRImage(url: URL) throws -> UIImage {
+        guard let urlData: Data = url.absoluteString.data(using: .utf8) else {
+            throw OWSAssertionError("urlData was unexpectedly nil")
+        }
+
+        guard let filter = CIFilter(name: "CIQRCodeGenerator") else {
+            throw OWSAssertionError("filter was unexpectedly nil")
+        }
+        filter.setDefaults()
+        filter.setValue(urlData, forKey: "inputMessage")
+
+        guard let ciImage = filter.outputImage else {
+            throw OWSAssertionError("ciImage was unexpectedly nil")
+        }
+
+        // Change the color using CIFilter
+        let colorParameters = [
+            "inputColor0": CIColor(color: Theme.lightThemePrimaryColor), // Foreground
+            "inputColor1": CIColor(color: .clear) // Background
+        ]
+
+        let recoloredCIIimage = ciImage.applyingFilter("CIFalseColor", parameters: colorParameters)
+
+        // UIImages backed by a CIImage won't render without antialiasing, so we convert the backing
+        // image to a CGImage, which can be scaled crisply.
+        let context = CIContext(options: nil)
+        guard let cgImage = context.createCGImage(recoloredCIIimage, from: recoloredCIIimage.extent) else {
+            throw OWSAssertionError("cgImage was unexpectedly nil")
+        }
+
+        let image = UIImage(cgImage: cgImage)
+
+        return image
+    }
+}
diff --git a/Signal/src/views/TransferProgressView.swift b/Signal/src/views/TransferProgressView.swift
new file mode 100644
index 00000000000..6ce6927dfe1
--- /dev/null
+++ b/Signal/src/views/TransferProgressView.swift
@@ -0,0 +1,103 @@
+//
+//  Copyright (c) 2020 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+
+class TransferProgressView: UIStackView {
+    let progress: Progress
+
+    let progressBar: UIProgressView = {
+        let progressBar = UIProgressView()
+        progressBar.progressTintColor = .ows_accentBlue
+        progressBar.trackTintColor = Theme.isDarkThemeEnabled ? .ows_gray90 : .ows_gray05
+        return progressBar
+    }()
+    let topLabel: UILabel = {
+        let label = UILabel()
+        label.numberOfLines = 0
+        label.lineBreakMode = .byWordWrapping
+        label.font = .ows_dynamicTypeBody
+        label.textColor = Theme.primaryTextColor
+        label.textAlignment = .center
+        return label
+    }()
+    let bottomLabel: UILabel = {
+        let label = UILabel()
+        label.font = .ows_dynamicTypeBody2
+        label.textColor = Theme.secondaryTextAndIconColor
+        label.textAlignment = .center
+        return label
+    }()
+    let dateComponentsFormatter: DateComponentsFormatter = {
+        let formatter = DateComponentsFormatter()
+        formatter.allowedUnits = [.hour, .minute, .second]
+        formatter.unitsStyle = .full
+        formatter.maximumUnitCount = 2
+        formatter.includesApproximationPhrase = true
+        formatter.includesTimeRemainingPhrase = true
+        return formatter
+    }()
+
+    init(progress: Progress) {
+        self.progress = progress
+        super.init(frame: .zero)
+
+        axis = .vertical
+        spacing = 16
+
+        addArrangedSubview(topLabel)
+        addArrangedSubview(progressBar)
+        addArrangedSubview(bottomLabel)
+    }
+
+    required init(coder: NSCoder) {
+        fatalError("init(coder:) has not been implemented")
+    }
+
+    func startUpdatingProgress() {
+        AssertIsOnMainThread()
+
+        progressBar.progressTintColor = .ows_accentBlue
+        topLabel.text = nil
+
+        progress.addObserver(self, forKeyPath: "fractionCompleted", options: .initial, context: nil)
+    }
+
+    func stopUpdatingProgress() {
+        AssertIsOnMainThread()
+
+        progress.removeObserver(self, forKeyPath: "fractionCompleted")
+    }
+
+    func renderError(text: String) {
+        stopUpdatingProgress()
+
+        progressBar.progressTintColor = .ows_accentRed
+
+        // TODO: error icon
+        topLabel.text = text
+    }
+
+    override func observeValue(
+        forKeyPath keyPath: String?,
+        of object: Any?,
+        change: [NSKeyValueChangeKey: Any]?,
+        context: UnsafeMutableRawPointer?
+    ) {
+        guard keyPath == "fractionCompleted" else {
+            return super.observeValue(forKeyPath: keyPath, of: object, change: change, context: context)
+        }
+
+        DispatchQueue.main.async {
+            self.topLabel.text = "\(Int(self.progress.fractionCompleted * 100))%"
+            self.progressBar.setProgress(Float(self.progress.fractionCompleted), animated: true)
+
+            if #available(iOS 11, *), let estimatedTime = self.progress.estimatedTimeRemaining, estimatedTime.isFinite {
+                self.bottomLabel.text = self.dateComponentsFormatter.string(from: estimatedTime)
+            } else {
+                self.bottomLabel.text = nil
+            }
+        }
+    }
+}
diff --git a/Signal/translations/en.lproj/Localizable.strings b/Signal/translations/en.lproj/Localizable.strings
index d4bc04d888c..a6162c9adda 100644
--- a/Signal/translations/en.lproj/Localizable.strings
+++ b/Signal/translations/en.lproj/Localizable.strings
@@ -1007,6 +1007,84 @@
 /* Alert title that can occur when viewing device manager. */
 "DEVICE_LIST_UPDATE_FAILED_TITLE" = "Failed to update device list.";
 
+/* The message of the dialog asking the user if they want to cancel a device transfer */
+"DEVICE_TRANSFER_CANCEL_CONFIRMATION_MESSAGE" = "Closing this window will cancel the transfer you have in progress, are you sure you want to proceed?";
+
+/* The title of the dialog asking the user if they want to cancel a device transfer */
+"DEVICE_TRANSFER_CANCEL_CONFIRMATION_TITLE" = "Cancel Transfer?";
+
+/* The explanation for the device transfer 'choice' view */
+"DEVICE_TRANSFER_CHOICE_EXPLANATION" = "If you have your old iOS device, you can securely transfer your account and messages to this device.";
+
+/* The body for the device transfer 'choice' view 'register' option */
+"DEVICE_TRANSFER_CHOICE_REGISTER_BODY" = "Continue without transferring your account and messages";
+
+/* The title for the device transfer 'choice' view 'register' option */
+"DEVICE_TRANSFER_CHOICE_REGISTER_TITLE" = "Register without Transferring";
+
+/* The title for the device transfer 'choice' view */
+"DEVICE_TRANSFER_CHOICE_TITLE" = "Transfer Account & Messages";
+
+/* The body for the device transfer 'choice' view 'transfer' option */
+"DEVICE_TRANSFER_CHOICE_TRANSFER_BODY" = "Transfer your account and message history from your old iOS device";
+
+/* The title for the device transfer 'choice' view 'transfer' option */
+"DEVICE_TRANSFER_CHOICE_TRANSFER_TITLE" = "Transfer from iOS Device";
+
+/* A warning for the device transfer 'choice' view indicating you can only have one device registered with your number */
+"DEVICE_TRANSFER_CHOICE_WARNING" = "Continuing will disable Signal on other devices currently registered with the same phone number.";
+
+/* An error indicating that we were unable to verify the indentity of the new device to complete the transfer */
+"DEVICE_TRANSFER_ERROR_CERTIFICATE_MISMATCH" = "Unable to verify remote device, please try again";
+
+/* An error indicating that something went wrong with the transfer and it could not complete */
+"DEVICE_TRANSFER_ERROR_GENERIC" = "Transfer couldn't complete";
+
+/* An error indicating the user must scan this code with a linked device to transfer. */
+"DEVICE_TRANSFER_ERROR_MODE_MISMATCH_LINKED" = "To set up this iPad as a new linked device, you must scan with your iPad";
+
+/* An error indicating the user must scan this code with a primary device to transfer. */
+"DEVICE_TRANSFER_ERROR_MODE_MISMATCH_PRIMARY" = "To transfer your account, you must scan with your iPhone";
+
+/* An error indicating that the user does not have enough free space on their device to complete the transfer */
+"DEVICE_TRANSFER_ERROR_NOT_ENOUGH_SPACE" = "Not enough free space to complete the transfer";
+
+/* An error indicating the user must update their device before trying to transfer. */
+"DEVICE_TRANSFER_ERROR_UNSUPPORTED_VERSION" = "Update to the latest version of Signal and try again";
+
+/* The explanation on the action sheet prompting the user if they want to transfer their device. */
+"DEVICE_TRANSFER_PROMPT_EXPLANATION" = "Transfer your Signal account to a new iOS device. Make sure your new device is nearby and turned on.";
+
+/* The title on the acttion sheet prompting the user if they want to transfer their device. */
+"DEVICE_TRANSFER_PROMPT_TITLE" = "Transfer Account";
+
+/* The explanation for the device transfer qr code view */
+"DEVICE_TRANSFER_QRCODE_EXPLANATION" = "Open Signal on your old device, bring it nearby, and make sure Wi-Fi and Bluetooth are enabled on both devices.";
+
+/* The second explanation for the device transfer qr code view */
+"DEVICE_TRANSFER_QRCODE_EXPLANATION2" = "Position this QR code in the frame of your other device.";
+
+/* The title for the device transfer qr code view */
+"DEVICE_TRANSFER_QRCODE_TITLE" = "Waiting for Other Device...";
+
+/* The explanation on the view that shows receiving progress */
+"DEVICE_TRANSFER_RECEIVING_EXPLANATION" = "Keep both devices near each other. Do not turn off either device and keep Signal open. Transfers are end-to-end encrypted.";
+
+/* The title on the view that shows receiving progress */
+"DEVICE_TRANSFER_RECEIVING_TITLE" = "Receiving Data";
+
+/* The explanation for the action sheet asking the user to scan the QR code to transfer */
+"DEVICE_TRANSFER_SCANNING_EXPLANATION" = "Position the QR code within the circle";
+
+/* The title for the action sheet asking the user to scan the QR code to transfer */
+"DEVICE_TRANSFER_SCANNING_TITLE" = "Hold Your New Device Up to the Camera";
+
+/* The explanation on the action sheet that shows transfer progress */
+"DEVICE_TRANSFER_TRANSFERRING_EXPLANATION" = "Keep both devices near each other. Do not turn off either device and keep Signal open.";
+
+/* The title on the action sheet that shows transfer progress */
+"DEVICE_TRANSFER_TRANSFERRING_TITLE" = "Transferring Data";
+
 /* table cell label in conversation settings */
 "DISAPPEARING_MESSAGES" = "Disappearing Messages";
 
diff --git a/SignalServiceKit/src/Account/TSAccountManager.m b/SignalServiceKit/src/Account/TSAccountManager.m
index e9d7311404c..c7a4ff55ddc 100644
--- a/SignalServiceKit/src/Account/TSAccountManager.m
+++ b/SignalServiceKit/src/Account/TSAccountManager.m
@@ -644,6 +644,12 @@ - (void)verifyAccountWithRequest:(TSRequest *)request
                     failureBlock(userError);
                     break;
                 }
+                case 409: {
+                    NSError *userError = OWSErrorWithCodeDescription(OWSErrorCodeRegistrationTransferAvailable,
+                        @"There was an account previously registered with this number that is available for transfer.");
+                    failureBlock(userError);
+                    break;
+                }
                 case 413: {
                     // In the case of the "rate limiting" error, we want to show the
                     // "recovery suggestion", not the error's "description."
diff --git a/SignalServiceKit/src/Network/API/Requests/OWSRequestFactory.h b/SignalServiceKit/src/Network/API/Requests/OWSRequestFactory.h
index 25efafd05c5..18a1797e388 100644
--- a/SignalServiceKit/src/Network/API/Requests/OWSRequestFactory.h
+++ b/SignalServiceKit/src/Network/API/Requests/OWSRequestFactory.h
@@ -85,7 +85,8 @@ typedef NS_ENUM(NSUInteger, TSVerificationTransport) { TSVerificationTransportVo
                                                   phoneNumber:(NSString *)phoneNumber
                                                       authKey:(NSString *)authKey
                                                           pin:(nullable NSString *)pin
-    NS_SWIFT_NAME(verifyPrimaryDeviceRequest(verificationCode:phoneNumber:authKey:pin:));
+                                    checkForAvailableTransfer:(BOOL)checkForAvailableTransfer
+    NS_SWIFT_NAME(verifyPrimaryDeviceRequest(verificationCode:phoneNumber:authKey:pin:checkForAvailableTransfer:));
 
 + (TSRequest *)verifySecondaryDeviceRequestWithVerificationCode:(NSString *)verificationCode
                                                     phoneNumber:(NSString *)phoneNumber
diff --git a/SignalServiceKit/src/Network/API/Requests/OWSRequestFactory.m b/SignalServiceKit/src/Network/API/Requests/OWSRequestFactory.m
index 745bda18136..540ef43d03e 100644
--- a/SignalServiceKit/src/Network/API/Requests/OWSRequestFactory.m
+++ b/SignalServiceKit/src/Network/API/Requests/OWSRequestFactory.m
@@ -388,6 +388,7 @@ + (TSRequest *)verifyPrimaryDeviceRequestWithVerificationCode:(NSString *)verifi
                                                   phoneNumber:(NSString *)phoneNumber
                                                       authKey:(NSString *)authKey
                                                           pin:(nullable NSString *)pin
+                                    checkForAvailableTransfer:(BOOL)checkForAvailableTransfer
 {
     OWSAssertDebug(verificationCode.length > 0);
     OWSAssertDebug(phoneNumber.length > 0);
@@ -395,6 +396,10 @@ + (TSRequest *)verifyPrimaryDeviceRequestWithVerificationCode:(NSString *)verifi
 
     NSString *path = [NSString stringWithFormat:@"%@/code/%@", textSecureAccountsAPI, verificationCode];
 
+    if (checkForAvailableTransfer) {
+        path = [path stringByAppendingString:@"?transfer=true"];
+    }
+
     BOOL isManualMessageFetchEnabled = self.tsAccountManager.isManualMessageFetchEnabled;
     NSMutableDictionary<NSString *, id> *accountAttributes =
         [[self accountAttributesWithAuthKey:authKey
diff --git a/SignalServiceKit/src/Util/FeatureFlags.swift b/SignalServiceKit/src/Util/FeatureFlags.swift
index 24507bdafd6..f0bf651828a 100644
--- a/SignalServiceKit/src/Util/FeatureFlags.swift
+++ b/SignalServiceKit/src/Util/FeatureFlags.swift
@@ -240,7 +240,7 @@ public class FeatureFlags: NSObject {
     public static let deviceTransferDestroyOldDevice = false
 
     @objc
-    public static let deviceTransferThrowAway = false
+    public static let deviceTransferThrowAway = true
 }
 
 /// Flags that we'll leave in the code base indefinitely that are helpful for
diff --git a/SignalServiceKit/src/Util/OWSError.h b/SignalServiceKit/src/Util/OWSError.h
index 492ae6b67ae..b1a61147032 100644
--- a/SignalServiceKit/src/Util/OWSError.h
+++ b/SignalServiceKit/src/Util/OWSError.h
@@ -61,6 +61,7 @@ typedef NS_ENUM(NSInteger, OWSErrorCode) {
     OWSErrorCodeMissingLocalThread,
     OWSErrorCodeContactSyncFailed,
     OWSErrorCodeAppDeregistered,
+    OWSErrorCodeRegistrationTransferAvailable
 };
 
 extern NSString *const OWSErrorRecipientAddressKey;
