diff --git a/Signal/src/ViewControllers/DebugUI/DebugUIGroupsV2.swift b/Signal/src/ViewControllers/DebugUI/DebugUIGroupsV2.swift
index b103f5169b4..83d828c69ed 100644
--- a/Signal/src/ViewControllers/DebugUI/DebugUIGroupsV2.swift
+++ b/Signal/src/ViewControllers/DebugUI/DebugUIGroupsV2.swift
@@ -25,6 +25,14 @@ class DebugUIGroupsV2: DebugUIPage {
         return Environment.shared.contactsManager
     }
 
+    private var messageSenderJobQueue: MessageSenderJobQueue {
+        return SSKEnvironment.shared.messageSenderJobQueue
+    }
+
+    private var groupsV2: GroupsV2 {
+        return SSKEnvironment.shared.groupsV2
+    }
+
     // MARK: Overrides 
 
     override func name() -> String {
@@ -46,6 +54,12 @@ class DebugUIGroupsV2: DebugUIPage {
             }
         }
 
+        if let contactThread = thread as? TSContactThread {
+            sectionItems.append(OWSTableItem(title: "Send invalid group messages.") { [weak self] in
+                self?.sendInvalidGroupMessages(contactThread: contactThread)
+            })
+        }
+
         return OWSTableSection(title: "Groups v2", items: sectionItems)
     }
 
@@ -523,6 +537,118 @@ class DebugUIGroupsV2: DebugUIPage {
             owsFailDebug("Error: \(error)")
         }.retainUntilComplete()
     }
+
+    private func sendInvalidGroupMessages(contactThread: TSContactThread) {
+        var messages = [TSOutgoingMessage]()
+
+        let buildValidGroupContextInfo = { () -> GroupV2ContextInfo in
+            let groupsV2 = self.groupsV2
+            let groupSecretParamsData = try! groupsV2.generateGroupSecretParamsData()
+            let masterKeyData = try! GroupsV2Protos.masterKeyData(forGroupSecretParamsData: groupSecretParamsData)
+            return try! groupsV2.groupV2ContextInfo(forMasterKeyData: masterKeyData)
+        }
+
+        do {
+            messages.append(OWSDynamicOutgoingMessage(thread: contactThread) { (_: SignalRecipient) -> Data in
+                // Valid-looking group id/master key/secret params, but doesn't
+                // correspond to an actual group on the service.
+                let groupV2ContextInfo: GroupV2ContextInfo = buildValidGroupContextInfo()
+                let revision: UInt32 = 0
+
+                let builder = SSKProtoGroupContextV2.builder()
+                builder.setMasterKey(groupV2ContextInfo.masterKeyData)
+                builder.setRevision(revision)
+
+//                if let changeActionsProtoData = changeActionsProtoData {
+//                    assert(changeActionsProtoData.count > 0)
+//                    builder.setGroupChange(changeActionsProtoData)
+//                }
+
+                let dataBuilder = SSKProtoDataMessage.builder()
+                dataBuilder.setTimestamp(NSDate.ows_millisecondTimeStamp())
+                dataBuilder.setRequiredProtocolVersion(0)
+                return try! dataBuilder.buildSerializedData()
+            })
+
+//                }
+//            - (OutgoingGroupProtoResult)addGroupsV2ToDataMessageBuilder:(SSKProtoDataMessageBuilder *)builder
+//            groupThread:(TSGroupThread *)groupThread
+//            transaction:(SDSAnyReadTransaction *)transaction
+//            {
+//                OWSAssertDebug(builder);
+//                OWSAssertDebug(groupThread);
+//                OWSAssertDebug(transaction);
+//
+//                if (![groupThread.groupModel isKindOfClass:[TSGroupModelV2 class]]) {
+//                    OWSFailDebug(@"Invalid group model.");
+//                    return OutgoingGroupProtoResult_Error;
+//                }
+//                TSGroupModelV2 *groupModel = (TSGroupModelV2 *)groupThread.groupModel;
+//
+//                NSError *error;
+//                SSKProtoGroupContextV2 *_Nullable groupContextV2 =
+//                    [self.groupsV2 buildGroupContextV2ProtoWithGroupModel:groupModel
+//                        changeActionsProtoData:self.changeActionsProtoData
+//                        error:&error];
+//                if (groupContextV2 == nil || error != nil) {
+//                    OWSFailDebug(@"Error: %@", error);
+//                    return OutgoingGroupProtoResult_Error;
+//                }
+//                [builder setGroupV2:groupContextV2];
+//                return OutgoingGroupProtoResult_AddedWithoutGroupAvatar;
+//
+
+        }
+
+//        guard let localAddress = tsAccountManager.localAddress else {
+//            return owsFailDebug("Missing localAddress.")
+//        }
+//        
+//        let oldGroupModel = groupThread.groupModel
+//        
+//        let oldGroupMembership = oldGroupModel.groupMembership
+//        var groupMembershipBuilder = oldGroupMembership.asBuilder
+//        for address in oldGroupMembership.allUsers {
+//            if address != localAddress {
+//                groupMembershipBuilder.remove(address)
+//            }
+//        }
+//        let newGroupMembership = groupMembershipBuilder.build()
+//        firstly { () -> Promise<TSGroupThread> in
+//            var groupModelBuilder = oldGroupModel.asBuilder
+//            groupModelBuilder.groupMembership = newGroupMembership
+//            let newGroupModel = try databaseStorage.read { transaction in
+//                try groupModelBuilder.buildAsV2(transaction: transaction)
+//            }
+//            return GroupManager.localUpdateExistingGroup(groupModel: newGroupModel,
+//                                                         dmConfiguration: nil,
+//                                                         groupUpdateSourceAddress: localAddress)
+//        }.done { (_) -> Void in
+//            Logger.info("Success.")
+//        }.catch { error in
+//            owsFailDebug("Error: \(error)")
+//        }.retainUntilComplete()
+
+//        [self.messageSenderJobQueue
+//        messageSenderJobQueue.addMessage(
+
+//        NSUInteger contentLength = arc4random_uniform(32);
+//        return [Cryptography generateRandomBytes:contentLength];
+//        SSKProtoContentBuilder *contentBuilder =
+//            [SSKProtoContent builder];
+//        return [[contentBuilder buildIgnoringErrors]
+//            serializedDataIgnoringErrors];
+//
+//        let message = [[OWSDynamicOutgoingMessage alloc] initWithPlainTextDataBlock:block
+//            thread:thread];
+//
+//        [self sendStressMessage:message];
+        databaseStorage.write { transaction in
+            for message in messages {
+                self.messageSenderJobQueue.add(message: message.asPreparer, transaction: transaction)
+            }
+        }
+    }
 }
 
 #endif
diff --git a/Signal/src/ViewControllers/DebugUI/DebugUIStress.m b/Signal/src/ViewControllers/DebugUI/DebugUIStress.m
index 1bd9d75bd27..983941c32ef 100644
--- a/Signal/src/ViewControllers/DebugUI/DebugUIStress.m
+++ b/Signal/src/ViewControllers/DebugUI/DebugUIStress.m
@@ -491,8 +491,8 @@ + (void)sendStressMessage:(TSThread *)thread
     OWSAssertDebug(thread);
     OWSAssertDebug(block);
 
-    OWSDynamicOutgoingMessage *message = [[OWSDynamicOutgoingMessage alloc] initWithPlainTextDataBlock:block
-                                                                                                thread:thread];
+    OWSDynamicOutgoingMessage *message = [[OWSDynamicOutgoingMessage alloc] initWithThread:thread
+                                                                        plainTextDataBlock:block];
 
     [self sendStressMessage:message];
 }
@@ -502,9 +502,9 @@ + (void)sendStressMessage:(TSThread *)thread timestamp:(uint64_t)timestamp block
     OWSAssertDebug(thread);
     OWSAssertDebug(block);
 
-    OWSDynamicOutgoingMessage *message = [[OWSDynamicOutgoingMessage alloc] initWithPlainTextDataBlock:block
-                                                                                             timestamp:timestamp
-                                                                                                thread:thread];
+    OWSDynamicOutgoingMessage *message = [[OWSDynamicOutgoingMessage alloc] initWithThread:thread
+                                                                                 timestamp:timestamp
+                                                                        plainTextDataBlock:block];
 
     [self sendStressMessage:message];
 }
diff --git a/SignalMessaging/groups/GroupV2UpdatesImpl.swift b/SignalMessaging/groups/GroupV2UpdatesImpl.swift
index c0f5e02f837..d41cd23523f 100644
--- a/SignalMessaging/groups/GroupV2UpdatesImpl.swift
+++ b/SignalMessaging/groups/GroupV2UpdatesImpl.swift
@@ -76,43 +76,43 @@ public class GroupV2UpdatesImpl: NSObject, GroupV2UpdatesSwift {
     public func tryToRefreshV2GroupUpToCurrentRevisionImmediately(groupId: Data,
                                                                   groupSecretParamsData: Data) -> Promise<Void> {
         let groupUpdateMode = GroupUpdateMode.upToCurrentRevisionImmediately
-        return tryToRefreshV2GroupThreadWithThrottling(groupId: groupId,
-                                                       groupSecretParamsData: groupSecretParamsData,
-                                                       groupUpdateMode: groupUpdateMode)
+        return tryToRefreshV2GroupThread(groupId: groupId,
+                                         groupSecretParamsData: groupSecretParamsData,
+                                         groupUpdateMode: groupUpdateMode)
     }
 
     @objc
     public func tryToRefreshV2GroupUpToCurrentRevisionAfterMessageProcessingWithThrottling(_ groupThread: TSGroupThread) {
         let groupUpdateMode = GroupUpdateMode.upToCurrentRevisionAfterMessageProcessWithThrottling
-        tryToRefreshV2GroupThreadWithThrottling(groupThread, groupUpdateMode: groupUpdateMode)
+        tryToRefreshV2GroupThread(groupThread, groupUpdateMode: groupUpdateMode)
     }
 
     @objc
     public func tryToRefreshV2GroupUpToSpecificRevisionImmediately(_ groupThread: TSGroupThread,
                                                                    upToRevision: UInt32) {
         let groupUpdateMode = GroupUpdateMode.upToSpecificRevisionImmediately(upToRevision: upToRevision)
-        tryToRefreshV2GroupThreadWithThrottling(groupThread, groupUpdateMode: groupUpdateMode)
+        tryToRefreshV2GroupThread(groupThread, groupUpdateMode: groupUpdateMode)
     }
 
-    private func tryToRefreshV2GroupThreadWithThrottling(_ groupThread: TSGroupThread,
-                                                         groupUpdateMode: GroupUpdateMode) {
+    private func tryToRefreshV2GroupThread(_ groupThread: TSGroupThread,
+                                           groupUpdateMode: GroupUpdateMode) {
         firstly { () -> Promise<Void> in
             guard let groupModel = groupThread.groupModel as? TSGroupModelV2 else {
                 return Promise.value(())
             }
             let groupId = groupModel.groupId
             let groupSecretParamsData = groupModel.secretParamsData
-            return tryToRefreshV2GroupThreadWithThrottling(groupId: groupId,
-                                                           groupSecretParamsData: groupSecretParamsData,
-                                                           groupUpdateMode: groupUpdateMode)
+            return tryToRefreshV2GroupThread(groupId: groupId,
+                                             groupSecretParamsData: groupSecretParamsData,
+                                             groupUpdateMode: groupUpdateMode)
         }.catch(on: .global()) { error in
             Logger.warn("Group refresh failed: \(error).")
         }.retainUntilComplete()
     }
 
-    public func tryToRefreshV2GroupThreadWithThrottling(groupId: Data,
-                                                        groupSecretParamsData: Data,
-                                                        groupUpdateMode: GroupUpdateMode) -> Promise<Void> {
+    public func tryToRefreshV2GroupThread(groupId: Data,
+                                          groupSecretParamsData: Data,
+                                          groupUpdateMode: GroupUpdateMode) -> Promise<Void> {
 
         let isThrottled = serialQueue.sync { () -> Bool in
             guard self.shouldThrottle(for: groupUpdateMode) else {
diff --git a/SignalMessaging/groups/GroupsV2Impl+RestoreGroups.swift b/SignalMessaging/groups/GroupsV2Impl+RestoreGroups.swift
index b8e7869f101..b2ba3d795ba 100644
--- a/SignalMessaging/groups/GroupsV2Impl+RestoreGroups.swift
+++ b/SignalMessaging/groups/GroupsV2Impl+RestoreGroups.swift
@@ -203,9 +203,9 @@ public extension GroupsV2Impl {
                 // failover to using a "snapshot".
                 let groupUpdateMode = GroupUpdateMode.upToCurrentRevisionAfterMessageProcessWithThrottling
                 firstly {
-                    self.groupV2Updates.tryToRefreshV2GroupThreadWithThrottling(groupId: groupContextInfo.groupId,
-                                                                                groupSecretParamsData: groupContextInfo.groupSecretParamsData,
-                                                                                groupUpdateMode: groupUpdateMode)
+                    self.groupV2Updates.tryToRefreshV2GroupThread(groupId: groupContextInfo.groupId,
+                                                                  groupSecretParamsData: groupContextInfo.groupSecretParamsData,
+                                                                  groupUpdateMode: groupUpdateMode)
                 }.done { _ in
                     Logger.verbose("Update succeeded.")
                     markAsComplete()
diff --git a/SignalMessaging/groups/GroupsV2Impl.swift b/SignalMessaging/groups/GroupsV2Impl.swift
index 7203109a3d3..279f2903931 100644
--- a/SignalMessaging/groups/GroupsV2Impl.swift
+++ b/SignalMessaging/groups/GroupsV2Impl.swift
@@ -906,9 +906,9 @@ public class GroupsV2Impl: NSObject, GroupsV2Swift {
         }
         let groupUpdateMode = GroupUpdateMode.upToCurrentRevisionAfterMessageProcessWithThrottling
         firstly {
-            self.groupV2Updates.tryToRefreshV2GroupThreadWithThrottling(groupId: groupId,
-                                                                        groupSecretParamsData: groupModelV2.secretParamsData,
-                                                                        groupUpdateMode: groupUpdateMode)
+            self.groupV2Updates.tryToRefreshV2GroupThread(groupId: groupId,
+                                                          groupSecretParamsData: groupModelV2.secretParamsData,
+                                                          groupUpdateMode: groupUpdateMode)
         }.done { _ in
             Logger.verbose("Update succeeded.")
         }.catch { error in
diff --git a/SignalMessaging/groups/GroupsV2Protos.swift b/SignalMessaging/groups/GroupsV2Protos.swift
index 46d1fcaae9c..89aa0e24a00 100644
--- a/SignalMessaging/groups/GroupsV2Protos.swift
+++ b/SignalMessaging/groups/GroupsV2Protos.swift
@@ -150,7 +150,10 @@ public class GroupsV2Protos {
     }
 
     public class func masterKeyData(forGroupModel groupModel: TSGroupModelV2) throws -> Data {
-        let groupSecretParamsData = groupModel.secretParamsData
+        return try masterKeyData(forGroupSecretParamsData: groupModel.secretParamsData)
+    }
+
+    public class func masterKeyData(forGroupSecretParamsData groupSecretParamsData: Data) throws -> Data {
         let groupSecretParams = try GroupSecretParams(contents: [UInt8](groupSecretParamsData))
         return try groupSecretParams.getMasterKey().serialize().asData
     }
diff --git a/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.h b/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.h
index f3c7bb03e1c..148bfe9ce23 100644
--- a/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.h
+++ b/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.h
@@ -15,10 +15,10 @@ typedef NSData *_Nonnull (^DynamicOutgoingMessageBlock)(SignalRecipient *);
 
 - (instancetype)initOutgoingMessageWithBuilder:(TSOutgoingMessageBuilder *)outgoingMessageBuilder NS_UNAVAILABLE;
 
-- (instancetype)initWithPlainTextDataBlock:(DynamicOutgoingMessageBlock)block thread:(TSThread *)thread;
-- (instancetype)initWithPlainTextDataBlock:(DynamicOutgoingMessageBlock)block
-                                 timestamp:(uint64_t)timestamp
-                                    thread:(TSThread *)thread;
+- (instancetype)initWithThread:(TSThread *)thread plainTextDataBlock:(DynamicOutgoingMessageBlock)block;
+- (instancetype)initWithThread:(TSThread *)thread
+                     timestamp:(uint64_t)timestamp
+            plainTextDataBlock:(DynamicOutgoingMessageBlock)block;
 
 @end
 
diff --git a/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.m b/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.m
index 5d118f6f907..b3a50ddf412 100644
--- a/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.m
@@ -18,15 +18,15 @@ @interface OWSDynamicOutgoingMessage ()
 
 @implementation OWSDynamicOutgoingMessage
 
-- (instancetype)initWithPlainTextDataBlock:(DynamicOutgoingMessageBlock)block thread:(TSThread *)thread
+- (instancetype)initWithThread:(TSThread *)thread plainTextDataBlock:(DynamicOutgoingMessageBlock)block
 {
-    return [self initWithPlainTextDataBlock:block timestamp:[NSDate ows_millisecondTimeStamp] thread:thread];
+    return [self initWithThread:thread timestamp:[NSDate ows_millisecondTimeStamp] plainTextDataBlock:block];
 }
 
 // MJK TODO can we remove sender timestamp?
-- (instancetype)initWithPlainTextDataBlock:(DynamicOutgoingMessageBlock)block
-                                 timestamp:(uint64_t)timestamp
-                                    thread:(TSThread *)thread
+- (instancetype)initWithThread:(TSThread *)thread
+                     timestamp:(uint64_t)timestamp
+            plainTextDataBlock:(DynamicOutgoingMessageBlock)block
 {
     TSOutgoingMessageBuilder *messageBuilder = [TSOutgoingMessageBuilder outgoingMessageBuilderWithThread:thread];
     messageBuilder.timestamp = timestamp;
diff --git a/SignalServiceKit/src/Network/Receiving/GroupsV2MessageProcessor.swift b/SignalServiceKit/src/Network/Receiving/GroupsV2MessageProcessor.swift
index d099c9244a4..7629d4018ca 100644
--- a/SignalServiceKit/src/Network/Receiving/GroupsV2MessageProcessor.swift
+++ b/SignalServiceKit/src/Network/Receiving/GroupsV2MessageProcessor.swift
@@ -673,9 +673,9 @@ class IncomingGroupsV2MessageQueue: NSObject {
         // failover to using a "snapshot".
         let groupUpdateMode = GroupUpdateMode.upToSpecificRevisionImmediately(upToRevision: groupContext.revision)
         return firstly {
-            self.groupV2Updates.tryToRefreshV2GroupThreadWithThrottling(groupId: groupContextInfo.groupId,
-                                                                        groupSecretParamsData: groupContextInfo.groupSecretParamsData,
-                                                                        groupUpdateMode: groupUpdateMode)
+            self.groupV2Updates.tryToRefreshV2GroupThread(groupId: groupContextInfo.groupId,
+                                                          groupSecretParamsData: groupContextInfo.groupSecretParamsData,
+                                                          groupUpdateMode: groupUpdateMode)
         }.map(on: .global()) { (_) in
             return UpdateOutcome.successShouldProcess
         }.recover(on: .global()) { error -> Guarantee<UpdateOutcome> in
diff --git a/SignalServiceKit/src/groups/GroupsV2.swift b/SignalServiceKit/src/groups/GroupsV2.swift
index 82a765abbcf..ee0232c350e 100644
--- a/SignalServiceKit/src/groups/GroupsV2.swift
+++ b/SignalServiceKit/src/groups/GroupsV2.swift
@@ -157,9 +157,9 @@ public protocol GroupV2UpdatesSwift: GroupV2Updates {
     func tryToRefreshV2GroupUpToCurrentRevisionImmediately(groupId: Data,
                                                            groupSecretParamsData: Data) -> Promise<Void>
 
-    func tryToRefreshV2GroupThreadWithThrottling(groupId: Data,
-                                                 groupSecretParamsData: Data,
-                                                 groupUpdateMode: GroupUpdateMode) -> Promise<Void>
+    func tryToRefreshV2GroupThread(groupId: Data,
+                                   groupSecretParamsData: Data,
+                                   groupUpdateMode: GroupUpdateMode) -> Promise<Void>
 
     func updateGroupWithChangeActions(groupId: Data,
                                       changeActionsProto: GroupsProtoGroupChangeActions,
@@ -431,9 +431,9 @@ public class MockGroupV2Updates: NSObject, GroupV2UpdatesSwift {
         owsFail("Not implemented.")
     }
 
-    public func tryToRefreshV2GroupThreadWithThrottling(groupId: Data,
-                                                        groupSecretParamsData: Data,
-                                                        groupUpdateMode: GroupUpdateMode) -> Promise<Void> {
+    public func tryToRefreshV2GroupThread(groupId: Data,
+                                          groupSecretParamsData: Data,
+                                          groupUpdateMode: GroupUpdateMode) -> Promise<Void> {
         owsFail("Not implemented.")
     }
 
