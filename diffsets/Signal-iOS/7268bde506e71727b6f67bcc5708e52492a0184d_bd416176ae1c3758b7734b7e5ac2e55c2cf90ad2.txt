diff --git a/Signal/src/Signal-Bridging-Header.h b/Signal/src/Signal-Bridging-Header.h
index 39bb1b1188a..cc2f8bca751 100644
--- a/Signal/src/Signal-Bridging-Header.h
+++ b/Signal/src/Signal-Bridging-Header.h
@@ -2,8 +2,6 @@
 //  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
 //
 
-#import <Foundation/Foundation.h>
-
 #import "AppSettingsViewController.h"
 #import "AttachmentSharing.h"
 #import "DebugUIPage.h"
@@ -39,6 +37,7 @@
 #import "UIView+OWS.h"
 #import "ViewControllerUtils.h"
 #import <AxolotlKit/NSData+keyVersionByte.h>
+#import <Foundation/Foundation.h>
 #import <JSQMessagesViewController/JSQMediaItem.h>
 #import <JSQMessagesViewController/JSQMessagesMediaViewBubbleImageMasker.h>
 #import <JSQMessagesViewController/UIColor+JSQMessages.h>
@@ -53,7 +52,7 @@
 #import <SignalServiceKit/MIMETypeUtil.h>
 #import <SignalServiceKit/NSData+Base64.h>
 #import <SignalServiceKit/NSData+Image.h>
-#import <SignalServiceKit/NSDate+millisecondTimeStamp.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/NSNotificationCenter+OWS.h>
 #import <SignalServiceKit/NSTimer+OWS.h>
 #import <SignalServiceKit/OWSAcknowledgeMessageDeliveryRequest.h>
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationViewController.m b/Signal/src/ViewControllers/ConversationView/ConversationViewController.m
index 5d830e46006..29e60b72a2b 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationViewController.m
+++ b/Signal/src/ViewControllers/ConversationView/ConversationViewController.m
@@ -12,7 +12,6 @@
 #import "Environment.h"
 #import "FingerprintViewController.h"
 #import "FullImageViewController.h"
-#import "NSDate+millisecondTimeStamp.h"
 #import "NewGroupViewController.h"
 #import "OWSAudioAttachmentPlayer.h"
 #import "OWSCall.h"
diff --git a/Signal/src/ViewControllers/DebugUI/DebugUIStress.m b/Signal/src/ViewControllers/DebugUI/DebugUIStress.m
index e6156353257..a17059ac568 100644
--- a/Signal/src/ViewControllers/DebugUI/DebugUIStress.m
+++ b/Signal/src/ViewControllers/DebugUI/DebugUIStress.m
@@ -8,6 +8,7 @@
 #import "OWSTableViewController.h"
 #import "ThreadUtil.h"
 #import <SignalServiceKit/Cryptography.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/OWSDynamicOutgoingMessage.h>
 #import <SignalServiceKit/SecurityUtils.h>
 #import <SignalServiceKit/TSGroupThread.h>
@@ -48,6 +49,15 @@ - (nullable OWSTableSection *)sectionForThread:(nullable TSThread *)thread
                                              return [NSData new];
                                          }];
                                      }]];
+    [items addObject:[OWSTableItem itemWithTitle:@"Send random noise message"
+                                     actionBlock:^{
+                                         [DebugUIStress
+                                             sendStressMessage:thread
+                                                         block:^(SignalRecipient *recipient) {
+                                                             NSUInteger contentLength = arc4random_uniform(32);
+                                                             return [Cryptography generateRandomBytes:contentLength];
+                                                         }];
+                                     }]];
     [items addObject:[OWSTableItem itemWithTitle:@"Send no payload message"
                                      actionBlock:^{
                                          [DebugUIStress sendStressMessage:thread block:^(SignalRecipient *recipient) {
@@ -64,19 +74,350 @@ - (nullable OWSTableSection *)sectionForThread:(nullable TSThread *)thread
                                              return [[contentBuilder build] data];
                                          }];
                                      }]];
-    [items addObject:[OWSTableItem itemWithTitle:@"Send random null message"
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send random null message"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosNullMessageBuilder *nullMessageBuilder =
+                                                              [OWSSignalServiceProtosNullMessageBuilder new];
+                                                          NSUInteger contentLength = arc4random_uniform(32);
+                                                          nullMessageBuilder.padding =
+                                                              [Cryptography generateRandomBytes:contentLength];
+                                                          contentBuilder.nullMessage = [nullMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send empty sync message"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageBuilder *syncMessageBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageBuilder new];
+                                                          contentBuilder.syncMessage = [syncMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send empty sync sent message"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageBuilder *syncMessageBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageSentBuilder *sentBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageSentBuilder new];
+                                                          syncMessageBuilder.sent = [sentBuilder build];
+                                                          contentBuilder.syncMessage = [syncMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    [items addObject:[OWSTableItem itemWithTitle:@"Send whitespace text data message"
                                      actionBlock:^{
-                                         [DebugUIStress sendStressMessage:thread block:^(SignalRecipient *recipient) {
-                                             OWSSignalServiceProtosContentBuilder *contentBuilder = [OWSSignalServiceProtosContentBuilder new];
-                                             OWSSignalServiceProtosNullMessageBuilder *nullMessageBuilder = [OWSSignalServiceProtosNullMessageBuilder new];
-                                             NSUInteger contentLength = arc4random_uniform(32);
-                                             nullMessageBuilder.padding = [Cryptography generateRandomBytes:contentLength];
-                                             contentBuilder.nullMessage = [nullMessageBuilder build];
-                                             //                                             contentBuilder.dataMessage = [self buildDataMessage:recipient.recipientId];
-                                             return [[contentBuilder build] data];
-                                         }];
+                                         [DebugUIStress
+                                             sendStressMessage:thread
+                                                         block:^(SignalRecipient *recipient) {
+                                                             OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                                 [OWSSignalServiceProtosContentBuilder new];
+                                                             OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                                 [OWSSignalServiceProtosDataMessageBuilder new];
+                                                             dataBuilder.body = @" ";
+                                                             [DebugUIStress ensureGroupOfDataBuilder:dataBuilder
+                                                                                              thread:thread];
+                                                             contentBuilder.dataMessage = [dataBuilder build];
+                                                             return [[contentBuilder build] data];
+                                                         }];
+                                     }]];
+    [items addObject:[OWSTableItem
+                         itemWithTitle:@"Send bad attachment data message"
+                           actionBlock:^{
+                               [DebugUIStress
+                                   sendStressMessage:thread
+                                               block:^(SignalRecipient *recipient) {
+                                                   OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                       [OWSSignalServiceProtosContentBuilder new];
+                                                   OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                       [OWSSignalServiceProtosDataMessageBuilder new];
+                                                   OWSSignalServiceProtosAttachmentPointerBuilder *attachmentPointer =
+                                                       [OWSSignalServiceProtosAttachmentPointerBuilder new];
+                                                   [attachmentPointer setId:arc4random_uniform(32) + 1];
+                                                   [attachmentPointer setContentType:@"1"];
+                                                   [attachmentPointer setSize:arc4random_uniform(32) + 1];
+                                                   [attachmentPointer setDigest:[Cryptography generateRandomBytes:1]];
+                                                   [attachmentPointer setFileName:@" "];
+                                                   [DebugUIStress ensureGroupOfDataBuilder:dataBuilder thread:thread];
+                                                   contentBuilder.dataMessage = [dataBuilder build];
+                                                   return [[contentBuilder build] data];
+                                               }];
+                           }]];
+    [items addObject:[OWSTableItem itemWithTitle:@"Send normal text data message"
+                                     actionBlock:^{
+                                         [DebugUIStress
+                                             sendStressMessage:thread
+                                                         block:^(SignalRecipient *recipient) {
+                                                             OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                                 [OWSSignalServiceProtosContentBuilder new];
+                                                             OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                                 [OWSSignalServiceProtosDataMessageBuilder new];
+                                                             dataBuilder.body = @"alice";
+                                                             [DebugUIStress ensureGroupOfDataBuilder:dataBuilder
+                                                                                              thread:thread];
+                                                             contentBuilder.dataMessage = [dataBuilder build];
+                                                             return [[contentBuilder build] data];
+                                                         }];
+                                     }]];
+    [items addObject:[OWSTableItem itemWithTitle:@"Send N text messages with same timestamp"
+                                     actionBlock:^{
+                                         uint64_t timestamp = [NSDate ows_millisecondTimeStamp];
+                                         for (int i = 0; i < 3; i++) {
+                                             [DebugUIStress
+                                                 sendStressMessage:thread
+                                                         timestamp:timestamp
+                                                             block:^(SignalRecipient *recipient) {
+                                                                 OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                                     [OWSSignalServiceProtosContentBuilder new];
+                                                                 OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                                     [OWSSignalServiceProtosDataMessageBuilder new];
+                                                                 dataBuilder.body = [NSString stringWithFormat:@"%@ %d",
+                                                                                              [NSUUID UUID].UUIDString,
+                                                                                              i];
+                                                                 [DebugUIStress ensureGroupOfDataBuilder:dataBuilder
+                                                                                                  thread:thread];
+                                                                 contentBuilder.dataMessage = [dataBuilder build];
+                                                                 return [[contentBuilder build] data];
+                                                             }];
+                                         }
                                      }]];
+    [items addObject:[OWSTableItem
+                         itemWithTitle:@"Send text message with current timestamp"
+                           actionBlock:^{
+                               uint64_t timestamp = [NSDate ows_millisecondTimeStamp];
+                               [DebugUIStress
+                                   sendStressMessage:thread
+                                           timestamp:timestamp
+                                               block:^(SignalRecipient *recipient) {
+                                                   OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                       [OWSSignalServiceProtosContentBuilder new];
+                                                   OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                       [OWSSignalServiceProtosDataMessageBuilder new];
+                                                   dataBuilder.body =
+                                                       [[NSUUID UUID].UUIDString stringByAppendingString:@" now"];
+                                                   [DebugUIStress ensureGroupOfDataBuilder:dataBuilder thread:thread];
+                                                   contentBuilder.dataMessage = [dataBuilder build];
+                                                   return [[contentBuilder build] data];
+                                               }];
+                           }]];
+    [items addObject:[OWSTableItem
+                         itemWithTitle:@"Send text message with future timestamp"
+                           actionBlock:^{
+                               uint64_t timestamp = [NSDate ows_millisecondTimeStamp];
+                               timestamp += kHourInMs;
+                               [DebugUIStress
+                                   sendStressMessage:thread
+                                           timestamp:timestamp
+                                               block:^(SignalRecipient *recipient) {
+                                                   OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                       [OWSSignalServiceProtosContentBuilder new];
+                                                   OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                       [OWSSignalServiceProtosDataMessageBuilder new];
+                                                   dataBuilder.body =
+                                                       [[NSUUID UUID].UUIDString stringByAppendingString:@" now"];
+                                                   [DebugUIStress ensureGroupOfDataBuilder:dataBuilder thread:thread];
+                                                   contentBuilder.dataMessage = [dataBuilder build];
+                                                   return [[contentBuilder build] data];
+                                               }];
+                           }]];
+    [items addObject:[OWSTableItem
+                         itemWithTitle:@"Send text message with past timestamp"
+                           actionBlock:^{
+                               uint64_t timestamp = [NSDate ows_millisecondTimeStamp];
+                               timestamp -= kHourInMs;
+                               [DebugUIStress
+                                   sendStressMessage:thread
+                                           timestamp:timestamp
+                                               block:^(SignalRecipient *recipient) {
+                                                   OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                       [OWSSignalServiceProtosContentBuilder new];
+                                                   OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                       [OWSSignalServiceProtosDataMessageBuilder new];
+                                                   dataBuilder.body =
+                                                       [[NSUUID UUID].UUIDString stringByAppendingString:@" now"];
+                                                   [DebugUIStress ensureGroupOfDataBuilder:dataBuilder thread:thread];
+                                                   contentBuilder.dataMessage = [dataBuilder build];
+                                                   return [[contentBuilder build] data];
+                                               }];
+                           }]];
+    [items addObject:[OWSTableItem itemWithTitle:@"Send N text messages with same timestamp"
+                                     actionBlock:^{
+                                         OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                             [OWSSignalServiceProtosContentBuilder new];
+                                         OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                             [OWSSignalServiceProtosDataMessageBuilder new];
+                                         dataBuilder.body = @"alice";
+                                         contentBuilder.dataMessage = [dataBuilder build];
+                                         [DebugUIStress ensureGroupOfDataBuilder:dataBuilder thread:thread];
+                                         NSData *data = [[contentBuilder build] data];
+
+                                         uint64_t timestamp = [NSDate ows_millisecondTimeStamp];
 
+                                         for (int i = 0; i < 3; i++) {
+                                             [DebugUIStress sendStressMessage:thread
+                                                                    timestamp:timestamp
+                                                                        block:^(SignalRecipient *recipient) {
+                                                                            return data;
+                                                                        }];
+                                         }
+                                     }]];
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send malformed sync sent message 1"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageBuilder *syncMessageBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageSentBuilder *sentBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageSentBuilder new];
+                                                          sentBuilder.destination = @"abc";
+                                                          sentBuilder.timestamp = arc4random_uniform(32) + 1;
+                                                          OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                              [OWSSignalServiceProtosDataMessageBuilder new];
+                                                          sentBuilder.message = [dataBuilder build];
+                                                          syncMessageBuilder.sent = [sentBuilder build];
+                                                          contentBuilder.syncMessage = [syncMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send malformed sync sent message 2"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageBuilder *syncMessageBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageSentBuilder *sentBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageSentBuilder new];
+                                                          sentBuilder.destination = @"abc";
+                                                          sentBuilder.timestamp = 0;
+                                                          OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                              [OWSSignalServiceProtosDataMessageBuilder new];
+                                                          sentBuilder.message = [dataBuilder build];
+                                                          syncMessageBuilder.sent = [sentBuilder build];
+                                                          contentBuilder.syncMessage = [syncMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send malformed sync sent message 3"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageBuilder *syncMessageBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageSentBuilder *sentBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageSentBuilder new];
+                                                          sentBuilder.destination = @"abc";
+                                                          sentBuilder.timestamp = 0;
+                                                          OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                              [OWSSignalServiceProtosDataMessageBuilder new];
+                                                          dataBuilder.body = @" ";
+                                                          sentBuilder.message = [dataBuilder build];
+                                                          syncMessageBuilder.sent = [sentBuilder build];
+                                                          contentBuilder.syncMessage = [syncMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send malformed sync sent message 4"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageBuilder *syncMessageBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageSentBuilder *sentBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageSentBuilder new];
+                                                          sentBuilder.destination = @"abc";
+                                                          sentBuilder.timestamp = 0;
+                                                          OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                              [OWSSignalServiceProtosDataMessageBuilder new];
+                                                          dataBuilder.body = @" ";
+                                                          OWSSignalServiceProtosGroupContextBuilder *groupBuilder =
+                                                              [OWSSignalServiceProtosGroupContextBuilder new];
+                                                          [groupBuilder setId:[Cryptography generateRandomBytes:1]];
+                                                          dataBuilder.group = [groupBuilder build];
+                                                          sentBuilder.message = [dataBuilder build];
+                                                          syncMessageBuilder.sent = [sentBuilder build];
+                                                          contentBuilder.syncMessage = [syncMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send malformed sync sent message 5"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageBuilder *syncMessageBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageSentBuilder *sentBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageSentBuilder new];
+                                                          sentBuilder.destination = @"abc";
+                                                          sentBuilder.timestamp = 0;
+                                                          OWSSignalServiceProtosDataMessageBuilder *dataBuilder =
+                                                              [OWSSignalServiceProtosDataMessageBuilder new];
+                                                          dataBuilder.body = @" ";
+                                                          OWSSignalServiceProtosGroupContextBuilder *groupBuilder =
+                                                              [OWSSignalServiceProtosGroupContextBuilder new];
+                                                          [groupBuilder setId:[Cryptography generateRandomBytes:1]];
+                                                          dataBuilder.group = [groupBuilder build];
+                                                          sentBuilder.message = [dataBuilder build];
+                                                          syncMessageBuilder.sent = [sentBuilder build];
+                                                          contentBuilder.syncMessage = [syncMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    [items
+        addObject:[OWSTableItem itemWithTitle:@"Send empty sync sent message 6"
+                                  actionBlock:^{
+                                      [DebugUIStress
+                                          sendStressMessage:thread
+                                                      block:^(SignalRecipient *recipient) {
+                                                          OWSSignalServiceProtosContentBuilder *contentBuilder =
+                                                              [OWSSignalServiceProtosContentBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageBuilder *syncMessageBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageBuilder new];
+                                                          OWSSignalServiceProtosSyncMessageSentBuilder *sentBuilder =
+                                                              [OWSSignalServiceProtosSyncMessageSentBuilder new];
+                                                          sentBuilder.destination = @"abc";
+                                                          syncMessageBuilder.sent = [sentBuilder build];
+                                                          contentBuilder.syncMessage = [syncMessageBuilder build];
+                                                          return [[contentBuilder build] data];
+                                                      }];
+                                  }]];
+    
     if ([thread isKindOfClass:[TSGroupThread class]]) {
         TSGroupThread *groupThread = (TSGroupThread *)thread;
         [items addObject:[OWSTableItem itemWithTitle:@"Hallucinate twin group"
@@ -87,6 +428,22 @@ - (nullable OWSTableSection *)sectionForThread:(nullable TSThread *)thread
     return [OWSTableSection sectionWithTitle:self.name items:items];
 }
 
++ (void)ensureGroupOfDataBuilder:(OWSSignalServiceProtosDataMessageBuilder *)dataBuilder thread:(TSThread *)thread
+{
+    OWSAssert(dataBuilder);
+    OWSAssert(thread);
+
+    if (![thread isKindOfClass:[TSGroupThread class]]) {
+        return;
+    }
+
+    TSGroupThread *groupThread = (TSGroupThread *)thread;
+    OWSSignalServiceProtosGroupContextBuilder *groupBuilder = [OWSSignalServiceProtosGroupContextBuilder new];
+    [groupBuilder setType:OWSSignalServiceProtosGroupContextTypeDeliver];
+    [groupBuilder setId:groupThread.groupModel.groupId];
+    [dataBuilder setGroup:groupBuilder.build];
+}
+
 + (void)sendStressMessage:(TSOutgoingMessage *)message
 {
     OWSAssert(message);
@@ -106,9 +463,20 @@ + (void)sendStressMessage:(TSThread *)thread
 {
     OWSAssert(thread);
     OWSAssert(block);
-    
-    OWSDynamicOutgoingMessage *message = [[OWSDynamicOutgoingMessage alloc] initWithBlock:block inThread:thread];
-    
+
+    OWSDynamicOutgoingMessage *message = [[OWSDynamicOutgoingMessage alloc] initWithBlock:block thread:thread];
+
+    [self sendStressMessage:message];
+}
+
++ (void)sendStressMessage:(TSThread *)thread timestamp:(uint64_t)timestamp block:(DynamicOutgoingMessageBlock)block
+{
+    OWSAssert(thread);
+    OWSAssert(block);
+
+    OWSDynamicOutgoingMessage *message =
+        [[OWSDynamicOutgoingMessage alloc] initWithBlock:block timestamp:timestamp thread:thread];
+
     [self sendStressMessage:message];
 }
 
diff --git a/Signal/src/ViewControllers/FingerprintViewController.m b/Signal/src/ViewControllers/FingerprintViewController.m
index 0a0516766c6..7a4a36c929f 100644
--- a/Signal/src/ViewControllers/FingerprintViewController.m
+++ b/Signal/src/ViewControllers/FingerprintViewController.m
@@ -12,7 +12,7 @@
 #import "UIFont+OWS.h"
 #import "UIUtil.h"
 #import "UIView+OWS.h"
-#import <SignalServiceKit/NSDate+millisecondTimeStamp.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/OWSError.h>
 #import <SignalServiceKit/OWSFingerprint.h>
 #import <SignalServiceKit/OWSFingerprintBuilder.h>
diff --git a/Signal/src/ViewControllers/HomeViewController.m b/Signal/src/ViewControllers/HomeViewController.m
index 85efe3786c9..41376be886e 100644
--- a/Signal/src/ViewControllers/HomeViewController.m
+++ b/Signal/src/ViewControllers/HomeViewController.m
@@ -7,7 +7,6 @@
 #import "AppSettingsViewController.h"
 #import "ConversationViewController.h"
 #import "InboxTableViewCell.h"
-#import "NSDate+millisecondTimeStamp.h"
 #import "NewContactThreadViewController.h"
 #import "OWSContactsManager.h"
 #import "OWSNavigationController.h"
@@ -23,6 +22,7 @@
 #import "VersionMigrations.h"
 #import "ViewControllerUtils.h"
 #import <PromiseKit/AnyPromise.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/OWSBlockingManager.h>
 #import <SignalServiceKit/OWSDisappearingMessagesJob.h>
 #import <SignalServiceKit/OWSMessageManager.h>
diff --git a/Signal/src/ViewControllers/NewGroupViewController.m b/Signal/src/ViewControllers/NewGroupViewController.m
index 9374740e8c7..c0deb64ca5e 100644
--- a/Signal/src/ViewControllers/NewGroupViewController.m
+++ b/Signal/src/ViewControllers/NewGroupViewController.m
@@ -18,7 +18,7 @@
 #import "UIUtil.h"
 #import "UIView+OWS.h"
 #import "UIViewController+OWS.h"
-#import <SignalServiceKit/NSDate+millisecondTimeStamp.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/OWSMessageSender.h>
 #import <SignalServiceKit/SecurityUtils.h>
 #import <SignalServiceKit/SignalAccount.h>
diff --git a/Signal/src/ViewControllers/OWSConversationSettingsViewController.m b/Signal/src/ViewControllers/OWSConversationSettingsViewController.m
index 95b1664ec43..758513efe91 100644
--- a/Signal/src/ViewControllers/OWSConversationSettingsViewController.m
+++ b/Signal/src/ViewControllers/OWSConversationSettingsViewController.m
@@ -20,7 +20,7 @@
 #import "UIView+OWS.h"
 #import "UpdateGroupViewController.h"
 #import <25519/Curve25519.h>
-#import <SignalServiceKit/NSDate+millisecondTimeStamp.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/OWSDisappearingConfigurationUpdateInfoMessage.h>
 #import <SignalServiceKit/OWSDisappearingMessagesConfiguration.h>
 #import <SignalServiceKit/OWSMessageSender.h>
diff --git a/Signal/src/ViewControllers/UpdateGroupViewController.m b/Signal/src/ViewControllers/UpdateGroupViewController.m
index 384367ebc1b..834539b68fa 100644
--- a/Signal/src/ViewControllers/UpdateGroupViewController.m
+++ b/Signal/src/ViewControllers/UpdateGroupViewController.m
@@ -19,7 +19,7 @@
 #import "UIView+OWS.h"
 #import "UIViewController+OWS.h"
 #import "ViewControllerUtils.h"
-#import <SignalServiceKit/NSDate+millisecondTimeStamp.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/OWSMessageSender.h>
 #import <SignalServiceKit/SecurityUtils.h>
 #import <SignalServiceKit/SignalAccount.h>
diff --git a/Signal/src/network/PushManager.m b/Signal/src/network/PushManager.m
index 1fa016f7dd9..cf0fd0a7c4a 100644
--- a/Signal/src/network/PushManager.m
+++ b/Signal/src/network/PushManager.m
@@ -8,7 +8,7 @@
 #import "OWSContactsManager.h"
 #import "Signal-Swift.h"
 #import "ThreadUtil.h"
-#import <SignalServiceKit/NSDate+millisecondTimeStamp.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/OWSMessageReceiver.h>
 #import <SignalServiceKit/OWSMessageSender.h>
 #import <SignalServiceKit/OWSReadReceiptsProcessor.h>
diff --git a/Signal/src/util/ThreadUtil.m b/Signal/src/util/ThreadUtil.m
index fd83c8945ba..0df0b3ee983 100644
--- a/Signal/src/util/ThreadUtil.m
+++ b/Signal/src/util/ThreadUtil.m
@@ -8,7 +8,7 @@
 #import "OWSProfileManager.h"
 #import "Signal-Swift.h"
 #import "TSUnreadIndicatorInteraction.h"
-#import <SignalServiceKit/NSDate+millisecondTimeStamp.h>
+#import <SignalServiceKit/NSDate+OWS.h>
 #import <SignalServiceKit/OWSAddToContactsOfferMessage.h>
 #import <SignalServiceKit/OWSAddToProfileWhitelistOfferMessage.h>
 #import <SignalServiceKit/OWSBlockingManager.h>
diff --git a/SignalServiceKit/src/Devices/OWSDevice.m b/SignalServiceKit/src/Devices/OWSDevice.m
index 3d329614aba..b1a5cc6b3a4 100644
--- a/SignalServiceKit/src/Devices/OWSDevice.m
+++ b/SignalServiceKit/src/Devices/OWSDevice.m
@@ -3,7 +3,7 @@
 //
 
 #import "OWSDevice.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSError.h"
 #import "YapDatabaseConnection.h"
 #import "YapDatabaseTransaction.h"
diff --git a/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncContactsMessage.m b/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncContactsMessage.m
index 0dd4172b836..78f6db821d4 100644
--- a/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncContactsMessage.m
+++ b/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncContactsMessage.m
@@ -5,14 +5,14 @@
 #import "OWSSyncContactsMessage.h"
 #import "Contact.h"
 #import "ContactsManagerProtocol.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSContactsOutputStream.h"
-#import "OWSSignalServiceProtos.pb.h"
 #import "OWSIdentityManager.h"
+#import "OWSSignalServiceProtos.pb.h"
+#import "ProfileManagerProtocol.h"
 #import "SignalAccount.h"
 #import "TSAttachment.h"
 #import "TSAttachmentStream.h"
-#import "ProfileManagerProtocol.h"
 
 NS_ASSUME_NONNULL_BEGIN
 
diff --git a/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncGroupsMessage.m b/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncGroupsMessage.m
index 24faf9ca180..575f3d9eb94 100644
--- a/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncGroupsMessage.m
+++ b/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncGroupsMessage.m
@@ -3,7 +3,7 @@
 //
 
 #import "OWSSyncGroupsMessage.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSGroupsOutputStream.h"
 #import "OWSSignalServiceProtos.pb.h"
 #import "TSAttachment.h"
diff --git a/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncGroupsRequestMessage.m b/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncGroupsRequestMessage.m
index ba6462b7737..5766a784f72 100644
--- a/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncGroupsRequestMessage.m
+++ b/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncGroupsRequestMessage.m
@@ -3,7 +3,7 @@
 //
 
 #import "OWSSyncGroupsRequestMessage.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSSignalServiceProtos.pb.h"
 
 NS_ASSUME_NONNULL_BEGIN
diff --git a/SignalServiceKit/src/Messages/Interactions/OWSDisappearingMessagesConfigurationMessage.m b/SignalServiceKit/src/Messages/Interactions/OWSDisappearingMessagesConfigurationMessage.m
index ffe7fbfe09f..d537488d856 100644
--- a/SignalServiceKit/src/Messages/Interactions/OWSDisappearingMessagesConfigurationMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/OWSDisappearingMessagesConfigurationMessage.m
@@ -1,8 +1,9 @@
-//  Created by Michael Kirk on 9/25/16.
-//  Copyright Â© 2016 Open Whisper Systems. All rights reserved.
+//
+//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//
 
 #import "OWSDisappearingMessagesConfigurationMessage.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSDisappearingMessagesConfiguration.h"
 #import "OWSSignalServiceProtos.pb.h"
 
diff --git a/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.h b/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.h
index b8358a5eed7..4a1461f18d1 100644
--- a/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.h
+++ b/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.h
@@ -13,7 +13,10 @@ typedef NSData *_Nonnull (^DynamicOutgoingMessageBlock)(SignalRecipient *);
 
 @interface OWSDynamicOutgoingMessage : TSOutgoingMessage
 
-- (instancetype)initWithBlock:(DynamicOutgoingMessageBlock)block inThread:(nullable TSThread *)thread;
+- (instancetype)initWithBlock:(DynamicOutgoingMessageBlock)block thread:(nullable TSThread *)thread;
+- (instancetype)initWithBlock:(DynamicOutgoingMessageBlock)block
+                    timestamp:(uint64_t)timestamp
+                       thread:(nullable TSThread *)thread;
 
 @end
 
diff --git a/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.m b/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.m
index 295e7abad93..f4db076ab01 100644
--- a/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/OWSDynamicOutgoingMessage.m
@@ -3,7 +3,7 @@
 //
 
 #import "OWSDynamicOutgoingMessage.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSSignalServiceProtos.pb.h"
 
 NS_ASSUME_NONNULL_BEGIN
@@ -18,9 +18,16 @@ @interface OWSDynamicOutgoingMessage ()
 
 @implementation OWSDynamicOutgoingMessage
 
-- (instancetype)initWithBlock:(DynamicOutgoingMessageBlock)block inThread:(nullable TSThread *)thread
+- (instancetype)initWithBlock:(DynamicOutgoingMessageBlock)block thread:(nullable TSThread *)thread
 {
-    self = [super initWithTimestamp:[NSDate ows_millisecondTimeStamp] inThread:thread];
+    return [self initWithBlock:block timestamp:[NSDate ows_millisecondTimeStamp] thread:thread];
+}
+
+- (instancetype)initWithBlock:(DynamicOutgoingMessageBlock)block
+                    timestamp:(uint64_t)timestamp
+                       thread:(nullable TSThread *)thread
+{
+    self = [super initWithTimestamp:timestamp inThread:thread];
 
     if (self) {
         _block = block;
diff --git a/SignalServiceKit/src/Messages/Interactions/TSErrorMessage.m b/SignalServiceKit/src/Messages/Interactions/TSErrorMessage.m
index 6b84dda1f93..2e8fac670ce 100644
--- a/SignalServiceKit/src/Messages/Interactions/TSErrorMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/TSErrorMessage.m
@@ -4,7 +4,7 @@
 
 #import "TSErrorMessage.h"
 #import "ContactsManagerProtocol.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSMessageManager.h"
 #import "TSContactThread.h"
 #import "TSErrorMessage_privateConstructor.h"
diff --git a/SignalServiceKit/src/Messages/Interactions/TSInfoMessage.m b/SignalServiceKit/src/Messages/Interactions/TSInfoMessage.m
index 48d43b625c4..b479f1020bb 100644
--- a/SignalServiceKit/src/Messages/Interactions/TSInfoMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/TSInfoMessage.m
@@ -3,7 +3,7 @@
 //
 
 #import "TSInfoMessage.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import <YapDatabase/YapDatabaseConnection.h>
 
 NS_ASSUME_NONNULL_BEGIN
diff --git a/SignalServiceKit/src/Messages/Interactions/TSInteraction.m b/SignalServiceKit/src/Messages/Interactions/TSInteraction.m
index 6084622da6f..032f61aaad5 100644
--- a/SignalServiceKit/src/Messages/Interactions/TSInteraction.m
+++ b/SignalServiceKit/src/Messages/Interactions/TSInteraction.m
@@ -3,7 +3,7 @@
 //
 
 #import "TSInteraction.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "TSDatabaseSecondaryIndexes.h"
 #import "TSStorageManager+messageIDs.h"
 #import "TSThread.h"
diff --git a/SignalServiceKit/src/Messages/Interactions/TSMessage.m b/SignalServiceKit/src/Messages/Interactions/TSMessage.m
index 10433e6b164..4482ed42b48 100644
--- a/SignalServiceKit/src/Messages/Interactions/TSMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/TSMessage.m
@@ -3,7 +3,7 @@
 //
 
 #import "TSMessage.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "TSAttachment.h"
 #import "TSAttachmentPointer.h"
 #import "TSThread.h"
diff --git a/SignalServiceKit/src/Messages/Interactions/TSOutgoingMessage.m b/SignalServiceKit/src/Messages/Interactions/TSOutgoingMessage.m
index 86b540b8c39..e1d4022b421 100644
--- a/SignalServiceKit/src/Messages/Interactions/TSOutgoingMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/TSOutgoingMessage.m
@@ -3,7 +3,7 @@
 //
 
 #import "TSOutgoingMessage.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSOutgoingSyncMessage.h"
 #import "OWSSignalServiceProtos.pb.h"
 #import "ProfileManagerProtocol.h"
diff --git a/SignalServiceKit/src/Messages/OWSDisappearingMessagesFinder.m b/SignalServiceKit/src/Messages/OWSDisappearingMessagesFinder.m
index 2c65b097fe2..67ae4c1116c 100644
--- a/SignalServiceKit/src/Messages/OWSDisappearingMessagesFinder.m
+++ b/SignalServiceKit/src/Messages/OWSDisappearingMessagesFinder.m
@@ -3,7 +3,7 @@
 //
 
 #import "OWSDisappearingMessagesFinder.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "TSMessage.h"
 #import "TSOutgoingMessage.h"
 #import "TSStorageManager.h"
diff --git a/SignalServiceKit/src/Messages/OWSDisappearingMessagesJob.m b/SignalServiceKit/src/Messages/OWSDisappearingMessagesJob.m
index a3cb33ccff9..2f8c1d1b91a 100644
--- a/SignalServiceKit/src/Messages/OWSDisappearingMessagesJob.m
+++ b/SignalServiceKit/src/Messages/OWSDisappearingMessagesJob.m
@@ -5,7 +5,6 @@
 #import "OWSDisappearingMessagesJob.h"
 #import "ContactsManagerProtocol.h"
 #import "NSDate+OWS.h"
-#import "NSDate+millisecondTimeStamp.h"
 #import "NSTimer+OWS.h"
 #import "OWSDisappearingConfigurationUpdateInfoMessage.h"
 #import "OWSDisappearingMessagesConfiguration.h"
diff --git a/SignalServiceKit/src/Messages/OWSIdentityManager.m b/SignalServiceKit/src/Messages/OWSIdentityManager.m
index dc0844e33cf..d6961d43ab4 100644
--- a/SignalServiceKit/src/Messages/OWSIdentityManager.m
+++ b/SignalServiceKit/src/Messages/OWSIdentityManager.m
@@ -3,7 +3,7 @@
 //
 
 #import "OWSIdentityManager.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "NSNotificationCenter+OWS.h"
 #import "NotificationsProtocol.h"
 #import "OWSError.h"
diff --git a/SignalServiceKit/src/Messages/OWSMessageManager.m b/SignalServiceKit/src/Messages/OWSMessageManager.m
index bd8a47249c5..9cba78d0364 100644
--- a/SignalServiceKit/src/Messages/OWSMessageManager.m
+++ b/SignalServiceKit/src/Messages/OWSMessageManager.m
@@ -6,7 +6,7 @@
 #import "ContactsManagerProtocol.h"
 #import "Cryptography.h"
 #import "MimeTypeUtil.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "NotificationsProtocol.h"
 #import "OWSAttachmentsProcessor.h"
 #import "OWSBlockingManager.h"
diff --git a/SignalServiceKit/src/Messages/OWSOutgoingCallMessage.m b/SignalServiceKit/src/Messages/OWSOutgoingCallMessage.m
index 153558dca4d..f91a7d7978b 100644
--- a/SignalServiceKit/src/Messages/OWSOutgoingCallMessage.m
+++ b/SignalServiceKit/src/Messages/OWSOutgoingCallMessage.m
@@ -3,7 +3,7 @@
 //
 
 #import "OWSOutgoingCallMessage.h"
-#import "NSDate+millisecondTimeStamp.h"
+#import "NSDate+OWS.h"
 #import "OWSCallAnswerMessage.h"
 #import "OWSCallBusyMessage.h"
 #import "OWSCallHangupMessage.h"
diff --git a/SignalServiceKit/src/Messages/OWSOutgoingNullMessage.m b/SignalServiceKit/src/Messages/OWSOutgoingNullMessage.m
index 45f8044acda..f80bf7060e5 100644
--- a/SignalServiceKit/src/Messages/OWSOutgoingNullMessage.m
+++ b/SignalServiceKit/src/Messages/OWSOutgoingNullMessage.m
@@ -4,10 +4,10 @@
 
 #import "OWSOutgoingNullMessage.h"
 #import "Cryptography.h"
-#import "NSDate+millisecondTimeStamp.h"
-#import "TSContactThread.h"
+#import "NSDate+OWS.h"
 #import "OWSSignalServiceProtos.pb.h"
 #import "OWSVerificationStateSyncMessage.h"
+#import "TSContactThread.h"
 
 NS_ASSUME_NONNULL_BEGIN
 
diff --git a/SignalServiceKit/src/Util/NSDate+OWS.h b/SignalServiceKit/src/Util/NSDate+OWS.h
index cba1a0ded30..104c2089282 100755
--- a/SignalServiceKit/src/Util/NSDate+OWS.h
+++ b/SignalServiceKit/src/Util/NSDate+OWS.h
@@ -11,4 +11,19 @@ NS_ASSUME_NONNULL_BEGIN
 #define kWeekInterval (7 * kDayInterval)
 #define kMonthInterval (30 * kDayInterval)
 
+#define kSecondInMs 1000
+#define kMinuteInMs (kSecondInMs * 60)
+#define kHourInMs (kMinuteInMs * 60)
+#define kDayInMs (kHourInMs * 24)
+#define kWeekInMs (kDayInMs * 7)
+#define kMonthInMs (kDayInMs * 30)
+
+@interface NSDate (millisecondTimeStamp)
+
++ (uint64_t)ows_millisecondTimeStamp;
++ (NSDate *)ows_dateWithMillisecondsSince1970:(uint64_t)milliseconds;
++ (uint64_t)ows_millisecondsSince1970ForDate:(NSDate *)date;
+
+@end
+
 NS_ASSUME_NONNULL_END
diff --git a/SignalServiceKit/src/Util/NSDate+millisecondTimeStamp.mm b/SignalServiceKit/src/Util/NSDate+OWS.mm
similarity index 53%
rename from SignalServiceKit/src/Util/NSDate+millisecondTimeStamp.mm
rename to SignalServiceKit/src/Util/NSDate+OWS.mm
index 6814990ecb0..986a21bac3f 100644
--- a/SignalServiceKit/src/Util/NSDate+millisecondTimeStamp.mm
+++ b/SignalServiceKit/src/Util/NSDate+OWS.mm
@@ -1,14 +1,16 @@
-//  Created by Frederic Jacobs on 25/11/14.
-//  Copyright (c) 2014 Open Whisper Systems. All rights reserved.
+//
+//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//
 
+#import "NSDate+OWS.h"
 #import <chrono>
-#import "NSDate+millisecondTimeStamp.h"
 
 @implementation NSDate (millisecondTimeStamp)
 
-+ (uint64_t)ows_millisecondTimeStamp {
-    uint64_t milliseconds =
-        (uint64_t)(std::chrono::system_clock::now().time_since_epoch() / std::chrono::milliseconds(1));
++ (uint64_t)ows_millisecondTimeStamp
+{
+    uint64_t milliseconds
+        = (uint64_t)(std::chrono::system_clock::now().time_since_epoch() / std::chrono::milliseconds(1));
     return milliseconds;
 }
 
diff --git a/SignalServiceKit/src/Util/NSDate+millisecondTimeStamp.h b/SignalServiceKit/src/Util/NSDate+millisecondTimeStamp.h
deleted file mode 100644
index 0dac0ced9a3..00000000000
--- a/SignalServiceKit/src/Util/NSDate+millisecondTimeStamp.h
+++ /dev/null
@@ -1,11 +0,0 @@
-//  Created by Frederic Jacobs on 25/11/14.
-//  Copyright (c) 2014 Open Whisper Systems. All rights reserved.
-
-
-@interface NSDate (millisecondTimeStamp)
-
-+ (uint64_t)ows_millisecondTimeStamp;
-+ (NSDate *)ows_dateWithMillisecondsSince1970:(uint64_t)milliseconds;
-+ (uint64_t)ows_millisecondsSince1970ForDate:(NSDate *)date;
-
-@end
