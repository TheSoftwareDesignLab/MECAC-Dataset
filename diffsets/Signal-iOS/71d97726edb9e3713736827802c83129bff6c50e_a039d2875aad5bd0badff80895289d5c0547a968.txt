diff --git a/Signal.xcodeproj/project.pbxproj b/Signal.xcodeproj/project.pbxproj
index 5d29c29a33b..11c3cdb5b46 100644
--- a/Signal.xcodeproj/project.pbxproj
+++ b/Signal.xcodeproj/project.pbxproj
@@ -18,6 +18,7 @@
 		328EF3DC25782A6A00D5C31D /* GroupCallSpeakerToastView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 328EF3DB25782A6A00D5C31D /* GroupCallSpeakerToastView.swift */; };
 		329D42A225AD65C400DCB449 /* GetStartedBannerCell.swift in Sources */ = {isa = PBXBuildFile; fileRef = 329D42A125AD65C400DCB449 /* GetStartedBannerCell.swift */; };
 		329D42A725AE673400DCB449 /* NetworkInterfacePreferenceViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 329D42A625AE673400DCB449 /* NetworkInterfacePreferenceViewController.swift */; };
+		329E631F25D64971002ED315 /* OnboardingProfileCreationViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 329E631E25D64970002ED315 /* OnboardingProfileCreationViewController.swift */; };
 		32A9E22624C11B3F00C43518 /* EmojiMoodPickerView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 32A9E22524C11B3F00C43518 /* EmojiMoodPickerView.swift */; };
 		32AC5CE7255B51E900829BD8 /* JoinGroupCallPill.swift in Sources */ = {isa = PBXBuildFile; fileRef = 32AC5CE6255B51E900829BD8 /* JoinGroupCallPill.swift */; };
 		32AC5CF1255F875C00829BD8 /* GroupCallUpdateMessageHandler.swift in Sources */ = {isa = PBXBuildFile; fileRef = 32AC5CF0255F875C00829BD8 /* GroupCallUpdateMessageHandler.swift */; };
@@ -230,7 +231,7 @@
 		347850691FD9B78A007B8332 /* AppSetup.m in Sources */ = {isa = PBXBuildFile; fileRef = 347850651FD9B789007B8332 /* AppSetup.m */; };
 		3478506A1FD9B78A007B8332 /* AppSetup.h in Headers */ = {isa = PBXBuildFile; fileRef = 347850661FD9B789007B8332 /* AppSetup.h */; settings = {ATTRIBUTES = (Public, ); }; };
 		3478506B1FD9B78A007B8332 /* NoopCallMessageHandler.swift in Sources */ = {isa = PBXBuildFile; fileRef = 347850671FD9B78A007B8332 /* NoopCallMessageHandler.swift */; };
-		34798A8525AF370D00EC89B4 /* ProfileViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34798A8425AF370D00EC89B4 /* ProfileViewController.swift */; };
+		34798A8525AF370D00EC89B4 /* ProfileSettingsViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34798A8425AF370D00EC89B4 /* ProfileSettingsViewController.swift */; };
 		34798A8725AF965300EC89B4 /* ProfileBioViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34798A8625AF965300EC89B4 /* ProfileBioViewController.swift */; };
 		347B83F724367EC10019A52C /* GroupViewHelper+MemberActionSheet.swift in Sources */ = {isa = PBXBuildFile; fileRef = 347B83F624367EC00019A52C /* GroupViewHelper+MemberActionSheet.swift */; };
 		347B83F92436820C0019A52C /* GroupViewHelper.swift in Sources */ = {isa = PBXBuildFile; fileRef = 347B83F82436820C0019A52C /* GroupViewHelper.swift */; };
@@ -994,6 +995,7 @@
 		328EF3DB25782A6A00D5C31D /* GroupCallSpeakerToastView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = GroupCallSpeakerToastView.swift; sourceTree = "<group>"; };
 		329D42A125AD65C400DCB449 /* GetStartedBannerCell.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = GetStartedBannerCell.swift; sourceTree = "<group>"; };
 		329D42A625AE673400DCB449 /* NetworkInterfacePreferenceViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = NetworkInterfacePreferenceViewController.swift; sourceTree = "<group>"; };
+		329E631E25D64970002ED315 /* OnboardingProfileCreationViewController.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = OnboardingProfileCreationViewController.swift; sourceTree = "<group>"; };
 		32A9E22524C11B3F00C43518 /* EmojiMoodPickerView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = EmojiMoodPickerView.swift; sourceTree = "<group>"; };
 		32AC5CE6255B51E900829BD8 /* JoinGroupCallPill.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = JoinGroupCallPill.swift; sourceTree = "<group>"; };
 		32AC5CF0255F875C00829BD8 /* GroupCallUpdateMessageHandler.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = GroupCallUpdateMessageHandler.swift; sourceTree = "<group>"; };
@@ -1248,7 +1250,7 @@
 		347850651FD9B789007B8332 /* AppSetup.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = AppSetup.m; sourceTree = "<group>"; };
 		347850661FD9B789007B8332 /* AppSetup.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = AppSetup.h; sourceTree = "<group>"; };
 		347850671FD9B78A007B8332 /* NoopCallMessageHandler.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = NoopCallMessageHandler.swift; sourceTree = "<group>"; };
-		34798A8425AF370D00EC89B4 /* ProfileViewController.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ProfileViewController.swift; sourceTree = "<group>"; };
+		34798A8425AF370D00EC89B4 /* ProfileSettingsViewController.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ProfileSettingsViewController.swift; sourceTree = "<group>"; };
 		34798A8625AF965300EC89B4 /* ProfileBioViewController.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ProfileBioViewController.swift; sourceTree = "<group>"; };
 		347B83F624367EC00019A52C /* GroupViewHelper+MemberActionSheet.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = "GroupViewHelper+MemberActionSheet.swift"; sourceTree = "<group>"; };
 		347B83F82436820C0019A52C /* GroupViewHelper.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = GroupViewHelper.swift; sourceTree = "<group>"; };
@@ -2254,17 +2256,18 @@
 				4C3A2BC5235661AB004B3986 /* SecondaryLinking */,
 				3441FD9E21A3604F00BB9542 /* BackupRestoreViewController.swift */,
 				349ED98F221B0194008045B0 /* Onboarding2FAViewController.swift */,
-				8810223622DF9C2300A7C44F /* OnboardingPinAttemptsExhaustedViewController.swift */,
 				3448E1612213585C004B052E /* OnboardingBaseViewController.swift */,
 				3448E1652215B313004B052E /* OnboardingCaptchaViewController.swift */,
 				3448E15D221333F5004B052E /* OnboardingController.swift */,
+				88EAD79123764F09004B797E /* OnboardingModeSwitchConfirmationViewController.swift */,
 				3448E15B22133274004B052E /* OnboardingPermissionsViewController.swift */,
-				3448E16322135FFA004B052E /* OnboardingPhoneNumberViewController.swift */,
 				88D1BCBD24F75226009A1738 /* OnboardingPhoneNumberDiscoverabilityViewController.swift */,
+				3448E16322135FFA004B052E /* OnboardingPhoneNumberViewController.swift */,
+				8810223622DF9C2300A7C44F /* OnboardingPinAttemptsExhaustedViewController.swift */,
+				329E631E25D64970002ED315 /* OnboardingProfileCreationViewController.swift */,
 				3448E15F22134C88004B052E /* OnboardingSplashViewController.swift */,
 				34A4C61D221613D00042EF2E /* OnboardingVerificationViewController.swift */,
 				346E9D5321B040B600562252 /* RegistrationController.swift */,
-				88EAD79123764F09004B797E /* OnboardingModeSwitchConfirmationViewController.swift */,
 			);
 			path = Registration;
 			sourceTree = "<group>";
@@ -2841,7 +2844,7 @@
 				881D85B722D92C2B00E118DF /* OWSPinSetupViewController.swift */,
 				34969558219B605E00DCFE74 /* Photos */,
 				34798A8625AF965300EC89B4 /* ProfileBioViewController.swift */,
-				34798A8425AF370D00EC89B4 /* ProfileViewController.swift */,
+				34798A8425AF370D00EC89B4 /* ProfileSettingsViewController.swift */,
 				8835DDFB230CEE7600DC6B66 /* RecipientPicker */,
 				340FC875204DAC8C007AEB0F /* Registration */,
 				4585C4671ED8F8D200896AEA /* SafetyNumberConfirmationSheet.swift */,
@@ -5422,6 +5425,7 @@
 				348815B325503BAA00D4F4C4 /* CVLoader.swift in Sources */,
 				340FC8B1204DAC8D007AEB0F /* BlockListViewController.m in Sources */,
 				4C751BE523FA0284002A8AF1 /* ContactSupportAlert.swift in Sources */,
+				329E631F25D64971002ED315 /* OnboardingProfileCreationViewController.swift in Sources */,
 				348815CA255346A500D4F4C4 /* CVRenderItem.swift in Sources */,
 				32CBF07D258C939800D56903 /* MessageRequestNameCollisionViewController.swift in Sources */,
 				34DE9C02256575300080E4AF /* CVMessageMapping.swift in Sources */,
@@ -5441,7 +5445,7 @@
 				340D900024FEE6A9007B5504 /* GroupInviteLinksUI.swift in Sources */,
 				34D2CCDA2062E7D000CB1A14 /* OWSScreenLockUI.m in Sources */,
 				887CD47B247304B600FDD265 /* DeviceTransferService+URL.swift in Sources */,
-				34798A8525AF370D00EC89B4 /* ProfileViewController.swift in Sources */,
+				34798A8525AF370D00EC89B4 /* ProfileSettingsViewController.swift in Sources */,
 				888B6D4225B16F3500E2A662 /* SharingSuggestionsMegaphone.swift in Sources */,
 				4CA46F4C219CCC630038ABDE /* CaptionView.swift in Sources */,
 				34BECE2E1F7ABCE000D7438D /* GifPickerViewController.swift in Sources */,
diff --git a/Signal/src/ViewControllers/AppSettings/AppSettingsViewController.m b/Signal/src/ViewControllers/AppSettings/AppSettingsViewController.m
index 09f5ebabbda..fbb6f0f8e64 100644
--- a/Signal/src/ViewControllers/AppSettings/AppSettingsViewController.m
+++ b/Signal/src/ViewControllers/AppSettings/AppSettingsViewController.m
@@ -343,12 +343,11 @@ - (void)showLinkedDevices
 
 - (void)showProfile
 {
-    UIViewController *vc =
-        [[ProfileViewController alloc] initWithMode:ProfileViewModeAppSettings
-                                  completionHandler:^(ProfileViewController *completedVC) {
-                                      [completedVC.navigationController popViewControllerAnimated:YES];
-                                  }];
-    [self.navigationController pushViewController:vc animated:YES];
+    ProfileSettingsViewController *profileVC = nil;
+    profileVC = [[ProfileSettingsViewController alloc] initWithCompletionHandler:^(ProfileSettingsViewController *vc) {
+        [vc.navigationController popViewControllerAnimated:YES];
+    }];
+    [self.navigationController pushViewController:profileVC animated:NO];
 }
 
 - (void)showData
diff --git a/Signal/src/ViewControllers/ProfileBioViewController.swift b/Signal/src/ViewControllers/ProfileBioViewController.swift
index 6facb78de5d..223154d5a81 100644
--- a/Signal/src/ViewControllers/ProfileBioViewController.swift
+++ b/Signal/src/ViewControllers/ProfileBioViewController.swift
@@ -24,19 +24,15 @@ class ProfileBioViewController: OWSTableViewController {
 
     private let emojiButton = OWSButton()
 
-    private let mode: ProfileViewMode
-
     private let originalBio: String?
     private let originalBioEmoji: String?
 
     required init(bio: String?,
                   bioEmoji: String?,
-                  mode: ProfileViewMode,
                   profileDelegate: ProfileBioViewControllerDelegate) {
 
         self.originalBio = bio
         self.originalBioEmoji = bioEmoji
-        self.mode = mode
         self.profileDelegate = profileDelegate
 
         super.init()
@@ -47,15 +43,6 @@ class ProfileBioViewController: OWSTableViewController {
         self.shouldAvoidKeyboard = true
     }
 
-    // MARK: - Orientation
-
-    public override var supportedInterfaceOrientations: UIInterfaceOrientationMask {
-        if UIDevice.current.isIPad {
-            return .all
-        }
-        return mode == .registration ? .portrait : .allButUpsideDown
-    }
-
     // MARK: -
 
     public override func loadView() {
diff --git a/Signal/src/ViewControllers/ProfileSettingsViewController.swift b/Signal/src/ViewControllers/ProfileSettingsViewController.swift
new file mode 100644
index 00000000000..d7eab454f79
--- /dev/null
+++ b/Signal/src/ViewControllers/ProfileSettingsViewController.swift
@@ -0,0 +1,626 @@
+//
+//  Copyright (c) 2021 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+import SafariServices
+import PromiseKit
+
+@objc
+public class ProfileSettingsViewController: OWSTableViewController {
+
+    private let avatarViewHelper = AvatarViewHelper()
+
+    private lazy var givenNameTextField = OWSTextField()
+
+    private lazy var familyNameTextField = OWSTextField()
+
+    private let profileNamePreviewLabel = UILabel()
+
+    private let usernameLabel = UILabel()
+
+    private let avatarView = AvatarImageView()
+
+    private var saveButton: OWSFlatButton?
+
+    private var username: String?
+    private var profileBio: String?
+    private var profileBioEmoji: String?
+    private var avatarData: Data?
+
+    private var hasUnsavedChanges = false {
+        didSet {
+            updateNavigationItem()
+        }
+    }
+
+    private let completionHandler: (ProfileSettingsViewController) -> Void
+
+    @objc
+    public required init(completionHandler: @escaping (ProfileSettingsViewController) -> Void) {
+        self.completionHandler = completionHandler
+
+        super.init()
+
+        self.shouldAvoidKeyboard = true
+    }
+
+    // MARK: -
+
+    public override func loadView() {
+        super.loadView()
+
+        self.useThemeBackgroundColors = true
+
+        self.title = NSLocalizedString("PROFILE_VIEW_TITLE", comment: "Title for the profile view.")
+
+        avatarViewHelper.delegate = self
+
+        let profileSnapshot = profileManager.localProfileSnapshot(shouldIncludeAvatar: true)
+        givenNameTextField.text = profileSnapshot.givenName
+        familyNameTextField.text = profileSnapshot.familyName
+        self.profileBio = profileSnapshot.bio
+        self.profileBioEmoji = profileSnapshot.bioEmoji
+        self.username = profileSnapshot.username
+        self.avatarData = profileSnapshot.avatarData
+
+        createViews()
+        updateNavigationItem()
+        updateTableContents()
+    }
+
+    public override func viewWillAppear(_ animated: Bool) {
+        super.viewWillAppear(animated)
+        updateNavigationItem()
+        updateUsername()
+    }
+
+    public override func viewDidAppear(_ animated: Bool) {
+        super.viewDidAppear(animated)
+        updateNavigationItem()
+    }
+
+    private func createViews() {
+        avatarView.autoSetDimensions(to: CGSize.square(96))
+        avatarView.accessibilityIdentifier = "avatar_view"
+
+        givenNameTextField.returnKeyType = .next
+        givenNameTextField.autocorrectionType = .no
+        givenNameTextField.spellCheckingType = .no
+        givenNameTextField.placeholder = NSLocalizedString("PROFILE_VIEW_GIVEN_NAME_DEFAULT_TEXT",
+                                                           comment: "Default text for the given name field of the profile view.")
+        givenNameTextField.delegate = self
+        givenNameTextField.textAlignment = .right
+        givenNameTextField.accessibilityIdentifier = "given_name_textfield"
+        givenNameTextField.addTarget(self, action: #selector(textFieldDidChange), for: .editingChanged)
+
+        familyNameTextField.returnKeyType = .done
+        familyNameTextField.autocorrectionType = .no
+        familyNameTextField.spellCheckingType = .no
+        familyNameTextField.placeholder = NSLocalizedString("PROFILE_VIEW_FAMILY_NAME_DEFAULT_TEXT",
+                                                            comment: "Default text for the family name field of the profile view.")
+        familyNameTextField.delegate = self
+        familyNameTextField.textAlignment = .right
+        familyNameTextField.accessibilityIdentifier = "family_name_textfield"
+        familyNameTextField.addTarget(self, action: #selector(textFieldDidChange), for: .editingChanged)
+
+        profileNamePreviewLabel.textAlignment = .center
+        profileNamePreviewLabel.textColor = Theme.secondaryTextAndIconColor
+        profileNamePreviewLabel.font = .ows_dynamicTypeSubheadlineClamped
+    }
+
+    func updateTableContents() {
+        let contents = OWSTableContents()
+
+        let givenNameTextField = self.givenNameTextField
+        let familyNameTextField = self.familyNameTextField
+        let avatarView = self.avatarView
+        let profileNamePreviewLabel = self.profileNamePreviewLabel
+
+        updateAvatarView()
+        updateProfileNamePreview()
+
+        let avatarSection = OWSTableSection()
+        avatarSection.add(OWSTableItem(customCellBlock: { () -> UITableViewCell in
+            let cell = OWSTableItem.newCell()
+
+            let stackView = UIStackView(arrangedSubviews: [avatarView, profileNamePreviewLabel])
+            stackView.axis = .vertical
+            stackView.alignment = .center
+            stackView.spacing = 16
+            stackView.layoutMargins = UIEdgeInsets(top: 24, leading: 0, bottom: 32, trailing: 0)
+            stackView.isLayoutMarginsRelativeArrangement = true
+            cell.contentView.addSubview(stackView)
+            stackView.autoPinEdgesToSuperviewMargins()
+
+            let cameraImageView = UIImageView.withTemplateImageName("camera-outline-24", tintColor: Theme.secondaryTextAndIconColor)
+            cameraImageView.autoSetDimensions(to: CGSize.square(32))
+            cameraImageView.contentMode = .center
+            cameraImageView.backgroundColor = Theme.backgroundColor
+            cameraImageView.layer.cornerRadius = 16
+            cameraImageView.layer.shadowColor = (Theme.isDarkThemeEnabled ? Theme.darkThemeWashColor : Theme.primaryTextColor).cgColor
+            cameraImageView.layer.shadowOffset = CGSize.square(1)
+            cameraImageView.layer.shadowOpacity = 0.5
+            cameraImageView.layer.shadowRadius = 4
+            stackView.addSubview(cameraImageView)
+            cameraImageView.autoPinTrailing(toEdgeOf: avatarView)
+            cameraImageView.autoPinEdge(.bottom, to: .bottom, of: avatarView)
+
+            return cell
+        },
+        actionBlock: { [weak self] in
+            self?.didTapAvatar()
+        }))
+        contents.addSection(avatarSection)
+
+        let namesSection = OWSTableSection()
+        func addGivenNameRow() {
+            namesSection.add(OWSTableItem(customCellBlock: { () -> UITableViewCell in
+
+                givenNameTextField.font = .ows_dynamicTypeBodyClamped
+                givenNameTextField.textColor = Theme.primaryTextColor
+
+                return Self.buildNameCell(title: NSLocalizedString("PROFILE_VIEW_GIVEN_NAME_FIELD",
+                                                                   comment: "Label for the given name field of the profile view."),
+                                          valueView: givenNameTextField,
+                                          accessibilityIdentifier: "given_name")
+            },
+            actionBlock: {
+                givenNameTextField.becomeFirstResponder()
+            }))
+        }
+        func addFamilyNameRow() {
+            namesSection.add(OWSTableItem(customCellBlock: { () -> UITableViewCell in
+
+                familyNameTextField.font = .ows_dynamicTypeBodyClamped
+                familyNameTextField.textColor = Theme.primaryTextColor
+
+                return Self.buildNameCell(title: NSLocalizedString("PROFILE_VIEW_FAMILY_NAME_FIELD",
+                                                                   comment: "Label for the family name field of the profile view."),
+                                          valueView: familyNameTextField,
+                                          accessibilityIdentifier: "given_name")
+            },
+            actionBlock: {
+                familyNameTextField.becomeFirstResponder()
+            }))
+        }
+        // For CJKV locales, display family name field first.
+        if NSLocale.current.isCJKV {
+            addFamilyNameRow()
+            addGivenNameRow()
+
+            // Otherwise, display given name field first.
+        } else {
+            addGivenNameRow()
+            addFamilyNameRow()
+        }
+        if RemoteConfig.usernames {
+            namesSection.add(buildUsernameItem())
+        }
+        contents.addSection(namesSection)
+
+        let aboutSection = OWSTableSection()
+        aboutSection.headerTitle = NSLocalizedString("PROFILE_VIEW_BIO_SECTION_HEADER",
+                                                     comment: "Header for the 'bio' section of the profile view.")
+        let profileBio = self.normalizedProfileBio
+        let profileBioEmoji = self.normalizedProfileBioEmoji
+        if let bioForDisplay = OWSUserProfile.bioForDisplay(bio: profileBio, bioEmoji: profileBioEmoji) {
+            aboutSection.add(OWSTableItem(customCellBlock: { () -> UITableViewCell in
+                let cell = OWSTableItem.newCell()
+
+                let label = UILabel()
+                label.text = bioForDisplay
+                label.textColor = Theme.primaryTextColor
+                label.font = .ows_dynamicTypeBodyClamped
+                label.numberOfLines = 0
+                label.lineBreakMode = .byWordWrapping
+                cell.contentView.addSubview(label)
+                label.autoPinEdgesToSuperviewMargins()
+
+                cell.accessoryType = .disclosureIndicator
+
+                cell.accessibilityIdentifier = "profile_bio"
+
+                return cell
+            },
+            actionBlock: { [weak self] in
+                self?.didTapBio()
+            }))
+        } else {
+            aboutSection.add(OWSTableItem.item(name: NSLocalizedString("PROFILE_VIEW_ADD_BIO_TO_PROFILE",
+                                                                       comment: "Button to add a 'bio' to the user's profile in the profile view."),
+                                               textColor: Theme.accentBlueColor,
+                                               accessoryType: .disclosureIndicator,
+                                               accessibilityIdentifier: "profile_bio") { [weak self] in
+                self?.didTapBio()
+            })
+        }
+        contents.addSection(aboutSection)
+
+        // Information Footer
+
+        let infoGestureRecognizer = UITapGestureRecognizer(target: self,
+                                                           action: #selector(didTapInfo))
+        aboutSection.customFooterView = { () -> UIView in
+
+            let label = UILabel()
+            label.textColor = Theme.secondaryTextAndIconColor
+            label.font = .ows_dynamicTypeCaption1Clamped
+            let attributedText = NSMutableAttributedString()
+            attributedText.append(NSLocalizedString("PROFILE_VIEW_PROFILE_DESCRIPTION",
+                                                    comment: "Description of the user profile."))
+            attributedText.append(" ")
+            attributedText.append(NSAttributedString(string: CommonStrings.learnMore,
+                                                     attributes: [
+                                                        NSAttributedString.Key.foregroundColor: Theme.accentBlueColor,
+                                                        NSAttributedString.Key.underlineStyle: 0
+                                                     ]))
+            label.attributedText = attributedText
+            label.numberOfLines = 0
+            label.lineBreakMode = .byWordWrapping
+
+            label.backgroundColor = Theme.tableViewBackgroundColor
+
+            label.isUserInteractionEnabled = true
+            label.addGestureRecognizer(infoGestureRecognizer)
+
+            let footer = UIView()
+            footer.layoutMargins = UIEdgeInsets(hMargin: 20, vMargin: 12)
+            footer.addSubview(label)
+            label.autoPinEdgesToSuperviewMargins()
+
+            return footer
+        }()
+
+        self.contents = contents
+    }
+
+    private func buildUsernameItem() -> OWSTableItem {
+        updateUsername()
+
+        let usernameLabel = self.usernameLabel
+        return OWSTableItem(customCellBlock: { () -> UITableViewCell in
+            let title = NSLocalizedString("PROFILE_VIEW_USERNAME_FIELD",
+                                          comment: "Label for the username field of the profile view.")
+
+            usernameLabel.font = .ows_dynamicTypeBodyClamped
+            usernameLabel.textAlignment = .right
+
+            let cell = Self.buildNameCell(title: title,
+                                          valueView: usernameLabel,
+                                          accessibilityIdentifier: "username")
+
+            cell.accessoryType = .disclosureIndicator
+
+            return cell
+        },
+        actionBlock: { [weak self] in
+            self?.didTapUsername()
+        })
+    }
+
+    private static func buildNameLabel(title: String) -> UILabel {
+        let label = UILabel()
+        label.text = title
+        label.textColor = Theme.primaryTextColor
+        label.font = UIFont.ows_dynamicTypeBodyClamped.ows_semibold
+        label.setCompressionResistanceHorizontalHigh()
+        label.setContentHuggingHorizontalHigh()
+        return label
+    }
+
+    private static func buildNameCell(title: String,
+                                      valueView: UIView,
+                                      accessibilityIdentifier: String,
+                                      accessoryView: UIView? = nil) -> UITableViewCell {
+        let cell = OWSTableItem.newCell()
+
+        let titleLabel = buildNameLabel(title: title)
+
+        valueView.setCompressionResistanceHorizontalLow()
+        valueView.setContentHuggingHorizontalLow()
+
+        var subviews = [titleLabel, valueView]
+        if let accessoryView = accessoryView {
+            accessoryView.setCompressionResistanceHorizontalHigh()
+            accessoryView.setContentHuggingHorizontalHigh()
+            subviews.append(accessoryView)
+        }
+        let stackView = UIStackView(arrangedSubviews: subviews)
+        stackView.axis = .horizontal
+        stackView.alignment = .center
+        stackView.spacing = 10
+        cell.contentView.addSubview(stackView)
+        stackView.autoPinEdgesToSuperviewMargins()
+
+        cell.accessibilityIdentifier = accessibilityIdentifier
+
+        return cell
+    }
+
+    // MARK: - Event Handling
+
+    private func leaveViewCheckingForUnsavedChanges() {
+        familyNameTextField.resignFirstResponder()
+        givenNameTextField.resignFirstResponder()
+
+        if !hasUnsavedChanges {
+            // If user made no changes, return to conversation settings view.
+            profileCompleted()
+            return
+        }
+
+        OWSActionSheets.showPendingChangesActionSheet(discardAction: { [weak self] in
+            self?.profileCompleted()
+        })
+    }
+
+    private func updateNavigationItem() {
+        if hasUnsavedChanges {
+            // If we have a unsaved changes, right item should be a "save" button.
+            let saveButton = UIBarButtonItem(barButtonSystemItem: .save,
+                                             target: self,
+                                             action: #selector(updateProfile),
+                                             accessibilityIdentifier: "save_button")
+            navigationItem.rightBarButtonItem = saveButton
+        } else {
+            navigationItem.rightBarButtonItem = nil
+        }
+    }
+
+    @objc
+    func updateProfile() {
+
+        let normalizedGivenName = self.normalizedGivenName
+        let normalizedFamilyName = self.normalizedFamilyName
+        let normalizedProfileBio = self.normalizedProfileBio
+        let normalizedProfileBioEmoji = self.normalizedProfileBioEmoji
+
+        if normalizedGivenName.isEmpty {
+            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_GIVEN_NAME_REQUIRED",
+                                                                      comment: "Error message shown when user tries to update profile without a given name"))
+            return
+        }
+
+        if profileManager.isProfileNameTooLong(normalizedGivenName) {
+            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_GIVEN_NAME_TOO_LONG",
+                                                                      comment: "Error message shown when user tries to update profile with a given name that is too long."))
+            return
+        }
+
+        if profileManager.isProfileNameTooLong(normalizedFamilyName) {
+            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_FAMILY_NAME_TOO_LONG",
+                                                                      comment: "Error message shown when user tries to update profile with a family name that is too long."))
+            return
+        }
+
+        if !self.reachabilityManager.isReachable {
+            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_NO_CONNECTION",
+                                                                      comment: "Error shown when the user tries to update their profile when the app is not connected to the internet."))
+            return
+        }
+
+        // Show an activity indicator to block the UI during the profile upload.
+        let avatarData = self.avatarData
+        ModalActivityIndicatorViewController.present(fromViewController: self,
+                                                     canCancel: false) { modalActivityIndicator in
+            firstly(on: .global()) { () -> Promise<Void> in
+                OWSProfileManager.updateLocalProfilePromise(profileGivenName: normalizedGivenName,
+                                                            profileFamilyName: normalizedFamilyName,
+                                                            profileBio: normalizedProfileBio,
+                                                            profileBioEmoji: normalizedProfileBioEmoji,
+                                                            profileAvatarData: avatarData)
+            }.done { _ in
+                modalActivityIndicator.dismiss { [weak self] in
+                    AssertIsOnMainThread()
+                    self?.profileCompleted()
+                }
+            }.catch { error in
+                owsFailDebug("Error: \(error)")
+                modalActivityIndicator.dismiss { [weak self] in
+                    AssertIsOnMainThread()
+                    self?.profileCompleted()
+                }
+            }
+        }
+    }
+
+    private var normalizedGivenName: String {
+        (givenNameTextField.text ?? "").ows_stripped()
+    }
+
+    private var normalizedFamilyName: String {
+        (familyNameTextField.text ?? "").ows_stripped()
+    }
+
+    private var normalizedProfileBio: String? {
+        profileBio?.ows_stripped()
+    }
+
+    private var normalizedProfileBioEmoji: String? {
+        profileBioEmoji?.ows_stripped()
+    }
+
+    private func profileCompleted() {
+        AssertIsOnMainThread()
+        Logger.verbose("")
+
+        completionHandler(self)
+    }
+
+    // MARK: - Avatar
+
+    private func setAvatarImage(_ avatarImage: UIImage?) {
+        AssertIsOnMainThread()
+
+        var avatarData: Data?
+        if let avatarImage = avatarImage {
+            avatarData = OWSProfileManager.avatarData(forAvatarImage: avatarImage)
+        }
+        hasUnsavedChanges = hasUnsavedChanges || avatarData != self.avatarData
+        self.avatarData = avatarData
+
+        updateAvatarView()
+    }
+
+    private let avatarSize: UInt = 96
+
+    private func updateAvatarView() {
+        if let avatarData = avatarData {
+            avatarView.image = UIImage(data: avatarData)
+        } else {
+            avatarView.image = OWSContactAvatarBuilder(forLocalUserWithDiameter: avatarSize).buildDefaultImage()
+        }
+    }
+
+    private func updateProfileNamePreview() {
+        var components = PersonNameComponents()
+        components.givenName = normalizedGivenName
+        components.familyName = normalizedFamilyName
+
+        let previewText = PersonNameComponentsFormatter.localizedString(from: components,
+                                                                        style: .`default`)
+        if previewText.isEmpty {
+            profileNamePreviewLabel.text = " "
+        } else {
+            profileNamePreviewLabel.text = previewText
+        }
+    }
+
+    private func updateUsername() {
+        if let username = username {
+            usernameLabel.text = CommonFormats.formatUsername(username)
+            usernameLabel.textColor = Theme.primaryTextColor
+        } else {
+            usernameLabel.text = NSLocalizedString("PROFILE_VIEW_CREATE_USERNAME",
+                                                   comment: "A string indicating that the user can create a username on the profile view.")
+            usernameLabel.textColor = Theme.accentBlueColor
+        }
+    }
+
+    private func didTapUsername() {
+        navigationController?.pushViewController(UsernameViewController(), animated: true)
+    }
+
+    private func didTapBio() {
+        let view = ProfileBioViewController(bio: profileBio,
+                                            bioEmoji: profileBioEmoji,
+                                            profileDelegate: self)
+        navigationController?.pushViewController(view, animated: true)
+    }
+
+    private func didTapAvatar() {
+        avatarViewHelper.showChangeAvatarUI()
+    }
+
+    @objc
+    private func didTapInfo() {
+        let vc = SFSafariViewController(url: URL(string: "https://support.signal.org/hc/articles/360007459591")!)
+        present(vc, animated: true, completion: nil)
+    }
+}
+
+// MARK: -
+
+extension ProfileSettingsViewController: AvatarViewHelperDelegate {
+
+    public func avatarActionSheetTitle() -> String? {
+        NSLocalizedString("PROFILE_VIEW_AVATAR_ACTIONSHEET_TITLE", comment: "Action Sheet title prompting the user for a profile avatar")
+    }
+
+    public func avatarDidChange(_ image: UIImage) {
+        AssertIsOnMainThread()
+
+        setAvatarImage(image.resizedImage(toFillPixelSize: .square(CGFloat(kOWSProfileManager_MaxAvatarDiameter))))
+    }
+
+    public func fromViewController() -> UIViewController {
+        self
+    }
+
+    public func hasClearAvatarAction() -> Bool {
+        avatarData != nil
+    }
+
+    public func clearAvatar() {
+        setAvatarImage(nil)
+    }
+
+    public func clearAvatarActionLabel() -> String {
+        return NSLocalizedString("PROFILE_VIEW_CLEAR_AVATAR", comment: "Label for action that clear's the user's profile avatar")
+    }
+}
+
+// MARK: -
+
+extension ProfileSettingsViewController: UITextFieldDelegate {
+
+    private var firstTextField: UITextField {
+        NSLocale.current.isCJKV ? familyNameTextField : givenNameTextField
+    }
+
+    private var secondTextField: UITextField {
+        NSLocale.current.isCJKV ? givenNameTextField : familyNameTextField
+    }
+
+    public func textField(_ textField: UITextField,
+                          shouldChangeCharactersIn range: NSRange,
+                          replacementString string: String) -> Bool {
+        TextFieldHelper.textField(
+            textField,
+            shouldChangeCharactersInRange: range,
+            replacementString: string.withoutBidiControlCharacters,
+            maxByteCount: OWSUserProfile.maxNameLengthBytes
+        )
+    }
+
+    public func textFieldShouldReturn(_ textField: UITextField) -> Bool {
+        if textField == firstTextField {
+            secondTextField.becomeFirstResponder()
+        } else {
+            textField.resignFirstResponder()
+        }
+        return false
+    }
+
+    @objc
+    func textFieldDidChange(_ textField: UITextField) {
+        hasUnsavedChanges = true
+
+        updateProfileNamePreview()
+
+        // TODO: Update length warning.
+    }
+}
+
+// MARK: -
+
+extension ProfileSettingsViewController: OWSNavigationView {
+
+    @available(iOS 13, *)
+    override public var isModalInPresentation: Bool {
+        get { hasUnsavedChanges }
+        set { /* noop superclass requirement */ }
+    }
+
+    public func shouldCancelNavigationBack() -> Bool {
+        let result = hasUnsavedChanges
+        if result {
+            leaveViewCheckingForUnsavedChanges()
+        }
+        return result
+    }
+}
+
+// MARK: -
+
+extension ProfileSettingsViewController: ProfileBioViewControllerDelegate {
+
+    public func profileBioViewDidComplete(bio: String?,
+                                          bioEmoji: String?) {
+        profileBio = bio
+        profileBioEmoji = bioEmoji
+        hasUnsavedChanges = true
+        updateTableContents()
+    }
+}
diff --git a/Signal/src/ViewControllers/ProfileViewController.swift b/Signal/src/ViewControllers/ProfileViewController.swift
deleted file mode 100644
index d55c04eba99..00000000000
--- a/Signal/src/ViewControllers/ProfileViewController.swift
+++ /dev/null
@@ -1,712 +0,0 @@
-//
-//  Copyright (c) 2021 Open Whisper Systems. All rights reserved.
-//
-
-import Foundation
-import SafariServices
-import PromiseKit
-
-@objc
-public enum ProfileViewMode: UInt {
-    case appSettings
-    case registration
-
-    fileprivate var isFullScreenStyle: Bool {
-        switch self {
-        case .appSettings:
-            return false
-        case .registration:
-            return true
-        }
-    }
-
-    fileprivate var hasBio: Bool {
-        switch self {
-        case .appSettings:
-            return true
-        case .registration:
-            return false
-        }
-    }
-}
-
-// MARK: -
-
-@objc
-public class ProfileViewController: OWSTableViewController {
-    static private let standardMargin: CGFloat = UIDevice.current.isIPhone5OrShorter ? 16 : 32
-
-    private let avatarViewHelper = AvatarViewHelper()
-
-    private lazy var givenNameTextField = OWSTextField()
-    private lazy var familyNameTextField = OWSTextField()
-    private lazy var nameFieldStrokes: [UIView] = [givenNameTextField, familyNameTextField].map {
-        $0.addBottomStroke(color: Theme.cellSeparatorColor, strokeWidth: CGHairlineWidth())
-    }
-
-    private let usernameLabel = UILabel()
-
-    private let avatarView = AvatarImageView()
-
-    private let cameraImageView: UIImageView = {
-        let viewSize = CGSize(square: 32)
-
-        let cameraImageView = UIImageView.withTemplateImageName("camera-outline-24", tintColor: Theme.secondaryTextAndIconColor)
-        cameraImageView.autoSetDimensions(to: viewSize)
-        cameraImageView.contentMode = .center
-        cameraImageView.backgroundColor = Theme.backgroundColor
-        cameraImageView.layer.cornerRadius = viewSize.largerAxis / 2
-
-        // Setup shadows
-        let finerShadowLayer = cameraImageView.layer
-        let broaderShadowLayer = CALayer()
-        finerShadowLayer.addSublayer(broaderShadowLayer)
-
-        let shadowColor = (Theme.isDarkThemeEnabled ? Theme.darkThemeWashColor : UIColor.ows_black).cgColor
-        let shadowPath = UIBezierPath(ovalIn: CGRect(origin: .zero, size: viewSize)).cgPath
-        [finerShadowLayer, broaderShadowLayer].forEach {
-            $0.shadowColor = shadowColor
-            $0.shadowPath = shadowPath
-        }
-        finerShadowLayer.shadowRadius = 4
-        finerShadowLayer.shadowOffset = CGSize(width: 0, height: 2)
-        finerShadowLayer.shadowOpacity = 0.2
-        broaderShadowLayer.shadowRadius = 16
-        broaderShadowLayer.shadowOffset = CGSize(width: 0, height: 4)
-        broaderShadowLayer.shadowOpacity = 0.12
-        return cameraImageView
-    }()
-
-    private let saveButtonBackdrop = UIView()
-    private let saveButtonGradient = GradientView(colors: [])
-    private var saveButton: OWSFlatButton = {
-        let button = OWSFlatButton.button(
-            title: NSLocalizedString(
-                "PROFILE_VIEW_SAVE_BUTTON",
-                comment: "Button to save the profile view in the profile view."),
-            font: UIFont.ows_dynamicTypeBody.ows_semibold,
-            titleColor: .ows_white,
-            backgroundColor: .ows_accentBlue,
-            target: self,
-            selector: #selector(updateProfile))
-
-        button.accessibilityIdentifier = "save_button"
-        button.enableMultilineLabel()
-        button.button.layer.cornerRadius = 14
-        button.contentEdgeInsets = UIEdgeInsets(hMargin: 4, vMargin: 14)
-        return button
-    }()
-
-    private var username: String?
-    private var profileBio: String?
-    private var profileBioEmoji: String?
-    private var avatarData: Data?
-
-    private var hasUnsavedChanges = false {
-        didSet {
-            updateNavigationItem()
-            saveButton.setEnabled(hasUnsavedChanges)
-        }
-    }
-
-    private let mode: ProfileViewMode
-
-    private let completionHandler: (ProfileViewController) -> Void
-
-    @objc
-    public required init(mode: ProfileViewMode,
-                         completionHandler: @escaping (ProfileViewController) -> Void) {
-
-        self.mode = mode
-        self.completionHandler = completionHandler
-
-        super.init()
-
-        self.shouldAvoidKeyboard = true
-        self.layoutMarginsRelativeTableContent = true
-    }
-
-    // MARK: - Orientation
-
-    public override var supportedInterfaceOrientations: UIInterfaceOrientationMask {
-        if UIDevice.current.isIPad {
-            return .all
-        }
-        return (mode == .registration ? .portrait : .allButUpsideDown)
-    }
-
-    // MARK: -
-
-    public override func loadView() {
-        super.loadView()
-        view.layoutMargins = UIEdgeInsets(hMargin: Self.standardMargin, vMargin: 0)
-        view.insetsLayoutMarginsFromSafeArea = false
-
-        self.title = NSLocalizedString("PROFILE_VIEW_TITLE", comment: "Title for the profile view.")
-
-        avatarViewHelper.delegate = self
-
-        let profileSnapshot = profileManager.localProfileSnapshot(shouldIncludeAvatar: true)
-        givenNameTextField.text = profileSnapshot.givenName
-        familyNameTextField.text = profileSnapshot.familyName
-        self.profileBio = profileSnapshot.bio
-        self.profileBioEmoji = profileSnapshot.bioEmoji
-        self.username = profileSnapshot.username
-        self.avatarData = profileSnapshot.avatarData
-
-        configureViews()
-        updateNavigationItem()
-
-        if mode == .registration {
-            // mark as dirty if re-registration has content
-            if let familyName = familyNameTextField.text,
-               !familyName.isEmpty {
-                hasUnsavedChanges = true
-            } else if let givenName = givenNameTextField.text,
-                      !givenName.isEmpty {
-                hasUnsavedChanges = true
-            } else if avatarData != nil {
-                hasUnsavedChanges = true
-            }
-        }
-        updateTableContents()
-        tableView.alwaysBounceVertical = false
-
-        if mode.isFullScreenStyle {
-            saveButton.setEnabled(hasUnsavedChanges)
-            view.addSubview(saveButtonGradient)
-            view.addSubview(saveButtonBackdrop)
-            saveButtonGradient.isUserInteractionEnabled = false
-
-            saveButtonBackdrop.addSubview(saveButton)
-            saveButtonBackdrop.preservesSuperviewLayoutMargins = true
-            saveButtonBackdrop.layoutMargins = UIEdgeInsets(top: 8, leading: 0, bottom: Self.standardMargin, trailing: 0)
-            saveButton.autoPinEdgesToSuperviewMargins()
-
-            saveButtonGradient.autoPinWidthToSuperview()
-            saveButtonBackdrop.autoPinWidthToSuperview()
-
-            saveButtonGradient.autoSetDimension(.height, toSize: 30)
-            saveButtonGradient.autoPinEdge(.bottom, to: .top, of: saveButtonBackdrop)
-
-            // tableView will automatically avoid the keyboard
-            saveButtonBackdrop.autoPinEdge(.bottom, to: .bottom, of: tableView)
-        }
-    }
-
-    public override func viewWillAppear(_ animated: Bool) {
-        super.viewWillAppear(animated)
-
-        updateNavigationItem()
-
-        switch mode {
-        case .appSettings:
-            break
-        case .registration:
-            givenNameTextField.becomeFirstResponder()
-        }
-    }
-
-    public override func viewDidAppear(_ animated: Bool) {
-        super.viewDidAppear(animated)
-
-        updateNavigationItem()
-    }
-
-    public override func viewDidLayoutSubviews() {
-        super.viewDidLayoutSubviews()
-
-        let bottomInsetHeight = saveButtonBackdrop.height + (saveButtonGradient.height / 4)
-        if tableView.contentInset.bottom < bottomInsetHeight {
-            tableView.contentInset.bottom = bottomInsetHeight
-        }
-    }
-
-    public override func applyTheme() {
-        super.applyTheme()
-
-        [givenNameTextField, familyNameTextField].forEach { $0.textColor = Theme.primaryTextColor }
-
-        cameraImageView.tintColor = Theme.secondaryTextAndIconColor
-        cameraImageView.backgroundColor = Theme.backgroundColor
-
-        nameFieldStrokes.forEach { $0.backgroundColor = Theme.cellSeparatorColor }
-
-        let backgroundColor = view.backgroundColor ?? Theme.backgroundColor
-        saveButtonBackdrop.backgroundColor = backgroundColor
-        saveButtonGradient.colors = [(backgroundColor.withAlphaComponent(0), 0.0), (backgroundColor, 1.0)]
-
-        updateTableContents()
-    }
-
-    private func configureViews() {
-        avatarView.autoSetDimensions(to: CGSize.square(avatarSize))
-        avatarView.accessibilityIdentifier = "avatar_view"
-        let avatarTapGesture = UITapGestureRecognizer(target: self, action: #selector(didTapAvatar))
-        avatarView.addGestureRecognizer(avatarTapGesture)
-        avatarView.isUserInteractionEnabled = true
-
-        [givenNameTextField, familyNameTextField].forEach {
-            $0.font = .ows_dynamicTypeBodyClamped
-            $0.delegate = self
-            $0.textAlignment = .natural
-            $0.autocorrectionType = .no
-            $0.spellCheckingType = .no
-            $0.addTarget(self, action: #selector(textFieldDidChange), for: .editingChanged)
-
-            $0.autoSetDimension(.height, toSize: 50, relation: .greaterThanOrEqual)
-        }
-        firstTextField.returnKeyType = .next
-        secondTextField.returnKeyType = .done
-
-        givenNameTextField.accessibilityIdentifier = "given_name_textfield"
-        givenNameTextField.placeholder = NSLocalizedString(
-            "PROFILE_VIEW_GIVEN_NAME_DEFAULT_TEXT",
-            comment: "Default text for the given name field of the profile view.")
-        familyNameTextField.accessibilityIdentifier = "family_name_textfield"
-        familyNameTextField.placeholder = NSLocalizedString(
-            "PROFILE_VIEW_FAMILY_NAME_DEFAULT_TEXT",
-            comment: "Default text for the family name field of the profile view.")
-
-        usernameLabel.numberOfLines = 0
-        usernameLabel.font = .ows_dynamicTypeBody
-        usernameLabel.textAlignment = .natural
-    }
-
-    func updateTableContents() {
-        let contents = OWSTableContents()
-
-        let mode = self.mode
-        let firstTextField = self.firstTextField
-        let secondTextField = self.secondTextField
-        let avatarView = self.avatarView
-        let cameraImageView = self.cameraImageView
-
-        updateAvatarView()
-
-        if mode.isFullScreenStyle {
-            contents.addSection(OWSTableSection(header: { () -> UIView? in
-                let label = UILabel()
-                label.font = UIFont.ows_dynamicTypeTitle1.ows_semibold
-                label.textAlignment = .center
-                label.text = "Your Profile"
-                label.numberOfLines = 0
-
-                let view = UIView()
-                view.layoutMargins = UIEdgeInsets(hMargin: 0, vMargin: Self.standardMargin)
-                view.preservesSuperviewLayoutMargins = true
-                view.addSubview(label)
-                label.autoPinEdgesToSuperviewMargins()
-                return view
-            }, items: []))
-        }
-
-        contents.addSection(OWSTableSection(header: { () -> UIView? in
-            let view = UIView()
-            view.preservesSuperviewLayoutMargins = true
-            // Setup stack views. For CJKV locales, display family name field first.
-            let vStack = UIStackView(arrangedSubviews: [firstTextField, secondTextField])
-            let hStack = UIStackView(arrangedSubviews: [avatarView, vStack])
-            vStack.axis = .vertical
-            vStack.spacing = 0
-            vStack.alignment = .fill
-            vStack.distribution = .equalSpacing
-            hStack.axis = .horizontal
-            hStack.spacing = 24
-            hStack.alignment = .center
-            vStack.distribution = .fill
-
-            view.addSubview(hStack)
-            view.addSubview(cameraImageView)
-            cameraImageView.autoPinEdge(.bottom, to: .bottom, of: avatarView)
-            cameraImageView.autoPinEdge(.trailing, to: .trailing, of: avatarView)
-            hStack.autoPinEdgesToSuperviewMargins()
-            return view
-        }))
-
-        if mode.hasBio {
-            let profileBio = self.normalizedProfileBio
-            let profileBioEmoji = self.normalizedProfileBioEmoji
-
-            contents.addSection(
-                OWSTableSection(
-                    title: NSLocalizedString(
-                        "PROFILE_VIEW_BIO_SECTION_HEADER",
-                        comment: "Header for the 'bio' section of the profile view."),
-
-                    items: [OWSTableItem(customCellBlock: { () -> UITableViewCell in
-                        let cell = OWSTableItem.newCell()
-                        cell.preservesSuperviewLayoutMargins = true
-                        cell.contentView.preservesSuperviewLayoutMargins = true
-
-                        let label = UILabel()
-
-                        if let bioForDisplay = OWSUserProfile.bioForDisplay(bio: profileBio, bioEmoji: profileBioEmoji) {
-                            label.textColor = Theme.primaryTextColor
-                            label.text = bioForDisplay
-                        } else {
-                            label.textColor = Theme.accentBlueColor
-                            label.text = NSLocalizedString(
-                                "PROFILE_VIEW_ADD_BIO_TO_PROFILE",
-                                comment: "Button to add a 'bio' to the user's profile in the profile view.")
-                        }
-
-                        label.font = UIFont.ows_dynamicTypeBody
-                        label.numberOfLines = 0
-                        label.lineBreakMode = .byWordWrapping
-                        cell.contentView.addSubview(label)
-                        label.autoPinEdgesToSuperviewMargins()
-
-                        cell.accessoryType = .disclosureIndicator
-                        cell.accessibilityIdentifier = "profile_bio"
-                        return cell
-                    }, actionBlock: { [weak self] in
-                        self?.didTapBio()
-                    })
-                ])
-            )
-        }
-
-        if shouldShowUsernameRow {
-            let username = self.username
-            let usernameLabel = self.usernameLabel
-
-            contents.addSection(OWSTableSection(
-                title: "Username",
-                items: [OWSTableItem(customCellBlock: { () -> UITableViewCell in
-                    let cell = OWSTableItem.newCell()
-                    cell.preservesSuperviewLayoutMargins = true
-                    cell.contentView.preservesSuperviewLayoutMargins = true
-
-                    if let username = username {
-                        usernameLabel.textColor = Theme.primaryTextColor
-                        usernameLabel.text = CommonFormats.formatUsername(username)
-                    } else {
-                        usernameLabel.textColor = Theme.accentBlueColor
-                        usernameLabel.text = NSLocalizedString(
-                            "PROFILE_VIEW_CREATE_USERNAME",
-                            comment: "A string indicating that the user can create a username on the profile view.")
-                    }
-
-                    cell.contentView.addSubview(usernameLabel)
-                    usernameLabel.autoPinEdgesToSuperviewMargins()
-                    cell.accessoryType = .disclosureIndicator
-                    cell.accessibilityIdentifier = "username"
-                    return cell
-
-                }, actionBlock: { [weak self] in
-                    self?.didTapUsername()
-                })]
-            ))
-        }
-
-        // Information Footer
-        let infoGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(didTapInfo))
-        contents.sections.last?.customFooterView = { () -> UIView in
-            let label = UILabel()
-            label.textColor = Theme.secondaryTextAndIconColor
-            label.font = .ows_dynamicTypeCaption1
-            let attributedText = NSMutableAttributedString()
-            attributedText.append(NSLocalizedString("PROFILE_VIEW_PROFILE_DESCRIPTION",
-                                                    comment: "Description of the user profile."))
-            attributedText.append(" ")
-            attributedText.append(NSAttributedString(string: CommonStrings.learnMore,
-                                                     attributes: [
-                                                        NSAttributedString.Key.foregroundColor: Theme.accentBlueColor,
-                                                        NSAttributedString.Key.underlineStyle: 0
-                                                     ]))
-            label.attributedText = attributedText
-            label.numberOfLines = 0
-            label.lineBreakMode = .byWordWrapping
-            label.backgroundColor = tableView.backgroundColor
-
-            label.isUserInteractionEnabled = true
-            label.addGestureRecognizer(infoGestureRecognizer)
-
-            let footer = UIView()
-            footer.preservesSuperviewLayoutMargins = true
-            footer.layoutMargins = UIEdgeInsets(hMargin: 0, vMargin: 12)
-            footer.addSubview(label)
-            label.autoPinEdgesToSuperviewMargins()
-
-            return footer
-        }()
-
-        self.contents = contents
-    }
-
-    // MARK: - Event Handling
-
-    private func leaveViewCheckingForUnsavedChanges() {
-        familyNameTextField.resignFirstResponder()
-        givenNameTextField.resignFirstResponder()
-
-        if !hasUnsavedChanges {
-            // If user made no changes, return to conversation settings view.
-            profileCompleted()
-            return
-        }
-
-        OWSActionSheets.showPendingChangesActionSheet(discardAction: { [weak self] in
-            self?.profileCompleted()
-        })
-    }
-
-    private func updateNavigationItem() {
-        if mode.isFullScreenStyle {
-            navigationController?.isNavigationBarHidden = true
-            navigationItem.hidesBackButton = true
-            navigationItem.rightBarButtonItem = nil
-
-        } else if hasUnsavedChanges {
-            navigationItem.rightBarButtonItem = UIBarButtonItem(
-                barButtonSystemItem: .save,
-                target: self,
-                action: #selector(updateProfile),
-                accessibilityIdentifier: "save_button")
-
-        } else {
-            navigationItem.rightBarButtonItem = nil
-        }
-    }
-
-    @objc
-    func updateProfile() {
-
-        let normalizedGivenName = self.normalizedGivenName
-        let normalizedFamilyName = self.normalizedFamilyName
-        let normalizedProfileBio = self.normalizedProfileBio
-        let normalizedProfileBioEmoji = self.normalizedProfileBioEmoji
-
-        if normalizedGivenName.isEmpty {
-            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_GIVEN_NAME_REQUIRED",
-                                                                      comment: "Error message shown when user tries to update profile without a given name"))
-            return
-        }
-
-        if profileManager.isProfileNameTooLong(normalizedGivenName) {
-            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_GIVEN_NAME_TOO_LONG",
-                                                                      comment: "Error message shown when user tries to update profile with a given name that is too long."))
-            return
-        }
-
-        if profileManager.isProfileNameTooLong(normalizedFamilyName) {
-            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_FAMILY_NAME_TOO_LONG",
-                                                                      comment: "Error message shown when user tries to update profile with a family name that is too long."))
-            return
-        }
-
-        if !self.reachabilityManager.isReachable {
-            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_NO_CONNECTION",
-                                                                      comment: "Error shown when the user tries to update their profile when the app is not connected to the internet."))
-            return
-        }
-
-        // Show an activity indicator to block the UI during the profile upload.
-        let avatarData = self.avatarData
-        ModalActivityIndicatorViewController.present(fromViewController: self,
-                                                     canCancel: false) { modalActivityIndicator in
-            firstly(on: .global()) { () -> Promise<Void> in
-                OWSProfileManager.updateLocalProfilePromise(profileGivenName: normalizedGivenName,
-                                                            profileFamilyName: normalizedFamilyName,
-                                                            profileBio: normalizedProfileBio,
-                                                            profileBioEmoji: normalizedProfileBioEmoji,
-                                                            profileAvatarData: avatarData)
-            }.done { _ in
-                modalActivityIndicator.dismiss { [weak self] in
-                    AssertIsOnMainThread()
-                    self?.profileCompleted()
-                }
-            }.catch { error in
-                owsFailDebug("Error: \(error)")
-                modalActivityIndicator.dismiss { [weak self] in
-                    AssertIsOnMainThread()
-                    self?.profileCompleted()
-                }
-            }
-        }
-    }
-
-    private var normalizedGivenName: String {
-        (givenNameTextField.text ?? "").ows_stripped()
-    }
-
-    private var normalizedFamilyName: String {
-        (familyNameTextField.text ?? "").ows_stripped()
-    }
-
-    private var normalizedProfileBio: String? {
-        profileBio?.ows_stripped()
-    }
-
-    private var normalizedProfileBioEmoji: String? {
-        profileBioEmoji?.ows_stripped()
-    }
-
-    private func profileCompleted() {
-        AssertIsOnMainThread()
-        Logger.verbose("")
-
-        completionHandler(self)
-    }
-
-    // MARK: - Avatar
-
-    private func setAvatarImage(_ avatarImage: UIImage?) {
-        AssertIsOnMainThread()
-
-        var avatarData: Data?
-        if let avatarImage = avatarImage {
-            avatarData = OWSProfileManager.avatarData(forAvatarImage: avatarImage)
-        }
-        hasUnsavedChanges = hasUnsavedChanges || avatarData != self.avatarData
-        self.avatarData = avatarData
-
-        updateAvatarView()
-    }
-
-    private let avatarSize: CGFloat = 80.0
-
-    private func updateAvatarView() {
-        if let avatarData = avatarData {
-            avatarView.image = UIImage(data: avatarData)
-        } else {
-            avatarView.image = OWSContactAvatarBuilder(forLocalUserWithDiameter: UInt(avatarSize)).buildDefaultImage()
-        }
-    }
-
-    private func didTapUsername() {
-        let usernameVC = UsernameViewController()
-        if mode == .registration {
-            usernameVC.modalPresentation = true
-            presentFormSheet(OWSNavigationController(rootViewController: usernameVC), animated: true)
-        } else {
-            navigationController?.pushViewController(usernameVC, animated: true)
-        }
-    }
-
-    private func didTapBio() {
-        let view = ProfileBioViewController(bio: profileBio, bioEmoji:
-                                                profileBioEmoji,
-                                            mode: mode,
-                                            profileDelegate: self)
-        navigationController?.pushViewController(view, animated: true)
-    }
-
-    private var shouldShowUsernameRow: Bool {
-        switch mode {
-        case .registration:
-            return false
-        case .appSettings:
-            return RemoteConfig.usernames
-        }
-    }
-
-    @objc
-    private func didTapAvatar() {
-        avatarViewHelper.showChangeAvatarUI()
-    }
-
-    @objc
-    private func didTapInfo() {
-        let vc = SFSafariViewController(url: URL(string: "https://support.signal.org/hc/articles/360007459591")!)
-        present(vc, animated: true, completion: nil)
-    }
-}
-
-// MARK: -
-
-extension ProfileViewController: AvatarViewHelperDelegate {
-
-    public func avatarActionSheetTitle() -> String? {
-        NSLocalizedString("PROFILE_VIEW_AVATAR_ACTIONSHEET_TITLE", comment: "Action Sheet title prompting the user for a profile avatar")
-    }
-
-    public func avatarDidChange(_ image: UIImage) {
-        AssertIsOnMainThread()
-
-        setAvatarImage(image.resizedImage(toFillPixelSize: .square(CGFloat(kOWSProfileManager_MaxAvatarDiameter))))
-    }
-
-    public func fromViewController() -> UIViewController {
-        self
-    }
-
-    public func hasClearAvatarAction() -> Bool {
-        avatarData != nil
-    }
-
-    public func clearAvatar() {
-        setAvatarImage(nil)
-    }
-
-    public func clearAvatarActionLabel() -> String {
-        return NSLocalizedString("PROFILE_VIEW_CLEAR_AVATAR", comment: "Label for action that clear's the user's profile avatar")
-    }
-}
-
-// MARK: -
-
-extension ProfileViewController: UITextFieldDelegate {
-
-    private var firstTextField: UITextField {
-        NSLocale.current.isCJKV ? familyNameTextField : givenNameTextField
-    }
-
-    private var secondTextField: UITextField {
-        NSLocale.current.isCJKV ? givenNameTextField : familyNameTextField
-    }
-
-    public func textField(_ textField: UITextField,
-                          shouldChangeCharactersIn range: NSRange,
-                          replacementString string: String) -> Bool {
-        TextFieldHelper.textField(
-            textField,
-            shouldChangeCharactersInRange: range,
-            replacementString: string.withoutBidiControlCharacters,
-            maxByteCount: OWSUserProfile.maxNameLengthBytes,
-            maxGlyphCount: OWSUserProfile.maxNameLengthGlyphs
-        )
-    }
-
-    public func textFieldShouldReturn(_ textField: UITextField) -> Bool {
-        if textField == firstTextField {
-            secondTextField.becomeFirstResponder()
-        } else {
-            textField.resignFirstResponder()
-        }
-        return false
-    }
-
-    @objc
-    func textFieldDidChange(_ textField: UITextField) {
-        hasUnsavedChanges = true
-        // TODO: Update length warning.
-    }
-}
-
-// MARK: -
-
-extension ProfileViewController: OWSNavigationView {
-
-    public func shouldCancelNavigationBack() -> Bool {
-        let result = hasUnsavedChanges
-        if result {
-            leaveViewCheckingForUnsavedChanges()
-        }
-        return result
-    }
-}
-
-// MARK: -
-
-extension ProfileViewController: ProfileBioViewControllerDelegate {
-
-    public func profileBioViewDidComplete(bio: String?,
-                                          bioEmoji: String?) {
-        profileBio = bio
-        profileBioEmoji = bioEmoji
-        hasUnsavedChanges = true
-        updateTableContents()
-    }
-}
diff --git a/Signal/src/ViewControllers/Registration/OnboardingController.swift b/Signal/src/ViewControllers/Registration/OnboardingController.swift
index abd2b31d47d..6c4d081f902 100644
--- a/Signal/src/ViewControllers/Registration/OnboardingController.swift
+++ b/Signal/src/ViewControllers/Registration/OnboardingController.swift
@@ -266,7 +266,7 @@ public class OnboardingController: NSObject {
         case .verifiedPhoneNumber, .verifiedLinkedDevice:
             return OnboardingSplashViewController(onboardingController: self)
         case .setupProfile:
-            return buildProfileViewController()
+            return OnboardingProfileCreationViewController(onboardingController: self)
         case .restorePin:
             return Onboarding2FAViewController(onboardingController: self, isUsingKBS: true)
         case .setupPin:
@@ -422,19 +422,6 @@ public class OnboardingController: NSObject {
         showNextMilestone(navigationController: navigationController)
     }
 
-    func buildProfileViewController() -> ProfileViewController {
-        return ProfileViewController(mode: .registration) { [weak self] profileVC in
-            guard let self = self else { return }
-
-            guard let navigationController = profileVC.navigationController else {
-                owsFailDebug("navigationController was unexpectedly nil")
-                return
-            }
-
-            self.showNextMilestone(navigationController: navigationController)
-        }
-    }
-
     func buildPinSetupViewController() -> PinSetupViewController {
         return PinSetupViewController.creating { [weak self] pinSetupVC, _ in
             guard let self = self else { return }
diff --git a/Signal/src/ViewControllers/Registration/OnboardingProfileCreationViewController.swift b/Signal/src/ViewControllers/Registration/OnboardingProfileCreationViewController.swift
new file mode 100644
index 00000000000..b581f8ceb81
--- /dev/null
+++ b/Signal/src/ViewControllers/Registration/OnboardingProfileCreationViewController.swift
@@ -0,0 +1,458 @@
+//
+//  Copyright (c) 2021 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+import PromiseKit
+
+@objc
+public class OnboardingProfileCreationViewController: OnboardingBaseViewController {
+
+    // MARK: - Properties
+
+    private let avatarViewHelper = AvatarViewHelper()
+    private var avatarData: Data?
+
+    private var isValidProfile: Bool {
+        !normalizedGivenName.isEmpty
+    }
+
+    private var normalizedGivenName: String {
+        (givenNameTextField.text ?? "").ows_stripped()
+    }
+
+    private var normalizedFamilyName: String {
+        (familyNameTextField.text ?? "").ows_stripped()
+    }
+
+    // MARK: - Views
+
+    private let contentScrollView = UIScrollView()
+
+    private lazy var titleLabel: UILabel = {
+        let label = UILabel()
+        label.font = UIFont.ows_dynamicTypeTitle1.ows_semibold
+        label.adjustsFontForContentSizeCategory = true
+        label.textAlignment = .center
+        label.text = NSLocalizedString(
+            "ONBOARDING_PROFILE_CREATION_TITLE",
+            comment: "Title label for profile creation step of onboarding")
+        label.numberOfLines = 0
+        return label
+    }()
+
+    private let avatarSize: CGFloat = 64.0
+    private lazy var avatarView: AvatarImageView = {
+        let view = AvatarImageView()
+        view.autoSetDimensions(to: CGSize.square(avatarSize))
+        view.accessibilityIdentifier = "avatar_view"
+
+        let avatarTapGesture = UITapGestureRecognizer(target: self, action: #selector(didTapAvatar))
+        view.addGestureRecognizer(avatarTapGesture)
+        view.isUserInteractionEnabled = true
+        return view
+    }()
+
+    let cameraImageViewSize = CGSize(square: 32)
+    private lazy var cameraImageView: UIImageView = {
+        let cameraImageView = UIImageView.withTemplateImageName("camera-outline-24", tintColor: Theme.secondaryTextAndIconColor)
+        cameraImageView.autoSetDimensions(to: cameraImageViewSize)
+        cameraImageView.contentMode = .center
+        cameraImageView.layer.cornerRadius = cameraImageViewSize.largerAxis / 2
+        return cameraImageView
+    }()
+
+    private lazy var cameraImageShadowLayers: [CALayer] = {
+        let finerShadowLayer = cameraImageView.layer
+        let broaderShadowLayer = CALayer()
+        finerShadowLayer.addSublayer(broaderShadowLayer)
+        let shadowLayers = [finerShadowLayer, broaderShadowLayer]
+
+        shadowLayers.forEach {
+            $0.shadowPath = UIBezierPath(ovalIn: CGRect(origin: .zero, size: cameraImageViewSize)).cgPath
+        }
+
+        finerShadowLayer.shadowRadius = 4
+        finerShadowLayer.shadowOffset = CGSize(width: 0, height: 2)
+        finerShadowLayer.shadowOpacity = 0.2
+        broaderShadowLayer.shadowRadius = 16
+        broaderShadowLayer.shadowOffset = CGSize(width: 0, height: 4)
+        broaderShadowLayer.shadowOpacity = 0.12
+        return shadowLayers
+    }()
+
+    private lazy var givenNameTextField: OWSTextField = {
+        let label = OWSTextField()
+        label.font = .ows_dynamicTypeSubheadlineClamped
+        label.adjustsFontForContentSizeCategory = true
+        label.textAlignment = .natural
+        label.autocorrectionType = .no
+        label.spellCheckingType = .no
+        label.textContentType = .givenName
+
+        label.accessibilityIdentifier = "given_name_textfield"
+        label.placeholder = NSLocalizedString(
+            "ONBOARDING_PROFILE_GIVEN_NAME_FIELD",
+            comment: "Placeholder text for the given name field of the profile creation view.")
+
+        label.delegate = self
+        label.addTarget(self, action: #selector(textFieldDidChange), for: .editingChanged)
+        label.autoSetDimension(.height, toSize: 50, relation: .greaterThanOrEqual)
+        return label
+    }()
+
+    private lazy var familyNameTextField: OWSTextField = {
+        let label = OWSTextField()
+        label.font = .ows_dynamicTypeSubheadlineClamped
+        label.adjustsFontForContentSizeCategory = true
+        label.textAlignment = .natural
+        label.autocorrectionType = .no
+        label.spellCheckingType = .no
+        label.textContentType = .familyName
+
+        label.accessibilityIdentifier = "family_name_textfield"
+        label.placeholder = NSLocalizedString(
+            "ONBOARDING_PROFILE_FAMILY_NAME_FIELD",
+            comment: "Placeholder text for the family name field of the profile creation view.")
+
+        label.delegate = self
+        label.addTarget(self, action: #selector(textFieldDidChange), for: .editingChanged)
+        label.autoSetDimension(.height, toSize: 50, relation: .greaterThanOrEqual)
+        return label
+    }()
+
+    private lazy var nameFieldStrokes: [UIView] = [givenNameTextField, familyNameTextField].map {
+        $0.addBottomStroke(color: Theme.cellSeparatorColor, strokeWidth: CGHairlineWidth())
+    }
+
+    // For CJKV locales, display family name field first
+    private var firstTextField: UITextField { NSLocale.current.isCJKV ? familyNameTextField : givenNameTextField }
+    private var secondTextField: UITextField { NSLocale.current.isCJKV ? givenNameTextField : familyNameTextField }
+
+    private var footerText: NSAttributedString {
+        let descriptionString = NSLocalizedString("PROFILE_VIEW_PROFILE_DESCRIPTION", comment: "Description of the user profile.")
+        let spacerString = "  "
+        let learnMoreString = CommonStrings.learnMore
+
+        return [
+            NSMutableAttributedString(string: descriptionString, attributes: [
+                .font: UIFont.ows_dynamicTypeCaption1,
+                .foregroundColor: Theme.secondaryTextAndIconColor,
+            ]),
+            NSMutableAttributedString(string: spacerString, attributes: [
+                .font: UIFont.ows_dynamicTypeCaption1,
+                .foregroundColor: Theme.secondaryTextAndIconColor,
+            ]),
+            NSMutableAttributedString(string: learnMoreString, attributes: [
+                .link: URL(string: "https://support.signal.org/hc/articles/360007459591")!,
+                .font: UIFont.ows_dynamicTypeCaption1,
+                .foregroundColor: Theme.accentBlueColor,
+                .underlineStyle: 0
+            ]),
+        ].reduce(into: NSMutableAttributedString()) { $0.append($1) }
+    }
+
+    private lazy var footerTextView: LinkingTextView = {
+        let footerTextView = LinkingTextView()
+        footerTextView.font = .ows_dynamicTypeCaption1
+        footerTextView.adjustsFontForContentSizeCategory = true
+        footerTextView.attributedText = footerText
+        footerTextView.isUserInteractionEnabled = true
+        return footerTextView
+    }()
+
+    private lazy var saveButtonBackdrop = UIView()
+    private lazy var saveButtonGradient = GradientView(colors: [])
+
+    private lazy var saveButton = self.primaryButton(
+        title: NSLocalizedString("PROFILE_VIEW_SAVE_BUTTON",
+                                 comment: "Button to save the profile view in the profile view."),
+        selector: #selector(saveProfile)
+    )
+
+    static private let standardMargin: CGFloat = UIDevice.current.isIPhone5OrShorter ? 16 : 32
+
+    // MARK: - Lifecycle
+
+    public override func loadView() {
+        // Build chrome
+        view = UIView()
+        view.addSubview(primaryView)
+        primaryView.autoPinEdgesToSuperviewEdges()
+        primaryView.insetsLayoutMarginsFromSafeArea = false
+
+        primaryView.addSubview(contentScrollView)
+        contentScrollView.autoPinEdgesToSuperviewEdges()
+        contentScrollView.preservesSuperviewLayoutMargins = true
+
+        // Build stacks
+        firstTextField.returnKeyType = .next
+        secondTextField.returnKeyType = .done
+        let nameStack = UIStackView(arrangedSubviews: [firstTextField, secondTextField])
+        let profileStack = UIStackView(arrangedSubviews: [avatarView, nameStack])
+        let outerStack = UIStackView(arrangedSubviews: [titleLabel, profileStack, footerTextView])
+
+        nameStack.axis = .vertical
+        nameStack.spacing = 0
+        nameStack.alignment = .fill
+        nameStack.distribution = .equalSpacing
+        profileStack.axis = .horizontal
+        profileStack.spacing = 24
+        profileStack.alignment = .center
+        profileStack.distribution = .fill
+        outerStack.axis = .vertical
+        outerStack.spacing = 32
+
+        [nameStack, profileStack, outerStack].forEach {
+            $0.preservesSuperviewLayoutMargins = true
+            $0.isLayoutMarginsRelativeArrangement = true
+        }
+
+        // Most subviews get added to the scroll view
+        contentScrollView.addSubview(outerStack)
+        outerStack.autoPinWidth(toWidthOf: primaryView)
+        outerStack.autoPinEdgesToSuperviewEdges()
+
+        contentScrollView.addSubview(cameraImageView)
+        cameraImageView.autoPinEdge(.bottom, to: .bottom, of: avatarView)
+        cameraImageView.autoPinEdge(.trailing, to: .trailing, of: avatarView)
+
+        // The save button will be pinned above the scroll view to the top of the keyboard
+        saveButton.setEnabled(false)
+        primaryView.addSubview(saveButtonGradient)
+        primaryView.addSubview(saveButtonBackdrop)
+        saveButtonBackdrop.addSubview(saveButton)
+
+        saveButtonGradient.isUserInteractionEnabled = false
+        saveButtonBackdrop.preservesSuperviewLayoutMargins = true
+        saveButtonBackdrop.layoutMargins = UIEdgeInsets(top: 8, leading: 0, bottom: Self.standardMargin, trailing: 0)
+
+        saveButton.autoPinEdgesToSuperviewMargins()
+        saveButtonGradient.autoPinWidthToSuperview()
+        saveButtonBackdrop.autoPinWidthToSuperview()
+
+        saveButtonGradient.autoSetDimension(.height, toSize: 30)
+        saveButtonGradient.autoPinEdge(.bottom, to: .top, of: saveButtonBackdrop)
+        autoPinView(toBottomOfViewControllerOrKeyboard: saveButtonBackdrop, avoidNotch: true)
+    }
+
+    public override func viewDidLoad() {
+        super.viewDidLoad()
+        shouldBottomViewReserveSpaceForKeyboard = false
+        avatarViewHelper.delegate = self
+
+        NotificationCenter.default.addObserver(
+            self,
+            selector: #selector(applyTheme),
+            name: .ThemeDidChange,
+            object: nil)
+    }
+
+    public override func viewWillAppear(_ animated: Bool) {
+        super.viewWillAppear(animated)
+        updateAvatarView()
+        applyTheme()
+    }
+
+    public override func viewDidLayoutSubviews() {
+        super.viewDidLayoutSubviews()
+
+        let bottomInsetHeight = saveButtonBackdrop.height + (saveButtonGradient.height / 2)
+        if contentScrollView.contentInset.bottom < bottomInsetHeight {
+            contentScrollView.contentInset.bottom = bottomInsetHeight
+        }
+    }
+
+    @objc
+    private func applyTheme() {
+        UIView.transition(with: view, duration: 0.25, options: .transitionCrossDissolve) {
+            self.view.backgroundColor = Theme.backgroundColor
+
+            self.cameraImageView.tintColor = Theme.secondaryTextAndIconColor
+            self.cameraImageView.backgroundColor = Theme.backgroundColor
+            self.cameraImageShadowLayers.forEach {
+                $0.shadowColor = (Theme.isDarkThemeEnabled ? Theme.darkThemeWashColor : UIColor.ows_black).cgColor
+            }
+
+            [self.givenNameTextField, self.familyNameTextField].forEach { $0.textColor = Theme.primaryTextColor }
+            self.nameFieldStrokes.forEach { $0.backgroundColor = Theme.hairlineColor }
+
+            // Text will be rebuilt with updated colors
+            self.footerTextView.attributedText = self.footerText
+
+            self.saveButtonBackdrop.backgroundColor = Theme.backgroundColor
+            self.saveButtonGradient.colors = [
+                (Theme.backgroundColor.withAlphaComponent(0), 0.0),
+                (Theme.backgroundColor, 1.0)
+            ]
+        }
+    }
+
+    // MARK: - Event Handling
+
+    @objc
+    func saveProfile() {
+        if normalizedGivenName.isEmpty {
+            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_GIVEN_NAME_REQUIRED",
+                                                                      comment: "Error message shown when user tries to update profile without a given name"))
+            return
+        }
+
+        if profileManager.isProfileNameTooLong(normalizedGivenName) {
+            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_GIVEN_NAME_TOO_LONG",
+                                                                      comment: "Error message shown when user tries to update profile with a given name that is too long."))
+            return
+        }
+
+        if profileManager.isProfileNameTooLong(normalizedFamilyName) {
+            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_ERROR_FAMILY_NAME_TOO_LONG",
+                                                                      comment: "Error message shown when user tries to update profile with a family name that is too long."))
+            return
+        }
+
+        if !self.reachabilityManager.isReachable {
+            OWSActionSheets.showErrorAlert(message: NSLocalizedString("PROFILE_VIEW_NO_CONNECTION",
+                                                                      comment: "Error shown when the user tries to update their profile when the app is not connected to the internet."))
+            return
+        }
+
+        // Show an activity indicator to block the UI during the profile upload.
+        let avatarData = self.avatarData
+        let normalizedGivenName = self.normalizedGivenName
+        let normalizedFamilyName = self.normalizedFamilyName
+
+        let spinner = AnimatedProgressView()
+        primaryView.addSubview(spinner)
+        spinner.autoCenterInSuperviewMargins()
+        spinner.startAnimating()
+
+        firstly(on: .sharedUserInitiated) {
+            OWSProfileManager.updateLocalProfilePromise(
+                profileGivenName: normalizedGivenName,
+                profileFamilyName: normalizedFamilyName,
+                profileBio: nil,
+                profileBioEmoji: nil,
+                profileAvatarData: avatarData)
+        }.recover { error in
+            owsFailDebug("Error: \(error)")
+        }.done {
+            self.profileCompleted()
+            UIView.animate(withDuration: 0.15) {
+                spinner.alpha = 0
+            } completion: { _ in
+                spinner.removeFromSuperview()
+            }
+        }
+    }
+
+    private func profileCompleted() {
+        AssertIsOnMainThread()
+        Logger.verbose("")
+
+        guard let navigationController = navigationController else { return owsFailDebug("Must have nav controller") }
+        onboardingController.showNextMilestone(navigationController: navigationController)
+    }
+
+    // MARK: - Avatar
+
+    private func setAvatarImage(_ avatarImage: UIImage?) {
+        AssertIsOnMainThread()
+        self.avatarData = avatarImage.map { OWSProfileManager.avatarData(forAvatarImage: $0) }
+
+        updateAvatarView()
+    }
+
+    private func updateAvatarView() {
+        if let avatarData = avatarData {
+            avatarView.image = UIImage(data: avatarData)
+        } else {
+            avatarView.image = OWSContactAvatarBuilder(forLocalUserWithDiameter: UInt(avatarSize)).buildDefaultImage()
+        }
+    }
+
+    @objc
+    private func didTapAvatar() {
+        avatarViewHelper.showChangeAvatarUI()
+    }
+}
+
+// MARK: - <AvatarViewHelperDelegate>
+
+extension OnboardingProfileCreationViewController: AvatarViewHelperDelegate {
+
+    public func avatarActionSheetTitle() -> String? {
+        NSLocalizedString("PROFILE_VIEW_AVATAR_ACTIONSHEET_TITLE", comment: "Action Sheet title prompting the user for a profile avatar")
+    }
+
+    public func avatarDidChange(_ image: UIImage) {
+        AssertIsOnMainThread()
+
+        setAvatarImage(image.resizedImage(toFillPixelSize: .square(CGFloat(kOWSProfileManager_MaxAvatarDiameter))))
+    }
+
+    public func fromViewController() -> UIViewController {
+        self
+    }
+
+    public func hasClearAvatarAction() -> Bool {
+        avatarData != nil
+    }
+
+    public func clearAvatar() {
+        setAvatarImage(nil)
+    }
+
+    public func clearAvatarActionLabel() -> String {
+        return NSLocalizedString("PROFILE_VIEW_CLEAR_AVATAR", comment: "Label for action that clear's the user's profile avatar")
+    }
+}
+
+// MARK: - <UITextFieldDelegate>
+
+extension OnboardingProfileCreationViewController: UITextFieldDelegate {
+
+    public func textField(_ textField: UITextField,
+                          shouldChangeCharactersIn range: NSRange,
+                          replacementString string: String) -> Bool {
+
+        // QuickType will append a space to any suggestions in anticipation that the user is about
+        // to type more. If we're handed a multichar string with a space at the end, drop the space.
+        let hasExtraTrailingSpace = string.count >= 2 && string.last == " "
+        let trimmedString = hasExtraTrailingSpace ? String(string.dropLast()) : string
+        let textBefore = textField.text
+
+        let textFieldHelperPermitsChange = TextFieldHelper.textField(
+            textField,
+            shouldChangeCharactersInRange: range,
+            replacementString: trimmedString.withoutBidiControlCharacters,
+            maxByteCount: OWSUserProfile.maxNameLengthBytes
+        )
+
+        if textFieldHelperPermitsChange, hasExtraTrailingSpace {
+            // TextFieldHelper will only permit the change if it hasn't already updated the text itself
+            textField.text = (textField.text as NSString?)?.replacingCharacters(in: range, with: trimmedString)
+        }
+
+        if textBefore != textField.text {
+            // .editingChanged actions aren't fired for programmatic updates
+            textFieldDidChange(textField)
+            return false
+        } else {
+            return textFieldHelperPermitsChange
+        }
+    }
+
+    public func textFieldShouldReturn(_ textField: UITextField) -> Bool {
+        if textField == firstTextField {
+            secondTextField.becomeFirstResponder()
+        } else {
+            textField.resignFirstResponder()
+        }
+        return false
+    }
+
+    @objc
+    func textFieldDidChange(_ textField: UITextField) {
+        saveButton.setEnabled(isValidProfile)
+    }
+}
diff --git a/Signal/translations/en.lproj/Localizable.strings b/Signal/translations/en.lproj/Localizable.strings
index b152529e949..fe839ea5b72 100644
--- a/Signal/translations/en.lproj/Localizable.strings
+++ b/Signal/translations/en.lproj/Localizable.strings
@@ -3244,6 +3244,15 @@
 /* Title of the 'onboarding PIN' view. */
 "ONBOARDING_PIN_TITLE" = "Enter your PIN";
 
+/* Title label for profile creation step of onboarding */
+"ONBOARDING_PROFILE_CREATION_TITLE" = "Your profile";
+
+/* Placeholder text for the family name field of the profile creation view. */
+"ONBOARDING_PROFILE_FAMILY_NAME_FIELD" = "Last Name (Optional)";
+
+/* Placeholder text for the given name field of the profile creation view. */
+"ONBOARDING_PROFILE_GIVEN_NAME_FIELD" = "First Name (Required)";
+
 /* Link to the 'terms and privacy policy' in the 'onboarding splash' view. */
 "ONBOARDING_SPLASH_TERM_AND_PRIVACY_POLICY" = "Terms & Privacy Policy";
 
@@ -3727,11 +3736,17 @@
 /* Error message shown when user tries to update profile with a given name that is too long. */
 "PROFILE_VIEW_ERROR_GIVEN_NAME_TOO_LONG" = "Your first name is too long.";
 
+/* Default text for the family name field of the profile view. */
+"PROFILE_VIEW_FAMILY_NAME_DEFAULT_TEXT" = "(Optional)";
+
 /* Label for the family name field of the profile view. */
-"PROFILE_VIEW_FAMILY_NAME_DEFAULT_TEXT" = "Last Name (Optional)";
+"PROFILE_VIEW_FAMILY_NAME_FIELD" = "Last Name";
 
 /* Default text for the given name field of the profile view. */
-"PROFILE_VIEW_GIVEN_NAME_DEFAULT_TEXT" = "First Name (Required)";
+"PROFILE_VIEW_GIVEN_NAME_DEFAULT_TEXT" = "(Required)";
+
+/* Label for the given name field of the profile view. */
+"PROFILE_VIEW_GIVEN_NAME_FIELD" = "First Name";
 
 /* Error shown when the user tries to update their profile when the app is not connected to the internet. */
 "PROFILE_VIEW_NO_CONNECTION" = "Profile can only be updated when connected to the internet.";
