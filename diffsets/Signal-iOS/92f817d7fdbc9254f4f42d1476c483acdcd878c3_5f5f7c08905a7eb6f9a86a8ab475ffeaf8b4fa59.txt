diff --git a/Signal/src/Jobs/ConversationConfigurationSyncOperation.swift b/Signal/src/Jobs/ConversationConfigurationSyncOperation.swift
index 783c8af6864..efc1b42cb9a 100644
--- a/Signal/src/Jobs/ConversationConfigurationSyncOperation.swift
+++ b/Signal/src/Jobs/ConversationConfigurationSyncOperation.swift
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
 //
 
 import Foundation
@@ -51,7 +51,7 @@ class ConversationConfigurationSyncOperation: OWSOperation {
     }
 
     private func sync(contactThread: TSContactThread) {
-        guard let signalAccount: SignalAccount = self.contactsManager.fetchSignalAccount(forRecipientId: contactThread.contactIdentifier()) else {
+        guard let signalAccount: SignalAccount = self.contactsManager.fetchSignalAccount(for: contactThread.contactAddress()) else {
             reportAssertionError(description: "unable to find signalAccount")
             return
         }
diff --git a/Signal/src/UserInterface/Notifications/AppNotifications.swift b/Signal/src/UserInterface/Notifications/AppNotifications.swift
index 08d8e132b4b..eb1346cf2cd 100644
--- a/Signal/src/UserInterface/Notifications/AppNotifications.swift
+++ b/Signal/src/UserInterface/Notifications/AppNotifications.swift
@@ -374,7 +374,7 @@ public class NotificationPresenter: NSObject, NotificationsProtocol {
 
         let messageText = rawMessageText.filterStringForDisplay()
 
-        let senderName = contactsManager.displayName(forPhoneIdentifier: incomingMessage.authorId)
+        let senderName = contactsManager.displayName(for: incomingMessage.authorId.transitional_signalServiceAddress)
 
         let notificationTitle: String?
         let threadIdentifier: String?
diff --git a/Signal/src/ViewControllers/AppSettings/AddToBlockListViewController.m b/Signal/src/ViewControllers/AppSettings/AddToBlockListViewController.m
index ad42e26f739..c9d02292705 100644
--- a/Signal/src/ViewControllers/AppSettings/AddToBlockListViewController.m
+++ b/Signal/src/ViewControllers/AppSettings/AddToBlockListViewController.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
 //
 
 #import "AddToBlockListViewController.h"
@@ -7,6 +7,7 @@
 #import "ContactsViewHelper.h"
 #import <SignalMessaging/OWSContactsManager.h>
 #import <SignalServiceKit/SignalAccount.h>
+#import <SignalServiceKit/SignalServiceKit-Swift.h>
 
 NS_ASSUME_NONNULL_BEGIN
 
@@ -65,7 +66,7 @@ - (BOOL)canSignalAccountBeSelected:(SignalAccount *)signalAccount
     OWSAssertDebug(signalAccount);
 
     ContactsViewHelper *helper = self.contactsViewHelper;
-    return ![helper isRecipientIdBlocked:signalAccount.recipientId];
+    return ![helper isSignalServiceAddressBlocked:signalAccount.recipientAddress];
 }
 
 - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
@@ -74,7 +75,7 @@ - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
 
     __weak AddToBlockListViewController *weakSelf = self;
     ContactsViewHelper *helper = self.contactsViewHelper;
-    if ([helper isRecipientIdBlocked:signalAccount.recipientId]) {
+    if ([helper isSignalServiceAddressBlocked:signalAccount.recipientAddress]) {
         OWSFailDebug(@"Cannot add already blocked user to block list.");
         return;
     }
diff --git a/Signal/src/ViewControllers/Call/CallViewController.swift b/Signal/src/ViewControllers/Call/CallViewController.swift
index 7d5837a9c4b..d686d02239a 100644
--- a/Signal/src/ViewControllers/Call/CallViewController.swift
+++ b/Signal/src/ViewControllers/Call/CallViewController.swift
@@ -200,7 +200,7 @@ class CallViewController: OWSViewController, CallObserver, CallServiceObserver,
     override func viewDidLoad() {
         super.viewDidLoad()
 
-        contactNameLabel.text = contactsManager.stringForConversationTitle(withPhoneIdentifier: thread.contactIdentifier())
+        contactNameLabel.text = contactsManager.contactOrProfileName(for: thread.contactAddress())
         updateAvatarImage()
         NotificationCenter.default.addObserver(forName: .OWSContactsManagerSignalAccountsDidChange, object: nil, queue: nil) { [weak self] _ in
             guard let strongSelf = self else { return }
diff --git a/Signal/src/ViewControllers/ConversationView/Cells/OWSQuotedMessageView.m b/Signal/src/ViewControllers/ConversationView/Cells/OWSQuotedMessageView.m
index 66223d1e4e1..fc560edf660 100644
--- a/Signal/src/ViewControllers/ConversationView/Cells/OWSQuotedMessageView.m
+++ b/Signal/src/ViewControllers/ConversationView/Cells/OWSQuotedMessageView.m
@@ -549,7 +549,8 @@ - (UILabel *)configureQuotedAuthorLabel
         }
     } else {
         OWSContactsManager *contactsManager = Environment.shared.contactsManager;
-        NSString *quotedAuthor = [contactsManager contactOrProfileNameForPhoneIdentifier:self.quotedMessage.authorId];
+        NSString *quotedAuthor = [contactsManager
+            contactOrProfileNameForSignalServiceAddress:self.quotedMessage.authorId.transitional_signalServiceAddress];
         quotedAuthorText = [NSString
             stringWithFormat:
                 NSLocalizedString(@"QUOTED_REPLY_AUTHOR_INDICATOR_FORMAT",
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationViewController.m b/Signal/src/ViewControllers/ConversationView/ConversationViewController.m
index 7d8e3436705..06aeb58c635 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationViewController.m
+++ b/Signal/src/ViewControllers/ConversationView/ConversationViewController.m
@@ -934,7 +934,8 @@ - (void)ensureBannerState
                 @"Indicates that more than one member of this group conversation is no longer verified.");
         } else {
             NSString *recipientId = [noLongerVerifiedRecipientIds firstObject];
-            NSString *displayName = [self.contactsManager displayNameForPhoneIdentifier:recipientId];
+            NSString *displayName =
+                [self.contactsManager displayNameForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
             NSString *format
                 = (self.isGroupConversation ? NSLocalizedString(@"MESSAGES_VIEW_1_MEMBER_NO_LONGER_VERIFIED_FORMAT",
                                                   @"Indicates that one member of this group conversation is no longer "
@@ -1389,9 +1390,9 @@ - (void)updateNavigationTitle
                     }];
         } else {
             name = [self.contactsManager
-                attributedContactOrProfileNameForPhoneIdentifier:self.thread.contactIdentifier
-                                                     primaryFont:self.headerView.titlePrimaryFont
-                                                   secondaryFont:self.headerView.titleSecondaryFont];
+                attributedContactOrProfileNameForSignalServiceAddress:self.thread.contactAddress
+                                                          primaryFont:self.headerView.titlePrimaryFont
+                                                        secondaryFont:self.headerView.titleSecondaryFont];
         }
     }
     self.title = nil;
@@ -1944,7 +1945,8 @@ - (void)tappedCorruptedMessage:(TSErrorMessage *)message
 
 - (void)tappedInvalidIdentityKeyErrorMessage:(TSInvalidIdentityKeyErrorMessage *)errorMessage
 {
-    NSString *keyOwner = [self.contactsManager displayNameForPhoneIdentifier:errorMessage.theirSignalId];
+    NSString *keyOwner = [self.contactsManager
+        displayNameForSignalServiceAddress:errorMessage.theirSignalId.transitional_signalServiceAddress];
     NSString *titleFormat = NSLocalizedString(@"SAFETY_NUMBERS_ACTIONSHEET_TITLE", @"Action sheet heading");
     NSString *titleText = [NSString stringWithFormat:titleFormat, keyOwner];
 
@@ -2000,7 +2002,7 @@ - (void)handleCallTap:(TSCall *)call
     }
 
     TSContactThread *contactThread = (TSContactThread *)self.thread;
-    NSString *displayName = [self.contactsManager displayNameForPhoneIdentifier:contactThread.contactIdentifier];
+    NSString *displayName = [self.contactsManager displayNameForSignalServiceAddress:contactThread.contactAddress];
 
     UIAlertController *alert = [UIAlertController
         alertControllerWithTitle:[CallStrings callBackAlertTitle]
@@ -2273,7 +2275,8 @@ - (NSAttributedString *)attributedContactOrProfileNameForPhoneIdentifier:(NSStri
     OWSAssertIsOnMainThread();
     OWSAssertDebug(recipientId.length > 0);
 
-    return [self.contactsManager attributedContactOrProfileNameForPhoneIdentifier:recipientId];
+    return [self.contactsManager
+        attributedContactOrProfileNameForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
 }
 
 - (void)tappedUnknownContactBlockOfferMessage:(OWSContactOffersInteraction *)interaction
@@ -2284,7 +2287,8 @@ - (void)tappedUnknownContactBlockOfferMessage:(OWSContactOffersInteraction *)int
     }
     TSContactThread *contactThread = (TSContactThread *)self.thread;
 
-    NSString *displayName = [self.contactsManager displayNameForPhoneIdentifier:interaction.recipientId];
+    NSString *displayName = [self.contactsManager
+        displayNameForSignalServiceAddress:interaction.recipientId.transitional_signalServiceAddress];
     NSString *title =
         [NSString stringWithFormat:NSLocalizedString(@"BLOCK_OFFER_ACTIONSHEET_TITLE_FORMAT",
                                        @"Title format for action sheet that offers to block an unknown user."
@@ -4749,7 +4753,8 @@ - (void)contactsPicker:(ContactsPicker *)contactsPicker didSelectContact:(Contac
         if (avatarImageData) {
             break;
         }
-        avatarImageData = [self.contactsManager profileImageDataForPhoneIdentifier:recipientId];
+        avatarImageData = [self.contactsManager
+            profileImageDataForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
         if (avatarImageData) {
             isProfileAvatar = YES;
         }
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m b/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
index 102fbf2fd9a..23b0e9ca580 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
+++ b/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
@@ -971,8 +971,9 @@ - (NSString *)systemMessageTextWithTransaction:(SDSAnyReadTransaction *)transact
                 OWSVerificationStateChangeMessage *verificationMessage
                     = (OWSVerificationStateChangeMessage *)infoMessage;
                 BOOL isVerified = verificationMessage.verificationState == OWSVerificationStateVerified;
-                NSString *displayName =
-                    [Environment.shared.contactsManager displayNameForPhoneIdentifier:verificationMessage.recipientId];
+                NSString *displayName = [Environment.shared.contactsManager
+                    displayNameForSignalServiceAddress:verificationMessage.recipientId
+                                                           .transitional_signalServiceAddress];
                 NSString *titleFormat = (isVerified
                         ? (verificationMessage.isLocalChange
                                   ? NSLocalizedString(@"VERIFICATION_STATE_CHANGE_FORMAT_VERIFIED_LOCAL",
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationViewModel.m b/Signal/src/ViewControllers/ConversationView/ConversationViewModel.m
index 657422e70bb..33701f3aab3 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationViewModel.m
+++ b/Signal/src/ViewControllers/ConversationView/ConversationViewModel.m
@@ -1208,9 +1208,9 @@ - (nullable TSInteraction *)firstCallOrMessageForLoadedInteractions:(NSArray<TSI
     BOOL shouldHaveAddToContactsOffer = YES;
     BOOL shouldHaveAddToProfileWhitelistOffer = YES;
 
-    NSString *recipientId = ((TSContactThread *)thread).contactIdentifier;
+    SignalServiceAddress *recipientAddress = ((TSContactThread *)thread).contactAddress;
 
-    if ([recipientId isEqualToString:localNumber]) {
+    if ([recipientAddress.transitional_phoneNumber isEqualToString:localNumber]) {
         // Don't add self to contacts.
         shouldHaveAddToContactsOffer = NO;
         // Don't bother to block self.
@@ -1218,7 +1218,7 @@ - (nullable TSInteraction *)firstCallOrMessageForLoadedInteractions:(NSArray<TSI
         // Don't bother adding self to profile whitelist.
         shouldHaveAddToProfileWhitelistOffer = NO;
     } else {
-        if ([[self.blockingManager blockedPhoneNumbers] containsObject:recipientId]) {
+        if ([[self.blockingManager blockedPhoneNumbers] containsObject:recipientAddress.transitional_phoneNumber]) {
             // Only create "add to contacts" offers for users which are not already blocked.
             shouldHaveAddToContactsOffer = NO;
             // Only create block offers for users which are not already blocked.
@@ -1227,7 +1227,7 @@ - (nullable TSInteraction *)firstCallOrMessageForLoadedInteractions:(NSArray<TSI
             shouldHaveAddToProfileWhitelistOffer = NO;
         }
 
-        if ([self.contactsManager hasNameInSystemContactsForRecipientId:recipientId]) {
+        if ([self.contactsManager hasNameInSystemContactsForSignalServiceAddress:recipientAddress]) {
             // Only create "add to contacts" offers for non-contacts.
             shouldHaveAddToContactsOffer = NO;
             // Only create block offers for non-contacts.
@@ -1281,13 +1281,13 @@ - (nullable TSInteraction *)firstCallOrMessageForLoadedInteractions:(NSArray<TSI
     NSString *uniqueId = @"contact-offers";
     OWSContactOffersInteraction *offersMessage =
         [[OWSContactOffersInteraction alloc] initWithUniqueId:uniqueId
-                                                               timestamp:contactOffersTimestamp
-                                                                  thread:thread
-                                                           hasBlockOffer:shouldHaveBlockOffer
-                                                   hasAddToContactsOffer:shouldHaveAddToContactsOffer
-                                           hasAddToProfileWhitelistOffer:shouldHaveAddToProfileWhitelistOffer
-                                                             recipientId:recipientId
-                                                     beforeInteractionId:firstCallOrMessage.uniqueId];
+                                                    timestamp:contactOffersTimestamp
+                                                       thread:thread
+                                                hasBlockOffer:shouldHaveBlockOffer
+                                        hasAddToContactsOffer:shouldHaveAddToContactsOffer
+                                hasAddToProfileWhitelistOffer:shouldHaveAddToProfileWhitelistOffer
+                                                  recipientId:recipientAddress.transitional_phoneNumber
+                                          beforeInteractionId:firstCallOrMessage.uniqueId];
 
     OWSLogInfo(@"Creating contact offers: %@ (%llu)", offersMessage.uniqueId, offersMessage.sortId);
     return offersMessage;
@@ -1628,11 +1628,12 @@ - (BOOL)reloadViewItemsWithTransaction:(SDSAnyReadTransaction *)transaction
                 }
                 if (shouldShowSenderName) {
                     senderName = [self.contactsManager
-                        attributedContactOrProfileNameForPhoneIdentifier:incomingSenderId
-                                                       primaryAttributes:[OWSMessageBubbleView
-                                                                             senderNamePrimaryAttributes]
-                                                     secondaryAttributes:[OWSMessageBubbleView
-                                                                             senderNameSecondaryAttributes]];
+                        attributedContactOrProfileNameForSignalServiceAddress:incomingSenderId
+                                                                                  .transitional_signalServiceAddress
+                                                            primaryAttributes:[OWSMessageBubbleView
+                                                                                  senderNamePrimaryAttributes]
+                                                          secondaryAttributes:[OWSMessageBubbleView
+                                                                                  senderNameSecondaryAttributes]];
                 }
 
                 // Show the sender avatar for incoming group messages unless
diff --git a/Signal/src/ViewControllers/HomeView/ConversationSearchViewController.swift b/Signal/src/ViewControllers/HomeView/ConversationSearchViewController.swift
index 85fcc352d1c..06f0ec62ff8 100644
--- a/Signal/src/ViewControllers/HomeView/ConversationSearchViewController.swift
+++ b/Signal/src/ViewControllers/HomeView/ConversationSearchViewController.swift
@@ -243,7 +243,7 @@ class ConversationSearchViewController: UITableViewController, BlockListCacheDel
                 owsFailDebug("searchResult was unexpectedly nil")
                 return UITableViewCell()
             }
-            cell.configure(withRecipientId: searchResult.signalAccount.recipientId)
+            cell.configure(withRecipientId: searchResult.signalAccount.recipientAddress.transitional_phoneNumber)
             return cell
         case .messages:
             guard let cell = tableView.dequeueReusableCell(withIdentifier: HomeViewCell.cellReuseIdentifier()) as? HomeViewCell else {
diff --git a/Signal/src/ViewControllers/HomeView/HomeViewCell.m b/Signal/src/ViewControllers/HomeView/HomeViewCell.m
index 71029274047..62f593a947d 100644
--- a/Signal/src/ViewControllers/HomeView/HomeViewCell.m
+++ b/Signal/src/ViewControllers/HomeView/HomeViewCell.m
@@ -516,9 +516,9 @@ - (void)updateNameLabel
                         NSFontAttributeName : self.nameFont,
                     }];
         } else {
-            name = [self.contactsManager attributedContactOrProfileNameForPhoneIdentifier:thread.contactIdentifier
-                                                                              primaryFont:self.nameFont
-                                                                            secondaryFont:self.nameSecondaryFont];
+            name = [self.contactsManager attributedContactOrProfileNameForSignalServiceAddress:thread.contactAddress
+                                                                                   primaryFont:self.nameFont
+                                                                                 secondaryFont:self.nameSecondaryFont];
         }
     }
 
diff --git a/Signal/src/ViewControllers/HomeView/HomeViewController.m b/Signal/src/ViewControllers/HomeView/HomeViewController.m
index 83c7c3ce16b..4f0a70923c2 100644
--- a/Signal/src/ViewControllers/HomeView/HomeViewController.m
+++ b/Signal/src/ViewControllers/HomeView/HomeViewController.m
@@ -500,7 +500,7 @@ - (void)firstConversationCueWasTapped:(UITapGestureRecognizer *)gestureRecognize
     }
 
     for (SignalAccount *account in self.contactsManager.signalAccounts) {
-        if ([localNumber isEqual:account.recipientId]) {
+        if ([localNumber isEqual:account.recipientPhoneNumber]) {
             continue;
         }
         if (accounts.count >= 3) {
diff --git a/Signal/src/ViewControllers/MediaGallery/MediaPageViewController.swift b/Signal/src/ViewControllers/MediaGallery/MediaPageViewController.swift
index 6f4a80fb47b..e08c628ffc1 100644
--- a/Signal/src/ViewControllers/MediaGallery/MediaPageViewController.swift
+++ b/Signal/src/ViewControllers/MediaGallery/MediaPageViewController.swift
@@ -663,7 +663,7 @@ class MediaPageViewController: UIPageViewController, UIPageViewControllerDataSou
     private func senderName(message: TSMessage) -> String {
         switch message {
         case let incomingMessage as TSIncomingMessage:
-            return self.contactsManager.displayName(forPhoneIdentifier: incomingMessage.authorId)
+            return self.contactsManager.displayName(for: incomingMessage.authorId.transitional_signalServiceAddress)
         case is TSOutgoingMessage:
             return NSLocalizedString("MEDIA_GALLERY_SENDER_NAME_YOU", comment: "Short sender label for media sent by you")
         default:
diff --git a/Signal/src/ViewControllers/MessageDetailViewController.swift b/Signal/src/ViewControllers/MessageDetailViewController.swift
index fbd267fc5d7..d7b7e008206 100644
--- a/Signal/src/ViewControllers/MessageDetailViewController.swift
+++ b/Signal/src/ViewControllers/MessageDetailViewController.swift
@@ -224,7 +224,7 @@ class MessageDetailViewController: OWSViewController {
         // Sender?
         if let incomingMessage = message as? TSIncomingMessage {
             let senderId = incomingMessage.authorId
-            let senderName = contactsManager.contactOrProfileName(forPhoneIdentifier: senderId)
+            let senderName = contactsManager.contactOrProfileName(for: senderId.transitional_signalServiceAddress)
             rows.append(valueRow(name: NSLocalizedString("MESSAGE_METADATA_VIEW_SENDER",
                                                          comment: "Label for the 'sender' field of the 'message metadata' view."),
                                  value: senderName))
diff --git a/Signal/src/ViewControllers/NewContactThreadViewController.m b/Signal/src/ViewControllers/NewContactThreadViewController.m
index 1220e12f8ed..dc974eea089 100644
--- a/Signal/src/ViewControllers/NewContactThreadViewController.m
+++ b/Signal/src/ViewControllers/NewContactThreadViewController.m
@@ -503,30 +503,34 @@ - (void)updateTableContents
         NSArray<SignalAccount *> *signalAccounts = collatedSignalAccounts[i];
         NSMutableArray <OWSTableItem *> *contactItems = [NSMutableArray new];
         for (SignalAccount *signalAccount in signalAccounts) {
-            [contactItems addObject:[OWSTableItem
-                                        itemWithCustomCellBlock:^{
-                                            typeof(self) strongSelf = weakSelf;
-                                            ContactTableViewCell *cell = [ContactTableViewCell new];
-                                            BOOL isBlocked = [strongSelf.contactsViewHelper
-                                                isRecipientIdBlocked:signalAccount.recipientId];
-                                            if (isBlocked) {
-                                                cell.accessoryMessage = NSLocalizedString(@"CONTACT_CELL_IS_BLOCKED",
-                                                    @"An indicator that a contact has been blocked.");
-                                            }
-
-                                            [cell configureWithRecipientId:signalAccount.recipientId];
-
-                                            NSString *cellName = [NSString
-                                                stringWithFormat:@"signal_contact.%@", signalAccount.recipientId];
-                                            cell.accessibilityIdentifier = ACCESSIBILITY_IDENTIFIER_WITH_NAME(
-                                                NewContactThreadViewController, cellName);
-
-                                            return cell;
-                                        }
-                                        customRowHeight:UITableViewAutomaticDimension
-                                        actionBlock:^{
-                                            [weakSelf newConversationWithRecipientId:signalAccount.recipientId];
-                                        }]];
+            [contactItems
+                addObject:[OWSTableItem
+                              itemWithCustomCellBlock:^{
+                                  typeof(self) strongSelf = weakSelf;
+                                  ContactTableViewCell *cell = [ContactTableViewCell new];
+                                  BOOL isBlocked = [strongSelf.contactsViewHelper
+                                      isSignalServiceAddressBlocked:signalAccount.recipientAddress];
+                                  if (isBlocked) {
+                                      cell.accessoryMessage = NSLocalizedString(
+                                          @"CONTACT_CELL_IS_BLOCKED", @"An indicator that a contact has been blocked.");
+                                  }
+
+                                  [cell
+                                      configureWithRecipientId:signalAccount.recipientAddress.transitional_phoneNumber];
+
+                                  NSString *cellName =
+                                      [NSString stringWithFormat:@"signal_contact.%@",
+                                                signalAccount.recipientAddress.transitional_phoneNumber];
+                                  cell.accessibilityIdentifier
+                                      = ACCESSIBILITY_IDENTIFIER_WITH_NAME(NewContactThreadViewController, cellName);
+
+                                  return cell;
+                              }
+                              customRowHeight:UITableViewAutomaticDimension
+                              actionBlock:^{
+                                  [weakSelf newConversationWithRecipientId:signalAccount.recipientAddress
+                                                                               .transitional_phoneNumber];
+                              }]];
         }
 
         // Don't show empty sections.
@@ -561,7 +565,8 @@ - (void)updateTableContents
                 addItem:[OWSTableItem
                             itemWithCustomCellBlock:^{
                                 ContactTableViewCell *cell = [ContactTableViewCell new];
-                                BOOL isBlocked = [helper isRecipientIdBlocked:phoneNumber];
+                                BOOL isBlocked = [helper
+                                    isSignalServiceAddressBlocked:phoneNumber.transitional_signalServiceAddress];
                                 if (isBlocked) {
                                     cell.accessoryMessage = NSLocalizedString(
                                         @"CONTACT_CELL_IS_BLOCKED", @"An indicator that a contact has been blocked.");
@@ -606,7 +611,7 @@ - (void)updateTableContents
     for (SignalAccount *signalAccount in filteredSignalAccounts) {
         hasSearchResults = YES;
 
-        if ([searchPhoneNumbers containsObject:signalAccount.recipientId]) {
+        if ([searchPhoneNumbers containsObject:signalAccount.recipientAddress.transitional_phoneNumber]) {
             // Don't show a contact if they already appear in the "search phone numbers"
             // results.
             continue;
@@ -615,16 +620,16 @@ - (void)updateTableContents
             addItem:[OWSTableItem
                         itemWithCustomCellBlock:^{
                             ContactTableViewCell *cell = [ContactTableViewCell new];
-                            BOOL isBlocked = [helper isRecipientIdBlocked:signalAccount.recipientId];
+                            BOOL isBlocked = [helper isSignalServiceAddressBlocked:signalAccount.recipientAddress];
                             if (isBlocked) {
                                 cell.accessoryMessage = NSLocalizedString(
                                     @"CONTACT_CELL_IS_BLOCKED", @"An indicator that a contact has been blocked.");
                             }
 
-                            [cell configureWithRecipientId:signalAccount.recipientId];
+                            [cell configureWithRecipientId:signalAccount.recipientAddress.transitional_phoneNumber];
 
-                            NSString *cellName =
-                                [NSString stringWithFormat:@"signal_contact.%@", signalAccount.recipientId];
+                            NSString *cellName = [NSString stringWithFormat:@"signal_contact.%@",
+                                                           signalAccount.recipientAddress.transitional_phoneNumber];
                             cell.accessibilityIdentifier
                                 = ACCESSIBILITY_IDENTIFIER_WITH_NAME(NewContactThreadViewController, cellName);
 
@@ -632,7 +637,8 @@ - (void)updateTableContents
                         }
                         customRowHeight:UITableViewAutomaticDimension
                         actionBlock:^{
-                            [weakSelf newConversationWithRecipientId:signalAccount.recipientId];
+                            [weakSelf
+                                newConversationWithRecipientId:signalAccount.recipientAddress.transitional_phoneNumber];
                         }]];
     }
     if (filteredSignalAccounts.count > 0) {
diff --git a/Signal/src/ViewControllers/NewGroupViewController.m b/Signal/src/ViewControllers/NewGroupViewController.m
index cb93516f600..99977120e81 100644
--- a/Signal/src/ViewControllers/NewGroupViewController.m
+++ b/Signal/src/ViewControllers/NewGroupViewController.m
@@ -222,7 +222,7 @@ - (void)updateTableContents
     NSArray<SignalAccount *> *signalAccounts = self.contactsViewHelper.signalAccounts;
     NSMutableSet *nonContactMemberRecipientIds = [self.memberRecipientIds mutableCopy];
     for (SignalAccount *signalAccount in signalAccounts) {
-        [nonContactMemberRecipientIds removeObject:signalAccount.recipientId];
+        [nonContactMemberRecipientIds removeObject:signalAccount.recipientAddress.transitional_phoneNumber];
     }
 
     // Non-contact Members
@@ -246,7 +246,8 @@ - (void)updateTableContents
 
                                 ContactTableViewCell *cell = [ContactTableViewCell new];
                                 BOOL isCurrentMember = [strongSelf.memberRecipientIds containsObject:recipientId];
-                                BOOL isBlocked = [contactsViewHelper isRecipientIdBlocked:recipientId];
+                                BOOL isBlocked = [contactsViewHelper
+                                    isSignalServiceAddressBlocked:recipientId.transitional_signalServiceAddress];
                                 if (isCurrentMember) {
                                     // In the "contacts" section, we label members as such when editing an existing
                                     // group.
@@ -267,7 +268,8 @@ - (void)updateTableContents
                             customRowHeight:UITableViewAutomaticDimension
                             actionBlock:^{
                                 BOOL isCurrentMember = [weakSelf.memberRecipientIds containsObject:recipientId];
-                                BOOL isBlocked = [contactsViewHelper isRecipientIdBlocked:recipientId];
+                                BOOL isBlocked = [contactsViewHelper
+                                    isSignalServiceAddressBlocked:recipientId.transitional_signalServiceAddress];
                                 if (isCurrentMember) {
                                     [weakSelf removeRecipientId:recipientId];
                                 } else if (isBlocked) {
@@ -336,9 +338,10 @@ - (void)updateTableContents
 
                                 ContactTableViewCell *cell = [ContactTableViewCell new];
 
-                                NSString *recipientId = signalAccount.recipientId;
+                                NSString *recipientId = signalAccount.recipientAddress.transitional_phoneNumber;
                                 BOOL isCurrentMember = [strongSelf.memberRecipientIds containsObject:recipientId];
-                                BOOL isBlocked = [contactsViewHelper isRecipientIdBlocked:recipientId];
+                                BOOL isBlocked =
+                                    [contactsViewHelper isSignalServiceAddressBlocked:signalAccount.recipientAddress];
                                 if (isCurrentMember) {
                                     // In the "contacts" section, we label members as such when editing an existing
                                     // group.
@@ -349,10 +352,10 @@ - (void)updateTableContents
                                         @"CONTACT_CELL_IS_BLOCKED", @"An indicator that a contact has been blocked.");
                                 }
 
-                                [cell configureWithRecipientId:signalAccount.recipientId];
+                                [cell configureWithRecipientId:signalAccount.recipientAddress.transitional_phoneNumber];
 
-                                NSString *cellName =
-                                    [NSString stringWithFormat:@"signal_contact.%@", signalAccount.recipientId];
+                                NSString *cellName = [NSString stringWithFormat:@"signal_contact.%@",
+                                                               signalAccount.recipientAddress.transitional_phoneNumber];
                                 cell.accessibilityIdentifier
                                     = ACCESSIBILITY_IDENTIFIER_WITH_NAME(NewGroupViewController, cellName);
 
@@ -360,9 +363,10 @@ - (void)updateTableContents
                             }
                             customRowHeight:UITableViewAutomaticDimension
                             actionBlock:^{
-                                NSString *recipientId = signalAccount.recipientId;
+                                NSString *recipientId = signalAccount.recipientAddress.transitional_phoneNumber;
                                 BOOL isCurrentMember = [weakSelf.memberRecipientIds containsObject:recipientId];
-                                BOOL isBlocked = [contactsViewHelper isRecipientIdBlocked:recipientId];
+                                BOOL isBlocked =
+                                    [contactsViewHelper isSignalServiceAddressBlocked:signalAccount.recipientAddress];
                                 if (isCurrentMember) {
                                     [weakSelf removeRecipientId:recipientId];
                                 } else if (isBlocked) {
@@ -378,7 +382,8 @@ - (void)updateTableContents
                                                             }];
                                 } else {
                                     BOOL didShowSNAlert = [SafetyNumberConfirmationAlert
-                                        presentAlertIfNecessaryWithRecipientId:signalAccount.recipientId
+                                        presentAlertIfNecessaryWithRecipientId:signalAccount.recipientAddress
+                                                                                   .transitional_phoneNumber
                                                               confirmationText:NSLocalizedString(
                                                                                    @"SAFETY_NUMBER_CHANGED_CONFIRM_"
                                                                                    @"ADD_TO_GROUP_ACTION",
diff --git a/Signal/src/ViewControllers/SafetyNumberConfirmationAlert.swift b/Signal/src/ViewControllers/SafetyNumberConfirmationAlert.swift
index 0941c5667a1..66e570314bb 100644
--- a/Signal/src/ViewControllers/SafetyNumberConfirmationAlert.swift
+++ b/Signal/src/ViewControllers/SafetyNumberConfirmationAlert.swift
@@ -52,7 +52,7 @@ public class SafetyNumberConfirmationAlert: NSObject {
             return false
         }
 
-        let displayName = contactsManager.displayName(forPhoneIdentifier: untrustedIdentity.recipientId)
+        let displayName = contactsManager.displayName(for: untrustedIdentity.recipientId.transitional_signalServiceAddress)
 
         let titleFormat = NSLocalizedString("CONFIRM_SENDING_TO_CHANGED_IDENTITY_TITLE_FORMAT",
                                             comment: "Action sheet title presented when a user's SN has recently changed. Embeds {{contact's name or phone number}}")
diff --git a/Signal/src/ViewControllers/ThreadSettings/AddToGroupViewController.m b/Signal/src/ViewControllers/ThreadSettings/AddToGroupViewController.m
index 55377613eba..c6f32fb523f 100644
--- a/Signal/src/ViewControllers/ThreadSettings/AddToGroupViewController.m
+++ b/Signal/src/ViewControllers/ThreadSettings/AddToGroupViewController.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
 //
 
 #import "AddToGroupViewController.h"
@@ -53,7 +53,7 @@ - (void)phoneNumberWasSelected:(NSString *)phoneNumber
     __weak AddToGroupViewController *weakSelf = self;
 
     ContactsViewHelper *helper = self.contactsViewHelper;
-    if ([helper isRecipientIdBlocked:phoneNumber]) {
+    if ([helper isSignalServiceAddressBlocked:phoneNumber.transitional_signalServiceAddress]) {
         [BlockListUIUtils showUnblockPhoneNumberActionSheet:phoneNumber
                                          fromViewController:self
                                             blockingManager:helper.blockingManager
@@ -89,7 +89,7 @@ - (BOOL)canSignalAccountBeSelected:(SignalAccount *)signalAccount
 {
     OWSAssertDebug(signalAccount);
 
-    return ![self.addToGroupDelegate isRecipientGroupMember:signalAccount.recipientId];
+    return ![self.addToGroupDelegate isRecipientGroupMember:signalAccount.recipientAddress.transitional_phoneNumber];
 }
 
 - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
@@ -98,26 +98,27 @@ - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
 
     __weak AddToGroupViewController *weakSelf = self;
     ContactsViewHelper *helper = self.contactsViewHelper;
-    if ([self.addToGroupDelegate isRecipientGroupMember:signalAccount.recipientId]) {
+    if ([self.addToGroupDelegate isRecipientGroupMember:signalAccount.recipientAddress.transitional_phoneNumber]) {
         OWSFailDebug(@"Cannot add user to group member if already a member.");
         return;
     }
 
-    if ([helper isRecipientIdBlocked:signalAccount.recipientId]) {
+    if ([helper isSignalServiceAddressBlocked:signalAccount.recipientAddress]) {
         [BlockListUIUtils showUnblockSignalAccountActionSheet:signalAccount
                                            fromViewController:self
                                               blockingManager:helper.blockingManager
                                               contactsManager:helper.contactsManager
                                               completionBlock:^(BOOL isBlocked) {
                                                   if (!isBlocked) {
-                                                      [weakSelf addToGroup:signalAccount.recipientId];
+                                                      [weakSelf addToGroup:signalAccount.recipientAddress
+                                                                               .transitional_phoneNumber];
                                                   }
                                               }];
         return;
     }
 
     BOOL didShowSNAlert = [SafetyNumberConfirmationAlert
-        presentAlertIfNecessaryWithRecipientId:signalAccount.recipientId
+        presentAlertIfNecessaryWithRecipientId:signalAccount.recipientAddress.transitional_phoneNumber
                               confirmationText:
                                   NSLocalizedString(@"SAFETY_NUMBER_CHANGED_CONFIRM_ADD_TO_GROUP_ACTION",
                                       @"button title to confirm adding a recipient to a group when their safety "
@@ -125,14 +126,15 @@ - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
                                contactsManager:helper.contactsManager
                                     completion:^(BOOL didConfirmIdentity) {
                                         if (didConfirmIdentity) {
-                                            [weakSelf addToGroup:signalAccount.recipientId];
+                                            [weakSelf
+                                                addToGroup:signalAccount.recipientAddress.transitional_phoneNumber];
                                         }
                                     }];
     if (didShowSNAlert) {
         return;
     }
 
-    [self addToGroup:signalAccount.recipientId];
+    [self addToGroup:signalAccount.recipientAddress.transitional_phoneNumber];
 }
 
 - (void)addToGroup:(NSString *)recipientId
@@ -162,7 +164,7 @@ - (nullable NSString *)accessoryMessageForSignalAccount:(SignalAccount *)signalA
 {
     OWSAssertDebug(signalAccount);
 
-    if ([self.addToGroupDelegate isRecipientGroupMember:signalAccount.recipientId]) {
+    if ([self.addToGroupDelegate isRecipientGroupMember:signalAccount.recipientAddress.transitional_phoneNumber]) {
         return NSLocalizedString(@"NEW_GROUP_MEMBER_LABEL", @"An indicator that a user is a member of the new group.");
     }
 
diff --git a/Signal/src/ViewControllers/ThreadSettings/FingerprintViewController.m b/Signal/src/ViewControllers/ThreadSettings/FingerprintViewController.m
index 1d22dae36eb..ad9145edc2a 100644
--- a/Signal/src/ViewControllers/ThreadSettings/FingerprintViewController.m
+++ b/Signal/src/ViewControllers/ThreadSettings/FingerprintViewController.m
@@ -145,7 +145,8 @@ - (void)configureWithRecipientId:(NSString *)recipientId
     self.recipientId = recipientId;
 
     OWSContactsManager *contactsManager = Environment.shared.contactsManager;
-    self.contactName = [contactsManager displayNameForPhoneIdentifier:recipientId];
+    self.contactName =
+        [contactsManager displayNameForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
 
     OWSRecipientIdentity *_Nullable recipientIdentity =
         [[OWSIdentityManager sharedManager] recipientIdentityForRecipientId:recipientId];
diff --git a/Signal/src/ViewControllers/ThreadSettings/FingerprintViewScanController.m b/Signal/src/ViewControllers/ThreadSettings/FingerprintViewScanController.m
index 88ddc1677e0..60dd1c1fb54 100644
--- a/Signal/src/ViewControllers/ThreadSettings/FingerprintViewScanController.m
+++ b/Signal/src/ViewControllers/ThreadSettings/FingerprintViewScanController.m
@@ -42,7 +42,8 @@ - (void)configureWithRecipientId:(NSString *)recipientId
     self.accountManager = [TSAccountManager sharedInstance];
 
     OWSContactsManager *contactsManager = Environment.shared.contactsManager;
-    self.contactName = [contactsManager displayNameForPhoneIdentifier:recipientId];
+    self.contactName =
+        [contactsManager displayNameForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
 
     OWSRecipientIdentity *_Nullable recipientIdentity =
         [[OWSIdentityManager sharedManager] recipientIdentityForRecipientId:recipientId];
diff --git a/Signal/src/ViewControllers/ThreadSettings/OWSConversationSettingsViewController.m b/Signal/src/ViewControllers/ThreadSettings/OWSConversationSettingsViewController.m
index 8a29f7e47c5..059a6872005 100644
--- a/Signal/src/ViewControllers/ThreadSettings/OWSConversationSettingsViewController.m
+++ b/Signal/src/ViewControllers/ThreadSettings/OWSConversationSettingsViewController.m
@@ -232,8 +232,8 @@ - (BOOL)hasExistingContact
 {
     OWSAssertDebug([self.thread isKindOfClass:[TSContactThread class]]);
     TSContactThread *contactThread = (TSContactThread *)self.thread;
-    NSString *recipientId = contactThread.contactIdentifier;
-    return [self.contactsManager hasSignalAccountForRecipientId:recipientId];
+    SignalServiceAddress *recipientAddress = contactThread.contactAddress;
+    return [self.contactsManager hasSignalAccountForSignalServiceAddress:recipientAddress];
 }
 
 #pragma mark - ContactEditingDelegate
@@ -959,7 +959,8 @@ - (UIView *)mainSectionHeader
             lastTitleView = subtitleLabel;
         };
 
-        NSString *recipientId = self.thread.contactIdentifier;
+        SignalServiceAddress *recipientAddress = self.thread.contactAddress;
+        NSString *recipientId = recipientAddress.transitional_phoneNumber;
 
         BOOL hasName = ![self.thread.name isEqualToString:recipientId];
         if (hasName) {
@@ -968,7 +969,8 @@ - (UIView *)mainSectionHeader
                                    bestEffortFormatPartialUserSpecifiedTextToLookLikeAPhoneNumber:recipientId]];
             addSubtitle(subtitle);
         } else {
-            NSString *_Nullable profileName = [self.contactsManager formattedProfileNameForRecipientId:recipientId];
+            NSString *_Nullable profileName =
+                [self.contactsManager formattedProfileNameForSignalServiceAddress:recipientAddress];
             if (profileName) {
                 addSubtitle([[NSAttributedString alloc] initWithString:profileName]);
             }
diff --git a/Signal/src/ViewControllers/ThreadSettings/ShowGroupMembersViewController.m b/Signal/src/ViewControllers/ThreadSettings/ShowGroupMembersViewController.m
index d7eb114b456..0cd94d1f9bd 100644
--- a/Signal/src/ViewControllers/ThreadSettings/ShowGroupMembersViewController.m
+++ b/Signal/src/ViewControllers/ThreadSettings/ShowGroupMembersViewController.m
@@ -162,12 +162,14 @@ - (void)addMembers:(NSArray<NSString *> *)recipientIds
     __weak ShowGroupMembersViewController *weakSelf = self;
     ContactsViewHelper *helper = self.contactsViewHelper;
     // Sort the group members using contacts manager.
-    NSArray<NSString *> *sortedRecipientIds = [recipientIds sortedArrayUsingComparator:^NSComparisonResult(
-        NSString *recipientIdA, NSString *recipientIdB) {
-        SignalAccount *signalAccountA = [helper.contactsManager fetchOrBuildSignalAccountForRecipientId:recipientIdA];
-        SignalAccount *signalAccountB = [helper.contactsManager fetchOrBuildSignalAccountForRecipientId:recipientIdB];
-        return [helper.contactsManager compareSignalAccount:signalAccountA withSignalAccount:signalAccountB];
-    }];
+    NSArray<NSString *> *sortedRecipientIds =
+        [recipientIds sortedArrayUsingComparator:^NSComparisonResult(NSString *recipientIdA, NSString *recipientIdB) {
+            SignalAccount *signalAccountA = [helper.contactsManager
+                fetchOrBuildSignalAccountForSignalServiceAddress:recipientIdA.transitional_signalServiceAddress];
+            SignalAccount *signalAccountB = [helper.contactsManager
+                fetchOrBuildSignalAccountForSignalServiceAddress:recipientIdB.transitional_signalServiceAddress];
+            return [helper.contactsManager compareSignalAccount:signalAccountA withSignalAccount:signalAccountB];
+        }];
     for (NSString *recipientId in sortedRecipientIds) {
         [section addItem:[OWSTableItem
                              itemWithCustomCellBlock:^{
@@ -179,7 +181,8 @@ - (void)addMembers:(NSArray<NSString *> *)recipientIds
                                      [[OWSIdentityManager sharedManager] verificationStateForRecipientId:recipientId];
                                  BOOL isVerified = verificationState == OWSVerificationStateVerified;
                                  BOOL isNoLongerVerified = verificationState == OWSVerificationStateNoLongerVerified;
-                                 BOOL isBlocked = [helper isRecipientIdBlocked:recipientId];
+                                 BOOL isBlocked = [helper
+                                     isSignalServiceAddressBlocked:recipientId.transitional_signalServiceAddress];
                                  if (isNoLongerVerified) {
                                      cell.accessoryMessage = NSLocalizedString(@"CONTACT_CELL_IS_NO_LONGER_VERIFIED",
                                          @"An indicator that a contact is no longer verified.");
@@ -278,7 +281,8 @@ - (void)didSelectRecipientId:(NSString *)recipientId
     OWSAssertDebug(recipientId.length > 0);
 
     ContactsViewHelper *helper = self.contactsViewHelper;
-    SignalAccount *_Nullable signalAccount = [helper fetchSignalAccountForRecipientId:recipientId];
+    SignalAccount *_Nullable signalAccount =
+        [helper fetchSignalAccountForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
 
     UIAlertController *actionSheet =
         [UIAlertController alertControllerWithTitle:nil message:nil preferredStyle:UIAlertControllerStyleActionSheet];
@@ -299,7 +303,7 @@ - (void)didSelectRecipientId:(NSString *)recipientId
 
     BOOL isBlocked;
     if (signalAccount) {
-        isBlocked = [helper isRecipientIdBlocked:signalAccount.recipientId];
+        isBlocked = [helper isSignalServiceAddressBlocked:signalAccount.recipientAddress];
         if (isBlocked) {
             [actionSheet
                 addAction:[UIAlertAction actionWithTitle:NSLocalizedString(@"BLOCK_LIST_UNBLOCK_BUTTON",
@@ -334,7 +338,7 @@ - (void)didSelectRecipientId:(NSString *)recipientId
                                                  }]];
         }
     } else {
-        isBlocked = [helper isRecipientIdBlocked:recipientId];
+        isBlocked = [helper isSignalServiceAddressBlocked:recipientId.transitional_signalServiceAddress];
         if (isBlocked) {
             [actionSheet
                 addAction:[UIAlertAction actionWithTitle:NSLocalizedString(@"BLOCK_LIST_UNBLOCK_BUTTON",
diff --git a/Signal/src/ViewControllers/ThreadSettings/UpdateGroupViewController.m b/Signal/src/ViewControllers/ThreadSettings/UpdateGroupViewController.m
index 54856a3fa6c..21aaa76a1d5 100644
--- a/Signal/src/ViewControllers/ThreadSettings/UpdateGroupViewController.m
+++ b/Signal/src/ViewControllers/ThreadSettings/UpdateGroupViewController.m
@@ -279,7 +279,8 @@ - (void)updateTableContents
 
                             ContactTableViewCell *cell = [ContactTableViewCell new];
                             BOOL isPreviousMember = [strongSelf.previousMemberRecipientIds containsObject:recipientId];
-                            BOOL isBlocked = [contactsViewHelper isRecipientIdBlocked:recipientId];
+                            BOOL isBlocked = [contactsViewHelper
+                                isSignalServiceAddressBlocked:recipientId.transitional_signalServiceAddress];
                             if (isPreviousMember) {
                                 if (isBlocked) {
                                     cell.accessoryMessage = NSLocalizedString(
@@ -308,10 +309,12 @@ - (void)updateTableContents
                         }
                         customRowHeight:UITableViewAutomaticDimension
                         actionBlock:^{
-                            SignalAccount *_Nullable signalAccount =
-                                [contactsViewHelper fetchSignalAccountForRecipientId:recipientId];
+                            SignalAccount *_Nullable signalAccount = [contactsViewHelper
+                                fetchSignalAccountForSignalServiceAddress:recipientId
+                                                                              .transitional_signalServiceAddress];
                             BOOL isPreviousMember = [weakSelf.previousMemberRecipientIds containsObject:recipientId];
-                            BOOL isBlocked = [contactsViewHelper isRecipientIdBlocked:recipientId];
+                            BOOL isBlocked =
+                                [contactsViewHelper isSignalServiceAddressBlocked:signalAccount.recipientAddress];
                             if (isPreviousMember) {
                                 if (isBlocked) {
                                     if (signalAccount) {
diff --git a/Signal/src/call/CallService.swift b/Signal/src/call/CallService.swift
index 298b921a0a0..5c31d45c13a 100644
--- a/Signal/src/call/CallService.swift
+++ b/Signal/src/call/CallService.swift
@@ -708,7 +708,7 @@ private class SignalCallData: NSObject {
         guard untrustedIdentity == nil else {
             Logger.warn("missed a call due to untrusted identity: \(newCall.identifiersForLogs)")
 
-            let callerName = self.contactsManager.displayName(forPhoneIdentifier: thread.contactIdentifier())
+            let callerName = self.contactsManager.displayName(for: thread.contactAddress())
 
             switch untrustedIdentity!.verificationState {
             case .verified:
@@ -802,7 +802,7 @@ private class SignalCallData: NSObject {
 
             // For contacts not stored in our system contacts, we assume they are an unknown caller, and we force
             // a TURN connection, so as not to reveal any connectivity information (IP/port) to the caller.
-            let isUnknownCaller = !self.contactsManager.hasSignalAccount(forRecipientId: thread.contactIdentifier())
+            let isUnknownCaller = !self.contactsManager.hasSignalAccount(for: thread.contactAddress())
 
             let useTurnOnly = isUnknownCaller || Environment.shared.preferences.doCallsHideIPAddress()
 
diff --git a/Signal/src/call/OutboundCallInitiator.swift b/Signal/src/call/OutboundCallInitiator.swift
index 3515b4f292d..0b6aec4a826 100644
--- a/Signal/src/call/OutboundCallInitiator.swift
+++ b/Signal/src/call/OutboundCallInitiator.swift
@@ -41,9 +41,8 @@ import SignalMessaging
             Logger.warn("unable to parse signalId from phone number: \(handle)")
             return false
         }
-        // TODO UUID: map phone number from contacts to UUID, maybe requires lookup?
-        let address = SignalServiceAddress(phoneNumber: e164Number)
-        return initiateCall(address: address, isVideo: false)
+
+        return initiateCall(address: e164Number.transitional_signalServiceAddress, isVideo: false)
     }
 
     /**
diff --git a/Signal/src/call/Speakerbox/CallKitCallUIAdaptee.swift b/Signal/src/call/Speakerbox/CallKitCallUIAdaptee.swift
index 7eaf53e156e..8b9637a0159 100644
--- a/Signal/src/call/Speakerbox/CallKitCallUIAdaptee.swift
+++ b/Signal/src/call/Speakerbox/CallKitCallUIAdaptee.swift
@@ -146,7 +146,7 @@ final class CallKitCallUIAdaptee: NSObject, CallUIAdaptee, CXProviderDelegate {
         let update = CXCallUpdate()
 
         if showNamesOnCallScreen {
-            update.localizedCallerName = self.contactsManager.stringForConversationTitle(withPhoneIdentifier: call.remotePhoneNumber)
+            update.localizedCallerName = self.contactsManager.contactOrProfileName(for: call.remotePhoneNumber.transitional_signalServiceAddress)
             update.remoteHandle = CXHandle(type: .phoneNumber, value: call.remotePhoneNumber)
         } else {
             let callKitId = CallKitCallManager.kAnonymousCallHandlePrefix + call.localId.uuidString
diff --git a/Signal/src/call/UserInterface/CallUIAdapter.swift b/Signal/src/call/UserInterface/CallUIAdapter.swift
index c8ab23395eb..325eb8c6539 100644
--- a/Signal/src/call/UserInterface/CallUIAdapter.swift
+++ b/Signal/src/call/UserInterface/CallUIAdapter.swift
@@ -158,23 +158,23 @@ extension CallUIAdaptee {
 
     internal func reportIncomingCall(_ call: SignalCall, thread: TSContactThread) {
         AssertIsOnMainThread()
-        
+
         Logger.info("remotePhoneNumber: \(call.remotePhoneNumber)")
 
         // make sure we don't terminate audio session during call
         _ = audioSession.startAudioActivity(call.audioActivity)
 
-        let callerName = self.contactsManager.displayName(forPhoneIdentifier: call.remotePhoneNumber)
-        
+        let callerName = self.contactsManager.displayName(for: call.remotePhoneNumber.transitional_signalServiceAddress)
+
         Logger.verbose("callerName: \(callerName)")
-        
+
         adaptee.reportIncomingCall(call, callerName: callerName)
     }
 
     internal func reportMissedCall(_ call: SignalCall) {
         AssertIsOnMainThread()
 
-        let callerName = self.contactsManager.displayName(forPhoneIdentifier: call.remotePhoneNumber)
+        let callerName = self.contactsManager.displayName(for: call.remotePhoneNumber.transitional_signalServiceAddress)
         adaptee.reportMissedCall(call, callerName: callerName)
     }
 
diff --git a/Signal/src/views/GroupTableViewCell.swift b/Signal/src/views/GroupTableViewCell.swift
index fabb39117af..7e12956941c 100644
--- a/Signal/src/views/GroupTableViewCell.swift
+++ b/Signal/src/views/GroupTableViewCell.swift
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
 //
 
 import UIKit
@@ -62,7 +62,7 @@ import SignalServiceKit
 
         let groupMemberIds: [String] = thread.groupModel.groupMemberIds
         let groupMemberNames = groupMemberIds.map { (recipientId: String) in
-            contactsManager.displayName(forPhoneIdentifier: recipientId)
+            contactsManager.displayName(for: recipientId.transitional_signalServiceAddress)
         }.joined(separator: ", ")
         self.subtitleLabel.text = groupMemberNames
 
diff --git a/Signal/test/util/ProtoParsingTest.m b/Signal/test/util/ProtoParsingTest.m
index 6e06aebbcc1..f226c31664b 100644
--- a/Signal/test/util/ProtoParsingTest.m
+++ b/Signal/test/util/ProtoParsingTest.m
@@ -23,9 +23,9 @@ @interface TestContactsManager : NSObject <ContactsManagerProtocol>
 
 @implementation TestContactsManager
 
-- (NSString *)displayNameForPhoneIdentifier:(NSString *_Nullable)phoneNumber
+- (nonnull NSString *)displayNameForSignalServiceAddress:(nullable SignalServiceAddress *)address
 {
-    return phoneNumber;
+    return address.stringIdentifier;
 }
 
 - (NSArray<SignalAccount *> *)signalAccounts
@@ -63,7 +63,9 @@ - (nullable UIImage *)avatarImageForCNContactId:(nullable NSString *)contactId
     return nil;
 }
 
-- (nonnull NSString *)displayNameForPhoneIdentifier:(NSString * _Nullable)recipientId transaction:(nonnull YapDatabaseReadTransaction *)transaction {
+- (nonnull NSString *)displayNameForSignalServiceAddress:(nullable SignalServiceAddress *)address
+                                             transaction:(nonnull YapDatabaseReadTransaction *)transaction
+{
     return nil;
 }
 
@@ -124,9 +126,12 @@ - (void)testProtoParsing_wrong1
 - (void)testProtoStreams
 {
     NSArray<SignalAccount *> *signalAccounts = @[
-        [[SignalAccount alloc] initWithRecipientId:@"+13213214321"],
-        [[SignalAccount alloc] initWithRecipientId:@"+13213214322"],
-        [[SignalAccount alloc] initWithRecipientId:@"+13213214323"],
+        [[SignalAccount alloc]
+            initWithSignalServiceAddress:[[SignalServiceAddress alloc] initWithPhoneNumber:@"+13213214321"]],
+        [[SignalAccount alloc]
+            initWithSignalServiceAddress:[[SignalServiceAddress alloc] initWithPhoneNumber:@"+13213214322"]],
+        [[SignalAccount alloc]
+            initWithSignalServiceAddress:[[SignalServiceAddress alloc] initWithPhoneNumber:@"+13213214323"]],
     ];
     NSData *_Nullable streamData = [self dataForSyncingContacts:signalAccounts];
     XCTAssertNotNil(streamData);
diff --git a/SignalMessaging/ViewControllers/MessageApprovalViewController.swift b/SignalMessaging/ViewControllers/MessageApprovalViewController.swift
index c63f905e50e..253265b00e4 100644
--- a/SignalMessaging/ViewControllers/MessageApprovalViewController.swift
+++ b/SignalMessaging/ViewControllers/MessageApprovalViewController.swift
@@ -164,7 +164,7 @@ public class MessageApprovalViewController: OWSViewController, UITextViewDelegat
             return recipientRow
         }
 
-        nameLabel.attributedText = contactsManager.formattedFullName(forRecipientId: contactThread.contactIdentifier(), font: font)
+        nameLabel.attributedText = contactsManager.formattedFullName(for: contactThread.contactAddress(), font: font)
         nameLabel.textColor = Theme.primaryColor
 
         if let profileName = self.profileName(contactThread: contactThread) {
@@ -189,13 +189,13 @@ public class MessageApprovalViewController: OWSViewController, UITextViewDelegat
     }
 
     private func profileName(contactThread: TSContactThread) -> String? {
-        let recipientId = contactThread.contactIdentifier()
+        let contactAddress = contactThread.contactAddress()
 
-        if contactsManager.hasNameInSystemContacts(forRecipientId: recipientId) {
+        if contactsManager.hasNameInSystemContacts(for: contactAddress) {
             // Don't display profile name when we have a veritas name in system Contacts
             return nil
         }
-        return contactsManager.formattedProfileName(forRecipientId: recipientId)
+        return contactsManager.formattedProfileName(for: contactAddress)
     }
 
     // MARK: - Event Handlers
diff --git a/SignalMessaging/ViewControllers/NewNonContactConversationViewController.m b/SignalMessaging/ViewControllers/NewNonContactConversationViewController.m
index f6d458c752a..7c432c493b1 100644
--- a/SignalMessaging/ViewControllers/NewNonContactConversationViewController.m
+++ b/SignalMessaging/ViewControllers/NewNonContactConversationViewController.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
 //
 
 #import "NewNonContactConversationViewController.h"
@@ -7,6 +7,7 @@
 #import "ContactsViewHelper.h"
 #import <SignalMessaging/OWSContactsManager.h>
 #import <SignalServiceKit/SignalAccount.h>
+#import <SignalServiceKit/SignalServiceKit-Swift.h>
 
 NS_ASSUME_NONNULL_BEGIN
 
@@ -57,7 +58,7 @@ - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
 {
     OWSAssertDebug(signalAccount);
 
-    [self selectRecipient:signalAccount.recipientId];
+    [self selectRecipient:signalAccount.recipientAddress.transitional_phoneNumber];
 }
 
 - (void)selectRecipient:(NSString *)recipientId
diff --git a/SignalMessaging/ViewControllers/SelectRecipientViewController.m b/SignalMessaging/ViewControllers/SelectRecipientViewController.m
index 208cfc8490f..2f1b6f57a2d 100644
--- a/SignalMessaging/ViewControllers/SelectRecipientViewController.m
+++ b/SignalMessaging/ViewControllers/SelectRecipientViewController.m
@@ -543,7 +543,8 @@ - (void)updateTableContents
                                     OWSCAssertDebug(strongSelf);
 
                                     ContactTableViewCell *cell = [ContactTableViewCell new];
-                                    BOOL isBlocked = [helper isRecipientIdBlocked:signalAccount.recipientId];
+                                    BOOL isBlocked =
+                                        [helper isSignalServiceAddressBlocked:signalAccount.recipientAddress];
                                     if (isBlocked) {
                                         cell.accessoryMessage = NSLocalizedString(@"CONTACT_CELL_IS_BLOCKED",
                                             @"An indicator that a contact has been blocked.");
@@ -551,7 +552,8 @@ - (void)updateTableContents
                                         cell.accessoryMessage =
                                             [weakSelf.delegate accessoryMessageForSignalAccount:signalAccount];
                                     }
-                                    [cell configureWithRecipientId:signalAccount.recipientId];
+                                    [cell configureWithRecipientId:signalAccount.recipientAddress
+                                                                       .transitional_phoneNumber];
 
                                     if (![weakSelf.delegate canSignalAccountBeSelected:signalAccount]) {
                                         cell.selectionStyle = UITableViewCellSelectionStyleNone;
diff --git a/SignalMessaging/ViewControllers/SelectThreadViewController.m b/SignalMessaging/ViewControllers/SelectThreadViewController.m
index 41d8da3e00c..d19a0595c9e 100644
--- a/SignalMessaging/ViewControllers/SelectThreadViewController.m
+++ b/SignalMessaging/ViewControllers/SelectThreadViewController.m
@@ -273,12 +273,12 @@ - (void)updateTableContents
                             OWSCAssertDebug(strongSelf);
 
                             ContactTableViewCell *cell = [ContactTableViewCell new];
-                            BOOL isBlocked = [helper isRecipientIdBlocked:signalAccount.recipientId];
+                            BOOL isBlocked = [helper isSignalServiceAddressBlocked:signalAccount.recipientAddress];
                             if (isBlocked) {
                                 cell.accessoryMessage = NSLocalizedString(
                                     @"CONTACT_CELL_IS_BLOCKED", @"An indicator that a contact has been blocked.");
                             }
-                            [cell configureWithRecipientId:signalAccount.recipientId];
+                            [cell configureWithRecipientId:signalAccount.recipientAddress.transitional_phoneNumber];
                             return cell;
                         }
                         customRowHeight:UITableViewAutomaticDimension
@@ -310,7 +310,7 @@ - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
 
     ContactsViewHelper *helper = self.contactsViewHelper;
 
-    if ([helper isRecipientIdBlocked:signalAccount.recipientId]
+    if ([helper isSignalServiceAddressBlocked:signalAccount.recipientAddress]
         && ![self.selectThreadViewDelegate canSelectBlockedContact]) {
 
         __weak SelectThreadViewController *weakSelf = self;
@@ -328,7 +328,8 @@ - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
 
     __block TSThread *thread = nil;
     [OWSPrimaryStorage.dbReadWriteConnection readWriteWithBlock:^(YapDatabaseReadWriteTransaction *transaction) {
-        thread = [TSContactThread getOrCreateThreadWithContactId:signalAccount.recipientId transaction:transaction];
+        thread = [TSContactThread getOrCreateThreadWithContactId:signalAccount.recipientAddress.transitional_phoneNumber
+                                                     transaction:transaction];
     }];
     OWSAssertDebug(thread);
 
@@ -364,7 +365,7 @@ - (void)signalAccountWasSelected:(SignalAccount *)signalAccount
     return [matchingAccounts
         filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(SignalAccount *signalAccount,
                                         NSDictionary<NSString *, id> *_Nullable bindings) {
-            return ![contactIdsToIgnore containsObject:signalAccount.recipientId];
+            return ![contactIdsToIgnore containsObject:signalAccount.recipientAddress.transitional_phoneNumber];
         }]];
 }
 
@@ -406,7 +407,8 @@ - (BOOL)shouldHideLocalNumber
 
 - (void)recipientIdWasSelected:(NSString *)recipientId
 {
-    SignalAccount *signalAccount = [self.contactsViewHelper fetchOrBuildSignalAccountForRecipientId:recipientId];
+    SignalAccount *signalAccount = [self.contactsViewHelper
+        fetchOrBuildSignalAccountForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
     [self signalAccountWasSelected:signalAccount];
 }
 
diff --git a/SignalMessaging/ViewControllers/SharingThreadPickerViewController.m b/SignalMessaging/ViewControllers/SharingThreadPickerViewController.m
index 26175616377..17d869e16b4 100644
--- a/SignalMessaging/ViewControllers/SharingThreadPickerViewController.m
+++ b/SignalMessaging/ViewControllers/SharingThreadPickerViewController.m
@@ -235,7 +235,8 @@ - (void)showContactShareApproval:(SignalAttachment *)attachment
         if (avatarImageData) {
             break;
         }
-        avatarImageData = [self.contactsManager profileImageDataForPhoneIdentifier:recipientId];
+        avatarImageData = [self.contactsManager
+            profileImageDataForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
         if (avatarImageData) {
             isProfileAvatar = YES;
         }
@@ -481,7 +482,8 @@ - (void)showSendFailureAlertWithError:(NSError *)error
         NSString *failureFormat = NSLocalizedString(@"SHARE_EXTENSION_FAILED_SENDING_BECAUSE_UNTRUSTED_IDENTITY_FORMAT",
             @"alert body when sharing file failed because of untrusted/changed identity keys");
 
-        NSString *displayName = [self.contactsManager displayNameForPhoneIdentifier:untrustedRecipientId];
+        NSString *displayName = [self.contactsManager
+            displayNameForSignalServiceAddress:untrustedRecipientId.transitional_signalServiceAddress];
         NSString *failureMessage = [NSString stringWithFormat:failureFormat, displayName];
 
         UIAlertController *failureAlert = [UIAlertController alertControllerWithTitle:failureTitle
diff --git a/SignalMessaging/ViewModels/ThreadViewModel.swift b/SignalMessaging/ViewModels/ThreadViewModel.swift
index 0a15c931921..f20424a099c 100644
--- a/SignalMessaging/ViewModels/ThreadViewModel.swift
+++ b/SignalMessaging/ViewModels/ThreadViewModel.swift
@@ -12,6 +12,7 @@ public class ThreadViewModel: NSObject {
     @objc public let threadRecord: TSThread
     @objc public let unreadCount: UInt
     @objc public let contactIdentifier: String?
+    @objc public let contactAddress: SignalServiceAddress?
     @objc public let name: String
     @objc public let isMuted: Bool
 
@@ -36,8 +37,10 @@ public class ThreadViewModel: NSObject {
 
         if let contactThread = thread as? TSContactThread {
             self.contactIdentifier = contactThread.contactIdentifier()
+            self.contactAddress = contactThread.contactAddress()
         } else {
             self.contactIdentifier = nil
+            self.contactAddress = nil
         }
 
         if let threadUniqueId = thread.uniqueId,
diff --git a/SignalMessaging/Views/ContactCellView.m b/SignalMessaging/Views/ContactCellView.m
index 4421d76883b..8236586dff8 100644
--- a/SignalMessaging/Views/ContactCellView.m
+++ b/SignalMessaging/Views/ContactCellView.m
@@ -149,7 +149,8 @@ - (void)configureWithRecipientId:(NSString *)recipientId
                 }];
     } else {
         self.nameLabel.attributedText =
-            [self.contactsManager formattedFullNameForRecipientId:recipientId font:self.nameLabel.font];
+            [self.contactsManager formattedFullNameForSignalServiceAddress:recipientId.transitional_signalServiceAddress
+                                                                      font:self.nameLabel.font];
     }
 
     [[NSNotificationCenter defaultCenter] addObserver:self
@@ -253,12 +254,14 @@ - (void)updateProfileName
         return;
     }
 
-    if ([contactsManager hasNameInSystemContactsForRecipientId:recipientId]) {
+    if ([contactsManager
+            hasNameInSystemContactsForSignalServiceAddress:recipientId.transitional_signalServiceAddress]) {
         // Don't display profile name when we have a veritas name in system Contacts
         self.profileNameLabel.text = nil;
     } else {
         // Use profile name, if any is available
-        self.profileNameLabel.text = [contactsManager formattedProfileNameForRecipientId:recipientId];
+        self.profileNameLabel.text =
+            [contactsManager formattedProfileNameForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
     }
 
     [self.profileNameLabel setNeedsLayout];
diff --git a/SignalMessaging/Views/ContactsViewHelper.h b/SignalMessaging/Views/ContactsViewHelper.h
index c4b73cb695a..b07d0a9c9a8 100644
--- a/SignalMessaging/Views/ContactsViewHelper.h
+++ b/SignalMessaging/Views/ContactsViewHelper.h
@@ -32,6 +32,7 @@ NS_ASSUME_NONNULL_BEGIN
 @class CNContact;
 @class OWSBlockingManager;
 @class OWSContactsManager;
+@class SignalServiceAddress;
 
 @interface ContactsViewHelper : NSObject
 
@@ -40,7 +41,6 @@ NS_ASSUME_NONNULL_BEGIN
 @property (nonatomic, readonly) OWSContactsManager *contactsManager;
 @property (nonatomic, readonly) OWSBlockingManager *blockingManager;
 
-@property (nonatomic, readonly) NSDictionary<NSString *, SignalAccount *> *signalAccountMap;
 @property (nonatomic, readonly) NSArray<SignalAccount *> *signalAccounts;
 
 // Useful to differentiate between having no signal accounts vs. haven't checked yet
@@ -54,12 +54,12 @@ NS_ASSUME_NONNULL_BEGIN
 
 - (instancetype)initWithDelegate:(id<ContactsViewHelperDelegate>)delegate;
 
-- (nullable SignalAccount *)fetchSignalAccountForRecipientId:(NSString *)recipientId;
-- (SignalAccount *)fetchOrBuildSignalAccountForRecipientId:(NSString *)recipientId;
+- (nullable SignalAccount *)fetchSignalAccountForSignalServiceAddress:(SignalServiceAddress *)address;
+- (SignalAccount *)fetchOrBuildSignalAccountForSignalServiceAddress:(SignalServiceAddress *)address;
 
 // This method is faster than OWSBlockingManager but
 // is only safe to be called on the main thread.
-- (BOOL)isRecipientIdBlocked:(NSString *)recipientId;
+- (BOOL)isSignalServiceAddressBlocked:(SignalServiceAddress *)address;
 
 // This method is faster than OWSBlockingManager but
 // is only safe to be called on the main thread.
diff --git a/SignalMessaging/Views/ContactsViewHelper.m b/SignalMessaging/Views/ContactsViewHelper.m
index 6743a2c4fb4..78d657eb403 100644
--- a/SignalMessaging/Views/ContactsViewHelper.m
+++ b/SignalMessaging/Views/ContactsViewHelper.m
@@ -90,20 +90,20 @@ - (void)signalAccountsDidChange:(NSNotification *)notification
 
 #pragma mark - Contacts
 
-- (nullable SignalAccount *)fetchSignalAccountForRecipientId:(NSString *)recipientId
+- (nullable SignalAccount *)fetchSignalAccountForSignalServiceAddress:(SignalServiceAddress *)address
 {
     OWSAssertIsOnMainThread();
-    OWSAssertDebug(recipientId.length > 0);
+    OWSAssertDebug(address);
 
-    return self.signalAccountMap[recipientId];
+    return self.signalAccountMap[address.stringIdentifier];
 }
 
-- (SignalAccount *)fetchOrBuildSignalAccountForRecipientId:(NSString *)recipientId
+- (SignalAccount *)fetchOrBuildSignalAccountForSignalServiceAddress:(SignalServiceAddress *)address
 {
-    OWSAssertDebug(recipientId.length > 0);
+    OWSAssertDebug(address);
 
-    SignalAccount *_Nullable signalAccount = [self fetchSignalAccountForRecipientId:recipientId];
-    return (signalAccount ?: [[SignalAccount alloc] initWithRecipientId:recipientId]);
+    SignalAccount *_Nullable signalAccount = [self fetchSignalAccountForSignalServiceAddress:address];
+    return (signalAccount ?: [[SignalAccount alloc] initWithSignalServiceAddress:address]);
 }
 
 - (BOOL)isSignalAccountHidden:(SignalAccount *)signalAccount
@@ -124,7 +124,7 @@ - (BOOL)isCurrentUser:(SignalAccount *)signalAccount
     OWSAssertIsOnMainThread();
 
     NSString *localNumber = [TSAccountManager localNumber];
-    if ([signalAccount.recipientId isEqualToString:localNumber]) {
+    if ([signalAccount.recipientAddress.transitional_phoneNumber isEqualToString:localNumber]) {
         return YES;
     }
 
@@ -142,11 +142,11 @@ - (NSString *)localNumber
     return [TSAccountManager localNumber];
 }
 
-- (BOOL)isRecipientIdBlocked:(NSString *)recipientId
+- (BOOL)isSignalServiceAddressBlocked:(SignalServiceAddress *)address
 {
     OWSAssertIsOnMainThread();
 
-    return [self.blockListCache isRecipientIdBlocked:recipientId];
+    return [self.blockListCache isRecipientIdBlocked:address.transitional_phoneNumber];
 }
 
 - (BOOL)isGroupIdBlocked:(NSData *)groupId
@@ -160,7 +160,7 @@ - (BOOL)isThreadBlocked:(TSThread *)thread
 {
     if ([thread isKindOfClass:[TSContactThread class]]) {
         TSContactThread *contactThread = (TSContactThread *)thread;
-        return [self isRecipientIdBlocked:contactThread.contactIdentifier];
+        return [self isSignalServiceAddressBlocked:contactThread.contactAddress];
     } else if ([thread isKindOfClass:[TSGroupThread class]]) {
         TSGroupThread *groupThread = (TSGroupThread *)thread;
         return [self isGroupIdBlocked:groupThread.groupModel.groupId];
@@ -178,7 +178,12 @@ - (void)updateContacts
     NSMutableArray<SignalAccount *> *signalAccounts = [NSMutableArray new];
     for (SignalAccount *signalAccount in self.contactsManager.signalAccounts) {
         if (![self isSignalAccountHidden:signalAccount]) {
-            signalAccountMap[signalAccount.recipientId] = signalAccount;
+            if (signalAccount.recipientPhoneNumber) {
+                signalAccountMap[signalAccount.recipientPhoneNumber] = signalAccount;
+            }
+            if (signalAccount.recipientUUID) {
+                signalAccountMap[signalAccount.recipientUUID] = signalAccount;
+            }
             [signalAccounts addObject:signalAccount];
         }
     }
@@ -207,7 +212,8 @@ - (void)updateContacts
 {
     // Check for matches against "Note to Self".
     NSMutableArray<SignalAccount *> *signalAccountsToSearch = [self.signalAccounts mutableCopy];
-    SignalAccount *selfAccount = [[SignalAccount alloc] initWithRecipientId:self.localNumber];
+    SignalAccount *selfAccount =
+        [[SignalAccount alloc] initWithSignalServiceAddress:self.localNumber.transitional_signalServiceAddress];
     [signalAccountsToSearch addObject:selfAccount];
     return [self.fullTextSearcher filterSignalAccounts:signalAccountsToSearch withSearchText:searchText];
 }
@@ -360,7 +366,8 @@ - (void)presentContactViewControllerForRecipientId:(NSString *)recipientId
                                    editImmediately:(BOOL)shouldEditImmediately
                             addToExistingCnContact:(CNContact *_Nullable)existingContact
 {
-    SignalAccount *signalAccount = [self fetchSignalAccountForRecipientId:recipientId];
+    SignalAccount *signalAccount =
+        [self fetchSignalAccountForSignalServiceAddress:recipientId.transitional_signalServiceAddress];
 
     if (!self.contactsManager.supportsContactEditing) {
         // Should not expose UI that lets the user get here.
diff --git a/SignalMessaging/utils/BlockListUIUtils.m b/SignalMessaging/utils/BlockListUIUtils.m
index 8541fac45c7..4d8ac183b3e 100644
--- a/SignalMessaging/utils/BlockListUIUtils.m
+++ b/SignalMessaging/utils/BlockListUIUtils.m
@@ -52,7 +52,8 @@ + (void)showBlockPhoneNumberActionSheet:(NSString *)phoneNumber
                         contactsManager:(OWSContactsManager *)contactsManager
                         completionBlock:(nullable BlockActionCompletionBlock)completionBlock
 {
-    NSString *displayName = [contactsManager displayNameForPhoneIdentifier:phoneNumber];
+    NSString *displayName =
+        [contactsManager displayNameForSignalServiceAddress:phoneNumber.transitional_signalServiceAddress];
     [self showBlockPhoneNumbersActionSheet:@[ phoneNumber ]
                                displayName:displayName
                         fromViewController:fromViewController
@@ -67,7 +68,7 @@ + (void)showBlockSignalAccountActionSheet:(SignalAccount *)signalAccount
                           completionBlock:(nullable BlockActionCompletionBlock)completionBlock
 {
     NSString *displayName = [contactsManager displayNameForSignalAccount:signalAccount];
-    [self showBlockPhoneNumbersActionSheet:@[ signalAccount.recipientId ]
+    [self showBlockPhoneNumbersActionSheet:@[ signalAccount.recipientAddress.transitional_phoneNumber ]
                                displayName:displayName
                         fromViewController:fromViewController
                            blockingManager:blockingManager
@@ -291,7 +292,8 @@ + (void)showUnblockPhoneNumberActionSheet:(NSString *)phoneNumber
                           contactsManager:(OWSContactsManager *)contactsManager
                           completionBlock:(nullable BlockActionCompletionBlock)completionBlock
 {
-    NSString *displayName = [contactsManager displayNameForPhoneIdentifier:phoneNumber];
+    NSString *displayName =
+        [contactsManager displayNameForSignalServiceAddress:phoneNumber.transitional_signalServiceAddress];
     [self showUnblockPhoneNumbersActionSheet:@[ phoneNumber ]
                                  displayName:displayName
                           fromViewController:fromViewController
@@ -306,7 +308,7 @@ + (void)showUnblockSignalAccountActionSheet:(SignalAccount *)signalAccount
                             completionBlock:(nullable BlockActionCompletionBlock)completionBlock
 {
     NSString *displayName = [contactsManager displayNameForSignalAccount:signalAccount];
-    [self showUnblockPhoneNumbersActionSheet:@[ signalAccount.recipientId ]
+    [self showUnblockPhoneNumbersActionSheet:@[ signalAccount.recipientAddress.transitional_phoneNumber ]
                                  displayName:displayName
                           fromViewController:fromViewController
                              blockingManager:blockingManager
diff --git a/SignalMessaging/utils/FullTextSearcher.swift b/SignalMessaging/utils/FullTextSearcher.swift
index b3f31088fd2..1b16689c80f 100644
--- a/SignalMessaging/utils/FullTextSearcher.swift
+++ b/SignalMessaging/utils/FullTextSearcher.swift
@@ -58,7 +58,7 @@ public class ContactSearchResult: NSObject, Comparable {
     public let contactsManager: ContactsManagerProtocol
 
     public var recipientId: String {
-        return signalAccount.recipientId
+        return signalAccount.recipientAddress.transitional_phoneNumber
     }
 
     init(signalAccount: SignalAccount, contactsManager: ContactsManagerProtocol) {
@@ -421,7 +421,7 @@ public class FullTextSearcher: NSObject {
     }
 
     private lazy var signalAccountSearcher: Searcher<SignalAccount> = Searcher { (signalAccount: SignalAccount) in
-        let recipientId = signalAccount.recipientId
+        let recipientId = signalAccount.recipientAddress.transitional_phoneNumber!
         return self.conversationIndexingString(recipientId: recipientId)
     }
 
@@ -443,8 +443,8 @@ public class FullTextSearcher: NSObject {
     }
 
     private func indexingString(recipientId: String) -> String {
-        let contactName = contactsManager.displayName(forPhoneIdentifier: recipientId)
-        let profileName = contactsManager.profileName(forRecipientId: recipientId)
+        let contactName = contactsManager.displayName(for: recipientId.transitional_signalServiceAddress)
+        let profileName = contactsManager.profileName(for: recipientId.transitional_signalServiceAddress)
 
         return "\(recipientId) \(contactName) \(profileName ?? "")"
     }
diff --git a/SignalMessaging/utils/OWSContactAvatarBuilder.m b/SignalMessaging/utils/OWSContactAvatarBuilder.m
index beedd12fca0..3e4e0febb69 100644
--- a/SignalMessaging/utils/OWSContactAvatarBuilder.m
+++ b/SignalMessaging/utils/OWSContactAvatarBuilder.m
@@ -52,9 +52,11 @@ - (instancetype)initWithSignalId:(NSString *)signalId
                         diameter:(NSUInteger)diameter
 {
     // Name for avatar initials.
-    NSString *_Nullable name = [OWSContactAvatarBuilder.contactsManager nameFromSystemContactsForRecipientId:signalId];
+    NSString *_Nullable name = [OWSContactAvatarBuilder.contactsManager
+        nameFromSystemContactsForSignalServiceAddress:signalId.transitional_signalServiceAddress];
     if (name.length == 0) {
-        name = [OWSContactAvatarBuilder.contactsManager profileNameForRecipientId:signalId];
+        name = [OWSContactAvatarBuilder.contactsManager
+            profileNameForSignalServiceAddress:signalId.transitional_signalServiceAddress];
     }
     if (name.length == 0) {
         name = signalId;
@@ -111,7 +113,8 @@ - (nullable UIImage *)buildSavedImage
         return image;
     }
 
-    return [OWSContactAvatarBuilder.contactsManager imageForPhoneIdentifier:self.signalId];
+    return [OWSContactAvatarBuilder.contactsManager
+        imageForSignalServiceAddress:self.signalId.transitional_signalServiceAddress];
 }
 
 - (id)cacheKey
diff --git a/SignalServiceKit/src/Contacts/SignalAccount.m b/SignalServiceKit/src/Contacts/SignalAccount.m
index 4b6082412ba..abc3a804102 100644
--- a/SignalServiceKit/src/Contacts/SignalAccount.m
+++ b/SignalServiceKit/src/Contacts/SignalAccount.m
@@ -24,7 +24,7 @@ @implementation SignalAccount
 - (instancetype)initWithSignalRecipient:(SignalRecipient *)signalRecipient
 {
     OWSAssertDebug(signalRecipient);
-    return [self initWithRecipientId:signalRecipient.recipientId];
+    return [self initWithSignalServiceAddress:signalRecipient.recipientId.transitional_signalServiceAddress];
 }
 
 - (instancetype)initWithSignalServiceAddress:(SignalServiceAddress *)serviceAddress
@@ -115,6 +115,7 @@ - (SignalServiceAddress *)recipientAddress
         return [[SignalServiceAddress alloc] initWithPhoneNumber:self.recipientPhoneNumber];
     } else {
         OWSFail(@"unexpectedly have no address for SignalAccount, this should never happen.");
+        return nil;
     }
 }
 
diff --git a/SignalServiceKit/src/Contacts/TSThread.h b/SignalServiceKit/src/Contacts/TSThread.h
index 20f6d8b875d..03cd46eee9f 100644
--- a/SignalServiceKit/src/Contacts/TSThread.h
+++ b/SignalServiceKit/src/Contacts/TSThread.h
@@ -11,6 +11,7 @@ BOOL IsNoteToSelfEnabled(void);
 @class OWSDisappearingMessagesConfiguration;
 @class SDSAnyReadTransaction;
 @class SDSAnyWriteTransaction;
+@class SignalServiceAddress;
 @class TSInteraction;
 @class TSInvalidIdentityKeyReceivingErrorMessage;
 
@@ -89,6 +90,8 @@ NS_SWIFT_NAME(init(uniqueId:archivalDate:archivedAsOfMessageSortId:conversationC
  */
 - (nullable NSString *)contactIdentifier;
 
+- (nullable SignalServiceAddress *)contactAddress;
+
 /**
  * @returns recipientId for each recipient in the thread
  */
diff --git a/SignalServiceKit/src/Contacts/TSThread.m b/SignalServiceKit/src/Contacts/TSThread.m
index 50c267d4d6d..b87bdb805c4 100644
--- a/SignalServiceKit/src/Contacts/TSThread.m
+++ b/SignalServiceKit/src/Contacts/TSThread.m
@@ -267,6 +267,11 @@ - (nullable NSString *)contactIdentifier
     return nil;
 }
 
+- (nullable SignalServiceAddress *)contactAddress
+{
+    return nil;
+}
+
 - (NSString *)name {
     OWSAbstractMethod();
 
diff --git a/SignalServiceKit/src/Contacts/Threads/TSContactThread.m b/SignalServiceKit/src/Contacts/Threads/TSContactThread.m
index 4822e547aa1..00fb61f9903 100644
--- a/SignalServiceKit/src/Contacts/Threads/TSContactThread.m
+++ b/SignalServiceKit/src/Contacts/Threads/TSContactThread.m
@@ -152,7 +152,8 @@ - (BOOL)hasSafetyNumbers
 // TODO deprecate this? seems weird to access the displayName in the DB model
 - (NSString *)name
 {
-    return [SSKEnvironment.shared.contactsManager displayNameForPhoneIdentifier:self.contactIdentifier];
+    return [SSKEnvironment.shared.contactsManager
+        displayNameForSignalServiceAddress:self.contactIdentifier.transitional_signalServiceAddress];
 }
 
 + (NSString *)threadIdFromContactId:(NSString *)contactId {
diff --git a/SignalServiceKit/src/Devices/OWSContactsOutputStream.m b/SignalServiceKit/src/Devices/OWSContactsOutputStream.m
index 9bc307f0e9c..fe07cb37632 100644
--- a/SignalServiceKit/src/Devices/OWSContactsOutputStream.m
+++ b/SignalServiceKit/src/Devices/OWSContactsOutputStream.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
 //
 
 #import "OWSContactsOutputStream.h"
@@ -32,7 +32,7 @@ - (void)writeSignalAccount:(SignalAccount *)signalAccount
     OWSAssertDebug(contactsManager);
 
     SSKProtoContactDetailsBuilder *contactBuilder =
-        [SSKProtoContactDetails builderWithNumber:signalAccount.recipientId];
+        [SSKProtoContactDetails builderWithNumber:signalAccount.recipientAddress.transitional_phoneNumber];
     [contactBuilder setName:signalAccount.contact.fullName];
     [contactBuilder setColor:conversationColorName];
 
@@ -81,7 +81,8 @@ - (void)writeSignalAccount:(SignalAccount *)signalAccount
         [contactBuilder setExpireTimer:disappearingMessagesConfiguration.durationSeconds];
     }
 
-    if ([OWSBlockingManager.sharedManager isRecipientIdBlocked:signalAccount.recipientId]) {
+    if ([OWSBlockingManager.sharedManager
+            isRecipientIdBlocked:signalAccount.recipientAddress.transitional_phoneNumber]) {
         [contactBuilder setBlocked:YES];
     }
 
diff --git a/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncContactsMessage.m b/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncContactsMessage.m
index 3aa0b9884b3..f9acbec0385 100644
--- a/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncContactsMessage.m
+++ b/SignalServiceKit/src/Messages/DeviceSyncing/OWSSyncContactsMessage.m
@@ -100,10 +100,11 @@ - (nullable NSData *)buildPlainTextAttachmentDataWithTransaction:(YapDatabaseRea
     if (localNumber) {
         BOOL hasLocalNumber = NO;
         for (SignalAccount *signalAccount in signalAccounts) {
-            hasLocalNumber |= [signalAccount.recipientId isEqualToString:localNumber];
+            hasLocalNumber |= [signalAccount.recipientAddress.transitional_phoneNumber isEqualToString:localNumber];
         }
         if (!hasLocalNumber) {
-            SignalAccount *signalAccount = [[SignalAccount alloc] initWithRecipientId:localNumber];
+            SignalServiceAddress *address = [[SignalServiceAddress alloc] initWithPhoneNumber:localNumber];
+            SignalAccount *signalAccount = [[SignalAccount alloc] initWithSignalServiceAddress:address];
             // OWSContactsOutputStream requires all signalAccount to have a contact.
             signalAccount.contact = [[Contact alloc] initWithSystemContact:[CNContact new]];
             [signalAccounts addObject:signalAccount];
@@ -119,19 +120,23 @@ - (nullable NSData *)buildPlainTextAttachmentDataWithTransaction:(YapDatabaseRea
         [[OWSContactsOutputStream alloc] initWithOutputStream:dataOutputStream];
 
     for (SignalAccount *signalAccount in signalAccounts) {
-        OWSRecipientIdentity *_Nullable recipientIdentity =
-            [self.identityManager recipientIdentityForRecipientId:signalAccount.recipientId];
-        NSData *_Nullable profileKeyData = [self.profileManager profileKeyDataForRecipientId:signalAccount.recipientId];
+        OWSRecipientIdentity *_Nullable recipientIdentity = [self.identityManager
+            recipientIdentityForRecipientId:signalAccount.recipientAddress.transitional_phoneNumber];
+        NSData *_Nullable profileKeyData =
+            [self.profileManager profileKeyDataForRecipientId:signalAccount.recipientAddress.transitional_phoneNumber];
 
         OWSDisappearingMessagesConfiguration *_Nullable disappearingMessagesConfiguration;
         NSString *conversationColorName;
-        
-        TSContactThread *_Nullable contactThread = [TSContactThread getThreadWithContactId:signalAccount.recipientId transaction:transaction];
+
+        TSContactThread *_Nullable contactThread =
+            [TSContactThread getThreadWithContactId:signalAccount.recipientAddress.transitional_phoneNumber
+                                        transaction:transaction];
         if (contactThread) {
             conversationColorName = contactThread.conversationColorName;
             disappearingMessagesConfiguration = [contactThread disappearingMessagesConfigurationWithTransaction:transaction];
         } else {
-            conversationColorName = [TSThread stableColorNameForNewConversationWithString:signalAccount.recipientId];
+            conversationColorName = [TSThread
+                stableColorNameForNewConversationWithString:signalAccount.recipientAddress.transitional_phoneNumber];
         }
 
         [contactsOutputStream writeSignalAccount:signalAccount
diff --git a/SignalServiceKit/src/Messages/Interactions/TSErrorMessage.m b/SignalServiceKit/src/Messages/Interactions/TSErrorMessage.m
index 408a609ca68..79bc86c9028 100644
--- a/SignalServiceKit/src/Messages/Interactions/TSErrorMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/TSErrorMessage.m
@@ -190,8 +190,8 @@ - (NSString *)previewTextWithTransaction:(SDSAnyReadTransaction *)transaction
                         @"Shown when signal users safety numbers changed, embeds the user's {{name or phone number}}");
 
                     NSString *recipientDisplayName = [SSKEnvironment.shared.contactsManager
-                        displayNameForPhoneIdentifier:self.recipientId
-                                          transaction:transaction.transitional_yapReadTransaction];
+                        displayNameForSignalServiceAddress:self.recipientId.transitional_signalServiceAddress
+                                               transaction:transaction.transitional_yapReadTransaction];
                     return [NSString stringWithFormat:messageFormat, recipientDisplayName];
                 }
             } else {
diff --git a/SignalServiceKit/src/Messages/Interactions/TSInfoMessage.m b/SignalServiceKit/src/Messages/Interactions/TSInfoMessage.m
index e3d5838ed08..b462b2420ac 100644
--- a/SignalServiceKit/src/Messages/Interactions/TSInfoMessage.m
+++ b/SignalServiceKit/src/Messages/Interactions/TSInfoMessage.m
@@ -204,8 +204,9 @@ - (NSString *)previewTextWithTransaction:(SDSAnyReadTransaction *)transaction
                 NSString *recipientName;
                 if (transaction.transitional_yapReadTransaction != nil) {
                     recipientName = [self.contactsManager
-                        displayNameForPhoneIdentifier:self.unregisteredRecipientId
-                                          transaction:transaction.transitional_yapReadTransaction];
+                        displayNameForSignalServiceAddress:self.unregisteredRecipientId
+                                                               .transitional_signalServiceAddress
+                                               transaction:transaction.transitional_yapReadTransaction];
                 }
                 return [NSString stringWithFormat:NSLocalizedString(@"ERROR_UNREGISTERED_USER_FORMAT",
                                                       @"Format string for 'unregistered user' error. Embeds {{the "
@@ -238,9 +239,9 @@ - (NSString *)previewTextWithTransaction:(SDSAnyReadTransaction *)transaction
             NSString *recipientName;
             if (transaction.transitional_yapReadTransaction != nil) {
                 NSString *contactId = [TSContactThread contactIdFromThreadId:self.uniqueThreadId];
-                recipientName =
-                    [self.contactsManager displayNameForPhoneIdentifier:contactId
-                                                            transaction:transaction.transitional_yapReadTransaction];
+                recipientName = [self.contactsManager
+                    displayNameForSignalServiceAddress:contactId.transitional_signalServiceAddress
+                                           transaction:transaction.transitional_yapReadTransaction];
             }
             NSString *format = NSLocalizedString(@"INFO_MESSAGE_USER_JOINED_SIGNAL_BODY_FORMAT",
                 @"Shown in inbox and conversation when a user joins Signal, embeds the new user's {{contact name}}");
diff --git a/SignalServiceKit/src/Messages/OWSDisappearingMessagesJob.m b/SignalServiceKit/src/Messages/OWSDisappearingMessagesJob.m
index 961cb0e5e4b..eb939d58263 100644
--- a/SignalServiceKit/src/Messages/OWSDisappearingMessagesJob.m
+++ b/SignalServiceKit/src/Messages/OWSDisappearingMessagesJob.m
@@ -216,8 +216,9 @@ - (void)becomeConsistentWithDisappearingDuration:(uint32_t)duration
 
     NSString *_Nullable remoteContactName = nil;
     if (remoteRecipientId) {
-        remoteContactName = [self.contactsManager displayNameForPhoneIdentifier:remoteRecipientId
-                                                                    transaction:transaction];
+        remoteContactName =
+            [self.contactsManager displayNameForSignalServiceAddress:remoteRecipientId.transitional_signalServiceAddress
+                                                         transaction:transaction];
     }
 
     // Become eventually consistent in the case that the remote changed their settings at the same time.
diff --git a/SignalServiceKit/src/Messages/OWSMessageManager.m b/SignalServiceKit/src/Messages/OWSMessageManager.m
index f0b5b5636bb..e03505057bd 100644
--- a/SignalServiceKit/src/Messages/OWSMessageManager.m
+++ b/SignalServiceKit/src/Messages/OWSMessageManager.m
@@ -1079,8 +1079,9 @@ - (void)handleExpirationTimerUpdateMessageWithEnvelope:(SSKProtoEnvelope *)envel
     }
     OWSAssertDebug(disappearingMessagesConfiguration);
     [disappearingMessagesConfiguration anyInsertWithTransaction:transaction];
-    NSString *name = [self.contactsManager displayNameForPhoneIdentifier:envelope.sourceE164
-                                                             transaction:transaction.transitional_yapWriteTransaction];
+    NSString *name =
+        [self.contactsManager displayNameForSignalServiceAddress:envelope.sourceE164.transitional_signalServiceAddress
+                                                     transaction:transaction.transitional_yapWriteTransaction];
 
     // MJK TODO - safe to remove senderTimestamp
     OWSDisappearingConfigurationUpdateInfoMessage *message =
@@ -1343,9 +1344,8 @@ - (TSIncomingMessage *_Nullable)handleReceivedEnvelope:(SSKProtoEnvelope *)envel
                                                            [newMemberIds.allObjects mutableCopy];
                                                    }];
 
-                NSString *nameString =
-                    [self.contactsManager displayNameForPhoneIdentifier:envelope.sourceE164
-                                                            transaction:transaction.transitional_yapWriteTransaction];
+                NSString *nameString = [self.contactsManager
+                                            displayNameForSignalServiceAddress:envelope.sourceE164.transitional_signalServiceAddress];
                 NSString *updateGroupInfo =
                     [NSString stringWithFormat:NSLocalizedString(@"GROUP_MEMBER_LEFT", @""), nameString];
                 // MJK TODO - should be safe to remove senderTimestamp
diff --git a/SignalServiceKit/src/Messages/OWSMessageSender.m b/SignalServiceKit/src/Messages/OWSMessageSender.m
index 9b386e32309..d28b29d8d0c 100644
--- a/SignalServiceKit/src/Messages/OWSMessageSender.m
+++ b/SignalServiceKit/src/Messages/OWSMessageSender.m
@@ -895,9 +895,10 @@ - (void)unregisteredRecipient:(SignalRecipient *)recipient
                 = NSLocalizedString(@"FAILED_SENDING_BECAUSE_UNTRUSTED_IDENTITY_KEY",
                     @"action sheet header when re-sending message which failed because of untrusted identity keys");
 
-            NSString *localizedErrorDescription =
-                [NSString stringWithFormat:localizedErrorDescriptionFormat,
-                          [self.contactsManager displayNameForPhoneIdentifier:recipient.recipientId]];
+            NSString *localizedErrorDescription = [NSString
+                stringWithFormat:localizedErrorDescriptionFormat,
+                [self.contactsManager
+                    displayNameForSignalServiceAddress:recipient.recipientId.transitional_signalServiceAddress]];
             NSError *error = OWSErrorMakeUntrustedIdentityError(localizedErrorDescription, recipient.recipientId);
 
             // Key will continue to be unaccepted, so no need to retry. It'll only cause us to hit the Pre-Key request
diff --git a/SignalServiceKit/src/Messages/OWSUnknownProtocolVersionMessage.m b/SignalServiceKit/src/Messages/OWSUnknownProtocolVersionMessage.m
index 95b80ebce52..c6997b95c58 100644
--- a/SignalServiceKit/src/Messages/OWSUnknownProtocolVersionMessage.m
+++ b/SignalServiceKit/src/Messages/OWSUnknownProtocolVersionMessage.m
@@ -138,8 +138,9 @@ - (NSString *)messageTextWithTransaction:(SDSAnyReadTransaction *)transaction
 
     NSString *senderName = nil;
     if (transaction.transitional_yapReadTransaction) {
-        senderName = [self.contactsManager displayNameForPhoneIdentifier:self.senderId
-                                                             transaction:transaction.transitional_yapReadTransaction];
+        senderName =
+            [self.contactsManager displayNameForSignalServiceAddress:self.senderId.transitional_signalServiceAddress
+                                                         transaction:transaction.transitional_yapReadTransaction];
     }
 
     if (self.isProtocolVersionUnknown) {
diff --git a/SignalServiceKit/src/Messages/TSGroupModel.m b/SignalServiceKit/src/Messages/TSGroupModel.m
index a490f54cdea..c36f64b66fb 100644
--- a/SignalServiceKit/src/Messages/TSGroupModel.m
+++ b/SignalServiceKit/src/Messages/TSGroupModel.m
@@ -5,6 +5,7 @@
 #import "TSGroupModel.h"
 #import "FunctionalUtil.h"
 #import "NSString+SSK.h"
+#import <SignalServiceKit/SignalServiceKit-Swift.h>
 
 NS_ASSUME_NONNULL_BEGIN
 
@@ -138,8 +139,8 @@ - (NSString *)getInfoStringAboutUpdateTo:(TSGroupModel *)newModel contactsManage
 
 
     if ([membersWhoLeft count] > 0) {
-        NSArray *oldMembersNames = [[membersWhoLeft allObjects] map:^NSString*(NSString* item) {
-            return [contactsManager displayNameForPhoneIdentifier:item];
+        NSArray *oldMembersNames = [[membersWhoLeft allObjects] map:^NSString *(NSString *item) {
+            return [contactsManager displayNameForSignalServiceAddress:item.transitional_signalServiceAddress];
         }];
         updatedGroupInfoString = [updatedGroupInfoString
                                   stringByAppendingString:[NSString
@@ -148,8 +149,8 @@ - (NSString *)getInfoStringAboutUpdateTo:(TSGroupModel *)newModel contactsManage
     }
     
     if ([membersWhoJoined count] > 0) {
-        NSArray *newMembersNames = [[membersWhoJoined allObjects] map:^NSString*(NSString* item) {
-            return [contactsManager displayNameForPhoneIdentifier:item];
+        NSArray *newMembersNames = [[membersWhoJoined allObjects] map:^NSString *(NSString *item) {
+            return [contactsManager displayNameForSignalServiceAddress:item.transitional_signalServiceAddress];
         }];
         updatedGroupInfoString = [updatedGroupInfoString
                                   stringByAppendingString:[NSString stringWithFormat:NSLocalizedString(@"GROUP_MEMBER_JOINED", @""),
diff --git a/SignalServiceKit/src/Security/OWSFingerprintBuilder.m b/SignalServiceKit/src/Security/OWSFingerprintBuilder.m
index e9fb87947ff..fb395625a76 100644
--- a/SignalServiceKit/src/Security/OWSFingerprintBuilder.m
+++ b/SignalServiceKit/src/Security/OWSFingerprintBuilder.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
 //
 
 #import "OWSFingerprintBuilder.h"
@@ -8,6 +8,7 @@
 #import "OWSIdentityManager.h"
 #import "TSAccountManager.h"
 #import <Curve25519Kit/Curve25519.h>
+#import <SignalServiceKit/SignalServiceKit-Swift.h>
 
 NS_ASSUME_NONNULL_BEGIN
 
@@ -48,7 +49,8 @@ - (nullable OWSFingerprint *)fingerprintWithTheirSignalId:(NSString *)theirSigna
 
 - (OWSFingerprint *)fingerprintWithTheirSignalId:(NSString *)theirSignalId theirIdentityKey:(NSData *)theirIdentityKey
 {
-    NSString *theirName = [self.contactsManager displayNameForPhoneIdentifier:theirSignalId];
+    NSString *theirName =
+        [self.contactsManager displayNameForSignalServiceAddress:theirSignalId.transitional_signalServiceAddress];
 
     NSString *mySignalId = [self.accountManager localNumber];
     NSData *myIdentityKey = [[OWSIdentityManager sharedManager] identityKeyPair].publicKey;
diff --git a/SignalServiceKit/src/Storage/FullTextSearchFinder.swift b/SignalServiceKit/src/Storage/FullTextSearchFinder.swift
index c7a20b42456..035e66d091b 100644
--- a/SignalServiceKit/src/Storage/FullTextSearchFinder.swift
+++ b/SignalServiceKit/src/Storage/FullTextSearchFinder.swift
@@ -184,7 +184,7 @@ public class FullTextSearchFinder: NSObject {
     }
 
     private static let recipientIndexer: SearchIndexer<String> = SearchIndexer { (recipientId: String, transaction: YapDatabaseReadTransaction) in
-        let displayName = contactsManager.displayName(forPhoneIdentifier: recipientId, transaction: transaction)
+        let displayName = contactsManager.displayName(for: recipientId.transitional_signalServiceAddress, transaction: transaction)
 
         let nationalNumber: String = { (recipientId: String) -> String in
 
