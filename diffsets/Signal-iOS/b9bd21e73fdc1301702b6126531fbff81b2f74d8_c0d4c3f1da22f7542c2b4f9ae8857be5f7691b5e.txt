diff --git a/Signal.xcodeproj/project.pbxproj b/Signal.xcodeproj/project.pbxproj
index f4a8f0e06d6..966fe143462 100644
--- a/Signal.xcodeproj/project.pbxproj
+++ b/Signal.xcodeproj/project.pbxproj
@@ -42,6 +42,8 @@
 		344F248720069ECB00CFB4F4 /* ModalActivityIndicatorViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 344F248620069ECB00CFB4F4 /* ModalActivityIndicatorViewController.swift */; };
 		344F248A20069F0600CFB4F4 /* ViewControllerUtils.h in Headers */ = {isa = PBXBuildFile; fileRef = 344F248820069F0600CFB4F4 /* ViewControllerUtils.h */; };
 		344F248B20069F0600CFB4F4 /* ViewControllerUtils.m in Sources */ = {isa = PBXBuildFile; fileRef = 344F248920069F0600CFB4F4 /* ViewControllerUtils.m */; };
+		344F248D2007CCD600CFB4F4 /* DisplayableText.swift in Sources */ = {isa = PBXBuildFile; fileRef = 344F248C2007CCD600CFB4F4 /* DisplayableText.swift */; };
+		344F248F2007D7F200CFB4F4 /* OWSMessagesBubbleImageFactory.swift in Sources */ = {isa = PBXBuildFile; fileRef = 344F248E2007D7F200CFB4F4 /* OWSMessagesBubbleImageFactory.swift */; };
 		3461284B1FD0B94000532771 /* SAELoadViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 3461284A1FD0B93F00532771 /* SAELoadViewController.swift */; };
 		346129341FD1A88700532771 /* OWSSwiftUtils.swift in Sources */ = {isa = PBXBuildFile; fileRef = 346129331FD1A88700532771 /* OWSSwiftUtils.swift */; };
 		346129391FD1B47300532771 /* OWSPreferences.h in Headers */ = {isa = PBXBuildFile; fileRef = 346129371FD1B47200532771 /* OWSPreferences.h */; settings = {ATTRIBUTES = (Public, ); }; };
@@ -241,7 +243,6 @@
 		452037D11EE84975004E4CDF /* DebugUISessionState.m in Sources */ = {isa = PBXBuildFile; fileRef = 452037D01EE84975004E4CDF /* DebugUISessionState.m */; };
 		4520D8D51D417D8E00123472 /* Photos.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 4520D8D41D417D8E00123472 /* Photos.framework */; };
 		4521C3C01F59F3BA00B4C582 /* TextFieldHelper.swift in Sources */ = {isa = PBXBuildFile; fileRef = 4521C3BF1F59F3BA00B4C582 /* TextFieldHelper.swift */; };
-		4523149C1F7D7F81003A428C /* OWSMessagesBubbleImageFactory.swift in Sources */ = {isa = PBXBuildFile; fileRef = 4523149B1F7D7F81003A428C /* OWSMessagesBubbleImageFactory.swift */; };
 		4523149E1F7E916B003A428C /* SlideOffAnimatedTransition.swift in Sources */ = {isa = PBXBuildFile; fileRef = 4523149D1F7E916B003A428C /* SlideOffAnimatedTransition.swift */; };
 		452314A01F7E9E18003A428C /* DirectionalPanGestureRecognizer.swift in Sources */ = {isa = PBXBuildFile; fileRef = 4523149F1F7E9E18003A428C /* DirectionalPanGestureRecognizer.swift */; };
 		452C468F1E427E200087B011 /* OutboundCallInitiator.swift in Sources */ = {isa = PBXBuildFile; fileRef = 452C468E1E427E200087B011 /* OutboundCallInitiator.swift */; };
@@ -303,7 +304,6 @@
 		45DF5DF21DDB843F00C936C7 /* CompareSafetyNumbersActivity.swift in Sources */ = {isa = PBXBuildFile; fileRef = 45DF5DF11DDB843F00C936C7 /* CompareSafetyNumbersActivity.swift */; };
 		45E547201FD755E700DFC09E /* AttachmentApprovalViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 45E5471F1FD755E700DFC09E /* AttachmentApprovalViewController.swift */; };
 		45E5A6991F61E6DE001E4A8A /* MarqueeLabel.swift in Sources */ = {isa = PBXBuildFile; fileRef = 45E5A6981F61E6DD001E4A8A /* MarqueeLabel.swift */; };
-		45E615161E8C590B0018AD52 /* DisplayableText.swift in Sources */ = {isa = PBXBuildFile; fileRef = 45E615151E8C590B0018AD52 /* DisplayableText.swift */; };
 		45E7A6A81E71CA7E00D44FB5 /* DisplayableTextFilterTest.swift in Sources */ = {isa = PBXBuildFile; fileRef = 45E7A6A61E71CA7E00D44FB5 /* DisplayableTextFilterTest.swift */; };
 		45F170AC1E2F0351003FC1F2 /* CallAudioSession.swift in Sources */ = {isa = PBXBuildFile; fileRef = 45F170AB1E2F0351003FC1F2 /* CallAudioSession.swift */; };
 		45F170BB1E2FC5D3003FC1F2 /* CallAudioService.swift in Sources */ = {isa = PBXBuildFile; fileRef = 45F170BA1E2FC5D3003FC1F2 /* CallAudioService.swift */; };
@@ -525,6 +525,8 @@
 		344F248620069ECB00CFB4F4 /* ModalActivityIndicatorViewController.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; name = ModalActivityIndicatorViewController.swift; path = SignalMessaging/contacts/ModalActivityIndicatorViewController.swift; sourceTree = SOURCE_ROOT; };
 		344F248820069F0600CFB4F4 /* ViewControllerUtils.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = ViewControllerUtils.h; path = SignalMessaging/contacts/ViewControllerUtils.h; sourceTree = SOURCE_ROOT; };
 		344F248920069F0600CFB4F4 /* ViewControllerUtils.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = ViewControllerUtils.m; path = SignalMessaging/contacts/ViewControllerUtils.m; sourceTree = SOURCE_ROOT; };
+		344F248C2007CCD600CFB4F4 /* DisplayableText.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = DisplayableText.swift; sourceTree = "<group>"; };
+		344F248E2007D7F200CFB4F4 /* OWSMessagesBubbleImageFactory.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = OWSMessagesBubbleImageFactory.swift; sourceTree = "<group>"; };
 		34533F161EA8D2070006114F /* OWSAudioAttachmentPlayer.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = OWSAudioAttachmentPlayer.h; sourceTree = "<group>"; };
 		34533F171EA8D2070006114F /* OWSAudioAttachmentPlayer.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = OWSAudioAttachmentPlayer.m; sourceTree = "<group>"; };
 		3461284A1FD0B93F00532771 /* SAELoadViewController.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = SAELoadViewController.swift; sourceTree = "<group>"; };
@@ -770,7 +772,6 @@
 		452037D01EE84975004E4CDF /* DebugUISessionState.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = DebugUISessionState.m; sourceTree = "<group>"; };
 		4520D8D41D417D8E00123472 /* Photos.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = Photos.framework; path = System/Library/Frameworks/Photos.framework; sourceTree = SDKROOT; };
 		4521C3BF1F59F3BA00B4C582 /* TextFieldHelper.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = TextFieldHelper.swift; sourceTree = "<group>"; };
-		4523149B1F7D7F81003A428C /* OWSMessagesBubbleImageFactory.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = OWSMessagesBubbleImageFactory.swift; sourceTree = "<group>"; };
 		4523149D1F7E916B003A428C /* SlideOffAnimatedTransition.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; name = SlideOffAnimatedTransition.swift; path = UserInterface/SlideOffAnimatedTransition.swift; sourceTree = "<group>"; };
 		4523149F1F7E9E18003A428C /* DirectionalPanGestureRecognizer.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = DirectionalPanGestureRecognizer.swift; sourceTree = "<group>"; };
 		452C468E1E427E200087B011 /* OutboundCallInitiator.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = OutboundCallInitiator.swift; sourceTree = "<group>"; };
@@ -848,7 +849,6 @@
 		45E2E91E1E13EE3500457AA0 /* OWSCallNotificationsAdaptee.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; lineEnding = 0; name = OWSCallNotificationsAdaptee.h; path = UserInterface/OWSCallNotificationsAdaptee.h; sourceTree = "<group>"; xcLanguageSpecificationIdentifier = xcode.lang.objcpp; };
 		45E5471F1FD755E700DFC09E /* AttachmentApprovalViewController.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = AttachmentApprovalViewController.swift; sourceTree = "<group>"; };
 		45E5A6981F61E6DD001E4A8A /* MarqueeLabel.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = MarqueeLabel.swift; sourceTree = "<group>"; };
-		45E615151E8C590B0018AD52 /* DisplayableText.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = DisplayableText.swift; sourceTree = "<group>"; };
 		45E7A6A61E71CA7E00D44FB5 /* DisplayableTextFilterTest.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = DisplayableTextFilterTest.swift; sourceTree = "<group>"; };
 		45F170AB1E2F0351003FC1F2 /* CallAudioSession.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = CallAudioSession.swift; sourceTree = "<group>"; };
 		45F170B31E2F0A6A003FC1F2 /* RTCAudioSession.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = RTCAudioSession.h; sourceTree = "<group>"; };
@@ -1106,6 +1106,7 @@
 				34480B4D1FD0A7A300BC14EF /* DebugLogger.h */,
 				34480B4E1FD0A7A300BC14EF /* DebugLogger.m */,
 				348F2EAD1F0D21BC00D4ECE0 /* DeviceSleepManager.swift */,
+				344F248C2007CCD600CFB4F4 /* DisplayableText.swift */,
 				346129AC1FD1F34E00532771 /* ImageCache.swift */,
 				45666EC41D99483D008FE134 /* OWSAvatarBuilder.h */,
 				45666EC51D99483D008FE134 /* OWSAvatarBuilder.m */,
@@ -1119,6 +1120,7 @@
 				34480B4B1FD0A7A300BC14EF /* OWSLogger.m */,
 				34480B481FD0A60200BC14EF /* OWSMath.h */,
 				3461293B1FD1D46900532771 /* OWSMath.m */,
+				344F248E2007D7F200CFB4F4 /* OWSMessagesBubbleImageFactory.swift */,
 				346129371FD1B47200532771 /* OWSPreferences.h */,
 				346129381FD1B47200532771 /* OWSPreferences.m */,
 				34480B4F1FD0A7A300BC14EF /* OWSScrubbingLogFormatter.h */,
@@ -1480,7 +1482,6 @@
 				34FD936F1E3BD43A00109093 /* OWSAnyTouchGestureRecognizer.m */,
 				34B3F8331E8DF1700035BE1A /* ViewControllers */,
 				76EB052B18170B33006006FC /* Views */,
-				4523149B1F7D7F81003A428C /* OWSMessagesBubbleImageFactory.swift */,
 				4523149D1F7E916B003A428C /* SlideOffAnimatedTransition.swift */,
 			);
 			name = UserInterface;
@@ -1730,7 +1731,6 @@
 				34CCAF371F0C0599004084F4 /* AppUpdateNag.m */,
 				B90418E4183E9DD40038554A /* DateUtil.h */,
 				B90418E5183E9DD40038554A /* DateUtil.m */,
-				45E615151E8C590B0018AD52 /* DisplayableText.swift */,
 				76EB04EA18170B33006006FC /* FunctionalUtil.h */,
 				76EB04EB18170B33006006FC /* FunctionalUtil.m */,
 				34B0796C1FCF46B000E248C2 /* MainAppContext.h */,
@@ -2786,6 +2786,7 @@
 				346129CD1FD2072E00532771 /* UIImage+OWS.m in Sources */,
 				344D6CEC20069E070042AF96 /* NewNonContactConversationViewController.m in Sources */,
 				346129FB1FD5F31400532771 /* OWS101ExistingUsersBlockOnIdentityChange.m in Sources */,
+				344F248D2007CCD600CFB4F4 /* DisplayableText.swift in Sources */,
 				450998651FD8A34D00D89EB3 /* DeviceSleepManager.swift in Sources */,
 				3478506B1FD9B78A007B8332 /* NoopCallMessageHandler.swift in Sources */,
 				451F8A3D1FD713CA005CB9DA /* ThreadViewHelper.m in Sources */,
@@ -2807,6 +2808,7 @@
 				4565ED06200EA29900C46DBB /* VideoPlayerView.swift in Sources */,
 				3461295B1FD1D74C00532771 /* Environment.m in Sources */,
 				346129D51FD20ADC00532771 /* UIViewController+OWS.m in Sources */,
+				344F248F2007D7F200CFB4F4 /* OWSMessagesBubbleImageFactory.swift in Sources */,
 				451F8A431FD714FE005CB9DA /* AvatarImageView.swift in Sources */,
 				346129C91FD2072E00532771 /* NSString+OWS.m in Sources */,
 				346129CB1FD2072E00532771 /* Promise+retainUntilComplete.swift in Sources */,
@@ -2892,7 +2894,6 @@
 				34B3F87B1E8DF1700035BE1A /* ExperienceUpgradesPageViewController.swift in Sources */,
 				452EA09E1EA7ABE00078744B /* AttachmentPointerView.swift in Sources */,
 				34B3F87C1E8DF1700035BE1A /* FingerprintViewController.m in Sources */,
-				4523149C1F7D7F81003A428C /* OWSMessagesBubbleImageFactory.swift in Sources */,
 				45638BDC1F3DD0D400128435 /* DebugUICalling.swift in Sources */,
 				45464DBC1DFA041F001D3FD6 /* DataChannelMessage.swift in Sources */,
 				34E3E5681EC4B19400495BAC /* AudioProgressView.swift in Sources */,
@@ -2908,7 +2909,6 @@
 				4556FA681F54AA9500AF40DD /* DebugUIProfile.swift in Sources */,
 				34DFCB851E8E04B500053165 /* AddToBlockListViewController.m in Sources */,
 				45A6DAD61EBBF85500893231 /* ReminderView.swift in Sources */,
-				45E615161E8C590B0018AD52 /* DisplayableText.swift in Sources */,
 				34B3F88A1E8DF1700035BE1A /* OWSLinkDeviceViewController.m in Sources */,
 				34D1F0881F8678AA0066283D /* ConversationViewLayout.m in Sources */,
 				3497DBEF1ECE2E4700DB2605 /* DomainFrontingCountryViewController.m in Sources */,
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m b/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
index 2a50dc70a35..2c3a8869aec 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
+++ b/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
@@ -309,30 +309,7 @@ - (DisplayableText *)displayableTextForInteractionId:(NSString *)interactionId
     DisplayableText *_Nullable displayableText = [[self displayableTextCache] objectForKey:interactionId];
     if (!displayableText) {
         NSString *text = textBlock();
-
-        // Only show up to N characters of text.
-        const NSUInteger kMaxTextDisplayLength = 1024;
-        NSString *_Nullable fullText = [DisplayableText displayableText:text];
-        BOOL isTextTruncated = NO;
-        if (!fullText) {
-            fullText = @"";
-        }
-        NSString *_Nullable displayText = fullText;
-        if (displayText.length > kMaxTextDisplayLength) {
-            // Trim whitespace before _AND_ after slicing the snipper from the string.
-            NSString *snippet = [[displayText substringWithRange:NSMakeRange(0, kMaxTextDisplayLength)] ows_stripped];
-            displayText = [NSString stringWithFormat:NSLocalizedString(@"OVERSIZE_TEXT_DISPLAY_FORMAT",
-                                                         @"A display format for oversize text messages."),
-                                    snippet];
-            isTextTruncated = YES;
-        }
-        if (!displayText) {
-            displayText = @"";
-        }
-
-        displayableText =
-            [[DisplayableText alloc] initWithFullText:fullText displayText:displayText isTextTruncated:isTextTruncated];
-
+        displayableText = [DisplayableText displayableText:text];
         [[self displayableTextCache] setObject:displayableText forKey:interactionId];
     }
     return displayableText;
diff --git a/Signal/src/ViewControllers/InboxTableViewCell.m b/Signal/src/ViewControllers/InboxTableViewCell.m
index 90d63244396..95f1b831882 100644
--- a/Signal/src/ViewControllers/InboxTableViewCell.m
+++ b/Signal/src/ViewControllers/InboxTableViewCell.m
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 #import "InboxTableViewCell.h"
@@ -189,7 +189,7 @@ - (void)configureWithThread:(TSThread *)thread
                                                                                                 : [UIColor lightGrayColor]),
                                                               }]];
         }
-        NSString *displayableText = [DisplayableText displayableText:thread.lastMessageLabel];
+        NSString *displayableText = [DisplayableText filterText:thread.lastMessageLabel];
         if (displayableText) {
             [snippetText appendAttributedString:[[NSAttributedString alloc]
                                                     initWithString:displayableText
diff --git a/SignalMessaging/attachments/MediaMessageView.swift b/SignalMessaging/attachments/MediaMessageView.swift
index 0a55bee89f3..fcba7ce5e66 100644
--- a/SignalMessaging/attachments/MediaMessageView.swift
+++ b/SignalMessaging/attachments/MediaMessageView.swift
@@ -296,33 +296,48 @@ public class MediaMessageView: UIView, OWSAudioAttachmentPlayerDelegate {
             return
         }
 
+        let messageBubbleView = UIImageView()
+        messageBubbleView.layoutMargins = .zero
+        let bubbleImageData =
+            OWSMessagesBubbleImageFactory.shared.outgoing
+        messageBubbleView.image = bubbleImageData.messageBubbleImage
+
+        let textColor = UIColor.white
+
         let messageTextView = UITextView()
         messageTextView.font = UIFont.ows_dynamicTypeBody()
-//        messageTextView.backgroundColor = UIColor.clear
-        messageTextView.backgroundColor = UIColor.white
+                messageTextView.backgroundColor = UIColor.clear
         messageTextView.isOpaque = false
         messageTextView.isEditable = false
-        messageTextView.isSelectable = true
+        messageTextView.isSelectable = false
         messageTextView.textContainerInset = UIEdgeInsets.zero
         messageTextView.contentInset = UIEdgeInsets.zero
-        messageTextView.isScrollEnabled = true
+        messageTextView.isScrollEnabled = false
         messageTextView.showsHorizontalScrollIndicator = false
         messageTextView.showsVerticalScrollIndicator = false
         messageTextView.isUserInteractionEnabled = false
-//        messageTextView.textColor = isIncoming ? UIColor.black : UIColor.white
-        messageTextView.textColor = UIColor.black
+        messageTextView.textColor = textColor
+        messageTextView.linkTextAttributes = [NSForegroundColorAttributeName : textColor,
+                                              NSUnderlineStyleAttributeName : [NSUnderlineStyle.styleSingle,
+                                                                               NSUnderlineStyle.patternSolid]
+                                              ]
+        messageTextView.dataDetectorTypes = [.link, .address, .calendarEvent]
         messageTextView.text = messageText
 
-        self.addSubview(messageTextView)
-        messageTextView.autoPinWidthToSuperview()
-        messageTextView.autoVCenterInSuperview()
+        messageBubbleView.layoutMargins = .zero
+        self.layoutMargins = .zero
 
-        // TODO: How should text messages be displayed in this view?
-        NSLayoutConstraint.autoSetPriority(UILayoutPriorityDefaultLow) {
-            messageTextView.autoPinHeightToSuperview()
-        }
-        messageTextView.autoPinEdge(toSuperviewEdge: .top, withInset: 0, relation: .greaterThanOrEqual)
-        messageTextView.autoPinEdge(toSuperviewEdge: .bottom, withInset: 0, relation: .greaterThanOrEqual)
+        self.addSubview(messageBubbleView)
+        messageBubbleView.autoVCenterInSuperview()
+        messageBubbleView.autoHCenterInSuperview()
+        messageBubbleView.autoPinEdge(toSuperviewEdge: .leading, withInset: 25, relation: .greaterThanOrEqual)
+        messageBubbleView.autoPinEdge(toSuperviewEdge: .trailing, withInset: 25, relation: .greaterThanOrEqual)
+
+        messageBubbleView.addSubview(messageTextView)
+        messageTextView.autoPinTopToSuperview(withMargin:10)
+        messageTextView.autoPinBottomToSuperview(withMargin:10)
+        messageTextView.autoPinLeadingToSuperview(withMargin:10)
+        messageTextView.autoPinTrailingToSuperview(withMargin:15)
     }
 
     private func createGenericPreview() {
diff --git a/SignalMessaging/categories/UIView+OWS.h b/SignalMessaging/categories/UIView+OWS.h
index c1735614a3e..d7eb6359a8a 100644
--- a/SignalMessaging/categories/UIView+OWS.h
+++ b/SignalMessaging/categories/UIView+OWS.h
@@ -83,7 +83,10 @@ CGFloat ScaleFromIPhone5(CGFloat iPhone5Value);
 - (NSLayoutConstraint *)autoPinLeadingToSuperviewWithMargin:(CGFloat)margin;
 - (NSLayoutConstraint *)autoPinTrailingToSuperview;
 - (NSLayoutConstraint *)autoPinTrailingToSuperviewWithMargin:(CGFloat)margin;
+
+- (NSLayoutConstraint *)autoPinTopToSuperview;
 - (NSLayoutConstraint *)autoPinTopToSuperviewWithMargin:(CGFloat)margin;
+- (NSLayoutConstraint *)autoPinBottomToSuperview;
 - (NSLayoutConstraint *)autoPinBottomToSuperviewWithMargin:(CGFloat)margin;
 
 - (NSLayoutConstraint *)autoPinLeadingToTrailingOfView:(UIView *)view;
diff --git a/SignalMessaging/categories/UIView+OWS.m b/SignalMessaging/categories/UIView+OWS.m
index 6f11633d93c..f3446926862 100644
--- a/SignalMessaging/categories/UIView+OWS.m
+++ b/SignalMessaging/categories/UIView+OWS.m
@@ -268,6 +268,8 @@ - (NSLayoutConstraint *)autoPinLeadingToSuperview
 
 - (NSLayoutConstraint *)autoPinLeadingToSuperviewWithMargin:(CGFloat)margin
 {
+    self.translatesAutoresizingMaskIntoConstraints = NO;
+
     if (@available(iOS 9.0, *)) {
         NSLayoutConstraint *constraint =
             [self.leadingAnchor constraintEqualToAnchor:self.superview.layoutMarginsGuide.leadingAnchor
@@ -287,6 +289,8 @@ - (NSLayoutConstraint *)autoPinTrailingToSuperview
 
 - (NSLayoutConstraint *)autoPinTrailingToSuperviewWithMargin:(CGFloat)margin
 {
+    self.translatesAutoresizingMaskIntoConstraints = NO;
+
     if (@available(iOS 9.0, *)) {
         NSLayoutConstraint *constraint =
             [self.trailingAnchor constraintEqualToAnchor:self.superview.layoutMarginsGuide.trailingAnchor
@@ -299,8 +303,15 @@ - (NSLayoutConstraint *)autoPinTrailingToSuperviewWithMargin:(CGFloat)margin
     }
 }
 
+- (NSLayoutConstraint *)autoPinBottomToSuperview
+{
+    return [self autoPinBottomToSuperviewWithMargin:0.f];
+}
+
 - (NSLayoutConstraint *)autoPinBottomToSuperviewWithMargin:(CGFloat)margin
 {
+    self.translatesAutoresizingMaskIntoConstraints = NO;
+
     if (@available(iOS 9.0, *)) {
         NSLayoutConstraint *constraint =
             [self.bottomAnchor constraintEqualToAnchor:self.superview.layoutMarginsGuide.bottomAnchor constant:-margin];
@@ -311,8 +322,15 @@ - (NSLayoutConstraint *)autoPinBottomToSuperviewWithMargin:(CGFloat)margin
     }
 }
 
+- (NSLayoutConstraint *)autoPinTopToSuperview
+{
+    return [self autoPinTopToSuperviewWithMargin:0.f];
+}
+
 - (NSLayoutConstraint *)autoPinTopToSuperviewWithMargin:(CGFloat)margin
 {
+    self.translatesAutoresizingMaskIntoConstraints = NO;
+
     if (@available(iOS 9.0, *)) {
         NSLayoutConstraint *constraint =
             [self.topAnchor constraintEqualToAnchor:self.superview.layoutMarginsGuide.topAnchor constant:margin];
@@ -334,6 +352,8 @@ - (NSLayoutConstraint *)autoPinLeadingToTrailingOfView:(UIView *)view margin:(CG
 {
     OWSAssert(view);
 
+    self.translatesAutoresizingMaskIntoConstraints = NO;
+
     if (@available(iOS 9.0, *)) {
         NSLayoutConstraint *constraint =
             [self.leadingAnchor constraintEqualToAnchor:view.trailingAnchor constant:margin];
@@ -355,6 +375,8 @@ - (NSLayoutConstraint *)autoPinTrailingToLeadingOfView:(UIView *)view margin:(CG
 {
     OWSAssert(view);
 
+    self.translatesAutoresizingMaskIntoConstraints = NO;
+
     if (@available(iOS 9.0, *)) {
         NSLayoutConstraint *constraint =
             [self.trailingAnchor constraintEqualToAnchor:view.leadingAnchor constant:-margin];
@@ -376,6 +398,8 @@ - (NSLayoutConstraint *)autoPinLeadingToView:(UIView *)view margin:(CGFloat)marg
 {
     OWSAssert(view);
 
+    self.translatesAutoresizingMaskIntoConstraints = NO;
+
     if (@available(iOS 9.0, *)) {
         NSLayoutConstraint *constraint =
             [self.leadingAnchor constraintEqualToAnchor:view.leadingAnchor constant:margin];
@@ -397,6 +421,8 @@ - (NSLayoutConstraint *)autoPinTrailingToView:(UIView *)view margin:(CGFloat)mar
 {
     OWSAssert(view);
 
+    self.translatesAutoresizingMaskIntoConstraints = NO;
+
     if (@available(iOS 9.0, *)) {
         NSLayoutConstraint *constraint =
             [self.trailingAnchor constraintEqualToAnchor:view.trailingAnchor constant:margin];
diff --git a/Signal/src/util/DisplayableText.swift b/SignalMessaging/utils/DisplayableText.swift
similarity index 85%
rename from Signal/src/util/DisplayableText.swift
rename to SignalMessaging/utils/DisplayableText.swift
index a0120a6a1c9..aca28be1435 100644
--- a/Signal/src/util/DisplayableText.swift
+++ b/SignalMessaging/utils/DisplayableText.swift
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 import Foundation
@@ -148,14 +148,14 @@ extension String {
     }
 }
 
-@objc class DisplayableText: NSObject {
+@objc public class DisplayableText: NSObject {
 
     static let TAG = "[DisplayableText]"
 
-    let fullText: String
-    let displayText: String
-    let isTextTruncated: Bool
-    let jumbomojiCount: UInt
+    public let fullText: String
+    public let displayText: String
+    public let isTextTruncated: Bool
+    public let jumbomojiCount: UInt
 
     static let kMaxJumbomojiCount: UInt = 5
     // This value is a bit arbitrary since we don't need to be 100% correct about 
@@ -201,7 +201,7 @@ extension String {
     // MARK: Filter Methods
 
     @objc
-    class func displayableText(_ text: String?) -> String? {
+    public class func filterText(_ text: String?) -> String? {
         guard let text = text?.ows_stripped() else {
             return nil
         }
@@ -217,7 +217,7 @@ extension String {
 
     private class func hasExcessiveDiacriticals(text: String) -> Bool {
         // discard any zalgo style text, by detecting maximum number of glyphs per character
-        for char in text.characters.enumerated() {
+        for char in text.enumerated() {
             let scalarCount = String(char.element).unicodeScalars.count
             if scalarCount > 4 {
                 Logger.warn("\(TAG) detected excessive diacriticals at \(char.element) scalarCount: \(scalarCount)")
@@ -227,4 +227,25 @@ extension String {
 
         return false
     }
+
+    @objc
+    public class func displayableText(_ rawText: String) -> DisplayableText {
+        // Only show up to N characters of text.
+        let kMaxTextDisplayLength = 1024
+        let filteredText = filterText(rawText)
+        let fullText = filteredText != nil ? filteredText! : ""
+        var isTextTruncated = false
+        var displayText = fullText
+        if displayText.count > kMaxTextDisplayLength {
+            // Trim whitespace before _AND_ after slicing the snipper from the string.
+            let snippet = String(displayText.prefix(kMaxTextDisplayLength)).ows_stripped()
+            displayText = String(format:NSLocalizedString("OVERSIZE_TEXT_DISPLAY_FORMAT", comment:
+                "A display format for oversize text messages."),
+                snippet)
+            isTextTruncated = true
+        }
+
+        let displayableText = DisplayableText(fullText: fullText, displayText: displayText, isTextTruncated:isTextTruncated)
+        return displayableText
+    }
 }
diff --git a/Signal/src/OWSMessagesBubbleImageFactory.swift b/SignalMessaging/utils/OWSMessagesBubbleImageFactory.swift
similarity index 94%
rename from Signal/src/OWSMessagesBubbleImageFactory.swift
rename to SignalMessaging/utils/OWSMessagesBubbleImageFactory.swift
index b49764f81ed..48192996eb0 100644
--- a/Signal/src/OWSMessagesBubbleImageFactory.swift
+++ b/SignalMessaging/utils/OWSMessagesBubbleImageFactory.swift
@@ -1,5 +1,5 @@
 //
-//  Copyright (c) 2017 Open Whisper Systems. All rights reserved.
+//  Copyright (c) 2018 Open Whisper Systems. All rights reserved.
 //
 
 import Foundation
@@ -8,7 +8,7 @@ import SignalServiceKit
 import SignalMessaging
 
 @objc
-class OWSMessagesBubbleImageFactory: NSObject {
+public class OWSMessagesBubbleImageFactory: NSObject {
 
     static let shared = OWSMessagesBubbleImageFactory()
 
