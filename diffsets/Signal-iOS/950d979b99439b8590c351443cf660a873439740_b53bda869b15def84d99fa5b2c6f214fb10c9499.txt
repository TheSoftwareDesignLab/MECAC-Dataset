diff --git a/Signal/src/ViewControllers/Photos/ImagePickerController.swift b/Signal/src/ViewControllers/Photos/ImagePickerController.swift
index e6843ba2e11..6b89a1402f2 100644
--- a/Signal/src/ViewControllers/Photos/ImagePickerController.swift
+++ b/Signal/src/ViewControllers/Photos/ImagePickerController.swift
@@ -37,7 +37,7 @@ class ImagePickerGridController: UICollectionViewController, PhotoLibraryDelegat
     private var titleView: TitleView!
 
     private var bottomBar: UIView!
-    private var cameraButton: PhotoControl!
+    private var cameraButton: CameraOverlayButton!
     private var doneButton: MediaDoneButton!
 
     init() {
@@ -98,10 +98,8 @@ class ImagePickerGridController: UICollectionViewController, PhotoLibraryDelegat
         bottomBar.autoPinBottomToSuperviewMargin(withInset: UIDevice.current.hasIPhoneXNotch ? 0 : 8)
         bottomBar.autoPinHorizontalEdges(toEdgesOf: view)
 
-        cameraButton = PhotoControl(imageName: "media-composer-camera-outline-28", userInterfaceStyleOverride: .light) { [weak self] in
-            guard let self = self else { return }
-            self.didTapCameraButton()
-        }
+        cameraButton = CameraOverlayButton(image: UIImage(named: "media-composer-camera-outline-28"), userInterfaceStyleOverride: .light)
+        cameraButton.addTarget(self, action: #selector(didTapCameraButton), for: .touchUpInside)
         bottomBar.addSubview(cameraButton)
         cameraButton.contentInsets = .zero
         cameraButton.autoSetDimensions(to: .square(40))
@@ -339,6 +337,7 @@ class ImagePickerGridController: UICollectionViewController, PhotoLibraryDelegat
         self.delegate?.imagePickerDidCancel(self)
     }
 
+    @objc
     private func didTapCameraButton() {
         delegate?.imagePickerDidRequestPresentCamera(self)
     }
diff --git a/Signal/src/ViewControllers/Photos/MediaControls.swift b/Signal/src/ViewControllers/Photos/MediaControls.swift
index ebba6c42cde..05a773e9df5 100644
--- a/Signal/src/ViewControllers/Photos/MediaControls.swift
+++ b/Signal/src/ViewControllers/Photos/MediaControls.swift
@@ -15,12 +15,24 @@ protocol CameraCaptureControlDelegate: AnyObject {
     func cameraCaptureControlDidRequestCancelVideoRecording(_ control: CameraCaptureControl)
 
     // MARK: Zoom
-    var zoomScaleReferenceHeight: CGFloat? { get }
-    func cameraCaptureControl(_ control: CameraCaptureControl, didUpdate zoomAlpha: CGFloat)
+    var zoomScaleReferenceDistance: CGFloat? { get }
+    func cameraCaptureControl(_ control: CameraCaptureControl, didUpdateZoomLevel zoomLevel: CGFloat)
 }
 
 class CameraCaptureControl: UIView {
 
+    var axis: NSLayoutConstraint.Axis = .horizontal {
+        didSet {
+            if oldValue != axis {
+                reactivateConstraintsForCurrentAxis()
+                invalidateIntrinsicContentSize()
+            }
+        }
+    }
+    private var horizontalAxisConstraints = [NSLayoutConstraint]()
+    private var verticalAxisConstraints = [NSLayoutConstraint]()
+
+    let shutterButtonLayoutGuide = UILayoutGuide() // allows view controller to align to shutter button.
     private let shutterButtonOuterCircle = CircleBlurView(effect: UIBlurEffect(style: .light))
     private let shutterButtonInnerCircle = CircleView()
 
@@ -30,7 +42,8 @@ class CameraCaptureControl: UIView {
 
     private var outerCircleSizeConstraint: NSLayoutConstraint!
     private var innerCircleSizeConstraint: NSLayoutConstraint!
-    private var slidingCirclePositionContstraint: NSLayoutConstraint!
+    private var slidingCircleHPositionConstraint: NSLayoutConstraint!
+    private var slidingCircleVPositionConstraint: NSLayoutConstraint!
 
     private lazy var slidingCircleView: CircleView = {
         let view = CircleView(diameter: CameraCaptureControl.recordingLockControlSize)
@@ -53,6 +66,12 @@ class CameraCaptureControl: UIView {
 
     weak var delegate: CameraCaptureControlDelegate?
 
+    convenience init(axis: NSLayoutConstraint.Axis) {
+        self.init(frame: CGRect(origin: .zero, size: CameraCaptureControl.intrinsicContentSize(forAxis: axis)))
+        self.axis = axis
+        reactivateConstraintsForCurrentAxis()
+    }
+
     override init(frame: CGRect) {
         super.init(frame: frame)
         commonInit()
@@ -64,14 +83,28 @@ class CameraCaptureControl: UIView {
     }
 
     private func commonInit() {
-        autoSetDimension(.height, toSize: CameraCaptureControl.shutterButtonDefaultSize)
 
         // Round Shutter Button
+        addLayoutGuide(shutterButtonLayoutGuide)
+        shutterButtonLayoutGuide.widthAnchor.constraint(equalToConstant: CameraCaptureControl.shutterButtonDefaultSize).isActive = true
+        shutterButtonLayoutGuide.heightAnchor.constraint(equalToConstant: CameraCaptureControl.shutterButtonDefaultSize).isActive = true
+        horizontalAxisConstraints.append(contentsOf: [
+            shutterButtonLayoutGuide.centerXAnchor.constraint(equalTo: leadingAnchor, constant: 0.5*CameraCaptureControl.shutterButtonDefaultSize),
+            shutterButtonLayoutGuide.topAnchor.constraint(equalTo: topAnchor),
+            shutterButtonLayoutGuide.bottomAnchor.constraint(equalTo: bottomAnchor)
+
+        ])
+        verticalAxisConstraints.append(contentsOf: [
+            shutterButtonLayoutGuide.leadingAnchor.constraint(equalTo: leadingAnchor),
+            shutterButtonLayoutGuide.trailingAnchor.constraint(equalTo: trailingAnchor),
+            shutterButtonLayoutGuide.centerYAnchor.constraint(equalTo: topAnchor, constant: 0.5*CameraCaptureControl.shutterButtonDefaultSize)
+        ])
+
         addSubview(shutterButtonOuterCircle)
+        shutterButtonOuterCircle.centerXAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerXAnchor).isActive = true
+        shutterButtonOuterCircle.centerYAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerYAnchor).isActive = true
         outerCircleSizeConstraint = shutterButtonOuterCircle.autoSetDimension(.width, toSize: CameraCaptureControl.shutterButtonDefaultSize)
         shutterButtonOuterCircle.autoPin(toAspectRatio: 1)
-        shutterButtonOuterCircle.autoVCenterInSuperview()
-        shutterButtonOuterCircle.autoHCenterInSuperview()
 
         addSubview(shutterButtonInnerCircle)
         innerCircleSizeConstraint = shutterButtonInnerCircle.autoSetDimension(.width, toSize: CameraCaptureControl.shutterButtonDefaultSize)
@@ -88,6 +121,8 @@ class CameraCaptureControl: UIView {
         longPressGesture = UILongPressGestureRecognizer(target: self, action: #selector(handleLongPress))
         longPressGesture.minimumPressDuration = 0
         shutterButtonOuterCircle.addGestureRecognizer(longPressGesture)
+
+        reactivateConstraintsForCurrentAxis()
     }
 
     // MARK: - UI State
@@ -140,7 +175,7 @@ class CameraCaptureControl: UIView {
         switch state {
         case .initial:
             // element visibility
-            if slidingCirclePositionContstraint != nil {
+            if slidingCircleHPositionConstraint != nil {
                 stopButton.alpha = 0
                 slidingCircleView.alpha = 0
                 lockIconView.alpha = 0
@@ -184,22 +219,46 @@ class CameraCaptureControl: UIView {
     }
 
     private func prepareRecordingControlsIfNecessary() {
-        guard slidingCirclePositionContstraint == nil else { return }
+        guard slidingCircleHPositionConstraint == nil else { return }
 
+        // 1. Stop button.
         addSubview(stopButton)
         stopButton.autoPin(toAspectRatio: 1)
         stopButton.autoSetDimension(.width, toSize: CameraCaptureControl.recordingLockControlSize)
-        stopButton.centerXAnchor.constraint(equalTo: shutterButtonOuterCircle.centerXAnchor).isActive = true
-        stopButton.centerYAnchor.constraint(equalTo: shutterButtonOuterCircle.centerYAnchor).isActive = true
+        stopButton.centerXAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerXAnchor).isActive = true
+        stopButton.centerYAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerYAnchor).isActive = true
 
+        // 2. Slider.
         insertSubview(slidingCircleView, belowSubview: shutterButtonInnerCircle)
-        slidingCircleView.autoVCenterInSuperview()
-        slidingCirclePositionContstraint = slidingCircleView.centerXAnchor.constraint(equalTo: shutterButtonOuterCircle.centerXAnchor, constant: 0)
-        addConstraint(slidingCirclePositionContstraint)
+        slidingCircleView.translatesAutoresizingMaskIntoConstraints = false
+        slidingCircleHPositionConstraint = slidingCircleView.centerXAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerXAnchor)
+        var horizontalConstraints: [NSLayoutConstraint] = [ slidingCircleHPositionConstraint ]
+        horizontalConstraints.append(slidingCircleView.centerYAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerYAnchor))
+
+        slidingCircleVPositionConstraint = slidingCircleView.centerYAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerYAnchor)
+        var verticalConstraints: [NSLayoutConstraint] = [ slidingCircleVPositionConstraint ]
+        verticalConstraints.append(slidingCircleView.centerXAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerXAnchor))
 
+        // 3. Lock Icon
         addSubview(lockIconView)
-        lockIconView.autoVCenterInSuperview()
-        lockIconView.autoPinTrailing(toEdgeOf: self)
+        lockIconView.translatesAutoresizingMaskIntoConstraints = false
+        // Centered vertically, pinned to trailing edge.
+        horizontalConstraints.append(contentsOf: [ lockIconView.centerYAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerYAnchor),
+                                                   lockIconView.trailingAnchor.constraint(equalTo: trailingAnchor) ])
+        // Centered horizontally, pinned to bottom edge.
+        verticalConstraints.append(contentsOf: [ lockIconView.centerXAnchor.constraint(equalTo: shutterButtonLayoutGuide.centerXAnchor),
+                                                 lockIconView.bottomAnchor.constraint(equalTo: bottomAnchor) ])
+
+        // 4. Activate current constraints.
+        horizontalAxisConstraints.append(contentsOf: horizontalConstraints)
+        if axis == .horizontal {
+            addConstraints(horizontalConstraints)
+        }
+
+        verticalAxisConstraints.append(contentsOf: verticalConstraints)
+        if axis == .vertical {
+            addConstraints(verticalConstraints)
+        }
 
         setNeedsLayout()
         UIView.performWithoutAnimation {
@@ -207,11 +266,48 @@ class CameraCaptureControl: UIView {
         }
     }
 
+    private func reactivateConstraintsForCurrentAxis() {
+        switch axis {
+        case .horizontal:
+            removeConstraints(verticalAxisConstraints)
+            addConstraints(horizontalAxisConstraints)
+
+        case .vertical:
+            removeConstraints(horizontalAxisConstraints)
+            addConstraints(verticalAxisConstraints)
+
+        @unknown default:
+            owsFailDebug("Unsupported `axis` value: \(axis.rawValue)")
+        }
+    }
+
+    override var intrinsicContentSize: CGSize {
+        return Self.intrinsicContentSize(forAxis: axis)
+    }
+
+    private static func intrinsicContentSize(forAxis axis: NSLayoutConstraint.Axis) -> CGSize {
+        switch axis {
+        case .horizontal:
+            return CGSize(width: CameraCaptureControl.shutterButtonDefaultSize + 64 + CameraCaptureControl.recordingLockControlSize,
+                          height: CameraCaptureControl.shutterButtonDefaultSize)
+
+        case .vertical:
+            return CGSize(width: CameraCaptureControl.shutterButtonDefaultSize,
+                          height: CameraCaptureControl.shutterButtonDefaultSize + 64 + CameraCaptureControl.recordingLockControlSize)
+
+        @unknown default:
+            owsFailDebug("Unsupported `axis` value: \(axis.rawValue)")
+            return CGSize(square: UIView.noIntrinsicMetric)
+        }
+    }
+
     // MARK: - Gestures
 
     private var longPressGesture: UILongPressGestureRecognizer!
     private static let longPressDurationThreshold = 0.5
+    private static let minDistanceBeforeActivatingLockSlider: CGFloat = 30
     private var initialTouchLocation: CGPoint?
+    private var initialZoomPosition: CGFloat?
     private var touchTimer: Timer?
 
     @objc
@@ -229,6 +325,7 @@ class CameraCaptureControl: UIView {
             guard state == .initial else { break }
 
             initialTouchLocation = gesture.location(in: gesture.view)
+            initialZoomPosition = nil
 
             touchTimer?.invalidate()
             touchTimer = WeakTimer.scheduledTimer(
@@ -247,12 +344,12 @@ class CameraCaptureControl: UIView {
         case .changed:
             guard state == .recording else { break }
 
-            guard let referenceHeight = delegate?.zoomScaleReferenceHeight else {
+            guard let referenceDistance = delegate?.zoomScaleReferenceDistance else {
                 owsFailDebug("referenceHeight was unexpectedly nil")
                 return
             }
 
-            guard referenceHeight > 0 else {
+            guard referenceDistance > 0 else {
                 owsFailDebug("referenceHeight was unexpectedly <= 0")
                 return
             }
@@ -264,17 +361,53 @@ class CameraCaptureControl: UIView {
 
             let currentLocation = gesture.location(in: gestureView)
 
-            // Zoom
-            let minDistanceBeforeActivatingZoom: CGFloat = 30
-            let yDistance = initialTouchLocation.y - currentLocation.y - minDistanceBeforeActivatingZoom
-            let distanceForFullZoom = referenceHeight / 4
-            let yRatio = yDistance / distanceForFullZoom
-            let yAlpha = yRatio.clamp(0, 1)
-            delegate?.cameraCaptureControl(self, didUpdate: yAlpha)
+            // Zoom - only use if slide to lock hasn't been activated.
+            var zoomLevel: CGFloat = 0
+            if sliderTrackingProgress == 0 {
+                let minDistanceBeforeActivatingZoom: CGFloat = 30
+                let currentDistance: CGFloat = {
+                    switch axis {
+                    case .horizontal:
+                        if initialZoomPosition == nil {
+                            initialZoomPosition = currentLocation.y
+                        }
+                        return initialZoomPosition! - currentLocation.y - minDistanceBeforeActivatingZoom
+
+                    case .vertical:
+                        if initialZoomPosition == nil {
+                            initialZoomPosition = currentLocation.x
+                        }
+                        return initialZoomPosition! - currentLocation.x - minDistanceBeforeActivatingZoom
+
+                    @unknown default:
+                        owsFailDebug("Unsupported `axis` value: \(axis.rawValue)")
+                        return 0
+                    }
+                }()
+
+                let distanceForFullZoom = referenceDistance / 4
+                let ratio = currentDistance / distanceForFullZoom
+                zoomLevel = ratio.clamp(0, 1)
+                delegate?.cameraCaptureControl(self, didUpdateZoomLevel: zoomLevel)
+            } else {
+                initialZoomPosition = nil
+            }
+
+            // Video Recording Lock - only works if zoom level == 0
+            if zoomLevel == 0 {
+                switch axis {
+                case .horizontal:
+                    let xOffset = currentLocation.x - initialTouchLocation.x
+                    updateHorizontalTracking(xOffset: xOffset)
 
-            // Video Recording Lock
-            let xOffset = currentLocation.x - initialTouchLocation.x
-            updateTracking(xOffset: xOffset)
+                case .vertical:
+                    let yOffset = currentLocation.y - initialTouchLocation.y
+                    updateVerticalTracking(yOffset: yOffset)
+
+                @unknown default:
+                    owsFailDebug("Unsupported `axis` value: \(axis.rawValue)")
+                }
+            }
 
         case .ended:
             touchTimer?.invalidate()
@@ -305,17 +438,26 @@ class CameraCaptureControl: UIView {
         }
     }
 
-    private func updateTracking(xOffset: CGFloat) {
-        let minDistanceBeforeActivatingLockSlider: CGFloat = 30
-        let effectiveDistance = xOffset - minDistanceBeforeActivatingLockSlider
+    private func updateHorizontalTracking(xOffset: CGFloat) {
+        let effectiveDistance = xOffset - Self.minDistanceBeforeActivatingLockSlider
         let distanceToLock = abs(lockIconView.center.x - stopButton.center.x)
         let trackingPosition = effectiveDistance.clamp(0, distanceToLock)
-        slidingCirclePositionContstraint.constant = trackingPosition
+        slidingCircleHPositionConstraint.constant = trackingPosition
         sliderTrackingProgress = (effectiveDistance / distanceToLock).clamp(0, 1)
 
         Logger.verbose("xOffset: \(xOffset), effectiveDistance: \(effectiveDistance),  distanceToLock: \(distanceToLock), trackingPosition: \(trackingPosition), progress: \(sliderTrackingProgress)")
     }
 
+    private func updateVerticalTracking(yOffset: CGFloat) {
+        let effectiveDistance = yOffset - Self.minDistanceBeforeActivatingLockSlider
+        let distanceToLock = abs(lockIconView.center.y - stopButton.center.y)
+        let trackingPosition = effectiveDistance.clamp(0, distanceToLock)
+        slidingCircleVPositionConstraint.constant = trackingPosition
+        sliderTrackingProgress = (effectiveDistance / distanceToLock).clamp(0, 1)
+
+        Logger.verbose("yOffset: \(yOffset), effectiveDistance: \(effectiveDistance),  distanceToLock: \(distanceToLock), trackingPosition: \(trackingPosition), progress: \(sliderTrackingProgress)")
+    }
+
     // MARK: - Button Actions
 
     private func didTapStopButton() {
@@ -468,9 +610,9 @@ private extension UserInterfaceStyleOverride {
 }
 
 
-class PhotoControl: UIView, UserInterfaceStyleOverride {
+class CameraOverlayButton: UIButton, UserInterfaceStyleOverride {
 
-    var userInterfaceStyleOverride: UIUserInterfaceStyle = .unspecified {
+    fileprivate var userInterfaceStyleOverride: UIUserInterfaceStyle = .unspecified {
         didSet {
             if oldValue != userInterfaceStyleOverride {
                 updateStyle()
@@ -479,37 +621,47 @@ class PhotoControl: UIView, UserInterfaceStyleOverride {
     }
 
     private var backgroundView: UIVisualEffectView!
-    private let button: OWSButton
 
     private static let visibleButtonSize: CGFloat = 36  // both height and width
     private static let defaultInset: CGFloat = 4
 
-    var contentInsets: UIEdgeInsets = UIEdgeInsets(margin: PhotoControl.defaultInset) {
+    var contentInsets: UIEdgeInsets = UIEdgeInsets(margin: CameraOverlayButton.defaultInset) {
         didSet {
             layoutMargins = contentInsets
         }
     }
 
-    init(imageName: String, userInterfaceStyleOverride: UIUserInterfaceStyle = .unspecified, block: @escaping () -> Void) {
-        button = OWSButton(imageName: imageName, tintColor: nil, block: block)
+    convenience init(image: UIImage?, userInterfaceStyleOverride: UIUserInterfaceStyle = .unspecified) {
+        self.init(frame: CGRect(origin: .zero, size: .square(Self.visibleButtonSize + 2*Self.defaultInset)))
+        self.userInterfaceStyleOverride = userInterfaceStyleOverride
+        setImage(image, for: .normal)
+        updateStyle()
+    }
+
+    private override init(frame: CGRect) {
+        super.init(frame: frame)
+        commonInit()
+    }
 
-        super.init(frame: CGRect(origin: .zero, size: CGSize(square: Self.visibleButtonSize + 2*Self.defaultInset)))
+    required init?(coder: NSCoder) {
+        super.init(coder: coder)
+        commonInit()
+    }
 
+    private func commonInit() {
         layoutMargins = contentInsets
-        self.userInterfaceStyleOverride = userInterfaceStyleOverride
 
-        backgroundView = CircleBlurView(effect: UIBlurEffect(style: PhotoControl.blurEffectStyle(for: effectiveUserInterfaceStyle)))
+        backgroundView = CircleBlurView(effect: UIBlurEffect(style: CameraOverlayButton.blurEffectStyle(for: effectiveUserInterfaceStyle)))
+        backgroundView.isUserInteractionEnabled = false
         addSubview(backgroundView)
         backgroundView.autoPinEdgesToSuperviewMargins()
 
-        addSubview(button)
-        button.autoPinEdgesToSuperviewMargins()
-
         updateStyle()
     }
 
-    required init?(coder: NSCoder) {
-        fatalError("init(coder:) has not been implemented")
+    override func layoutSubviews() {
+        super.layoutSubviews()
+        sendSubviewToBack(backgroundView)
     }
 
     override var intrinsicContentSize: CGSize {
@@ -525,12 +677,8 @@ class PhotoControl: UIView, UserInterfaceStyleOverride {
     }
 
     private func updateStyle() {
-        backgroundView.effect = UIBlurEffect(style: PhotoControl.blurEffectStyle(for: effectiveUserInterfaceStyle))
-        button.tintColor = PhotoControl.tintColor(for: effectiveUserInterfaceStyle)
-    }
-
-    func setImage(imageName: String) {
-        button.setImage(imageName: imageName)
+        backgroundView.effect = UIBlurEffect(style: CameraOverlayButton.blurEffectStyle(for: effectiveUserInterfaceStyle))
+        tintColor = CameraOverlayButton.tintColor(for: effectiveUserInterfaceStyle)
     }
 }
 
diff --git a/Signal/src/ViewControllers/Photos/PhotoCapture.swift b/Signal/src/ViewControllers/Photos/PhotoCapture.swift
index b54233a6810..59ca0d00462 100644
--- a/Signal/src/ViewControllers/Photos/PhotoCapture.swift
+++ b/Signal/src/ViewControllers/Photos/PhotoCapture.swift
@@ -24,7 +24,7 @@ protocol PhotoCaptureDelegate: AnyObject {
     func photoCapture(_ photoCapture: PhotoCapture, didChangeOrientation: AVCaptureVideoOrientation)
     func photoCaptureCanCaptureMoreItems(_ photoCapture: PhotoCapture) -> Bool
     func photoCaptureDidTryToCaptureTooMany(_ photoCapture: PhotoCapture)
-    var zoomScaleReferenceHeight: CGFloat? { get }
+    var zoomScaleReferenceDistance: CGFloat? { get }
 
     func beginCaptureButtonAnimation(_ duration: TimeInterval)
     func endCaptureButtonAnimation(_ duration: TimeInterval)
@@ -690,12 +690,12 @@ extension PhotoCapture: CameraCaptureControlDelegate {
         completeMovieCapture()
     }
 
-    var zoomScaleReferenceHeight: CGFloat? {
-        return delegate?.zoomScaleReferenceHeight
+    var zoomScaleReferenceDistance: CGFloat? {
+        return delegate?.zoomScaleReferenceDistance
     }
 
-    func cameraCaptureControl(_ control: CameraCaptureControl, didUpdate zoomAlpha: CGFloat) {
-        updateZoom(alpha: zoomAlpha)
+    func cameraCaptureControl(_ control: CameraCaptureControl, didUpdateZoomLevel zoomLevel: CGFloat) {
+        updateZoom(alpha: zoomLevel)
     }
 }
 
diff --git a/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift b/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
index aac93dcf1ce..3003828d82a 100644
--- a/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
+++ b/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
@@ -50,27 +50,17 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
     
     weak var delegate: PhotoCaptureViewControllerDelegate?
     weak var dataSource: PhotoCaptureViewControllerDataSource?
-    var interactiveDismiss: PhotoCaptureInteractiveDismiss!
+    private var interactiveDismiss: PhotoCaptureInteractiveDismiss!
     
     @objc public lazy var photoCapture = PhotoCapture()
-    
-    lazy var tapToFocusView: AnimationView = {
-        let view = AnimationView(name: "tap_to_focus")
-        view.animationSpeed = 1
-        view.backgroundBehavior = .forceFinish
-        view.contentMode = .scaleAspectFit
-        view.autoSetDimensions(to: CGSize(square: 150))
-        view.setContentHuggingHigh()
-        return view
-    }()
-    
+
     deinit {
         UIDevice.current.endGeneratingDeviceOrientationNotifications()
         photoCapture.stopCapture().done {
             Logger.debug("stopCapture completed")
         }
     }
-    
+
     // MARK: - Overrides
     
     override func loadView() {
@@ -80,113 +70,20 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
         
         definesPresentationContext = true
 
-        // This background footer doesn't let view controller underneath current VC
-        // to be visible at the bottom of the screen during interactive dismiss.
-        if UIDevice.current.hasIPhoneXNotch {
-            let blackFooter = UIView()
-            blackFooter.backgroundColor = view.backgroundColor
-            view.addSubview(blackFooter)
-            blackFooter.autoPinWidthToSuperview()
-            blackFooter.autoPinEdge(toSuperviewEdge: .bottom)
-            blackFooter.heightAnchor.constraint(equalTo: view.heightAnchor, multiplier: 0.5).isActive = true
-        }
-        
-        view.addSubview(previewView)
-        if UIDevice.current.isIPad {
-            previewView.autoPinEdgesToSuperviewEdges()
-        }
-        
-        view.addSubview(topBar)
-        topBar.mode = .cameraControls
-        topBar.autoPinWidthToSuperview()
-        topBarOffsetFromTop = topBar.autoPinEdge(toSuperviewEdge: .top)
-        
-        view.addSubview(bottomBar)
-        bottomBar.autoPinWidthToSuperview()
-        bottomBarOffsetFromBottom = view.bottomAnchor.constraint(equalTo: bottomBar.bottomAnchor)
-        view.addConstraint(bottomBarOffsetFromBottom)
-        
-        view.addSubview(cameraCaptureControl)
-        if UIDevice.current.isIPad {
-            //            captureButton.autoVCenterInSuperview()
-            //            captureButton.autoPinTrailing(toEdgeOf: view, offset: -captureButtonMargin)
-            //            captureButton.movieLockView.autoSetDimension(.width, toSize: 120)
-        } else {
-            captureButtonVPositionConstraint = view.bottomAnchor.constraint(equalTo: cameraCaptureControl.bottomAnchor)
-            view?.addConstraint(captureButtonVPositionConstraint)
-            cameraCaptureControl.autoPinLeadingToSuperviewMargin()
-            cameraCaptureControl.autoPinTrailingToSuperviewMargin()
-        }
-        
-        view.addSubview(doneButton)
-        doneButton.isHidden = true
-        doneButton.autoPinTrailingToSuperviewMargin()
-        doneButton.centerYAnchor.constraint(equalTo: cameraCaptureControl.centerYAnchor).isActive = true
-        doneButton.addTarget(self, action: #selector(didTapDoneButton), for: .touchUpInside)
+        initializeUI()
+    }
+
+    override func viewDidLoad() {
+        super.viewDidLoad()
         
+        setupPhotoCapture()
         // If the view is already visible, setup the volume button listener
         // now that the capture UI is ready. Otherwise, we'll wait until
         // we're visible.
         if isVisible {
             VolumeButtons.shared?.addObserver(observer: photoCapture)
         }
-        
-        view.addSubview(tapToFocusView)
-        tapToFocusView.isUserInteractionEnabled = false
-        tapToFocusLeftConstraint = tapToFocusView.centerXAnchor.constraint(equalTo: view.leftAnchor)
-        tapToFocusLeftConstraint.isActive = true
-        tapToFocusTopConstraint = tapToFocusView.centerYAnchor.constraint(equalTo: view.topAnchor)
-        tapToFocusTopConstraint.isActive = true
-    }
-    
-    override func viewDidLayoutSubviews() {
-        super.viewDidLayoutSubviews()
-        
-        guard !UIDevice.current.isIPad else { return }
 
-        guard !interactiveDismiss.interactionInProgress else { return }
-        
-        // Clamp capture view to 16:9
-        var previewFrame = view.bounds
-        var cornerRadius: CGFloat = 0
-        let targetAspectRatio: CGFloat = 16/9
-        let currentAspectRatio: CGFloat = previewFrame.height / previewFrame.width
-        
-        if abs(currentAspectRatio - targetAspectRatio) > 0.001 {
-            previewFrame.y = view.safeAreaInsets.top
-            previewFrame.height = previewFrame.width * targetAspectRatio
-            cornerRadius = 18
-        }
-        previewView.frame = previewFrame
-        previewView.previewLayer.cornerRadius = cornerRadius
-        
-        // Bottom bar is pinned to the bottom of the screen, residing either directly above safe area / bottom margin
-        // or (for taller screens) floating in the center of the black area between the bottom of the capture view and safe area.
-        let bottomBarHeight = bottomBar.systemLayoutSizeFitting(UIView.layoutFittingCompressedSize,
-                                                                withHorizontalFittingPriority: .fittingSizeLevel,
-                                                                verticalFittingPriority: .fittingSizeLevel).height
-        let blackBarHeight = view.bounds.maxY - previewFrame.maxY - view.safeAreaInsets.bottom
-        var bottomBarOffset = UIDevice.current.hasIPhoneXNotch ? view.safeAreaInsets.bottom : 16
-        if blackBarHeight > bottomBarHeight {
-            bottomBarOffset += 0.5*(blackBarHeight - bottomBarHeight)
-        }
-        bottomBarOffsetFromBottom.constant = bottomBarOffset
-        
-        // Bottom edge of the capture button is either 16pts above bottom edge of the camera capture view
-        // or directly adjacent to the top of the bottom bar, whatever is higher.
-        let captureButtonOffsetFromBottom = max(view.bounds.maxY - (previewFrame.maxY - 16), bottomBarOffset + bottomBarHeight)
-        captureButtonVPositionConstraint.constant = captureButtonOffsetFromBottom
-    }
-    
-    private var topBarOffsetFromTop: NSLayoutConstraint!
-    private var bottomBarOffsetFromBottom: NSLayoutConstraint!
-    private var captureButtonVPositionConstraint: NSLayoutConstraint!
-    
-    override func viewDidLoad() {
-        super.viewDidLoad()
-        
-        setupPhotoCapture()
-        
         updateFlashModeControl()
         
         view.addGestureRecognizer(pinchZoomGesture)
@@ -200,8 +97,11 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
         }
         
         tapToFocusGesture.require(toFail: doubleTapToSwitchCameraGesture)
-        
-        mediaPickerThumbnailButton.configure()
+
+        bottomBar.photoLibraryButton.configure()
+        if let sideBar = sideBar {
+            sideBar.photoLibraryButton.configure()
+        }
     }
     
     private var isVisible = false
@@ -289,125 +189,417 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
             topBarOffsetFromTop.constant = max(maxInsetDimension, previewView.frame.minY)
         }
     }
-    
-    // MARK: - Interactive Dismiss
-    
-    func interactiveDismissDidBegin(_ interactiveDismiss: UIPercentDrivenInteractiveTransition) {
-        view.backgroundColor = .clear
-    }
-    
-    func interactiveDismissDidFinish(_ interactiveDismiss: UIPercentDrivenInteractiveTransition) {
-        dismiss(animated: true)
+
+    override func traitCollectionDidChange(_ previousTraitCollection: UITraitCollection?) {
+        super.traitCollectionDidChange(previousTraitCollection)
+        isIPadUIInRegularMode = traitCollection.horizontalSizeClass == .regular && traitCollection.verticalSizeClass == .regular
     }
-    
-    func interactiveDismissDidCancel(_ interactiveDismiss: UIPercentDrivenInteractiveTransition) {
-        view.backgroundColor = Theme.darkThemeBackgroundColor
+
+    // MARK: - Layout Code
+
+    private var isIPadUIInRegularMode = false {
+        didSet {
+            guard oldValue != isIPadUIInRegularMode else { return }
+            updateIPadInterfaceLayout()
+        }
     }
-    
-    // MARK: - Top Bar
-    
+
     private var isRecordingVideo: Bool = false {
         didSet {
             if isRecordingVideo {
                 topBar.mode = .videoRecording
                 topBar.recordingTimerView.startCounting()
-                
+
                 cameraCaptureControl.setState(.recording, animationDuration: 0.4)
+                if let sideBar = sideBar {
+                    sideBar.cameraCaptureControl.setState(.recording, animationDuration: 0.4)
+                }
             } else {
-                topBar.mode = .cameraControls
+                topBar.mode = isIPadUIInRegularMode ? .closeButton : .cameraControls
                 topBar.recordingTimerView.stopCounting()
-                
+
                 cameraCaptureControl.setState(.initial, animationDuration: 0.2)
+                if let sideBar = sideBar {
+                    sideBar.cameraCaptureControl.setState(.initial, animationDuration: 0.2)
+                }
             }
-            
+
+            if let sideBar = sideBar {
+                sideBar.isRecordingVideo = isRecordingVideo
+            }
+
             doneButton.isHidden = isRecordingVideo || doneButton.badgeNumber == 0
             bottomBar.isHidden = isRecordingVideo
         }
     }
+
     private var isInBatchMode: Bool = false {
         didSet {
-            let imageName = isInBatchMode ? "media-composer-create-album-solid-24" : "media-composer-create-album-outline-24"
-            batchModeControl.setImage(imageName: imageName)
+            let buttonImage = isInBatchMode ? ButtonImages.batchModeOn : ButtonImages.batchModeOff
+            topBar.batchModeButton.setImage(buttonImage, for: .normal)
+            if let sideBar = sideBar {
+                sideBar.batchModeButton.setImage(buttonImage, for: .normal)
+            }
         }
     }
+
+    private let topBar = TopBar(frame: .zero)
+    private var topBarOffsetFromTop: NSLayoutConstraint!
+
+    private let bottomBar = BottomBar(frame: .zero)
+    private var bottomBarOffsetFromBottom: NSLayoutConstraint!
+
+    private var sideBar: SideBar? // Optional because most devices are iPhones and will never need this.
+
+    private let cameraCaptureControl = CameraCaptureControl(axis: .horizontal)
+    private var captureButtonVPositionConstraint: NSLayoutConstraint!
+
+    private lazy var tapToFocusView: AnimationView = {
+        let view = AnimationView(name: "tap_to_focus")
+        view.animationSpeed = 1
+        view.backgroundBehavior = .forceFinish
+        view.contentMode = .scaleAspectFit
+        view.autoSetDimensions(to: CGSize(square: 150))
+        view.setContentHuggingHigh()
+        return view
+    }()
+
+    private var previewView: CapturePreviewView {
+        return photoCapture.previewView
+    }
+
+    private lazy var doneButton: MediaDoneButton = {
+        let button = MediaDoneButton(type: .custom)
+        button.badgeNumber = 0
+        button.userInterfaceStyleOverride = .dark
+        return button
+    }()
+    private var doneButtonIPhoneConstraints: [NSLayoutConstraint]!
+    private var doneButtonIPadConstraints: [NSLayoutConstraint]!
+
+    private func initializeUI() {
+        // Step 1. Initialize all UI elements for iPhone layout (which can also be used on an iPad).
+
+        view.addSubview(previewView)
+
+        view.addSubview(topBar)
+        topBar.mode = .cameraControls
+        topBar.closeButton.addTarget(self, action: #selector(didTapClose), for: .touchUpInside)
+        topBar.batchModeButton.addTarget(self, action: #selector(didTapBatchMode), for: .touchUpInside)
+        topBar.flashModeButton.addTarget(self, action: #selector(didTapFlashMode), for: .touchUpInside)
+        topBar.autoPinWidthToSuperview()
+        topBarOffsetFromTop = topBar.autoPinEdge(toSuperviewEdge: .top)
+
+        view.addSubview(bottomBar)
+        bottomBar.switchCameraButton.addTarget(self, action: #selector(didTapSwitchCamera), for: .touchUpInside)
+        bottomBar.photoLibraryButton.addTarget(self, action: #selector(didTapPhotoLibrary), for: .touchUpInside)
+        bottomBar.autoPinWidthToSuperview()
+        bottomBarOffsetFromBottom = view.bottomAnchor.constraint(equalTo: bottomBar.bottomAnchor)
+        view.addConstraint(bottomBarOffsetFromBottom)
+
+        view.addSubview(cameraCaptureControl)
+        captureButtonVPositionConstraint = view.bottomAnchor.constraint(equalTo: cameraCaptureControl.bottomAnchor)
+        view.addConstraint(captureButtonVPositionConstraint)
+        cameraCaptureControl.shutterButtonLayoutGuide.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = true
+        cameraCaptureControl.autoPinTrailingToSuperviewMargin()
+
+        view.addSubview(doneButton)
+        doneButton.isHidden = true
+        doneButton.translatesAutoresizingMaskIntoConstraints = false
+        doneButtonIPhoneConstraints = [ doneButton.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor),
+                                        doneButton.centerYAnchor.constraint(equalTo: cameraCaptureControl.centerYAnchor) ]
+        view.addConstraints(doneButtonIPhoneConstraints)
+        doneButton.addTarget(self, action: #selector(didTapDoneButton), for: .touchUpInside)
+
+        view.addSubview(tapToFocusView)
+        tapToFocusView.isUserInteractionEnabled = false
+        tapToFocusLeftConstraint = tapToFocusView.centerXAnchor.constraint(equalTo: view.leftAnchor)
+        tapToFocusLeftConstraint.isActive = true
+        tapToFocusTopConstraint = tapToFocusView.centerYAnchor.constraint(equalTo: view.topAnchor)
+        tapToFocusTopConstraint.isActive = true
+
+        // Step 2. Check if we're running on an iPad and update UI accordingly.
+        // Note that `traitCollectionDidChange` won't be called during initial view loading process.
+        isIPadUIInRegularMode = traitCollection.horizontalSizeClass == .regular && traitCollection.verticalSizeClass == .regular
+
+        // This background footer doesn't let view controller underneath current VC
+        // to be visible at the bottom of the screen during interactive dismiss.
+        if UIDevice.current.hasIPhoneXNotch {
+            let blackFooter = UIView()
+            blackFooter.backgroundColor = view.backgroundColor
+            view.insertSubview(blackFooter, at: 0)
+            blackFooter.autoPinWidthToSuperview()
+            blackFooter.autoPinEdge(toSuperviewEdge: .bottom)
+            blackFooter.heightAnchor.constraint(equalTo: view.heightAnchor, multiplier: 0.5).isActive = true
+        }
+    }
+
+    private func initializeIPadSpecificUIIfNecessary() {
+        guard sideBar == nil else { return }
+
+        let sideBar = SideBar(frame: .zero)
+        sideBar.batchModeButton.addTarget(self, action: #selector(didTapBatchMode), for: .touchUpInside)
+        sideBar.flashModeButton.addTarget(self, action: #selector(didTapFlashMode), for: .touchUpInside)
+        sideBar.switchCameraButton.addTarget(self, action: #selector(didTapSwitchCamera), for: .touchUpInside)
+        sideBar.photoLibraryButton.addTarget(self, action: #selector(didTapPhotoLibrary), for: .touchUpInside)
+        view.addSubview(sideBar)
+        sideBar.autoPinTrailingToSuperviewMargin()
+        sideBar.cameraCaptureControl.shutterButtonLayoutGuide.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive = true
+        self.sideBar = sideBar
+
+        sideBar.batchModeButton.setImage(isInBatchMode ? ButtonImages.batchModeOn : ButtonImages.batchModeOff, for: .normal)
+        updateFlashModeControl()
+
+        doneButtonIPadConstraints = [ doneButton.centerXAnchor.constraint(equalTo: sideBar.centerXAnchor),
+                                      doneButton.bottomAnchor.constraint(equalTo: sideBar.topAnchor, constant: -16)]
+    }
+
+    override func viewDidLayoutSubviews() {
+        super.viewDidLayoutSubviews()
+
+        guard !interactiveDismiss.interactionInProgress else { return }
+
+        // Clamp capture view to 16:9 on iPhones.
+        var previewFrame = view.bounds
+        var cornerRadius: CGFloat = 0
+        if !UIDevice.current.isIPad {
+            let targetAspectRatio: CGFloat = 16/9
+            let currentAspectRatio: CGFloat = previewFrame.height / previewFrame.width
+
+            if abs(currentAspectRatio - targetAspectRatio) > 0.001 {
+                previewFrame.y = view.safeAreaInsets.top
+                previewFrame.height = previewFrame.width * targetAspectRatio
+                cornerRadius = 18
+            }
+        }
+        previewView.frame = previewFrame
+        previewView.previewLayer.cornerRadius = cornerRadius
+
+        // Bottom bar is pinned to the bottom of the screen, residing either directly above safe area / bottom margin
+        // or (for taller screens) floating in the center of the black area between the bottom of the capture view and safe area.
+        let bottomBarHeight = bottomBar.systemLayoutSizeFitting(UIView.layoutFittingCompressedSize,
+                                                                withHorizontalFittingPriority: .fittingSizeLevel,
+                                                                verticalFittingPriority: .fittingSizeLevel).height
+        let blackBarHeight = view.bounds.maxY - previewFrame.maxY - view.safeAreaInsets.bottom
+        var bottomBarOffset = UIDevice.current.hasIPhoneXNotch ? view.safeAreaInsets.bottom : 16
+        if blackBarHeight > bottomBarHeight {
+            bottomBarOffset += 0.5*(blackBarHeight - bottomBarHeight)
+        }
+        bottomBarOffsetFromBottom.constant = bottomBarOffset
+
+        // Bottom edge of the capture button is either 16pts above bottom edge of the camera capture view
+        // or directly adjacent to the top of the bottom bar, whatever is higher.
+        let captureButtonOffsetFromBottom = max(view.bounds.maxY - (previewFrame.maxY - 16), bottomBarOffset + bottomBarHeight)
+        captureButtonVPositionConstraint.constant = captureButtonOffsetFromBottom
+    }
+
+    private func updateIPadInterfaceLayout() {
+        owsAssertDebug(UIDevice.current.isIPad)
+
+        if isIPadUIInRegularMode {
+            initializeIPadSpecificUIIfNecessary()
+
+            view.removeConstraints(doneButtonIPhoneConstraints)
+            view.addConstraints(doneButtonIPadConstraints)
+        } else {
+            view.removeConstraints(doneButtonIPadConstraints)
+            view.addConstraints(doneButtonIPhoneConstraints)
+        }
+
+        if !isRecordingVideo {
+            topBar.mode = isIPadUIInRegularMode ? .closeButton : .cameraControls
+        }
+        cameraCaptureControl.isHidden = isIPadUIInRegularMode
+        bottomBar.isHidden = isIPadUIInRegularMode
+        sideBar?.isHidden = !isIPadUIInRegularMode
+    }
+    
+    // MARK: - Interactive Dismiss
+    
+    func interactiveDismissDidBegin(_ interactiveDismiss: UIPercentDrivenInteractiveTransition) {
+        view.backgroundColor = .clear
+    }
+    
+    func interactiveDismissDidFinish(_ interactiveDismiss: UIPercentDrivenInteractiveTransition) {
+        dismiss(animated: true)
+    }
+    
+    func interactiveDismissDidCancel(_ interactiveDismiss: UIPercentDrivenInteractiveTransition) {
+        view.backgroundColor = Theme.darkThemeBackgroundColor
+    }
     
+    // MARK: - Top Bar
+
+    private struct ButtonImages {
+        static let close = UIImage(named: "media-composer-close")
+        static let switchCamera = UIImage(named: "media-composer-switch-camera-24")
+
+        static let batchModeOn = UIImage(named: "media-composer-create-album-solid-24")
+        static let batchModeOff = UIImage(named: "media-composer-create-album-outline-24")
+
+        static let flashOn = UIImage(named: "media-composer-flash-filled-24")
+        static let flashOff = UIImage(named: "media-composer-flash-outline-24")
+        static let flashAuto = UIImage(named: "media-composer-flash-auto-24")
+    }
+
     private class TopBar: UIView {
-        let recordingTimerView = RecordingTimerView(frame: .zero)
-        private let navStack: UIStackView
+        private(set) var closeButton: CameraOverlayButton!
+
+        private var cameraControlsContainerView: UIView!
+        private(set) var flashModeButton: CameraOverlayButton!
+        private(set) var batchModeButton: CameraOverlayButton!
+
+        private(set) var recordingTimerView: RecordingTimerView!
+
+        override init(frame: CGRect) {
+            super.init(frame: frame)
+            commonInit()
+        }
         
-        init(navbarItems: [UIView]) {
-            self.navStack = UIStackView(arrangedSubviews: navbarItems)
-            
-            super.init(frame: .zero)
-            
+        required init?(coder: NSCoder) {
+            super.init(coder: coder)
+            commonInit()
+        }
+
+        private func commonInit() {
             layoutMargins = UIEdgeInsets(hMargin: 8, vMargin: 4)
-            
-            addSubview(navStack)
-            navStack.spacing = 16
-            navStack.autoPinEdgesToSuperviewMargins()
-            
+
+            closeButton = CameraOverlayButton(image: ButtonImages.close, userInterfaceStyleOverride: .dark)
+            addSubview(closeButton)
+            closeButton.autoPinHeightToSuperviewMargins()
+            closeButton.autoPinLeadingToSuperviewMargin()
+
+            recordingTimerView = RecordingTimerView(frame: .zero)
             addSubview(recordingTimerView)
             recordingTimerView.autoPinHeightToSuperview(withMargin: 8)
             recordingTimerView.autoHCenterInSuperview()
+
+            flashModeButton = CameraOverlayButton(image: ButtonImages.flashAuto, userInterfaceStyleOverride: .dark)
+            batchModeButton = CameraOverlayButton(image: ButtonImages.batchModeOff, userInterfaceStyleOverride: .dark)
+            let stackView = UIStackView(arrangedSubviews: [ batchModeButton, flashModeButton ])
+            stackView.spacing = 16
+            addSubview(stackView)
+            stackView.autoPinHeightToSuperviewMargins()
+            stackView.autoPinTrailingToSuperviewMargin()
+            cameraControlsContainerView = stackView
         }
-        
-        required init?(coder: NSCoder) {
-            fatalError("init(coder:) has not been implemented")
-        }
-        
+
+        // MARK: - Mode
+
         enum Mode {
-            case cameraControls, videoRecording
+            case cameraControls, closeButton, videoRecording
         }
         
         var mode: Mode = .cameraControls {
             didSet {
                 switch mode {
+                case .cameraControls:
+                    closeButton.isHidden = false
+                    cameraControlsContainerView.isHidden = false
+                    recordingTimerView?.isHidden = true
+
+                case .closeButton:
+                    closeButton.isHidden = false
+                    cameraControlsContainerView.isHidden = true
+                    recordingTimerView?.isHidden = true
+
                 case .videoRecording:
-                    navStack.isHidden = true
+                    closeButton.isHidden = true
+                    cameraControlsContainerView.isHidden = true
                     recordingTimerView.isHidden = false
-                case .cameraControls:
-                    navStack.isHidden = false
-                    recordingTimerView.isHidden = true
                 }
             }
         }
     }
-    
-    private lazy var topBar: TopBar = {
-        return TopBar(navbarItems: [dismissControl,
-                                    UIView.hStretchingSpacer(),
-                                    batchModeControl,
-                                    flashModeControl])
-    }()
-    
+
     // MARK: - Bottom Bar
     
     private class BottomBar: UIView {
-        let buttonStack: UIStackView
+        private(set) var photoLibraryButton: MediaPickerThumbnailButton!
+        private(set) var switchCameraButton: CameraOverlayButton!
         
-        init(items: [UIView]) {
-            self.buttonStack = UIStackView(arrangedSubviews: items)
-            
-            super.init(frame: .zero)
-            
-            layoutMargins = UIEdgeInsets(top: 0, leading: 12, bottom: 0, trailing: 14)
-            
-            addSubview(buttonStack)
-            buttonStack.spacing = 16
-            buttonStack.autoPinEdgesToSuperviewMargins()
+        override init(frame: CGRect) {
+            super.init(frame: frame)
+            commonInit()
         }
         
-        required init?(coder aDecoder: NSCoder) {
-            fatalError("init(coder:) has not been implemented")
+        required init?(coder: NSCoder) {
+            super.init(coder: coder)
+            commonInit()
+        }
+
+        private func commonInit() {
+            layoutMargins = UIEdgeInsets(top: 0, leading: 12, bottom: 0, trailing: 14)
+
+            photoLibraryButton = MediaPickerThumbnailButton(frame: CGRect(origin: .zero, size: .square(bounds.height)))
+            addSubview(photoLibraryButton)
+            photoLibraryButton.autoVCenterInSuperview()
+            photoLibraryButton.autoPinLeadingToSuperviewMargin()
+
+            switchCameraButton = CameraOverlayButton(image: ButtonImages.switchCamera, userInterfaceStyleOverride: .dark)
+            addSubview(switchCameraButton)
+            switchCameraButton.autoPinHeightToSuperviewMargins()
+            switchCameraButton.autoPinTrailingToSuperviewMargin()
         }
     }
-    
-    private lazy var bottomBar: BottomBar = {
-        return BottomBar(items: [mediaPickerThumbnailButton.embeddedInContainerView(layoutMargins: UIEdgeInsets(margin: 4)),
-                                 UIView.hStretchingSpacer(),
-                                 switchCameraControl])
-    }()
-    
+
+    // MARK: - Side Bar
+
+    private class SideBar: UIView {
+        var isRecordingVideo = false {
+            didSet {
+                cameraControlsContainerView.isHidden = isRecordingVideo
+                photoLibraryButton.isHidden = isRecordingVideo
+            }
+        }
+
+        private var cameraControlsContainerView: UIView!
+        private(set) var flashModeButton: CameraOverlayButton!
+        private(set) var batchModeButton: CameraOverlayButton!
+        private(set) var switchCameraButton: CameraOverlayButton!
+
+        private(set) var photoLibraryButton: MediaPickerThumbnailButton!
+
+        private(set) var cameraCaptureControl = CameraCaptureControl(axis: .vertical)
+
+        override init(frame: CGRect) {
+            super.init(frame: frame)
+            commonInit()
+        }
+
+        required init?(coder: NSCoder) {
+            super.init(coder: coder)
+            commonInit()
+        }
+
+        private func commonInit() {
+            layoutMargins = UIEdgeInsets(margin: 8)
+
+            flashModeButton = CameraOverlayButton(image: ButtonImages.flashAuto, userInterfaceStyleOverride: .dark)
+            switchCameraButton = CameraOverlayButton(image: ButtonImages.switchCamera, userInterfaceStyleOverride: .dark)
+            batchModeButton = CameraOverlayButton(image: ButtonImages.batchModeOff, userInterfaceStyleOverride: .dark)
+            let stackView = UIStackView(arrangedSubviews: [ batchModeButton, flashModeButton, switchCameraButton ])
+            stackView.spacing = 16
+            stackView.axis = .vertical
+            addSubview(stackView)
+            stackView.autoPinWidthToSuperviewMargins()
+            stackView.autoPinTopToSuperviewMargin()
+            cameraControlsContainerView = stackView
+
+            addSubview(cameraCaptureControl)
+            cameraCaptureControl.autoHCenterInSuperview()
+            cameraCaptureControl.shutterButtonLayoutGuide.topAnchor.constraint(equalTo: stackView.bottomAnchor, constant: 36).isActive = true
+
+            photoLibraryButton = MediaPickerThumbnailButton(frame: CGRect(origin: .zero, size: .square(bounds.height)))
+            addSubview(photoLibraryButton)
+            photoLibraryButton.autoHCenterInSuperview()
+            photoLibraryButton.topAnchor.constraint(equalTo: cameraCaptureControl.shutterButtonLayoutGuide.bottomAnchor, constant: 36).isActive = true
+            photoLibraryButton.bottomAnchor.constraint(lessThanOrEqualTo: layoutMarginsGuide.bottomAnchor).isActive = true
+
+        }
+    }
+
+
     func updateDoneButtonAppearance () {
         if isInBatchMode, let badgeNumber = dataSource?.numberOfMediaItems {
             doneButton.badgeNumber = badgeNumber
@@ -417,51 +609,8 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
         }
     }
     
-    // MARK: - Views
-    
-    private let cameraCaptureControl = CameraCaptureControl()
-    
-    private var previewView: CapturePreviewView {
-        return photoCapture.previewView
-    }
-    
-    private lazy var mediaPickerThumbnailButton: MediaPickerThumbnailButton = {
-        let button = MediaPickerThumbnailButton(frame: .zero)
-        button.addTarget(self, action: #selector(didTapPhotoLibrary), for: .touchUpInside)
-        return button
-    }()
-    
-    private lazy var dismissControl: PhotoControl = {
-        return PhotoControl(imageName: "media-composer-close", userInterfaceStyleOverride: .dark) { [weak self] in
-            self?.didTapClose()
-        }
-    }()
-    
-    private lazy var switchCameraControl: PhotoControl = {
-        return PhotoControl(imageName: "media-composer-switch-camera-24", userInterfaceStyleOverride: .dark) { [weak self] in
-            self?.didTapSwitchCamera()
-        }
-    }()
-    
-    private lazy var flashModeControl: PhotoControl = {
-        return PhotoControl(imageName: "media-composer-flash-auto-24", userInterfaceStyleOverride: .dark) { [weak self] in
-            self?.didTapFlashMode()
-        }
-    }()
-    
-    private lazy var batchModeControl: PhotoControl = {
-        return PhotoControl(imageName: "media-composer-create-album-outline-24", userInterfaceStyleOverride: .dark) { [weak self] in
-            self?.didTapBatchMode()
-        }
-    }()
-    
-    private lazy var doneButton: MediaDoneButton = {
-        let button = MediaDoneButton(type: .custom)
-        button.badgeNumber = 0
-        button.userInterfaceStyleOverride = .dark
-        return button
-    }()
-    
+    // MARK: - Gestures
+
     lazy var pinchZoomGesture: UIPinchGestureRecognizer = {
         return UIPinchGestureRecognizer(target: self, action: #selector(didPinchZoom(pinchGesture:)))
     }()
@@ -500,9 +649,11 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
     }
     
     private func switchCamera() {
+        let switchCameraButton = bottomBar.switchCameraButton!
+        ///TODO: side bar
         UIView.animate(withDuration: 0.2) {
             let epsilonToForceCounterClockwiseRotation: CGFloat = 0.00001
-            self.switchCameraControl.transform = self.switchCameraControl.transform.rotate(.pi + epsilonToForceCounterClockwiseRotation)
+            switchCameraButton.transform = switchCameraButton.transform.rotate(.pi + epsilonToForceCounterClockwiseRotation)
         }
         photoCapture.switchCamera().catch { error in
             self.showFailureUI(error: error)
@@ -596,23 +747,22 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
     
     // MARK: - Focus Animations
     
-    var tapToFocusLeftConstraint: NSLayoutConstraint!
-    var tapToFocusTopConstraint: NSLayoutConstraint!
-    func positionTapToFocusView(center: CGPoint) {
+    private var tapToFocusLeftConstraint: NSLayoutConstraint!
+    private var tapToFocusTopConstraint: NSLayoutConstraint!
+    private var lastUserFocusTapPoint: CGPoint?
+
+    private func positionTapToFocusView(center: CGPoint) {
         tapToFocusLeftConstraint.constant = center.x
         tapToFocusTopConstraint.constant = center.y
     }
     
-    func startFocusAnimation() {
+    private func startFocusAnimation() {
         tapToFocusView.stop()
         tapToFocusView.play(fromProgress: 0.0, toProgress: 0.9)
     }
     
-    var lastUserFocusTapPoint: CGPoint?
-    func completeFocusAnimation(forFocusPoint focusPoint: CGPoint) {
-        guard let lastUserFocusTapPoint = lastUserFocusTapPoint else {
-            return
-        }
+    private func completeFocusAnimation(forFocusPoint focusPoint: CGPoint) {
+        guard let lastUserFocusTapPoint = lastUserFocusTapPoint else { return }
         
         guard lastUserFocusTapPoint.within(0.005, of: focusPoint) else {
             Logger.verbose("focus completed for obsolete focus point. User has refocused.")
@@ -625,9 +775,7 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
     // MARK: - Orientation
     
     private func updateIconOrientations(isAnimated: Bool, captureOrientation: AVCaptureVideoOrientation) {
-        guard !UIDevice.current.isIPad else {
-            return
-        }
+        guard !UIDevice.current.isIPad else { return }
         
         Logger.verbose("captureOrientation: \(captureOrientation)")
         
@@ -650,8 +798,8 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
         let tranformFromCameraType: CGAffineTransform = photoCapture.desiredPosition == .front ? CGAffineTransform(rotationAngle: -.pi) : .identity
         
         let updateOrientation = {
-            self.flashModeControl.transform = transformFromOrientation
-            self.switchCameraControl.transform = transformFromOrientation.concatenating(tranformFromCameraType)
+            self.topBar.flashModeButton?.transform = transformFromOrientation
+            self.bottomBar.switchCameraButton?.transform = transformFromOrientation.concatenating(tranformFromCameraType)
         }
         
         if isAnimated {
@@ -673,6 +821,9 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
     private func setupPhotoCapture() {
         photoCapture.delegate = self
         cameraCaptureControl.delegate = photoCapture
+        if let sideBar = sideBar {
+            sideBar.cameraCaptureControl.delegate = photoCapture
+        }
         
         // If the session is already running, we're good to go.
         guard !photoCapture.session.isRunning else {
@@ -719,21 +870,25 @@ class PhotoCaptureViewController: OWSViewController, InteractiveDismissDelegate
     }
     
     private func updateFlashModeControl() {
-        let imageName: String
+        let image: UIImage?
         switch photoCapture.flashMode {
         case .auto:
-            imageName = "media-composer-flash-auto-24"
+            image = ButtonImages.flashAuto
+
         case .on:
-            imageName = "media-composer-flash-filled-24"
+            image = ButtonImages.flashOn
+
         case .off:
-            imageName = "media-composer-flash-outline-24"
+            image = ButtonImages.flashOff
+
         @unknown default:
             owsFailDebug("unexpected photoCapture.flashMode: \(photoCapture.flashMode.rawValue)")
-            
-            imageName = "media-composer-flash-auto-24"
+            image = ButtonImages.flashAuto
+        }
+        topBar.flashModeButton.setImage(image, for: .normal)
+        if let sideBar = sideBar {
+            sideBar.flashModeButton.setImage(image, for: .normal)
         }
-        
-        self.flashModeControl.setImage(imageName: imageName)
     }
 }
 
@@ -803,16 +958,25 @@ extension PhotoCaptureViewController: PhotoCaptureDelegate {
     
     // MARK: -
     
-    var zoomScaleReferenceHeight: CGFloat? {
+    var zoomScaleReferenceDistance: CGFloat? {
+        if isIPadUIInRegularMode {
+            return view.bounds.width
+        }
         return view.bounds.height
     }
     
     func beginCaptureButtonAnimation(_ duration: TimeInterval) {
         cameraCaptureControl.setState(.recording, animationDuration: duration)
+        if let sideBar = sideBar {
+            sideBar.cameraCaptureControl.setState(.recording, animationDuration: duration)
+        }
     }
     
     func endCaptureButtonAnimation(_ duration: TimeInterval) {
         cameraCaptureControl.setState(.initial, animationDuration: duration)
+        if let sideBar = sideBar {
+            sideBar.cameraCaptureControl.setState(.initial, animationDuration: duration)
+        }
     }
     
     func photoCapture(_ photoCapture: PhotoCapture, didChangeOrientation orientation: AVCaptureVideoOrientation) {
