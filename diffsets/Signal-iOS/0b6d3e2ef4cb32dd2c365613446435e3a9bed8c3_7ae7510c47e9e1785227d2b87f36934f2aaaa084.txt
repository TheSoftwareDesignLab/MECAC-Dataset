diff --git a/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentBodyText.swift b/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentBodyText.swift
index dcc95325be7..175d1d1dd8d 100644
--- a/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentBodyText.swift
+++ b/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentBodyText.swift
@@ -715,11 +715,18 @@ public class CVComponentBodyText: CVComponentBase, CVComponent {
             }
         }
 
+        var extraCacheKeyFactors = [String]()
+        if hasPendingMessageRequest {
+            extraCacheKeyFactors.append("hasPendingMessageRequest")
+        }
+        extraCacheKeyFactors.append("items: \(!bodyTextState.items.isEmpty)")
+
         return CVTextViewConfig(attributedText: attributedText,
                                 font: textMessageFont,
                                 textColor: bodyTextColor,
                                 textAlignment: textAlignment,
-                                linkTextAttributes: linkTextAttributes)
+                                linkTextAttributes: linkTextAttributes,
+                                extraCacheKeyFactors: extraCacheKeyFactors)
     }
 
     private static let measurementKey_stackView = "CVComponentBodyText.measurementKey_stackView"
diff --git a/SignalMessaging/Views/ConversationView/CVText.swift b/SignalMessaging/Views/ConversationView/CVText.swift
index cab012cd506..971f10eee19 100644
--- a/SignalMessaging/Views/ConversationView/CVText.swift
+++ b/SignalMessaging/Views/ConversationView/CVText.swift
@@ -60,7 +60,7 @@ public enum CVTextValue: Equatable, Hashable {
         case .text(let text):
             return "t\(text)"
         case .attributedText(let attributedText):
-            return "a\(attributedText.description)"
+            return "a\(attributedText.string.description)"
         }
     }
 }
@@ -171,6 +171,7 @@ public struct CVTextViewConfig {
     public let textColor: UIColor
     public let textAlignment: NSTextAlignment?
     public let linkTextAttributes: [NSAttributedString.Key: Any]?
+    public let extraCacheKeyFactors: [String]?
 
     public init(text: String,
                 font: UIFont,
@@ -183,19 +184,22 @@ public struct CVTextViewConfig {
         self.textColor = textColor
         self.textAlignment = textAlignment
         self.linkTextAttributes = linkTextAttributes
+        self.extraCacheKeyFactors = nil
     }
 
     public init(attributedText: NSAttributedString,
                 font: UIFont,
                 textColor: UIColor,
                 textAlignment: NSTextAlignment? = nil,
-                linkTextAttributes: [NSAttributedString.Key: Any]? = nil) {
+                linkTextAttributes: [NSAttributedString.Key: Any]? = nil,
+                extraCacheKeyFactors: [String]? = nil) {
 
         self.text = .attributedText(attributedText: attributedText)
         self.font = font
         self.textColor = textColor
         self.textAlignment = textAlignment
         self.linkTextAttributes = linkTextAttributes
+        self.extraCacheKeyFactors = extraCacheKeyFactors
     }
 
     public var stringValue: String {
@@ -209,7 +213,13 @@ public struct CVTextViewConfig {
     public var cacheKey: CacheKey {
         // textColor and linkTextAttributes (for the attributes we set)
         // don't affect measurement.
-        "\(text.cacheKey),\(font.fontName),\(font.pointSize),\(textAlignment?.rawValue ?? 0)"
+        var cacheKey = "\(text.cacheKey),\(font.fontName),\(font.pointSize),\(textAlignment?.rawValue ?? 0)"
+
+        if let extraCacheKeyFactors = self.extraCacheKeyFactors {
+            cacheKey += extraCacheKeyFactors.joined(separator: ",")
+        }
+
+        return cacheKey
     }
 }
 
