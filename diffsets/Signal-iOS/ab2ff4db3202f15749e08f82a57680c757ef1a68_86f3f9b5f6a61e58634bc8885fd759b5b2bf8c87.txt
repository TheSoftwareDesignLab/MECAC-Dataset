diff --git a/Podfile b/Podfile
index c8821e166f2..a9c800b1471 100644
--- a/Podfile
+++ b/Podfile
@@ -41,7 +41,7 @@ def shared_pods
   pod 'SQLCipher', ">= 4.0.1"
 
   # Forked for performance optimizations that are not likely to be upstreamed as they are specific
-  # to our limited use of Mantle 
+  # to our limited use of Mantle
   pod 'Mantle', git: 'https://github.com/signalapp/Mantle', branch: 'signal-master'
   # pod 'Mantle', path: '../Mantle'
 
@@ -63,6 +63,7 @@ def shared_pods
   pod 'AFNetworking', inhibit_warnings: true
   pod 'PureLayout', :inhibit_warnings => true
   pod 'Reachability', :inhibit_warnings => true
+  pod 'lottie-ios', :inhibit_warnings => true
 end
 
 target 'Signal' do
@@ -105,15 +106,15 @@ def enable_extension_support_for_purelayout(installer)
   end
 end
 
-# We want some warning to be treated as errors. 
+# We want some warning to be treated as errors.
 #
 # NOTE: We have to manually keep this list in sync with what's in our
-# Signal.xcodeproj config in Xcode go to: 
+# Signal.xcodeproj config in Xcode go to:
 #   Signal Project > Build Settings > Other Warning Flags
 def configure_warning_flags(installer)
   installer.pods_project.targets.each do |target|
       target.build_configurations.each do |build_configuration|
-          build_configuration.build_settings['WARNING_CFLAGS'] = ['$(inherited)', 
+          build_configuration.build_settings['WARNING_CFLAGS'] = ['$(inherited)',
                                                                   '-Werror=incompatible-pointer-types',
                                                                   '-Werror=protocol',
                                                                   '-Werror=incomplete-implementation',
@@ -126,7 +127,7 @@ def configure_testable_build(installer)
   installer.pods_project.targets.each do |target|
     target.build_configurations.each do |build_configuration|
       next unless ["Testable Release", "Debug"].include?(build_configuration.name)
- 
+
       build_configuration.build_settings['OTHER_CFLAGS'] ||= '$(inherited) -DTESTABLE_BUILD'
       build_configuration.build_settings['OTHER_SWIFT_FLAGS'] ||= '$(inherited) -DTESTABLE_BUILD'
       build_configuration.build_settings['GCC_PREPROCESSOR_DEFINITIONS'] ||= '$(inherited) TESTABLE_BUILD=1'
diff --git a/Podfile.lock b/Podfile.lock
index 8d7cabaa4b4..684f54dce53 100644
--- a/Podfile.lock
+++ b/Podfile.lock
@@ -69,6 +69,7 @@ PODS:
   - libwebp/utils (1.0.2):
     - libwebp/core
   - libwebp/webp (1.0.2)
+  - lottie-ios (3.1.3)
   - Mantle (2.1.0):
     - Mantle/extobjc (= 2.1.0)
   - Mantle/extobjc (2.1.0)
@@ -226,6 +227,7 @@ DEPENDENCIES:
   - GRKOpenSSLFramework (from `https://github.com/signalapp/GRKOpenSSLFramework`, branch `mkirk/1.0.2t`)
   - HKDFKit (from `https://github.com/signalapp/HKDFKit.git`)
   - HKDFKit/Tests (from `https://github.com/signalapp/HKDFKit.git`)
+  - lottie-ios
   - Mantle (from `https://github.com/signalapp/Mantle`, branch `signal-master`)
   - PromiseKit (= 6.5.3)
   - PureLayout
@@ -248,6 +250,7 @@ SPEC REPOS:
     - GRDB.swift
     - libPhoneNumber-iOS
     - libwebp
+    - lottie-ios
     - PromiseKit
     - PureLayout
     - Reachability
@@ -323,6 +326,7 @@ SPEC CHECKSUMS:
   HKDFKit: bd6b9566654253aa45ef60a205979ec291f00641
   libPhoneNumber-iOS: 0a32a9525cf8744fe02c5206eb30d571e38f7d75
   libwebp: b068a3bd7c45f7460f6715be7bed1a18fd5d6b48
+  lottie-ios: 496ac5cea1bbf1a7bd1f1f472f3232eb1b8d744b
   Mantle: 2fa750afa478cd625a94230fbf1c13462f29395b
   PromiseKit: c609029bdd801f792551a504c695c7d3098b42cd
   PureLayout: f08c01b8dec00bb14a1fefa3de4c7d9c265df85e
@@ -338,6 +342,6 @@ SPEC CHECKSUMS:
   YapDatabase: b418a4baa6906e8028748938f9159807fd039af4
   YYImage: 1e1b62a9997399593e4b9c4ecfbbabbf1d3f3b54
 
-PODFILE CHECKSUM: c7564b6ed5c01b9947c62846de7595ed2637cb48
+PODFILE CHECKSUM: 237d5a49f4b7cc6f72d107bd40b372f72f433475
 
 COCOAPODS: 1.7.5
diff --git a/Pods b/Pods
index 5ef96ed3890..b8f428b5a7d 160000
--- a/Pods
+++ b/Pods
@@ -1 +1 @@
-Subproject commit 5ef96ed3890f440fdf3bb29870496d334f15442b
+Subproject commit b8f428b5a7dc70d01e27aaa446246e52ffc41fab
diff --git a/Signal.xcodeproj/project.pbxproj b/Signal.xcodeproj/project.pbxproj
index e2a79d3caef..7fd54f2e0f0 100644
--- a/Signal.xcodeproj/project.pbxproj
+++ b/Signal.xcodeproj/project.pbxproj
@@ -311,7 +311,6 @@
 		34D1F0B01F867BFC0066283D /* OWSSystemMessageCell.m in Sources */ = {isa = PBXBuildFile; fileRef = 34D1F0A61F867BFC0066283D /* OWSSystemMessageCell.m */; };
 		34D1F0B41F86D31D0066283D /* ConversationCollectionView.m in Sources */ = {isa = PBXBuildFile; fileRef = 34D1F0B31F86D31D0066283D /* ConversationCollectionView.m */; };
 		34D1F0B71F87F8850066283D /* OWSGenericAttachmentView.m in Sources */ = {isa = PBXBuildFile; fileRef = 34D1F0B61F87F8850066283D /* OWSGenericAttachmentView.m */; };
-		34D1F0BA1F8800D90066283D /* OWSAudioMessageView.m in Sources */ = {isa = PBXBuildFile; fileRef = 34D1F0B91F8800D90066283D /* OWSAudioMessageView.m */; };
 		34D1F0BD1F8D108C0066283D /* AttachmentUploadView.m in Sources */ = {isa = PBXBuildFile; fileRef = 34D1F0BC1F8D108C0066283D /* AttachmentUploadView.m */; };
 		34D1F0C01F8EC1760066283D /* MessageRecipientStatusUtils.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34D1F0BF1F8EC1760066283D /* MessageRecipientStatusUtils.swift */; };
 		34D2CCDA2062E7D000CB1A14 /* OWSScreenLockUI.m in Sources */ = {isa = PBXBuildFile; fileRef = 34D2CCD92062E7D000CB1A14 /* OWSScreenLockUI.m */; };
@@ -582,9 +581,12 @@
 		8835DE01230DBF7E00DC6B66 /* ComposeViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 8835DE00230DBF7E00DC6B66 /* ComposeViewController.swift */; };
 		8835DE03230DEC6A00DC6B66 /* AddToBlockListViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 8835DE02230DEC6A00DC6B66 /* AddToBlockListViewController.swift */; };
 		8835DE08230E092F00DC6B66 /* FindByPhoneNumberViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 8835DE06230DFFC500DC6B66 /* FindByPhoneNumberViewController.swift */; };
+		88594E5A2335B08000390B19 /* AudioMessageView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88594E592335B08000390B19 /* AudioMessageView.swift */; };
 		88905E9E229CCA96004E4234 /* ExpirationNagView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88905E9D229CCA96004E4234 /* ExpirationNagView.swift */; };
 		88A9729222FA5D4B004B4FBF /* AttachmentFormatPickerView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A9729122FA5D4B004B4FBF /* AttachmentFormatPickerView.swift */; };
 		88A9729422FB4D02004B4FBF /* LocationPicker.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88A9729322FB4D02004B4FBF /* LocationPicker.swift */; };
+		88BFD4732335C2B3001797D7 /* waveformLoading.json in Resources */ = {isa = PBXBuildFile; fileRef = 88BFD4722335C2B3001797D7 /* waveformLoading.json */; };
+		88BFD4752335C2DB001797D7 /* playPauseButton.json in Resources */ = {isa = PBXBuildFile; fileRef = 88BFD4742335C2DB001797D7 /* playPauseButton.json */; };
 		88D1D40222EBB5A100F472C5 /* MessageRequestView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88D1D40122EBB5A100F472C5 /* MessageRequestView.swift */; };
 		88D1D40422EF8A9700F472C5 /* ThreadDetailsInteraction.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88D1D40322EF8A9700F472C5 /* ThreadDetailsInteraction.swift */; };
 		88D1D40622EF8F1100F472C5 /* ThreadDetailsCell.swift in Sources */ = {isa = PBXBuildFile; fileRef = 88D1D40522EF8F1100F472C5 /* ThreadDetailsCell.swift */; };
@@ -1123,8 +1125,6 @@
 		34D1F0B31F86D31D0066283D /* ConversationCollectionView.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = ConversationCollectionView.m; sourceTree = "<group>"; };
 		34D1F0B51F87F8850066283D /* OWSGenericAttachmentView.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = OWSGenericAttachmentView.h; sourceTree = "<group>"; };
 		34D1F0B61F87F8850066283D /* OWSGenericAttachmentView.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = OWSGenericAttachmentView.m; sourceTree = "<group>"; };
-		34D1F0B81F8800D90066283D /* OWSAudioMessageView.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = OWSAudioMessageView.h; sourceTree = "<group>"; };
-		34D1F0B91F8800D90066283D /* OWSAudioMessageView.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = OWSAudioMessageView.m; sourceTree = "<group>"; };
 		34D1F0BB1F8D108C0066283D /* AttachmentUploadView.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = AttachmentUploadView.h; sourceTree = "<group>"; };
 		34D1F0BC1F8D108C0066283D /* AttachmentUploadView.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = AttachmentUploadView.m; sourceTree = "<group>"; };
 		34D1F0BF1F8EC1760066283D /* MessageRecipientStatusUtils.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = MessageRecipientStatusUtils.swift; sourceTree = "<group>"; };
@@ -1412,10 +1412,13 @@
 		8835DE00230DBF7E00DC6B66 /* ComposeViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ComposeViewController.swift; sourceTree = "<group>"; };
 		8835DE02230DEC6A00DC6B66 /* AddToBlockListViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AddToBlockListViewController.swift; sourceTree = "<group>"; };
 		8835DE06230DFFC500DC6B66 /* FindByPhoneNumberViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = FindByPhoneNumberViewController.swift; sourceTree = "<group>"; };
+		88594E592335B08000390B19 /* AudioMessageView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AudioMessageView.swift; sourceTree = "<group>"; };
 		88905E9D229CCA96004E4234 /* ExpirationNagView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ExpirationNagView.swift; sourceTree = "<group>"; };
 		88A695BC232C18DF002F7B9B /* AudioWaveformProgressView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AudioWaveformProgressView.swift; sourceTree = "<group>"; };
 		88A9729122FA5D4B004B4FBF /* AttachmentFormatPickerView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AttachmentFormatPickerView.swift; sourceTree = "<group>"; };
 		88A9729322FB4D02004B4FBF /* LocationPicker.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = LocationPicker.swift; sourceTree = "<group>"; };
+		88BFD4722335C2B3001797D7 /* waveformLoading.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = waveformLoading.json; sourceTree = "<group>"; };
+		88BFD4742335C2DB001797D7 /* playPauseButton.json */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.json; path = playPauseButton.json; sourceTree = "<group>"; };
 		88D1D40122EBB5A100F472C5 /* MessageRequestView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MessageRequestView.swift; sourceTree = "<group>"; };
 		88D1D40322EF8A9700F472C5 /* ThreadDetailsInteraction.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ThreadDetailsInteraction.swift; sourceTree = "<group>"; };
 		88D1D40522EF8F1100F472C5 /* ThreadDetailsCell.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ThreadDetailsCell.swift; sourceTree = "<group>"; };
@@ -2246,6 +2249,7 @@
 			children = (
 				34D1F0BB1F8D108C0066283D /* AttachmentUploadView.h */,
 				34D1F0BC1F8D108C0066283D /* AttachmentUploadView.m */,
+				88594E592335B08000390B19 /* AudioMessageView.swift */,
 				88A695BC232C18DF002F7B9B /* AudioWaveformProgressView.swift */,
 				3488F9352191CC4000E524CC /* ConversationMediaView.swift */,
 				34D1F0961F867BFC0066283D /* ConversationViewCell.h */,
@@ -2253,8 +2257,6 @@
 				34A8B3502190A40E00218A25 /* MediaAlbumCellView.swift */,
 				34EA693F2194933900702471 /* MediaDownloadView.swift */,
 				34EA69412194DE7F00702471 /* MediaUploadView.swift */,
-				34D1F0B81F8800D90066283D /* OWSAudioMessageView.h */,
-				34D1F0B91F8800D90066283D /* OWSAudioMessageView.m */,
 				34DBF005206C3CB100025978 /* OWSBubbleShapeView.h */,
 				34DBF006206C3CB200025978 /* OWSBubbleShapeView.m */,
 				34DBF002206BD5A500025978 /* OWSBubbleView.h */,
@@ -2737,6 +2739,15 @@
 			path = RecipientPicker;
 			sourceTree = "<group>";
 		};
+		88BFD4712335C2A4001797D7 /* Lottie */ = {
+			isa = PBXGroup;
+			children = (
+				88BFD4742335C2DB001797D7 /* playPauseButton.json */,
+				88BFD4722335C2B3001797D7 /* waveformLoading.json */,
+			);
+			path = Lottie;
+			sourceTree = "<group>";
+		};
 		88E34F2522F269B600966CC2 /* Storage Service */ = {
 			isa = PBXGroup;
 			children = (
@@ -2953,6 +2964,7 @@
 		D221A093169C9E5E00537ABF /* Signal */ = {
 			isa = PBXGroup;
 			children = (
+				88BFD4712335C2A4001797D7 /* Lottie */,
 				34330A581E7875FB00DF2FB9 /* Fonts */,
 				B633C4FD1A1D190B0059AC12 /* Images */,
 				B66DBF4919D5BBC8006EA940 /* Images.xcassets */,
@@ -3385,6 +3397,7 @@
 				B10C9B611A7049EC00ECA2BF /* play_icon.png in Resources */,
 				AD83FF401A73426500B5C81A /* audio_pause_button_blue@2x.png in Resources */,
 				B66DBF4A19D5BBC8006EA940 /* Images.xcassets in Resources */,
+				88BFD4752335C2DB001797D7 /* playPauseButton.json in Resources */,
 				34CF0788203E6B78005C4D61 /* ringback_tone_ansi.caf in Resources */,
 				34C3C78F2040A4F70000134C /* sonarping.mp3 in Resources */,
 				AD83FF431A73426500B5C81A /* audio_play_button@2x.png in Resources */,
@@ -3407,6 +3420,7 @@
 				AD83FF451A73426500B5C81A /* audio_pause_button@2x.png in Resources */,
 				45A2F005204473A3002E978A /* NewMessage.aifc in Resources */,
 				45B74A882044AAB600CD42F8 /* aurora.aifc in Resources */,
+				88BFD4732335C2B3001797D7 /* waveformLoading.json in Resources */,
 				45B74A742044AAB600CD42F8 /* aurora-quiet.aifc in Resources */,
 				45B74A852044AAB600CD42F8 /* bamboo.aifc in Resources */,
 				45B74A782044AAB600CD42F8 /* bamboo-quiet.aifc in Resources */,
@@ -3616,6 +3630,7 @@
 				"${BUILT_PRODUCTS_DIR}/YapDatabase/YapDatabase.framework",
 				"${BUILT_PRODUCTS_DIR}/libPhoneNumber-iOS/libPhoneNumber_iOS.framework",
 				"${BUILT_PRODUCTS_DIR}/libwebp/libwebp.framework",
+				"${BUILT_PRODUCTS_DIR}/lottie-ios/Lottie.framework",
 			);
 			name = "[CP] Embed Pods Frameworks";
 			outputPaths = (
@@ -3642,6 +3657,7 @@
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/YapDatabase.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/libPhoneNumber_iOS.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/libwebp.framework",
+				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/Lottie.framework",
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
@@ -3695,6 +3711,7 @@
 				"${BUILT_PRODUCTS_DIR}/YapDatabase/YapDatabase.framework",
 				"${BUILT_PRODUCTS_DIR}/libPhoneNumber-iOS/libPhoneNumber_iOS.framework",
 				"${BUILT_PRODUCTS_DIR}/libwebp/libwebp.framework",
+				"${BUILT_PRODUCTS_DIR}/lottie-ios/Lottie.framework",
 			);
 			name = "[CP] Embed Pods Frameworks";
 			outputPaths = (
@@ -3720,6 +3737,7 @@
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/YapDatabase.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/libPhoneNumber_iOS.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/libwebp.framework",
+				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/Lottie.framework",
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
@@ -3773,6 +3791,7 @@
 				"${BUILT_PRODUCTS_DIR}/YapDatabase/YapDatabase.framework",
 				"${BUILT_PRODUCTS_DIR}/libPhoneNumber-iOS/libPhoneNumber_iOS.framework",
 				"${BUILT_PRODUCTS_DIR}/libwebp/libwebp.framework",
+				"${BUILT_PRODUCTS_DIR}/lottie-ios/Lottie.framework",
 			);
 			name = "[CP] Embed Pods Frameworks";
 			outputPaths = (
@@ -3798,6 +3817,7 @@
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/YapDatabase.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/libPhoneNumber_iOS.framework",
 				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/libwebp.framework",
+				"${TARGET_BUILD_DIR}/${FRAMEWORKS_FOLDER_PATH}/Lottie.framework",
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
@@ -4034,7 +4054,6 @@
 				34DC9BD921543E0C00FDDCEC /* DebugContactsUtils.m in Sources */,
 				34DBF007206C3CB200025978 /* OWSBubbleShapeView.m in Sources */,
 				4C04392A220A9EC800BAEA63 /* VoiceNoteLock.swift in Sources */,
-				34D1F0BA1F8800D90066283D /* OWSAudioMessageView.m in Sources */,
 				34D8C02B1ED3685800188D7C /* DebugUIContacts.m in Sources */,
 				3496956E21A301A100DCFE74 /* OWSBackupExportJob.m in Sources */,
 				4C1885D2218F8E1C00B67051 /* PhotoGridViewCell.swift in Sources */,
@@ -4225,6 +4244,7 @@
 				340FC8B6204DAC8D007AEB0F /* OWSQRCodeScanningViewController.m in Sources */,
 				4CB5F26920F7D060004D1B42 /* MessageActions.swift in Sources */,
 				4C46361322EE680700185951 /* ConversationPicker.swift in Sources */,
+				88594E5A2335B08000390B19 /* AudioMessageView.swift in Sources */,
 				340FC8B5204DAC8D007AEB0F /* AboutTableViewController.m in Sources */,
 				34BECE2B1F74C12700D7438D /* DebugUIStress.m in Sources */,
 				340FC8B9204DAC8D007AEB0F /* UpdateGroupViewController.m in Sources */,
diff --git a/Signal/Images.xcassets/pause-filled-24.imageset/Contents.json b/Signal/Images.xcassets/pause-filled-24.imageset/Contents.json
deleted file mode 100644
index 01ee6f04f68..00000000000
--- a/Signal/Images.xcassets/pause-filled-24.imageset/Contents.json
+++ /dev/null
@@ -1,23 +0,0 @@
-{
-  "images" : [
-    {
-      "idiom" : "universal",
-      "filename" : "pause-filled-24@1x.png",
-      "scale" : "1x"
-    },
-    {
-      "idiom" : "universal",
-      "filename" : "pause-filled-24@2x.png",
-      "scale" : "2x"
-    },
-    {
-      "idiom" : "universal",
-      "filename" : "pause-filled-24@3x.png",
-      "scale" : "3x"
-    }
-  ],
-  "info" : {
-    "version" : 1,
-    "author" : "xcode"
-  }
-}
\ No newline at end of file
diff --git a/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@1x.png b/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@1x.png
deleted file mode 100644
index 4971cb1c591..00000000000
Binary files a/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@1x.png and /dev/null differ
diff --git a/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@2x.png b/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@2x.png
deleted file mode 100644
index e0244f08860..00000000000
Binary files a/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@2x.png and /dev/null differ
diff --git a/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@3x.png b/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@3x.png
deleted file mode 100644
index 4bf87c8941e..00000000000
Binary files a/Signal/Images.xcassets/pause-filled-24.imageset/pause-filled-24@3x.png and /dev/null differ
diff --git a/Signal/Lottie/playPauseButton.json b/Signal/Lottie/playPauseButton.json
new file mode 100644
index 00000000000..9960fe2ae75
--- /dev/null
+++ b/Signal/Lottie/playPauseButton.json
@@ -0,0 +1 @@
+{"v":"5.5.2","fr":60,"ip":0,"op":30,"w":24,"h":24,"nm":"lottie-assets2","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Play Outlines 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[0]},{"t":28,"s":[90]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":0,"s":[14,12,0],"to":[-0.333,0,0],"ti":[0.333,0,0]},{"t":28,"s":[12,12,0]}],"ix":2},"a":{"a":0,"k":[7.25,8.25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-7,-4],[-7,4],[7,4],[6.888,3.936]],"c":true}]},{"t":28,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-8,-1.969],[-7.984,1.999],[8,1.999],[7.998,-1.997]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[7.25,4.25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Play Outlines 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[0]},{"t":28,"s":[90]}],"ix":10},"p":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":0,"s":[14,12,0],"to":[-0.333,0,0],"ti":[0.333,0,0]},{"t":28,"s":[12,12,0]}],"ix":2},"a":{"a":0,"k":[7.25,8.25,0],"ix":1},"s":{"a":0,"k":[100,-100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-7,-4],[-7,4],[7,4],[6.888,3.936]],"c":true}]},{"t":28,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-8,-1.969],[-7.984,1.999],[8,1.999],[7.998,-1.997]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[7.25,4.25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0}],"markers":[]}
diff --git a/Signal/Lottie/waveformLoading.json b/Signal/Lottie/waveformLoading.json
new file mode 100644
index 00000000000..5d9033a133c
--- /dev/null
+++ b/Signal/Lottie/waveformLoading.json
@@ -0,0 +1 @@
+{"v":"5.5.2","fr":60,"ip":0,"op":60,"w":1000,"h":1000,"nm":"Comp 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Right","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[838,500,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[20,-238]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":50,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 2","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-250,-118],[-250,126]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":50,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[40]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":18,"s":[0]},{"t":36,"s":[40]}],"ix":1,"x":"var $bm_rt;\nfunction doIt() {\n    var easingEquation, val1, val2, val3;\n    var ew_one = expoOut;\n    var ew_two = expoIn;\n    var n = 0;\n    if (numKeys > 0) {\n        n = nearestKey(time).index;\n        if (key(n).time > time) {\n            n--;\n        }\n        if (n < 2) {\n            easingEquation = ew_one;\n        } else if (n >= $bm_sub(numKeys, 1)) {\n            easingEquation = ew_two;\n        } else {\n            return null;\n        }\n    }\n    try {\n        var key1 = key(n);\n        var key2 = key($bm_sum(n, 1));\n    } catch (e) {\n        return null;\n    }\n    var dim = 1;\n    try {\n        key(1)[1].length;\n        dim = 2;\n        key(1)[2].length;\n        dim = 3;\n    } catch (e) {\n    }\n    var t = $bm_sub(time, key1.time);\n    var d = $bm_sub(key2.time, key1.time);\n    var sX = key1[0];\n    var eX = $bm_sub(key2[0], key1[0]);\n    if (dim >= 2) {\n        var sY = key1[1];\n        var eY = $bm_sub(key2[1], key1[1]);\n        if (dim >= 3) {\n            var sZ = key1[2];\n            var eZ = $bm_sub(key2[2], key1[2]);\n        }\n    }\n    if (time < key1.time || time > key2.time) {\n        return value;\n    } else {\n        val1 = easingEquation(t, sX, eX, d);\n        switch (dim) {\n        case 1:\n            return val1;\n            break;\n        case 2:\n            val2 = easingEquation(t, sY, eY, d);\n            return [\n                val1,\n                val2\n            ];\n            break;\n        case 3:\n            val2 = easingEquation(t, sY, eY, d);\n            val3 = easingEquation(t, sZ, eZ, d);\n            return [\n                val1,\n                val2,\n                val3\n            ];\n            break;\n        default:\n            return null;\n        }\n    }\n}\nvar IN_EXPO_CORRECTION = 0.000976563;\nvar OUT_EXPO_CORRECTION = 1.000976563;\nvar s = 1.70158;\nvar p = 0.81;\nvar a = 50;\nfunction bounceOut(t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_mul($bm_mul(7.5625, t), t)), b);\n    } else if (t < 2 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 1.5 / 2.75), t), 0.75)), b);\n    } else if (t < 2.5 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.25 / 2.75), t), 0.9375)), b);\n    } else {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.625 / 2.75), t), 0.984375)), b);\n    }\n}\nfunction bounceIn(t, b, c, d) {\n    return $bm_sum($bm_sub(c, bounceOut($bm_sub(d, t), 0, c, d)), b);\n}\nfunction bounceInOut(t, b, c, d) {\n    if (t < $bm_div(d, 2))\n        return $bm_sum($bm_mul(bounceIn($bm_mul(t, 2), 0, c, d), 0.5), b);\n    else\n        return bounceOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n}\nfunction backIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul(c, t /= d), t), $bm_sub($bm_mul($bm_sum(s, 1), t), s)), b);\n}\nfunction backInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div(c, 2), $bm_mul($bm_mul(t, t), $bm_sub($bm_mul($bm_sum(s *= 1.525, 1), t), s))), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul(t -= 2, t), $bm_sum($bm_mul($bm_sum(s *= 1.525, 1), t), s)), 2)), b);\n}\nfunction backOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(t = t / d - 1, t), $bm_sum($bm_mul($bm_sum(s, 1), t), s)), 1)), b);\n}\nfunction circIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t /= d, t))), 1)), b);\n}\nfunction circInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t, t))), 1)), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum(Math.sqrt($bm_sub(1, $bm_mul(t -= 2, t))), 1)), b);\n}\nfunction circOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sqrt($bm_sub(1, $bm_mul(t = t / d - 1, t)))), b);\n}\nfunction elasticIn(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_neg($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n}\nfunction elasticInOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d / 2) == 2)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3 * 1.5);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    if (t < 1)\n        return $bm_sum($bm_mul(-0.5, $bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n    return $bm_sum($bm_sum($bm_mul($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), 0.5), c), b);\n}\nfunction elasticOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_sum($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), c), b);\n}\nfunction expoIn(t, b, c, d) {\n    return t == 0 ? b : c * (Math.pow(2, 10 * (t / d - 1)) - IN_EXPO_CORRECTION) + b;\n}\nfunction expoInOut(t, b, c, d) {\n    var v;\n    if ((t /= d / 2) < 1) {\n        v = $bm_sub(Math.pow(2, $bm_mul(10, $bm_sub(t, 1))), IN_EXPO_CORRECTION);\n    } else {\n        v = $bm_sum($bm_sum($bm_neg(Math.pow(2, $bm_mul(-10, $bm_sub(t, 1)))), 2), IN_EXPO_CORRECTION);\n    }\n    return $bm_sum(b, $bm_mul($bm_div(v, 2), c));\n}\nfunction expoOut(t, b, c, d) {\n    return t == d ? b + c : c * OUT_EXPO_CORRECTION * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nfunction quadIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul(c, t /= d), t), b);\n}\nfunction quadInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_div(c, 2), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul(--t, $bm_sub(t, 2)), 1)), b);\n}\nfunction quadOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_neg(c), t /= d), $bm_sub(t, 2)), b);\n}\nfunction quartIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), b);\n}\nfunction quartInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), 2)), b);\n}\nfunction quartOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), 1)), b);\n}\nfunction quintIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), t), b);\n}\nfunction quintInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), t), 2)), b);\n}\nfunction quintOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), t), 1)), b);\n}\nfunction sineIn(t, b, c, d) {\n    return $bm_sum($bm_sum($bm_mul($bm_neg(c), Math.cos($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), c), b);\n}\nfunction sineInOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.cos($bm_div($bm_mul(Math.PI, t), d)), 1)), b);\n}\nfunction sineOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sin($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), b);\n}\n$bm_rt = doIt() || value;"},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[60]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":18,"s":[100]},{"t":36,"s":[60]}],"ix":2,"x":"var $bm_rt;\nfunction doIt() {\n    var easingEquation, val1, val2, val3;\n    var ew_one = expoOut;\n    var ew_two = expoIn;\n    var n = 0;\n    if (numKeys > 0) {\n        n = nearestKey(time).index;\n        if (key(n).time > time) {\n            n--;\n        }\n        if (n < 2) {\n            easingEquation = ew_one;\n        } else if (n >= $bm_sub(numKeys, 1)) {\n            easingEquation = ew_two;\n        } else {\n            return null;\n        }\n    }\n    try {\n        var key1 = key(n);\n        var key2 = key($bm_sum(n, 1));\n    } catch (e) {\n        return null;\n    }\n    var dim = 1;\n    try {\n        key(1)[1].length;\n        dim = 2;\n        key(1)[2].length;\n        dim = 3;\n    } catch (e) {\n    }\n    var t = $bm_sub(time, key1.time);\n    var d = $bm_sub(key2.time, key1.time);\n    var sX = key1[0];\n    var eX = $bm_sub(key2[0], key1[0]);\n    if (dim >= 2) {\n        var sY = key1[1];\n        var eY = $bm_sub(key2[1], key1[1]);\n        if (dim >= 3) {\n            var sZ = key1[2];\n            var eZ = $bm_sub(key2[2], key1[2]);\n        }\n    }\n    if (time < key1.time || time > key2.time) {\n        return value;\n    } else {\n        val1 = easingEquation(t, sX, eX, d);\n        switch (dim) {\n        case 1:\n            return val1;\n            break;\n        case 2:\n            val2 = easingEquation(t, sY, eY, d);\n            return [\n                val1,\n                val2\n            ];\n            break;\n        case 3:\n            val2 = easingEquation(t, sY, eY, d);\n            val3 = easingEquation(t, sZ, eZ, d);\n            return [\n                val1,\n                val2,\n                val3\n            ];\n            break;\n        default:\n            return null;\n        }\n    }\n}\nvar IN_EXPO_CORRECTION = 0.000976563;\nvar OUT_EXPO_CORRECTION = 1.000976563;\nvar s = 1.70158;\nvar p = 0.81;\nvar a = 50;\nfunction bounceOut(t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_mul($bm_mul(7.5625, t), t)), b);\n    } else if (t < 2 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 1.5 / 2.75), t), 0.75)), b);\n    } else if (t < 2.5 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.25 / 2.75), t), 0.9375)), b);\n    } else {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.625 / 2.75), t), 0.984375)), b);\n    }\n}\nfunction bounceIn(t, b, c, d) {\n    return $bm_sum($bm_sub(c, bounceOut($bm_sub(d, t), 0, c, d)), b);\n}\nfunction bounceInOut(t, b, c, d) {\n    if (t < $bm_div(d, 2))\n        return $bm_sum($bm_mul(bounceIn($bm_mul(t, 2), 0, c, d), 0.5), b);\n    else\n        return bounceOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n}\nfunction backIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul(c, t /= d), t), $bm_sub($bm_mul($bm_sum(s, 1), t), s)), b);\n}\nfunction backInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div(c, 2), $bm_mul($bm_mul(t, t), $bm_sub($bm_mul($bm_sum(s *= 1.525, 1), t), s))), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul(t -= 2, t), $bm_sum($bm_mul($bm_sum(s *= 1.525, 1), t), s)), 2)), b);\n}\nfunction backOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(t = t / d - 1, t), $bm_sum($bm_mul($bm_sum(s, 1), t), s)), 1)), b);\n}\nfunction circIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t /= d, t))), 1)), b);\n}\nfunction circInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t, t))), 1)), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum(Math.sqrt($bm_sub(1, $bm_mul(t -= 2, t))), 1)), b);\n}\nfunction circOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sqrt($bm_sub(1, $bm_mul(t = t / d - 1, t)))), b);\n}\nfunction elasticIn(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_neg($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n}\nfunction elasticInOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d / 2) == 2)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3 * 1.5);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    if (t < 1)\n        return $bm_sum($bm_mul(-0.5, $bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n    return $bm_sum($bm_sum($bm_mul($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), 0.5), c), b);\n}\nfunction elasticOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_sum($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), c), b);\n}\nfunction expoIn(t, b, c, d) {\n    return t == 0 ? b : c * (Math.pow(2, 10 * (t / d - 1)) - IN_EXPO_CORRECTION) + b;\n}\nfunction expoInOut(t, b, c, d) {\n    var v;\n    if ((t /= d / 2) < 1) {\n        v = $bm_sub(Math.pow(2, $bm_mul(10, $bm_sub(t, 1))), IN_EXPO_CORRECTION);\n    } else {\n        v = $bm_sum($bm_sum($bm_neg(Math.pow(2, $bm_mul(-10, $bm_sub(t, 1)))), 2), IN_EXPO_CORRECTION);\n    }\n    return $bm_sum(b, $bm_mul($bm_div(v, 2), c));\n}\nfunction expoOut(t, b, c, d) {\n    return t == d ? b + c : c * OUT_EXPO_CORRECTION * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nfunction quadIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul(c, t /= d), t), b);\n}\nfunction quadInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_div(c, 2), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul(--t, $bm_sub(t, 2)), 1)), b);\n}\nfunction quadOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_neg(c), t /= d), $bm_sub(t, 2)), b);\n}\nfunction quartIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), b);\n}\nfunction quartInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), 2)), b);\n}\nfunction quartOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), 1)), b);\n}\nfunction quintIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), t), b);\n}\nfunction quintInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), t), 2)), b);\n}\nfunction quintOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), t), 1)), b);\n}\nfunction sineIn(t, b, c, d) {\n    return $bm_sum($bm_sum($bm_mul($bm_neg(c), Math.cos($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), c), b);\n}\nfunction sineInOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.cos($bm_div($bm_mul(Math.PI, t), d)), 1)), b);\n}\nfunction sineOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sin($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), b);\n}\n$bm_rt = doIt() || value;"},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":3,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":61,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Left","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[638,500,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[20,-238]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":50,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 2","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-250,-118],[-250,126]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":50,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[40]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":18,"s":[0]},{"t":36,"s":[40]}],"ix":1,"x":"var $bm_rt;\nfunction doIt() {\n    var easingEquation, val1, val2, val3;\n    var ew_one = expoOut;\n    var ew_two = expoIn;\n    var n = 0;\n    if (numKeys > 0) {\n        n = nearestKey(time).index;\n        if (key(n).time > time) {\n            n--;\n        }\n        if (n < 2) {\n            easingEquation = ew_one;\n        } else if (n >= $bm_sub(numKeys, 1)) {\n            easingEquation = ew_two;\n        } else {\n            return null;\n        }\n    }\n    try {\n        var key1 = key(n);\n        var key2 = key($bm_sum(n, 1));\n    } catch (e) {\n        return null;\n    }\n    var dim = 1;\n    try {\n        key(1)[1].length;\n        dim = 2;\n        key(1)[2].length;\n        dim = 3;\n    } catch (e) {\n    }\n    var t = $bm_sub(time, key1.time);\n    var d = $bm_sub(key2.time, key1.time);\n    var sX = key1[0];\n    var eX = $bm_sub(key2[0], key1[0]);\n    if (dim >= 2) {\n        var sY = key1[1];\n        var eY = $bm_sub(key2[1], key1[1]);\n        if (dim >= 3) {\n            var sZ = key1[2];\n            var eZ = $bm_sub(key2[2], key1[2]);\n        }\n    }\n    if (time < key1.time || time > key2.time) {\n        return value;\n    } else {\n        val1 = easingEquation(t, sX, eX, d);\n        switch (dim) {\n        case 1:\n            return val1;\n            break;\n        case 2:\n            val2 = easingEquation(t, sY, eY, d);\n            return [\n                val1,\n                val2\n            ];\n            break;\n        case 3:\n            val2 = easingEquation(t, sY, eY, d);\n            val3 = easingEquation(t, sZ, eZ, d);\n            return [\n                val1,\n                val2,\n                val3\n            ];\n            break;\n        default:\n            return null;\n        }\n    }\n}\nvar IN_EXPO_CORRECTION = 0.000976563;\nvar OUT_EXPO_CORRECTION = 1.000976563;\nvar s = 1.70158;\nvar p = 0.81;\nvar a = 50;\nfunction bounceOut(t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_mul($bm_mul(7.5625, t), t)), b);\n    } else if (t < 2 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 1.5 / 2.75), t), 0.75)), b);\n    } else if (t < 2.5 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.25 / 2.75), t), 0.9375)), b);\n    } else {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.625 / 2.75), t), 0.984375)), b);\n    }\n}\nfunction bounceIn(t, b, c, d) {\n    return $bm_sum($bm_sub(c, bounceOut($bm_sub(d, t), 0, c, d)), b);\n}\nfunction bounceInOut(t, b, c, d) {\n    if (t < $bm_div(d, 2))\n        return $bm_sum($bm_mul(bounceIn($bm_mul(t, 2), 0, c, d), 0.5), b);\n    else\n        return bounceOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n}\nfunction backIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul(c, t /= d), t), $bm_sub($bm_mul($bm_sum(s, 1), t), s)), b);\n}\nfunction backInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div(c, 2), $bm_mul($bm_mul(t, t), $bm_sub($bm_mul($bm_sum(s *= 1.525, 1), t), s))), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul(t -= 2, t), $bm_sum($bm_mul($bm_sum(s *= 1.525, 1), t), s)), 2)), b);\n}\nfunction backOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(t = t / d - 1, t), $bm_sum($bm_mul($bm_sum(s, 1), t), s)), 1)), b);\n}\nfunction circIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t /= d, t))), 1)), b);\n}\nfunction circInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t, t))), 1)), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum(Math.sqrt($bm_sub(1, $bm_mul(t -= 2, t))), 1)), b);\n}\nfunction circOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sqrt($bm_sub(1, $bm_mul(t = t / d - 1, t)))), b);\n}\nfunction elasticIn(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_neg($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n}\nfunction elasticInOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d / 2) == 2)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3 * 1.5);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    if (t < 1)\n        return $bm_sum($bm_mul(-0.5, $bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n    return $bm_sum($bm_sum($bm_mul($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), 0.5), c), b);\n}\nfunction elasticOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_sum($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), c), b);\n}\nfunction expoIn(t, b, c, d) {\n    return t == 0 ? b : c * (Math.pow(2, 10 * (t / d - 1)) - IN_EXPO_CORRECTION) + b;\n}\nfunction expoInOut(t, b, c, d) {\n    var v;\n    if ((t /= d / 2) < 1) {\n        v = $bm_sub(Math.pow(2, $bm_mul(10, $bm_sub(t, 1))), IN_EXPO_CORRECTION);\n    } else {\n        v = $bm_sum($bm_sum($bm_neg(Math.pow(2, $bm_mul(-10, $bm_sub(t, 1)))), 2), IN_EXPO_CORRECTION);\n    }\n    return $bm_sum(b, $bm_mul($bm_div(v, 2), c));\n}\nfunction expoOut(t, b, c, d) {\n    return t == d ? b + c : c * OUT_EXPO_CORRECTION * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nfunction quadIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul(c, t /= d), t), b);\n}\nfunction quadInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_div(c, 2), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul(--t, $bm_sub(t, 2)), 1)), b);\n}\nfunction quadOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_neg(c), t /= d), $bm_sub(t, 2)), b);\n}\nfunction quartIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), b);\n}\nfunction quartInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), 2)), b);\n}\nfunction quartOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), 1)), b);\n}\nfunction quintIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), t), b);\n}\nfunction quintInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), t), 2)), b);\n}\nfunction quintOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), t), 1)), b);\n}\nfunction sineIn(t, b, c, d) {\n    return $bm_sum($bm_sum($bm_mul($bm_neg(c), Math.cos($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), c), b);\n}\nfunction sineInOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.cos($bm_div($bm_mul(Math.PI, t), d)), 1)), b);\n}\nfunction sineOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sin($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), b);\n}\n$bm_rt = doIt() || value;"},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[60]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":18,"s":[100]},{"t":36,"s":[60]}],"ix":2,"x":"var $bm_rt;\nfunction doIt() {\n    var easingEquation, val1, val2, val3;\n    var ew_one = expoOut;\n    var ew_two = expoIn;\n    var n = 0;\n    if (numKeys > 0) {\n        n = nearestKey(time).index;\n        if (key(n).time > time) {\n            n--;\n        }\n        if (n < 2) {\n            easingEquation = ew_one;\n        } else if (n >= $bm_sub(numKeys, 1)) {\n            easingEquation = ew_two;\n        } else {\n            return null;\n        }\n    }\n    try {\n        var key1 = key(n);\n        var key2 = key($bm_sum(n, 1));\n    } catch (e) {\n        return null;\n    }\n    var dim = 1;\n    try {\n        key(1)[1].length;\n        dim = 2;\n        key(1)[2].length;\n        dim = 3;\n    } catch (e) {\n    }\n    var t = $bm_sub(time, key1.time);\n    var d = $bm_sub(key2.time, key1.time);\n    var sX = key1[0];\n    var eX = $bm_sub(key2[0], key1[0]);\n    if (dim >= 2) {\n        var sY = key1[1];\n        var eY = $bm_sub(key2[1], key1[1]);\n        if (dim >= 3) {\n            var sZ = key1[2];\n            var eZ = $bm_sub(key2[2], key1[2]);\n        }\n    }\n    if (time < key1.time || time > key2.time) {\n        return value;\n    } else {\n        val1 = easingEquation(t, sX, eX, d);\n        switch (dim) {\n        case 1:\n            return val1;\n            break;\n        case 2:\n            val2 = easingEquation(t, sY, eY, d);\n            return [\n                val1,\n                val2\n            ];\n            break;\n        case 3:\n            val2 = easingEquation(t, sY, eY, d);\n            val3 = easingEquation(t, sZ, eZ, d);\n            return [\n                val1,\n                val2,\n                val3\n            ];\n            break;\n        default:\n            return null;\n        }\n    }\n}\nvar IN_EXPO_CORRECTION = 0.000976563;\nvar OUT_EXPO_CORRECTION = 1.000976563;\nvar s = 1.70158;\nvar p = 0.81;\nvar a = 50;\nfunction bounceOut(t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_mul($bm_mul(7.5625, t), t)), b);\n    } else if (t < 2 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 1.5 / 2.75), t), 0.75)), b);\n    } else if (t < 2.5 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.25 / 2.75), t), 0.9375)), b);\n    } else {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.625 / 2.75), t), 0.984375)), b);\n    }\n}\nfunction bounceIn(t, b, c, d) {\n    return $bm_sum($bm_sub(c, bounceOut($bm_sub(d, t), 0, c, d)), b);\n}\nfunction bounceInOut(t, b, c, d) {\n    if (t < $bm_div(d, 2))\n        return $bm_sum($bm_mul(bounceIn($bm_mul(t, 2), 0, c, d), 0.5), b);\n    else\n        return bounceOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n}\nfunction backIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul(c, t /= d), t), $bm_sub($bm_mul($bm_sum(s, 1), t), s)), b);\n}\nfunction backInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div(c, 2), $bm_mul($bm_mul(t, t), $bm_sub($bm_mul($bm_sum(s *= 1.525, 1), t), s))), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul(t -= 2, t), $bm_sum($bm_mul($bm_sum(s *= 1.525, 1), t), s)), 2)), b);\n}\nfunction backOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(t = t / d - 1, t), $bm_sum($bm_mul($bm_sum(s, 1), t), s)), 1)), b);\n}\nfunction circIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t /= d, t))), 1)), b);\n}\nfunction circInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t, t))), 1)), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum(Math.sqrt($bm_sub(1, $bm_mul(t -= 2, t))), 1)), b);\n}\nfunction circOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sqrt($bm_sub(1, $bm_mul(t = t / d - 1, t)))), b);\n}\nfunction elasticIn(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_neg($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n}\nfunction elasticInOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d / 2) == 2)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3 * 1.5);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    if (t < 1)\n        return $bm_sum($bm_mul(-0.5, $bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n    return $bm_sum($bm_sum($bm_mul($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), 0.5), c), b);\n}\nfunction elasticOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_sum($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), c), b);\n}\nfunction expoIn(t, b, c, d) {\n    return t == 0 ? b : c * (Math.pow(2, 10 * (t / d - 1)) - IN_EXPO_CORRECTION) + b;\n}\nfunction expoInOut(t, b, c, d) {\n    var v;\n    if ((t /= d / 2) < 1) {\n        v = $bm_sub(Math.pow(2, $bm_mul(10, $bm_sub(t, 1))), IN_EXPO_CORRECTION);\n    } else {\n        v = $bm_sum($bm_sum($bm_neg(Math.pow(2, $bm_mul(-10, $bm_sub(t, 1)))), 2), IN_EXPO_CORRECTION);\n    }\n    return $bm_sum(b, $bm_mul($bm_div(v, 2), c));\n}\nfunction expoOut(t, b, c, d) {\n    return t == d ? b + c : c * OUT_EXPO_CORRECTION * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nfunction quadIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul(c, t /= d), t), b);\n}\nfunction quadInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_div(c, 2), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul(--t, $bm_sub(t, 2)), 1)), b);\n}\nfunction quadOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_neg(c), t /= d), $bm_sub(t, 2)), b);\n}\nfunction quartIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), b);\n}\nfunction quartInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), 2)), b);\n}\nfunction quartOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), 1)), b);\n}\nfunction quintIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), t), b);\n}\nfunction quintInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), t), 2)), b);\n}\nfunction quintOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), t), 1)), b);\n}\nfunction sineIn(t, b, c, d) {\n    return $bm_sum($bm_sum($bm_mul($bm_neg(c), Math.cos($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), c), b);\n}\nfunction sineInOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.cos($bm_div($bm_mul(Math.PI, t), d)), 1)), b);\n}\nfunction sineOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sin($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), b);\n}\n$bm_rt = doIt() || value;"},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":3,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":61,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Middle","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[738,500,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[20,-238]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":50,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 2","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-250,-118],[-250,126]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":50,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":18,"s":[40]},{"t":36,"s":[0]}],"ix":1,"x":"var $bm_rt;\nfunction doIt() {\n    var easingEquation, val1, val2, val3;\n    var ew_one = expoOut;\n    var ew_two = expoIn;\n    var n = 0;\n    if (numKeys > 0) {\n        n = nearestKey(time).index;\n        if (key(n).time > time) {\n            n--;\n        }\n        if (n < 2) {\n            easingEquation = ew_one;\n        } else if (n >= $bm_sub(numKeys, 1)) {\n            easingEquation = ew_two;\n        } else {\n            return null;\n        }\n    }\n    try {\n        var key1 = key(n);\n        var key2 = key($bm_sum(n, 1));\n    } catch (e) {\n        return null;\n    }\n    var dim = 1;\n    try {\n        key(1)[1].length;\n        dim = 2;\n        key(1)[2].length;\n        dim = 3;\n    } catch (e) {\n    }\n    var t = $bm_sub(time, key1.time);\n    var d = $bm_sub(key2.time, key1.time);\n    var sX = key1[0];\n    var eX = $bm_sub(key2[0], key1[0]);\n    if (dim >= 2) {\n        var sY = key1[1];\n        var eY = $bm_sub(key2[1], key1[1]);\n        if (dim >= 3) {\n            var sZ = key1[2];\n            var eZ = $bm_sub(key2[2], key1[2]);\n        }\n    }\n    if (time < key1.time || time > key2.time) {\n        return value;\n    } else {\n        val1 = easingEquation(t, sX, eX, d);\n        switch (dim) {\n        case 1:\n            return val1;\n            break;\n        case 2:\n            val2 = easingEquation(t, sY, eY, d);\n            return [\n                val1,\n                val2\n            ];\n            break;\n        case 3:\n            val2 = easingEquation(t, sY, eY, d);\n            val3 = easingEquation(t, sZ, eZ, d);\n            return [\n                val1,\n                val2,\n                val3\n            ];\n            break;\n        default:\n            return null;\n        }\n    }\n}\nvar IN_EXPO_CORRECTION = 0.000976563;\nvar OUT_EXPO_CORRECTION = 1.000976563;\nvar s = 1.70158;\nvar p = 0.81;\nvar a = 50;\nfunction bounceOut(t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_mul($bm_mul(7.5625, t), t)), b);\n    } else if (t < 2 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 1.5 / 2.75), t), 0.75)), b);\n    } else if (t < 2.5 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.25 / 2.75), t), 0.9375)), b);\n    } else {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.625 / 2.75), t), 0.984375)), b);\n    }\n}\nfunction bounceIn(t, b, c, d) {\n    return $bm_sum($bm_sub(c, bounceOut($bm_sub(d, t), 0, c, d)), b);\n}\nfunction bounceInOut(t, b, c, d) {\n    if (t < $bm_div(d, 2))\n        return $bm_sum($bm_mul(bounceIn($bm_mul(t, 2), 0, c, d), 0.5), b);\n    else\n        return bounceOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n}\nfunction backIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul(c, t /= d), t), $bm_sub($bm_mul($bm_sum(s, 1), t), s)), b);\n}\nfunction backInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div(c, 2), $bm_mul($bm_mul(t, t), $bm_sub($bm_mul($bm_sum(s *= 1.525, 1), t), s))), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul(t -= 2, t), $bm_sum($bm_mul($bm_sum(s *= 1.525, 1), t), s)), 2)), b);\n}\nfunction backOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(t = t / d - 1, t), $bm_sum($bm_mul($bm_sum(s, 1), t), s)), 1)), b);\n}\nfunction circIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t /= d, t))), 1)), b);\n}\nfunction circInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t, t))), 1)), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum(Math.sqrt($bm_sub(1, $bm_mul(t -= 2, t))), 1)), b);\n}\nfunction circOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sqrt($bm_sub(1, $bm_mul(t = t / d - 1, t)))), b);\n}\nfunction elasticIn(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_neg($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n}\nfunction elasticInOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d / 2) == 2)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3 * 1.5);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    if (t < 1)\n        return $bm_sum($bm_mul(-0.5, $bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n    return $bm_sum($bm_sum($bm_mul($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), 0.5), c), b);\n}\nfunction elasticOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_sum($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), c), b);\n}\nfunction expoIn(t, b, c, d) {\n    return t == 0 ? b : c * (Math.pow(2, 10 * (t / d - 1)) - IN_EXPO_CORRECTION) + b;\n}\nfunction expoInOut(t, b, c, d) {\n    var v;\n    if ((t /= d / 2) < 1) {\n        v = $bm_sub(Math.pow(2, $bm_mul(10, $bm_sub(t, 1))), IN_EXPO_CORRECTION);\n    } else {\n        v = $bm_sum($bm_sum($bm_neg(Math.pow(2, $bm_mul(-10, $bm_sub(t, 1)))), 2), IN_EXPO_CORRECTION);\n    }\n    return $bm_sum(b, $bm_mul($bm_div(v, 2), c));\n}\nfunction expoOut(t, b, c, d) {\n    return t == d ? b + c : c * OUT_EXPO_CORRECTION * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nfunction quadIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul(c, t /= d), t), b);\n}\nfunction quadInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_div(c, 2), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul(--t, $bm_sub(t, 2)), 1)), b);\n}\nfunction quadOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_neg(c), t /= d), $bm_sub(t, 2)), b);\n}\nfunction quartIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), b);\n}\nfunction quartInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), 2)), b);\n}\nfunction quartOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), 1)), b);\n}\nfunction quintIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), t), b);\n}\nfunction quintInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), t), 2)), b);\n}\nfunction quintOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), t), 1)), b);\n}\nfunction sineIn(t, b, c, d) {\n    return $bm_sum($bm_sum($bm_mul($bm_neg(c), Math.cos($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), c), b);\n}\nfunction sineInOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.cos($bm_div($bm_mul(Math.PI, t), d)), 1)), b);\n}\nfunction sineOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sin($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), b);\n}\n$bm_rt = doIt() || value;"},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":18,"s":[60]},{"t":36,"s":[100]}],"ix":2,"x":"var $bm_rt;\nfunction doIt() {\n    var easingEquation, val1, val2, val3;\n    var ew_one = expoOut;\n    var ew_two = expoIn;\n    var n = 0;\n    if (numKeys > 0) {\n        n = nearestKey(time).index;\n        if (key(n).time > time) {\n            n--;\n        }\n        if (n < 2) {\n            easingEquation = ew_one;\n        } else if (n >= $bm_sub(numKeys, 1)) {\n            easingEquation = ew_two;\n        } else {\n            return null;\n        }\n    }\n    try {\n        var key1 = key(n);\n        var key2 = key($bm_sum(n, 1));\n    } catch (e) {\n        return null;\n    }\n    var dim = 1;\n    try {\n        key(1)[1].length;\n        dim = 2;\n        key(1)[2].length;\n        dim = 3;\n    } catch (e) {\n    }\n    var t = $bm_sub(time, key1.time);\n    var d = $bm_sub(key2.time, key1.time);\n    var sX = key1[0];\n    var eX = $bm_sub(key2[0], key1[0]);\n    if (dim >= 2) {\n        var sY = key1[1];\n        var eY = $bm_sub(key2[1], key1[1]);\n        if (dim >= 3) {\n            var sZ = key1[2];\n            var eZ = $bm_sub(key2[2], key1[2]);\n        }\n    }\n    if (time < key1.time || time > key2.time) {\n        return value;\n    } else {\n        val1 = easingEquation(t, sX, eX, d);\n        switch (dim) {\n        case 1:\n            return val1;\n            break;\n        case 2:\n            val2 = easingEquation(t, sY, eY, d);\n            return [\n                val1,\n                val2\n            ];\n            break;\n        case 3:\n            val2 = easingEquation(t, sY, eY, d);\n            val3 = easingEquation(t, sZ, eZ, d);\n            return [\n                val1,\n                val2,\n                val3\n            ];\n            break;\n        default:\n            return null;\n        }\n    }\n}\nvar IN_EXPO_CORRECTION = 0.000976563;\nvar OUT_EXPO_CORRECTION = 1.000976563;\nvar s = 1.70158;\nvar p = 0.81;\nvar a = 50;\nfunction bounceOut(t, b, c, d) {\n    if ((t /= d) < 1 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_mul($bm_mul(7.5625, t), t)), b);\n    } else if (t < 2 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 1.5 / 2.75), t), 0.75)), b);\n    } else if (t < 2.5 / 2.75) {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.25 / 2.75), t), 0.9375)), b);\n    } else {\n        return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(7.5625, t -= 2.625 / 2.75), t), 0.984375)), b);\n    }\n}\nfunction bounceIn(t, b, c, d) {\n    return $bm_sum($bm_sub(c, bounceOut($bm_sub(d, t), 0, c, d)), b);\n}\nfunction bounceInOut(t, b, c, d) {\n    if (t < $bm_div(d, 2))\n        return $bm_sum($bm_mul(bounceIn($bm_mul(t, 2), 0, c, d), 0.5), b);\n    else\n        return bounceOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n}\nfunction backIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul(c, t /= d), t), $bm_sub($bm_mul($bm_sum(s, 1), t), s)), b);\n}\nfunction backInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div(c, 2), $bm_mul($bm_mul(t, t), $bm_sub($bm_mul($bm_sum(s *= 1.525, 1), t), s))), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul(t -= 2, t), $bm_sum($bm_mul($bm_sum(s *= 1.525, 1), t), s)), 2)), b);\n}\nfunction backOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul(t = t / d - 1, t), $bm_sum($bm_mul($bm_sum(s, 1), t), s)), 1)), b);\n}\nfunction circIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t /= d, t))), 1)), b);\n}\nfunction circInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.sqrt($bm_sub(1, $bm_mul(t, t))), 1)), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum(Math.sqrt($bm_sub(1, $bm_mul(t -= 2, t))), 1)), b);\n}\nfunction circOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sqrt($bm_sub(1, $bm_mul(t = t / d - 1, t)))), b);\n}\nfunction elasticIn(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_neg($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n}\nfunction elasticInOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d / 2) == 2)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3 * 1.5);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    if (t < 1)\n        return $bm_sum($bm_mul(-0.5, $bm_mul($bm_mul(a, Math.pow(2, $bm_mul(10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p)))), b);\n    return $bm_sum($bm_sum($bm_mul($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t -= 1))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), 0.5), c), b);\n}\nfunction elasticOut(t, b, c, d) {\n    if (t == 0)\n        return b;\n    if ((t /= d) == 1)\n        return $bm_sum(b, c);\n    if (!p)\n        p = $bm_mul(d, 0.3);\n    if (!a || a < Math.abs(c)) {\n        a = c;\n        s = $bm_div(p, 4);\n    } else\n        s = $bm_mul($bm_div(p, $bm_mul(2, Math.PI)), Math.asin($bm_div(c, a)));\n    return $bm_sum($bm_sum($bm_mul($bm_mul(a, Math.pow(2, $bm_mul(-10, t))), Math.sin($bm_div($bm_mul($bm_sub($bm_mul(t, d), s), $bm_mul(2, Math.PI)), p))), c), b);\n}\nfunction expoIn(t, b, c, d) {\n    return t == 0 ? b : c * (Math.pow(2, 10 * (t / d - 1)) - IN_EXPO_CORRECTION) + b;\n}\nfunction expoInOut(t, b, c, d) {\n    var v;\n    if ((t /= d / 2) < 1) {\n        v = $bm_sub(Math.pow(2, $bm_mul(10, $bm_sub(t, 1))), IN_EXPO_CORRECTION);\n    } else {\n        v = $bm_sum($bm_sum($bm_neg(Math.pow(2, $bm_mul(-10, $bm_sub(t, 1)))), 2), IN_EXPO_CORRECTION);\n    }\n    return $bm_sum(b, $bm_mul($bm_div(v, 2), c));\n}\nfunction expoOut(t, b, c, d) {\n    return t == d ? b + c : c * OUT_EXPO_CORRECTION * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nfunction quadIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul(c, t /= d), t), b);\n}\nfunction quadInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_div(c, 2), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul(--t, $bm_sub(t, 2)), 1)), b);\n}\nfunction quadOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_neg(c), t /= d), $bm_sub(t, 2)), b);\n}\nfunction quartIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), b);\n}\nfunction quartInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), 2)), b);\n}\nfunction quartOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_neg(c), $bm_sub($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), 1)), b);\n}\nfunction quintIn(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul(c, t /= d), t), t), t), t), b);\n}\nfunction quintInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1)\n        return $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul($bm_mul($bm_div(c, 2), t), t), t), t), t), b);\n    return $bm_sum($bm_mul($bm_div(c, 2), $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t -= 2, t), t), t), t), 2)), b);\n}\nfunction quintOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, $bm_sum($bm_mul($bm_mul($bm_mul($bm_mul(t = t / d - 1, t), t), t), t), 1)), b);\n}\nfunction sineIn(t, b, c, d) {\n    return $bm_sum($bm_sum($bm_mul($bm_neg(c), Math.cos($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), c), b);\n}\nfunction sineInOut(t, b, c, d) {\n    return $bm_sum($bm_mul($bm_div($bm_neg(c), 2), $bm_sub(Math.cos($bm_div($bm_mul(Math.PI, t), d)), 1)), b);\n}\nfunction sineOut(t, b, c, d) {\n    return $bm_sum($bm_mul(c, Math.sin($bm_mul($bm_div(t, d), $bm_div(Math.PI, 2)))), b);\n}\n$bm_rt = doIt() || value;"},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":3,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":61,"st":0,"bm":0}],"markers":[]}
\ No newline at end of file
diff --git a/Signal/src/Signal-Bridging-Header.h b/Signal/src/Signal-Bridging-Header.h
index fa9f3efefc5..209302f586d 100644
--- a/Signal/src/Signal-Bridging-Header.h
+++ b/Signal/src/Signal-Bridging-Header.h
@@ -29,7 +29,6 @@
 #import "NotificationSettingsViewController.h"
 #import "OWSAddToContactViewController.h"
 #import "OWSAnyTouchGestureRecognizer.h"
-#import "OWSAudioMessageView.h"
 #import "OWSAudioPlayer.h"
 #import "OWSBackup.h"
 #import "OWSBackupIO.h"
diff --git a/Signal/src/ViewControllers/ColorPickerViewController.swift b/Signal/src/ViewControllers/ColorPickerViewController.swift
index 5741089c3e3..a326f765fbb 100644
--- a/Signal/src/ViewControllers/ColorPickerViewController.swift
+++ b/Signal/src/ViewControllers/ColorPickerViewController.swift
@@ -346,7 +346,7 @@ private class MockConversationViewItem: NSObject, ConversationViewItem {
     var isFirstInCluster: Bool = true
     var isLastInCluster: Bool = true
     var unreadIndicator: OWSUnreadIndicator?
-    var lastAudioMessageView: OWSAudioMessageView?
+    var lastAudioMessageView: AudioMessageView?
     var audioDurationSeconds: CGFloat = 0
     var audioProgressSeconds: CGFloat = 0
     var messageCellType: OWSMessageCellType = .textOnlyMessage
@@ -439,15 +439,7 @@ private class MockConversationViewItem: NSObject, ConversationViewItem {
         return false
     }
 
-    func audioPlaybackState() -> AudioPlaybackState {
-        owsFailDebug("unexpected invocation")
-        return AudioPlaybackState.paused
-    }
-
-    func setAudioPlaybackState(_ state: AudioPlaybackState) {
-        owsFailDebug("unexpected invocation")
-        return
-    }
+    var audioPlaybackState: AudioPlaybackState = .paused
 
     func setAudioProgress(_ progress: CGFloat, duration: CGFloat) {
         owsFailDebug("unexpected invocation")
diff --git a/Signal/src/ViewControllers/ConversationView/Cells/AudioMessageView.swift b/Signal/src/ViewControllers/ConversationView/Cells/AudioMessageView.swift
new file mode 100644
index 00000000000..b2cbaea5e3c
--- /dev/null
+++ b/Signal/src/ViewControllers/ConversationView/Cells/AudioMessageView.swift
@@ -0,0 +1,247 @@
+//
+//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+import Lottie
+
+class AudioMessageView: UIStackView {
+    private let attachment: TSAttachment
+    private var attachmentStream: TSAttachmentStream? {
+        guard let attachmentStream = attachment as? TSAttachmentStream else { return nil }
+        return attachmentStream
+    }
+    private let isIncoming: Bool
+    private weak var viewItem: ConversationViewItem?
+    private let conversationStyle: ConversationStyle
+
+    private let playPauseAnimation = AnimationView(name: "playPauseButton")
+    private let playbackTimeLabel = UILabel()
+    private let progressSlider = UISlider()
+    private let waveformProgress = AudioWaveformProgressView()
+
+    private var durationSeconds: CGFloat {
+        guard let durationSeconds = viewItem?.audioDurationSeconds else {
+            owsFailDebug("unexpectedly missing duration seconds")
+            return 0
+        }
+        return durationSeconds
+    }
+
+    private var elapsedSeconds: CGFloat {
+        guard let elapsedSeconds = viewItem?.audioProgressSeconds else {
+            owsFailDebug("unexpectedly missing elapsed seconds")
+            return 0
+        }
+        return elapsedSeconds
+    }
+
+    @objc
+    init(attachment: TSAttachment, isIncoming: Bool, viewItem: ConversationViewItem, conversationStyle: ConversationStyle) {
+        self.attachment = attachment
+        self.isIncoming = isIncoming
+        self.viewItem = viewItem
+        self.conversationStyle = conversationStyle
+
+        super.init(frame: .zero)
+
+        axis = .vertical
+        spacing = AudioMessageView.vSpacing
+
+        if !attachment.isVoiceMessage {
+            let topText: String
+            if let fileName = attachment.sourceFilename?.stripped, !fileName.isEmpty {
+                topText = fileName
+            } else {
+                topText = NSLocalizedString("GENERIC_ATTACHMENT_LABEL", comment: "A label for generic attachments.")
+            }
+
+            let topLabel = UILabel()
+            topLabel.text = topText
+            topLabel.textColor = conversationStyle.bubbleTextColor(isIncoming: isIncoming)
+            topLabel.font = AudioMessageView.labelFont
+            addArrangedSubview(topLabel)
+        }
+
+        // TODO: Adjust the animation speed once we get the final animation
+        playPauseAnimation.animationSpeed = 2
+        playPauseAnimation.backgroundBehavior = .forceFinish
+        playPauseAnimation.contentMode = .scaleAspectFit
+        playPauseAnimation.autoSetDimensions(to: CGSize(square: animationSize))
+        playPauseAnimation.setContentHuggingHigh()
+
+        let fillColorKeypath = AnimationKeypath(keypath: "**.Fill 1.Color")
+        playPauseAnimation.setValueProvider(ColorValueProvider(thumbColor.lottieColorValue), keypath: fillColorKeypath)
+
+        let waveformContainer = UIView.container()
+        waveformContainer.autoSetDimension(.height, toSize: AudioMessageView.waveformHeight)
+
+        waveformProgress.playedColor = playedColor
+        waveformProgress.unplayedColor = unplayedColor
+        waveformProgress.thumbColor = thumbColor
+        waveformContainer.addSubview(waveformProgress)
+        waveformProgress.autoPinEdgesToSuperviewEdges()
+
+        progressSlider.setThumbImage(UIImage(named: "audio_message_thumb")?.asTintedImage(color: thumbColor), for: .normal)
+        progressSlider.setMinimumTrackImage(trackImage(color: playedColor), for: .normal)
+        progressSlider.setMaximumTrackImage(trackImage(color: unplayedColor), for: .normal)
+
+        waveformContainer.addSubview(progressSlider)
+        progressSlider.autoPinWidthToSuperview()
+        progressSlider.autoSetDimension(.height, toSize: 12)
+        progressSlider.autoVCenterInSuperview()
+
+        playbackTimeLabel.textColor = conversationStyle.bubbleSecondaryTextColor(isIncoming: isIncoming)
+        playbackTimeLabel.font = UIFont.ows_dynamicTypeCaption1.ows_monospaced()
+        playbackTimeLabel.setContentHuggingHigh()
+
+        let playerStack = UIStackView(arrangedSubviews: [playPauseAnimation, waveformContainer, playbackTimeLabel])
+        playerStack.isLayoutMarginsRelativeArrangement = true
+        playerStack.layoutMargins = UIEdgeInsets(
+            top: AudioMessageView.vMargin,
+            leading: hMargin,
+            bottom: AudioMessageView.vMargin,
+            trailing: hMargin
+        )
+        playerStack.spacing = hSpacing
+
+        addArrangedSubview(playerStack)
+
+        waveformContainer.autoAlignAxis(.horizontal, toSameAxisOf: playPauseAnimation)
+
+        updateContents()
+    }
+
+    required init(coder: NSCoder) {
+        fatalError("init(coder:) has not been implemented")
+    }
+
+    // MARK: - Scrubbing
+
+    @objc var isScrubbing = false
+
+    @objc
+    func isPointInScrubbableRegion(_ point: CGPoint) -> Bool {
+        let locationInSlider = convert(point, to: waveformProgress)
+        return locationInSlider.x >= 0 && locationInSlider.x <= waveformProgress.width()
+    }
+
+    @objc func scrubToLocation(_ point: CGPoint) -> TimeInterval {
+        let sliderContainer = convert(waveformProgress.frame, from: waveformProgress.superview)
+        var newRatio = CGFloatClamp01(CGFloatInverseLerp(point.x, sliderContainer.minX, sliderContainer.maxX))
+
+        // When in RTL mode, the slider moves in the opposite direction so inverse the ratio.
+        if CurrentAppContext().isRTL {
+            newRatio = 1 - newRatio
+        }
+
+        visibleProgressRatio = newRatio
+
+        return TimeInterval(newRatio * durationSeconds)
+    }
+
+    // MARK: - Contents
+
+    private static var labelFont: UIFont = .ows_dynamicTypeCaption2
+    private static var waveformHeight: CGFloat = 35
+    private static var vMargin: CGFloat = 4
+    private var animationSize: CGFloat = 30
+    private var iconSize: CGFloat = 24
+    private var hMargin: CGFloat = 0
+    private var hSpacing: CGFloat = 12
+    private static var vSpacing: CGFloat = 2
+
+    private lazy var playedColor: UIColor = isIncoming ? .init(rgbHex: 0x92caff) : .ows_white
+    private lazy var unplayedColor: UIColor =
+        isIncoming ? Theme.secondaryColor.withAlphaComponent(0.3) : UIColor.ows_white.withAlphaComponent(0.6)
+    private lazy var thumbColor: UIColor = isIncoming ? Theme.secondaryColor : .ows_white
+
+    @objc
+    static var bubbleHeight: CGFloat {
+        return labelFont.lineHeight + waveformHeight + vSpacing + (vMargin * 2)
+    }
+
+    @objc
+    func updateContents() {
+        updatePlaybackState()
+        updateAudioProgress()
+        showDownloadProgressIfNecessary()
+    }
+
+    private var audioProgressRatio: CGFloat {
+        guard durationSeconds > 0 else { return 0 }
+        return elapsedSeconds / durationSeconds
+    }
+
+    private var visibleProgressRatio: CGFloat {
+        get {
+            return waveformProgress.value
+        }
+        set {
+            waveformProgress.value = newValue
+            progressSlider.value = Float(newValue)
+            updateElapsedTime(durationSeconds * newValue)
+        }
+    }
+
+    private func updatePlaybackState(animated: Bool = true) {
+        let isPlaying = viewItem?.audioPlaybackState == .playing
+        let destination: AnimationProgressTime = isPlaying ? 1 : 0
+
+        if animated {
+            playPauseAnimation.play(toProgress: destination)
+        } else {
+            playPauseAnimation.currentProgress = destination
+        }
+    }
+
+    private func updateElapsedTime(_ elapsedSeconds: CGFloat) {
+        let timeRemaining = Int(durationSeconds - elapsedSeconds)
+        playbackTimeLabel.text = OWSFormat.formatDurationSeconds(timeRemaining)
+    }
+
+    private func updateAudioProgress() {
+        guard !isScrubbing else { return }
+
+        visibleProgressRatio = audioProgressRatio
+
+        if let waveform = attachmentStream?.audioWaveform() {
+            waveformProgress.audioWaveform = waveform
+            waveformProgress.isHidden = false
+            progressSlider.isHidden = true
+        } else {
+            waveformProgress.isHidden = true
+            progressSlider.isHidden = false
+        }
+    }
+
+    private func showDownloadProgressIfNecessary() {
+        guard let attachmentPointer = viewItem?.attachmentPointer else { return }
+
+        // We don't need to handle the "tap to retry" state here,
+        // only download progress.
+        guard .failed != attachmentPointer.state else { return }
+
+        // TODO: Show "restoring" indicator and possibly progress.
+        guard .restoring != attachmentPointer.pointerType else { return }
+
+        guard attachmentPointer.uniqueId.count > 1 else {
+            return owsFailDebug("missing unique id")
+        }
+
+        // Add the download view to the play pause animation. This view
+        // will get recreated once the download completes so we don't
+        // have to worry about reseting anything.
+        let downloadView = MediaDownloadView(attachmentId: attachmentPointer.uniqueId, radius: iconSize * 0.5)
+        playPauseAnimation.animation = nil
+        playPauseAnimation.addSubview(downloadView)
+        downloadView.autoSetDimensions(to: CGSize(square: iconSize))
+        downloadView.autoCenterInSuperview()
+    }
+
+    private func trackImage(color: UIColor) -> UIImage? {
+        return UIImage(named: "audio_message_track")?
+            .asTintedImage(color: color)?
+            .resizableImage(withCapInsets: UIEdgeInsets(top: 0, leading: 2, bottom: 0, trailing: 2))
+    }
+}
diff --git a/Signal/src/ViewControllers/ConversationView/Cells/OWSAudioMessageView.h b/Signal/src/ViewControllers/ConversationView/Cells/OWSAudioMessageView.h
deleted file mode 100644
index 35f688d3aec..00000000000
--- a/Signal/src/ViewControllers/ConversationView/Cells/OWSAudioMessageView.h
+++ /dev/null
@@ -1,32 +0,0 @@
-//
-//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
-//
-
-NS_ASSUME_NONNULL_BEGIN
-
-@class ConversationStyle;
-@class TSAttachment;
-
-@protocol ConversationViewItem;
-
-@interface OWSAudioMessageView : UIStackView
-
-- (instancetype)initWithAttachment:(TSAttachment *)attachment
-                        isIncoming:(BOOL)isIncoming
-                          viewItem:(id<ConversationViewItem>)viewItem
-                 conversationStyle:(ConversationStyle *)conversationStyle;
-
-- (void)createContents;
-
-+ (CGFloat)bubbleHeight;
-
-- (void)updateContents;
-
-- (BOOL)isPointInScrubbableRegion:(CGPoint)location;
-- (NSTimeInterval)scrubToLocation:(CGPoint)location;
-
-@property (nonatomic) BOOL isScrubbing;
-
-@end
-
-NS_ASSUME_NONNULL_END
diff --git a/Signal/src/ViewControllers/ConversationView/Cells/OWSAudioMessageView.m b/Signal/src/ViewControllers/ConversationView/Cells/OWSAudioMessageView.m
deleted file mode 100644
index 300a2a19aea..00000000000
--- a/Signal/src/ViewControllers/ConversationView/Cells/OWSAudioMessageView.m
+++ /dev/null
@@ -1,380 +0,0 @@
-//
-//  Copyright (c) 2019 Open Whisper Systems. All rights reserved.
-//
-
-#import "OWSAudioMessageView.h"
-#import "ConversationViewItem.h"
-#import "Signal-Swift.h"
-#import "UIColor+OWS.h"
-#import "ViewControllerUtils.h"
-#import <SignalMessaging/OWSFormat.h>
-#import <SignalMessaging/UIColor+OWS.h>
-#import <SignalServiceKit/MIMETypeUtil.h>
-
-NS_ASSUME_NONNULL_BEGIN
-
-@interface OWSAudioMessageView ()
-
-@property (nonatomic) TSAttachment *attachment;
-@property (nonatomic, nullable) TSAttachmentStream *attachmentStream;
-@property (nonatomic) BOOL isIncoming;
-@property (nonatomic, weak) id<ConversationViewItem> viewItem;
-@property (nonatomic, readonly) ConversationStyle *conversationStyle;
-
-@property (nonatomic, nullable) UIButton *audioPlayPauseButton;
-@property (nonatomic, nullable) UILabel *playbackTimeLabel;
-@property (nonatomic, nullable) UISlider *audioProgressSlider;
-@property (nonatomic, nullable) AudioWaveformProgressView *waveformProgressView;
-
-@end
-
-#pragma mark -
-
-@implementation OWSAudioMessageView
-
-- (instancetype)initWithAttachment:(TSAttachment *)attachment
-                        isIncoming:(BOOL)isIncoming
-                          viewItem:(id<ConversationViewItem>)viewItem
-                 conversationStyle:(ConversationStyle *)conversationStyle
-{
-    self = [super init];
-
-    if (self) {
-        _attachment = attachment;
-        if ([attachment isKindOfClass:[TSAttachmentStream class]]) {
-            _attachmentStream = (TSAttachmentStream *)attachment;
-        }
-        _isIncoming = isIncoming;
-        _viewItem = viewItem;
-        _conversationStyle = conversationStyle;
-    }
-
-    return self;
-}
-
-- (void)updateContents
-{
-    if (self.audioPlaybackState == AudioPlaybackState_Playing) {
-        [self setAudioIconToPause];
-    } else {
-        [self setAudioIconToPlay];
-    }
-
-    // Don't update the position if we're current scrubbing, as it conflicts with the user interaction.
-    if (!self.isScrubbing) {
-        [self updateWaveformProgressView];
-        [self updateAudioBottomLabel:self.audioProgressSeconds];
-    }
-}
-
-- (CGFloat)audioProgressSeconds
-{
-    return [self.viewItem audioProgressSeconds];
-}
-
-- (CGFloat)audioDurationSeconds
-{
-    return self.viewItem.audioDurationSeconds;
-}
-
-- (AudioPlaybackState)audioPlaybackState
-{
-    return [self.viewItem audioPlaybackState];
-}
-
-- (BOOL)isAudioPlaying
-{
-    return self.audioPlaybackState == AudioPlaybackState_Playing;
-}
-
-- (void)updateAudioBottomLabel:(CGFloat)progressSeconds
-{
-    self.playbackTimeLabel.text =
-        [OWSFormat formatDurationSeconds:(long)round(self.audioDurationSeconds - progressSeconds)];
-}
-
-- (void)setAudioIcon:(UIImage *)icon
-{
-    OWSAssertDebug(icon.size.height == self.iconSize);
-
-    icon = [icon imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
-    [_audioPlayPauseButton setImage:icon forState:UIControlStateNormal];
-    [_audioPlayPauseButton setImage:icon forState:UIControlStateDisabled];
-}
-
-- (void)setAudioIconToPlay
-{
-    [self setAudioIcon:[UIImage imageNamed:@"play-filled-24"]];
-}
-
-- (void)setAudioIconToPause
-{
-    [self setAudioIcon:[UIImage imageNamed:@"pause-filled-24"]];
-}
-
-- (void)updateWaveformProgressView
-{
-    float progressRatio = 0;
-    if (self.audioDurationSeconds > 0) {
-        progressRatio = (float)(self.audioProgressSeconds / self.audioDurationSeconds);
-    }
-
-    [self setProgressRatio:progressRatio];
-
-    UIColor *playedColor = nil;
-    UIColor *unplayedColor = nil;
-    UIColor *thumbColor = nil;
-
-    if (self.isIncoming) {
-        playedColor = [UIColor colorWithRGBHex:0x92caff];
-        unplayedColor = [[Theme secondaryColor] colorWithAlphaComponent:0.3];
-        thumbColor = [Theme secondaryColor];
-    } else {
-        playedColor = [UIColor ows_whiteColor];
-        unplayedColor = [[UIColor ows_whiteColor] colorWithAlphaComponent:0.6];
-        thumbColor = [UIColor ows_whiteColor];
-    }
-
-    [self.audioProgressSlider
-        setThumbImage:[[UIImage imageNamed:@"audio_message_thumb"] asTintedImageWithColor:thumbColor]
-             forState:UIControlStateNormal];
-    [self.audioProgressSlider setMinimumTrackImage:[self trackImageWithColor:playedColor]
-                                          forState:UIControlStateNormal];
-    [self.audioProgressSlider setMaximumTrackImage:[self trackImageWithColor:unplayedColor]
-                                          forState:UIControlStateNormal];
-
-    self.audioPlayPauseButton.imageView.tintColor = thumbColor;
-
-    self.waveformProgressView.playedColor = playedColor;
-    self.waveformProgressView.unplayedColor = unplayedColor;
-    self.waveformProgressView.thumbColor = thumbColor;
-
-    AudioWaveform *_Nullable waveform = self.attachmentStream.audioWaveform;
-    self.waveformProgressView.audioWaveform = waveform;
-
-    self.audioProgressSlider.hidden = waveform != nil;
-    self.waveformProgressView.hidden = waveform == nil;
-}
-
-- (void)setProgressRatio:(float)progressRatio
-{
-    [self.audioProgressSlider setValue:progressRatio];
-    self.waveformProgressView.value = progressRatio;
-}
-
-- (UIImage *)trackImageWithColor:(UIColor *)color
-{
-    return [[[UIImage imageNamed:@"audio_message_track"] asTintedImageWithColor:color]
-        resizableImageWithCapInsets:UIEdgeInsetsMake(0, 2, 0, 2)];
-}
-
-- (void)replaceIconWithDownloadProgressIfNecessary:(UIView *)iconView
-{
-    if (!self.viewItem.attachmentPointer) {
-        return;
-    }
-
-    switch (self.viewItem.attachmentPointer.state) {
-        case TSAttachmentPointerStateFailed:
-            // We don't need to handle the "tap to retry" state here,
-            // only download progress.
-            return;
-        case TSAttachmentPointerStateEnqueued:
-        case TSAttachmentPointerStateDownloading:
-            break;
-    }
-    switch (self.viewItem.attachmentPointer.pointerType) {
-        case TSAttachmentPointerTypeRestoring:
-            // TODO: Show "restoring" indicator and possibly progress.
-            return;
-        case TSAttachmentPointerTypeUnknown:
-        case TSAttachmentPointerTypeIncoming:
-            break;
-    }
-    NSString *_Nullable uniqueId = self.viewItem.attachmentPointer.uniqueId;
-    if (uniqueId.length < 1) {
-        OWSFailDebug(@"Missing uniqueId.");
-        return;
-    }
-
-    CGFloat downloadViewSize = self.iconSize;
-    MediaDownloadView *downloadView =
-        [[MediaDownloadView alloc] initWithAttachmentId:uniqueId radius:downloadViewSize * 0.5f];
-    iconView.layer.opacity = 0.01f;
-    [self addSubview:downloadView];
-    [downloadView autoSetDimensionsToSize:CGSizeMake(downloadViewSize, downloadViewSize)];
-    [downloadView autoAlignAxis:ALAxisHorizontal toSameAxisOfView:iconView];
-    [downloadView autoAlignAxis:ALAxisVertical toSameAxisOfView:iconView];
-}
-
-#pragma mark -
-
-- (CGFloat)hMargin
-{
-    return 0.f;
-}
-
-- (CGFloat)hSpacing
-{
-    return 12.f;
-}
-
-+ (CGFloat)vMargin
-{
-    return 4.f;
-}
-
-- (CGFloat)vMargin
-{
-    return [OWSAudioMessageView vMargin];
-}
-
-+ (CGFloat)bubbleHeight
-{
-    CGFloat contentHeight = ([OWSAudioMessageView labelFont].lineHeight + [OWSAudioMessageView waveformMaxHeight] +
-        [OWSAudioMessageView vSpacing]);
-    return contentHeight + self.vMargin * 2;
-}
-
-- (CGFloat)bubbleHeight
-{
-    return [OWSAudioMessageView bubbleHeight];
-}
-
-+ (CGFloat)iconSize
-{
-    return 24;
-}
-
-- (CGFloat)iconSize
-{
-    return [OWSAudioMessageView iconSize];
-}
-
-- (BOOL)isVoiceMessage
-{
-    return self.attachment.isVoiceMessage;
-}
-
-- (void)createContents
-{
-    self.axis = UILayoutConstraintAxisVertical;
-    self.spacing = [OWSAudioMessageView vSpacing];
-
-    NSString *_Nullable filename = self.attachment.sourceFilename;
-    if (filename.length < 1) {
-        filename = [self.attachmentStream.originalFilePath lastPathComponent];
-    }
-    NSString *topText = [[filename stringByDeletingPathExtension] ows_stripped];
-    if (topText.length < 1) {
-        topText = [MIMETypeUtil fileExtensionForMIMEType:self.attachment.contentType].localizedUppercaseString;
-    }
-    if (topText.length < 1) {
-        topText = NSLocalizedString(@"GENERIC_ATTACHMENT_LABEL", @"A label for generic attachments.");
-    }
-    if (self.isVoiceMessage) {
-        topText = nil;
-    }
-    UILabel *topLabel = [UILabel new];
-    topLabel.text = topText;
-    topLabel.textColor = [self.conversationStyle bubbleTextColorWithIsIncoming:self.isIncoming];
-    topLabel.lineBreakMode = NSLineBreakByTruncatingMiddle;
-    topLabel.font = [OWSAudioMessageView labelFont];
-    [self addArrangedSubview:topLabel];
-    topLabel.hidden = topText == nil;
-
-    _audioPlayPauseButton = [UIButton buttonWithType:UIButtonTypeCustom];
-    self.audioPlayPauseButton.enabled = NO;
-    [self.audioPlayPauseButton setContentHuggingHigh];
-
-    UIView *waveformContainer = [UIView containerView];
-    [waveformContainer autoSetDimension:ALDimensionHeight toSize:[OWSAudioMessageView waveformMaxHeight]];
-
-    AudioWaveformProgressView *waveformProgressView = [AudioWaveformProgressView new];
-    self.waveformProgressView = waveformProgressView;
-    [waveformContainer addSubview:waveformProgressView];
-    [waveformProgressView autoPinEdgesToSuperviewEdges];
-
-    UISlider *audioProgressSlider = [UISlider new];
-    self.audioProgressSlider = audioProgressSlider;
-    [waveformContainer addSubview:audioProgressSlider];
-    [audioProgressSlider autoPinWidthToSuperview];
-    [audioProgressSlider autoSetDimension:ALDimensionHeight toSize:12];
-    [audioProgressSlider autoVCenterInSuperview];
-
-    [self updateWaveformProgressView];
-
-    UILabel *playbackTimeLabel = [UILabel new];
-    self.playbackTimeLabel = playbackTimeLabel;
-    [self updateAudioBottomLabel:self.audioProgressSeconds];
-    playbackTimeLabel.textColor = [self.conversationStyle bubbleSecondaryTextColorWithIsIncoming:self.isIncoming];
-    playbackTimeLabel.lineBreakMode = NSLineBreakByTruncatingMiddle;
-    playbackTimeLabel.font = [OWSAudioMessageView progressLabelFont];
-    [playbackTimeLabel setContentHuggingHigh];
-
-    UIStackView *playerStack = [[UIStackView alloc]
-        initWithArrangedSubviews:@[ self.audioPlayPauseButton, waveformContainer, playbackTimeLabel ]];
-    playerStack.layoutMarginsRelativeArrangement = YES;
-    playerStack.layoutMargins = UIEdgeInsetsMake(self.vMargin, self.hMargin, self.vMargin, self.hMargin);
-    playerStack.axis = UILayoutConstraintAxisHorizontal;
-    playerStack.spacing = self.hSpacing;
-
-    [self addArrangedSubview:playerStack];
-
-    [waveformContainer autoAlignAxis:ALAxisHorizontal toSameAxisOfView:self.audioPlayPauseButton];
-
-    [self replaceIconWithDownloadProgressIfNecessary:self.audioPlayPauseButton];
-
-    [self updateContents];
-}
-
-+ (CGFloat)waveformMaxHeight
-{
-    return 35.f;
-}
-
-+ (UIFont *)labelFont
-{
-    return [UIFont ows_dynamicTypeCaption2Font];
-}
-
-+ (UIFont *)progressLabelFont
-{
-    return [[UIFont ows_dynamicTypeCaption1Font] ows_monospaced];
-}
-
-+ (CGFloat)vSpacing
-{
-    return 2.f;
-}
-
-- (BOOL)isPointInScrubbableRegion:(CGPoint)location
-{
-    CGPoint locationInSlider = [self convertPoint:location toView:self.waveformProgressView];
-    return locationInSlider.x >= 0 && locationInSlider.x <= self.waveformProgressView.width;
-}
-
-- (NSTimeInterval)scrubToLocation:(CGPoint)location
-{
-    CGRect sliderContainer = [self convertRect:self.waveformProgressView.frame
-                                      fromView:self.waveformProgressView.superview];
-
-    CGFloat newRatio = CGFloatClamp01(CGFloatInverseLerp(location.x, CGRectGetMinX(sliderContainer), CGRectGetMaxX(sliderContainer)));
-
-    // When in RTL mode, the slider moves in the opposite direction so inverse the ratio.
-    if (CurrentAppContext().isRTL) {
-        newRatio = 1 - newRatio;
-    }
-
-    [self setProgressRatio:newRatio];
-
-    CGFloat newProgressSeconds = newRatio * self.audioDurationSeconds;
-
-    [self updateAudioBottomLabel:newProgressSeconds];
-
-    return newProgressSeconds;
-}
-
-@end
-
-NS_ASSUME_NONNULL_END
diff --git a/Signal/src/ViewControllers/ConversationView/Cells/OWSMessageBubbleView.m b/Signal/src/ViewControllers/ConversationView/Cells/OWSMessageBubbleView.m
index 3e1b08bb0df..1a9448f12d8 100644
--- a/Signal/src/ViewControllers/ConversationView/Cells/OWSMessageBubbleView.m
+++ b/Signal/src/ViewControllers/ConversationView/Cells/OWSMessageBubbleView.m
@@ -5,7 +5,6 @@
 #import "OWSMessageBubbleView.h"
 #import "AttachmentUploadView.h"
 #import "ConversationViewItem.h"
-#import "OWSAudioMessageView.h"
 #import "OWSBubbleShapeView.h"
 #import "OWSBubbleView.h"
 #import "OWSContactShareButtonsView.h"
@@ -866,12 +865,11 @@ - (UIView *)loadViewForAudio
     OWSAssertDebug(attachment);
     OWSAssertDebug([attachment isAudio]);
 
-    OWSAudioMessageView *audioMessageView = [[OWSAudioMessageView alloc] initWithAttachment:attachment
-                                                                                 isIncoming:self.isIncoming
-                                                                                   viewItem:self.viewItem
-                                                                          conversationStyle:self.conversationStyle];
+    AudioMessageView *audioMessageView = [[AudioMessageView alloc] initWithAttachment:attachment
+                                                                           isIncoming:self.isIncoming
+                                                                             viewItem:self.viewItem
+                                                                    conversationStyle:self.conversationStyle];
     self.viewItem.lastAudioMessageView = audioMessageView;
-    [audioMessageView createContents];
     [self addProgressViewsIfNecessary:audioMessageView shouldShowDownloadProgress:NO];
 
     self.loadCellContentBlock = ^{
@@ -1106,7 +1104,7 @@ - (nullable NSValue *)bodyMediaSize
             return nil;
         }
         case OWSMessageCellType_Audio:
-            result = CGSizeMake(maxMediaMessageWidth, OWSAudioMessageView.bubbleHeight);
+            result = CGSizeMake(maxMediaMessageWidth, AudioMessageView.bubbleHeight);
             break;
         case OWSMessageCellType_GenericAttachment: {
             TSAttachment *attachment = (self.viewItem.attachmentStream ?: self.viewItem.attachmentPointer);
@@ -1629,12 +1627,12 @@ - (BOOL)handleAudioPanGesture:(UIPanGestureRecognizer *)sender
 {
     OWSAssertDebug(self.delegate);
 
-    if (![self.bodyMediaView isKindOfClass:[OWSAudioMessageView class]]) {
+    if (![self.bodyMediaView isKindOfClass:[AudioMessageView class]]) {
         OWSFailDebug(@"Unexpected body media view: %@", self.bodyMediaView.class);
         return NO;
     }
 
-    OWSAudioMessageView *audioMessageView = (OWSAudioMessageView *)self.bodyMediaView;
+    AudioMessageView *audioMessageView = (AudioMessageView *)self.bodyMediaView;
 
     CGPoint locationInAudioView = [sender locationInView:audioMessageView];
 
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationViewItem.h b/Signal/src/ViewControllers/ConversationView/ConversationViewItem.h
index c341d197626..8e5a0d768a4 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationViewItem.h
+++ b/Signal/src/ViewControllers/ConversationView/ConversationViewItem.h
@@ -37,10 +37,10 @@ typedef NS_ENUM(NSUInteger, ViewOnceMessageState) {
 
 NSString *NSStringForViewOnceMessageState(ViewOnceMessageState value);
 
+@class AudioMessageView;
 @class ContactShareViewModel;
 @class ConversationViewCell;
 @class DisplayableText;
-@class OWSAudioMessageView;
 @class OWSLinkPreview;
 @class OWSQuotedReplyModel;
 @class OWSUnreadIndicator;
@@ -118,7 +118,7 @@ NSString *NSStringForViewOnceMessageState(ViewOnceMessageState value);
 
 #pragma mark - Audio Playback
 
-@property (nonatomic, weak) OWSAudioMessageView *lastAudioMessageView;
+@property (nonatomic, weak) AudioMessageView *lastAudioMessageView;
 
 @property (nonatomic, readonly) CGFloat audioDurationSeconds;
 @property (nonatomic, readonly) CGFloat audioProgressSeconds;
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m b/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
index 05eeee5d4ce..5477c172f61 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
+++ b/Signal/src/ViewControllers/ConversationView/ConversationViewItem.m
@@ -3,7 +3,6 @@
 //
 
 #import "ConversationViewItem.h"
-#import "OWSAudioMessageView.h"
 #import "OWSContactOffersCell.h"
 #import "OWSMessageCell.h"
 #import "OWSMessageHeaderView.h"
@@ -110,7 +109,6 @@ @interface ConversationInteractionViewItem ()
 
 #pragma mark - OWSAudioPlayerDelegate
 
-@property (nonatomic) AudioPlaybackState audioPlaybackState;
 @property (nonatomic) CGFloat audioProgressSeconds;
 @property (nonatomic) CGFloat audioDurationSeconds;
 
@@ -156,6 +154,7 @@ @implementation ConversationInteractionViewItem
 @synthesize senderUsername = _senderUsername;
 @synthesize accessibilityAuthorName = _accessibilityAuthorName;
 @synthesize shouldHideFooter = _shouldHideFooter;
+@synthesize audioPlaybackState = _audioPlaybackState;
 
 - (instancetype)initWithInteraction:(TSInteraction *)interaction
                              thread:(TSThread *)thread
@@ -632,6 +631,11 @@ - (nullable TSAttachmentStream *)firstValidAlbumAttachment
 
 #pragma mark - OWSAudioPlayerDelegate
 
+- (AudioPlaybackState)audioPlaybackState
+{
+    return _audioPlaybackState;
+}
+
 - (void)setAudioPlaybackState:(AudioPlaybackState)audioPlaybackState
 {
     _audioPlaybackState = audioPlaybackState;
diff --git a/SignalMessaging/ViewControllers/MediaMessageView.swift b/SignalMessaging/ViewControllers/MediaMessageView.swift
index f78c4dba9dd..c233bfd741f 100644
--- a/SignalMessaging/ViewControllers/MediaMessageView.swift
+++ b/SignalMessaging/ViewControllers/MediaMessageView.swift
@@ -34,15 +34,6 @@ public class MediaMessageView: UIView, OWSAudioPlayerDelegate {
     @objc
     public var videoPlayButton: UIImageView?
 
-    @objc
-    public var playbackState = AudioPlaybackState.stopped {
-        didSet {
-            AssertIsOnMainThread()
-
-            ensureButtonState()
-        }
-    }
-
     @objc
     public var audioProgressSeconds: CGFloat = 0
 
@@ -398,16 +389,17 @@ public class MediaMessageView: UIView, OWSAudioPlayerDelegate {
 
     // MARK: - OWSAudioPlayerDelegate
 
-    public func audioPlaybackState() -> AudioPlaybackState {
-        return playbackState
-    }
+    @objc
+    public var audioPlaybackState = AudioPlaybackState.stopped {
+        didSet {
+            AssertIsOnMainThread()
 
-    public func setAudioPlaybackState(_ value: AudioPlaybackState) {
-        playbackState = value
+            ensureButtonState()
+        }
     }
 
     private func ensureButtonState() {
-        if playbackState == .playing {
+        if audioPlaybackState == .playing {
             setAudioIconToPause()
         } else {
             setAudioIconToPlay()
diff --git a/SignalMessaging/utils/OWSAudioPlayer.h b/SignalMessaging/utils/OWSAudioPlayer.h
index 8c341b19d67..36c952d27f8 100644
--- a/SignalMessaging/utils/OWSAudioPlayer.h
+++ b/SignalMessaging/utils/OWSAudioPlayer.h
@@ -12,8 +12,7 @@ typedef NS_ENUM(NSInteger, AudioPlaybackState) {
 
 @protocol OWSAudioPlayerDelegate <NSObject>
 
-- (AudioPlaybackState)audioPlaybackState;
-- (void)setAudioPlaybackState:(AudioPlaybackState)state;
+@property (nonatomic) AudioPlaybackState audioPlaybackState;
 
 - (void)setAudioProgress:(CGFloat)progress duration:(CGFloat)duration;
 
