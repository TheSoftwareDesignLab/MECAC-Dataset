diff --git a/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift b/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
index bbebdcbe589..9a7346d8a87 100644
--- a/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
+++ b/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
@@ -1521,7 +1521,9 @@ private class TextStoryComposerView: TextAttachmentView, UITextViewDelegate {
     }
 
     private func updateTextViewAttributes() {
-        let text = textView.text.stripped
+        let text = text ?? ""
+        textView.text = transformedText(text, for: textStyle)
+
         let (fontPointSize, textAlignment) = sizeAndAlignment(forText: text)
         textView.updateWith(
             textForegroundColor: textForegroundColor,
@@ -1534,10 +1536,9 @@ private class TextStoryComposerView: TextAttachmentView, UITextViewDelegate {
 
     private func adjustFontSizeIfNecessary() {
         guard let currentFontSize = textView.font?.pointSize else { return }
-        let text = textView.text.stripped
+        let text = text?.stripped ?? ""
         let desiredFontSize = sizeAndAlignment(forText: text).fontPointSize
         guard desiredFontSize != currentFontSize else { return }
-        self.text = text
         updateTextAttributes()
         updateTextViewAttributes()
     }
@@ -1616,23 +1617,45 @@ private class TextStoryComposerView: TextAttachmentView, UITextViewDelegate {
     }
 
     func textViewDidEndEditing(_ textView: UITextView) {
-        self.text = textView.text.stripped
+        text = text?.stripped
         updateVisibilityOfComponents(animated: true)
         delegate?.textStoryComposerDidEndEditing(self)
     }
 
-    func textView(_ textView: UITextView, shouldChangeTextIn range: NSRange, replacementText text: String) -> Bool {
-        // Truncate the replacement to fit.
-        return TextViewHelper.textView(
-            textView,
-            shouldChangeTextIn: range,
-            replacementText: text,
+    func textView(_ textView: UITextView, shouldChangeTextIn range: NSRange, replacementText: String) -> Bool {
+
+        let originalInput = text ?? ""
+        let (shouldChange, changedString) = TextHelper.shouldChangeCharactersInRange(
+            with: originalInput,
+            editingRange: range,
+            replacementString: replacementText,
             maxGlyphCount: 700
         )
+
+        if let changedString = changedString {
+            text = changedString
+            textView.text = transformedText(changedString, for: textStyle)
+            textView.delegate?.textViewDidChange?(textView)
+            return false
+        }
+
+        guard shouldChange else {
+            return false
+        }
+
+        text = (originalInput as NSString).replacingCharacters(in: range, with: replacementText)
+
+        let transformedReplacementText = transformedText(replacementText, for: textStyle)
+        guard transformedReplacementText == replacementText else {
+            textView.text = transformedText(text ?? "", for: textStyle)
+            textView.delegate?.textViewDidChange?(textView)
+            return false
+        }
+
+        return true
     }
 
     func textViewDidChange(_ textView: UITextView) {
-        self.text = textView.text.stripped
         adjustFontSizeIfNecessary()
         delegate?.textStoryComposerDidChange(self)
         setNeedsLayout()
diff --git a/Signal/src/util/TextHelper.swift b/Signal/src/util/TextHelper.swift
index efc68ebdc08..3cb0bff271e 100644
--- a/Signal/src/util/TextHelper.swift
+++ b/Signal/src/util/TextHelper.swift
@@ -85,8 +85,8 @@ public class TextViewHelper: NSObject {
     }
 }
 
-private enum TextHelper {
-    static func shouldChangeCharactersInRange(
+public enum TextHelper {
+    public static func shouldChangeCharactersInRange(
         with existingString: String?,
         editingRange: NSRange,
         replacementString: String,
diff --git a/SignalUI/Views/TextAttachmentView.swift b/SignalUI/Views/TextAttachmentView.swift
index 91194faadb2..c274a1e50e1 100644
--- a/SignalUI/Views/TextAttachmentView.swift
+++ b/SignalUI/Views/TextAttachmentView.swift
@@ -294,7 +294,7 @@ open class TextAttachmentView: UIView {
         setNeedsLayout()
     }
 
-    private func transformedText(_ text: String, for textStyle: TextAttachment.TextStyle) -> String {
+    public func transformedText(_ text: String, for textStyle: TextAttachment.TextStyle) -> String {
         guard case .condensed = textStyle else { return text }
         return text.uppercased()
     }
