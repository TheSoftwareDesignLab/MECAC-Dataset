diff --git a/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift b/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
index 56f8e8d12d4..0ed50cb4417 100644
--- a/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
+++ b/Signal/src/ViewControllers/Photos/PhotoCaptureViewController.swift
@@ -362,16 +362,29 @@ class PhotoCaptureViewController: OWSViewController {
             textViewContentLayoutGuide.trailingAnchor.constraint(equalTo: view.layoutMarginsGuide.trailingAnchor)
         ])
 
-        // textViewWrapperView contains text view and link preview - these two are grouped together
-        // and are centered vertically in text content area.
-        textViewWrapperView.translatesAutoresizingMaskIntoConstraints = false
-        view.addSubview(textViewWrapperView)
+        // This is a colored background for `inverted` text style.
+        let textViewWrapper = UIView()
+        textViewWrapper.addSubview(textViewBackgroundView)
+        textViewWrapper.addSubview(textView)
+        textViewBackgroundView.autoSetDimension(.width, toSize: 52, relation: .greaterThanOrEqual)
+        textViewBackgroundView.autoSetDimension(.height, toSize: 52, relation: .greaterThanOrEqual)
+        textViewBackgroundView.autoPinWidthToSuperview(relation: .lessThanOrEqual)
+        textViewBackgroundView.autoPinHeightToSuperview(relation: .lessThanOrEqual)
+        textViewBackgroundView.autoCenterInSuperview()
+        textView.autoPin(toEdgesOf: textViewBackgroundView, with: UIEdgeInsets(hMargin: 16, vMargin: 2))
+
+        // Text view and link preview are grouped together in a vertical stack view
+        // that is centered vertically in text content area.
+        let stackView = UIStackView(arrangedSubviews: [ textViewWrapper, linkPreviewWrapperView ])
+        stackView.axis = .vertical
+        stackView.translatesAutoresizingMaskIntoConstraints = false
+        view.addSubview(stackView)
         view.addConstraints([
-            textViewWrapperView.leadingAnchor.constraint(equalTo: textViewContentLayoutGuide.leadingAnchor),
-            textViewWrapperView.topAnchor.constraint(greaterThanOrEqualTo: textViewContentLayoutGuide.topAnchor),
-            textViewWrapperView.trailingAnchor.constraint(equalTo: textViewContentLayoutGuide.trailingAnchor),
-            textViewWrapperView.bottomAnchor.constraint(lessThanOrEqualTo: textViewContentLayoutGuide.bottomAnchor),
-            textViewWrapperView.centerYAnchor.constraint(equalTo: textViewContentLayoutGuide.centerYAnchor)
+            stackView.leadingAnchor.constraint(equalTo: textViewContentLayoutGuide.leadingAnchor),
+            stackView.topAnchor.constraint(greaterThanOrEqualTo: textViewContentLayoutGuide.topAnchor),
+            stackView.trailingAnchor.constraint(equalTo: textViewContentLayoutGuide.trailingAnchor),
+            stackView.bottomAnchor.constraint(lessThanOrEqualTo: textViewContentLayoutGuide.bottomAnchor),
+            stackView.centerYAnchor.constraint(equalTo: textViewContentLayoutGuide.centerYAnchor)
         ])
 
         // Placeholder text is centered in "text content area".
@@ -402,21 +415,20 @@ class PhotoCaptureViewController: OWSViewController {
         button.layoutMargins = .zero
         return button
     }()
-    private lazy var textViewWrapperView: UIView = {
-        let wrapperView = UIStackView(arrangedSubviews: [ textView, linkPreviewWrapperView ])
-        wrapperView.axis = .vertical
-        return wrapperView
+    private lazy var textViewBackgroundView: UIView = {
+        let backgroundView = UIView()
+        backgroundView.layer.cornerRadius = 12
+        return backgroundView
     }()
     private lazy var textView: MediaTextView = {
         let textView = MediaTextView()
         textView.delegate = self
-        textView.autoSetDimension(.height, toSize: 32, relation: .greaterThanOrEqual)
         return textView
     }()
     private lazy var textViewAccessoryToolbar: TextStylingToolbar = {
         let toolbar = TextStylingToolbar(layout: .textStory)
         toolbar.preservesSuperviewLayoutMargins = true
-        toolbar.colorPickerView.delegate = self
+        toolbar.addTarget(self, action: #selector(didChangeTextColor), for: .valueChanged)
         toolbar.textStyleButton.addTarget(self, action: #selector(didTapTextStyleButton), for: .touchUpInside)
         toolbar.decorationStyleButton.addTarget(self, action: #selector(didTapDecorationStyleButton), for: .touchUpInside)
         toolbar.doneButton.addTarget(self, action: #selector(didTapTextViewDoneButton), for: .touchUpInside)
@@ -869,6 +881,7 @@ extension PhotoCaptureViewController {
     private func updateTextViewAttributes(using textToolbar: TextStylingToolbar) {
         let (fontPointSize, textAlignment) = PhotoCaptureViewController.desiredAttributes(forText: strippedTextViewText)
         textView.update(using: textToolbar, fontPointSize: fontPointSize, textAlignment: textAlignment)
+        textViewBackgroundView.backgroundColor = textViewAccessoryToolbar.textBackgroundColor
     }
 
     private func adjustFontSizeIfNecessary() {
@@ -910,7 +923,6 @@ extension PhotoCaptureViewController {
     private func updateTextEditorUI(animated: Bool) {
         let isPlaceholderHidden = textView.isFirstResponder || textView.hasText || linkPreview != nil
         textViewPlaceholderLabel.setIsHidden(isPlaceholderHidden, animated: animated)
-
         bottomBar.proceedButton.isEnabled = !isTextViewContentEmpty
     }
 
@@ -1065,9 +1077,7 @@ extension PhotoCaptureViewController {
         textViewAccessoryToolbar.decorationStyle = nextDecorationStyle
 
         // Update text view.
-        if textView.isFirstResponder {
-            updateTextViewAttributes(using: textViewAccessoryToolbar)
-        }
+        updateTextViewAttributes(using: textViewAccessoryToolbar)
     }
 
     @objc
@@ -1101,16 +1111,8 @@ extension PhotoCaptureViewController {
     private func didTapTextStoryProceedButton() {
         Logger.verbose("")
 
-        let textForegroundColor: UIColor
-        let textBackgroundColor: UIColor?
-        switch textViewAccessoryToolbar.decorationStyle {
-        case .inverted:
-            textForegroundColor = .white
-            textBackgroundColor = textViewAccessoryToolbar.colorPickerView.color
-        default:
-            textForegroundColor = textViewAccessoryToolbar.colorPickerView.color
-            textBackgroundColor = nil
-        }
+        let textForegroundColor = textViewAccessoryToolbar.textForegroundColor
+        let textBackgroundColor = textViewAccessoryToolbar.textBackgroundColor
 
         let textStyle: TextAttachment.TextStyle = {
             switch textViewAccessoryToolbar.textStyle {
@@ -1139,6 +1141,11 @@ extension PhotoCaptureViewController {
             linkPreview: validatedLinkPreview)
         delegate?.photoCaptureViewController(self, didFinishWithTextAttachment: textAttachment)
     }
+
+    @objc
+    private func didChangeTextColor() {
+        updateTextViewAttributes(using: textViewAccessoryToolbar)
+    }
 }
 
 extension PhotoCaptureViewController: UITextViewDelegate {
@@ -1161,13 +1168,6 @@ extension PhotoCaptureViewController: UITextViewDelegate {
     }
 }
 
-extension PhotoCaptureViewController: ColorPickerBarViewDelegate {
-
-    func colorPickerBarView(_ pickerView: ColorPickerBarView, didSelectColor color: ColorPickerBarColor) {
-        updateTextViewAttributes(using: textViewAccessoryToolbar)
-    }
-}
-
 extension PhotoCaptureViewController: LinkPreviewAttachmentViewControllerDelegate {
 
     func linkPreviewAttachmentViewController(_ viewController: LinkPreviewAttachmentViewController,
diff --git a/SignalUI/Views/ColorPickerBar.swift b/SignalUI/Views/ColorPickerBar.swift
index d1b38673b9c..1a0faf9c159 100644
--- a/SignalUI/Views/ColorPickerBar.swift
+++ b/SignalUI/Views/ColorPickerBar.swift
@@ -34,7 +34,11 @@ public class ColorPickerBarColor {
     }
 
     class var white: ColorPickerBarColor {
-        ColorPickerBarColor(color: UIColor(rgbHex: 0xffffff), palettePhase: 1)
+        ColorPickerBarColor(color: .white, palettePhase: 1)
+    }
+
+    class var black: ColorPickerBarColor {
+        ColorPickerBarColor(color: .black, palettePhase: 0)
     }
 
     static var gradientUIColors: [UIColor] {
diff --git a/SignalUI/Views/ImageEditor/ImageEditorCanvasView.swift b/SignalUI/Views/ImageEditor/ImageEditorCanvasView.swift
index 5fcf68872bb..4c79d424ed3 100644
--- a/SignalUI/Views/ImageEditor/ImageEditorCanvasView.swift
+++ b/SignalUI/Views/ImageEditor/ImageEditorCanvasView.swift
@@ -776,11 +776,6 @@ class ImageEditorCanvasView: AttachmentPrepContentView {
                                              .strokeColor: item.color.color ],
                                            range: attributedString.entireRange)
 
-        case .inverted:
-            attributedString.addAttribute(.backgroundColor,
-                                          value: item.color.color,
-                                          range: attributedString.entireRange)
-
         default:
             break
         }
@@ -813,6 +808,15 @@ class ImageEditorCanvasView: AttachmentPrepContentView {
                                              y: centerInCanvas.y - layerSize.height * 0.5),
                              size: layerSize)
 
+        // Enlarge the layer slightly when setting the background color to add some horizontal padding around the text.
+        // Unfortunately there's no easy way to add vertical padding because default CATextLayer's behavior
+        // is to start drawing text from the top.
+        if item.decorationStyle == .inverted {
+            layer.frame = layer.frame.insetBy(dx: -4, dy: 0)
+            layer.backgroundColor = item.color.color.cgColor
+            layer.cornerRadius = 8
+        }
+
         let transform = CGAffineTransform.identity.scaledBy(x: item.scaling, y: item.scaling).rotated(by: item.rotationRadians)
         layer.setAffineTransform(transform)
 
diff --git a/SignalUI/Views/ImageEditor/ImageEditorViewController+Text.swift b/SignalUI/Views/ImageEditor/ImageEditorViewController+Text.swift
index cbe2e966e60..ad70ca7a49f 100644
--- a/SignalUI/Views/ImageEditor/ImageEditorViewController+Text.swift
+++ b/SignalUI/Views/ImageEditor/ImageEditorViewController+Text.swift
@@ -51,11 +51,21 @@ extension ImageEditorViewController {
         textContainerBackground.autoPinEdgesToSuperviewEdges(with: .zero, excludingEdge: .bottom)
         textContainerBackground.autoPinEdge(toSuperviewEdge: .bottom, withInset: -300)
 
-        textViewContainer.addSubview(textView)
-        textView.autoVCenterInSuperview()
-        textView.autoPinWidthToSuperviewMargins()
-        textView.autoPinHeightToSuperviewMargins(relation: .lessThanOrEqual)
-        textView.widthAnchor.constraint(greaterThanOrEqualToConstant: 40).isActive = true
+        textViewBackgroundView.layer.cornerRadius = 8
+        textViewWrapperView.addSubview(textViewBackgroundView)
+        textViewWrapperView.addSubview(textView)
+        textViewBackgroundView.autoSetDimension(.width, toSize: 36, relation: .greaterThanOrEqual)
+        textViewBackgroundView.autoSetDimension(.height, toSize: 36, relation: .greaterThanOrEqual)
+        textViewBackgroundView.autoPinWidthToSuperviewMargins(relation: .lessThanOrEqual)
+        textViewBackgroundView.autoPinHeightToSuperviewMargins(relation: .lessThanOrEqual)
+        textViewBackgroundView.autoCenterInSuperview()
+        // These inset values provide the best visual match with CATextLayer's bounds when background color is set.
+        textView.autoPin(toEdgesOf: textViewBackgroundView, with: UIEdgeInsets(top: -6, left: 6, bottom: -7, right: 6))
+
+        textViewContainer.addSubview(textViewWrapperView)
+        textViewWrapperView.autoVCenterInSuperview()
+        textViewWrapperView.autoPinWidthToSuperviewMargins()
+        textViewWrapperView.autoPinHeightToSuperviewMargins(relation: .lessThanOrEqual)
 
         view.addSubview(textViewContainer)
         textViewContainer.autoPinEdge(toSuperviewEdge: .top)
@@ -84,8 +94,32 @@ extension ImageEditorViewController {
      * Load all UITextView's attributes from ImageEditorTextItem.
      * This method needs to be called when text item editing is about to begin.
      */
-    func updateTextViewAttributes(using textItem: ImageEditorTextItem) {
-        textView.update(withColor: textItem.color.color, font: textItem.font, decorationStyle: textItem.decorationStyle)
+    private func updateTextViewAttributes(using textItem: ImageEditorTextItem) {
+        let textForegroundColor: UIColor = {
+            switch textItem.decorationStyle {
+            case .none: return textItem.color.color
+            default: return .white
+            }
+        }()
+        let textDecorationColor: UIColor? = {
+            switch textItem.decorationStyle {
+            case .none, .inverted: return nil
+            default: return textItem.color.color
+            }
+        }()
+        textView.updateWith(textForegroundColor: textForegroundColor,
+                            font: textItem.font,
+                            textAlignment: .center,
+                            textDecorationColor: textDecorationColor,
+                            decorationStyle: textItem.decorationStyle)
+
+        let textBackgroundColor: UIColor = {
+            switch textItem.decorationStyle {
+            case .inverted: return textItem.color.color
+            default: return .clear
+            }
+        }()
+        textViewBackgroundView.backgroundColor = textBackgroundColor
     }
 
     // Update UITextView to use style (font, color, decoration) as selected in provided TextToolbar.
@@ -94,6 +128,7 @@ extension ImageEditorViewController {
     func updateTextViewAttributes(using textToolbar: TextStylingToolbar) {
         let fontPointSize = textView.font?.pointSize ?? ImageEditorTextItem.defaultFontSize
         textView.update(using: textToolbar, fontPointSize: fontPointSize)
+        textViewBackgroundView.backgroundColor = textToolbar.textBackgroundColor
     }
 
     override func updateBottomLayoutConstraint(fromInset before: CGFloat, toInset after: CGFloat) {
@@ -128,8 +163,8 @@ extension ImageEditorViewController {
     func beginTextEditing() {
         guard let textItem = currentTextItem?.textItem else { return }
 
-        textToolbar.colorPickerView.selectedValue = textItem.color
-        textViewAccessoryToolbar.colorPickerView.selectedValue = textItem.color
+        textToolbar.currentColorPickerValue = textItem.color
+        textViewAccessoryToolbar.currentColorPickerValue = textItem.color
 
         textToolbar.textStyle = textItem.textStyle
         textViewAccessoryToolbar.textStyle = textItem.textStyle
@@ -171,7 +206,7 @@ extension ImageEditorViewController {
         let imageFrame = ImageEditorCanvasView.imageFrame(forViewSize: viewBounds.size,
                                                           imageSize: model.srcImageSizePixels,
                                                           transform: model.currentTransform())
-        let unitWidth = textView.width / imageFrame.width
+        let unitWidth = textViewWrapperView.width / imageFrame.width
         textItem = textItem.copy(unitWidth: unitWidth)
 
         // Ensure continuity of the new text item's location with its apparent location in this text editor.
@@ -201,7 +236,7 @@ extension ImageEditorViewController {
         }
 
         // Update text.
-        textItem = textItem.copy(withText: text, color: textToolbar.colorPickerView.selectedValue)
+        textItem = textItem.copy(withText: text, color: textToolbar.currentColorPickerValue)
 
         guard currentTextItem.textItem != textItem else {
             // No changes were made.  Cancel to avoid dirtying the undo stack.
@@ -342,8 +377,8 @@ extension ImageEditorViewController: ImageEditorViewDelegate {
            let textItem = model.item(forId: selectedTextItemId) as? ImageEditorTextItem {
             mode = .text
 
-            textToolbar.colorPickerView.selectedValue = textItem.color
-            textViewAccessoryToolbar.colorPickerView.selectedValue = textItem.color
+            textToolbar.currentColorPickerValue = textItem.color
+            textViewAccessoryToolbar.currentColorPickerValue = textItem.color
 
             textToolbar.textStyle = textItem.textStyle
             textViewAccessoryToolbar.textStyle = textItem.textStyle
diff --git a/SignalUI/Views/ImageEditor/ImageEditorViewController.swift b/SignalUI/Views/ImageEditor/ImageEditorViewController.swift
index f76b7e2b415..f247c63d710 100644
--- a/SignalUI/Views/ImageEditor/ImageEditorViewController.swift
+++ b/SignalUI/Views/ImageEditor/ImageEditorViewController.swift
@@ -198,10 +198,12 @@ class ImageEditorViewController: OWSViewController {
         textView.delegate = self
         return textView
     }()
+    lazy var textViewWrapperView = UIView()
+    lazy var textViewBackgroundView = UIView()
     lazy var textToolbar: TextStylingToolbar = {
         let toolbar = TextStylingToolbar(layout: .photoOverlay, currentColor: currentTextItem?.textItem.color ?? model.color)
         toolbar.preservesSuperviewLayoutMargins = true
-        toolbar.colorPickerView.delegate = self
+        toolbar.addTarget(self, action: #selector(textColorDidChange), for: .valueChanged)
         toolbar.textStyleButton.addTarget(self, action: #selector(didTapTextStyleButton(sender:)), for: .touchUpInside)
         toolbar.decorationStyleButton.addTarget(self, action: #selector(didTapDecorationStyleButton(sender:)), for: .touchUpInside)
         return toolbar
@@ -209,7 +211,7 @@ class ImageEditorViewController: OWSViewController {
     lazy var textViewAccessoryToolbar: TextStylingToolbar = {
         let toolbar = TextStylingToolbar(layout: .photoOverlay, currentColor: currentTextItem?.textItem.color ?? model.color)
         toolbar.preservesSuperviewLayoutMargins = true
-        toolbar.colorPickerView.delegate = self
+        toolbar.addTarget(self, action: #selector(textColorDidChange), for: .valueChanged)
         toolbar.textStyleButton.addTarget(self, action: #selector(didTapTextStyleButton(sender:)), for: .touchUpInside)
         toolbar.decorationStyleButton.addTarget(self, action: #selector(didTapDecorationStyleButton(sender:)), for: .touchUpInside)
         return toolbar
@@ -538,7 +540,7 @@ extension ImageEditorViewController {
         Logger.verbose("")
 
         let decorationStyle = textToolbar.decorationStyle
-        let textColor = textToolbar.colorPickerView.selectedValue
+        let textColor = textToolbar.currentColorPickerValue
         let textItem = imageEditorView.createNewTextItem(withColor: textColor, decorationStyle: decorationStyle)
         selectTextItem(textItem, isNewItem: true, startEditing: true)
     }
@@ -557,6 +559,20 @@ extension ImageEditorViewController {
         // Second tap on Blur icon switches editor to "text" mode.
         mode = (mode == .blur) ? .text : .blur
     }
+
+    @objc
+    private func textColorDidChange(sender: TextStylingToolbar) {
+        let textItemColor = sender.currentColorPickerValue
+        imageEditorView.updateSelectedTextItem(withColor: textItemColor)
+        if sender == textToolbar {
+            textViewAccessoryToolbar.currentColorPickerValue = textItemColor
+        } else if sender == textViewAccessoryToolbar {
+            textToolbar.currentColorPickerValue = textItemColor
+        }
+        if textView.isFirstResponder {
+            updateTextViewAttributes(using: textToolbar)
+        }
+    }
 }
 
 // MARK: - Bottom Bar
@@ -641,17 +657,6 @@ extension ImageEditorViewController: ColorPickerBarViewDelegate {
             model.color = color
             updateStrokeWidthPreviewColor()
 
-        case .text:
-            imageEditorView.updateSelectedTextItem(withColor: color)
-            if pickerView == textToolbar.colorPickerView {
-                textViewAccessoryToolbar.colorPickerView.selectedValue = color
-            } else if pickerView == textViewAccessoryToolbar.colorPickerView {
-                textToolbar.colorPickerView.selectedValue = color
-            }
-            if textView.isFirstResponder {
-                updateTextViewAttributes(using: textToolbar)
-            }
-
         default:
             owsAssertDebug(false, "Invalid mode [\(mode)]")
         }
diff --git a/SignalUI/Views/MediaTextView.swift b/SignalUI/Views/MediaTextView.swift
index 3f494f705b1..499f1e4a634 100644
--- a/SignalUI/Views/MediaTextView.swift
+++ b/SignalUI/Views/MediaTextView.swift
@@ -81,45 +81,40 @@ public class MediaTextView: UITextView {
                        fontPointSize: CGFloat,
                        textAlignment: NSTextAlignment = .center) {
         let font = MediaTextView.font(forTextStyle: textStylingToolbar.textStyle, pointSize: fontPointSize)
-        update(withColor: textStylingToolbar.colorPickerView.color,
-               font: font,
-               textAlignment: textAlignment,
-               decorationStyle: textStylingToolbar.decorationStyle)
+        updateWith(textForegroundColor: textStylingToolbar.textForegroundColor,
+                   font: font,
+                   textAlignment: textAlignment,
+                   textDecorationColor: textStylingToolbar.textDecorationColor,
+                   decorationStyle: textStylingToolbar.decorationStyle)
     }
 
-    public func update(withColor color: UIColor,
-                       font: UIFont,
-                       textAlignment: NSTextAlignment = .center,
-                       decorationStyle: MediaTextView.DecorationStyle) {
+    public func updateWith(textForegroundColor: UIColor,
+                           font: UIFont,
+                           textAlignment: NSTextAlignment,
+                           textDecorationColor: UIColor?,
+                           decorationStyle: MediaTextView.DecorationStyle) {
         var attributes: [NSAttributedString.Key: Any] = [ .font: font]
 
-        let textColor: UIColor = {
-            switch decorationStyle {
-            case .none: return color
-            default: return .white
-            }
-        }()
-        attributes[.foregroundColor] = textColor
+        attributes[.foregroundColor] = textForegroundColor
 
         if let paragraphStyle = NSParagraphStyle.default.mutableCopy() as? NSMutableParagraphStyle {
             paragraphStyle.alignment = textAlignment
             attributes[.paragraphStyle] = paragraphStyle
         }
 
-        switch decorationStyle {
-        case .underline:
-            attributes[.underlineStyle] = NSUnderlineStyle.single.rawValue
-            attributes[.underlineColor] = color
-
-        case .outline:
-            attributes[.strokeWidth] = -3
-            attributes[.strokeColor] = color
+        if let textDecorationColor = textDecorationColor {
+            switch decorationStyle {
+            case .underline:
+                attributes[.underlineStyle] = NSUnderlineStyle.single.rawValue
+                attributes[.underlineColor] = textDecorationColor
 
-        case .inverted:
-            attributes[.backgroundColor] = color
+            case .outline:
+                attributes[.strokeWidth] = -3
+                attributes[.strokeColor] = textDecorationColor
 
-        default:
-            break
+            default:
+                break
+            }
         }
 
         attributedText = NSAttributedString(string: text, attributes: attributes)
@@ -148,7 +143,7 @@ public class MediaTextView: UITextView {
     }
 }
 
-public class TextStylingToolbar: UIView {
+public class TextStylingToolbar: UIControl {
 
     public enum Layout {
         case photoOverlay
@@ -156,7 +151,13 @@ public class TextStylingToolbar: UIView {
     }
     let layout: Layout
 
-    public let colorPickerView: ColorPickerBarView
+    private let colorPickerView: ColorPickerBarView
+
+    // Photo Editor operates with ColorPickerBarColor hence the need to expose this value.
+    public var currentColorPickerValue: ColorPickerBarColor {
+        get { colorPickerView.selectedValue }
+        set { colorPickerView.selectedValue = newValue }
+    }
 
     private static func defaultColor(forLayout layout: Layout) -> ColorPickerBarColor {
         switch layout {
@@ -170,10 +171,38 @@ public class TextStylingToolbar: UIView {
     public let textStyleButton = RoundMediaButton(image: #imageLiteral(resourceName: "media-editor-text-font"), backgroundStyle: .blur)
     public var textStyle: MediaTextView.TextStyle = .regular
 
+    public var textForegroundColor: UIColor {
+        switch decorationStyle {
+        case .none: return colorPickerView.color
+        case .inverted, .outline, .underline: return .white
+        }
+    }
+    public var textBackgroundColor: UIColor? {
+        switch decorationStyle {
+        case .none, .underline, .outline: return nil
+        case .inverted: return colorPickerView.color
+        }
+    }
+    public var textDecorationColor: UIColor? {
+        switch decorationStyle {
+        case .none, .inverted: return nil
+        case .outline, .underline: return colorPickerView.color
+        }
+    }
+
     public let decorationStyleButton = RoundMediaButton(image: #imageLiteral(resourceName: "media-editor-text-style-1"), backgroundStyle: .blur)
     public var decorationStyle: MediaTextView.DecorationStyle = .none {
         didSet {
             decorationStyleButton.isSelected = (decorationStyle != .none)
+            // Change default decoration style away from white to avoid white on white situation.
+            if decorationStyle != .none && colorPickerView.selectedValue == .white {
+                colorPickerView.selectedValue = .black
+            }
+            // Switch color picker color back to white because it now controls text color.
+            // The idea is that cycling through decoration styles should keep text white.
+            if decorationStyle == .none && colorPickerView.selectedValue == .black {
+                colorPickerView.selectedValue = .white
+            }
         }
     }
 
@@ -185,6 +214,8 @@ public class TextStylingToolbar: UIView {
 
         super.init(frame: .zero)
 
+        colorPickerView.delegate = self
+
         decorationStyleButton.setContentCompressionResistancePriority(.required, for: .vertical)
         decorationStyleButton.setImage(#imageLiteral(resourceName: "media-editor-text-style-2"), for: .selected)
 
@@ -242,3 +273,10 @@ public class TextStylingToolbar: UIView {
         fatalError("init(coder:) has not been implemented")
     }
 }
+
+extension TextStylingToolbar: ColorPickerBarViewDelegate {
+
+    public func colorPickerBarView(_ pickerView: ColorPickerBarView, didSelectColor color: ColorPickerBarColor) {
+        sendActions(for: .valueChanged)
+    }
+}
