diff --git a/Signal.xcodeproj/project.pbxproj b/Signal.xcodeproj/project.pbxproj
index 67a8e3ff51b..580c7f2366b 100644
--- a/Signal.xcodeproj/project.pbxproj
+++ b/Signal.xcodeproj/project.pbxproj
@@ -281,6 +281,7 @@
 		348815CC2554216A00D4F4C4 /* CVAudioPlayback.swift in Sources */ = {isa = PBXBuildFile; fileRef = 348815CB2554216900D4F4C4 /* CVAudioPlayback.swift */; };
 		348815CE25545B1000D4F4C4 /* CVComponentGenericAttachment.swift in Sources */ = {isa = PBXBuildFile; fileRef = 348815CD25545B0F00D4F4C4 /* CVComponentGenericAttachment.swift */; };
 		348815D025545C0A00D4F4C4 /* CVAttachments.swift in Sources */ = {isa = PBXBuildFile; fileRef = 348815CF25545C0A00D4F4C4 /* CVAttachments.swift */; };
+		34882C522694A9260013E289 /* ConversationListViewController+Notifications.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34882C512694A9260013E289 /* ConversationListViewController+Notifications.swift */; };
 		3488F9362191CC4000E524CC /* CVMediaView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 3488F9352191CC4000E524CC /* CVMediaView.swift */; };
 		348A9C35234E462D00789068 /* ThreadFinderPerformanceTest.swift in Sources */ = {isa = PBXBuildFile; fileRef = 348A9C34234E462D00789068 /* ThreadFinderPerformanceTest.swift */; };
 		348B9C9D264024D200A104C3 /* ContactTableViewCell.swift in Sources */ = {isa = PBXBuildFile; fileRef = 348B9C9C264024D100A104C3 /* ContactTableViewCell.swift */; };
@@ -1327,6 +1328,7 @@
 		348815CB2554216900D4F4C4 /* CVAudioPlayback.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = CVAudioPlayback.swift; sourceTree = "<group>"; };
 		348815CD25545B0F00D4F4C4 /* CVComponentGenericAttachment.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = CVComponentGenericAttachment.swift; sourceTree = "<group>"; };
 		348815CF25545C0A00D4F4C4 /* CVAttachments.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = CVAttachments.swift; sourceTree = "<group>"; };
+		34882C512694A9260013E289 /* ConversationListViewController+Notifications.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = "ConversationListViewController+Notifications.swift"; sourceTree = "<group>"; };
 		3488F9352191CC4000E524CC /* CVMediaView.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = CVMediaView.swift; sourceTree = "<group>"; };
 		348A9C34234E462D00789068 /* ThreadFinderPerformanceTest.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ThreadFinderPerformanceTest.swift; sourceTree = "<group>"; };
 		348B9C9C264024D100A104C3 /* ContactTableViewCell.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ContactTableViewCell.swift; sourceTree = "<group>"; };
@@ -2429,6 +2431,7 @@
 				34386A4F207D0C01009F5D9C /* ConversationListViewController.h */,
 				34386A4D207D0C01009F5D9C /* ConversationListViewController.m */,
 				3406D32525DD5EAF00885B14 /* ConversationListViewController.swift */,
+				34882C512694A9260013E289 /* ConversationListViewController+Notifications.swift */,
 				4C20B2B820CA10DE001BAC90 /* ConversationSearchViewController.swift */,
 				880BFFE82345907600F6FAB1 /* ConversationSplitViewController.swift */,
 			);
@@ -5554,6 +5557,7 @@
 				347C3845252CE6C900F3D941 /* CVComponentQuotedReply.swift in Sources */,
 				88A357B923639384009D6B9A /* MemberActionSheet.swift in Sources */,
 				346CD5C226306578004162D6 /* UnknownThreadWarningInteraction.swift in Sources */,
+				34882C522694A9260013E289 /* ConversationListViewController+Notifications.swift in Sources */,
 				34B0796D1FCF46B100E248C2 /* MainAppContext.m in Sources */,
 				34E3EF101EFC2684007F6822 /* DebugUIPage.m in Sources */,
 				349767E325B8744700ECE1B0 /* ManageStickersViewController.swift in Sources */,
diff --git a/Signal/src/ViewControllers/HomeView/ConversationListCell.swift b/Signal/src/ViewControllers/HomeView/ConversationListCell.swift
index 50d0d5f4e54..cb156e9f684 100644
--- a/Signal/src/ViewControllers/HomeView/ConversationListCell.swift
+++ b/Signal/src/ViewControllers/HomeView/ConversationListCell.swift
@@ -246,48 +246,12 @@ public class ConversationListCell: UITableViewCell {
         }
         applyUnreadIndicator()
 
-        let dateTimeLabelConfig: CVLabelConfig = {
-            var text: String = ""
-            if let labelDate = configuration.overrideDate ?? thread.conversationListInfo?.lastMessageDate {
-                text = DateUtil.formatDateShort(labelDate)
-            }
-            if hasUnreadStyle {
-                return CVLabelConfig(text: text,
-                                     font: dateTimeFont.ows_semibold,
-                                     textColor: Theme.primaryTextColor,
-                                     textAlignment: .trailing)
-            } else {
-                return CVLabelConfig(text: text,
-                                     font: dateTimeFont,
-                                     textColor: snippetColor,
-                                     textAlignment: .trailing)
-            }
-        }()
+        let dateTimeLabelConfig = self.dateTimeLabelConfig(configuration: configuration)
         dateTimeLabelConfig.applyForRendering(label: dateTimeLabel)
         let dateLabelSize = CVText.measureLabel(config: dateTimeLabelConfig,
                                                 maxWidth: CGFloat.greatestFiniteMagnitude)
 
-        let nameLabelConfig: CVLabelConfig = {
-            let text: String = {
-                if thread.threadRecord is TSContactThread {
-                    if thread.threadRecord.isNoteToSelf {
-                        return MessageStrings.noteToSelf
-                    } else {
-                        return thread.name
-                    }
-                } else {
-                    if let name: String = thread.name.nilIfEmpty {
-                        return name
-                    } else {
-                        return MessageStrings.newGroupDefaultTitle
-                    }
-                }
-            }()
-            return CVLabelConfig(text: text,
-                                 font: nameFont,
-                                 textColor: Theme.primaryTextColor,
-                                 lineBreakMode: .byTruncatingTail)
-        }()
+        let nameLabelConfig = self.nameLabelConfig(configuration: configuration)
         nameLabelConfig.applyForRendering(label: nameLabel)
         var nameLabelMaxWidth = max(0, tableWidth - CGFloat(avatarStackSize.width +
                                                                 outerHStackConfig.spacing +
@@ -389,14 +353,14 @@ public class ConversationListCell: UITableViewCell {
                                             bottomRowStackSize.asManualSubviewInfo
                                           ]).measuredSize
 
-        let outerHStackSize = outerHStack.configure(config: outerHStackConfig,
-                                                    subviews: [ avatarStack, vStack ],
-                                                    subviewInfos: [
-                                                        avatarStackSize.asManualSubviewInfo(hasFixedWidth: true),
-                                                        vStackSize.asManualSubviewInfo
-                                                    ]).measuredSize
+        _ = outerHStack.configure(config: outerHStackConfig,
+                                  subviews: [ avatarStack, vStack ],
+                                  subviewInfos: [
+                                    avatarStackSize.asManualSubviewInfo(hasFixedWidth: true),
+                                    vStackSize.asManualSubviewInfo
+                                  ]).measuredSize
 
-        updatePreview()
+        updateTypingIndicatorState()
     }
 
     private var topRowStackConfig: ManualStackView.Config {
@@ -611,12 +575,58 @@ public class ConversationListCell: UITableViewCell {
         !hasOverrideSnippet && !isBlocked && !thread.hasPendingMessageRequest && thread.isMuted
     }
 
+    private func dateTimeLabelConfig(configuration: Configuration) -> CVLabelConfig {
+        let thread = configuration.thread
+        var text: String = ""
+        if let labelDate = configuration.overrideDate ?? thread.conversationListInfo?.lastMessageDate {
+            text = DateUtil.formatDateShort(labelDate)
+        }
+        if hasUnreadStyle {
+            return CVLabelConfig(text: text,
+                                 font: dateTimeFont.ows_semibold,
+                                 textColor: Theme.primaryTextColor,
+                                 textAlignment: .trailing)
+        } else {
+            return CVLabelConfig(text: text,
+                                 font: dateTimeFont,
+                                 textColor: snippetColor,
+                                 textAlignment: .trailing)
+        }
+    }
+
+    private func nameLabelConfig(configuration: Configuration) -> CVLabelConfig {
+        let thread = configuration.thread
+        let text: String = {
+            if thread.threadRecord is TSContactThread {
+                if thread.threadRecord.isNoteToSelf {
+                    return MessageStrings.noteToSelf
+                } else {
+                    return thread.name
+                }
+            } else {
+                if let name: String = thread.name.nilIfEmpty {
+                    return name
+                } else {
+                    return MessageStrings.newGroupDefaultTitle
+                }
+            }
+        }()
+        return CVLabelConfig(text: text,
+                             font: nameFont,
+                             textColor: Theme.primaryTextColor,
+                             lineBreakMode: .byTruncatingTail)
+    }
+
     // MARK: - Reuse
 
     @objc
     public override func prepareForReuse() {
         super.prepareForReuse()
 
+        reset()
+    }
+
+    private func reset() {
         for cvview in cvviews {
             cvview.reset()
         }
@@ -641,8 +651,11 @@ public class ConversationListCell: UITableViewCell {
               contactThread.contactAddress == address else {
             return
         }
-        // TODO:
-        //        updateNameLabel()
+        guard let configuration = configuration else {
+            return
+        }
+        reset()
+        configure(configuration)
     }
 
     @objc
@@ -655,7 +668,7 @@ public class ConversationListCell: UITableViewCell {
             return
         }
 
-        updatePreview()
+        updateTypingIndicatorState()
     }
 
     // MARK: - Typing Indicators
@@ -693,7 +706,7 @@ public class ConversationListCell: UITableViewCell {
                              lineBreakMode: .byWordWrapping)
     }
 
-    private func updatePreview() {
+    private func updateTypingIndicatorState() {
         AssertIsOnMainThread()
 
         // We use "override snippets" to show "message" search results.
diff --git a/Signal/src/ViewControllers/HomeView/ConversationListViewController+Notifications.swift b/Signal/src/ViewControllers/HomeView/ConversationListViewController+Notifications.swift
new file mode 100644
index 00000000000..6daa8596ef6
--- /dev/null
+++ b/Signal/src/ViewControllers/HomeView/ConversationListViewController+Notifications.swift
@@ -0,0 +1,205 @@
+//
+//  Copyright (c) 2021 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+
+extension ConversationListViewController {
+
+    @objc
+    public func observeNotifications() {
+        AssertIsOnMainThread()
+
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(signalAccountsDidChange),
+                                               name: .OWSContactsManagerSignalAccountsDidChange,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(applicationWillEnterForeground),
+                                               name: .OWSApplicationWillEnterForeground,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(applicationDidBecomeActive),
+                                               name: .OWSApplicationDidBecomeActive,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(applicationWillResignActive),
+                                               name: .OWSApplicationWillResignActive,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(registrationStateDidChange),
+                                               name: .registrationStateDidChange,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(outageStateDidChange),
+                                               name: OutageDetection.outageStateDidChange,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(localProfileDidChange),
+                                               name: .localProfileDidChange,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(profileWhitelistDidChange),
+                                               name: .profileWhitelistDidChange,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(appExpiryDidChange),
+                                               name: AppExpiry.AppExpiryDidChange,
+                                               object: nil)
+        NotificationCenter.default.addObserver(self,
+                                               selector: #selector(preferContactAvatarsPreferenceDidChange),
+                                               name: SSKPreferences.preferContactAvatarsPreferenceDidChange,
+                                               object: nil)
+
+        databaseStorage.appendDatabaseChangeDelegate(self)
+    }
+
+    // MARK: -
+
+    @objc
+    private func preferContactAvatarsPreferenceDidChange(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        updateAvatars()
+    }
+
+    @objc
+    private func signalAccountsDidChange(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        reloadTableViewData()
+
+        if !firstConversationCueView.isHidden {
+            updateFirstConversationLabel()
+        }
+    }
+
+    @objc
+    private func registrationStateDidChange(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        updateReminderViews()
+    }
+
+    @objc
+    private func outageStateDidChange(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        updateReminderViews()
+    }
+
+    @objc
+    private func localProfileDidChange(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        updateBarButtonItems()
+    }
+
+    @objc
+    private func appExpiryDidChange(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        updateReminderViews()
+    }
+
+    @objc
+    private func applicationWillEnterForeground(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        updateViewState()
+    }
+
+    @objc
+    private func applicationDidBecomeActive(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        updateShouldObserveDBModifications()
+
+        if !ExperienceUpgradeManager.presentNext(fromViewController: self) {
+            OWSActionSheets.showIOSUpgradeNagIfNecessary()
+            presentGetStartedBannerIfNecessary()
+        }
+    }
+
+    @objc
+    private func applicationWillResignActive(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        updateShouldObserveDBModifications()
+    }
+
+    @objc
+    private func profileWhitelistDidChange(_ notification: NSNotification) {
+        AssertIsOnMainThread()
+
+        // If profile whitelist just changed, we need to update the associated
+        // thread to reflect the latest message request state.
+        let address: SignalServiceAddress? = notification.userInfo?[kNSNotificationKey_ProfileAddress] as? SignalServiceAddress
+        let groupId: Data? = notification.userInfo?[kNSNotificationKey_ProfileGroupId] as? Data
+
+        let changedThreadId: String? = databaseStorage.read { transaction in
+            if let address = address,
+               address.isValid {
+                return TSContactThread.getWithContactAddress(address, transaction: transaction)?.uniqueId
+            } else if let groupId = groupId {
+                return TSGroupThread.threadId(forGroupId: groupId, transaction: transaction)
+            } else {
+                return nil
+            }
+        }
+
+        if let threadId = changedThreadId {
+            anyUIDBDidUpdate(withUpdatedThreadIds: Set<String>([threadId]))
+        }
+    }
+}
+
+// MARK: - Notifications
+
+extension ConversationListViewController: DatabaseChangeDelegate {
+    public func databaseChangesWillUpdate() {
+        AssertIsOnMainThread()
+
+        BenchManager.startEvent(title: "uiDatabaseUpdate", eventId: "uiDatabaseUpdate")
+    }
+
+    public func databaseChangesDidUpdate(databaseChanges: DatabaseChanges) {
+        AssertIsOnMainThread()
+
+        if databaseChanges.didUpdateModel(collection: TSPaymentModel.collection()) {
+            updateUnreadPaymentNotificationsCountWithSneakyTransaction()
+        }
+
+        guard shouldObserveDBModifications else {
+            return
+        }
+
+        anyUIDBDidUpdate(withUpdatedThreadIds: databaseChanges.threadUniqueIds)
+    }
+
+    public func databaseChangesDidUpdateExternally() {
+        AssertIsOnMainThread()
+
+        Logger.verbose("")
+
+        if shouldObserveDBModifications {
+            // External database modifications can't be converted into incremental updates,
+            // so rebuild everything.  This is expensive and usually isn't necessary, but
+            // there's no alternative.
+            //
+            // We don't need to do this if we're not observing db modifications since we'll
+            // do it when we resume.
+            resetMappings()
+        }
+    }
+
+    public func databaseChangesDidReset() {
+        AssertIsOnMainThread()
+
+        if shouldObserveDBModifications {
+            // We don't need to do this if we're not observing db modifications since we'll
+            // do it when we resume.
+            resetMappings()
+        }
+    }
+}
diff --git a/Signal/src/ViewControllers/HomeView/ConversationListViewController.h b/Signal/src/ViewControllers/HomeView/ConversationListViewController.h
index 54af6186f49..aaa1bed1732 100644
--- a/Signal/src/ViewControllers/HomeView/ConversationListViewController.h
+++ b/Signal/src/ViewControllers/HomeView/ConversationListViewController.h
@@ -37,6 +37,22 @@ typedef NS_ENUM(NSInteger, ConversationListViewControllerSection) {
 
 @property (nonatomic) TSThread *lastViewedThread;
 
+// For use by Swift extension.
+- (void)updateBarButtonItems;
+- (void)updateReminderViews;
+- (void)updateViewState;
+- (void)updateShouldObserveDBModifications;
+- (void)reloadTableViewData;
+- (void)updateFirstConversationLabel;
+- (void)presentGetStartedBannerIfNecessary;
+- (void)updateAvatars;
+- (void)resetMappings;
+- (void)updateUnreadPaymentNotificationsCountWithSneakyTransaction;
+- (void)anyUIDBDidUpdateWithUpdatedThreadIds:(NSSet<NSString *> *)updatedItemIds;
+
+@property (nonatomic) BOOL shouldObserveDBModifications;
+@property (nonatomic) UIView *firstConversationCueView;
+
 @end
 
 NS_ASSUME_NONNULL_END
diff --git a/Signal/src/ViewControllers/HomeView/ConversationListViewController.m b/Signal/src/ViewControllers/HomeView/ConversationListViewController.m
index 4a2e6b6b999..eb43cbd2461 100644
--- a/Signal/src/ViewControllers/HomeView/ConversationListViewController.m
+++ b/Signal/src/ViewControllers/HomeView/ConversationListViewController.m
@@ -52,7 +52,6 @@ @interface ConversationListViewController () <UITableViewDelegate,
     UIViewControllerPreviewingDelegate,
     UISearchBarDelegate,
     ConversationSearchViewDelegate,
-    DatabaseChangeDelegate,
     OWSBlockListCacheDelegate,
     CameraFirstCaptureDelegate,
     OWSGetStartedBannerViewControllerDelegate>
@@ -60,14 +59,12 @@ @interface ConversationListViewController () <UITableViewDelegate,
 @property (nonatomic) UITableView *tableView;
 @property (nonatomic) UIView *emptyInboxView;
 
-@property (nonatomic) UIView *firstConversationCueView;
 @property (nonatomic) UILabel *firstConversationLabel;
 
 @property (nonatomic, readonly) ThreadMapping *threadMapping;
 @property (nonatomic) ConversationListMode conversationListMode;
 @property (nonatomic, readonly) AnyLRUCache *threadViewModelCache;
 @property (nonatomic) BOOL isViewVisible;
-@property (nonatomic) BOOL shouldObserveDBModifications;
 @property (nonatomic) BOOL hasEverAppeared;
 
 // Get Started banner
@@ -131,61 +128,12 @@ - (void)commonInit
     _threadMapping = [ThreadMapping new];
 }
 
-#pragma mark -
-
-- (void)observeNotifications
-{
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(signalAccountsDidChange:)
-                                                 name:OWSContactsManagerSignalAccountsDidChangeNotification
-                                               object:nil];
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(applicationWillEnterForeground:)
-                                                 name:OWSApplicationWillEnterForegroundNotification
-                                               object:nil];
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(applicationDidBecomeActive:)
-                                                 name:OWSApplicationDidBecomeActiveNotification
-                                               object:nil];
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(applicationWillResignActive:)
-                                                 name:OWSApplicationWillResignActiveNotification
-                                               object:nil];
-    OWSAssert(StorageCoordinator.dataStoreForUI == DataStoreGrdb);
-    [self.databaseStorage appendDatabaseChangeDelegate:self];
-
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(registrationStateDidChange:)
-                                                 name:NSNotificationNameRegistrationStateDidChange
-                                               object:nil];
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(outageStateDidChange:)
-                                                 name:OutageDetection.outageStateDidChange
-                                               object:nil];
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(localProfileDidChange:)
-                                                 name:kNSNotificationNameLocalProfileDidChange
-                                               object:nil];
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(profileWhitelistDidChange:)
-                                                 name:kNSNotificationNameProfileWhitelistDidChange
-                                               object:nil];
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(appExpiryDidChange:)
-                                                 name:AppExpiry.AppExpiryDidChange
-                                               object:nil];
-    [[NSNotificationCenter defaultCenter] addObserver:self
-                                             selector:@selector(updateAvatars)
-                                                 name:SSKPreferences.preferContactAvatarsPreferenceDidChange
-                                               object:nil];
-}
-
 - (void)dealloc
 {
     [[NSNotificationCenter defaultCenter] removeObserver:self];
 }
 
-#pragma mark - Notifications
+#pragma mark -
 
 - (void)updateAvatars
 {
@@ -195,45 +143,6 @@ - (void)updateAvatars
     [self.tableView reloadData];
 }
 
-- (void)signalAccountsDidChange:(NSNotification *)notification
-{
-    OWSAssertIsOnMainThread();
-
-    [self reloadTableViewData];
-
-    if (!self.firstConversationCueView.isHidden) {
-        [self updateFirstConversationLabel];
-    }
-}
-
-- (void)registrationStateDidChange:(NSNotification *)notification
-{
-    OWSAssertIsOnMainThread();
-
-    [self updateReminderViews];
-}
-
-- (void)outageStateDidChange:(NSNotification *)notification
-{
-    OWSAssertIsOnMainThread();
-
-    [self updateReminderViews];
-}
-
-- (void)localProfileDidChange:(NSNotification *)notification
-{
-    OWSAssertIsOnMainThread();
-
-    [self updateBarButtonItems];
-}
-
-- (void)appExpiryDidChange:(NSNotification *)notification
-{
-    OWSAssertIsOnMainThread();
-
-    [self updateReminderViews];
-}
-
 #pragma mark - Theme
 
 - (void)themeDidChange
@@ -1132,26 +1041,6 @@ - (BOOL)isViewingArchive
     return self.conversationListMode == ConversationListMode_Archive;
 }
 
-- (void)applicationWillEnterForeground:(NSNotification *)notification
-{
-    [self updateViewState];
-}
-
-- (void)applicationDidBecomeActive:(NSNotification *)notification
-{
-    [self updateShouldObserveDBModifications];
-
-    if (![ExperienceUpgradeManager presentNextFromViewController:self]) {
-        [OWSActionSheets showIOSUpgradeNagIfNecessary];
-        [self presentGetStartedBannerIfNecessary];
-    }
-}
-
-- (void)applicationWillResignActive:(NSNotification *)notification
-{
-    [self updateShouldObserveDBModifications];
-}
-
 #pragma mark - startup
 
 - (void)tableViewSetUp
@@ -2133,30 +2022,6 @@ - (void)commitPreviewController:(UIViewController *)previewController
     }
 }
 
-#pragma mark - DatabaseChangeDelegate
-
-- (void)databaseChangesWillUpdate
-{
-    OWSAssertIsOnMainThread();
-    [BenchManager startEventWithTitle:@"uiDatabaseUpdate" eventId:@"uiDatabaseUpdate"];
-}
-
-- (void)databaseChangesDidUpdateWithDatabaseChanges:(id<DatabaseChanges>)databaseChanges
-{
-    OWSAssertIsOnMainThread();
-    OWSAssert(StorageCoordinator.dataStoreForUI == DataStoreGrdb);
-
-    if ([databaseChanges didUpdateModelWithCollection:TSPaymentModel.collection]) {
-        [self updateUnreadPaymentNotificationsCountWithSneakyTransaction];
-    }
-
-    if (!self.shouldObserveDBModifications) {
-        return;
-    }
-
-    [self anyUIDBDidUpdateWithUpdatedThreadIds:databaseChanges.threadUniqueIds];
-}
-
 - (void)updateUnreadPaymentNotificationsCountWithSneakyTransaction
 {
     if (!self.payments.arePaymentsEnabled) {
@@ -2186,33 +2051,6 @@ - (void)updateUnreadPaymentNotificationsCountWithSneakyTransaction
     [self updateReminderViews];
 }
 
-- (void)databaseChangesDidUpdateExternally
-{
-    OWSAssertIsOnMainThread();
-
-    OWSLogVerbose(@"");
-
-    if (self.shouldObserveDBModifications) {
-        // External database modifications can't be converted into incremental updates,
-        // so rebuild everything.  This is expensive and usually isn't necessary, but
-        // there's no alternative.
-        //
-        // We don't need to do this if we're not observing db modifications since we'll
-        // do it when we resume.
-        [self resetMappings];
-    }
-}
-
-- (void)databaseChangesDidReset
-{
-    OWSAssertIsOnMainThread();
-    if (self.shouldObserveDBModifications) {
-        // We don't need to do this if we're not observing db modifications since we'll
-        // do it when we resume.
-        [self resetMappings];
-    }
-}
-
 #pragma mark AnyDB Update
 
 - (void)anyUIDBDidUpdateWithUpdatedThreadIds:(NSSet<NSString *> *)updatedItemIds
@@ -2304,31 +2142,6 @@ - (void)anyUIDBDidUpdateWithUpdatedThreadIds:(NSSet<NSString *> *)updatedItemIds
     [BenchManager completeEventWithEventId:@"uiDatabaseUpdate"];
 }
 
-#pragma mark Profile Whitelist Changes
-
-- (void)profileWhitelistDidChange:(NSNotification *)notification
-{
-    OWSAssertIsOnMainThread();
-
-    // If profile whitelist just changed, we need to update the associated
-    // thread to reflect the latest message request state.
-    SignalServiceAddress *_Nullable address = notification.userInfo[kNSNotificationKey_ProfileAddress];
-    NSData *_Nullable groupId = notification.userInfo[kNSNotificationKey_ProfileGroupId];
-
-    __block NSString *_Nullable changedThreadId;
-    [self.databaseStorage readWithBlock:^(SDSAnyReadTransaction *transaction) {
-        if (address.isValid) {
-            changedThreadId = [TSContactThread getThreadWithContactAddress:address transaction:transaction].uniqueId;
-        } else if (groupId.length > 0) {
-            changedThreadId = [TSGroupThread threadIdForGroupId:groupId transaction:transaction];
-        }
-    }];
-
-    if (changedThreadId) {
-        [self anyUIDBDidUpdateWithUpdatedThreadIds:[NSSet setWithObject:changedThreadId]];
-    }
-}
-
 #pragma mark -
 
 - (NSUInteger)numberOfInboxThreads
diff --git a/Signal/src/ViewControllers/HomeView/ConversationListViewController.swift b/Signal/src/ViewControllers/HomeView/ConversationListViewController.swift
index 52e2a729c8b..03f0b3a36ad 100644
--- a/Signal/src/ViewControllers/HomeView/ConversationListViewController.swift
+++ b/Signal/src/ViewControllers/HomeView/ConversationListViewController.swift
@@ -142,8 +142,8 @@ public extension ConversationListViewController {
 
         let dismissButton = OWSLayerView.circleView(size: 20)
         dismissButton.backgroundColor = (Theme.isDarkThemeEnabled
-                                                    ? .ows_gray65
-                                                    : .ows_gray05)
+                                            ? .ows_gray65
+                                            : .ows_gray05)
         dismissButton.setCompressionResistanceHigh()
         dismissButton.setContentHuggingHigh()
 
@@ -218,7 +218,7 @@ public extension ConversationListViewController {
             let paymentsSettings = PaymentsSettingsViewController(mode: .inAppSettings)
             let paymentsDetail = PaymentsDetailViewController(paymentItem: paymentsHistoryItem)
             viewControllers += [ paymentsSettings, paymentsDetail ]
-       case .paymentsTransferIn:
+        case .paymentsTransferIn:
             let paymentsSettings = PaymentsSettingsViewController(mode: .inAppSettings)
             let paymentsTransferIn = PaymentsTransferInViewController()
             viewControllers += [ paymentsSettings, paymentsTransferIn ]
