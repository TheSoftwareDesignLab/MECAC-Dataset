diff --git a/Signal.xcodeproj/project.pbxproj b/Signal.xcodeproj/project.pbxproj
index a8f61eca2b3..f2885bed2ff 100644
--- a/Signal.xcodeproj/project.pbxproj
+++ b/Signal.xcodeproj/project.pbxproj
@@ -449,11 +449,9 @@
 		34A954BE271A471300B05242 /* SignalUI.framework in Embed Frameworks */ = {isa = PBXBuildFile; fileRef = 34A954A8271A471200B05242 /* SignalUI.framework */; settings = {ATTRIBUTES = (CodeSignOnCopy, RemoveHeadersOnCopy, ); }; };
 		34A954CB271B4BE600B05242 /* ShareViewDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34A954CA271B4BE600B05242 /* ShareViewDelegate.swift */; };
 		34A954CF271B4D0700B05242 /* SignalUI-Prefix.pch in Headers */ = {isa = PBXBuildFile; fileRef = 34A954CE271B4D0700B05242 /* SignalUI-Prefix.pch */; };
-		34A954DB271B4F3E00B05242 /* Theme.h in Headers */ = {isa = PBXBuildFile; fileRef = 34A954D3271B4F3E00B05242 /* Theme.h */; settings = {ATTRIBUTES = (Public, ); }; };
-		34A954DC271B4F3E00B05242 /* Theme+OWS.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34A954D4271B4F3E00B05242 /* Theme+OWS.swift */; };
+		34A954DC271B4F3E00B05242 /* Theme+Icons.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34A954D4271B4F3E00B05242 /* Theme+Icons.swift */; };
 		34A954DE271B4F3E00B05242 /* ChatColors.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34A954D6271B4F3E00B05242 /* ChatColors.swift */; };
 		34A954E0271B4F3E00B05242 /* ColorOrGradient.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34A954D8271B4F3E00B05242 /* ColorOrGradient.swift */; };
-		34A954E1271B4F3E00B05242 /* Theme.m in Sources */ = {isa = PBXBuildFile; fileRef = 34A954D9271B4F3E00B05242 /* Theme.m */; };
 		34A954E2271B4F3E00B05242 /* ColorOrGradientSwatchView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 34A954DA271B4F3E00B05242 /* ColorOrGradientSwatchView.swift */; };
 		34A954E6271B4F6A00B05242 /* AttachmentSharing.h in Headers */ = {isa = PBXBuildFile; fileRef = 34A954E3271B4F6900B05242 /* AttachmentSharing.h */; settings = {ATTRIBUTES = (Public, ); }; };
 		34A954E7271B4F6A00B05242 /* AttachmentSharing.m in Sources */ = {isa = PBXBuildFile; fileRef = 34A954E4271B4F6A00B05242 /* AttachmentSharing.m */; };
@@ -948,6 +946,7 @@
 		7677E40F29F79BF300AC6A75 /* SAEScreenLockViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 7677E40E29F79BF300AC6A75 /* SAEScreenLockViewController.swift */; };
 		7677E41129F7A60500AC6A75 /* ScreenLockViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 7677E41029F7A60500AC6A75 /* ScreenLockViewController.swift */; };
 		7677E41329F84C2100AC6A75 /* ScreenLockUI.swift in Sources */ = {isa = PBXBuildFile; fileRef = 7677E41229F84C2100AC6A75 /* ScreenLockUI.swift */; };
+		7677E40D29F75C4200AC6A75 /* Theme.swift in Sources */ = {isa = PBXBuildFile; fileRef = 7677E40C29F75C4200AC6A75 /* Theme.swift */; };
 		7685DFFF29EA1F6400542CBC /* UIFont+OWS.swift in Sources */ = {isa = PBXBuildFile; fileRef = 7685DFFE29EA1F6400542CBC /* UIFont+OWS.swift */; };
 		76896BF828415ABA00F6C8D2 /* VideoAttachmentPrepViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = 76896BF728415ABA00F6C8D2 /* VideoAttachmentPrepViewController.swift */; };
 		76896BFA28415B6B00F6C8D2 /* VideoTimelineView.swift in Sources */ = {isa = PBXBuildFile; fileRef = 76896BF928415B6B00F6C8D2 /* VideoTimelineView.swift */; };
@@ -2788,11 +2787,9 @@
 		34A954B1271A471300B05242 /* SignalUITests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = SignalUITests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };
 		34A954CA271B4BE600B05242 /* ShareViewDelegate.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ShareViewDelegate.swift; sourceTree = "<group>"; };
 		34A954CE271B4D0700B05242 /* SignalUI-Prefix.pch */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = "SignalUI-Prefix.pch"; sourceTree = "<group>"; };
-		34A954D3271B4F3E00B05242 /* Theme.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = Theme.h; sourceTree = "<group>"; };
-		34A954D4271B4F3E00B05242 /* Theme+OWS.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = "Theme+OWS.swift"; sourceTree = "<group>"; };
+		34A954D4271B4F3E00B05242 /* Theme+Icons.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = "Theme+Icons.swift"; sourceTree = "<group>"; };
 		34A954D6271B4F3E00B05242 /* ChatColors.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ChatColors.swift; sourceTree = "<group>"; };
 		34A954D8271B4F3E00B05242 /* ColorOrGradient.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ColorOrGradient.swift; sourceTree = "<group>"; };
-		34A954D9271B4F3E00B05242 /* Theme.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = Theme.m; sourceTree = "<group>"; };
 		34A954DA271B4F3E00B05242 /* ColorOrGradientSwatchView.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = ColorOrGradientSwatchView.swift; sourceTree = "<group>"; };
 		34A954E3271B4F6900B05242 /* AttachmentSharing.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = AttachmentSharing.h; sourceTree = "<group>"; };
 		34A954E4271B4F6A00B05242 /* AttachmentSharing.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = AttachmentSharing.m; sourceTree = "<group>"; };
@@ -3446,6 +3443,7 @@
 		7677E40E29F79BF300AC6A75 /* SAEScreenLockViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SAEScreenLockViewController.swift; sourceTree = "<group>"; };
 		7677E41029F7A60500AC6A75 /* ScreenLockViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ScreenLockViewController.swift; sourceTree = "<group>"; };
 		7677E41229F84C2100AC6A75 /* ScreenLockUI.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ScreenLockUI.swift; sourceTree = "<group>"; };
+		7677E40C29F75C4200AC6A75 /* Theme.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Theme.swift; sourceTree = "<group>"; };
 		7685DFFE29EA1F6400542CBC /* UIFont+OWS.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = "UIFont+OWS.swift"; sourceTree = "<group>"; };
 		76896BF728415ABA00F6C8D2 /* VideoAttachmentPrepViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = VideoAttachmentPrepViewController.swift; sourceTree = "<group>"; };
 		76896BF928415B6B00F6C8D2 /* VideoTimelineView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = VideoTimelineView.swift; sourceTree = "<group>"; };
@@ -5631,9 +5629,8 @@
 				34A954D6271B4F3E00B05242 /* ChatColors.swift */,
 				34A954D8271B4F3E00B05242 /* ColorOrGradient.swift */,
 				34A954DA271B4F3E00B05242 /* ColorOrGradientSwatchView.swift */,
-				34A954D4271B4F3E00B05242 /* Theme+OWS.swift */,
-				34A954D3271B4F3E00B05242 /* Theme.h */,
-				34A954D9271B4F3E00B05242 /* Theme.m */,
+				34A954D4271B4F3E00B05242 /* Theme+Icons.swift */,
+				7677E40C29F75C4200AC6A75 /* Theme.swift */,
 			);
 			path = Appearance;
 			sourceTree = "<group>";
@@ -9450,7 +9447,6 @@
 				88B986F828807E9000F8C74D /* RecipientPickerViewController.h in Headers */,
 				34A954CF271B4D0700B05242 /* SignalUI-Prefix.pch in Headers */,
 				34A954BA271A471300B05242 /* SignalUI.h in Headers */,
-				34A954DB271B4F3E00B05242 /* Theme.h in Headers */,
 				3402A9E9271D97090084CBAE /* UIView+SignalUI.h in Headers */,
 				34A954FD271B4FB000B05242 /* UIViewController+OWS.h in Headers */,
 				3402AA51271D9DCD0084CBAE /* UIViewController+Permissions.h in Headers */,
@@ -10879,8 +10875,8 @@
 				88B6D673280770C4005D86EC /* TextAttachmentView.swift in Sources */,
 				3402AAB0271D9E180084CBAE /* TextFieldWithPlaceholder.swift in Sources */,
 				3402AA8E271D9E180084CBAE /* TextViewWithPlaceholder.swift in Sources */,
-				34A954DC271B4F3E00B05242 /* Theme+OWS.swift in Sources */,
-				34A954E1271B4F3E00B05242 /* Theme.m in Sources */,
+				34A954DC271B4F3E00B05242 /* Theme+Icons.swift in Sources */,
+				7677E40D29F75C4200AC6A75 /* Theme.swift in Sources */,
 				66FC638429E2201500F00DAC /* ThemedColor+Theme.swift in Sources */,
 				3402AA8F271D9E180084CBAE /* ThemeHeaderView.swift in Sources */,
 				3402AA62271D9DEC0084CBAE /* ThreadUtil+SignalUI.swift in Sources */,
diff --git a/Signal/src/Experience Upgrades/MegaphoneView.swift b/Signal/src/Experience Upgrades/MegaphoneView.swift
index 991e599cdd3..b3fdb1a0e67 100644
--- a/Signal/src/Experience Upgrades/MegaphoneView.swift	
+++ b/Signal/src/Experience Upgrades/MegaphoneView.swift	
@@ -108,7 +108,7 @@ class MegaphoneView: UIView, ExperienceUpgradeView {
         addSubview(stackView)
         stackView.autoPinEdgesToSuperviewEdges()
 
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
         applyTheme()
     }
 
diff --git a/Signal/src/ViewControllers/AppSettings/Appearance/AppearanceSettingsTableViewController.swift b/Signal/src/ViewControllers/AppSettings/Appearance/AppearanceSettingsTableViewController.swift
index c7c306c9030..686089ac802 100644
--- a/Signal/src/ViewControllers/AppSettings/Appearance/AppearanceSettingsTableViewController.swift
+++ b/Signal/src/ViewControllers/AppSettings/Appearance/AppearanceSettingsTableViewController.swift
@@ -3,9 +3,8 @@
 // SPDX-License-Identifier: AGPL-3.0-only
 //
 
-import Foundation
+import SignalUI
 
-@objc
 class AppearanceSettingsTableViewController: OWSTableViewController2 {
     override func viewDidLoad() {
         super.viewDidLoad()
@@ -21,7 +20,7 @@ class AppearanceSettingsTableViewController: OWSTableViewController2 {
         updateTableContents()
     }
 
-    func updateTableContents() {
+    private func updateTableContents() {
         let contents = OWSTableContents()
 
         let firstSection = OWSTableSection()
@@ -54,26 +53,26 @@ class AppearanceSettingsTableViewController: OWSTableViewController2 {
         self.contents = contents
     }
 
-    func appearanceItem(_ mode: ThemeMode) -> OWSTableItem {
+    private func appearanceItem(_ mode: Theme.Mode) -> OWSTableItem {
         return OWSTableItem(
-            text: nameForTheme(mode),
+            text: nameForThemeMode(mode),
             actionBlock: { [weak self] in
-                self?.changeTheme(mode)
+                self?.changeThemeMode(mode)
             },
-            accessoryType: Theme.getOrFetchCurrentTheme() == mode ? .checkmark : .none
+            accessoryType: Theme.getOrFetchCurrentMode() == mode ? .checkmark : .none
         )
     }
 
-    func changeTheme(_ mode: ThemeMode) {
-        Theme.setCurrent(mode)
+    private func changeThemeMode(_ mode: Theme.Mode) {
+        Theme.setCurrentMode(mode)
         updateTableContents()
     }
 
-    var currentThemeName: String {
-        return nameForTheme(Theme.getOrFetchCurrentTheme())
+    private var currentThemeName: String {
+        return nameForThemeMode(Theme.getOrFetchCurrentMode())
     }
 
-    func nameForTheme(_ mode: ThemeMode) -> String {
+    private func nameForThemeMode(_ mode: Theme.Mode) -> String {
         switch mode {
         case .dark:
             return OWSLocalizedString("APPEARANCE_SETTINGS_DARK_THEME_NAME", comment: "Name indicating that the dark theme is enabled.")
diff --git a/Signal/src/ViewControllers/AppSettings/Appearance/ThemeSettingsTableViewController.swift b/Signal/src/ViewControllers/AppSettings/Appearance/ThemeSettingsTableViewController.swift
index 1c59e0a55cf..a5f756048a3 100644
--- a/Signal/src/ViewControllers/AppSettings/Appearance/ThemeSettingsTableViewController.swift
+++ b/Signal/src/ViewControllers/AppSettings/Appearance/ThemeSettingsTableViewController.swift
@@ -3,9 +3,8 @@
 // SPDX-License-Identifier: AGPL-3.0-only
 //
 
-import Foundation
+import SignalUI
 
-@objc
 class ThemeSettingsTableViewController: OWSTableViewController2 {
     override func viewDidLoad() {
         super.viewDidLoad()
@@ -16,7 +15,7 @@ class ThemeSettingsTableViewController: OWSTableViewController2 {
         updateTableContents()
     }
 
-    func updateTableContents() {
+    private func updateTableContents() {
         let contents = OWSTableContents()
 
         let themeSection = OWSTableSection()
@@ -31,26 +30,26 @@ class ThemeSettingsTableViewController: OWSTableViewController2 {
         self.contents = contents
     }
 
-    func appearanceItem(_ mode: ThemeMode) -> OWSTableItem {
+    private func appearanceItem(_ mode: Theme.Mode) -> OWSTableItem {
         return OWSTableItem(
-            text: Self.nameForTheme(mode),
+            text: Self.nameForThemeMode(mode),
             actionBlock: { [weak self] in
-                self?.changeTheme(mode)
+                self?.changeThemeMode(mode)
             },
-            accessoryType: Theme.getOrFetchCurrentTheme() == mode ? .checkmark : .none
+            accessoryType: Theme.getOrFetchCurrentMode() == mode ? .checkmark : .none
         )
     }
 
-    func changeTheme(_ mode: ThemeMode) {
-        Theme.setCurrent(mode)
+    private func changeThemeMode(_ mode: Theme.Mode) {
+        Theme.setCurrentMode(mode)
         updateTableContents()
     }
 
     static var currentThemeName: String {
-        return nameForTheme(Theme.getOrFetchCurrentTheme())
+        return nameForThemeMode(Theme.getOrFetchCurrentMode())
     }
 
-    static func nameForTheme(_ mode: ThemeMode) -> String {
+    private static func nameForThemeMode(_ mode: Theme.Mode) -> String {
         switch mode {
         case .dark:
             return OWSLocalizedString("APPEARANCE_SETTINGS_DARK_THEME_NAME",
@@ -63,12 +62,4 @@ class ThemeSettingsTableViewController: OWSTableViewController2 {
                                      comment: "Name indicating that the system theme is enabled.")
         }
     }
-
-    @objc
-    func didToggleAvatarPreference(_ sender: UISwitch) {
-        Logger.info("Avatar preference toggled: \(sender.isOn)")
-        SDSDatabaseStorage.shared.asyncWrite { writeTx in
-            SSKPreferences.setPreferContactAvatars(sender.isOn, transaction: writeTx)
-        }
-    }
 }
diff --git a/Signal/src/ViewControllers/AppSettings/ChatsSettingsViewController.swift b/Signal/src/ViewControllers/AppSettings/ChatsSettingsViewController.swift
index c6d316f47c8..97da0b3050b 100644
--- a/Signal/src/ViewControllers/AppSettings/ChatsSettingsViewController.swift
+++ b/Signal/src/ViewControllers/AppSettings/ChatsSettingsViewController.swift
@@ -3,12 +3,10 @@
 // SPDX-License-Identifier: AGPL-3.0-only
 //
 
-import Foundation
 import IntentsUI
 import SignalMessaging
 import SignalUI
 
-@objc
 class ChatsSettingsViewController: OWSTableViewController2 {
     override func viewDidLoad() {
         super.viewDidLoad()
@@ -26,7 +24,7 @@ class ChatsSettingsViewController: OWSTableViewController2 {
     }
 
     @objc
-    func updateTableContents() {
+    private func updateTableContents() {
         let contents = OWSTableContents()
 
         let linkPreviewSection = OWSTableSection()
@@ -119,7 +117,7 @@ class ChatsSettingsViewController: OWSTableViewController2 {
     }
 
     @objc
-    func didToggleLinkPreviewsEnabled(_ sender: UISwitch) {
+    private func didToggleLinkPreviewsEnabled(_ sender: UISwitch) {
         Logger.info("toggled to: \(sender.isOn)")
         databaseStorage.write { transaction in
             SSKPreferences.setAreLinkPreviewsEnabled(sender.isOn, sendSyncMessage: true, transaction: transaction)
@@ -127,7 +125,7 @@ class ChatsSettingsViewController: OWSTableViewController2 {
     }
 
     @objc
-    func didToggleSharingSuggestionsEnabled(_ sender: UISwitch) {
+    private func didToggleSharingSuggestionsEnabled(_ sender: UISwitch) {
         Logger.info("toggled to: \(sender.isOn)")
 
         if sender.isOn {
@@ -153,7 +151,7 @@ class ChatsSettingsViewController: OWSTableViewController2 {
     }
 
     @objc
-    func didToggleAvatarPreference(_ sender: UISwitch) {
+    private func didToggleAvatarPreference(_ sender: UISwitch) {
         Logger.info("toggled to: \(sender.isOn)")
         let currentValue = databaseStorage.read { SSKPreferences.preferContactAvatars(transaction: $0) }
         guard currentValue != sender.isOn else { return }
@@ -162,7 +160,7 @@ class ChatsSettingsViewController: OWSTableViewController2 {
     }
 
     @objc
-    func didToggleShouldKeepMutedChatsArchivedSwitch(_ sender: UISwitch) {
+    private func didToggleShouldKeepMutedChatsArchivedSwitch(_ sender: UISwitch) {
         Logger.info("toggled to \(sender.isOn)")
         let currentValue = databaseStorage.read { SSKPreferences.shouldKeepMutedChatsArchived(transaction: $0) }
         guard currentValue != sender.isOn else { return }
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationHeaderView.swift b/Signal/src/ViewControllers/ConversationView/ConversationHeaderView.swift
index 1a8a58c6953..32ce0da2dec 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationHeaderView.swift
+++ b/Signal/src/ViewControllers/ConversationView/ConversationHeaderView.swift
@@ -119,7 +119,7 @@ public class ConversationHeaderView: UIView {
         let tapGesture = UITapGestureRecognizer(target: self, action: #selector(didTapView))
         rootStack.addGestureRecognizer(tapGesture)
 
-        NotificationCenter.default.addObserver(self, selector: #selector(themeDidChange), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(themeDidChange), name: .themeDidChange, object: nil)
     }
 
     required public init(coder: NSCoder) {
diff --git a/Signal/src/ViewControllers/ConversationView/ConversationScrollButton.swift b/Signal/src/ViewControllers/ConversationView/ConversationScrollButton.swift
index 9c3cdf8763b..60eaaed0616 100644
--- a/Signal/src/ViewControllers/ConversationView/ConversationScrollButton.swift
+++ b/Signal/src/ViewControllers/ConversationView/ConversationScrollButton.swift
@@ -23,7 +23,7 @@ public class ConversationScrollButton: UIButton {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(themeDidChange(notification:)),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil)
     }
 
diff --git a/Signal/src/ViewControllers/GetStartedBannerViewController.swift b/Signal/src/ViewControllers/GetStartedBannerViewController.swift
index 9c9be10c508..3fda113a9e1 100644
--- a/Signal/src/ViewControllers/GetStartedBannerViewController.swift
+++ b/Signal/src/ViewControllers/GetStartedBannerViewController.swift
@@ -77,7 +77,7 @@ class GetStartedBannerViewController: UIViewController, UICollectionViewDelegate
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(applyTheme),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil)
 
         NotificationCenter.default.addObserver(
diff --git a/Signal/src/ViewControllers/GifPicker/GifPickerCell.swift b/Signal/src/ViewControllers/GifPicker/GifPickerCell.swift
index bb48ee600c5..b8f359cb808 100644
--- a/Signal/src/ViewControllers/GifPicker/GifPickerCell.swift
+++ b/Signal/src/ViewControllers/GifPicker/GifPickerCell.swift
@@ -49,7 +49,7 @@ class GifPickerCell: UICollectionViewCell {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(applyTheme),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil)
 
         applyTheme()
diff --git a/Signal/src/ViewControllers/HomeView/Chat List/ChatListViewController.m b/Signal/src/ViewControllers/HomeView/Chat List/ChatListViewController.m
index 4a59e9924c7..ab41b9b6525 100644
--- a/Signal/src/ViewControllers/HomeView/Chat List/ChatListViewController.m	
+++ b/Signal/src/ViewControllers/HomeView/Chat List/ChatListViewController.m	
@@ -18,7 +18,6 @@
 #import <SignalServiceKit/TSAccountManager.h>
 #import <SignalServiceKit/TSGroupThread.h>
 #import <SignalServiceKit/TSOutgoingMessage.h>
-#import <SignalUI/Theme.h>
 #import <SignalUI/ViewControllerUtils.h>
 #import <StoreKit/StoreKit.h>
 
@@ -452,7 +451,7 @@ - (void)updateBarButtonItems
                 break;
             case OWSWebSocketStateConnecting:
                 proxyStatusImage = [UIImage imageNamed:@"proxy_failed_24"];
-                tintColor = Theme.middleGrayColor;
+                tintColor = UIColor.ows_middleGrayColor;
                 break;
         }
 
diff --git a/Signal/src/ViewControllers/HomeView/Chat List/ConversationSearchViewController.swift b/Signal/src/ViewControllers/HomeView/Chat List/ConversationSearchViewController.swift
index e52382cb388..892d1e45994 100644
--- a/Signal/src/ViewControllers/HomeView/Chat List/ConversationSearchViewController.swift	
+++ b/Signal/src/ViewControllers/HomeView/Chat List/ConversationSearchViewController.swift	
@@ -98,7 +98,7 @@ public class ConversationSearchViewController: UITableViewController, ThreadSwip
 
         NotificationCenter.default.addObserver(self,
                                                selector: #selector(themeDidChange),
-                                               name: .ThemeDidChange,
+                                               name: .themeDidChange,
                                                object: nil)
         NotificationCenter.default.addObserver(self,
                                                selector: #selector(blockListDidChange),
diff --git a/Signal/src/ViewControllers/HomeView/ConversationSplitViewController.swift b/Signal/src/ViewControllers/HomeView/ConversationSplitViewController.swift
index a843361052f..c84b836f3b4 100644
--- a/Signal/src/ViewControllers/HomeView/ConversationSplitViewController.swift
+++ b/Signal/src/ViewControllers/HomeView/ConversationSplitViewController.swift
@@ -69,7 +69,7 @@ class ConversationSplitViewController: UISplitViewController, ConversationSplit
         delegate = self
         preferredDisplayMode = .allVisible
 
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(orientationDidChange),
diff --git a/Signal/src/ViewControllers/HomeView/HomeTabBarController.swift b/Signal/src/ViewControllers/HomeView/HomeTabBarController.swift
index a7faa8a2b74..f617d7a54a0 100644
--- a/Signal/src/ViewControllers/HomeView/HomeTabBarController.swift
+++ b/Signal/src/ViewControllers/HomeView/HomeTabBarController.swift
@@ -57,7 +57,7 @@ class HomeTabBarController: UITabBarController {
         }
 
         NotificationCenter.default.addObserver(self, selector: #selector(storiesEnabledStateDidChange), name: .storiesEnabledStateDidChange, object: nil)
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
         NotificationCenter.default.addObserver(self, selector: #selector(didEnterForeground), name: .OWSApplicationWillEnterForeground, object: nil)
         applyTheme()
 
@@ -267,7 +267,7 @@ public class OWSTabBar: UITabBar {
 
         NotificationCenter.default.addObserver(self,
                                                selector: #selector(themeDidChange),
-                                               name: .ThemeDidChange,
+                                               name: .themeDidChange,
                                                object: nil)
     }
 
diff --git a/Signal/src/ViewControllers/LoadingViewController.swift b/Signal/src/ViewControllers/LoadingViewController.swift
index 42e3a85eba1..027c4b475a3 100644
--- a/Signal/src/ViewControllers/LoadingViewController.swift
+++ b/Signal/src/ViewControllers/LoadingViewController.swift
@@ -19,7 +19,7 @@ public class LoadingViewController: UIViewController {
 
     override public func loadView() {
         self.view = UIView()
-        view.backgroundColor = Theme.launchScreenBackground
+        view.backgroundColor = Theme.launchScreenBackgroundColor
 
         self.logoView = UIImageView(image: #imageLiteral(resourceName: "signal-logo-128-launch-screen"))
         view.addSubview(logoView)
@@ -60,7 +60,7 @@ public class LoadingViewController: UIViewController {
                                                object: nil)
         NotificationCenter.default.addObserver(self,
                                                selector: #selector(themeDidChange),
-                                               name: .ThemeDidChange,
+                                               name: .themeDidChange,
                                                object: nil)
     }
 
@@ -148,7 +148,7 @@ public class LoadingViewController: UIViewController {
 
     @objc
     func themeDidChange() {
-        view.backgroundColor = Theme.launchScreenBackground
+        view.backgroundColor = Theme.launchScreenBackgroundColor
     }
 
     // MARK: Orientation
diff --git a/Signal/src/ViewControllers/MediaGallery/MediaTileViewController.swift b/Signal/src/ViewControllers/MediaGallery/MediaTileViewController.swift
index 683b0597a14..b4e77dbe569 100644
--- a/Signal/src/ViewControllers/MediaGallery/MediaTileViewController.swift
+++ b/Signal/src/ViewControllers/MediaGallery/MediaTileViewController.swift
@@ -211,7 +211,7 @@ public class MediaTileViewController: UICollectionViewController, MediaGalleryDe
 
         applyTheme()
 
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
     }
 
     override public func viewWillAppear(_ animated: Bool) {
diff --git a/Signal/src/ViewControllers/MessageActionsToolbar.swift b/Signal/src/ViewControllers/MessageActionsToolbar.swift
index c975a207564..5441b47b0da 100644
--- a/Signal/src/ViewControllers/MessageActionsToolbar.swift
+++ b/Signal/src/ViewControllers/MessageActionsToolbar.swift
@@ -100,7 +100,7 @@ public class MessageActionsToolbar: UIToolbar {
 
         buildItems()
 
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
         applyTheme()
     }
 
diff --git a/Signal/src/ViewControllers/Registration/Onboarding/Deprecated_OnboardingController.swift b/Signal/src/ViewControllers/Registration/Onboarding/Deprecated_OnboardingController.swift
index 12db1eea185..4e24139131c 100644
--- a/Signal/src/ViewControllers/Registration/Onboarding/Deprecated_OnboardingController.swift
+++ b/Signal/src/ViewControllers/Registration/Onboarding/Deprecated_OnboardingController.swift
@@ -804,7 +804,7 @@ public class Deprecated_OnboardingController: NSObject {
 
 public extension UIView {
     func addBottomStroke() -> UIView {
-        return addBottomStroke(color: Theme.middleGrayColor, strokeWidth: CGHairlineWidth())
+        return addBottomStroke(color: .ows_middleGray, strokeWidth: CGHairlineWidth())
     }
 
     func addBottomStroke(color: UIColor, strokeWidth: CGFloat) -> UIView {
diff --git a/Signal/src/ViewControllers/Registration/Onboarding/Deprecated_RegistrationPhoneNumberDiscoverabilityViewController.swift b/Signal/src/ViewControllers/Registration/Onboarding/Deprecated_RegistrationPhoneNumberDiscoverabilityViewController.swift
index 2d711926c22..af5f975ed32 100644
--- a/Signal/src/ViewControllers/Registration/Onboarding/Deprecated_RegistrationPhoneNumberDiscoverabilityViewController.swift
+++ b/Signal/src/ViewControllers/Registration/Onboarding/Deprecated_RegistrationPhoneNumberDiscoverabilityViewController.swift
@@ -202,7 +202,7 @@ private class ButtonRow: UIButton {
         stackView.autoSetDimension(.height, toSize: 44, relation: .greaterThanOrEqual)
 
         let divider = UIView()
-        divider.backgroundColor = Theme.middleGrayColor
+        divider.backgroundColor = .ows_middleGray
         addSubview(divider)
         divider.autoSetDimension(.height, toSize: CGHairlineWidth())
         divider.autoPinEdge(toSuperviewEdge: .trailing)
diff --git a/Signal/src/ViewControllers/Registration/RegistrationPhoneNumberDiscoverabilityViewController.swift b/Signal/src/ViewControllers/Registration/RegistrationPhoneNumberDiscoverabilityViewController.swift
index 2a05f1bf9f8..8c2f39c639e 100644
--- a/Signal/src/ViewControllers/Registration/RegistrationPhoneNumberDiscoverabilityViewController.swift
+++ b/Signal/src/ViewControllers/Registration/RegistrationPhoneNumberDiscoverabilityViewController.swift
@@ -271,7 +271,7 @@ private class ButtonRow: UIButton {
         buttonLabel.textColor = Theme.primaryTextColor
         buttonLabel.font = .dynamicTypeBodyClamped
 
-        divider.backgroundColor = Theme.middleGrayColor
+        divider.backgroundColor = .ows_middleGray
 
         selectedImageView.setTemplateImageName(Theme.iconName(.accessoryCheckmark), tintColor: Theme.primaryIconColor)
     }
diff --git a/Signal/src/ViewControllers/ThreadSettings/ConversationSettingsViewController+Contents.swift b/Signal/src/ViewControllers/ThreadSettings/ConversationSettingsViewController+Contents.swift
index 1e65b15dabb..35eff5b04b2 100644
--- a/Signal/src/ViewControllers/ThreadSettings/ConversationSettingsViewController+Contents.swift
+++ b/Signal/src/ViewControllers/ThreadSettings/ConversationSettingsViewController+Contents.swift
@@ -115,7 +115,7 @@ extension ConversationSettingsViewController {
                     stackView.addArrangedSubview(button)
                     button.autoSetDimensions(to: CGSize(square: imageWidth))
 
-                    imageView.backgroundColor = Theme.middleGrayColor
+                    imageView.backgroundColor = .ows_middleGray
 
                     button.addSubview(imageView)
                     imageView.autoPinEdgesToSuperviewEdges()
diff --git a/Signal/src/ViewControllers/Wallpapers/ChatColorViewController.swift b/Signal/src/ViewControllers/Wallpapers/ChatColorViewController.swift
index b394b0b632d..8a921972919 100644
--- a/Signal/src/ViewControllers/Wallpapers/ChatColorViewController.swift
+++ b/Signal/src/ViewControllers/Wallpapers/ChatColorViewController.swift
@@ -56,7 +56,7 @@ class ChatColorViewController: OWSTableViewController2 {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(themeDidChangeNotification),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil
         )
     }
diff --git a/Signal/src/ViewControllers/Wallpapers/CustomColorViewController.swift b/Signal/src/ViewControllers/Wallpapers/CustomColorViewController.swift
index f702b1ccb4c..8a8c2b1debf 100644
--- a/Signal/src/ViewControllers/Wallpapers/CustomColorViewController.swift
+++ b/Signal/src/ViewControllers/Wallpapers/CustomColorViewController.swift
@@ -100,7 +100,7 @@ class CustomColorViewController: OWSTableViewController2 {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(updateTableContents),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil
         )
     }
diff --git a/Signal/src/util/DisplayableText.swift b/Signal/src/util/DisplayableText.swift
index b799f052e89..0dc6f858e94 100644
--- a/Signal/src/util/DisplayableText.swift
+++ b/Signal/src/util/DisplayableText.swift
@@ -114,7 +114,7 @@ public class DisplayableText: NSObject {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(themeDidChange),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil
         )
     }
diff --git a/Signal/src/util/ScreenLockUI.swift b/Signal/src/util/ScreenLockUI.swift
index baeb4a19a83..b6d1d3d8f1f 100644
--- a/Signal/src/util/ScreenLockUI.swift
+++ b/Signal/src/util/ScreenLockUI.swift
@@ -79,7 +79,7 @@ class ScreenLockUI {
         window.isHidden = false
         window.windowLevel = ._Background
         window.isOpaque = true
-        window.backgroundColor = Theme.launchScreenBackground
+        window.backgroundColor = Theme.launchScreenBackgroundColor
         return window
     }()
     private lazy var screenBlockingViewController: ScreenLockViewController = {
diff --git a/Signal/src/views/EmojiMoodPickerView.swift b/Signal/src/views/EmojiMoodPickerView.swift
index cb479c3c151..9efac9b674d 100644
--- a/Signal/src/views/EmojiMoodPickerView.swift
+++ b/Signal/src/views/EmojiMoodPickerView.swift
@@ -54,7 +54,7 @@ class EmojiMoodPickerView: UIView {
         }
 
         applyTheme()
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
     }
 
     required init?(coder: NSCoder) {
diff --git a/Signal/src/views/GetStartedBannerCell.swift b/Signal/src/views/GetStartedBannerCell.swift
index 0c844bd5825..7ec08b2c00b 100644
--- a/Signal/src/views/GetStartedBannerCell.swift
+++ b/Signal/src/views/GetStartedBannerCell.swift
@@ -101,7 +101,7 @@ class GetStartedBannerCell: UICollectionViewCell {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(applyTheme),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil)
 
         applyTheme()
diff --git a/Signal/src/views/JoinGroupCallPill.swift b/Signal/src/views/JoinGroupCallPill.swift
index c3801550361..f7473cd6934 100644
--- a/Signal/src/views/JoinGroupCallPill.swift
+++ b/Signal/src/views/JoinGroupCallPill.swift
@@ -74,7 +74,7 @@ class JoinGroupCallPill: UIControl {
         backgroundPill.autoPinEdgesToSuperviewEdges()
         dimmingView.autoPinEdgesToSuperviewEdges()
 
-        NotificationCenter.default.addObserver(self, selector: #selector(themeDidChange), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(themeDidChange), name: .themeDidChange, object: nil)
         applyStyle()
     }
 
diff --git a/Signal/src/views/WidePhotoCell.swift b/Signal/src/views/WidePhotoCell.swift
index a4cd48f0cc2..fe6eb6ab0d2 100644
--- a/Signal/src/views/WidePhotoCell.swift
+++ b/Signal/src/views/WidePhotoCell.swift
@@ -380,7 +380,7 @@ class FilenameSenderView: UIView {
 
         NotificationCenter.default.addObserver(self,
                                                selector: #selector(themeDidChange),
-                                               name: .ThemeDidChange,
+                                               name: .themeDidChange,
                                                object: nil)
     }
 
diff --git a/SignalMessaging/categories/UIColor+OWS.swift b/SignalMessaging/categories/UIColor+OWS.swift
index 8f8417a193e..286c1f10995 100644
--- a/SignalMessaging/categories/UIColor+OWS.swift
+++ b/SignalMessaging/categories/UIColor+OWS.swift
@@ -152,6 +152,11 @@ public extension UIColor {
         return UIColor(rgbHex: 0x848484)
     }
 
+    @objc(ows_middleGrayColor)
+    class var ows_middleGray: UIColor {
+        return UIColor(white: 0.5, alpha: 1)
+    }
+
     @objc(ows_gray60Color)
     class var ows_gray60: UIColor {
         return UIColor(rgbHex: 0x5E5E5E)
diff --git a/SignalShareExtension/SAEFailedViewController.swift b/SignalShareExtension/SAEFailedViewController.swift
index 1a29e9bf7cb..3bd8a18ac08 100644
--- a/SignalShareExtension/SAEFailedViewController.swift
+++ b/SignalShareExtension/SAEFailedViewController.swift
@@ -41,7 +41,7 @@ class SAEFailedViewController: UIViewController {
                                                                 action: #selector(cancelPressed))
         self.navigationItem.title = "Signal"
 
-        self.view.backgroundColor = Theme.launchScreenBackground
+        self.view.backgroundColor = Theme.launchScreenBackgroundColor
 
         let logoImage = UIImage(named: "signal-logo-128-launch-screen")
         let logoImageView = UIImageView(image: logoImage)
diff --git a/SignalShareExtension/SAEScreenLockViewController.m b/SignalShareExtension/SAEScreenLockViewController.m
new file mode 100644
index 00000000000..c7422087b5c
--- /dev/null
+++ b/SignalShareExtension/SAEScreenLockViewController.m
@@ -0,0 +1,186 @@
+//
+// Copyright 2018 Signal Messenger, LLC
+// SPDX-License-Identifier: AGPL-3.0-only
+//
+
+#import "SAEScreenLockViewController.h"
+#import <SignalMessaging/SignalMessaging-Swift.h>
+#import <SignalServiceKit/AppContext.h>
+#import <SignalServiceKit/SignalServiceKit-Swift.h>
+#import <SignalUI/SignalUI-Swift.h>
+
+NS_ASSUME_NONNULL_BEGIN
+
+@interface SAEScreenLockViewController () <ScreenLockViewDelegate>
+
+@property (nonatomic, readonly, weak) id<ShareViewDelegate> shareViewDelegate;
+
+@property (nonatomic) BOOL hasShownAuthUIOnce;
+
+@property (nonatomic) BOOL isShowingAuthUI;
+
+@end
+
+#pragma mark -
+
+@implementation SAEScreenLockViewController
+
+- (instancetype)initWithShareViewDelegate:(id<ShareViewDelegate>)shareViewDelegate
+{
+    self = [super init];
+    if (!self) {
+        return self;
+    }
+
+    _shareViewDelegate = shareViewDelegate;
+
+    self.delegate = self;
+
+    return self;
+}
+
+- (void)loadView
+{
+    [super loadView];
+
+    self.view.backgroundColor = Theme.launchScreenBackgroundColor;
+
+    self.title = OWSLocalizedString(@"SHARE_EXTENSION_VIEW_TITLE", @"Title for the 'share extension' view.");
+
+    self.navigationItem.leftBarButtonItem =
+        [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemStop
+                                                      target:self
+                                                      action:@selector(dismissPressed:)];
+}
+
+- (void)viewWillAppear:(BOOL)animated
+{
+    [super viewWillAppear:animated];
+
+    [self ensureUI];
+}
+
+- (void)viewDidAppear:(BOOL)animated
+{
+    [super viewDidAppear:animated];
+
+    [self ensureUI];
+
+    // Auto-show the auth UI f
+    if (!self.hasShownAuthUIOnce) {
+        self.hasShownAuthUIOnce = YES;
+
+        [self tryToPresentAuthUIToUnlockScreenLock];
+    }
+}
+
+- (void)dealloc
+{
+    // Surface memory leaks by logging the deallocation of view controllers.
+    OWSLogVerbose(@"Dealloc: %@", self.class);
+}
+
+- (void)tryToPresentAuthUIToUnlockScreenLock
+{
+    OWSAssertIsOnMainThread();
+
+    if (self.isShowingAuthUI) {
+        // We're already showing the auth UI; abort.
+        return;
+    }
+    OWSLogInfo(@"try to unlock screen lock");
+
+    self.isShowingAuthUI = YES;
+
+    [OWSScreenLock.shared
+        tryToUnlockScreenLockWithSuccess:^{
+            OWSAssertIsOnMainThread();
+
+            OWSLogInfo(@"unlock screen lock succeeded.");
+
+            self.isShowingAuthUI = NO;
+
+            [self.shareViewDelegate shareViewWasUnlocked];
+        }
+        failure:^(NSError *error) {
+            OWSAssertIsOnMainThread();
+
+            OWSLogInfo(@"unlock screen lock failed.");
+
+            self.isShowingAuthUI = NO;
+
+            [self ensureUI];
+
+            [self showScreenLockFailureAlertWithMessage:error.userErrorDescription];
+        }
+        unexpectedFailure:^(NSError *error) {
+            OWSAssertIsOnMainThread();
+
+            OWSLogInfo(@"unlock screen lock unexpectedly failed.");
+
+            self.isShowingAuthUI = NO;
+
+            // Local Authentication isn't working properly.
+            // This isn't covered by the docs or the forums but in practice
+            // it appears to be effective to retry again after waiting a bit.
+            dispatch_async(dispatch_get_main_queue(), ^{ [self ensureUI]; });
+        }
+        cancel:^{
+            OWSAssertIsOnMainThread();
+
+            OWSLogInfo(@"unlock screen lock cancelled.");
+
+            self.isShowingAuthUI = NO;
+
+            [self ensureUI];
+        }];
+
+    [self ensureUI];
+}
+
+- (void)ensureUI
+{
+    [self updateUIWithState:ScreenLockUIStateScreenLock isLogoAtTop:NO animated:NO];
+}
+
+- (void)showScreenLockFailureAlertWithMessage:(NSString *)message
+{
+    OWSAssertIsOnMainThread();
+
+    [OWSActionSheets showActionSheetWithTitle:OWSLocalizedString(@"SCREEN_LOCK_UNLOCK_FAILED",
+                                                  @"Title for alert indicating that screen lock could not be unlocked.")
+                                      message:message
+                                  buttonTitle:nil
+                                 buttonAction:^(ActionSheetAction *action) {
+                                     // After the alert, update the UI.
+                                     [self ensureUI];
+                                 }
+                           fromViewController:self];
+}
+
+- (void)dismissPressed:(id)sender
+{
+    OWSLogDebug(@"tapped dismiss share button");
+
+    [self cancelShareExperience];
+}
+
+- (void)cancelShareExperience
+{
+    [self.shareViewDelegate shareViewWasCancelled];
+}
+
+#pragma mark - ScreenLockViewDelegate
+
+- (void)unlockButtonWasTapped
+{
+    OWSAssertIsOnMainThread();
+
+    OWSLogInfo(@"unlockButtonWasTapped");
+
+    [self tryToPresentAuthUIToUnlockScreenLock];
+}
+
+@end
+
+NS_ASSUME_NONNULL_END
diff --git a/SignalShareExtension/SAEScreenLockViewController.swift b/SignalShareExtension/SAEScreenLockViewController.swift
index d44f122c755..e18fe501091 100644
--- a/SignalShareExtension/SAEScreenLockViewController.swift
+++ b/SignalShareExtension/SAEScreenLockViewController.swift
@@ -24,7 +24,7 @@ final class SAEScreenLockViewController: ScreenLockViewController {
 
     override func loadView() {
         super.loadView()
-        view.backgroundColor = Theme.launchScreenBackground
+        view.backgroundColor = Theme.launchScreenBackgroundColor
         title = OWSLocalizedString("SHARE_EXTENSION_VIEW_TITLE", comment: "Title for the 'share extension' view.")
         navigationItem.leftBarButtonItem = UIBarButtonItem(
             barButtonSystemItem: .stop,
diff --git a/SignalUI/Appearance/ColorOrGradientSwatchView.swift b/SignalUI/Appearance/ColorOrGradientSwatchView.swift
index 58577870a6b..fc1c33c6df7 100644
--- a/SignalUI/Appearance/ColorOrGradientSwatchView.swift
+++ b/SignalUI/Appearance/ColorOrGradientSwatchView.swift
@@ -49,7 +49,7 @@ public class ColorOrGradientSwatchView: ManualLayoutViewWithLayer {
 
         configure()
 
-        NotificationCenter.default.addObserver(self, selector: #selector(themeDidChange), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(themeDidChange), name: .themeDidChange, object: nil)
 
         addLayoutBlock { view in
             guard let view = view as? ColorOrGradientSwatchView else { return }
diff --git a/SignalUI/Appearance/Theme+OWS.swift b/SignalUI/Appearance/Theme+Icons.swift
similarity index 88%
rename from SignalUI/Appearance/Theme+OWS.swift
rename to SignalUI/Appearance/Theme+Icons.swift
index 388a9c0e4ee..8758bff99b6 100644
--- a/SignalUI/Appearance/Theme+OWS.swift
+++ b/SignalUI/Appearance/Theme+Icons.swift
@@ -3,7 +3,6 @@
 // SPDX-License-Identifier: AGPL-3.0-only
 //
 
-import Foundation
 import UIKit
 
 @objc
@@ -164,59 +163,7 @@ public enum ThemeIcon: UInt {
     case hide24
 }
 
-// MARK: - Theme setup
-
-public extension Theme {
-    @objc
-    class func setupSignalAppearance() {
-        UINavigationBar.appearance().barTintColor = Theme.navbarBackgroundColor
-        UINavigationBar.appearance().tintColor = Theme.primaryIconColor
-        UIToolbar.appearance().barTintColor = Theme.navbarBackgroundColor
-        UIToolbar.appearance().tintColor = Theme.primaryIconColor
-
-        // We do _not_ specify BarButton.appearance().tintColor because it is sufficient to specify
-        // UINavigationBar.appearance().tintColor. Furthermore, specifying the BarButtonItem's
-        // appearance makes it more difficult to override the navbar theme, e.g. how we _always_
-        // use dark theme in the media send flow and gallery views. If we were specifying
-        // barButton.appearance().tintColor we would then have to manually override each
-        // BarButtonItem's tint, rather than just the navbars.
-        //
-        // UIBarButtonItem.appearance.tintColor = Theme.primaryIconColor;
-
-        // Using UIText{View,Field}.appearance().keyboardAppearance crashes due to a bug in UIKit,
-        // so we don't do it.
-
-        UITableViewCell.appearance().tintColor = Theme.primaryIconColor
-        UIToolbar.appearance().tintColor = .ows_accentBlue
-
-        // If we set NSShadowAttributeName, the NSForegroundColorAttributeName value is ignored.
-        UINavigationBar.appearance().titleTextAttributes = [
-            NSAttributedString.Key.foregroundColor: Theme.navbarTitleColor
-        ]
-
-        UITextView.appearance(whenContainedInInstancesOf: [OWSNavigationController.self]).tintColor = Theme.cursorColor
-        UITextField.appearance(whenContainedInInstancesOf: [OWSNavigationController.self]).tintColor = Theme.cursorColor
-    }
-}
-
-// MARK: - Colors
-
-@objc
-public extension Theme {
-    @objc(launchScreenBackgroundColor)
-    class var launchScreenBackground: UIColor {
-        // We only adapt for dark theme on iOS 13+, because only iOS 13 supports
-        // handling dark / light appearance in the launch screen storyboard.
-        guard #available(iOS 13, *) else { return .ows_signalBlue }
-        return Theme.isDarkThemeEnabled ? .ows_signalBlueDark : .ows_signalBlue
-    }
-
-    class var selectedConversationCellColor: UIColor {
-        return Theme.isDarkThemeEnabled ? UIColor.ows_whiteAlpha20 : UIColor.ows_accentBlue.withAlphaComponent(0.15)
-    }
-}
-
-// MARK: - Icons
+// MARK: -
 
 @objc
 public extension Theme {
@@ -542,7 +489,6 @@ public extension Theme {
 extension Theme {
 
     // Bridging the old name to new name for our ObjC friends
-    @objc
     public static var actionSheetBackgroundColor: UIColor {
         return ActionSheet.default.backgroundColor
     }
@@ -626,12 +572,3 @@ extension Theme {
         }
     }
 }
-
-// MARK: -
-
-@objc
-public extension UIImageView {
-    func setThemeIcon(_ themeIcon: ThemeIcon, tintColor: UIColor) {
-        self.setTemplateImageName(Theme.iconName(themeIcon), tintColor: tintColor)
-    }
-}
diff --git a/SignalUI/Appearance/Theme.h b/SignalUI/Appearance/Theme.h
deleted file mode 100644
index a3bdcc8e84b..00000000000
--- a/SignalUI/Appearance/Theme.h
+++ /dev/null
@@ -1,130 +0,0 @@
-//
-// Copyright 2018 Signal Messenger, LLC
-// SPDX-License-Identifier: AGPL-3.0-only
-//
-
-#import <UIKit/UIKit.h>
-
-NS_ASSUME_NONNULL_BEGIN
-
-typedef NS_CLOSED_ENUM(NSUInteger, ThemeMode) {
-    ThemeMode_System,
-    ThemeMode_Light,
-    ThemeMode_Dark,
-};
-
-extern NSString *const ThemeDidChangeNotification;
-
-@class SDSKeyValueStore;
-
-@interface Theme : NSObject
-
-+ (SDSKeyValueStore *)keyValueStore;
-
-+ (instancetype)new NS_UNAVAILABLE;
-- (instancetype)init NS_UNAVAILABLE;
-
-@property (class, readonly, atomic) BOOL isDarkThemeEnabled;
-
-+ (ThemeMode)getOrFetchCurrentTheme;
-+ (void)setCurrentTheme:(ThemeMode)mode;
-+ (void)systemThemeChanged;
-
-#if TESTABLE_BUILD
-+ (void)setIsDarkThemeEnabledForTests:(BOOL)value;
-#endif
-
-#pragma mark - Global App Colors
-
-@property (class, readonly, nonatomic) UIColor *backgroundColor;
-@property (class, readonly, nonatomic) UIColor *secondaryBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *washColor;
-@property (class, readonly, nonatomic) UIColor *primaryTextColor;
-@property (class, readonly, nonatomic) UIColor *primaryIconColor;
-@property (class, readonly, nonatomic) UIColor *secondaryTextAndIconColor;
-@property (class, readonly, nonatomic) UIColor *ternaryTextColor;
-@property (class, readonly, nonatomic) UIColor *boldColor;
-@property (class, readonly, nonatomic) UIColor *middleGrayColor;
-@property (class, readonly, nonatomic) UIColor *placeholderColor;
-@property (class, readonly, nonatomic) UIColor *hairlineColor;
-@property (class, readonly, nonatomic) UIColor *outlineColor;
-@property (class, readonly, nonatomic) UIColor *backdropColor;
-
-@property (class, readonly, nonatomic) UIColor *navbarBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *navbarTitleColor;
-
-@property (class, readonly, nonatomic) UIColor *toolbarBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *conversationInputBackgroundColor;
-
-@property (class, readonly, nonatomic) UIColor *attachmentKeyboardItemBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *attachmentKeyboardItemImageColor;
-
-@property (class, readonly, nonatomic) UIColor *conversationButtonBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *conversationButtonTextColor;
-
-@property (class, readonly, nonatomic) UIColor *cellSelectedColor;
-@property (class, readonly, nonatomic) UIColor *cellSeparatorColor;
-
-@property (class, readonly, nonatomic) UIColor *cursorColor;
-
-// For accessibility:
-//
-// * Flat areas (e.g. button backgrounds) should use UIColor.ows_accentBlueColor.
-// * Fine detail (e.g., text, non-filled icons) should use Theme.accentBlueColor.
-//   It is brighter in dark mode, improving legibility.
-@property (class, readonly, nonatomic) UIColor *accentBlueColor;
-
-@property (class, readonly, nonatomic) UIColor *tableCell2BackgroundColor;
-@property (class, readonly, nonatomic) UIColor *tableCell2PresentedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *tableCell2SelectedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *tableCell2SelectedBackgroundColor2;
-@property (class, readonly, nonatomic) UIColor *tableCell2MultiSelectedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *tableCell2PresentedSelectedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *tableView2BackgroundColor;
-@property (class, readonly, nonatomic) UIColor *tableView2PresentedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *tableView2SeparatorColor;
-@property (class, readonly, nonatomic) UIColor *tableView2PresentedSeparatorColor;
-
-@property (class, readonly, nonatomic) UIColor *darkThemeTableCell2BackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableCell2PresentedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableCell2SelectedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableCell2SelectedBackgroundColor2;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableCell2MultiSelectedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableCell2PresentedSelectedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableView2BackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableView2PresentedBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableView2SeparatorColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeTableView2PresentedSeparatorColor;
-
-// In some contexts, e.g. media viewing/sending, we always use "dark theme" UI regardless of the
-// users chosen theme.
-@property (class, readonly, nonatomic) UIColor *darkThemeNavbarIconColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeNavbarBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *darkThemePrimaryColor;
-@property (class, readonly, nonatomic) UIColor *lightThemePrimaryColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeSecondaryTextAndIconColor;
-@property (class, readonly, nonatomic) UIBlurEffect *darkThemeBarBlurEffect;
-@property (class, readonly, nonatomic) UIColor *galleryHighlightColor;
-@property (class, readonly, nonatomic) UIColor *darkThemeWashColor;
-
-#pragma mark -
-
-@property (class, readonly, nonatomic) UIBarStyle barStyle;
-@property (class, readonly, nonatomic) UIColor *searchFieldBackgroundColor;
-@property (class, readonly, nonatomic) UIColor *searchFieldElevatedBackgroundColor;
-@property (class, readonly, nonatomic) UIBlurEffect *barBlurEffect;
-@property (class, readonly, nonatomic) UIKeyboardAppearance keyboardAppearance;
-@property (class, readonly, nonatomic) UIColor *keyboardBackgroundColor;
-@property (class, readonly, nonatomic) UIKeyboardAppearance darkThemeKeyboardAppearance;
-
-#pragma mark -
-
-@property (class, readonly, nonatomic) UIColor *toastForegroundColor;
-@property (class, readonly, nonatomic) UIColor *toastBackgroundColor;
-
-@property (class, readonly, nonatomic) UIColor *scrollButtonBackgroundColor;
-
-@end
-
-NS_ASSUME_NONNULL_END
diff --git a/SignalUI/Appearance/Theme.m b/SignalUI/Appearance/Theme.m
deleted file mode 100644
index 8447889f264..00000000000
--- a/SignalUI/Appearance/Theme.m
+++ /dev/null
@@ -1,602 +0,0 @@
-//
-// Copyright 2018 Signal Messenger, LLC
-// SPDX-License-Identifier: AGPL-3.0-only
-//
-
-#import "Theme.h"
-#import <SignalMessaging/SignalMessaging-Swift.h>
-#import <SignalServiceKit/AppReadiness.h>
-#import <SignalServiceKit/SignalServiceKit-Swift.h>
-#import <SignalUI/SignalUI-Swift.h>
-
-NS_ASSUME_NONNULL_BEGIN
-
-NSString *const ThemeDidChangeNotification = @"ThemeDidChangeNotification";
-
-NSString *const ThemeKeyLegacyThemeEnabled = @"ThemeKeyThemeEnabled";
-NSString *const ThemeKeyCurrentMode = @"ThemeKeyCurrentMode";
-
-@interface Theme ()
-
-@property (nonatomic) NSNumber *isDarkThemeEnabledNumber;
-@property (nonatomic) NSNumber *cachedCurrentThemeNumber;
-
-#if TESTABLE_BUILD
-@property (nonatomic, nullable) NSNumber *isDarkThemeEnabledForTests;
-#endif
-
-@end
-
-@implementation Theme
-
-+ (SDSKeyValueStore *)keyValueStore
-{
-    return [[SDSKeyValueStore alloc] initWithCollection:@"ThemeCollection"];
-}
-
-#pragma mark -
-
-+ (Theme *)shared
-{
-    static dispatch_once_t onceToken;
-    static Theme *instance;
-    dispatch_once(&onceToken, ^{ instance = [[self alloc] initDefault]; });
-
-    return instance;
-}
-
-- (instancetype)initDefault
-{
-    self = [super init];
-
-    if (!self) {
-        return self;
-    }
-
-    OWSSingletonAssert();
-
-    AppReadinessRunNowOrWhenAppDidBecomeReadySync(^{
-        // IOS-782: +[Theme shared] re-enterant initialization
-        // AppReadiness will invoke the block synchronously if the app is already ready.
-        // This doesn't work here, because we'll end up reenterantly calling +shared
-        // if the app is in dark mode and the first call to +[Theme shared] happens
-        // after the app is ready.
-        //
-        // It looks like that pattern is only hit in the share extension, but we're better off
-        // asyncing always to ensure the dependency chain is broken. We're okay waiting, since
-        // there's no guarantee that this block in synchronously executed anyway.
-        dispatch_async(dispatch_get_main_queue(), ^{ [self notifyIfThemeModeIsNotDefault]; });
-    });
-
-    return self;
-}
-
-- (void)notifyIfThemeModeIsNotDefault
-{
-    if (self.isDarkThemeEnabled || self.defaultTheme != self.getOrFetchCurrentTheme) {
-        [self themeDidChange];
-    }
-}
-
-#pragma mark -
-
-+ (BOOL)isDarkThemeEnabled
-{
-    return [self.shared isDarkThemeEnabled];
-}
-
-- (BOOL)isDarkThemeEnabled
-{
-    //    OWSAssertIsOnMainThread();
-
-#if TESTABLE_BUILD
-    if (self.isDarkThemeEnabledForTests != nil) {
-        return self.isDarkThemeEnabledForTests.boolValue;
-    }
-#endif
-
-    if (!AppReadiness.isAppReady) {
-        // Don't cache this value until it reflects the data store.
-        return self.isSystemDarkThemeEnabled;
-    }
-
-    if (self.isDarkThemeEnabledNumber == nil) {
-        BOOL isDarkThemeEnabled;
-
-        if (!CurrentAppContext().isMainApp) {
-            // Always respect the system theme in extensions
-            isDarkThemeEnabled = self.isSystemDarkThemeEnabled;
-        } else {
-            switch ([self getOrFetchCurrentTheme]) {
-                case ThemeMode_System:
-                    isDarkThemeEnabled = self.isSystemDarkThemeEnabled;
-                    break;
-                case ThemeMode_Dark:
-                    isDarkThemeEnabled = YES;
-                    break;
-                case ThemeMode_Light:
-                    isDarkThemeEnabled = NO;
-                    break;
-            }
-        }
-
-        self.isDarkThemeEnabledNumber = @(isDarkThemeEnabled);
-    }
-
-    return self.isDarkThemeEnabledNumber.boolValue;
-}
-
-#if TESTABLE_BUILD
-+ (void)setIsDarkThemeEnabledForTests:(BOOL)value
-{
-    self.shared.isDarkThemeEnabledForTests = @(value);
-}
-#endif
-
-+ (ThemeMode)getOrFetchCurrentTheme
-{
-    return [self.shared getOrFetchCurrentTheme];
-}
-
-- (ThemeMode)getOrFetchCurrentTheme
-{
-    if (self.cachedCurrentThemeNumber) {
-        return self.cachedCurrentThemeNumber.unsignedIntegerValue;
-    }
-
-    if (!AppReadiness.isAppReady) {
-        return self.defaultTheme;
-    }
-
-    __block ThemeMode currentMode;
-    [self.databaseStorage readWithBlock:^(SDSAnyReadTransaction *transaction) {
-        BOOL hasDefinedMode = [Theme.keyValueStore hasValueForKey:ThemeKeyCurrentMode transaction:transaction];
-        if (!hasDefinedMode) {
-            // If the theme has not yet been defined, check if the user ever manually changed
-            // themes in a legacy app version. If so, preserve their selection. Otherwise,
-            // default to matching the system theme.
-            if (![Theme.keyValueStore hasValueForKey:ThemeKeyLegacyThemeEnabled transaction:transaction]) {
-                currentMode = ThemeMode_System;
-            } else {
-                BOOL isLegacyModeDark = [Theme.keyValueStore getBool:ThemeKeyLegacyThemeEnabled
-                                                        defaultValue:NO
-                                                         transaction:transaction];
-                currentMode = isLegacyModeDark ? ThemeMode_Dark : ThemeMode_Light;
-            }
-        } else {
-            currentMode = [Theme.keyValueStore getUInt:ThemeKeyCurrentMode
-                                          defaultValue:ThemeMode_System
-                                           transaction:transaction];
-        }
-    } file:__FILE__ function:__FUNCTION__ line:__LINE__];
-
-    self.cachedCurrentThemeNumber = @(currentMode);
-    return currentMode;
-}
-
-+ (void)setCurrentTheme:(ThemeMode)mode
-{
-    [self.shared setCurrentTheme:mode];
-}
-
-- (void)setCurrentTheme:(ThemeMode)mode
-{
-    OWSAssertIsOnMainThread();
-
-    NSNumber *previousMode = self.isDarkThemeEnabledNumber;
-
-    switch (mode) {
-        case ThemeMode_Light:
-            self.isDarkThemeEnabledNumber = @(NO);
-            break;
-        case ThemeMode_Dark:
-            self.isDarkThemeEnabledNumber = @(YES);
-            break;
-        case ThemeMode_System:
-            self.isDarkThemeEnabledNumber = @(self.isSystemDarkThemeEnabled);
-            break;
-    }
-
-    self.cachedCurrentThemeNumber = @(mode);
-    // It's safe to do an async write because all accesses check self.cachedCurrentThemeNumber first.
-    DatabaseStorageAsyncWrite(self.databaseStorage, ^(SDSAnyWriteTransaction *transaction) {
-        [Theme.keyValueStore setUInt:mode key:ThemeKeyCurrentMode transaction:transaction];
-    });
-
-    if (![previousMode isEqual:self.isDarkThemeEnabledNumber]) {
-        [self themeDidChange];
-    }
-}
-
-- (BOOL)isSystemDarkThemeEnabled
-{
-    if (@available(iOS 13, *)) {
-        return UITraitCollection.currentTraitCollection.userInterfaceStyle == UIUserInterfaceStyleDark;
-    } else {
-        return NO;
-    }
-}
-
-- (ThemeMode)defaultTheme
-{
-    if (@available(iOS 13, *)) {
-        return ThemeMode_System;
-    }
-
-    return ThemeMode_Light;
-}
-
-#pragma mark -
-
-+ (void)systemThemeChanged
-{
-    [self.shared systemThemeChanged];
-}
-
-- (void)systemThemeChanged
-{
-    // Do nothing, since we haven't setup the theme yet.
-    if (self.isDarkThemeEnabledNumber == nil) {
-        return;
-    }
-
-    // Theme can only be changed externally when in system mode.
-    if ([self getOrFetchCurrentTheme] != ThemeMode_System) {
-        return;
-    }
-
-    // We may get multiple updates for the same change.
-    BOOL isSystemDarkThemeEnabled = self.isSystemDarkThemeEnabled;
-    if (self.isDarkThemeEnabledNumber.boolValue == isSystemDarkThemeEnabled) {
-        return;
-    }
-
-    // The system theme has changed since the user was last in the app.
-    self.isDarkThemeEnabledNumber = @(isSystemDarkThemeEnabled);
-    [self themeDidChange];
-}
-
-- (void)themeDidChange
-{
-    [Theme setupSignalAppearance];
-
-    [UIView performWithoutAnimation:^{
-        [[NSNotificationCenter defaultCenter] postNotificationName:ThemeDidChangeNotification object:nil userInfo:nil];
-    }];
-}
-
-#pragma mark -
-
-+ (UIColor *)backgroundColor
-{
-    return (Theme.isDarkThemeEnabled ? Theme.darkThemeBackgroundColor : UIColor.ows_whiteColor);
-}
-
-+ (UIColor *)secondaryBackgroundColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_gray80Color : UIColor.ows_gray02Color);
-}
-
-+ (UIColor *)washColor
-{
-    return (Theme.isDarkThemeEnabled ? self.darkThemeWashColor : UIColor.ows_gray05Color);
-}
-
-+ (UIColor *)darkThemeWashColor
-{
-    return UIColor.ows_gray75Color;
-}
-
-+ (UIColor *)primaryTextColor
-{
-    return (Theme.isDarkThemeEnabled ? Theme.darkThemePrimaryColor : Theme.lightThemePrimaryColor);
-}
-
-+ (UIColor *)primaryIconColor
-{
-    return (Theme.isDarkThemeEnabled ? self.darkThemeNavbarIconColor : UIColor.ows_gray75Color);
-}
-
-+ (UIColor *)secondaryTextAndIconColor
-{
-    return (Theme.isDarkThemeEnabled ? Theme.darkThemeSecondaryTextAndIconColor : UIColor.ows_gray60Color);
-}
-
-+ (UIColor *)darkThemeSecondaryTextAndIconColor
-{
-    return UIColor.ows_gray25Color;
-}
-
-+ (UIColor *)ternaryTextColor
-{
-    return UIColor.ows_gray45Color;
-}
-
-+ (UIColor *)boldColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_whiteColor : UIColor.blackColor);
-}
-
-+ (UIColor *)middleGrayColor
-{
-    return [UIColor colorWithWhite:0.5f alpha:1.f];
-}
-
-+ (UIColor *)placeholderColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_gray45Color : UIColor.ows_gray45Color);
-}
-
-+ (UIColor *)hairlineColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_gray75Color : UIColor.ows_gray15Color);
-}
-
-+ (UIColor *)outlineColor
-{
-    return Theme.isDarkThemeEnabled ? UIColor.ows_gray75Color : UIColor.ows_gray15Color;
-}
-
-+ (UIColor *)backdropColor
-{
-    return UIColor.ows_blackAlpha40Color;
-}
-
-#pragma mark - Global App Colors
-
-+ (UIColor *)navbarBackgroundColor
-{
-    return (Theme.isDarkThemeEnabled ? self.darkThemeNavbarBackgroundColor : UIColor.ows_whiteColor);
-}
-
-+ (UIColor *)darkThemeNavbarBackgroundColor
-{
-    return UIColor.ows_blackColor;
-}
-
-+ (UIColor *)darkThemeNavbarIconColor
-{
-    return UIColor.ows_gray15Color;
-}
-
-+ (UIColor *)navbarTitleColor
-{
-    return Theme.primaryTextColor;
-}
-
-+ (UIColor *)toolbarBackgroundColor
-{
-    return self.navbarBackgroundColor;
-}
-
-+ (UIColor *)conversationInputBackgroundColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_gray75Color : UIColor.ows_gray05Color);
-}
-
-+ (UIColor *)attachmentKeyboardItemBackgroundColor
-{
-    return self.conversationInputBackgroundColor;
-}
-
-+ (UIColor *)attachmentKeyboardItemImageColor
-{
-    return (Theme.isDarkThemeEnabled ? [UIColor colorWithRGBHex:0xd8d8d9] : [UIColor colorWithRGBHex:0x636467]);
-}
-
-+ (UIColor *)cellSelectedColor
-{
-    return (Theme.isDarkThemeEnabled ? [UIColor colorWithWhite:0.2 alpha:1] : [UIColor colorWithWhite:0.92 alpha:1]);
-}
-
-+ (UIColor *)cellSeparatorColor
-{
-    return Theme.hairlineColor;
-}
-
-+ (UIColor *)cursorColor
-{
-    return Theme.isDarkThemeEnabled ? UIColor.ows_whiteColor : UIColor.ows_accentBlueColor;
-}
-
-+ (UIColor *)accentBlueColor
-{
-    return Theme.isDarkThemeEnabled ? UIColor.ows_accentBlueDarkColor : UIColor.ows_accentBlueColor;
-}
-
-+ (UIColor *)tableCell2BackgroundColor
-{
-    return Theme.isDarkThemeEnabled ? Theme.darkThemeTableCell2BackgroundColor : UIColor.ows_whiteColor;
-}
-
-+ (UIColor *)tableCell2PresentedBackgroundColor
-{
-    return Theme.isDarkThemeEnabled ? Theme.darkThemeTableCell2PresentedBackgroundColor : UIColor.ows_whiteColor;
-}
-
-+ (UIColor *)tableCell2SelectedBackgroundColor
-{
-    return Theme.isDarkThemeEnabled ? Theme.darkThemeTableCell2SelectedBackgroundColor : UIColor.ows_gray15Color;
-}
-
-+ (UIColor *)tableCell2SelectedBackgroundColor2
-{
-    return Theme.isDarkThemeEnabled ? Theme.darkThemeTableCell2SelectedBackgroundColor2 : UIColor.ows_gray15Color;
-}
-
-+ (UIColor *)tableCell2MultiSelectedBackgroundColor
-{
-    return Theme.isDarkThemeEnabled ? Theme.darkThemeTableCell2MultiSelectedBackgroundColor : UIColor.ows_gray05Color;
-}
-
-+ (UIColor *)tableCell2PresentedSelectedBackgroundColor
-{
-    return Theme.isDarkThemeEnabled ? Theme.darkThemeTableCell2PresentedSelectedBackgroundColor
-                                    : UIColor.ows_gray15Color;
-}
-
-+ (UIColor *)tableView2BackgroundColor
-{
-    return (Theme.isDarkThemeEnabled ? Theme.darkThemeTableView2BackgroundColor : UIColor.ows_gray10Color);
-}
-
-+ (UIColor *)tableView2PresentedBackgroundColor
-{
-    return (Theme.isDarkThemeEnabled ? Theme.darkThemeTableView2PresentedBackgroundColor : UIColor.ows_gray10Color);
-}
-
-+ (UIColor *)tableView2SeparatorColor
-{
-    return (Theme.isDarkThemeEnabled ? Theme.darkThemeTableView2SeparatorColor : UIColor.ows_gray20Color);
-}
-
-+ (UIColor *)tableView2PresentedSeparatorColor
-{
-    return (Theme.isDarkThemeEnabled ? Theme.darkThemeTableView2PresentedSeparatorColor : UIColor.ows_gray20Color);
-}
-
-+ (UIColor *)darkThemeTableCell2BackgroundColor
-{
-    return UIColor.ows_gray90Color;
-}
-
-+ (UIColor *)darkThemeTableCell2PresentedBackgroundColor
-{
-    return UIColor.ows_gray80Color;
-}
-
-+ (UIColor *)darkThemeTableCell2SelectedBackgroundColor
-{
-    return UIColor.ows_gray80Color;
-}
-
-+ (UIColor *)darkThemeTableCell2SelectedBackgroundColor2
-{
-    return UIColor.ows_gray65Color;
-}
-
-+ (UIColor *)darkThemeTableCell2MultiSelectedBackgroundColor
-{
-    return UIColor.ows_gray75Color;
-}
-
-+ (UIColor *)darkThemeTableCell2PresentedSelectedBackgroundColor
-{
-    return UIColor.ows_gray75Color;
-}
-
-+ (UIColor *)darkThemeTableView2BackgroundColor
-{
-    return UIColor.ows_blackColor;
-}
-
-+ (UIColor *)darkThemeTableView2PresentedBackgroundColor
-{
-    return UIColor.ows_gray90Color;
-}
-
-+ (UIColor *)darkThemeTableView2SeparatorColor
-{
-    return UIColor.ows_gray75Color;
-}
-
-+ (UIColor *)darkThemeTableView2PresentedSeparatorColor
-{
-    return UIColor.ows_gray65Color;
-}
-
-+ (UIColor *)darkThemeBackgroundColor
-{
-    return UIColor.ows_blackColor;
-}
-
-+ (UIColor *)darkThemePrimaryColor
-{
-    return UIColor.ows_gray02Color;
-}
-
-+ (UIColor *)lightThemePrimaryColor
-{
-    return UIColor.ows_gray90Color;
-}
-
-+ (UIColor *)galleryHighlightColor
-{
-    return [UIColor colorWithRGBHex:0x1f8fe8];
-}
-
-+ (UIColor *)conversationButtonBackgroundColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_gray80Color : UIColor.ows_gray02Color);
-}
-
-+ (UIColor *)conversationButtonTextColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_gray05Color : UIColor.ows_accentBlueColor);
-}
-
-
-+ (UIBlurEffect *)barBlurEffect
-{
-    return Theme.isDarkThemeEnabled ? self.darkThemeBarBlurEffect
-                                    : [UIBlurEffect effectWithStyle:UIBlurEffectStyleLight];
-}
-
-+ (UIBlurEffect *)darkThemeBarBlurEffect
-{
-    return [UIBlurEffect effectWithStyle:UIBlurEffectStyleDark];
-}
-
-+ (UIKeyboardAppearance)keyboardAppearance
-{
-    return Theme.isDarkThemeEnabled ? self.darkThemeKeyboardAppearance : UIKeyboardAppearanceDefault;
-}
-
-+ (UIColor *)keyboardBackgroundColor
-{
-    return Theme.isDarkThemeEnabled ? UIColor.ows_gray90Color : UIColor.ows_gray02Color;
-}
-
-+ (UIKeyboardAppearance)darkThemeKeyboardAppearance
-{
-    return UIKeyboardAppearanceDark;
-}
-
-#pragma mark - Search Bar
-
-+ (UIBarStyle)barStyle
-{
-    return Theme.isDarkThemeEnabled ? UIBarStyleBlack : UIBarStyleDefault;
-}
-
-+ (UIColor *)searchFieldBackgroundColor
-{
-    return Theme.washColor;
-}
-
-+ (UIColor *)searchFieldElevatedBackgroundColor
-{
-    return Theme.isDarkThemeEnabled ? UIColor.ows_gray75Color : UIColor.ows_gray12Color;
-}
-
-#pragma mark -
-
-+ (UIColor *)toastForegroundColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_whiteColor : UIColor.ows_whiteColor);
-}
-
-+ (UIColor *)toastBackgroundColor
-{
-    return (Theme.isDarkThemeEnabled ? UIColor.ows_gray75Color : UIColor.ows_gray60Color);
-}
-
-+ (UIColor *)scrollButtonBackgroundColor
-{
-    return Theme.isDarkThemeEnabled ? [UIColor colorWithWhite:0.25f alpha:1.f]
-                                    : [UIColor colorWithWhite:0.95f alpha:1.f];
-}
-
-@end
-
-NS_ASSUME_NONNULL_END
diff --git a/SignalUI/Appearance/Theme.swift b/SignalUI/Appearance/Theme.swift
new file mode 100644
index 00000000000..161f56037ee
--- /dev/null
+++ b/SignalUI/Appearance/Theme.swift
@@ -0,0 +1,470 @@
+//
+// Copyright 2023 Signal Messenger, LLC
+// SPDX-License-Identifier: AGPL-3.0-only
+//
+
+import SignalServiceKit
+
+public extension Notification.Name {
+    static let themeDidChange = Notification.Name("ThemeDidChangeNotification")
+}
+
+@objc
+public extension NSNotification {
+    static var ThemeDidChange: NSString { Notification.Name.themeDidChange.rawValue as NSString }
+}
+
+@objc
+final public class Theme: NSObject {
+
+    public enum Mode: UInt {
+        case system, light, dark
+    }
+
+    private static var shared = Theme()
+
+    private override init() {
+        super.init()
+
+        AppReadiness.runNowOrWhenAppDidBecomeReadySync {
+            // IOS-782: +[Theme shared] re-enterant initialization
+            // AppReadiness will invoke the block synchronously if the app is already ready.
+            // This doesn't work here, because we'll end up reenterantly calling +shared
+            // if the app is in dark mode and the first call to +[Theme shared] happens
+            // after the app is ready.
+            //
+            // It looks like that pattern is only hit in the share extension, but we're better off
+            // asyncing always to ensure the dependency chain is broken. We're okay waiting, since
+            // there's no guarantee that this block in synchronously executed anyway.
+            DispatchQueue.main.async {
+                self.notifyIfThemeModeIsNotDefault()
+            }
+        }
+    }
+
+    private static var keyValueStore: SDSKeyValueStore {
+        return SDSKeyValueStore(collection: "ThemeCollection")
+    }
+
+    private struct KVSKeys {
+        static var currentMode = "ThemeKeyCurrentMode"
+        static var legacyThemeEnabled = "ThemeKeyThemeEnabled"
+    }
+
+    public class func setupSignalAppearance() {
+        UINavigationBar.appearance().barTintColor = Theme.navbarBackgroundColor
+        UINavigationBar.appearance().tintColor = Theme.primaryIconColor
+        UIToolbar.appearance().barTintColor = Theme.navbarBackgroundColor
+        UIToolbar.appearance().tintColor = Theme.primaryIconColor
+
+        // We do _not_ specify BarButton.appearance().tintColor because it is sufficient to specify
+        // UINavigationBar.appearance().tintColor. Furthermore, specifying the BarButtonItem's
+        // appearance makes it more difficult to override the navbar theme, e.g. how we _always_
+        // use dark theme in the media send flow and gallery views. If we were specifying
+        // barButton.appearance().tintColor we would then have to manually override each
+        // BarButtonItem's tint, rather than just the navbars.
+        //
+        // UIBarButtonItem.appearance.tintColor = Theme.primaryIconColor;
+
+        // Using UIText{View,Field}.appearance().keyboardAppearance crashes due to a bug in UIKit,
+        // so we don't do it.
+
+        UITableViewCell.appearance().tintColor = Theme.primaryIconColor
+        UIToolbar.appearance().tintColor = .ows_accentBlue
+
+        // If we set NSShadowAttributeName, the NSForegroundColorAttributeName value is ignored.
+        UINavigationBar.appearance().titleTextAttributes = [
+            NSAttributedString.Key.foregroundColor: Theme.navbarTitleColor
+        ]
+
+        let cursorColor = isDarkThemeEnabled ? UIColor.white : UIColor.ows_accentBlue
+        UITextView.appearance(whenContainedInInstancesOf: [OWSNavigationController.self]).tintColor = cursorColor
+        UITextField.appearance(whenContainedInInstancesOf: [OWSNavigationController.self]).tintColor = cursorColor
+    }
+
+    // MARK: - Theme Mode
+
+    @objc
+    public static var isDarkThemeEnabled: Bool { shared.isDarkThemeEnabled }
+
+    public class func getOrFetchCurrentMode() -> Mode {
+        return shared.getOrFetchCurrentMode()
+    }
+
+    public class func setCurrentMode(_ mode: Mode) {
+        shared.setCurrentMode(mode)
+    }
+
+    private var cachedIsDarkThemeEnabled: Bool?
+    private var cachedCurrentMode: Mode?
+
+    private var isDarkThemeEnabled: Bool {
+#if TESTABLE_BUILD
+        if let isDarkThemeEnabledForTests {
+            return isDarkThemeEnabledForTests
+        }
+#endif
+
+        // Don't cache this value until it reflects the data store.
+        guard AppReadiness.isAppReady else {
+            return isSystemDarkThemeEnabled()
+        }
+
+        // Always respect the system theme in extensions.
+        guard CurrentAppContext().isMainApp else {
+            return isSystemDarkThemeEnabled()
+        }
+
+        if let cachedIsDarkThemeEnabled {
+            return cachedIsDarkThemeEnabled
+        }
+
+        let isDarkThemeEnabled: Bool = {
+            switch getOrFetchCurrentMode() {
+            case .system: return isSystemDarkThemeEnabled()
+            case .dark: return true
+            case .light: return false
+            }
+        }()
+        cachedIsDarkThemeEnabled = isDarkThemeEnabled
+
+        return isDarkThemeEnabled
+    }
+
+    private func isSystemDarkThemeEnabled() -> Bool {
+        guard #available(iOS 13, *) else {
+            return false
+        }
+        return UITraitCollection.current.userInterfaceStyle == .dark
+    }
+
+    private func getOrFetchCurrentMode() -> Mode {
+        if let cachedCurrentMode {
+            return cachedCurrentMode
+        }
+
+        guard AppReadiness.isAppReady else {
+            return defaultMode
+        }
+
+        var currentMode: Mode = .system
+        databaseStorage.read { transaction in
+            let hasDefinedMode = Theme.keyValueStore.hasValue(forKey: KVSKeys.currentMode, transaction: transaction)
+            if hasDefinedMode {
+                let rawMode = Theme.keyValueStore.getUInt(
+                    KVSKeys.currentMode,
+                    defaultValue: Theme.Mode.system.rawValue,
+                    transaction: transaction
+                )
+                if let definedMode = Mode(rawValue: rawMode) {
+                    currentMode = definedMode
+                }
+            } else {
+                // If the theme has not yet been defined, check if the user ever manually changed
+                // themes in a legacy app version. If so, preserve their selection. Otherwise,
+                // default to matching the system theme.
+                if Theme.keyValueStore.hasValue(forKey: KVSKeys.legacyThemeEnabled, transaction: transaction) {
+                    let isLegacyModeDark = Theme.keyValueStore.getBool(
+                        KVSKeys.legacyThemeEnabled,
+                        defaultValue: false,
+                        transaction: transaction
+                    )
+                    currentMode = isLegacyModeDark ? .dark : .light
+                }
+            }
+        }
+
+        cachedCurrentMode = currentMode
+
+        return currentMode
+    }
+
+    private func setCurrentMode(_ mode: Mode) {
+        AssertIsOnMainThread()
+
+        let wasDarkThemeEnabled = cachedIsDarkThemeEnabled
+
+        switch mode {
+        case .light:
+            cachedIsDarkThemeEnabled = false
+        case .dark:
+            cachedIsDarkThemeEnabled = true
+        case .system:
+            cachedIsDarkThemeEnabled = isSystemDarkThemeEnabled()
+        }
+
+        cachedCurrentMode = mode
+
+        // It's safe to do an async write because all accesses check self.cachedCurrentThemeNumber first.
+        databaseStorage.asyncWrite { transaction in
+            Theme.keyValueStore.setUInt(mode.rawValue, key: KVSKeys.currentMode, transaction: transaction)
+        }
+
+        if wasDarkThemeEnabled != cachedIsDarkThemeEnabled {
+            themeDidChange()
+        }
+    }
+
+    private var defaultMode: Mode {
+        guard #available(iOS 13, *) else {
+            return .light
+        }
+        return .system
+    }
+
+    private func notifyIfThemeModeIsNotDefault() {
+        if isDarkThemeEnabled || defaultMode != getOrFetchCurrentMode() {
+            themeDidChange()
+        }
+    }
+
+    // MARK: -
+
+    class func systemThemeChanged() {
+        shared.systemThemeChanged()
+    }
+
+    private func systemThemeChanged() {
+        // Do nothing, since we haven't setup the theme yet.
+        guard cachedIsDarkThemeEnabled != nil else { return }
+
+        // Theme can only be changed externally when in system mode.
+        guard getOrFetchCurrentMode() == .system else { return }
+
+        // We may get multiple updates for the same change.
+        let isSystemDarkThemeEnabled = isSystemDarkThemeEnabled()
+        guard cachedIsDarkThemeEnabled != isSystemDarkThemeEnabled else { return }
+
+        cachedIsDarkThemeEnabled = isSystemDarkThemeEnabled
+        themeDidChange()
+    }
+
+    private func themeDidChange() {
+        Theme.setupSignalAppearance()
+
+        UIView.performWithoutAnimation {
+            NotificationCenter.default.post(name: Notification.Name.themeDidChange, object: nil)
+        }
+    }
+
+    // MARK: - UI Colors
+
+    @objc
+    public class var backgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeBackgroundColor : .white
+    }
+
+    public class var secondaryBackgroundColor: UIColor {
+        isDarkThemeEnabled ? .ows_gray80 : .ows_gray02
+    }
+
+    @objc
+    public class var washColor: UIColor {
+        isDarkThemeEnabled ? darkThemeWashColor : .ows_gray05
+    }
+
+    @objc
+    public class var primaryTextColor: UIColor {
+        isDarkThemeEnabled ? darkThemePrimaryColor : lightThemePrimaryColor
+    }
+
+    public class var primaryIconColor: UIColor {
+        isDarkThemeEnabled ? darkThemeNavbarIconColor : .ows_gray75
+    }
+
+    @objc
+    public class var secondaryTextAndIconColor: UIColor {
+        isDarkThemeEnabled ? darkThemeSecondaryTextAndIconColor : .ows_gray60
+    }
+
+    public class var ternaryTextColor: UIColor { .ows_gray45 }
+
+    public class var placeholderColor: UIColor { .ows_gray45 }
+
+    public class var hairlineColor: UIColor {
+        isDarkThemeEnabled ? .ows_gray75 : .ows_gray15
+    }
+
+    public class var outlineColor: UIColor {
+        isDarkThemeEnabled ? .ows_gray75 : .ows_gray15
+    }
+
+    public class var backdropColor: UIColor { .ows_blackAlpha40 }
+
+    public class var navbarBackgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeNavbarBackgroundColor : .white
+    }
+
+    public class var navbarTitleColor: UIColor { primaryTextColor }
+
+    public class var toolbarBackgroundColor: UIColor { navbarBackgroundColor }
+
+    // For accessibility:
+    //
+    // * Flat areas (e.g. button backgrounds) should use UIColor.ows_accentBlue.
+    // * Fine detail (e.g., text, non-filled icons) should use Theme.accentBlueColor.
+    //   It is brighter in dark mode, improving legibility.
+    @objc
+    public class var accentBlueColor: UIColor {
+        isDarkThemeEnabled ? .ows_accentBlueDark : .ows_accentBlue
+    }
+
+    public class var conversationButtonBackgroundColor: UIColor {
+        isDarkThemeEnabled ? .ows_gray80 : .ows_gray02
+    }
+
+    public class var conversationButtonTextColor: UIColor {
+        isDarkThemeEnabled ? .ows_gray05 : .ows_accentBlue
+    }
+
+    @objc
+    public class var launchScreenBackgroundColor: UIColor {
+        // We only adapt for dark theme on iOS 13+, because only iOS 13 supports
+        // handling dark / light appearance in the launch screen storyboard.
+        guard #available(iOS 13, *) else { return .ows_signalBlue }
+        return isDarkThemeEnabled ? .ows_signalBlueDark : .ows_signalBlue
+    }
+
+    // MARK: - Table View
+
+    public class var cellSelectedColor: UIColor {
+        isDarkThemeEnabled ? UIColor(white: 0.2, alpha: 1) : UIColor(white: 0.92, alpha: 1)
+    }
+
+    @objc
+    public class var cellSeparatorColor: UIColor { hairlineColor }
+
+    public class var tableCell2BackgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableCell2BackgroundColor : .white
+    }
+
+    public class var tableCell2PresentedBackgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableCell2PresentedBackgroundColor : .white
+    }
+
+    @objc
+    public class var tableCell2SelectedBackgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableCell2SelectedBackgroundColor : .ows_gray15
+    }
+
+    public class var tableCell2SelectedBackgroundColor2: UIColor {
+        isDarkThemeEnabled ? darkThemeTableCell2SelectedBackgroundColor2 : .ows_gray15
+    }
+
+    @objc
+    public class var tableCell2MultiSelectedBackgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableCell2MultiSelectedBackgroundColor : .ows_gray05
+    }
+
+    public class var tableCell2PresentedSelectedBackgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableCell2PresentedSelectedBackgroundColor : .ows_gray15
+    }
+
+    public class var tableView2BackgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableView2BackgroundColor : .ows_gray10
+    }
+
+    public class var tableView2PresentedBackgroundColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableView2PresentedBackgroundColor : .ows_gray10
+    }
+
+    public class var tableView2SeparatorColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableView2SeparatorColor : .ows_gray20
+    }
+
+    public class var tableView2PresentedSeparatorColor: UIColor {
+        isDarkThemeEnabled ? darkThemeTableView2PresentedSeparatorColor : .ows_gray20
+    }
+
+    // MARK: - Light Theme Colors
+
+    @objc
+    public class var lightThemePrimaryColor: UIColor { .ows_gray90 }
+
+    // MARK: - Dark Theme Colors
+
+    public class var darkThemeBackgroundColor: UIColor { .black }
+
+    public class var darkThemePrimaryColor: UIColor { .ows_gray02 }
+
+    @objc
+    public class var darkThemeSecondaryTextAndIconColor: UIColor { .ows_gray25 }
+
+    public class var darkThemeWashColor: UIColor { .ows_gray75 }
+
+    public class var darkThemeNavbarBackgroundColor: UIColor { .black }
+
+    public class var darkThemeNavbarIconColor: UIColor { .ows_gray15 }
+
+    public class var darkThemeTableCell2BackgroundColor: UIColor { .ows_gray90 }
+
+    public class var darkThemeTableCell2PresentedBackgroundColor: UIColor { .ows_gray80 }
+
+    public class var darkThemeTableCell2SelectedBackgroundColor: UIColor { .ows_gray80 }
+
+    public class var darkThemeTableCell2SelectedBackgroundColor2: UIColor { .ows_gray65 }
+
+    public class var darkThemeTableCell2MultiSelectedBackgroundColor: UIColor { .ows_gray75 }
+
+    public class var darkThemeTableCell2PresentedSelectedBackgroundColor: UIColor { .ows_gray75 }
+
+    public class var darkThemeTableView2BackgroundColor: UIColor { .black }
+
+    public class var darkThemeTableView2PresentedBackgroundColor: UIColor { .ows_gray90 }
+
+    public class var darkThemeTableView2SeparatorColor: UIColor { .ows_gray75 }
+
+    public class var darkThemeTableView2PresentedSeparatorColor: UIColor { .ows_gray65 }
+
+    // MARK: - Blur Effect
+
+    public class var barBlurEffect: UIBlurEffect {
+        isDarkThemeEnabled ? darkThemeBarBlurEffect : UIBlurEffect(style: .light)
+    }
+
+    public class var darkThemeBarBlurEffect: UIBlurEffect { UIBlurEffect(style: .dark) }
+
+    // MARK: - Keyboard
+
+    @objc
+    public class var keyboardAppearance: UIKeyboardAppearance {
+        isDarkThemeEnabled ? darkThemeKeyboardAppearance : .default
+    }
+
+    public class var darkThemeKeyboardAppearance: UIKeyboardAppearance { .dark }
+
+    public class var keyboardBackgroundColor: UIColor {
+        isDarkThemeEnabled ? .ows_gray90 : .ows_gray02
+    }
+
+    public class var attachmentKeyboardItemBackgroundColor: UIColor {
+        isDarkThemeEnabled ? .ows_gray75 : .ows_gray05
+    }
+
+    public class var attachmentKeyboardItemImageColor: UIColor {
+        isDarkThemeEnabled ? UIColor(rgbHex: 0xd8d8d9) : UIColor(rgbHex: 0x636467)
+    }
+
+    // MARK: - Search Bar
+
+    @objc
+    public class var barStyle: UIBarStyle {
+        isDarkThemeEnabled ? .black : .default
+    }
+
+    @objc
+    public class var searchFieldBackgroundColor: UIColor { washColor }
+
+    @objc
+    public class var searchFieldElevatedBackgroundColor: UIColor {
+        isDarkThemeEnabled ? .ows_gray75 : .ows_gray12
+    }
+
+#if TESTABLE_BUILD
+    private var isDarkThemeEnabledForTests: Bool?
+
+    public class func setIsDarkThemeEnabledForTests(_ enabled: Bool) {
+        shared.isDarkThemeEnabledForTests = enabled
+    }
+#endif
+}
diff --git a/SignalUI/Categories/UIViewController+OWS.m b/SignalUI/Categories/UIViewController+OWS.m
index ae8b8446972..5b88b5f264f 100644
--- a/SignalUI/Categories/UIViewController+OWS.m
+++ b/SignalUI/Categories/UIViewController+OWS.m
@@ -3,7 +3,6 @@
 // SPDX-License-Identifier: AGPL-3.0-only
 //
 
-#import "Theme.h"
 #import "UIView+SignalUI.h"
 #import "UIViewController+OWS.h"
 #import <SignalServiceKit/AppContext.h>
diff --git a/SignalUI/SignalUI.h b/SignalUI/SignalUI.h
index 0ff6bb9f0f3..574dd71148f 100644
--- a/SignalUI/SignalUI.h
+++ b/SignalUI/SignalUI.h
@@ -24,7 +24,6 @@ FOUNDATION_EXPORT const unsigned char SignalUIVersionString[];
 #import <SignalUI/OWSSearchBar.h>
 #import <SignalUI/OWSTableViewController.h>
 #import <SignalUI/RecipientPickerViewController.h>
-#import <SignalUI/Theme.h>
 #import <SignalUI/UIView+SignalUI.h>
 #import <SignalUI/UIViewController+OWS.h>
 #import <SignalUI/UIViewController+Permissions.h>
diff --git a/SignalUI/ViewControllers/ApprovalFooterView.swift b/SignalUI/ViewControllers/ApprovalFooterView.swift
index 17163782a57..8fe7cc19c46 100644
--- a/SignalUI/ViewControllers/ApprovalFooterView.swift
+++ b/SignalUI/ViewControllers/ApprovalFooterView.swift
@@ -103,7 +103,7 @@ public class ApprovalFooterView: UIView {
         textfieldBackgroundView.layer.cornerRadius = 10
         self.textfieldBackgroundView = textfieldBackgroundView
 
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
         applyTheme()
     }
 
diff --git a/SignalUI/ViewControllers/ConversationPicker/ConversationPicker.swift b/SignalUI/ViewControllers/ConversationPicker/ConversationPicker.swift
index 3e333810b2d..fe7af044c22 100644
--- a/SignalUI/ViewControllers/ConversationPicker/ConversationPicker.swift
+++ b/SignalUI/ViewControllers/ConversationPicker/ConversationPicker.swift
@@ -1353,7 +1353,7 @@ internal class ConversationPickerCell: ContactTableViewCell {
         }
 
         let timerView = DisappearingTimerConfigurationView(durationSeconds: disappearingMessagesConfig.durationSeconds)
-        timerView.tintColor = Theme.middleGrayColor
+        timerView.tintColor = .ows_middleGray
         let timerSize = CGSize(square: 44)
 
         let stackView = ManualStackView(name: "stackView")
diff --git a/SignalUI/ViewControllers/OWSNavigationController.swift b/SignalUI/ViewControllers/OWSNavigationController.swift
index b61d64ab3be..b0bf61659e2 100644
--- a/SignalUI/ViewControllers/OWSNavigationController.swift
+++ b/SignalUI/ViewControllers/OWSNavigationController.swift
@@ -84,7 +84,7 @@ open class OWSNavigationController: OWSNavigationControllerBase {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(themeDidChange),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil
         )
     }
diff --git a/SignalUI/ViewControllers/OWSTableViewController.m b/SignalUI/ViewControllers/OWSTableViewController.m
index 2200e6d0e20..1b8a8e1f617 100644
--- a/SignalUI/ViewControllers/OWSTableViewController.m
+++ b/SignalUI/ViewControllers/OWSTableViewController.m
@@ -4,7 +4,6 @@
 //
 
 #import "OWSTableViewController.h"
-#import "Theme.h"
 #import "UIView+SignalUI.h"
 #import <SignalUI/SignalUI-Swift.h>
 
@@ -420,7 +419,7 @@ + (OWSTableItem *)softCenterLabelItemWithText:(NSString *)text
         textLabel.font = OWSTableItem.primaryLabelFont;
         // Soft color.
         // TODO: Theme, review with design.
-        textLabel.textColor = Theme.middleGrayColor;
+        textLabel.textColor = UIColor.ows_middleGrayColor;
         // Centered.
         textLabel.textAlignment = NSTextAlignmentCenter;
         [cell.contentView addSubview:textLabel];
diff --git a/SignalUI/ViewControllers/OWSViewController.swift b/SignalUI/ViewControllers/OWSViewController.swift
index 925a05c7e9a..d735beb022d 100644
--- a/SignalUI/ViewControllers/OWSViewController.swift
+++ b/SignalUI/ViewControllers/OWSViewController.swift
@@ -150,7 +150,7 @@ open class OWSViewController: UIViewController {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(themeDidChange),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil
         )
     }
diff --git a/SignalUI/ViewControllers/OWSViewControllerObjc.m b/SignalUI/ViewControllers/OWSViewControllerObjc.m
index f547374562f..ebae5765aa6 100644
--- a/SignalUI/ViewControllers/OWSViewControllerObjc.m
+++ b/SignalUI/ViewControllers/OWSViewControllerObjc.m
@@ -4,7 +4,6 @@
 //
 
 #import "OWSViewControllerObjc.h"
-#import "Theme.h"
 #import "UIView+SignalUI.h"
 #import <SignalUI/SignalUI-Swift.h>
 
@@ -107,7 +106,7 @@ - (void)viewDidLoad
 
     [[NSNotificationCenter defaultCenter] addObserver:self
                                              selector:@selector(themeDidChange)
-                                                 name:ThemeDidChangeNotification
+                                                 name:NSNotification.ThemeDidChange
                                                object:nil];
 }
 
diff --git a/SignalUI/ViewControllers/OWSWindow.swift b/SignalUI/ViewControllers/OWSWindow.swift
index ef7da0bb7b2..d828b0a77dd 100644
--- a/SignalUI/ViewControllers/OWSWindow.swift
+++ b/SignalUI/ViewControllers/OWSWindow.swift
@@ -3,7 +3,7 @@
 // SPDX-License-Identifier: AGPL-3.0-only
 //
 
-import Foundation
+import UIKit
 
 @objc
 public class OWSWindow: UIWindow {
@@ -13,7 +13,7 @@ public class OWSWindow: UIWindow {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(themeDidChange),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil
         )
 
@@ -39,7 +39,7 @@ public class OWSWindow: UIWindow {
         guard #available(iOS 13, *) else { return }
 
         // Ensure system UI elements use the appropriate styling for the selected theme.
-        switch Theme.getOrFetchCurrentTheme() {
+        switch Theme.getOrFetchCurrentMode() {
         case .light:
             overrideUserInterfaceStyle = .light
         case .dark:
diff --git a/SignalUI/ViewControllers/ScreenLockViewController.m b/SignalUI/ViewControllers/ScreenLockViewController.m
new file mode 100644
index 00000000000..453d2106d67
--- /dev/null
+++ b/SignalUI/ViewControllers/ScreenLockViewController.m
@@ -0,0 +1,153 @@
+//
+// Copyright 2018 Signal Messenger, LLC
+// SPDX-License-Identifier: AGPL-3.0-only
+//
+
+#import "ScreenLockViewController.h"
+#import "UIView+SignalUI.h"
+#import <SignalUI/SignalUI-Swift.h>
+
+NSString *NSStringForScreenLockUIState(ScreenLockUIState value)
+{
+    switch (value) {
+        case ScreenLockUIStateNone:
+            return @"ScreenLockUIStateNone";
+        case ScreenLockUIStateScreenProtection:
+            return @"ScreenLockUIStateScreenProtection";
+        case ScreenLockUIStateScreenLock:
+            return @"ScreenLockUIStateScreenLock";
+    }
+}
+
+@interface ScreenLockViewController ()
+
+@property (nonatomic) UIView *screenBlockingImageView;
+@property (nonatomic) UIView *screenBlockingButton;
+@property (nonatomic) NSArray<NSLayoutConstraint *> *screenBlockingConstraints;
+@property (nonatomic) NSString *screenBlockingSignature;
+
+@end
+
+#pragma mark -
+
+@implementation ScreenLockViewController
+
+- (void)loadView
+{
+    [super loadView];
+
+    self.view.backgroundColor = Theme.launchScreenBackgroundColor;
+
+    UIView *edgesView = [UIView containerView];
+    [self.view addSubview:edgesView];
+    [edgesView autoPinEdgeToSuperviewEdge:ALEdgeTop];
+    [edgesView autoPinEdgeToSuperviewEdge:ALEdgeBottom];
+    [edgesView autoPinWidthToSuperview];
+
+    UIImage *image = [UIImage imageNamed:@"signal-logo-128-launch-screen"];
+    UIImageView *imageView = [UIImageView new];
+    imageView.image = image;
+    [edgesView addSubview:imageView];
+    [imageView autoHCenterInSuperview];
+    [imageView autoSetDimensionsToSize:CGSizeMake(128, 128)];
+
+    const CGFloat kButtonHeight = 40.f;
+    OWSFlatButton *button =
+        [OWSFlatButton buttonWithTitle:OWSLocalizedString(@"SCREEN_LOCK_UNLOCK_SIGNAL",
+                                           @"Label for button on lock screen that lets users unlock Signal.")
+                                  font:[OWSFlatButton fontForHeight:kButtonHeight]
+                            titleColor:Theme.accentBlueColor
+                       backgroundColor:[UIColor whiteColor]
+                                target:self
+                              selector:@selector(showUnlockUI)];
+    [edgesView addSubview:button];
+
+    [button autoSetDimension:ALDimensionHeight toSize:kButtonHeight];
+    [button autoPinLeadingToSuperviewMarginWithInset:50.f];
+    [button autoPinTrailingToSuperviewMarginWithInset:50.f];
+    const CGFloat kVMargin = 65.f;
+    [button autoPinBottomToSuperviewMarginWithInset:kVMargin];
+
+    self.screenBlockingImageView = imageView;
+    self.screenBlockingButton = button;
+
+    [self updateUIWithState:ScreenLockUIStateScreenProtection isLogoAtTop:NO animated:NO];
+
+    [NSNotificationCenter.defaultCenter addObserver:self
+                                           selector:@selector(themeDidChange)
+                                               name:NSNotification.ThemeDidChange
+                                             object:nil];
+}
+
+- (void)themeDidChange
+{
+    self.view.backgroundColor = Theme.launchScreenBackgroundColor;
+}
+
+// The "screen blocking" window has three possible states:
+//
+// * "Just a logo".  Used when app is launching and in app switcher.  Must match the "Launch Screen"
+//    storyboard pixel-for-pixel.
+// * "Screen Lock, local auth UI presented". Move the Signal logo so that it is visible.
+// * "Screen Lock, local auth UI not presented". Move the Signal logo so that it is visible,
+//    show "unlock" button.
+- (void)updateUIWithState:(ScreenLockUIState)uiState isLogoAtTop:(BOOL)isLogoAtTop animated:(BOOL)animated
+{
+    OWSAssertIsOnMainThread();
+
+    if (!self.isViewLoaded) {
+        return;
+    }
+
+    BOOL shouldShowBlockWindow = uiState != ScreenLockUIStateNone;
+    BOOL shouldHaveScreenLock = uiState == ScreenLockUIStateScreenLock;
+
+    self.screenBlockingImageView.hidden = !shouldShowBlockWindow;
+
+    NSString *signature = [NSString stringWithFormat:@"%d %d", shouldHaveScreenLock, isLogoAtTop];
+    if ([NSObject isNullableObject:self.screenBlockingSignature equalTo:signature]) {
+        // Skip redundant work to avoid interfering with ongoing animations.
+        return;
+    }
+
+    [NSLayoutConstraint deactivateConstraints:self.screenBlockingConstraints];
+
+    NSMutableArray<NSLayoutConstraint *> *screenBlockingConstraints = [NSMutableArray new];
+
+    self.screenBlockingButton.hidden = !shouldHaveScreenLock;
+
+    if (isLogoAtTop) {
+        const CGFloat kVMargin = 60.f;
+        [screenBlockingConstraints addObject:[self.screenBlockingImageView autoPinEdge:ALEdgeTop
+                                                                                toEdge:ALEdgeTop
+                                                                                ofView:self.view
+                                                                            withOffset:kVMargin]];
+    } else {
+        [screenBlockingConstraints addObject:[self.screenBlockingImageView autoVCenterInSuperview]];
+    }
+
+    self.screenBlockingConstraints = screenBlockingConstraints;
+    self.screenBlockingSignature = signature;
+
+    if (animated) {
+        [UIView animateWithDuration:0.35f animations:^{ [self.view layoutIfNeeded]; }];
+    } else {
+        [self.view layoutIfNeeded];
+    }
+}
+
+- (void)showUnlockUI
+{
+    OWSAssertIsOnMainThread();
+
+    [self.delegate unlockButtonWasTapped];
+}
+
+#pragma mark - Orientation
+
+- (UIInterfaceOrientationMask)supportedInterfaceOrientations
+{
+    return UIDevice.currentDevice.defaultSupportedOrientations;
+}
+
+@end
diff --git a/SignalUI/ViewControllers/ScreenLockViewController.swift b/SignalUI/ViewControllers/ScreenLockViewController.swift
index de340e1bd25..36f0098dbbd 100644
--- a/SignalUI/ViewControllers/ScreenLockViewController.swift
+++ b/SignalUI/ViewControllers/ScreenLockViewController.swift
@@ -52,7 +52,7 @@ open class ScreenLockViewController: UIViewController {
     open override func loadView() {
         super.loadView()
 
-        view.backgroundColor = Theme.launchScreenBackground
+        view.backgroundColor = Theme.launchScreenBackgroundColor
 
         view.addSubview(imageViewLogo)
         imageViewLogo.autoHCenterInSuperview()
@@ -65,7 +65,7 @@ open class ScreenLockViewController: UIViewController {
 
         updateUIWithState(.screenProtection, isLogoAtTop: false, animated: false)
 
-        NotificationCenter.default.addObserver(self, selector: #selector(themeDidChange), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(themeDidChange), name: .themeDidChange, object: nil)
     }
 
     // The "screen blocking" window has three possible states:
@@ -123,7 +123,7 @@ open class ScreenLockViewController: UIViewController {
 
     @objc
     private func themeDidChange() {
-        view.backgroundColor = Theme.launchScreenBackground
+        view.backgroundColor = Theme.launchScreenBackgroundColor
     }
 
     @objc
diff --git a/SignalUI/Views/ConversationAvatarView.swift b/SignalUI/Views/ConversationAvatarView.swift
index 72f1cf59f18..5d72e33bea5 100644
--- a/SignalUI/Views/ConversationAvatarView.swift
+++ b/SignalUI/Views/ConversationAvatarView.swift
@@ -549,7 +549,7 @@ public class ConversationAvatarView: UIView, CVView, PrimaryImageView {
         NotificationCenter.default.removeObserver(self)
         NotificationCenter.default.addObserver(self,
                                                selector: #selector(themeDidChange),
-                                               name: .ThemeDidChange,
+                                               name: .themeDidChange,
                                                object: nil)
 
         guard let dataSource = configuration.dataSource else { return }
diff --git a/SignalUI/Views/GroupTableViewCell.swift b/SignalUI/Views/GroupTableViewCell.swift
index d9d6c81e6a3..c829dff8342 100644
--- a/SignalUI/Views/GroupTableViewCell.swift
+++ b/SignalUI/Views/GroupTableViewCell.swift
@@ -42,7 +42,7 @@ public class GroupTableViewCell: UITableViewCell {
 
         // Accessory Label
         accessoryLabel.font = .semiboldFont(ofSize: 13)
-        accessoryLabel.textColor = Theme.middleGrayColor
+        accessoryLabel.textColor = .ows_middleGray
         accessoryLabel.textAlignment = .right
         accessoryLabel.isHidden = true
     }
diff --git a/SignalUI/Views/Mentions/MentionPicker.swift b/SignalUI/Views/Mentions/MentionPicker.swift
index ff8fd4ff9c4..d1294087845 100644
--- a/SignalUI/Views/Mentions/MentionPicker.swift
+++ b/SignalUI/Views/Mentions/MentionPicker.swift
@@ -83,7 +83,7 @@ class MentionPicker: UIView {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(applyTheme),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil
         )
 
diff --git a/SignalUI/Views/OWSSearchBar.m b/SignalUI/Views/OWSSearchBar.m
index a7c62b64486..fe3536276dc 100644
--- a/SignalUI/Views/OWSSearchBar.m
+++ b/SignalUI/Views/OWSSearchBar.m
@@ -4,7 +4,6 @@
 //
 
 #import "OWSSearchBar.h"
-#import "Theme.h"
 #import "UIView+SignalUI.h"
 #import <SignalUI/SignalUI-Swift.h>
 
@@ -55,7 +54,7 @@ - (void)ows_configure
 
     [[NSNotificationCenter defaultCenter] addObserver:self
                                              selector:@selector(themeDidChange:)
-                                                 name:ThemeDidChangeNotification
+                                                 name:NSNotification.ThemeDidChange
                                                object:nil];
 }
 
diff --git a/SignalUI/Views/ReminderView.swift b/SignalUI/Views/ReminderView.swift
index f6e70fe74f8..02431ff95e6 100644
--- a/SignalUI/Views/ReminderView.swift
+++ b/SignalUI/Views/ReminderView.swift
@@ -46,7 +46,7 @@ open class ReminderView: UIStackView {
         NotificationCenter.default.addObserver(
             self,
             selector: #selector(render),
-            name: .ThemeDidChange,
+            name: .themeDidChange,
             object: nil
         )
 
diff --git a/SignalUI/Views/TextFieldWithPlaceholder.swift b/SignalUI/Views/TextFieldWithPlaceholder.swift
index 3474031384e..d0ed5e414ce 100644
--- a/SignalUI/Views/TextFieldWithPlaceholder.swift
+++ b/SignalUI/Views/TextFieldWithPlaceholder.swift
@@ -92,7 +92,7 @@ public class TextFieldWithPlaceholder: UIView {
 
         textfield.addTarget(self, action: #selector(textFieldDidChange), for: .editingChanged)
 
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
 
         updatePlaceholderVisibility()
     }
diff --git a/SignalUI/Views/TextViewWithPlaceholder.swift b/SignalUI/Views/TextViewWithPlaceholder.swift
index b7b17627fa1..667e30a73a9 100644
--- a/SignalUI/Views/TextViewWithPlaceholder.swift
+++ b/SignalUI/Views/TextViewWithPlaceholder.swift
@@ -129,7 +129,7 @@ public class TextViewWithPlaceholder: UIView {
             subview.setCompressionResistanceHigh()
         }
 
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
     }
 
     required init?(coder: NSCoder) {
diff --git a/SignalUI/Views/Toast.swift b/SignalUI/Views/Toast.swift
index 932b0ab6ecd..1c197c2d057 100644
--- a/SignalUI/Views/Toast.swift
+++ b/SignalUI/Views/Toast.swift
@@ -158,7 +158,7 @@ class ToastView: UIView {
         let swipeGesture = UISwipeGestureRecognizer(target: self, action: #selector(didSwipe(gesture:)))
         self.addGestureRecognizer(swipeGesture)
 
-        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .ThemeDidChange, object: nil)
+        NotificationCenter.default.addObserver(self, selector: #selector(applyTheme), name: .themeDidChange, object: nil)
         applyTheme()
 
     }
