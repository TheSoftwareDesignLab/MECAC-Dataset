diff --git a/Signal/Registration/UserInterface/RegistrationPhoneNumberDiscoverabilityViewController.swift b/Signal/Registration/UserInterface/RegistrationPhoneNumberDiscoverabilityViewController.swift
index 4fabdd0a57..6eee555c9b 100644
--- a/Signal/Registration/UserInterface/RegistrationPhoneNumberDiscoverabilityViewController.swift
+++ b/Signal/Registration/UserInterface/RegistrationPhoneNumberDiscoverabilityViewController.swift
@@ -17,20 +17,6 @@ public struct RegistrationPhoneNumberDiscoverabilityState: Equatable {
 }
 
 class RegistrationPhoneNumberDiscoverabilityViewController: OWSViewController {
-
-    private enum Constants {
-        static let continueButtonInsets: UIEdgeInsets = .init(
-                 top: 16.0,
-                 leading: 36.0,
-                 bottom: 48,
-                 trailing: 36.0
-             )
-             static let continueButtonEdgeInsets: UIEdgeInsets = .init(
-                 hMargin: 0,
-                 vMargin: 16
-             )
-    }
-
     private let state: RegistrationPhoneNumberDiscoverabilityState
     private weak var presenter: RegistrationPhoneNumberDiscoverabilityPresenter?
 
@@ -41,8 +27,10 @@ class RegistrationPhoneNumberDiscoverabilityViewController: OWSViewController {
         self.state = state
         self.presenter = presenter
         self.phoneNumberDiscoverability = state.phoneNumberDiscoverability
+
         super.init()
-        render()
+
+        navigationItem.hidesBackButton = true
     }
 
     @available(*, unavailable)
@@ -53,142 +41,111 @@ class RegistrationPhoneNumberDiscoverabilityViewController: OWSViewController {
     // MARK: State
 
     private var phoneNumberDiscoverability: PhoneNumberDiscoverability {
-        didSet { render() }
+        didSet { update() }
     }
 
-    // MARK: Rendering
+    // MARK: UI
 
-    private lazy var titleLabel: UILabel = {
-        let result = UILabel.titleLabelForRegistration(text: OWSLocalizedString(
-            "ONBOARDING_PHONE_NUMBER_DISCOVERABILITY_TITLE",
-            comment: "Title of the 'onboarding phone number discoverability' view."
-        ))
-        result.accessibilityIdentifier = "registration.phoneNumberDiscoverability.titleLabel"
-        return result
-    }()
+    private lazy var everybodyButton: UIButton = createButtonForDiscoverability(.everybody)
+    private lazy var nobodyButton: UIButton = createButtonForDiscoverability(.nobody)
 
-    private lazy var explanationLabel: UILabel = {
-        let formattedPhoneNumber = state.e164.stringValue
-        let explanationTextFormat = OWSLocalizedString(
-            "ONBOARDING_PHONE_NUMBER_DISCOVERABILITY_EXPLANATION_FORMAT",
-            comment: "Explanation of the 'onboarding phone number discoverability' view. Embeds {user phone number}"
+    private func createButtonForDiscoverability(_ phoneNumberDiscoverability: PhoneNumberDiscoverability) -> UIButton {
+        let button = PrivacySettingButton(phoneNumberDiscoverability: phoneNumberDiscoverability)
+        button.addAction(
+            UIAction { [weak self] _ in
+                self?.phoneNumberDiscoverability = phoneNumberDiscoverability
+            },
+            for: .primaryActionTriggered
         )
-
-        let result = UILabel.explanationLabelForRegistration(
-            text: String(format: explanationTextFormat, formattedPhoneNumber)
-        )
-        result.accessibilityIdentifier = "registration.phoneNumberDiscoverability.explanationLabel"
-
-        return result
-    }()
-
-    private lazy var everybodyButton: ButtonRow = createButtonForDiscoverability(.everybody)
-    private lazy var nobodyButton: ButtonRow = createButtonForDiscoverability(.nobody)
-
-    private func createButtonForDiscoverability(_ phoneNumberDiscoverability: PhoneNumberDiscoverability) -> ButtonRow {
-        let result = ButtonRow(title: phoneNumberDiscoverability.nameForDiscoverability)
-        result.handler = { [weak self] _ in
-            self?.phoneNumberDiscoverability = phoneNumberDiscoverability
-        }
-        return result
+        return button
     }
 
     private lazy var selectionDescriptionLabel: UILabel = {
-        let result = UILabel()
-        result.font = .dynamicTypeCaption1Clamped
-        result.numberOfLines = 0
-        result.lineBreakMode = .byWordWrapping
-        return result
-    }()
-
-    private lazy var nextBarButton = UIBarButtonItem(
-        title: CommonStrings.nextButton,
-        style: .done,
-        target: self,
-        action: #selector(didTapSave),
-        accessibilityIdentifier: "registration.phoneNumberDiscoverability.nextButton"
-    )
-
-    private lazy var continueButton: UIView = {
-        let footerView = UIView()
-        let continueButton = OWSFlatButton.insetButton(
-            title: CommonStrings.continueButton,
-            font: UIFont.dynamicTypeBodyClamped.semibold(),
-            titleColor: .white,
-            backgroundColor: .ows_accentBlue,
-            target: self,
-            selector: #selector(didTapSave))
-        continueButton.accessibilityIdentifier = "registration.phoneNumberDiscoverability.saveButton"
-
-        footerView.addSubview(continueButton)
-
-        continueButton.contentEdgeInsets = Constants.continueButtonEdgeInsets
-        continueButton.autoPinEdgesToSuperviewEdges(with: Constants.continueButtonInsets)
-
-        return footerView
+        let label = UILabel.explanationLabelForRegistration(text: "")
+        label.font = .dynamicTypeFootnoteClamped
+        return label
     }()
 
     public override func viewDidLoad() {
         super.viewDidLoad()
-        initialRender()
-    }
 
-    public override func themeDidChange() {
-        super.themeDidChange()
-        render()
-    }
+        view.backgroundColor = .Signal.background
 
-    private func initialRender() {
         navigationItem.setHidesBackButton(true, animated: false)
         if !(presenter?.presentedAsModal ?? true) {
-            navigationItem.rightBarButtonItem = nextBarButton
+            navigationItem.rightBarButtonItem = UIBarButtonItem(
+                title: CommonStrings.nextButton,
+                style: .done,
+                target: self,
+                action: #selector(didTapSave),
+                accessibilityIdentifier: "registration.phoneNumberDiscoverability.nextButton"
+            )
         }
 
-        let descriptionLabelContainer = UIView()
-        descriptionLabelContainer.addSubview(selectionDescriptionLabel)
-        selectionDescriptionLabel.autoPinEdgesToSuperviewMargins()
+        let titleLabel = UILabel.titleLabelForRegistration(text: OWSLocalizedString(
+            "ONBOARDING_PHONE_NUMBER_DISCOVERABILITY_TITLE",
+            comment: "Title of the 'onboarding phone number discoverability' view."
+        ))
+        titleLabel.accessibilityIdentifier = "registration.phoneNumberDiscoverability.titleLabel"
+
+        let formattedPhoneNumber = state.e164.stringValue
+        let explanationTextFormat = OWSLocalizedString(
+            "ONBOARDING_PHONE_NUMBER_DISCOVERABILITY_EXPLANATION_FORMAT",
+            comment: "Explanation of the 'onboarding phone number discoverability' view. Embeds {user phone number}"
+        )
+        let subtitleLabel = UILabel.explanationLabelForRegistration(
+            text: String(format: explanationTextFormat, formattedPhoneNumber)
+        )
+        subtitleLabel.accessibilityIdentifier = "registration.phoneNumberDiscoverability.explanationLabel"
 
-        var stackSubviews = [
+        let stackView = UIStackView(arrangedSubviews: [
             titleLabel,
-            .spacer(withHeight: 16),
-            explanationLabel,
-            .spacer(withHeight: 24),
+            subtitleLabel,
             everybodyButton,
             nobodyButton,
-            .spacer(withHeight: 16),
-            descriptionLabelContainer,
+            selectionDescriptionLabel,
             .vStretchingSpacer(minHeight: 16)
-        ]
-
+        ])
         if presenter?.presentedAsModal ?? false {
-            stackSubviews.append(contentsOf: [
-                continueButton,
-                .spacer(withHeight: 16)
+            let continueButton = UIButton(
+                configuration: .largePrimary(title: CommonStrings.continueButton),
+                primaryAction: UIAction { [weak self] _ in
+                    self?.didTapSave()
+                }
+            )
+            continueButton.accessibilityIdentifier = "registration.phoneNumberDiscoverability.saveButton"
+            let buttonContainer = UIView.container()
+            buttonContainer.addSubview(continueButton)
+            continueButton.translatesAutoresizingMaskIntoConstraints = false
+            NSLayoutConstraint.activate([
+                continueButton.topAnchor.constraint(equalTo: buttonContainer.topAnchor),
+                continueButton.leadingAnchor.constraint(equalTo: buttonContainer.leadingAnchor, constant: 22),
+                continueButton.centerXAnchor.constraint(equalTo: buttonContainer.centerXAnchor),
+                continueButton.bottomAnchor.constraint(equalTo: buttonContainer.bottomAnchor, constant: -16),
             ])
+            stackView.addArrangedSubview(buttonContainer)
         }
-
-        let stackView = UIStackView(arrangedSubviews: stackSubviews)
         stackView.axis = .vertical
+        stackView.spacing = 16
+        stackView.setCustomSpacing(24, after: subtitleLabel)
+        stackView.preservesSuperviewLayoutMargins = true
+        stackView.isLayoutMarginsRelativeArrangement = true
         view.addSubview(stackView)
-        stackView.autoPinEdgesToSuperviewMargins()
-
-        render()
+        stackView.translatesAutoresizingMaskIntoConstraints = false
+        NSLayoutConstraint.activate([
+            stackView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
+            stackView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
+            stackView.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor),
+            stackView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
+        ])
+
+        update()
     }
 
-    private func render() {
+    private func update() {
         everybodyButton.isSelected = phoneNumberDiscoverability == .everybody
-        everybodyButton.render()
-
         nobodyButton.isSelected = phoneNumberDiscoverability == .nobody
-        nobodyButton.render()
-
         selectionDescriptionLabel.text = phoneNumberDiscoverability.descriptionForDiscoverability
-
-        view.backgroundColor = Theme.backgroundColor
-        continueButton.tintColor = Theme.accentBlueColor
-        titleLabel.textColor = .colorForRegistrationTitleLabel
-        explanationLabel.textColor = .colorForRegistrationExplanationLabel
-        selectionDescriptionLabel.textColor = .colorForRegistrationExplanationLabel
     }
 
     // MARK: Events
@@ -199,80 +156,141 @@ class RegistrationPhoneNumberDiscoverabilityViewController: OWSViewController {
     }
 }
 
-// MARK: - ButtonRow
+// MARK: - Privacy setting buttons
 
-private class ButtonRow: UIButton {
-    var handler: ((ButtonRow) -> Void)?
+private extension RegistrationPhoneNumberDiscoverabilityViewController {
 
-    private let selectedImageView = UIImageView()
+    private class PrivacySettingButton: UIButton {
+        private lazy var contentView = PrivacySettingButtonContentView(
+            configuration: .init(phoneNumberDiscoverability: phoneNumberDiscoverability)
+        )
 
-    static let vInset: CGFloat = 11
-    static var hInset: CGFloat { UIDevice.current.isPlusSizePhone ? 20 : 16 }
+        var phoneNumberDiscoverability: PhoneNumberDiscoverability {
+            didSet {
+                contentView.configuration = PrivacySettingButtonContentConfiguration(
+                    phoneNumberDiscoverability: phoneNumberDiscoverability
+                )
+            }
+        }
 
-    override var isSelected: Bool {
-        didSet {
-            selectedImageView.isHidden = !isSelected
+        override var isSelected: Bool {
+            didSet {
+                contentView.configuration = PrivacySettingButtonContentConfiguration(
+                    phoneNumberDiscoverability: phoneNumberDiscoverability,
+                    isSelected: isSelected
+                )
+            }
+        }
+
+        init(phoneNumberDiscoverability: PhoneNumberDiscoverability) {
+            self.phoneNumberDiscoverability = phoneNumberDiscoverability
+
+            super.init(frame: .zero)
+
+            configuration = .filled()
+            configuration?.baseBackgroundColor = .Signal.background
+
+            addSubview(contentView)
+            contentView.translatesAutoresizingMaskIntoConstraints = false
+            NSLayoutConstraint.activate([
+                contentView.leadingAnchor.constraint(equalTo: leadingAnchor),
+                contentView.topAnchor.constraint(equalTo: topAnchor),
+                contentView.trailingAnchor.constraint(equalTo: trailingAnchor),
+                contentView.bottomAnchor.constraint(equalTo: bottomAnchor)
+            ])
+        }
+
+        required init?(coder: NSCoder) {
+            fatalError("init(coder:) has not been implemented")
         }
     }
 
-    private lazy var buttonLabel: UILabel = UILabel()
+    private struct PrivacySettingButtonContentConfiguration: UIContentConfiguration {
+        var phoneNumberDiscoverability: PhoneNumberDiscoverability
+        var isSelected = false
 
-    private lazy var divider: UIView = UIView()
+        func makeContentView() -> UIView & UIContentView {
+            PrivacySettingButtonContentView(configuration: self)
+        }
 
-    init(title: String) {
-        super.init(frame: .zero)
+        func updated(for state: UIConfigurationState) -> PrivacySettingButtonContentConfiguration {
+            // Looks the same.
+            self
+        }
+    }
 
-        addTarget(self, action: #selector(didTap), for: .touchUpInside)
+    private class PrivacySettingButtonContentView: UIView, UIContentView {
 
-        buttonLabel.text = title
+        private var _configuration: PrivacySettingButtonContentConfiguration!
 
-        selectedImageView.isHidden = true
-        selectedImageView.contentMode = .scaleAspectFit
-        selectedImageView.autoSetDimension(.width, toSize: 24)
+        var configuration: UIContentConfiguration {
+            get { _configuration }
+            set {
+                guard let configuration = newValue as? PrivacySettingButtonContentConfiguration else { return }
+                _configuration = configuration
+                apply(configuration)
+            }
+        }
 
-        let stackView = UIStackView(arrangedSubviews: [buttonLabel, .hStretchingSpacer(), selectedImageView])
-        stackView.isUserInteractionEnabled = false
-        stackView.axis = .horizontal
-        stackView.spacing = 8
-        stackView.isLayoutMarginsRelativeArrangement = true
-        stackView.layoutMargins = UIEdgeInsets(
-            top: Self.vInset,
-            leading: Self.hInset,
-            bottom: Self.vInset,
-            trailing: Self.hInset
-        )
+        init(configuration: PrivacySettingButtonContentConfiguration) {
+            super.init(frame: .zero)
 
-        addSubview(stackView)
-        stackView.autoPinEdgesToSuperviewEdges()
-        stackView.autoSetDimension(.height, toSize: 44, relation: .greaterThanOrEqual)
+            isUserInteractionEnabled = false
+            layoutMargins = .init(hMargin: 8, vMargin: 8)
 
-        addSubview(divider)
-        divider.autoSetDimension(.height, toSize: .hairlineWidth)
-        divider.autoPinEdge(toSuperviewEdge: .trailing)
-        divider.autoPinEdge(toSuperviewEdge: .bottom)
-        divider.autoPinEdge(toSuperviewEdge: .leading, withInset: Self.hInset)
+            let hStack = UIStackView(arrangedSubviews: [ titleLabel, checkmark ])
+            hStack.axis = .horizontal
+            hStack.alignment = .center
+            hStack.spacing = 12
 
-        render()
-    }
+            addSubview(hStack)
+            hStack.translatesAutoresizingMaskIntoConstraints = false
+            NSLayoutConstraint.activate([
+                hStack.topAnchor.constraint(equalTo: layoutMarginsGuide.topAnchor),
+                hStack.leadingAnchor.constraint(equalTo: layoutMarginsGuide.leadingAnchor),
+                hStack.bottomAnchor.constraint(equalTo: layoutMarginsGuide.bottomAnchor),
+                hStack.trailingAnchor.constraint(equalTo: layoutMarginsGuide.trailingAnchor),
 
-    required init?(coder: NSCoder) {
-        fatalError("init(coder:) has not been implemented")
-    }
+                titleLabel.heightAnchor.constraint(greaterThanOrEqualTo: checkmark.heightAnchor),
+                heightAnchor.constraint(greaterThanOrEqualToConstant: 48),
+            ])
 
-    public func render() {
-        setBackgroundImage(UIImage.image(color: Theme.tableCell2SelectedBackgroundColor), for: .highlighted)
-        setBackgroundImage(UIImage.image(color: Theme.backgroundColor), for: .normal)
+            addBottomStroke(color: .Signal.opaqueSeparator, strokeWidth: .hairlineWidth)
 
-        buttonLabel.textColor = Theme.primaryTextColor
-        buttonLabel.font = .dynamicTypeBodyClamped
+            apply(configuration)
+       }
 
-        divider.backgroundColor = .ows_middleGray
+        @available(*, unavailable, message: "Use other constructor")
+        required init?(coder: NSCoder) {
+            fatalError("init(coder:) has not been implemented")
+        }
 
-        selectedImageView.setTemplateImage(Theme.iconImage(.checkmark), tintColor: Theme.primaryIconColor)
+        private lazy var checkmark: UIView = {
+            let iconView = UIImageView()
+            iconView.contentMode = .scaleAspectFit
+            iconView.translatesAutoresizingMaskIntoConstraints = false
+            iconView.widthAnchor.constraint(equalToConstant: 24).isActive = true
+            iconView.setTemplateImage(Theme.iconImage(.checkmark), tintColor: .Signal.label)
+            return iconView
+        }()
+
+        private lazy var titleLabel: UILabel = {
+            let titleLabel = UILabel()
+            titleLabel.font = .dynamicTypeBodyClamped
+            titleLabel.textColor = .Signal.label
+            titleLabel.numberOfLines = 0
+            titleLabel.lineBreakMode = .byWordWrapping
+            titleLabel.text = OWSLocalizedString(
+                "REGISTRATION_PROFILE_SETUP_FIND_MY_NUMBER_TITLE",
+                comment: "During registration, users can choose who can see their phone number."
+            )
+            return titleLabel
+        }()
+
+        private func apply(_ configuration: PrivacySettingButtonContentConfiguration) {
+            titleLabel.text = configuration.phoneNumberDiscoverability.nameForDiscoverability
+            checkmark.isHidden = !configuration.isSelected
+        }
     }
 
-    @objc
-    func didTap() {
-        handler?(self)
-    }
 }
diff --git a/Signal/Registration/UserInterface/RegistrationProfileViewController.swift b/Signal/Registration/UserInterface/RegistrationProfileViewController.swift
index 9d07fb91a1..435baff6f5 100644
--- a/Signal/Registration/UserInterface/RegistrationProfileViewController.swift
+++ b/Signal/Registration/UserInterface/RegistrationProfileViewController.swift
@@ -29,6 +29,7 @@ protocol RegistrationProfilePresenter: AnyObject {
 
 class RegistrationProfileViewController: OWSViewController {
     var state: RegistrationProfileState
+
     public init(
         state: RegistrationProfileState,
         presenter: RegistrationProfilePresenter
@@ -37,6 +38,8 @@ class RegistrationProfileViewController: OWSViewController {
         self.state = state
 
         super.init()
+
+        navigationItem.hidesBackButton = true
     }
 
     @available(*, unavailable)
@@ -57,18 +60,10 @@ class RegistrationProfileViewController: OWSViewController {
     }
 
     private var avatarData: Data? {
-        didSet { render() }
+        didSet { updateUI() }
     }
 
-    // MARK: Rendering
-
-    private lazy var nextBarButton = UIBarButtonItem(
-        title: CommonStrings.nextButton,
-        style: .done,
-        target: self,
-        action: #selector(didTapNext),
-        accessibilityIdentifier: "registration.profile.nextButton"
-    )
+    // MARK: UI
 
     private lazy var titleLabel: UILabel = {
         let result = UILabel.titleLabelForRegistration(text: OWSLocalizedString(
@@ -93,56 +88,63 @@ class RegistrationProfileViewController: OWSViewController {
                 return StringStyle.Part.link(URL.Support.profilesAndMessageRequests)
             }())
         ])
-        result.font = .fontForRegistrationExplanationLabel
+        result.textColor = .Signal.secondaryLabel
+        result.font = .dynamicTypeBody
         result.textAlignment = .center
         result.delegate = self
         return result
     }()
 
-    private lazy var avatarTapGestureRecognizer = UITapGestureRecognizer(
-        target: self,
-        action: #selector(didTapAvatar)
-    )
-
     private let avatarSize: CGFloat = 64
     private lazy var avatarView: AvatarImageView = {
         let result = AvatarImageView()
-        result.autoSetDimensions(to: .square(avatarSize))
+        result.translatesAutoresizingMaskIntoConstraints = false
+        result.addConstraints([
+            result.widthAnchor.constraint(equalToConstant: avatarSize),
+            result.heightAnchor.constraint(equalToConstant: avatarSize),
+        ])
         result.accessibilityIdentifier = "registration.profile.avatarView"
-
-        result.addGestureRecognizer(avatarTapGestureRecognizer)
+        result.addGestureRecognizer(UITapGestureRecognizer(
+            target: self,
+            action: #selector(didTapAvatar)
+        ))
         result.isUserInteractionEnabled = true
         return result
     }()
 
-    private lazy var avatarContainerView: UIView = {
-        let result = UIView()
-        result.addSubview(avatarView)
-        result.autoSetDimension(.height, toSize: avatarSize)
-        avatarView.autoCenterInSuperview()
-        return result
-    }()
+    private lazy var cameraIconView: UIView = {
+        let iconSize: CGFloat = 16
+        let viewSize: CGFloat = 28
+
+        let view = UIView()
+        view.backgroundColor = .Signal.background
+        view.layer.cornerRadius = viewSize / 2
+        view.addGestureRecognizer(UITapGestureRecognizer(
+            target: self,
+            action: #selector(didTapAvatar)
+        ))
+        view.isUserInteractionEnabled = true
 
-    private lazy var cameraImageView: UIImageView = {
-        let result = UIImageView.withTemplateImageName(
+        let cameraImageIcon =  UIImageView.withTemplateImageName(
             "camera-compact",
             // This color will be swiftly updated during renders.
-            tintColor: Theme.secondaryTextAndIconColor
+            tintColor: .Signal.secondaryLabel
         )
-        result.autoSetDimensions(to: CGSize(square: 16))
-        return result
-    }()
+        view.addSubview(cameraImageIcon)
 
-    private lazy var cameraImageWrapperView: UIView = {
-        let result = UIView()
-        let size = CGSize(square: 28)
-        result.addSubview(cameraImageView)
-        result.layer.cornerRadius = size.largerAxis / 2
-        cameraImageView.autoCenterInSuperview()
-        result.autoSetDimensions(to: size)
-        result.addGestureRecognizer(avatarTapGestureRecognizer)
-        result.isUserInteractionEnabled = true
-        return result
+        view.translatesAutoresizingMaskIntoConstraints = false
+        cameraImageIcon.translatesAutoresizingMaskIntoConstraints = false
+        NSLayoutConstraint.activate([
+            cameraImageIcon.widthAnchor.constraint(equalToConstant: iconSize),
+            cameraImageIcon.heightAnchor.constraint(equalToConstant: iconSize),
+            cameraImageIcon.centerXAnchor.constraint(equalTo: view.centerXAnchor),
+            cameraImageIcon.centerYAnchor.constraint(equalTo: view.centerYAnchor),
+
+            view.widthAnchor.constraint(equalToConstant: viewSize),
+            view.heightAnchor.constraint(equalToConstant: viewSize),
+        ])
+
+        return view
     }()
 
     private func textField(
@@ -151,21 +153,19 @@ class RegistrationProfileViewController: OWSViewController {
         accessibilityIdentifierSuffix: String
     ) -> UITextField {
         let result = OWSTextField()
-        result.font = .dynamicTypeSubheadlineClamped
+        result.font = .dynamicTypeBodyClamped
+        result.textColor = .Signal.label
         result.adjustsFontForContentSizeCategory = true
         result.textAlignment = .natural
         result.autocorrectionType = .no
         result.spellCheckingType = .no
-
         result.placeholder = placeholder
         result.textContentType = textContentType
         result.accessibilityIdentifier = "registration.profile.\(accessibilityIdentifierSuffix)"
-
         result.delegate = self
         result.addTarget(self, action: #selector(didTextFieldChange), for: .editingChanged)
-
         result.autoSetDimension(.height, toSize: 50, relation: .greaterThanOrEqual)
-
+        result.addBottomStroke(color: .Signal.opaqueSeparator, strokeWidth: .hairlineWidth)
         return result
     }
 
@@ -187,11 +187,6 @@ class RegistrationProfileViewController: OWSViewController {
         accessibilityIdentifierSuffix: "familyName"
     )
 
-    private lazy var textFieldStrokes: [UIView] = [givenNameTextField, familyNameTextField].map {
-        // This color will be swiftly updated during renders.
-        $0.addBottomStroke(color: Theme.hairlineColor, strokeWidth: .hairlineWidth)
-    }
-
     private enum NameOrder {
         case familyNameFirst
         case givenNameFirst
@@ -219,44 +214,41 @@ class RegistrationProfileViewController: OWSViewController {
         return result
     }()
 
-    private lazy var phoneNumberDisclosureView: PhoneNumberPrivacyLabel = {
-        return PhoneNumberPrivacyLabel(phoneNumberDiscoverability: state.phoneNumberDiscoverability, onTap: { [weak self] in
-            guard let self else { return }
-            let vc = RegistrationPhoneNumberDiscoverabilityViewController(
-                state: RegistrationPhoneNumberDiscoverabilityState(
-                    e164: self.state.e164,
-                    phoneNumberDiscoverability: self.state.phoneNumberDiscoverability
-                ),
-                presenter: self
-            )
-            self.presentFormSheet(OWSNavigationController(rootViewController: vc), animated: true)
-        })
+    private lazy var phoneNumberPrivacyButton: PhoneNumberPrivacyButton = {
+        let button = PhoneNumberPrivacyButton(phoneNumberDiscoverability: state.phoneNumberDiscoverability)
+        button.addAction(
+            UIAction { [weak self] _ in
+                guard let self else { return }
+                let vc = RegistrationPhoneNumberDiscoverabilityViewController(
+                    state: RegistrationPhoneNumberDiscoverabilityState(
+                        e164: self.state.e164,
+                        phoneNumberDiscoverability: self.state.phoneNumberDiscoverability
+                    ),
+                    presenter: self
+                )
+                self.presentFormSheet(OWSNavigationController(rootViewController: vc), animated: true)
+            },
+            for: .primaryActionTriggered
+        )
+        return button
     }()
 
     public override func viewDidLoad() {
         super.viewDidLoad()
-        initialRender()
-    }
-
-    public override func viewDidAppear(_ animated: Bool) {
-        super.viewDidAppear(animated)
-
-        if !UIDevice.current.isIPhone5OrShorter {
-            // Small devices may obscure parts of the UI behind the keyboard, especially with larger
-            // font sizes.
-            firstTextField.becomeFirstResponder()
-        }
-    }
 
-    public override func themeDidChange() {
-        super.themeDidChange()
-        render()
-    }
+        view.backgroundColor = .Signal.background
 
-    private func initialRender() {
-        navigationItem.setHidesBackButton(true, animated: false)
+        navigationItem.rightBarButtonItem?.tintColor = .Signal.accent
+        navigationItem.rightBarButtonItem = UIBarButtonItem(
+            title: CommonStrings.nextButton,
+            style: .done,
+            target: self,
+            action: #selector(didTapNext),
+            accessibilityIdentifier: "registration.profile.nextButton"
+        )
 
         let scrollView = UIScrollView()
+        scrollView.preservesSuperviewLayoutMargins = true
         view.addSubview(scrollView)
         scrollView.translatesAutoresizingMaskIntoConstraints = false
         NSLayoutConstraint.activate([
@@ -266,34 +258,64 @@ class RegistrationProfileViewController: OWSViewController {
             scrollView.bottomAnchor.constraint(equalTo: keyboardLayoutGuide.topAnchor),
         ])
 
-        let stackView = UIStackView()
+        let avatarContainerView = UIView.container()
+        avatarContainerView.addSubview(avatarView)
+        avatarContainerView.addSubview(cameraIconView)
+        avatarView.translatesAutoresizingMaskIntoConstraints = false
+        cameraIconView.translatesAutoresizingMaskIntoConstraints = false
+        NSLayoutConstraint.activate([
+            avatarView.topAnchor.constraint(equalTo: avatarContainerView.topAnchor),
+            avatarView.centerXAnchor.constraint(equalTo: avatarContainerView.centerXAnchor),
+            avatarView.bottomAnchor.constraint(equalTo: avatarContainerView.bottomAnchor),
+
+            cameraIconView.bottomAnchor.constraint(equalTo: avatarView.bottomAnchor),
+            cameraIconView.trailingAnchor.constraint(equalTo: avatarView.trailingAnchor),
+        ])
+
+        let stackView = UIStackView(arrangedSubviews: [
+            titleLabel,
+            explanationView,
+            avatarContainerView,
+            nameStackView,
+            phoneNumberPrivacyButton,
+            UIView.vStretchingSpacer(),
+        ])
         stackView.axis = .vertical
         stackView.distribution = .fill
         stackView.spacing = 24
         stackView.setCustomSpacing(12, after: titleLabel)
-        scrollView.addSubview(stackView)
-        stackView.autoPinWidth(toWidthOf: scrollView)
-        stackView.autoPinHeightToSuperview()
-
-        stackView.addArrangedSubview(titleLabel)
-        stackView.addArrangedSubview(explanationView)
-        stackView.addArrangedSubview(avatarContainerView)
-        stackView.addArrangedSubview(nameStackView)
-        stackView.addArrangedSubview(phoneNumberDisclosureView)
-        stackView.addArrangedSubview(UIView.vStretchingSpacer())
+        stackView.preservesSuperviewLayoutMargins = true
+        stackView.isLayoutMarginsRelativeArrangement = true
 
-        scrollView.addSubview(cameraImageWrapperView)
-        cameraImageWrapperView.autoPinEdge(.bottom, to: .bottom, of: avatarView)
-        cameraImageWrapperView.autoPinEdge(.trailing, to: .trailing, of: avatarView)
+        scrollView.addSubview(stackView)
+        stackView.translatesAutoresizingMaskIntoConstraints = false
+        NSLayoutConstraint.activate([
+            stackView.topAnchor.constraint(equalTo: scrollView.contentLayoutGuide.topAnchor),
+            stackView.leadingAnchor.constraint(equalTo: scrollView.contentLayoutGuide.leadingAnchor),
+            stackView.bottomAnchor.constraint(equalTo: scrollView.contentLayoutGuide.bottomAnchor),
+            stackView.trailingAnchor.constraint(equalTo: scrollView.contentLayoutGuide.trailingAnchor),
+            stackView.widthAnchor.constraint(equalTo: scrollView.frameLayoutGuide.widthAnchor),
+            stackView.heightAnchor.constraint(greaterThanOrEqualTo: scrollView.frameLayoutGuide.heightAnchor),
+        ])
 
         firstTextField.returnKeyType = .next
         secondTextField.returnKeyType = .done
 
-        render()
+        updateUI()
+    }
+
+    public override func viewDidAppear(_ animated: Bool) {
+        super.viewDidAppear(animated)
+
+        if !UIDevice.current.isIPhone5OrShorter {
+            // Small devices may obscure parts of the UI behind the keyboard, especially with larger
+            // font sizes.
+            firstTextField.becomeFirstResponder()
+        }
     }
 
-    private func render() {
-        navigationItem.rightBarButtonItem = givenNameComponent != nil ? nextBarButton : nil
+    private func updateUI() {
+        navigationItem.rightBarButtonItem?.isEnabled = givenNameComponent != nil
 
         avatarView.image = avatarData?.asImage ?? SSKEnvironment.shared.databaseStorageRef.read { transaction in
             SSKEnvironment.shared.avatarBuilderRef.defaultAvatarImageForLocalUser(
@@ -301,28 +323,13 @@ class RegistrationProfileViewController: OWSViewController {
                 transaction: transaction
             )
         }
-
-        view.backgroundColor = Theme.backgroundColor
-        nextBarButton.tintColor = Theme.accentBlueColor
-        titleLabel.textColor = .colorForRegistrationTitleLabel
-        explanationView.textColor = .colorForRegistrationExplanationLabel
-        explanationView.linkTextAttributes = [
-            .foregroundColor: Theme.accentBlueColor,
-            .underlineColor: UIColor.clear
-        ]
-        cameraImageView.tintColor = Theme.secondaryTextAndIconColor
-        cameraImageWrapperView.backgroundColor = Theme.backgroundColor
-        [givenNameTextField, familyNameTextField].forEach { $0.textColor = Theme.primaryTextColor }
-        textFieldStrokes.forEach { $0.backgroundColor = Theme.hairlineColor }
-
-        phoneNumberDisclosureView.render()
     }
 
     // MARK: Events
 
     @objc
     private func didTextFieldChange() {
-        render()
+        updateUI()
     }
 
     @objc
@@ -376,12 +383,12 @@ extension RegistrationProfileViewController: UITextViewDelegate {
         interaction: UITextItemInteraction
     ) -> Bool {
         if textView == explanationView {
-            showLearnMoreUi()
+            showLearnMoreUI()
         }
         return false
     }
 
-    private func showLearnMoreUi() {
+    private func showLearnMoreUI() {
         let actionSheet = ActionSheetController(
             title: OWSLocalizedString(
                 "REGISTRATION_PROFILE_SETUP_MORE_INFO_TITLE",
@@ -427,7 +434,7 @@ extension RegistrationProfileViewController: RegistrationPhoneNumberDiscoverabil
     var presentedAsModal: Bool { return true }
 
     func setPhoneNumberDiscoverability(_ phoneNumberDiscoverability: PhoneNumberDiscoverability) {
-        phoneNumberDisclosureView.phoneNumberDiscoverability = phoneNumberDiscoverability
+        phoneNumberPrivacyButton.phoneNumberDiscoverability = phoneNumberDiscoverability
         self.state = RegistrationProfileState(
             e164: self.state.e164,
             phoneNumberDiscoverability: phoneNumberDiscoverability
@@ -436,170 +443,162 @@ extension RegistrationProfileViewController: RegistrationPhoneNumberDiscoverabil
     }
 }
 
-// MARK: - PhoneNumberPrivacyLabel
+// MARK: - Phone number privacy button
 
 extension RegistrationProfileViewController {
-    private class PhoneNumberPrivacyLabel: UIView {
-
-        private enum Constants {
-            static let iconSize: CGFloat = 24.0
-            static let verticalSpacing: CGFloat = 0.0
-            static let horizontalSpacing: CGFloat = 12.0
-            static let layoutInsets: UIEdgeInsets = UIEdgeInsets(
-                top: 8,
-                leading: 0,
-                bottom: 8,
-                trailing: 0
-            )
-        }
+
+    private class PhoneNumberPrivacyButton: UIButton {
+
+        private lazy var contentView = PhoneNumberPrivacyButtonContentView(
+            configuration: .init(phoneNumberDiscoverability: phoneNumberDiscoverability)
+        )
 
         var phoneNumberDiscoverability: PhoneNumberDiscoverability {
-            didSet { render() }
+            didSet {
+                contentView.configuration = PhoneNumberPrivacyButtonContentConfiguration(
+                    phoneNumberDiscoverability: phoneNumberDiscoverability
+                )
+            }
         }
-        private var onTap: (() -> Void)?
-
-        // MARK: Init
 
-        init(phoneNumberDiscoverability: PhoneNumberDiscoverability, onTap: (() -> Void)?) {
+        init(phoneNumberDiscoverability: PhoneNumberDiscoverability) {
             self.phoneNumberDiscoverability = phoneNumberDiscoverability
-            self.onTap = onTap
+
             super.init(frame: .zero)
-            initialRender()
+
+            configuration = .filled()
+            configuration?.baseBackgroundColor = .Signal.background
+
+            addSubview(contentView)
+            contentView.translatesAutoresizingMaskIntoConstraints = false
+            NSLayoutConstraint.activate([
+                contentView.leadingAnchor.constraint(equalTo: leadingAnchor),
+                contentView.topAnchor.constraint(equalTo: topAnchor),
+                contentView.trailingAnchor.constraint(equalTo: trailingAnchor),
+                contentView.bottomAnchor.constraint(equalTo: bottomAnchor)
+            ])
         }
 
-        @available(*, unavailable, message: "Use other constructor")
         required init?(coder: NSCoder) {
             fatalError("init(coder:) has not been implemented")
         }
+    }
 
-        // MARK: Views
+    private struct PhoneNumberPrivacyButtonContentConfiguration: UIContentConfiguration {
+        var phoneNumberDiscoverability: PhoneNumberDiscoverability
 
-        private lazy var button: OWSFlatButton = {
-            return OWSFlatButton()
-        }()
+        func makeContentView() -> UIView & UIContentView {
+            PhoneNumberPrivacyButtonContentView(configuration: self)
+        }
+
+        func updated(for state: UIConfigurationState) -> PhoneNumberPrivacyButtonContentConfiguration {
+            // Looks the same.
+            self
+        }
+    }
+
+    private class PhoneNumberPrivacyButtonContentView: UIView, UIContentView {
+
+        private var _configuration: PhoneNumberPrivacyButtonContentConfiguration!
+
+        var configuration: UIContentConfiguration {
+            get { _configuration }
+            set {
+                guard let configuration = newValue as? PhoneNumberPrivacyButtonContentConfiguration else { return }
+                _configuration = configuration
+                apply(configuration)
+            }
+        }
+
+        init(configuration: PhoneNumberPrivacyButtonContentConfiguration) {
+            super.init(frame: .zero)
+
+            isUserInteractionEnabled = false
+            layoutMargins = .init(hMargin: 0, vMargin: 8)
+
+            let vStack = UIStackView(arrangedSubviews: [ titleLabel, subTitleLabel ])
+            vStack.axis = .vertical
+            vStack.spacing = 4
+
+            let disclosureView = UIImageView()
+            disclosureView.contentMode = .scaleAspectFit
+            disclosureView.setTemplateImage(
+                UIImage(imageLiteralResourceName: "chevron-right-20"),
+                tintColor: .Signal.secondaryLabel
+            )
+            disclosureView.translatesAutoresizingMaskIntoConstraints = false
+            disclosureView.widthAnchor.constraint(equalToConstant: 24).isActive = true
+
+            let hStack = UIStackView(arrangedSubviews: [
+                iconView,
+                vStack,
+                disclosureView
+            ])
+            hStack.axis = .horizontal
+            hStack.spacing = 12
+            hStack.alignment = .center
+
+            addSubview(hStack)
+            hStack.translatesAutoresizingMaskIntoConstraints = false
+            NSLayoutConstraint.activate([
+                hStack.topAnchor.constraint(equalTo: layoutMarginsGuide.topAnchor),
+                hStack.leadingAnchor.constraint(equalTo: layoutMarginsGuide.leadingAnchor),
+                hStack.bottomAnchor.constraint(equalTo: layoutMarginsGuide.bottomAnchor),
+                hStack.trailingAnchor.constraint(equalTo: layoutMarginsGuide.trailingAnchor),
+            ])
+
+            apply(configuration)
+       }
+
+        @available(*, unavailable, message: "Use other constructor")
+        required init?(coder: NSCoder) {
+            fatalError("init(coder:) has not been implemented")
+        }
 
         private lazy var iconView: UIImageView = {
             let iconView = UIImageView()
             iconView.contentMode = .scaleAspectFit
+            iconView.translatesAutoresizingMaskIntoConstraints = false
+            iconView.widthAnchor.constraint(equalToConstant: 24).isActive = true
             return iconView
         }()
 
         private lazy var titleLabel: UILabel = {
             let titleLabel = UILabel()
+            titleLabel.font = .dynamicTypeBodyClamped
+            titleLabel.textColor = .Signal.label
             titleLabel.numberOfLines = 0
             titleLabel.lineBreakMode = .byWordWrapping
+            titleLabel.text = OWSLocalizedString(
+                "REGISTRATION_PROFILE_SETUP_FIND_MY_NUMBER_TITLE",
+                comment: "During registration, users can choose who can see their phone number."
+            )
             return titleLabel
         }()
 
         private lazy var subTitleLabel: UILabel = {
             let subTitleLabel = UILabel()
+            subTitleLabel.font = .dynamicTypeSubheadlineClamped
+            subTitleLabel.textColor = .Signal.secondaryLabel
             subTitleLabel.numberOfLines = 0
             subTitleLabel.lineBreakMode = .byWordWrapping
             return subTitleLabel
         }()
 
-        private lazy var disclosureView: UIImageView = {
-            let disclosureView = UIImageView()
-            disclosureView.contentMode = .scaleAspectFit
-            return disclosureView
-        }()
-
-        // MARK: Layout
-
-        private func initialRender() {
+        private func apply(_ configuration: PhoneNumberPrivacyButtonContentConfiguration) {
+            let discoverability = configuration.phoneNumberDiscoverability
 
-            addSubview(button)
-            button.autoPinEdgesToSuperviewEdges()
-
-            let iconContainer = UIView()
-            iconContainer.addSubview(iconView)
-
-            iconView.autoPinWidthToSuperview()
-            iconView.autoSetDimensions(to: CGSize(square: Constants.iconSize))
-            iconView.autoVCenterInSuperview()
-            iconView.autoMatch(
-                .height,
-                to: .height,
-                of: iconContainer,
-                withOffset: 0,
-                relation: .lessThanOrEqual)
-
-            let topSpacer = UIView.vStretchingSpacer()
-            let bottomSpacer = UIView.vStretchingSpacer()
-
-            let vStack = UIStackView(arrangedSubviews: [
-                topSpacer,
-                titleLabel,
-                subTitleLabel,
-                bottomSpacer
-            ])
-            vStack.axis = .vertical
-            vStack.spacing = Constants.verticalSpacing
-            topSpacer.autoMatch(.height, to: .height, of: bottomSpacer)
-
-            let disclosureContainer = UIView()
-            disclosureContainer.addSubview(disclosureView)
-
-            disclosureView.autoPinEdgesToSuperviewEdges()
-            disclosureView.autoSetDimension(.width, toSize: Constants.iconSize)
-
-            let hStack = UIStackView(arrangedSubviews: [
-                iconContainer,
-                vStack,
-                disclosureContainer
-            ])
-
-            hStack.axis = .horizontal
-            hStack.spacing = Constants.horizontalSpacing
-            hStack.isLayoutMarginsRelativeArrangement = true
-            hStack.layoutMargins = Constants.layoutInsets
-            hStack.isUserInteractionEnabled = false
-
-            button.addSubview(hStack)
-            hStack.autoPinEdgesToSuperviewEdges()
-            button.addTarget(target: self, selector: #selector(disclosureButtonTapped))
-
-            render()
-        }
-
-        public func render() {
-            button.setBackgroundColors(upColor: Theme.backgroundColor)
+            subTitleLabel.text = discoverability.nameForDiscoverability
 
             let labelIconName: String = {
-                switch phoneNumberDiscoverability {
+                switch discoverability {
                 case .everybody:
                     return "group"
                 case .nobody:
                     return "lock"
                 }
             }()
-
-            titleLabel.text = OWSLocalizedString(
-                "REGISTRATION_PROFILE_SETUP_FIND_MY_NUMBER_TITLE",
-                comment: "During registration, users can choose who can see their phone number.")
-
-            subTitleLabel.text = phoneNumberDiscoverability.nameForDiscoverability
-
             iconView.setTemplateImageName(labelIconName, tintColor: Theme.primaryIconColor)
-
-            titleLabel.font = UIFont.dynamicTypeBodyClamped
-            titleLabel.textColor = Theme.primaryTextColor
-
-            subTitleLabel.font = UIFont.dynamicTypeCaption1Clamped
-            subTitleLabel.textColor = Theme.secondaryTextAndIconColor
-
-            disclosureView.setTemplateImage(
-                UIImage(imageLiteralResourceName: "chevron-right-20"),
-                tintColor: Theme.secondaryTextAndIconColor
-            )
-        }
-
-        // MARK: Actions
-
-        @objc
-        func disclosureButtonTapped() {
-            onTap?()
-            render()
         }
     }
 }
diff --git a/SignalUI/UIKitExtensions/UIView+SignalUI.swift b/SignalUI/UIKitExtensions/UIView+SignalUI.swift
index ce19b9d61e..5f74891b9f 100644
--- a/SignalUI/UIKitExtensions/UIView+SignalUI.swift
+++ b/SignalUI/UIKitExtensions/UIView+SignalUI.swift
@@ -296,6 +296,7 @@ public extension UIView {
         return addBottomStroke(color: .ows_middleGray, strokeWidth: .hairlineWidth)
     }
 
+    @discardableResult
     func addBottomStroke(color: UIColor, strokeWidth: CGFloat) -> UIView {
         let strokeView = UIView()
         strokeView.backgroundColor = color
