diff --git a/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentBodyMedia.swift b/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentBodyMedia.swift
index f6c8dfe0089..fc15ba086e2 100644
--- a/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentBodyMedia.swift
+++ b/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentBodyMedia.swift
@@ -128,7 +128,7 @@ public class CVComponentBodyMedia: CVComponentBase, CVComponent {
             componentView.bodyMediaGradientView = gradientView
             gradientView.layer.addSublayer(gradientLayer)
             albumView.addSubview(gradientView)
-            stackView.layoutSubviewToFillSuperviewBoundsWithLayoutBlock(gradientView)
+            stackView.layoutSubviewToFillSuperviewBounds(gradientView)
         }
 
         // Only apply "inner shadow" for single media, not albums.
@@ -139,7 +139,7 @@ public class CVComponentBodyMedia: CVComponentBase, CVComponent {
             let innerShadowView = OWSBubbleShapeView(innerShadowWith: shadowColor, radius: 0.5, opacity: 0.15)
             componentView.innerShadowView = innerShadowView
             firstMediaView.addSubview(innerShadowView)
-            stackView.layoutSubviewToFillSuperviewBoundsWithLayoutBlock(innerShadowView)
+            stackView.layoutSubviewToFillSuperviewBounds(innerShadowView)
         }
 
         if hasDownloadButton {
@@ -181,11 +181,9 @@ public class CVComponentBodyMedia: CVComponentBase, CVComponent {
                 let circleView = OWSLayerView.circleView(size: circleSize)
                 circleView.backgroundColor = UIColor.ows_black.withAlphaComponent(0.8)
                 stackView.addSubview(circleView)
-                stackView.centerSubviewOnSuperviewWithLayoutBlock(circleView,
-                                                                  size: .square(circleSize))
+                stackView.centerSubviewOnSuperview(circleView, size: .square(circleSize))
                 stackView.addSubview(iconView)
-                stackView.centerSubviewOnSuperviewWithLayoutBlock(iconView,
-                                                                  size: .square(24))
+                stackView.centerSubviewOnSuperview(iconView, size: .square(24))
             }
 
             if mediaAlbumHasPendingAttachment {
diff --git a/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentFooter.swift b/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentFooter.swift
index 24044709f2d..ed7b6f7618f 100644
--- a/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentFooter.swift
+++ b/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentFooter.swift
@@ -362,7 +362,7 @@ public class CVComponentFooter: CVComponentBase, CVComponent {
         fileprivate let statusIndicatorImageView = UIImageView()
         // TODO:
         fileprivate let messageTimerView = OWSMessageTimerView()
-        fileprivate lazy var innerStackBackground = innerStack.addBackgroundView(withBackgroundColor: .clear, cornerRadius: 11)
+        fileprivate lazy var innerStackBackground = innerStack.addBackgroundView(backgroundColor: .clear, cornerRadius: 11)
 
         public var isDedicatedCellView = false
 
diff --git a/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentSticker.swift b/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentSticker.swift
index d172954d2c4..7d42a6f527d 100644
--- a/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentSticker.swift
+++ b/Signal/src/ViewControllers/ConversationView/CV/CVComponents/CVComponentSticker.swift
@@ -77,8 +77,7 @@ public class CVComponentSticker: CVComponentBase, CVComponent {
                                                             style: .withCircle,
                                                             conversationStyle: conversationStyle)
                 stackView.addSubview(progressView)
-                stackView.centerSubviewOnSuperviewWithLayoutBlock(progressView,
-                                                                  size: progressView.layoutSize)
+                stackView.centerSubviewOnSuperview(progressView, size: progressView.layoutSize)
             case .pendingDownload:
                 break
             case .downloading:
@@ -107,8 +106,7 @@ public class CVComponentSticker: CVComponentBase, CVComponent {
                                                         style: .withCircle,
                                                         conversationStyle: conversationStyle)
             stackView.addSubview(progressView)
-            stackView.centerSubviewOnSuperviewWithLayoutBlock(progressView,
-                                                              size: progressView.layoutSize)
+            stackView.centerSubviewOnSuperview(progressView, size: progressView.layoutSize)
         } else {
             owsFailDebug("Invalid attachment.")
             return
diff --git a/Signal/src/ViewControllers/ConversationView/Cells/CVAttachmentProgressView.swift b/Signal/src/ViewControllers/ConversationView/Cells/CVAttachmentProgressView.swift
index ff07e65c09e..3297c75e0c2 100644
--- a/Signal/src/ViewControllers/ConversationView/Cells/CVAttachmentProgressView.swift
+++ b/Signal/src/ViewControllers/ConversationView/Cells/CVAttachmentProgressView.swift
@@ -6,10 +6,8 @@ import Foundation
 import Lottie
 
 // A view for presenting attachment upload/download/failure/pending state.
-//
-// TODO: Remove iOS Auto Layout in this view.
 @objc
-public class CVAttachmentProgressView: UIView {
+public class CVAttachmentProgressView: ManualLayoutView {
 
     public enum Direction {
         case upload(attachmentStream: TSAttachmentStream)
@@ -64,19 +62,21 @@ public class CVAttachmentProgressView: UIView {
                                    style: style,
                                    conversationStyle: conversationStyle)
 
-        super.init(frame: .zero)
+        super.init(name: "CVAttachmentProgressView")
 
         createViews()
 
         configureState()
     }
 
-    deinit {
-        NotificationCenter.default.removeObserver(self)
+    @available(*, unavailable, message: "use other constructor instead.")
+    @objc
+    public required init(name: String) {
+        notImplemented()
     }
 
-    required init?(coder: NSCoder) {
-        fatalError("init(coder:) has not been implemented")
+    deinit {
+        NotificationCenter.default.removeObserver(self)
     }
 
     private static func outerDiameter(style: Style) -> CGFloat {
@@ -126,7 +126,7 @@ public class CVAttachmentProgressView: UIView {
         }
     }
 
-    private class StateView: UIView {
+    private class StateView: ManualLayoutView {
         private let diameter: CGFloat
         private let direction: Direction
         private let style: Style
@@ -136,8 +136,6 @@ public class CVAttachmentProgressView: UIView {
         private var progressView: Lottie.AnimationView?
         private lazy var outerCircleView = UIImageView()
 
-        private var layoutConstraints = [NSLayoutConstraint]()
-
         var state: State = .none {
             didSet {
                 if oldValue != state {
@@ -162,13 +160,15 @@ public class CVAttachmentProgressView: UIView {
             self.style = style
             self.conversationStyle = conversationStyle
 
-            super.init(frame: .zero)
+            super.init(name: "CVAttachmentProgressView.StateView")
 
             applyState(oldState: .none, newState: .none)
         }
 
-        required init?(coder: NSCoder) {
-            fatalError("init(coder:) has not been implemented")
+        @available(*, unavailable, message: "use other constructor instead.")
+        @objc
+        public required init(name: String) {
+            notImplemented()
         }
 
         private func applyState(oldState: State, newState: State) {
@@ -245,9 +245,7 @@ public class CVAttachmentProgressView: UIView {
                 iconSize = sizeInsideCircle * diameter / CVAttachmentProgressView.outerDiameter(style: style)
             }
             imageView.setTemplateImageName(templateName, tintColor: tintColor)
-            addSubview(imageView)
-            layoutConstraints.append(contentsOf: imageView.autoSetDimensions(to: .square(iconSize)))
-            layoutConstraints.append(contentsOf: imageView.autoCenterInSuperview())
+            addSubviewToCenterOnSuperview(imageView, size: .square(iconSize))
 
             if hasOuterCircle {
                 let imageName: String
@@ -257,8 +255,7 @@ public class CVAttachmentProgressView: UIView {
                     imageName = "circle_incoming_grey_40"
                 }
                 outerCircleView.setImage(imageName: imageName)
-                addSubview(outerCircleView)
-                layoutConstraints.append(contentsOf: outerCircleView.autoPinEdgesToSuperviewEdges())
+                addSubviewToFillSuperviewEdges(outerCircleView)
             }
         }
 
@@ -283,8 +280,7 @@ public class CVAttachmentProgressView: UIView {
             // We DO NOT play this animation; we "scrub" it to reflect
             // attachment upload/download progress.
             updateProgress(progress: progress)
-            addSubview(animationView)
-            layoutConstraints.append(contentsOf: animationView.autoPinEdgesToSuperviewEdges())
+            addSubviewToFillSuperviewEdges(animationView)
         }
 
         private func presentUnknownProgress() {
@@ -307,8 +303,7 @@ public class CVAttachmentProgressView: UIView {
             animationView.contentMode = .scaleAspectFit
             animationView.play()
 
-            addSubview(animationView)
-            layoutConstraints.append(contentsOf: animationView.autoPinEdgesToSuperviewEdges())
+            addSubviewToFillSuperviewEdges(animationView)
         }
 
         private func ensureAnimationView(_ animationView: Lottie.AnimationView?,
@@ -337,10 +332,9 @@ public class CVAttachmentProgressView: UIView {
                                                       animation.endFrame)
         }
 
-        private func reset() {
-            removeAllSubviews()
-            NSLayoutConstraint.deactivate(layoutConstraints)
-            layoutConstraints.removeAll()
+        public override func reset() {
+            super.reset()
+
             progressView?.stop()
             unknownProgressView?.stop()
             outerCircleView.image = nil
@@ -350,25 +344,17 @@ public class CVAttachmentProgressView: UIView {
 
     private func createViews() {
         let innerContentView = self.stateView
-        innerContentView.autoSetDimensions(to: .square(Self.innerDiameter(style: style)))
 
-        let outerContentView: UIView
         switch style {
         case .withCircle:
-            let circleView = OWSLayerView.circleView()
+            let circleView = ManualLayoutView.circleView(name: "circleView")
             circleView.backgroundColor = UIColor.ows_black.withAlphaComponent(0.7)
-            circleView.autoSetDimensions(to: .square(Self.outerDiameter(style: style)))
-            circleView.addSubview(innerContentView)
-            innerContentView.autoCenterInSuperview()
-            outerContentView = circleView
+            innerContentView.addSubviewToCenterOnSuperview(circleView,
+                                                           size: .square(Self.outerDiameter(style: style)))
+            addSubviewToFillSuperviewEdges(circleView)
         case .withoutCircle:
-            outerContentView = innerContentView
+            addSubviewToFillSuperviewEdges(innerContentView)
         }
-
-        addSubview(outerContentView)
-        outerContentView.autoPinEdgesToSuperviewEdges()
-        outerContentView.setContentHuggingHigh()
-        outerContentView.setCompressionResistanceHigh()
     }
 
     public var layoutSize: CGSize {
diff --git a/Signal/src/ViewControllers/ConversationView/Cells/CVMediaAlbumView.swift b/Signal/src/ViewControllers/ConversationView/Cells/CVMediaAlbumView.swift
index bb9213a5cf0..86f60c2d449 100644
--- a/Signal/src/ViewControllers/ConversationView/Cells/CVMediaAlbumView.swift
+++ b/Signal/src/ViewControllers/ConversationView/Cells/CVMediaAlbumView.swift
@@ -63,7 +63,7 @@ public class CVMediaAlbumView: ManualStackView {
 
         // UIStackView's backgroundColor property has no effect.
         if !isBorderless {
-            addBackgroundView(withBackgroundColor: Theme.backgroundColor)
+            addBackgroundView(backgroundColor: Theme.backgroundColor)
         }
 
         createContents(imageArrangement: imageArrangement,
@@ -96,9 +96,6 @@ public class CVMediaAlbumView: ManualStackView {
         var outerViews = [UIView]()
         let imageGroup1 = imageArrangement.imageGroup1
         let itemViews1 = Array(itemViews.prefix(imageGroup1.imageCount))
-        for itemView in itemViews1 {
-            itemView.measurement = ManualStackMeasurement.build(measuredSize: imageGroup1.imageSize)
-        }
         subStack1.configure(config: imageArrangement.innerStackConfig,
                             cellMeasurement: cellMeasurement,
                             measurementKey: Self.measurementKey_substack1,
@@ -109,9 +106,6 @@ public class CVMediaAlbumView: ManualStackView {
             owsAssertDebug(itemViews.count == imageGroup1.imageCount + imageGroup2.imageCount)
 
             let itemViews2 = Array(itemViews.suffix(from: imageGroup1.imageCount))
-            for itemView in itemViews2 {
-                itemView.measurement = ManualStackMeasurement.build(measuredSize: imageGroup2.imageSize)
-            }
 
             if items.count > CVMediaAlbumView.kMaxItems {
                 guard let lastView = itemViews2.last else {
@@ -124,7 +118,7 @@ public class CVMediaAlbumView: ManualStackView {
                 let tintView = UIView()
                 tintView.backgroundColor = UIColor(white: 0, alpha: 0.4)
                 lastView.addSubview(tintView)
-                subStack2.layoutSubviewToFillSuperviewBoundsWithLayoutBlock(tintView)
+                subStack2.layoutSubviewToFillSuperviewBounds(tintView)
 
                 let moreCount = max(1, items.count - CVMediaAlbumView.kMaxItems)
                 let moreCountText = OWSFormat.formatInt(moreCount)
diff --git a/Signal/src/ViewControllers/ConversationView/Cells/CVMediaView.swift b/Signal/src/ViewControllers/ConversationView/Cells/CVMediaView.swift
index 3f119455f10..26228074e39 100644
--- a/Signal/src/ViewControllers/ConversationView/Cells/CVMediaView.swift
+++ b/Signal/src/ViewControllers/ConversationView/Cells/CVMediaView.swift
@@ -5,7 +5,7 @@
 import Foundation
 import PromiseKit
 
-public class CVMediaView: ManualStackView {
+public class CVMediaView: ManualLayoutView {
 
     private enum MediaError {
         case missing
@@ -46,16 +46,12 @@ public class CVMediaView: ManualStackView {
         createContents()
     }
 
-    @available(*, unavailable, message: "use other init() instead.")
-    required public init?(coder aDecoder: NSCoder) {
+    @available(*, unavailable, message: "use other constructor instead.")
+    @objc
+    public required init(name: String) {
         notImplemented()
     }
 
-    @available(swift, obsoleted: 1.0)
-    required init(name: String, arrangedSubviews: [UIView] = []) {
-        owsFail("Do not use this initializer.")
-    }
-
     // MARK: -
 
     private func createContents() {
@@ -132,6 +128,7 @@ public class CVMediaView: ManualStackView {
         self.reusableMediaView = reusableMediaView
         let mediaView = reusableMediaView.mediaView
 
+        mediaView.removeFromSuperview()
         addSubviewToFillSuperviewEdges(mediaView)
 
         if let imageView = mediaView as? UIImageView {
@@ -222,13 +219,13 @@ public class CVMediaView: ManualStackView {
         playVideoCircleView.backgroundColor = UIColor.ows_black.withAlphaComponent(0.7)
         playVideoCircleView.isUserInteractionEnabled = false
         playVideoButton.addSubview(playVideoCircleView)
-        layoutSubviewToFillSuperviewBoundsWithLayoutBlock(playVideoCircleView)
+        layoutSubviewToFillSuperviewBounds(playVideoCircleView)
 
         let playVideoIconView = UIImageView.withTemplateImageName("play-solid-32",
                                                                   tintColor: UIColor.ows_white)
         playVideoIconView.isUserInteractionEnabled = false
         playVideoButton.addSubview(playVideoIconView)
-        centerSubviewOnSuperviewWithLayoutBlock(playVideoIconView, size: CGSize(square: playVideoIconWidth))
+        centerSubviewOnSuperview(playVideoIconView, size: CGSize(square: playVideoIconWidth))
     }
 
     private var hasBlurHash: Bool {
diff --git a/SignalMessaging/Views/ManualLayoutView.swift b/SignalMessaging/Views/ManualLayoutView.swift
new file mode 100644
index 00000000000..3826048470b
--- /dev/null
+++ b/SignalMessaging/Views/ManualLayoutView.swift
@@ -0,0 +1,264 @@
+//
+//  Copyright (c) 2021 Open Whisper Systems. All rights reserved.
+//
+
+import Foundation
+
+@objc
+open class ManualLayoutView: UIView {
+
+    public typealias LayoutBlock = (UIView) -> Void
+
+    private var layoutBlocks = [LayoutBlock]()
+
+    public var name: String { accessibilityLabel ?? "Unknown" }
+
+    @objc
+    public required init(name: String) {
+        super.init(frame: .zero)
+
+        translatesAutoresizingMaskIntoConstraints = false
+
+        #if TESTABLE_BUILD
+        self.accessibilityLabel = name
+        #endif
+    }
+
+    @available(*, unavailable, message: "use other constructor instead.")
+    @objc
+    public required init(coder aDecoder: NSCoder) {
+        notImplemented()
+    }
+
+    // MARK: - Circles and Pills
+
+    @objc
+    public static func circleView(name: String) -> ManualLayoutView {
+        let result = ManualLayoutView(name: name)
+        result.addLayoutBlock { view in
+            view.layer.cornerRadius = min(view.width, view.height) * 0.5
+        }
+        return result
+    }
+
+    @objc
+    public static func pillView(name: String) -> ManualLayoutView {
+        let result = ManualLayoutView(name: name)
+        result.addLayoutBlock { view in
+            view.layer.cornerRadius = min(view.width, view.height) * 0.5
+        }
+        return result
+    }
+
+    // MARK: - Sizing
+
+    public var preferredSize: CGSize?
+
+    public override func sizeThatFits(_ size: CGSize) -> CGSize {
+        preferredSize ?? .zero
+    }
+
+    public override var intrinsicContentSize: CGSize {
+        return sizeThatFits(CGSize(width: CGFloat.greatestFiniteMagnitude,
+                                   height: CGFloat.greatestFiniteMagnitude))
+    }
+
+    // MARK: - Layout
+
+    public override var bounds: CGRect {
+        didSet {
+            if oldValue != bounds {
+                viewSizeDidChange()
+            }
+        }
+    }
+
+    public override var frame: CGRect {
+        didSet {
+            if oldValue != frame {
+                viewSizeDidChange()
+            }
+        }
+    }
+
+    func viewSizeDidChange() {
+        layoutSubviews()
+    }
+
+    @objc
+    public override func layoutSubviews() {
+        layoutSubviews(skipLayoutBlocks: false)
+    }
+
+    @objc
+    public func layoutSubviews(skipLayoutBlocks: Bool = false) {
+        AssertIsOnMainThread()
+
+        super.layoutSubviews()
+
+        if !skipLayoutBlocks {
+            applyLayoutBlocks()
+        }
+    }
+
+    @objc
+    public func applyLayoutBlocks() {
+        AssertIsOnMainThread()
+
+        for layoutBlock in layoutBlocks {
+            layoutBlock(self)
+        }
+    }
+
+    static func setSubviewFrame(subview: UIView, frame: CGRect) {
+        guard subview.frame != frame else {
+            return
+        }
+        subview.frame = frame
+        // TODO: Remove?
+        subview.setNeedsLayout()
+    }
+
+    // MARK: - Reset
+
+    open func reset() {
+        removeAllSubviews()
+        layoutBlocks.removeAll()
+
+        invalidateIntrinsicContentSize()
+        setNeedsLayout()
+
+        self.tapBlock = nil
+        if let gestureRecognizers = self.gestureRecognizers {
+            for gestureRecognizer in gestureRecognizers {
+                removeGestureRecognizer(gestureRecognizer)
+            }
+        }
+    }
+
+    // MARK: - Convenience Methods
+
+    public func addSubview(_ subview: UIView,
+                           withLayoutBlock layoutBlock: @escaping LayoutBlock) {
+        owsAssertDebug(subview.superview == nil)
+
+        subview.translatesAutoresizingMaskIntoConstraints = false
+
+        addSubview(subview)
+
+        addLayoutBlock(layoutBlock)
+    }
+
+    public func addLayoutBlock(_ layoutBlock: @escaping LayoutBlock) {
+        layoutBlocks.append(layoutBlock)
+    }
+
+    public func centerSubviewWithLayoutBlock(_ subview: UIView,
+                                             onSiblingView siblingView: UIView,
+                                             size: CGSize) {
+        owsAssertDebug(subview.superview != nil)
+        owsAssertDebug(subview.superview == siblingView.superview)
+
+        subview.translatesAutoresizingMaskIntoConstraints = false
+
+        addLayoutBlock { _ in
+            guard let superview = subview.superview else {
+                owsFailDebug("Missing superview.")
+                return
+            }
+            owsAssertDebug(superview == siblingView.superview)
+
+            let siblingCenter = superview.convert(siblingView.center,
+                                                  from: siblingView.superview)
+            let subviewFrame = CGRect(origin: CGPoint(x: siblingCenter.x - subview.width * 0.5,
+                                                      y: siblingCenter.y - subview.height * 0.5),
+                                      size: size)
+            Self.setSubviewFrame(subview: subview, frame: subviewFrame)
+        }
+    }
+
+    public func addSubviewToCenterOnSuperview(_ subview: UIView, size: CGSize) {
+        owsAssertDebug(subview.superview == nil)
+
+        addSubview(subview)
+
+        centerSubviewOnSuperview(subview, size: size)
+    }
+
+    public func centerSubviewOnSuperview(_ subview: UIView, size: CGSize) {
+        owsAssertDebug(subview.superview != nil)
+
+        subview.translatesAutoresizingMaskIntoConstraints = false
+
+        addLayoutBlock { _ in
+            guard let superview = subview.superview else {
+                owsFailDebug("Missing superview.")
+                return
+            }
+
+            let superviewBounds = superview.bounds
+            let subviewFrame = CGRect(origin: CGPoint(x: (superviewBounds.width - subview.width) * 0.5,
+                                                      y: (superviewBounds.height - subview.height) * 0.5),
+                                      size: size)
+            Self.setSubviewFrame(subview: subview, frame: subviewFrame)
+        }
+    }
+
+    public func addSubviewToFillSuperviewEdges(_ subview: UIView) {
+        owsAssertDebug(subview.superview == nil)
+
+        addSubview(subview)
+
+        layoutSubviewToFillSuperviewBounds(subview)
+    }
+
+    public func layoutSubviewToFillSuperviewBounds(_ subview: UIView) {
+        owsAssertDebug(subview.superview != nil)
+
+        subview.translatesAutoresizingMaskIntoConstraints = false
+
+        addLayoutBlock { _ in
+            guard let superview = subview.superview else {
+                owsFailDebug("Missing superview.")
+                return
+            }
+
+            Self.setSubviewFrame(subview: subview, frame: superview.bounds)
+        }
+    }
+
+    // MARK: - Gestures
+
+    public typealias TapBlock = () -> Void
+    private var tapBlock: TapBlock?
+
+    public func addTapGesture(_ tapBlock: @escaping TapBlock) {
+        self.tapBlock = tapBlock
+        isUserInteractionEnabled = true
+        addGestureRecognizer(UITapGestureRecognizer(target: self, action: #selector(didTap)))
+    }
+
+    @objc
+    private func didTap() {
+        guard let tapBlock = tapBlock else {
+            owsFailDebug("Missing tapBlock.")
+            return
+        }
+        tapBlock()
+    }
+
+    // MARK: - Gestures
+
+    // TODO: Ideally ManualLayoutView will be transparent by default.
+    // But we should be able to disable transparency so that a separate
+    // background view isn't necessary.
+    @discardableResult
+    public func addBackgroundView(backgroundColor: UIColor, cornerRadius: CGFloat = 0) -> UIView {
+        let backgroundView = UIView()
+        backgroundView.backgroundColor = backgroundColor
+        backgroundView.layer.cornerRadius = cornerRadius
+        addSubviewToFillSuperviewEdges(backgroundView)
+        sendSubviewToBack(backgroundView)
+        return backgroundView
+    }
+}
diff --git a/SignalMessaging/Views/ManualStackView.swift b/SignalMessaging/Views/ManualStackView.swift
index c3948f948fd..68fd046a535 100644
--- a/SignalMessaging/Views/ManualStackView.swift
+++ b/SignalMessaging/Views/ManualStackView.swift
@@ -4,101 +4,59 @@
 
 import Foundation
 
-public struct ManualStackSubviewInfo: Equatable {
-    let measuredSize: CGSize
-    let hasFixedWidth: Bool
-    let hasFixedHeight: Bool
-
-    public init(measuredSize: CGSize,
-                hasFixedWidth: Bool = false,
-                hasFixedHeight: Bool = false) {
-        self.measuredSize = measuredSize
-        self.hasFixedWidth = hasFixedWidth
-        self.hasFixedHeight = hasFixedHeight
-    }
-
-    public init(measuredSize: CGSize, hasFixedSize: Bool) {
-        self.measuredSize = measuredSize
-        self.hasFixedWidth = hasFixedSize
-        self.hasFixedHeight = hasFixedSize
-    }
-
-    public init(measuredSize: CGSize, subview: UIView) {
-        self.measuredSize = measuredSize
-
-        self.hasFixedWidth = subview.contentHuggingPriority(for: .horizontal) != .defaultHigh
-        self.hasFixedHeight = subview.contentHuggingPriority(for: .vertical) != .defaultHigh
-    }
-
-    public static var empty: ManualStackSubviewInfo {
-        ManualStackSubviewInfo(measuredSize: .zero)
-    }
+@objc
+open class ManualStackView: ManualLayoutView {
 
-    func hasFixedSizeOnAxis(isHorizontalLayout: Bool) -> Bool {
-        isHorizontalLayout ? hasFixedWidth : hasFixedHeight
-    }
+    public typealias Measurement = ManualStackMeasurement
 
-    func hasFixedSizeOffAxis(isHorizontalLayout: Bool) -> Bool {
-        isHorizontalLayout ? hasFixedHeight : hasFixedWidth
-    }
-}
+    private var arrangedSubviews = [UIView]()
 
-// MARK: -
+    public var measurement: Measurement?
 
-public extension CGSize {
-    var asManualSubviewInfo: ManualStackSubviewInfo {
-        ManualStackSubviewInfo(measuredSize: self)
-    }
+    @objc
+    public required init(name: String, arrangedSubviews: [UIView] = []) {
+        super.init(name: name)
 
-    func asManualSubviewInfo(hasFixedWidth: Bool = false,
-                             hasFixedHeight: Bool = false) -> ManualStackSubviewInfo {
-        ManualStackSubviewInfo(measuredSize: self,
-                               hasFixedWidth: hasFixedWidth,
-                               hasFixedHeight: hasFixedHeight)
+        addArrangedSubviews(arrangedSubviews)
     }
 
-    func asManualSubviewInfo(hasFixedSize: Bool) -> ManualStackSubviewInfo {
-        ManualStackSubviewInfo(measuredSize: self, hasFixedSize: hasFixedSize)
+    @available(*, unavailable, message: "use other constructor instead.")
+    @objc
+    public required init(name: String) {
+        notImplemented()
     }
-}
 
-// MARK: -
+    // MARK: - Config
 
-public struct ManualStackMeasurement: Equatable {
-    public let measuredSize: CGSize
+    public var axis: NSLayoutConstraint.Axis = .horizontal
+    public var alignment: UIStackView.Alignment = .center
+    public var spacing: CGFloat = 0
 
-    fileprivate let subviewInfos: [ManualStackSubviewInfo]
+    public typealias Config = OWSStackView.Config
 
-    fileprivate var subviewMeasuredSizes: [CGSize] {
-        subviewInfos.map { $0.measuredSize }
+    public func apply(config: Config) {
+        if self.axis != config.axis {
+            self.axis = config.axis
+        }
+        if self.alignment != config.alignment {
+            self.alignment = config.alignment
+        }
+        if self.spacing != config.spacing {
+            self.spacing = config.spacing
+        }
+        if self.layoutMargins != config.layoutMargins {
+            self.layoutMargins = config.layoutMargins
+        }
     }
 
-    public static func build(measuredSize: CGSize) -> ManualStackMeasurement {
-        ManualStackMeasurement(measuredSize: measuredSize, subviewInfos: [])
+    public var asConfig: Config {
+        Config(axis: self.axis,
+               alignment: self.alignment,
+               spacing: self.spacing,
+               layoutMargins: self.layoutMargins)
     }
-}
-
-// MARK: -
-
-@objc
-open class ManualStackView: OWSStackView {
-
-    public typealias Measurement = ManualStackMeasurement
-
-    public var name: String { accessibilityLabel ?? "Unknown" }
 
-    private var managedSubviews = [UIView]()
-
-    public var measurement: Measurement?
-
-    private var layoutBlocks = [LayoutBlock]()
-
-    @objc
-    public required init(name: String, arrangedSubviews: [UIView] = []) {
-        super.init(name: name, arrangedSubviews: arrangedSubviews)
-
-        translatesAutoresizingMaskIntoConstraints = false
-    }
+    // MARK: - Arrangement
 
     private struct ArrangementItem {
         let subview: UIView
@@ -106,7 +64,7 @@ open class ManualStackView: OWSStackView {
 
         func apply() {
             if subview.frame != frame {
-                ManualStackView.setSubviewFrame(subview: subview, frame: frame)
+                ManualLayoutView.setSubviewFrame(subview: subview, frame: frame)
             }
         }
     }
@@ -124,20 +82,10 @@ open class ManualStackView: OWSStackView {
     // We cache the resolved layout of the subviews.
     private var arrangement: Arrangement?
 
-    public override var bounds: CGRect {
-        didSet {
-            if oldValue.size != bounds.size {
-                invalidateArrangement()
-            }
-        }
-    }
+    override func viewSizeDidChange() {
+        invalidateArrangement()
 
-    public override var frame: CGRect {
-        didSet {
-            if oldValue.size != frame.size {
-                invalidateArrangement()
-            }
-        }
+        super.viewSizeDidChange()
     }
 
     public func invalidateArrangement() {
@@ -154,10 +102,6 @@ open class ManualStackView: OWSStackView {
         return measurement.measuredSize
     }
 
-    public override var intrinsicContentSize: CGSize {
-        return sizeThatFits(CGSize(width: CGFloat.greatestFiniteMagnitude, height: CGFloat.greatestFiniteMagnitude))
-    }
-
     @objc
     public override func addSubview(_ view: UIView) {
         owsAssertDebug(!subviews.contains(view))
@@ -167,45 +111,49 @@ open class ManualStackView: OWSStackView {
 
     // NOTE: This method does _NOT_ call the superclass implementation.
     @objc
-    public override func addArrangedSubview(_ view: UIView) {
+    public func addArrangedSubview(_ view: UIView) {
         addSubview(view)
-        owsAssertDebug(!managedSubviews.contains(view))
+        owsAssertDebug(!arrangedSubviews.contains(view))
 
         view.translatesAutoresizingMaskIntoConstraints = false
 
-        managedSubviews.append(view)
+        arrangedSubviews.append(view)
+    }
+
+    func addArrangedSubviews(_ subviews: [UIView], reverseOrder: Bool = false) {
+        var subviews = subviews
+        if reverseOrder {
+            subviews.reverse()
+        }
+        for subview in subviews {
+            addArrangedSubview(subview)
+        }
     }
 
     @objc
     public override func willRemoveSubview(_ view: UIView) {
-        managedSubviews = self.managedSubviews.filter { view != $0 }
+        arrangedSubviews = self.arrangedSubviews.filter { view != $0 }
         super.willRemoveSubview(view)
         invalidateArrangement()
     }
 
     @objc
-    public override func removeArrangedSubview(_ view: UIView) {
+    public func removeArrangedSubview(_ view: UIView) {
         view.removeFromSuperview()
-    }
 
-    @objc
-    public override func setNeedsLayout() {
-        super.setNeedsLayout()
+        arrangedSubviews = arrangedSubviews.filter { $0 != view }
     }
 
     @objc
     public override func layoutSubviews() {
         AssertIsOnMainThread()
 
-        super.layoutSubviews()
+        // We apply the layout blocks _after_ the arrangement.
+        super.layoutSubviews(skipLayoutBlocks: true)
 
         ensureArrangement()?.apply()
 
-        layoutBlock?(self)
-
-        for layoutBlock in layoutBlocks {
-            layoutBlock(self)
-        }
+        applyLayoutBlocks()
     }
 
     public func configure(config: Config,
@@ -230,15 +178,15 @@ open class ManualStackView: OWSStackView {
             owsFailDebug("\(name): Missing measurement.")
             return nil
         }
-        if managedSubviews.count > measurement.subviewInfos.count {
-            owsFailDebug("\(name): managedSubviews: \(managedSubviews.count) != subviewInfos: \(measurement.subviewInfos.count)")
+        if arrangedSubviews.count > measurement.subviewInfos.count {
+            owsFailDebug("\(name): arrangedSubviews: \(arrangedSubviews.count) != subviewInfos: \(measurement.subviewInfos.count)")
         }
         let isHorizontal = axis == .horizontal
-        let count = min(managedSubviews.count, measurement.subviewInfos.count)
+        let count = min(arrangedSubviews.count, measurement.subviewInfos.count)
         // Build the list of subviews to layout and find their layout info.
         var layoutItems = [LayoutItem]()
         for index in 0..<count {
-            guard let subview = managedSubviews[safe: index] else {
+            guard let subview = arrangedSubviews[safe: index] else {
                 owsFailDebug("\(name): Missing subview.")
                 break
             }
@@ -561,131 +509,110 @@ open class ManualStackView: OWSStackView {
     open override func reset() {
         super.reset()
 
-        self.measurement = nil
-        self.layoutBlocks.removeAll()
-    }
-
-    // MARK: -
-
-    public func addSubview(_ subview: UIView,
-                           withLayoutBlock layoutBlock: @escaping LayoutBlock) {
-        owsAssertDebug(subview.superview == nil)
-
-        subview.translatesAutoresizingMaskIntoConstraints = false
-
-        addSubview(subview)
+        alignment = .fill
+        axis = .vertical
+        spacing = 0
 
-        addLayoutBlock(layoutBlock)
-    }
-
-    public func addLayoutBlock(_ layoutBlock: @escaping LayoutBlock) {
-        layoutBlocks.append(layoutBlock)
+        self.measurement = nil
     }
+}
 
-    public func centerSubviewWithLayoutBlock(_ subview: UIView,
-                                             onSiblingView siblingView: UIView,
-                                             size: CGSize) {
-        owsAssertDebug(subview.superview != nil)
-        owsAssertDebug(subview.superview == siblingView.superview)
-
-        subview.translatesAutoresizingMaskIntoConstraints = false
+// MARK: -
 
-        addLayoutBlock { _ in
-            guard let superview = subview.superview else {
-                owsFailDebug("Missing superview.")
-                return
-            }
-            owsAssertDebug(superview == siblingView.superview)
+// TODO: Can this be moved to UIView+OWS.swift?
+fileprivate extension CGRect {
 
-            let siblingCenter = superview.convert(siblingView.center,
-                                                  from: siblingView.superview)
-            let subviewFrame = CGRect(origin: CGPoint(x: siblingCenter.x - subview.width * 0.5,
-                                                      y: siblingCenter.y - subview.height * 0.5),
-                                      size: size)
-            Self.setSubviewFrame(subview: subview, frame: subviewFrame)
+    var width: CGFloat {
+        get {
+            size.width
+        }
+        set {
+            size.width = newValue
         }
     }
 
-    private static func setSubviewFrame(subview: UIView, frame: CGRect) {
-        guard subview.frame != frame else {
-            return
+    var height: CGFloat {
+        get {
+            size.height
+        }
+        set {
+            size.height = newValue
         }
-        subview.frame = frame
-        // TODO: Remove?
-        subview.setNeedsLayout()
     }
+}
 
-    public func addSubviewToCenterOnSuperview(_ subview: UIView, size: CGSize) {
-        owsAssertDebug(subview.superview == nil)
+// MARK: -
 
-        addSubview(subview)
+public struct ManualStackSubviewInfo: Equatable {
+    let measuredSize: CGSize
+    let hasFixedWidth: Bool
+    let hasFixedHeight: Bool
 
-        centerSubviewOnSuperviewWithLayoutBlock(subview, size: size)
+    public init(measuredSize: CGSize,
+                hasFixedWidth: Bool = false,
+                hasFixedHeight: Bool = false) {
+        self.measuredSize = measuredSize
+        self.hasFixedWidth = hasFixedWidth
+        self.hasFixedHeight = hasFixedHeight
     }
 
-    public func centerSubviewOnSuperviewWithLayoutBlock(_ subview: UIView, size: CGSize) {
-        owsAssertDebug(subview.superview != nil)
-
-        subview.translatesAutoresizingMaskIntoConstraints = false
+    public init(measuredSize: CGSize, hasFixedSize: Bool) {
+        self.measuredSize = measuredSize
+        self.hasFixedWidth = hasFixedSize
+        self.hasFixedHeight = hasFixedSize
+    }
 
-        addLayoutBlock { _ in
-            guard let superview = subview.superview else {
-                owsFailDebug("Missing superview.")
-                return
-            }
+    public init(measuredSize: CGSize, subview: UIView) {
+        self.measuredSize = measuredSize
 
-            let superviewBounds = superview.bounds
-            let subviewFrame = CGRect(origin: CGPoint(x: (superviewBounds.width - subview.width) * 0.5,
-                                                      y: (superviewBounds.height - subview.height) * 0.5),
-                                      size: size)
-            Self.setSubviewFrame(subview: subview, frame: subviewFrame)
-        }
+        self.hasFixedWidth = subview.contentHuggingPriority(for: .horizontal) != .defaultHigh
+        self.hasFixedHeight = subview.contentHuggingPriority(for: .vertical) != .defaultHigh
     }
 
-    public func addSubviewToFillSuperviewEdges(_ subview: UIView) {
-        owsAssertDebug(subview.superview == nil)
+    public static var empty: ManualStackSubviewInfo {
+        ManualStackSubviewInfo(measuredSize: .zero)
+    }
 
-        addSubview(subview)
+    func hasFixedSizeOnAxis(isHorizontalLayout: Bool) -> Bool {
+        isHorizontalLayout ? hasFixedWidth : hasFixedHeight
+    }
 
-        layoutSubviewToFillSuperviewBoundsWithLayoutBlock(subview)
+    func hasFixedSizeOffAxis(isHorizontalLayout: Bool) -> Bool {
+        isHorizontalLayout ? hasFixedHeight : hasFixedWidth
     }
+}
 
-    public func layoutSubviewToFillSuperviewBoundsWithLayoutBlock(_ subview: UIView) {
-        owsAssertDebug(subview.superview != nil)
+// MARK: -
 
-        subview.translatesAutoresizingMaskIntoConstraints = false
+public extension CGSize {
+    var asManualSubviewInfo: ManualStackSubviewInfo {
+        ManualStackSubviewInfo(measuredSize: self)
+    }
 
-        addLayoutBlock { _ in
-            guard let superview = subview.superview else {
-                owsFailDebug("Missing superview.")
-                return
-            }
+    func asManualSubviewInfo(hasFixedWidth: Bool = false,
+                             hasFixedHeight: Bool = false) -> ManualStackSubviewInfo {
+        ManualStackSubviewInfo(measuredSize: self,
+                               hasFixedWidth: hasFixedWidth,
+                               hasFixedHeight: hasFixedHeight)
+    }
 
-            Self.setSubviewFrame(subview: subview, frame: superview.bounds)
-        }
+    func asManualSubviewInfo(hasFixedSize: Bool) -> ManualStackSubviewInfo {
+        ManualStackSubviewInfo(measuredSize: self, hasFixedSize: hasFixedSize)
     }
 }
 
 // MARK: -
 
-// TODO: Can this be moved to UIView+OWS.swift?
-fileprivate extension CGRect {
+public struct ManualStackMeasurement: Equatable {
+    public let measuredSize: CGSize
 
-    var width: CGFloat {
-        get {
-            size.width
-        }
-        set {
-            size.width = newValue
-        }
+    fileprivate let subviewInfos: [ManualStackSubviewInfo]
+
+    fileprivate var subviewMeasuredSizes: [CGSize] {
+        subviewInfos.map { $0.measuredSize }
     }
 
-    var height: CGFloat {
-        get {
-            size.height
-        }
-        set {
-            size.height = newValue
-        }
+    public static func build(measuredSize: CGSize) -> ManualStackMeasurement {
+        ManualStackMeasurement(measuredSize: measuredSize, subviewInfos: [])
     }
 }
diff --git a/SignalMessaging/Views/OWSLayerView.swift b/SignalMessaging/Views/OWSLayerView.swift
index 2221316c156..d08b3688722 100644
--- a/SignalMessaging/Views/OWSLayerView.swift
+++ b/SignalMessaging/Views/OWSLayerView.swift
@@ -125,6 +125,7 @@ open class OWSLayerView: UIView {
 
         self.layoutCallback = { _ in }
 
+        self.tapBlock = nil
         if let gestureRecognizers = self.gestureRecognizers {
             for gestureRecognizer in gestureRecognizers {
                 removeGestureRecognizer(gestureRecognizer)
diff --git a/SignalServiceKit/src/Util/FeatureFlags.swift b/SignalServiceKit/src/Util/FeatureFlags.swift
index 7fbbbc2efad..0dcc03f21c2 100644
--- a/SignalServiceKit/src/Util/FeatureFlags.swift
+++ b/SignalServiceKit/src/Util/FeatureFlags.swift
@@ -231,7 +231,7 @@ public class DebugFlags: BaseFlags {
     public static let suppressBackgroundActivity = false
 
     @objc
-    public static let reduceLogChatter = build.includes(.dev) && false
+    public static let reduceLogChatter = true
 
     @objc
     public static let logSQLQueries = build.includes(.dev) && !reduceLogChatter
