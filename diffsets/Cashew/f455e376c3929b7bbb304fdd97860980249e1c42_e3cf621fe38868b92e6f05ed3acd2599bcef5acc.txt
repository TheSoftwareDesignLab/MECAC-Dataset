diff --git a/budget/lib/database/tables.dart b/budget/lib/database/tables.dart
index c979ac85d..dd48d1a36 100644
--- a/budget/lib/database/tables.dart
+++ b/budget/lib/database/tables.dart
@@ -546,6 +546,7 @@ class TransactionWithCategory {
   final Budget? budget;
   final Objective? objective;
   final TransactionCategory? subCategory;
+  final Objective? objectiveLoan;
   TransactionWithCategory({
     required this.category,
     required this.transaction,
@@ -553,6 +554,7 @@ class TransactionWithCategory {
     this.budget,
     this.objective,
     this.subCategory,
+    required this.objectiveLoan,
   });
 }
 
@@ -1370,6 +1372,8 @@ class FinanceDatabase extends _$FinanceDatabase {
     Budget? budget,
   }) {
     final $CategoriesTable subCategories = alias(categories, 'subCategories');
+    final $ObjectivesTable objectiveLoans = alias(objectives, 'objectiveLoans');
+
     // the date, which acts as the end point and everything before this day is inclusive
     // for onlyShowBasedOnTimeRange, but we don't want to include this day
     List<Stream<double?>> mergedStreams = [];
@@ -1388,6 +1392,10 @@ class FinanceDatabase extends _$FinanceDatabase {
             objectives,
             objectives.objectivePk.equalsExp(transactions.objectiveFk),
           ),
+          leftOuterJoin(
+            objectiveLoans,
+            objectiveLoans.objectivePk.equalsExp(transactions.objectiveLoanFk),
+          ),
           leftOuterJoin(subCategories,
               subCategories.categoryPk.equalsExp(transactions.subCategoryFk)),
         ])
@@ -1403,14 +1411,21 @@ class FinanceDatabase extends _$FinanceDatabase {
                     : onlyShowBasedOnTimeRange(
                         transactions, start, end, budget)) &
             // Should match that of getTransactionCategoryWithDay
-            onlyShowTransactionBasedOnSearchQuery(transactions, search,
-                withCategories: true,
-                joinedWithSubcategoriesTable: subCategories) &
+            onlyShowTransactionBasedOnSearchQuery(
+              transactions,
+              search,
+              withCategories: true,
+              joinedWithSubcategoriesTable: subCategories,
+              withBudgets: true,
+              withObjectives: true,
+              joinedWithObjectiveLoans: objectiveLoans,
+            ) &
             // Pass in the subcategories table so we can search name based on subcategory
             onlyShowIfFollowsSearchFilters(
               transactions,
               searchFilters,
               joinedWithSubcategoriesTable: subCategories,
+              joinedWithObjectiveLoans: objectiveLoans,
               joinedWithBudgets: true,
               joinedWithCategories: true,
               joinedWithObjectives: true,
@@ -1456,6 +1471,7 @@ class FinanceDatabase extends _$FinanceDatabase {
     Budget? budget,
   }) {
     final $CategoriesTable subCategories = alias(categories, 'subCategories');
+    final $ObjectivesTable objectiveLoans = alias(objectives, 'objectiveLoans');
     JoinedSelectStatement<HasResultSet, dynamic> query;
 
     query = select(transactions).join([
@@ -1469,6 +1485,10 @@ class FinanceDatabase extends _$FinanceDatabase {
         objectives,
         objectives.objectivePk.equalsExp(transactions.objectiveFk),
       ),
+      leftOuterJoin(
+        objectiveLoans,
+        objectiveLoans.objectivePk.equalsExp(transactions.objectiveLoanFk),
+      ),
       leftOuterJoin(subCategories,
           subCategories.categoryPk.equalsExp(transactions.subCategoryFk)),
     ])
@@ -1493,7 +1513,10 @@ class FinanceDatabase extends _$FinanceDatabase {
         // Should match that of getTransactionCategoryWithDay
         onlyShowTransactionBasedOnSearchQuery(transactions, search,
                 withCategories: true,
-                joinedWithSubcategoriesTable: subCategories) &
+                joinedWithSubcategoriesTable: subCategories,
+                withBudgets: true,
+                withObjectives: true,
+                joinedWithObjectiveLoans: objectiveLoans) &
             // Pass in the subcategories table so we can search name based on subcategory
             onlyShowIfFollowsSearchFilters(
               transactions,
@@ -1502,6 +1525,7 @@ class FinanceDatabase extends _$FinanceDatabase {
               joinedWithBudgets: true,
               joinedWithCategories: true,
               joinedWithObjectives: true,
+              joinedWithObjectiveLoans: objectiveLoans,
             ) &
             onlyShowIfFollowsFilters(transactions,
                 budget: budget,
@@ -1529,11 +1553,13 @@ class FinanceDatabase extends _$FinanceDatabase {
             transaction = transaction.copyWith(paid: false);
           }
           return TransactionWithCategory(
-              category: row.readTable(categories),
-              transaction: transaction,
-              budget: row.readTableOrNull(budgets),
-              objective: row.readTableOrNull(objectives),
-              subCategory: row.readTableOrNull(subCategories));
+            category: row.readTable(categories),
+            transaction: transaction,
+            budget: row.readTableOrNull(budgets),
+            objective: row.readTableOrNull(objectives),
+            subCategory: row.readTableOrNull(subCategories),
+            objectiveLoan: row.readTableOrNull(objectiveLoans),
+          );
         }).toList());
   }
 
@@ -1554,6 +1580,7 @@ class FinanceDatabase extends _$FinanceDatabase {
         joinedWithCategories: false,
         joinedWithObjectives: false,
         joinedWithSubcategoriesTable: null,
+        joinedWithObjectiveLoans: null,
       ))
       ..addColumns([max, min]);
     return query
@@ -1594,7 +1621,8 @@ class FinanceDatabase extends _$FinanceDatabase {
       ..where(
         onlyShowTransactionBasedOnSearchQuery(transactions, search,
                 withCategories: true,
-                joinedWithSubcategoriesTable: subCategories) &
+                joinedWithSubcategoriesTable: subCategories,
+                joinedWithObjectiveLoans: null) &
             onlyShowIfFollowsSearchFilters(
               transactions,
               searchFilters,
@@ -1602,6 +1630,7 @@ class FinanceDatabase extends _$FinanceDatabase {
               joinedWithSubcategoriesTable: subCategories,
               joinedWithBudgets: false,
               joinedWithObjectives: false,
+              joinedWithObjectiveLoans: null,
             ) &
             onlyShowIfFollowsFilters(transactions,
                 budget: budget,
@@ -1882,9 +1911,13 @@ class FinanceDatabase extends _$FinanceDatabase {
           subCategories.categoryPk.equalsExp(transactions.subCategoryFk)),
     ])
       ..orderBy([OrderingTerm.asc(transactions.dateCreated)])
-      ..where(onlyShowTransactionBasedOnSearchQuery(transactions, searchString,
-              withCategories: true,
-              joinedWithSubcategoriesTable: subCategories) &
+      ..where(onlyShowTransactionBasedOnSearchQuery(
+            transactions,
+            searchString,
+            withCategories: true,
+            joinedWithSubcategoriesTable: subCategories,
+            joinedWithObjectiveLoans: null,
+          ) &
           transactions.skipPaid.equals(false) &
           transactions.paid.equals(false) &
           (isOverdueTransactions == null
@@ -2457,6 +2490,7 @@ class FinanceDatabase extends _$FinanceDatabase {
       getAllTransactionsWithCategoryWalletBudgetObjectiveSubCategory(
           Expression<bool> Function($TransactionsTable) filter) async {
     final subCategories = alias(categories, 'subCategories');
+    final $ObjectivesTable objectiveLoans = alias(objectives, 'objectiveLoans');
     final query = (select(transactions)
           ..where(filter)
           ..orderBy([(t) => OrderingTerm.desc(t.dateCreated)]))
@@ -2477,6 +2511,10 @@ class FinanceDatabase extends _$FinanceDatabase {
         objectives,
         objectives.objectivePk.equalsExp(transactions.objectiveFk),
       ),
+      leftOuterJoin(
+        objectiveLoans,
+        objectiveLoans.objectivePk.equalsExp(transactions.objectiveLoanFk),
+      ),
       leftOuterJoin(subCategories,
           subCategories.categoryPk.equalsExp(transactions.subCategoryFk)),
     ]);
@@ -2491,6 +2529,7 @@ class FinanceDatabase extends _$FinanceDatabase {
         budget: row.readTableOrNull(budgets),
         objective: row.readTableOrNull(objectives),
         subCategory: row.readTableOrNull(subCategories),
+        objectiveLoan: row.readTableOrNull(objectiveLoans),
       );
     }).toList();
   }
@@ -2695,6 +2734,7 @@ class FinanceDatabase extends _$FinanceDatabase {
   //create or update a new wallet
   Future<int> createOrUpdateWallet(TransactionWallet wallet,
       {DateTime? customDateTimeModified, bool insert = false}) {
+    wallet = wallet.copyWith(name: wallet.name.trim());
     wallet = wallet.copyWith(
         dateTimeModified: Value(customDateTimeModified ?? DateTime.now()));
     WalletsCompanion companionToInsert = wallet.toCompanion(true);
@@ -2714,6 +2754,7 @@ class FinanceDatabase extends _$FinanceDatabase {
   //create or update a new objective
   Future<int> createOrUpdateObjective(Objective objective,
       {DateTime? customDateTimeModified, bool insert = false}) async {
+    objective = objective.copyWith(name: objective.name.trim());
     objective = objective.copyWith(
         dateTimeModified: Value(customDateTimeModified ?? DateTime.now()));
     ObjectivesCompanion companionToInsert = objective.toCompanion(true);
@@ -2909,11 +2950,15 @@ class FinanceDatabase extends _$FinanceDatabase {
       {SearchFilters? searchFilters}) {
     final query = selectOnly(transactions, distinct: true)
       ..addColumns([transactions.methodAdded])
-      ..where(onlyShowIfFollowsSearchFilters(transactions, searchFilters,
-          joinedWithSubcategoriesTable: null,
-          joinedWithCategories: false,
-          joinedWithBudgets: false,
-          joinedWithObjectives: false));
+      ..where(onlyShowIfFollowsSearchFilters(
+        transactions,
+        searchFilters,
+        joinedWithSubcategoriesTable: null,
+        joinedWithCategories: false,
+        joinedWithBudgets: false,
+        joinedWithObjectives: false,
+        joinedWithObjectiveLoans: null,
+      ));
     return query
         .map((row) => row.read(transactions.methodAdded) == null
             ? null
@@ -3050,6 +3095,11 @@ class FinanceDatabase extends _$FinanceDatabase {
         .watchSingle();
   }
 
+  Stream<TransactionCategory?> watchBalanceCorrectionCategory() {
+    return (select(categories)..where((t) => t.categoryPk.equals("0")))
+        .watchSingleOrNull();
+  }
+
   (Stream<TransactionCategory>, Future<TransactionCategory>) getCategory(
       String categoryPk) {
     final SimpleSelectStatement<$CategoriesTable, TransactionCategory> query =
@@ -3077,6 +3127,8 @@ class FinanceDatabase extends _$FinanceDatabase {
     TransactionAssociatedTitle associatedTitle, {
     insert = false,
   }) {
+    associatedTitle =
+        associatedTitle.copyWith(title: associatedTitle.title.trim());
     associatedTitle =
         associatedTitle.copyWith(dateTimeModified: Value(DateTime.now()));
     AssociatedTitlesCompanion companionToInsert =
@@ -3389,6 +3441,9 @@ class FinanceDatabase extends _$FinanceDatabase {
       return null;
     }
 
+    transaction = transaction.copyWith(
+        name: transaction.name.trim(), note: transaction.note.trim());
+
     if (transaction.type == TransactionSpecialType.credit) {
       transaction = transaction.copyWith(
           income: false, amount: transaction.amount.abs() * -1);
@@ -3954,6 +4009,7 @@ class FinanceDatabase extends _$FinanceDatabase {
     if (updateSharedEntry == true && appStateSettings["sharedBudgets"] == false)
       updateSharedEntry = false;
 
+    category = category.copyWith(name: category.name.trim());
     category = category.copyWith(
         dateTimeModified: Value(customDateTimeModified ?? DateTime.now()));
     CategoriesCompanion companionToInsert = category.toCompanion(true);
@@ -4168,7 +4224,8 @@ class FinanceDatabase extends _$FinanceDatabase {
     if (updateSharedEntry == true && appStateSettings["sharedBudgets"] == false)
       updateSharedEntry = false;
 
-    print(budget);
+    budget = budget.copyWith(name: budget.name.trim());
+    // print(budget);
 
     if (budget.sharedKey != null && updateSharedEntry == true) {
       FirebaseFirestore? db = await firebaseGetDBInstance();
@@ -4301,6 +4358,7 @@ class FinanceDatabase extends _$FinanceDatabase {
   Stream<List<TransactionActivityLog>> watchAllTransactionActivityLog(
       {int? limit}) {
     final $CategoriesTable subCategories = alias(categories, 'subCategories');
+    final $ObjectivesTable objectiveLoans = alias(objectives, 'objectiveLoans');
 
     final query = select(transactions).join([
       innerJoin(
@@ -4313,6 +4371,10 @@ class FinanceDatabase extends _$FinanceDatabase {
         objectives,
         objectives.objectivePk.equalsExp(transactions.objectiveFk),
       ),
+      leftOuterJoin(
+        objectiveLoans,
+        objectiveLoans.objectivePk.equalsExp(transactions.objectiveLoanFk),
+      ),
       leftOuterJoin(subCategories,
           subCategories.categoryPk.equalsExp(transactions.subCategoryFk)),
     ])
@@ -4330,6 +4392,7 @@ class FinanceDatabase extends _$FinanceDatabase {
               budget: row.readTableOrNull(budgets),
               objective: row.readTableOrNull(objectives),
               subCategory: row.readTableOrNull(subCategories),
+              objectiveLoan: row.readTableOrNull(objectiveLoans),
             ),
           );
         }).toList());
@@ -5623,6 +5686,7 @@ class FinanceDatabase extends _$FinanceDatabase {
     $TransactionsTable tbl,
     SearchFilters? searchFilters, {
     required $CategoriesTable? joinedWithSubcategoriesTable,
+    required $ObjectivesTable? joinedWithObjectiveLoans,
     required bool joinedWithCategories,
     required bool joinedWithBudgets,
     required bool joinedWithObjectives,
@@ -5695,10 +5759,21 @@ class FinanceDatabase extends _$FinanceDatabase {
 
     Expression<bool> isLongTermLoanBorrowed = Constant(false);
     Expression<bool> isLongTermLoanLent = Constant(false);
-    if (searchFilters.transactionTypes.contains(TransactionSpecialType.credit))
-      isLongTermLoanLent = tbl.objectiveLoanFk.isNotNull() & tbl.income.not();
-    if (searchFilters.transactionTypes.contains(TransactionSpecialType.debt))
-      isLongTermLoanBorrowed = tbl.objectiveLoanFk.isNotNull() & tbl.income;
+    if (searchFilters.transactionTypes
+        .contains(TransactionSpecialType.credit)) {
+      if (joinedWithObjectiveLoans != null)
+        isLongTermLoanLent =
+            tbl.objectiveLoanFk.isNotNull() & joinedWithObjectiveLoans.income;
+      else
+        isLongTermLoanLent = tbl.objectiveLoanFk.isNotNull() & tbl.income.not();
+    }
+    if (searchFilters.transactionTypes.contains(TransactionSpecialType.debt)) {
+      if (joinedWithObjectiveLoans != null)
+        isLongTermLoanBorrowed = tbl.objectiveLoanFk.isNotNull() &
+            joinedWithObjectiveLoans.income.not();
+      else
+        isLongTermLoanBorrowed = tbl.objectiveLoanFk.isNotNull() & tbl.income;
+    }
     Expression<bool> isTransactionType =
         searchFilters.transactionTypes.length > 0
             ? tbl.type.isInValues(searchFilters.transactionTypes) |
@@ -5747,6 +5822,7 @@ class FinanceDatabase extends _$FinanceDatabase {
       searchQuery,
       withCategories: joinedWithCategories,
       joinedWithSubcategoriesTable: joinedWithSubcategoriesTable,
+      joinedWithObjectiveLoans: joinedWithObjectiveLoans,
       withBudgets: joinedWithBudgets,
       withObjectives: joinedWithObjectives,
     );
@@ -5797,6 +5873,7 @@ class FinanceDatabase extends _$FinanceDatabase {
     String? searchQuery, {
     required bool withCategories,
     required $CategoriesTable? joinedWithSubcategoriesTable,
+    required $ObjectivesTable? joinedWithObjectiveLoans,
     bool? withBudgets,
     bool? withObjectives,
   }) {
@@ -5823,6 +5900,11 @@ class FinanceDatabase extends _$FinanceDatabase {
                     .collate(Collate.noCase)
                     .like("%" + searchQuery + "%")
                 : Constant(false)) |
+            (joinedWithObjectiveLoans != null
+                ? joinedWithObjectiveLoans.name
+                    .collate(Collate.noCase)
+                    .like("%" + searchQuery + "%")
+                : Constant(false)) |
             tbl.name.collate(Collate.noCase).like("%" + searchQuery + "%") |
             tbl.note.collate(Collate.noCase).like("%" + searchQuery + "%") |
             onlyShowIfSearchQueryDateIsDate(searchQuery, tbl) |
@@ -6325,6 +6407,7 @@ class FinanceDatabase extends _$FinanceDatabase {
               joinedWithCategories: false,
               joinedWithBudgets: false,
               joinedWithObjectives: false,
+              joinedWithObjectiveLoans: null,
             ) &
             onlyShowBasedOnTimeRange(transactions, startDate, endDate, budget,
                 allTime: allTime) &
@@ -6414,6 +6497,7 @@ class FinanceDatabase extends _$FinanceDatabase {
                 joinedWithCategories: false,
                 joinedWithBudgets: false,
                 joinedWithObjectives: false,
+                joinedWithObjectiveLoans: null,
               ) &
               onlyShowBasedOnTimeRange(transactions, startDate, endDate, budget,
                   allTime: allTime) &
@@ -6548,11 +6632,15 @@ class FinanceDatabase extends _$FinanceDatabase {
       final totalCount = transactions.transactionPk.count();
       final query = selectOnly(transactions)
         ..addColumns([totalAmt, totalCount])
-        ..where(onlyShowIfFollowsSearchFilters(transactions, searchFilters,
-                joinedWithSubcategoriesTable: null,
-                joinedWithCategories: false,
-                joinedWithBudgets: false,
-                joinedWithObjectives: false) &
+        ..where(onlyShowIfFollowsSearchFilters(
+              transactions,
+              searchFilters,
+              joinedWithSubcategoriesTable: null,
+              joinedWithCategories: false,
+              joinedWithBudgets: false,
+              joinedWithObjectives: false,
+              joinedWithObjectiveLoans: null,
+            ) &
             transactions.walletFk.equals(wallet.walletPk) &
             (onlyShowIfNotBalanceCorrection(transactions, isIncome) |
                 Constant(includeBalanceCorrection)) &
@@ -6621,20 +6709,28 @@ class FinanceDatabase extends _$FinanceDatabase {
           leftOuterJoin(subCategories,
               subCategories.categoryPk.equalsExp(transactions.subCategoryFk)),
         ])
-        ..where(onlyShowIfFollowsSearchFilters(transactions, searchFilters,
-                joinedWithSubcategoriesTable: null,
-                joinedWithCategories: false,
-                joinedWithBudgets: false,
-                joinedWithObjectives: false) &
+        ..where(onlyShowIfFollowsSearchFilters(
+              transactions,
+              searchFilters,
+              joinedWithSubcategoriesTable: null,
+              joinedWithCategories: false,
+              joinedWithBudgets: false,
+              joinedWithObjectives: false,
+              joinedWithObjectiveLoans: null,
+            ) &
             onlyShowIfFollowCustomPeriodCycle(
               transactions,
               followCustomPeriodCycle,
               cycleSettingsExtension: cycleSettingsExtension,
               forcedDateTimeRange: forcedDateTimeRange,
             ) &
-            onlyShowTransactionBasedOnSearchQuery(transactions, searchString,
-                withCategories: true,
-                joinedWithSubcategoriesTable: subCategories) &
+            onlyShowTransactionBasedOnSearchQuery(
+              transactions,
+              searchString,
+              withCategories: true,
+              joinedWithSubcategoriesTable: subCategories,
+              joinedWithObjectiveLoans: null,
+            ) &
             // transactions.income.equals(false) &
             transactions.paid.equals(false) &
             transactions.skipPaid.equals(false) &
@@ -6701,11 +6797,15 @@ class FinanceDatabase extends _$FinanceDatabase {
               objectives.objectivePk.equalsExp(transactions.objectiveLoanFk)),
         ])
         ..where(
-          onlyShowIfFollowsSearchFilters(transactions, searchFilters,
-                  joinedWithSubcategoriesTable: null,
-                  joinedWithCategories: false,
-                  joinedWithBudgets: false,
-                  joinedWithObjectives: false) &
+          onlyShowIfFollowsSearchFilters(
+                transactions,
+                searchFilters,
+                joinedWithSubcategoriesTable: null,
+                joinedWithCategories: false,
+                joinedWithBudgets: false,
+                joinedWithObjectives: false,
+                joinedWithObjectiveLoans: null,
+              ) &
               (cycleSettingsExtension == null
                   ? Constant(true)
                   : onlyShowIfFollowCustomPeriodCycle(
@@ -6726,9 +6826,12 @@ class FinanceDatabase extends _$FinanceDatabase {
                       searchString == null ||
                       searchString == ""
                   ? (onlyShowTransactionBasedOnSearchQuery(
-                      transactions, searchString,
+                      transactions,
+                      searchString,
                       withCategories: true,
-                      joinedWithSubcategoriesTable: subCategories))
+                      joinedWithSubcategoriesTable: subCategories,
+                      joinedWithObjectiveLoans: null,
+                    ))
                   // Only apply this tab specific total when searching
                   : ((objectives.name
                       .collate(Collate.noCase)
@@ -6829,9 +6932,13 @@ class FinanceDatabase extends _$FinanceDatabase {
         OrderingTerm.desc(transactions.paid),
         OrderingTerm.desc(transactions.dateCreated),
       ])
-      ..where(onlyShowTransactionBasedOnSearchQuery(transactions, searchString,
-              withCategories: true,
-              joinedWithSubcategoriesTable: subCategories) &
+      ..where(onlyShowTransactionBasedOnSearchQuery(
+            transactions,
+            searchString,
+            withCategories: true,
+            joinedWithSubcategoriesTable: subCategories,
+            joinedWithObjectiveLoans: null,
+          ) &
           (isCredit == null
               ? transactions.type.equals(TransactionSpecialType.credit.index) |
                   transactions.type.equals(TransactionSpecialType.debt.index)
@@ -6843,6 +6950,58 @@ class FinanceDatabase extends _$FinanceDatabase {
     return query.map((row) => row.readTable(transactions)).watch();
   }
 
+  Stream<TotalWithCount?> watchTotalCountOfTransactionsWithSearchFilters({
+    required AllWallets allWallets,
+    SearchFilters? searchFilters,
+    DateTimeRange? forcedDateTimeRange,
+    bool followCustomPeriodCycle = false,
+    String? cycleSettingsExtension = "",
+  }) {
+    List<Stream<TotalWithCount?>> mergedStreams = [];
+    for (TransactionWallet wallet in allWallets.list) {
+      final totalAmt = transactions.amount.sum();
+      final totalCount = transactions.transactionPk.count();
+      final $CategoriesTable subCategories = alias(categories, 'subCategories');
+      final query = selectOnly(transactions)
+        ..addColumns([totalAmt, totalCount])
+        ..join([
+          innerJoin(categories,
+              categories.categoryPk.equalsExp(transactions.categoryFk)),
+          leftOuterJoin(subCategories,
+              subCategories.categoryPk.equalsExp(transactions.subCategoryFk)),
+          leftOuterJoin(objectives,
+              objectives.objectivePk.equalsExp(transactions.objectiveLoanFk)),
+        ])
+        ..where(onlyShowIfFollowsSearchFilters(
+              transactions,
+              searchFilters,
+              joinedWithSubcategoriesTable: null,
+              joinedWithCategories: false,
+              joinedWithBudgets: false,
+              joinedWithObjectives: false,
+              joinedWithObjectiveLoans: null,
+            ) &
+            (cycleSettingsExtension == null
+                ? Constant(true)
+                : onlyShowIfFollowCustomPeriodCycle(
+                    transactions,
+                    followCustomPeriodCycle,
+                    cycleSettingsExtension: cycleSettingsExtension,
+                    forcedDateTimeRange: forcedDateTimeRange,
+                  )) &
+            transactions.paid.equals(true) &
+            transactions.walletFk.equals(wallet.walletPk));
+      mergedStreams.add(query.map((row) {
+        // print(row.rawData.data);
+        return TotalWithCount(
+            total: (row.read(totalAmt) ?? 0) *
+                (amountRatioToPrimaryCurrency(allWallets, wallet.currency)),
+            count: row.read(totalCount) ?? 0);
+      }).watchSingle());
+    }
+    return totalTotalWithCountStream(mergedStreams);
+  }
+
   Stream<List<int?>> watchTotalCountOfTransactionsInCategory(
       String categoryPk) {
     final totalCount = transactions.transactionPk.count();
@@ -6925,11 +7084,15 @@ class FinanceDatabase extends _$FinanceDatabase {
     DateTime endDate = end.justDay();
     return (select(transactions)
           ..where((tbl) {
-            return onlyShowIfFollowsSearchFilters(transactions, searchFilters,
-                    joinedWithSubcategoriesTable: null,
-                    joinedWithCategories: false,
-                    joinedWithBudgets: false,
-                    joinedWithObjectives: false) &
+            return onlyShowIfFollowsSearchFilters(
+                  transactions,
+                  searchFilters,
+                  joinedWithSubcategoriesTable: null,
+                  joinedWithCategories: false,
+                  joinedWithBudgets: false,
+                  joinedWithObjectives: false,
+                  joinedWithObjectiveLoans: null,
+                ) &
                 isInCategory(tbl, categoryFks, categoryFksExclude) &
                 evaluateIfNull(tbl.paid.equals(true), isPaidOnly, true) &
                 onlyShowIfFollowCustomPeriodCycle(
@@ -6976,11 +7139,15 @@ class FinanceDatabase extends _$FinanceDatabase {
               // otherwise midnight transactions on start of month
               // will be counted twice in all spending page cumulative total!
               transactions.dateCreated.isSmallerThanValue(startDate) &
-              onlyShowIfFollowsSearchFilters(transactions, searchFilters,
-                  joinedWithSubcategoriesTable: null,
-                  joinedWithCategories: false,
-                  joinedWithBudgets: false,
-                  joinedWithObjectives: false) &
+              onlyShowIfFollowsSearchFilters(
+                transactions,
+                searchFilters,
+                joinedWithSubcategoriesTable: null,
+                joinedWithCategories: false,
+                joinedWithBudgets: false,
+                joinedWithObjectives: false,
+                joinedWithObjectiveLoans: null,
+              ) &
               onlyShowBasedOnIncome(transactions, isIncome),
         );
       mergedStreams.add(query
@@ -6999,11 +7166,15 @@ class FinanceDatabase extends _$FinanceDatabase {
     final query = select(transactions)
       ..where((t) =>
           (paid == null ? Constant(true) : t.paid.equals(paid)) &
-          onlyShowIfFollowsSearchFilters(t, searchFilters,
-              joinedWithSubcategoriesTable: null,
-              joinedWithCategories: false,
-              joinedWithBudgets: false,
-              joinedWithObjectives: false))
+          onlyShowIfFollowsSearchFilters(
+            t,
+            searchFilters,
+            joinedWithSubcategoriesTable: null,
+            joinedWithCategories: false,
+            joinedWithBudgets: false,
+            joinedWithObjectives: false,
+            joinedWithObjectiveLoans: null,
+          ))
       ..orderBy([(t) => OrderingTerm.asc(t.dateCreated)]);
 
     return query.watch().map((rows) {
@@ -7044,11 +7215,15 @@ class FinanceDatabase extends _$FinanceDatabase {
               evaluateIfNull(transactions.paid.equals(true), isPaidOnly, true));
       final query = selectOnly(transactions)
         ..addColumns([totalAmt])
-        ..where(onlyShowIfFollowsSearchFilters(transactions, searchFilters,
-                joinedWithSubcategoriesTable: null,
-                joinedWithCategories: false,
-                joinedWithBudgets: false,
-                joinedWithObjectives: false) &
+        ..where(onlyShowIfFollowsSearchFilters(
+              transactions,
+              searchFilters,
+              joinedWithSubcategoriesTable: null,
+              joinedWithCategories: false,
+              joinedWithBudgets: false,
+              joinedWithObjectives: false,
+              joinedWithObjectiveLoans: null,
+            ) &
             transactions.walletFk.equals(wallet.walletPk) &
             onlyShowIfFollowCustomPeriodCycle(
               transactions,
diff --git a/budget/lib/pages/activityPage.dart b/budget/lib/pages/activityPage.dart
index f04bb1e41..29c67c0cb 100644
--- a/budget/lib/pages/activityPage.dart
+++ b/budget/lib/pages/activityPage.dart
@@ -202,6 +202,8 @@ class ActivityPage extends StatelessWidget {
                           Budget? budget = item.transactionWithCategory?.budget;
                           Objective? objective =
                               item.transactionWithCategory?.objective;
+                          Objective? objectiveLoan =
+                              item.transactionWithCategory?.objectiveLoan;
                           Widget noTransactionFound = Padding(
                             padding: EdgeInsetsDirectional.symmetric(
                                 horizontal:
@@ -271,6 +273,7 @@ class ActivityPage extends StatelessWidget {
                                         subCategory: subCategory,
                                         budget: budget,
                                         objective: objective,
+                                        objectiveLoan: objectiveLoan,
                                         listID: pageId,
                                       ),
                                     ),
diff --git a/budget/lib/pages/walletDetailsPage.dart b/budget/lib/pages/walletDetailsPage.dart
index b916743fd..5f0356f0c 100644
--- a/budget/lib/pages/walletDetailsPage.dart
+++ b/budget/lib/pages/walletDetailsPage.dart
@@ -55,6 +55,7 @@ import 'package:budget/widgets/fadeIn.dart';
 import 'package:async/async.dart' show StreamZip;
 import 'package:sliver_tools/sliver_tools.dart';
 import 'package:budget/widgets/util/fullPageDoubleColumnLayout.dart';
+import 'package:budget/widgets/util/contextMenu.dart';
 
 // Also known as the all spending page
 
@@ -693,6 +694,10 @@ class WalletDetailsPageState extends State<WalletDetailsPage>
       ),
     );
 
+    // print(getDateTimeRangeForPassedSearchFilters(
+    //     cycleSettingsExtension: "",
+    //     selectedDateTimeRange: selectedDateTimeRange));
+
     List<Widget> currentTabPage = [
       SliverToBoxAdapter(
         child: Column(
@@ -794,9 +799,6 @@ class WalletDetailsPageState extends State<WalletDetailsPage>
                                       .copyWith(walletPks: walletPks),
                               forcedDateTimeRange: selectedDateTimeRange,
                             ),
-                            onLongPress: () {
-                              selectAllSpendingPeriod();
-                            },
                           ),
                         AmountSpentEntryRow(
                           forceShow: true,
@@ -827,9 +829,6 @@ class WalletDetailsPageState extends State<WalletDetailsPage>
                             forcedDateTimeRange: selectedDateTimeRange,
                             onlyIncomeAndExpense: true,
                           ),
-                          onLongPress: () {
-                            selectAllSpendingPeriod();
-                          },
                         ),
                         AmountSpentEntryRow(
                           forceShow: true,
@@ -860,15 +859,148 @@ class WalletDetailsPageState extends State<WalletDetailsPage>
                             forcedDateTimeRange: selectedDateTimeRange,
                             onlyIncomeAndExpense: true,
                           ),
-                          onLongPress: () {
-                            selectAllSpendingPeriod();
-                          },
                         ),
+                        StreamBuilder<TransactionCategory?>(
+                            stream: database.watchBalanceCorrectionCategory(),
+                            builder: (context, snapshot) {
+                              TransactionCategory? category = snapshot.data;
+                              SearchFilters rowFilters =
+                                  (searchFilters ?? SearchFilters()).copyWith(
+                                categoryPks: ["0"],
+                                dateTimeRange:
+                                    getDateTimeRangeForPassedSearchFilters(
+                                        cycleSettingsExtension: "",
+                                        selectedDateTimeRange:
+                                            selectedDateTimeRange),
+                                walletPks: walletPks,
+                                objectiveLoanPks: [null],
+                              );
+                              return AmountSpentEntryRow(
+                                hide: category == null,
+                                openPage: TransactionsSearchPage(
+                                  initialFilters: rowFilters,
+                                ),
+                                textColor: getColor(context, "black"),
+                                label: category?.name ?? "",
+                                absolute: false,
+                                totalWithCountStream: database
+                                    .watchTotalCountOfTransactionsWithSearchFilters(
+                                  allWallets: Provider.of<AllWallets>(context),
+                                  followCustomPeriodCycle:
+                                      widget.wallet == null,
+                                  cycleSettingsExtension: "",
+                                  searchFilters: rowFilters,
+                                  forcedDateTimeRange: selectedDateTimeRange,
+                                ),
+                              );
+                            }),
+                        // Only show borrowed and lent totals when all time
+                        // There is no point in showing it for time periods, because when marked as collected/paid
+                        // It doesn't count towards total, and partial loans may not include all transactions and calculate properly
+                        // I guess we could track amount paid back/amount lent out for period instead
+                        // But that's not what this does...
                         AmountSpentEntryRow(
+                          hide: selectedDateTimeRange != null,
                           openPage: widget.wallet == null &&
-                                  (searchFilters?.walletPks == null ||
-                                      (searchFilters?.walletPks.length ?? 0) <=
-                                          0)
+                                  searchFilters?.isClear() == true &&
+                                  selectedDateTimeRange == null
+                              ? CreditDebtTransactions(isCredit: true)
+                              : TransactionsSearchPage(
+                                  initialFilters: (searchFilters == null
+                                          ? SearchFilters()
+                                          : searchFilters)
+                                      ?.copyWith(
+                                    dateTimeRange:
+                                        getDateTimeRangeForPassedSearchFilters(
+                                            cycleSettingsExtension: "",
+                                            selectedDateTimeRange:
+                                                selectedDateTimeRange),
+                                    walletPks: walletPks,
+                                    transactionTypes: [
+                                      TransactionSpecialType.credit
+                                    ],
+                                  ),
+                                ),
+                          textColor: getColor(context, "unPaidUpcoming"),
+                          label: "lent".tr(),
+                          absolute: false,
+                          invertSign: true,
+                          totalWithCountStream:
+                              database.watchTotalWithCountOfCreditDebt(
+                            isCredit: true,
+                            allWallets: Provider.of<AllWallets>(context),
+                            followCustomPeriodCycle: widget.wallet == null,
+                            cycleSettingsExtension: "",
+                            searchFilters: (searchFilters ?? SearchFilters())
+                                .copyWith(walletPks: walletPks),
+                            forcedDateTimeRange: selectedDateTimeRange,
+                            selectedTab: null,
+                          ),
+                          totalWithCountStream2: database
+                              .watchTotalWithCountOfCreditDebtLongTermLoansOffset(
+                            isCredit: true,
+                            allWallets: Provider.of<AllWallets>(context),
+                            followCustomPeriodCycle: widget.wallet == null,
+                            cycleSettingsExtension: "",
+                            searchFilters: (searchFilters ?? SearchFilters())
+                                .copyWith(walletPks: walletPks),
+                            forcedDateTimeRange: selectedDateTimeRange,
+                            selectedTab: null,
+                          ),
+                        ),
+                        AmountSpentEntryRow(
+                          hide: selectedDateTimeRange != null,
+                          openPage: widget.wallet == null &&
+                                  searchFilters?.isClear() == true &&
+                                  selectedDateTimeRange == null
+                              ? CreditDebtTransactions(isCredit: false)
+                              : TransactionsSearchPage(
+                                  initialFilters: (searchFilters == null
+                                          ? SearchFilters()
+                                          : searchFilters)
+                                      ?.copyWith(
+                                    dateTimeRange:
+                                        getDateTimeRangeForPassedSearchFilters(
+                                            cycleSettingsExtension: "",
+                                            selectedDateTimeRange:
+                                                selectedDateTimeRange),
+                                    walletPks: walletPks,
+                                    transactionTypes: [
+                                      TransactionSpecialType.debt
+                                    ],
+                                  ),
+                                ),
+                          textColor: getColor(context, "unPaidOverdue"),
+                          label: "borrowed".tr(),
+                          absolute: false,
+                          invertSign: false,
+                          totalWithCountStream:
+                              database.watchTotalWithCountOfCreditDebt(
+                            isCredit: false,
+                            allWallets: Provider.of<AllWallets>(context),
+                            followCustomPeriodCycle: widget.wallet == null,
+                            cycleSettingsExtension: "",
+                            searchFilters: (searchFilters ?? SearchFilters())
+                                .copyWith(walletPks: walletPks),
+                            forcedDateTimeRange: selectedDateTimeRange,
+                            selectedTab: null,
+                          ),
+                          totalWithCountStream2: database
+                              .watchTotalWithCountOfCreditDebtLongTermLoansOffset(
+                            isCredit: false,
+                            allWallets: Provider.of<AllWallets>(context),
+                            followCustomPeriodCycle: widget.wallet == null,
+                            cycleSettingsExtension: "",
+                            searchFilters: (searchFilters ?? SearchFilters())
+                                .copyWith(walletPks: walletPks),
+                            forcedDateTimeRange: selectedDateTimeRange,
+                            selectedTab: null,
+                          ),
+                        ),
+                        AmountSpentEntryRow(
+                          openPage: widget.wallet == null &&
+                                  searchFilters?.isClear() == true &&
+                                  selectedDateTimeRange == null
                               ? UpcomingOverdueTransactions(
                                   overdueTransactions: false)
                               : TransactionsSearchPage(
@@ -902,7 +1034,7 @@ class WalletDetailsPageState extends State<WalletDetailsPage>
                                     paidStatus: [PaidStatus.notPaid],
                                   ),
                                 ),
-                          textColor: getColor(context, "unPaidUpcoming"),
+                          textColor: getColor(context, "textLight"),
                           label: "upcoming".tr(),
                           absolute: false,
                           totalWithCountStream:
@@ -916,15 +1048,11 @@ class WalletDetailsPageState extends State<WalletDetailsPage>
                             ),
                             forcedDateTimeRange: selectedDateTimeRange,
                           ),
-                          onLongPress: () {
-                            selectAllSpendingPeriod();
-                          },
                         ),
                         AmountSpentEntryRow(
                           openPage: widget.wallet == null &&
-                                  (searchFilters?.walletPks == null ||
-                                      (searchFilters?.walletPks.length ?? 0) <=
-                                          0)
+                                  searchFilters?.isClear() == true &&
+                                  selectedDateTimeRange == null
                               ? UpcomingOverdueTransactions(
                                   overdueTransactions: true)
                               : TransactionsSearchPage(
@@ -958,7 +1086,7 @@ class WalletDetailsPageState extends State<WalletDetailsPage>
                                     paidStatus: [PaidStatus.notPaid],
                                   ),
                                 ),
-                          textColor: getColor(context, "unPaidOverdue"),
+                          textColor: getColor(context, "textLight"),
                           label: "overdue".tr(),
                           absolute: false,
                           totalWithCountStream:
@@ -972,139 +1100,6 @@ class WalletDetailsPageState extends State<WalletDetailsPage>
                             ),
                             forcedDateTimeRange: selectedDateTimeRange,
                           ),
-                          onLongPress: () {
-                            selectAllSpendingPeriod();
-                          },
-                        ),
-                        // Only show borrowed and lent totals when all time
-                        // There is no point in showing it for time periods, because when marked as collected/paid
-                        // It doesn't count towards total, and partial loans may not include all transactions and calculate properly
-                        // I guess we could track amount paid back/amount lent out for period instead
-                        // But that's not what this does...
-                        AmountSpentEntryRow(
-                          hide: selectedDateTimeRange != null,
-                          extraText: CycleType.values[appStateSettings[
-                                          "selectedPeriodCycleType"] ??
-                                      0] !=
-                                  CycleType.allTime
-                              ? "all-time".tr()
-                              : null,
-                          openPage: widget.wallet == null &&
-                                  (searchFilters?.walletPks == null ||
-                                      (searchFilters?.walletPks.length ?? 0) <=
-                                          0)
-                              ? CreditDebtTransactions(isCredit: true)
-                              : TransactionsSearchPage(
-                                  initialFilters: (searchFilters == null
-                                          ? SearchFilters()
-                                          : searchFilters)
-                                      ?.copyWith(
-                                    forceSetDateTimeRange: true,
-                                    dateTimeRange: null,
-                                    walletPks: walletPks,
-                                    transactionTypes: [
-                                      TransactionSpecialType.credit
-                                    ],
-                                  ),
-                                ),
-                          textColor: getColor(context, "unPaidUpcoming"),
-                          label: "lent".tr(),
-                          absolute: false,
-                          invertSign: true,
-                          totalWithCountStream:
-                              database.watchTotalWithCountOfCreditDebt(
-                            isCredit: true,
-                            allWallets: Provider.of<AllWallets>(context),
-                            followCustomPeriodCycle: widget.wallet == null,
-                            cycleSettingsExtension: null, //all time
-                            searchFilters: searchFilters?.copyWith(
-                              dateTimeRange: null,
-                              forceSetDateTimeRange: true,
-                              walletPks: walletPks,
-                            ),
-                            forcedDateTimeRange: selectedDateTimeRange,
-                            selectedTab: null,
-                          ),
-                          totalWithCountStream2: database
-                              .watchTotalWithCountOfCreditDebtLongTermLoansOffset(
-                            isCredit: true,
-                            allWallets: Provider.of<AllWallets>(context),
-                            followCustomPeriodCycle: widget.wallet == null,
-                            cycleSettingsExtension: null, //all time
-                            searchFilters: searchFilters?.copyWith(
-                              dateTimeRange: null,
-                              forceSetDateTimeRange: true,
-                              walletPks: walletPks,
-                            ),
-                            forcedDateTimeRange: selectedDateTimeRange,
-                            selectedTab: null,
-                          ),
-                          onLongPress: () {
-                            // Since always all time, disable long press custom period for these rows
-                            //selectAllSpendingPeriod();
-                          },
-                        ),
-                        AmountSpentEntryRow(
-                          hide: selectedDateTimeRange != null,
-                          extraText: CycleType.values[appStateSettings[
-                                          "selectedPeriodCycleType"] ??
-                                      0] !=
-                                  CycleType.allTime
-                              ? "all-time".tr()
-                              : null,
-                          openPage: widget.wallet == null &&
-                                  (searchFilters?.walletPks == null ||
-                                      (searchFilters?.walletPks.length ?? 0) <=
-                                          0)
-                              ? CreditDebtTransactions(isCredit: false)
-                              : TransactionsSearchPage(
-                                  initialFilters: (searchFilters == null
-                                          ? SearchFilters()
-                                          : searchFilters)
-                                      ?.copyWith(
-                                    forceSetDateTimeRange: true,
-                                    dateTimeRange: null,
-                                    walletPks: walletPks,
-                                    transactionTypes: [
-                                      TransactionSpecialType.debt
-                                    ],
-                                  ),
-                                ),
-                          textColor: getColor(context, "unPaidOverdue"),
-                          label: "borrowed".tr(),
-                          absolute: false,
-                          totalWithCountStream:
-                              database.watchTotalWithCountOfCreditDebt(
-                            isCredit: false,
-                            allWallets: Provider.of<AllWallets>(context),
-                            followCustomPeriodCycle: widget.wallet == null,
-                            cycleSettingsExtension: null, //all time
-                            searchFilters: searchFilters?.copyWith(
-                              dateTimeRange: null,
-                              forceSetDateTimeRange: true,
-                              walletPks: walletPks,
-                            ),
-                            forcedDateTimeRange: selectedDateTimeRange,
-                            selectedTab: null,
-                          ),
-                          totalWithCountStream2: database
-                              .watchTotalWithCountOfCreditDebtLongTermLoansOffset(
-                            isCredit: false,
-                            allWallets: Provider.of<AllWallets>(context),
-                            followCustomPeriodCycle: widget.wallet == null,
-                            cycleSettingsExtension: null, //all time
-                            searchFilters: searchFilters?.copyWith(
-                              dateTimeRange: null,
-                              forceSetDateTimeRange: true,
-                              walletPks: walletPks,
-                            ),
-                            forcedDateTimeRange: selectedDateTimeRange,
-                            selectedTab: null,
-                          ),
-                          onLongPress: () {
-                            // Since always all time, disable long press custom period for these rows
-                            //selectAllSpendingPeriod();
-                          },
                         ),
                         SizedBox(height: 10),
                       ],
@@ -2833,7 +2828,6 @@ class AmountSpentEntryRow extends StatelessWidget {
     required this.label,
     required this.totalWithCountStream,
     this.totalWithCountStream2,
-    required this.onLongPress,
     this.hide = false,
     this.forceShow = false,
     this.extraText,
@@ -2845,7 +2839,6 @@ class AmountSpentEntryRow extends StatelessWidget {
   final Widget openPage;
   final Stream<TotalWithCount?> totalWithCountStream;
   final Stream<TotalWithCount?>? totalWithCountStream2;
-  final VoidCallback onLongPress;
   final bool hide;
   final bool forceShow;
   final String? extraText;
@@ -2862,122 +2855,140 @@ class AmountSpentEntryRow extends StatelessWidget {
             ? (snapshot.data?.total ?? 0).abs()
             : (snapshot.data?.total ?? 0) * (invertSign == true ? -1 : 1);
         int totalCount = snapshot.data?.count ?? 0;
-        return AnimatedExpanded(
-          axis: Axis.vertical,
-          expand: forceShow || (totalSpent != 0 && hide == false),
-          child: OpenContainerNavigation(
-            borderRadius: 0,
-            openPage: openPage,
-            closedColor: getColor(context, "lightDarkAccentHeavyLight"),
-            button: (openContainer) {
-              return Tappable(
-                color: getColor(context, "lightDarkAccentHeavyLight"),
-                borderRadius: 0,
-                child: Padding(
-                  padding: const EdgeInsetsDirectional.symmetric(
-                      horizontal: 20, vertical: 6),
-                  child: Container(
-                    child: Row(
-                      mainAxisSize: MainAxisSize.max,
-                      crossAxisAlignment: CrossAxisAlignment.center,
-                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
-                      children: [
-                        Expanded(
-                          child: LayoutBuilder(
-                            builder: (context, constraints) {
-                              return Row(
-                                children: [
-                                  // Constrained box allows us to achieve a full width expander
-                                  // Constrained box allows for text wrapping/cut-off since we set a maxWidth
-                                  // We can get a layout that is more dynamic and looks like:
-                                  // [-----------------------Full Width-------------------------]
-                                  // [---Label----] [-------------------------------------------]
-                                  // [--------------------Label--------------------] [----------]
-                                  // Compared to
-                                  // [-----------------------Full Width-------------------------]
-                                  // [---------Expanded---------][--Flexible--]
-                                  // Where expanded is limited to 50%
-                                  // Can see this issue: https://stackoverflow.com/a/74310309
-                                  ConstrainedBox(
-                                    constraints: BoxConstraints(
-                                        maxWidth: constraints.maxWidth),
-                                    child: TextFont(
-                                      text: "",
-                                      maxLines: 1,
-                                      textAlign: TextAlign.start,
-                                      richTextSpan: [
-                                        TextSpan(
-                                          text: label,
-                                          style: TextStyle(
-                                            fontSize: 18,
-                                            color: getColor(context, "black"),
-                                            fontFamily:
-                                                appStateSettings["font"],
-                                            fontFamilyFallback: ['Inter'],
-                                            fontWeight: FontWeight.bold,
+        return CustomContextMenu(
+          buttonItems: [
+            ContextMenuButtonItem(
+              type: ContextMenuButtonType.copy,
+              onPressed: () {
+                ContextMenuController.removeAny();
+                copyToClipboard(label +
+                    addAmountToString("", totalCount, extraText: extraText) +
+                    "  " +
+                    convertToMoney(
+                      Provider.of<AllWallets>(context, listen: false),
+                      totalSpent,
+                      finalNumber: totalSpent.abs(),
+                    ));
+              },
+            ),
+          ],
+          tappableBuilder: (onLongPress) => AnimatedExpanded(
+            axis: Axis.vertical,
+            expand: forceShow || (totalSpent != 0 && hide == false),
+            child: OpenContainerNavigation(
+              borderRadius: 0,
+              openPage: openPage,
+              closedColor: getColor(context, "lightDarkAccentHeavyLight"),
+              button: (openContainer) {
+                return Tappable(
+                  color: getColor(context, "lightDarkAccentHeavyLight"),
+                  borderRadius: 0,
+                  child: Padding(
+                    padding: const EdgeInsetsDirectional.symmetric(
+                        horizontal: 20, vertical: 6),
+                    child: Container(
+                      child: Row(
+                        mainAxisSize: MainAxisSize.max,
+                        crossAxisAlignment: CrossAxisAlignment.center,
+                        mainAxisAlignment: MainAxisAlignment.spaceBetween,
+                        children: [
+                          Expanded(
+                            child: LayoutBuilder(
+                              builder: (context, constraints) {
+                                return Row(
+                                  children: [
+                                    // Constrained box allows us to achieve a full width expander
+                                    // Constrained box allows for text wrapping/cut-off since we set a maxWidth
+                                    // We can get a layout that is more dynamic and looks like:
+                                    // [-----------------------Full Width-------------------------]
+                                    // [---Label----] [-------------------------------------------]
+                                    // [--------------------Label--------------------] [----------]
+                                    // Compared to
+                                    // [-----------------------Full Width-------------------------]
+                                    // [---------Expanded---------][--Flexible--]
+                                    // Where expanded is limited to 50%
+                                    // Can see this issue: https://stackoverflow.com/a/74310309
+                                    ConstrainedBox(
+                                      constraints: BoxConstraints(
+                                          maxWidth: constraints.maxWidth),
+                                      child: TextFont(
+                                        text: "",
+                                        maxLines: 1,
+                                        textAlign: TextAlign.start,
+                                        richTextSpan: [
+                                          TextSpan(
+                                            text: label,
+                                            style: TextStyle(
+                                              fontSize: 18,
+                                              color: getColor(context, "black"),
+                                              fontFamily:
+                                                  appStateSettings["font"],
+                                              fontFamilyFallback: ['Inter'],
+                                              fontWeight: FontWeight.bold,
+                                            ),
                                           ),
-                                        ),
-                                        TextSpan(
-                                          text: addAmountToString(
-                                              " ", totalCount,
-                                              extraText: extraText),
-                                          style: TextStyle(
-                                            fontSize: 15,
-                                            color:
-                                                getColor(context, "textLight"),
-                                            fontFamily:
-                                                appStateSettings["font"],
-                                            fontFamilyFallback: ['Inter'],
+                                          TextSpan(
+                                            text: addAmountToString(
+                                                " ", totalCount,
+                                                extraText: extraText),
+                                            style: TextStyle(
+                                              fontSize: 15,
+                                              color: getColor(
+                                                  context, "textLight"),
+                                              fontFamily:
+                                                  appStateSettings["font"],
+                                              fontFamilyFallback: ['Inter'],
+                                            ),
                                           ),
-                                        ),
-                                      ],
+                                        ],
+                                      ),
                                     ),
-                                  ),
-                                  Expanded(
-                                    child: Container(
-                                      margin: EdgeInsetsDirectional.only(
-                                          start: 15, end: 10, top: 1),
-                                      height: 2,
-                                      color: Theme.of(context)
-                                          .colorScheme
-                                          .secondaryContainer
-                                          .withOpacity(0.5),
+                                    Expanded(
+                                      child: Container(
+                                        margin: EdgeInsetsDirectional.only(
+                                            start: 15, end: 10, top: 1),
+                                        height: 2,
+                                        color: Theme.of(context)
+                                            .colorScheme
+                                            .secondaryContainer
+                                            .withOpacity(0.5),
+                                      ),
                                     ),
-                                  ),
-                                ],
+                                  ],
+                                );
+                              },
+                            ),
+                          ),
+                          CountNumber(
+                            lazyFirstRender: false,
+                            count: totalSpent,
+                            duration: Duration(milliseconds: 1000),
+                            initialCount: 0,
+                            textBuilder: (number) {
+                              return TextFont(
+                                textAlign: TextAlign.end,
+                                text: convertToMoney(
+                                  Provider.of<AllWallets>(context),
+                                  number,
+                                  finalNumber: totalSpent.abs(),
+                                ),
+                                fontSize: 18,
+                                fontWeight: FontWeight.bold,
+                                textColor: textColor,
                               );
                             },
                           ),
-                        ),
-                        CountNumber(
-                          lazyFirstRender: false,
-                          count: totalSpent,
-                          duration: Duration(milliseconds: 1000),
-                          initialCount: 0,
-                          textBuilder: (number) {
-                            return TextFont(
-                              textAlign: TextAlign.end,
-                              text: convertToMoney(
-                                Provider.of<AllWallets>(context),
-                                number,
-                                finalNumber: totalSpent.abs(),
-                              ),
-                              fontSize: 18,
-                              fontWeight: FontWeight.bold,
-                              textColor: textColor,
-                            );
-                          },
-                        ),
-                      ],
+                        ],
+                      ),
                     ),
                   ),
-                ),
-                onTap: () async {
-                  openContainer();
-                },
-                onLongPress: onLongPress,
-              );
-            },
+                  onTap: () async {
+                    openContainer();
+                  },
+                  onLongPress: onLongPress,
+                );
+              },
+            ),
           ),
         );
       },
diff --git a/budget/lib/widgets/periodCyclePicker.dart b/budget/lib/widgets/periodCyclePicker.dart
index b48e4c3f2..60d3ac0e6 100644
--- a/budget/lib/widgets/periodCyclePicker.dart
+++ b/budget/lib/widgets/periodCyclePicker.dart
@@ -535,7 +535,7 @@ DateTime? getStartDateOfSelectedCustomPeriod(
   DateTimeRange? forcedDateTimeRange,
 }) {
   if (forcedDateTimeRange != null) {
-    return forcedDateTimeRange.start;
+    return forcedDateTimeRange.start.justDay();
   }
   CycleType selectedPeriodType = CycleType.values[
       appStateSettings["selectedPeriodCycleType" + cycleSettingsExtension] ??
@@ -544,8 +544,8 @@ DateTime? getStartDateOfSelectedCustomPeriod(
     return null;
   } else if (selectedPeriodType == CycleType.cycle) {
     DateTimeRange budgetRange = getCycleDateTimeRange(cycleSettingsExtension);
-    DateTime startDate = budgetRange.start.justDay();
-    return startDate;
+    DateTime startDate = budgetRange.start;
+    return startDate.justDay();
   } else if (selectedPeriodType == CycleType.pastDays) {
     DateTime startDate = DateTime.now().subtract(Duration(
         days: (appStateSettings[
@@ -553,13 +553,13 @@ DateTime? getStartDateOfSelectedCustomPeriod(
             0)));
     if (startDate.year <= 1900) return DateTime(1900);
     if (startDate.isAfter(DateTime.now())) return DateTime(1900);
-    return startDate;
+    return startDate.justDay();
   } else if (selectedPeriodType == CycleType.dateRange) {
     DateTime startDate = DateTime.tryParse(appStateSettings[
                 "customPeriodStartDate" + cycleSettingsExtension] ??
             "") ??
         DateTime.now();
-    return startDate;
+    return startDate.justDay();
   }
   return null;
 }
@@ -569,7 +569,7 @@ DateTime? getEndDateOfSelectedCustomPeriod(
   DateTimeRange? forcedDateTimeRange,
 }) {
   if (forcedDateTimeRange != null) {
-    return forcedDateTimeRange.end;
+    return forcedDateTimeRange.end.justDay();
   }
 
   CycleType selectedPeriodType = CycleType.values[
@@ -581,12 +581,12 @@ DateTime? getEndDateOfSelectedCustomPeriod(
   if (selectedPeriodType == CycleType.cycle) {
     DateTimeRange budgetRange = getCycleDateTimeRange(cycleSettingsExtension);
     DateTime endDate = budgetRange.end.justDay();
-    return endDate;
+    return endDate.justDay();
   }
 
   if (selectedPeriodType == CycleType.pastDays) {
     DateTime endDate = DateTime.now().justDay();
-    return endDate;
+    return endDate.justDay();
   }
 
   if (selectedPeriodType == CycleType.dateRange) {
diff --git a/budget/lib/widgets/transactionEntries.dart b/budget/lib/widgets/transactionEntries.dart
index 4411d4972..14a338362 100644
--- a/budget/lib/widgets/transactionEntries.dart
+++ b/budget/lib/widgets/transactionEntries.dart
@@ -156,6 +156,7 @@ class _TransactionEntriesState extends State<TransactionEntries> {
       subCategory: item.subCategory,
       budget: item.budget,
       objective: item.objective,
+      objectiveLoan: item.objectiveLoan,
       openPage: AddTransactionPage(
         transaction: item.transaction,
         routesToPopAfterDelete: RoutesToPopAfterDelete.One,
diff --git a/budget/lib/widgets/transactionEntry/transactionEntry.dart b/budget/lib/widgets/transactionEntry/transactionEntry.dart
index 776f51630..2ed68f523 100644
--- a/budget/lib/widgets/transactionEntry/transactionEntry.dart
+++ b/budget/lib/widgets/transactionEntry/transactionEntry.dart
@@ -96,6 +96,7 @@ class TransactionEntry extends StatelessWidget {
     this.subCategory,
     this.budget,
     this.objective,
+    this.objectiveLoan,
     this.onSelected,
     this.containerColor,
     this.useHorizontalPaddingConstrained = true,
@@ -119,6 +120,7 @@ class TransactionEntry extends StatelessWidget {
   final TransactionCategory? subCategory;
   final Budget? budget;
   final Objective? objective;
+  final Objective? objectiveLoan;
   final Function(Transaction transaction, bool selected)? onSelected;
   final Color? containerColor;
   final bool useHorizontalPaddingConstrained;
@@ -359,6 +361,7 @@ class TransactionEntry extends StatelessWidget {
         subCategory: subCategory,
         budget: budget,
         objective: objective,
+        objectiveLoan: objectiveLoan,
         showExcludedBudgetTag: showExcludedBudgetTag,
       );
       Widget noteIcon = TransactionEntryNote(
diff --git a/budget/lib/widgets/transactionEntry/transactionEntryTag.dart b/budget/lib/widgets/transactionEntry/transactionEntryTag.dart
index 3fb2424cf..412304022 100644
--- a/budget/lib/widgets/transactionEntry/transactionEntryTag.dart
+++ b/budget/lib/widgets/transactionEntry/transactionEntryTag.dart
@@ -18,6 +18,7 @@ class TransactionEntryTag extends StatelessWidget {
     this.subCategory,
     this.budget,
     this.objective,
+    this.objectiveLoan,
     this.showExcludedBudgetTag,
     super.key,
   });
@@ -26,6 +27,7 @@ class TransactionEntryTag extends StatelessWidget {
   final TransactionCategory? subCategory;
   final Budget? budget;
   final Objective? objective;
+  final Objective? objectiveLoan;
   final bool Function(Transaction transaction)? showExcludedBudgetTag;
 
   @override
@@ -49,15 +51,17 @@ class TransactionEntryTag extends StatelessWidget {
         child: LayoutBuilder(builder: (context, constraints) {
           double maxWidth = constraints.maxWidth;
           List<bool> tagsToShow = [
-            appStateSettings["showAccountLabelTagInTransactionEntry"] == true,
-            transaction.subCategoryFk != null,
-            transaction.sharedReferenceBudgetPk != null,
-            transaction.objectiveLoanFk != null,
-            transaction.objectiveFk != null,
-            showExcludedBudgetTagCheck,
+            appStateSettings["showAccountLabelTagInTransactionEntry"] ==
+                true, //0
+            transaction.subCategoryFk != null, //1
+            transaction.sharedReferenceBudgetPk != null, //2
+            transaction.objectiveLoanFk != null, //3
+            transaction.objectiveFk != null, //4
+            showExcludedBudgetTagCheck, //5
           ];
           int tagCount = tagsToShow.where((element) => element == true).length;
           List<Widget> tags = [
+            // 0
             TransactionTag(
               color: HexColor(
                   Provider.of<AllWallets>(context)
@@ -69,6 +73,7 @@ class TransactionEntryTag extends StatelessWidget {
                       ?.name ??
                   "",
             ),
+            // 1
             Builder(builder: (context) {
               if (subCategory != null) {
                 return SubCategoryTag(category: subCategory!);
@@ -85,6 +90,7 @@ class TransactionEntryTag extends StatelessWidget {
                 );
               }
             }),
+            // 2
             Builder(builder: (context) {
               if (budget != null) {
                 return TransactionTag(
@@ -111,17 +117,19 @@ class TransactionEntryTag extends StatelessWidget {
                 );
               }
             }),
+            // 3
             Builder(builder: (context) {
-              if (objective != null) {
+              if (objectiveLoan != null) {
                 return ObjectivePercentTag(
                   transaction: transaction,
-                  objective: objective!,
+                  objective: objectiveLoan!,
                   showObjectivePercentageCheck: showObjectivePercentageCheck,
                 );
               }
               return StreamBuilder<Objective>(
                 stream: database.getObjective(transaction.objectiveLoanFk!),
                 builder: (context, snapshot) {
+                  print("LOOKED UP");
                   if (snapshot.hasData) {
                     if (snapshot.data == null) return Container();
                     Objective objective = snapshot.data!;
@@ -136,6 +144,7 @@ class TransactionEntryTag extends StatelessWidget {
                 },
               );
             }),
+            // 4
             Builder(builder: (context) {
               if (objective != null) {
                 return ObjectivePercentTag(
@@ -147,6 +156,7 @@ class TransactionEntryTag extends StatelessWidget {
               return StreamBuilder<Objective>(
                 stream: database.getObjective(transaction.objectiveFk!),
                 builder: (context, snapshot) {
+                  print("LOOKED UP");
                   if (snapshot.hasData) {
                     Objective objective = snapshot.data!;
                     return ObjectivePercentTag(
@@ -160,6 +170,7 @@ class TransactionEntryTag extends StatelessWidget {
                 },
               );
             }),
+            // 5
             TransactionTag(
               color: Colors.grey,
               name: "excluded".tr(),
