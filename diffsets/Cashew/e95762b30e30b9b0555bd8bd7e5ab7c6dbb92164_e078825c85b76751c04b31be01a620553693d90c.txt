diff --git a/budget/lib/colors.dart b/budget/lib/colors.dart
index 15c537569..e4a79f9fb 100644
--- a/budget/lib/colors.dart
+++ b/budget/lib/colors.dart
@@ -52,6 +52,7 @@ generateColors() {
       "expenseAmount": appStateSettings["legacyTransactionAmountColors"]
           ? Colors.black
           : Color(0xFFCA5A5A),
+      "starYellow": Color(0xFFFFD723),
     },
   );
   appColorsDark = AppColors(
@@ -86,6 +87,7 @@ generateColors() {
       "expenseAmount": appStateSettings["legacyTransactionAmountColors"]
           ? Colors.white
           : Color(0xFFDA7272),
+      "starYellow": Colors.yellow,
     },
   );
 }
diff --git a/budget/lib/database/tables.dart b/budget/lib/database/tables.dart
index d896b7ccc..c0c3bafb7 100644
--- a/budget/lib/database/tables.dart
+++ b/budget/lib/database/tables.dart
@@ -2921,8 +2921,8 @@ class FinanceDatabase extends _$FinanceDatabase {
   }
 
   Expression<bool> onlyShowBasedOnWalletFks(
-      $TransactionsTable tbl, List<int> walletFks) {
-    return (walletFks.length >= 1
+      $TransactionsTable tbl, List<int>? walletFks) {
+    return (walletFks != null && walletFks.length >= 1
         ? tbl.walletFk.isIn(walletFks)
         : Constant(true));
   }
@@ -3195,78 +3195,36 @@ class FinanceDatabase extends _$FinanceDatabase {
     String? member,
     int? onlyShowTransactionsBelongingToBudget,
     Budget? budget,
+    List<int>? walletPks,
   }) {
     DateTime startDate = DateTime(start.year, start.month, start.day);
     DateTime endDate = DateTime(end.year, end.month, end.day);
     if (allCategories) {
       return (select(transactions)
             ..where((tbl) {
-              final dateCreated = tbl.dateCreated;
               if (isPaidOnly) {
-                if (isIncome == true) {
-                  return onlyShowIfFollowsFilters(tbl,
-                          budgetTransactionFilters: budgetTransactionFilters,
-                          memberTransactionFilters: memberTransactionFilters) &
-                      onlyShowBasedOnTimeRange(
-                          transactions, startDate, endDate, budget) &
-                      tbl.paid.equals(true) &
-                      tbl.income.equals(true) &
-                      onlyShowIfMember(tbl, member) &
-                      onlyShowIfCertainBudget(
-                          tbl, onlyShowTransactionsBelongingToBudget);
-                } else if (isIncome == false) {
-                  return onlyShowIfFollowsFilters(tbl,
-                          budgetTransactionFilters: budgetTransactionFilters,
-                          memberTransactionFilters: memberTransactionFilters) &
-                      onlyShowBasedOnTimeRange(
-                          transactions, startDate, endDate, budget) &
-                      tbl.paid.equals(true) &
-                      tbl.income.equals(false) &
-                      onlyShowIfMember(tbl, member) &
-                      onlyShowIfCertainBudget(
-                          tbl, onlyShowTransactionsBelongingToBudget);
-                } else {
-                  return onlyShowIfFollowsFilters(tbl,
-                          budgetTransactionFilters: budgetTransactionFilters,
-                          memberTransactionFilters: memberTransactionFilters) &
-                      onlyShowBasedOnTimeRange(
-                          transactions, startDate, endDate, budget) &
-                      tbl.paid.equals(true) &
-                      onlyShowIfMember(tbl, member) &
-                      onlyShowIfCertainBudget(
-                          tbl, onlyShowTransactionsBelongingToBudget);
-                }
+                return tbl.paid.equals(true) &
+                    onlyShowIfFollowsFilters(tbl,
+                        budgetTransactionFilters: budgetTransactionFilters,
+                        memberTransactionFilters: memberTransactionFilters) &
+                    onlyShowBasedOnTimeRange(
+                        transactions, startDate, endDate, budget) &
+                    onlyShowIfMember(tbl, member) &
+                    onlyShowIfCertainBudget(
+                        tbl, onlyShowTransactionsBelongingToBudget) &
+                    onlyShowBasedOnWalletFks(tbl, walletPks) &
+                    onlyShowBasedOnIncome(tbl, isIncome);
               } else {
-                if (isIncome == true) {
-                  return onlyShowIfFollowsFilters(tbl,
-                          budgetTransactionFilters: budgetTransactionFilters,
-                          memberTransactionFilters: memberTransactionFilters) &
-                      onlyShowBasedOnTimeRange(
-                          transactions, startDate, endDate, budget) &
-                      tbl.income.equals(true) &
-                      onlyShowIfMember(tbl, member) &
-                      onlyShowIfCertainBudget(
-                          tbl, onlyShowTransactionsBelongingToBudget);
-                } else if (isIncome == false) {
-                  return onlyShowIfFollowsFilters(tbl,
-                          budgetTransactionFilters: budgetTransactionFilters,
-                          memberTransactionFilters: memberTransactionFilters) &
-                      onlyShowBasedOnTimeRange(
-                          transactions, startDate, endDate, budget) &
-                      tbl.income.equals(false) &
-                      onlyShowIfMember(tbl, member) &
-                      onlyShowIfCertainBudget(
-                          tbl, onlyShowTransactionsBelongingToBudget);
-                } else {
-                  return onlyShowIfFollowsFilters(tbl,
-                          budgetTransactionFilters: budgetTransactionFilters,
-                          memberTransactionFilters: memberTransactionFilters) &
-                      onlyShowBasedOnTimeRange(
-                          transactions, startDate, endDate, budget) &
-                      onlyShowIfMember(tbl, member) &
-                      onlyShowIfCertainBudget(
-                          tbl, onlyShowTransactionsBelongingToBudget);
-                }
+                return onlyShowIfFollowsFilters(tbl,
+                        budgetTransactionFilters: budgetTransactionFilters,
+                        memberTransactionFilters: memberTransactionFilters) &
+                    onlyShowBasedOnTimeRange(
+                        transactions, startDate, endDate, budget) &
+                    onlyShowIfMember(tbl, member) &
+                    onlyShowIfCertainBudget(
+                        tbl, onlyShowTransactionsBelongingToBudget) &
+                    onlyShowBasedOnWalletFks(tbl, walletPks) &
+                    onlyShowBasedOnIncome(tbl, isIncome);
               }
             })
             ..orderBy([(t) => OrderingTerm.desc(t.dateCreated)]))
diff --git a/budget/lib/functions.dart b/budget/lib/functions.dart
index 47ec79f4a..d86f3f070 100644
--- a/budget/lib/functions.dart
+++ b/budget/lib/functions.dart
@@ -472,10 +472,18 @@ DateTimeRange getBudgetDate(Budget budget, DateTime currentDate) {
 }
 
 String getWordedNumber(AllWallets allWallets, double value) {
-  if (value >= 1000) {
+  if (value >= 100000) {
+    return getCurrencyString(allWallets) +
+        (value / 1000).toStringAsFixed(0) +
+        "K";
+  } else if (value >= 1000) {
     return getCurrencyString(allWallets) +
         (value / 1000).toStringAsFixed(1) +
         "K";
+  } else if (value <= -100000) {
+    return getCurrencyString(allWallets) +
+        (value / 1000).toStringAsFixed(0) +
+        "K";
   } else if (value <= -1000) {
     return getCurrencyString(allWallets) +
         (value / 1000).toStringAsFixed(1) +
diff --git a/budget/lib/pages/budgetPage.dart b/budget/lib/pages/budgetPage.dart
index ebdc7abe1..979acf876 100644
--- a/budget/lib/pages/budgetPage.dart
+++ b/budget/lib/pages/budgetPage.dart
@@ -197,9 +197,11 @@ class _BudgetPageContentState extends State<_BudgetPageContent> {
                   : IconButton(
                       tooltip: "Past budgets",
                       onPressed: () {
-                        pushRoute(context,
-                            PastBudgetsPage(budgetPk: widget.budget.budgetPk),
-                            fancyRoute: true);
+                        pushRoute(
+                          context,
+                          PastBudgetsPage(budgetPk: widget.budget.budgetPk),
+                          fancyRoute: true,
+                        );
                       },
                       icon: Icon(
                         Icons.history_rounded,
diff --git a/budget/lib/pages/debugPage.dart b/budget/lib/pages/debugPage.dart
index 45b873665..1b25a533a 100644
--- a/budget/lib/pages/debugPage.dart
+++ b/budget/lib/pages/debugPage.dart
@@ -106,6 +106,16 @@ class DebugPage extends StatelessWidget {
           initialValue: appStateSettings["emailScanning"],
           icon: Icons.mark_email_unread_rounded,
         ),
+        SettingsContainerSwitch(
+          onSwitched: (value) async {
+            updateSettings("emailScanningPullToRefresh", value,
+                pagesNeedingRefresh: [], updateGlobalState: false);
+          },
+          title: "Email Scanning Pull to Refresh",
+          description: "May increase API usage",
+          initialValue: appStateSettings["emailScanningPullToRefresh"],
+          icon: Icons.mark_email_unread_rounded,
+        ),
         SettingsContainerSwitch(
           onSwitched: (value) async {
             updateSettings("sharedBudgets", value,
diff --git a/budget/lib/pages/homePage/homePage.dart b/budget/lib/pages/homePage/homePage.dart
index ae829e0f9..ce3f13f32 100644
--- a/budget/lib/pages/homePage/homePage.dart
+++ b/budget/lib/pages/homePage/homePage.dart
@@ -21,6 +21,7 @@ import 'package:budget/pages/upcomingOverdueTransactionsPage.dart';
 import 'package:budget/struct/databaseGlobal.dart';
 import 'package:budget/struct/settings.dart';
 import 'package:budget/struct/shareBudget.dart';
+import 'package:budget/widgets/animatedCircularProgress.dart';
 import 'package:budget/widgets/openPopup.dart';
 import 'package:budget/widgets/ratingPopup.dart';
 import 'package:budget/widgets/selectedTransactionsActionBar.dart';
diff --git a/budget/lib/pages/homePage/homePageLineGraph.dart b/budget/lib/pages/homePage/homePageLineGraph.dart
index ae125ca1d..6df4e1cbf 100644
--- a/budget/lib/pages/homePage/homePageLineGraph.dart
+++ b/budget/lib/pages/homePage/homePageLineGraph.dart
@@ -44,78 +44,12 @@ class HomePageLineGraph extends StatelessWidget {
                   boxShadow: boxShadowCheck(boxShadowGeneral(context)),
                 ),
                 child: appStateSettings["lineGraphReferenceBudgetPk"] == null
-                    ? StreamBuilder<List<Transaction>>(
-                        stream:
-                            database.getTransactionsInTimeRangeFromCategories(
-                                DateTime(
-                                  DateTime.now().year,
-                                  DateTime.now().month - 1,
-                                  DateTime.now().day,
-                                ),
-                                DateTime(
-                                  DateTime.now().year,
-                                  DateTime.now().month,
-                                  DateTime.now().day,
-                                ),
-                                [],
-                                true,
-                                true,
-                                selectedSlidingSelector == 2
-                                    ? false
-                                    : selectedSlidingSelector == 3
-                                        ? true
-                                        : null,
-                                null,
-                                null),
-                        builder: (context, snapshot) {
-                          if (snapshot.hasData) {
-                            bool cumulative =
-                                appStateSettings["showCumulativeSpending"];
-                            double cumulativeTotal = 0;
-                            List<Pair> points = [];
-                            for (DateTime indexDay = DateTime(
-                              DateTime.now().year,
-                              DateTime.now().month - 1,
-                              DateTime.now().day,
-                            );
-                                indexDay.compareTo(DateTime.now()) < 0;
-                                indexDay = DateTime(indexDay.year,
-                                    indexDay.month, indexDay.day + 1)) {
-                              //can be optimized...
-                              double totalForDay = 0;
-                              for (Transaction transaction in snapshot.data!) {
-                                if (indexDay.year ==
-                                        transaction.dateCreated.year &&
-                                    indexDay.month ==
-                                        transaction.dateCreated.month &&
-                                    indexDay.day ==
-                                        transaction.dateCreated.day) {
-                                  if (transaction.income) {
-                                    totalForDay += transaction.amount.abs() *
-                                        (amountRatioToPrimaryCurrencyGivenPk(
-                                                Provider.of<AllWallets>(
-                                                    context),
-                                                transaction.walletFk) ??
-                                            0);
-                                  } else {
-                                    totalForDay -= transaction.amount.abs() *
-                                        (amountRatioToPrimaryCurrencyGivenPk(
-                                                Provider.of<AllWallets>(
-                                                    context),
-                                                transaction.walletFk) ??
-                                            0);
-                                  }
-                                }
-                              }
-                              cumulativeTotal += totalForDay;
-                              points.add(Pair(points.length.toDouble(),
-                                  cumulative ? cumulativeTotal : totalForDay));
-                            }
-                            return LineChartWrapper(
-                                points: [points], isCurved: true);
-                          }
-                          return SizedBox.shrink();
-                        },
+                    ? PastSpendingGraph(
+                        isIncome: selectedSlidingSelector == 2
+                            ? false
+                            : selectedSlidingSelector == 3
+                                ? true
+                                : null,
                       )
                     : StreamBuilder<Budget>(
                         stream: database.getBudget(
@@ -155,3 +89,88 @@ class HomePageLineGraph extends StatelessWidget {
           );
   }
 }
+
+class PastSpendingGraph extends StatelessWidget {
+  const PastSpendingGraph({
+    super.key,
+    required this.isIncome,
+    this.monthsToLoad = 1,
+    this.walletPks,
+    this.extraLeftPaddingIfSmall = 0,
+  });
+  final bool? isIncome;
+  final int monthsToLoad;
+  final List<int>? walletPks;
+  final double extraLeftPaddingIfSmall;
+
+  @override
+  Widget build(BuildContext context) {
+    return StreamBuilder<List<Transaction>>(
+      stream: database.getTransactionsInTimeRangeFromCategories(
+        DateTime(
+          DateTime.now().year,
+          DateTime.now().month - monthsToLoad,
+          DateTime.now().day,
+        ),
+        DateTime(
+          DateTime.now().year,
+          DateTime.now().month,
+          DateTime.now().day,
+        ),
+        [],
+        true,
+        true,
+        isIncome,
+        null,
+        null,
+        walletPks: walletPks,
+      ),
+      builder: (context, snapshot) {
+        if (snapshot.hasData) {
+          bool cumulative = appStateSettings["showCumulativeSpending"];
+          double cumulativeTotal = 0;
+          List<Pair> points = [];
+          for (DateTime indexDay = DateTime(
+            DateTime.now().year,
+            DateTime.now().month - monthsToLoad,
+            DateTime.now().day,
+          );
+              indexDay.compareTo(DateTime.now()) < 0;
+              indexDay =
+                  DateTime(indexDay.year, indexDay.month, indexDay.day + 1)) {
+            //can be optimized...
+            double totalForDay = 0;
+            for (Transaction transaction in snapshot.data!) {
+              if (indexDay.year == transaction.dateCreated.year &&
+                  indexDay.month == transaction.dateCreated.month &&
+                  indexDay.day == transaction.dateCreated.day) {
+                if (transaction.income) {
+                  totalForDay += transaction.amount.abs() *
+                      (amountRatioToPrimaryCurrencyGivenPk(
+                              Provider.of<AllWallets>(context),
+                              transaction.walletFk) ??
+                          0);
+                } else {
+                  totalForDay -= transaction.amount.abs() *
+                      (amountRatioToPrimaryCurrencyGivenPk(
+                              Provider.of<AllWallets>(context),
+                              transaction.walletFk) ??
+                          0);
+                }
+              }
+            }
+            cumulativeTotal += totalForDay;
+            points.add(Pair(points.length.toDouble(),
+                cumulative ? cumulativeTotal : totalForDay));
+          }
+          return LineChartWrapper(
+            points: [points],
+            isCurved: true,
+            extraLeftPaddingIfSmall: extraLeftPaddingIfSmall,
+          );
+        }
+        return SizedBox.shrink();
+      },
+    );
+  }
+}
diff --git a/budget/lib/pages/pastBudgetsPage.dart b/budget/lib/pages/pastBudgetsPage.dart
index 426adeb8f..96cb8ba81 100644
--- a/budget/lib/pages/pastBudgetsPage.dart
+++ b/budget/lib/pages/pastBudgetsPage.dart
@@ -1,4 +1,5 @@
 import 'dart:async';
+import 'dart:developer';
 
 import 'package:budget/database/tables.dart';
 import 'package:budget/functions.dart';
@@ -12,8 +13,12 @@ import 'package:budget/widgets/animatedCircularProgress.dart';
 import 'package:budget/widgets/budgetContainer.dart';
 import 'package:budget/widgets/fadeIn.dart';
 import 'package:budget/widgets/navigationSidebar.dart';
+import 'package:budget/widgets/openBottomSheet.dart';
 import 'package:budget/widgets/openContainerNavigation.dart';
+import 'package:budget/widgets/openPopup.dart';
 import 'package:budget/widgets/pageFramework.dart';
+import 'package:budget/widgets/popupFramework.dart';
+import 'package:budget/widgets/selectCategory.dart';
 import 'package:budget/widgets/tappable.dart';
 import 'package:budget/widgets/textWidgets.dart';
 import 'package:fl_chart/fl_chart.dart';
@@ -58,9 +63,11 @@ GlobalKey<PageFrameworkState> budgetHistoryKey = GlobalKey();
 
 class __PastBudgetsPageContentState extends State<_PastBudgetsPageContent> {
   Stream<List<double?>>? mergedStreamsBudgetTotal;
+  Stream<List<double?>>? mergedStreamsCategoriesTotal;
   List<DateTimeRange> dateTimeRanges = [];
   int amountLoaded = 8;
   int? touchedBudgetIndex = null;
+  List<int>? selectedCategoryFks = [];
 
   initState() {
     Future.delayed(Duration.zero, () async {
@@ -78,6 +85,7 @@ class __PastBudgetsPageContentState extends State<_PastBudgetsPageContent> {
   void loadLines(amountLoaded) async {
     dateTimeRanges = [];
     List<Stream<double?>> watchedBudgetTotals = [];
+    List<Stream<double?>> watchedCategoryTotals = [];
     for (int index = 0; index < amountLoaded; index++) {
       DateTime datePast = DateTime(
         DateTime.now().year -
@@ -116,10 +124,29 @@ class __PastBudgetsPageContentState extends State<_PastBudgetsPageContent> {
                 : null,
         budget: widget.budget,
       ));
+      for (int categoryFk in selectedCategoryFks ?? []) {
+        watchedCategoryTotals
+            .add(database.watchTotalSpentInTimeRangeFromCategories(
+          Provider.of<AllWallets>(context, listen: false),
+          budgetRange.start,
+          budgetRange.end,
+          [categoryFk],
+          false,
+          widget.budget.budgetTransactionFilters,
+          widget.budget.memberTransactionFilters,
+          onlyShowTransactionsBelongingToBudget:
+              widget.budget.sharedKey != null ||
+                      widget.budget.addedTransactionsOnly == true
+                  ? widget.budget.budgetPk
+                  : null,
+          budget: widget.budget,
+        ));
+      }
     }
 
     setState(() {
       mergedStreamsBudgetTotal = StreamZip(watchedBudgetTotals);
+      mergedStreamsCategoriesTotal = StreamZip(watchedCategoryTotals);
     });
     // mergedStreams.listen(
     //   (event) {
@@ -171,6 +198,36 @@ class __PastBudgetsPageContentState extends State<_PastBudgetsPageContent> {
         ),
       ),
       actions: [
+        IconButton(
+          tooltip: "Select Categories",
+          onPressed: () {
+            // TODO this should only be the categories that apply to this budget, not all of them
+            openPopupCustom(
+              context,
+              child: SelectCategory(
+                labelIcon: false,
+                addButton: false,
+                nextLabel: "Select",
+                next: () {
+                  Navigator.pop(context);
+                },
+                selectedCategories: selectedCategoryFks,
+                setSelectedCategories: (List<int> selectedCategoryFks) {
+                  setState(() {
+                    this.selectedCategoryFks = selectedCategoryFks;
+                  });
+                  loadLines(amountLoaded);
+                },
+                scaleWhenSelected: true,
+              ),
+              title: "Select Categories",
+            );
+          },
+          icon: Icon(
+            Icons.category_outlined,
+            color: budgetColorScheme.onSecondaryContainer,
+          ),
+        ),
         IconButton(
           tooltip: "Edit budget",
           onPressed: () {
@@ -203,55 +260,118 @@ class __PastBudgetsPageContentState extends State<_PastBudgetsPageContent> {
             children: [
               Container(
                 color: backgroundColor,
-                child: StreamBuilder<List<double?>>(
-                  stream: mergedStreamsBudgetTotal,
-                  builder: (context, snapshot) {
-                    if (snapshot.hasData) {
-                      double maxY = 100;
-                      List<FlSpot> spots = [];
-                      List<FlSpot> initialSpots = [];
+                child: StreamBuilder<Map<int, TransactionCategory>>(
+                    stream: database.watchAllCategoriesMapped(),
+                    builder: (context, snapshotCategoriesMapped) {
+                      if (snapshotCategoriesMapped.hasData) {
+                        return StreamBuilder<List<double?>>(
+                          stream: mergedStreamsBudgetTotal,
+                          builder: (context, snapshot) {
+                            if (snapshot.hasData) {
+                              double maxY = 100;
+                              List<FlSpot> spots = [];
+                              List<FlSpot> initialSpots = [];
 
-                      for (int i = snapshot.data!.length - 1; i >= 0; i--) {
-                        if ((snapshot.data![i] ?? 0).abs() > maxY)
-                          maxY = (snapshot.data![i] ?? 0).abs();
-                        spots.add(FlSpot(
-                          snapshot.data!.length - 1 - i.toDouble(),
-                          (snapshot.data![i] ?? 0).abs() == 0
-                              ? 0.001
-                              : (snapshot.data![i] ?? 0).abs(),
-                        ));
-                        initialSpots.add(
-                          FlSpot(
-                            snapshot.data!.length - 1 - i.toDouble(),
-                            0.000000000001,
-                          ),
+                              for (int i = snapshot.data!.length - 1;
+                                  i >= 0;
+                                  i--) {
+                                if ((snapshot.data![i] ?? 0).abs() > maxY)
+                                  maxY = (snapshot.data![i] ?? 0).abs();
+                                spots.add(FlSpot(
+                                  snapshot.data!.length - 1 - i.toDouble(),
+                                  (snapshot.data![i] ?? 0).abs() == 0
+                                      ? 0.001
+                                      : (snapshot.data![i] ?? 0).abs(),
+                                ));
+                                initialSpots.add(
+                                  FlSpot(
+                                    snapshot.data!.length - 1 - i.toDouble(),
+                                    0.000000000001,
+                                  ),
+                                );
+                              }
+                              return StreamBuilder<List<double?>>(
+                                  stream: mergedStreamsCategoriesTotal,
+                                  builder: (context, snapshot2) {
+                                    Map<int, List<FlSpot>> categorySpentPoints =
+                                        {};
+                                    if (snapshot2.hasData &&
+                                        (selectedCategoryFks ?? []).length >
+                                            0) {
+                                      // separate each into a map of their own
+                                      int i = snapshot2.data!.length - 1;
+                                      for (int day = 0;
+                                          day <
+                                              snapshot2.data!.length /
+                                                  (selectedCategoryFks ?? [])
+                                                      .length;
+                                          day++) {
+                                        for (int categoryFk
+                                            in (selectedCategoryFks ?? [])
+                                                .reversed) {
+                                          if (categorySpentPoints[categoryFk] ==
+                                              null)
+                                            categorySpentPoints[categoryFk] =
+                                                [];
+                                          if (i < snapshot2.data!.length &&
+                                              i >= 0)
+                                            categorySpentPoints[categoryFk]!
+                                                .add(
+                                              FlSpot(
+                                                (snapshot2.data!.length -
+                                                        day.toDouble() -
+                                                        snapshot2.data!.length)
+                                                    .abs(),
+                                                (snapshot2.data![i] ?? 0)
+                                                            .abs() ==
+                                                        0
+                                                    ? 0.001
+                                                    : (snapshot2.data![i] ?? 0)
+                                                        .abs(),
+                                              ),
+                                            );
+                                          i--;
+                                        }
+                                      }
+                                    }
+                                    // print(categorySpentPoints);
+
+                                    return Padding(
+                                      padding: const EdgeInsets.symmetric(
+                                          vertical: 7),
+                                      child: BudgetHistoryLineGraph(
+                                        onTouchedIndex: (index) {
+                                          // debounce to avoid duplicate key on AnimatedSwitcher
+                                          onTouchedBudgetIndex(index);
+                                        },
+                                        color: dynamicPastel(
+                                            context, budgetColorScheme.primary,
+                                            amountLight: 0.4, amountDark: 0.2),
+                                        dateRanges: dateTimeRanges,
+                                        maxY: widget.budget.amount +
+                                                    0.0000000000001 >
+                                                maxY
+                                            ? widget.budget.amount +
+                                                0.0000000000001
+                                            : maxY,
+                                        spots: spots,
+                                        initialSpots: initialSpots,
+                                        horizontalLineAt: widget.budget.amount,
+                                        budget: widget.budget,
+                                        extraCategorySpots: categorySpentPoints,
+                                        categoriesMapped:
+                                            snapshotCategoriesMapped.data!,
+                                      ),
+                                    );
+                                  });
+                            } else {
+                              return SizedBox.shrink();
+                            }
+                          },
                         );
                       }
-                      return Padding(
-                        padding: const EdgeInsets.symmetric(vertical: 7),
-                        child: BudgetHistoryLineGraph(
-                          onTouchedIndex: (index) {
-                            // debounce to avoid duplicate key on AnimatedSwitcher
-                            onTouchedBudgetIndex(index);
-                          },
-                          color: dynamicPastel(
-                              context, budgetColorScheme.primary,
-                              amountLight: 0.4, amountDark: 0.2),
-                          dateRanges: dateTimeRanges,
-                          maxY: widget.budget.amount + 0.0000000000001 > maxY
-                              ? widget.budget.amount + 0.0000000000001
-                              : maxY,
-                          spots: spots,
-                          initialSpots: initialSpots,
-                          horizontalLineAt: widget.budget.amount,
-                          budget: widget.budget,
-                        ),
-                      );
-                    } else {
                       return SizedBox.shrink();
-                    }
-                  },
-                ),
+                    }),
               ),
               Transform.translate(
                 offset: Offset(0, -1),
diff --git a/budget/lib/pages/settingsPage.dart b/budget/lib/pages/settingsPage.dart
index eb4feee5c..c283d09bd 100644
--- a/budget/lib/pages/settingsPage.dart
+++ b/budget/lib/pages/settingsPage.dart
@@ -201,16 +201,18 @@ class MorePages extends StatelessWidget {
           child: Row(
             mainAxisSize: MainAxisSize.min,
             children: [
-              Expanded(
-                child: SettingsContainer(
-                  onTap: () {
-                    openUrl("https://github.com/jameskokoska/Cashew");
-                  },
-                  title: "Open Source",
-                  icon: Icons.code_rounded,
-                  isOutlined: true,
-                ),
-              ),
+              kIsWeb
+                  ? SizedBox.shrink()
+                  : Expanded(
+                      child: SettingsContainer(
+                        onTap: () {
+                          openUrl("https://github.com/jameskokoska/Cashew");
+                        },
+                        title: "Open Source",
+                        icon: Icons.code_rounded,
+                        isOutlined: true,
+                      ),
+                    ),
               kIsWeb
                   ? SizedBox.shrink()
                   : Expanded(
diff --git a/budget/lib/pages/walletDetailsPage.dart b/budget/lib/pages/walletDetailsPage.dart
index f975bcfdc..622440736 100644
--- a/budget/lib/pages/walletDetailsPage.dart
+++ b/budget/lib/pages/walletDetailsPage.dart
@@ -3,10 +3,12 @@ import 'package:budget/functions.dart';
 import 'package:budget/main.dart';
 import 'package:budget/pages/addWalletPage.dart';
 import 'package:budget/pages/budgetPage.dart';
+import 'package:budget/pages/homePage/homePageLineGraph.dart';
 import 'package:budget/pages/transactionsListPage.dart';
 import 'package:budget/pages/transactionsSearchPage.dart';
 import 'package:budget/struct/databaseGlobal.dart';
 import 'package:budget/struct/settings.dart';
+import 'package:budget/widgets/lineGraph.dart';
 import 'package:budget/widgets/openBottomSheet.dart';
 import 'package:budget/widgets/selectedTransactionsActionBar.dart';
 import 'package:budget/widgets/categoryEntry.dart';
@@ -16,6 +18,7 @@ import 'package:budget/widgets/pieChart.dart';
 import 'package:budget/widgets/tappable.dart';
 import 'package:budget/widgets/textWidgets.dart';
 import 'package:budget/widgets/transactionEntry.dart';
+import 'package:fl_chart/fl_chart.dart';
 import 'package:flutter/material.dart';
 import 'package:budget/colors.dart';
 import 'package:budget/widgets/viewAllTransactionsButton.dart';
@@ -132,11 +135,16 @@ class _WalletDetailsPageState extends State<WalletDetailsPage> {
                         ),
                       ),
                     ),
+                    WalletDetailsLineGraph(
+                      walletPks: widget.wallet == null
+                          ? []
+                          : [widget.wallet!.walletPk],
+                    ),
                     WalletCategoryPieChart(
                       wallet: widget.wallet,
                       walletColorScheme: walletColorScheme,
                       onSelectedCategory: (int categoryPk) {
-                        pageState.currentState?.scrollToTop(duration: 5000);
+                        // pageState.currentState?.scrollTo(500);
                         setState(() {
                           selectedCategoryPk = categoryPk;
                         });
@@ -417,3 +425,64 @@ class IncomeTransactionsSummary extends StatelessWidget {
     );
   }
 }
+
+class WalletDetailsLineGraph extends StatefulWidget {
+  const WalletDetailsLineGraph({super.key, required this.walletPks});
+  final List<int>? walletPks;
+
+  @override
+  State<WalletDetailsLineGraph> createState() => _WalletDetailsLineGraphState();
+}
+
+class _WalletDetailsLineGraphState extends State<WalletDetailsLineGraph> {
+  int numberMonthsToLoad = 1;
+
+  @override
+  Widget build(BuildContext context) {
+    return Padding(
+      padding: const EdgeInsets.only(bottom: 13),
+      child: Container(
+        margin: EdgeInsets.symmetric(horizontal: 13),
+        decoration: BoxDecoration(
+          borderRadius: BorderRadius.all(Radius.circular(15)),
+          color: appStateSettings["materialYou"]
+              ? dynamicPastel(
+                  context, Theme.of(context).colorScheme.secondaryContainer,
+                  amount: 0.5)
+              : getColor(context, "lightDarkAccentHeavyLight"),
+          boxShadow: boxShadowCheck(boxShadowGeneral(context)),
+        ),
+        child: Stack(
+          children: [
+            Positioned(
+              left: 0,
+              bottom: 0,
+              child: IconButton(
+                icon: Icon(
+                  Icons.history_rounded,
+                  size: 22,
+                  color: Theme.of(context).colorScheme.primary.withOpacity(0.8),
+                ),
+                onPressed: () {
+                  setState(() {
+                    numberMonthsToLoad++;
+                  });
+                },
+              ),
+            ),
+            Padding(
+              padding: EdgeInsets.only(left: 9, right: 9, bottom: 12, top: 18),
+              child: PastSpendingGraph(
+                isIncome: null,
+                walletPks: widget.walletPks,
+                monthsToLoad: numberMonthsToLoad,
+                extraLeftPaddingIfSmall:
+                    10, //we want this because the corner has the load more dates button
+              ),
+            ),
+          ],
+        ),
+      ),
+    );
+  }
+}
diff --git a/budget/lib/struct/defaultPreferences.dart b/budget/lib/struct/defaultPreferences.dart
index 633e8185c..f78279d7d 100644
--- a/budget/lib/struct/defaultPreferences.dart
+++ b/budget/lib/struct/defaultPreferences.dart
@@ -65,6 +65,7 @@ Map<String, dynamic> defaultPreferences() {
     "animationSpeed": 1.0,
     "sharedBudgets": false,
     "emailScanning": false,
+    "emailScanningPullToRefresh": false,
     "legacyTransactionAmountColors": false,
     "massEditSelectedTransactions": false,
     "searchFilters": false,
diff --git a/budget/lib/widgets/animatedCircularProgress.dart b/budget/lib/widgets/animatedCircularProgress.dart
index bbd22f4bf..9f60359e6 100644
--- a/budget/lib/widgets/animatedCircularProgress.dart
+++ b/budget/lib/widgets/animatedCircularProgress.dart
@@ -132,7 +132,7 @@ class _RoundedCircularProgressPainter extends CustomPainter {
       ..strokeCap = StrokeCap.round;
     final overagePaint = Paint()
       ..color = overageColor
-      ..strokeWidth = valueStrokeWidth
+      ..strokeWidth = valueStrokeWidth + 1
       ..style = PaintingStyle.stroke
       ..strokeCap = StrokeCap.round;
     final overagePaintShadow = Paint()
@@ -141,7 +141,6 @@ class _RoundedCircularProgressPainter extends CustomPainter {
       ..style = PaintingStyle.stroke
       ..strokeCap = StrokeCap.round
       ..maskFilter = MaskFilter.blur(BlurStyle.normal, 2);
-    ;
 
     final startAngleRadians = startAngle;
     final rect = Rect.fromCircle(center: center, radius: radius);
diff --git a/budget/lib/widgets/budgetContainer.dart b/budget/lib/widgets/budgetContainer.dart
index bc37e576d..6826581df 100644
--- a/budget/lib/widgets/budgetContainer.dart
+++ b/budget/lib/widgets/budgetContainer.dart
@@ -261,6 +261,7 @@ class BudgetContainer extends StatelessWidget {
                                           amount: 0.7,
                                           inverse: true),
                                       size: 38,
+                                      iconPadding: 18,
                                     ),
                             ),
                           ),
diff --git a/budget/lib/widgets/budgetHistoryLineGraph.dart b/budget/lib/widgets/budgetHistoryLineGraph.dart
index db98433a2..34a5293d9 100644
--- a/budget/lib/widgets/budgetHistoryLineGraph.dart
+++ b/budget/lib/widgets/budgetHistoryLineGraph.dart
@@ -19,6 +19,8 @@ class BudgetHistoryLineGraph extends StatefulWidget {
     required this.initialSpots,
     required this.horizontalLineAt,
     required this.maxY,
+    required this.extraCategorySpots,
+    required this.categoriesMapped,
     this.onTouchedIndex,
   });
 
@@ -30,6 +32,8 @@ class BudgetHistoryLineGraph extends StatefulWidget {
   final double? horizontalLineAt;
   final double maxY;
   final Function(int?)? onTouchedIndex;
+  final Map<int, List<FlSpot>> extraCategorySpots;
+  final Map<int, TransactionCategory> categoriesMapped;
 
   @override
   State<BudgetHistoryLineGraph> createState() => _BudgetHistoryLineGraphState();
@@ -52,6 +56,31 @@ class _BudgetHistoryLineGraphState extends State<BudgetHistoryLineGraph> {
   @override
   Widget build(BuildContext context) {
     final lineBarsData = [
+      for (int categoryPk in widget.extraCategorySpots.keys)
+        LineChartBarData(
+          isStrokeCapRound: true,
+          spots: widget.extraCategorySpots[categoryPk],
+          isCurved: true,
+          curveSmoothness: 0.35,
+          preventCurveOverShooting: true,
+          barWidth: 3,
+          dotData: FlDotData(
+            show: true,
+            getDotPainter: (spot, percent, barData, index) {
+              return FlDotCirclePainter(
+                radius: 4,
+                color: lightenPastel(
+                        HexColor(widget.categoriesMapped[categoryPk]!.colour),
+                        amount: 0.3)
+                    .withOpacity(0.8),
+                strokeWidth: 0,
+              );
+            },
+          ),
+          color: lightenPastel(
+              HexColor(widget.categoriesMapped[categoryPk]!.colour),
+              amount: 0.3),
+        ),
       LineChartBarData(
         isStrokeCapRound: true,
         spots: loaded ? widget.spots : widget.initialSpots,
@@ -110,8 +139,6 @@ class _BudgetHistoryLineGraphState extends State<BudgetHistoryLineGraph> {
       ),
     ];
 
-    final tooltipsOnBar = lineBarsData[0];
-
     return Container(
       height: MediaQuery.of(context).size.height * 0.3 >
               (getWidthNavigationSidebar(context) <= 0 ? 190 : 350)
@@ -202,6 +229,14 @@ class _BudgetHistoryLineGraphState extends State<BudgetHistoryLineGraph> {
                   interval: getIsFullScreen(context) ? 1 : null,
                   showTitles: true,
                   getTitlesWidget: (value, _) {
+                    DateTime startDate = widget.dateRanges[0].start;
+                    if (widget.spots.length - 1 - value.toInt() <
+                            widget.dateRanges.length &&
+                        widget.spots.length - 1 - value.toInt() >= 0) {
+                      startDate = widget
+                          .dateRanges[widget.spots.length - 1 - value.toInt()]
+                          .start;
+                    }
                     return Padding(
                       padding: const EdgeInsets.only(top: 8.0),
                       child: TextFont(
@@ -209,20 +244,11 @@ class _BudgetHistoryLineGraphState extends State<BudgetHistoryLineGraph> {
                         fontSize: 13,
                         text: widget.budget.reoccurrence ==
                                 BudgetReoccurence.monthly
-                            ? DateFormat('MMM').format(widget
-                                .dateRanges[
-                                    widget.spots.length - 1 - value.toInt()]
-                                .start)
+                            ? DateFormat('MMM').format(startDate)
                             : widget.budget.reoccurrence ==
                                     BudgetReoccurence.yearly
-                                ? DateFormat('yyyy').format(widget
-                                    .dateRanges[
-                                        widget.spots.length - 1 - value.toInt()]
-                                    .start)
-                                : DateFormat('MMM\nd').format(widget
-                                    .dateRanges[
-                                        widget.spots.length - 1 - value.toInt()]
-                                    .start),
+                                ? DateFormat('yyyy').format(startDate)
+                                : DateFormat('MMM\nd').format(startDate),
                         textColor: dynamicPastel(context, widget.color,
                                 amount: 0.8, inverse: true)
                             .withOpacity(0.5),
diff --git a/budget/lib/widgets/button.dart b/budget/lib/widgets/button.dart
index 705e94150..1b95ea125 100644
--- a/budget/lib/widgets/button.dart
+++ b/budget/lib/widgets/button.dart
@@ -149,6 +149,7 @@ class ButtonIcon extends StatelessWidget {
     this.color,
     this.iconColor,
     this.padding,
+    this.iconPadding = 20,
   }) : super(key: key);
   final VoidCallback onTap;
   final IconData icon;
@@ -156,6 +157,7 @@ class ButtonIcon extends StatelessWidget {
   final Color? color;
   final Color? iconColor;
   final EdgeInsets? padding;
+  final double iconPadding;
   @override
   Widget build(BuildContext context) {
     return Tappable(
@@ -168,7 +170,7 @@ class ButtonIcon extends StatelessWidget {
           color: iconColor == null
               ? Theme.of(context).colorScheme.onSecondaryContainer
               : iconColor,
-          size: size - 20,
+          size: size - iconPadding,
         ),
       ),
       color: color == null
diff --git a/budget/lib/widgets/lineGraph.dart b/budget/lib/widgets/lineGraph.dart
index de07dadbf..146f1633d 100644
--- a/budget/lib/widgets/lineGraph.dart
+++ b/budget/lib/widgets/lineGraph.dart
@@ -22,6 +22,7 @@ class _LineChart extends StatefulWidget {
     this.verticalLineAt,
     this.horizontalLineAt,
     required this.enableTouch,
+    this.extraLeftPaddingIfSmall = 0,
     this.colors = const [],
     Key? key,
   }) : super(key: key);
@@ -36,6 +37,7 @@ class _LineChart extends StatefulWidget {
   final double? verticalLineAt;
   final double? horizontalLineAt;
   final bool enableTouch;
+  final double extraLeftPaddingIfSmall;
 
   @override
   State<_LineChart> createState() => _LineChartState();
@@ -228,10 +230,10 @@ class _LineChartState extends State<_LineChart> with WidgetsBindingObserver {
                     : widget.minPair.y <= -1000
                         ? 45
                         : widget.minPair.y <= -100
-                            ? 40
+                            ? 40 + widget.extraLeftPaddingIfSmall / 2
                             : (widget.maxPair.y >= 100
                                     ? (widget.maxPair.y >= 1000 ? 37 : 33)
-                                    : 25) +
+                                    : 25 + widget.extraLeftPaddingIfSmall) +
                                 extraHorizontalPadding) +
                 10,
             // This interval needs more work
@@ -467,6 +469,7 @@ class LineChartWrapper extends StatelessWidget {
     this.enableTouch = true,
     this.colors = const [],
     this.keepHorizontalLineInView = false,
+    this.extraLeftPaddingIfSmall = 0,
     Key? key,
   }) : super(key: key);
 
@@ -479,6 +482,7 @@ class LineChartWrapper extends StatelessWidget {
   final bool enableTouch;
   final List<Color> colors;
   final bool keepHorizontalLineInView;
+  final double extraLeftPaddingIfSmall;
 
   List<List<Pair>> filterPointsList(List<List<Pair>> pointsList) {
     List<List<Pair>> pointsOut = [];
@@ -592,6 +596,7 @@ class LineChartWrapper extends StatelessWidget {
           horizontalLineAt: horizontalLineAt,
           enableTouch: enableTouch,
           colors: colors,
+          extraLeftPaddingIfSmall: extraLeftPaddingIfSmall,
         ),
       ),
     );
diff --git a/budget/lib/widgets/navigationFramework.dart b/budget/lib/widgets/navigationFramework.dart
index e97aa3592..5a8b009b2 100644
--- a/budget/lib/widgets/navigationFramework.dart
+++ b/budget/lib/widgets/navigationFramework.dart
@@ -74,6 +74,10 @@ Future<bool> runAllCloudFunctions(context) async {
   loadingIndeterminateKey.currentState!.setVisibility(true);
   try {
     await syncData();
+    if (appStateSettings["emailScanningPullToRefresh"] ||
+        entireAppLoaded == false) {
+      await parseEmailsInBackground(context, forceParse: true);
+    }
     await syncPendingQueueOnServer(); //sync before download
     await getCloudBudgets();
     await createBackupInBackground(context);
@@ -123,11 +127,14 @@ class PageNavigationFrameworkState extends State<PageNavigationFramework> {
     // Functions to run after entire UI loaded
     Future.delayed(Duration.zero, () async {
       await showChangelog(context);
+      if ((appStateSettings["numLogins"] + 1) % 10 == 0 &&
+          appStateSettings["submittedFeedback"] != true) {
+        openBottomSheet(context, RatingPopup());
+      }
       runNotificationPayLoads(context);
       await initializeNotificationsPlatform();
       await setDailyNotificationOnLaunch(context);
       await setUpcomingNotifications(context);
-      await parseEmailsInBackground(context);
       await runAllCloudFunctions(context);
       database.deleteWanderingTransactions();
       entireAppLoaded = true;
@@ -136,10 +143,6 @@ class PageNavigationFrameworkState extends State<PageNavigationFramework> {
           createSyncBackup(changeMadeSync: true);
         }
       });
-      if ((appStateSettings["numLogins"] + 1) % 10 == 0 &&
-          appStateSettings["submittedFeedback"] != true) {
-        openBottomSheet(context, RatingPopup());
-      }
     });
 
     pages = [
diff --git a/budget/lib/widgets/notificationsSettings.dart b/budget/lib/widgets/notificationsSettings.dart
index 2e11c0068..bbbaf81a0 100644
--- a/budget/lib/widgets/notificationsSettings.dart
+++ b/budget/lib/widgets/notificationsSettings.dart
@@ -67,60 +67,8 @@ class _DailyNotificationsSettingsState
                     title: "Alert Time",
                     icon: Icons.timer,
                     onTap: () async {
-                      TimeOfDay? newTime = await showTimePicker(
-                        context: context,
-                        initialTime: timeOfDay,
-                        initialEntryMode: TimePickerEntryMode.input,
-                        helpText: "",
-                        builder: (BuildContext context, Widget? child) {
-                          if (appStateSettings["materialYou"])
-                            return Theme(
-                              data: Theme.of(context).copyWith(
-                                colorScheme:
-                                    Theme.of(context).colorScheme.copyWith(
-                                          tertiaryContainer: Theme.of(context)
-                                              .colorScheme
-                                              .primaryContainer,
-                                          onTertiaryContainer: Theme.of(context)
-                                              .colorScheme
-                                              .onPrimaryContainer,
-                                        ),
-                                textTheme: TextTheme(
-                                  displayLarge: TextStyle(
-                                    fontSize: 65,
-                                    fontWeight: FontWeight.w300,
-                                  ),
-                                ),
-                              ),
-                              child: child ?? SizedBox.shrink(),
-                            );
-                          return Theme(
-                            data: Theme.of(context).brightness ==
-                                    Brightness.light
-                                ? ThemeData.light().copyWith(
-                                    primaryColor:
-                                        Theme.of(context).colorScheme.primary,
-                                    colorScheme: ColorScheme.light(
-                                        primary: Theme.of(context)
-                                            .colorScheme
-                                            .primary),
-                                    buttonTheme: ButtonThemeData(
-                                        textTheme: ButtonTextTheme.primary),
-                                  )
-                                : ThemeData.dark().copyWith(
-                                    primaryColor:
-                                        Theme.of(context).colorScheme.secondary,
-                                    colorScheme: ColorScheme.dark(
-                                        primary: Theme.of(context)
-                                            .colorScheme
-                                            .secondary),
-                                    buttonTheme: ButtonThemeData(
-                                        textTheme: ButtonTextTheme.primary),
-                                  ),
-                            child: child ?? SizedBox.shrink(),
-                          );
-                        },
-                      );
+                      TimeOfDay? newTime =
+                          await showCustomTimePicker(context, timeOfDay);
                       if (newTime != null) {
                         await initializeNotificationsPlatform();
                         await scheduleDailyNotification(context, newTime);
@@ -203,60 +151,8 @@ class _UpcomingTransactionsNotificationsSettingsState
                     title: "Alert Time",
                     icon: Icons.timer,
                     onTap: () async {
-                      TimeOfDay? newTime = await showTimePicker(
-                        context: context,
-                        initialTime: timeOfDay,
-                        initialEntryMode: TimePickerEntryMode.input,
-                        helpText: "",
-                        builder: (BuildContext context, Widget? child) {
-                          if (appStateSettings["materialYou"])
-                            return Theme(
-                              data: Theme.of(context).copyWith(
-                                colorScheme:
-                                    Theme.of(context).colorScheme.copyWith(
-                                          tertiaryContainer: Theme.of(context)
-                                              .colorScheme
-                                              .primaryContainer,
-                                          onTertiaryContainer: Theme.of(context)
-                                              .colorScheme
-                                              .onPrimaryContainer,
-                                        ),
-                                textTheme: TextTheme(
-                                  displayLarge: TextStyle(
-                                    fontSize: 65,
-                                    fontWeight: FontWeight.w300,
-                                  ),
-                                ),
-                              ),
-                              child: child ?? SizedBox.shrink(),
-                            );
-                          return Theme(
-                            data: Theme.of(context).brightness ==
-                                    Brightness.light
-                                ? ThemeData.light().copyWith(
-                                    primaryColor:
-                                        Theme.of(context).colorScheme.primary,
-                                    colorScheme: ColorScheme.light(
-                                        primary: Theme.of(context)
-                                            .colorScheme
-                                            .primary),
-                                    buttonTheme: ButtonThemeData(
-                                        textTheme: ButtonTextTheme.primary),
-                                  )
-                                : ThemeData.dark().copyWith(
-                                    primaryColor:
-                                        Theme.of(context).colorScheme.secondary,
-                                    colorScheme: ColorScheme.dark(
-                                        primary: Theme.of(context)
-                                            .colorScheme
-                                            .secondary),
-                                    buttonTheme: ButtonThemeData(
-                                        textTheme: ButtonTextTheme.primary),
-                                  ),
-                            child: child ?? SizedBox.shrink(),
-                          );
-                        },
-                      );
+                      TimeOfDay? newTime =
+                          await showCustomTimePicker(context, timeOfDay);
                       if (newTime != null) {
                         await initializeNotificationsPlatform();
                         await scheduleUpcomingTransactionsNotification(
@@ -543,3 +439,54 @@ Future<bool> checkNotificationsPermissionAndroid() async {
   if (result != true) return false;
   return true;
 }
+
+Future<TimeOfDay?> showCustomTimePicker(
+    BuildContext context, TimeOfDay initialTime) async {
+  TimeOfDay? newTime = await showTimePicker(
+    context: context,
+    initialTime: initialTime,
+    initialEntryMode: TimePickerEntryMode.input,
+    helpText: "",
+    builder: (BuildContext context, Widget? child) {
+      if (appStateSettings["materialYou"]) {
+        return Theme(
+          data: Theme.of(context).copyWith(
+            colorScheme: Theme.of(context).colorScheme.copyWith(
+                  tertiaryContainer:
+                      Theme.of(context).colorScheme.primaryContainer,
+                  onTertiaryContainer:
+                      Theme.of(context).colorScheme.onPrimaryContainer,
+                ),
+            textTheme: TextTheme(
+              displayLarge: TextStyle(
+                fontSize: 65,
+                fontWeight: FontWeight.w300,
+              ),
+            ),
+          ),
+          child: child ?? SizedBox.shrink(),
+        );
+      }
+      return Theme(
+        data: Theme.of(context).brightness == Brightness.light
+            ? ThemeData.light().copyWith(
+                primaryColor: Theme.of(context).colorScheme.primary,
+                colorScheme: ColorScheme.light(
+                    primary: Theme.of(context).colorScheme.primary),
+                buttonTheme:
+                    ButtonThemeData(textTheme: ButtonTextTheme.primary),
+              )
+            : ThemeData.dark().copyWith(
+                primaryColor: Theme.of(context).colorScheme.secondary,
+                colorScheme: ColorScheme.dark(
+                    primary: Theme.of(context).colorScheme.secondary),
+                buttonTheme:
+                    ButtonThemeData(textTheme: ButtonTextTheme.primary),
+              ),
+        child: child ?? SizedBox.shrink(),
+      );
+    },
+  );
+
+  return newTime;
+}
diff --git a/budget/lib/widgets/openPopup.dart b/budget/lib/widgets/openPopup.dart
index 3242774b4..6cfab0709 100644
--- a/budget/lib/widgets/openPopup.dart
+++ b/budget/lib/widgets/openPopup.dart
@@ -284,7 +284,7 @@ Future<T?> openPopupCustom<T extends Object?>(
                       context, Theme.of(context).colorScheme.secondaryContainer,
                       amount: 0.5)
                   : getColor(context, "lightDarkAccent"),
-              borderRadius: BorderRadius.circular(10),
+              borderRadius: BorderRadius.circular(20),
               boxShadow: boxShadowGeneral(context),
             ),
             child: Column(
diff --git a/budget/lib/widgets/ratingPopup.dart b/budget/lib/widgets/ratingPopup.dart
index 9cbd578ab..5c004274a 100644
--- a/budget/lib/widgets/ratingPopup.dart
+++ b/budget/lib/widgets/ratingPopup.dart
@@ -71,7 +71,7 @@ class _RatingPopupState extends State<RatingPopup> {
                               : 60,
                           color:
                               selectedStars != null && i <= (selectedStars ?? 0)
-                                  ? Colors.yellow
+                                  ? getColor(context, "starYellow")
                                   : Theme.of(context)
                                       .colorScheme
                                       .secondaryContainer
diff --git a/budget/lib/widgets/selectCategory.dart b/budget/lib/widgets/selectCategory.dart
index cb0300c48..ab29b1fe6 100644
--- a/budget/lib/widgets/selectCategory.dart
+++ b/budget/lib/widgets/selectCategory.dart
@@ -25,6 +25,9 @@ class SelectCategory extends StatefulWidget {
     this.horizontalList = false,
     this.popRoute = true,
     this.showSelectedAllCategoriesIfNoneSelected = false,
+    this.labelIcon = true,
+    this.addButton = true,
+    this.scaleWhenSelected = false,
   }) : super(key: key);
   final Function(TransactionCategory)? setSelectedCategory;
   final Function(List<int>)? setSelectedCategories;
@@ -36,6 +39,9 @@ class SelectCategory extends StatefulWidget {
   final bool horizontalList;
   final bool popRoute;
   final bool showSelectedAllCategoriesIfNoneSelected;
+  final bool labelIcon;
+  final bool addButton;
+  final bool scaleWhenSelected;
 
   @override
   _SelectCategoryState createState() => _SelectCategoryState();
@@ -106,49 +112,60 @@ class _SelectCategoryState extends State<SelectCategory> {
               List<Widget> children = [];
               int index = 0;
               for (TransactionCategory category in snapshot.data!) {
-                children.add(Padding(
-                  padding: EdgeInsets.only(
-                      left: index == 0
-                          ? 12 -
-                              (widget.showSelectedAllCategoriesIfNoneSelected
-                                  ? 4
-                                  : 0)
-                          : 0,
-                      right: index == snapshot.data!.length - 1 ? 12 - 4 : 0),
-                  child: CategoryIcon(
-                    categoryPk: category.categoryPk,
-                    size: 42,
-                    sizePadding: 28,
-                    label: true,
-                    onTap: () {
-                      if (widget.setSelectedCategory != null) {
-                        widget.setSelectedCategory!(category);
-                        setState(() {
-                          selectedCategories = [];
-                          selectedCategories.add(category.categoryPk);
-                        });
-                        Future.delayed(Duration(milliseconds: 70), () {
-                          if (widget.popRoute) Navigator.pop(context);
-                          if (widget.next != null) {
-                            widget.next!();
-                          }
-                        });
-                      } else if (widget.setSelectedCategories != null) {
-                        // print(selectedCategories);
-                        if (selectedCategories.contains(category.categoryPk)) {
-                          setState(() {
-                            selectedCategories.remove(category.categoryPk);
-                          });
-                          widget.setSelectedCategories!(selectedCategories);
-                        } else {
+                children.add(AnimatedScale(
+                  key: ValueKey(category.categoryPk),
+                  duration: Duration(milliseconds: 1500),
+                  curve: Curves.elasticOut,
+                  scale: widget.scaleWhenSelected == true &&
+                          selectedCategories.contains(category.categoryPk) ==
+                              false
+                      ? 0.86
+                      : 1,
+                  child: Padding(
+                    padding: EdgeInsets.only(
+                        left: index == 0
+                            ? 12 -
+                                (widget.showSelectedAllCategoriesIfNoneSelected
+                                    ? 4
+                                    : 0)
+                            : 0,
+                        right: index == snapshot.data!.length - 1 ? 12 - 4 : 0),
+                    child: CategoryIcon(
+                      categoryPk: category.categoryPk,
+                      size: 42,
+                      sizePadding: 28,
+                      label: widget.labelIcon,
+                      onTap: () {
+                        if (widget.setSelectedCategory != null) {
+                          widget.setSelectedCategory!(category);
                           setState(() {
+                            selectedCategories = [];
                             selectedCategories.add(category.categoryPk);
                           });
-                          widget.setSelectedCategories!(selectedCategories);
+                          Future.delayed(Duration(milliseconds: 70), () {
+                            if (widget.popRoute) Navigator.pop(context);
+                            if (widget.next != null) {
+                              widget.next!();
+                            }
+                          });
+                        } else if (widget.setSelectedCategories != null) {
+                          // print(selectedCategories);
+                          if (selectedCategories
+                              .contains(category.categoryPk)) {
+                            setState(() {
+                              selectedCategories.remove(category.categoryPk);
+                            });
+                            widget.setSelectedCategories!(selectedCategories);
+                          } else {
+                            setState(() {
+                              selectedCategories.add(category.categoryPk);
+                            });
+                            widget.setSelectedCategories!(selectedCategories);
+                          }
                         }
-                      }
-                    },
-                    outline: selectedCategories.contains(category.categoryPk),
+                      },
+                      outline: selectedCategories.contains(category.categoryPk),
+                    ),
                   ),
                 ));
                 index++;
@@ -233,22 +250,24 @@ class _SelectCategoryState extends State<SelectCategory> {
                         )
                       : SizedBox.shrink(),
                   ...children,
-                  Padding(
-                    key: ValueKey(2),
-                    padding: const EdgeInsets.only(
-                      bottom: 21,
-                      top: 8,
-                      right: 20,
-                    ),
-                    child: AddButton(
-                      onTap: () {},
-                      padding: EdgeInsets.zero,
-                      openPage: AddCategoryPage(
-                        title: "Add Category",
-                      ),
-                      width: 70,
-                    ),
-                  ),
+                  widget.addButton == false
+                      ? SizedBox.shrink()
+                      : Padding(
+                          key: ValueKey(2),
+                          padding: const EdgeInsets.only(
+                            bottom: 21,
+                            top: 8,
+                            right: 20,
+                          ),
+                          child: AddButton(
+                            onTap: () {},
+                            padding: EdgeInsets.zero,
+                            openPage: AddCategoryPage(
+                              title: "Add Category",
+                            ),
+                            width: 70,
+                          ),
+                        ),
                 ],
               );
             }
@@ -282,52 +301,62 @@ class _SelectCategoryState extends State<SelectCategory> {
                           .map(
                             (index, category) => MapEntry(
                               index,
-                              CategoryIcon(
-                                canEditByLongPress: false,
+                              AnimatedScale(
                                 key: ValueKey(category.categoryPk),
-                                categoryPk: category.categoryPk,
-                                size: size,
-                                sizePadding: 24,
-                                margin: EdgeInsets.zero,
-                                label: true,
-                                onTap: () {
-                                  if (widget.setSelectedCategory != null) {
-                                    widget.setSelectedCategory!(category);
-                                    setState(() {
-                                      selectedCategories = [];
-                                      selectedCategories
-                                          .add(category.categoryPk);
-                                    });
-                                    Future.delayed(Duration(milliseconds: 70),
-                                        () {
-                                      if (widget.popRoute)
-                                        Navigator.pop(context);
-                                      if (widget.next != null) {
-                                        widget.next!();
-                                      }
-                                    });
-                                  } else if (widget.setSelectedCategories !=
-                                      null) {
-                                    if (selectedCategories
-                                        .contains(category.categoryPk)) {
-                                      setState(() {
-                                        selectedCategories
-                                            .remove(category.categoryPk);
-                                      });
-                                      widget.setSelectedCategories!(
-                                          selectedCategories);
-                                    } else {
+                                duration: Duration(milliseconds: 1500),
+                                curve: Curves.elasticOut,
+                                scale: widget.scaleWhenSelected == true &&
+                                        selectedCategories.contains(
+                                                category.categoryPk) ==
+                                            false
+                                    ? 0.86
+                                    : 1,
+                                child: CategoryIcon(
+                                  canEditByLongPress: false,
+                                  categoryPk: category.categoryPk,
+                                  size: size,
+                                  sizePadding: 24,
+                                  margin: EdgeInsets.zero,
+                                  label: widget.labelIcon,
+                                  onTap: () {
+                                    if (widget.setSelectedCategory != null) {
+                                      widget.setSelectedCategory!(category);
                                       setState(() {
+                                        selectedCategories = [];
                                         selectedCategories
                                             .add(category.categoryPk);
                                       });
-                                      widget.setSelectedCategories!(
-                                          selectedCategories);
+                                      Future.delayed(Duration(milliseconds: 70),
+                                          () {
+                                        if (widget.popRoute)
+                                          Navigator.pop(context);
+                                        if (widget.next != null) {
+                                          widget.next!();
+                                        }
+                                      });
+                                    } else if (widget.setSelectedCategories !=
+                                        null) {
+                                      if (selectedCategories
+                                          .contains(category.categoryPk)) {
+                                        setState(() {
+                                          selectedCategories
+                                              .remove(category.categoryPk);
+                                        });
+                                        widget.setSelectedCategories!(
+                                            selectedCategories);
+                                      } else {
+                                        setState(() {
+                                          selectedCategories
+                                              .add(category.categoryPk);
+                                        });
+                                        widget.setSelectedCategories!(
+                                            selectedCategories);
+                                      }
                                     }
-                                  }
-                                },
-                                outline: selectedCategories
-                                    .contains(category.categoryPk),
+                                  },
+                                  outline: selectedCategories
+                                      .contains(category.categoryPk),
+                                ),
                               ),
                             ),
                           )
@@ -335,23 +364,26 @@ class _SelectCategoryState extends State<SelectCategory> {
                           .toList(),
                     ],
                     footer: [
-                      Padding(
-                        padding: const EdgeInsets.only(left: 7.5, right: 7.5),
-                        child: Column(
-                          mainAxisSize: MainAxisSize.max,
-                          children: [
-                            Expanded(
-                              child: AddButton(
-                                onTap: () {},
-                                openPage: AddCategoryPage(
-                                  title: "Add Category",
-                                ),
+                      widget.addButton == false
+                          ? SizedBox.shrink()
+                          : Padding(
+                              padding:
+                                  const EdgeInsets.only(left: 7.5, right: 7.5),
+                              child: Column(
+                                mainAxisSize: MainAxisSize.max,
+                                children: [
+                                  Expanded(
+                                    child: AddButton(
+                                      onTap: () {},
+                                      openPage: AddCategoryPage(
+                                        title: "Add Category",
+                                      ),
+                                    ),
+                                  ),
+                                  SizedBox(height: 15),
+                                ],
                               ),
                             ),
-                            SizedBox(height: 15),
-                          ],
-                        ),
-                      ),
                     ],
                     onReorder: (_intPrevious, _intNew) async {
                       TransactionCategory oldCategory =
diff --git a/budget/lib/widgets/showChangelog.dart b/budget/lib/widgets/showChangelog.dart
index 3349ac4f0..a54e4f021 100644
--- a/budget/lib/widgets/showChangelog.dart
+++ b/budget/lib/widgets/showChangelog.dart
@@ -9,6 +9,11 @@ import 'package:flutter/material.dart';
 
 Future<void> showChangelog(context, {forceShow = false}) async {
   String changelog = """
+    Can select categories and compare category spending on budget history page
+    Pull to refresh for email parsing option
+    Refactored ask for notification time
+    Circular progress UI size tweaks
+    Ask for rating is no longer delayed
     Fixed category spent amounts in budget page
     Web upcoming/overdue transactions centered subtitle
     Web wallet summary layout width constrained
