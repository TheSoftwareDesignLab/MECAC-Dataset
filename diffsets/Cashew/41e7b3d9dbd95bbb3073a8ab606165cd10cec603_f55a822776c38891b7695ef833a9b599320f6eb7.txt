diff --git a/budget/lib/colors.dart b/budget/lib/colors.dart
index f15f677d3..fad5a9305 100644
--- a/budget/lib/colors.dart
+++ b/budget/lib/colors.dart
@@ -45,3 +45,30 @@ Color lighten(Color color, [double amount = .1]) {
 
   return hslLight.toColor();
 }
+
+class HexColor extends Color {
+  static int _getColorFromHex(String? hexColor, Color? defaultColor) {
+    if (hexColor == null) {
+      if (defaultColor == null) {
+        return Colors.blue.value;
+      } else {
+        return defaultColor.value;
+      }
+    }
+    hexColor = hexColor.replaceAll("#", "");
+    hexColor = hexColor.replaceAll("0x", "");
+    if (hexColor.length == 6) {
+      hexColor = "FF" + hexColor;
+    }
+    return int.parse(hexColor, radix: 16);
+  }
+
+  HexColor(final String? hexColor, [final Color? defaultColor])
+      : super(_getColorFromHex(hexColor, defaultColor));
+}
+
+String toHexString(Color color) {
+  String valueString = color.value.toRadixString(16);
+  print(valueString);
+  return "0x" + valueString;
+}
diff --git a/budget/lib/database/tables.dart b/budget/lib/database/tables.dart
index 4b79f4361..1f97e69e7 100644
--- a/budget/lib/database/tables.dart
+++ b/budget/lib/database/tables.dart
@@ -17,7 +17,7 @@ const int DEFAULT_LIMIT = 50;
 const int DEFAULT_OFFSET = 0;
 
 enum BudgetReoccurence { daily, weekly, monthly, yearly }
-enum Theme { dark, light }
+enum ThemeSetting { dark, light }
 
 class IntListInColumnConverter extends TypeConverter<List<int>, String> {
   const IntListInColumnConverter();
@@ -85,7 +85,7 @@ class Budgets extends Table {
 class Settings extends Table {
   IntColumn get userPk => integer().autoIncrement()();
   TextColumn get name => text().withLength(max: NAME_LIMIT)();
-  IntColumn get theme => intEnum<Theme>()();
+  IntColumn get theme => intEnum<ThemeSetting>()();
   TextColumn get currency => text().withLength(max: CURRENCY_LIMIT)();
 }
 
diff --git a/budget/lib/database/tables.g.dart b/budget/lib/database/tables.g.dart
index 2c7695dd1..0f9cc38b2 100644
--- a/budget/lib/database/tables.g.dart
+++ b/budget/lib/database/tables.g.dart
@@ -1445,7 +1445,7 @@ class $BudgetsTable extends Budgets with TableInfo<$BudgetsTable, Budget> {
 class UserSettings extends DataClass implements Insertable<UserSettings> {
   final int userPk;
   final String name;
-  final Theme theme;
+  final ThemeSetting theme;
   final String currency;
   UserSettings(
       {required this.userPk,
@@ -1494,7 +1494,7 @@ class UserSettings extends DataClass implements Insertable<UserSettings> {
     return UserSettings(
       userPk: serializer.fromJson<int>(json['userPk']),
       name: serializer.fromJson<String>(json['name']),
-      theme: serializer.fromJson<Theme>(json['theme']),
+      theme: serializer.fromJson<ThemeSetting>(json['theme']),
       currency: serializer.fromJson<String>(json['currency']),
     );
   }
@@ -1504,13 +1504,13 @@ class UserSettings extends DataClass implements Insertable<UserSettings> {
     return <String, dynamic>{
       'userPk': serializer.toJson<int>(userPk),
       'name': serializer.toJson<String>(name),
-      'theme': serializer.toJson<Theme>(theme),
+      'theme': serializer.toJson<ThemeSetting>(theme),
       'currency': serializer.toJson<String>(currency),
     };
   }
 
   UserSettings copyWith(
-          {int? userPk, String? name, Theme? theme, String? currency}) =>
+          {int? userPk, String? name, ThemeSetting? theme, String? currency}) =>
       UserSettings(
         userPk: userPk ?? this.userPk,
         name: name ?? this.name,
@@ -1544,7 +1544,7 @@ class UserSettings extends DataClass implements Insertable<UserSettings> {
 class SettingsCompanion extends UpdateCompanion<UserSettings> {
   final Value<int> userPk;
   final Value<String> name;
-  final Value<Theme> theme;
+  final Value<ThemeSetting> theme;
   final Value<String> currency;
   const SettingsCompanion({
     this.userPk = const Value.absent(),
@@ -1555,7 +1555,7 @@ class SettingsCompanion extends UpdateCompanion<UserSettings> {
   SettingsCompanion.insert({
     this.userPk = const Value.absent(),
     required String name,
-    required Theme theme,
+    required ThemeSetting theme,
     required String currency,
   })  : name = Value(name),
         theme = Value(theme),
@@ -1563,7 +1563,7 @@ class SettingsCompanion extends UpdateCompanion<UserSettings> {
   static Insertable<UserSettings> custom({
     Expression<int>? userPk,
     Expression<String>? name,
-    Expression<Theme>? theme,
+    Expression<ThemeSetting>? theme,
     Expression<String>? currency,
   }) {
     return RawValuesInsertable({
@@ -1577,7 +1577,7 @@ class SettingsCompanion extends UpdateCompanion<UserSettings> {
   SettingsCompanion copyWith(
       {Value<int>? userPk,
       Value<String>? name,
-      Value<Theme>? theme,
+      Value<ThemeSetting>? theme,
       Value<String>? currency}) {
     return SettingsCompanion(
       userPk: userPk ?? this.userPk,
@@ -1636,10 +1636,10 @@ class $SettingsTable extends Settings
       typeName: 'TEXT',
       requiredDuringInsert: true);
   final VerificationMeta _themeMeta = const VerificationMeta('theme');
-  late final GeneratedColumnWithTypeConverter<Theme, int?> theme =
+  late final GeneratedColumnWithTypeConverter<ThemeSetting, int?> theme =
       GeneratedColumn<int?>('theme', aliasedName, false,
               typeName: 'INTEGER', requiredDuringInsert: true)
-          .withConverter<Theme>($SettingsTable.$converter0);
+          .withConverter<ThemeSetting>($SettingsTable.$converter0);
   final VerificationMeta _currencyMeta = const VerificationMeta('currency');
   late final GeneratedColumn<String?> currency = GeneratedColumn<String?>(
       'currency', aliasedName, false,
@@ -1690,8 +1690,8 @@ class $SettingsTable extends Settings
     return $SettingsTable(_db, alias);
   }
 
-  static TypeConverter<Theme, int> $converter0 =
-      const EnumIndexConverter<Theme>(Theme.values);
+  static TypeConverter<ThemeSetting, int> $converter0 =
+      const EnumIndexConverter<ThemeSetting>(ThemeSetting.values);
 }
 
 abstract class _$FinanceDatabase extends GeneratedDatabase {
diff --git a/budget/lib/functions.dart b/budget/lib/functions.dart
index 31fd6e842..414697a1c 100644
--- a/budget/lib/functions.dart
+++ b/budget/lib/functions.dart
@@ -59,8 +59,8 @@ String getCurrencyString() {
 }
 
 //TODO
-TransactionCategory findCategory(String id) {
-  return TransactionCategory(
+TransactionCategoryOld findCategory(String id) {
+  return TransactionCategoryOld(
     title: "Groceries",
     icon: "groceries.png",
     id: "id",
@@ -68,8 +68,8 @@ TransactionCategory findCategory(String id) {
   );
 }
 
-List<TransactionCategory> listCategory() {
-  return defaultCategories();
+List<TransactionCategoryOld> listCategory() {
+  return defaultCategoriesOld();
 }
 
 List<TransactionTag> listTag() {
diff --git a/budget/lib/main.dart b/budget/lib/main.dart
index 49ba3b0f4..f362990ba 100644
--- a/budget/lib/main.dart
+++ b/budget/lib/main.dart
@@ -1,54 +1,76 @@
+import 'package:budget/database/tables.dart';
 import 'package:budget/pages/addTransactionPage.dart';
+import 'package:budget/struct/databaseGlobal.dart';
+import 'package:budget/struct/defaultCategories.dart';
 import 'package:budget/widgets/fab.dart';
 import 'package:flutter/material.dart';
 import './pages/homePage.dart';
 import 'package:budget/colors.dart';
 
-void main() {
+void main() async {
+  database = await FinanceDatabase();
   runApp(MyApp());
 }
 
+Future initialize() async {
+  //Initialize default categories
+  for (var category in defaultCategories()) {
+    await database.createOrUpdateCategory(category);
+  }
+  return true;
+}
+
 class MyApp extends StatelessWidget {
+  MyApp({Key? key}) : super(key: key);
+
   @override
   Widget build(BuildContext context) {
-    return MaterialApp(
-      title: 'Flutter Demo',
-      theme: ThemeData(
-        fontFamily: 'Avenir',
-        buttonColor: Theme.of(context).colorScheme.accentColor,
-        primaryColor: Colors.white,
-        accentColor: Theme.of(context).colorScheme.accentColor,
-        primaryColorDark: Colors.grey[200],
-        primaryColorLight: Colors.grey[100],
-        primaryColorBrightness: Brightness.light,
-        brightness: Brightness.light,
-        canvasColor: Colors.grey[100],
-        appBarTheme: AppBarTheme(brightness: Brightness.light),
-      ),
-      darkTheme: ThemeData(
-        fontFamily: 'Avenir',
-        buttonColor: Theme.of(context).colorScheme.accentColor,
-        primaryColor: Colors.black,
-        accentColor: Theme.of(context).colorScheme.accentColor,
-        primaryColorDark: Colors.grey[800],
-        primaryColorBrightness: Brightness.dark,
-        primaryColorLight: Colors.grey[850],
-        brightness: Brightness.dark,
-        indicatorColor: Colors.white,
-        canvasColor: Colors.black,
-        appBarTheme: AppBarTheme(brightness: Brightness.dark),
-      ),
-      themeMode: ThemeMode.system,
-      home: Scaffold(
-        body: MyHomePage(
-          title: "test",
-        ),
-        floatingActionButton: FAB(
-          openPage: AddTransactionPage(
-            title: "",
-          ),
-        ),
-      ),
-    );
+    return FutureBuilder(
+        future: initialize(),
+        builder: (context, snapshot) {
+          if (snapshot.hasData) {
+            return MaterialApp(
+              title: 'Flutter Demo',
+              theme: ThemeData(
+                fontFamily: 'Avenir',
+                buttonColor: Theme.of(context).colorScheme.accentColor,
+                primaryColor: Colors.white,
+                accentColor: Theme.of(context).colorScheme.accentColor,
+                primaryColorDark: Colors.grey[200],
+                primaryColorLight: Colors.grey[100],
+                primaryColorBrightness: Brightness.light,
+                brightness: Brightness.light,
+                canvasColor: Colors.grey[100],
+                appBarTheme: AppBarTheme(brightness: Brightness.light),
+              ),
+              darkTheme: ThemeData(
+                fontFamily: 'Avenir',
+                buttonColor: Theme.of(context).colorScheme.accentColor,
+                primaryColor: Colors.black,
+                accentColor: Theme.of(context).colorScheme.accentColor,
+                primaryColorDark: Colors.grey[800],
+                primaryColorBrightness: Brightness.dark,
+                primaryColorLight: Colors.grey[850],
+                brightness: Brightness.dark,
+                indicatorColor: Colors.white,
+                canvasColor: Colors.black,
+                appBarTheme: AppBarTheme(brightness: Brightness.dark),
+              ),
+              themeMode: ThemeMode.system,
+              home: Scaffold(
+                body: MyHomePage(
+                  title: "test",
+                ),
+                floatingActionButton: FAB(
+                  openPage: AddTransactionPage(
+                    title: "",
+                  ),
+                ),
+              ),
+            );
+          } else {
+            return Container();
+          }
+        });
   }
 }
diff --git a/budget/lib/pages/addTransactionPage.dart b/budget/lib/pages/addTransactionPage.dart
index 5698bb0e9..0430386fb 100644
--- a/budget/lib/pages/addTransactionPage.dart
+++ b/budget/lib/pages/addTransactionPage.dart
@@ -1,4 +1,6 @@
+import 'package:budget/database/tables.dart';
 import 'package:budget/functions.dart';
+import 'package:budget/struct/databaseGlobal.dart';
 import 'package:budget/widgets/button.dart';
 import 'package:budget/widgets/textInput.dart';
 import 'package:budget/widgets/textWidgets.dart';
@@ -16,7 +18,10 @@ import 'package:math_expressions/math_expressions.dart';
 //put recent used tags at the top? when no category selected
 
 class AddTransactionPage extends StatefulWidget {
-  AddTransactionPage({Key? key, required this.title}) : super(key: key);
+  AddTransactionPage({
+    Key? key,
+    required this.title,
+  }) : super(key: key);
   final String title;
 
   @override
@@ -86,6 +91,18 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
     });
   }
 
+  Future addTransaction() async {
+    print("Added transaction");
+    await database.createOrUpdateTransaction(Transaction(
+        transactionPk: DateTime.now().millisecondsSinceEpoch,
+        name: selectedTitle ?? "",
+        amount: selectedAmount ?? 10,
+        note: "",
+        budgetFk: 0,
+        categoryFk: 0,
+        dateCreated: DateTime.now()));
+  }
+
   late TextEditingController _titleInputController;
   late TextEditingController _dateInputController;
 
@@ -120,7 +137,8 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
                             child: SelectAmount(
                               amountPassed: selectedAmountCalculation ?? "",
                               setSelectedAmount: setSelectedAmount,
-                              next: () {
+                              next: () async {
+                                await addTransaction();
                                 Navigator.pop(context);
                                 Navigator.pop(context);
                               },
@@ -147,7 +165,7 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
             slivers: [
               SliverAppBar(
                 leading: Container(),
-                backgroundColor: Colors.black,
+                backgroundColor: Theme.of(context).canvasColor,
                 floating: false,
                 pinned: true,
                 expandedHeight: 200.0,
@@ -167,8 +185,9 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
                   [
                     AnimatedContainer(
                       duration: Duration(milliseconds: 300),
-                      color: selectedCategory?.color ??
-                          Theme.of(context).canvasColor,
+                      color: HexColor(selectedCategory?.colour,
+                              Theme.of(context).canvasColor)
+                          .withOpacity(0.55),
                       child: Padding(
                         padding: EdgeInsets.only(
                             left: 17, right: 37, top: 20, bottom: 18),
@@ -179,7 +198,9 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
                             AnimatedSwitcher(
                               duration: Duration(milliseconds: 300),
                               child: CategoryIcon(
-                                key: ValueKey(selectedCategory?.id ?? ""),
+                                noBackground: true,
+                                key: ValueKey(
+                                    selectedCategory?.categoryPk ?? ""),
                                 category: selectedCategory,
                                 size: 60,
                                 onTap: () {
@@ -239,12 +260,12 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
                                     duration: Duration(milliseconds: 350),
                                     child: Container(
                                       key: ValueKey(
-                                          selectedCategory?.title ?? ""),
+                                          selectedCategory?.name ?? ""),
                                       width: double.infinity,
                                       child: TextFont(
                                         textAlign: TextAlign.right,
                                         fontSize: 18,
-                                        text: selectedCategory?.title ?? "",
+                                        text: selectedCategory?.name ?? "",
                                       ),
                                     ),
                                   ),
@@ -322,7 +343,8 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
                                     amountPassed:
                                         selectedAmountCalculation ?? "",
                                     setSelectedAmount: setSelectedAmount,
-                                    next: () {
+                                    next: () async {
+                                      await addTransaction;
                                       Navigator.pop(context);
                                       Navigator.pop(context);
                                     },
@@ -350,7 +372,8 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
                               child: SelectAmount(
                                 amountPassed: selectedAmountCalculation ?? "",
                                 setSelectedAmount: setSelectedAmount,
-                                next: () {
+                                next: () async {
+                                  await addTransaction();
                                   Navigator.pop(context);
                                   Navigator.pop(context);
                                 },
@@ -366,7 +389,8 @@ class _AddTransactionPageState extends State<AddTransactionPage> {
                         height: 50,
                         fractionScaleHeight: 0.93,
                         fractionScaleWidth: 0.98,
-                        onTap: () {
+                        onTap: () async {
+                          await addTransaction();
                           Navigator.of(context).pop();
                         },
                       ),
@@ -530,7 +554,7 @@ class _SelectTitleState extends State<SelectTitle> {
             AnimatedSwitcher(
               duration: Duration(milliseconds: 300),
               child: CategoryIcon(
-                key: ValueKey(selectedCategory?.id ?? ""),
+                key: ValueKey(selectedCategory?.categoryPk ?? ""),
                 margin: EdgeInsets.zero,
                 category: selectedCategory,
                 size: 55,
@@ -611,41 +635,49 @@ class _SelectCategoryState extends State<SelectCategory> {
   //find the selected category using selectedCategory
   @override
   Widget build(BuildContext context) {
-    return Padding(
-      padding: const EdgeInsets.only(bottom: 8.0),
-      child: Center(
-        child: Wrap(
-          alignment: WrapAlignment.center,
-          children: listCategory()
-              .asMap()
-              .map(
-                (index, category) => MapEntry(
-                  index,
-                  CategoryIcon(
-                    category: category,
-                    size: 50,
-                    label: true,
-                    onTap: () {
-                      widget.setSelectedCategory(category);
-                      setState(() {
-                        selectedIndex = index;
-                      });
-                      Future.delayed(Duration(milliseconds: 70), () {
-                        Navigator.pop(context);
-                        if (widget.next != null) {
-                          widget.next!();
-                        }
-                      });
-                    },
-                    outline: selectedIndex == index,
-                  ),
+    return StreamBuilder<List<TransactionCategory>>(
+        stream: database.watchAllCategories(),
+        builder: (context, snapshot) {
+          if (snapshot.hasData) {
+            return Padding(
+              padding: const EdgeInsets.only(bottom: 8.0),
+              child: Center(
+                child: Wrap(
+                  alignment: WrapAlignment.center,
+                  children: snapshot.data!
+                      .asMap()
+                      .map(
+                        (index, category) => MapEntry(
+                          index,
+                          CategoryIcon(
+                            category: category,
+                            size: 50,
+                            label: true,
+                            onTap: () {
+                              widget.setSelectedCategory(category);
+                              setState(() {
+                                selectedIndex = index;
+                              });
+                              Future.delayed(Duration(milliseconds: 70), () {
+                                Navigator.pop(context);
+                                if (widget.next != null) {
+                                  widget.next!();
+                                }
+                              });
+                            },
+                            outline: selectedIndex == index,
+                          ),
+                        ),
+                      )
+                      .values
+                      .toList(),
                 ),
-              )
-              .values
-              .toList(),
-        ),
-      ),
-    );
+              ),
+            );
+          } else {
+            return Container();
+          }
+        });
   }
 }
 
@@ -1035,7 +1067,7 @@ class CalculatorButton extends StatelessWidget {
 
 class SelectTag extends StatefulWidget {
   SelectTag({Key? key, this.setSelectedCategory}) : super(key: key);
-  final Function(TransactionCategory)? setSelectedCategory;
+  final Function(TransactionCategoryOld)? setSelectedCategory;
 
   @override
   _SelectTagState createState() => _SelectTagState();
diff --git a/budget/lib/pages/budgetPage.dart b/budget/lib/pages/budgetPage.dart
index ee309e59b..d159a1c3a 100644
--- a/budget/lib/pages/budgetPage.dart
+++ b/budget/lib/pages/budgetPage.dart
@@ -111,7 +111,7 @@ class BudgetPage extends StatelessWidget {
             delegate: SliverChildBuilderDelegate(
               (BuildContext context, int index) {
                 return CategoryEntry(
-                  category: TransactionCategory(
+                  category: TransactionCategoryOld(
                       title: "Shopping",
                       icon: "shopping.png",
                       id: "12901-",
@@ -135,27 +135,27 @@ class BudgetPage extends StatelessWidget {
             ]),
           ),
         ),
-        SliverPadding(
-          padding: EdgeInsets.symmetric(vertical: 5),
-          sliver: SliverList(
-            delegate: SliverChildBuilderDelegate(
-              (BuildContext context, int index) {
-                return TransactionEntry(
-                  openPage: OpenTestPage(),
-                  transaction: Transaction(
-                    title: "Uber",
-                    amount: 50,
-                    categoryID: "id",
-                    date: DateTime.now(),
-                    note: "this is a transaction",
-                    tagIDs: ["id1"],
-                  ),
-                );
-              },
-              childCount: 2,
-            ),
-          ),
-        ),
+        // SliverPadding(
+        //   padding: EdgeInsets.symmetric(vertical: 5),
+        //   sliver: SliverList(
+        //     delegate: SliverChildBuilderDelegate(
+        //       (BuildContext context, int index) {
+        //         return TransactionEntry(
+        //           openPage: OpenTestPage(),
+        //           transaction: Transaction(
+        //             title: "Uber",
+        //             amount: 50,
+        //             categoryID: "id",
+        //             date: DateTime.now(),
+        //             note: "this is a transaction",
+        //             tagIDs: ["id1"],
+        //           ),
+        //         );
+        //       },
+        //       childCount: 2,
+        //     ),
+        //   ),
+        // ),
       ],
     );
   }
diff --git a/budget/lib/pages/homePage.dart b/budget/lib/pages/homePage.dart
index 870c341a3..e73945369 100644
--- a/budget/lib/pages/homePage.dart
+++ b/budget/lib/pages/homePage.dart
@@ -1,6 +1,7 @@
+import 'package:budget/database/tables.dart';
 import 'package:budget/pages/addTransactionPage.dart';
 import 'package:budget/struct/budget.dart';
-import 'package:budget/struct/transaction.dart';
+import 'package:budget/struct/databaseGlobal.dart';
 import 'package:budget/widgets/budgetContainer.dart';
 import 'package:budget/widgets/button.dart';
 import 'package:budget/widgets/fab.dart';
@@ -15,7 +16,10 @@ import 'package:flutter_sticky_header/flutter_sticky_header.dart';
 import 'package:budget/colors.dart';
 
 class MyHomePage extends StatefulWidget {
-  MyHomePage({Key? key, required this.title}) : super(key: key);
+  MyHomePage({
+    Key? key,
+    required this.title,
+  }) : super(key: key);
   final String title;
 
   @override
@@ -29,178 +33,191 @@ class _MyHomePageState extends State<MyHomePage> {
   @override
   Widget build(BuildContext context) {
     return Scaffold(
-      body: CustomScrollView(
-        slivers: [
-          SliverAppBar(
-            leading: Container(),
-            backgroundColor: Theme.of(context).colorScheme.accentColor,
-            floating: false,
-            pinned: true,
-            expandedHeight: 200.0,
-            collapsedHeight: 65,
-            flexibleSpace: FlexibleSpaceBar(
-              titlePadding: EdgeInsets.symmetric(vertical: 15, horizontal: 18),
-              title: HomeAppBar(key: _appBarKey, defaultTitle: "Home"),
-              background: Container(
-                color: Theme.of(context).canvasColor,
-              ),
-            ),
-          ),
-          SliverList(
-            delegate: SliverChildListDelegate(
-              [
-                BudgetContainer(
-                  budget: Budget(
-                    title: "Budget Name",
-                    color: Color(0xFF51833D),
-                    total: 500,
-                    spent: 210,
-                    endDate: DateTime.now(),
-                    startDate: DateTime.now(),
-                    period: "month",
-                    periodLength: 10,
+      body: StreamBuilder<List<Transaction>>(
+        stream: database.watchAllTransactionsFiltered(),
+        builder: (context, snapshot) {
+          if (snapshot.hasData) {
+            print(snapshot.data);
+            return CustomScrollView(
+              slivers: [
+                SliverAppBar(
+                  leading: Container(),
+                  backgroundColor: Theme.of(context).colorScheme.accentColor,
+                  floating: false,
+                  pinned: true,
+                  expandedHeight: 200.0,
+                  collapsedHeight: 65,
+                  flexibleSpace: FlexibleSpaceBar(
+                    titlePadding:
+                        EdgeInsets.symmetric(vertical: 15, horizontal: 18),
+                    title: HomeAppBar(key: _appBarKey, defaultTitle: "Home"),
+                    background: Container(
+                      color: Theme.of(context).canvasColor,
+                    ),
                   ),
                 ),
-              ],
-            ),
-          ),
-          SliverAppBar(
-            leading: Container(),
-            backgroundColor: Colors.transparent,
-            expandedHeight: 65.1,
-            collapsedHeight: 65,
-            flexibleSpace: LayoutBuilder(builder: (
-              BuildContext context,
-              BoxConstraints constraints,
-            ) {
-              if (setTitleHeight == 0)
-                setTitleHeight = constraints.biggest.height;
-              print(setTitleHeight);
-              if (constraints.biggest.height < setTitleHeight) {
-                //occur when title disappears (scrolling down)
-                //add delay to wait for layout of children widgets first
-                Future.delayed(Duration.zero, () async {
-                  _appBarKey.currentState?.changeTitle("Transactions", 1);
-                });
-              } else {
-                //occur when title appears (scrolling up)
-                Future.delayed(Duration.zero, () async {
-                  _appBarKey.currentState?.changeTitle("Home", -1);
-                });
-              }
-              return FlexibleSpaceBar(
-                titlePadding:
-                    EdgeInsets.symmetric(vertical: 15, horizontal: 18),
-                title: TextFont(
-                  text: "Transactions",
-                  fontSize: 20,
-                  fontWeight: FontWeight.bold,
-                ),
-              );
-            }),
-          ),
-          SliverStickyHeader(
-            header: Column(
-              crossAxisAlignment: CrossAxisAlignment.start,
-              children: [
-                DateDivider(date: DateTime.now()),
-              ],
-            ),
-            sliver: SliverPadding(
-              padding: EdgeInsets.symmetric(vertical: 10),
-              sliver: SliverList(
-                delegate: SliverChildBuilderDelegate(
-                  (BuildContext context, int index) {
-                    return TransactionEntry(
-                      openPage: OpenTestPage(),
-                      transaction: Transaction(
-                        title: "Uber",
-                        amount: 50,
-                        categoryID: "id",
-                        date: DateTime.now(),
-                        note: "this is a transaction",
-                        tagIDs: ["id1"],
+                // SliverList(
+                //   delegate: SliverChildListDelegate(
+                //     [
+                //       BudgetContainer(
+                //         budget: Budget(
+                //           title: "Budget Name",
+                //           color: Color(0xFF51833D),
+                //           total: 500,
+                //           spent: 210,
+                //           endDate: DateTime.now(),
+                //           startDate: DateTime.now(),
+                //           period: "month",
+                //           periodLength: 10,
+                //         ),
+                //       ),
+                //     ],
+                //   ),
+                // ),
+                SliverAppBar(
+                  leading: Container(),
+                  backgroundColor: Colors.transparent,
+                  expandedHeight: 65.1,
+                  collapsedHeight: 65,
+                  flexibleSpace: LayoutBuilder(builder: (
+                    BuildContext context,
+                    BoxConstraints constraints,
+                  ) {
+                    if (setTitleHeight == 0)
+                      setTitleHeight = constraints.biggest.height;
+                    print(setTitleHeight);
+                    if (constraints.biggest.height < setTitleHeight) {
+                      //occur when title disappears (scrolling down)
+                      //add delay to wait for layout of children widgets first
+                      Future.delayed(Duration.zero, () async {
+                        _appBarKey.currentState?.changeTitle("Transactions", 1);
+                      });
+                    } else {
+                      //occur when title appears (scrolling up)
+                      Future.delayed(Duration.zero, () async {
+                        _appBarKey.currentState?.changeTitle("Home", -1);
+                      });
+                    }
+                    return FlexibleSpaceBar(
+                      titlePadding:
+                          EdgeInsets.symmetric(vertical: 15, horizontal: 18),
+                      title: TextFont(
+                        text: "Transactions",
+                        fontSize: 20,
+                        fontWeight: FontWeight.bold,
                       ),
                     );
-                  },
-                  childCount: 2,
-                ),
-              ),
-            ),
-          ),
-          SliverList(
-            delegate: SliverChildListDelegate(
-              [
-                TransactionEntry(
-                  openPage: OpenTestPage(),
-                  transaction: Transaction(
-                    title: "",
-                    amount: 50,
-                    categoryID: "id",
-                    date: DateTime.now(),
-                    note: "this is a transaction",
-                    tagIDs: ["id1", "id2"],
-                  ),
+                  }),
                 ),
-                TransactionEntry(
-                  openPage: OpenTestPage(),
-                  transaction: Transaction(
-                    title: "Uber",
-                    amount: 50,
-                    categoryID: "id",
-                    date: DateTime.now(),
-                    note: "this is a transaction",
-                    tagIDs: ["id1", "id2"],
+                SliverStickyHeader(
+                  header: Column(
+                    crossAxisAlignment: CrossAxisAlignment.start,
+                    children: [
+                      DateDivider(date: DateTime.now()),
+                    ],
                   ),
-                ),
-                TransactionEntry(
-                  openPage: OpenTestPage(),
-                  transaction: Transaction(
-                    title: "",
-                    amount: 50,
-                    categoryID: "id",
-                    date: DateTime.now(),
-                    note: "",
-                    tagIDs: [],
-                  ),
-                ),
-                TransactionEntry(
-                  openPage: OpenTestPage(),
-                  transaction: Transaction(
-                    title: "",
-                    amount: 50,
-                    categoryID: "id",
-                    date: DateTime.now(),
-                    note: "hello",
-                    tagIDs: [],
-                  ),
-                ),
-                TransactionEntry(
-                  openPage: OpenTestPage(),
-                  transaction: Transaction(
-                    title: "",
-                    amount: 50,
-                    categoryID: "id",
-                    date: DateTime.now(),
-                    note: "",
-                    tagIDs: ["id"],
-                  ),
-                ),
-                TransactionEntry(
-                  openPage: OpenTestPage(),
-                  transaction: Transaction(
-                    title: "",
-                    amount: 50,
-                    categoryID: "id",
-                    date: DateTime.now(),
-                    note: "hello",
-                    tagIDs: ["id"],
+                  sliver: SliverPadding(
+                    padding: EdgeInsets.symmetric(vertical: 10),
+                    sliver: SliverList(
+                      delegate: SliverChildBuilderDelegate(
+                        (BuildContext context, int index) {
+                          return TransactionEntry(
+                            openPage: OpenTestPage(),
+                            transaction: Transaction(
+                              transactionPk:
+                                  snapshot.data![index].transactionPk,
+                              name: snapshot.data![index].name,
+                              amount: snapshot.data![index].amount,
+                              note: snapshot.data![index].note,
+                              budgetFk: snapshot.data![index].budgetFk,
+                              categoryFk: snapshot.data![index].categoryFk,
+                              dateCreated: snapshot.data![index].dateCreated,
+                            ),
+                          );
+                        },
+                        childCount: snapshot.data?.length,
+                      ),
+                    ),
                   ),
                 ),
+                // SliverList(
+                //   delegate: SliverChildListDelegate(
+                //     [
+                //       TransactionEntry(
+                //         openPage: OpenTestPage(),
+                //         transaction: Transaction(
+                //           title: "",
+                //           amount: 50,
+                //           categoryID: "id",
+                //           date: DateTime.now(),
+                //           note: "this is a transaction",
+                //           tagIDs: ["id1", "id2"],
+                //         ),
+                //       ),
+                //       TransactionEntry(
+                //         openPage: OpenTestPage(),
+                //         transaction: Transaction(
+                //           title: "Uber",
+                //           amount: 50,
+                //           categoryID: "id",
+                //           date: DateTime.now(),
+                //           note: "this is a transaction",
+                //           tagIDs: ["id1", "id2"],
+                //         ),
+                //       ),
+                //       TransactionEntry(
+                //         openPage: OpenTestPage(),
+                //         transaction: Transaction(
+                //           title: "",
+                //           amount: 50,
+                //           categoryID: "id",
+                //           date: DateTime.now(),
+                //           note: "",
+                //           tagIDs: [],
+                //         ),
+                //       ),
+                //       TransactionEntry(
+                //         openPage: OpenTestPage(),
+                //         transaction: Transaction(
+                //           title: "",
+                //           amount: 50,
+                //           categoryID: "id",
+                //           date: DateTime.now(),
+                //           note: "hello",
+                //           tagIDs: [],
+                //         ),
+                //       ),
+                //       TransactionEntry(
+                //         openPage: OpenTestPage(),
+                //         transaction: Transaction(
+                //           title: "",
+                //           amount: 50,
+                //           categoryID: "id",
+                //           date: DateTime.now(),
+                //           note: "",
+                //           tagIDs: ["id"],
+                //         ),
+                //       ),
+                //       TransactionEntry(
+                //         openPage: OpenTestPage(),
+                //         transaction: Transaction(
+                //           title: "",
+                //           amount: 50,
+                //           categoryID: "id",
+                //           date: DateTime.now(),
+                //           note: "hello",
+                //           tagIDs: ["id"],
+                //         ),
+                //       ),
+                //     ],
+                //   ),
+                // ),
               ],
-            ),
-          ),
-        ],
+            );
+          } else {
+            return Container();
+          }
+        },
       ),
     );
   }
diff --git a/budget/lib/struct/databaseGlobal.dart b/budget/lib/struct/databaseGlobal.dart
new file mode 100644
index 000000000..7546097ea
--- /dev/null
+++ b/budget/lib/struct/databaseGlobal.dart
@@ -0,0 +1,4 @@
+import 'package:budget/database/tables.dart';
+import 'package:flutter/material.dart';
+
+late FinanceDatabase database;
diff --git a/budget/lib/struct/defaultCategories.dart b/budget/lib/struct/defaultCategories.dart
index d537721eb..df0134244 100644
--- a/budget/lib/struct/defaultCategories.dart
+++ b/budget/lib/struct/defaultCategories.dart
@@ -1,49 +1,141 @@
+import 'package:budget/colors.dart';
+import 'package:budget/database/tables.dart';
 import 'package:budget/struct/transactionCategory.dart';
 import 'package:flutter/material.dart';
 
-List<TransactionCategory> defaultCategories() {
+List<TransactionCategoryOld> defaultCategoriesOld() {
   return [
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Food", icon: "cutlery.png", id: "food", color: Colors.blueGrey),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Groceries",
         icon: "groceries.png",
         id: "groceries",
         color: Colors.green),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Shopping",
         icon: "shopping.png",
         id: "shopping",
         color: Colors.pink),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Transit", icon: "tram.png", id: "id", color: Colors.yellow),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Entertainment",
         icon: "popcorn.png",
         id: "entertainment",
         color: Colors.blue),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Bills & Fees",
         icon: "bills.png",
         id: "bills & fees",
         color: Colors.green),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Education",
         icon: "graduation.png",
         id: "education",
         color: Colors.blue),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Gifts", icon: "gift.png", id: "gifts", color: Colors.red),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Sports", icon: "sports.png", id: "sports", color: Colors.cyan),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Beauty",
         icon: "flower.png",
         id: "beauty",
         color: Colors.purple),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Work", icon: "briefcase.png", id: "work", color: Colors.brown),
-    TransactionCategory(
+    TransactionCategoryOld(
         title: "Travel", icon: "plane.png", id: "travel", color: Colors.orange),
   ];
 }
+
+List<TransactionCategory> defaultCategories() {
+  toHexString(Colors.green);
+  return [
+    TransactionCategory(
+      categoryPk: 1,
+      name: "Food",
+      colour: toHexString(Colors.blueGrey),
+      iconName: "cutlery.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 2,
+      name: "Groceries",
+      colour: toHexString(Colors.green),
+      iconName: "groceries.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 3,
+      name: "Shopping",
+      colour: toHexString(Colors.pink),
+      iconName: "shopping.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 4,
+      name: "Transit",
+      colour: toHexString(Colors.yellow),
+      iconName: "tram.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 5,
+      name: "Entertainment",
+      colour: toHexString(Colors.blue),
+      iconName: "popcorn.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 6,
+      name: "Bills & Fees",
+      colour: toHexString(Colors.green),
+      iconName: "bills.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 7,
+      name: "Education",
+      colour: toHexString(Colors.blue),
+      iconName: "graduation.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 8,
+      name: "Gifts",
+      colour: toHexString(Colors.red),
+      iconName: "gift.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 9,
+      name: "Sports",
+      colour: toHexString(Colors.cyan),
+      iconName: "sports.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 10,
+      name: "Beauty",
+      colour: toHexString(Colors.purple),
+      iconName: "flower.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 11,
+      name: "Work",
+      colour: toHexString(Colors.brown),
+      iconName: "briefcase.png",
+      dateCreated: DateTime.now(),
+    ),
+    TransactionCategory(
+      categoryPk: 12,
+      name: "Travel",
+      colour: toHexString(Colors.orange),
+      iconName: "plane.png",
+      dateCreated: DateTime.now(),
+    ),
+  ];
+}
diff --git a/budget/lib/struct/transactionCategory.dart b/budget/lib/struct/transactionCategory.dart
index 09956a4c3..8828b8f82 100644
--- a/budget/lib/struct/transactionCategory.dart
+++ b/budget/lib/struct/transactionCategory.dart
@@ -1,11 +1,11 @@
 import 'package:flutter/material.dart';
 
-class TransactionCategory {
+class TransactionCategoryOld {
   final String title;
   final String icon;
   final String id;
   final Color color;
-  TransactionCategory({
+  TransactionCategoryOld({
     required this.title,
     required this.icon,
     required this.id,
diff --git a/budget/lib/widgets/categoryEntry.dart b/budget/lib/widgets/categoryEntry.dart
index 1d9d6971c..7084c7c58 100644
--- a/budget/lib/widgets/categoryEntry.dart
+++ b/budget/lib/widgets/categoryEntry.dart
@@ -10,7 +10,7 @@ import '../colors.dart';
 class CategoryEntry extends StatelessWidget {
   CategoryEntry({Key? key, required this.category}) : super(key: key);
 
-  final TransactionCategory category;
+  final TransactionCategoryOld category;
 
   @override
   Widget build(BuildContext context) {
@@ -20,11 +20,11 @@ class CategoryEntry extends StatelessWidget {
         margin: EdgeInsets.only(left: 14, right: 25, top: 6, bottom: 6),
         child: Row(
           children: [
-            CategoryIcon(
-              category: category,
-              size: 30,
-              margin: EdgeInsets.zero,
-            ),
+            // CategoryIcon(
+            //   category: category,
+            //   size: 30,
+            //   margin: EdgeInsets.zero,
+            // ),
             Container(
               width: 15,
             ),
diff --git a/budget/lib/widgets/transactionEntry.dart b/budget/lib/widgets/transactionEntry.dart
index eead8f13a..f6266f77a 100644
--- a/budget/lib/widgets/transactionEntry.dart
+++ b/budget/lib/widgets/transactionEntry.dart
@@ -1,5 +1,5 @@
+import 'package:budget/database/tables.dart';
 import 'package:budget/functions.dart';
-import 'package:budget/struct/transaction.dart';
 import 'package:budget/struct/transactionCategory.dart';
 import 'package:budget/struct/transactionTag.dart';
 import 'package:budget/widgets/tappable.dart';
@@ -18,7 +18,7 @@ class TransactionEntry extends StatelessWidget {
   final Transaction transaction;
 
   final double fabSize = 50;
-  final TransactionCategory category = findCategory("id");
+  final TransactionCategoryOld category = findCategory("id");
 
   @override
   Widget build(BuildContext context) {
@@ -47,11 +47,11 @@ class TransactionEntry extends StatelessWidget {
               margin: EdgeInsets.only(left: 14, right: 25, top: 12, bottom: 12),
               child: Row(
                 children: [
-                  CategoryIcon(
-                    category: category,
-                    size: 45,
-                    margin: EdgeInsets.zero,
-                  ),
+                  // CategoryIcon(
+                  //   category: category,
+                  //   size: 45,
+                  //   margin: EdgeInsets.zero,
+                  // ),
                   Container(
                     width: 15,
                   ),
@@ -60,15 +60,15 @@ class TransactionEntry extends StatelessWidget {
                       child: Column(
                         crossAxisAlignment: CrossAxisAlignment.start,
                         children: [
-                          transaction.title != ""
+                          transaction.name != ""
                               ? TextFont(
-                                  text: transaction.title,
+                                  text: transaction.name,
                                   fontSize: 20,
                                 )
                               : Container(
                                   height: transaction.note == "" ? 0 : 7),
-                          transaction.title == "" &&
-                                  transaction.tagIDs.length > 0
+                          transaction.name == "" &&
+                                  (transaction.labelFks?.length ?? 0) > 0
                               ? TagIcon(
                                   tag: TransactionTag(
                                       title: "test",
@@ -76,14 +76,14 @@ class TransactionEntry extends StatelessWidget {
                                       categoryID: "id"),
                                   size: transaction.note == "" ? 20 : 16)
                               : Container(),
-                          transaction.title == "" &&
-                                  transaction.tagIDs.length == 0
+                          transaction.name == "" &&
+                                  (transaction.labelFks?.length ?? 0) == 0
                               ? TextFont(
                                   text: category.title,
                                   fontSize: transaction.note == "" ? 23 : 20,
                                 )
                               : Container(),
-                          transaction.title == "" && transaction.note != ""
+                          transaction.name == "" && transaction.note != ""
                               ? Container(height: 4)
                               : Container(),
                           transaction.note == ""
@@ -97,8 +97,8 @@ class TransactionEntry extends StatelessWidget {
                               ? Container()
                               : Container(height: 4),
                           //TODO loop through all tags relating to this entry
-                          transaction.title != "" &&
-                                  transaction.tagIDs.length > 0
+                          transaction.name != "" &&
+                                  (transaction.labelFks?.length ?? 0) > 0
                               ? TagIcon(
                                   tag: TransactionTag(
                                       title: "test",
@@ -134,7 +134,8 @@ class CategoryIcon extends StatelessWidget {
       this.labelSize = 10,
       this.margin,
       this.sizePadding = 20,
-      this.outline = false})
+      this.outline = false,
+      this.noBackground = false})
       : super(key: key);
 
   final TransactionCategory? category;
@@ -145,6 +146,7 @@ class CategoryIcon extends StatelessWidget {
   final EdgeInsets? margin;
   final double sizePadding;
   final bool outline;
+  final bool noBackground;
 
   @override
   Widget build(BuildContext context) {
@@ -172,14 +174,16 @@ class CategoryIcon extends StatelessWidget {
                   borderRadius: BorderRadius.all(Radius.circular(13)),
                 ),
           child: Tappable(
-            color: category?.color.withOpacity(0.6) ??
-                Theme.of(context).colorScheme.lightDarkAccent,
+            color: HexColor(category?.colour,
+                    Theme.of(context).colorScheme.lightDarkAccent)
+                .withOpacity(noBackground ? 0 : 0.55),
             onTap: onTap,
             borderRadius: 10,
             child: Center(
-              child: (category?.icon != null
+              child: (category?.iconName != null
                   ? Image(
-                      image: AssetImage("assets/categories/" + category!.icon),
+                      image: AssetImage(
+                          "assets/categories/" + (category?.iconName ?? "")),
                       width: size,
                     )
                   : Container()),
@@ -193,7 +197,7 @@ class CategoryIcon extends StatelessWidget {
                 child: Center(
                   child: TextFont(
                     textAlign: TextAlign.center,
-                    text: category?.title ?? "",
+                    text: category?.name ?? "",
                     fontSize: labelSize,
                     maxLines: 1,
                   ),
