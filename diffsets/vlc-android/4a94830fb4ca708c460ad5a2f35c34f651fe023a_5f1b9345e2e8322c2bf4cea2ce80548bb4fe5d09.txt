diff --git a/vlc-android/src/org/videolan/vlc/MediaParsingService.kt b/vlc-android/src/org/videolan/vlc/MediaParsingService.kt
index 51b53f77d5..d3acfd9588 100644
--- a/vlc-android/src/org/videolan/vlc/MediaParsingService.kt
+++ b/vlc-android/src/org/videolan/vlc/MediaParsingService.kt
@@ -45,7 +45,6 @@ import org.videolan.libvlc.util.AndroidUtil
 import org.videolan.medialibrary.Medialibrary
 import org.videolan.medialibrary.interfaces.DevicesDiscoveryCb
 import org.videolan.vlc.gui.helpers.NotificationHelper
-import org.videolan.vlc.gui.onboarding.startOnboarding
 import org.videolan.vlc.repository.DirectoryRepository
 import org.videolan.vlc.util.*
 import java.io.File
@@ -371,7 +370,7 @@ class MediaParsingService : Service(), DevicesDiscoveryCb, CoroutineScope {
             }
             is Init -> {
                 val context = this@MediaParsingService
-                var shouldInit = !dbExists(context)
+                var shouldInit = withContext(Dispatchers.IO) {!dbExists(context)}
                 val initCode = medialibrary.init(context)
                 shouldInit = shouldInit or (initCode == Medialibrary.ML_INIT_DB_RESET)
                 if (initCode != Medialibrary.ML_INIT_FAILED) initMedialib(action.parse, context, shouldInit, action.upgrade)
@@ -413,7 +412,6 @@ class MediaParsingService : Service(), DevicesDiscoveryCb, CoroutineScope {
     companion object {
         val progress = MutableLiveData<ScanProgress>()
         val newStorages = MutableLiveData<MutableList<String>>()
-        var wizardShowing = false
     }
 }
 
@@ -428,19 +426,11 @@ fun Context.rescan() {
 }
 
 fun Context.startMedialibrary(firstRun: Boolean = false, upgrade: Boolean = false, parse: Boolean = true) = AppScope.launch {
-    //todo if user is canceling the permission, onboarding is re-launched
-    if (Medialibrary.getInstance().isStarted) return@launch
+    if (Medialibrary.getInstance().isStarted || !Permissions.canReadStorage(this@startMedialibrary)) return@launch
     val prefs = withContext(Dispatchers.IO) { Settings.getInstance(this@startMedialibrary) }
     val scanOpt = if (AndroidDevices.showTvUi(this@startMedialibrary)) ML_SCAN_ON else prefs.getInt(KEY_MEDIALIBRARY_SCAN, -1)
     if (parse && scanOpt == -1) {
-        if (dbExists(this@startMedialibrary)) prefs.edit().putInt(KEY_MEDIALIBRARY_SCAN, ML_SCAN_ON).apply()
-        else {
-            if (MediaParsingService.wizardShowing) return@launch
-            MediaParsingService.wizardShowing = true
-            startOnboarding()
-
-            return@launch
-        }
+        if (withContext(Dispatchers.IO) { dbExists(this@startMedialibrary) }) prefs.edit().putInt(KEY_MEDIALIBRARY_SCAN, ML_SCAN_ON).apply()
     }
     val intent = Intent(ACTION_INIT, null, this@startMedialibrary, MediaParsingService::class.java)
     ContextCompat.startForegroundService(this@startMedialibrary, intent
@@ -449,8 +439,8 @@ fun Context.startMedialibrary(firstRun: Boolean = false, upgrade: Boolean = fals
             .putExtra(EXTRA_PARSE, parse && scanOpt != ML_SCAN_OFF))
 }
 
-private suspend fun dbExists(context: Context) = withContext(Dispatchers.IO) {
-    File(context.getDir("db", Context.MODE_PRIVATE).toString() + Medialibrary.VLC_MEDIA_DB_NAME).exists()
+fun dbExists(context: Context) : Boolean {
+    return File(context.getDir("db", Context.MODE_PRIVATE).toString() + Medialibrary.VLC_MEDIA_DB_NAME).exists()
 }
 
 private sealed class MLAction
diff --git a/vlc-android/src/org/videolan/vlc/StartActivity.java b/vlc-android/src/org/videolan/vlc/StartActivity.java
index f1aae00dae..7f6f3b37eb 100644
--- a/vlc-android/src/org/videolan/vlc/StartActivity.java
+++ b/vlc-android/src/org/videolan/vlc/StartActivity.java
@@ -54,8 +54,7 @@ public class StartActivity extends FragmentActivity {
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
-        if (AndroidUtil.isNougatOrLater)
-            UiTools.setLocale(this);
+        if (AndroidUtil.isNougatOrLater) UiTools.setLocale(this);
         final Intent intent = getIntent();
         final String action = intent != null ? intent.getAction(): null;
 
@@ -120,7 +119,9 @@ private void startApplication(final boolean tv, final boolean firstRun, final bo
         new Thread(new Runnable() {
             @Override
             public void run() {
-                MediaParsingServiceKt.startMedialibrary(StartActivity.this, firstRun, upgrade, true);
+                if (MediaParsingServiceKt.dbExists(StartActivity.this)) {
+                    MediaParsingServiceKt.startMedialibrary(StartActivity.this, firstRun, upgrade, true);
+                }
             }
         }).start();
         final Intent intent = new Intent(StartActivity.this, tv ? MainTvActivity.class : MainActivity.class)
diff --git a/vlc-android/src/org/videolan/vlc/gui/MainActivity.java b/vlc-android/src/org/videolan/vlc/gui/MainActivity.java
index fee53c8d3c..78e71f73c0 100644
--- a/vlc-android/src/org/videolan/vlc/gui/MainActivity.java
+++ b/vlc-android/src/org/videolan/vlc/gui/MainActivity.java
@@ -36,6 +36,7 @@
 import org.videolan.libvlc.util.AndroidUtil;
 import org.videolan.medialibrary.Medialibrary;
 import org.videolan.vlc.BuildConfig;
+import org.videolan.vlc.MediaParsingService;
 import org.videolan.vlc.MediaParsingServiceKt;
 import org.videolan.vlc.R;
 import org.videolan.vlc.StartActivity;
@@ -49,6 +50,7 @@
 import org.videolan.vlc.gui.browser.ExtensionBrowser;
 import org.videolan.vlc.gui.helpers.Navigator;
 import org.videolan.vlc.gui.helpers.UiTools;
+import org.videolan.vlc.gui.onboarding.OnboardingActivityKt;
 import org.videolan.vlc.gui.preferences.PreferencesActivity;
 import org.videolan.vlc.gui.preferences.PreferencesFragment;
 import org.videolan.vlc.gui.video.VideoGridFragment;
@@ -58,6 +60,7 @@
 import org.videolan.vlc.util.Constants;
 import org.videolan.vlc.util.Permissions;
 import org.videolan.vlc.util.Util;
+import org.videolan.vlc.util.WorkersKt;
 
 import java.util.List;
 
@@ -89,7 +92,6 @@ public class MainActivity extends ContentActivity implements ExtensionManagerSer
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         Util.checkCpuCompatibility(this);
-        if (savedInstanceState == null) Permissions.checkReadStoragePermission(this, false);
         /*** Start initializing the UI ***/
         setContentView(R.layout.main);
         mDrawerLayout = findViewById(R.id.root_container);
@@ -110,6 +112,13 @@ public void run() {
                     }
                 }, 500);
             }
+            WorkersKt.runIO(new Runnable() {
+                @Override
+                public void run() {
+                    if (!MediaParsingServiceKt.dbExists(MainActivity.this)) OnboardingActivityKt.startOnboarding(MainActivity.this);
+                    else Permissions.checkReadStoragePermission(MainActivity.this, false);
+                }
+            });
         }
 
         /* Set up the action bar */
@@ -180,14 +189,6 @@ protected void onStop() {
 
     private void updateNavMenu() {
         mNavigationView.setNavigationItemSelectedListener(mNavigator);
-        final boolean wasVisible = mNavigationView.getMenu().findItem(R.id.nav_video).isVisible();
-        final boolean scan = mSettings.getInt(Constants.KEY_MEDIALIBRARY_SCAN, Constants.ML_SCAN_OFF) == Constants.ML_SCAN_ON;
-        if (wasVisible != scan) mActivityHandler.post(new Runnable() {
-            @Override
-            public void run() {
-                if (scan) getNavigator().showFragment(R.id.nav_video);
-            }
-        });
     }
 
     public boolean isExtensionServiceBinded() {
diff --git a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingActivity.kt b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingActivity.kt
index 5ee1a7161f..93ab377a80 100644
--- a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingActivity.kt
+++ b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingActivity.kt
@@ -1,6 +1,7 @@
 package org.videolan.vlc.gui.onboarding
 
 import android.animation.Animator
+import android.app.Activity
 import android.content.Context
 import android.content.Intent
 import android.os.Build
@@ -12,36 +13,34 @@ import android.widget.ImageButton
 import androidx.appcompat.app.AppCompatActivity
 import androidx.core.content.ContextCompat
 import androidx.viewpager.widget.ViewPager
+import kotlinx.coroutines.CoroutineScope
+import kotlinx.coroutines.ExperimentalCoroutinesApi
+import kotlinx.coroutines.MainScope
 import kotlinx.coroutines.launch
 import org.videolan.vlc.R
 import org.videolan.vlc.gui.helpers.hf.StoragePermissionsDelegate
+import org.videolan.vlc.gui.preferences.PreferencesActivity
 import org.videolan.vlc.gui.view.NonSwipeableViewPager
-import org.videolan.vlc.util.AppScope
-
-
-private const val ADAPTER_COUNT = "ADAPTER_COUNT"
-
-
-class OnboardingActivity : AppCompatActivity(), ViewPager.OnPageChangeListener, IOnScanningCustomizeChangedListener {
+import org.videolan.vlc.startMedialibrary
+import org.videolan.vlc.util.*
 
+@ExperimentalCoroutinesApi
+class OnboardingActivity : AppCompatActivity(), ViewPager.OnPageChangeListener, IOnScanningCustomizeChangedListener, CoroutineScope by MainScope() {
 
     private lateinit var viewPager: NonSwipeableViewPager
 
     private val indicators: Array<View?> = arrayOfNulls(4)
 
-
     private lateinit var previousButton: ImageButton
     private lateinit var nextButton: ImageButton
     private lateinit var doneButton: Button
-
+    private lateinit var viewModel: OnboardingViewModel
 
     private lateinit var onboardingPagerAdapter: OnboardingFragmentPagerAdapter
 
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
 
-
-
         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
             window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS)
             window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS)
@@ -49,8 +48,7 @@ class OnboardingActivity : AppCompatActivity(), ViewPager.OnPageChangeListener,
             window.statusBarColor = ContextCompat.getColor(this, R.color.onboarding_grey_dark)
         }
 
-
-
+        viewModel = getOnboardingModel()
         setContentView(R.layout.activity_onboarding)
         viewPager = findViewById(R.id.pager)
         indicators[0] = findViewById(R.id.indicator0)
@@ -85,13 +83,11 @@ class OnboardingActivity : AppCompatActivity(), ViewPager.OnPageChangeListener,
 
 
         previousButton.setOnClickListener {
-            if (viewPager.currentItem > 0) {
-                viewPager.currentItem = viewPager.currentItem - 1
-            }
+            if (viewPager.currentItem > 0) { viewPager.currentItem = viewPager.currentItem - 1 }
         }
 
         nextButton.setOnClickListener {
-            if (viewPager.currentItem == 0 && !OnboardingInputCache.permissionGranted) {
+            if (viewPager.currentItem == 0 && !viewModel.permissionGranted) {
                 checkPermissions()
                 return@setOnClickListener
             }
@@ -101,38 +97,28 @@ class OnboardingActivity : AppCompatActivity(), ViewPager.OnPageChangeListener,
         }
 
         doneButton.setOnClickListener {
+            setResult(PreferencesActivity.RESULT_RESTART)
+            Settings.getInstance(this@OnboardingActivity)
+                    .edit()
+                    .putInt(KEY_MEDIALIBRARY_SCAN, if (viewModel.scanStorages) ML_SCAN_ON else ML_SCAN_OFF)
+                    .putInt("fragment_id", if (viewModel.scanStorages) R.id.nav_video else R.id.nav_directories)
+                    .apply()
+            startMedialibrary(firstRun = true, upgrade = true, parse = viewModel.scanStorages)
             finish()
         }
 
-
-        var count = 3
-        if (savedInstanceState != null) {
-            count = savedInstanceState.getInt(ADAPTER_COUNT)
-        }
-
-
+        val count = viewModel.adapterCount
 
         onboardingPagerAdapter = OnboardingFragmentPagerAdapter(supportFragmentManager, count)
         viewPager.adapter = onboardingPagerAdapter
         viewPager.addOnPageChangeListener(this)
-        viewPager.scrollEnabled = OnboardingInputCache.permissionGranted
+        viewPager.scrollEnabled = viewModel.permissionGranted
 
         selectPage(0)
 
-        if (count == 4) {
-            onCustomizedChanged(true)
-        }
-
-
-    }
-
-
-    override fun onSaveInstanceState(outState: Bundle?) {
-        outState?.putInt(ADAPTER_COUNT, onboardingPagerAdapter.count)
-        super.onSaveInstanceState(outState)
+        if (count == 4) onCustomizedChanged(true)
     }
 
-
     private fun selectPage(index: Int) {
         //Navigation button states
         if (index == 0) {
@@ -148,20 +134,15 @@ class OnboardingActivity : AppCompatActivity(), ViewPager.OnPageChangeListener,
         } else {
             nextButton.animate().scaleY(1f).scaleX(1f).alpha(1f)
             doneButton.animate().scaleY(0f).scaleX(0f).alpha(0f).setListener(object : Animator.AnimatorListener {
-                override fun onAnimationRepeat(animation: Animator?) {
-                }
+                override fun onAnimationRepeat(animation: Animator?) {}
 
                 override fun onAnimationEnd(animation: Animator?) {
                     doneButton.visibility = View.GONE
                 }
 
-                override fun onAnimationStart(animation: Animator?) {
-                }
-
-                override fun onAnimationCancel(animation: Animator?) {
-                }
-
+                override fun onAnimationStart(animation: Animator?) {}
 
+                override fun onAnimationCancel(animation: Animator?) {}
             })
         }
 
@@ -172,27 +153,21 @@ class OnboardingActivity : AppCompatActivity(), ViewPager.OnPageChangeListener,
             } else {
                 indicators[pos]?.animate()?.alpha(1f)?.scaleX(1f)?.scaleY(1f)
             }
-
         }
-
-
     }
 
-    fun checkPermissions() = AppScope.launch {
+    fun checkPermissions() = launch {
         if (StoragePermissionsDelegate.getStoragePermission(this@OnboardingActivity, false)) {
             viewPager.currentItem = 1
 
             viewPager.scrollEnabled = true
-            OnboardingInputCache.permissionGranted = true
+            viewModel.permissionGranted = true
         }
     }
 
-    override fun onPageScrollStateChanged(state: Int) {
+    override fun onPageScrollStateChanged(state: Int) { }
 
-    }
-
-    override fun onPageScrolled(position: Int, positionOffset: Float, positionOffsetPixels: Int) {
-    }
+    override fun onPageScrolled(position: Int, positionOffset: Float, positionOffsetPixels: Int) {}
 
     override fun onPageSelected(position: Int) {
         selectPage(position)
@@ -200,31 +175,25 @@ class OnboardingActivity : AppCompatActivity(), ViewPager.OnPageChangeListener,
 
     override fun onCustomizedChanged(customizeEnabled: Boolean) {
         if (customizeEnabled) {
-            indicators[3]!!.visibility = View.VISIBLE
-            indicators[3]!!.animate().alpha(0.6f)?.scaleX(0.5f)?.scaleY(0.5f)!!.setListener(null)
+            indicators[3]?.visibility = View.VISIBLE
+            indicators[3]?.animate()?.alpha(0.6f)?.scaleX(0.5f)?.scaleY(0.5f)!!.setListener(null)
         } else {
-            indicators[3]!!.animate().scaleY(0f).scaleX(0f).alpha(0f).setListener(object : Animator.AnimatorListener {
-                override fun onAnimationRepeat(animation: Animator?) {
-
-                }
+            indicators[3]?.animate()?.scaleY(0f)?.scaleX(0f)?.alpha(0f)?.setListener(object : Animator.AnimatorListener {
+                override fun onAnimationRepeat(animation: Animator?) {}
 
                 override fun onAnimationEnd(animation: Animator?) {
-                    indicators[3]!!.visibility = View.GONE
+                    indicators[3]?.visibility = View.GONE
                 }
 
-                override fun onAnimationCancel(animation: Animator?) {
-                }
+                override fun onAnimationCancel(animation: Animator?) {}
 
-                override fun onAnimationStart(animation: Animator?) {
-                }
+                override fun onAnimationStart(animation: Animator?) {}
 
             })
         }
         onboardingPagerAdapter.onCustomizedChanged(customizeEnabled)
+        viewModel.adapterCount = if (customizeEnabled) 4 else 3
     }
-
-
 }
 
-
-fun Context.startOnboarding() = AppScope.launch { startActivity(Intent(applicationContext, OnboardingActivity::class.java)) }
\ No newline at end of file
+fun Activity.startOnboarding() = startActivityForResult(Intent(this, OnboardingActivity::class.java), ACTIVITY_RESULT_PREFERENCES)
diff --git a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingFoldersFragment.kt b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingFoldersFragment.kt
index 432ebe73d1..6c003a0fec 100644
--- a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingFoldersFragment.kt
+++ b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingFoldersFragment.kt
@@ -5,28 +5,16 @@ import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
 import androidx.fragment.app.Fragment
-import org.videolan.medialibrary.interfaces.EntryPointsEventsCb
 import org.videolan.vlc.R
-import org.videolan.vlc.VLCApplication
 import org.videolan.vlc.gui.browser.StorageBrowserFragment
 
-class OnboardingFoldersFragment : Fragment(), EntryPointsEventsCb {
+class OnboardingFoldersFragment : Fragment() {
 
 
-    override fun onCreate(savedInstanceState: Bundle?) {
-        super.onCreate(savedInstanceState)
-        VLCApplication.getMLInstance().addEntryPointsEventsCb(this)
-    }
-
     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
         return inflater.inflate(R.layout.onboarding_folders, container, false)
     }
 
-    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
-        super.onViewCreated(view, savedInstanceState)
-
-    }
-
     override fun onActivityCreated(savedInstanceState: Bundle?) {
         super.onActivityCreated(savedInstanceState)
         val storageBrowserFragment = StorageBrowserFragment()
@@ -42,24 +30,4 @@ class OnboardingFoldersFragment : Fragment(), EntryPointsEventsCb {
             return OnboardingFoldersFragment()
         }
     }
-
-
-    override fun onEntryPointBanned(entryPoint: String?, success: Boolean) {
-    }
-
-    override fun onDiscoveryStarted(entryPoint: String?) {
-    }
-
-    override fun onDiscoveryCompleted(entryPoint: String?) {
-    }
-
-    override fun onEntryPointUnbanned(entryPoint: String?, success: Boolean) {
-    }
-
-    override fun onDiscoveryProgress(entryPoint: String?) {
-    }
-
-    override fun onEntryPointRemoved(entryPoint: String?, success: Boolean) {
-    }
-
 }
\ No newline at end of file
diff --git a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingInputCache.kt b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingInputCache.kt
deleted file mode 100644
index 10c264e006..0000000000
--- a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingInputCache.kt
+++ /dev/null
@@ -1,8 +0,0 @@
-package org.videolan.vlc.gui.onboarding
-
-object OnboardingInputCache {
-
-    var customizeMediaFolders = false
-    var permissionGranted = false
-
-}
\ No newline at end of file
diff --git a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingScanningFragment.kt b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingScanningFragment.kt
index 67dbd2ed66..cbbf5eacea 100644
--- a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingScanningFragment.kt
+++ b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingScanningFragment.kt
@@ -17,8 +17,13 @@ class OnboardingScanningFragment : Fragment() {
     private lateinit var scanningFolderCheckbox: CheckBox
     private lateinit var scanningEnableSwitch: Switch
     lateinit var onScanningCustomizeChangedListener: IOnScanningCustomizeChangedListener
+    private lateinit var viewModel: OnboardingViewModel
 
 
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+        viewModel = getOnboardingModel()
+    }
     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
         return inflater.inflate(R.layout.onboarding_scanning, container, false)
     }
@@ -39,16 +44,17 @@ class OnboardingScanningFragment : Fragment() {
             scanningFolderCheckbox.visibility = if (isChecked) View.VISIBLE else View.GONE
             val prefs = Settings.getInstance(requireActivity())
             prefs.edit().putInt(KEY_MEDIALIBRARY_SCAN, if (isChecked) ML_SCAN_ON else ML_SCAN_OFF).apply()
+            viewModel.scanStorages = isChecked
             scanningFolderCheckbox.isChecked = false
         }
 
         onScanningCustomizeChangedListener = requireActivity() as IOnScanningCustomizeChangedListener
 
-        scanningFolderCheckbox.isChecked = OnboardingInputCache.customizeMediaFolders
+        scanningFolderCheckbox.isChecked = viewModel.customizeMediaFolders
 
         scanningFolderCheckbox.setOnCheckedChangeListener { _, isChecked ->
 
-            OnboardingInputCache.customizeMediaFolders = isChecked
+            viewModel.customizeMediaFolders = isChecked
 
             if (::onScanningCustomizeChangedListener.isInitialized) {
                 onScanningCustomizeChangedListener.onCustomizedChanged(isChecked)
diff --git a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingThemeFragment.kt b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingThemeFragment.kt
index a7bd9e2c15..862b93ae9d 100644
--- a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingThemeFragment.kt
+++ b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingThemeFragment.kt
@@ -31,7 +31,6 @@ class OnboardingThemeFragment : Fragment() {
 
     }
 
-
     override fun onActivityCreated(savedInstanceState: Bundle?) {
         super.onActivityCreated(savedInstanceState)
 
@@ -52,8 +51,6 @@ class OnboardingThemeFragment : Fragment() {
                             .putBoolean("enable_black_theme", false)
                             .putBoolean("daynight", false)
                             .apply()
-                    //todo effectively apply it to any launched UI
-//                    requireActivity().setResult(PreferencesActivity.RESULT_RESTART)
                 }
                 darkThemeSelector -> {
                     lightThemeSelector.background = null
@@ -65,8 +62,6 @@ class OnboardingThemeFragment : Fragment() {
                             .putBoolean("enable_black_theme", true)
                             .putBoolean("daynight", false)
                             .apply()
-                    //todo effectively apply it to any launched UI
-//                    requireActivity().setResult(PreferencesActivity.RESULT_RESTART)
                 }
                 dayNightTheme -> {
                     lightThemeSelector.background = null
@@ -77,8 +72,6 @@ class OnboardingThemeFragment : Fragment() {
                             .putBoolean("enable_black_theme", false)
                             .putBoolean("daynight", true)
                             .apply()
-                    //todo effectively apply it to any launched UI
-//                    requireActivity().setResult(PreferencesActivity.RESULT_RESTART)
                 }
             }
 
diff --git a/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingViewModel.kt b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingViewModel.kt
new file mode 100644
index 0000000000..2699476934
--- /dev/null
+++ b/vlc-android/src/org/videolan/vlc/gui/onboarding/OnboardingViewModel.kt
@@ -0,0 +1,17 @@
+package org.videolan.vlc.gui.onboarding
+
+import androidx.fragment.app.Fragment
+import androidx.fragment.app.FragmentActivity
+import androidx.lifecycle.ViewModel
+import androidx.lifecycle.ViewModelProviders
+
+
+class OnboardingViewModel() : ViewModel() {
+    var scanStorages = true
+    var customizeMediaFolders = false
+    var permissionGranted = false
+    var adapterCount = 3
+}
+
+fun FragmentActivity.getOnboardingModel() = ViewModelProviders.of(this).get(OnboardingViewModel::class.java)
+fun Fragment.getOnboardingModel() = requireActivity().getOnboardingModel()
\ No newline at end of file
