diff --git a/vlc-android/src/org/videolan/vlc/MediaParsingService.kt b/vlc-android/src/org/videolan/vlc/MediaParsingService.kt
index d38645ecef..24d543d524 100644
--- a/vlc-android/src/org/videolan/vlc/MediaParsingService.kt
+++ b/vlc-android/src/org/videolan/vlc/MediaParsingService.kt
@@ -327,7 +327,7 @@ class MediaParsingService : Service(), DevicesDiscoveryCb {
         if (TextUtils.isEmpty(entryPoint)) --reload
     }
 
-    private fun exitCommand() = uiJob {
+    private fun exitCommand() = launch(UI.immediate) {
         if (!medialibrary.isWorking && !serviceLock) stopSelf()
     }
 
@@ -413,17 +413,17 @@ fun reload(ctx: Context) {
     ContextCompat.startForegroundService(ctx, Intent(Constants.ACTION_RELOAD, null, ctx, MediaParsingService::class.java))
 }
 
-fun Context.startMedialibrary(firstRun: Boolean = false, upgrade: Boolean = false, parse: Boolean = true) = uiJob {
-    if (Medialibrary.getInstance().isStarted || !Permissions.canReadStorage(this@startMedialibrary)) return@uiJob
+fun Context.startMedialibrary(firstRun: Boolean = false, upgrade: Boolean = false, parse: Boolean = true) = launch(UI.immediate) {
+    if (Medialibrary.getInstance().isStarted || !Permissions.canReadStorage(this@startMedialibrary)) return@launch
     val prefs = withContext(VLCIO) { VLCApplication.getSettings() ?: android.preference.PreferenceManager.getDefaultSharedPreferences(this@startMedialibrary) }
     val scanOpt = if (VLCApplication.showTvUi()) Constants.ML_SCAN_ON else prefs.getInt(Constants.KEY_MEDIALIBRARY_SCAN, -1)
     if (parse && scanOpt == -1) {
         if (dbExists(this@startMedialibrary)) prefs.edit().putInt(Constants.KEY_MEDIALIBRARY_SCAN, Constants.ML_SCAN_ON).apply()
         else {
-            if (MediaParsingService.wizardShowing) return@uiJob
+            if (MediaParsingService.wizardShowing) return@launch
             MediaParsingService.wizardShowing = true
             startMLWizard()
-            return@uiJob
+            return@launch
         }
     }
     val intent = Intent(Constants.ACTION_INIT, null, this@startMedialibrary, MediaParsingService::class.java)
diff --git a/vlc-android/src/org/videolan/vlc/PlaybackService.kt b/vlc-android/src/org/videolan/vlc/PlaybackService.kt
index ea5f645c41..aa8df619eb 100644
--- a/vlc-android/src/org/videolan/vlc/PlaybackService.kt
+++ b/vlc-android/src/org/videolan/vlc/PlaybackService.kt
@@ -1003,7 +1003,7 @@ class PlaybackService : MediaBrowserServiceCompat() {
      * @param flags LibVLC.MEDIA_* flags
      */
     @JvmOverloads
-    fun playIndex(index: Int, flags: Int = 0) = uiJob(false) { playlistManager.playIndex(index, flags) }
+    fun playIndex(index: Int, flags: Int = 0) = launch(UI.immediate) { playlistManager.playIndex(index, flags) }
 
     @MainThread
     fun flush() {
diff --git a/vlc-android/src/org/videolan/vlc/RendererDelegate.kt b/vlc-android/src/org/videolan/vlc/RendererDelegate.kt
index 90c0d52d4b..c14a63bda6 100644
--- a/vlc-android/src/org/videolan/vlc/RendererDelegate.kt
+++ b/vlc-android/src/org/videolan/vlc/RendererDelegate.kt
@@ -22,13 +22,14 @@ package org.videolan.vlc
 import android.arch.lifecycle.LiveData
 import android.arch.lifecycle.MutableLiveData
 import kotlinx.coroutines.experimental.CommonPool
+import kotlinx.coroutines.experimental.android.UI
+import kotlinx.coroutines.experimental.launch
 import kotlinx.coroutines.experimental.withContext
 import org.videolan.libvlc.RendererDiscoverer
 import org.videolan.libvlc.RendererItem
 import org.videolan.vlc.util.LiveDataset
 import org.videolan.vlc.util.VLCInstance
 import org.videolan.vlc.util.retry
-import org.videolan.vlc.util.uiJob
 import java.util.*
 
 object RendererDelegate : RendererDiscoverer.EventListener {
@@ -41,7 +42,7 @@ object RendererDelegate : RendererDiscoverer.EventListener {
     val selectedRenderer: LiveData<RendererItem> = MutableLiveData()
 
     init {
-        ExternalMonitor.connected.observeForever { uiJob(false) { if (it == true) start() else stop() } }
+        ExternalMonitor.connected.observeForever { launch(UI.immediate) { if (it == true) start() else stop() } }
     }
 
     suspend fun start() {
diff --git a/vlc-android/src/org/videolan/vlc/gui/browser/BaseBrowserFragment.kt b/vlc-android/src/org/videolan/vlc/gui/browser/BaseBrowserFragment.kt
index 6beb449399..e2d626b56f 100644
--- a/vlc-android/src/org/videolan/vlc/gui/browser/BaseBrowserFragment.kt
+++ b/vlc-android/src/org/videolan/vlc/gui/browser/BaseBrowserFragment.kt
@@ -38,6 +38,8 @@ import android.support.v7.widget.LinearLayoutManager
 import android.support.v7.widget.RecyclerView
 import android.text.TextUtils
 import android.view.*
+import kotlinx.coroutines.experimental.CoroutineStart
+import kotlinx.coroutines.experimental.android.UI
 import kotlinx.coroutines.experimental.launch
 import kotlinx.coroutines.experimental.withContext
 import org.videolan.medialibrary.media.MediaLibraryItem
@@ -134,7 +136,7 @@ abstract class BaseBrowserFragment : MediaBrowserFragment<BrowserModel>(), IRefr
     override fun setBreadcrumb() {
         val ariane = requireActivity().findViewById<RecyclerView>(R.id.ariane) ?: return
         val media = currentMedia
-        if (media != null && isSchemeSupported(media?.uri?.scheme)) {
+        if (media != null && isSchemeSupported(media.uri?.scheme)) {
             ariane.visibility = View.VISIBLE
             ariane.layoutManager = LinearLayoutManager(requireContext(), LinearLayoutManager.HORIZONTAL, false)
             ariane.adapter = PathAdapter(this, Uri.decode(media.uri.path))
@@ -363,8 +365,8 @@ abstract class BaseBrowserFragment : MediaBrowserFragment<BrowserModel>(), IRefr
         }
     }
 
-    private fun toggleFavorite() = uiJob(false) {
-        val mw = currentMedia ?: return@uiJob
+    private fun toggleFavorite() = launch(UI.immediate, CoroutineStart.UNDISPATCHED) {
+        val mw = currentMedia ?: return@launch
         withContext(VLCIO) {
             when {
                 browserFavRepository.browserFavExists(mw.uri) -> browserFavRepository.deleteBrowserFav(mw.uri)
@@ -409,9 +411,9 @@ abstract class BaseBrowserFragment : MediaBrowserFragment<BrowserModel>(), IRefr
     }
 
     override fun onCtxClick(v: View, position: Int, item: MediaLibraryItem) {
-        if (mActionMode == null && item.itemType == MediaLibraryItem.TYPE_MEDIA) uiJob(false) {
+        if (mActionMode == null && item.itemType == MediaLibraryItem.TYPE_MEDIA) launch(UI.immediate) {
             val mw = item as MediaWrapper
-            if (mw.uri.scheme == "content" || mw.uri.scheme == OTG_SCHEME) return@uiJob
+            if (mw.uri.scheme == "content" || mw.uri.scheme == OTG_SCHEME) return@launch
             var flags = if (!isRootDirectory && this@BaseBrowserFragment is FileBrowserFragment) Constants.CTX_DELETE else 0
             if (!isRootDirectory && this is FileBrowserFragment) flags = flags or Constants.CTX_DELETE
             if (mw.type == MediaWrapper.TYPE_DIR) {
diff --git a/vlc-android/src/org/videolan/vlc/gui/tv/MainTvFragment.kt b/vlc-android/src/org/videolan/vlc/gui/tv/MainTvFragment.kt
index 1c706c08f5..4a6ac1990a 100644
--- a/vlc-android/src/org/videolan/vlc/gui/tv/MainTvFragment.kt
+++ b/vlc-android/src/org/videolan/vlc/gui/tv/MainTvFragment.kt
@@ -35,13 +35,15 @@ import android.support.v17.leanback.app.BrowseSupportFragment
 import android.support.v17.leanback.widget.*
 import android.support.v4.content.ContextCompat
 import android.view.View
-import kotlinx.coroutines.experimental.withContext
 import org.videolan.libvlc.util.AndroidUtil
 import org.videolan.medialibrary.Medialibrary
 import org.videolan.medialibrary.media.DummyItem
 import org.videolan.medialibrary.media.MediaLibraryItem
 import org.videolan.medialibrary.media.MediaWrapper
-import org.videolan.vlc.*
+import org.videolan.vlc.BuildConfig
+import org.videolan.vlc.ExternalMonitor
+import org.videolan.vlc.R
+import org.videolan.vlc.RecommendationsService
 import org.videolan.vlc.gui.preferences.PreferencesFragment
 import org.videolan.vlc.gui.tv.MainTvActivity.ACTIVITY_RESULT_PREFERENCES
 import org.videolan.vlc.gui.tv.MainTvActivity.BROWSER_TYPE
@@ -51,7 +53,6 @@ import org.videolan.vlc.gui.tv.browser.VerticalGridActivity
 import org.videolan.vlc.repository.BrowserFavRepository
 import org.videolan.vlc.util.AndroidDevices
 import org.videolan.vlc.util.Constants
-import org.videolan.vlc.util.uiJob
 import org.videolan.vlc.viewmodels.HistoryModel
 import org.videolan.vlc.viewmodels.VideosModel
 
diff --git a/vlc-android/src/org/videolan/vlc/media/MediaUtils.kt b/vlc-android/src/org/videolan/vlc/media/MediaUtils.kt
index 4d23a8a7ae..ac11de885a 100644
--- a/vlc-android/src/org/videolan/vlc/media/MediaUtils.kt
+++ b/vlc-android/src/org/videolan/vlc/media/MediaUtils.kt
@@ -20,7 +20,10 @@ import org.videolan.medialibrary.media.Playlist
 import org.videolan.vlc.PlaybackService
 import org.videolan.vlc.R
 import org.videolan.vlc.VLCApplication
-import org.videolan.vlc.util.*
+import org.videolan.vlc.util.FileUtils
+import org.videolan.vlc.util.SubtitlesDownloader
+import org.videolan.vlc.util.Util
+import org.videolan.vlc.util.getFromMl
 
 private const val TAG = "VLC/MediaUtils"
 
@@ -249,5 +252,5 @@ object MediaUtils {
         }
     } catch (ignored: UnsupportedOperationException) {}
 
-    fun deletePlaylist(playlist: Playlist) = runBackground(Runnable { playlist.delete() })
+    fun deletePlaylist(playlist: Playlist) = launch { playlist.delete() }
 }
diff --git a/vlc-android/src/org/videolan/vlc/media/PlayerController.kt b/vlc-android/src/org/videolan/vlc/media/PlayerController.kt
index 6e93e2401b..96854e3828 100644
--- a/vlc-android/src/org/videolan/vlc/media/PlayerController.kt
+++ b/vlc-android/src/org/videolan/vlc/media/PlayerController.kt
@@ -18,7 +18,6 @@ import org.videolan.vlc.gui.preferences.PreferencesActivity
 import org.videolan.vlc.repository.SlaveRepository
 import org.videolan.vlc.util.VLCInstance
 import org.videolan.vlc.util.VLCOptions
-import org.videolan.vlc.util.uiJob
 import kotlin.math.abs
 
 @Suppress("EXPERIMENTAL_FEATURE_WARNING")
@@ -185,14 +184,14 @@ class PlayerController : IVLCVout.Callback, MediaPlayer.EventListener {
                 try {
                     withTimeout(5000, { player.release() })
                 } catch (exception: TimeoutCancellationException) {
-                    uiJob { Toast.makeText(VLCApplication.getAppContext(), "media stop has timeouted!", Toast.LENGTH_LONG).show() }
+                    launch(UI.immediate) { Toast.makeText(VLCApplication.getAppContext(), "media stop has timeouted!", Toast.LENGTH_LONG).show() }
                 }
             } else player.release()
         }
         setPlaybackStopped()
     }
 
-    fun setSlaves(media: Media, mw: MediaWrapper) = uiJob(false) {
+    fun setSlaves(media: Media, mw: MediaWrapper) = launch(UI.immediate) {
         val slaves = mw.slaves
         slaves?.let { it.forEach { slave -> media.addSlave(slave) } }
         media.release()
diff --git a/vlc-android/src/org/videolan/vlc/media/PlaylistManager.kt b/vlc-android/src/org/videolan/vlc/media/PlaylistManager.kt
index 1a10fb41dd..6e5a5d9b69 100644
--- a/vlc-android/src/org/videolan/vlc/media/PlaylistManager.kt
+++ b/vlc-android/src/org/videolan/vlc/media/PlaylistManager.kt
@@ -11,6 +11,7 @@ import android.text.TextUtils
 import android.util.Log
 import android.widget.Toast
 import kotlinx.coroutines.experimental.CommonPool
+import kotlinx.coroutines.experimental.android.UI
 import kotlinx.coroutines.experimental.launch
 import kotlinx.coroutines.experimental.withContext
 import org.videolan.libvlc.Media
@@ -115,7 +116,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
 
         // Add handler after loading the list
         mediaList.addEventListener(this)
-        uiJob(false) {
+        launch(UI.immediate) {
             playIndex(position)
             onPlaylistLoaded()
         }
@@ -137,7 +138,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
             loadingLastPlaylist = false
             return false
         }
-        uiJob(false) {
+        launch(UI.immediate) {
             val playList = withContext(CommonPool) {
                 locations.map { Uri.decode(it) }.mapTo(ArrayList(locations.size)) { MediaWrapper(Uri.parse(it)) }
             }
@@ -186,7 +187,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
             return
         }
         videoBackground = !player.isVideoPlaying() && player.canSwitchToVideo()
-        uiJob(false) { playIndex(currentIndex) }
+        launch(UI.immediate) { playIndex(currentIndex) }
     }
 
     fun stop(systemExit: Boolean = false) {
@@ -218,7 +219,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
                 player.stop()
                 return
             }
-            uiJob(false) { playIndex(currentIndex) }
+            launch(UI.immediate) { playIndex(currentIndex) }
         } else player.setPosition(0F)
     }
 
@@ -227,7 +228,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
         if (shuffling) previous.clear()
         shuffling = !shuffling
         savePosition()
-        uiJob(false) { determinePrevAndNextIndices() }
+        launch(UI.immediate) { determinePrevAndNextIndices() }
     }
 
     @MainThread
@@ -236,7 +237,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
         if (isAudioList() && settings.getBoolean("audio_save_repeat", false))
             settings.edit().putInt(AUDIO_REPEAT_MODE_KEY, repeating).apply()
         savePosition()
-        uiJob(false) { determinePrevAndNextIndices() }
+        launch(UI.immediate) { determinePrevAndNextIndices() }
     }
 
     fun setRenderer(item: RendererItem?) {
@@ -358,7 +359,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
     override fun onItemAdded(index: Int, mrl: String?) {
         if (BuildConfig.DEBUG) Log.i(TAG, "CustomMediaListItemAdded")
         if (currentIndex >= index && !expanding) ++currentIndex
-        uiJob(false) {
+        launch(UI.immediate) {
             determinePrevAndNextIndices()
             executeUpdate()
             saveMediaList()
@@ -370,7 +371,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
         if (BuildConfig.DEBUG) Log.i(TAG, "CustomMediaListItemDeleted")
         val currentRemoved = currentIndex == index
         if (currentIndex >= index && !expanding) --currentIndex
-        uiJob(false) {
+        launch(UI.immediate) {
             determinePrevAndNextIndices()
             if (currentRemoved && !expanding) {
                 when {
@@ -459,7 +460,7 @@ class PlaylistManager(val service: PlaybackService) : MediaWrapperList.EventList
         // If we are in random mode, we completely reset the stored previous track
         // as their indices changed.
         previous.clear()
-        uiJob(false) {
+        launch(UI.immediate) {
             determinePrevAndNextIndices()
             executeUpdate()
             saveMediaList()
diff --git a/vlc-android/src/org/videolan/vlc/providers/BrowserProvider.kt b/vlc-android/src/org/videolan/vlc/providers/BrowserProvider.kt
index 40a38e2536..84e47c954a 100644
--- a/vlc-android/src/org/videolan/vlc/providers/BrowserProvider.kt
+++ b/vlc-android/src/org/videolan/vlc/providers/BrowserProvider.kt
@@ -29,6 +29,7 @@ import android.os.Process
 import android.support.v4.util.SimpleArrayMap
 import kotlinx.coroutines.experimental.Job
 import kotlinx.coroutines.experimental.android.HandlerContext
+import kotlinx.coroutines.experimental.android.UI
 import kotlinx.coroutines.experimental.channels.Channel
 import kotlinx.coroutines.experimental.launch
 import kotlinx.coroutines.experimental.withContext
@@ -43,7 +44,6 @@ import org.videolan.vlc.R
 import org.videolan.vlc.util.LiveDataset
 import org.videolan.vlc.util.VLCIO
 import org.videolan.vlc.util.VLCInstance
-import org.videolan.vlc.util.uiJob
 import java.util.*
 
 const val TAG = "VLC/BrowserProvider"
@@ -70,11 +70,11 @@ abstract class BrowserProvider(val context: Context, val dataset: LiveDataset<Me
     open fun fetch() {
         val prefetchList by lazy(LazyThreadSafetyMode.NONE) { BrowserProvider.prefetchLists[url] }
         when {
-            url === null -> uiJob(true) {
+            url === null -> launch(UI) {
                 browseRoot()
                 parseSubDirectories()
             }
-            prefetchList?.isEmpty() == false -> uiJob(true) {
+            prefetchList?.isEmpty() == false -> launch(UI) {
                 dataset.value = prefetchList
                 BrowserProvider.prefetchLists.remove(url)
                 parseSubDirectories()
@@ -86,10 +86,10 @@ abstract class BrowserProvider(val context: Context, val dataset: LiveDataset<Me
     protected open fun browse(url: String? = null) {
         browserChannel = Channel(Channel.UNLIMITED)
         requestBrowsing(url)
-        job = uiJob(false) {
+        job = launch(UI.immediate) {
             for (media in browserChannel) {
                 if (isActive) addMedia(findMedia(media))
-                else return@uiJob
+                else return@launch
             }
             parseSubDirectories()
         }
@@ -102,7 +102,7 @@ abstract class BrowserProvider(val context: Context, val dataset: LiveDataset<Me
         browserChannel = Channel(Channel.UNLIMITED)
         val refreshList = mutableListOf<MediaLibraryItem>()
         requestBrowsing(url)
-        job = uiJob(false) {
+        job = launch(UI.immediate) {
             for (media in browserChannel) refreshList.add(findMedia(media))
             dataset.value = refreshList
             parseSubDirectories()
@@ -150,7 +150,7 @@ abstract class BrowserProvider(val context: Context, val dataset: LiveDataset<Me
                 val holderText = getDescription(directories.size, files.size)
                 if (holderText != "") {
                     val position = currentParsedPosition
-                    uiJob(true) {
+                    launch(UI) {
                         item.description = holderText
                         descriptionUpdate.value = Pair(position, holderText)
                     }
diff --git a/vlc-android/src/org/videolan/vlc/providers/FileBrowserProvider.kt b/vlc-android/src/org/videolan/vlc/providers/FileBrowserProvider.kt
index 7ad997efc9..ced9b64f31 100644
--- a/vlc-android/src/org/videolan/vlc/providers/FileBrowserProvider.kt
+++ b/vlc-android/src/org/videolan/vlc/providers/FileBrowserProvider.kt
@@ -26,7 +26,9 @@ import android.hardware.usb.UsbDevice
 import android.net.Uri
 import android.text.TextUtils
 import kotlinx.coroutines.experimental.Job
+import kotlinx.coroutines.experimental.android.UI
 import kotlinx.coroutines.experimental.cancelAndJoin
+import kotlinx.coroutines.experimental.launch
 import kotlinx.coroutines.experimental.withContext
 import org.videolan.libvlc.util.AndroidUtil
 import org.videolan.medialibrary.media.DummyItem
@@ -64,7 +66,7 @@ open class FileBrowserProvider(
                 }
             }
         }
-        uiJob(false) {
+        launch(UI.immediate) {
             if (favs.isNotEmpty()) {
                 job?.cancelAndJoin()
                 val position = data.size
@@ -123,7 +125,7 @@ open class FileBrowserProvider(
 
     override fun browse(url: String?) {
         when {
-            url == "otg://" || url?.startsWith("content:") == true -> uiJob {
+            url == "otg://" || url?.startsWith("content:") == true -> launch(UI.immediate) {
                 dataset.value = withContext(VLCIO) { getDocumentFiles(context, Uri.parse(url).path.substringAfterLast(':')) as? MutableList<MediaLibraryItem> ?: mutableListOf() }
             }
             else -> super.browse(url)
diff --git a/vlc-android/src/org/videolan/vlc/repository/BrowserFavRepository.kt b/vlc-android/src/org/videolan/vlc/repository/BrowserFavRepository.kt
index 61feaddffa..6160aee7e7 100644
--- a/vlc-android/src/org/videolan/vlc/repository/BrowserFavRepository.kt
+++ b/vlc-android/src/org/videolan/vlc/repository/BrowserFavRepository.kt
@@ -24,6 +24,7 @@ import android.arch.lifecycle.MediatorLiveData
 import android.content.Context
 import android.net.Uri
 import android.support.annotation.WorkerThread
+import kotlinx.coroutines.experimental.android.UI
 import kotlinx.coroutines.experimental.launch
 import org.videolan.medialibrary.media.MediaWrapper
 import org.videolan.vlc.ExternalMonitor
@@ -34,7 +35,6 @@ import org.videolan.vlc.util.Constants.TYPE_LOCAL_FAV
 import org.videolan.vlc.util.Constants.TYPE_NETWORK_FAV
 import org.videolan.vlc.util.VLCIO
 import org.videolan.vlc.util.convertFavorites
-import org.videolan.vlc.util.uiJob
 import java.util.*
 
 
@@ -62,7 +62,7 @@ class BrowserFavRepository @JvmOverloads constructor(context: Context,
         MediatorLiveData<List<MediaWrapper>>().apply {
             addSource(networkFavs) { value = convertFavorites(it).filterNetworkFavs() }
             addSource(ExternalMonitor.connected) {
-                uiJob {
+                launch(UI.immediate) {
                     val favList = convertFavorites(networkFavs.value)
                     if (favList.isNotEmpty()) value = if (it == true) favList.filterNetworkFavs() else emptyList()
                 }
diff --git a/vlc-android/src/org/videolan/vlc/util/Workers.kt b/vlc-android/src/org/videolan/vlc/util/Workers.kt
index 5493ea5cef..4356e1aabc 100644
--- a/vlc-android/src/org/videolan/vlc/util/Workers.kt
+++ b/vlc-android/src/org/videolan/vlc/util/Workers.kt
@@ -2,8 +2,10 @@ package org.videolan.vlc.util
 
 import android.os.Looper
 import android.os.Process
-import kotlinx.coroutines.experimental.*
+import kotlinx.coroutines.experimental.Runnable
 import kotlinx.coroutines.experimental.android.UI
+import kotlinx.coroutines.experimental.asCoroutineDispatcher
+import kotlinx.coroutines.experimental.launch
 import kotlinx.coroutines.experimental.timeunit.TimeUnit
 import java.util.concurrent.SynchronousQueue
 import java.util.concurrent.ThreadFactory
@@ -16,8 +18,6 @@ private val THREAD_FACTORY: ThreadFactory = ThreadFactory { runnable ->
 }
 
 val VLCIO = ThreadPoolExecutor(1, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, SynchronousQueue<Runnable>(), THREAD_FACTORY).asCoroutineDispatcher()
-private val mainThread = Looper.getMainLooper().thread!!
-private val uiDispatch inline get() = mainThread != Thread.currentThread()
 
 fun runBackground(runnable: Runnable) {
     if (Looper.myLooper() != Looper.getMainLooper()) runnable.run()
@@ -28,7 +28,3 @@ fun runOnMainThread(runnable: Runnable) {
     if (Looper.myLooper() == Looper.getMainLooper()) runnable.run()
     else launch(UI) { runnable.run() }
 }
-
-fun uiJob(dispatch: Boolean = uiDispatch, block: suspend CoroutineScope.() -> Unit) : Job {
-    return launch(UI, if (dispatch) CoroutineStart.DEFAULT else CoroutineStart.UNDISPATCHED, block = block)
-}
\ No newline at end of file
diff --git a/vlc-android/src/org/videolan/vlc/viewmodels/BaseModel.kt b/vlc-android/src/org/videolan/vlc/viewmodels/BaseModel.kt
index f79db9e1e2..03d27e91cc 100644
--- a/vlc-android/src/org/videolan/vlc/viewmodels/BaseModel.kt
+++ b/vlc-android/src/org/videolan/vlc/viewmodels/BaseModel.kt
@@ -26,6 +26,7 @@ import kotlinx.coroutines.experimental.CommonPool
 import kotlinx.coroutines.experimental.android.UI
 import kotlinx.coroutines.experimental.channels.Channel
 import kotlinx.coroutines.experimental.channels.actor
+import kotlinx.coroutines.experimental.launch
 import kotlinx.coroutines.experimental.withContext
 import org.videolan.medialibrary.Medialibrary
 import org.videolan.medialibrary.media.MediaLibraryItem
@@ -60,7 +61,7 @@ abstract class BaseModel<T : MediaLibraryItem> : ViewModel(), RefreshModel {
     val categories by lazy(LazyThreadSafetyMode.NONE) {
         MediatorLiveData<Map<String, List<MediaLibraryItem>>>().apply {
             addSource(dataset) {
-                uiJob(false) { value = withContext(CommonPool) { ModelsHelper.splitList(sort, it!!.toList()) } }
+                launch(UI.immediate) { value = withContext(CommonPool) { ModelsHelper.splitList(sort, it!!.toList()) } }
             }
         }
     }
@@ -68,7 +69,7 @@ abstract class BaseModel<T : MediaLibraryItem> : ViewModel(), RefreshModel {
     val sections by lazy(LazyThreadSafetyMode.NONE) {
         MediatorLiveData<List<MediaLibraryItem>>().apply {
             addSource(dataset) {
-                uiJob(false) { value = withContext(CommonPool) { ModelsHelper.generateSections(sort, it!!.toList()) } }
+                launch(UI.immediate) { value = withContext(CommonPool) { ModelsHelper.generateSections(sort, it!!.toList()) } }
             }
         }
     }
diff --git a/vlc-android/src/org/videolan/vlc/viewmodels/MedialibraryModel.kt b/vlc-android/src/org/videolan/vlc/viewmodels/MedialibraryModel.kt
index a0518a7811..a3f768a9d3 100644
--- a/vlc-android/src/org/videolan/vlc/viewmodels/MedialibraryModel.kt
+++ b/vlc-android/src/org/videolan/vlc/viewmodels/MedialibraryModel.kt
@@ -20,12 +20,13 @@
 
 package org.videolan.vlc.viewmodels
 
+import kotlinx.coroutines.experimental.android.UI
+import kotlinx.coroutines.experimental.launch
 import org.videolan.medialibrary.Medialibrary
 import org.videolan.medialibrary.interfaces.MediaAddedCb
 import org.videolan.medialibrary.interfaces.MediaUpdatedCb
 import org.videolan.medialibrary.media.MediaLibraryItem
 import org.videolan.vlc.util.EmptyMLCallbacks
-import org.videolan.vlc.util.uiJob
 
 
 abstract class MedialibraryModel<T : MediaLibraryItem> : BaseModel<T>(), Medialibrary.OnMedialibraryReadyListener, MediaUpdatedCb by EmptyMLCallbacks, MediaAddedCb by EmptyMLCallbacks {
@@ -38,11 +39,11 @@ abstract class MedialibraryModel<T : MediaLibraryItem> : BaseModel<T>(), Mediali
     }
 
     override fun onMedialibraryReady() {
-        uiJob { refresh() }
+        launch(UI.immediate) { refresh() }
     }
 
     override fun onMedialibraryIdle() {
-        uiJob { refresh() }
+        launch(UI.immediate) { refresh() }
     }
 
     override fun onCleared() {
diff --git a/vlc-android/src/org/videolan/vlc/viewmodels/StreamsModel.kt b/vlc-android/src/org/videolan/vlc/viewmodels/StreamsModel.kt
index ce177656b8..f2e25ad917 100644
--- a/vlc-android/src/org/videolan/vlc/viewmodels/StreamsModel.kt
+++ b/vlc-android/src/org/videolan/vlc/viewmodels/StreamsModel.kt
@@ -23,18 +23,19 @@ package org.videolan.vlc.viewmodels
 import android.arch.lifecycle.MutableLiveData
 import android.arch.lifecycle.ViewModel
 import android.databinding.ObservableField
+import kotlinx.coroutines.experimental.android.UI
+import kotlinx.coroutines.experimental.launch
 import kotlinx.coroutines.experimental.withContext
 import org.videolan.medialibrary.media.MediaWrapper
 import org.videolan.vlc.VLCApplication
 import org.videolan.vlc.util.VLCIO
-import org.videolan.vlc.util.uiJob
 
 
 class StreamsModel: ViewModel() {
      val observableSearchText = ObservableField<String>()
      val observableHistory = MutableLiveData<Array<MediaWrapper>>()
 
-    fun updateHistory() = uiJob {
+    fun updateHistory() = launch(UI.immediate) {
         val history = withContext(VLCIO) { VLCApplication.getMLInstance().lastStreamsPlayed() }
         observableHistory.value = history
     }
