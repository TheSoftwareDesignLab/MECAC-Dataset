diff --git a/lib/src/model/game/game_controller.dart b/lib/src/model/game/game_controller.dart
index 91ad88195e..dc29a0444c 100644
--- a/lib/src/model/game/game_controller.dart
+++ b/lib/src/model/game/game_controller.dart
@@ -954,34 +954,10 @@ class GameState with _$GameState {
   }) = _GameState;
 
   /// The [Position] and its legal moves at the current cursor.
-  (Position, IMap<Square, ISet<Square>>) getCurrentPosition(CastlingMethod castlingMethod) {
+  (Position, IMap<Square, ISet<Square>>) get currentPosition {
     final position = game.positionAt(stepCursor);
     final legalMoves = makeLegalMoves(position, isChess960: game.meta.variant == Variant.chess960);
-
-    final Map<Square, Square> castlingMap = {
-      Square.a1: Square.c1,
-      Square.a8: Square.c8,
-      Square.h1: Square.g1,
-      Square.h8: Square.g8,
-    };
-
-    MapEntry<Square, ISet<Square>> mapper(Square sq, ISet<Square> moves) {
-      return MapEntry(
-        sq,
-        position.board.kings.squares.contains(sq) && //king move
-                position.castles.castlingRights.squares.intersectsWith(
-                  moves, //king can castle
-                )
-            ? (switch (castlingMethod) {
-              CastlingMethod.kingOverRook => moves.removeAll(castlingMap.values),
-              CastlingMethod.kingTwoSquares => moves.removeAll(castlingMap.keys),
-              _ => moves,
-            })
-            : moves,
-      );
-    }
-
-    return (position, legalMoves.map(mapper));
+    return (position, legalMoves);
   }
 
   /// Whether the zen mode is active
diff --git a/lib/src/view/analysis/analysis_board.dart b/lib/src/view/analysis/analysis_board.dart
index d454dd8ecc..c12adaef12 100644
--- a/lib/src/view/analysis/analysis_board.dart
+++ b/lib/src/view/analysis/analysis_board.dart
@@ -11,6 +11,7 @@ import 'package:lichess_mobile/src/model/common/chess.dart';
 import 'package:lichess_mobile/src/model/common/eval.dart';
 import 'package:lichess_mobile/src/model/engine/evaluation_service.dart';
 import 'package:lichess_mobile/src/model/settings/board_preferences.dart';
+import 'package:lichess_mobile/src/widgets/board.dart';
 import 'package:lichess_mobile/src/widgets/pgn.dart';
 
 class AnalysisBoard extends ConsumerStatefulWidget {
@@ -66,12 +67,12 @@ class AnalysisBoardState extends ConsumerState<AnalysisBoard> {
             )
             : ISet();
 
-    return Chessboard(
+    return BoardWidget(
       size: widget.boardSize,
+      boardPrefs: boardPrefs,
       fen: analysisState.position.fen,
-      lastMove: analysisState.lastMove as NormalMove?,
       orientation: analysisState.pov,
-      game: GameData(
+      gameData: GameData(
         playerSide:
             analysisState.position.isGameOver
                 ? PlayerSide.none
@@ -88,13 +89,8 @@ class AnalysisBoardState extends ConsumerState<AnalysisBoard> {
                 .onUserMove(move, shouldReplace: widget.shouldReplaceChildOnUserMove),
         onPromotionSelection: (role) => ref.read(ctrlProvider.notifier).onPromotionSelection(role),
       ),
+      lastMove: analysisState.lastMove as NormalMove?,
       shapes: userShapes.union(bestMoveShapes),
-      annotations:
-          showAnnotationsOnBoard && sanMove != null && annotation != null
-              ? altCastles.containsKey(sanMove.move.uci)
-                  ? IMap({Move.parse(altCastles[sanMove.move.uci]!)!.to: annotation})
-                  : IMap({sanMove.move.to: annotation})
-              : null,
       settings: boardPrefs.toBoardSettings().copyWith(
         borderRadius: widget.borderRadius,
         boxShadow: widget.borderRadius != null ? boardShadows : const <BoxShadow>[],
@@ -105,7 +101,56 @@ class AnalysisBoardState extends ConsumerState<AnalysisBoard> {
           newShapeColor: boardPrefs.shapeColor.color,
         ),
       ),
+      boardOverlay: null,
+      error: null,
+      annotations:
+          showAnnotationsOnBoard && sanMove != null && annotation != null
+              ? altCastles.containsKey(sanMove.move.uci)
+                  ? IMap({Move.parse(altCastles[sanMove.move.uci]!)!.to: annotation})
+                  : IMap({sanMove.move.to: annotation})
+              : null,
     );
+
+    // return Chessboard(
+    //   size: widget.boardSize,
+    //   fen: analysisState.position.fen,
+    //   lastMove: analysisState.lastMove as NormalMove?,
+    //   orientation: analysisState.pov,
+    //   game: GameData(
+    //     playerSide:
+    //         analysisState.position.isGameOver
+    //             ? PlayerSide.none
+    //             : analysisState.position.turn == Side.white
+    //             ? PlayerSide.white
+    //             : PlayerSide.black,
+    //     isCheck: boardPrefs.boardHighlights && analysisState.position.isCheck,
+    //     sideToMove: analysisState.position.turn,
+    //     validMoves: analysisState.validMoves,
+    //     promotionMove: analysisState.promotionMove,
+    //     onMove:
+    //         (move, {isDrop, captured}) => ref
+    //             .read(ctrlProvider.notifier)
+    //             .onUserMove(move, shouldReplace: widget.shouldReplaceChildOnUserMove),
+    //     onPromotionSelection: (role) => ref.read(ctrlProvider.notifier).onPromotionSelection(role),
+    //   ),
+    //   shapes: userShapes.union(bestMoveShapes),
+    //   annotations:
+    //       showAnnotationsOnBoard && sanMove != null && annotation != null
+    //           ? altCastles.containsKey(sanMove.move.uci)
+    //               ? IMap({Move.parse(altCastles[sanMove.move.uci]!)!.to: annotation})
+    //               : IMap({sanMove.move.to: annotation})
+    //           : null,
+    //   settings: boardPrefs.toBoardSettings().copyWith(
+    //     borderRadius: widget.borderRadius,
+    //     boxShadow: widget.borderRadius != null ? boardShadows : const <BoxShadow>[],
+    //     drawShape: DrawShapeOptions(
+    //       enable: widget.enableDrawingShapes,
+    //       onCompleteShape: _onCompleteShape,
+    //       onClearShapes: _onClearShapes,
+    //       newShapeColor: boardPrefs.shapeColor.color,
+    //     ),
+    //   ),
+    // );
   }
 
   void _onCompleteShape(Shape shape) {
diff --git a/lib/src/view/game/game_body.dart b/lib/src/view/game/game_body.dart
index 7c72c926cd..8915c96be1 100644
--- a/lib/src/view/game/game_body.dart
+++ b/lib/src/view/game/game_body.dart
@@ -103,9 +103,7 @@ class GameBody extends ConsumerWidget {
 
     return gameStateAsync.when(
       data: (gameState) {
-        final (position, legalMoves) = gameState.getCurrentPosition(
-          boardPreferences.castlingMethod,
-        );
+        final (position, legalMoves) = gameState.currentPosition;
         final youAre = gameState.game.youAre ?? Side.white;
         final archivedBlackClock = gameState.game.archivedBlackClockAt(gameState.stepCursor);
         final archivedWhiteClock = gameState.game.archivedWhiteClockAt(gameState.stepCursor);
diff --git a/lib/src/widgets/board.dart b/lib/src/widgets/board.dart
index c0a01e62ef..dcc32eda46 100644
--- a/lib/src/widgets/board.dart
+++ b/lib/src/widgets/board.dart
@@ -6,13 +6,14 @@ import 'package:flutter/cupertino.dart';
 import 'package:flutter/material.dart';
 import 'package:flutter_riverpod/flutter_riverpod.dart';
 import 'package:lichess_mobile/src/constants.dart';
+import 'package:lichess_mobile/src/model/common/chess.dart';
 import 'package:lichess_mobile/src/model/settings/board_preferences.dart';
 import 'package:lichess_mobile/src/utils/screen.dart';
 import 'package:lichess_mobile/src/view/engine/engine_gauge.dart';
 import 'package:lichess_mobile/src/widgets/move_list.dart';
 
 class BoardWidget extends StatelessWidget {
-  const BoardWidget({
+  BoardWidget({
     required this.size,
     required this.boardPrefs,
     required this.fen,
@@ -23,8 +24,10 @@ class BoardWidget extends StatelessWidget {
     required this.settings,
     required this.boardOverlay,
     required this.error,
+
+    required this.annotations,
     this.boardKey,
-  });
+  }) : setup = Setup.parseFen(fen);
 
   final double size;
   final BoardPrefs boardPrefs;
@@ -36,19 +39,60 @@ class BoardWidget extends StatelessWidget {
   final ChessboardSettings settings;
   final String? error;
   final Widget? boardOverlay;
+  final IMap<Square, Annotation>? annotations;
   final GlobalKey? boardKey;
+  final Setup setup;
 
   @override
   Widget build(BuildContext context) {
+    final Map<Square, Square> castlingMap = {
+      Square.a1: Square.c1,
+      Square.a8: Square.c8,
+      Square.h1: Square.g1,
+      Square.h8: Square.g8,
+    };
+
+    GameData? modifiedGameData;
+
+    MapEntry<Square, ISet<Square>> mapper(Square sq, ISet<Square> moves) {
+      return MapEntry(
+        sq,
+        setup.board.kings.squares.contains(sq) && //king move
+                setup.castlingRights.squares.intersectsWith(
+                  moves, //king can castle
+                )
+            ? (switch (boardPrefs.castlingMethod) {
+              CastlingMethod.kingOverRook => moves.removeAll(castlingMap.values),
+              CastlingMethod.kingTwoSquares => moves.removeAll(castlingMap.keys),
+              _ => moves,
+            })
+            : moves,
+      );
+    }
+
+    if (gameData != null) {
+      modifiedGameData = GameData(
+        playerSide: gameData!.playerSide,
+        sideToMove: gameData!.sideToMove,
+        validMoves: gameData!.validMoves.map(mapper),
+        promotionMove: gameData!.promotionMove,
+        onMove: gameData!.onMove,
+        onPromotionSelection: gameData!.onPromotionSelection,
+        premovable: gameData?.premovable,
+        isCheck: gameData?.isCheck,
+      );
+    }
+
     final board = Chessboard(
       key: boardKey,
       size: size,
       fen: fen,
       orientation: orientation,
-      game: gameData,
+      game: modifiedGameData ?? gameData,
       lastMove: lastMove,
       shapes: shapes,
       settings: settings,
+      annotations: annotations,
     );
 
     if (boardOverlay != null) {
diff --git a/lib/src/widgets/board_table.dart b/lib/src/widgets/board_table.dart
index f334aec209..b0356b56cc 100644
--- a/lib/src/widgets/board_table.dart
+++ b/lib/src/widgets/board_table.dart
@@ -184,6 +184,7 @@ class _BoardTableState extends ConsumerState<BoardTable> {
                   boardKey: widget.boardKey,
                   boardOverlay: widget.boardOverlay,
                   error: widget.errorMessage,
+                  annotations: null,
                 ),
                 if (widget.engineGauge != null) ...[
                   const SizedBox(width: 4.0),
@@ -282,6 +283,7 @@ class _BoardTableState extends ConsumerState<BoardTable> {
                   boardKey: widget.boardKey,
                   boardOverlay: widget.boardOverlay,
                   error: widget.errorMessage,
+                  annotations: null,
                 ),
               ),
               Expanded(
