diff --git a/lib/src/model/analysis/analysis_controller.dart b/lib/src/model/analysis/analysis_controller.dart
index 62cd5bafab..6be0809cce 100644
--- a/lib/src/model/analysis/analysis_controller.dart
+++ b/lib/src/model/analysis/analysis_controller.dart
@@ -39,6 +39,8 @@ bool _isStandaloneAnalysis(StringId id) =>
 class AnalysisOptions with _$AnalysisOptions {
   const AnalysisOptions._();
   const factory AnalysisOptions({
+    required String pgn,
+
     /// The ID of the analysis. Can be a game ID or a standalone ID.
     required StringId id,
     required bool isLocalEvaluationAllowed,
@@ -73,7 +75,7 @@ class AnalysisController extends _$AnalysisController
   Timer? _startEngineEvalTimer;
 
   @override
-  AnalysisState build(String pgn, AnalysisOptions options) {
+  AnalysisState build(AnalysisOptions options) {
     final evaluationService = ref.watch(evaluationServiceProvider);
     final serverAnalysisService = ref.watch(serverAnalysisServiceProvider);
 
@@ -97,7 +99,7 @@ class AnalysisController extends _$AnalysisController
     Move? lastMove;
 
     final game = PgnGame.parsePgn(
-      pgn,
+      options.pgn,
       initHeaders: () => options.isLichessGameAnalysis
           ? {}
           : {
diff --git a/lib/src/model/game/game_controller.dart b/lib/src/model/game/game_controller.dart
index 51a8cbb023..60a7efd0b7 100644
--- a/lib/src/model/game/game_controller.dart
+++ b/lib/src/model/game/game_controller.dart
@@ -1183,6 +1183,7 @@ class GameState with _$GameState {
   String get analysisPgn => game.makePgn();
 
   AnalysisOptions get analysisOptions => AnalysisOptions(
+        pgn: analysisPgn,
         isLocalEvaluationAllowed: true,
         variant: game.meta.variant,
         initialMoveCursor: stepCursor,
diff --git a/lib/src/view/analysis/analysis_board.dart b/lib/src/view/analysis/analysis_board.dart
index bfb74f672e..6e60630a7e 100644
--- a/lib/src/view/analysis/analysis_board.dart
+++ b/lib/src/view/analysis/analysis_board.dart
@@ -15,14 +15,12 @@ import 'package:lichess_mobile/src/widgets/pgn.dart';
 
 class AnalysisBoard extends ConsumerStatefulWidget {
   const AnalysisBoard(
-    this.pgn,
     this.options,
     this.boardSize, {
     this.borderRadius,
     this.enableDrawingShapes = true,
   });
 
-  final String pgn;
   final AnalysisOptions options;
   final double boardSize;
   final BorderRadiusGeometry? borderRadius;
@@ -38,7 +36,7 @@ class AnalysisBoardState extends ConsumerState<AnalysisBoard> {
 
   @override
   Widget build(BuildContext context) {
-    final ctrlProvider = analysisControllerProvider(widget.pgn, widget.options);
+    final ctrlProvider = analysisControllerProvider(widget.options);
     final analysisState = ref.watch(ctrlProvider);
     final boardPrefs = ref.watch(boardPreferencesProvider);
     final showBestMoveArrow = ref.watch(
diff --git a/lib/src/view/analysis/analysis_screen.dart b/lib/src/view/analysis/analysis_screen.dart
index d9a6476420..2276f60d94 100644
--- a/lib/src/view/analysis/analysis_screen.dart
+++ b/lib/src/view/analysis/analysis_screen.dart
@@ -55,8 +55,9 @@ class AnalysisScreen extends StatelessWidget {
             enableDrawingShapes: enableDrawingShapes,
           )
         : _LoadedAnalysisScreen(
-            options: options,
-            pgn: pgnOrId,
+            options: options.copyWith(
+              pgn: pgnOrId,
+            ),
             enableDrawingShapes: enableDrawingShapes,
           );
   }
@@ -90,8 +91,8 @@ class _LoadGame extends ConsumerWidget {
             opening: game.meta.opening,
             division: game.meta.division,
             serverAnalysis: serverAnalysis,
+            pgn: game.makePgn(),
           ),
-          pgn: game.makePgn(),
           enableDrawingShapes: enableDrawingShapes,
         );
       },
@@ -108,12 +109,10 @@ class _LoadGame extends ConsumerWidget {
 class _LoadedAnalysisScreen extends ConsumerStatefulWidget {
   const _LoadedAnalysisScreen({
     required this.options,
-    required this.pgn,
     required this.enableDrawingShapes,
   });
 
   final AnalysisOptions options;
-  final String pgn;
 
   final bool enableDrawingShapes;
 
@@ -151,7 +150,7 @@ class _LoadedAnalysisScreenState extends ConsumerState<_LoadedAnalysisScreen>
 
   @override
   Widget build(BuildContext context) {
-    final ctrlProvider = analysisControllerProvider(widget.pgn, widget.options);
+    final ctrlProvider = analysisControllerProvider(widget.options);
     final currentNodeEval =
         ref.watch(ctrlProvider.select((value) => value.currentNode.eval));
 
@@ -171,7 +170,7 @@ class _LoadedAnalysisScreenState extends ConsumerState<_LoadedAnalysisScreen>
               isScrollControlled: true,
               showDragHandle: true,
               isDismissible: true,
-              builder: (_) => AnalysisSettings(widget.pgn, widget.options),
+              builder: (_) => AnalysisSettings(widget.options),
             ),
             semanticsLabel: context.l10n.settingsSettings,
             icon: const Icon(Icons.settings),
@@ -180,7 +179,6 @@ class _LoadedAnalysisScreenState extends ConsumerState<_LoadedAnalysisScreen>
       ),
       body: _Body(
         controller: _tabController,
-        pgn: widget.pgn,
         options: widget.options,
         enableDrawingShapes: widget.enableDrawingShapes,
       ),
@@ -212,13 +210,11 @@ class _Title extends StatelessWidget {
 class _Body extends ConsumerWidget {
   const _Body({
     required this.controller,
-    required this.pgn,
     required this.options,
     required this.enableDrawingShapes,
   });
 
   final TabController controller;
-  final String pgn;
   final AnalysisOptions options;
   final bool enableDrawingShapes;
 
@@ -228,7 +224,7 @@ class _Body extends ConsumerWidget {
       analysisPreferencesProvider.select((value) => value.showEvaluationGauge),
     );
 
-    final ctrlProvider = analysisControllerProvider(pgn, options);
+    final ctrlProvider = analysisControllerProvider(options);
     final analysisState = ref.watch(ctrlProvider);
 
     final isEngineAvailable = analysisState.isEngineAvailable;
@@ -238,7 +234,6 @@ class _Body extends ConsumerWidget {
     return AnalysisLayout(
       tabController: controller,
       boardBuilder: (context, boardSize, borderRadius) => AnalysisBoard(
-        pgn,
         options,
         boardSize,
         borderRadius: borderRadius,
@@ -270,28 +265,24 @@ class _Body extends ConsumerWidget {
               isGameOver: currentNode.position.isGameOver,
             )
           : null,
-      bottomBar: _BottomBar(pgn: pgn, options: options),
+      bottomBar: _BottomBar(options: options),
       children: [
-        OpeningExplorerView(pgn: pgn, options: options),
-        AnalysisTreeView(pgn, options),
-        if (options.canShowGameSummary) ServerAnalysisSummary(pgn, options),
+        OpeningExplorerView(options: options),
+        AnalysisTreeView(options),
+        if (options.canShowGameSummary) ServerAnalysisSummary(options),
       ],
     );
   }
 }
 
 class _BottomBar extends ConsumerWidget {
-  const _BottomBar({
-    required this.pgn,
-    required this.options,
-  });
+  const _BottomBar({required this.options});
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
   Widget build(BuildContext context, WidgetRef ref) {
-    final ctrlProvider = analysisControllerProvider(pgn, options);
+    final ctrlProvider = analysisControllerProvider(options);
     final analysisState = ref.watch(ctrlProvider);
 
     return BottomBar(
@@ -334,10 +325,9 @@ class _BottomBar extends ConsumerWidget {
   }
 
   void _moveForward(WidgetRef ref) =>
-      ref.read(analysisControllerProvider(pgn, options).notifier).userNext();
-  void _moveBackward(WidgetRef ref) => ref
-      .read(analysisControllerProvider(pgn, options).notifier)
-      .userPrevious();
+      ref.read(analysisControllerProvider(options).notifier).userNext();
+  void _moveBackward(WidgetRef ref) =>
+      ref.read(analysisControllerProvider(options).notifier).userPrevious();
 
   Future<void> _showAnalysisMenu(BuildContext context, WidgetRef ref) {
     return showAdaptiveActionSheet(
@@ -347,15 +337,14 @@ class _BottomBar extends ConsumerWidget {
           makeLabel: (context) => Text(context.l10n.flipBoard),
           onPressed: (context) {
             ref
-                .read(analysisControllerProvider(pgn, options).notifier)
+                .read(analysisControllerProvider(options).notifier)
                 .toggleBoard();
           },
         ),
         BottomSheetAction(
           makeLabel: (context) => Text(context.l10n.boardEditor),
           onPressed: (context) {
-            final analysisState =
-                ref.read(analysisControllerProvider(pgn, options));
+            final analysisState = ref.read(analysisControllerProvider(options));
             final boardFen = analysisState.position.fen;
             pushPlatformRoute(
               context,
@@ -372,15 +361,14 @@ class _BottomBar extends ConsumerWidget {
             pushPlatformRoute(
               context,
               title: context.l10n.studyShareAndExport,
-              builder: (_) => AnalysisShareScreen(pgn: pgn, options: options),
+              builder: (_) => AnalysisShareScreen(options: options),
             );
           },
         ),
         BottomSheetAction(
           makeLabel: (context) => Text(context.l10n.mobileSharePositionAsFEN),
           onPressed: (_) {
-            final analysisState =
-                ref.read(analysisControllerProvider(pgn, options));
+            final analysisState = ref.read(analysisControllerProvider(options));
             launchShareDialog(
               context,
               text: analysisState.position.fen,
@@ -394,7 +382,7 @@ class _BottomBar extends ConsumerWidget {
             onPressed: (_) async {
               final gameId = options.gameAnyId!.gameId;
               final analysisState =
-                  ref.read(analysisControllerProvider(pgn, options));
+                  ref.read(analysisControllerProvider(options));
               try {
                 final image =
                     await ref.read(gameShareServiceProvider).screenshotPosition(
diff --git a/lib/src/view/analysis/analysis_settings.dart b/lib/src/view/analysis/analysis_settings.dart
index 415548cb49..380687363a 100644
--- a/lib/src/view/analysis/analysis_settings.dart
+++ b/lib/src/view/analysis/analysis_settings.dart
@@ -11,14 +11,13 @@ import 'package:lichess_mobile/src/widgets/non_linear_slider.dart';
 import 'package:lichess_mobile/src/widgets/settings.dart';
 
 class AnalysisSettings extends ConsumerWidget {
-  const AnalysisSettings(this.pgn, this.options);
+  const AnalysisSettings(this.options);
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
   Widget build(BuildContext context, WidgetRef ref) {
-    final ctrlProvider = analysisControllerProvider(pgn, options);
+    final ctrlProvider = analysisControllerProvider(options);
     final isLocalEvaluationAllowed =
         ref.watch(ctrlProvider.select((s) => s.isLocalEvaluationAllowed));
     final isEngineAvailable = ref.watch(
@@ -35,7 +34,7 @@ class AnalysisSettings extends ConsumerWidget {
             isScrollControlled: true,
             showDragHandle: true,
             isDismissible: true,
-            builder: (_) => OpeningExplorerSettings(pgn, options),
+            builder: (_) => OpeningExplorerSettings(options),
           ),
           trailing: const Icon(CupertinoIcons.chevron_right),
         ),
diff --git a/lib/src/view/analysis/analysis_share_screen.dart b/lib/src/view/analysis/analysis_share_screen.dart
index 97e626ad3f..785e8b0cf7 100644
--- a/lib/src/view/analysis/analysis_share_screen.dart
+++ b/lib/src/view/analysis/analysis_share_screen.dart
@@ -17,9 +17,8 @@ import 'package:lichess_mobile/src/widgets/platform_scaffold.dart';
 final _dateFormatter = DateFormat('yyyy.MM.dd');
 
 class AnalysisShareScreen extends StatelessWidget {
-  const AnalysisShareScreen({required this.pgn, required this.options});
+  const AnalysisShareScreen({required this.options});
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
@@ -28,7 +27,7 @@ class AnalysisShareScreen extends StatelessWidget {
       appBar: PlatformAppBar(
         title: Text(context.l10n.studyShareAndExport),
       ),
-      body: _EditPgnTagsForm(pgn, options),
+      body: _EditPgnTagsForm(options),
     );
   }
 }
@@ -41,9 +40,8 @@ const Set<String> _ratingHeaders = {
 };
 
 class _EditPgnTagsForm extends ConsumerStatefulWidget {
-  const _EditPgnTagsForm(this.pgn, this.options);
+  const _EditPgnTagsForm(this.options);
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
@@ -57,7 +55,7 @@ class _EditPgnTagsFormState extends ConsumerState<_EditPgnTagsForm> {
   @override
   void initState() {
     super.initState();
-    final ctrlProvider = analysisControllerProvider(widget.pgn, widget.options);
+    final ctrlProvider = analysisControllerProvider(widget.options);
     final pgnHeaders = ref.read(ctrlProvider).pgnHeaders;
 
     for (final entry in pgnHeaders.entries) {
@@ -87,7 +85,7 @@ class _EditPgnTagsFormState extends ConsumerState<_EditPgnTagsForm> {
 
   @override
   Widget build(BuildContext context) {
-    final ctrlProvider = analysisControllerProvider(widget.pgn, widget.options);
+    final ctrlProvider = analysisControllerProvider(widget.options);
     final pgnHeaders = ref.watch(ctrlProvider.select((c) => c.pgnHeaders));
     final showRatingAsync = ref.watch(showRatingsPrefProvider);
 
@@ -181,7 +179,6 @@ class _EditPgnTagsFormState extends ConsumerState<_EditPgnTagsForm> {
                             text: ref
                                 .read(
                                   analysisControllerProvider(
-                                    widget.pgn,
                                     widget.options,
                                   ).notifier,
                                 )
@@ -207,7 +204,7 @@ class _EditPgnTagsFormState extends ConsumerState<_EditPgnTagsForm> {
     required BuildContext context,
     required void Function() onEntryChanged,
   }) {
-    final ctrlProvider = analysisControllerProvider(widget.pgn, widget.options);
+    final ctrlProvider = analysisControllerProvider(widget.options);
     if (Theme.of(context).platform == TargetPlatform.iOS) {
       return showCupertinoModalPopup<void>(
         context: context,
@@ -272,7 +269,7 @@ class _EditPgnTagsFormState extends ConsumerState<_EditPgnTagsForm> {
       onSelectedItemChanged: (choice) {
         ref
             .read(
-              analysisControllerProvider(widget.pgn, widget.options).notifier,
+              analysisControllerProvider(widget.options).notifier,
             )
             .updatePgnHeader(
               entry.key,
diff --git a/lib/src/view/analysis/opening_explorer_view.dart b/lib/src/view/analysis/opening_explorer_view.dart
index 80c0b0a964..b06f1efc34 100644
--- a/lib/src/view/analysis/opening_explorer_view.dart
+++ b/lib/src/view/analysis/opening_explorer_view.dart
@@ -18,9 +18,8 @@ const _kTableRowPadding = EdgeInsets.symmetric(
 );
 
 class OpeningExplorerView extends ConsumerStatefulWidget {
-  const OpeningExplorerView({required this.pgn, required this.options});
+  const OpeningExplorerView({required this.options});
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
@@ -36,15 +35,13 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerView> {
 
   @override
   Widget build(BuildContext context) {
-    final analysisState =
-        ref.watch(analysisControllerProvider(widget.pgn, widget.options));
+    final analysisState = ref.watch(analysisControllerProvider(widget.options));
 
     if (analysisState.position.ply >= 50) {
       return _OpeningExplorerView(
         isLoading: false,
         children: [
           OpeningExplorerMoveTable.maxDepth(
-            pgn: widget.pgn,
             options: widget.options,
           ),
         ],
@@ -104,7 +101,6 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerView> {
                     child: ShimmerLoading(
                       isLoading: true,
                       child: OpeningExplorerMoveTable.loading(
-                        pgn: widget.pgn,
                         options: widget.options,
                       ),
                     ),
@@ -123,7 +119,6 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerView> {
               whiteWins: openingExplorer.entry.white,
               draws: openingExplorer.entry.draws,
               blackWins: openingExplorer.entry.black,
-              pgn: widget.pgn,
               options: widget.options,
             ),
             if (topGames != null && topGames.isNotEmpty) ...[
@@ -179,7 +174,6 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerView> {
                 child: ShimmerLoading(
                   isLoading: true,
                   child: OpeningExplorerMoveTable.loading(
-                    pgn: widget.pgn,
                     options: widget.options,
                   ),
                 ),
diff --git a/lib/src/view/analysis/server_analysis.dart b/lib/src/view/analysis/server_analysis.dart
index 93510a1f6b..ba0ac8f359 100644
--- a/lib/src/view/analysis/server_analysis.dart
+++ b/lib/src/view/analysis/server_analysis.dart
@@ -16,14 +16,13 @@ import 'package:lichess_mobile/src/widgets/buttons.dart';
 import 'package:lichess_mobile/src/widgets/feedback.dart';
 
 class ServerAnalysisSummary extends ConsumerWidget {
-  const ServerAnalysisSummary(this.pgn, this.options);
+  const ServerAnalysisSummary(this.options);
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
   Widget build(BuildContext context, WidgetRef ref) {
-    final ctrlProvider = analysisControllerProvider(pgn, options);
+    final ctrlProvider = analysisControllerProvider(options);
     final playersAnalysis =
         ref.watch(ctrlProvider.select((value) => value.playersAnalysis));
     final pgnHeaders =
@@ -38,7 +37,7 @@ class ServerAnalysisSummary extends ConsumerWidget {
                   padding: EdgeInsets.only(top: 16.0),
                   child: WaitingForServerAnalysis(),
                 ),
-              AcplChart(pgn, options),
+              AcplChart(options),
               Center(
                 child: SizedBox(
                   width: math.min(MediaQuery.sizeOf(context).width, 500),
@@ -321,9 +320,8 @@ class _SummaryPlayerName extends StatelessWidget {
 }
 
 class AcplChart extends ConsumerWidget {
-  const AcplChart(this.pgn, this.options);
+  const AcplChart(this.options);
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
@@ -359,23 +357,21 @@ class AcplChart extends ConsumerWidget {
         );
 
     final data = ref.watch(
-      analysisControllerProvider(pgn, options)
+      analysisControllerProvider(options)
           .select((value) => value.acplChartData),
     );
 
     final rootPly = ref.watch(
-      analysisControllerProvider(pgn, options)
+      analysisControllerProvider(options)
           .select((value) => value.root.position.ply),
     );
 
     final currentNode = ref.watch(
-      analysisControllerProvider(pgn, options)
-          .select((value) => value.currentNode),
+      analysisControllerProvider(options).select((value) => value.currentNode),
     );
 
     final isOnMainline = ref.watch(
-      analysisControllerProvider(pgn, options)
-          .select((value) => value.isOnMainline),
+      analysisControllerProvider(options).select((value) => value.isOnMainline),
     );
 
     if (data == null) {
@@ -450,7 +446,7 @@ class AcplChart extends ConsumerWidget {
                     );
                     final closestNodeIndex = closestSpot.x.round();
                     ref
-                        .read(analysisControllerProvider(pgn, options).notifier)
+                        .read(analysisControllerProvider(options).notifier)
                         .jumpToNthNodeOnMainline(closestNodeIndex);
                   }
                 },
diff --git a/lib/src/view/analysis/tree_view.dart b/lib/src/view/analysis/tree_view.dart
index 69c5b86978..de648427d7 100644
--- a/lib/src/view/analysis/tree_view.dart
+++ b/lib/src/view/analysis/tree_view.dart
@@ -9,17 +9,13 @@ import 'package:lichess_mobile/src/widgets/pgn.dart';
 const kOpeningHeaderHeight = 32.0;
 
 class AnalysisTreeView extends ConsumerWidget {
-  const AnalysisTreeView(
-    this.pgn,
-    this.options,
-  );
+  const AnalysisTreeView(this.options);
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
   Widget build(BuildContext context, WidgetRef ref) {
-    final ctrlProvider = analysisControllerProvider(pgn, options);
+    final ctrlProvider = analysisControllerProvider(options);
 
     final root = ref.watch(ctrlProvider.select((value) => value.root));
     final currentPath =
diff --git a/lib/src/view/board_editor/board_editor_screen.dart b/lib/src/view/board_editor/board_editor_screen.dart
index 128e81cd06..7b4006a4ba 100644
--- a/lib/src/view/board_editor/board_editor_screen.dart
+++ b/lib/src/view/board_editor/board_editor_screen.dart
@@ -337,6 +337,7 @@ class _BottomBar extends ConsumerWidget {
                     builder: (context) => AnalysisScreen(
                       pgnOrId: editorState.pgn!,
                       options: AnalysisOptions(
+                        pgn: '',
                         isLocalEvaluationAllowed: true,
                         variant: Variant.fromPosition,
                         orientation: editorState.orientation,
diff --git a/lib/src/view/correspondence/offline_correspondence_game_screen.dart b/lib/src/view/correspondence/offline_correspondence_game_screen.dart
index 0ce0cdae57..c816be5561 100644
--- a/lib/src/view/correspondence/offline_correspondence_game_screen.dart
+++ b/lib/src/view/correspondence/offline_correspondence_game_screen.dart
@@ -261,6 +261,7 @@ class _BodyState extends ConsumerState<_Body> {
                   builder: (_) => AnalysisScreen(
                     pgnOrId: game.makePgn(),
                     options: AnalysisOptions(
+                      pgn: '',
                       isLocalEvaluationAllowed: false,
                       variant: game.variant,
                       initialMoveCursor: stepCursor,
diff --git a/lib/src/view/game/archived_game_screen.dart b/lib/src/view/game/archived_game_screen.dart
index ab7c41cec3..a8b0193202 100644
--- a/lib/src/view/game/archived_game_screen.dart
+++ b/lib/src/view/game/archived_game_screen.dart
@@ -386,6 +386,7 @@ class _BottomBar extends ConsumerWidget {
                     builder: (context) => AnalysisScreen(
                       pgnOrId: game.makePgn(),
                       options: AnalysisOptions(
+                        pgn: '',
                         isLocalEvaluationAllowed: true,
                         variant: gameData.variant,
                         initialMoveCursor: cursor,
diff --git a/lib/src/view/game/game_list_tile.dart b/lib/src/view/game/game_list_tile.dart
index 5009b84947..c54d6c5106 100644
--- a/lib/src/view/game/game_list_tile.dart
+++ b/lib/src/view/game/game_list_tile.dart
@@ -228,6 +228,7 @@ class _ContextMenu extends ConsumerWidget {
                     builder: (context) => AnalysisScreen(
                       pgnOrId: game.id.value,
                       options: AnalysisOptions(
+                        pgn: '',
                         isLocalEvaluationAllowed: true,
                         variant: game.variant,
                         orientation: orientation,
diff --git a/lib/src/view/game/game_result_dialog.dart b/lib/src/view/game/game_result_dialog.dart
index 2611a15696..20eeb61b7b 100644
--- a/lib/src/view/game/game_result_dialog.dart
+++ b/lib/src/view/game/game_result_dialog.dart
@@ -263,6 +263,7 @@ class OverTheBoardGameResultDialog extends StatelessWidget {
               builder: (_) => AnalysisScreen(
                 pgnOrId: game.makePgn(),
                 options: AnalysisOptions(
+                  pgn: '',
                   isLocalEvaluationAllowed: true,
                   variant: game.meta.variant,
                   orientation: Side.white,
diff --git a/lib/src/view/opening_explorer/opening_explorer_screen.dart b/lib/src/view/opening_explorer/opening_explorer_screen.dart
index 9ade504e4e..6823005fed 100644
--- a/lib/src/view/opening_explorer/opening_explorer_screen.dart
+++ b/lib/src/view/opening_explorer/opening_explorer_screen.dart
@@ -33,9 +33,8 @@ const _kTableRowPadding = EdgeInsets.symmetric(
 const _kTabletBoardRadius = BorderRadius.all(Radius.circular(4.0));
 
 class OpeningExplorerScreen extends ConsumerStatefulWidget {
-  const OpeningExplorerScreen({required this.pgn, required this.options});
+  const OpeningExplorerScreen({required this.options});
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
@@ -51,8 +50,7 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerScreen> {
 
   @override
   Widget build(BuildContext context) {
-    final analysisState =
-        ref.watch(analysisControllerProvider(widget.pgn, widget.options));
+    final analysisState = ref.watch(analysisControllerProvider(widget.options));
 
     final opening = analysisState.currentNode.isRoot
         ? LightOpening(
@@ -102,14 +100,12 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerScreen> {
 
     if (analysisState.position.ply >= 50) {
       return _OpeningExplorerView(
-        pgn: widget.pgn,
         options: widget.options,
         isLoading: false,
         isIndexing: false,
         children: [
           openingHeader,
           OpeningExplorerMoveTable.maxDepth(
-            pgn: widget.pgn,
             options: widget.options,
           ),
         ],
@@ -120,7 +116,6 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerScreen> {
 
     if (prefs.db == OpeningDatabase.player && prefs.playerDb.username == null) {
       return _OpeningExplorerView(
-        pgn: widget.pgn,
         options: widget.options,
         isLoading: false,
         isIndexing: false,
@@ -163,7 +158,6 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerScreen> {
         openingExplorerAsync.isLoading || openingExplorerAsync.value == null;
 
     return _OpeningExplorerView(
-      pgn: widget.pgn,
       options: widget.options,
       isLoading: isLoading,
       isIndexing: openingExplorerAsync.value?.isIndexing ?? false,
@@ -176,7 +170,6 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerScreen> {
                     child: ShimmerLoading(
                       isLoading: true,
                       child: OpeningExplorerMoveTable.loading(
-                        pgn: widget.pgn,
                         options: widget.options,
                       ),
                     ),
@@ -196,7 +189,6 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerScreen> {
               whiteWins: openingExplorer.entry.white,
               draws: openingExplorer.entry.draws,
               blackWins: openingExplorer.entry.black,
-              pgn: widget.pgn,
               options: widget.options,
             ),
             if (topGames != null && topGames.isNotEmpty) ...[
@@ -252,7 +244,6 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerScreen> {
                 child: ShimmerLoading(
                   isLoading: true,
                   child: OpeningExplorerMoveTable.loading(
-                    pgn: widget.pgn,
                     options: widget.options,
                   ),
                 ),
@@ -278,14 +269,12 @@ class _OpeningExplorerState extends ConsumerState<OpeningExplorerScreen> {
 
 class _OpeningExplorerView extends StatelessWidget {
   const _OpeningExplorerView({
-    required this.pgn,
     required this.options,
     required this.children,
     required this.isLoading,
     required this.isIndexing,
   });
 
-  final String pgn;
   final AnalysisOptions options;
   final List<Widget> children;
   final bool isLoading;
@@ -306,7 +295,7 @@ class _OpeningExplorerView extends StatelessWidget {
                       horizontal: kTabletBoardTableSidePadding,
                     )
                   : EdgeInsets.zero,
-              child: _MoveList(pgn: pgn, options: options),
+              child: _MoveList(options: options),
             ),
           Expanded(
             child: LayoutBuilder(
@@ -338,7 +327,6 @@ class _OpeningExplorerView extends StatelessWidget {
                           bottom: kTabletBoardTableSidePadding,
                         ),
                         child: AnalysisBoard(
-                          pgn,
                           options,
                           boardSize,
                           borderRadius: isTablet ? _kTabletBoardRadius : null,
@@ -389,7 +377,6 @@ class _OpeningExplorerView extends StatelessWidget {
                             // disable scrolling when dragging the board
                             onVerticalDragStart: (_) {},
                             child: AnalysisBoard(
-                              pgn,
                               options,
                               boardSize,
                             ),
@@ -404,7 +391,7 @@ class _OpeningExplorerView extends StatelessWidget {
               },
             ),
           ),
-          _BottomBar(pgn: pgn, options: options),
+          _BottomBar(options: options),
         ],
       ),
     );
@@ -414,7 +401,7 @@ class _OpeningExplorerView extends StatelessWidget {
         body: body,
         appBar: AppBar(
           title: Text(context.l10n.openingExplorer),
-          bottom: _MoveList(pgn: pgn, options: options),
+          bottom: _MoveList(options: options),
           actions: [
             if (isIndexing) const _IndexingIndicator(),
           ],
@@ -480,12 +467,8 @@ class _IndexingIndicatorState extends State<_IndexingIndicator>
 }
 
 class _MoveList extends ConsumerWidget implements PreferredSizeWidget {
-  const _MoveList({
-    required this.pgn,
-    required this.options,
-  });
+  const _MoveList({required this.options});
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
@@ -493,7 +476,7 @@ class _MoveList extends ConsumerWidget implements PreferredSizeWidget {
 
   @override
   Widget build(BuildContext context, WidgetRef ref) {
-    final ctrlProvider = analysisControllerProvider(pgn, options);
+    final ctrlProvider = analysisControllerProvider(options);
     final state = ref.watch(ctrlProvider);
     final slicedMoves = state.root.mainline
         .map((e) => e.sanMove.san)
@@ -526,19 +509,15 @@ class _MoveList extends ConsumerWidget implements PreferredSizeWidget {
 }
 
 class _BottomBar extends ConsumerWidget {
-  const _BottomBar({
-    required this.pgn,
-    required this.options,
-  });
+  const _BottomBar({required this.options});
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
   Widget build(BuildContext context, WidgetRef ref) {
     final db = ref
         .watch(openingExplorerPreferencesProvider.select((value) => value.db));
-    final ctrlProvider = analysisControllerProvider(pgn, options);
+    final ctrlProvider = analysisControllerProvider(options);
     final canGoBack =
         ref.watch(ctrlProvider.select((value) => value.canGoBack));
     final canGoNext =
@@ -560,7 +539,7 @@ class _BottomBar extends ConsumerWidget {
             isScrollControlled: true,
             showDragHandle: true,
             isDismissible: true,
-            builder: (_) => OpeningExplorerSettings(pgn, options),
+            builder: (_) => OpeningExplorerSettings(options),
           ),
           icon: Icons.tune,
         ),
@@ -596,8 +575,7 @@ class _BottomBar extends ConsumerWidget {
   }
 
   void _moveForward(WidgetRef ref) =>
-      ref.read(analysisControllerProvider(pgn, options).notifier).userNext();
-  void _moveBackward(WidgetRef ref) => ref
-      .read(analysisControllerProvider(pgn, options).notifier)
-      .userPrevious();
+      ref.read(analysisControllerProvider(options).notifier).userNext();
+  void _moveBackward(WidgetRef ref) =>
+      ref.read(analysisControllerProvider(options).notifier).userPrevious();
 }
diff --git a/lib/src/view/opening_explorer/opening_explorer_settings.dart b/lib/src/view/opening_explorer/opening_explorer_settings.dart
index 51c3c38d8f..a880d8fb33 100644
--- a/lib/src/view/opening_explorer/opening_explorer_settings.dart
+++ b/lib/src/view/opening_explorer/opening_explorer_settings.dart
@@ -14,9 +14,8 @@ import 'package:lichess_mobile/src/widgets/adaptive_bottom_sheet.dart';
 import 'package:lichess_mobile/src/widgets/list.dart';
 
 class OpeningExplorerSettings extends ConsumerWidget {
-  const OpeningExplorerSettings(this.pgn, this.options);
+  const OpeningExplorerSettings(this.options);
 
-  final String pgn;
   final AnalysisOptions options;
 
   @override
diff --git a/lib/src/view/opening_explorer/opening_explorer_widgets.dart b/lib/src/view/opening_explorer/opening_explorer_widgets.dart
index 2b19204c49..43bf9f9deb 100644
--- a/lib/src/view/opening_explorer/opening_explorer_widgets.dart
+++ b/lib/src/view/opening_explorer/opening_explorer_widgets.dart
@@ -34,13 +34,11 @@ class OpeningExplorerMoveTable extends ConsumerWidget {
     required this.whiteWins,
     required this.draws,
     required this.blackWins,
-    required this.pgn,
     required this.options,
   })  : _isLoading = false,
         _maxDepthReached = false;
 
   const OpeningExplorerMoveTable.loading({
-    required this.pgn,
     required this.options,
   })  : _isLoading = true,
         moves = const IListConst([]),
@@ -50,7 +48,6 @@ class OpeningExplorerMoveTable extends ConsumerWidget {
         _maxDepthReached = false;
 
   const OpeningExplorerMoveTable.maxDepth({
-    required this.pgn,
     required this.options,
   })  : _isLoading = false,
         moves = const IListConst([]),
@@ -63,7 +60,6 @@ class OpeningExplorerMoveTable extends ConsumerWidget {
   final int whiteWins;
   final int draws;
   final int blackWins;
-  final String pgn;
   final AnalysisOptions options;
 
   final bool _isLoading;
@@ -84,7 +80,7 @@ class OpeningExplorerMoveTable extends ConsumerWidget {
     }
 
     final games = whiteWins + draws + blackWins;
-    final ctrlProvider = analysisControllerProvider(pgn, options);
+    final ctrlProvider = analysisControllerProvider(options);
 
     const headerTextStyle = TextStyle(fontSize: 12);
 
diff --git a/lib/src/view/puzzle/puzzle_screen.dart b/lib/src/view/puzzle/puzzle_screen.dart
index ef8681c596..b79254f87c 100644
--- a/lib/src/view/puzzle/puzzle_screen.dart
+++ b/lib/src/view/puzzle/puzzle_screen.dart
@@ -486,6 +486,7 @@ class _BottomBar extends ConsumerWidget {
               builder: (context) => AnalysisScreen(
                 pgnOrId: ref.read(ctrlProvider.notifier).makePgn(),
                 options: AnalysisOptions(
+                  pgn: '',
                   isLocalEvaluationAllowed: true,
                   variant: Variant.standard,
                   orientation: puzzleState.pov,
diff --git a/lib/src/view/puzzle/streak_screen.dart b/lib/src/view/puzzle/streak_screen.dart
index b682b49ebc..6be35275dc 100644
--- a/lib/src/view/puzzle/streak_screen.dart
+++ b/lib/src/view/puzzle/streak_screen.dart
@@ -293,6 +293,7 @@ class _BottomBar extends ConsumerWidget {
                 builder: (context) => AnalysisScreen(
                   pgnOrId: ref.read(ctrlProvider.notifier).makePgn(),
                   options: AnalysisOptions(
+                    pgn: '',
                     isLocalEvaluationAllowed: true,
                     variant: Variant.standard,
                     orientation: puzzleState.pov,
diff --git a/lib/src/view/study/study_bottom_bar.dart b/lib/src/view/study/study_bottom_bar.dart
index ade01ed711..d94d6e4d57 100644
--- a/lib/src/view/study/study_bottom_bar.dart
+++ b/lib/src/view/study/study_bottom_bar.dart
@@ -167,6 +167,7 @@ class _GamebookBottomBar extends ConsumerWidget {
                     builder: (context) => AnalysisScreen(
                       pgnOrId: state.pgn,
                       options: AnalysisOptions(
+                        pgn: state.pgn,
                         isLocalEvaluationAllowed: true,
                         variant: state.variant,
                         orientation: state.pov,
diff --git a/lib/src/view/tools/load_position_screen.dart b/lib/src/view/tools/load_position_screen.dart
index ac3b4d97b7..27040a0d70 100644
--- a/lib/src/view/tools/load_position_screen.dart
+++ b/lib/src/view/tools/load_position_screen.dart
@@ -132,7 +132,8 @@ class _BodyState extends State<_Body> {
       return (
         pgn: '[FEN "${pos.fen}"]',
         fen: pos.fen,
-        options: const AnalysisOptions(
+        options: AnalysisOptions(
+          pgn: '[FEN "${pos.fen}"]',
           isLocalEvaluationAllowed: true,
           variant: Variant.standard,
           orientation: Side.white,
@@ -164,6 +165,7 @@ class _BodyState extends State<_Body> {
         pgn: textInput!,
         fen: lastPosition.fen,
         options: AnalysisOptions(
+          pgn: textInput!,
           isLocalEvaluationAllowed: true,
           variant: rule != null ? Variant.fromRule(rule) : Variant.standard,
           initialMoveCursor: mainlineMoves.isEmpty ? 0 : 1,
diff --git a/lib/src/view/tools/tools_tab_screen.dart b/lib/src/view/tools/tools_tab_screen.dart
index 8270f84bcc..b2bba9d51c 100644
--- a/lib/src/view/tools/tools_tab_screen.dart
+++ b/lib/src/view/tools/tools_tab_screen.dart
@@ -150,6 +150,7 @@ class _Body extends ConsumerWidget {
               builder: (context) => const AnalysisScreen(
                 pgnOrId: '',
                 options: AnalysisOptions(
+                  pgn: '',
                   isLocalEvaluationAllowed: true,
                   variant: Variant.standard,
                   orientation: Side.white,
@@ -166,8 +167,8 @@ class _Body extends ConsumerWidget {
                       context,
                       rootNavigator: true,
                       builder: (context) => const OpeningExplorerScreen(
-                        pgn: '',
                         options: AnalysisOptions(
+                          pgn: '',
                           isLocalEvaluationAllowed: false,
                           variant: Variant.standard,
                           orientation: Side.white,
diff --git a/test/view/analysis/analysis_screen_test.dart b/test/view/analysis/analysis_screen_test.dart
index 156380c906..337fdc7785 100644
--- a/test/view/analysis/analysis_screen_test.dart
+++ b/test/view/analysis/analysis_screen_test.dart
@@ -36,6 +36,7 @@ void main() {
         home: AnalysisScreen(
           pgnOrId: sanMoves,
           options: AnalysisOptions(
+            pgn: '',
             isLocalEvaluationAllowed: false,
             variant: Variant.standard,
             opening: opening,
@@ -70,6 +71,7 @@ void main() {
         home: AnalysisScreen(
           pgnOrId: sanMoves,
           options: AnalysisOptions(
+            pgn: '',
             isLocalEvaluationAllowed: false,
             variant: Variant.standard,
             opening: opening,
@@ -135,6 +137,7 @@ void main() {
           home: AnalysisScreen(
             pgnOrId: pgn,
             options: const AnalysisOptions(
+              pgn: '',
               isLocalEvaluationAllowed: false,
               variant: Variant.standard,
               orientation: Side.white,
diff --git a/test/view/opening_explorer/opening_explorer_screen_test.dart b/test/view/opening_explorer/opening_explorer_screen_test.dart
index 32b7e88a4f..5811d32f6f 100644
--- a/test/view/opening_explorer/opening_explorer_screen_test.dart
+++ b/test/view/opening_explorer/opening_explorer_screen_test.dart
@@ -40,6 +40,7 @@ void main() {
   });
 
   const options = AnalysisOptions(
+    pgn: '',
     id: standaloneOpeningExplorerId,
     isLocalEvaluationAllowed: false,
     orientation: Side.white,
@@ -65,7 +66,6 @@ void main() {
         final app = await makeTestProviderScopeApp(
           tester,
           home: const OpeningExplorerScreen(
-            pgn: '',
             options: options,
           ),
           overrides: [
@@ -112,7 +112,6 @@ void main() {
         final app = await makeTestProviderScopeApp(
           tester,
           home: const OpeningExplorerScreen(
-            pgn: '',
             options: options,
           ),
           overrides: [
@@ -165,7 +164,6 @@ void main() {
         final app = await makeTestProviderScopeApp(
           tester,
           home: const OpeningExplorerScreen(
-            pgn: '',
             options: options,
           ),
           overrides: [
