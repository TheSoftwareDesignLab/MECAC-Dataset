diff --git a/lib/src/model/puzzle/puzzle_storm.dart b/lib/src/model/puzzle/puzzle_storm.dart
index 7029cea283..b95995fafa 100644
--- a/lib/src/model/puzzle/puzzle_storm.dart
+++ b/lib/src/model/puzzle/puzzle_storm.dart
@@ -35,6 +35,7 @@ class StormCtrl extends _$StormCtrl {
     });
     final pov = Chess.fromSetup(Setup.parseFen(puzzles.first.fen));
     final newState = StormCtrlState(
+      runOver: false,
       puzzle: puzzles[_nextPuzzleIndex],
       position: pov,
       pov: pov.turn.opposite,
@@ -50,6 +51,11 @@ class StormCtrl extends _$StormCtrl {
       const Duration(seconds: 1),
       () => _addMove(state.expectedMove!, ComboState.noChange),
     );
+    newState.clock.timeStream.listen((e) {
+      if (e.$1 == Duration.zero && state.clock.endAt == null) {
+        end();
+      }
+    });
     return newState;
   }
 
@@ -103,7 +109,7 @@ class StormCtrl extends _$StormCtrl {
   void end() {
     state.clock.reset();
     _pushToHistory(false);
-    state = state.copyWith(stats: _getStats());
+    state = state.copyWith(stats: _getStats(), runOver: true);
   }
 
   Future<void> _loadNextPuzzle(bool result, ComboState comboChange) async {
@@ -197,6 +203,7 @@ class StormCtrlState with _$StormCtrlState {
     required StormCombo combo,
     required StormRunStats? stats,
     required DateTime? lastSolvedTime,
+    required bool runOver,
   }) = _StormCtrlState;
 
   Move? get expectedMove => Move.fromUci(puzzle.solution[moveIndex + 1]);
diff --git a/lib/src/ui/puzzle/puzzle_storm.dart b/lib/src/ui/puzzle/puzzle_storm.dart
index 487893c733..b142f4949d 100644
--- a/lib/src/ui/puzzle/puzzle_storm.dart
+++ b/lib/src/ui/puzzle/puzzle_storm.dart
@@ -102,21 +102,21 @@ class _Load extends ConsumerWidget {
 class _Body extends ConsumerWidget {
   const _Body({required this.data});
   final PuzzleStormResponse data;
+
   @override
   Widget build(BuildContext context, WidgetRef ref) {
     final ctrlProvider = stormCtrlProvider(data.puzzles);
     final puzzleState = ref.watch(ctrlProvider);
 
-    puzzleState.clock.timeStream.listen((e) {
-      if (e.$1 == Duration.zero && puzzleState.clock.endAt == null) {
-        // end function is always called from here
-        ref.read(ctrlProvider.notifier).end();
+    ref.listen(ctrlProvider.select((state) => state.runOver), (_, next) {
+      if (next) {
         showDialog<void>(
           context: context,
-          builder: (context) => _RunStats(ref.watch(ctrlProvider).stats!),
+          builder: (ctx) => _RunStats(ref.read(ctrlProvider).stats!),
         );
       }
     });
+
     final content = Column(
       children: [
         Expanded(
@@ -249,6 +249,7 @@ class _Combo extends ConsumerStatefulWidget {
 class _ComboState extends ConsumerState<_Combo>
     with SingleTickerProviderStateMixin {
   late AnimationController _controller;
+  // ignore: avoid-late-keyword
   late StormCombo combo;
 
   static const levels = [3, 5, 7, 10];
diff --git a/lib/src/widgets/feedback.dart b/lib/src/widgets/feedback.dart
index 7b144da075..592f9c94fc 100644
--- a/lib/src/widgets/feedback.dart
+++ b/lib/src/widgets/feedback.dart
@@ -74,16 +74,13 @@ void showPlatformSnackbar(BuildContext context, String message) {
       ScaffoldMessenger.of(context).showSnackBar(
         SnackBar(content: Text(message)),
       );
-      break;
     case TargetPlatform.iOS:
       showCupertinoErrorSnackBar(
         context: context,
         message: message,
       );
-      break;
     default:
       assert(false, 'Unexpected platform $defaultTargetPlatform');
-      break;
   }
 }
 
