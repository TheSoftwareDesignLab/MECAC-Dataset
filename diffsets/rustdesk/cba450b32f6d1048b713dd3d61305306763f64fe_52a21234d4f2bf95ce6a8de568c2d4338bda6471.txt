diff --git a/flutter/lib/desktop/pages/connection_page.dart b/flutter/lib/desktop/pages/connection_page.dart
index 9a606d12297..2e7026071d9 100644
--- a/flutter/lib/desktop/pages/connection_page.dart
+++ b/flutter/lib/desktop/pages/connection_page.dart
@@ -36,6 +36,9 @@ class _ConnectionPageState extends State<ConnectionPage>
 
   Timer? _updateTimer;
 
+  final RxBool _idInputFocused = false.obs;
+  final FocusNode _idFocusNode = FocusNode();
+
   @override
   void initState() {
     super.initState();
@@ -121,10 +124,8 @@ class _ConnectionPageState extends State<ConnectionPage>
   /// UI for the remote ID TextField.
   /// Search for a peer and connect to it if the id exists.
   Widget _buildRemoteIDTextField(BuildContext context) {
-    RxBool inputFocused = false.obs;
-    FocusNode focusNode = FocusNode();
-    focusNode.addListener(() {
-      inputFocused.value = focusNode.hasFocus;
+    _idFocusNode.addListener(() {
+      _idInputFocused.value = _idFocusNode.hasFocus;
     });
     var w = Container(
       width: 320 + 20 * 2,
@@ -155,7 +156,7 @@ class _ConnectionPageState extends State<ConnectionPage>
                       autocorrect: false,
                       enableSuggestions: false,
                       keyboardType: TextInputType.visiblePassword,
-                      focusNode: focusNode,
+                      focusNode: _idFocusNode,
                       style: const TextStyle(
                         fontFamily: 'WorkSans',
                         fontSize: 22,
@@ -165,7 +166,7 @@ class _ConnectionPageState extends State<ConnectionPage>
                       cursorColor:
                           Theme.of(context).textTheme.titleLarge?.color,
                       decoration: InputDecoration(
-                          hintText: inputFocused.value
+                          hintText: _idInputFocused.value
                               ? null
                               : translate('Enter Remote ID'),
                           border: OutlineInputBorder(
diff --git a/flutter/lib/desktop/pages/desktop_setting_page.dart b/flutter/lib/desktop/pages/desktop_setting_page.dart
index 55fd93bcc3d..0c4cc0aec88 100644
--- a/flutter/lib/desktop/pages/desktop_setting_page.dart
+++ b/flutter/lib/desktop/pages/desktop_setting_page.dart
@@ -977,9 +977,11 @@ Widget _OptionCheckBox(BuildContext context, String label, String key,
               ],
             ),
           ).marginOnly(left: _kCheckBoxLeftMargin),
-          onTap: () {
-            onChanged(!ref.value);
-          },
+          onTap: enabled
+              ? () {
+                  onChanged(!ref.value);
+                }
+              : null,
         );
       });
 }
diff --git a/flutter/lib/desktop/widgets/remote_menubar.dart b/flutter/lib/desktop/widgets/remote_menubar.dart
index 13aa1932fa1..72cc56cadfc 100644
--- a/flutter/lib/desktop/widgets/remote_menubar.dart
+++ b/flutter/lib/desktop/widgets/remote_menubar.dart
@@ -364,6 +364,10 @@ class _RemoteMenubarState extends State<RemoteMenubar> {
   }
 
   Widget _buildKeyboard(BuildContext context) {
+    FfiModel ffiModel = Provider.of<FfiModel>(context);
+    if (ffiModel.permissions['keyboard'] == false) {
+      return Offstage();
+    }
     return mod_menu.PopupMenuButton(
       padding: EdgeInsets.zero,
       icon: const Icon(
@@ -517,7 +521,7 @@ class _RemoteMenubarState extends State<RemoteMenubar> {
         ));
       }
     }
-    if (gFFI.ffiModel.permissions["restart"] != false &&
+    if (perms["restart"] != false &&
         (pi.platform == "Linux" ||
             pi.platform == "Windows" ||
             pi.platform == "Mac OS")) {
diff --git a/flutter/lib/models/server_model.dart b/flutter/lib/models/server_model.dart
index decb10e5488..87ac9c8eaa5 100644
--- a/flutter/lib/models/server_model.dart
+++ b/flutter/lib/models/server_model.dart
@@ -556,6 +556,9 @@ class Client {
     data['keyboard'] = keyboard;
     data['clipboard'] = clipboard;
     data['audio'] = audio;
+    data['file'] = file;
+    data['restart'] = restart;
+    data['recording'] = recording;
     data['disconnected'] = disconnected;
     return data;
   }
diff --git a/src/lang/cn.rs b/src/lang/cn.rs
index 0d0b9e208fa..47b5f0bcb60 100644
--- a/src/lang/cn.rs
+++ b/src/lang/cn.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", "会话已结束"),
         ("Other", "其他"),
         ("Confirm before closing multiple tabs", "关闭多个标签页时向您确认"),
+        ("Keyboard Settings", "键盘设置"),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/cs.rs b/src/lang/cs.rs
index 9ca84a28be9..2515f223126 100644
--- a/src/lang/cs.rs
+++ b/src/lang/cs.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/da.rs b/src/lang/da.rs
index 10cd64dd41c..df1a06f6d70 100644
--- a/src/lang/da.rs
+++ b/src/lang/da.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", "Afbrudt"),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/de.rs b/src/lang/de.rs
index f45a583f9e4..1b997395722 100644
--- a/src/lang/de.rs
+++ b/src/lang/de.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/eo.rs b/src/lang/eo.rs
index f243eb28a54..3c6b3b7714a 100644
--- a/src/lang/eo.rs
+++ b/src/lang/eo.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/es.rs b/src/lang/es.rs
index 413cef26b30..3826650afe0 100644
--- a/src/lang/es.rs
+++ b/src/lang/es.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/fr.rs b/src/lang/fr.rs
index 79c93a4d938..4b76b89416a 100644
--- a/src/lang/fr.rs
+++ b/src/lang/fr.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/hu.rs b/src/lang/hu.rs
index b4ddebc9455..98e15397c52 100644
--- a/src/lang/hu.rs
+++ b/src/lang/hu.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/id.rs b/src/lang/id.rs
index a751c11c0b0..437ec52cdd3 100644
--- a/src/lang/id.rs
+++ b/src/lang/id.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/it.rs b/src/lang/it.rs
index ae98a56905c..6856eca60f2 100644
--- a/src/lang/it.rs
+++ b/src/lang/it.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/ja.rs b/src/lang/ja.rs
index 46428d74cb3..77f47964af7 100644
--- a/src/lang/ja.rs
+++ b/src/lang/ja.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", "他の"),
         ("Confirm before closing multiple tabs", "同時に複数のタブを閉じる前に確認する"),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/ko.rs b/src/lang/ko.rs
index 3c857424e2c..4d0ff5f3e9d 100644
--- a/src/lang/ko.rs
+++ b/src/lang/ko.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/kz.rs b/src/lang/kz.rs
index f83b8b04b58..602413ba92e 100644
--- a/src/lang/kz.rs
+++ b/src/lang/kz.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/pl.rs b/src/lang/pl.rs
index 9130d6b9a7a..dc6cdb750f5 100644
--- a/src/lang/pl.rs
+++ b/src/lang/pl.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/pt_PT.rs b/src/lang/pt_PT.rs
index 0fd796cb3fe..ff3d31b8361 100644
--- a/src/lang/pt_PT.rs
+++ b/src/lang/pt_PT.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/ptbr.rs b/src/lang/ptbr.rs
index a20fdd557fe..0c0150e8883 100644
--- a/src/lang/ptbr.rs
+++ b/src/lang/ptbr.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/ru.rs b/src/lang/ru.rs
index c86d5cc310e..4192f849077 100644
--- a/src/lang/ru.rs
+++ b/src/lang/ru.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/sk.rs b/src/lang/sk.rs
index 8d4105118b9..819eee109e3 100644
--- a/src/lang/sk.rs
+++ b/src/lang/sk.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/template.rs b/src/lang/template.rs
index 02bfc95c0c7..c1d93b22484 100644
--- a/src/lang/template.rs
+++ b/src/lang/template.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/tr.rs b/src/lang/tr.rs
index e4ee58e2305..7761c1ff30a 100644
--- a/src/lang/tr.rs
+++ b/src/lang/tr.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/tw.rs b/src/lang/tw.rs
index 5b0dc48aa4b..ab175cf117e 100644
--- a/src/lang/tw.rs
+++ b/src/lang/tw.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", "會話已結束"),
         ("Other", "其他"),
         ("Confirm before closing multiple tabs", "關閉多個分頁前跟我確認"),
+        ("Keyboard Settings", "鍵盤設置"),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/ua.rs b/src/lang/ua.rs
index 7d5037807b7..0399705b979 100644
--- a/src/lang/ua.rs
+++ b/src/lang/ua.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
diff --git a/src/lang/vn.rs b/src/lang/vn.rs
index 4e441abffaa..db09d03a3e2 100644
--- a/src/lang/vn.rs
+++ b/src/lang/vn.rs
@@ -373,5 +373,6 @@ pub static ref T: std::collections::HashMap<&'static str, &'static str> =
         ("Disconnected", ""),
         ("Other", ""),
         ("Confirm before closing multiple tabs", ""),
+        ("Keyboard Settings", ""),
     ].iter().cloned().collect();
 }
