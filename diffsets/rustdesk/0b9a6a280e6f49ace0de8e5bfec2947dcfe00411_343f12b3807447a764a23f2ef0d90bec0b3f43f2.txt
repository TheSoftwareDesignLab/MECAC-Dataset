diff --git a/flutter/lib/common.dart b/flutter/lib/common.dart
index 2d4084851b5..777924c668b 100644
--- a/flutter/lib/common.dart
+++ b/flutter/lib/common.dart
@@ -3705,3 +3705,18 @@ Widget workaroundWindowBorder(BuildContext context, Widget child) {
     ],
   );
 }
+
+void updateTextAndPreserveSelection(TextEditingController controller, String text) {
+  final preSelectionStart = controller.selection.start;
+  final preSelectionEnd = controller.selection.end;
+  // Only care about select all for now.
+  final isSelected = preSelectionEnd > preSelectionStart;
+
+  // Set text will make the selection invalid.
+  controller.text = text;
+
+  if (isSelected) {
+    controller.selection = TextSelection(
+        baseOffset: 0, extentOffset: controller.value.text.length);
+  }
+}
diff --git a/flutter/lib/desktop/pages/connection_page.dart b/flutter/lib/desktop/pages/connection_page.dart
index 0f83bfb1fb1..dd9e840411f 100644
--- a/flutter/lib/desktop/pages/connection_page.dart
+++ b/flutter/lib/desktop/pages/connection_page.dart
@@ -225,6 +225,7 @@ class _ConnectionPageState extends State<ConnectionPage>
         }
       });
     }
+    Get.put<TextEditingController>(_idEditingController);
     Get.put<IDTextEditingController>(_idController);
     windowManager.addListener(this);
   }
@@ -395,8 +396,8 @@ class _ConnectionPageState extends State<ConnectionPage>
                     FocusNode fieldFocusNode,
                     VoidCallback onFieldSubmitted,
                   ) {
-                    fieldTextEditingController.text = _idController.text;
-                    Get.put<TextEditingController>(fieldTextEditingController);
+                    updateTextAndPreserveSelection(
+                        fieldTextEditingController, _idController.text);
                     return Obx(() => TextField(
                           autocorrect: false,
                           enableSuggestions: false,
diff --git a/flutter/lib/mobile/pages/connection_page.dart b/flutter/lib/mobile/pages/connection_page.dart
index 1e8f4528ea6..07aaaef8cdf 100644
--- a/flutter/lib/mobile/pages/connection_page.dart
+++ b/flutter/lib/mobile/pages/connection_page.dart
@@ -74,6 +74,7 @@ class _ConnectionPageState extends State<ConnectionPage> {
         }
       });
     }
+    Get.put<TextEditingController>(_idEditingController);
   }
 
   @override
@@ -214,9 +215,8 @@ class _ConnectionPageState extends State<ConnectionPage> {
                         TextEditingController fieldTextEditingController,
                         FocusNode fieldFocusNode,
                         VoidCallback onFieldSubmitted) {
-                      fieldTextEditingController.text = _idController.text;
-                      Get.put<TextEditingController>(
-                          fieldTextEditingController);
+                      updateTextAndPreserveSelection(
+                          fieldTextEditingController, _idController.text);
                       return AutoSizeTextField(
                         controller: fieldTextEditingController,
                         focusNode: fieldFocusNode,
