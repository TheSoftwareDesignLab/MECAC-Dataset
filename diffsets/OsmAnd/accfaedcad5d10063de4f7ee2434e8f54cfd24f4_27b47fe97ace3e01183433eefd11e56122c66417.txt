diff --git a/OsmAnd/src/net/osmand/plus/base/ContextMenuFragment.java b/OsmAnd/src/net/osmand/plus/base/ContextMenuFragment.java
index b1e91f642db..0d7748343c0 100644
--- a/OsmAnd/src/net/osmand/plus/base/ContextMenuFragment.java
+++ b/OsmAnd/src/net/osmand/plus/base/ContextMenuFragment.java
@@ -10,17 +10,9 @@
 import android.os.Build;
 import android.os.Bundle;
 import android.util.TypedValue;
-import android.view.GestureDetector;
-import android.view.LayoutInflater;
-import android.view.MotionEvent;
-import android.view.VelocityTracker;
-import android.view.View;
+import android.view.*;
 import android.view.View.OnLayoutChangeListener;
 import android.view.View.OnTouchListener;
-import android.view.ViewConfiguration;
-import android.view.ViewGroup;
-import android.view.ViewParent;
-import android.view.ViewTreeObserver;
 import android.view.animation.DecelerateInterpolator;
 import android.widget.FrameLayout;
 import android.widget.LinearLayout;
@@ -31,7 +23,6 @@
 import androidx.annotation.LayoutRes;
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
-import androidx.appcompat.view.ContextThemeWrapper;
 import androidx.fragment.app.FragmentActivity;
 import androidx.fragment.app.FragmentManager;
 
@@ -47,6 +38,7 @@
 import net.osmand.plus.mapcontextmenu.other.ShareMenu;
 import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.ColorUtilities;
+import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.views.MapLayers;
 import net.osmand.plus.views.controls.HorizontalSwipeConfirm;
 import net.osmand.plus.views.controls.SingleTapConfirm;
@@ -268,8 +260,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 		preferredMapLang = app.getSettings().MAP_PREFERRED_LOCALE.get();
 		transliterateNames = app.getSettings().MAP_TRANSLITERATE_NAMES.get();
 
-		ContextThemeWrapper context =
-				new ContextThemeWrapper(mapActivity, !nightMode ? R.style.OsmandLightTheme : R.style.OsmandDarkTheme);
+		Context context = UiUtilities.getThemedContext(mapActivity, nightMode);
 		view = LayoutInflater.from(context).inflate(getMainLayoutId(), container, false);
 		initLayout = true;
 		currentMenuState = getInitialMenuState();
@@ -322,8 +313,8 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 		processScreenHeight(container);
 		minHalfY = getMinHalfY(mapActivity);
 
-		GestureDetector singleTapDetector = new GestureDetector(view.getContext(), new SingleTapConfirm());
-		GestureDetector swipeDetector = new GestureDetector(view.getContext(), new HorizontalSwipeConfirm(true));
+		GestureDetector singleTapDetector = new GestureDetector(context, new SingleTapConfirm());
+		GestureDetector swipeDetector = new GestureDetector(context, new HorizontalSwipeConfirm(true));
 
 		OnTouchListener slideTouchListener = new OnTouchListener() {
 			private float dy;
@@ -341,7 +332,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 			private boolean hasMoved;
 
 			{
-				scroller = new OverScroller(app);
+				scroller = new OverScroller(context);
 				ViewConfiguration configuration = ViewConfiguration.get(requireContext());
 				minimumVelocity = configuration.getScaledMinimumFlingVelocity();
 				maximumVelocity = configuration.getScaledMaximumFlingVelocity();
