diff --git a/OsmAnd/res/layout/bottom_sheet_allocated_routing_memory.xml b/OsmAnd/res/layout/bottom_sheet_allocated_routing_memory.xml
new file mode 100644
index 00000000000..b00b067b075
--- /dev/null
+++ b/OsmAnd/res/layout/bottom_sheet_allocated_routing_memory.xml
@@ -0,0 +1,33 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	android:orientation="vertical"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content">
+
+	<Space
+		android:layout_width="match_parent"
+		android:layout_height="@dimen/content_padding_small" />
+
+	<Space
+		android:layout_width="match_parent"
+		android:layout_height="@dimen/content_padding_small" />
+
+	<include
+		android:id="@+id/slider_container"
+		layout="@layout/bottom_sheet_item_slider_with_four_text" />
+
+	<Space
+		android:layout_width="match_parent"
+		android:layout_height="@dimen/content_padding_small" />
+
+	<View
+		android:layout_width="match_parent"
+		android:layout_height="1dp"
+		android:background="?divider_color"
+		android:layout_marginStart="@dimen/content_padding" />
+
+	<include
+		android:id="@+id/button_container"
+		layout="@layout/bottom_sheet_item_btn_with_icon_and_text" />
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/bottom_sheet_item_slider_with_four_text.xml b/OsmAnd/res/layout/bottom_sheet_item_slider_with_four_text.xml
new file mode 100644
index 00000000000..f9f4e4f6cf0
--- /dev/null
+++ b/OsmAnd/res/layout/bottom_sheet_item_slider_with_four_text.xml
@@ -0,0 +1,86 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:osmand="http://schemas.android.com/apk/res-auto"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:orientation="vertical"
+	android:layout_width="match_parent"
+	android:layout_height="match_parent">
+
+	<LinearLayout
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:gravity="center_vertical"
+		android:paddingLeft="@dimen/content_padding"
+		android:paddingRight="@dimen/content_padding"
+		android:paddingStart="@dimen/content_padding"
+		android:paddingEnd="@dimen/content_padding">
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@android:id/title"
+			android:layout_width="0dp"
+			android:layout_height="wrap_content"
+			android:layout_weight="1"
+			android:textColor="?android:textColorPrimary"
+			android:textSize="@dimen/default_list_text_size"
+			osmand:typeface="@string/font_roboto_medium"
+			tools:text="Title" />
+
+		<Space
+			android:layout_width="@dimen/content_padding"
+			android:layout_height="match_parent" />
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@android:id/summary"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:textColor="?android:textColorSecondary"
+			android:textSize="@dimen/default_list_text_size"
+			osmand:typeface="@string/font_roboto_regular"
+			tools:text="summary" />
+
+	</LinearLayout>
+
+	<com.google.android.material.slider.Slider
+		android:id="@+id/slider"
+		android:layout_marginLeft="@dimen/content_padding"
+		android:layout_marginRight="@dimen/content_padding"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginStart="@dimen/content_padding"
+		android:layout_marginEnd="@dimen/content_padding" />
+
+	<LinearLayout
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:gravity="center_vertical"
+		android:paddingLeft="@dimen/content_padding"
+		android:paddingRight="@dimen/content_padding"
+		android:paddingStart="@dimen/content_padding"
+		android:paddingEnd="@dimen/content_padding">
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@+id/from_value"
+			android:layout_width="0dp"
+			android:layout_height="wrap_content"
+			android:layout_weight="1"
+			android:textColor="?android:textColorPrimary"
+			android:textSize="@dimen/default_desc_text_size"
+			osmand:typeface="@string/font_roboto_regular"
+			tools:text="0" />
+
+		<Space
+			android:layout_width="@dimen/content_padding"
+			android:layout_height="match_parent" />
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@+id/to_value"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:textColor="?android:textColorSecondary"
+			android:textSize="@dimen/default_desc_text_size"
+			osmand:typeface="@string/font_roboto_regular"
+			tools:text="100" />
+
+	</LinearLayout>
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index 162699e2481..3d7fa40614b 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -11,6 +11,9 @@
 	Thx - Hardy
 -->
 
+    <string name="shared_string_memory">Memory</string>
+    <string name="memory_allocated_for_routing_ds">Higher memory value speeds up the calculation of long routes (more than 500 km), but may affect the performance of other applications.\nDoes not affect calculation speed of short routes.</string>
+    <string name="memory_allocated_for_routing">Memory allocated for Routing</string>
     <string name="show_parameter_seekbar">Show parameter seekbar</string>
     <string name="display_groups_visibility_dialog_description">You can control groups visibility on the map. If track is hidden, all groups will be hidden too.</string>
     <string name="shared_string_hide_all">Hide all</string>
diff --git a/OsmAnd/res/xml/development_settings.xml b/OsmAnd/res/xml/development_settings.xml
index 4a54d6f15d4..ebdea54967c 100644
--- a/OsmAnd/res/xml/development_settings.xml
+++ b/OsmAnd/res/xml/development_settings.xml
@@ -101,6 +101,13 @@
 		android:layout="@layout/preference_category_with_descr"
 		android:title="@string/info_button" />
 
+	<Preference
+		android:key="memory_allocated_for_routing"
+		android:layout="@layout/preference_with_descr"
+		android:persistent="false"
+		android:title="@string/memory_allocated_for_routing"
+		android:summary="256 mb"/>
+
 	<Preference
 		android:key="global_app_allocated_memory"
 		android:layout="@layout/preference_with_descr"
diff --git a/OsmAnd/src/net/osmand/plus/development/AllocatedRoutingMemoryBottomSheet.java b/OsmAnd/src/net/osmand/plus/development/AllocatedRoutingMemoryBottomSheet.java
new file mode 100644
index 00000000000..60cdc0718eb
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/development/AllocatedRoutingMemoryBottomSheet.java
@@ -0,0 +1,229 @@
+package net.osmand.plus.development;
+
+import android.app.Activity;
+import android.app.ActivityManager;
+import android.app.ActivityManager.MemoryInfo;
+import android.graphics.drawable.Drawable;
+import android.os.Bundle;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.widget.ImageView;
+import android.widget.TextView;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.fragment.app.Fragment;
+import androidx.fragment.app.FragmentManager;
+
+import com.google.android.material.slider.Slider;
+
+import net.osmand.AndroidUtils;
+import net.osmand.plus.ColorUtilities;
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities;
+import net.osmand.plus.base.bottomsheetmenu.BaseBottomSheetItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.LongDescriptionItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.TitleItem;
+import net.osmand.plus.settings.backend.ApplicationMode;
+import net.osmand.plus.settings.backend.CommonPreference;
+import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.settings.bottomsheets.BasePreferenceBottomSheet;
+import net.osmand.plus.settings.fragments.BaseSettingsFragment;
+
+import java.util.ArrayList;
+import java.util.List;
+
+import static android.content.Context.ACTIVITY_SERVICE;
+
+public class AllocatedRoutingMemoryBottomSheet extends BasePreferenceBottomSheet {
+
+	public static final String TAG = AllocatedRoutingMemoryBottomSheet.class.getSimpleName();
+
+	private OsmandApplication app;
+	private OsmandSettings settings;
+
+	private Integer[] range;
+	private int minValue;
+	private int maxValue;
+	private int initialValue;
+	private int currentValue;
+	private int defaultValue;
+
+	private CommonPreference<Integer> preference;
+
+	private View sliderContainer;
+
+	@Override
+	public void onCreate(Bundle savedInstanceState) {
+		super.onCreate(savedInstanceState);
+		app = requiredMyApplication();
+		settings = app.getSettings();
+		preference = settings.MEMORY_ALLOCATED_FOR_ROUTING;
+		initData();
+	}
+
+	private void initData() {
+		List<Integer> rangeList = getAvailableRange();
+		range = new Integer[rangeList.size()];
+		rangeList.toArray(range);
+		if (range.length > 0) {
+			minValue = range[0];
+			maxValue = range[range.length - 1];
+		}
+		initialValue = preference.get();
+		currentValue = initialValue;
+		defaultValue = preference.getDefaultValue();
+	}
+
+	@Override
+	public void createMenuItems(Bundle savedInstanceState) {
+		LayoutInflater inflater = UiUtilities.getInflater(getContext(), nightMode);
+
+		String title = getString(R.string.memory_allocated_for_routing);
+		items.add(new TitleItem(title));
+
+		String description = getString(R.string.memory_allocated_for_routing_ds);
+		items.add(new LongDescriptionItem(description));
+
+		View view = inflater.inflate(R.layout.bottom_sheet_allocated_routing_memory, null);
+		items.add(new BaseBottomSheetItem.Builder().setCustomView(view).create());
+
+		sliderContainer = view.findViewById(R.id.slider_container);
+		setupSliderView(sliderContainer);
+
+		View buttonView = view.findViewById(R.id.button_container);
+		setupResetButton(buttonView);
+	}
+
+	private void setupSliderView(View container) {
+		TextView title = container.findViewById(android.R.id.title);
+		TextView summary = container.findViewById(android.R.id.summary);
+		TextView from = container.findViewById(R.id.from_value);
+		TextView to = container.findViewById(R.id.to_value);
+
+		title.setText(getString(R.string.shared_string_memory));
+		summary.setText(getFormattedMb(currentValue));
+		from.setText(getFormattedMb(minValue));
+		to.setText(getFormattedMb(maxValue));
+
+		Slider slider = container.findViewById(R.id.slider);
+		int activeColor = ColorUtilities.getActiveColor(app, nightMode);
+		UiUtilities.setupSlider(slider, nightMode, activeColor, true);
+		slider.setValueFrom(0);
+		slider.setValueTo(range.length - 1);
+		slider.setStepSize(1);
+		slider.setValue(getRangeIndex(currentValue));
+
+		slider.addOnChangeListener((slider1, value, fromUser) -> {
+			if (fromUser) {
+				currentValue = range[(int) slider1.getValue()];
+				summary.setText(getFormattedMb(currentValue));
+			}
+		});
+	}
+
+	private void setupResetButton(View container) {
+		ImageView icon = container.findViewById(R.id.button_icon);
+		TextView text = container.findViewById(R.id.button_text);
+		icon.setImageResource(R.drawable.ic_action_reset);
+		text.setText(getString(R.string.reset_to_default));
+		text.setTextColor(ColorUtilities.getPrimaryTextColor(app, nightMode));
+		int activeColor = ColorUtilities.getActiveColor(app, nightMode);
+		Drawable drawable = UiUtilities.getColoredSelectableDrawable(app, activeColor, 0.3f);
+		AndroidUtils.setBackground(container, drawable);
+		container.setOnClickListener(view -> onResetToDefault());
+	}
+
+	private void onResetToDefault() {
+		currentValue = defaultValue;
+		updateSliderView(sliderContainer);
+	}
+
+	private void updateSliderView(View container) {
+		TextView summary = container.findViewById(android.R.id.summary);
+		summary.setText(getFormattedMb(currentValue));
+
+		Slider slider = container.findViewById(R.id.slider);
+		slider.setValue(getRangeIndex(currentValue));
+	}
+
+	private String getFormattedMb(int value) {
+		return getString(R.string.ltr_or_rtl_combine_via_space, String.valueOf(value), "MB");
+	}
+
+	@Override
+	protected void onRightBottomButtonClick() {
+		if (isChanged()) {
+			Fragment target = getTargetFragment();
+			if (target instanceof BaseSettingsFragment) {
+				BaseSettingsFragment fragment = (BaseSettingsFragment) target;
+				fragment.onApplyPreferenceChange(preference.getId(), false, currentValue);
+			}
+		}
+		dismiss();
+	}
+
+	@Override
+	protected int getRightBottomButtonTextId() {
+		return R.string.shared_string_apply;
+	}
+
+	private List<Integer> getAvailableRange() {
+		List<Integer> powRange = new ArrayList<>();
+		int maxLimit = (int) getMaxLimit();
+		// start from 2^6 = 64
+		for (int i = 6; true; i++) {
+			int res = (int) Math.pow(2, i);
+			if (res < maxLimit) {
+				powRange.add(res);
+			} else {
+				break;
+			}
+		}
+		return powRange;
+	}
+
+	private float getMaxLimit() {
+		Activity activity = requireActivity();
+		MemoryInfo mi = new MemoryInfo();
+		ActivityManager activityManager = (ActivityManager) activity.getSystemService(ACTIVITY_SERVICE);
+		activityManager.getMemoryInfo(mi);
+		double availableMb = (double) mi.availMem / 0x100000L;
+		return (float) availableMb / 2;
+	}
+
+	private int getRangeIndex(float value) {
+		for (int i = 0; i < range.length; i++) {
+			if (value == range[i]) {
+				return i;
+			}
+		}
+		return range.length - 1;
+	}
+
+	private boolean isChanged() {
+		return initialValue != currentValue;
+	}
+
+	public static boolean showInstance(@NonNull FragmentManager fragmentManager,
+	                                   @NonNull String key,
+	                                   @NonNull Fragment target,
+	                                   @Nullable ApplicationMode appMode) {
+		try {
+			Bundle args = new Bundle();
+			args.putString(PREFERENCE_ID, key);
+
+			AllocatedRoutingMemoryBottomSheet fragment = new AllocatedRoutingMemoryBottomSheet();
+			fragment.setArguments(args);
+			fragment.setUsedOnMap(false);
+			fragment.setAppMode(appMode);
+			fragment.setTargetFragment(target, 0);
+			fragment.show(fragmentManager, TAG);
+			return true;
+		} catch (RuntimeException e) {
+			return false;
+		}
+	}
+
+}
diff --git a/OsmAnd/src/net/osmand/plus/development/DevelopmentSettingsFragment.java b/OsmAnd/src/net/osmand/plus/development/DevelopmentSettingsFragment.java
index b0d913747c4..e155c2eff73 100644
--- a/OsmAnd/src/net/osmand/plus/development/DevelopmentSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/development/DevelopmentSettingsFragment.java
@@ -5,6 +5,7 @@
 import android.os.Debug;
 
 import androidx.fragment.app.FragmentActivity;
+import androidx.fragment.app.FragmentManager;
 import androidx.preference.Preference;
 
 import net.osmand.plus.OsmAndLocationSimulation;
@@ -24,6 +25,7 @@ public class DevelopmentSettingsFragment extends BaseSettingsFragment {
 	private static final String SIMULATE_INITIAL_STARTUP = "simulate_initial_startup";
 	private static final String SIMULATE_YOUR_LOCATION = "simulate_your_location";
 	private static final String AGPS_DATA_DOWNLOADED = "agps_data_downloaded";
+	private static final String MEMORY_ALLOCATED_FOR_ROUTING = "memory_allocated_for_routing";
 
 	private static final SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("yyyy-MM-dd  HH:mm");
 
@@ -60,6 +62,7 @@ protected void setupPreferences() {
 		Preference info = findPreference("info");
 		info.setIconSpaceReserved(false);
 
+		setupMemoryAllocatedForRoutingPref();
 		setupGlobalAppAllocatedMemoryPref();
 		setupNativeAppAllocatedMemoryPref();
 		setupAgpsDataDownloadedPref();
@@ -142,6 +145,17 @@ private void setupLogcatBufferPref() {
 		logcatBuffer.setIconSpaceReserved(false);
 	}
 
+	private void setupMemoryAllocatedForRoutingPref() {
+		Preference preference = findPreference(MEMORY_ALLOCATED_FOR_ROUTING);
+		int value = settings.MEMORY_ALLOCATED_FOR_ROUTING.get();
+		String description = getString(
+				R.string.ltr_or_rtl_combine_via_slash,
+				String.valueOf(value),
+				"MB");
+		preference.setSummary(description);
+		preference.setIconSpaceReserved(false);
+	}
+
 	private void setupGlobalAppAllocatedMemoryPref() {
 		long javaAvailMem = (Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()) / (1024 * 1024L);
 		long javaTotal = Runtime.getRuntime().totalMemory() / (1024 * 1024L);
@@ -214,10 +228,25 @@ public boolean onPreferenceClick(Preference preference) {
 				preference.setSummary(getAgpsDataDownloadedSummary());
 			}
 			return true;
+		} else if (MEMORY_ALLOCATED_FOR_ROUTING.equals(prefId)) {
+			FragmentManager fragmentManager = getFragmentManager();
+			if (fragmentManager != null) {
+				AllocatedRoutingMemoryBottomSheet.showInstance(getFragmentManager(), preference.getKey(), this, getSelectedAppMode());
+			}
 		}
 		return super.onPreferenceClick(preference);
 	}
 
+	@Override
+	public void onApplyPreferenceChange(String prefId, boolean applyToAllProfiles, Object newValue) {
+		if (prefId.equals(MEMORY_ALLOCATED_FOR_ROUTING)) {
+			applyPreference(MEMORY_ALLOCATED_FOR_ROUTING, applyToAllProfiles, newValue);
+			setupMemoryAllocatedForRoutingPref();
+		} else {
+			super.onApplyPreferenceChange(prefId, applyToAllProfiles, newValue);
+		}
+	}
+
 	@Override
 	public boolean onPreferenceChange(Preference preference, Object newValue) {
 		String prefId = preference.getKey();
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/CommonPreference.java b/OsmAnd/src/net/osmand/plus/settings/backend/CommonPreference.java
index 2e82936914e..d428b71685c 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/CommonPreference.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/CommonPreference.java
@@ -160,7 +160,7 @@ public final boolean hasDefaultValueForMode(ApplicationMode mode) {
 		return defaultValues != null && defaultValues.containsKey(mode);
 	}
 
-	protected T getDefaultValue() {
+	public T getDefaultValue() {
 		return getProfileDefaultValue(settings.APPLICATION_MODE.get());
 	}
 
