diff --git a/OsmAnd/res/layout/fragment_show_all_routes.xml b/OsmAnd/res/layout/fragment_show_all_routes.xml
index 86ac60d4c52..423b85574d1 100644
--- a/OsmAnd/res/layout/fragment_show_all_routes.xml
+++ b/OsmAnd/res/layout/fragment_show_all_routes.xml
@@ -249,51 +249,6 @@
 
 	</LinearLayout>
 
-	<LinearLayout
-		android:id="@+id/map_hud_controls"
-		android:layout_width="wrap_content"
-		android:layout_height="wrap_content"
-		android:layout_gravity="end|bottom"
-		android:layout_marginLeft="@dimen/fab_margin_right"
-		android:layout_marginRight="@dimen/fab_margin_right"
-		android:layout_marginStart="@dimen/fab_margin_right"
-		android:layout_marginEnd="@dimen/fab_margin_right">
-
-		<ImageButton
-			android:id="@+id/map_my_location_button"
-			android:layout_width="@dimen/map_button_size"
-			android:layout_height="@dimen/map_button_size"
-			android:layout_gravity="bottom"
-			android:background="@drawable/btn_circle"
-			android:contentDescription="@string/shared_string_my_location"
-			tools:src="@drawable/ic_action_remove_dark" />
-
-		<LinearLayout
-			android:layout_width="wrap_content"
-			android:layout_height="wrap_content"
-			android:layout_marginStart="@dimen/map_button_spacing"
-			android:layout_marginLeft="@dimen/map_button_spacing"
-			android:orientation="vertical">
-
-			<ImageButton
-				android:id="@+id/map_zoom_in_button"
-				android:layout_width="@dimen/map_button_size"
-				android:layout_height="@dimen/map_button_size"
-				android:background="@drawable/btn_circle"
-				android:contentDescription="@string/zoomIn"
-				tools:src="@drawable/ic_action_remove_dark" />
-
-			<ImageButton
-				android:id="@+id/map_zoom_out_button"
-				android:layout_width="@dimen/map_button_size"
-				android:layout_height="@dimen/map_button_size"
-				android:layout_marginTop="@dimen/map_button_spacing"
-				android:background="@drawable/btn_circle"
-				android:contentDescription="@string/zoomOut"
-				tools:src="@drawable/ic_action_remove_dark" />
-
-		</LinearLayout>
-
-	</LinearLayout>
+	<include layout="@layout/map_hud_controls" />
 
 </FrameLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/map_hud_controls.xml b/OsmAnd/res/layout/map_hud_controls.xml
new file mode 100644
index 00000000000..212f06dd792
--- /dev/null
+++ b/OsmAnd/res/layout/map_hud_controls.xml
@@ -0,0 +1,47 @@
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:id="@+id/map_hud_controls"
+	android:layout_width="wrap_content"
+	android:layout_height="wrap_content"
+	android:layout_gravity="end|bottom"
+	android:layout_marginStart="@dimen/fab_margin_right"
+	android:layout_marginLeft="@dimen/fab_margin_right"
+	android:layout_marginEnd="@dimen/fab_margin_right"
+	android:layout_marginRight="@dimen/fab_margin_right">
+
+	<ImageButton
+		android:id="@+id/map_my_location_button"
+		android:layout_width="@dimen/map_button_size"
+		android:layout_height="@dimen/map_button_size"
+		android:layout_gravity="bottom"
+		android:background="@drawable/btn_circle"
+		android:contentDescription="@string/shared_string_my_location"
+		tools:src="@drawable/ic_action_remove_dark" />
+
+	<LinearLayout
+		android:layout_width="wrap_content"
+		android:layout_height="wrap_content"
+		android:layout_marginStart="@dimen/map_button_spacing"
+		android:layout_marginLeft="@dimen/map_button_spacing"
+		android:orientation="vertical">
+
+		<ImageButton
+			android:id="@+id/map_zoom_in_button"
+			android:layout_width="@dimen/map_button_size"
+			android:layout_height="@dimen/map_button_size"
+			android:background="@drawable/btn_circle"
+			android:contentDescription="@string/zoomIn"
+			tools:src="@drawable/ic_action_remove_dark" />
+
+		<ImageButton
+			android:id="@+id/map_zoom_out_button"
+			android:layout_width="@dimen/map_button_size"
+			android:layout_height="@dimen/map_button_size"
+			android:layout_marginTop="@dimen/map_button_spacing"
+			android:background="@drawable/btn_circle"
+			android:contentDescription="@string/zoomOut"
+			tools:src="@drawable/ic_action_remove_dark" />
+
+	</LinearLayout>
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/track_appearance.xml b/OsmAnd/res/layout/track_appearance.xml
index a302486a392..ba8267efb28 100644
--- a/OsmAnd/res/layout/track_appearance.xml
+++ b/OsmAnd/res/layout/track_appearance.xml
@@ -112,4 +112,8 @@
 
 	</LinearLayout>
 
+	<include
+		layout="@layout/map_hud_controls"
+		tools:visibility="invisible" />
+
 </FrameLayout>
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/TrackActivityFragmentAdapter.java b/OsmAnd/src/net/osmand/plus/myplaces/TrackActivityFragmentAdapter.java
index 504686054ec..6d22a7f3054 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/TrackActivityFragmentAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/TrackActivityFragmentAdapter.java
@@ -308,9 +308,9 @@ public void onClick(View v) {
 			}
 		});
 
+		splitColorView.setVisibility(View.GONE);
 		if (showMapOnly) {
 			splitIntervalView.setVisibility(View.GONE);
-			splitColorView.setVisibility(View.GONE);
 			appearanceView.setVisibility(View.GONE);
 			divider.setVisibility(View.GONE);
 			bottomDivider.setVisibility(View.VISIBLE);
@@ -354,11 +354,9 @@ public void onClick(View v) {
 					}
 				});
 				appearanceView.setVisibility(View.VISIBLE);
-				splitColorView.setVisibility(View.VISIBLE);
 				divider.setVisibility(View.VISIBLE);
 			} else {
 				appearanceView.setVisibility(View.GONE);
-				splitColorView.setVisibility(View.GONE);
 				divider.setVisibility(View.GONE);
 			}
 		}
diff --git a/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java b/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java
index e419e424513..de72d33f8e9 100644
--- a/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java
+++ b/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java
@@ -1,5 +1,6 @@
 package net.osmand.plus.track;
 
+import android.Manifest;
 import android.graphics.Color;
 import android.graphics.drawable.Drawable;
 import android.os.AsyncTask;
@@ -10,31 +11,37 @@
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.FrameLayout;
+import android.widget.ImageButton;
 import android.widget.ImageView;
 import android.widget.LinearLayout;
 
 import androidx.annotation.ColorInt;
 import androidx.annotation.NonNull;
+import androidx.core.app.ActivityCompat;
 import androidx.fragment.app.FragmentActivity;
 import androidx.fragment.app.FragmentManager;
 
 import net.osmand.AndroidUtils;
 import net.osmand.GPXUtilities.GPXFile;
+import net.osmand.Location;
 import net.osmand.PlatformUtil;
 import net.osmand.plus.GPXDatabase.GpxDataItem;
 import net.osmand.plus.GpxSelectionHelper.GpxDisplayGroup;
 import net.osmand.plus.GpxSelectionHelper.SelectedGpxFile;
+import net.osmand.plus.OsmAndLocationProvider;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.UiUtilities;
 import net.osmand.plus.UiUtilities.DialogButtonType;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.base.ContextMenuFragment;
+import net.osmand.plus.base.ContextMenuFragment.ContextMenuFragmentListener;
 import net.osmand.plus.dialogs.GpxAppearanceAdapter;
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.routepreparationmenu.cards.BaseCard;
 import net.osmand.plus.routepreparationmenu.cards.BaseCard.CardListener;
 import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.views.OsmandMapTileView;
 import net.osmand.render.RenderingRulesStorage;
 import net.osmand.util.Algorithms;
 
@@ -49,7 +56,7 @@
 import static net.osmand.plus.dialogs.GpxAppearanceAdapter.TRACK_WIDTH_MEDIUM;
 import static net.osmand.plus.track.TrackDrawInfo.TRACK_FILE_PATH;
 
-public class TrackAppearanceFragment extends ContextMenuFragment implements CardListener {
+public class TrackAppearanceFragment extends ContextMenuFragment implements CardListener, ContextMenuFragmentListener {
 
 	public static final String TAG = TrackAppearanceFragment.class.getName();
 
@@ -62,13 +69,15 @@ public class TrackAppearanceFragment extends ContextMenuFragment implements Card
 	private SelectedGpxFile selectedGpxFile;
 	private List<GpxDisplayGroup> displayGroups;
 
-	private ImageView appearanceIcon;
-
 	private int menuTitleHeight;
 	private long modifiedTime = -1;
 
 	private TrackWidthCard trackWidthCard;
 
+	private ImageView appearanceIcon;
+	private View zoomButtonsView;
+	private ImageButton myLocButtonView;
+
 	@Override
 	public int getMainLayoutId() {
 		return R.layout.track_appearance;
@@ -141,6 +150,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 		View view = super.onCreateView(inflater, container, savedInstanceState);
 		if (view != null) {
 			appearanceIcon = view.findViewById(R.id.appearance_icon);
+			setListener(this);
 
 			if (isPortrait()) {
 				updateCardsLayout();
@@ -154,6 +164,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 				params.gravity = Gravity.BOTTOM | Gravity.START;
 				view.findViewById(R.id.control_buttons).setLayoutParams(params);
 			}
+			buildZoomButtons(view);
 			enterMeasurementMode();
 			runLayoutListener();
 		}
@@ -180,6 +191,21 @@ protected void updateMainViewLayout(int posY) {
 		updateStatusBarColor();
 	}
 
+	@Override
+	public void onContextMenuYPosChanged(@NonNull ContextMenuFragment fragment, int y, boolean needMapAdjust, boolean animated) {
+		updateZoomButtonsPos(fragment, y, animated);
+	}
+
+	@Override
+	public void onContextMenuStateChanged(@NonNull ContextMenuFragment fragment, int menuState) {
+		updateZoomButtonsVisibility(menuState);
+	}
+
+	@Override
+	public void onContextMenuDismiss(@NonNull ContextMenuFragment fragment) {
+
+	}
+
 	@Override
 	public void onResume() {
 		super.onResume();
@@ -287,6 +313,130 @@ public void onCardButtonPressed(@NonNull BaseCard card, int buttonIndex) {
 
 	}
 
+	private void buildZoomButtons(@NonNull View view) {
+		OsmandApplication app = requireMyApplication();
+		this.zoomButtonsView = view.findViewById(R.id.map_hud_controls);
+		ImageButton zoomInButtonView = (ImageButton) view.findViewById(R.id.map_zoom_in_button);
+		ImageButton zoomOutButtonView = (ImageButton) view.findViewById(R.id.map_zoom_out_button);
+		AndroidUtils.updateImageButton(app, zoomInButtonView, R.drawable.ic_zoom_in, R.drawable.ic_zoom_in,
+				R.drawable.btn_circle_trans, R.drawable.btn_circle_night, isNightMode());
+		AndroidUtils.updateImageButton(app, zoomOutButtonView, R.drawable.ic_zoom_out, R.drawable.ic_zoom_out,
+				R.drawable.btn_circle_trans, R.drawable.btn_circle_night, isNightMode());
+		zoomInButtonView.setOnClickListener(new View.OnClickListener() {
+			@Override
+			public void onClick(View v) {
+				doZoomIn();
+			}
+		});
+		zoomOutButtonView.setOnClickListener(new View.OnClickListener() {
+			@Override
+			public void onClick(View v) {
+				doZoomOut();
+			}
+		});
+
+		myLocButtonView = (ImageButton) view.findViewById(R.id.map_my_location_button);
+		myLocButtonView.setOnClickListener(new View.OnClickListener() {
+			@Override
+			public void onClick(View v) {
+				MapActivity mapActivity = getMapActivity();
+				if (mapActivity != null) {
+					if (OsmAndLocationProvider.isLocationPermissionAvailable(mapActivity)) {
+						mapActivity.getMapViewTrackingUtilities().backToLocationImpl();
+					} else {
+						ActivityCompat.requestPermissions(mapActivity,
+								new String[] {Manifest.permission.ACCESS_FINE_LOCATION},
+								OsmAndLocationProvider.REQUEST_LOCATION_PERMISSION);
+					}
+				}
+			}
+		});
+		updateMyLocation();
+
+		zoomButtonsView.setVisibility(View.VISIBLE);
+	}
+
+	private void updateMyLocation() {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity == null) {
+			return;
+		}
+		OsmandApplication app = mapActivity.getMyApplication();
+		Location lastKnownLocation = app.getLocationProvider().getLastKnownLocation();
+		boolean enabled = lastKnownLocation != null;
+		boolean tracked = mapActivity.getMapViewTrackingUtilities().isMapLinkedToLocation();
+
+		ImageButton myLocButtonView = this.myLocButtonView;
+		if (myLocButtonView != null) {
+			if (!enabled) {
+				myLocButtonView.setImageDrawable(getIcon(R.drawable.ic_my_location, R.color.icon_color_default_light));
+				AndroidUtils.setBackground(app, myLocButtonView, isNightMode(), R.drawable.btn_circle, R.drawable.btn_circle_night);
+				myLocButtonView.setContentDescription(mapActivity.getString(R.string.unknown_location));
+			} else if (tracked) {
+				myLocButtonView.setImageDrawable(getIcon(R.drawable.ic_my_location, R.color.color_myloc_distance));
+				AndroidUtils.setBackground(app, myLocButtonView, isNightMode(), R.drawable.btn_circle, R.drawable.btn_circle_night);
+			} else {
+				myLocButtonView.setImageResource(R.drawable.ic_my_location);
+				AndroidUtils.setBackground(app, myLocButtonView, isNightMode(), R.drawable.btn_circle_blue, R.drawable.btn_circle_blue);
+				myLocButtonView.setContentDescription(mapActivity.getString(R.string.map_widget_back_to_loc));
+			}
+			if (app.accessibilityEnabled()) {
+				myLocButtonView.setClickable(enabled && !tracked && app.getRoutingHelper().isFollowingMode());
+			}
+		}
+	}
+
+	public void updateZoomButtonsPos(@NonNull ContextMenuFragment fragment, int y, boolean animated) {
+		View zoomButtonsView = this.zoomButtonsView;
+		if (zoomButtonsView != null) {
+			int zoomY = y - getZoomButtonsHeight();
+			if (animated) {
+				fragment.animateView(zoomButtonsView, zoomY);
+			} else {
+				zoomButtonsView.setY(zoomY);
+			}
+		}
+	}
+
+	private int getZoomButtonsHeight() {
+		View zoomButtonsView = this.zoomButtonsView;
+		return zoomButtonsView != null ? zoomButtonsView.getHeight() : 0;
+	}
+
+	public void doZoomIn() {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			OsmandMapTileView map = mapActivity.getMapView();
+			if (map.isZooming() && map.hasCustomMapRatio()) {
+				mapActivity.changeZoom(2, System.currentTimeMillis());
+			} else {
+				mapActivity.changeZoom(1, System.currentTimeMillis());
+			}
+		}
+	}
+
+	public void doZoomOut() {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			mapActivity.changeZoom(-1, System.currentTimeMillis());
+		}
+	}
+
+	private void updateZoomButtonsVisibility(int menuState) {
+		View zoomButtonsView = this.zoomButtonsView;
+		if (zoomButtonsView != null) {
+			if (menuState == MenuState.HEADER_ONLY) {
+				if (zoomButtonsView.getVisibility() != View.VISIBLE) {
+					zoomButtonsView.setVisibility(View.VISIBLE);
+				}
+			} else {
+				if (zoomButtonsView.getVisibility() == View.VISIBLE) {
+					zoomButtonsView.setVisibility(View.INVISIBLE);
+				}
+			}
+		}
+	}
+
 	private void updateAppearanceIcon() {
 		Drawable icon = getTrackIcon(app, trackDrawInfo.getWidth(), trackDrawInfo.isShowArrows(), trackDrawInfo.getColor());
 		appearanceIcon.setImageDrawable(icon);
