diff --git a/OsmAnd/res/layout/backup_action_button.xml b/OsmAnd/res/layout/backup_action_button.xml
index a0d1cdbd332..bebf2458d37 100644
--- a/OsmAnd/res/layout/backup_action_button.xml
+++ b/OsmAnd/res/layout/backup_action_button.xml
@@ -5,6 +5,10 @@
 	android:background="?attr/list_background_color"
 	android:orientation="vertical">
 
+	<include
+		android:id="@+id/divider"
+		layout="@layout/divider" />
+
 	<include
 		android:id="@+id/action_button"
 		layout="@layout/bottom_sheet_dialog_button"
diff --git a/OsmAnd/res/layout/backup_upload_item.xml b/OsmAnd/res/layout/backup_upload_item.xml
index 654063a0e34..09f407146f3 100644
--- a/OsmAnd/res/layout/backup_upload_item.xml
+++ b/OsmAnd/res/layout/backup_upload_item.xml
@@ -105,6 +105,8 @@
 		android:layout_marginBottom="@dimen/content_padding"
 		android:visibility="gone" />
 
-	<include layout="@layout/divider_half_item_with_background" />
+	<include
+		android:id="@+id/bottom_divider"
+		layout="@layout/divider_half_item_with_background" />
 
 </LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/local_backup_card.xml b/OsmAnd/res/layout/local_backup_card.xml
index f48f2d0b766..db921b2f5e1 100644
--- a/OsmAnd/res/layout/local_backup_card.xml
+++ b/OsmAnd/res/layout/local_backup_card.xml
@@ -6,7 +6,7 @@
 	android:layout_height="wrap_content"
 	android:orientation="vertical">
 
-	<include layout="@layout/card_top_divider" />
+	<include layout="@layout/list_item_divider" />
 
 	<LinearLayout
 		android:id="@+id/local_backup"
diff --git a/OsmAnd/res/layout/restore_backup_card.xml b/OsmAnd/res/layout/restore_backup_card.xml
index acdcba7c2cc..ff0fed1a66d 100644
--- a/OsmAnd/res/layout/restore_backup_card.xml
+++ b/OsmAnd/res/layout/restore_backup_card.xml
@@ -5,7 +5,7 @@
 	android:layout_height="wrap_content"
 	android:orientation="vertical">
 
-	<include layout="@layout/card_top_divider" />
+	<include layout="@layout/list_item_divider" />
 
 	<LinearLayout
 		android:layout_width="match_parent"
@@ -44,6 +44,4 @@
 		android:id="@+id/restore"
 		layout="@layout/preference_button" />
 
-	<include layout="@layout/card_bottom_divider" />
-
 </LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index 250907053f2..95386b9f137 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -12,6 +12,8 @@
 
 -->
 
+    <string name="logout_from_osmand_cloud_decsr">Are you sure you want to log out?\nYou will need to sign in again to backup or restore the data.</string>
+    <string name="logout_from_osmand_cloud">Logout from OsmAnd Cloud</string>
     <string name="duration_moment_ago">a moment ago</string>
     <string name="release_4_0">
     â€¢ Cloud backup\n\n
diff --git a/OsmAnd/src/net/osmand/FileUtils.java b/OsmAnd/src/net/osmand/FileUtils.java
index a6e7fb4761d..03266428ac0 100644
--- a/OsmAnd/src/net/osmand/FileUtils.java
+++ b/OsmAnd/src/net/osmand/FileUtils.java
@@ -202,6 +202,19 @@ public static boolean isTempFile(@NonNull OsmandApplication app, @Nullable Strin
 		return path != null && path.startsWith(getTempDir(app).getAbsolutePath());
 	}
 
+	public static void getDirectorySize(File file, long[] size) {
+		if (file.isDirectory()) {
+			File[] files = file.listFiles();
+			if (files != null) {
+				for (File subfolderFile : files) {
+					getDirectorySize(subfolderFile, size);
+				}
+			}
+		} else {
+			size[0] = size[0] + file.length();
+		}
+	}
+
 	public interface RenameCallback {
 		void renamedTo(File file);
 	}
diff --git a/OsmAnd/src/net/osmand/plus/backup/ExportBackupTask.java b/OsmAnd/src/net/osmand/plus/backup/ExportBackupTask.java
index 0e7479cc5a2..5196e1bbe7e 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ExportBackupTask.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ExportBackupTask.java
@@ -23,6 +23,7 @@ public class ExportBackupTask extends AsyncTask<Void, Object, String> {
 
 	private final Map<String, ItemProgressInfo> itemsProgress = new HashMap<>();
 	private int generalProgress;
+	private int maxProgress;
 
 	ExportBackupTask(@NonNull NetworkSettingsHelper helper,
 					 @NonNull List<SettingsItem> items,
@@ -51,6 +52,10 @@ public int getGeneralProgress() {
 		return generalProgress;
 	}
 
+	public int getMaxProgress() {
+		return maxProgress;
+	}
+
 	@Nullable
 	public ItemProgressInfo getItemProgressInfo(@NonNull String type, @NonNull String fileName) {
 		return itemsProgress.get(type + fileName);
@@ -71,7 +76,12 @@ protected String doInBackground(Void... voids) {
 	@Override
 	protected void onPreExecute() {
 		if (listener != null) {
-			listener.onBackupExportStarted(exporter.getItems().size() + exporter.getFilesToDelete().size());
+			int size = 0;
+			for (SettingsItem item : exporter.getItems().values()) {
+				size += item.getEstimatedSize();
+			}
+			maxProgress = size / 1024;
+			listener.onBackupExportStarted();
 		}
 	}
 
@@ -137,7 +147,7 @@ public void itemExportDone(@NonNull String type, @NonNull String fileName) {
 			@Override
 			public void updateGeneralProgress(int uploadedItems, int uploadedKb) {
 				exporter.setCancelled(isCancelled());
-				publishProgress(uploadedItems);
+				publishProgress(uploadedKb);
 			}
 
 			@Override
diff --git a/OsmAnd/src/net/osmand/plus/backup/NetworkSettingsHelper.java b/OsmAnd/src/net/osmand/plus/backup/NetworkSettingsHelper.java
index dceac92ac97..a9e11512835 100644
--- a/OsmAnd/src/net/osmand/plus/backup/NetworkSettingsHelper.java
+++ b/OsmAnd/src/net/osmand/plus/backup/NetworkSettingsHelper.java
@@ -21,7 +21,7 @@ public class NetworkSettingsHelper extends SettingsHelper {
 	ExportBackupTask exportTask;
 
 	public interface BackupExportListener {
-		void onBackupExportStarted(int itemsCount);
+		void onBackupExportStarted();
 
 		void onBackupExportProgressUpdate(int value);
 
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/AuthorizeFragment.java b/OsmAnd/src/net/osmand/plus/backup/ui/AuthorizeFragment.java
index 6b53ea8fa3b..638bac5f0ab 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/AuthorizeFragment.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/AuthorizeFragment.java
@@ -407,7 +407,7 @@ public void onRegisterDevice(int status, @Nullable String message, @Nullable Ser
 					progressBar.setVisibility(View.INVISIBLE);
 					if (errorCode == dialogType.warningErrorCode) {
 						errorText.setText(dialogType.warningId);
-						AndroidUiHelper.updateVisibility(buttonAuthorize, true);
+						AndroidUiHelper.updateVisibility(buttonAuthorize, !promoCodeSupported());
 					} else {
 						errorText.setText(error.getLocalizedError(app));
 					}
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/BackupSettingsFragment.java b/OsmAnd/src/net/osmand/plus/backup/ui/BackupSettingsFragment.java
index 62ed81a1661..9faad33795e 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/BackupSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/BackupSettingsFragment.java
@@ -147,19 +147,23 @@ private void setupAccount(View view) {
 		ImageView icon = container.findViewById(android.R.id.icon);
 		icon.setImageDrawable(getIcon(R.drawable.ic_action_logout, R.color.color_osm_edit_delete));
 
-		container.setOnClickListener(new OnClickListener() {
-			@Override
-			public void onClick(View v) {
-				FragmentActivity activity = getActivity();
-				if (activity != null) {
-					backupHelper.logout();
-					activity.onBackPressed();
-				}
+		container.setOnClickListener(v -> {
+			FragmentManager fragmentManager = getFragmentManager();
+			if (fragmentManager != null) {
+				LogoutBottomSheet.showInstance(fragmentManager, BackupSettingsFragment.this);
 			}
 		});
 		setupSelectableBackground(container);
 	}
 
+	protected void logout() {
+		FragmentActivity activity = getActivity();
+		if (activity != null) {
+			backupHelper.logout();
+			activity.onBackPressed();
+		}
+	}
+
 	private void setupVersionHistory(View view) {
 		View container = view.findViewById(R.id.version_history);
 
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/LogoutBottomSheet.java b/OsmAnd/src/net/osmand/plus/backup/ui/LogoutBottomSheet.java
new file mode 100644
index 00000000000..f411740b919
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/LogoutBottomSheet.java
@@ -0,0 +1,74 @@
+package net.osmand.plus.backup.ui;
+
+import android.os.Bundle;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.fragment.app.Fragment;
+import androidx.fragment.app.FragmentManager;
+
+import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities.DialogButtonType;
+import net.osmand.plus.base.MenuBottomSheetDialogFragment;
+import net.osmand.plus.base.bottomsheetmenu.BaseBottomSheetItem;
+import net.osmand.plus.base.bottomsheetmenu.SimpleBottomSheetItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.TitleItem;
+
+public class LogoutBottomSheet extends MenuBottomSheetDialogFragment {
+
+	public static final String TAG = LogoutBottomSheet.class.getSimpleName();
+
+	@Override
+	public void createMenuItems(Bundle savedInstanceState) {
+		items.add(new TitleItem(getString(R.string.logout_from_osmand_cloud)));
+
+		BaseBottomSheetItem item = new SimpleBottomSheetItem.Builder()
+				.setTitle(getString(R.string.logout_from_osmand_cloud_decsr))
+				.setLayoutId(R.layout.bottom_sheet_item_title_long)
+				.create();
+		items.add(item);
+	}
+
+	@Override
+	protected void onRightBottomButtonClick() {
+		dismiss();
+
+		Fragment target = getTargetFragment();
+		if (target instanceof BackupSettingsFragment) {
+			((BackupSettingsFragment) target).logout();
+		}
+	}
+
+	@Override
+	protected int getDismissButtonTextId() {
+		return R.string.shared_string_cancel;
+	}
+
+	@Override
+	protected int getRightBottomButtonTextId() {
+		return R.string.shared_string_logout;
+	}
+
+	@Override
+	protected DialogButtonType getRightBottomButtonType() {
+		return DialogButtonType.SECONDARY;
+	}
+
+	@Override
+	protected boolean useVerticalButtons() {
+		return true;
+	}
+
+	@Override
+	public int getFirstDividerHeight() {
+		return getResources().getDimensionPixelSize(R.dimen.dialog_content_margin);
+	}
+
+	public static void showInstance(@NonNull FragmentManager fragmentManager, @Nullable Fragment target) {
+		if (!fragmentManager.isStateSaved() && fragmentManager.findFragmentByTag(TAG) == null) {
+			LogoutBottomSheet fragment = new LogoutBottomSheet();
+			fragment.setTargetFragment(target, 0);
+			fragment.show(fragmentManager, TAG);
+		}
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/RemoveOldVersionsBottomSheet.java b/OsmAnd/src/net/osmand/plus/backup/ui/RemoveOldVersionsBottomSheet.java
index c4e5e3fa702..9f9949da25b 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/RemoveOldVersionsBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/RemoveOldVersionsBottomSheet.java
@@ -17,7 +17,7 @@
 
 public class RemoveOldVersionsBottomSheet extends MenuBottomSheetDialogFragment {
 
-	public static final String TAG = DeleteAllDataBottomSheet.class.getSimpleName();
+	public static final String TAG = RemoveOldVersionsBottomSheet.class.getSimpleName();
 
 	@Override
 	public void createMenuItems(Bundle savedInstanceState) {
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/status/ActionButtonViewHolder.java b/OsmAnd/src/net/osmand/plus/backup/ui/status/ActionButtonViewHolder.java
index 868edddddf7..801012ac62d 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/status/ActionButtonViewHolder.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/status/ActionButtonViewHolder.java
@@ -14,6 +14,7 @@
 import net.osmand.plus.backup.BackupInfo;
 import net.osmand.plus.backup.NetworkSettingsHelper.BackupExportListener;
 import net.osmand.plus.backup.PrepareBackupResult;
+import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.settings.backend.backup.items.SettingsItem;
 import net.osmand.util.Algorithms;
 
@@ -21,14 +22,17 @@
 
 public class ActionButtonViewHolder extends RecyclerView.ViewHolder {
 
+	private final View divider;
 	private final View actionButton;
 
 	public ActionButtonViewHolder(@NonNull View itemView) {
 		super(itemView);
+		divider = itemView.findViewById(R.id.divider);
 		actionButton = itemView.findViewById(R.id.action_button);
 	}
 
-	public void bindView(@NonNull BackupStatus status, @NonNull PrepareBackupResult backup, @Nullable BackupExportListener exportListener, boolean nightMode) {
+	public void bindView(@NonNull BackupStatus status, @NonNull PrepareBackupResult backup,
+						 @Nullable BackupExportListener exportListener, boolean uploadItemsVisible, boolean nightMode) {
 		OsmandApplication app = (OsmandApplication) itemView.getContext().getApplicationContext();
 		if (app.getNetworkSettingsHelper().isBackupExporting()) {
 			actionButton.setOnClickListener(v -> app.getNetworkSettingsHelper().cancelExport());
@@ -46,6 +50,7 @@ public void bindView(@NonNull BackupStatus status, @NonNull PrepareBackupResult
 			actionButton.setOnClickListener(v -> app.getBackupHelper().prepareBackup());
 			UiUtilities.setupDialogButton(nightMode, actionButton, DialogButtonType.SECONDARY, R.string.retry);
 		}
+		AndroidUiHelper.updateVisibility(divider, uploadItemsVisible);
 		AndroidUtils.setBackground(app, actionButton, nightMode, R.drawable.dlg_btn_transparent_light, R.drawable.dlg_btn_transparent_dark);
 	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/status/BackupStatusAdapter.java b/OsmAnd/src/net/osmand/plus/backup/ui/status/BackupStatusAdapter.java
index 591c9e69cff..48bc28142d9 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/status/BackupStatusAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/status/BackupStatusAdapter.java
@@ -139,20 +139,30 @@ public ViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int viewType)
 	public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
 		if (holder instanceof HeaderStatusViewHolder) {
 			HeaderStatusViewHolder viewHolder = (HeaderStatusViewHolder) holder;
-			viewHolder.bindView(this, info, status, nightMode);
+			viewHolder.bindView(this, status, nightMode);
 		} else if (holder instanceof WarningViewHolder) {
+			boolean hideBottomPadding = false;
+			if (items.size() > position + 1) {
+				Object item = items.get(position + 1);
+				hideBottomPadding = Algorithms.objectEquals(item, ACTION_BUTTON_TYPE) || item instanceof SettingsItem || item instanceof Pair;
+			}
 			WarningViewHolder viewHolder = (WarningViewHolder) holder;
-			viewHolder.bindView(status, error);
+			viewHolder.bindView(status, error, hideBottomPadding);
 		} else if (holder instanceof ConflictViewHolder) {
 			Pair<LocalFile, RemoteFile> pair = (Pair<LocalFile, RemoteFile>) items.get(position);
 			ConflictViewHolder viewHolder = (ConflictViewHolder) holder;
 			viewHolder.bindView(pair, exportListener, importListener, nightMode);
 		} else if (holder instanceof ItemViewHolder) {
+			boolean lastBackupItem = false;
+			if (items.size() > position + 1) {
+				Object item = items.get(position + 1);
+				lastBackupItem = !(item instanceof SettingsItem) && !(item instanceof Pair);
+			}
 			ItemViewHolder viewHolder = (ItemViewHolder) holder;
-			viewHolder.bindView((SettingsItem) items.get(position));
+			viewHolder.bindView((SettingsItem) items.get(position), lastBackupItem);
 		} else if (holder instanceof ActionButtonViewHolder) {
 			ActionButtonViewHolder viewHolder = (ActionButtonViewHolder) holder;
-			viewHolder.bindView(status, backup, exportListener, nightMode);
+			viewHolder.bindView(status, backup, exportListener, uploadItemsVisible, nightMode);
 		} else if (holder instanceof LocalBackupViewHolder) {
 			LocalBackupViewHolder viewHolder = (LocalBackupViewHolder) holder;
 			viewHolder.bindView(mapActivity, nightMode);
@@ -190,7 +200,7 @@ public int getItemCount() {
 	}
 
 	@Override
-	public void onBackupExportStarted(int itemsCount) {
+	public void onBackupExportStarted() {
 		notifyItemChanged(items.indexOf(HEADER_TYPE));
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/status/BackupStatusFragment.java b/OsmAnd/src/net/osmand/plus/backup/ui/status/BackupStatusFragment.java
index 6693f7abdbf..d3c7563e27c 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/status/BackupStatusFragment.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/status/BackupStatusFragment.java
@@ -120,9 +120,9 @@ public MapActivity getMapActivity() {
 	}
 
 	@Override
-	public void onBackupExportStarted(int itemsCount) {
+	public void onBackupExportStarted() {
 		if (adapter != null) {
-			adapter.onBackupExportStarted(itemsCount);
+			adapter.onBackupExportStarted();
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/status/HeaderStatusViewHolder.java b/OsmAnd/src/net/osmand/plus/backup/ui/status/HeaderStatusViewHolder.java
index 33bb2bb431f..5710b73f247 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/status/HeaderStatusViewHolder.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/status/HeaderStatusViewHolder.java
@@ -8,15 +8,15 @@
 
 import androidx.annotation.DrawableRes;
 import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 import androidx.recyclerview.widget.RecyclerView;
 
 import net.osmand.AndroidUtils;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.UiUtilities;
-import net.osmand.plus.backup.BackupInfo;
+import net.osmand.plus.backup.ExportBackupTask;
 import net.osmand.plus.backup.NetworkSettingsHelper;
+import net.osmand.plus.base.BasicProgressAsyncTask;
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.settings.fragments.MainSettingsFragment;
 import net.osmand.util.Algorithms;
@@ -38,23 +38,25 @@ public HeaderStatusViewHolder(@NonNull View itemView) {
 		progressBar = itemView.findViewById(R.id.progress_bar);
 	}
 
-	public void bindView(@NonNull BackupStatusAdapter adapter, @Nullable BackupInfo info,
-						 @NonNull BackupStatus status, boolean nightMode) {
-		if (info != null) {
-			progressBar.setMax(info.filteredFilesToUpload.size() + info.filteredFilesToDelete.size());
-		}
-
+	public void bindView(@NonNull BackupStatusAdapter adapter, @NonNull BackupStatus status, boolean nightMode) {
 		OsmandApplication app = (OsmandApplication) itemView.getContext().getApplicationContext();
 		NetworkSettingsHelper settingsHelper = app.getNetworkSettingsHelper();
-		if (settingsHelper.getExportTask() != null) {
+
+		ExportBackupTask exportTask = settingsHelper.getExportTask();
+		if (exportTask != null) {
 			title.setText(R.string.uploading);
 			icon.setImageDrawable(getContentIcon(R.drawable.ic_action_cloud_upload));
 
-			int progress = settingsHelper.getExportTask().getGeneralProgress();
+			int progress = exportTask.getGeneralProgress();
+			int maxProgress = exportTask.getMaxProgress();
+			int percentage = BasicProgressAsyncTask.normalizeProgress(progress * 100 / maxProgress);
+
 			String uploading = app.getString(R.string.local_openstreetmap_uploading);
-			title.setText(app.getString(R.string.ltr_or_rtl_combine_via_space, uploading, String.valueOf(progress)));
+			title.setText(app.getString(R.string.ltr_or_rtl_combine_via_space, uploading, percentage + "%"));
 
+			progressBar.setMax(maxProgress);
 			progressBar.setProgress(progress);
+
 			AndroidUiHelper.updateVisibility(description, false);
 			AndroidUiHelper.updateVisibility(progressBar, true);
 		} else {
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/status/ItemViewHolder.java b/OsmAnd/src/net/osmand/plus/backup/ui/status/ItemViewHolder.java
index e7fde728450..9375c5e4b94 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/status/ItemViewHolder.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/status/ItemViewHolder.java
@@ -33,6 +33,7 @@ public class ItemViewHolder extends RecyclerView.ViewHolder {
 	private final ImageView icon;
 	private final ImageView secondIcon;
 	private final ProgressBar progressBar;
+	private final View divider;
 
 	public ItemViewHolder(@NonNull View itemView) {
 		super(itemView);
@@ -41,10 +42,12 @@ public ItemViewHolder(@NonNull View itemView) {
 		secondIcon = itemView.findViewById(R.id.second_icon);
 		description = itemView.findViewById(R.id.description);
 		progressBar = itemView.findViewById(R.id.progressBar);
+		divider = itemView.findViewById(R.id.bottom_divider);
 	}
 
-	public void bindView(SettingsItem item) {
+	public void bindView(SettingsItem item, boolean lastBackupItem) {
 		setupItemView(item);
+		AndroidUiHelper.updateVisibility(divider, !lastBackupItem);
 	}
 
 	protected void setupItemView(@NonNull SettingsItem item) {
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/status/WarningViewHolder.java b/OsmAnd/src/net/osmand/plus/backup/ui/status/WarningViewHolder.java
index 62596674237..d6a811b9cd5 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/status/WarningViewHolder.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/status/WarningViewHolder.java
@@ -25,15 +25,17 @@ public class WarningViewHolder extends RecyclerView.ViewHolder {
 	private final TextView title;
 	private final ImageView icon;
 	private final TextView description;
+	private final View container;
 
 	public WarningViewHolder(@NonNull View itemView) {
 		super(itemView);
 		title = itemView.findViewById(R.id.title);
 		icon = itemView.findViewById(R.id.icon);
 		description = itemView.findViewById(R.id.description);
+		container = itemView.findViewById(R.id.warning_container);
 	}
 
-	public void bindView(@NonNull BackupStatus status, @Nullable String error) {
+	public void bindView(@NonNull BackupStatus status, @Nullable String error, boolean hideBottomPadding) {
 		if (status.warningTitleRes != -1) {
 			title.setText(status.warningTitleRes);
 			description.setText(status.warningDescriptionRes);
@@ -42,10 +44,10 @@ public void bindView(@NonNull BackupStatus status, @Nullable String error) {
 			description.setText(error);
 		}
 		icon.setImageDrawable(getContentIcon(status.warningIconRes));
-		setupWarningRoundedBg(itemView.findViewById(R.id.warning_container));
+		setupWarningRoundedBg(hideBottomPadding);
 	}
 
-	private void setupWarningRoundedBg(@NonNull View view) {
+	private void setupWarningRoundedBg(boolean hideBottomPadding) {
 		Context context = itemView.getContext();
 		int activeColor = AndroidUtils.getColorFromAttr(context, R.attr.active_color_basic);
 		int selectedColor = UiUtilities.getColorWithAlpha(activeColor, 0.3f);
@@ -55,12 +57,13 @@ private void setupWarningRoundedBg(@NonNull View view) {
 		if (Build.VERSION.SDK_INT > Build.VERSION_CODES.LOLLIPOP) {
 			Drawable selectable = getPaintedIcon(R.drawable.ripple_rectangle_rounded, selectedColor);
 			Drawable[] layers = {bgDrawable, selectable};
-			AndroidUtils.setBackground(view, new LayerDrawable(layers));
+			AndroidUtils.setBackground(container, new LayerDrawable(layers));
 		} else {
-			AndroidUtils.setBackground(view, bgDrawable);
+			AndroidUtils.setBackground(container, bgDrawable);
 		}
-		LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) view.getLayoutParams();
-		params.setMargins(params.leftMargin, AndroidUtils.dpToPx(context, 6), params.rightMargin, params.bottomMargin);
+		int bottomMargin = hideBottomPadding ? 0 : context.getResources().getDimensionPixelSize(R.dimen.content_padding_half);
+		LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) container.getLayoutParams();
+		AndroidUtils.setMargins(params, params.leftMargin, params.topMargin, params.rightMargin, bottomMargin);
 	}
 
 	@Nullable
diff --git a/OsmAnd/src/net/osmand/plus/base/BasicProgressAsyncTask.java b/OsmAnd/src/net/osmand/plus/base/BasicProgressAsyncTask.java
index 1950da1fc95..9b5424ec27f 100644
--- a/OsmAnd/src/net/osmand/plus/base/BasicProgressAsyncTask.java
+++ b/OsmAnd/src/net/osmand/plus/base/BasicProgressAsyncTask.java
@@ -1,12 +1,13 @@
 package net.osmand.plus.base;
 
+import android.os.AsyncTask;
+import android.os.Handler;
+import android.os.Message;
+
 import net.osmand.IProgress;
 import net.osmand.plus.OsmAndConstants;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
-import android.os.AsyncTask;
-import android.os.Handler;
-import android.os.Message;
 
 public abstract class BasicProgressAsyncTask<Tag, Params, Progress, Result> extends AsyncTask<Params, Progress, Result> implements IProgress {
 	protected String taskName;
@@ -136,7 +137,7 @@ public Tag getTag() {
 	public void setGeneralProgress(String genProgress) {
 	}
 
-	private int normalizeProgress(int progress) {
+	public static int normalizeProgress(int progress) {
 		if (progress < 0) {
 			return 0;
 		} else if (progress <= 100) {
diff --git a/OsmAnd/src/net/osmand/plus/chooseplan/ChoosePlanFragment.java b/OsmAnd/src/net/osmand/plus/chooseplan/ChoosePlanFragment.java
index 0a8cc8f467d..3aa47e9dd2c 100644
--- a/OsmAnd/src/net/osmand/plus/chooseplan/ChoosePlanFragment.java
+++ b/OsmAnd/src/net/osmand/plus/chooseplan/ChoosePlanFragment.java
@@ -31,6 +31,8 @@
 import net.osmand.plus.Version;
 import net.osmand.plus.chooseplan.button.PriceButton;
 import net.osmand.plus.helpers.AndroidUiHelper;
+import net.osmand.plus.routepreparationmenu.cards.BaseCard;
+import net.osmand.plus.routepreparationmenu.cards.BaseCard.CardListener;
 
 import org.apache.commons.lang3.ObjectUtils;
 import org.apache.commons.logging.Log;
@@ -42,7 +44,7 @@
 import static net.osmand.plus.liveupdates.LiveUpdatesSettingsBottomSheet.getActiveColorId;
 import static net.osmand.plus.liveupdates.LiveUpdatesSettingsBottomSheet.getDefaultIconColorId;
 
-public class ChoosePlanFragment extends BasePurchaseDialogFragment {
+public class ChoosePlanFragment extends BasePurchaseDialogFragment implements CardListener {
 
 	public static final String TAG = ChoosePlanFragment.class.getSimpleName();
 	private static final Log log = PlatformUtil.getLog(ChoosePlanFragment.class);
@@ -165,7 +167,9 @@ private void createTroubleshootingCard() {
 		FragmentActivity activity = getActivity();
 		if (activity != null) {
 			FrameLayout container = mainView.findViewById(R.id.troubleshooting_card);
-			container.addView(new TroubleshootingCard(activity, purchaseHelper, true).build(activity));
+			TroubleshootingCard card = new TroubleshootingCard(activity, purchaseHelper, !Version.isGooglePlayEnabled());
+			card.setListener(this);
+			container.addView(card.build(activity));
 		}
 	}
 
@@ -219,25 +223,27 @@ private void updateContinueButtons() {
 		PriceButton<?>[] array = new PriceButton[priceButtons.size()];
 		priceButtons.toArray(array);
 
+		CharSequence price = array.length == 0 ? null : ObjectUtils.min(array).getPrice();
 		updateContinueButton(mainView.findViewById(R.id.button_continue_pro),
 				R.drawable.ic_action_osmand_pro_logo,
 				getString(R.string.osmand_pro),
-				ObjectUtils.min(array).getPrice(),
+				price,
 				v -> OsmAndProPlanFragment.showInstance(requireActivity()),
-				true);
+				Version.isGooglePlayEnabled());
 
 		priceButtons = MapsPlusPlanFragment.collectPriceButtons(app, purchaseHelper);
 		array = new PriceButton[priceButtons.size()];
 		priceButtons.toArray(array);
 
+		price = array.length == 0 ? null : ObjectUtils.min(array).getPrice();
 		boolean availableInMapsPlus = selectedFeature.isAvailableInMapsPlus();
 		int mapsPlusIconId = availableInMapsPlus ? R.drawable.ic_action_osmand_maps_plus : R.drawable.ic_action_osmand_maps_plus_desaturated;
 		updateContinueButton(mainView.findViewById(R.id.button_continue_maps_plus),
 				mapsPlusIconId,
 				getString(R.string.maps_plus),
-				ObjectUtils.min(array).getPrice(),
+				price,
 				v -> MapsPlusPlanFragment.showInstance(requireActivity()),
-				availableInMapsPlus);
+				availableInMapsPlus && Version.isGooglePlayEnabled());
 	}
 
 	private void updateContinueButton(View view, int iconId, String plan, CharSequence price, OnClickListener listener, boolean available) {
@@ -250,7 +256,7 @@ private void updateContinueButton(View view, int iconId, String plan, CharSequen
 
 		TextView tvDescription = view.findViewById(R.id.description);
 		String pricePattern = getString(R.string.from_with_param);
-		String description = String.format(pricePattern, price);
+		String description = price != null ? String.format(pricePattern, price) : "";
 		tvDescription.setText(description);
 		tvDescription.setTextColor(UiUtilities.getColorWithAlpha(colorNoAlpha, 0.75f));
 
@@ -264,7 +270,7 @@ private void updateContinueButton(View view, int iconId, String plan, CharSequen
 
 	public static void showInstance(@NonNull FragmentActivity activity, @NonNull OsmAndFeature selectedFeature) {
 		OsmandApplication app = (OsmandApplication) activity.getApplicationContext();
-		if (Version.isAmazon()) {
+		if (Version.isAmazon() && selectedFeature != OsmAndFeature.OSMAND_CLOUD) {
 			Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(Version.getUrlWithUtmRef(app, "net.osmand.plus")));
 			intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
 			if (AndroidUtils.isIntentSafe(app, intent)) {
@@ -279,4 +285,21 @@ public static void showInstance(@NonNull FragmentActivity activity, @NonNull Osm
 			}
 		}
 	}
+
+	@Override
+	public void onCardLayoutNeeded(@NonNull BaseCard card) {
+
+	}
+
+	@Override
+	public void onCardPressed(@NonNull BaseCard card) {
+		if (card instanceof TroubleshootingCard) {
+			dismiss();
+		}
+	}
+
+	@Override
+	public void onCardButtonPressed(@NonNull BaseCard card, int buttonIndex) {
+
+	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/chooseplan/TroubleshootingCard.java b/OsmAnd/src/net/osmand/plus/chooseplan/TroubleshootingCard.java
index 29a14caae7e..7337765f4cf 100644
--- a/OsmAnd/src/net/osmand/plus/chooseplan/TroubleshootingCard.java
+++ b/OsmAnd/src/net/osmand/plus/chooseplan/TroubleshootingCard.java
@@ -1,24 +1,21 @@
 package net.osmand.plus.chooseplan;
 
-import android.net.Uri;
 import android.view.View;
 
 import androidx.annotation.NonNull;
 import androidx.fragment.app.FragmentActivity;
 
 import net.osmand.plus.R;
+import net.osmand.plus.backup.ui.AuthorizeFragment;
 import net.osmand.plus.inapp.InAppPurchaseHelper;
-import net.osmand.plus.wikipedia.WikipediaDialogFragment;
 
 public class TroubleshootingCard extends BasePurchasingCard {
 
-	private static final String REDEEM_PROMO_CODE_URL = "https://support.google.com/googleplay/answer/3422659";
-
 	private final boolean showPromoCodeBtn;
 
 	public TroubleshootingCard(@NonNull FragmentActivity activity,
-	                           @NonNull InAppPurchaseHelper purchaseHelper,
-	                           boolean showPromoCodeBtn) {
+							   @NonNull InAppPurchaseHelper purchaseHelper,
+							   boolean showPromoCodeBtn) {
 		super(activity, purchaseHelper);
 		this.showPromoCodeBtn = showPromoCodeBtn;
 	}
@@ -37,8 +34,12 @@ protected void updateContent() {
 	protected void setupRedeemPromoCodeBtn() {
 		View redeemPromoCode = view.findViewById(R.id.redeem_promo_code);
 		redeemPromoCode.setVisibility(showPromoCodeBtn ? View.VISIBLE : View.GONE);
-		redeemPromoCode.setOnClickListener(v ->
-				WikipediaDialogFragment.showFullArticle(activity, Uri.parse(REDEEM_PROMO_CODE_URL), nightMode));
+		redeemPromoCode.setOnClickListener(v -> {
+			CardListener listener = getListener();
+			if (listener != null) {
+				listener.onCardPressed(this);
+			}
+			AuthorizeFragment.showInstance(activity.getSupportFragmentManager(), true);
+		});
 	}
-
 }
diff --git a/OsmAnd/src/net/osmand/plus/download/ui/UpdatesIndexFragment.java b/OsmAnd/src/net/osmand/plus/download/ui/UpdatesIndexFragment.java
index 58122d876fb..f23b793302f 100644
--- a/OsmAnd/src/net/osmand/plus/download/ui/UpdatesIndexFragment.java
+++ b/OsmAnd/src/net/osmand/plus/download/ui/UpdatesIndexFragment.java
@@ -48,6 +48,8 @@
 import net.osmand.plus.download.IndexItem;
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.inapp.InAppPurchaseHelper;
+import net.osmand.plus.inapp.InAppPurchaseHelper.InAppPurchaseListener;
+import net.osmand.plus.inapp.InAppPurchaseHelper.InAppPurchaseTaskType;
 import net.osmand.plus.liveupdates.LiveUpdatesClearBottomSheet.RefreshLiveUpdates;
 import net.osmand.plus.liveupdates.LiveUpdatesFragment;
 import net.osmand.plus.liveupdates.LiveUpdatesHelper.LiveUpdateListener;
@@ -63,7 +65,7 @@
 import static net.osmand.plus.liveupdates.LiveUpdatesFragment.showUpdateDialog;
 import static net.osmand.plus.liveupdates.LiveUpdatesFragment.updateCountEnabled;
 
-public class UpdatesIndexFragment extends OsmAndListFragment implements DownloadEvents, RefreshLiveUpdates, LiveUpdateListener {
+public class UpdatesIndexFragment extends OsmAndListFragment implements DownloadEvents, RefreshLiveUpdates, LiveUpdateListener, InAppPurchaseListener {
 	private static final int RELOAD_ID = 5;
 	private UpdateIndexAdapter listAdapter;
 	private String errorMessage;
@@ -286,6 +288,33 @@ public void onUpdateStates(Context context) {
 		}
 	}
 
+	@Override
+	public void onError(InAppPurchaseTaskType taskType, String error) {
+
+	}
+
+	@Override
+	public void onGetItems() {
+
+	}
+
+	@Override
+	public void onItemPurchased(String sku, boolean active) {
+		invalidateListView(getMyActivity());
+		updateUpdateAllButton();
+		startLoadLiveMapsAsyncTask(getMyApplication());
+	}
+
+	@Override
+	public void showProgress(InAppPurchaseTaskType taskType) {
+
+	}
+
+	@Override
+	public void dismissProgress(InAppPurchaseTaskType taskType) {
+
+	}
+
 	private class UpdateIndexAdapter extends ArrayAdapter<IndexItem> implements LocalIndexInfoAdapter {
 
 		static final int INDEX_ITEM = 0;
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
index ac5beba17fa..ffae4482818 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
@@ -612,6 +612,14 @@ protected void updateLastPreferencesEditTime(Object preferences, long time) {
 		settingsAPI.edit(preferences).putLong(LAST_PREFERENCES_EDIT_TIME, time).commit();
 	}
 
+	public int getSavedGlobalPrefsCount() {
+		return ((SharedPreferences) globalPreferences).getAll().size();
+	}
+
+	public int getSavedModePrefsCount(@NonNull ApplicationMode mode) {
+		return ((SharedPreferences) getProfilePreferences(mode)).getAll().size();
+	}
+
 	@SuppressWarnings("unchecked")
 	public CommonPreference<Boolean> registerBooleanPreference(String id, boolean defValue) {
 		if (registeredPreferences.containsKey(id)) {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/AvoidRoadsSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/AvoidRoadsSettingsItem.java
index 63ef8d81ad2..4cff4f8e1d3 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/AvoidRoadsSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/AvoidRoadsSettingsItem.java
@@ -26,6 +26,8 @@
 
 public class AvoidRoadsSettingsItem extends CollectionSettingsItem<AvoidRoadInfo> {
 
+	private static final int APPROXIMATE_AVOID_ROAD_SIZE_BYTES = 185;
+
 	private OsmandSettings settings;
 	private AvoidSpecificRoads specificRoads;
 
@@ -117,6 +119,11 @@ public AvoidRoadInfo renameItem(@NonNull AvoidRoadInfo item) {
 		return item;
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull AvoidRoadInfo item) {
+		return APPROXIMATE_AVOID_ROAD_SIZE_BYTES;
+	}
+
 	@Override
 	void readItemsFromJson(@NonNull JSONObject json) throws IllegalArgumentException {
 		try {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/CollectionSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/CollectionSettingsItem.java
index a492cfc3db9..abaa3429d0d 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/CollectionSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/CollectionSettingsItem.java
@@ -72,6 +72,15 @@ public List<T> getNewItems() {
 		return res;
 	}
 
+	@Override
+	public long getEstimatedSize() {
+		long size = 0;
+		for (T item : items) {
+			size += getEstimatedItemSize(item);
+		}
+		return size;
+	}
+
 	public boolean shouldShowDuplicates() {
 		return true;
 	}
@@ -85,4 +94,6 @@ public boolean shouldReadOnCollecting() {
 
 	@NonNull
 	public abstract T renameItem(@NonNull T item);
+
+	public abstract long getEstimatedItemSize(@NonNull T item);
 }
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/DownloadsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/DownloadsItem.java
index e58404a1126..500826ddc9e 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/DownloadsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/DownloadsItem.java
@@ -24,6 +24,8 @@
 
 public class DownloadsItem extends SettingsItem {
 
+	private static final int APPROXIMATE_DOWNLOAD_ITEM_SIZE_BYTES = 2048;
+
 	private List<WorldRegion> items;
 
 	public DownloadsItem(@NonNull OsmandApplication app, @NonNull JSONObject json) throws JSONException {
@@ -67,6 +69,11 @@ public long getLocalModifiedTime() {
 	public void setLocalModifiedTime(long lastModifiedTime) {
 	}
 
+	@Override
+	public long getEstimatedSize() {
+		return APPROXIMATE_DOWNLOAD_ITEM_SIZE_BYTES;
+	}
+
 	@Override
 	void readItemsFromJson(@NonNull JSONObject json) throws IllegalArgumentException {
 		try {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/FavoritesSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/FavoritesSettingsItem.java
index d60a1b466b1..d2cc09b6026 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/FavoritesSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/FavoritesSettingsItem.java
@@ -13,7 +13,6 @@
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.OsmandPlugin;
 import net.osmand.plus.R;
-import net.osmand.plus.osmedit.OsmEditingPlugin;
 import net.osmand.plus.parkingpoint.ParkingPositionPlugin;
 import net.osmand.plus.settings.backend.backup.SettingsHelper;
 import net.osmand.plus.settings.backend.backup.SettingsItemReader;
@@ -35,6 +34,8 @@
 
 public class FavoritesSettingsItem extends CollectionSettingsItem<FavoriteGroup> {
 
+	private static final int APPROXIMATE_FAVOURITE_SIZE_BYTES = 470;
+
 	private FavouritesDbHelper favoritesHelper;
 	private FavoriteGroup personalGroup;
 
@@ -74,7 +75,8 @@ public void setLocalModifiedTime(long lastModifiedTime) {
 		File favoritesFile = favoritesHelper.getExternalFile();
 		if (favoritesFile.exists()) {
 			favoritesFile.setLastModified(lastModifiedTime);
-		};
+		}
+		;
 	}
 
 	@NonNull
@@ -118,8 +120,7 @@ public void apply() {
 				if (!isPersonal) {
 					appliedItems.add(shouldReplace ? duplicate : renameItem(duplicate));
 				} else {
-					for (FavouritePoint item : duplicate.getPoints())
-					{
+					for (FavouritePoint item : duplicate.getPoints()) {
 						if (item.getSpecialPointType() == FavouritePoint.SpecialPointType.PARKING) {
 							ParkingPositionPlugin plugin = OsmandPlugin.getPlugin(ParkingPositionPlugin.class);
 							if (plugin != null) {
@@ -179,6 +180,11 @@ public FavoriteGroup renameItem(@NonNull FavoriteGroup item) {
 		}
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull FavoriteGroup item) {
+		return item.getPoints().size() * APPROXIMATE_FAVOURITE_SIZE_BYTES;
+	}
+
 	@Nullable
 	@Override
 	public SettingsItemReader<FavoritesSettingsItem> getReader() {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/FileSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/FileSettingsItem.java
index b4bc33eb53a..e620e703b55 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/FileSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/FileSettingsItem.java
@@ -6,6 +6,7 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
+import net.osmand.FileUtils;
 import net.osmand.IndexConstants;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
@@ -17,7 +18,6 @@
 import net.osmand.plus.settings.backend.backup.SettingsItemReader;
 import net.osmand.plus.settings.backend.backup.SettingsItemType;
 import net.osmand.plus.settings.backend.backup.SettingsItemWriter;
-import net.osmand.plus.settings.backend.backup.StreamSettingsItemReader;
 import net.osmand.plus.settings.backend.backup.StreamSettingsItemWriter;
 import net.osmand.util.Algorithms;
 
@@ -27,10 +27,6 @@
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.FileNotFoundException;
-import java.io.FileOutputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.OutputStream;
 
 public class FileSettingsItem extends StreamSettingsItem {
 
@@ -251,10 +247,16 @@ void writeToJson(@NonNull JSONObject json) throws JSONException {
 	public long getSize() {
 		if (size != 0) {
 			return size;
-		} else if (file != null && !file.isDirectory()) {
-			return file.length();
+		} else if (file != null) {
+			if (file.isDirectory()) {
+				long[] dirSize = new long[1];
+				FileUtils.getDirectorySize(file, dirSize);
+				size = dirSize[0];
+			} else {
+				size = file.length();
+			}
 		}
-		return 0;
+		return size;
 	}
 
 	public void setSize(long size) {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/GlobalSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/GlobalSettingsItem.java
index 3fd9efc8e33..3dd3b94569a 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/GlobalSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/GlobalSettingsItem.java
@@ -36,12 +36,17 @@ public SettingsItemType getType() {
 
 	@Override
 	public long getLocalModifiedTime() {
-		return app.getSettings().getLastGlobalPreferencesEditTime();
+		return getSettings().getLastGlobalPreferencesEditTime();
 	}
 
 	@Override
 	public void setLocalModifiedTime(long lastModifiedTime) {
-		app.getSettings().setLastGlobalPreferencesEditTime(lastModifiedTime);
+		getSettings().setLastGlobalPreferencesEditTime(lastModifiedTime);
+	}
+
+	@Override
+	public long getEstimatedSize() {
+		return getSettings().getSavedGlobalPrefsCount() * APPROXIMATE_PREFERENCE_SIZE_BYTES;
 	}
 
 	@NonNull
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/HistoryMarkersSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/HistoryMarkersSettingsItem.java
index 56aefe74176..5e19f7609de 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/HistoryMarkersSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/HistoryMarkersSettingsItem.java
@@ -32,6 +32,8 @@
 
 public class HistoryMarkersSettingsItem extends CollectionSettingsItem<MapMarker> {
 
+	private static final int APPROXIMATE_HISTORY_MARKER_SIZE_BYTES = 380;
+
 	private MapMarkersHelper markersHelper;
 
 	public HistoryMarkersSettingsItem(@NonNull OsmandApplication app, @NonNull List<MapMarker> items) {
@@ -136,6 +138,11 @@ public MapMarker renameItem(@NonNull MapMarker item) {
 		}
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull MapMarker item) {
+		return APPROXIMATE_HISTORY_MARKER_SIZE_BYTES;
+	}
+
 	public MapMarkersGroup getMarkersGroup() {
 		String name = app.getString(R.string.markers_history);
 		String groupId = ExportSettingsType.HISTORY_MARKERS.name();
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/ItinerarySettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/ItinerarySettingsItem.java
index 7139906bafc..4863beccd36 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/ItinerarySettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/ItinerarySettingsItem.java
@@ -33,6 +33,8 @@
 
 public class ItinerarySettingsItem extends CollectionSettingsItem<MapMarkersGroup> {
 
+	private static final int APPROXIMATE_ITINERARY_SIZE_BYTES = 285;
+
 	private MapMarkersHelper markersHelper;
 	private ItineraryDataHelper dataHelper;
 
@@ -127,6 +129,11 @@ public MapMarkersGroup renameItem(@NonNull MapMarkersGroup item) {
 		return item;
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull MapMarkersGroup item) {
+		return APPROXIMATE_ITINERARY_SIZE_BYTES;
+	}
+
 	@Nullable
 	@Override
 	public SettingsItemReader<ItinerarySettingsItem> getReader() {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/MapSourcesSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/MapSourcesSettingsItem.java
index 11ab013ac14..21aadf38b2a 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/MapSourcesSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/MapSourcesSettingsItem.java
@@ -27,6 +27,8 @@
 
 public class MapSourcesSettingsItem extends CollectionSettingsItem<ITileSource> {
 
+	private static final int APPROXIMATE_MAP_SOURCES_SIZE_BYTES = 450;
+
 	private List<String> existingItemsNames;
 
 	public MapSourcesSettingsItem(@NonNull OsmandApplication app, @NonNull List<ITileSource> items) {
@@ -122,6 +124,11 @@ public ITileSource renameItem(@NonNull ITileSource item) {
 		}
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull ITileSource item) {
+		return APPROXIMATE_MAP_SOURCES_SIZE_BYTES;
+	}
+
 	@Override
 	public boolean isDuplicate(@NonNull ITileSource item) {
 		for (String name : existingItemsNames) {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/MarkersSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/MarkersSettingsItem.java
index 6f36da69403..bd052ad6bfa 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/MarkersSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/MarkersSettingsItem.java
@@ -32,6 +32,8 @@
 
 public class MarkersSettingsItem extends CollectionSettingsItem<MapMarker> {
 
+	private static final int APPROXIMATE_MARKER_SIZE_BYTES = 240;
+
 	private MapMarkersHelper markersHelper;
 
 	public MarkersSettingsItem(@NonNull OsmandApplication app, @NonNull List<MapMarker> items) {
@@ -136,6 +138,11 @@ public MapMarker renameItem(@NonNull MapMarker item) {
 		}
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull MapMarker item) {
+		return APPROXIMATE_MARKER_SIZE_BYTES;
+	}
+
 	public MapMarkersGroup getMarkersGroup() {
 		String name = app.getString(R.string.map_markers);
 		String groupId = ExportSettingsType.ACTIVE_MARKERS.name();
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OnlineRoutingSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OnlineRoutingSettingsItem.java
index ed0e9ec9789..04b62c71e57 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OnlineRoutingSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OnlineRoutingSettingsItem.java
@@ -25,6 +25,8 @@
 
 public class OnlineRoutingSettingsItem extends CollectionSettingsItem<OnlineRoutingEngine> {
 
+	private static final int APPROXIMATE_ONLINE_ROUTING_SIZE_BYTES = 150;
+
 	private OnlineRoutingHelper helper;
 	private List<OnlineRoutingEngine> otherEngines;
 
@@ -121,6 +123,11 @@ public OnlineRoutingEngine renameItem(@NonNull OnlineRoutingEngine item) {
 		return renamedItem;
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull OnlineRoutingEngine item) {
+		return APPROXIMATE_ONLINE_ROUTING_SIZE_BYTES;
+	}
+
 	@Override
 	void readItemsFromJson(@NonNull JSONObject json) throws IllegalArgumentException {
 		try {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmEditsSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmEditsSettingsItem.java
index f1eb9d45fd3..38c58e43443 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmEditsSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmEditsSettingsItem.java
@@ -34,6 +34,8 @@
 
 public class OsmEditsSettingsItem extends CollectionSettingsItem<OpenstreetmapPoint> {
 
+	private static final int APPROXIMATE_OSM_EDIT_SIZE_BYTES = 500;
+
 	public static final String ID_KEY = "id";
 	public static final String NAME_KEY = "name";
 	public static final String LAT_KEY = "lat";
@@ -122,6 +124,11 @@ public OpenstreetmapPoint renameItem(@NonNull OpenstreetmapPoint item) {
 		return item;
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull OpenstreetmapPoint item) {
+		return APPROXIMATE_OSM_EDIT_SIZE_BYTES;
+	}
+
 	@NonNull
 	@Override
 	public String getName() {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmNotesSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmNotesSettingsItem.java
index f2de06ab889..aac140be355 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmNotesSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmNotesSettingsItem.java
@@ -26,6 +26,8 @@
 
 public class OsmNotesSettingsItem extends CollectionSettingsItem<OsmNotesPoint> {
 
+	private static final int APPROXIMATE_OSM_NOTE_SIZE_BYTES = 250;
+
 	public static final String TEXT_KEY = "text";
 	public static final String LAT_KEY = "lat";
 	public static final String LON_KEY = "lon";
@@ -115,6 +117,11 @@ public OsmNotesPoint renameItem(@NonNull OsmNotesPoint item) {
 		return item;
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull OsmNotesPoint item) {
+		return APPROXIMATE_OSM_NOTE_SIZE_BYTES;
+	}
+
 	@NonNull
 	@Override
 	public String getName() {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmandSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmandSettingsItem.java
index 51371d5723c..d34256b9ad2 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmandSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/OsmandSettingsItem.java
@@ -11,24 +11,21 @@
 
 public abstract class OsmandSettingsItem extends SettingsItem {
 
-	private final OsmandSettings settings;
+	protected static final int APPROXIMATE_PREFERENCE_SIZE_BYTES = 60;
 
 	protected OsmandSettingsItem(@NonNull OsmandSettings settings) {
 		super(settings.getContext());
-		this.settings = settings;
 	}
 
 	protected OsmandSettingsItem(@NonNull OsmandSettings settings, @Nullable OsmandSettingsItem baseItem) {
 		super(settings.getContext(), baseItem);
-		this.settings = settings;
 	}
 
 	protected OsmandSettingsItem(@NonNull SettingsItemType type, @NonNull OsmandSettings settings, @NonNull JSONObject json) throws JSONException {
 		super(settings.getContext(), json);
-		this.settings = settings;
 	}
 
 	public OsmandSettings getSettings() {
-		return settings;
+		return app.getSettings();
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/PluginSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/PluginSettingsItem.java
index 9a392cfcb50..d8b5954d96c 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/PluginSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/PluginSettingsItem.java
@@ -20,6 +20,8 @@
 
 public class PluginSettingsItem extends SettingsItem {
 
+	private static final int APPROXIMATE_PLUGIN_SIZE_BYTES = 1024;
+
 	private CustomOsmandPlugin plugin;
 	private List<SettingsItem> pluginDependentItems;
 
@@ -74,6 +76,11 @@ public long getLocalModifiedTime() {
 	public void setLocalModifiedTime(long lastModifiedTime) {
 	}
 
+	@Override
+	public long getEstimatedSize() {
+		return APPROXIMATE_PLUGIN_SIZE_BYTES;
+	}
+
 	@Override
 	public boolean exists() {
 		return OsmandPlugin.getPlugin(getPluginId()) != null;
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/PoiUiFiltersSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/PoiUiFiltersSettingsItem.java
index f66a4e3d183..5f4127ab030 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/PoiUiFiltersSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/PoiUiFiltersSettingsItem.java
@@ -32,6 +32,8 @@
 
 public class PoiUiFiltersSettingsItem extends CollectionSettingsItem<PoiUIFilter> {
 
+	private static final int APPROXIMATE_POI_UI_FILTER_SIZE_BYTES = 500;
+
 	public PoiUiFiltersSettingsItem(@NonNull OsmandApplication app, @NonNull List<PoiUIFilter> items) {
 		super(app, null, items);
 	}
@@ -108,6 +110,11 @@ public PoiUIFilter renameItem(@NonNull PoiUIFilter item) {
 		}
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull PoiUIFilter item) {
+		return APPROXIMATE_POI_UI_FILTER_SIZE_BYTES;
+	}
+
 	@NonNull
 	@Override
 	public String getName() {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/ProfileSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/ProfileSettingsItem.java
index 54c842cfd60..cfacbf593e5 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/ProfileSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/ProfileSettingsItem.java
@@ -73,12 +73,17 @@ public SettingsItemType getType() {
 
 	@Override
 	public long getLocalModifiedTime() {
-		return app.getSettings().getLastModePreferencesEditTime(appMode);
+		return getSettings().getLastModePreferencesEditTime(appMode);
 	}
 
 	@Override
 	public void setLocalModifiedTime(long lastModifiedTime) {
-		app.getSettings().setLastModePreferencesEditTime(appMode, lastModifiedTime);
+		getSettings().setLastModePreferencesEditTime(appMode, lastModifiedTime);
+	}
+
+	@Override
+	public long getEstimatedSize() {
+		return getSettings().getSavedModePrefsCount(appMode) * APPROXIMATE_PREFERENCE_SIZE_BYTES;
 	}
 
 	public ApplicationMode getAppMode() {
@@ -180,7 +185,7 @@ public void apply() {
 					.setIconColor(modeBean.iconColor)
 					.setLocationIcon(modeBean.locIcon)
 					.setNavigationIcon(modeBean.navIcon);
-			app.getSettings().copyPreferencesFromProfile(parent, builder.getApplicationMode());
+			getSettings().copyPreferencesFromProfile(parent, builder.getApplicationMode());
 			appMode = ApplicationMode.saveProfile(builder, app);
 		} else if (!shouldReplace && exists()) {
 			renameProfile();
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/QuickActionsSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/QuickActionsSettingsItem.java
index 1ca732a6b32..c42bfd17912 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/QuickActionsSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/QuickActionsSettingsItem.java
@@ -28,6 +28,8 @@
 
 public class QuickActionsSettingsItem extends CollectionSettingsItem<QuickAction> {
 
+	private static final int APPROXIMATE_QUICK_ACTION_SIZE_BYTES = 135;
+
 	private QuickActionRegistry actionRegistry;
 
 	public QuickActionsSettingsItem(@NonNull OsmandApplication app, @NonNull List<QuickAction> items) {
@@ -76,6 +78,11 @@ public QuickAction renameItem(@NonNull QuickAction item) {
 		return actionRegistry.generateUniqueName(item, app);
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull QuickAction item) {
+		return APPROXIMATE_QUICK_ACTION_SIZE_BYTES;
+	}
+
 	@Override
 	public void apply() {
 		List<QuickAction> newItems = getNewItems();
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SearchHistorySettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SearchHistorySettingsItem.java
index fdea0942b08..d1a52ec6bb7 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SearchHistorySettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SearchHistorySettingsItem.java
@@ -26,6 +26,8 @@
 
 public class SearchHistorySettingsItem extends CollectionSettingsItem<HistoryEntry> {
 
+	private static final int APPROXIMATE_SEARCH_HISTORY_SIZE_BYTES = 320;
+
 	private SearchHistoryHelper searchHistoryHelper;
 
 	public SearchHistorySettingsItem(@NonNull OsmandApplication app, @NonNull List<HistoryEntry> items) {
@@ -170,6 +172,11 @@ public HistoryEntry renameItem(@NonNull HistoryEntry item) {
 		return item;
 	}
 
+	@Override
+	public long getEstimatedItemSize(@NonNull HistoryEntry item) {
+		return APPROXIMATE_SEARCH_HISTORY_SIZE_BYTES;
+	}
+
 	@Nullable
 	@Override
 	public SettingsItemReader<? extends SettingsItem> getReader() {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SettingsItem.java
index 27fe4758868..0006fb21678 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SettingsItem.java
@@ -119,6 +119,8 @@ public void setLastModifiedTime(long lastModified) {
 
 	public abstract void setLocalModifiedTime(long lastModifiedTime);
 
+	public abstract long getEstimatedSize();
+
 	public boolean applyFileName(@NonNull String fileName) {
 		String n = getFileName();
 		return n != null && (n.endsWith(fileName) || fileName.startsWith(n + File.separator));
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/StreamSettingsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/StreamSettingsItem.java
index 0c1d89ad1bd..12a8766bbed 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/StreamSettingsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/StreamSettingsItem.java
@@ -48,6 +48,11 @@ public void setInputStream(@Nullable InputStream inputStream) {
 
 	public abstract long getSize();
 
+	@Override
+	public long getEstimatedSize() {
+		return getSize();
+	}
+
 	@NonNull
 	@Override
 	public String getName() {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SuggestedDownloadsItem.java b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SuggestedDownloadsItem.java
index e92df70f6e1..b72d8b8ee5b 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SuggestedDownloadsItem.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/backup/items/SuggestedDownloadsItem.java
@@ -5,7 +5,7 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
-import net.osmand.plus.CustomOsmandPlugin;
+import net.osmand.plus.CustomOsmandPlugin.SuggestedDownloadItem;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.settings.backend.backup.SettingsHelper;
@@ -23,7 +23,9 @@
 
 public class SuggestedDownloadsItem extends SettingsItem {
 
-	private List<CustomOsmandPlugin.SuggestedDownloadItem> items;
+	private static final int APPROXIMATE_SUGGESTED_DOWNLOAD_SIZE_BYTES = 120;
+
+	private List<SuggestedDownloadItem> items;
 
 	public SuggestedDownloadsItem(@NonNull OsmandApplication app, @NonNull JSONObject json) throws JSONException {
 		super(app, json);
@@ -53,7 +55,7 @@ public String getPublicName(@NonNull Context ctx) {
 		return ctx.getString(R.string.suggested_maps);
 	}
 
-	public List<CustomOsmandPlugin.SuggestedDownloadItem> getItems() {
+	public List<SuggestedDownloadItem> getItems() {
 		return items;
 	}
 
@@ -66,6 +68,11 @@ public long getLocalModifiedTime() {
 	public void setLocalModifiedTime(long lastModifiedTime) {
 	}
 
+	@Override
+	public long getEstimatedSize() {
+		return APPROXIMATE_SUGGESTED_DOWNLOAD_SIZE_BYTES;
+	}
+
 	@Override
 	void readItemsFromJson(@NonNull JSONObject json) throws IllegalArgumentException {
 		try {
@@ -86,7 +93,7 @@ void readItemsFromJson(@NonNull JSONObject json) throws IllegalArgumentException
 						names.add(namesArray.getString(j));
 					}
 				}
-				CustomOsmandPlugin.SuggestedDownloadItem suggestedDownload = new CustomOsmandPlugin.SuggestedDownloadItem(scopeId, searchType, names, limit);
+				SuggestedDownloadItem suggestedDownload = new SuggestedDownloadItem(scopeId, searchType, names, limit);
 				items.add(suggestedDownload);
 			}
 		} catch (JSONException e) {
@@ -101,7 +108,7 @@ JSONObject writeItemsToJson(@NonNull JSONObject json) {
 		JSONArray jsonArray = new JSONArray();
 		if (!items.isEmpty()) {
 			try {
-				for (CustomOsmandPlugin.SuggestedDownloadItem downloadItem : items) {
+				for (SuggestedDownloadItem downloadItem : items) {
 					JSONObject jsonObject = new JSONObject();
 					jsonObject.put("scope-id", downloadItem.getScopeId());
 					if (downloadItem.getLimit() != -1) {
