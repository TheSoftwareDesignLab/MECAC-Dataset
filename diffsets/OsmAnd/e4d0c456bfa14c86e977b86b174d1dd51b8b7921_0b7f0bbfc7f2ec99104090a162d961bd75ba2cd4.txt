diff --git a/OsmAnd/res/layout/average_speed_widget_settings_fragment.xml b/OsmAnd/res/layout/average_speed_widget_settings_fragment.xml
new file mode 100644
index 00000000000..e8a6ca81af1
--- /dev/null
+++ b/OsmAnd/res/layout/average_speed_widget_settings_fragment.xml
@@ -0,0 +1,141 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content"
+	android:orientation="vertical">
+
+	<net.osmand.plus.widgets.TextViewEx
+		style="@style/DescStyle"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginHorizontal="@dimen/content_padding"
+		android:layout_marginVertical="@dimen/content_padding_small"
+		android:text="@string/average_speed_time_interval_desc"
+		android:textColor="?android:textColorSecondary" />
+
+	<View
+		android:layout_width="match_parent"
+		android:layout_height="1dp"
+		android:background="?divider_color_basic" />
+
+	<LinearLayout
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginHorizontal="@dimen/content_padding"
+		android:layout_marginVertical="@dimen/content_padding_small"
+		android:orientation="horizontal">
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@+id/interval"
+			style="@style/TitleStyle.Medium"
+			android:layout_width="0dp"
+			android:layout_height="wrap_content"
+			android:layout_weight="1"
+			android:maxLines="1"
+			android:ellipsize="end"
+			android:textColor="?android:textColorPrimary"
+			tools:text="Interval: " />
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@+id/selected_interval"
+			style="@style/TitleStyle.Medium"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:layout_marginStart="@dimen/list_content_padding_large"
+			android:maxLines="1"
+			android:ellipsize="end"
+			android:textColor="?android:textColorPrimary"
+			tools:text="30 min" />
+
+	</LinearLayout>
+
+	<com.google.android.material.slider.Slider
+		android:id="@+id/interval_slider"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginHorizontal="@dimen/content_padding"
+		android:stepSize="1"
+		android:saveEnabled="false" />
+
+	<LinearLayout
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginStart="@dimen/content_padding"
+		android:layout_marginTop="@dimen/content_padding_small_half"
+		android:layout_marginEnd="@dimen/content_padding"
+		android:layout_marginBottom="@dimen/content_padding_small"
+		android:orientation="horizontal">
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@+id/min_interval"
+			style="@style/DescStyle"
+			android:layout_width="0dp"
+			android:layout_height="wrap_content"
+			android:layout_weight="1"
+			android:textColor="?android:textColorSecondary"
+			tools:text="3 sec" />
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@+id/max_interval"
+			style="@style/DescStyle"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:layout_marginStart="@dimen/list_content_padding_large"
+			android:textColor="?android:textColorSecondary"
+			tools:text="1 h" />
+
+	</LinearLayout>
+
+	<View
+		android:layout_width="match_parent"
+		android:layout_height="1dp"
+		android:layout_marginStart="@dimen/content_padding"
+		android:background="?divider_color_basic" />
+
+	<LinearLayout
+		android:id="@+id/skip_stops_container"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:orientation="horizontal"
+		android:paddingHorizontal="@dimen/content_padding"
+		android:paddingVertical="@dimen/content_padding_small">
+
+		<LinearLayout
+			android:layout_width="0dp"
+			android:layout_height="wrap_content"
+			android:layout_weight="1"
+			android:orientation="vertical">
+
+			<net.osmand.plus.widgets.TextViewEx
+				style="@style/TitleStyle"
+				android:layout_width="match_parent"
+				android:layout_height="wrap_content"
+				android:maxLines="1"
+				android:ellipsize="end"
+				android:text="@string/average_speed_skip_stops" />
+
+			<net.osmand.plus.widgets.TextViewEx
+				android:id="@+id/skip_stops_desc"
+				style="@style/DescStyle"
+				android:layout_width="match_parent"
+				android:layout_height="wrap_content"
+				android:textColor="?android:textColorSecondary"
+				tools:text="@string/average_speed_time_interval_desc" />
+
+		</LinearLayout>
+
+		<androidx.appcompat.widget.SwitchCompat
+			android:id="@+id/skip_stops_toggle"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:layout_marginStart="@dimen/list_content_padding_large"
+			android:background="@null"
+			android:clickable="false"
+			android:focusable="false"
+			android:focusableInTouchMode="false"
+			android:saveEnabled="false" />
+
+	</LinearLayout>
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index 4a9c8fd2370..f098436834c 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -11,6 +11,12 @@
 	Thx - Hardy
 -->
 
+    <string name="shared_string_minute_lowercase">min</string>
+    <string name="average_speed_skip_stops_desc">Speed less than %1$s will not be counted and affect the average speed.</string>
+    <string name="average_speed_skip_stops">Take into account stops</string>
+    <string name="average_speed_time_interval_desc">Specify the time interval for which the average speed will be measured.</string>
+    <string name="average_speed_widget_desc">Shows the average speed of the current ride.</string>
+    <string name="map_widget_average_speed">Average speed</string>
     <string name="shared_string_mode">Mode</string>
     <string name="time_to_navigation_point_widget_settings_desc">You can switch mode by taping on widget.</string>
     <string name="map_widget_time_to_destination">Time to destination</string>
diff --git a/OsmAnd/src/net/osmand/plus/AppInitializer.java b/OsmAnd/src/net/osmand/plus/AppInitializer.java
index c77dcbfc54c..afb57ae3997 100644
--- a/OsmAnd/src/net/osmand/plus/AppInitializer.java
+++ b/OsmAnd/src/net/osmand/plus/AppInitializer.java
@@ -81,6 +81,7 @@
 import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.views.OsmandMap;
 import net.osmand.plus.views.corenative.NativeCoreContext;
+import net.osmand.plus.views.mapwidgets.AverageSpeedComputer;
 import net.osmand.plus.voice.CommandPlayer;
 import net.osmand.plus.voice.CommandPlayerException;
 import net.osmand.plus.wikivoyage.data.TravelDbHelper;
@@ -455,6 +456,7 @@ public void onCreateApplication() {
 		app.launcherShortcutsHelper = startupInit(new LauncherShortcutsHelper(app), LauncherShortcutsHelper.class);
 		app.gpsFilterHelper = startupInit(new GpsFilterHelper(app), GpsFilterHelper.class);
 		app.downloadTilesHelper = startupInit(new DownloadTilesHelper(app), DownloadTilesHelper.class);
+		app.averageSpeedComputer = startupInit(new AverageSpeedComputer(app), AverageSpeedComputer.class);
 
 		initOpeningHoursParser();
 	}
diff --git a/OsmAnd/src/net/osmand/plus/OsmAndLocationProvider.java b/OsmAnd/src/net/osmand/plus/OsmAndLocationProvider.java
index fd86981ec05..640d10951de 100644
--- a/OsmAnd/src/net/osmand/plus/OsmAndLocationProvider.java
+++ b/OsmAnd/src/net/osmand/plus/OsmAndLocationProvider.java
@@ -776,6 +776,7 @@ public void setLocationFromService(net.osmand.Location location) {
 
 		RoutingHelper routingHelper = app.getRoutingHelper();
 		app.getSavingTrackHelper().updateLocation(location, heading);
+		app.getAverageSpeedComputer().updateLocation(location);
 		OsmandPlugin.updateLocationPlugins(location);
 		routingHelper.updateLocation(location);
 		app.getWaypointHelper().locationChanged(location);
@@ -818,6 +819,7 @@ private void setLocation(net.osmand.Location location) {
 		// 1. Logging services
 		if (location != null) {
 			app.getSavingTrackHelper().updateLocation(location, heading);
+			app.getAverageSpeedComputer().updateLocation(location);
 			OsmandPlugin.updateLocationPlugins(location);
 		}
 
diff --git a/OsmAnd/src/net/osmand/plus/OsmandApplication.java b/OsmAnd/src/net/osmand/plus/OsmandApplication.java
index 3b0dcbf9777..2a95f34384d 100644
--- a/OsmAnd/src/net/osmand/plus/OsmandApplication.java
+++ b/OsmAnd/src/net/osmand/plus/OsmandApplication.java
@@ -103,6 +103,7 @@
 import net.osmand.plus.utils.FileUtils;
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.views.OsmandMap;
+import net.osmand.plus.views.mapwidgets.AverageSpeedComputer;
 import net.osmand.plus.voice.CommandPlayer;
 import net.osmand.plus.wikivoyage.data.TravelHelper;
 import net.osmand.router.GeneralRouter;
@@ -197,6 +198,7 @@ public class OsmandApplication extends MultiDexApplication {
 	LauncherShortcutsHelper launcherShortcutsHelper;
 	GpsFilterHelper gpsFilterHelper;
 	DownloadTilesHelper downloadTilesHelper;
+	AverageSpeedComputer averageSpeedComputer;
 
 	private final Map<String, Builder> customRoutingConfigs = new ConcurrentHashMap<>();
 	private File externalStorageDirectory;
@@ -555,6 +557,11 @@ public DownloadTilesHelper getDownloadTilesHelper() {
 		return downloadTilesHelper;
 	}
 
+	@NonNull
+	public AverageSpeedComputer getAverageSpeedComputer() {
+		return averageSpeedComputer;
+	}
+
 	public CommandPlayer getPlayer() {
 		return player;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/ApplicationMode.java b/OsmAnd/src/net/osmand/plus/settings/backend/ApplicationMode.java
index 7eefea61381..f8363f3754d 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/ApplicationMode.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/ApplicationMode.java
@@ -32,6 +32,7 @@
 import androidx.core.content.ContextCompat;
 
 import static net.osmand.plus.views.mapwidgets.WidgetParams.ALTITUDE;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.AVERAGE_SPEED;
 import static net.osmand.plus.views.mapwidgets.WidgetParams.BATTERY;
 import static net.osmand.plus.views.mapwidgets.WidgetParams.CURRENT_SPEED;
 import static net.osmand.plus.views.mapwidgets.WidgetParams.CURRENT_TIME;
@@ -227,6 +228,7 @@ private static void initRegVisibility() {
 		regWidgetAvailability(TIME_TO_DESTINATION.id, all);
 		regWidgetAvailability(CURRENT_SPEED.id, all);
 		regWidgetAvailability(MAX_SPEED.id, all);
+		regWidgetAvailability(AVERAGE_SPEED.id, all);
 		regWidgetAvailability(ALTITUDE.id, all);
 
 		// all = null everything
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
index e7c84027b2a..c6e33d72078 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
@@ -77,6 +77,7 @@
 import net.osmand.plus.settings.enums.TracksSortByMode;
 import net.osmand.plus.utils.FileUtils;
 import net.osmand.plus.views.layers.RadiusRulerControlLayer.RadiusRulerMode;
+import net.osmand.plus.views.mapwidgets.AverageSpeedComputer;
 import net.osmand.plus.views.mapwidgets.WidgetsPanel;
 import net.osmand.plus.voice.CommandPlayer;
 import net.osmand.plus.wikipedia.WikiArticleShowImages;
@@ -1506,6 +1507,9 @@ protected boolean setValue(Object prefs, Boolean val) {
 
 	public final OsmandPreference<Long> LAST_UPDATES_CARD_REFRESH = new LongPreference(this, "last_updates_card_refresh", 0).makeGlobal();
 
+	public final OsmandPreference<Long> AVERAGE_SPEED_MEASURED_INTERVAL_MILLIS = new LongPreference(this, "average_speed_measured_interval_millis", AverageSpeedComputer.DEFAULT_INTERVAL_MILLIS).makeProfile().cache();
+	public final OsmandPreference<Boolean> AVERAGE_SPEED_SKIP_STOPS = new BooleanPreference(this, "average_speed_skip_stops", true).makeProfile().cache();
+
 	public final CommonPreference<Integer> CURRENT_TRACK_COLOR = new IntPreference(this, "current_track_color", 0).makeGlobal().makeShared().cache();
 	public final CommonPreference<ColoringType> CURRENT_TRACK_COLORING_TYPE = new EnumStringPreference<>(this,
 			"current_track_coloring_type", ColoringType.TRACK_SOLID,
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
index 885d01e4e9c..0f1c867e713 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
@@ -28,6 +28,7 @@
 import net.osmand.plus.views.mapwidgets.WidgetsPanel;
 import net.osmand.plus.views.mapwidgets.widgets.AlarmWidget;
 import net.osmand.plus.views.mapwidgets.widgets.AltitudeWidget;
+import net.osmand.plus.views.mapwidgets.widgets.AverageSpeedWidget;
 import net.osmand.plus.views.mapwidgets.widgets.BatteryWidget;
 import net.osmand.plus.views.mapwidgets.widgets.BearingWidget;
 import net.osmand.plus.views.mapwidgets.widgets.BearingWidget.BearingType;
@@ -60,6 +61,7 @@
 import androidx.core.content.ContextCompat;
 
 import static net.osmand.plus.views.mapwidgets.WidgetParams.ALTITUDE;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.AVERAGE_SPEED;
 import static net.osmand.plus.views.mapwidgets.WidgetParams.BATTERY;
 import static net.osmand.plus.views.mapwidgets.WidgetParams.COORDINATES;
 import static net.osmand.plus.views.mapwidgets.WidgetParams.CURRENT_SPEED;
@@ -302,6 +304,9 @@ private void registerRightWidgets(@NonNull MapActivity mapActivity) {
 		MapWidget currentSpeed = new CurrentSpeedWidget(mapActivity);
 		registerWidget(CURRENT_SPEED, currentSpeed);
 
+		MapWidget averageSpeed = new AverageSpeedWidget(mapActivity);
+		registerWidget(AVERAGE_SPEED, averageSpeed);
+
 		MapWidget maxSpeed = new MaxSpeedWidget(mapActivity);
 		registerWidget(MAX_SPEED, maxSpeed);
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/AverageSpeedComputer.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/AverageSpeedComputer.java
new file mode 100644
index 00000000000..d5e16d0090f
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/AverageSpeedComputer.java
@@ -0,0 +1,247 @@
+package net.osmand.plus.views.mapwidgets;
+
+import net.osmand.Location;
+import net.osmand.data.LatLon;
+import net.osmand.plus.OsmAndLocationProvider;
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.settings.backend.ApplicationMode;
+import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.plus.views.mapwidgets.widgets.AverageSpeedWidget;
+import net.osmand.util.MapUtils;
+
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.Collections;
+import java.util.List;
+import java.util.Set;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import static net.osmand.plus.utils.OsmAndFormatter.METERS_IN_KILOMETER;
+import static net.osmand.plus.utils.OsmAndFormatter.METERS_IN_ONE_MILE;
+import static net.osmand.plus.utils.OsmAndFormatter.METERS_IN_ONE_NAUTICALMILE;
+
+public class AverageSpeedComputer {
+
+	private static final long ADD_POINT_INTERVAL_MILLIS = 1000;
+	private static final long MISSING_POINT_TIME_THRESHOLD = 5000;
+
+	public static final List<Long> MEASURED_INTERVALS;
+	public static final long DEFAULT_INTERVAL_MILLIS = 30 * 60 * 1000L;
+
+	static {
+		List<Long> modifiableIntervals = new ArrayList<>();
+		modifiableIntervals.add(15 * 1000L);
+		modifiableIntervals.add(30 * 1000L);
+		modifiableIntervals.add(45 * 1000L);
+		for (int i = 1; i <= 60; i++) {
+			modifiableIntervals.add(i * 60 * 1000L);
+		}
+		MEASURED_INTERVALS = Collections.unmodifiableList(modifiableIntervals);
+	}
+
+	private final OsmandApplication app;
+	private final OsmandSettings settings;
+
+	private final SegmentsList segmentsList;
+
+	private LatLon previousLatLon = null;
+	private long previousTime = 0;
+	private boolean previousPointLowSpeed = false;
+
+	public AverageSpeedComputer(@NonNull OsmandApplication app) {
+		this.app = app;
+		this.settings = app.getSettings();
+		this.segmentsList = new SegmentsList();
+	}
+
+	public void updateLocation(@Nullable Location location) {
+		long time = System.currentTimeMillis();
+
+		boolean recordPaused = previousTime > 0 && time - previousTime > MISSING_POINT_TIME_THRESHOLD;
+		if (recordPaused) {
+			segmentsList.clear();
+			previousLatLon = null;
+			previousTime = 0;
+			previousPointLowSpeed = false;
+		}
+
+		boolean save = location != null
+				&& isEnabled()
+				&& OsmAndLocationProvider.isNotSimulatedLocation(location)
+				&& time - previousTime >= ADD_POINT_INTERVAL_MILLIS;
+		if (save) {
+			saveLocation(location, time);
+		}
+	}
+
+	private boolean isEnabled() {
+		MapWidgetRegistry widgetRegistry = app.getOsmandMap().getMapLayers().getMapWidgetRegistry();
+		ApplicationMode appMode = settings.getApplicationMode();
+		int filterModes = MapWidgetRegistry.AVAILABLE_MODE | MapWidgetRegistry.ENABLED_MODE;
+		Set<MapWidgetInfo> sideWidgets = widgetRegistry.getWidgetsForPanel(appMode, filterModes, WidgetsPanel.getSidePanels());
+
+		for (MapWidgetInfo widgetInfo : sideWidgets) {
+			if (widgetInfo.widget instanceof AverageSpeedWidget) {
+				return true;
+			}
+		}
+
+		return false;
+	}
+
+	private void saveLocation(@NonNull Location location, long time) {
+		LatLon latLon = new LatLon(location.getLatitude(), location.getLongitude());
+		boolean lowSpeed = !location.hasSpeed() || location.getSpeed() < getSpeedToSkipInMetersPerSecond();
+
+		if (previousLatLon != null && previousTime > 0) {
+			double distance = MapUtils.getDistance(previousLatLon, latLon);
+			segmentsList.addSegment(new Segment(distance, previousTime, time, previousPointLowSpeed || lowSpeed));
+		}
+
+		previousLatLon = latLon;
+		previousTime = time;
+		previousPointLowSpeed = lowSpeed;
+	}
+
+	private float getSpeedToSkipInMetersPerSecond() {
+		SpeedConstants speedConstant = settings.SPEED_SYSTEM.get();
+		switch (speedConstant) {
+			case METERS_PER_SECOND:
+				return 1;
+			case KILOMETERS_PER_HOUR:
+			case MINUTES_PER_KILOMETER:
+				return 1 / 3.6f;
+			case MILES_PER_HOUR:
+			case MINUTES_PER_MILE:
+				return METERS_IN_ONE_MILE / (3.6f * METERS_IN_KILOMETER);
+			case NAUTICALMILES_PER_HOUR:
+				return METERS_IN_ONE_NAUTICALMILE / (3.6f * METERS_IN_KILOMETER);
+			default:
+				throw new IllegalStateException("Unsupported speed system");
+		}
+	}
+
+	/**
+	 * @return average speed in meters/second or {@link Float#NaN} if average speed cannot be calculated
+	 */
+	public float getAverageSpeed() {
+		long measuredInterval = settings.AVERAGE_SPEED_MEASURED_INTERVAL_MILLIS.get();
+		long intervalStart = System.currentTimeMillis() - measuredInterval;
+		List<Segment> segments = segmentsList.getSegments(intervalStart, MISSING_POINT_TIME_THRESHOLD);
+
+		boolean skipLowSpeed = settings.AVERAGE_SPEED_SKIP_STOPS.get();
+		double totalDistance = 0;
+		double totalTimeMillis = 0;
+
+		for (Segment segment : segments) {
+			if (!segment.lowSpeed || !skipLowSpeed) {
+				totalDistance += segment.distance;
+				totalTimeMillis += segment.endTime - segment.startTime;
+			}
+		}
+
+		return totalTimeMillis == 0 ? Float.NaN : (float) (totalDistance / totalTimeMillis * 1000);
+	}
+
+	public static int getConvertedSpeedToSkip(@NonNull SpeedConstants speedSystem) {
+		switch (speedSystem) {
+			case METERS_PER_SECOND:
+			case KILOMETERS_PER_HOUR:
+			case MILES_PER_HOUR:
+			case NAUTICALMILES_PER_HOUR:
+				return 1;
+			case MINUTES_PER_KILOMETER:
+			case MINUTES_PER_MILE:
+				return 60;
+			default:
+				throw new IllegalStateException("Unsupported speed system");
+		}
+	}
+
+	private static class SegmentsList {
+
+		private final Segment[] segments;
+
+		private int tailIndex = 0;
+		private int headIndex = 0;
+
+		public SegmentsList() {
+			int size = (int) (MEASURED_INTERVALS.get(MEASURED_INTERVALS.size() - 1) / ADD_POINT_INTERVAL_MILLIS) + 1;
+			segments = new Segment[size];
+		}
+
+		@NonNull
+		public List<Segment> getSegments(long fromTimeInclusive, long allowedStartTimeGap) {
+			List<Segment> filteredSegments = new ArrayList<>();
+			for (int i = tailIndex; i != headIndex; i = nextIndex(i)) {
+				Segment segment = segments[i];
+				if (segment == null || segment.startTime < fromTimeInclusive) {
+					continue;
+				}
+
+				boolean firstSegment = filteredSegments.size() == 0;
+				boolean hugeGap = fromTimeInclusive + allowedStartTimeGap < segment.startTime;
+				if (firstSegment && hugeGap) {
+					return Collections.emptyList();
+				}
+
+				filteredSegments.add(segment);
+			}
+			return filteredSegments;
+		}
+
+		public void removeSegments(long toTimeExclusive) {
+			for (int i = tailIndex; i != headIndex; i = nextIndex(i)) {
+				Segment segment = segments[i];
+				if (segment != null && segment.startTime < toTimeExclusive) {
+					deleteFromTail();
+				}
+			}
+		}
+
+		public void addSegment(@NonNull Segment segment) {
+			cleanUpIfOverflowed();
+			headIndex = nextIndex(headIndex);
+			segments[headIndex] = segment;
+		}
+
+		private void cleanUpIfOverflowed() {
+			if (nextIndex(headIndex) == tailIndex) {
+				deleteFromTail();
+			}
+		}
+
+		private void deleteFromTail() {
+			segments[tailIndex] = null;
+			tailIndex = nextIndex(tailIndex);
+		}
+
+		public void clear() {
+			Arrays.fill(segments, null);
+			tailIndex = 0;
+			headIndex = 0;
+		}
+
+		private int nextIndex(int index) {
+			return (index + 1) % segments.length;
+		}
+	}
+
+	private static class Segment {
+
+		public final double distance;
+		public final long startTime;
+		public final long endTime;
+		public final boolean lowSpeed;
+
+		public Segment(double distance, long startTime, long endTime, boolean lowSpeed) {
+			this.distance = distance;
+			this.startTime = startTime;
+			this.endTime = endTime;
+			this.lowSpeed = lowSpeed;
+		}
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
index 8fd4bf6aed6..5945827b71f 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
@@ -7,6 +7,7 @@
 import net.osmand.plus.plugins.mapillary.MapillaryPlugin;
 import net.osmand.plus.plugins.parking.ParkingPositionPlugin;
 import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.views.mapwidgets.configure.settings.AverageSpeedWidgetSettingFragment;
 import net.osmand.plus.views.mapwidgets.configure.settings.ElevationProfileWidgetSettingsFragment;
 import net.osmand.plus.views.mapwidgets.configure.settings.MapMarkersBarWidgetSettingFragment;
 import net.osmand.plus.views.mapwidgets.configure.settings.RadiusRulerWidgetSettingsFragment;
@@ -47,6 +48,7 @@ public enum WidgetParams {
 	MAGNETIC_BEARING("magnetic_bearing", R.string.map_widget_magnetic_bearing, R.string.magnetic_bearing_widget_desc, R.drawable.widget_bearing_day, R.drawable.widget_bearing_night, 0, WidgetGroup.BEARING, RIGHT),
 	TRUE_BEARING("true_bearing", R.string.map_widget_true_bearing, 0, R.drawable.widget_true_bearing_day, R.drawable.widget_true_bearing_night, 0, WidgetGroup.BEARING, RIGHT),
 	CURRENT_SPEED("speed", R.string.map_widget_current_speed, R.string.current_speed_widget_desc, R.drawable.widget_speed_day, R.drawable.widget_speed_night, R.string.docs_widget_current_speed, null, RIGHT),
+	AVERAGE_SPEED("average_speed", R.string.map_widget_average_speed, R.string.average_speed_widget_desc, R.drawable.widget_average_speed_day, R.drawable.widget_average_speed_night, 0, null, RIGHT),
 	MAX_SPEED("max_speed", R.string.map_widget_max_speed, R.string.max_speed_widget_desc, R.drawable.widget_max_speed_day, R.drawable.widget_max_speed_night, R.string.docs_widget_max_speed, null, RIGHT),
 	ALTITUDE("altitude", R.string.map_widget_altitude, R.string.altitude_widget_desc, R.drawable.widget_altitude_day, R.drawable.widget_altitude_night, R.string.docs_widget_altitude, null, RIGHT),
 	GPS_INFO("gps_info", R.string.map_widget_gps_info, R.string.gps_info_widget_desc, R.drawable.widget_gps_info_day, R.drawable.widget_gps_info_night, R.string.docs_widget_gps_info, null, RIGHT),
@@ -172,6 +174,8 @@ public WidgetSettingsBaseFragment getSettingsFragment() {
 			return new TimeToIntermediateSettingsFragment();
 		} else if (this == TIME_TO_DESTINATION) {
 			return new TimeToDestinationSettingsFragment();
+		} else if (this == AVERAGE_SPEED) {
+			return new AverageSpeedWidgetSettingFragment();
 		}
 		return null;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsPanel.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsPanel.java
index 07a18a44a7d..aefd6323fe8 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsPanel.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsPanel.java
@@ -194,4 +194,9 @@ public WidgetsPanel getSharedPanel() {
 		}
 		return null;
 	}
+
+	@NonNull
+	public static WidgetsPanel[] getSidePanels() {
+		return new WidgetsPanel[] {LEFT, RIGHT};
+	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java
new file mode 100644
index 00000000000..1774ef641be
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java
@@ -0,0 +1,155 @@
+package net.osmand.plus.views.mapwidgets.configure.settings;
+
+import android.os.Bundle;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.CompoundButton;
+import android.widget.TextView;
+
+import com.google.android.material.slider.Slider;
+
+import net.osmand.plus.R;
+import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.plus.utils.ColorUtilities;
+import net.osmand.plus.utils.UiUtilities;
+import net.osmand.plus.views.mapwidgets.AverageSpeedComputer;
+import net.osmand.plus.views.mapwidgets.WidgetParams;
+
+import java.util.ArrayList;
+import java.util.LinkedHashMap;
+import java.util.List;
+import java.util.Map;
+import java.util.Map.Entry;
+
+import androidx.annotation.NonNull;
+
+public class AverageSpeedWidgetSettingFragment extends WidgetSettingsBaseFragment {
+
+	private static final String KEY_TIME_INTERVAL = "time_interval";
+	private static final String KEY_SKIP_STOPS = "skip_stops";
+
+	private long selectedIntervalMillis;
+	private boolean skipStops;
+
+	@NonNull
+	@Override
+	public WidgetParams getWidget() {
+		return WidgetParams.AVERAGE_SPEED;
+	}
+
+	@Override
+	protected void initParams(@NonNull Bundle bundle) {
+		super.initParams(bundle);
+
+		long defaultInterval = settings.AVERAGE_SPEED_MEASURED_INTERVAL_MILLIS.getModeValue(appMode);
+		boolean defaultSkipStops = settings.AVERAGE_SPEED_SKIP_STOPS.getModeValue(appMode);
+
+		selectedIntervalMillis = bundle.getLong(KEY_TIME_INTERVAL, defaultInterval);
+		skipStops = bundle.getBoolean(KEY_SKIP_STOPS, defaultSkipStops);
+	}
+
+	@Override
+	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+		themedInflater.inflate(R.layout.average_speed_widget_settings_fragment, container);
+
+		setupIntervalsSlider();
+		setupMinMaxIntervals();
+		setupSkipStopsSetting();
+	}
+
+	private void setupIntervalsSlider() {
+		TextView interval = view.findViewById(R.id.interval);
+		TextView selectedIntervalText = view.findViewById(R.id.selected_interval);
+		Slider slider = view.findViewById(R.id.interval_slider);
+
+		Map<Long, String> intervals = getAvailableIntervals();
+		List<Entry<Long, String>> intervalsList = new ArrayList<>(intervals.entrySet());
+		int initialIntervalIndex = getInitialIntervalIndex();
+
+		slider.setValueFrom(0);
+		slider.setValueTo(intervals.size() - 1);
+		slider.setValue(initialIntervalIndex);
+		slider.clearOnChangeListeners();
+		slider.addOnChangeListener((slider1, intervalIndex, fromUser) -> {
+			Entry<Long, String> newInterval = intervalsList.get((int) intervalIndex);
+			selectedIntervalMillis = newInterval.getKey();
+			selectedIntervalText.setText(newInterval.getValue());
+		});
+		UiUtilities.setupSlider(slider, nightMode, ColorUtilities.getActiveColor(app, nightMode), true);
+
+		interval.setText(getString(R.string.ltr_or_rtl_combine_via_colon, getString(R.string.shared_string_interval), ""));
+		selectedIntervalText.setText(intervalsList.get(initialIntervalIndex).getValue());
+	}
+
+	private int getInitialIntervalIndex() {
+		List<Long> intervals = new ArrayList<>(getAvailableIntervals().keySet());
+		for (int i = 0; i < intervals.size(); i++) {
+			long interval = intervals.get(i);
+			if (selectedIntervalMillis == interval) {
+				return i;
+			}
+		}
+
+		return 0;
+	}
+
+	private void setupMinMaxIntervals() {
+		List<String> intervals = new ArrayList<>(getAvailableIntervals().values());
+		String minIntervalValue = intervals.get(0);
+		String maxIntervalValue = intervals.get(intervals.size() - 1);
+
+		TextView minInterval = view.findViewById(R.id.min_interval);
+		TextView maxInterval = view.findViewById(R.id.max_interval);
+
+		minInterval.setText(minIntervalValue);
+		maxInterval.setText(maxIntervalValue);
+	}
+
+	@NonNull
+	private Map<Long, String> getAvailableIntervals() {
+		Map<Long, String> intervals = new LinkedHashMap<>();
+		for (long interval : AverageSpeedComputer.MEASURED_INTERVALS) {
+			boolean seconds = interval < 60 * 1000;
+			String timeInterval = seconds
+					? String.valueOf(interval / 1000)
+					: String.valueOf(interval / 1000 / 60);
+			String timeUnit = interval < 60 * 1000
+					? getString(R.string.shared_string_sec)
+					: getString(R.string.shared_string_minute_lowercase);
+			intervals.put(interval, getString(R.string.ltr_or_rtl_combine_via_space, timeInterval, timeUnit));
+		}
+		return intervals;
+	}
+
+	private void setupSkipStopsSetting() {
+		View skipStopsContainer = view.findViewById(R.id.skip_stops_container);
+		TextView skipStopsDesc = view.findViewById(R.id.skip_stops_desc);
+		CompoundButton skipStopsToggle = view.findViewById(R.id.skip_stops_toggle);
+
+		SpeedConstants speedSystem = settings.SPEED_SYSTEM.getModeValue(appMode);
+		String speedToSkip = String.valueOf(AverageSpeedComputer.getConvertedSpeedToSkip(speedSystem));
+		String speedUnit = speedSystem.toShortString(app);
+		String formattedSpeedToSkip = getString(R.string.ltr_or_rtl_combine_via_space, speedToSkip, speedUnit);
+		skipStopsDesc.setText(getString(R.string.average_speed_skip_stops_desc, formattedSpeedToSkip));
+
+		skipStopsToggle.setChecked(skipStops);
+		skipStopsToggle.setOnCheckedChangeListener((buttonView, isChecked) -> skipStops = isChecked);
+
+		skipStopsContainer.setOnClickListener(v -> skipStopsToggle.setChecked(!skipStopsToggle.isChecked()));
+		skipStopsContainer.setBackground(getPressedStateDrawable());
+	}
+
+	@Override
+	public void onSaveInstanceState(@NonNull Bundle outState) {
+		super.onSaveInstanceState(outState);
+		outState.putLong(KEY_TIME_INTERVAL, selectedIntervalMillis);
+		outState.putBoolean(KEY_SKIP_STOPS, skipStops);
+	}
+
+	@Override
+	protected void applySettings() {
+		settings.AVERAGE_SPEED_MEASURED_INTERVAL_MILLIS.setModeValue(appMode, selectedIntervalMillis);
+		settings.AVERAGE_SPEED_SKIP_STOPS.setModeValue(appMode, skipStops);
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AverageSpeedWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AverageSpeedWidget.java
new file mode 100644
index 00000000000..76ff8599598
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AverageSpeedWidget.java
@@ -0,0 +1,51 @@
+package net.osmand.plus.views.mapwidgets.widgets;
+
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.utils.OsmAndFormatter;
+import net.osmand.plus.utils.OsmAndFormatter.FormattedValue;
+import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.AverageSpeedComputer;
+import net.osmand.plus.views.mapwidgets.WidgetParams;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+public class AverageSpeedWidget extends TextInfoWidget {
+
+	private static final int UPDATE_INTERVAL_MILLIS = 1000;
+	private static final String DASH = "â€”";
+
+	private final AverageSpeedComputer averageSpeedComputer;
+
+	private long lastUpdateTime = 0;
+
+	public AverageSpeedWidget(@NonNull MapActivity mapActivity) {
+		super(mapActivity);
+		averageSpeedComputer = app.getAverageSpeedComputer();
+		setIcons(WidgetParams.AVERAGE_SPEED);
+	}
+
+	@Override
+	public void updateInfo(@Nullable DrawSettings drawSettings) {
+		long time = System.currentTimeMillis();
+		if (isUpdateNeeded() || time - lastUpdateTime > UPDATE_INTERVAL_MILLIS) {
+			lastUpdateTime = time;
+			updateAverageSpeed();
+		}
+	}
+
+	private void updateAverageSpeed() {
+		float averageSpeed = averageSpeedComputer.getAverageSpeed();
+		if (Float.isNaN(averageSpeed)) {
+			setText(DASH, null);
+		} else {
+			FormattedValue formattedAverageSpeed = OsmAndFormatter.getFormattedSpeedValue(averageSpeed, app);
+			setText(formattedAverageSpeed.value, formattedAverageSpeed.unit);
+		}
+	}
+
+	@Override
+	public boolean isMetricSystemDepended() {
+		return true;
+	}
+}
\ No newline at end of file
