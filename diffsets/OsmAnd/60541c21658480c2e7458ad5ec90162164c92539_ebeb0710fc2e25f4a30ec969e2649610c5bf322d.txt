diff --git a/OsmAnd/res/layout/bottom_sheet_item_with_descr_and_switch_56dp.xml b/OsmAnd/res/layout/bottom_sheet_item_with_descr_and_switch_56dp.xml
new file mode 100644
index 00000000000..b166524d6eb
--- /dev/null
+++ b/OsmAnd/res/layout/bottom_sheet_item_with_descr_and_switch_56dp.xml
@@ -0,0 +1,60 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:background="?attr/selectableItemBackground"
+    android:gravity="center_vertical"
+    android:minHeight="@dimen/bottom_sheet_selected_item_title_height"
+    android:paddingLeft="@dimen/content_padding"
+    android:paddingRight="@dimen/content_padding">
+
+    <ImageView
+        android:id="@+id/icon"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_gravity="center_vertical"
+        android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
+        android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
+        tools:src="@drawable/list_destination"/>
+
+    <LinearLayout
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_gravity="center_vertical"
+        android:layout_weight="1"
+        android:orientation="vertical">
+
+        <TextView
+            android:id="@+id/title"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:ellipsize="end"
+            android:maxLines="1"
+            android:textAppearance="@style/TextAppearance.ListItemTitle"
+            tools:text="Some title"/>
+
+        <TextView
+            android:id="@+id/description"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:ellipsize="end"
+            android:maxLines="2"
+            android:textAppearance="@style/TextAppearance.ContextMenuSubtitle"
+            tools:text="Some description"/>
+    </LinearLayout>
+
+    <android.support.v7.widget.SwitchCompat
+        android:id="@+id/compound_button"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_gravity="center_vertical"
+        android:layout_marginLeft="@dimen/bottom_sheet_content_margin"
+        android:layout_marginStart="@dimen/bottom_sheet_content_margin"
+        android:background="@null"
+        android:clickable="false"
+        android:focusable="false"
+        android:focusableInTouchMode="false"/>
+
+</LinearLayout>
diff --git a/OsmAnd/res/layout/bottom_sheet_menu_base.xml b/OsmAnd/res/layout/bottom_sheet_menu_base.xml
index 0cd6c6fc04b..8a575be9ee0 100644
--- a/OsmAnd/res/layout/bottom_sheet_menu_base.xml
+++ b/OsmAnd/res/layout/bottom_sheet_menu_base.xml
@@ -38,11 +38,11 @@
 			android:layout_width="wrap_content"
 			android:layout_height="wrap_content"
 			android:layout_gravity="center"
-			android:text="@string/shared_string_cancel"
 			android:textAllCaps="true"
 			android:textColor="?attr/color_dialog_buttons"
 			android:textSize="@dimen/default_desc_text_size"
-			android:textStyle="bold"/>
+			android:textStyle="bold"
+			tools:text="@string/shared_string_cancel"/>
 
 	</FrameLayout>
 
diff --git a/OsmAnd/res/layout/fragment_options_bottom_sheet_dialog.xml b/OsmAnd/res/layout/fragment_options_bottom_sheet_dialog.xml
deleted file mode 100644
index dabbd5dcea4..00000000000
--- a/OsmAnd/res/layout/fragment_options_bottom_sheet_dialog.xml
+++ /dev/null
@@ -1,269 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<LinearLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:osmand="http://schemas.android.com/apk/res-auto"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    android:background="?attr/bg_color"
-    android:orientation="vertical">
-
-    <ScrollView
-        android:id="@+id/measure_options_scroll_view"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content">
-
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:orientation="vertical"
-            android:paddingBottom="@dimen/bottom_sheet_content_padding_small">
-
-            <net.osmand.plus.widgets.TextViewEx
-                android:id="@+id/options_title"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_title_height"
-                android:gravity="center_vertical"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding"
-                android:text="@string/shared_string_options"
-                android:textAppearance="@style/TextAppearance.ListItemTitle"
-                osmand:typeface="@string/font_roboto_medium"/>
-
-            <RelativeLayout
-                android:id="@+id/snap_to_road_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding">
-
-                <ImageView
-                    android:id="@+id/snap_to_road_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_snap_to_road"/>
-
-                <android.support.v7.widget.SwitchCompat
-                    android:id="@+id/snap_to_road_switch"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_alignParentEnd="true"
-                    android:layout_alignParentRight="true"
-                    android:layout_centerVertical="true"
-                    android:layout_marginLeft="@dimen/bottom_sheet_content_margin"
-                    android:layout_marginStart="@dimen/bottom_sheet_content_margin"
-                    android:background="@null"
-                    android:clickable="false"
-                    android:focusable="false"
-                    android:focusableInTouchMode="false"/>
-
-                <LinearLayout
-                    android:layout_width="match_parent"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_toEndOf="@id/snap_to_road_icon"
-                    android:layout_toLeftOf="@id/snap_to_road_switch"
-                    android:layout_toRightOf="@id/snap_to_road_icon"
-                    android:layout_toStartOf="@id/snap_to_road_switch"
-                    android:orientation="vertical">
-
-                    <TextView
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:maxLines="1"
-                        android:text="@string/snap_to_road"
-                        android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-
-                    <TextView
-                        android:id="@+id/snap_to_road_enabled_text_view"
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:text="@string/shared_string_enabled"
-                        android:textColor="?android:textColorSecondary"
-                        android:textSize="@dimen/default_desc_text_size"
-                        android:visibility="gone"
-                        tools:visibility="visible"/>
-                </LinearLayout>
-
-            </RelativeLayout>
-
-            <View
-                android:layout_width="wrap_content"
-                android:layout_height="1dp"
-                android:layout_marginBottom="@dimen/bottom_sheet_divider_margin_bottom"
-                android:layout_marginLeft="@dimen/bottom_sheet_divider_margin_start"
-                android:layout_marginStart="@dimen/bottom_sheet_divider_margin_start"
-                android:layout_marginTop="@dimen/bottom_sheet_divider_margin_top"
-                android:background="?attr/dashboard_divider"/>
-
-            <RelativeLayout
-                android:id="@+id/save_as_new_segment_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding"
-                android:visibility="gone">
-
-                <ImageView
-                    android:id="@+id/save_as_new_segment_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_polygom_dark"/>
-
-                <TextView
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_toEndOf="@id/save_as_new_segment_icon"
-                    android:layout_toRightOf="@id/save_as_new_segment_icon"
-                    android:maxLines="1"
-                    android:text="@string/shared_string_save"
-                    android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-            </RelativeLayout>
-
-            <RelativeLayout
-                android:id="@+id/save_as_new_track_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding">
-
-                <ImageView
-                    android:id="@+id/save_as_new_track_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_polygom_dark"/>
-
-                <TextView
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_toEndOf="@id/save_as_new_track_icon"
-                    android:layout_toRightOf="@id/save_as_new_track_icon"
-                    android:maxLines="1"
-                    android:text="@string/shared_string_save_as_gpx"
-                    android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-            </RelativeLayout>
-
-            <RelativeLayout
-                android:id="@+id/add_to_the_track_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding">
-
-                <ImageView
-                    android:id="@+id/add_to_the_track_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_split_interval"/>
-
-                <TextView
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_toEndOf="@id/add_to_the_track_icon"
-                    android:layout_toRightOf="@id/add_to_the_track_icon"
-                    android:maxLines="1"
-                    android:text="@string/add_segment_to_the_track"
-                    android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-            </RelativeLayout>
-
-            <View
-                android:layout_width="wrap_content"
-                android:layout_height="1dp"
-                android:layout_marginBottom="@dimen/bottom_sheet_divider_margin_bottom"
-                android:layout_marginLeft="@dimen/bottom_sheet_divider_margin_start"
-                android:layout_marginStart="@dimen/bottom_sheet_divider_margin_start"
-                android:layout_marginTop="@dimen/bottom_sheet_divider_margin_top"
-                android:background="?attr/dashboard_divider"/>
-
-            <RelativeLayout
-                android:id="@+id/clear_all_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding">
-
-                <ImageView
-                    android:id="@+id/clear_all_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_reset_to_default_dark"/>
-
-                <TextView
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_centerVertical="true"
-                    android:layout_toEndOf="@id/clear_all_icon"
-                    android:layout_toRightOf="@id/clear_all_icon"
-                    android:maxLines="1"
-                    android:text="@string/shared_string_clear_all"
-                    android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-            </RelativeLayout>
-
-        </LinearLayout>
-
-    </ScrollView>
-
-    <View
-        android:layout_width="match_parent"
-        android:layout_height="1dp"
-        android:background="?attr/dashboard_divider"/>
-
-    <FrameLayout
-        android:id="@+id/cancel_row"
-        android:layout_width="match_parent"
-        android:layout_height="@dimen/bottom_sheet_cancel_button_height"
-        android:background="?attr/selectableItemBackground">
-
-        <TextView
-            android:id="@+id/cancel_row_text"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_gravity="center"
-            android:text="@string/shared_string_close"
-            android:textAllCaps="true"
-            android:textColor="?attr/color_dialog_buttons"
-            android:textSize="@dimen/default_desc_text_size"
-            android:textStyle="bold"/>
-    </FrameLayout>
-
-</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/base/MenuBottomSheetDialogFragment.java b/OsmAnd/src/net/osmand/plus/base/MenuBottomSheetDialogFragment.java
index b0a9ebfe6b5..044e3d47f1f 100644
--- a/OsmAnd/src/net/osmand/plus/base/MenuBottomSheetDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/base/MenuBottomSheetDialogFragment.java
@@ -81,10 +81,7 @@ public void onClick(View v) {
 				dismiss();
 			}
 		});
-		int closeRowTextId = getCloseRowTextId();
-		if (closeRowTextId != -1) {
-			((TextView) mainView.findViewById(R.id.close_row_text)).setText(closeRowTextId);
-		}
+		((TextView) mainView.findViewById(R.id.close_row_text)).setText(getCloseRowTextId());
 
 		setupHeightAndBackground(mainView, R.id.scroll_view);
 
@@ -175,7 +172,7 @@ protected int getCloseRowDividerColorId() {
 
 	@StringRes
 	protected int getCloseRowTextId() {
-		return -1;
+		return R.string.shared_string_cancel;
 	}
 
 	@DrawableRes
diff --git a/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/BottomSheetItemWithCompoundButton.java b/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/BottomSheetItemWithCompoundButton.java
new file mode 100644
index 00000000000..8fccb21bdaa
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/BottomSheetItemWithCompoundButton.java
@@ -0,0 +1,61 @@
+package net.osmand.plus.base.bottomsheetmenu;
+
+import android.graphics.drawable.Drawable;
+import android.support.annotation.ColorRes;
+import android.support.annotation.LayoutRes;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.CompoundButton;
+
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+
+public class BottomSheetItemWithCompoundButton extends BottomSheetItemWithDescription {
+
+	private boolean checked;
+
+	public BottomSheetItemWithCompoundButton(View customView,
+											 @LayoutRes int layoutId,
+											 boolean disabled,
+											 View.OnClickListener onClickListener,
+											 int position,
+											 Drawable icon,
+											 String title,
+											 @ColorRes int titleColorId,
+											 CharSequence description,
+											 @ColorRes int descriptionColorId,
+											 boolean checked) {
+		super(customView, layoutId, disabled, onClickListener, position, icon, title, titleColorId, description, descriptionColorId);
+		this.checked = checked;
+	}
+
+	@Override
+	public void inflate(OsmandApplication app, ViewGroup container, boolean nightMode) {
+		super.inflate(app, container, nightMode);
+		((CompoundButton) view.findViewById(R.id.compound_button)).setChecked(checked);
+	}
+
+	public static class Builder extends BottomSheetItemWithDescription.Builder {
+
+		protected boolean checked;
+
+		public Builder setChecked(boolean checked) {
+			this.checked = checked;
+			return this;
+		}
+
+		public BottomSheetItemWithCompoundButton create() {
+			return new BottomSheetItemWithCompoundButton(customView,
+					layoutId,
+					disabled,
+					onClickListener,
+					position,
+					icon,
+					title,
+					titleColorId,
+					description,
+					descriptionColorId,
+					checked);
+		}
+	}
+}
diff --git a/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/BottomSheetItemWithDescription.java b/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/BottomSheetItemWithDescription.java
index c6294d4384d..4617ff192c6 100644
--- a/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/BottomSheetItemWithDescription.java
+++ b/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/BottomSheetItemWithDescription.java
@@ -19,7 +19,7 @@ public class BottomSheetItemWithDescription extends SimpleBottomSheetItem {
 
 	public BottomSheetItemWithDescription(View customView,
 										  @LayoutRes int layoutId,
-										  boolean clickable,
+										  boolean disabled,
 										  View.OnClickListener onClickListener,
 										  int position,
 										  Drawable icon,
@@ -27,7 +27,7 @@ public BottomSheetItemWithDescription(View customView,
 										  @ColorRes int titleColorId,
 										  CharSequence description,
 										  @ColorRes int descriptionColorId) {
-		super(customView, layoutId, clickable, onClickListener, position, icon, title, titleColorId);
+		super(customView, layoutId, disabled, onClickListener, position, icon, title, titleColorId);
 		this.description = description;
 		this.descriptionColorId = descriptionColorId;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/SimpleBottomSheetItem.java b/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/SimpleBottomSheetItem.java
index a3e6eb8e375..d0fe3104ea2 100644
--- a/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/SimpleBottomSheetItem.java
+++ b/OsmAnd/src/net/osmand/plus/base/bottomsheetmenu/SimpleBottomSheetItem.java
@@ -21,13 +21,13 @@ public class SimpleBottomSheetItem extends BaseBottomSheetItem {
 
 	public SimpleBottomSheetItem(View customView,
 								 @LayoutRes int layoutId,
-								 boolean clickable,
+								 boolean disabled,
 								 View.OnClickListener onClickListener,
 								 int position,
 								 Drawable icon,
 								 String title,
 								 @ColorRes int titleColorId) {
-		super(customView, layoutId, clickable, onClickListener, position);
+		super(customView, layoutId, disabled, onClickListener, position);
 		this.icon = icon;
 		this.title = title;
 		this.titleColorId = titleColorId;
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
index d44cba2a347..0de61790477 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
@@ -272,11 +272,13 @@ public void onClick(View view) {
 		mainView.findViewById(R.id.options_button).setOnClickListener(new View.OnClickListener() {
 			@Override
 			public void onClick(View view) {
+				Bundle args = new Bundle();
+				args.putBoolean(OptionsBottomSheetDialogFragment.SNAP_TO_ROAD_ENABLED_KEY, editingCtx.isInSnapToRoadMode());
+				args.putBoolean(OptionsBottomSheetDialogFragment.ADD_LINE_MODE_KEY, newGpxData != null);
 				OptionsBottomSheetDialogFragment fragment = new OptionsBottomSheetDialogFragment();
+				fragment.setArguments(args);
 				fragment.setUsedOnMap(true);
-				fragment.setSnapToRoadEnabled(editingCtx.isInSnapToRoadMode());
 				fragment.setListener(createOptionsFragmentListener());
-				fragment.setAddLineMode(newGpxData != null);
 				fragment.show(mapActivity.getSupportFragmentManager(), OptionsBottomSheetDialogFragment.TAG);
 			}
 		});
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/OptionsBottomSheetDialogFragment.java b/OsmAnd/src/net/osmand/plus/measurementtool/OptionsBottomSheetDialogFragment.java
index 6666fa933b8..03f53b6d780 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/OptionsBottomSheetDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/OptionsBottomSheetDialogFragment.java
@@ -1,122 +1,135 @@
 package net.osmand.plus.measurementtool;
 
 import android.os.Bundle;
-import android.support.v7.widget.SwitchCompat;
-import android.view.ContextThemeWrapper;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
-import android.widget.ImageView;
 
 import net.osmand.plus.R;
 import net.osmand.plus.base.MenuBottomSheetDialogFragment;
-import net.osmand.plus.widgets.TextViewEx;
+import net.osmand.plus.base.bottomsheetmenu.BaseBottomSheetItem;
+import net.osmand.plus.base.bottomsheetmenu.BottomSheetItemWithCompoundButton;
+import net.osmand.plus.base.bottomsheetmenu.SimpleBottomSheetItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.DividerHalfItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.TitleItem;
 
 public class OptionsBottomSheetDialogFragment extends MenuBottomSheetDialogFragment {
 
-	public final static String TAG = "OptionsBottomSheetDialogFragment";
+	public static final String TAG = "OptionsBottomSheetDialogFragment";
+
+	public static final String SNAP_TO_ROAD_ENABLED_KEY = "snap_to_road_enabled";
+	public static final String ADD_LINE_MODE_KEY = "add_line_mode";
 
 	private OptionsFragmentListener listener;
-	private boolean addLineMode;
-	private boolean snapToRoadEnabled;
 
 	public void setListener(OptionsFragmentListener listener) {
 		this.listener = listener;
 	}
 
-	public void setAddLineMode(boolean addLineMode) {
-		this.addLineMode = addLineMode;
-	}
-
-	public void setSnapToRoadEnabled(boolean snapToRoadEnabled) {
-		this.snapToRoadEnabled = snapToRoadEnabled;
-	}
-
 	@Override
 	public View createMenuItems(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
-		final int themeRes = nightMode ? R.style.OsmandDarkTheme : R.style.OsmandLightTheme;
-
-		final View mainView = View.inflate(new ContextThemeWrapper(getContext(), themeRes), R.layout.fragment_options_bottom_sheet_dialog, null);
-
-		if (nightMode) {
-			((TextViewEx) mainView.findViewById(R.id.options_title)).setTextColor(getResources().getColor(R.color.ctx_menu_info_text_dark));
-		}
-		if (snapToRoadEnabled) {
-			mainView.findViewById(R.id.snap_to_road_enabled_text_view).setVisibility(View.VISIBLE);
-			((SwitchCompat) mainView.findViewById(R.id.snap_to_road_switch)).setChecked(true);
-		}
-		((ImageView) mainView.findViewById(R.id.snap_to_road_icon)).setImageDrawable(snapToRoadEnabled
-				? getActiveIcon(R.drawable.ic_action_snap_to_road)
-				: getContentIcon(R.drawable.ic_action_snap_to_road));
-		((ImageView) mainView.findViewById(R.id.clear_all_icon)).setImageDrawable(getContentIcon(R.drawable.ic_action_reset_to_default_dark));
-		if (!addLineMode) {
-			((ImageView) mainView.findViewById(R.id.save_as_new_track_icon)).setImageDrawable(getContentIcon(R.drawable.ic_action_polygom_dark));
-			((ImageView) mainView.findViewById(R.id.add_to_the_track_icon)).setImageDrawable(getContentIcon(R.drawable.ic_action_split_interval));
+		Bundle args = getArguments();
+		boolean snapToRoadEnabled = args.getBoolean(SNAP_TO_ROAD_ENABLED_KEY);
+		boolean addLineMode = args.getBoolean(ADD_LINE_MODE_KEY);
+
+		items.add(new TitleItem(getString(R.string.shared_string_options)));
+
+		BaseBottomSheetItem snapToRoadItem = new BottomSheetItemWithCompoundButton.Builder()
+				.setChecked(snapToRoadEnabled)
+				.setDescription(getString(snapToRoadEnabled ? R.string.shared_string_enabled : R.string.shared_string_disabled))
+				.setIcon(snapToRoadEnabled
+						? getActiveIcon(R.drawable.ic_action_snap_to_road)
+						: getContentIcon(R.drawable.ic_action_snap_to_road))
+				.setTitle(getString(R.string.snap_to_road))
+				.setLayoutId(R.layout.bottom_sheet_item_with_descr_and_switch_56dp)
+				.setOnClickListener(new View.OnClickListener() {
+					@Override
+					public void onClick(View v) {
+						if (listener != null) {
+							listener.snapToRoadOnCLick();
+						}
+						dismiss();
+					}
+				})
+				.create();
+		items.add(snapToRoadItem);
+
+		items.add(new DividerHalfItem(getContext()));
+
+		if (addLineMode) {
+			BaseBottomSheetItem saveAsNewSegmentItem = new SimpleBottomSheetItem.Builder()
+					.setIcon(getContentIcon(R.drawable.ic_action_polygom_dark))
+					.setTitle(getString(R.string.shared_string_save))
+					.setLayoutId(R.layout.bottom_sheet_item_simple)
+					.setOnClickListener(new View.OnClickListener() {
+						@Override
+						public void onClick(View v) {
+							if (listener != null) {
+								listener.addToGpxOnClick();
+							}
+							dismiss();
+						}
+					})
+					.create();
+			items.add(saveAsNewSegmentItem);
 		} else {
-			mainView.findViewById(R.id.save_as_new_track_row).setVisibility(View.GONE);
-			mainView.findViewById(R.id.add_to_the_track_row).setVisibility(View.GONE);
-			mainView.findViewById(R.id.save_as_new_segment_row).setVisibility(View.VISIBLE);
-			((ImageView) mainView.findViewById(R.id.save_as_new_segment_icon)).setImageDrawable(getContentIcon(R.drawable.ic_action_polygom_dark));
+			BaseBottomSheetItem saveAsNewTrackItem = new SimpleBottomSheetItem.Builder()
+					.setIcon(getContentIcon(R.drawable.ic_action_polygom_dark))
+					.setTitle(getString(R.string.shared_string_save_as_gpx))
+					.setLayoutId(R.layout.bottom_sheet_item_simple)
+					.setOnClickListener(new View.OnClickListener() {
+						@Override
+						public void onClick(View v) {
+							if (listener != null) {
+								listener.saveAsNewTrackOnClick();
+							}
+							dismiss();
+						}
+					})
+					.create();
+			items.add(saveAsNewTrackItem);
+
+			BaseBottomSheetItem addToTrackItem = new SimpleBottomSheetItem.Builder()
+					.setIcon(getContentIcon(R.drawable.ic_action_split_interval))
+					.setTitle(getString(R.string.add_segment_to_the_track))
+					.setLayoutId(R.layout.bottom_sheet_item_simple)
+					.setOnClickListener(new View.OnClickListener() {
+						@Override
+						public void onClick(View v) {
+							if (listener != null) {
+								listener.addToTheTrackOnClick();
+							}
+							dismiss();
+						}
+					})
+					.create();
+			items.add(addToTrackItem);
 		}
 
-		mainView.findViewById(R.id.snap_to_road_row).setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				if (listener != null) {
-					listener.snapToRoadOnCLick();
-				}
-				dismiss();
-			}
-		});
-		mainView.findViewById(R.id.clear_all_row).setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				if (listener != null) {
-					listener.clearAllOnClick();
-				}
-				dismiss();
-			}
-		});
-		if (!addLineMode) {
-			mainView.findViewById(R.id.save_as_new_track_row).setOnClickListener(new View.OnClickListener() {
-				@Override
-				public void onClick(View view) {
-					if (listener != null) {
-						listener.saveAsNewTrackOnClick();
-					}
-					dismiss();
-				}
-			});
-			mainView.findViewById(R.id.add_to_the_track_row).setOnClickListener(new View.OnClickListener() {
-				@Override
-				public void onClick(View view) {
-					if (listener != null) {
-						listener.addToTheTrackOnClick();
-					}
-					dismiss();
-				}
-			});
-		} else {
-			mainView.findViewById(R.id.save_as_new_segment_row).setOnClickListener(new View.OnClickListener() {
-				@Override
-				public void onClick(View view) {
-					if (listener != null) {
-						listener.addToGpxOnClick();
+		items.add(new DividerHalfItem(getContext()));
+
+		BaseBottomSheetItem clearAllItem = new SimpleBottomSheetItem.Builder()
+				.setIcon(getContentIcon(R.drawable.ic_action_reset_to_default_dark))
+				.setTitle(getString(R.string.shared_string_clear_all))
+				.setLayoutId(R.layout.bottom_sheet_item_simple)
+				.setOnClickListener(new View.OnClickListener() {
+					@Override
+					public void onClick(View v) {
+						if (listener != null) {
+							listener.clearAllOnClick();
+						}
+						dismiss();
 					}
-					dismiss();
-				}
-			});
-		}
-		mainView.findViewById(R.id.cancel_row).setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				dismiss();
-			}
-		});
+				})
+				.create();
+		items.add(clearAllItem);
 
-		setupHeightAndBackground(mainView, R.id.measure_options_scroll_view);
+		return null;
+	}
 
-		return mainView;
+	@Override
+	protected int getCloseRowTextId() {
+		return R.string.shared_string_close;
 	}
 
 	interface OptionsFragmentListener {
