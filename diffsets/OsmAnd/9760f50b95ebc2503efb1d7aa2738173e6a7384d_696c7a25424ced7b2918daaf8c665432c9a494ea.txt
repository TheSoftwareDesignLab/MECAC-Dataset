diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/MenuBuilder.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/MenuBuilder.java
index a12726e9cff..721a64ee9d8 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/MenuBuilder.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/MenuBuilder.java
@@ -6,6 +6,10 @@
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.CONTEXT_MENU_PHONE_ID;
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.CONTEXT_MENU_SEARCH_MORE_ID;
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.CONTEXT_MENU_SHOW_ON_MAP_ID;
+import static net.osmand.plus.mapcontextmenu.builders.MenuUIComponents.DIVIDER_ROW_KEY;
+import static net.osmand.plus.mapcontextmenu.builders.MenuUIComponents.NEAREST_POI_KEY;
+import static net.osmand.plus.mapcontextmenu.builders.MenuUIComponents.NEAREST_WIKI_KEY;
+import static net.osmand.plus.mapcontextmenu.builders.MenuUIComponents.WITHIN_POLYGONS_ROW_KEY;
 
 import android.content.Context;
 import android.content.Intent;
@@ -28,7 +32,6 @@
 import android.widget.ImageView;
 import android.widget.LinearLayout;
 import android.widget.TextView;
-import android.widget.Toast;
 
 import androidx.annotation.ColorInt;
 import androidx.annotation.ColorRes;
@@ -56,7 +59,7 @@
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.chooseplan.ChoosePlanFragment;
 import net.osmand.plus.chooseplan.OsmAndFeature;
-import net.osmand.plus.mapcontextmenu.builders.ContextMenuUIComponents;
+import net.osmand.plus.mapcontextmenu.builders.MenuUIComponents;
 import net.osmand.plus.mapcontextmenu.builders.cards.AbstractCard;
 import net.osmand.plus.mapcontextmenu.builders.cards.CardsRowBuilder;
 import net.osmand.plus.mapcontextmenu.builders.cards.ImageCard;
@@ -69,7 +72,6 @@
 import net.osmand.plus.mapcontextmenu.gallery.tasks.GetImageCardsTask.GetImageCardsListener;
 import net.osmand.plus.mapcontextmenu.other.MenuObject;
 import net.osmand.plus.mapcontextmenu.other.MenuObjectUtils;
-import net.osmand.plus.mapcontextmenu.other.ShareMenu;
 import net.osmand.plus.plugins.OsmandPlugin;
 import net.osmand.plus.plugins.PluginsHelper;
 import net.osmand.plus.plugins.development.OsmandDevelopmentPlugin;
@@ -112,12 +114,6 @@ public class MenuBuilder {
 	public static final int TITLE_LIMIT = 60;
 
 	protected static final String[] arrowChars = {"=>", " - "};
-	protected static final String WITHIN_POLYGONS_ROW_KEY = "within_polygons";
-	protected static final String NEAREST_WIKI_KEY = "nearest_wiki_key";
-	protected static final String NEAREST_POI_KEY = "nearest_poi_key";
-	protected static final String DIVIDER_ROW_KEY = "divider_row_key";
-	protected static final String NAMES_ROW_KEY = "names_row_key";
-	protected static final String ALT_NAMES_ROW_KEY = "alt_names_row_key";
 
 	private static final int NEARBY_MAX_POI_COUNT = 10;
 	private static final int NEARBY_POI_MIN_RADIUS = 250;
@@ -128,7 +124,7 @@ public class MenuBuilder {
 	protected MapActivity mapActivity;
 	protected MapContextMenu mapContextMenu;
 	protected OsmAndAppCustomization customization;
-	protected ContextMenuUIComponents uiComponents;
+	protected MenuUIComponents uiComponents;
 
 	protected LinkedList<PlainMenuItem> plainMenuItems;
 	protected boolean firstRow;
@@ -201,7 +197,7 @@ public MenuBuilder(@NonNull MapActivity mapActivity) {
 		this.mapActivity = mapActivity;
 		this.app = mapActivity.getMyApplication();
 		this.customization = app.getAppCustomization();
-		this.uiComponents = new ContextMenuUIComponents(mapActivity);
+		this.uiComponents = new MenuUIComponents(mapActivity);
 		this.plainMenuItems = new LinkedList<>();
 		this.galleryController = (GalleryController) app.getDialogManager().findController(GalleryController.PROCESS_ID);
 
@@ -303,6 +299,7 @@ public void addMenuPlugin(@NonNull OsmandPlugin plugin) {
 
 	public void setLight(boolean light) {
 		this.light = light;
+		uiComponents.setLightContent(light);
 	}
 
 	public void build(@NonNull ViewGroup view, @Nullable Object object) {
@@ -441,6 +438,24 @@ private CollapsableView getWithinCollapsableView(@NonNull List<MenuObject> menuO
 		return new CollapsableView(llv, this, true);
 	}
 
+	protected void buildDetailsRow(@NonNull View view, @Nullable Drawable icon, @Nullable String text,
+	                               @Nullable String textPrefix, @Nullable String textSuffix,
+	                               @Nullable CollapsableView collapsableView, boolean parentRow) {
+		if (!isFirstRow() && !parentRow) {
+			View horizontalLine = new View(view.getContext());
+			horizontalLine.setTag(DIVIDER_ROW_KEY);
+			LinearLayout.LayoutParams llHorLineParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, dpToPx(1f));
+			llHorLineParams.gravity = Gravity.BOTTOM;
+			AndroidUtils.setMargins(llHorLineParams, icon != null ? dpToPx(64f) : 0, 0, 0, 0);
+
+			horizontalLine.setLayoutParams(llHorLineParams);
+			horizontalLine.setBackgroundColor(getColor(light ? R.color.divider_color_light : R.color.divider_color_dark));
+			((LinearLayout) view).addView(horizontalLine);
+		}
+		uiComponents.buildDetailsRow(view, icon, text, textPrefix, textSuffix, collapsableView, parentRow);
+		rowBuilt();
+	}
+
 	private void buildWithinRow(@NonNull View view, @Nullable Drawable icon, @NonNull String text,
 	                            @NonNull String textPrefix, @Nullable CollapsableView collapsableView,
 	                            @Nullable MenuObject menuObject, boolean parentRow) {
@@ -1086,7 +1101,7 @@ protected void setDividerWidth(boolean matchWidthDivider) {
 	}
 
 	protected void copyToClipboard(String text, Context ctx) {
-		ShareMenu.copyToClipboardWithToast(ctx, text, Toast.LENGTH_SHORT);
+		uiComponents.copyToClipboard(text, ctx);
 	}
 
 	protected CollapsableView getLocationCollapsableView(Map<Integer, String> locationData) {
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/AmenityMenuBuilder.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/AmenityMenuBuilder.java
index f4967dc3c99..1644737fc6e 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/AmenityMenuBuilder.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/AmenityMenuBuilder.java
@@ -1,5 +1,8 @@
 package net.osmand.plus.mapcontextmenu.builders;
 
+import static net.osmand.plus.mapcontextmenu.builders.MenuUIComponents.NEAREST_POI_KEY;
+import static net.osmand.plus.mapcontextmenu.builders.MenuUIComponents.NEAREST_WIKI_KEY;
+
 import android.content.Context;
 import android.view.View;
 import android.view.ViewGroup;
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/AmenityUIHelper.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/AmenityUIHelper.java
index 572e5cd89a5..055dbb8930d 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/AmenityUIHelper.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/AmenityUIHelper.java
@@ -7,6 +7,8 @@
 import static net.osmand.data.Amenity.OPENING_HOURS;
 import static net.osmand.data.Amenity.SUBTYPE;
 import static net.osmand.data.Amenity.TYPE;
+import static net.osmand.plus.mapcontextmenu.builders.MenuUIComponents.ALT_NAMES_ROW_KEY;
+import static net.osmand.plus.mapcontextmenu.builders.MenuUIComponents.NAMES_ROW_KEY;
 import static net.osmand.shared.settings.enums.MetricsConstants.KILOMETERS_AND_METERS;
 import static net.osmand.shared.settings.enums.MetricsConstants.MILES_AND_FEET;
 import static net.osmand.shared.settings.enums.MetricsConstants.MILES_AND_YARDS;
@@ -295,7 +297,7 @@ private AmenityInfoRow createLocalizedAmenityInfoRow(@NonNull Context context, @
 			LinearLayout llv = buildCollapsableContentView(mapActivity, true, true);
 			for (AmenityInfoRow infoRow : infoRows) {
 				View container = createRowContainer(app, null);
-				buildDetailsRow(container, null, infoRow.text, infoRow.textPrefix, null, false);
+				buildDetailsRow(container, null, infoRow.text, infoRow.textPrefix, null, null, false);
 				llv.addView(container);
 			}
 			collapsableView = new CollapsableView(llv, this, true);
@@ -571,7 +573,7 @@ public void buildNamesRow(ViewGroup viewGroup, Map<String, String> namesMap, boo
 			View amenitiesRow = createRowContainer(context, altName ? ALT_NAMES_ROW_KEY : NAMES_ROW_KEY);
 			String hint = app.getString(altName ? R.string.shared_string_alt_name : R.string.shared_string_name);
 			buildDetailsRow(amenitiesRow, getRowIcon(R.drawable.ic_action_map_language), name,
-					app.getString(R.string.ltr_or_rtl_combine_via_colon, hint, nameLocale.getDisplayLanguage()),
+					app.getString(R.string.ltr_or_rtl_combine_via_colon, hint, nameLocale.getDisplayLanguage()), null,
 					namesMap.size() > 1 ? getNamesCollapsableView(namesMap, nameLocale.getLanguage(), hint) : null, true);
 			viewGroup.addView(amenitiesRow);
 		}
@@ -590,7 +592,7 @@ protected CollapsableView getNamesCollapsableView(@NonNull Map<String, String> m
 				View amenitiesRow = createRowContainer(app, null);
 				buildDetailsRow(amenitiesRow, null, name,
 						app.getString(R.string.ltr_or_rtl_combine_via_colon, hint, locale.getDisplayLanguage()),
-						null, false);
+						null, null, false);
 				llv.addView(amenitiesRow);
 			}
 		}
@@ -923,134 +925,6 @@ protected void buildRow(View view, Drawable icon, String text, String textPrefix
 		setDividerWidth(matchWidthDivider);
 	}
 
-	private void buildDetailsRow(@NonNull View view, @Nullable Drawable icon, String text, String textPrefix,
-	                             @Nullable CollapsableView collapsableView, boolean parentRow) {
-		if (!isFirstRow() && !parentRow) {
-			View horizontalLine = new View(view.getContext());
-			horizontalLine.setTag(DIVIDER_ROW_KEY);
-			LinearLayout.LayoutParams llHorLineParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, dpToPx(1f));
-			llHorLineParams.gravity = Gravity.BOTTOM;
-			AndroidUtils.setMargins(llHorLineParams, icon != null ? dpToPx(64f) : 0, 0, 0, 0);
-
-			horizontalLine.setLayoutParams(llHorLineParams);
-			horizontalLine.setBackgroundColor(getColor(light ? R.color.divider_color_light : R.color.divider_color_dark));
-			((LinearLayout) view).addView(horizontalLine);
-		}
-		boolean collapsable = collapsableView != null;
-
-		LinearLayout baseView = new LinearLayout(view.getContext());
-		baseView.setOrientation(LinearLayout.VERTICAL);
-		LinearLayout.LayoutParams llBaseViewParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
-		baseView.setLayoutParams(llBaseViewParams);
-
-		LinearLayout ll = new LinearLayout(view.getContext());
-		ll.setOrientation(LinearLayout.HORIZONTAL);
-		LinearLayout.LayoutParams llParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
-		ll.setLayoutParams(llParams);
-		ll.setBackgroundResource(AndroidUtils.resolveAttribute(view.getContext(), android.R.attr.selectableItemBackground));
-		ll.setOnLongClickListener(v -> {
-			copyToClipboard(text, view.getContext());
-			return true;
-		});
-
-		baseView.addView(ll);
-
-		if (icon != null) {
-			LinearLayout llIcon = new LinearLayout(view.getContext());
-			llIcon.setOrientation(LinearLayout.HORIZONTAL);
-			llIcon.setLayoutParams(new LinearLayout.LayoutParams(dpToPx(64f), dpToPx(48f)));
-			llIcon.setGravity(Gravity.CENTER_VERTICAL);
-			ll.addView(llIcon);
-
-			ImageView iconView = new ImageView(view.getContext());
-			LinearLayout.LayoutParams llIconParams = new LinearLayout.LayoutParams(dpToPx(24f), dpToPx(24f));
-			AndroidUtils.setMargins(llIconParams, dpToPx(16f), dpToPx(12f), dpToPx(24f), dpToPx(12f));
-			llIconParams.gravity = Gravity.CENTER_VERTICAL;
-			iconView.setLayoutParams(llIconParams);
-			iconView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
-			iconView.setImageDrawable(icon);
-			llIcon.addView(iconView);
-		}
-
-		LinearLayout llText = new LinearLayout(view.getContext());
-		llText.setOrientation(LinearLayout.VERTICAL);
-		ll.addView(llText);
-
-		TextView textPrefixView = null;
-		if (!Algorithms.isEmpty(textPrefix)) {
-			textPrefixView = new TextView(view.getContext());
-			LinearLayout.LayoutParams llTextParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
-			int topMargin = parentRow ? (icon == null ? dpToPx(16f) : 0) : 0;
-			AndroidUtils.setMargins(llTextParams, topMargin, dpToPx(8f), 0, 0);
-			textPrefixView.setLayoutParams(llTextParams);
-			textPrefixView.setTextSize(12);
-			textPrefixView.setTextColor(getColor(R.color.text_color_secondary_light));
-			textPrefixView.setEllipsize(TextUtils.TruncateAt.END);
-			textPrefixView.setMinLines(1);
-			textPrefixView.setMaxLines(1);
-			textPrefixView.setText(textPrefix);
-		}
-
-		TextView textView = new TextView(view.getContext());
-		LinearLayout.LayoutParams llTextParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
-		int topMargin = parentRow ? (icon == null ? dpToPx(16f) : 0) : 0;
-		AndroidUtils.setMargins(llTextParams, topMargin,
-				textPrefixView == null ? (collapsable ? dpToPx(13f) : dpToPx(8f)) : dpToPx(2f), 0, collapsable && textPrefixView == null ? dpToPx(13f) : dpToPx(8f));
-		textView.setLayoutParams(llTextParams);
-		textView.setTextSize(16);
-		textView.setTextColor(ColorUtilities.getPrimaryTextColor(app, !light));
-		textView.setText(text);
-		textView.setEllipsize(TextUtils.TruncateAt.END);
-		textView.setMinLines(1);
-		textView.setMaxLines(10);
-
-		LinearLayout.LayoutParams llTextViewParams = new LinearLayout.LayoutParams(0, ViewGroup.LayoutParams.WRAP_CONTENT);
-		llTextViewParams.weight = 1f;
-		AndroidUtils.setMargins(llTextViewParams, 0, 0, dpToPx(10f), 0);
-		llTextViewParams.gravity = Gravity.CENTER_VERTICAL;
-		llText.setLayoutParams(llTextViewParams);
-		if (textPrefixView != null) {
-			llText.addView(textPrefixView);
-		}
-		llText.addView(textView);
-
-		ImageView iconViewCollapse = new ImageView(view.getContext());
-		if (collapsableView != null) {
-			LinearLayout llIconCollapse = new LinearLayout(view.getContext());
-			llIconCollapse.setLayoutParams(new LinearLayout.LayoutParams(dpToPx(40f), ViewGroup.LayoutParams.MATCH_PARENT));
-			llIconCollapse.setOrientation(LinearLayout.HORIZONTAL);
-			llIconCollapse.setGravity(Gravity.CENTER_VERTICAL);
-			ll.addView(llIconCollapse);
-
-			LinearLayout.LayoutParams llIconCollapseParams = new LinearLayout.LayoutParams(dpToPx(24f), dpToPx(24f));
-			AndroidUtils.setMargins(llIconCollapseParams, 0, dpToPx(12f), dpToPx(24f), dpToPx(12f));
-			llIconCollapseParams.gravity = Gravity.CENTER_VERTICAL;
-			iconViewCollapse.setLayoutParams(llIconCollapseParams);
-			iconViewCollapse.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
-			iconViewCollapse.setImageDrawable(getCollapseIcon(collapsableView.getContentView().getVisibility() == View.GONE));
-			llIconCollapse.addView(iconViewCollapse);
-			ll.setOnClickListener(v -> {
-				if (collapsableView.getContentView().getVisibility() == View.VISIBLE) {
-					collapsableView.getContentView().setVisibility(View.GONE);
-					iconViewCollapse.setImageDrawable(getCollapseIcon(true));
-					collapsableView.setCollapsed(true);
-				} else {
-					collapsableView.getContentView().setVisibility(View.VISIBLE);
-					iconViewCollapse.setImageDrawable(getCollapseIcon(false));
-					collapsableView.setCollapsed(false);
-				}
-			});
-			if (collapsableView.isCollapsed()) {
-				collapsableView.getContentView().setVisibility(View.GONE);
-				iconViewCollapse.setImageDrawable(getCollapseIcon(true));
-			}
-			baseView.addView(collapsableView.getContentView());
-		}
-
-		((LinearLayout) view).addView(baseView);
-		rowBuilt();
-	}
-
 	public void buildAmenityRow(View view, AmenityInfoRow info) {
 		if (info.icon != null) {
 			buildRow(view, info.icon, info.text, info.textPrefix, info.hiddenUrl,
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/ContextMenuUIComponents.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/ContextMenuUIComponents.java
deleted file mode 100644
index 08a1a20a67e..00000000000
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/ContextMenuUIComponents.java
+++ /dev/null
@@ -1,30 +0,0 @@
-package net.osmand.plus.mapcontextmenu.builders;
-
-import androidx.annotation.ColorInt;
-import androidx.annotation.ColorRes;
-import androidx.annotation.NonNull;
-
-import net.osmand.plus.OsmandApplication;
-import net.osmand.plus.activities.MapActivity;
-import net.osmand.plus.utils.AndroidUtils;
-import net.osmand.plus.utils.ColorUtilities;
-
-public class ContextMenuUIComponents {
-
-	private final MapActivity mapActivity;
-	private final OsmandApplication app;
-
-	public ContextMenuUIComponents(@NonNull MapActivity mapActivity) {
-		this.mapActivity = mapActivity;
-		this.app = mapActivity.getMyApplication();
-	}
-
-	@ColorInt
-	public int getColor(@ColorRes int resId) {
-		return ColorUtilities.getColor(mapActivity, resId);
-	}
-
-	public int dpToPx(float dp) {
-		return AndroidUtils.dpToPx(app, dp);
-	}
-}
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/MenuUIComponents.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/MenuUIComponents.java
new file mode 100644
index 00000000000..66d5fcee773
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/MenuUIComponents.java
@@ -0,0 +1,193 @@
+package net.osmand.plus.mapcontextmenu.builders;
+
+import android.content.Context;
+import android.graphics.drawable.Drawable;
+import android.text.TextUtils;
+import android.view.Gravity;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.ImageView;
+import android.widget.LinearLayout;
+import android.widget.TextView;
+import android.widget.Toast;
+
+import androidx.annotation.ColorInt;
+import androidx.annotation.ColorRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.mapcontextmenu.CollapsableView;
+import net.osmand.plus.mapcontextmenu.other.ShareMenu;
+import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.ColorUtilities;
+import net.osmand.plus.utils.UiUtilities;
+import net.osmand.util.Algorithms;
+
+public class MenuUIComponents {
+
+	public static final String WITHIN_POLYGONS_ROW_KEY = "within_polygons";
+	public static final String NEAREST_WIKI_KEY = "nearest_wiki_key";
+	public static final String NEAREST_POI_KEY = "nearest_poi_key";
+	public static final String DIVIDER_ROW_KEY = "divider_row_key";
+	public static final String NAMES_ROW_KEY = "names_row_key";
+	public static final String ALT_NAMES_ROW_KEY = "alt_names_row_key";
+
+	private final OsmandApplication app;
+	private final MapActivity mapActivity;
+	private final UiUtilities iconsCache;
+	private boolean isLightContent;
+
+	public MenuUIComponents(@NonNull MapActivity mapActivity) {
+		this.mapActivity = mapActivity;
+		this.app = mapActivity.getMyApplication();
+		this.iconsCache = app.getUIUtilities();
+	}
+
+	public void setLightContent(boolean lightContent) {
+		this.isLightContent = lightContent;
+	}
+
+	public void buildDetailsRow(@NonNull View view, @Nullable Drawable icon, @Nullable String text,
+	                            @Nullable String textPrefix, @Nullable String textSuffix,
+	                            @Nullable CollapsableView collapsableView, boolean parentRow) {
+		boolean collapsable = collapsableView != null;
+
+		LinearLayout baseView = new LinearLayout(view.getContext());
+		baseView.setOrientation(LinearLayout.VERTICAL);
+		LinearLayout.LayoutParams llBaseViewParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
+		baseView.setLayoutParams(llBaseViewParams);
+
+		LinearLayout ll = new LinearLayout(view.getContext());
+		ll.setOrientation(LinearLayout.HORIZONTAL);
+		LinearLayout.LayoutParams llParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
+		ll.setLayoutParams(llParams);
+		ll.setBackgroundResource(AndroidUtils.resolveAttribute(view.getContext(), android.R.attr.selectableItemBackground));
+		ll.setOnLongClickListener(v -> {
+			copyToClipboard(text, view.getContext());
+			return true;
+		});
+
+		baseView.addView(ll);
+
+		if (icon != null) {
+			LinearLayout llIcon = new LinearLayout(view.getContext());
+			llIcon.setOrientation(LinearLayout.HORIZONTAL);
+			llIcon.setLayoutParams(new LinearLayout.LayoutParams(dpToPx(64f), dpToPx(48f)));
+			llIcon.setGravity(Gravity.CENTER_VERTICAL);
+			ll.addView(llIcon);
+
+			ImageView iconView = new ImageView(view.getContext());
+			LinearLayout.LayoutParams llIconParams = new LinearLayout.LayoutParams(dpToPx(24f), dpToPx(24f));
+			AndroidUtils.setMargins(llIconParams, dpToPx(16f), dpToPx(12f), dpToPx(24f), dpToPx(12f));
+			llIconParams.gravity = Gravity.CENTER_VERTICAL;
+			iconView.setLayoutParams(llIconParams);
+			iconView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
+			iconView.setImageDrawable(icon);
+			llIcon.addView(iconView);
+		}
+
+		LinearLayout llText = new LinearLayout(view.getContext());
+		llText.setOrientation(LinearLayout.VERTICAL);
+		ll.addView(llText);
+
+		TextView textPrefixView = null;
+		if (!Algorithms.isEmpty(textPrefix)) {
+			textPrefixView = new TextView(view.getContext());
+			LinearLayout.LayoutParams llTextParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
+			int topMargin = parentRow ? (icon == null ? dpToPx(16f) : 0) : 0;
+			AndroidUtils.setMargins(llTextParams, topMargin, dpToPx(8f), 0, 0);
+			textPrefixView.setLayoutParams(llTextParams);
+			textPrefixView.setTextSize(12);
+			textPrefixView.setTextColor(getColor(R.color.text_color_secondary_light));
+			textPrefixView.setEllipsize(TextUtils.TruncateAt.END);
+			textPrefixView.setMinLines(1);
+			textPrefixView.setMaxLines(1);
+			textPrefixView.setText(textPrefix);
+		}
+
+		TextView textView = new TextView(view.getContext());
+		LinearLayout.LayoutParams llTextParams = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
+		int topMargin = parentRow ? (icon == null ? dpToPx(16f) : 0) : 0;
+		AndroidUtils.setMargins(llTextParams, topMargin,
+				textPrefixView == null ? (collapsable ? dpToPx(13f) : dpToPx(8f)) : dpToPx(2f), 0, collapsable && textPrefixView == null ? dpToPx(13f) : dpToPx(8f));
+		textView.setLayoutParams(llTextParams);
+		textView.setTextSize(16);
+		textView.setTextColor(ColorUtilities.getPrimaryTextColor(app, !isLightContent()));
+		textView.setText(text);
+		textView.setEllipsize(TextUtils.TruncateAt.END);
+		textView.setMinLines(1);
+		textView.setMaxLines(10);
+
+		LinearLayout.LayoutParams llTextViewParams = new LinearLayout.LayoutParams(0, ViewGroup.LayoutParams.WRAP_CONTENT);
+		llTextViewParams.weight = 1f;
+		AndroidUtils.setMargins(llTextViewParams, 0, 0, dpToPx(10f), 0);
+		llTextViewParams.gravity = Gravity.CENTER_VERTICAL;
+		llText.setLayoutParams(llTextViewParams);
+		if (textPrefixView != null) {
+			llText.addView(textPrefixView);
+		}
+		llText.addView(textView);
+
+		ImageView iconViewCollapse = new ImageView(view.getContext());
+		if (collapsableView != null) {
+			LinearLayout llIconCollapse = new LinearLayout(view.getContext());
+			llIconCollapse.setLayoutParams(new LinearLayout.LayoutParams(dpToPx(40f), ViewGroup.LayoutParams.MATCH_PARENT));
+			llIconCollapse.setOrientation(LinearLayout.HORIZONTAL);
+			llIconCollapse.setGravity(Gravity.CENTER_VERTICAL);
+			ll.addView(llIconCollapse);
+
+			LinearLayout.LayoutParams llIconCollapseParams = new LinearLayout.LayoutParams(dpToPx(24f), dpToPx(24f));
+			AndroidUtils.setMargins(llIconCollapseParams, 0, dpToPx(12f), dpToPx(24f), dpToPx(12f));
+			llIconCollapseParams.gravity = Gravity.CENTER_VERTICAL;
+			iconViewCollapse.setLayoutParams(llIconCollapseParams);
+			iconViewCollapse.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
+			iconViewCollapse.setImageDrawable(getCollapseIcon(collapsableView.getContentView().getVisibility() == View.GONE));
+			llIconCollapse.addView(iconViewCollapse);
+			ll.setOnClickListener(v -> {
+				if (collapsableView.getContentView().getVisibility() == View.VISIBLE) {
+					collapsableView.getContentView().setVisibility(View.GONE);
+					iconViewCollapse.setImageDrawable(getCollapseIcon(true));
+					collapsableView.setCollapsed(true);
+				} else {
+					collapsableView.getContentView().setVisibility(View.VISIBLE);
+					iconViewCollapse.setImageDrawable(getCollapseIcon(false));
+					collapsableView.setCollapsed(false);
+				}
+			});
+			if (collapsableView.isCollapsed()) {
+				collapsableView.getContentView().setVisibility(View.GONE);
+				iconViewCollapse.setImageDrawable(getCollapseIcon(true));
+			}
+			baseView.addView(collapsableView.getContentView());
+		}
+		((LinearLayout) view).addView(baseView);
+	}
+
+	@NonNull
+	public Drawable getCollapseIcon(boolean collapsed) {
+		return iconsCache.getIcon(
+				collapsed ? R.drawable.ic_action_arrow_down : R.drawable.ic_action_arrow_up,
+				isLightContent() ? R.color.icon_color_default_light : R.color.icon_color_default_dark
+		);
+	}
+
+	public void copyToClipboard(String text, Context ctx) {
+		ShareMenu.copyToClipboardWithToast(ctx, text, Toast.LENGTH_SHORT);
+	}
+
+	public boolean isLightContent() {
+		return isLightContent;
+	}
+
+	@ColorInt
+	public int getColor(@ColorRes int resId) {
+		return ColorUtilities.getColor(mapActivity, resId);
+	}
+
+	public int dpToPx(float dp) {
+		return AndroidUtils.dpToPx(app, dp);
+	}
+}
