diff --git a/OsmAnd/res/layout/bottom_sheet_item_in_frame_with_descr_and_icon.xml b/OsmAnd/res/layout/bottom_sheet_item_in_frame_with_descr_and_icon.xml
index a4748728f07..6e64f26691c 100644
--- a/OsmAnd/res/layout/bottom_sheet_item_in_frame_with_descr_and_icon.xml
+++ b/OsmAnd/res/layout/bottom_sheet_item_in_frame_with_descr_and_icon.xml
@@ -46,6 +46,7 @@
 			android:ellipsize="end"
 			android:maxLines="2"
 			android:lineSpacingMultiplier="@dimen/text_button_line_spacing_multiplier"
+			android:textColor="?android:textColorSecondary"
 			android:textSize="@dimen/default_sub_text_size"
 			tools:text="Some description" />
 
diff --git a/OsmAnd/res/layout/download_build_list_item.xml b/OsmAnd/res/layout/download_build_list_item.xml
index c1d1d8f7832..75171d28c97 100644
--- a/OsmAnd/res/layout/download_build_list_item.xml
+++ b/OsmAnd/res/layout/download_build_list_item.xml
@@ -13,6 +13,7 @@
         android:layout_width="0dp"
         android:layout_height="wrap_content"
         android:layout_weight="1"
+	    android:textColor="?android:textColorPrimary"
         android:textSize="@dimen/default_list_text_size"/>
 
     <TextView
@@ -22,6 +23,7 @@
 		android:layout_gravity="center_vertical"
         android:layout_width="90dp"
         android:maxLines="2"
+	    android:textColor="?android:textColorSecondary"
         android:layout_height="wrap_content"
         android:textSize="@dimen/default_desc_text_size"/>
 
diff --git a/OsmAnd/res/layout/fragment_data_storage_place_dialog.xml b/OsmAnd/res/layout/fragment_data_storage_place_dialog.xml
index d0d9d30d29c..c62ee0a14ab 100644
--- a/OsmAnd/res/layout/fragment_data_storage_place_dialog.xml
+++ b/OsmAnd/res/layout/fragment_data_storage_place_dialog.xml
@@ -64,6 +64,7 @@
             android:layout_gravity="fill_horizontal"
             android:layout_marginBottom="24dp"
             android:layout_marginTop="4dp"
+            android:textColor="?android:textColorSecondary"
             android:text="@string/application_dir_description"
             android:textSize="16sp"/>
 
diff --git a/OsmAnd/res/layout/map_marker_item.xml b/OsmAnd/res/layout/map_marker_item.xml
index 0ad46644e02..1bb0b74cb4d 100644
--- a/OsmAnd/res/layout/map_marker_item.xml
+++ b/OsmAnd/res/layout/map_marker_item.xml
@@ -74,7 +74,7 @@
                 android:layout_marginLeft="6dp"
                 android:drawablePadding="2dp"
                 android:maxLines="1"
-                android:textColor="@color/text_color_secondary_dark"
+                android:textColor="?android:textColorSecondary"
                 android:textSize="@dimen/default_sub_text_size"/>
 
             <TextView
@@ -84,7 +84,7 @@
                 android:layout_gravity="bottom"
                 android:ellipsize="end"
                 android:maxLines="1"
-                android:textColor="@color/text_color_secondary_dark"
+                android:textColor="?android:textColorSecondary"
                 android:textSize="@dimen/default_sub_text_size"/>
 
             <TextView
diff --git a/OsmAnd/res/layout/map_marker_item_header.xml b/OsmAnd/res/layout/map_marker_item_header.xml
index 54e4da7a273..4338260b687 100644
--- a/OsmAnd/res/layout/map_marker_item_header.xml
+++ b/OsmAnd/res/layout/map_marker_item_header.xml
@@ -35,6 +35,7 @@
             android:layout_weight="1"
             android:layout_height="match_parent"
             android:gravity="center_vertical"
+	        android:textColor="?android:textColorPrimary"
             tools:text="Today"/>
 
         <android.support.v7.widget.SwitchCompat
@@ -68,6 +69,7 @@
 			android:ellipsize="end"
 			android:maxLines="3"
 			android:textAppearance="@style/TextAppearance.ContextMenuSubtitle"
+			android:textColor="?android:textColorSecondary"
 			tools:text="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard." />
 
 		<net.osmand.plus.widgets.TextViewEx
diff --git a/OsmAnd/src/net/osmand/AndroidUtils.java b/OsmAnd/src/net/osmand/AndroidUtils.java
index f60e069c4c0..3e119e15f0a 100644
--- a/OsmAnd/src/net/osmand/AndroidUtils.java
+++ b/OsmAnd/src/net/osmand/AndroidUtils.java
@@ -28,7 +28,6 @@
 import android.support.annotation.ColorInt;
 import android.support.annotation.ColorRes;
 import android.support.annotation.NonNull;
-import android.support.design.widget.Snackbar;
 import android.support.v4.content.ContextCompat;
 import android.support.v4.content.FileProvider;
 import android.support.v4.text.TextUtilsCompat;
@@ -342,18 +341,6 @@ public static LayerDrawable createProgressDrawable(@ColorInt int bgColor, @Color
 		return res;
 	}
 
-	public static void setSnackbarTextColor(Snackbar snackbar, @ColorRes int colorId) {
-		View view = snackbar.getView();
-		TextView tv = (TextView) view.findViewById(android.support.design.R.id.snackbar_action);
-		tv.setTextColor(ContextCompat.getColor(view.getContext(), colorId));
-	}
-
-	public static void setSnackbarTextMaxLines(Snackbar snackbar, int maxLines) {
-		View view = snackbar.getView();
-		TextView tv = (TextView) view.findViewById(android.support.design.R.id.snackbar_text);
-		tv.setMaxLines(maxLines);
-	}
-
 	public static void setBackground(Context ctx, View view, boolean night, int lightResId, int darkResId) {
 		Drawable drawable;
 		if (Build.VERSION.SDK_INT > Build.VERSION_CODES.LOLLIPOP) {
diff --git a/OsmAnd/src/net/osmand/plus/UiUtilities.java b/OsmAnd/src/net/osmand/plus/UiUtilities.java
index 8ac7996f924..a8c08752baa 100644
--- a/OsmAnd/src/net/osmand/plus/UiUtilities.java
+++ b/OsmAnd/src/net/osmand/plus/UiUtilities.java
@@ -15,6 +15,7 @@
 import android.support.annotation.ColorRes;
 import android.support.annotation.DrawableRes;
 import android.support.annotation.StringRes;
+import android.support.design.widget.Snackbar;
 import android.support.v4.content.ContextCompat;
 import android.support.v4.graphics.drawable.DrawableCompat;
 import android.support.v4.text.TextUtilsCompat;
@@ -343,6 +344,40 @@ public int getScreenOrientation() {
 		return screenOrientation;
 	}
 	
+	public static void setupSnackbar(Snackbar snackbar, boolean nightMode) {
+		setupSnackbar(snackbar, nightMode, null, null, null, null);
+	}
+	
+	public static void setupSnackbar(Snackbar snackbar, boolean nightMode, Integer maxLines) {
+		setupSnackbar(snackbar, nightMode, null, null, null, maxLines);
+	}
+	
+	public static void setupSnackbar(Snackbar snackbar, boolean nightMode, @ColorRes Integer backgroundColor,
+	                                 @ColorRes Integer messageColor, @ColorRes Integer actionColor, Integer maxLines) {
+		if (snackbar == null) {
+			return;
+		}
+		View view = snackbar.getView();
+		Context ctx = view.getContext();
+		TextView tvMessage = (TextView) view.findViewById(android.support.design.R.id.snackbar_text);
+		TextView tvAction = (TextView) view.findViewById(android.support.design.R.id.snackbar_action);
+		if (messageColor == null) {
+			messageColor = nightMode ? R.color.text_color_primary_dark : R.color.text_color_primary_light;
+		}
+		tvMessage.setTextColor(ContextCompat.getColor(ctx, messageColor));
+		if (actionColor == null) {
+			actionColor = nightMode ? R.color.active_color_primary_dark : R.color.active_color_primary_light;
+		}
+		tvAction.setTextColor(ContextCompat.getColor(ctx, actionColor));
+		if (maxLines != null) {
+			tvMessage.setMaxLines(maxLines);
+		}
+		if (backgroundColor == null) {
+			backgroundColor = nightMode ? R.color.list_background_color_dark : R.color.list_background_color_light;
+		}
+		view.setBackgroundColor(ContextCompat.getColor(ctx, backgroundColor));
+	}
+	
 	public static void setupLayoutDirection(View layout) {
 		Context ctx = layout.getContext();
 		Locale currentLocale = ctx.getResources().getConfiguration().locale;
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/CoordinateInputDialogFragment.java b/OsmAnd/src/net/osmand/plus/mapmarkers/CoordinateInputDialogFragment.java
index acaceda8a7d..3ed13c1ffde 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/CoordinateInputDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/CoordinateInputDialogFragment.java
@@ -65,6 +65,7 @@
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.OsmandSettings;
 import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities;
 import net.osmand.plus.Version;
 import net.osmand.plus.activities.SavingTrackHelper;
 import net.osmand.plus.activities.TrackActivity;
@@ -1092,7 +1093,7 @@ public void onClick(View view) {
 								startActivity(intent);
 							}
 						});
-				AndroidUtils.setSnackbarTextColor(snackbar, R.color.active_color_primary_dark);
+				UiUtilities.setupSnackbar(snackbar, !lightTheme);
 				snackbar.show();
 			}
 		};
@@ -1119,7 +1120,7 @@ public void onClick(View view) {
 								adapter.notifyDataSetChanged();
 							}
 						});
-				AndroidUtils.setSnackbarTextColor(snackbar, R.color.active_color_primary_dark);
+				UiUtilities.setupSnackbar(snackbar, !lightTheme);
 				snackbar.show();
 			}
 
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersDialogFragment.java b/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersDialogFragment.java
index ff628d377e4..0caa56c3555 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersDialogFragment.java
@@ -33,6 +33,7 @@
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.OsmandSettings;
 import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.activities.TrackActivity;
 import net.osmand.plus.mapmarkers.CoordinateInputDialogFragment.OnPointsSavedListener;
@@ -449,7 +450,7 @@ public void onClick(View view) {
 									}
 								}
 							});
-					AndroidUtils.setSnackbarTextColor(snackbar, R.color.active_color_primary_dark);
+					UiUtilities.setupSnackbar(snackbar, !lightTheme);
 					snackbar.show();
 				}
 			}
@@ -494,7 +495,7 @@ public void onClick(View view) {
 								startActivity(intent);
 							}
 						});
-				AndroidUtils.setSnackbarTextColor(snackbar, R.color.active_color_primary_dark);
+				UiUtilities.setupSnackbar(snackbar, !lightTheme);
 				snackbar.show();
 			}
 		};
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersGroupsFragment.java b/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersGroupsFragment.java
index 1ed66667260..f176c016c24 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersGroupsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersGroupsFragment.java
@@ -207,7 +207,7 @@ public void onClick(View view) {
 									updateAdapter();
 								}
 							});
-					AndroidUtils.setSnackbarTextColor(snackbar, R.color.active_color_primary_dark);
+					UiUtilities.setupSnackbar(snackbar, night);
 					snackbar.show();
 				}
 			}
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersHistoryFragment.java b/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersHistoryFragment.java
index 260efd704db..5729e38bbf3 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersHistoryFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/MapMarkersHistoryFragment.java
@@ -171,8 +171,7 @@ public void onClick(View view) {
 									}
 								}
 							});
-					AndroidUtils.setSnackbarTextColor(snackbar, night ? R.color.active_color_primary_dark : R.color.active_color_primary_light);
-					snackbar.getView().setBackgroundColor(ContextCompat.getColor(app, night ? R.color.list_background_color_dark : R.color.list_background_color_light));
+					UiUtilities.setupSnackbar(snackbar, night);
 					snackbar.show();
 				}
 			}
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/SelectWptCategoriesBottomSheetDialogFragment.java b/OsmAnd/src/net/osmand/plus/mapmarkers/SelectWptCategoriesBottomSheetDialogFragment.java
index df26ab25619..83f23ac7e96 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/SelectWptCategoriesBottomSheetDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/SelectWptCategoriesBottomSheetDialogFragment.java
@@ -48,6 +48,7 @@ public void createMenuItems(Bundle savedInstanceState) {
 		if (gpxFile == null) {
 			return;
 		}
+		int activeColorResId = nightMode ? R.color.active_color_primary_dark : R.color.active_color_primary_light;
 		isUpdateMode = getArguments().getBoolean(UPDATE_CATEGORIES_KEY);
 		List<String> categories = getArguments().getStringArrayList(ACTIVE_CATEGORIES_KEY);
 
@@ -58,6 +59,7 @@ public void createMenuItems(Bundle savedInstanceState) {
 		final BottomSheetItemWithCompoundButton[] selectAllItem = new BottomSheetItemWithCompoundButton[1];
 		selectAllItem[0] = (BottomSheetItemWithCompoundButton) new BottomSheetItemWithCompoundButton.Builder()
 				.setChecked(!isUpdateMode || categories!=null&&categories.size() == gpxFile.getPointsByCategories().size())
+				.setCompoundButtonColorId(activeColorResId)
 				.setDescription(getString(R.string.shared_string_total) + ": " + gpxFile.getPoints().size())
 				.setIcon(getContentIcon(R.drawable.ic_action_group_select_all))
 				.setTitle(getString(R.string.shared_string_select_all))
@@ -93,6 +95,7 @@ public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
 							}
 						}
 					})
+					.setCompoundButtonColorId(activeColorResId)
 					.setDescription(String.valueOf(pointsByCategories.get(category).size()))
 					.setIcon(getContentIcon(R.drawable.ic_action_folder))
 					.setTitle(category.equals("") ? getString(R.string.shared_string_waypoints) : category)
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersActiveAdapter.java b/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersActiveAdapter.java
index 37c41b14cd9..3d487e38314 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersActiveAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersActiveAdapter.java
@@ -74,6 +74,7 @@ public void onBindViewHolder(final MapMarkerItemViewHolder holder, final int pos
 		ImageView markerImageViewToUpdate;
 		int drawableResToUpdate;
 		int markerColor = MapMarker.getColorId(marker.colorIndex);
+		int actionIconColor = night ? R.color.icon_color_primary_dark : R.color.icon_color_primary_light;
 		LatLon markerLatLon = new LatLon(marker.getLatitude(), marker.getLongitude());
 		final boolean displayedInWidget = pos < mapActivity.getMyApplication().getSettings().DISPLAYED_MARKERS_WIDGETS_COUNT.get();
 		if (showDirectionEnabled && displayedInWidget) {
@@ -98,7 +99,7 @@ public void onBindViewHolder(final MapMarkerItemViewHolder holder, final int pos
 			holder.title.setTextColor(ContextCompat.getColor(mapActivity, night ? R.color.text_color_primary_dark : R.color.text_color_primary_light));
 			holder.divider.setBackgroundColor(ContextCompat.getColor(mapActivity, night ? R.color.app_bar_color_dark : R.color.divider_color_light));
 			holder.optionsBtn.setBackgroundDrawable(mapActivity.getResources().getDrawable(night ? R.drawable.marker_circle_background_dark_with_inset : R.drawable.marker_circle_background_light_with_inset));
-			holder.optionsBtn.setImageDrawable(iconsCache.getIcon(R.drawable.ic_action_marker_passed, night ? R.color.active_buttons_and_links_text_dark : R.color.active_buttons_and_links_text_light));
+			holder.optionsBtn.setImageDrawable(iconsCache.getIcon(R.drawable.ic_action_marker_passed, actionIconColor));
 			holder.iconReorder.setImageDrawable(iconsCache.getThemedIcon(R.drawable.ic_action_reorder));
 			holder.description.setTextColor(ContextCompat.getColor(mapActivity, night ? R.color.icon_color_default_dark : R.color.icon_color_default_light));
 
@@ -162,8 +163,7 @@ public void onClick(View view) {
 								notifyDataSetChanged();
 							}
 						});
-				AndroidUtils.setSnackbarTextColor(snackbar, night ? R.color.active_color_primary_dark : R.color.active_color_primary_light);
-				snackbar.getView().setBackgroundColor(ContextCompat.getColor(mapActivity, night ? R.color.list_background_color_dark : R.color.list_background_color_light));
+				UiUtilities.setupSnackbar(snackbar, night);
 				snackbar.show();
 			}
 		});
@@ -229,8 +229,7 @@ public void onClick(View view) {
 						notifyDataSetChanged();
 					}
 				});
-		AndroidUtils.setSnackbarTextColor(snackbar, night ? R.color.active_color_primary_dark : R.color.active_color_primary_light);
-		snackbar.getView().setBackgroundColor(ContextCompat.getColor(mapActivity, night ? R.color.list_background_color_dark : R.color.list_background_color_light));
+		UiUtilities.setupSnackbar(snackbar, night);
 		snackbar.show();
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersGroupsAdapter.java b/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersGroupsAdapter.java
index b467669aad9..8e22fb27063 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersGroupsAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersGroupsAdapter.java
@@ -12,7 +12,6 @@
 import android.widget.CompoundButton;
 import android.widget.ImageView;
 
-import net.osmand.AndroidUtils;
 import net.osmand.IndexConstants;
 import net.osmand.data.LatLon;
 import net.osmand.GPXUtilities;
@@ -272,6 +271,7 @@ public void onBindViewHolder(final RecyclerView.ViewHolder holder, final int pos
 			}
 			ImageView markerImageViewToUpdate;
 			int drawableResToUpdate;
+			int actionIconColor = night ? R.color.icon_color_primary_dark : R.color.icon_color_primary_light;
 			final boolean markerToHighlight = showDirectionMarkers.contains(marker);
 			if (showDirectionEnabled && markerToHighlight) {
 				itemViewHolder.iconDirection.setVisibility(View.GONE);
@@ -294,8 +294,7 @@ public void onBindViewHolder(final RecyclerView.ViewHolder holder, final int pos
 				itemViewHolder.title.setTextColor(ContextCompat.getColor(mapActivity, night ? R.color.text_color_primary_dark : R.color.text_color_primary_light));
 				itemViewHolder.divider.setBackgroundColor(ContextCompat.getColor(mapActivity, night ? R.color.app_bar_color_dark : R.color.divider_color_light));
 				itemViewHolder.optionsBtn.setBackgroundDrawable(mapActivity.getResources().getDrawable(night ? R.drawable.marker_circle_background_dark_with_inset : R.drawable.marker_circle_background_light_with_inset));
-				itemViewHolder.optionsBtn.setImageDrawable(iconsCache.getIcon(markerInHistory ? R.drawable.ic_action_reset_to_default_dark : R.drawable.ic_action_marker_passed,
-						night ? R.color.icon_color_primary_dark : R.color.active_buttons_and_links_text_light));
+				itemViewHolder.optionsBtn.setImageDrawable(iconsCache.getIcon(markerInHistory ? R.drawable.ic_action_reset_to_default_dark : R.drawable.ic_action_marker_passed, actionIconColor));
 				itemViewHolder.description.setTextColor(ContextCompat.getColor(mapActivity, night ? R.color.icon_color_default_dark : R.color.icon_color_default_light));
 
 				drawableResToUpdate = R.drawable.ic_direction_arrow;
@@ -354,8 +353,7 @@ public void onClick(View view) {
 										updateDisplayedData();
 									}
 								});
-						AndroidUtils.setSnackbarTextColor(snackbar, night ? R.color.active_color_primary_dark : R.color.active_color_primary_light);
-						snackbar.getView().setBackgroundColor(ContextCompat.getColor(app, night ? R.color.list_background_color_dark : R.color.list_background_color_light));
+						UiUtilities.setupSnackbar(snackbar, night);
 						snackbar.show();
 					}
 				}
@@ -490,7 +488,7 @@ public void onClick(View view) {
 											mapMarkersHelper.enableGroup(group);
 										}
 									});
-							AndroidUtils.setSnackbarTextColor(snackbar, R.color.active_color_primary_dark);
+							UiUtilities.setupSnackbar(snackbar, night);
 							snackbar.show();
 						}
 					}
@@ -498,6 +496,7 @@ public void onClick(View view) {
 				headerViewHolder.disableGroupSwitch.setOnCheckedChangeListener(null);
 				headerViewHolder.disableGroupSwitch.setChecked(!groupIsDisabled);
 				headerViewHolder.disableGroupSwitch.setOnCheckedChangeListener(checkedChangeListener);
+				UiUtilities.setupCompoundButton(headerViewHolder.disableGroupSwitch, night, UiUtilities.CompoundButtonType.GLOBAL);
 			} else {
 				throw new IllegalArgumentException("Unsupported header");
 			}
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersHistoryAdapter.java b/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersHistoryAdapter.java
index 468828b4b5f..a35e0e16348 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersHistoryAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/adapters/MapMarkersHistoryAdapter.java
@@ -118,7 +118,8 @@ public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {
 			final MapMarker marker = (MapMarker) getItem(position);
 			itemViewHolder.iconReorder.setVisibility(View.GONE);
 
-			int color = R.color.icon_color_default_dark;
+			int color = night ? R.color.icon_color_default_dark : R.color.icon_color_default_light;
+			int actionIconColor = night ? R.color.icon_color_primary_dark : R.color.icon_color_primary_light;
 			itemViewHolder.icon.setImageDrawable(iconsCache.getIcon(R.drawable.ic_action_flag_dark, color));
 
 			itemViewHolder.title.setText(marker.getName(app));
@@ -134,7 +135,7 @@ public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {
 			itemViewHolder.description.setText(desc);
 
 			itemViewHolder.optionsBtn.setBackgroundDrawable(app.getResources().getDrawable(night ? R.drawable.marker_circle_background_dark_with_inset : R.drawable.marker_circle_background_light_with_inset));
-			itemViewHolder.optionsBtn.setImageDrawable(iconsCache.getThemedIcon(R.drawable.ic_action_reset_to_default_dark));
+			itemViewHolder.optionsBtn.setImageDrawable(iconsCache.getIcon(R.drawable.ic_action_reset_to_default_dark, actionIconColor));
 			itemViewHolder.optionsBtn.setOnClickListener(new View.OnClickListener() {
 				@Override
 				public void onClick(View view) {
@@ -151,8 +152,7 @@ public void onClick(View view) {
 									app.getMapMarkersHelper().moveMapMarkerToHistory(marker);
 								}
 							});
-					AndroidUtils.setSnackbarTextColor(snackbar, night ? R.color.active_color_primary_dark : R.color.active_color_primary_light);
-					snackbar.getView().setBackgroundColor(ContextCompat.getColor(app, night ? R.color.list_background_color_dark : R.color.list_background_color_light));
+					UiUtilities.setupSnackbar(snackbar, night);
 					snackbar.show();
 				}
 			});
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/TrackPointFragment.java b/OsmAnd/src/net/osmand/plus/myplaces/TrackPointFragment.java
index 60482b3b6a6..dd8ba618b31 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/TrackPointFragment.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/TrackPointFragment.java
@@ -550,7 +550,8 @@ public void onDismissed(Snackbar transientBottomBar, int event) {
 					super.onDismissed(transientBottomBar, event);
 				}
 			});
-			AndroidUtils.setSnackbarTextColor(snackbar, R.color.active_color_primary_dark);
+			boolean nightMode = !app.getSettings().isLightContent();
+			UiUtilities.setupSnackbar(snackbar, nightMode);
 			snackbar.show();
 		}
 	}
diff --git a/OsmAnd/src/net/osmand/plus/profiles/SelectProfileBottomSheetDialogFragment.java b/OsmAnd/src/net/osmand/plus/profiles/SelectProfileBottomSheetDialogFragment.java
index 680486886f4..470bfd23223 100644
--- a/OsmAnd/src/net/osmand/plus/profiles/SelectProfileBottomSheetDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/profiles/SelectProfileBottomSheetDialogFragment.java
@@ -220,7 +220,7 @@ public void onClick(View view) {
 	private void addButtonItem(int titleId, int iconId, OnClickListener listener) {
 		OsmandApplication app = requiredMyApplication();
 		
-		int activeColorResId = nightMode ? R.color.active_color_primary_dark : R.color.active_color_primary_light;
+		int activeColorResId = isNightMode(app) ? R.color.active_color_primary_dark : R.color.active_color_primary_light;
 		
 		View buttonView = View.inflate(app, R.layout.bottom_sheet_item_preference_btn, null);
 		TextView tvTitle = buttonView.findViewById(R.id.title);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
index 610776db995..54be82b4f7b 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
@@ -1405,8 +1405,7 @@ public void onClick(View view) {
 							ctx.startActivity(Intent.createChooser(intent, ctx.getString(R.string.send_location)));
 						}
 					});
-			AndroidUtils.setSnackbarTextColor(snackbar, R.color.active_color_primary_dark);
-			AndroidUtils.setSnackbarTextMaxLines(snackbar, 5);
+			UiUtilities.setupSnackbar(snackbar, nightMode, 5);
 			snackbar.show();
 		}
 
diff --git a/OsmAnd/src/net/osmand/plus/wikivoyage/explore/SavedArticlesRvAdapter.java b/OsmAnd/src/net/osmand/plus/wikivoyage/explore/SavedArticlesRvAdapter.java
index a07fe37927e..264d9f723c0 100644
--- a/OsmAnd/src/net/osmand/plus/wikivoyage/explore/SavedArticlesRvAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/wikivoyage/explore/SavedArticlesRvAdapter.java
@@ -204,7 +204,10 @@ public void onClick(View view) {
 										ldh.restoreSavedArticle(article);
 									}
 								});
-						AndroidUtils.setSnackbarTextColor(snackbar, R.color.wikivoyage_active_dark);
+						boolean nightMode = !settings.isLightContent();
+						UiUtilities.setupSnackbar(snackbar, nightMode);
+						int wikivoyageActiveColorResId = nightMode ? R.color.wikivoyage_active_dark : R.color.wikivoyage_active_light;
+						UiUtilities.setupSnackbar(snackbar, nightMode, null, null, wikivoyageActiveColorResId, null);
 						snackbar.show();
 					}
 				}
