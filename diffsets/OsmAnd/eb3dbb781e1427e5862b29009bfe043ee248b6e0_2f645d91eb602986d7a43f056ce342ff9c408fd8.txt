diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementEditingContext.java b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementEditingContext.java
index 6df224abfd3..a8464ebde2b 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementEditingContext.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementEditingContext.java
@@ -122,6 +122,10 @@ public void setNewGpxData(NewGpxData newGpxData) {
 		this.newGpxData = newGpxData;
 	}
 
+	public boolean hasRoutePoints() {
+		return newGpxData != null && newGpxData.getGpxFile() != null && newGpxData.getGpxFile().hasRtePt();
+	}
+
 	public CalculationType getCalculationType() {
 		return calculationType;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
index a089fc1d155..5321f8a5d64 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
@@ -74,8 +74,8 @@
 import net.osmand.plus.measurementtool.command.ReorderPointCommand;
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.OsmandSettings;
-import net.osmand.plus.views.layers.MapControlsLayer;
 import net.osmand.plus.views.controls.ReorderItemTouchHelperCallback;
+import net.osmand.plus.views.layers.MapControlsLayer;
 import net.osmand.plus.views.mapwidgets.MapInfoWidgetsFactory.TopToolbarController;
 import net.osmand.plus.views.mapwidgets.MapInfoWidgetsFactory.TopToolbarControllerType;
 import net.osmand.plus.views.mapwidgets.MapInfoWidgetsFactory.TopToolbarView;
@@ -90,19 +90,17 @@
 import java.util.Locale;
 
 import static net.osmand.IndexConstants.GPX_FILE_EXT;
-import static net.osmand.plus.measurementtool.GpxApproximationFragment.*;
+import static net.osmand.plus.measurementtool.GpxApproximationFragment.GpxApproximationFragmentListener;
 import static net.osmand.plus.measurementtool.MeasurementEditingContext.CalculationType;
 import static net.osmand.plus.measurementtool.MeasurementEditingContext.ExportAsGpxListener;
 import static net.osmand.plus.measurementtool.MeasurementEditingContext.SnapToRoadProgressListener;
 import static net.osmand.plus.measurementtool.SelectFileBottomSheet.Mode.ADD_TO_TRACK;
 import static net.osmand.plus.measurementtool.SelectFileBottomSheet.Mode.OPEN_TRACK;
 import static net.osmand.plus.measurementtool.SelectFileBottomSheet.SelectFileListener;
-import static net.osmand.plus.measurementtool.SnapTrackWarningBottomSheet.SnapTrackWarningListener;
 import static net.osmand.plus.measurementtool.StartPlanRouteBottomSheet.StartPlanRouteListener;
 
-public class MeasurementToolFragment extends BaseOsmAndFragment
-		implements RouteBetweenPointsFragmentListener, GpxApproximationFragmentListener, OptionsFragmentListener,
-		SnapTrackWarningListener {
+public class MeasurementToolFragment extends BaseOsmAndFragment implements RouteBetweenPointsFragmentListener,
+		GpxApproximationFragmentListener, OptionsFragmentListener {
 
 	public static final String TAG = MeasurementToolFragment.class.getSimpleName();
 
@@ -607,7 +605,7 @@ private void updateMainIcon() {
 		}
 	}
 
-	private void showRouteBetweenPointsMenu(boolean rememberPreviousTitle) {
+	private void startSnapToRoad(boolean rememberPreviousTitle) {
 		MapActivity mapActivity = getMapActivity();
 		if (mapActivity != null) {
 			if (rememberPreviousTitle) {
@@ -615,31 +613,40 @@ private void showRouteBetweenPointsMenu(boolean rememberPreviousTitle) {
 			}
 			toolBarController.setTitle(getString(R.string.route_between_points));
 			mapActivity.refreshMap();
+
+			if (editingCtx.hasRoutePoints()) {
 				RouteBetweenPointsBottomSheetDialogFragment.showInstance(mapActivity.getSupportFragmentManager(),
 						this, editingCtx.getCalculationType(),
 						editingCtx.getSnapToRoadAppMode());
+			} else {
+				SnapTrackWarningBottomSheet.showInstance(mapActivity.getSupportFragmentManager(), this);
+			}
 		}
 	}
 
 	@Override
-	public void continueButtonOnClick() {
-		MapActivity mapActivity = getMapActivity();
-		if (mapActivity != null) {
-
-			GpxApproximationFragment.showInstance(mapActivity.getSupportFragmentManager(),
-					MeasurementToolFragment.this);
+	public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
+		super.onActivityResult(requestCode, resultCode, data);
+		if (requestCode == SnapTrackWarningBottomSheet.REQUEST_CODE) {
+			switch (resultCode) {
+				case SnapTrackWarningBottomSheet.CANCEL_REQUEST_CODE:
+					toolBarController.setSaveViewVisible(true);
+					updateToolbar();
+					break;
+				case SnapTrackWarningBottomSheet.CONTINUE_REQUEST_CODE:
+					MapActivity mapActivity = getMapActivity();
+					if (mapActivity != null) {
+						GpxApproximationFragment.showInstance(mapActivity.getSupportFragmentManager(),
+								MeasurementToolFragment.this);
+					}
+					break;
+			}
 		}
 	}
 
-	@Override
-	public void dismissButtonOnClick() {
-		toolBarController.setSaveViewVisible(true);
-		updateToolbar();
-	}
-
 	@Override
 	public void snapToRoadOnCLick() {
-		showRouteBetweenPointsMenu(true);
+		startSnapToRoad(true);
 	}
 
 	@Override
@@ -780,7 +787,7 @@ public void onClearSelection() {
 	}
 
 	@Override
-	public void onDestroyView(boolean snapToRoadEnabled) {
+	public void onCloseRouteDialog(boolean snapToRoadEnabled) {
 		if (!snapToRoadEnabled && !editingCtx.isInSnapToRoadMode()) {
 			toolBarController.setTitle(previousToolBarTitle);
 			MapActivity mapActivity = getMapActivity();
@@ -791,7 +798,7 @@ public void onDestroyView(boolean snapToRoadEnabled) {
 	}
 
 	@Override
-	public void onApplicationModeItemClick(ApplicationMode mode) {
+	public void onChangeApplicationMode(ApplicationMode mode) {
 		if (mode == null) {
 			disableSnapToRoadMode();
 			editingCtx.setSnapToRoadAppMode(null);
@@ -802,7 +809,7 @@ public void onApplicationModeItemClick(ApplicationMode mode) {
 	}
 
 	@Override
-	public void onCalculationTypeChanges(CalculationType calculationType) {
+	public void onChangeCalculationType(CalculationType calculationType) {
 		editingCtx.setCalculationType(calculationType);
 	}
 
@@ -1010,7 +1017,7 @@ private void showSnapToRoadControls() {
 			snapToRoadBtn.setOnClickListener(new View.OnClickListener() {
 				@Override
 				public void onClick(View view) {
-					showRouteBetweenPointsMenu(false);
+					startSnapToRoad(false);
 				}
 			});
 			snapToRoadBtn.setVisibility(View.VISIBLE);
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/RouteBetweenPointsBottomSheetDialogFragment.java b/OsmAnd/src/net/osmand/plus/measurementtool/RouteBetweenPointsBottomSheetDialogFragment.java
index ea573371468..386483d7828 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/RouteBetweenPointsBottomSheetDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/RouteBetweenPointsBottomSheetDialogFragment.java
@@ -106,7 +106,7 @@ public void onClick(View view) {
 					snapToRoadEnabled = true;
 					Fragment fragment = getTargetFragment();
 					if (fragment instanceof RouteBetweenPointsFragmentListener) {
-						((RouteBetweenPointsFragmentListener) fragment).onApplicationModeItemClick(mode);
+						((RouteBetweenPointsFragmentListener) fragment).onChangeApplicationMode(mode);
 					}
 				}
 				dismiss();
@@ -160,7 +160,7 @@ private void updateModeButtons(CalculationType calculationType) {
 		setCalculationType(calculationType);
 		Fragment fragment = getTargetFragment();
 		if (fragment instanceof RouteBetweenPointsFragmentListener) {
-			((RouteBetweenPointsFragmentListener) fragment).onCalculationTypeChanges(calculationType);
+			((RouteBetweenPointsFragmentListener) fragment).onChangeCalculationType(calculationType);
 		}
 	}
 
@@ -203,7 +203,7 @@ public void onSaveInstanceState(@NonNull Bundle outState) {
 	public void onDestroyView() {
 		Fragment fragment = getTargetFragment();
 		if (fragment instanceof RouteBetweenPointsFragmentListener) {
-			((RouteBetweenPointsFragmentListener) fragment).onDestroyView(snapToRoadEnabled);
+			((RouteBetweenPointsFragmentListener) fragment).onCloseRouteDialog(snapToRoadEnabled);
 		}
 		super.onDestroyView();
 	}
@@ -231,10 +231,10 @@ public static void showInstance(FragmentManager fm, Fragment targetFragment, Cal
 
 	public interface RouteBetweenPointsFragmentListener {
 
-		void onDestroyView(boolean snapToRoadEnabled);
+		void onCloseRouteDialog(boolean snapToRoadEnabled);
 
-		void onApplicationModeItemClick(ApplicationMode mode);
+		void onChangeApplicationMode(ApplicationMode mode);
 
-		void onCalculationTypeChanges(CalculationType calculationType);
+		void onChangeCalculationType(CalculationType calculationType);
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/SnapTrackWarningBottomSheet.java b/OsmAnd/src/net/osmand/plus/measurementtool/SnapTrackWarningBottomSheet.java
index 9839474c6d0..f91aba9464a 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/SnapTrackWarningBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/SnapTrackWarningBottomSheet.java
@@ -22,6 +22,10 @@
 
 public class SnapTrackWarningBottomSheet extends MenuBottomSheetDialogFragment {
 
+	public static final int REQUEST_CODE = 1000;
+	public static final int CANCEL_REQUEST_CODE = 2;
+	public static final int CONTINUE_REQUEST_CODE = 3;
+
 	public static final String TAG = SnapTrackWarningBottomSheet.class.getSimpleName();
 	private static final Log LOG = PlatformUtil.getLog(SnapTrackWarningBottomSheet.class);
 
@@ -53,8 +57,8 @@ protected int getRightBottomButtonTextId() {
 	@Override
 	protected void onRightBottomButtonClick() {
 		Fragment fragment = getTargetFragment();
-		if (fragment instanceof SnapTrackWarningListener) {
-			((SnapTrackWarningListener) fragment).continueButtonOnClick();
+		if (fragment != null) {
+			fragment.onActivityResult(REQUEST_CODE, CONTINUE_REQUEST_CODE, null);
 		}
 		dismiss();
 	}
@@ -72,8 +76,8 @@ public void onDestroyView() {
 			activity.findViewById(R.id.snap_to_road_image_button).setVisibility(View.VISIBLE);
 		}
 		Fragment fragment = getTargetFragment();
-		if (fragment instanceof SnapTrackWarningListener) {
-			((SnapTrackWarningListener) fragment).dismissButtonOnClick();
+		if (fragment != null) {
+			fragment.onActivityResult(REQUEST_CODE, CANCEL_REQUEST_CODE, null);
 		}
 	}
 
@@ -81,7 +85,7 @@ public static void showInstance(FragmentManager fm, Fragment targetFragment) {
 		try {
 			if (!fm.isStateSaved()) {
 				SnapTrackWarningBottomSheet fragment = new SnapTrackWarningBottomSheet();
-				fragment.setTargetFragment(targetFragment, 0);
+				fragment.setTargetFragment(targetFragment, REQUEST_CODE);
 				fm.beginTransaction()
 						.add(R.id.bottomFragmentContainer, fragment, TAG)
 						.commitAllowingStateLoss();
@@ -90,12 +94,4 @@ public static void showInstance(FragmentManager fm, Fragment targetFragment) {
 			LOG.error("showInstance", e);
 		}
 	}
-
-	interface SnapTrackWarningListener {
-
-		void continueButtonOnClick();
-
-		void dismissButtonOnClick();
-
-	}
 }
