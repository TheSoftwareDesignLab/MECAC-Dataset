diff --git a/OsmAnd/res/layout/add_widget_fragment_content.xml b/OsmAnd/res/layout/add_widget_fragment_content.xml
new file mode 100644
index 00000000000..e0e713b7ca2
--- /dev/null
+++ b/OsmAnd/res/layout/add_widget_fragment_content.xml
@@ -0,0 +1,75 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:osmand="http://schemas.android.com/apk/res-auto"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content"
+	android:orientation="vertical">
+
+	<net.osmand.plus.widgets.TextViewEx
+		android:id="@+id/description"
+		style="@style/TitleStyle"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginStart="@dimen/content_padding"
+		android:layout_marginTop="@dimen/content_padding"
+		android:layout_marginEnd="@dimen/content_padding"
+		android:textColor="?android:textColorPrimary"
+		tools:text="This is description of widget or widget group, that can be very long and take many lines" />
+
+	<LinearLayout
+		android:id="@+id/widgets_container"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginStart="@dimen/content_padding"
+		android:layout_marginTop="@dimen/content_padding"
+		android:layout_marginEnd="@dimen/content_padding"
+		android:orientation="vertical"
+		tools:layout_height="@dimen/content_padding"
+		tools:background="?attr/divider_color_basic" />
+
+	<LinearLayout
+		android:id="@+id/secondary_info_container"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginTop="@dimen/content_padding_small"
+		android:orientation="vertical"
+		android:visibility="gone"
+		tools:visibility="visible">
+
+		<View
+			android:layout_width="match_parent"
+			android:layout_height="1dp"
+			android:background="?attr/divider_color_basic" />
+
+		<LinearLayout
+			android:layout_width="match_parent"
+			android:layout_height="wrap_content"
+			android:orientation="horizontal"
+			android:layout_marginTop="@dimen/content_padding_small">
+
+			<net.osmand.plus.widgets.TextViewEx
+				android:id="@+id/secondary_description"
+				style="@style/DescStyle"
+				android:layout_width="0dp"
+				android:layout_height="wrap_content"
+				android:layout_weight="1"
+				android:layout_marginStart="@dimen/content_padding"
+				android:textColor="?android:textColorSecondary"
+				tools:text="This is additional (and optional) multiline description of widget" />
+
+			<androidx.appcompat.widget.AppCompatImageView
+				android:id="@+id/secondary_icon"
+				android:layout_width="@dimen/title_padding"
+				android:layout_height="@dimen/title_padding"
+				android:layout_marginStart="@dimen/dialog_button_height"
+				android:layout_marginTop="@dimen/favorites_icon_padding"
+				android:layout_marginEnd="@dimen/content_padding"
+				osmand:srcCompat="@drawable/ic_action_help"
+				android:tint="?android:textColorSecondary" />
+
+		</LinearLayout>
+
+	</LinearLayout>
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/fragment_add_widget.xml b/OsmAnd/res/layout/base_widget_fragment_layout.xml
similarity index 61%
rename from OsmAnd/res/layout/fragment_add_widget.xml
rename to OsmAnd/res/layout/base_widget_fragment_layout.xml
index 6d1993d4b4a..8abdb6a44c7 100644
--- a/OsmAnd/res/layout/fragment_add_widget.xml
+++ b/OsmAnd/res/layout/base_widget_fragment_layout.xml
@@ -105,71 +105,10 @@
 				android:layout_height="wrap_content"
 				android:orientation="vertical">
 
-				<net.osmand.plus.widgets.TextViewEx
-					android:id="@+id/description"
-					style="@style/TitleStyle"
+				<FrameLayout
+					android:id="@+id/main_content"
 					android:layout_width="match_parent"
-					android:layout_height="wrap_content"
-					android:layout_marginStart="@dimen/content_padding"
-					android:layout_marginTop="@dimen/content_padding"
-					android:layout_marginEnd="@dimen/content_padding"
-					android:textColor="?android:textColorPrimary"
-					tools:text="This is description of widget or widget group, that can be very long and take many lines" />
-
-				<LinearLayout
-					android:id="@+id/widgets_container"
-					android:layout_width="match_parent"
-					android:layout_height="wrap_content"
-					android:layout_marginStart="@dimen/content_padding"
-					android:layout_marginTop="@dimen/content_padding"
-					android:layout_marginEnd="@dimen/content_padding"
-					android:orientation="vertical"
-					tools:layout_height="@dimen/content_padding"
-					tools:background="?attr/divider_color_basic" />
-
-				<LinearLayout
-					android:id="@+id/secondary_info_container"
-					android:layout_width="match_parent"
-					android:layout_height="wrap_content"
-					android:layout_marginTop="@dimen/content_padding_small"
-					android:orientation="vertical"
-					android:visibility="gone"
-					tools:visibility="visible">
-
-					<View
-						android:layout_width="match_parent"
-						android:layout_height="1dp"
-						android:background="?attr/divider_color_basic" />
-
-					<LinearLayout
-						android:layout_width="match_parent"
-						android:layout_height="wrap_content"
-						android:orientation="horizontal"
-						android:layout_marginTop="@dimen/content_padding_small">
-
-						<net.osmand.plus.widgets.TextViewEx
-							android:id="@+id/secondary_description"
-							style="@style/DescStyle"
-							android:layout_width="0dp"
-							android:layout_height="wrap_content"
-							android:layout_weight="1"
-							android:layout_marginStart="@dimen/content_padding"
-							android:textColor="?android:textColorSecondary"
-							tools:text="This is additional (and optional) multiline description of widget" />
-
-						<androidx.appcompat.widget.AppCompatImageView
-							android:id="@+id/secondary_icon"
-							android:layout_width="@dimen/title_padding"
-							android:layout_height="@dimen/title_padding"
-							android:layout_marginStart="@dimen/dialog_button_height"
-							android:layout_marginTop="@dimen/favorites_icon_padding"
-							android:layout_marginEnd="@dimen/content_padding"
-							osmand:srcCompat="@drawable/ic_action_help"
-							android:tint="?android:textColorSecondary" />
-
-					</LinearLayout>
-
-				</LinearLayout>
+					android:layout_height="wrap_content" />
 
 				<View
 					android:layout_width="match_parent"
diff --git a/OsmAnd/res/layout/configure_screen_widget_item.xml b/OsmAnd/res/layout/configure_screen_widget_item.xml
index 8ea3b32d0e1..9a8c3f02381 100644
--- a/OsmAnd/res/layout/configure_screen_widget_item.xml
+++ b/OsmAnd/res/layout/configure_screen_widget_item.xml
@@ -1,6 +1,7 @@
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 	xmlns:tools="http://schemas.android.com/tools"
+	xmlns:app="http://schemas.android.com/apk/res-auto"
 	android:id="@+id/button_container"
 	android:layout_width="match_parent"
 	android:layout_height="wrap_content"
@@ -50,13 +51,14 @@
 
 	</LinearLayout>
 
-	<androidx.appcompat.widget.AppCompatImageView
-		android:id="@+id/secondary_icon"
+	<androidx.appcompat.widget.AppCompatImageButton
+		android:id="@+id/settings_icon"
+		style="@style/Widget.AppCompat.ActionButton"
 		android:layout_width="@dimen/standard_icon_size"
 		android:layout_height="@dimen/standard_icon_size"
 		android:layout_gravity="center_vertical"
 		android:layout_margin="@dimen/content_padding"
-		android:tint="?attr/default_icon_color"
-		tools:src="@drawable/ic_action_additional_option" />
+		app:srcCompat="@drawable/ic_action_settings"
+		android:tint="?attr/default_icon_color" />
 
 </LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/elevation_profile_widget_settings.xml b/OsmAnd/res/layout/elevation_profile_widget_settings.xml
new file mode 100644
index 00000000000..05d0b01d891
--- /dev/null
+++ b/OsmAnd/res/layout/elevation_profile_widget_settings.xml
@@ -0,0 +1,52 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content"
+	android:orientation="vertical">
+
+	<LinearLayout
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:orientation="horizontal"
+		android:minHeight="@dimen/card_row_min_height"
+		android:gravity="center_vertical">
+
+		<androidx.appcompat.widget.AppCompatImageView
+			android:id="@+id/slope_icon"
+			android:layout_width="@dimen/dialog_content_margin"
+			android:layout_height="@dimen/dialog_content_margin"
+			android:layout_marginStart="@dimen/title_padding"
+			tools:src="@drawable/ic_action_slope" />
+
+		<net.osmand.plus.widgets.TextViewEx
+			style="@style/TitleStyle"
+			android:layout_width="0dp"
+			android:layout_height="wrap_content"
+			android:layout_weight="1"
+			android:layout_marginStart="@dimen/dialog_button_height"
+			android:maxLines="1"
+			android:ellipsize="end"
+			android:text="@string/shared_string_show_slope"
+			android:textColor="?android:textColorPrimary" />
+
+		<androidx.appcompat.widget.SwitchCompat
+			android:id="@+id/slope_switch"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:layout_marginStart="@dimen/title_padding"
+			android:layout_marginEnd="@dimen/content_padding"
+			android:background="@null"
+			android:focusable="false"
+			android:focusableInTouchMode="false"
+			android:clickable="false"
+			android:saveEnabled="false" />
+
+	</LinearLayout>
+
+	<View
+		android:layout_width="match_parent"
+		android:layout_height="1dp"
+		android:background="?attr/divider_color_basic" />
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
index 8c8a01514a6..04d97c36b4b 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
@@ -7,6 +7,8 @@
 import net.osmand.plus.plugins.mapillary.MapillaryPlugin;
 import net.osmand.plus.plugins.monitoring.OsmandMonitoringPlugin;
 import net.osmand.plus.plugins.parking.ParkingPositionPlugin;
+import net.osmand.plus.views.mapwidgets.configure.settings.ElevationProfileWidgetSettingsFragment;
+import net.osmand.plus.views.mapwidgets.configure.settings.WidgetSettingsBaseFragment;
 
 import androidx.annotation.DrawableRes;
 import androidx.annotation.NonNull;
@@ -175,6 +177,14 @@ public int getDefaultOrder() {
 		return defaultPanel.getOriginalWidgetOrder(id);
 	}
 
+	@Nullable
+	public WidgetSettingsBaseFragment getSettingsFragment() {
+		if (this == ELEVATION_PROFILE) {
+			return new ElevationProfileWidgetSettingsFragment();
+		}
+		return null;
+	}
+
 	@Nullable
 	public static WidgetParams getById(@NonNull String id) {
 		for (WidgetParams widget : WidgetParams.values()) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/add/AddWidgetFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/add/AddWidgetFragment.java
index 28afe477560..1a1ecfb47dd 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/add/AddWidgetFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/add/AddWidgetFragment.java
@@ -4,7 +4,6 @@
 import android.content.Context;
 import android.graphics.drawable.Drawable;
 import android.net.Uri;
-import android.os.Build;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
@@ -104,9 +103,12 @@ private void initFromBundle(@NonNull Bundle bundle) {
 	public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
 		Context context = requireContext();
 		LayoutInflater themedInflater = UiUtilities.getInflater(context, nightMode);
-		view = themedInflater.inflate(R.layout.fragment_add_widget, container, false);
+		view = themedInflater.inflate(R.layout.base_widget_fragment_layout, container, false);
 		AndroidUtils.addStatusBarPadding21v(app, view);
 
+		ViewGroup mainContent = view.findViewById(R.id.main_content);
+		themedInflater.inflate(R.layout.add_widget_fragment_content, mainContent);
+
 		setupToolbar();
 		setupContent();
 		setupApplyButton();
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/WidgetsListFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/WidgetsListFragment.java
index a0f0e181500..d66005f04db 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/WidgetsListFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/WidgetsListFragment.java
@@ -26,6 +26,7 @@
 import net.osmand.plus.views.mapwidgets.configure.WidgetIconsHelper;
 import net.osmand.plus.views.mapwidgets.configure.reorder.ReorderWidgetsFragment;
 import net.osmand.plus.views.mapwidgets.configure.reorder.viewholder.AvailableItemViewHolder;
+import net.osmand.plus.views.mapwidgets.configure.settings.WidgetSettingsBaseFragment;
 import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
 import net.osmand.util.Algorithms;
 
@@ -213,26 +214,27 @@ private void inflateWidgetItemsViews(@NonNull Set<MapWidgetInfo> widgetsInfo,
 			ImageView imageView = view.findViewById(R.id.icon);
 			iconsHelper.updateWidgetIcon(imageView, widgetInfo);
 
-			ImageView secondaryIcon = view.findViewById(R.id.secondary_icon);
-			if (secondaryIcon != null) {
-				WidgetState widgetState = widgetInfo.getWidgetState();
-				secondaryIcon.setImageResource(R.drawable.ic_action_additional_option);
-				AndroidUiHelper.updateVisibility(secondaryIcon, widgetState != null);
-
-				view.setOnClickListener(v -> {
-					if (widgetState == null) {
-						return;
+			ImageView settingsIcon = view.findViewById(R.id.settings_icon);
+			WidgetSettingsBaseFragment settingsFragment = widgetParams != null
+					? widgetParams.getSettingsFragment()
+					: null;
+			if (settingsFragment != null) {
+				settingsIcon.setOnClickListener(v -> {
+					FragmentActivity activity = getActivity();
+					if (activity != null) {
+						FragmentManager fragmentManager = activity.getSupportFragmentManager();
+						WidgetSettingsBaseFragment.showFragment(fragmentManager, selectedAppMode, settingsFragment);
 					}
-					CallbackWithObject<WidgetState> callback = result -> {
-						updateContent();
-						return true;
-					};
-					widgetRegistry.showPopUpMenu(view, callback, widgetState, selectedAppMode, nightMode);
 				});
-
-				setupListItemBackground(view);
+			} else {
+				AndroidUiHelper.updateVisibility(settingsIcon, false);
 			}
 
+			view.setOnClickListener(v -> settingsIcon.callOnClick());
+
+
+			setupListItemBackground(view);
+
 			View bottomDivider = view.findViewById(R.id.bottom_divider);
 			boolean last = i + 1 == widgets.size();
 			AndroidUiHelper.updateVisibility(bottomDivider, !last);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetSettingsFragment.java
new file mode 100644
index 00000000000..cfbbc45321b
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetSettingsFragment.java
@@ -0,0 +1,83 @@
+package net.osmand.plus.views.mapwidgets.configure.settings;
+
+import android.content.Context;
+import android.graphics.drawable.Drawable;
+import android.os.Bundle;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.ImageView;
+
+import net.osmand.plus.R;
+import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.ColorUtilities;
+import net.osmand.plus.utils.UiUtilities;
+import net.osmand.plus.utils.UiUtilities.CompoundButtonType;
+import net.osmand.plus.views.mapwidgets.WidgetParams;
+
+import androidx.annotation.NonNull;
+import androidx.appcompat.widget.SwitchCompat;
+
+public class ElevationProfileWidgetSettingsFragment extends WidgetSettingsBaseFragment {
+
+	private static final String KEY_SHOW_SLOPE = "show_slope";
+
+	private boolean showSlope;
+
+	private ImageView icon;
+
+	@NonNull
+	@Override
+	public WidgetParams getWidget() {
+		return WidgetParams.ELEVATION_PROFILE;
+	}
+
+	@Override
+	protected void initParams(@NonNull Bundle bundle) {
+		super.initParams(bundle);
+		showSlope = bundle.containsKey(KEY_SHOW_SLOPE)
+				? bundle.getBoolean(KEY_SHOW_SLOPE)
+				: settings.SHOW_SLOPES_ON_ELEVATION_WIDGET.getModeValue(appMode);
+	}
+
+	@Override
+	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+		Context context = requireContext();
+		View content = themedInflater.inflate(R.layout.elevation_profile_widget_settings, container, false);
+		container.addView(content);
+
+		icon = view.findViewById(R.id.slope_icon);
+		SwitchCompat slopeSwitch = view.findViewById(R.id.slope_switch);
+
+		updateIcon(showSlope);
+
+		UiUtilities.setupCompoundButton(slopeSwitch, nightMode, CompoundButtonType.GLOBAL);
+		slopeSwitch.setChecked(showSlope);
+		slopeSwitch.setOnCheckedChangeListener((buttonView, isChecked) -> {
+			showSlope = isChecked;
+			updateIcon(showSlope);
+		});
+
+		content.setOnClickListener(v -> slopeSwitch.setChecked(!showSlope));
+		int activeColor = ColorUtilities.getActiveColor(context, nightMode);
+		AndroidUtils.setBackground(content, UiUtilities.getColoredSelectableDrawable(context, activeColor));
+	}
+
+	private void updateIcon(boolean showSlope) {
+		Drawable drawable = showSlope
+				? getIcon(R.drawable.ic_action_slope, ColorUtilities.getActiveIconColorId(nightMode))
+				: getIcon(R.drawable.ic_action_slope_hide, ColorUtilities.getDefaultIconColorId(nightMode));
+		icon.setImageDrawable(drawable);
+	}
+
+	@Override
+	protected void applySettings() {
+		settings.SHOW_SLOPES_ON_ELEVATION_WIDGET.setModeValue(appMode, showSlope);
+	}
+
+	@Override
+	public void onSaveInstanceState(@NonNull Bundle outState) {
+		super.onSaveInstanceState(outState);
+		outState.putBoolean(KEY_SHOW_SLOPE, showSlope);
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/WidgetSettingsBaseFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/WidgetSettingsBaseFragment.java
new file mode 100644
index 00000000000..f294918adba
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/WidgetSettingsBaseFragment.java
@@ -0,0 +1,154 @@
+package net.osmand.plus.views.mapwidgets.configure.settings;
+
+import android.app.Activity;
+import android.content.Context;
+import android.net.Uri;
+import android.os.Bundle;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.ImageView;
+import android.widget.TextView;
+
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.base.BaseOsmAndFragment;
+import net.osmand.plus.helpers.AndroidUiHelper;
+import net.osmand.plus.settings.backend.ApplicationMode;
+import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.UiUtilities;
+import net.osmand.plus.utils.UiUtilities.DialogButtonType;
+import net.osmand.plus.views.mapwidgets.WidgetParams;
+import net.osmand.util.Algorithms;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.fragment.app.FragmentActivity;
+import androidx.fragment.app.FragmentManager;
+
+public abstract class WidgetSettingsBaseFragment extends BaseOsmAndFragment {
+
+	private static final String KEY_APP_MODE = "app_mode";
+
+	protected OsmandApplication app;
+	protected OsmandSettings settings;
+	protected ApplicationMode appMode;
+	protected boolean nightMode;
+
+	protected View view;
+
+	@NonNull
+	public abstract WidgetParams getWidget();
+
+	@Override
+	public void onCreate(@Nullable Bundle savedInstanceState) {
+		super.onCreate(savedInstanceState);
+		app = requireMyApplication();
+		settings = app.getSettings();
+		nightMode = !settings.isLightContent();
+
+		Bundle args = getArguments();
+		if (savedInstanceState != null) {
+			initParams(savedInstanceState);
+		} else if (args != null) {
+			initParams(args);
+		}
+	}
+
+	protected void initParams(@NonNull Bundle bundle) {
+		appMode = ApplicationMode.valueOfStringKey(bundle.getString(KEY_APP_MODE), settings.getApplicationMode());
+	}
+
+	@Nullable
+	@Override
+	public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
+		Context context = requireContext();
+		LayoutInflater themedInflater = UiUtilities.getInflater(context, nightMode);
+		view = themedInflater.inflate(R.layout.base_widget_fragment_layout, container, false);
+		AndroidUtils.addStatusBarPadding21v(app, view);
+
+		setupToolbar();
+		setupContent(themedInflater, view.findViewById(R.id.main_content));
+		setupApplyButton();
+
+		return view;
+	}
+
+	private void setupToolbar() {
+		WidgetParams widget = getWidget();
+
+		View closeButton = view.findViewById(R.id.close_button);
+		closeButton.setOnClickListener(v -> dismiss());
+
+		View helpButton = view.findViewById(R.id.help_button);
+		String docsUrl = widget.getDocsUrl();
+		if (Algorithms.isEmpty(docsUrl)) {
+			AndroidUiHelper.updateVisibility(helpButton, false);
+		} else {
+			helpButton.setOnClickListener(v -> {
+				FragmentActivity activity = getActivity();
+				if (activity != null) {
+					AndroidUtils.openUrl(activity, Uri.parse(docsUrl), nightMode);
+				}
+			});
+		}
+
+		TextView title = view.findViewById(R.id.title);
+		title.setText(widget.titleId);
+
+		TextView subTitle = view.findViewById(R.id.sub_title);
+		subTitle.setText(R.string.shared_string_settings);
+
+		ImageView icon = view.findViewById(R.id.icon);
+		icon.setImageDrawable(getIcon(widget.getIconId(nightMode)));
+	}
+
+	protected abstract void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container);
+
+	private void setupApplyButton() {
+		View applyButton = view.findViewById(R.id.dismiss_button);
+		applyButton.setOnClickListener(v -> {
+			applySettings();
+			dismiss();
+		});
+		UiUtilities.setupDialogButton(nightMode, applyButton, DialogButtonType.PRIMARY, R.string.shared_string_apply);
+	}
+
+	protected abstract void applySettings();
+
+	private void dismiss() {
+		Activity activity = getActivity();
+		if (activity != null) {
+			activity.onBackPressed();
+		}
+	}
+
+	@Override
+	public void onSaveInstanceState(@NonNull Bundle outState) {
+		super.onSaveInstanceState(outState);
+		outState.putString(KEY_APP_MODE, appMode.getStringKey());
+	}
+
+	@Override
+	public int getStatusBarColorId() {
+		AndroidUiHelper.setStatusBarContentColor(getView(), nightMode);
+		return nightMode ? R.color.status_bar_color_dark : R.color.activity_background_color_light;
+	}
+
+	public static void showFragment(@NonNull FragmentManager fragmentManager,
+	                                @NonNull ApplicationMode appMode,
+	                                @NonNull WidgetSettingsBaseFragment fragment) {
+		String tag = fragment.getClass().getSimpleName();
+		if (AndroidUtils.isFragmentCanBeAdded(fragmentManager, tag)) {
+			Bundle args = new Bundle();
+			args.putString(KEY_APP_MODE, appMode.getStringKey());
+			fragment.setArguments(args);
+
+			fragmentManager.beginTransaction()
+					.add(R.id.fragmentContainer, fragment, tag)
+					.addToBackStack(tag)
+					.commitAllowingStateLoss();
+		}
+	}
+}
\ No newline at end of file
