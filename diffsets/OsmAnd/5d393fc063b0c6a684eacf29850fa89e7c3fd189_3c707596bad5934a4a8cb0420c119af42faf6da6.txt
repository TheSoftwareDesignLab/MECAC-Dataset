diff --git a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeInfoFragment.java b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeInfoFragment.java
new file mode 100644
index 00000000000..3d2b5115737
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeInfoFragment.java
@@ -0,0 +1,98 @@
+package net.osmand.plus.plugins.monitoring.widgets;
+
+import android.os.Bundle;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.ImageView;
+import android.widget.TextView;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import net.osmand.plus.R;
+import net.osmand.plus.plugins.monitoring.widgets.TripRecordingSlopeWidgetState.AverageSlopeMode;
+import net.osmand.plus.settings.backend.preferences.OsmandPreference;
+import net.osmand.plus.utils.ColorUtilities;
+import net.osmand.plus.views.mapwidgets.configure.settings.BaseSimpleWidgetInfoFragment;
+import net.osmand.plus.widgets.alert.AlertDialogData;
+import net.osmand.plus.widgets.alert.CustomAlert;
+
+public class TripRecordingSlopeInfoFragment extends BaseSimpleWidgetInfoFragment {
+
+	private static final String SLOPE_MODE = "slope_mode";
+
+	@Nullable
+	private OsmandPreference<AverageSlopeMode> modeOsmandPreference;
+	private ImageView iconMode;
+	private TextView titleMode;
+	private TextView descriptionMode;
+
+	private int selectedMode;
+
+
+	@Override
+	protected void initParams(@NonNull Bundle bundle) {
+		super.initParams(bundle);
+		if (widgetInfo != null) {
+			TripRecordingSlopeWidget widget = (TripRecordingSlopeWidget) widgetInfo.widget;
+			modeOsmandPreference = widget.getAverageSlopeModeOsmandPreference();
+		}
+		selectedMode = bundle.getInt(SLOPE_MODE, modeOsmandPreference != null ?
+				modeOsmandPreference.getModeValue(appMode).ordinal() : AverageSlopeMode.LAST_UPHILL.ordinal());
+	}
+
+	@Override
+	protected void setupMainContent(@NonNull ViewGroup container) {
+		if (modeOsmandPreference != null) {
+			View modeButton = inflate(R.layout.bottom_sheet_item_with_descr_72dp, container);
+			iconMode = container.findViewById(R.id.icon);
+			titleMode = container.findViewById(R.id.title);
+			titleMode.setText(R.string.shared_string_mode);
+			descriptionMode = container.findViewById(R.id.description);
+			iconMode.setImageDrawable(app.getUIUtilities().getIcon(modeOsmandPreference.get().getIcon(nightMode)));
+			modeButton.setOnClickListener(v -> showModeDialog());
+			modeButton.setBackground(getPressedStateDrawable());
+		}
+	}
+
+	private void showModeDialog() {
+		CharSequence[] items = new CharSequence[AverageSlopeMode.values().length];
+		for (int i = 0; i < AverageSlopeMode.values().length; i++) {
+			items[i] = getString(AverageSlopeMode.values()[i].getTitleId());
+		}
+
+		AlertDialogData dialogData = new AlertDialogData(titleMode.getContext(), nightMode)
+				.setTitle(R.string.shared_string_mode)
+				.setControlsColor(ColorUtilities.getActiveColor(app, nightMode));
+
+		CustomAlert.showSingleSelection(dialogData, items, selectedMode, v -> {
+			selectedMode = (int) v.getTag();
+			updateModeSetting();
+		});
+	}
+
+	private void updateModeSetting() {
+		descriptionMode.setText(getString(AverageSlopeMode.values()[selectedMode].getTitleId()));
+		iconMode.setImageDrawable(app.getUIUtilities().getIcon(AverageSlopeMode.values()[selectedMode].getIcon(nightMode)));
+	}
+
+	@Override
+	protected void applySettings() {
+		super.applySettings();
+		if (modeOsmandPreference != null) {
+			modeOsmandPreference.setModeValue(appMode, AverageSlopeMode.values()[selectedMode]);
+		}
+	}
+
+	@Override
+	public void onSaveInstanceState(@NonNull Bundle outState) {
+		super.onSaveInstanceState(outState);
+		outState.putInt(SLOPE_MODE, selectedMode);
+	}
+
+	@Override
+	public void onResume() {
+		super.onResume();
+		updateModeSetting();
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeWidget.java b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeWidget.java
new file mode 100644
index 00000000000..b635e419f6a
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeWidget.java
@@ -0,0 +1,107 @@
+package net.osmand.plus.plugins.monitoring.widgets;
+
+import android.view.View;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
+
+import net.osmand.plus.R;
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.plugins.monitoring.SavingTrackHelper;
+import net.osmand.plus.plugins.monitoring.widgets.TripRecordingSlopeWidgetState.AverageSlopeMode;
+import net.osmand.plus.settings.backend.preferences.OsmandPreference;
+import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.WidgetType;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
+import net.osmand.plus.views.mapwidgets.widgets.SimpleWidget;
+import net.osmand.shared.gpx.ElevationDiffsCalculator;
+import net.osmand.shared.gpx.GpxTrackAnalysis;
+
+public class TripRecordingSlopeWidget extends SimpleWidget {
+	private final TripRecordingSlopeWidgetState widgetState;
+
+
+	protected final SavingTrackHelper savingTrackHelper;
+	protected int currentTrackIndex;
+
+	protected double cachedSlope = -1;
+	private int lastSlope;
+	private boolean forceUpdate;
+
+	public TripRecordingSlopeWidget(@NonNull MapActivity mapActivity, @NonNull TripRecordingSlopeWidgetState widgetState, @NonNull WidgetType widgetType,
+	                                @Nullable String customId, @Nullable WidgetsPanel widgetsPanel) {
+		super(mapActivity, widgetType, customId, widgetsPanel);
+		this.widgetState = widgetState;
+		savingTrackHelper = app.getSavingTrackHelper();
+		updateWidgetView();
+		updateInfo(null);
+	}
+
+	@Override
+	protected View.OnClickListener getOnClickListener() {
+		return v -> {
+			forceUpdate = true;
+			widgetState.changeToNextState();
+			updateInfo(null);
+			mapActivity.refreshMap();
+			updateWidgetName();
+			updateIcon();
+		};
+	}
+
+	@Override
+	protected void updateSimpleWidgetInfo(@Nullable DrawSettings drawSettings) {
+		int currentTrackIndex = savingTrackHelper.getCurrentTrackIndex();
+		double elevationSlope = getSlope(this.currentTrackIndex != currentTrackIndex);
+		this.currentTrackIndex = currentTrackIndex;
+		if (forceUpdate || isUpdateNeeded() || cachedSlope != elevationSlope) {
+			cachedSlope = elevationSlope;
+			forceUpdate = false;
+			setText(String.valueOf(elevationSlope), "%");
+		}
+	}
+
+	protected double getSlope(boolean reset) {
+		if (reset) {
+			lastSlope = 0;
+		}
+		ElevationDiffsCalculator.SlopeInfo slopeInfo =
+				widgetState.getAverageSlopeModePreference().get() == AverageSlopeMode.LAST_UPHILL
+						? getAnalysis().getLastUphill()
+						: getAnalysis().getLastDownhill();
+		if (slopeInfo != null) {
+			lastSlope = (int) (slopeInfo.getElevDiff() / slopeInfo.getDistance() * 100);
+		}
+		return lastSlope;
+	}
+
+	@Override
+	public int getIconId(boolean nightMode) {
+		return widgetState.getAverageSlopeModePreference().get().getIcon(nightMode);
+	}
+
+	@Nullable
+	@Override
+	protected String getAdditionalWidgetName() {
+		if (widgetState != null) {
+			return getString(widgetState.getAverageSlopeModePreference().get().titleId);
+		}
+		return null;
+	}
+
+	@StringRes
+	protected int getAdditionalWidgetNameDivider() {
+		return R.string.ltr_or_rtl_combine_via_colon;
+	}
+
+	@NonNull
+	protected GpxTrackAnalysis getAnalysis() {
+		return savingTrackHelper.getCurrentTrack().getTrackAnalysis(app);
+	}
+
+	@Nullable
+	public OsmandPreference<AverageSlopeMode> getAverageSlopeModeOsmandPreference() {
+		return widgetState != null ? widgetState.getAverageSlopeModePreference() : null;
+	}
+}
diff --git a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeWidgetState.java b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeWidgetState.java
new file mode 100644
index 00000000000..9feaca8843e
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingSlopeWidgetState.java
@@ -0,0 +1,108 @@
+package net.osmand.plus.plugins.monitoring.widgets;
+
+import static net.osmand.plus.plugins.monitoring.widgets.TripRecordingSlopeWidgetState.AverageSlopeMode.LAST_UPHILL;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
+
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.settings.backend.ApplicationMode;
+import net.osmand.plus.settings.backend.preferences.OsmandPreference;
+import net.osmand.plus.views.mapwidgets.WidgetType;
+import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
+import net.osmand.util.Algorithms;
+
+public class TripRecordingSlopeWidgetState extends WidgetState {
+
+	public static final String AVERAGE_SLOPE_WIDGET_MODE = "average_slope_widget_mode";
+
+	private final WidgetType widgetType;
+	private final OsmandPreference<AverageSlopeMode> averageSlopeModePreference;
+
+
+	public TripRecordingSlopeWidgetState(@NonNull OsmandApplication app, @Nullable String customId, WidgetType widgetType) {
+		super(app);
+		this.widgetType = widgetType;
+		this.averageSlopeModePreference = registerAverageSlopeModePreference(customId);
+	}
+
+	@NonNull
+	public WidgetType getWidgetType() {
+		return widgetType;
+	}
+
+	public OsmandPreference<AverageSlopeMode> getAverageSlopeModePreference() {
+		return averageSlopeModePreference;
+	}
+
+	@NonNull
+	@Override
+	public String getTitle() {
+		return app.getString(widgetType.titleId);
+	}
+
+	@Override
+	public int getSettingsIconId(boolean nightMode) {
+		return widgetType.getIconId(nightMode);
+	}
+
+	@Override
+	public void changeToNextState() {
+		AverageSlopeMode currentMode = averageSlopeModePreference.get();
+		averageSlopeModePreference.set(currentMode.next());
+	}
+
+	@Override
+	public void copyPrefs(@NonNull ApplicationMode appMode, @Nullable String customId) {
+		copyPrefsFromMode(appMode, appMode, customId);
+	}
+
+	@Override
+	public void copyPrefsFromMode(@NonNull ApplicationMode sourceAppMode, @NonNull ApplicationMode appMode, @Nullable String customId){
+		registerAverageSlopeModePreference(customId).setModeValue(appMode, averageSlopeModePreference.getModeValue(sourceAppMode));
+	}
+
+	@NonNull
+	private OsmandPreference<AverageSlopeMode> registerAverageSlopeModePreference(@Nullable String customId) {
+		String prefId = AVERAGE_SLOPE_WIDGET_MODE;
+		if (!Algorithms.isEmpty(customId)) {
+			prefId += customId;
+		}
+		return settings.registerEnumStringPreference(prefId, LAST_UPHILL,
+				AverageSlopeMode.values(), AverageSlopeMode.class).makeProfile();
+	}
+
+	public enum AverageSlopeMode {
+
+		LAST_DOWNHILL(R.string.shared_string_last_downhill, R.drawable.widget_track_recording_average_slope_downhill_day, R.drawable.widget_track_recording_average_slope_downhill_night),
+		LAST_UPHILL(R.string.shared_string_last_uphill, R.drawable.widget_track_recording_average_slope_uphill_day, R.drawable.widget_track_recording_average_slope_uphill_night);
+
+		@StringRes
+		final int titleId;
+		private final int dayIcon;
+		private final int nightIcon;
+
+		AverageSlopeMode(int titleId, int dayIcon, int nightIcon) {
+			this.titleId = titleId;
+			this.dayIcon = dayIcon;
+			this.nightIcon = nightIcon;
+		}
+
+		@StringRes
+		public int getTitleId() {
+			return titleId;
+		}
+
+		public int getIcon(boolean nightMode) {
+			return nightMode ? dayIcon : nightIcon;
+		}
+
+		@NonNull
+		public AverageSlopeMode next() {
+			int nextItemIndex = (ordinal() + 1) % values().length;
+			return values()[nextItemIndex];
+		}
+	}
+}
