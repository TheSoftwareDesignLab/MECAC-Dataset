diff --git a/OsmAnd/res/layout/favorites_list_item.xml b/OsmAnd/res/layout/favorites_list_item.xml
index 844d28a6300..4d3bbdd608c 100644
--- a/OsmAnd/res/layout/favorites_list_item.xml
+++ b/OsmAnd/res/layout/favorites_list_item.xml
@@ -79,6 +79,7 @@
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:maxLines="2"
+                android:scrollbars="none"
                 android:textColor="?android:textColorPrimary"
                 android:layout_marginBottom="@dimen/subHeaderPadding"
                 android:textSize="@dimen/default_list_text_size"
diff --git a/OsmAnd/res/layout/point_editor_fragment_new.xml b/OsmAnd/res/layout/point_editor_fragment_new.xml
index 2792986f736..749dacd3347 100644
--- a/OsmAnd/res/layout/point_editor_fragment_new.xml
+++ b/OsmAnd/res/layout/point_editor_fragment_new.xml
@@ -139,7 +139,6 @@
 							android:paddingStart="12dp"
 							android:paddingLeft="12dp"
 							android:paddingRight="12dp"
-							android:scrollbars="vertical"
 							android:textSize="16sp"
 							tools:text="@string/lorem_ipsum" />
 
diff --git a/OsmAnd/src/net/osmand/plus/FavouritesDbHelper.java b/OsmAnd/src/net/osmand/plus/FavouritesDbHelper.java
index 5ef3edeea93..ca8b6ad8f08 100644
--- a/OsmAnd/src/net/osmand/plus/FavouritesDbHelper.java
+++ b/OsmAnd/src/net/osmand/plus/FavouritesDbHelper.java
@@ -1,5 +1,6 @@
 package net.osmand.plus;
 
+import android.app.Activity;
 import android.content.Context;
 
 import androidx.annotation.NonNull;
@@ -358,7 +359,7 @@ private void cancelAddressRequest(@NonNull FavouritePoint p) {
 		}
 	}
 
-	public static AlertDialog.Builder checkDuplicates(FavouritePoint p, FavouritesDbHelper fdb, Context uiContext) {
+	public static AlertDialog.Builder checkDuplicates(FavouritePoint p, FavouritesDbHelper fdb, Activity activity) {
 		boolean emoticons = false;
 		String index = "";
 		int number = 0;
@@ -387,12 +388,15 @@ public static AlertDialog.Builder checkDuplicates(FavouritePoint p, FavouritesDb
 			}
 		}
 		if ((index.length() > 0 || emoticons)) {
-			AlertDialog.Builder builder = new AlertDialog.Builder(uiContext);
+			OsmandApplication app = (OsmandApplication) activity.getApplication();
+			boolean nightMode = app.getDaynightHelper().isNightModeForMapControls();
+			Context themedContext = UiUtilities.getThemedContext(activity, nightMode);
+			AlertDialog.Builder builder = new AlertDialog.Builder(themedContext);
 			builder.setTitle(R.string.fav_point_dublicate);
 			if (emoticons) {
-				builder.setMessage(uiContext.getString(R.string.fav_point_emoticons_message, name));
+				builder.setMessage(activity.getString(R.string.fav_point_emoticons_message, name));
 			} else {
-				builder.setMessage(uiContext.getString(R.string.fav_point_dublicate_message, name));
+				builder.setMessage(activity.getString(R.string.fav_point_dublicate_message, name));
 			}
 			p.setName(name);
 			return builder;
diff --git a/OsmAnd/src/net/osmand/plus/activities/FavoritesListFragment.java b/OsmAnd/src/net/osmand/plus/activities/FavoritesListFragment.java
index ae48f7cca71..3347241e654 100644
--- a/OsmAnd/src/net/osmand/plus/activities/FavoritesListFragment.java
+++ b/OsmAnd/src/net/osmand/plus/activities/FavoritesListFragment.java
@@ -5,7 +5,6 @@
 
 import android.app.Activity;
 import android.content.Intent;
-import android.view.LayoutInflater;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.View;
@@ -29,6 +28,7 @@
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.OsmandSettings;
 import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities;
 import net.osmand.plus.UiUtilities.UpdateLocationViewCache;
 import net.osmand.plus.activities.search.SearchActivity;
 import net.osmand.plus.activities.search.SearchActivity.SearchActivityChild;
@@ -200,8 +200,8 @@ public String getName(FavouritePoint model) {
 		public View getView(int position, View convertView, ViewGroup parent) {
 			View row = convertView;
 			if (row == null) {
-				LayoutInflater inflater = activity.getLayoutInflater(); 
-				row = inflater.inflate(R.layout.favorites_list_item, parent, false);
+				boolean nightMode = app.getDaynightHelper().isNightModeForMapControls();
+				row = UiUtilities.getInflater(activity, nightMode).inflate(R.layout.favorites_list_item, parent, false);
 			}
 
 			TextView name = (TextView) row.findViewById(R.id.favourite_label);
diff --git a/OsmAnd/src/net/osmand/plus/dialogs/FavoriteDialogs.java b/OsmAnd/src/net/osmand/plus/dialogs/FavoriteDialogs.java
index 5945bfcd7a2..3924bcdcb8a 100644
--- a/OsmAnd/src/net/osmand/plus/dialogs/FavoriteDialogs.java
+++ b/OsmAnd/src/net/osmand/plus/dialogs/FavoriteDialogs.java
@@ -29,6 +29,7 @@
 import net.osmand.plus.FavouritesDbHelper.FavoriteGroup;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities;
 import net.osmand.plus.activities.FavoritesListFragment.FavouritesAdapter;
 import net.osmand.plus.activities.MapActivity;
 
@@ -41,6 +42,8 @@ public class FavoriteDialogs {
 	
 	public static Dialog createReplaceFavouriteDialog(final Activity activity, final Bundle args) {
 		OsmandApplication app = (OsmandApplication) activity.getApplication();
+		boolean nightMode = app.getDaynightHelper().isNightModeForMapControls();
+		Context themedContext = UiUtilities.getThemedContext(activity, nightMode);
 		final FavouritesDbHelper helper = app.getFavorites();
 		final List<FavouritePoint> points = new ArrayList<FavouritePoint>(helper.getFavouritePoints());
 		final FavouritesAdapter favouritesAdapter = new FavouritesAdapter(activity, points,false);
@@ -56,15 +59,18 @@ public void onItemClick(AdapterView<?> parent, View view, int position, long id)
 		favouritesAdapter.sortByDefault(true);
 		
 		if(points.size() == 0){
-			Toast.makeText(activity, activity.getString(R.string.fav_points_not_exist), Toast.LENGTH_SHORT).show();
+			Toast.makeText(themedContext, activity.getString(R.string.fav_points_not_exist), Toast.LENGTH_SHORT).show();
 			return null;
 		}
-		return showFavoritesDialog(activity, favouritesAdapter, click, null, dlgHolder, true);
+		return showFavoritesDialog(themedContext, favouritesAdapter, click, null, dlgHolder, true);
 	}
 	
 	private static void confirmReplace(final Activity activity, final Bundle args, final FavouritesDbHelper helper,
 			final FavouritesAdapter favouritesAdapter, final Dialog[] dlgHolder, int position) {
-		AlertDialog.Builder builder = new AlertDialog.Builder(activity);
+		OsmandApplication app = (OsmandApplication) activity.getApplication();
+		boolean nightMode = app.getDaynightHelper().isNightModeForMapControls();
+		Context themedContext = UiUtilities.getThemedContext(activity, nightMode);
+		AlertDialog.Builder builder = new AlertDialog.Builder(themedContext);
 		builder.setTitle(R.string.update_existing);
 		final FavouritePoint fp = favouritesAdapter.getItem(position);
 		builder.setMessage(activity.getString(R.string.replace_favorite_confirmation, fp.getName()));
@@ -111,10 +117,13 @@ public static void prepareAddFavouriteDialog(Activity activity, Dialog dialog, B
 	}
 	
 	public  static Dialog createAddFavouriteDialog(final Activity activity, final Bundle args) {
-    	AlertDialog.Builder builder = new AlertDialog.Builder(activity);
+		final OsmandApplication app = (OsmandApplication) activity.getApplication();
+		boolean nightMode = app.getDaynightHelper().isNightModeForMapControls();
+		final Context themedContext = UiUtilities.getThemedContext(activity, nightMode);
+		AlertDialog.Builder builder = new AlertDialog.Builder(themedContext);
 		builder.setTitle(R.string.favourites_context_menu_edit);
-		final View v = activity.getLayoutInflater().inflate(R.layout.favorite_edit_dialog, null, false);
-		final FavouritesDbHelper helper = ((OsmandApplication) activity.getApplication()).getFavorites();
+		final View v = UiUtilities.getInflater(activity, nightMode).inflate(R.layout.favorite_edit_dialog, null, false);
+		final FavouritesDbHelper helper = app.getFavorites();
 		builder.setView(v);
 		final EditText editText =  (EditText) v.findViewById(R.id.Name);
 		final EditText description = (EditText) v.findViewById(R.id.description);
@@ -125,15 +134,14 @@ public  static Dialog createAddFavouriteDialog(final Activity activity, final Bu
 			list[i] = gs.get(i).getName();
 		}
 		cat.setAdapter(new ArrayAdapter<String>(activity, R.layout.list_textview, list));
-		
-		if (((OsmandApplication)activity.getApplication()).accessibilityEnabled()) {
+		if (app.accessibilityEnabled()) {
 			final TextView textButton = (TextView)v.findViewById(R.id.TextButton);
 			textButton.setClickable(true);
 			textButton.setFocusable(true);
 			textButton.setOnClickListener(new View.OnClickListener() {
 				@Override
 				public void onClick(View view) {
-					AlertDialog.Builder b = new AlertDialog.Builder(activity);
+					AlertDialog.Builder b = new AlertDialog.Builder(themedContext);
 					b.setTitle(R.string.access_category_choice);
 					b.setItems(list, new DialogInterface.OnClickListener() {
 						@Override
@@ -165,7 +173,6 @@ public void onClick(DialogInterface dialog, int which) {
 			@Override
 			public void onClick(DialogInterface dialog, int which) {
 				final FavouritePoint point = (FavouritePoint) args.getSerializable(KEY_FAVORITE);
-				OsmandApplication app = (OsmandApplication) activity.getApplication();
 				String categoryStr = cat.getText().toString().trim();
 				final FavouritesDbHelper helper = app.getFavorites();
 				app.getSettings().LAST_FAV_CATEGORY_ENTERED.set(categoryStr);
diff --git a/OsmAnd/src/net/osmand/plus/helpers/ColorDialogs.java b/OsmAnd/src/net/osmand/plus/helpers/ColorDialogs.java
index dda3a1b735d..85771650e31 100644
--- a/OsmAnd/src/net/osmand/plus/helpers/ColorDialogs.java
+++ b/OsmAnd/src/net/osmand/plus/helpers/ColorDialogs.java
@@ -1,11 +1,9 @@
 package net.osmand.plus.helpers;
 
 import android.content.Context;
-import android.content.res.Resources;
 import android.graphics.Color;
 import android.graphics.PorterDuff;
 import android.graphics.drawable.Drawable;
-import android.util.TypedValue;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.AdapterView;
@@ -25,7 +23,7 @@
 
 import gnu.trove.list.array.TIntArrayList;
 
-import static android.util.TypedValue.COMPLEX_UNIT_DIP;
+import static net.osmand.AndroidUtils.dpToPx;
 
 public class ColorDialogs {
 	public static int[] paletteColors = new int[] {
@@ -254,15 +252,6 @@ public static int getColorName(@ColorInt int color) {
 		return colorName;
 	}
 
-	private static int dpToPx(final Context activity, float dp) {
-		Resources r = activity.getResources();
-		return (int) TypedValue.applyDimension(
-				COMPLEX_UNIT_DIP,
-				dp,
-				r.getDisplayMetrics()
-		);
-	}
-
 	public static boolean isPaletteColor(@ColorInt int color) {
 		boolean isPaletteColor = false;
 		for (int i = 0; i < ColorDialogs.pallette.length; i++) {
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/FavoritePointEditorFragmentNew.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/FavoritePointEditorFragmentNew.java
index ad4c170aa04..61c9c60ecd9 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/FavoritePointEditorFragmentNew.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/FavoritePointEditorFragmentNew.java
@@ -24,6 +24,7 @@
 import net.osmand.plus.FavouritesDbHelper.FavoriteGroup;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.base.FavoriteImageDrawable;
 import net.osmand.plus.dialogs.FavoriteDialogs;
@@ -351,7 +352,9 @@ protected void delete(final boolean needDismiss) {
 		FragmentActivity activity = getActivity();
 		final FavouritePoint favorite = getFavorite();
 		if (activity != null && favorite != null) {
-			AlertDialog.Builder builder = new AlertDialog.Builder(activity);
+			final OsmandApplication app = (OsmandApplication) activity.getApplication();
+			boolean nightMode = app.getDaynightHelper().isNightModeForMapControls();
+			AlertDialog.Builder builder = new AlertDialog.Builder(UiUtilities.getThemedContext(activity, nightMode));
 			builder.setMessage(getString(R.string.favourites_remove_dialog_msg, favorite.getName()));
 			builder.setNegativeButton(R.string.shared_string_no, null);
 			builder.setPositiveButton(R.string.shared_string_yes, new DialogInterface.OnClickListener() {
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragmentNew.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragmentNew.java
index b38b2538f89..3b15fcb72d1 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragmentNew.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragmentNew.java
@@ -11,6 +11,7 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.fragment.app.DialogFragment;
+import androidx.fragment.app.FragmentActivity;
 
 import net.osmand.GPXUtilities;
 import net.osmand.GPXUtilities.GPXFile;
@@ -23,6 +24,7 @@
 import net.osmand.plus.MapMarkersHelper.MapMarkersGroup;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.activities.SavingTrackHelper;
 import net.osmand.plus.base.FavoriteImageDrawable;
@@ -306,40 +308,45 @@ private void doUpdateWpt(String name, String category, String description) {
 
 	@Override
 	protected void delete(final boolean needDismiss) {
-		AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
-		builder.setMessage(getString(R.string.context_menu_item_delete_waypoint));
-		builder.setNegativeButton(R.string.shared_string_no, null);
-		builder.setPositiveButton(R.string.shared_string_yes, new DialogInterface.OnClickListener() {
-			@Override
-			public void onClick(DialogInterface dialog, int which) {
-				WptPt wpt = getWpt();
-				WptPtEditor editor = getWptPtEditor();
-				SavingTrackHelper savingTrackHelper = getSavingTrackHelper();
-				if (wpt != null && editor != null && savingTrackHelper != null) {
-					GPXFile gpx = editor.getGpxFile();
-					if (gpx != null) {
-						if (gpx.showCurrentTrack) {
-							savingTrackHelper.deletePointData(wpt);
-						} else {
-							gpx.deleteWptPt(wpt);
-							new SaveGpxAsyncTask(getMyApplication(), gpx, editor.isGpxSelected()).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
+		FragmentActivity activity = getActivity();
+		if (activity != null) {
+			final OsmandApplication app = (OsmandApplication) activity.getApplication();
+			boolean nightMode = app.getDaynightHelper().isNightModeForMapControls();
+			AlertDialog.Builder builder = new AlertDialog.Builder(UiUtilities.getThemedContext(activity, nightMode));
+			builder.setMessage(getString(R.string.context_menu_item_delete_waypoint));
+			builder.setNegativeButton(R.string.shared_string_no, null);
+			builder.setPositiveButton(R.string.shared_string_yes, new DialogInterface.OnClickListener() {
+				@Override
+				public void onClick(DialogInterface dialog, int which) {
+					WptPt wpt = getWpt();
+					WptPtEditor editor = getWptPtEditor();
+					SavingTrackHelper savingTrackHelper = getSavingTrackHelper();
+					if (wpt != null && editor != null && savingTrackHelper != null) {
+						GPXFile gpx = editor.getGpxFile();
+						if (gpx != null) {
+							if (gpx.showCurrentTrack) {
+								savingTrackHelper.deletePointData(wpt);
+							} else {
+								gpx.deleteWptPt(wpt);
+								new SaveGpxAsyncTask(getMyApplication(), gpx, editor.isGpxSelected()).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
+							}
+							syncGpx(gpx);
 						}
-						syncGpx(gpx);
+						saved = true;
 					}
-					saved = true;
-				}
 
-				if (needDismiss) {
-					dismiss(true);
-				} else {
-					MapActivity mapActivity = getMapActivity();
-					if (mapActivity != null) {
-						mapActivity.refreshMap();
+					if (needDismiss) {
+						dismiss(true);
+					} else {
+						MapActivity mapActivity = getMapActivity();
+						if (mapActivity != null) {
+							mapActivity.refreshMap();
+						}
 					}
 				}
-			}
-		});
-		builder.create().show();
+			});
+			builder.create().show();
+		}
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/quickaction/QuickActionListFragment.java b/OsmAnd/src/net/osmand/plus/quickaction/QuickActionListFragment.java
index e6b05806923..cc8047f8341 100644
--- a/OsmAnd/src/net/osmand/plus/quickaction/QuickActionListFragment.java
+++ b/OsmAnd/src/net/osmand/plus/quickaction/QuickActionListFragment.java
@@ -1,12 +1,11 @@
 package net.osmand.plus.quickaction;
 
+import android.content.Context;
 import android.content.DialogInterface;
-import android.content.res.Resources;
 import android.graphics.drawable.Drawable;
 import android.os.Build;
 import android.os.Bundle;
 import android.util.Log;
-import android.util.TypedValue;
 import android.view.LayoutInflater;
 import android.view.MotionEvent;
 import android.view.View;
@@ -41,7 +40,7 @@
 import java.util.Collections;
 import java.util.List;
 
-import static android.util.TypedValue.COMPLEX_UNIT_DIP;
+import static net.osmand.AndroidUtils.dpToPx;
 
 /**
  * Created by okorsun on 20.12.16.
@@ -224,11 +223,10 @@ public void onBindViewHolder(final RecyclerView.ViewHolder holder, int position)
 
             if (viewType == SCREEN_ITEM_TYPE) {
                 final QuickActionItemVH itemVH = (QuickActionItemVH) holder;
-
-                itemVH.title.setText(item.getName(getContext()));
+                Context ctx = getContext();
+                itemVH.title.setText(item.getName(ctx));
                 itemVH.subTitle.setText(getResources().getString(R.string.quick_action_item_action, getActionPosition(position)));
-
-                itemVH.icon.setImageDrawable(getMyApplication().getUIUtilities().getThemedIcon(item.getIconRes(getContext())));
+                itemVH.icon.setImageDrawable(getMyApplication().getUIUtilities().getThemedIcon(item.getIconRes(ctx)));
                 itemVH.handleView.setOnTouchListener(new View.OnTouchListener() {
                     @Override
                     public boolean onTouch(View v, MotionEvent event) {
@@ -256,7 +254,7 @@ public void onClick(View view) {
 
                 LinearLayout.LayoutParams dividerParams = (LinearLayout.LayoutParams) itemVH.divider.getLayoutParams();
                 //noinspection ResourceType
-                dividerParams.setMargins(!isLongDivider(position) ? dpToPx(56f) : 0, 0, 0, 0);
+                dividerParams.setMargins(!isLongDivider(position) ? dpToPx(ctx, 56f) : 0, 0, 0, 0);
                 itemVH.divider.setLayoutParams(dividerParams);
             } else {
                 QuickActionHeaderVH headerVH = (QuickActionHeaderVH) holder;
@@ -361,15 +359,6 @@ private boolean isLongDivider(int globalPosition) {
             return getActionPosition(globalPosition) == ITEMS_IN_GROUP || globalPosition == getItemCount() - 1;
         }
 
-        private int dpToPx(float dp) {
-            Resources r = getActivity().getResources();
-            return (int) TypedValue.applyDimension(
-                    COMPLEX_UNIT_DIP,
-                    dp,
-                    r.getDisplayMetrics()
-            );
-        }
-
         @Override
         public boolean onItemMove(int selectedPosition, int targetPosition) {
             Log.v(TAG, "selected: " + selectedPosition + ", target: " + targetPosition);
diff --git a/OsmAnd/src/net/osmand/plus/views/POIMapLayer.java b/OsmAnd/src/net/osmand/plus/views/POIMapLayer.java
index ebb3efa0344..ff6cc4e7b1e 100644
--- a/OsmAnd/src/net/osmand/plus/views/POIMapLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/POIMapLayer.java
@@ -2,7 +2,6 @@
 
 import android.app.Dialog;
 import android.content.Context;
-import android.content.res.Resources;
 import android.graphics.Bitmap;
 import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
@@ -53,7 +52,7 @@
 import java.util.Set;
 import java.util.TreeSet;
 
-import static android.util.TypedValue.COMPLEX_UNIT_DIP;
+import static net.osmand.AndroidUtils.dpToPx;
 
 public class POIMapLayer extends OsmandMapLayer implements ContextMenuLayer.IContextMenuProvider,
 		MapTextProvider<Amenity>, IRouteInformationListener {
@@ -446,15 +445,4 @@ public void routeWasCancelled() {
 	@Override
 	public void routeWasFinished() {
 	}
-
-	public static int dpToPx(Context ctx, float dp) {
-		Resources r = ctx.getResources();
-		return (int) TypedValue.applyDimension(
-				COMPLEX_UNIT_DIP,
-				dp,
-				r.getDisplayMetrics()
-		);
-	}
-
-
 }
