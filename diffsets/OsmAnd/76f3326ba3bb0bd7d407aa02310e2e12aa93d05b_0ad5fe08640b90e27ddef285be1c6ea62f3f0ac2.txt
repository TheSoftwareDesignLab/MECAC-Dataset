diff --git a/OsmAnd/src/net/osmand/plus/plugins/odb/OBDWidgetSettingFragment.kt b/OsmAnd/src/net/osmand/plus/plugins/odb/OBDWidgetSettingFragment.kt
index 7a522503fde..2db085e5bdd 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/odb/OBDWidgetSettingFragment.kt
+++ b/OsmAnd/src/net/osmand/plus/plugins/odb/OBDWidgetSettingFragment.kt
@@ -17,12 +17,12 @@ import net.osmand.plus.settings.backend.preferences.OsmandPreference
 import net.osmand.plus.utils.AndroidUtils
 import net.osmand.plus.utils.ColorUtilities
 import net.osmand.plus.utils.UiUtilities
-import net.osmand.plus.views.mapwidgets.configure.settings.BaseSimpleWidgetSettingsFragment
+import net.osmand.plus.views.mapwidgets.configure.settings.BaseSimpleWidgetInfoFragment
 import net.osmand.plus.views.mapwidgets.utils.AverageSpeedComputer
 import net.osmand.plus.widgets.alert.AlertDialogData
 import net.osmand.plus.widgets.alert.CustomAlert
 
-class OBDWidgetSettingFragment : BaseSimpleWidgetSettingsFragment() {
+class OBDWidgetSettingFragment : BaseSimpleWidgetInfoFragment() {
 	private var selectedAverageMode: Boolean = false
 	private var selectedIntervalMillis: Long = 0
 	private var seekBarIntervalMillis: Long = 0
@@ -45,9 +45,8 @@ class OBDWidgetSettingFragment : BaseSimpleWidgetSettingsFragment() {
 
 	override fun initParams(bundle: Bundle) {
 		super.initParams(bundle)
-		val widgetInfo = widgetRegistry.getWidgetInfoById(widgetId)
-		if (widgetInfo != null && widgetInfo.widget is OBDTextWidget) {
-			widget = widgetInfo.widget
+		if (widgetInfo != null && widgetInfo?.widget is OBDTextWidget) {
+			widget = widgetInfo?.widget as OBDTextWidget
 			averageValueModePref = widget.averageModePref
 			averageValueIntervalPref = widget.measuredIntervalPref
 			temperatureUnitPref = widget.temperatureUnitPref
@@ -56,7 +55,7 @@ class OBDWidgetSettingFragment : BaseSimpleWidgetSettingsFragment() {
 		}
 	}
 
-	override fun setupContent(themedInflater: LayoutInflater, container: ViewGroup) {
+	override fun setupMainContent(themedInflater: LayoutInflater, container: ViewGroup) {
 		inflater = themedInflater
 		themedInflater.inflate(R.layout.map_marker_side_widget_settings_fragment, container)
 		buttonsCard = view.findViewById(R.id.items_container)
@@ -67,10 +66,8 @@ class OBDWidgetSettingFragment : BaseSimpleWidgetSettingsFragment() {
 		selectedIntervalMillis = averageValueIntervalPref?.getModeValue(appMode) ?: selectedIntervalMillis
 		selectedAverageMode = averageValueModePref?.getModeValue(appMode) ?: selectedAverageMode
 
-		updateToolbarIcon()
 		setupConfigButtons()
 		themedInflater.inflate(R.layout.divider, container)
-		super.setupContent(themedInflater, container)
 	}
 
 	private fun getModeName(averageMode: Boolean): String {
@@ -278,11 +275,6 @@ class OBDWidgetSettingFragment : BaseSimpleWidgetSettingsFragment() {
 		AndroidUtils.setBackground(button, background)
 	}
 
-	private fun updateToolbarIcon() {
-		val icon = view.findViewById<ImageView>(R.id.icon)
-		widget.widgetType?.getIconId(nightMode)?.let { icon.setImageDrawable(getIcon(it)) }
-	}
-
 	override fun onSaveInstanceState(outState: Bundle) {
 		super.onSaveInstanceState(outState)
 		outState.putBoolean(AVERAGE_MODE_KEY, selectedAverageMode)
diff --git a/OsmAnd/src/net/osmand/plus/plugins/odb/dialogs/FuelConsumptionSettingFragment.kt b/OsmAnd/src/net/osmand/plus/plugins/odb/dialogs/FuelConsumptionSettingFragment.kt
index d0938990d57..211bd36ceda 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/odb/dialogs/FuelConsumptionSettingFragment.kt
+++ b/OsmAnd/src/net/osmand/plus/plugins/odb/dialogs/FuelConsumptionSettingFragment.kt
@@ -16,11 +16,11 @@ import net.osmand.plus.settings.backend.preferences.OsmandPreference
 import net.osmand.plus.utils.AndroidUtils
 import net.osmand.plus.utils.ColorUtilities
 import net.osmand.plus.utils.UiUtilities
-import net.osmand.plus.views.mapwidgets.configure.settings.BaseSimpleWidgetSettingsFragment
+import net.osmand.plus.views.mapwidgets.configure.settings.BaseSimpleWidgetInfoFragment
 import net.osmand.plus.widgets.alert.AlertDialogData
 import net.osmand.plus.widgets.alert.CustomAlert
 
-class FuelConsumptionSettingFragment : BaseSimpleWidgetSettingsFragment() {
+class FuelConsumptionSettingFragment : BaseSimpleWidgetInfoFragment() {
 	private var selectedFuelConsumptionMode: Int = 0
 
 	private lateinit var inflater: LayoutInflater
@@ -36,10 +36,9 @@ class FuelConsumptionSettingFragment : BaseSimpleWidgetSettingsFragment() {
 
 	override fun initParams(bundle: Bundle) {
 		super.initParams(bundle)
-		val widgetInfo = widgetRegistry.getWidgetInfoById(widgetId)
-		if (widgetInfo != null && widgetInfo.widget is OBDFuelConsumptionWidget
+		if (widgetInfo != null && widgetInfo?.widget is OBDFuelConsumptionWidget
 		) {
-			widget = widgetInfo.widget
+			widget = widgetInfo?.widget as OBDFuelConsumptionWidget
 			fuelConsumptionPref = widget.fuelConsumptionMode
 			selectedFuelConsumptionMode = bundle.getInt(
 				FUEL_CONSUMPTION_MODE,
@@ -50,16 +49,14 @@ class FuelConsumptionSettingFragment : BaseSimpleWidgetSettingsFragment() {
 		}
 	}
 
-	override fun setupContent(themedInflater: LayoutInflater, container: ViewGroup) {
+	override fun setupMainContent(themedInflater: LayoutInflater, container: ViewGroup) {
 		inflater = themedInflater
 		themedInflater.inflate(R.layout.map_marker_side_widget_settings_fragment, container)
 		buttonsCard = view.findViewById(R.id.items_container)
 		selectedAppMode = settings.applicationMode
 
-		updateToolbarIcon()
 		setupConfigButtons()
 		themedInflater.inflate(R.layout.divider, container)
-		super.setupContent(themedInflater, container)
 	}
 
 	private fun setupConfigButtons() {
@@ -119,12 +116,6 @@ class FuelConsumptionSettingFragment : BaseSimpleWidgetSettingsFragment() {
 		AndroidUtils.setBackground(button, background)
 	}
 
-	private fun updateToolbarIcon() {
-		val icon = view.findViewById<ImageView>(R.id.icon)
-		val iconId = widget.widgetType?.getIconId(nightMode)
-		icon.setImageDrawable(iconId?.let { getIcon(it) })
-	}
-
 	override fun onSaveInstanceState(outState: Bundle) {
 		super.onSaveInstanceState(outState)
 		outState.putInt(FUEL_CONSUMPTION_MODE, selectedFuelConsumptionMode)
diff --git a/OsmAnd/src/net/osmand/plus/plugins/odb/dialogs/RemainingFuelSettingFragment.kt b/OsmAnd/src/net/osmand/plus/plugins/odb/dialogs/RemainingFuelSettingFragment.kt
index f5868e30dd0..b95902db787 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/odb/dialogs/RemainingFuelSettingFragment.kt
+++ b/OsmAnd/src/net/osmand/plus/plugins/odb/dialogs/RemainingFuelSettingFragment.kt
@@ -16,11 +16,11 @@ import net.osmand.plus.settings.backend.preferences.OsmandPreference
 import net.osmand.plus.utils.AndroidUtils
 import net.osmand.plus.utils.ColorUtilities
 import net.osmand.plus.utils.UiUtilities
-import net.osmand.plus.views.mapwidgets.configure.settings.BaseSimpleWidgetSettingsFragment
+import net.osmand.plus.views.mapwidgets.configure.settings.BaseSimpleWidgetInfoFragment
 import net.osmand.plus.widgets.alert.AlertDialogData
 import net.osmand.plus.widgets.alert.CustomAlert
 
-class RemainingFuelSettingFragment : BaseSimpleWidgetSettingsFragment() {
+class RemainingFuelSettingFragment : BaseSimpleWidgetInfoFragment() {
 	private var selectedRemainingFuelMode: Int = 0
 
 	private lateinit var inflater: LayoutInflater
@@ -36,10 +36,9 @@ class RemainingFuelSettingFragment : BaseSimpleWidgetSettingsFragment() {
 
 	override fun initParams(bundle: Bundle) {
 		super.initParams(bundle)
-		val widgetInfo = widgetRegistry.getWidgetInfoById(widgetId)
-		if (widgetInfo != null && widgetInfo.widget is OBDRemainingFuelWidget
+		if (widgetInfo != null && widgetInfo?.widget is OBDRemainingFuelWidget
 		) {
-			widget = widgetInfo.widget
+			widget = widgetInfo?.widget as OBDRemainingFuelWidget
 			remainingFuelMode = widget.remainingFuelMode
 			selectedRemainingFuelMode = bundle.getInt(
 				REMAINING_FUEL_MODE,
@@ -50,16 +49,14 @@ class RemainingFuelSettingFragment : BaseSimpleWidgetSettingsFragment() {
 		}
 	}
 
-	override fun setupContent(themedInflater: LayoutInflater, container: ViewGroup) {
+	override fun setupMainContent(themedInflater: LayoutInflater, container: ViewGroup) {
 		inflater = themedInflater
 		themedInflater.inflate(R.layout.map_marker_side_widget_settings_fragment, container)
 		buttonsCard = view.findViewById(R.id.items_container)
 		selectedAppMode = settings.applicationMode
 
-		updateToolbarIcon()
 		setupConfigButtons()
 		themedInflater.inflate(R.layout.divider, container)
-		super.setupContent(themedInflater, container)
 	}
 
 	private fun setupConfigButtons() {
@@ -119,12 +116,6 @@ class RemainingFuelSettingFragment : BaseSimpleWidgetSettingsFragment() {
 		AndroidUtils.setBackground(button, background)
 	}
 
-	private fun updateToolbarIcon() {
-		val icon = view.findViewById<ImageView>(R.id.icon)
-		val iconId = widget.widgetType?.getIconId(nightMode)
-		icon.setImageDrawable(iconId?.let { getIcon(it) })
-	}
-
 	override fun onSaveInstanceState(outState: Bundle) {
 		super.onSaveInstanceState(outState)
 		outState.putInt(REMAINING_FUEL_MODE, selectedRemainingFuelMode)
diff --git a/OsmAnd/src/net/osmand/plus/utils/WidgetUtils.java b/OsmAnd/src/net/osmand/plus/utils/WidgetUtils.java
index c85477a9515..6b4e920d862 100644
--- a/OsmAnd/src/net/osmand/plus/utils/WidgetUtils.java
+++ b/OsmAnd/src/net/osmand/plus/utils/WidgetUtils.java
@@ -32,53 +32,32 @@
 
 public class WidgetUtils {
 
-	public static void createNewWidgets(@NonNull MapActivity activity, @NonNull List<String> widgetsIds,
-										@NonNull WidgetsPanel panel, @NonNull ApplicationMode appMode,
-										boolean recreateControls) {
-		createNewWidgets(activity, widgetsIds, panel, appMode, recreateControls, null, null);
+	public static void createNewWidget(@NonNull MapActivity activity, @NonNull MapWidgetInfo widgetInfo,
+	                                   @NonNull WidgetsPanel panel, @NonNull ApplicationMode appMode,
+	                                   boolean recreateControls) {
+		createNewWidget(activity, widgetInfo, panel, appMode, recreateControls, null, null);
 	}
 
-	public static void createNewWidgets(@NonNull MapActivity activity, @NonNull List<String> widgetsIds,
-	                                    @NonNull WidgetsPanel panel, @NonNull ApplicationMode appMode,
-	                                    boolean recreateControls, @Nullable String selectedWidget, @Nullable Boolean addToNext) {
+	public static void createNewWidget(@NonNull MapActivity activity, @NonNull MapWidgetInfo widgetInfo,
+	                                   @NonNull WidgetsPanel panel, @NonNull ApplicationMode appMode,
+	                                   boolean recreateControls, @Nullable String selectedWidget, @Nullable Boolean addToNext) {
 		OsmandApplication app = activity.getMyApplication();
-		MapWidgetsFactory widgetsFactory = new MapWidgetsFactory(activity);
 		MapLayers mapLayers = app.getOsmandMap().getMapLayers();
 		MapWidgetRegistry widgetRegistry = mapLayers.getMapWidgetRegistry();
-		for (String widgetId : widgetsIds) {
-			MapWidgetInfo widgetInfo = createDuplicateWidget(activity, widgetId, panel, widgetsFactory, appMode);
-			if (widgetInfo != null) {
-				if (addToNext != null && selectedWidget != null && widgetInfo.widget instanceof ISupportMultiRow) {
-					addWidgetToSpecificPlace(activity, widgetInfo, panel, appMode, selectedWidget, addToNext);
-				} else {
-					addWidgetToEnd(activity, widgetInfo, panel, appMode);
-				}
-				widgetRegistry.enableDisableWidgetForMode(appMode, widgetInfo, true, false);
-			}
+
+		app.getSettings().CUSTOM_WIDGETS_KEYS.addValue(widgetInfo.key);
+		if (addToNext != null && selectedWidget != null && widgetInfo.widget instanceof ISupportMultiRow) {
+			addWidgetToSpecificPlace(activity, widgetInfo, panel, appMode, selectedWidget, addToNext);
+		} else {
+			addWidgetToEnd(activity, widgetInfo, panel, appMode);
 		}
+		widgetRegistry.enableDisableWidgetForMode(appMode, widgetInfo, true, false);
 		MapInfoLayer mapInfoLayer = mapLayers.getMapInfoLayer();
 		if (mapInfoLayer != null && recreateControls) {
 			mapInfoLayer.recreateControls();
 		}
 	}
 
-	@Nullable
-	public static MapWidgetInfo createDuplicateWidget(@NonNull MapActivity mapActivity, @NonNull String widgetId, @NonNull WidgetsPanel panel,
-													  @NonNull MapWidgetsFactory widgetsFactory, @NonNull ApplicationMode selectedAppMode) {
-		OsmandApplication app = mapActivity.getMyApplication();
-		WidgetType widgetType = WidgetType.getById(widgetId);
-		if (widgetType != null) {
-			String id = widgetId.contains(DELIMITER) ? widgetId : WidgetType.getDuplicateWidgetId(widgetId);
-			MapWidget widget = widgetsFactory.createMapWidget(id, widgetType, panel);
-			if (widget != null) {
-				app.getSettings().CUSTOM_WIDGETS_KEYS.addValue(id);
-				WidgetInfoCreator creator = new WidgetInfoCreator(app, selectedAppMode);
-				return creator.askCreateWidgetInfo(id, widget, widgetType, panel);
-			}
-		}
-		return null;
-	}
-
 	private static void addWidgetToSpecificPlace(@NonNull MapActivity mapActivity, @NonNull MapWidgetInfo targetWidget,
 	                                             @NonNull WidgetsPanel widgetsPanel, @NonNull ApplicationMode selectedAppMode, @NonNull String selectedWidget, boolean addToNext) {
 		OsmandApplication app = mapActivity.getMyApplication();
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
index de4d42b83b2..975b43a1acc 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
@@ -116,7 +116,7 @@ public boolean isIconPainted() {
 		return false;
 	}
 
-	@Nullable
+	@NonNull
 	public WidgetType getWidgetType() {
 		return widget.getWidgetType();
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetType.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetType.java
index e689d2ef625..3e27a829e31 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetType.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetType.java
@@ -33,7 +33,6 @@
 import net.osmand.plus.settings.backend.OsmandSettings;
 import net.osmand.plus.views.mapwidgets.configure.settings.*;
 import net.osmand.plus.views.mapwidgets.widgetinterfaces.ISupportWidgetResizing;
-import net.osmand.plus.views.mapwidgets.widgets.SimpleWidget;
 import net.osmand.util.CollectionUtils;
 
 import java.util.ArrayList;
@@ -342,21 +341,21 @@ public static WidgetsPanel findWidgetPanel(@NonNull String widgetId, @NonNull Os
 	}
 
 	@Nullable
-	public WidgetSettingsBaseFragment getSettingsFragment(@NonNull Context ctx, @Nullable MapWidgetInfo widgetInfo) {
+	public WidgetInfoBaseFragment getSettingsFragment(@NonNull Context ctx, @Nullable MapWidgetInfo widgetInfo) {
 		if (this == ELEVATION_PROFILE) {
-			return isPurchased(ctx) ? new ElevationProfileWidgetSettingsFragment() : null;
+			return isPurchased(ctx) ? new ElevationProfileWidgetInfoFragment() : null;
 		} else if (this == MARKERS_TOP_BAR) {
 			return new MapMarkersBarWidgetSettingFragment();
 		} else if (this == RADIUS_RULER) {
-			return new RadiusRulerWidgetSettingsFragment();
+			return new RadiusRulerWidgetInfoFragment();
 		} else if (this == TIME_TO_INTERMEDIATE || this == TIME_TO_DESTINATION) {
-			return new TimeToNavigationPointSettingsFragment();
+			return new TimeToNavigationPointInfoFragment();
 		} else if (this == SIDE_MARKER_1 || this == SIDE_MARKER_2) {
-			return new MapMarkerSideWidgetSettingsFragment();
+			return new MapMarkerSideWidgetInfoFragment();
 		} else if (this == AVERAGE_SPEED) {
 			return new AverageSpeedWidgetSettingFragment();
 		} else if (this == SUNRISE || this == SUNSET || this == SUN_POSITION) {
-			return new SunriseSunsetSettingsFragment();
+			return new SunriseSunsetInfoFragment();
 		} else if (this == HEART_RATE ||
 				this == BICYCLE_POWER ||
 				this == BICYCLE_CADENCE ||
@@ -366,22 +365,22 @@ public WidgetSettingsBaseFragment getSettingsFragment(@NonNull Context ctx, @Nul
 				this == TEMPERATURE) {
 			return new SensorWidgetSettingFragment();
 		} else if (this == GLIDE_AVERAGE) {
-			return new AverageGlideWidgetSettingsFragment();
+			return new AverageGlideWidgetInfoFragment();
 		} else if (this == DEV_ZOOM_LEVEL) {
-			return new ZoomLevelSettingsFragment();
+			return new ZoomLevelInfoFragment();
 		} else if (this == LANES) {
-			return new LanesWidgetSettingsFragment();
+			return new LanesWidgetInfoFragment();
 		} else if (this == ROUTE_INFO) {
-			return new RouteInfoWidgetSettingsFragment();
+			return new RouteInfoWidgetInfoFragment();
 		}
 
 		if (widgetInfo instanceof SimpleWidgetInfo) {
-			WidgetSettingsBaseFragment OBDSettingFragment = getOBDWidgetSettings(ctx, widgetInfo);
+			WidgetInfoBaseFragment OBDSettingFragment = getOBDWidgetSettings(ctx, widgetInfo);
 			if (OBDSettingFragment != null) {
 				return OBDSettingFragment;
 			}
 
-			BaseSimpleWidgetSettingsFragment settingsFragment = new BaseSimpleWidgetSettingsFragment();
+			BaseSimpleWidgetInfoFragment settingsFragment = new BaseSimpleWidgetInfoFragment();
 			settingsFragment.setWidgetType(this);
 			return settingsFragment;
 		} else if (widgetInfo != null && widgetInfo.widget instanceof ISupportWidgetResizing) {
@@ -391,12 +390,12 @@ public WidgetSettingsBaseFragment getSettingsFragment(@NonNull Context ctx, @Nul
 				return settingFragment;
 			}
 		}
-		return null;
+		return new WidgetInfoBaseFragment();
 	}
 
 	@Nullable
-	private WidgetSettingsBaseFragment getOBDWidgetSettings(@NonNull Context ctx,
-	                                                        @Nullable MapWidgetInfo widgetInfo) {
+	private WidgetInfoBaseFragment getOBDWidgetSettings(@NonNull Context ctx,
+	                                                    @Nullable MapWidgetInfo widgetInfo) {
 		if (widgetInfo == null || !isPurchased(ctx)) {
 			return null;
 		}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsContextMenu.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsContextMenu.java
index 413fb8031a3..6332fe938ac 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsContextMenu.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsContextMenu.java
@@ -1,7 +1,7 @@
 package net.osmand.plus.views.mapwidgets;
 
-import static net.osmand.plus.views.mapwidgets.configure.settings.WidgetSettingsBaseFragment.KEY_APP_MODE;
-import static net.osmand.plus.views.mapwidgets.configure.settings.WidgetSettingsBaseFragment.KEY_WIDGET_ID;
+import static net.osmand.plus.views.mapwidgets.configure.settings.WidgetInfoBaseFragment.KEY_APP_MODE;
+import static net.osmand.plus.views.mapwidgets.configure.settings.WidgetInfoBaseFragment.KEY_WIDGET_ID;
 
 import android.os.Bundle;
 import android.view.View;
@@ -19,7 +19,7 @@
 import net.osmand.plus.utils.ColorUtilities;
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.views.mapwidgets.configure.panel.ConfigureWidgetsFragment;
-import net.osmand.plus.views.mapwidgets.configure.settings.WidgetSettingsBaseFragment;
+import net.osmand.plus.views.mapwidgets.configure.settings.WidgetInfoBaseFragment;
 import net.osmand.plus.views.mapwidgets.widgetinterfaces.ISupportMultiRow;
 import net.osmand.plus.widgets.popup.PopUpMenu;
 import net.osmand.plus.widgets.popup.PopUpMenuDisplayData;
@@ -35,7 +35,8 @@ public class WidgetsContextMenu {
 
 	static public void showMenu(@NonNull View view, @NonNull MapActivity mapActivity, @NonNull WidgetType widgetType,
 	                            @Nullable String customId, @Nullable List<PopUpMenuItem> widgetActions,
-	                            boolean verticalWidget, boolean nightMode) {
+	                            WidgetsPanel widgetsPanel, boolean nightMode) {
+		boolean verticalWidget = widgetsPanel.isPanelVertical();
 		OsmandApplication app = mapActivity.getMyApplication();
 		OsmandSettings settings = app.getSettings();
 		List<PopUpMenuItem> items = new ArrayList<>();
@@ -66,7 +67,7 @@ static public void showMenu(@NonNull View view, @NonNull MapActivity mapActivity
 				items.addAll(widgetActions);
 			}
 
-			WidgetSettingsBaseFragment fragment = widgetType.getSettingsFragment(app, widgetInfo);
+			WidgetInfoBaseFragment fragment = widgetType.getSettingsFragment(app, widgetInfo);
 			if (fragment != null) {
 				items.add(new PopUpMenuItem.Builder(app)
 						.setTitleId(R.string.shared_string_settings)
@@ -75,7 +76,7 @@ static public void showMenu(@NonNull View view, @NonNull MapActivity mapActivity
 							args.putString(KEY_WIDGET_ID, widgetInfo.key);
 							args.putString(KEY_APP_MODE, appMode.getStringKey());
 							FragmentManager manager = mapActivity.getSupportFragmentManager();
-							WidgetSettingsBaseFragment.showFragment(manager, args, fragment, null);
+							WidgetInfoBaseFragment.showFragment(manager, fragment, null, appMode, widgetInfo.key, widgetsPanel);
 						})
 						.setIcon(uiUtilities.getPaintedIcon(R.drawable.ic_action_settings_outlined, iconColor))
 						.showTopDivider(Algorithms.isEmpty(widgetActions))
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageGlideWidgetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageGlideWidgetInfoFragment.java
similarity index 82%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageGlideWidgetSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageGlideWidgetInfoFragment.java
index 77b47a15d79..1ebfff8c46f 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageGlideWidgetSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageGlideWidgetInfoFragment.java
@@ -7,11 +7,10 @@
 import androidx.annotation.NonNull;
 
 import net.osmand.plus.R;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.widgets.GlideAverageWidget;
 
-public class AverageGlideWidgetSettingsFragment extends BaseSimpleWidgetSettingsFragment {
+public class AverageGlideWidgetInfoFragment extends BaseSimpleWidgetInfoFragment {
 
 	private static final String KEY_TIME_INTERVAL = "time_interval";
 
@@ -30,7 +29,6 @@ public WidgetType getWidget() {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		MapWidgetInfo widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null) {
 			widget = ((GlideAverageWidget) widgetInfo.widget);
 			long defaultInterval = widget.getMeasuredInterval(appMode);
@@ -41,14 +39,13 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.fragment_widget_settings_average_glide_ratio, container);
 
 		timeIntervalCard = new TimeIntervalCard(requireMyActivity(), initialIntervalMillis);
 		ViewGroup cardContainer = view.findViewById(R.id.time_interval_card_container);
 		cardContainer.addView(timeIntervalCard.build(cardContainer.getContext()));
 		themedInflater.inflate(R.layout.divider, container);
-		super.setupContent(themedInflater, container);
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java
index 8f13bbf8cae..6afeebdfcd4 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java
@@ -12,11 +12,10 @@
 import net.osmand.plus.R;
 import net.osmand.shared.settings.enums.SpeedConstants;
 import net.osmand.plus.views.mapwidgets.utils.AverageSpeedComputer;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.widgets.AverageSpeedWidget;
 
-public class AverageSpeedWidgetSettingFragment extends BaseSimpleWidgetSettingsFragment {
+public class AverageSpeedWidgetSettingFragment extends BaseSimpleWidgetInfoFragment {
 
 	private static final String KEY_TIME_INTERVAL = "time_interval";
 	private static final String KEY_COUNT_STOPS = "count_stops";
@@ -37,7 +36,6 @@ public WidgetType getWidget() {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		MapWidgetInfo widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null) {
 			speedWidget = ((AverageSpeedWidget) widgetInfo.widget);
 
@@ -52,13 +50,12 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.average_speed_widget_settings_fragment, container);
 
 		setupIntervalSliderCard();
 		setupSkipStopsSetting();
 		themedInflater.inflate(R.layout.divider, container);
-		super.setupContent(themedInflater, container);
 		setupSettingAction(themedInflater, container);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseResizableWidgetSettingFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseResizableWidgetSettingFragment.java
index c3d2523d813..41d00041830 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseResizableWidgetSettingFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseResizableWidgetSettingFragment.java
@@ -8,33 +8,29 @@
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
+import android.widget.LinearLayout;
 import android.widget.TextView;
 
 import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.settings.backend.preferences.OsmandPreference;
 import net.osmand.plus.settings.enums.WidgetSize;
-import net.osmand.plus.utils.ColorUtilities;
 import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.widgetinterfaces.ISupportWidgetResizing;
-import net.osmand.plus.widgets.alert.AlertDialogData;
-import net.osmand.plus.widgets.alert.CustomAlert;
+import net.osmand.plus.widgets.multistatetoggle.IconToggleButton;
 
 import java.util.List;
 import java.util.Set;
 
-public class BaseResizableWidgetSettingFragment extends WidgetSettingsBaseFragment {
+public class BaseResizableWidgetSettingFragment extends WidgetInfoBaseFragment {
 	private static final String SELECTED_WIDGET_SIZE_ID_KEY = "selected_widget_id_size";
 	protected static final String WIDGET_TYPE_KEY = "widget_type_key";
 
 	protected OsmandPreference<WidgetSize> widgetSizePref;
 	protected WidgetType widgetType;
-	@Nullable
-	private MapWidgetInfo widgetInfo;
 
 	private WidgetSize selectedWidgetSize;
 
@@ -45,7 +41,6 @@ public void setWidgetType(@NonNull WidgetType widgetType) {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null && widgetInfo.widget instanceof ISupportWidgetResizing resizableWidget) {
 			widgetSizePref = resizableWidget.getWidgetSizePref();
 			selectedWidgetSize = bundle.containsKey(SELECTED_WIDGET_SIZE_ID_KEY) ? WidgetSize.values()[bundle.getInt(SELECTED_WIDGET_SIZE_ID_KEY)] : widgetSizePref.get();
@@ -70,34 +65,45 @@ public WidgetType getWidget() {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupTopContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		if (widgetInfo != null && widgetInfo.widget instanceof ISupportWidgetResizing resizableWidget && resizableWidget.allowResize()) {
 			themedInflater.inflate(R.layout.resizable_widget_setting, container);
 
-			View widgetSizeContainer = container.findViewById(R.id.widget_size_container);
-			widgetSizeContainer.setOnClickListener(v -> showPreferenceDialog(container));
-			widgetSizeContainer.setBackground(getPressedStateDrawable());
-			TextView widgetSizeDescription = container.findViewById(R.id.widget_size_description);
-			widgetSizeDescription.setText(selectedWidgetSize.titleId);
+			TextView height = container.findViewById(R.id.height);
+			height.setText(isVerticalPanel ? R.string.row_height : R.string.shared_string_height);
+			setupToggleButtons(view);
 		}
 	}
 
-	private void showPreferenceDialog(ViewGroup container) {
-		int selected = selectedWidgetSize.ordinal();
-		String[] items = new String[WidgetSize.values().length];
-		for (int i = 0; i < items.length; i++) {
-			items[i] = app.getString(WidgetSize.values()[i].getTitleId());
-		}
+	private void setupToggleButtons(@NonNull View view) {
+		IconToggleButton.IconRadioItem large = createToggleButton(view, WidgetSize.LARGE);
+		IconToggleButton.IconRadioItem medium = createToggleButton(view, WidgetSize.MEDIUM);
+		IconToggleButton.IconRadioItem small = createToggleButton(view, WidgetSize.SMALL);
+
+		LinearLayout container = view.findViewById(R.id.custom_radio_buttons);
+		IconToggleButton toggleButton = new IconToggleButton(app, container, nightMode);
+		toggleButton.setItems(small, medium, large);
+		toggleButton.setSelectedItem(isMediumHeight() ? medium : isSmallHeight() ? small : large);
+	}
 
-		AlertDialogData dialogData = new AlertDialogData(requireContext(), nightMode)
-				.setTitle(R.string.shared_string_size)
-				.setControlsColor(ColorUtilities.getAppModeColor(app, nightMode));
+	@NonNull
+	private IconToggleButton.IconRadioItem createToggleButton(@NonNull View view, @NonNull WidgetSize widgetSize) {
+		IconToggleButton.IconRadioItem item = new IconToggleButton.IconRadioItem(widgetSize.iconId);
+		item.setOnClickListener((radioItem, v) -> {
+			selectedWidgetSize = widgetSize;
 
-		CustomAlert.showSingleSelection(dialogData, items, selected, v -> {
-			int which = (int) v.getTag();
-			selectedWidgetSize = WidgetSize.values()[which];
-			((TextView) container.findViewById(R.id.widget_size_description)).setText(selectedWidgetSize.getTitleId());
+			setupToggleButtons(view);
+			return true;
 		});
+		return item;
+	}
+
+	private boolean isMediumHeight() {
+		return selectedWidgetSize == WidgetSize.MEDIUM;
+	}
+
+	private boolean isSmallHeight() {
+		return selectedWidgetSize == WidgetSize.SMALL;
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseSimpleWidgetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseSimpleWidgetInfoFragment.java
similarity index 63%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseSimpleWidgetSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseSimpleWidgetInfoFragment.java
index e8ea806c548..ca54afd2a0d 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseSimpleWidgetSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/BaseSimpleWidgetInfoFragment.java
@@ -1,49 +1,28 @@
 package net.osmand.plus.views.mapwidgets.configure.settings;
 
-import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.AVAILABLE_MODE;
-import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.ENABLED_MODE;
-import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.MATCHING_PANELS_MODE;
-
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
-import android.widget.TextView;
 
 import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 import androidx.appcompat.widget.SwitchCompat;
 
 import net.osmand.plus.R;
-import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.settings.backend.preferences.CommonPreference;
-import net.osmand.plus.settings.backend.preferences.OsmandPreference;
-import net.osmand.plus.settings.enums.WidgetSize;
-import net.osmand.plus.utils.ColorUtilities;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
-import net.osmand.plus.views.mapwidgets.WidgetType;
-import net.osmand.plus.views.mapwidgets.widgetinterfaces.ISupportWidgetResizing;
 import net.osmand.plus.views.mapwidgets.widgets.SimpleWidget;
-import net.osmand.plus.widgets.alert.AlertDialogData;
-import net.osmand.plus.widgets.alert.CustomAlert;
-
-import java.util.List;
-import java.util.Set;
 
-public class BaseSimpleWidgetSettingsFragment extends BaseResizableWidgetSettingFragment {
+public class BaseSimpleWidgetInfoFragment extends BaseResizableWidgetSettingFragment {
 	private static final String SHOW_ICON_KEY = "show_icon_key";
 	private boolean isWidgetVertical = false;
 
 	public CommonPreference<Boolean> shouldShowIconPref;
-	@Nullable
-	private MapWidgetInfo widgetInfo;
 
 	private boolean showIcon;
 
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null && widgetInfo.widget instanceof SimpleWidget simpleWidget) {
 			isWidgetVertical = simpleWidget.isVerticalWidget();
 			shouldShowIconPref = simpleWidget.shouldShowIconPref();
@@ -58,7 +37,8 @@ public void onSaveInstanceState(@NonNull Bundle outState) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupTopContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+		super.setupTopContent(themedInflater, container);
 		if (isWidgetVertical) {
 			themedInflater.inflate(R.layout.simple_widget_settings, container);
 
@@ -68,7 +48,6 @@ protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull Vie
 			shoIconContainer.setOnClickListener(v -> updateShowIcon(!showIcon, switchCompat));
 			shoIconContainer.setBackground(getPressedStateDrawable());
 		}
-		super.setupContent(themedInflater, container);
 	}
 
 	private void updateShowIcon(boolean shouldShowIcon, SwitchCompat switchCompat) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetInfoFragment.java
similarity index 88%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetInfoFragment.java
index 011094a846e..e376ce19bc9 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ElevationProfileWidgetInfoFragment.java
@@ -11,14 +11,13 @@
 import net.osmand.plus.utils.ColorUtilities;
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.utils.UiUtilities.CompoundButtonType;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.widgets.ElevationProfileWidget;
 
 import androidx.annotation.NonNull;
 import androidx.appcompat.widget.SwitchCompat;
 
-public class ElevationProfileWidgetSettingsFragment extends WidgetSettingsBaseFragment {
+public class ElevationProfileWidgetInfoFragment extends WidgetInfoBaseFragment {
 
 	private static final String KEY_SHOW_SLOPE = "show_slope";
 	private ElevationProfileWidget elevationWidget;
@@ -35,7 +34,6 @@ public WidgetType getWidget() {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		MapWidgetInfo widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 
 		if (bundle.containsKey(KEY_SHOW_SLOPE)) {
 			showSlope = bundle.getBoolean(KEY_SHOW_SLOPE);
@@ -46,7 +44,7 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		View content = themedInflater.inflate(R.layout.elevation_profile_widget_settings, container, false);
 		container.addView(content);
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/LanesWidgetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/LanesWidgetInfoFragment.java
similarity index 91%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/LanesWidgetSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/LanesWidgetInfoFragment.java
index c95d1d513f7..7b4a04068ce 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/LanesWidgetSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/LanesWidgetInfoFragment.java
@@ -14,7 +14,7 @@
 import net.osmand.plus.R;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 
-public class LanesWidgetSettingsFragment extends WidgetSettingsBaseFragment {
+public class LanesWidgetInfoFragment extends WidgetInfoBaseFragment {
 
 	private static final String SHOW_MINOR_TURNS = "show_minor_turns";
 
@@ -35,7 +35,7 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		View view = themedInflater.inflate(R.layout.widget_preference_with_switch, container);
 		setupShowMinorTurnsPref(view);
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkerSideWidgetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkerSideWidgetInfoFragment.java
similarity index 94%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkerSideWidgetSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkerSideWidgetInfoFragment.java
index 7b8d77354b8..cd79542fb60 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkerSideWidgetSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkerSideWidgetInfoFragment.java
@@ -12,7 +12,6 @@
 import android.widget.TextView;
 
 import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 import androidx.appcompat.app.AlertDialog;
 
 import com.google.android.material.slider.Slider;
@@ -24,7 +23,6 @@
 import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.ColorUtilities;
 import net.osmand.plus.utils.UiUtilities;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.utils.AverageSpeedComputer;
 import net.osmand.plus.views.mapwidgets.widgets.MapMarkerSideWidget;
@@ -40,7 +38,7 @@
 import java.util.Map;
 import java.util.Map.Entry;
 
-public class MapMarkerSideWidgetSettingsFragment extends BaseSimpleWidgetSettingsFragment {
+public class MapMarkerSideWidgetInfoFragment extends BaseSimpleWidgetInfoFragment {
 
 	private static final String MARKER_MODE_KEY = "marker_mode";
 	private static final String MARKER_CLICK_BEHAVIOUR_KEY = "marker_click_behaviour";
@@ -70,7 +68,6 @@ public WidgetType getWidget() {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		MapWidgetInfo widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null) {
 			MapMarkerSideWidget widget = ((MapMarkerSideWidget) widgetInfo.widget);
 			MapMarkerSideWidgetState widgetState = widget.getWidgetState();
@@ -91,7 +88,7 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		this.themedInflater = themedInflater;
 		themedInflater.inflate(R.layout.map_marker_side_widget_settings_fragment, container);
 		buttonsCard = view.findViewById(R.id.items_container);
@@ -99,10 +96,8 @@ protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull Vie
 		availableIntervals = getAvailableIntervals();
 		selectedIntervalMillis = averageSpeedIntervalPref.getModeValue(appMode);
 
-		updateToolbarIcon();
 		setupConfigButtons();
 		themedInflater.inflate(R.layout.divider, container);
-		super.setupContent(themedInflater, container);
 	}
 
 	private void setupConfigButtons() {
@@ -285,7 +280,6 @@ private void showMarkerModeDialog() {
 			int which = (int) v.getTag();
 			selectedMarkerMode = SideMarkerMode.values()[which];
 			setupConfigButtons();
-			updateToolbarIcon();
 		});
 	}
 
@@ -296,12 +290,6 @@ private void setupListItemBackground(@NonNull View view) {
 		AndroidUtils.setBackground(button, background);
 	}
 
-	private void updateToolbarIcon() {
-		ImageView icon = view.findViewById(R.id.icon);
-		int iconId = selectedMarkerMode.getIconId(nightMode);
-		icon.setImageDrawable(getIcon(iconId));
-	}
-
 	@Override
 	public void onSaveInstanceState(@NonNull Bundle outState) {
 		super.onSaveInstanceState(outState);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkersBarWidgetSettingFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkersBarWidgetSettingFragment.java
index b79198d16d7..e4010b60c3c 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkersBarWidgetSettingFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/MapMarkersBarWidgetSettingFragment.java
@@ -15,7 +15,7 @@
 
 import androidx.annotation.NonNull;
 
-public class MapMarkersBarWidgetSettingFragment extends WidgetSettingsBaseFragment {
+public class MapMarkersBarWidgetSettingFragment extends WidgetInfoBaseFragment {
 
 	private static final String KEY_DISPLAYED_MARKERS = "displayed_markers";
 
@@ -36,7 +36,7 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.map_markers_bar_widget_settings, container);
 
 		LinearLayout radioButtonsView = view.findViewById(R.id.custom_radio_buttons);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RadiusRulerWidgetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RadiusRulerWidgetInfoFragment.java
similarity index 97%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RadiusRulerWidgetSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RadiusRulerWidgetInfoFragment.java
index 1b2a0ecad4f..9f1d28971ce 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RadiusRulerWidgetSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RadiusRulerWidgetInfoFragment.java
@@ -22,7 +22,7 @@
 import androidx.annotation.DrawableRes;
 import androidx.annotation.NonNull;
 
-public class RadiusRulerWidgetSettingsFragment extends WidgetSettingsBaseFragment {
+public class RadiusRulerWidgetInfoFragment extends WidgetInfoBaseFragment {
 
 	private static final String KEY_RADIUS_RULER_MODE = "radius_ruler_mode";
 	private static final String KEY_SHOW_COMPASS = "show_compass";
@@ -49,7 +49,7 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.radius_ruler_widget_settings_fragment, container);
 
 		setupRadiusRulerModeSetting();
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RouteInfoWidgetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RouteInfoWidgetInfoFragment.java
similarity index 93%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RouteInfoWidgetSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RouteInfoWidgetInfoFragment.java
index 33edc16abdb..8c450f78917 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RouteInfoWidgetSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/RouteInfoWidgetInfoFragment.java
@@ -20,7 +20,6 @@
 import androidx.annotation.NonNull;
 
 import net.osmand.plus.R;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.widgets.routeinfo.RouteInfoDisplayMode;
 import net.osmand.plus.views.mapwidgets.widgets.routeinfo.RouteInfoWidget;
@@ -33,7 +32,7 @@
 import java.util.Map;
 import java.util.Objects;
 
-public class RouteInfoWidgetSettingsFragment extends BaseResizableWidgetSettingFragment {
+public class RouteInfoWidgetInfoFragment extends BaseResizableWidgetSettingFragment {
 
 	private static final String KEY_PRIMARY_VALUE = "primary_display_value";
 
@@ -53,7 +52,6 @@ public WidgetType getWidget() {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		MapWidgetInfo widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null) {
 			widget = ((RouteInfoWidget) widgetInfo.widget);
 			String displayModeKey = bundle.getString(KEY_PRIMARY_VALUE);
@@ -66,7 +64,7 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.fragment_widget_settings_route_info, container);
 
 		View defViewContainer = container.findViewById(R.id.default_view_container);
@@ -75,7 +73,6 @@ protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull Vie
 		TextView defViewDesc = container.findViewById(R.id.default_view_description);
 		defViewDesc.setText(getString(selectedDisplayMode.getTitleId()));
 
-		super.setupContent(themedInflater, container);
 	}
 
 	private void showDefaultValueDialog(@NonNull View container) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SensorWidgetSettingFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SensorWidgetSettingFragment.java
index c76fef2a66f..6954dae09cd 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SensorWidgetSettingFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SensorWidgetSettingFragment.java
@@ -18,10 +18,9 @@
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType;
 import net.osmand.plus.plugins.externalsensors.dialogs.SelectExternalDeviceFragment;
 import net.osmand.plus.utils.UiUtilities;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 
-public class SensorWidgetSettingFragment extends BaseSimpleWidgetSettingsFragment implements SelectExternalDeviceFragment.SelectDeviceListener {
+public class SensorWidgetSettingFragment extends BaseSimpleWidgetInfoFragment implements SelectExternalDeviceFragment.SelectDeviceListener {
 
 	private SensorTextWidget sensorWidget;
 	protected ExternalSensorsPlugin plugin;
@@ -30,7 +29,6 @@ public class SensorWidgetSettingFragment extends BaseSimpleWidgetSettingsFragmen
 	private WidgetType widgetType;
 	private String sourceDeviceId;
 	private AppCompatImageView deviceIcon;
-	private MapWidgetInfo widgetInfo;
 
 	@NonNull
 	@Override
@@ -53,13 +51,13 @@ protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
 		if (widgetInfo == null) {
 			widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
-			if (widgetInfo != null) {
-				widgetType = widgetInfo.getWidgetType();
-				sensorWidget = ((SensorTextWidget) widgetInfo.widget);
-				setupDataSource();
-			} else {
-				dismiss();
-			}
+		}
+		if (widgetInfo != null) {
+			widgetType = widgetInfo.getWidgetType();
+			sensorWidget = ((SensorTextWidget) widgetInfo.widget);
+			setupDataSource();
+		} else {
+			dismiss();
 		}
 	}
 
@@ -70,7 +68,7 @@ public void selectNewDevice(@Nullable String deviceId, @NonNull SensorWidgetData
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.sensor_widget_settings_fragment, container);
 		deviceIcon = view.findViewById(R.id.device_icon);
 		view.findViewById(R.id.widget_source_card).setOnClickListener((v) ->
@@ -78,7 +76,6 @@ protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull Vie
 						this, sensorWidget.getFieldType(), getSourceDeviceId(), false));
 		themedInflater.inflate(R.layout.divider, container);
 		updateSourceDeviceUI();
-		super.setupContent(themedInflater, container);
 	}
 
 	@NonNull
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SunriseSunsetSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SunriseSunsetInfoFragment.java
similarity index 95%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SunriseSunsetSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SunriseSunsetInfoFragment.java
index 7db94fce35a..12be2a15417 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SunriseSunsetSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/SunriseSunsetInfoFragment.java
@@ -20,13 +20,12 @@
 import net.osmand.plus.settings.backend.preferences.OsmandPreference;
 import net.osmand.plus.settings.enums.SunPositionMode;
 import net.osmand.plus.utils.ColorUtilities;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.widgets.SunriseSunsetWidget;
 import net.osmand.plus.widgets.alert.AlertDialogData;
 import net.osmand.plus.widgets.alert.CustomAlert;
 
-public class SunriseSunsetSettingsFragment extends BaseSimpleWidgetSettingsFragment {
+public class SunriseSunsetInfoFragment extends BaseSimpleWidgetInfoFragment {
 
 	private static final String SHOW_TIME_TO_LEFT = "show_time_to_left";
 	private static final String SUN_POSITION_MODE = "sun_position_mode";
@@ -57,7 +56,6 @@ public WidgetType getWidget() {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		MapWidgetInfo widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null) {
 			widget = (SunriseSunsetWidget) widgetInfo.widget;
 			widgetType = widget.getWidgetType();
@@ -71,7 +69,7 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.fragment_widget_settings_sunrise_sunset, container);
 		timeDescription = container.findViewById(R.id.preference_description);
 		sunPositionDescription = container.findViewById(R.id.sun_position_description);
@@ -84,7 +82,6 @@ protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull Vie
 			setupSunPositionMode();
 		}
 
-		super.setupContent(themedInflater, container);
 	}
 
 	private void setupSunPositionMode() {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/TimeToNavigationPointSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/TimeToNavigationPointInfoFragment.java
similarity index 88%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/TimeToNavigationPointSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/TimeToNavigationPointInfoFragment.java
index f1748057959..6b4ba98c05e 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/TimeToNavigationPointSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/TimeToNavigationPointInfoFragment.java
@@ -19,12 +19,11 @@
 import net.osmand.plus.settings.backend.preferences.OsmandPreference;
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.utils.UiUtilities.CompoundButtonType;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.widgets.TimeToNavigationPointWidget;
 import net.osmand.plus.views.mapwidgets.widgetstates.TimeToNavigationPointWidgetState.TimeToNavigationPointState;
 
-public class TimeToNavigationPointSettingsFragment extends BaseSimpleWidgetSettingsFragment {
+public class TimeToNavigationPointInfoFragment extends BaseSimpleWidgetInfoFragment {
 
 	private static final String KEY_ARRIVAL_TIME_OTHERWISE_TIME_TO_GO = "arrival_time_otherwise_time_to_go";
 
@@ -41,7 +40,6 @@ public WidgetType getWidget() {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		MapWidgetInfo widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null) {
 			TimeToNavigationPointWidget navigationPointWidget = (TimeToNavigationPointWidget) widgetInfo.widget;
 			intermediate = navigationPointWidget.isIntermediate();
@@ -53,12 +51,10 @@ protected void initParams(@NonNull Bundle bundle) {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.time_to_navigation_point_widget_settings_fragment, container);
-		updateToolbarIcon();
 		setupTimeModeSelector();
 		themedInflater.inflate(R.layout.divider, container);
-		super.setupContent(themedInflater, container);
 	}
 
 	private void setupTimeModeSelector() {
@@ -74,7 +70,6 @@ private void setupTimeModeSelector() {
 			} else {
 				arrivalTimeButton.setChecked(false);
 			}
-			updateToolbarIcon();
 		};
 
 		TimeToNavigationPointState timeToGoState = getWidgetState(false);
@@ -107,12 +102,6 @@ private void setupTimeModeItem(@NonNull TimeToNavigationPointState state,
 		container.setBackground(getPressedStateDrawable());
 	}
 
-	private void updateToolbarIcon() {
-		ImageView icon = view.findViewById(R.id.icon);
-		int iconId = getWidgetState(arrivalTimeOtherwiseTimeToGo).getIconId(nightMode);
-		icon.setImageDrawable(getIcon(iconId));
-	}
-
 	@NonNull
 	private TimeToNavigationPointState getWidgetState(boolean arrivalTimeOtherwiseTimeToGo) {
 		boolean intermediate = getWidget() == TIME_TO_INTERMEDIATE;
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/WidgetSettingsBaseFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/WidgetSettingsBaseFragment.java
deleted file mode 100644
index 70eba6f4862..00000000000
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/WidgetSettingsBaseFragment.java
+++ /dev/null
@@ -1,181 +0,0 @@
-package net.osmand.plus.views.mapwidgets.configure.settings;
-
-import android.app.Activity;
-import android.graphics.drawable.Drawable;
-import android.net.Uri;
-import android.os.Bundle;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.ImageView;
-import android.widget.TextView;
-
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-import androidx.fragment.app.Fragment;
-import androidx.fragment.app.FragmentActivity;
-import androidx.fragment.app.FragmentManager;
-
-import net.osmand.plus.R;
-import net.osmand.plus.activities.MapActivity;
-import net.osmand.plus.base.BaseOsmAndFragment;
-import net.osmand.plus.helpers.AndroidUiHelper;
-import net.osmand.plus.settings.backend.ApplicationMode;
-import net.osmand.plus.utils.AndroidUtils;
-import net.osmand.plus.utils.ColorUtilities;
-import net.osmand.plus.utils.UiUtilities;
-import net.osmand.plus.views.layers.MapInfoLayer;
-import net.osmand.plus.views.mapwidgets.MapWidgetRegistry;
-import net.osmand.plus.views.mapwidgets.WidgetType;
-import net.osmand.plus.views.mapwidgets.configure.panel.WidgetsConfigurationChangeListener;
-import net.osmand.plus.widgets.dialogbutton.DialogButton;
-import net.osmand.plus.widgets.dialogbutton.DialogButtonType;
-
-public abstract class WidgetSettingsBaseFragment extends BaseOsmAndFragment {
-
-	public static final String KEY_APP_MODE = "app_mode";
-	public static final String KEY_WIDGET_ID = "widget_id";
-
-	protected MapWidgetRegistry widgetRegistry;
-	protected ApplicationMode appMode;
-	protected String widgetId;
-
-	protected View view;
-
-	@NonNull
-	public abstract WidgetType getWidget();
-
-	@Override
-	public void onCreate(@Nullable Bundle savedInstanceState) {
-		super.onCreate(savedInstanceState);
-		widgetRegistry = app.getOsmandMap().getMapLayers().getMapWidgetRegistry();
-	}
-
-	protected void initParams(@NonNull Bundle bundle) {
-		widgetId = bundle.getString(KEY_WIDGET_ID);
-		appMode = ApplicationMode.valueOfStringKey(bundle.getString(KEY_APP_MODE), settings.getApplicationMode());
-	}
-
-	@Nullable
-	@Override
-	public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
-		Bundle args = getArguments();
-		if (savedInstanceState != null) {
-			initParams(savedInstanceState);
-		} else if (args != null) {
-			initParams(args);
-		}
-
-		updateNightMode();
-		view = themedInflater.inflate(R.layout.base_widget_fragment_layout, container, false);
-		AndroidUtils.addStatusBarPadding21v(requireMyActivity(), view);
-
-		setupToolbar();
-		setupContent(themedInflater, view.findViewById(R.id.main_content));
-		setupApplyButton();
-
-		return view;
-	}
-
-	private void setupToolbar() {
-		WidgetType widget = getWidget();
-
-		View closeButton = view.findViewById(R.id.close_button);
-		closeButton.setOnClickListener(v -> dismiss());
-
-		View helpButton = view.findViewById(R.id.help_button);
-		int docsUrlId = widget.docsUrlId;
-		if (docsUrlId == 0) {
-			AndroidUiHelper.updateVisibility(helpButton, false);
-		} else {
-			String docsUrl = getString(docsUrlId);
-			helpButton.setOnClickListener(v -> {
-				FragmentActivity activity = getActivity();
-				if (activity != null) {
-					AndroidUtils.openUrl(activity, Uri.parse(docsUrl), nightMode);
-				}
-			});
-		}
-
-		TextView title = view.findViewById(R.id.title);
-		title.setText(widget.titleId);
-
-		TextView subTitle = view.findViewById(R.id.sub_title);
-		subTitle.setText(R.string.shared_string_settings);
-
-		ImageView icon = view.findViewById(R.id.icon);
-		icon.setImageDrawable(getIcon(widget.getIconId(nightMode)));
-	}
-
-	protected abstract void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container);
-
-	private void setupApplyButton() {
-		DialogButton applyButton = view.findViewById(R.id.dismiss_button);
-		applyButton.setOnClickListener(v -> {
-			applySettings();
-			MapInfoLayer mapInfoLayer = app.getOsmandMap().getMapLayers().getMapInfoLayer();
-			if (mapInfoLayer != null) {
-				mapInfoLayer.recreateControls();
-			}
-			Fragment target = getTargetFragment();
-			if (target instanceof WidgetsConfigurationChangeListener) {
-				((WidgetsConfigurationChangeListener) target).onWidgetsConfigurationChanged();
-			}
-			dismiss();
-		});
-		applyButton.setButtonType(DialogButtonType.PRIMARY);
-		applyButton.setTitleId(R.string.shared_string_apply);
-	}
-
-	protected abstract void applySettings();
-
-	protected void dismiss() {
-		Activity activity = getActivity();
-		if (activity != null) {
-			activity.onBackPressed();
-		}
-	}
-
-	@Override
-	public void onSaveInstanceState(@NonNull Bundle outState) {
-		super.onSaveInstanceState(outState);
-		outState.putString(KEY_APP_MODE, appMode.getStringKey());
-		outState.putString(KEY_WIDGET_ID, widgetId);
-	}
-
-	@Override
-	public int getStatusBarColorId() {
-		AndroidUiHelper.setStatusBarContentColor(getView(), nightMode);
-		return nightMode ? R.color.status_bar_main_dark : R.color.activity_background_color_light;
-	}
-
-	public boolean getContentStatusBarNightMode() {
-		return nightMode;
-	}
-
-	@NonNull
-	protected Drawable getPressedStateDrawable() {
-		int activeColor = ColorUtilities.getActiveColor(app, nightMode);
-		return UiUtilities.getColoredSelectableDrawable(app, activeColor);
-	}
-
-	@Nullable
-	protected MapActivity getMapActivity() {
-		Activity activity = getActivity();
-		return activity != null ? ((MapActivity) activity) : null;
-	}
-
-	public static void showFragment(@NonNull FragmentManager manager, @NonNull Bundle args,
-	                                @NonNull WidgetSettingsBaseFragment fragment, @Nullable Fragment target) {
-		String tag = fragment.getClass().getSimpleName();
-		if (AndroidUtils.isFragmentCanBeAdded(manager, tag, true)) {
-			fragment.setArguments(args);
-			fragment.setTargetFragment(target, 0);
-
-			manager.beginTransaction()
-					.add(R.id.fragmentContainer, fragment, tag)
-					.addToBackStack(tag)
-					.commitAllowingStateLoss();
-		}
-	}
-}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ZoomLevelSettingsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ZoomLevelInfoFragment.java
similarity index 89%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ZoomLevelSettingsFragment.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ZoomLevelInfoFragment.java
index 655e43ccdb0..31e16cacba1 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ZoomLevelSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/ZoomLevelInfoFragment.java
@@ -11,7 +11,6 @@
 import net.osmand.plus.plugins.development.widget.ZoomLevelWidget;
 import net.osmand.plus.settings.backend.preferences.OsmandPreference;
 import net.osmand.plus.utils.ColorUtilities;
-import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
 import net.osmand.plus.views.mapwidgets.widgetstates.ZoomLevelWidgetState.ZoomLevelType;
 import net.osmand.plus.widgets.alert.AlertDialogData;
@@ -19,7 +18,7 @@
 
 import androidx.annotation.NonNull;
 
-public class ZoomLevelSettingsFragment extends BaseSimpleWidgetSettingsFragment {
+public class ZoomLevelInfoFragment extends BaseSimpleWidgetInfoFragment {
 
 	private static final String ZOOM_LEVEL_TYPE_KEY = "zoom_level_type";
 
@@ -35,7 +34,6 @@ public WidgetType getWidget() {
 	@Override
 	protected void initParams(@NonNull Bundle bundle) {
 		super.initParams(bundle);
-		MapWidgetInfo widgetInfo = widgetRegistry.getWidgetInfoById(widgetId);
 		if (widgetInfo != null) {
 			ZoomLevelWidget widget = (ZoomLevelWidget) widgetInfo.widget;
 			zoomLevelTypePref = widget.getZoomLevelTypePref();
@@ -58,7 +56,7 @@ protected void applySettings() {
 	}
 
 	@Override
-	protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
+	protected void setupMainContent(@NonNull LayoutInflater themedInflater, @NonNull ViewGroup container) {
 		themedInflater.inflate(R.layout.fragment_widget_settings_zoom_level, container);
 
 		View zoomLevelTypeContainer = container.findViewById(R.id.zoom_level_type_container);
@@ -67,7 +65,6 @@ protected void setupContent(@NonNull LayoutInflater themedInflater, @NonNull Vie
 		updateSelectedZoomLevelTypeText();
 		themedInflater.inflate(R.layout.divider, container);
 
-		super.setupContent(themedInflater, container);
 	}
 
 	private void showZoomLevelTypeSelectionDialog() {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
index c390e5e6e9c..4b16c65652b 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
@@ -50,7 +50,7 @@ public abstract class MapWidget {
 
 	protected final View view;
 
-	public MapWidget(@NonNull MapActivity mapActivity, @Nullable WidgetType widgetType,
+	public MapWidget(@NonNull MapActivity mapActivity, @NonNull WidgetType widgetType,
 			@Nullable String customId, @Nullable WidgetsPanel panel) {
 		this.app = mapActivity.getMyApplication();
 		this.settings = app.getSettings();
@@ -117,7 +117,7 @@ public WidgetState getWidgetState() {
 		return null;
 	}
 
-	@Nullable
+	@NonNull
 	public WidgetType getWidgetType() {
 		return widgetType;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnBaseWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnBaseWidget.java
index 61c746eda5f..5edefe88037 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnBaseWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnBaseWidget.java
@@ -117,7 +117,7 @@ private void setupViews() {
 		findViews();
 		updateWidgetView();
 		view.setOnLongClickListener(v -> {
-			WidgetsContextMenu.showMenu(view, mapActivity, widgetType, customId, null, verticalWidget, nightMode);
+			WidgetsContextMenu.showMenu(view, mapActivity, widgetType, customId, null, panel, nightMode);
 			return true;
 		});
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
index 43060de9c81..b1ac9dd94d4 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
@@ -65,7 +65,7 @@ private void setupViews() {
 		UiUtilities.getInflater(mapActivity, nightMode).inflate(layoutId, container);
 		findViews();
 		view.setOnLongClickListener(v -> {
-			WidgetsContextMenu.showMenu(v, mapActivity, widgetType, customId, getWidgetActions(), isVerticalWidget(), nightMode);
+			WidgetsContextMenu.showMenu(v, mapActivity, widgetType, customId, getWidgetActions(), panel, nightMode);
 			return true;
 		});
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TextInfoWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TextInfoWidget.java
index 195731f3ccf..0cf8fee74ca 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TextInfoWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TextInfoWidget.java
@@ -46,7 +46,7 @@ public class TextInfoWidget extends MapWidget implements ISupportSidePanel {
 	private Integer cachedAngularUnits;
 
 
-	public TextInfoWidget(@NonNull MapActivity mapActivity, @Nullable WidgetType widgetType,
+	public TextInfoWidget(@NonNull MapActivity mapActivity, @NonNull WidgetType widgetType,
 			@Nullable String customId, @Nullable WidgetsPanel panel) {
 		super(mapActivity, widgetType, customId, panel);
 		container = view.findViewById(R.id.container);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/routeinfo/RouteInfoWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/routeinfo/RouteInfoWidget.java
index 3e0bf6c9c07..affceab3945 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/routeinfo/RouteInfoWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/routeinfo/RouteInfoWidget.java
@@ -121,7 +121,7 @@ private void setupViews() {
 		buttonTappableArea.setOnClickListener(v -> mapActivity.getMapActions().doRoute());
 
 		view.setOnLongClickListener(v -> {
-			WidgetsContextMenu.showMenu(view, mapActivity, widgetType, customId, null, true, nightMode);
+			WidgetsContextMenu.showMenu(view, mapActivity, widgetType, customId, null, panel, nightMode);
 			return true;
 		});
 	}
