diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
index 14e5af5d299..396de283e53 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
@@ -15,7 +15,6 @@
 import net.osmand.StateChangedListener;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
-import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.OsmAndAppCustomization;
 import net.osmand.plus.settings.backend.OsmandSettings;
@@ -262,12 +261,12 @@ public boolean isVisible(String key) {
 	}
 
 	public void setVisibility(@NonNull MapWidgetInfo widgetInfo, boolean visible, boolean collapsed) {
-		ApplicationMode mode = settings.APPLICATION_MODE.get();
-		setVisibility(mode, widgetInfo, visible, collapsed);
-
-		OsmandPreference<Boolean> pref = widgetInfo.widget.getWidgetVisibilityPref();
-		if (pref != null) {
-			pref.set(!pref.get());
+		OsmandPreference<Boolean> visibilityPref = widgetInfo.widget.getWidgetVisibilityPref();
+		if (visibilityPref != null) {
+			visibilityPref.set(!visibilityPref.get());
+		} else {
+			ApplicationMode mode = settings.APPLICATION_MODE.get();
+			setVisibility(mode, widgetInfo, visible, collapsed);
 		}
 
 		MapInfoLayer mapInfoLayer = app.getOsmandMap().getMapLayers().getMapInfoLayer();
@@ -340,35 +339,6 @@ private void saveVisibleElementsToSettings(ApplicationMode mode) {
 		settings.MAP_INFO_CONTROLS.set(bs.toString());
 	}
 
-
-	private void resetDefault(ApplicationMode mode, Set<MapWidgetInfo> set) {
-		for (MapWidgetInfo ri : set) {
-			ri.removeVisibleCollapsible(mode);
-			ri.removeVisible(mode);
-			if (mode.isWidgetVisible(ri.key)) {
-				if (mode.isWidgetCollapsible(ri.key)) {
-					ri.addVisibleCollapsible(mode);
-				} else {
-					ri.addVisible(mode);
-				}
-			}
-		}
-	}
-
-	public void resetToDefault() {
-		ApplicationMode appMode = settings.getApplicationMode();
-		resetDefault(appMode, getLeftWidgets());
-		resetDefault(appMode, getRightWidgets());
-		resetDefaultAppearance(appMode);
-		visibleSideWidgetsFromSettings.put(appMode, null);
-		settings.MAP_INFO_CONTROLS.set(SHOW_PREFIX);
-	}
-
-	private void resetDefaultAppearance(ApplicationMode mode) {
-		settings.TRANSPARENT_MAP_THEME.resetModeToDefault(mode);
-		settings.SHOW_STREET_NAME.resetModeToDefault(mode);
-	}
-
 	public void reorderWidgets() {
 		for (WidgetsPanel panel : WidgetsPanel.values()) {
 			Set<MapWidgetInfo> oldOrder = getWidgetsForPanel(panel);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkersBarWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkersBarWidget.java
index 147a2fb6c16..8b9663f9e24 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkersBarWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkersBarWidget.java
@@ -6,9 +6,6 @@
 import android.widget.ImageView;
 import android.widget.TextView;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 import net.osmand.Location;
 import net.osmand.data.LatLon;
 import net.osmand.data.PointDescription;
@@ -18,6 +15,7 @@
 import net.osmand.plus.mapmarkers.MapMarker;
 import net.osmand.plus.mapmarkers.MapMarkersDialogFragment;
 import net.osmand.plus.mapmarkers.MapMarkersHelper;
+import net.osmand.plus.settings.backend.preferences.OsmandPreference;
 import net.osmand.plus.utils.OsmAndFormatter;
 import net.osmand.plus.views.DirectionDrawable;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
@@ -28,6 +26,9 @@
 
 import java.util.List;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 public class MapMarkersBarWidget extends MapWidget {
 
 	public static final int MIN_METERS_OK_VISIBLE = 40;
@@ -216,6 +217,12 @@ private void updateMarker(@NonNull LatLon latlon, @Nullable Float heading, @NonN
 		addressText.setText(descr);
 	}
 
+	@Nullable
+	@Override
+	public OsmandPreference<Boolean> getWidgetVisibilityPref() {
+		return settings.SHOW_MAP_MARKERS_BAR_WIDGET;
+	}
+
 	@Override
 	protected boolean updateVisibility(boolean visible) {
 		boolean updatedVisibility = super.updateVisibility(visible);
