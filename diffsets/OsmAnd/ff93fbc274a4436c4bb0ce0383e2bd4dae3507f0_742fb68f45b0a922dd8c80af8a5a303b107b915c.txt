diff --git a/OsmAnd/res/layout/fragment_gpx_approximation_bottom_sheet_dialog.xml b/OsmAnd/res/layout/fragment_gpx_approximation_bottom_sheet_dialog.xml
index 086fb5a66f9..0d85fb98e59 100644
--- a/OsmAnd/res/layout/fragment_gpx_approximation_bottom_sheet_dialog.xml
+++ b/OsmAnd/res/layout/fragment_gpx_approximation_bottom_sheet_dialog.xml
@@ -13,6 +13,14 @@
 
 		<include layout="@layout/context_menu_top_shadow" />
 
+		<include layout="@layout/plan_route_progress_bar" />
+
+		<LinearLayout
+			android:id="@+id/gpx_approximation_top_shadow_all"
+			android:layout_width="match_parent"
+			android:layout_height="wrap_content"
+			android:orientation="vertical" />
+
 		<FrameLayout
 			android:id="@+id/bottom_container"
 			android:layout_width="match_parent"
@@ -36,8 +44,6 @@
 
 			</net.osmand.plus.LockableScrollView>
 
-			<include layout="@layout/plan_route_progress_bar"/>
-
 		</FrameLayout>
 
 	</LinearLayout>
diff --git a/OsmAnd/src/net/osmand/plus/base/ContextMenuFragment.java b/OsmAnd/src/net/osmand/plus/base/ContextMenuFragment.java
index 664c2a8afee..57928eac507 100644
--- a/OsmAnd/src/net/osmand/plus/base/ContextMenuFragment.java
+++ b/OsmAnd/src/net/osmand/plus/base/ContextMenuFragment.java
@@ -66,6 +66,7 @@ public static class MenuState {
 	private View view;
 	private OnLayoutChangeListener containerLayoutListener;
 	private View topShadow;
+	private ViewGroup topView;
 	private View bottomScrollView;
 	private LinearLayout cardsContainer;
 	private FrameLayout bottomContainer;
@@ -167,6 +168,11 @@ public LinearLayout getMainView() {
 		return mainView;
 	}
 
+	@Nullable
+	public ViewGroup getTopView() {
+		return topView;
+	}
+
 	public boolean isNightMode() {
 		return nightMode;
 	}
@@ -290,7 +296,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 		final int touchSlop = vc.getScaledTouchSlop();
 
 		if (getTopViewId() != 0) {
-			View topView = view.findViewById(getTopViewId());
+			topView = view.findViewById(getTopViewId());
 			AndroidUtils.setBackground(app, topView, nightMode, R.color.card_and_list_background_light, R.color.card_and_list_background_dark);
 		}
 		if (!portrait) {
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/GpxApproximationFragment.java b/OsmAnd/src/net/osmand/plus/measurementtool/GpxApproximationFragment.java
index 7c19d0db339..4217faf1c99 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/GpxApproximationFragment.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/GpxApproximationFragment.java
@@ -61,6 +61,11 @@ public int getMainLayoutId() {
 		return R.layout.fragment_gpx_approximation_bottom_sheet_dialog;
 	}
 
+	@Override
+	public int getTopViewId() {
+		return R.id.gpx_approximation_top_shadow_all;
+	}
+
 	@Override
 	public int getHeaderViewHeight() {
 		return menuTitleHeight;
@@ -259,9 +264,11 @@ private void updateCards() {
 			ViewGroup cardsContainer = getCardsContainer();
 			cardsContainer.removeAllViews();
 
-			SliderCard sliderCard = new SliderCard(mapActivity, distanceThreshold);
-			sliderCard.setListener(this);
-			cardsContainer.addView(sliderCard.build(mapActivity));
+			if (getTopView() != null) {
+				SliderCard sliderCard = new SliderCard(mapActivity, distanceThreshold);
+				sliderCard.setListener(this);
+				getTopView().addView(sliderCard.build(mapActivity));
+			}
 
 			ProfileCard profileCard = new ProfileCard(mapActivity, snapToRoadAppMode);
 			profileCard.setListener(this);
diff --git a/OsmAnd/src/net/osmand/plus/routepreparationmenu/MapRouteInfoMenuFragment.java b/OsmAnd/src/net/osmand/plus/routepreparationmenu/MapRouteInfoMenuFragment.java
index 0f7f812f488..65f1bab915d 100644
--- a/OsmAnd/src/net/osmand/plus/routepreparationmenu/MapRouteInfoMenuFragment.java
+++ b/OsmAnd/src/net/osmand/plus/routepreparationmenu/MapRouteInfoMenuFragment.java
@@ -477,8 +477,8 @@ public void applyDayNightMode() {
 		AndroidUtils.setBackground(ctx, getCardsContainer(), isNightMode(),
 				R.color.activity_background_light, R.color.activity_background_dark);
 
-		if (getTopViewId() != 0) {
-			View topView = view.findViewById(getTopViewId());
+		if (getTopView() != null) {
+			View topView = getTopView();
 			AndroidUtils.setBackground(ctx, topView, isNightMode(), R.color.card_and_list_background_light, R.color.card_and_list_background_dark);
 		}
 
