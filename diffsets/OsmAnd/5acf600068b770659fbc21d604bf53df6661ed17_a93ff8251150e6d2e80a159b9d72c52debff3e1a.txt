diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/dialogs/AddWidgetFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/dialogs/AddWidgetFragment.java
index 38951353bdc..84f5e6516aa 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/dialogs/AddWidgetFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/dialogs/AddWidgetFragment.java
@@ -49,10 +49,11 @@
 import java.util.TreeMap;
 
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.ENABLED_MODE;
+import static net.osmand.plus.views.mapwidgets.configure.dialogs.WidgetDataHolder.KEY_EXTERNAL_WIDGET_ID;
 import static net.osmand.plus.views.mapwidgets.configure.dialogs.WidgetDataHolder.KEY_EXTERNAL_PROVIDER_PACKAGE;
 import static net.osmand.plus.views.mapwidgets.configure.dialogs.WidgetDataHolder.KEY_GROUP_NAME;
 import static net.osmand.plus.views.mapwidgets.configure.dialogs.WidgetDataHolder.KEY_WIDGETS_PANEL_ID;
-import static net.osmand.plus.views.mapwidgets.configure.dialogs.WidgetDataHolder.KEY_WIDGET_ID;
+import static net.osmand.plus.views.mapwidgets.configure.dialogs.WidgetDataHolder.KEY_WIDGET_TYPE;
 
 public class AddWidgetFragment extends BaseOsmAndFragment {
 
@@ -386,7 +387,7 @@ public static void showWidgetDialog(@NonNull FragmentManager fragmentManager,
 		Bundle args = new Bundle();
 		args.putString(KEY_APP_MODE, appMode.getStringKey());
 		args.putString(KEY_WIDGETS_PANEL_ID, widgetsPanel.name());
-		args.putString(KEY_WIDGET_ID, widgetType.id);
+		args.putString(KEY_WIDGET_TYPE, widgetType.name());
 		args.putSerializable(KEY_ALREADY_SELECTED_WIDGETS_IDS, (Serializable) alreadySelectedWidgetsIds);
 		AddWidgetFragment fragment = new AddWidgetFragment();
 		fragment.setArguments(args);
@@ -407,7 +408,7 @@ public static void showExternalWidgetDialog(@NonNull FragmentManager fragmentMan
 		Bundle args = new Bundle();
 		args.putString(KEY_APP_MODE, appMode.getStringKey());
 		args.putString(KEY_WIDGETS_PANEL_ID, widgetsPanel.name());
-		args.putString(KEY_WIDGET_ID, widgetId);
+		args.putString(KEY_EXTERNAL_WIDGET_ID, widgetId);
 		args.putString(KEY_EXTERNAL_PROVIDER_PACKAGE, externalProviderPackage);
 		args.putSerializable(KEY_ALREADY_SELECTED_WIDGETS_IDS, (Serializable) alreadySelectedWidgetsIds);
 		AddWidgetFragment fragment = new AddWidgetFragment();
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/dialogs/WidgetDataHolder.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/dialogs/WidgetDataHolder.java
index 47309da5964..c691346b761 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/dialogs/WidgetDataHolder.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/dialogs/WidgetDataHolder.java
@@ -24,7 +24,8 @@ public class WidgetDataHolder {
 
 	public static final String KEY_WIDGETS_PANEL_ID = "widgets_panel_id";
 	public static final String KEY_GROUP_NAME = "group_name";
-	public static final String KEY_WIDGET_ID = "widget_id";
+	public static final String KEY_WIDGET_TYPE = "widget_type_name";
+	public static final String KEY_EXTERNAL_WIDGET_ID = "aidl_widget_id";
 	public static final String KEY_EXTERNAL_PROVIDER_PACKAGE = "external_provider_package";
 
 	private final OsmandApplication app;
@@ -46,7 +47,7 @@ public WidgetDataHolder(@NonNull OsmandApplication app, @NonNull Bundle bundle)
 		if (bundle.containsKey(KEY_GROUP_NAME)) {
 			widgetGroup = WidgetGroup.valueOf(bundle.getString(KEY_GROUP_NAME));
 		} else if (bundle.containsKey(KEY_EXTERNAL_PROVIDER_PACKAGE)) {
-			aidlWidgetId = bundle.getString(KEY_WIDGET_ID);
+			aidlWidgetId = bundle.getString(KEY_EXTERNAL_WIDGET_ID);
 			externalProviderPackage = bundle.getString(KEY_EXTERNAL_PROVIDER_PACKAGE);
 			connectedApp = app.getAidlApi().getConnectedApp(externalProviderPackage);
 			if (connectedApp != null) {
@@ -54,7 +55,7 @@ public WidgetDataHolder(@NonNull OsmandApplication app, @NonNull Bundle bundle)
 				aidlWidgetData = connectedApp.getWidgets().get(sourceId);
 			}
 		} else {
-			widgetType = WidgetType.getById(bundle.getString(KEY_WIDGET_ID));
+			widgetType = WidgetType.valueOf(bundle.getString(KEY_WIDGET_TYPE));
 		}
 	}
 
@@ -167,9 +168,9 @@ public void saveState(@NonNull Bundle outState) {
 		if (widgetGroup != null) {
 			outState.putString(KEY_GROUP_NAME, widgetGroup.name());
 		} else if (widgetType != null) {
-			outState.putString(KEY_WIDGET_ID, widgetType.id);
+			outState.putString(KEY_WIDGET_TYPE, widgetType.name());
 		} else {
-			outState.putString(KEY_WIDGET_ID, aidlWidgetId);
+			outState.putString(KEY_EXTERNAL_WIDGET_ID, aidlWidgetId);
 			outState.putString(KEY_EXTERNAL_PROVIDER_PACKAGE, externalProviderPackage);
 		}
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/ConfigureWidgetsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/ConfigureWidgetsFragment.java
index 031e2f3ae50..cf06fea6414 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/ConfigureWidgetsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/ConfigureWidgetsFragment.java
@@ -35,6 +35,7 @@
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.base.BaseOsmAndFragment;
+import net.osmand.plus.configmap.ConfigureMapFragment;
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.OsmandSettings;
