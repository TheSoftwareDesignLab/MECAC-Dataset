diff --git a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/MainActivity.java b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/MainActivity.java
index 8d8effa42ab..6c398291193 100644
--- a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/MainActivity.java
+++ b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/MainActivity.java
@@ -7,6 +7,7 @@
 import android.content.SharedPreferences.Editor;
 import android.content.pm.PackageManager;
 import android.graphics.PointF;
+import android.graphics.drawable.Drawable;
 import android.os.Bundle;
 import android.support.annotation.NonNull;
 import android.support.annotation.Nullable;
@@ -28,6 +29,9 @@
 import net.osmand.core.jni.IMapLayerProvider;
 import net.osmand.core.jni.IMapStylesCollection;
 import net.osmand.core.jni.Logger;
+import net.osmand.core.jni.MapMarker;
+import net.osmand.core.jni.MapMarkerBuilder;
+import net.osmand.core.jni.MapMarkersCollection;
 import net.osmand.core.jni.MapObjectsSymbolsProvider;
 import net.osmand.core.jni.MapPresentationEnvironment;
 import net.osmand.core.jni.MapPrimitivesProvider;
@@ -39,6 +43,7 @@
 import net.osmand.core.jni.PointI;
 import net.osmand.core.jni.QIODeviceLogSink;
 import net.osmand.core.jni.ResolvedMapStyle;
+import net.osmand.core.jni.SwigUtilities;
 import net.osmand.core.jni.Utilities;
 import net.osmand.core.samples.android.sample1.MultiTouchSupport.MultiTouchZoomListener;
 import net.osmand.core.samples.android.sample1.data.PointDescription;
@@ -84,7 +89,13 @@ public class MainActivity extends AppCompatActivity {
 	private MapContextMenu menu;
 	private MapMultiSelectionMenu multiMenu;
 
-	private boolean noMapsFound;
+	// Context pin marker
+	private MapMarkersCollection contextPinMarkersCollection;
+	private MapMarker contextPinMarker;
+
+	// "My location" marker, "My course" marker and collection
+	private MapMarkersCollection myMarkersCollection;
+	private MapMarker myLocationMarker;
 
 	// Germany
 	private final static float INIT_LAT = 49.353953f;
@@ -232,9 +243,10 @@ public void onClick(View v) {
 
 		app.getIconsCache().setDisplayDensityFactor(displayDensityFactor);
 
+		initMapMarkers();
+
 		menu = new MapContextMenu();
 		menu.setMainActivity(this);
-
 		multiMenu = new MapMultiSelectionMenu(this);
 
 		if (!InstallOsmandAppDialog.show(getSupportFragmentManager(), this)
@@ -245,6 +257,7 @@ public void onClick(View v) {
 
 	private void checkMapsInstalled() {
 		File mapsDir = new File(getSampleApplication().getAbsoluteAppPath());
+		boolean noMapsFound;
 		if (mapsDir.exists()) {
 			File[] maps = mapsDir.listFiles(new FilenameFilter() {
 				@Override
@@ -272,6 +285,38 @@ public void onClick(DialogInterface dialog, int which) {
 		}
 	}
 
+	public void initMapMarkers() {
+		// Create context pin marker
+		Drawable pinDrawable = OsmandResources.getDrawable("map_pin_context_menu");
+		contextPinMarkersCollection = new MapMarkersCollection();
+		contextPinMarker = new MapMarkerBuilder()
+				.setIsAccuracyCircleSupported(false)
+				.setBaseOrder(-210000)
+				.setIsHidden(true)
+				.setPinIcon(SwigUtilities.createSkBitmapARGB888With(
+						pinDrawable.getIntrinsicWidth(), pinDrawable.getIntrinsicHeight(),
+						SampleUtils.getDrawableAsByteArray(pinDrawable)))
+				.setPinIconVerticalAlignment(MapMarker.PinIconVerticalAlignment.Top)
+				.setPinIconHorisontalAlignment(MapMarker.PinIconHorisontalAlignment.CenterHorizontal)
+		.buildAndAddToCollection(contextPinMarkersCollection);
+
+		mapView.addSymbolsProvider(contextPinMarkersCollection);
+	}
+
+	public void showContextMarker(@NonNull LatLon location) {
+		mapView.suspendSymbolsUpdate();
+		PointI locationI = Utilities.convertLatLonTo31(new net.osmand.core.jni.LatLon(location.getLatitude(), location.getLongitude()));
+		contextPinMarker.setPosition(locationI);
+		contextPinMarker.setIsHidden(false);
+		mapView.resumeSymbolsUpdate();
+	}
+
+	public void hideContextMarker() {
+		mapView.suspendSymbolsUpdate();
+		contextPinMarker.setIsHidden(true);
+		mapView.resumeSymbolsUpdate();
+	}
+
 	@Override
 	protected void onResume() {
 		super.onResume();
@@ -423,8 +468,7 @@ public void setElevationAngle(float angle) {
 	}
 
 	public boolean onTouchEvent(MotionEvent event) {
-		return multiTouchSupport.onTouchEvent(event)
-				|| gestureDetector.onTouchEvent(event);
+		return multiTouchSupport.onTouchEvent(event) || gestureDetector.onTouchEvent(event);
 	}
 
 	private class MapViewOnGestureListener extends SimpleOnGestureListener {
@@ -437,11 +481,15 @@ public boolean onSingleTapUp(MotionEvent e) {
 
 		@Override
 		public void onLongPress(MotionEvent e) {
-			PointI point31 = new PointI();
-			mapView.getLocationFromScreenPoint(new PointI((int) e.getX(), (int) e.getY()), point31);
-			net.osmand.core.jni.LatLon jniLatLon = Utilities.convert31ToLatLon(point31);
-			menu.show(new LatLon(jniLatLon.getLatitude(), jniLatLon.getLongitude()),
-					new PointDescription(jniLatLon.getLatitude(), jniLatLon.getLongitude()), null);
+			if (!multiTouchSupport.isInMultiTouch()) {
+				PointI point31 = new PointI();
+				int[] offset = new int[]{0, 0};
+				mapView.getLocationInWindow(offset);
+				mapView.getLocationFromScreenPoint(new PointI((int) e.getX() - offset[0], (int) e.getY() - offset[1]), point31);
+				net.osmand.core.jni.LatLon jniLatLon = Utilities.convert31ToLatLon(point31);
+				showContextMenu(new LatLon(jniLatLon.getLatitude(), jniLatLon.getLongitude()),
+						new PointDescription(jniLatLon.getLatitude(), jniLatLon.getLongitude()), null);
+			}
 		}
 
 		@Override
@@ -460,6 +508,7 @@ public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float d
 			setTarget(newTarget);
 
 			mapView.requestFocus();
+			hideContextMenu(false);
 			return true;
 		}
 	}
@@ -589,7 +638,14 @@ public QuickSearchDialogFragment getQuickSearchDialogFragment() {
 	}
 
 	private void hideContextMenu() {
+		hideContextMenu(true);
+	}
+
+	private void hideContextMenu(boolean restorePosition) {
 		if (menu.isVisible()) {
+			if (!restorePosition) {
+				menu.updateMapCenter(null);
+			}
 			menu.hide();
 		} else if (menu.getMultiSelectionMenu().isVisible()) {
 			menu.getMultiSelectionMenu().hide();
diff --git a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/MultiTouchSupport.java b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/MultiTouchSupport.java
index 1b4e717d39a..8fd22f145ea 100644
--- a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/MultiTouchSupport.java
+++ b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/MultiTouchSupport.java
@@ -60,6 +60,10 @@ public boolean isInTiltMode() {
 		return inTiltMode;
 	}
 
+	public boolean isInMultiTouch() {
+		return multiTouch;
+	}
+
 	private void initMethods() {
 		try {
 			getPointerCount = MotionEvent.class.getMethod("getPointerCount"); //$NON-NLS-1$
diff --git a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/SampleUtils.java b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/SampleUtils.java
index 297047e8cd2..7ad1917244d 100644
--- a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/SampleUtils.java
+++ b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/SampleUtils.java
@@ -7,6 +7,9 @@
 import android.content.Intent;
 import android.content.pm.ActivityInfo;
 import android.content.pm.PackageManager;
+import android.graphics.Bitmap;
+import android.graphics.drawable.BitmapDrawable;
+import android.graphics.drawable.Drawable;
 import android.util.DisplayMetrics;
 import android.util.Log;
 import android.view.Surface;
@@ -14,6 +17,7 @@
 import net.osmand.PlatformUtil;
 
 import java.io.File;
+import java.nio.ByteBuffer;
 import java.util.List;
 
 public class SampleUtils {
@@ -184,4 +188,19 @@ public static List<File> collectFiles(File dir, String ext, List<File> files) {
 		}
 		return files;
 	}
+
+	public static byte[] getDrawableAsByteArray(Drawable drawable) {
+		if (drawable instanceof BitmapDrawable) {
+			Bitmap bitmap = ((BitmapDrawable) drawable).getBitmap();
+			return getBitmapAsByteArray(bitmap);
+		}
+		return null;
+	}
+
+	public static byte[] getBitmapAsByteArray(Bitmap bitmap) {
+		int size = bitmap.getRowBytes() * bitmap.getHeight();
+		ByteBuffer byteBuffer = ByteBuffer.allocate(size);
+		bitmap.copyPixelsToBuffer(byteBuffer);
+		return byteBuffer.array();
+	}
 }
diff --git a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/mapcontextmenu/MapContextMenu.java b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/mapcontextmenu/MapContextMenu.java
index ea0f61c2477..3ad211de64e 100644
--- a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/mapcontextmenu/MapContextMenu.java
+++ b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/mapcontextmenu/MapContextMenu.java
@@ -224,6 +224,7 @@ private void showInternal() {
 		if (!MapContextMenuFragment.showInstance(this, mainActivity, centerMarker)) {
 			active = false;
 		} else {
+			mainActivity.showContextMarker(latLon);
 			if (menuController != null) {
 				menuController.onShow();
 			}
@@ -262,6 +263,7 @@ public void close() {
 			if (menuController != null) {
 				menuController.setActive(false);
 			}
+			mainActivity.hideContextMarker();
 			mainActivity.refreshMap();
 		}
 	}
diff --git a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/mapcontextmenu/MapContextMenuFragment.java b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/mapcontextmenu/MapContextMenuFragment.java
index 03fb4cf52eb..bf38ab0feac 100644
--- a/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/mapcontextmenu/MapContextMenuFragment.java
+++ b/OsmAndCore-sample/src/net/osmand/core/samples/android/sample1/mapcontextmenu/MapContextMenuFragment.java
@@ -27,7 +27,6 @@
 
 import net.osmand.AndroidUtils;
 import net.osmand.Location;
-import net.osmand.core.android.AtlasMapRendererView;
 import net.osmand.core.jni.PointI;
 import net.osmand.core.jni.Utilities;
 import net.osmand.core.samples.android.sample1.IconsCache;
@@ -81,7 +80,6 @@ public class MapContextMenuFragment extends Fragment {
 	private int markerPaddingPx;
 	private int markerPaddingXPx;
 
-	private AtlasMapRendererView map;
 	private LatLon mapCenter;
 	private int origMarkerX;
 	private int origMarkerY;
@@ -122,8 +120,6 @@ public View onCreateView(LayoutInflater inflater, ViewGroup container,
 		rightTitleButtonController = menu.getRightTitleButtonController();
 		topRightTitleButtonController = menu.getTopRightTitleButtonController();
 
-		map = getMainActivity().getMapView();
-
 		RotatedTileBox box = getBox();
 		customMapCenter = menu.getMapCenter() != null;
 		if (!customMapCenter) {
