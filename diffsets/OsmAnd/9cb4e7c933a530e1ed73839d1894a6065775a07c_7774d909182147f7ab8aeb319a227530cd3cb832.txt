diff --git a/OsmAnd/src/net/osmand/aidl/ConnectedApp.java b/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
index 3fb25d98bed..e47649a98a2 100644
--- a/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
+++ b/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
@@ -196,53 +196,61 @@ void createWidgetControls(@NonNull MapActivity mapActivity, @NonNull List<MapWid
 	}
 
 	@NonNull
-	TextInfoWidget createWidgetControl(@NonNull MapActivity mapActivity, String widgetId) {
-		TextInfoWidget control = new TextInfoWidget(mapActivity) {
+	TextInfoWidget createWidgetControl(@NonNull MapActivity mapActivity, @NonNull String widgetId) {
+		return new AidlTextInfoWidget(mapActivity, widgetId);
+	}
 
-			private boolean init = true;
-			private String cachedTxt;
-			private String cachedSubtext;
-			private Boolean cachedNight;
-			private Integer cachedIcon;
+	class AidlTextInfoWidget extends TextInfoWidget {
 
-			@Override
-			public void updateInfo(@Nullable DrawSettings drawSettings) {
+		private final String widgetId;
+
+		private String cachedTxt;
+		private String cachedSubtext;
+		private Boolean cachedNight;
+		private Integer cachedIcon;
+		private boolean init = true;
+
+		public AidlTextInfoWidget(@NonNull MapActivity mapActivity, @NonNull String widgetId) {
+			super(mapActivity, null);
+			this.widgetId = widgetId;
+
+			updateInfo(null);
+			setOnClickListener(v -> {
 				AidlMapWidgetWrapper widget = widgets.get(widgetId);
-				if (widget != null) {
-					String txt = widget.getText();
-					String subtext = widget.getDescription();
-					boolean night = drawSettings != null && drawSettings.isNightMode();
-					int icon = AndroidUtils.getDrawableId(app, night ? widget.getDarkIconName() : widget.getLightIconName());
-					if (init || !Algorithms.objectEquals(txt, cachedTxt) || !Algorithms.objectEquals(subtext, cachedSubtext)
-							|| !Algorithms.objectEquals(night, cachedNight) || !Algorithms.objectEquals(icon, cachedIcon)) {
-						init = false;
-						cachedTxt = txt;
-						cachedSubtext = subtext;
-						cachedNight = night;
-						cachedIcon = icon;
-
-						setText(txt, subtext);
-						if (icon != 0) {
-							setImageDrawable(icon);
-						} else {
-							setImageDrawable(null);
-						}
-					}
-				} else {
-					setText(null, null);
-					setImageDrawable(null);
+				if (widget != null && widget.getIntentOnClick() != null) {
+					app.startActivity(widget.getIntentOnClick());
 				}
-			}
-		};
-		control.updateInfo(null);
+			});
+		}
 
-		control.setOnClickListener(v -> {
+		@Override
+		public void updateInfo(@Nullable DrawSettings drawSettings) {
 			AidlMapWidgetWrapper widget = widgets.get(widgetId);
-			if (widget != null && widget.getIntentOnClick() != null) {
-				app.startActivity(widget.getIntentOnClick());
+			if (widget != null) {
+				String txt = widget.getText();
+				String subtext = widget.getDescription();
+				boolean nightMode = drawSettings != null && drawSettings.isNightMode();
+				int icon = AndroidUtils.getDrawableId(app, nightMode ? widget.getDarkIconName() : widget.getLightIconName());
+				if (init || !Algorithms.objectEquals(txt, cachedTxt) || !Algorithms.objectEquals(subtext, cachedSubtext)
+						|| !Algorithms.objectEquals(nightMode, cachedNight) || !Algorithms.objectEquals(icon, cachedIcon)) {
+					init = false;
+					cachedTxt = txt;
+					cachedSubtext = subtext;
+					cachedNight = nightMode;
+					cachedIcon = icon;
+
+					setText(txt, subtext);
+					if (icon != 0) {
+						setImageDrawable(icon);
+					} else {
+						setImageDrawable(null);
+					}
+				}
+			} else {
+				setText(null, null);
+				setImageDrawable(null);
 			}
-		});
-		return control;
+		}
 	}
 
 	boolean addMapWidget(AidlMapWidgetWrapper widget) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesPlugin.java
index b2b6e1c7dae..742d398fbdc 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesPlugin.java
@@ -716,29 +716,29 @@ public void createWidgets(@NonNull MapActivity mapActivity, @NonNull List<MapWid
 		MapWidgetRegistry widgetRegistry = app.getOsmandMap().getMapLayers().getMapWidgetRegistry();
 
 		MapWidget onRequestWidget = createMapWidgetForParams(mapActivity, AV_NOTES_ON_REQUEST);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(AV_NOTES_ON_REQUEST, onRequestWidget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(onRequestWidget));
 
 		MapWidget audioWidget = createMapWidgetForParams(mapActivity, AV_NOTES_RECORD_AUDIO);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(AV_NOTES_RECORD_AUDIO, audioWidget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(audioWidget));
 
 		MapWidget videoWidget = createMapWidgetForParams(mapActivity, AV_NOTES_RECORD_VIDEO);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(AV_NOTES_RECORD_VIDEO, videoWidget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(videoWidget));
 
 		MapWidget photoWidget = createMapWidgetForParams(mapActivity, AV_NOTES_TAKE_PHOTO);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(AV_NOTES_TAKE_PHOTO, photoWidget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(photoWidget));
 	}
 
 	@Override
 	protected MapWidget createMapWidgetForParams(@NonNull MapActivity mapActivity, @NonNull WidgetParams params) {
 		switch (params) {
 			case AV_NOTES_ON_REQUEST:
-				return new AudioVideoNotesWidget(mapActivity, AV_DEFAULT_ACTION_CHOOSE);
+				return new AudioVideoNotesWidget(mapActivity, params, AV_DEFAULT_ACTION_CHOOSE);
 			case AV_NOTES_RECORD_AUDIO:
-				return new AudioVideoNotesWidget(mapActivity, AV_DEFAULT_ACTION_AUDIO);
+				return new AudioVideoNotesWidget(mapActivity, params, AV_DEFAULT_ACTION_AUDIO);
 			case AV_NOTES_RECORD_VIDEO:
-				return new AudioVideoNotesWidget(mapActivity, AV_DEFAULT_ACTION_VIDEO);
+				return new AudioVideoNotesWidget(mapActivity, params, AV_DEFAULT_ACTION_VIDEO);
 			case AV_NOTES_TAKE_PHOTO:
-				return new AudioVideoNotesWidget(mapActivity, AV_DEFAULT_ACTION_TAKEPICTURE);
+				return new AudioVideoNotesWidget(mapActivity, params, AV_DEFAULT_ACTION_TAKEPICTURE);
 		}
 		return null;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesWidget.java b/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesWidget.java
index 454933c0781..16615542f73 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesWidget.java
@@ -1,15 +1,5 @@
 package net.osmand.plus.plugins.audionotes;
 
-import net.osmand.plus.R;
-import net.osmand.plus.activities.MapActivity;
-import net.osmand.plus.plugins.OsmandPlugin;
-import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
-import net.osmand.util.Algorithms;
-
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 import static net.osmand.plus.plugins.audionotes.AudioVideoNotesPlugin.AV_DEFAULT_ACTION_AUDIO;
 import static net.osmand.plus.plugins.audionotes.AudioVideoNotesPlugin.AV_DEFAULT_ACTION_TAKEPICTURE;
 import static net.osmand.plus.plugins.audionotes.AudioVideoNotesPlugin.AV_DEFAULT_ACTION_VIDEO;
@@ -18,14 +8,25 @@
 import static net.osmand.plus.views.mapwidgets.WidgetParams.AV_NOTES_RECORD_VIDEO;
 import static net.osmand.plus.views.mapwidgets.WidgetParams.AV_NOTES_TAKE_PHOTO;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import net.osmand.plus.R;
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.plugins.OsmandPlugin;
+import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.WidgetParams;
+import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
+import net.osmand.util.Algorithms;
+
 public class AudioVideoNotesWidget extends TextInfoWidget {
 
 	private final int actionId;
 
 	private Boolean cachedRecording;
 
-	public AudioVideoNotesWidget(@NonNull MapActivity mapActivity, int actionId) {
-		super(mapActivity);
+	public AudioVideoNotesWidget(@NonNull MapActivity mapActivity, @Nullable WidgetParams params, int actionId) {
+		super(mapActivity, params);
 		this.actionId = actionId;
 
 		updateInfo(null);
diff --git a/OsmAnd/src/net/osmand/plus/plugins/development/FPSTextInfoWidget.java b/OsmAnd/src/net/osmand/plus/plugins/development/FPSTextInfoWidget.java
index e6b2a3ec8c8..41a19f08158 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/development/FPSTextInfoWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/development/FPSTextInfoWidget.java
@@ -15,7 +15,7 @@ public class FPSTextInfoWidget extends TextInfoWidget {
 	private final OsmandMapTileView mapView;
 
 	public FPSTextInfoWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, FPS);
 		this.mapView = mapActivity.getMapView();
 		updateInfo(null);
 		setIcons(FPS);
diff --git a/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
index 25e5ec76c46..2a3e651c8ba 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
@@ -74,7 +74,7 @@ public void registerOptionsMenuItems(final MapActivity mapActivity, ContextMenuA
 	public void createWidgets(@NonNull MapActivity mapActivity, @NonNull List<MapWidgetInfo> widgetsInfos, @NonNull ApplicationMode appMode) {
 		MapWidgetRegistry widgetRegistry = app.getOsmandMap().getMapLayers().getMapWidgetRegistry();
 		MapWidget widget = createMapWidgetForParams(mapActivity, FPS);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(FPS, widget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(widget));
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryMapWidget.java b/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryMapWidget.java
index 28ecbbac182..75a81571c28 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryMapWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryMapWidget.java
@@ -11,7 +11,7 @@
 public class MapillaryMapWidget extends TextInfoWidget {
 
 	public MapillaryMapWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, MAPILLARY);
 
 		setText(app.getString(R.string.mapillary), "");
 		setIcons(MAPILLARY);
diff --git a/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryPlugin.java
index b487fbcb283..b5b6cb8f770 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryPlugin.java
@@ -231,7 +231,7 @@ public boolean onContextMenuClick(@Nullable OnDataChangeUiAdapter uiAdapter, @Nu
 	public void createWidgets(@NonNull MapActivity mapActivity, @NonNull List<MapWidgetInfo> widgetsInfos, @NonNull ApplicationMode appMode) {
 		MapWidgetRegistry widgetRegistry = app.getOsmandMap().getMapLayers().getMapWidgetRegistry();
 		MapWidget widget = createMapWidgetForParams(mapActivity, WidgetParams.MAPILLARY);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(WidgetParams.MAPILLARY, widget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(widget));
 	}
 
 	public void setWidgetVisible(MapActivity mapActivity, boolean visible) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/monitoring/OsmandMonitoringPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/monitoring/OsmandMonitoringPlugin.java
index 008be278e5d..ee8207a30b9 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/monitoring/OsmandMonitoringPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/monitoring/OsmandMonitoringPlugin.java
@@ -188,16 +188,16 @@ public void createWidgets(@NonNull MapActivity mapActivity, @NonNull List<MapWid
 		MapWidgetRegistry widgetRegistry = app.getOsmandMap().getMapLayers().getMapWidgetRegistry();
 
 		MapWidget distanceWidget = createMapWidgetForParams(mapActivity, TRIP_RECORDING_DISTANCE);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(TRIP_RECORDING_DISTANCE, distanceWidget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(distanceWidget));
 
 		MapWidget timeWidget = createMapWidgetForParams(mapActivity, TRIP_RECORDING_TIME);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(TRIP_RECORDING_TIME, timeWidget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(timeWidget));
 
 		MapWidget uphillWidget = createMapWidgetForParams(mapActivity, TRIP_RECORDING_UPHILL);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(TRIP_RECORDING_UPHILL, uphillWidget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(uphillWidget));
 
 		MapWidget downhillWidget = createMapWidgetForParams(mapActivity, TRIP_RECORDING_DOWNHILL);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(TRIP_RECORDING_DOWNHILL, downhillWidget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(downhillWidget));
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingDistanceWidget.java b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingDistanceWidget.java
index 241c73f23cc..4a3c57a5231 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingDistanceWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingDistanceWidget.java
@@ -1,5 +1,11 @@
 package net.osmand.plus.plugins.monitoring.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.TRIP_RECORDING_DISTANCE;
+
+import androidx.annotation.DrawableRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.plugins.OsmandPlugin;
@@ -10,10 +16,6 @@
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 
-import androidx.annotation.DrawableRes;
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 public class TripRecordingDistanceWidget extends TextInfoWidget {
 
 	private static final long BLINK_DELAY_MILLIS = 500;
@@ -23,7 +25,7 @@ public class TripRecordingDistanceWidget extends TextInfoWidget {
 	private long cachedLastUpdateTime;
 
 	public TripRecordingDistanceWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, TRIP_RECORDING_DISTANCE);
 		savingTrackHelper = app.getSavingTrackHelper();
 
 		updateInfo(null);
diff --git a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingElevationWidget.java b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingElevationWidget.java
index 467aab3cb1c..1969afd236f 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingElevationWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingElevationWidget.java
@@ -1,12 +1,17 @@
 package net.osmand.plus.plugins.monitoring.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.TRIP_RECORDING_DOWNHILL;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.TRIP_RECORDING_UPHILL;
+
 import android.os.Bundle;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.GPXUtilities.GPXTrackAnalysis;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.myplaces.ui.GPXTabItemType;
 import net.osmand.plus.settings.enums.MetricsConstants;
-import net.osmand.plus.track.cards.SegmentsCard;
 import net.osmand.plus.track.fragments.TrackMenuFragment;
 import net.osmand.plus.track.fragments.TrackMenuFragment.TrackMenuType;
 import net.osmand.plus.track.helpers.SavingTrackHelper;
@@ -16,17 +21,14 @@
 import net.osmand.plus.views.mapwidgets.WidgetParams;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 public abstract class TripRecordingElevationWidget extends TextInfoWidget {
 
 	private final SavingTrackHelper savingTrackHelper;
 
 	private double cachedElevationDiff = -1;
 
-	public TripRecordingElevationWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+	public TripRecordingElevationWidget(@NonNull MapActivity mapActivity, @Nullable WidgetParams widgetParams) {
+		super(mapActivity, widgetParams);
 		savingTrackHelper = app.getSavingTrackHelper();
 
 		updateInfo(null);
@@ -62,8 +64,8 @@ protected GPXTrackAnalysis getAnalysis() {
 	public static class TripRecordingUphillWidget extends TripRecordingElevationWidget {
 
 		public TripRecordingUphillWidget(@NonNull MapActivity mapActivity) {
-			super(mapActivity);
-			setIcons(WidgetParams.TRIP_RECORDING_UPHILL);
+			super(mapActivity, TRIP_RECORDING_UPHILL);
+			setIcons(TRIP_RECORDING_UPHILL);
 		}
 
 		@Override
@@ -75,8 +77,8 @@ protected double getElevationDiff() {
 	public static class TripRecordingDownhillWidget extends TripRecordingElevationWidget {
 
 		public TripRecordingDownhillWidget(@NonNull MapActivity mapActivity) {
-			super(mapActivity);
-			setIcons(WidgetParams.TRIP_RECORDING_DOWNHILL);
+			super(mapActivity, TRIP_RECORDING_DOWNHILL);
+			setIcons(TRIP_RECORDING_DOWNHILL);
 		}
 
 		@Override
diff --git a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingTimeWidget.java b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingTimeWidget.java
index c9abc279833..e7954cb492d 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingTimeWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/monitoring/widgets/TripRecordingTimeWidget.java
@@ -1,5 +1,7 @@
 package net.osmand.plus.plugins.monitoring.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.TRIP_RECORDING_TIME;
+
 import android.os.Bundle;
 
 import androidx.annotation.NonNull;
@@ -13,7 +15,6 @@
 import net.osmand.plus.track.helpers.GpxSelectionHelper.SelectedGpxFile;
 import net.osmand.plus.track.helpers.SavingTrackHelper;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.WidgetParams;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.util.Algorithms;
 
@@ -24,10 +25,10 @@ public class TripRecordingTimeWidget extends TextInfoWidget {
 	private float cachedTimeSpan = -1;
 
 	public TripRecordingTimeWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, TRIP_RECORDING_TIME);
 		savingTrackHelper = app.getSavingTrackHelper();
 
-		setIcons(WidgetParams.TRIP_RECORDING_TIME);
+		setIcons(TRIP_RECORDING_TIME);
 		updateInfo(null);
 		setOnClickListener(v -> {
 			if (cachedTimeSpan > 0) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingMapWidget.java b/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingMapWidget.java
index e3ca36df645..575fe4e7166 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingMapWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingMapWidget.java
@@ -27,7 +27,7 @@ public class ParkingMapWidget extends TextInfoWidget {
 	private int cachedMeters = 0;
 
 	public ParkingMapWidget(@NonNull ParkingPositionPlugin plugin, @NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, PARKING);
 		this.plugin = plugin;
 
 		setText(null, null);
diff --git a/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingPositionPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingPositionPlugin.java
index 8cf02f103cb..50b8b2eab17 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingPositionPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingPositionPlugin.java
@@ -407,7 +407,7 @@ protected MapWidget createMapWidgetForParams(@NonNull MapActivity mapActivity, @
 	public void createWidgets(@NonNull MapActivity mapActivity, @NonNull List<MapWidgetInfo> widgetsInfos, @NonNull ApplicationMode appMode) {
 		MapWidgetRegistry widgetRegistry = app.getOsmandMap().getMapLayers().getMapWidgetRegistry();
 		MapWidget widget = createMapWidgetForParams(mapActivity, PARKING);
-		widgetsInfos.add(widgetRegistry.createWidgetInfo(PARKING, widget));
+		widgetsInfos.add(widgetRegistry.createWidgetInfo(widget));
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
index 324bc9e2bd6..5c6f9aea15f 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
@@ -79,6 +79,7 @@ public void setMapActivity(@Nullable MapActivity mapActivity) {
 			registerAllControls(mapActivity);
 			recreateControls();
 		} else {
+			resetCashedTheme();
 			widgetRegistry.clearWidgets();
 
 			topWidgetsContainer = null;
@@ -87,16 +88,17 @@ public void setMapActivity(@Nullable MapActivity mapActivity) {
 			mapRulerLayout = null;
 			androidAutoMapPlaceholderView = null;
 
+			drawSettings = null;
 			alarmControl = null;
 			rulerWidgets = null;
-
-			drawSettings = null;
-			themeId = -1;
-
 			topToolbarView = null;
 		}
 	}
 
+	private void resetCashedTheme() {
+		themeId = -1;
+	}
+
 	public void removeSideWidget(TextInfoWidget widget) {
 		widgetRegistry.removeSideWidgetInternal(widget);
 	}
@@ -152,6 +154,7 @@ private void registerAllControls(@NonNull MapActivity mapActivity) {
 	}
 
 	public void recreateControls() {
+		resetCashedTheme();
 		ApplicationMode appMode = settings.getApplicationMode();
 		widgetRegistry.updateWidgetsInfo(appMode, drawSettings);
 		recreateWidgetsPanel(topWidgetsContainer, WidgetsPanel.TOP, appMode);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
index c5619a3fbdd..5fe4f6f0fdc 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
@@ -394,22 +394,27 @@ private void createRightWidgets(@NonNull MapWidgetsFactory factory, @NonNull Lis
 	private MapWidgetInfo createWidgetInfo(@NonNull MapWidgetsFactory widgetsFactory, @NonNull WidgetParams params, @NonNull ApplicationMode appMode) {
 		MapWidget mapWidget = widgetsFactory.createMapWidget(params);
 		if (mapWidget != null) {
-			return createWidgetInfo(params, mapWidget, appMode);
+			return createWidgetInfo(mapWidget, appMode);
 		}
 		return null;
 	}
 
-	@NonNull
-	public MapWidgetInfo createWidgetInfo(@NonNull WidgetParams widgetParams, @NonNull MapWidget widget) {
-		return createWidgetInfo(widgetParams, widget, settings.getApplicationMode());
+	@Nullable
+	public MapWidgetInfo createWidgetInfo(@NonNull MapWidget widget) {
+		return createWidgetInfo(widget, settings.getApplicationMode());
 	}
 
-	public MapWidgetInfo createWidgetInfo(@NonNull WidgetParams params, @NonNull MapWidget widget, @NonNull ApplicationMode appMode) {
-		WidgetsPanel panel = params.getPanel(params.id, appMode, settings);
-		int page = panel.getWidgetPage(appMode, params.id, settings);
-		int order = panel.getWidgetOrder(appMode, params.id, settings);
-		return createWidgetInfo(params.id, widget, params.dayIconId, params.nightIconId,
-				params.titleId, null, page, order, panel);
+	@Nullable
+	public MapWidgetInfo createWidgetInfo(@NonNull MapWidget widget, @NonNull ApplicationMode appMode) {
+		WidgetParams params = widget.getWidgetParams();
+		if (params != null) {
+			WidgetsPanel panel = params.getPanel(params.id, appMode, settings);
+			int page = panel.getWidgetPage(appMode, params.id, settings);
+			int order = panel.getWidgetOrder(appMode, params.id, settings);
+			return createWidgetInfo(params.id, widget, params.dayIconId, params.nightIconId,
+					params.titleId, null, page, order, panel);
+		}
+		return null;
 	}
 
 	@NonNull
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
index e23fd91a881..403579893b6 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
@@ -65,6 +65,7 @@ public enum WidgetParams {
 	AV_NOTES_TAKE_PHOTO("av_notes_take_photo", R.string.av_def_action_picture, 0, R.drawable.widget_av_photo_day, R.drawable.widget_av_photo_night, 0, WidgetGroup.AUDIO_VIDEO_NOTES, RIGHT),
 	MAPILLARY("mapillary", R.string.mapillary, R.string.mapillary_widget_desc, R.drawable.widget_mapillary_day, R.drawable.widget_mapillary_night, R.string.docs_widget_mapillary, null, RIGHT),
 	PARKING("parking", R.string.map_widget_parking, R.string.parking_widget_desc, R.drawable.widget_parking_day, R.drawable.widget_parking_night, R.string.docs_widget_parking, null, RIGHT),
+	AIDL_WIDGET("aidl_widget", R.string.map_widget_parking, R.string.parking_widget_desc, R.drawable.widget_parking_day, R.drawable.widget_parking_night, R.string.docs_widget_parking, null, RIGHT),
 	// Bottom panel
 	ELEVATION_PROFILE("elevation_profile", R.string.elevation_profile, R.string.elevation_profile_widget_desc, R.drawable.widget_route_elevation_day, R.drawable.widget_route_elevation_night, 0, null, BOTTOM);
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AltitudeWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AltitudeWidget.java
index f484e443333..a27b6db8093 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AltitudeWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AltitudeWidget.java
@@ -1,21 +1,22 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.ALTITUDE;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.Location;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.utils.OsmAndFormatter;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.WidgetParams;
-
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 
 public class AltitudeWidget extends TextInfoWidget {
 
 	private int cachedAltitude = 0;
 
 	public AltitudeWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
-		setIcons(WidgetParams.ALTITUDE);
+		super(mapActivity, ALTITUDE);
+		setIcons(ALTITUDE);
 		setText(null, null);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/BatteryWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/BatteryWidget.java
index 674d22ef6a5..f3ab1387fbb 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/BatteryWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/BatteryWidget.java
@@ -1,16 +1,17 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.BATTERY;
+
 import android.content.Intent;
 import android.content.IntentFilter;
 import android.os.BatteryManager;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.WidgetParams;
-
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 
 public class BatteryWidget extends TextInfoWidget {
 
@@ -19,7 +20,7 @@ public class BatteryWidget extends TextInfoWidget {
 	private long cachedTime = 0;
 
 	public BatteryWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, BATTERY);
 		setIcons(false);
 		setText(null, null);
 	}
@@ -50,7 +51,7 @@ private void setIcons(boolean charging) {
 		if (charging) {
 			setIcons(R.drawable.widget_battery_charging_day, R.drawable.widget_battery_charging_night);
 		} else {
-			setIcons(WidgetParams.BATTERY);
+			setIcons(BATTERY);
 		}
 	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/BearingWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/BearingWidget.java
index 16c5e361c5f..fa22562b487 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/BearingWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/BearingWidget.java
@@ -1,7 +1,14 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.widgets.BearingWidget.BearingType.MAGNETIC_BEARING;
+import static net.osmand.plus.views.mapwidgets.widgets.BearingWidget.BearingType.RELATIVE_BEARING;
+import static net.osmand.plus.views.mapwidgets.widgets.BearingWidget.BearingType.TRUE_BEARING;
+
 import android.hardware.GeomagneticField;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.Location;
 import net.osmand.data.LatLon;
 import net.osmand.plus.OsmAndLocationProvider;
@@ -15,13 +22,6 @@
 
 import java.util.List;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
-import static net.osmand.plus.views.mapwidgets.widgets.BearingWidget.BearingType.MAGNETIC_BEARING;
-import static net.osmand.plus.views.mapwidgets.widgets.BearingWidget.BearingType.RELATIVE_BEARING;
-import static net.osmand.plus.views.mapwidgets.widgets.BearingWidget.BearingType.TRUE_BEARING;
-
 public class BearingWidget extends TextInfoWidget {
 
 	private static final float MIN_SPEED = 1f;
@@ -33,13 +33,13 @@ public class BearingWidget extends TextInfoWidget {
 	private int cachedBearing;
 
 	public BearingWidget(@NonNull MapActivity mapActivity, @NonNull BearingType bearingType) {
-		super(mapActivity);
+		super(mapActivity, bearingType.params);
 		this.locationProvider = app.getLocationProvider();
 		this.bearingType = bearingType;
 
 		setText(null, null);
-		setIcons(bearingType.widget);
-		setContentTitle(bearingType.widget.titleId);
+		setIcons(bearingType.params);
+		setContentTitle(bearingType.params.titleId);
 	}
 
 	@Override
@@ -148,10 +148,10 @@ public enum BearingType {
 		MAGNETIC_BEARING(WidgetParams.MAGNETIC_BEARING),
 		TRUE_BEARING(WidgetParams.TRUE_BEARING);
 
-		public final WidgetParams widget;
+		public final WidgetParams params;
 
-		BearingType(@NonNull WidgetParams widget) {
-			this.widget = widget;
+		BearingType(@NonNull WidgetParams params) {
+			this.params = params;
 		}
 	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CoordinatesWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CoordinatesWidget.java
index 9cf75636665..51e2f6b3d75 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CoordinatesWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CoordinatesWidget.java
@@ -1,5 +1,7 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.COORDINATES;
+
 import android.content.Intent;
 import android.graphics.Typeface;
 import android.graphics.drawable.Drawable;
@@ -63,7 +65,7 @@ public OsmandPreference<Boolean> getWidgetVisibilityPref() {
 	}
 
 	public CoordinatesWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, COORDINATES);
 
 		locationProvider = app.getLocationProvider();
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CurrentSpeedWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CurrentSpeedWidget.java
index 2d74528c65d..6d1a2228271 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CurrentSpeedWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CurrentSpeedWidget.java
@@ -1,14 +1,15 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.CURRENT_SPEED;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.Location;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.utils.OsmAndFormatter;
 import net.osmand.plus.utils.OsmAndFormatter.FormattedValue;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.WidgetParams;
-
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 
 public class CurrentSpeedWidget extends TextInfoWidget {
 
@@ -19,8 +20,8 @@ public class CurrentSpeedWidget extends TextInfoWidget {
 	private float cachedSpeed = 0;
 
 	public CurrentSpeedWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
-		setIcons(WidgetParams.CURRENT_SPEED);
+		super(mapActivity, CURRENT_SPEED);
+		setIcons(CURRENT_SPEED);
 		setText(null, null);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CurrentTimeWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CurrentTimeWidget.java
index 8dfda8665e8..71340d4b12d 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CurrentTimeWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CurrentTimeWidget.java
@@ -1,14 +1,15 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
-import android.text.format.DateFormat;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.CURRENT_TIME;
 
-import net.osmand.plus.activities.MapActivity;
-import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.WidgetParams;
+import android.text.format.DateFormat;
 
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+
 public class CurrentTimeWidget extends TextInfoWidget {
 
 	private static final long UPDATE_INTERVAL_MILLIS = 5000;
@@ -16,8 +17,8 @@ public class CurrentTimeWidget extends TextInfoWidget {
 	private long cachedTime = 0;
 
 	public CurrentTimeWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
-		setIcons(WidgetParams.CURRENT_TIME);
+		super(mapActivity, CURRENT_TIME);
+		setIcons(CURRENT_TIME);
 		setText(null, null);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/DistanceToPointWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/DistanceToPointWidget.java
index dcfc6b1d587..82d6b30ecc4 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/DistanceToPointWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/DistanceToPointWidget.java
@@ -1,5 +1,11 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.DISTANCE_TO_DESTINATION;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.INTERMEDIATE_DESTINATION;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.Location;
 import net.osmand.data.LatLon;
 import net.osmand.plus.activities.MapActivity;
@@ -12,9 +18,6 @@
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 import net.osmand.plus.views.mapwidgets.WidgetParams;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 public abstract class DistanceToPointWidget extends TextInfoWidget {
 
 	private static final int DISTANCE_CHANGE_THRESHOLD = 10;
@@ -25,7 +28,7 @@ public abstract class DistanceToPointWidget extends TextInfoWidget {
 	private int cachedMeters;
 
 	public DistanceToPointWidget(@NonNull MapActivity mapActivity, @NonNull WidgetParams widgetParams) {
-		super(mapActivity);
+		super(mapActivity, widgetParams);
 		this.view = mapActivity.getMapView();
 
 		setIcons(widgetParams);
@@ -78,7 +81,7 @@ public int getDistance() {
 	public static class DistanceToDestinationWidget extends DistanceToPointWidget {
 
 		public DistanceToDestinationWidget(@NonNull MapActivity mapActivity) {
-			super(mapActivity, WidgetParams.DISTANCE_TO_DESTINATION);
+			super(mapActivity, DISTANCE_TO_DESTINATION);
 		}
 
 		@Override
@@ -100,7 +103,7 @@ public static class DistanceToIntermediateDestinationWidget extends DistanceToPo
 		private final TargetPointsHelper targetPointsHelper;
 
 		public DistanceToIntermediateDestinationWidget(@NonNull MapActivity mapActivity) {
-			super(mapActivity, WidgetParams.INTERMEDIATE_DESTINATION);
+			super(mapActivity, INTERMEDIATE_DESTINATION);
 			targetPointsHelper = app.getTargetPointsHelper();
 		}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/ElevationProfileWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/ElevationProfileWidget.java
index d79b3f16899..30b2d626fcf 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/ElevationProfileWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/ElevationProfileWidget.java
@@ -1,6 +1,7 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
 import static net.osmand.GPXUtilities.GPXTrackAnalysis.ElevationDiffsCalculator.CALCULATED_GPX_WINDOW_LENGTH;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.ELEVATION_PROFILE;
 
 import android.graphics.Matrix;
 import android.graphics.Typeface;
@@ -86,7 +87,7 @@ public class ElevationProfileWidget extends MapWidget {
 	};
 
 	public ElevationProfileWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, ELEVATION_PROFILE);
 		settings.MAP_LINKED_TO_LOCATION.addListener(linkedToLocationListener);
 		updateVisibility(false);
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/GpsInfoWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/GpsInfoWidget.java
index 467f5da70f8..73d44b3d028 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/GpsInfoWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/GpsInfoWidget.java
@@ -1,13 +1,14 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.GPS_INFO;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.plus.OsmAndLocationProvider.GPSInfo;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.activities.actions.StartGPSStatus;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.WidgetParams;
-
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 
 public class GpsInfoWidget extends TextInfoWidget {
 
@@ -15,8 +16,8 @@ public class GpsInfoWidget extends TextInfoWidget {
 	private int foundSatellites = -1;
 
 	public GpsInfoWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
-		setIcons(WidgetParams.GPS_INFO);
+		super(mapActivity, GPS_INFO);
+		setIcons(GPS_INFO);
 		setText(null, null);
 		setOnClickListener(v -> new StartGPSStatus(mapActivity).run());
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LanesWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LanesWidget.java
index 9143f787789..465dc385ffc 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LanesWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LanesWidget.java
@@ -1,9 +1,14 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.LANES;
+
 import android.view.ViewGroup;
 import android.widget.ImageView;
 import android.widget.TextView;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.Location;
 import net.osmand.binary.RouteDataObject;
 import net.osmand.plus.OsmAndLocationProvider;
@@ -25,9 +30,6 @@
 import java.util.Arrays;
 import java.util.List;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 public class LanesWidget extends MapWidget {
 
 	private static final int MAX_METERS_NOT_SPOKEN_TURN = 800;
@@ -46,7 +48,7 @@ public class LanesWidget extends MapWidget {
 	private int shadowRadius;
 
 	public LanesWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, LANES);
 
 		routingHelper = mapActivity.getMyApplication().getRoutingHelper();
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkerSideWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkerSideWidget.java
index a285622958e..1ba515d9800 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkerSideWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkerSideWidget.java
@@ -1,6 +1,7 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
 import static net.osmand.plus.views.mapwidgets.WidgetParams.SIDE_MARKER_1;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.SIDE_MARKER_2;
 
 import android.graphics.drawable.Drawable;
 
@@ -36,7 +37,7 @@ public class MapMarkerSideWidget extends TextInfoWidget implements CustomLatLonL
 	private LatLon customLatLon;
 
 	public MapMarkerSideWidget(@NonNull MapActivity mapActivity, boolean firstMarker) {
-		super(mapActivity);
+		super(mapActivity, firstMarker ? SIDE_MARKER_1 : SIDE_MARKER_2);
 		this.firstMarker = firstMarker;
 		this.mapMarkersHelper = app.getMapMarkersHelper();
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkersBarWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkersBarWidget.java
index 702aca47e00..d46692f8ee7 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkersBarWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkersBarWidget.java
@@ -1,5 +1,7 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.MARKERS_TOP_BAR;
+
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.ImageButton;
@@ -56,7 +58,7 @@ protected int getLayoutId() {
 	}
 
 	public MapMarkersBarWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, MARKERS_TOP_BAR);
 
 		markersHelper = app.getMapMarkersHelper();
 		portraitMode = AndroidUiHelper.isOrientationPortrait(mapActivity);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
index 4b8b987002f..3088120944a 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
@@ -23,6 +23,7 @@
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.views.layers.MapInfoLayer.TextState;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.WidgetParams;
 import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
 
 import java.util.List;
@@ -35,21 +36,18 @@ public abstract class MapWidget {
 	protected final UiUtilities iconsCache;
 	protected final OsmAndLocationProvider locationProvider;
 	protected final RoutingHelper routingHelper;
-	protected final WidgetState widgetState;
+
+	protected final WidgetParams widgetParams;
 
 	private boolean nightMode;
 
 	protected final View view;
 
-	public MapWidget(@NonNull MapActivity mapActivity) {
-		this(mapActivity, null);
-	}
-
-	public MapWidget(@NonNull MapActivity mapActivity, @Nullable WidgetState widgetState) {
+	public MapWidget(@NonNull MapActivity mapActivity, @Nullable WidgetParams widgetParams) {
 		this.app = mapActivity.getMyApplication();
 		this.settings = app.getSettings();
 		this.mapActivity = mapActivity;
-		this.widgetState = widgetState;
+		this.widgetParams = widgetParams;
 		this.iconsCache = app.getUIUtilities();
 		this.locationProvider = app.getLocationProvider();
 		this.routingHelper = app.getRoutingHelper();
@@ -85,9 +83,14 @@ public boolean isNightMode() {
 		return nightMode;
 	}
 
-	@NonNull
+	@Nullable
 	public WidgetState getWidgetState() {
-		return widgetState;
+		return null;
+	}
+
+	@Nullable
+	public WidgetParams getWidgetParams() {
+		return widgetParams;
 	}
 
 	public void updateInfo(@Nullable DrawSettings drawSettings) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MaxSpeedWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MaxSpeedWidget.java
index b5560d11b07..a1e6523f7a7 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MaxSpeedWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MaxSpeedWidget.java
@@ -1,5 +1,10 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.MAX_SPEED;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.binary.RouteDataObject;
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
@@ -7,10 +12,6 @@
 import net.osmand.plus.utils.OsmAndFormatter;
 import net.osmand.plus.utils.OsmAndFormatter.FormattedValue;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.WidgetParams;
-
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 
 public class MaxSpeedWidget extends TextInfoWidget {
 
@@ -19,10 +20,10 @@ public class MaxSpeedWidget extends TextInfoWidget {
 	private float cachedMaxSpeed = 0;
 
 	public MaxSpeedWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, MAX_SPEED);
 		mapViewTrackingUtilities = app.getMapViewTrackingUtilities();
 
-		setIcons(WidgetParams.MAX_SPEED);
+		setIcons(MAX_SPEED);
 		setText(null, null);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnBaseWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnBaseWidget.java
index 2fb7f0e6755..df2928fb363 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnBaseWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnBaseWidget.java
@@ -7,19 +7,19 @@
 import android.widget.LinearLayout;
 import android.widget.TextView;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.routing.RouteCalculationResult;
-import net.osmand.plus.routing.RoutingHelper;
 import net.osmand.plus.utils.OsmAndFormatter;
 import net.osmand.plus.views.layers.MapInfoLayer.TextState;
 import net.osmand.plus.views.mapwidgets.TurnDrawable;
+import net.osmand.plus.views.mapwidgets.WidgetParams;
 import net.osmand.router.TurnType;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 public class NextTurnBaseWidget extends TextInfoWidget {
 
 	private static final int DISTANCE_CHANGE_THRESHOLD = 10;
@@ -35,8 +35,8 @@ public class NextTurnBaseWidget extends TextInfoWidget {
 
 	private final TurnDrawable turnDrawable;
 
-	public NextTurnBaseWidget(@NonNull MapActivity mapActivity, boolean horizontalMini) {
-		super(mapActivity);
+	public NextTurnBaseWidget(@NonNull MapActivity mapActivity, @Nullable WidgetParams params, boolean horizontalMini) {
+		super(mapActivity, params);
 		this.horizontalMini = horizontalMini;
 
 		topImageView = view.findViewById(R.id.widget_top_icon);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnWidget.java
index ab1487ef6bb..30dace328db 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnWidget.java
@@ -1,22 +1,25 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.NEXT_TURN;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.SMALL_NEXT_TURN;
+
 import android.view.View;
 import android.view.View.OnClickListener;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.routing.RouteCalculationResult.NextDirectionInfo;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 import net.osmand.router.TurnType;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 public class NextTurnWidget extends NextTurnBaseWidget {
 
 	private final NextDirectionInfo nextDirectionInfo = new NextDirectionInfo();
 
 	public NextTurnWidget(@NonNull MapActivity mapActivity, boolean horizontalMini) {
-		super(mapActivity, horizontalMini);
+		super(mapActivity, horizontalMini ? SMALL_NEXT_TURN : NEXT_TURN, horizontalMini);
 		setOnClickListener(getOnClickListener());
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RadiusRulerWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RadiusRulerWidget.java
index ad93f59951b..cb7308dbad6 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RadiusRulerWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RadiusRulerWidget.java
@@ -1,5 +1,10 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.RADIUS_RULER;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.Location;
 import net.osmand.data.LatLon;
 import net.osmand.plus.R;
@@ -10,11 +15,6 @@
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 import net.osmand.util.MapUtils;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
-import static net.osmand.plus.views.mapwidgets.WidgetParams.RADIUS_RULER;
-
 public class RadiusRulerWidget extends TextInfoWidget {
 
 	private static final String DASH = "â€”";
@@ -22,7 +22,7 @@ public class RadiusRulerWidget extends TextInfoWidget {
 	private RadiusRulerMode cachedRadiusRulerMode;
 
 	public RadiusRulerWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, RADIUS_RULER);
 		cachedRadiusRulerMode = settings.RADIUS_RULER_MODE.get();
 
 		updateIcons();
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SecondNextTurnWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SecondNextTurnWidget.java
index c53d62ab22f..171717bc149 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SecondNextTurnWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SecondNextTurnWidget.java
@@ -1,22 +1,24 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.SECOND_NEXT_TURN;
+
 import android.view.View;
 import android.view.View.OnClickListener;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.routing.RouteCalculationResult.NextDirectionInfo;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 import net.osmand.router.TurnType;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 public class SecondNextTurnWidget extends NextTurnBaseWidget {
 
 	private final NextDirectionInfo nextDirectionInfo = new NextDirectionInfo();
 
 	public SecondNextTurnWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity, true);
+		super(mapActivity, SECOND_NEXT_TURN, true);
 		setOnClickListener(getOnClickListener());
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/StreetNameWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/StreetNameWidget.java
index 483b9ddaad2..8464cc3d692 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/StreetNameWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/StreetNameWidget.java
@@ -1,6 +1,7 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
 import static net.osmand.plus.render.OsmandRenderer.RenderingContext;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.STREET_NAME;
 
 import android.graphics.Bitmap;
 import android.graphics.Canvas;
@@ -84,7 +85,7 @@ public OsmandPreference<Boolean> getWidgetVisibilityPref() {
 	}
 
 	public StreetNameWidget(@NonNull MapActivity mapActivity) {
-		super(mapActivity);
+		super(mapActivity, STREET_NAME);
 
 		waypointHelper = app.getWaypointHelper();
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TextInfoWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TextInfoWidget.java
index 4dd4e962a22..97a47717f0b 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TextInfoWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TextInfoWidget.java
@@ -16,7 +16,6 @@
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.views.layers.MapInfoLayer.TextState;
 import net.osmand.plus.views.mapwidgets.WidgetParams;
-import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
 
 public class TextInfoWidget extends MapWidget {
 
@@ -38,12 +37,8 @@ public class TextInfoWidget extends MapWidget {
 	private Integer cachedAngularUnits = null;
 
 
-	public TextInfoWidget(@NonNull MapActivity mapActivity) {
-		this(mapActivity, null);
-	}
-
-	public TextInfoWidget(@NonNull MapActivity mapActivity, @Nullable WidgetState widgetState) {
-		super(mapActivity, widgetState);
+	public TextInfoWidget(@NonNull MapActivity mapActivity, @Nullable WidgetParams params) {
+		super(mapActivity, params);
 		imageView = view.findViewById(R.id.widget_icon);
 		textView = view.findViewById(R.id.widget_text);
 		textViewShadow = view.findViewById(R.id.widget_text_shadow);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TimeToNavigationPointWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TimeToNavigationPointWidget.java
index 8b22c639131..db1540d29b7 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TimeToNavigationPointWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/TimeToNavigationPointWidget.java
@@ -1,5 +1,8 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import static net.osmand.plus.views.mapwidgets.WidgetParams.TIME_TO_DESTINATION;
+import static net.osmand.plus.views.mapwidgets.WidgetParams.TIME_TO_INTERMEDIATE;
+
 import android.text.format.DateFormat;
 
 import androidx.annotation.NonNull;
@@ -12,22 +15,23 @@
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 import net.osmand.plus.views.mapwidgets.widgetstates.TimeToNavigationPointWidgetState;
 import net.osmand.plus.views.mapwidgets.widgetstates.TimeToNavigationPointWidgetState.TimeToNavigationPointState;
+import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
 
 public class TimeToNavigationPointWidget extends TextInfoWidget {
 
 	private static final long UPDATE_INTERVAL_SECONDS = 30;
 
 	private final RoutingHelper routingHelper;
-	private final boolean intermediate;
+	private final TimeToNavigationPointWidgetState widgetState;
 	private final OsmandPreference<Boolean> arrivalTimeOtherwiseTimeToGoPref;
 
 	private boolean cachedArrivalTimeOtherwiseTimeToGo;
 	private int cachedLeftSeconds = 0;
 
 	public TimeToNavigationPointWidget(@NonNull MapActivity mapActivity, @NonNull TimeToNavigationPointWidgetState widgetState) {
-		super(mapActivity, widgetState);
+		super(mapActivity, widgetState.isIntermediate() ? TIME_TO_INTERMEDIATE : TIME_TO_DESTINATION);
+		this.widgetState = widgetState;
 		this.routingHelper = app.getRoutingHelper();
-		this.intermediate = widgetState.isIntermediate();
 		this.arrivalTimeOtherwiseTimeToGoPref = widgetState.getPreference();
 		this.cachedArrivalTimeOtherwiseTimeToGo = arrivalTimeOtherwiseTimeToGoPref.get();
 
@@ -42,7 +46,7 @@ public TimeToNavigationPointWidget(@NonNull MapActivity mapActivity, @NonNull Ti
 	}
 
 	public boolean isIntermediate() {
-		return intermediate;
+		return widgetState.isIntermediate();
 	}
 
 	@NonNull
@@ -50,6 +54,12 @@ public OsmandPreference<Boolean> getPreference() {
 		return arrivalTimeOtherwiseTimeToGoPref;
 	}
 
+	@Nullable
+	@Override
+	public WidgetState getWidgetState() {
+		return widgetState;
+	}
+
 	@Override
 	public void updateInfo(@Nullable DrawSettings drawSettings) {
 		int leftSeconds = 0;
@@ -62,7 +72,7 @@ public void updateInfo(@Nullable DrawSettings drawSettings) {
 		}
 
 		if (routingHelper.isRouteCalculated()) {
-			leftSeconds = intermediate ? routingHelper.getLeftTimeNextIntermediate() : routingHelper.getLeftTime();
+			leftSeconds = widgetState.isIntermediate() ? routingHelper.getLeftTimeNextIntermediate() : routingHelper.getLeftTime();
 			boolean updateIntervalPassed = Math.abs(leftSeconds - cachedLeftSeconds) > UPDATE_INTERVAL_SECONDS;
 			if (leftSeconds != 0 && (updateIntervalPassed || timeModeUpdated)) {
 				cachedLeftSeconds = leftSeconds;
@@ -107,6 +117,6 @@ private void updateTimeToGo(int leftSeconds) {
 
 	@NonNull
 	private TimeToNavigationPointState getCurrentState() {
-		return TimeToNavigationPointState.getState(intermediate, arrivalTimeOtherwiseTimeToGoPref.get());
+		return TimeToNavigationPointState.getState(widgetState.isIntermediate(), arrivalTimeOtherwiseTimeToGoPref.get());
 	}
 }
\ No newline at end of file
