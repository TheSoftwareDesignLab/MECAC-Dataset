diff --git a/OsmAnd/res/layout/fragment_choose_plan.xml b/OsmAnd/res/layout/fragment_choose_plan.xml
new file mode 100644
index 00000000000..d8ab7cbebe6
--- /dev/null
+++ b/OsmAnd/res/layout/fragment_choose_plan.xml
@@ -0,0 +1,213 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:osmand="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    android:background="?attr/wikivoyage_bg_color"
+    android:orientation="vertical">
+
+    <ScrollView
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:fillViewport="true">
+
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:background="?attr/activity_background_color"
+            android:orientation="vertical">
+
+            <LinearLayout
+                android:id="@+id/main_part"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:background="?attr/list_background_color"
+                android:orientation="vertical">
+
+                <!-- Toolbar -->
+                <LinearLayout
+                    android:id="@+id/toolbar_container"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:minHeight="@dimen/toolbar_height"
+                    android:orientation="horizontal">
+
+                    <androidx.appcompat.widget.AppCompatImageView
+                        android:id="@+id/button_back"
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:background="?attr/selectableItemBackgroundBorderless"
+                        android:padding="@dimen/list_content_padding"
+                        android:tint="@color/icon_color_default_light"
+                        osmand:srcCompat="@drawable/ic_arrow_back" />
+
+                    <View
+                        android:layout_width="0dp"
+                        android:layout_height="0dp"
+                        android:layout_weight="1" />
+
+                    <androidx.appcompat.widget.AppCompatImageView
+                        android:id="@+id/button_reset"
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:background="?attr/selectableItemBackgroundBorderless"
+                        android:padding="@dimen/list_content_padding"
+                        android:tint="@color/icon_color_default_light"
+                        osmand:srcCompat="@drawable/ic_action_reset_to_default_dark" />
+
+                </LinearLayout>
+
+                <!-- Header -->
+                <LinearLayout
+                    android:id="@+id/header"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:orientation="horizontal">
+
+                    <FrameLayout
+                        android:id="@+id/header_icon_background"
+                        android:layout_width="@dimen/icon_background_size"
+                        android:layout_height="@dimen/icon_background_size"
+                        android:layout_marginLeft="@dimen/content_padding"
+                        android:layout_marginRight="@dimen/content_padding"
+                        android:background="@drawable/rectangle_rounded">
+
+                        <androidx.appcompat.widget.AppCompatImageView
+                            android:id="@+id/header_icon"
+                            android:layout_width="@dimen/standard_icon_size_big"
+                            android:layout_height="@dimen/standard_icon_size_big"
+                            android:layout_gravity="center"
+                            android:background="?attr/selectableItemBackgroundBorderless"
+                            osmand:srcCompat="@drawable/ic_action_cloud_upload_colored" />
+
+                    </FrameLayout>
+
+                    <net.osmand.plus.widgets.TextViewEx
+                        android:id="@+id/header_title"
+                        android:layout_width="0dp"
+                        android:layout_height="wrap_content"
+                        android:layout_gravity="start|center_vertical"
+                        android:layout_weight="1"
+                        android:textSize="@dimen/default_header_text_size"
+                        osmand:typeface="@string/font_roboto_medium"
+                        tools:text="@string/osmand_cloud" />
+
+                </LinearLayout>
+
+                <!-- Primary description -->
+                <net.osmand.plus.widgets.TextViewEx
+                    android:id="@+id/primary_description"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:layout_marginTop="@dimen/dialog_content_margin"
+                    android:letterSpacing="@dimen/text_button_letter_spacing"
+                    android:lineSpacingMultiplier="@dimen/info_description_line_spacing_multiplier"
+                    android:paddingLeft="@dimen/content_padding"
+                    android:paddingRight="@dimen/content_padding"
+                    android:textColor="?attr/dialog_description_color"
+                    android:textSize="@dimen/default_list_text_size"
+                    osmand:typeface="@string/font_roboto_regular"
+                    tools:text="Get OsmAnd Cloud to store all OsmAnd data online. Forget about loosing your data after reinstall, backup and restore all information without a problem." />
+
+                <!-- Secondary description -->
+                <net.osmand.plus.widgets.TextViewEx
+                    android:id="@+id/secondary_description"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:layout_marginTop="@dimen/dialog_content_margin"
+                    android:letterSpacing="@dimen/text_button_letter_spacing"
+                    android:lineSpacingMultiplier="@dimen/info_description_line_spacing_multiplier"
+                    android:paddingLeft="@dimen/content_padding"
+                    android:paddingRight="@dimen/content_padding"
+                    android:textColor="?attr/dialog_description_color"
+                    android:textSize="@dimen/default_list_text_size"
+                    osmand:typeface="@string/font_roboto_regular"
+                    tools:text="You can get “OsmAnd Cloud” as part of: OsmAnd Pro plan. Compare the plans:" />
+
+                <!-- Feature items list -->
+                <LinearLayout
+                    android:id="@+id/list_container"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:layout_marginTop="@dimen/content_padding_small"
+                    android:orientation="vertical"
+                    tools:listitem="@layout/purchase_osmand_feature_item" />
+
+                <View
+                    android:layout_width="match_parent"
+                    android:layout_height="@dimen/content_padding_small" />
+
+                <!-- "Continue" buttons -->
+                <LinearLayout
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:orientation="vertical"
+                    android:layout_marginLeft="@dimen/content_padding"
+                    android:layout_marginRight="@dimen/content_padding">
+
+                    <include
+                        android:id="@+id/button_continue_pro"
+                        layout="@layout/purchase_dialog_button" />
+
+                    <View
+                        android:layout_width="match_parent"
+                        android:layout_height="@dimen/content_padding_small" />
+
+                    <include
+                        android:id="@+id/button_continue_maps_plus"
+                        layout="@layout/purchase_dialog_button" />
+
+                    <View
+                        android:layout_width="match_parent"
+                        android:layout_height="@dimen/dialog_content_margin" />
+
+                </LinearLayout>
+
+                <!-- Button "Letter" -->
+                <FrameLayout
+                    android:id="@+id/button_later"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:layout_marginLeft="@dimen/content_padding"
+                    android:layout_marginRight="@dimen/content_padding">
+
+                    <net.osmand.plus.widgets.TextViewEx
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:background="?attr/selectableItemBackgroundBorderless"
+                        android:gravity="center"
+                        android:letterSpacing="@dimen/text_button_letter_spacing"
+                        android:minHeight="@dimen/dialog_button_height"
+                        android:paddingBottom="@dimen/content_padding_half"
+                        android:paddingLeft="@dimen/content_padding"
+                        android:paddingRight="@dimen/content_padding"
+                        android:paddingTop="@dimen/content_padding_half"
+                        android:text="@string/later"
+                        android:textColor="?attr/active_color_basic"
+                        android:textSize="@dimen/text_button_text_size"
+                        osmand:typeface="@string/font_roboto_medium"
+                        android:paddingStart="@dimen/list_content_padding"
+                        android:paddingEnd="@dimen/list_content_padding" />
+
+                </FrameLayout>
+
+                <View
+                    android:layout_width="match_parent"
+                    android:layout_height="@dimen/content_padding_small" />
+
+            </LinearLayout>
+
+            <include layout="@layout/card_bottom_divider" />
+
+            <!-- Troubleshooting card -->
+            <FrameLayout
+                android:id="@+id/troubleshooting_card"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content" />
+
+        </LinearLayout>
+
+    </ScrollView>
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/purchase_dialog_button.xml b/OsmAnd/res/layout/purchase_dialog_button.xml
new file mode 100644
index 00000000000..c9065e22ad4
--- /dev/null
+++ b/OsmAnd/res/layout/purchase_dialog_button.xml
@@ -0,0 +1,52 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:osmand="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:orientation="horizontal"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:minHeight="@dimen/icon_background_size">
+
+    <androidx.appcompat.widget.AppCompatImageView
+        android:id="@+id/icon"
+        android:layout_width="@dimen/standard_icon_size"
+        android:layout_height="@dimen/standard_icon_size"
+        android:layout_marginLeft="@dimen/content_padding_small"
+        android:layout_marginRight="@dimen/content_padding_small"
+        android:layout_gravity="center"
+        osmand:srcCompat="@drawable/ic_logo_splash_osmand_plus" />
+
+    <LinearLayout
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_weight="1"
+        android:orientation="vertical"
+        android:layout_gravity="center_vertical">
+
+        <net.osmand.plus.widgets.TextViewEx
+            android:id="@+id/title"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:textColor="?attr/active_color_basic"
+            android:letterSpacing="@dimen/text_button_letter_spacing"
+            android:lineSpacingMultiplier="@dimen/info_description_line_spacing_multiplier"
+            android:textSize="@dimen/default_list_text_size"
+            osmand:typeface="@string/font_roboto_medium"
+            android:paddingTop="@dimen/content_padding"
+            tools:text="Continue with OsmAnd Pro"/>
+
+        <net.osmand.plus.widgets.TextViewEx
+            android:id="@+id/description"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:textColor="?attr/active_color_basic"
+            android:letterSpacing="@dimen/text_button_letter_spacing"
+            android:lineSpacingMultiplier="@dimen/info_description_line_spacing_multiplier"
+            android:textSize="@dimen/default_list_text_size"
+            osmand:typeface="@string/font_roboto_medium"
+            android:paddingBottom="@dimen/content_padding"
+            tools:text="From € 3 / month"/>
+
+    </LinearLayout>
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/purchase_osmand_feature_item.xml b/OsmAnd/res/layout/purchase_osmand_feature_item.xml
new file mode 100644
index 00000000000..7dfde94b0b1
--- /dev/null
+++ b/OsmAnd/res/layout/purchase_osmand_feature_item.xml
@@ -0,0 +1,79 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:osmand="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:background="@color/color_transparent"
+    android:orientation="horizontal">
+
+    <LinearLayout
+        android:id="@+id/item_container"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:orientation="horizontal">
+
+        <androidx.appcompat.widget.AppCompatImageView
+            android:id="@+id/primary_icon"
+            android:layout_width="@dimen/standard_icon_size"
+            android:layout_height="@dimen/standard_icon_size"
+            android:layout_gravity="center"
+            android:layout_marginLeft="@dimen/content_padding"
+            android:layout_marginRight="@dimen/content_padding"
+            osmand:srcCompat="@drawable/ic_action_cloud_upload_colored" />
+
+        <LinearLayout
+            android:layout_width="0dp"
+            android:layout_height="wrap_content"
+            android:layout_weight="1"
+            android:orientation="vertical">
+
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:minHeight="@dimen/bottom_sheet_list_item_height"
+                android:orientation="horizontal">
+
+                <net.osmand.plus.widgets.TextViewEx
+                    android:id="@+id/title"
+                    android:layout_width="0dp"
+                    android:layout_height="wrap_content"
+                    android:layout_gravity="center_vertical"
+                    android:layout_weight="1"
+                    android:lineSpacingMultiplier="1.1"
+                    android:textColor="?android:textColorPrimary"
+                    android:textSize="@dimen/default_desc_text_size"
+                    osmand:typeface="@string/font_roboto_regular"
+                    tools:text="@string/osmand_cloud" />
+
+                <androidx.appcompat.widget.AppCompatImageView
+                    android:id="@+id/secondary_icon"
+                    android:layout_width="@dimen/standard_icon_size"
+                    android:layout_height="@dimen/standard_icon_size"
+                    android:layout_gravity="center"
+                    android:layout_marginStart="@dimen/content_padding"
+                    android:layout_marginLeft="@dimen/content_padding"
+                    osmand:srcCompat="@drawable/ic_action_osmand_maps_plus" />
+
+                <androidx.appcompat.widget.AppCompatImageView
+                    android:id="@+id/tertiary_icon"
+                    android:layout_width="@dimen/standard_icon_size"
+                    android:layout_height="@dimen/standard_icon_size"
+                    android:layout_gravity="center"
+                    android:layout_marginLeft="@dimen/content_padding"
+                    android:layout_marginRight="@dimen/content_padding"
+                    osmand:srcCompat="@drawable/ic_action_osmand_pro_logo" />
+
+            </LinearLayout>
+
+            <View
+                android:id="@+id/bottom_divider"
+                android:layout_width="match_parent"
+                android:layout_height="1dp"
+                android:background="?attr/divider_color_basic" />
+
+        </LinearLayout>
+
+    </LinearLayout>
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/redeem_promocode_button.xml b/OsmAnd/res/layout/redeem_promocode_button.xml
new file mode 100644
index 00000000000..45ae9015543
--- /dev/null
+++ b/OsmAnd/res/layout/redeem_promocode_button.xml
@@ -0,0 +1,34 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:background="?android:attr/selectableItemBackground"
+    android:minHeight="@dimen/list_item_height"
+    android:paddingStart="@dimen/list_content_padding"
+    android:paddingLeft="@dimen/list_content_padding"
+    android:paddingEnd="@dimen/list_content_padding"
+    android:paddingRight="@dimen/list_content_padding">
+
+    <androidx.appcompat.widget.AppCompatImageView
+        android:id="@+id/icon"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:layout_gravity="center_vertical"
+        android:layout_marginEnd="@dimen/map_widget_height"
+        android:layout_marginRight="@dimen/map_widget_height"
+        app:srcCompat="@drawable/ic_action_info_dark"
+        app:tint="?attr/active_color_basic" />
+
+    <net.osmand.plus.widgets.TextViewEx
+        android:id="@+id/title"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_gravity="center_vertical"
+        android:layout_weight="1"
+        android:text="@string/redeem_promo_code"
+        android:textColor="?attr/active_color_basic"
+        android:textSize="@dimen/default_list_text_size"
+        app:typeface="@string/font_roboto_medium" />
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/troubleshooting_card.xml b/OsmAnd/res/layout/troubleshooting_card.xml
index 3ce447d5d0b..98988b8cbb9 100644
--- a/OsmAnd/res/layout/troubleshooting_card.xml
+++ b/OsmAnd/res/layout/troubleshooting_card.xml
@@ -50,18 +50,6 @@
 			android:textSize="@dimen/default_list_text_size"
 			app:typeface="@string/font_roboto_medium" />
 
-		<net.osmand.plus.widgets.TextViewEx
-			android:id="@+id/troubleshooting_description"
-			android:layout_width="wrap_content"
-			android:layout_height="wrap_content"
-			android:layout_marginEnd="@dimen/card_button_progress_size_small"
-			android:layout_marginRight="@dimen/card_button_progress_size_small"
-			android:letterSpacing="@dimen/description_letter_spacing"
-			android:text="@string/troubleshooting_description"
-			android:textColor="?android:textColorSecondary"
-			android:textSize="@dimen/default_desc_text_size"
-			app:typeface="@string/font_roboto_regular" />
-
 	</LinearLayout>
 
 	<include
diff --git a/OsmAnd/res/values/sizes.xml b/OsmAnd/res/values/sizes.xml
index dae06fed05f..12f90b37e9e 100644
--- a/OsmAnd/res/values/sizes.xml
+++ b/OsmAnd/res/values/sizes.xml
@@ -92,6 +92,8 @@
 	<dimen name="dialog_content_bottom_margin">16dp</dimen>
 	<dimen name="local_size_height">34dp</dimen>
 	<dimen name="standard_icon_size">24dp</dimen>
+	<dimen name="standard_icon_size_big">36dp</dimen>
+	<dimen name="icon_background_size">56dp</dimen>
 	<dimen name="poi_icon_size">16dp</dimen>
 	<dimen name="gpx_small_icon_margin">3dp</dimen>
 	<dimen name="gpx_small_text_margin">14dp</dimen>
@@ -207,6 +209,7 @@
     <dimen name="default_desc_text_size">14sp</dimen>
     <dimen name="default_sub_text_size">12sp</dimen>
 	<dimen name="default_sub_text_size_small">10sp</dimen>
+	<dimen name="default_header_text_size">21sp</dimen>
 	<dimen name="welcome_header_text_size">23sp</dimen>
 	<dimen name="text_button_text_size">15sp</dimen>
 	<dimen name="travel_card_primary_text_size">15sp</dimen>
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index dd4604d34fe..a9a22250a72 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -12,6 +12,29 @@
 
 -->
 
+    <string name="redeem_promo_code">Redeem promo code</string>
+    <string name="not_available_with">Not available with %1$s </string>
+    <string name="continue_with">Continue with %1$s</string>
+    <string name="ltr_or_rtl_combine_via_or">%1$s or %2$s</string>
+    <string name="osmand_pro">OsmAnd Pro</string>
+    <string name="maps_plus">Maps+</string>
+    <string name="you_can_get_feature_as_part_of_pattern">You can get “%1$s” as part of: %2$s plan. Compare the plans:</string>
+    <string name="advanced_widgets">Advanced Widgets</string>
+    <string name="nautical_depth">Nautical depth</string>
+    <string name="terrain_maps">Terrain maps</string>
+    <string name="offline_wikivoyage">Offline Wikivoyage</string>
+    <string name="offline_wikipeadia">Offline Wikipedia</string>
+    <string name="terrain_maps_contour_lines_hillshade_slope">Terrain maps: cotrour lines, hillshades, slope</string>
+    <string name="unlimited_map_downloads">Unlimited map downloads</string>
+    <string name="purchases_feature_desc_osmand_cloud">Get OsmAnd Cloud to store all OsmAnd data online. Forget about loosing your data after reinstall, backup and restore all information without a problem.</string>
+    <string name="purchases_feature_desc_advanced_widgets">Get Advanced OsmAnd Widgets.</string>
+    <string name="purchases_feature_desc_hourly_map_updates">Get access to more frequently maps update, choose between: hourly, daily or weekly updates. Updates are downloaded incrementally, only for the changed area.</string>
+    <string name="purchases_feature_desc_monthly_map_updates">Get access to regular monthly updates for offline maps.</string>
+    <string name="purchases_feature_desc_unlimited_map_download">Get unlimited downloads for all continents and regions offline maps.</string>
+    <string name="purchases_feature_desc_wikipedia">Explore Wikipedia offline. Articles divided by countries and regions and available in all languages.</string>
+    <string name="purchases_feature_desc_wikivoyage">Explore Wikipedia offline. Articles divided by countries and regions and available in all languages.</string>
+    <string name="purchases_feature_desc_terrain">Terrain contour lines, full hillshade map with dark shades and slope maps with colors to show, peaks and lowlands.</string>
+    <string name="purchases_feature_desc_nautical">Get access to nautical depth information</string>
     <string name="backup_storage_taken">Storage taken</string>
     <string name="backup_version_history">Version history</string>
     <string name="grey_color_slope">Grey color is used when slope is undefined.</string>
diff --git a/OsmAnd/src/net/osmand/plus/UiUtilities.java b/OsmAnd/src/net/osmand/plus/UiUtilities.java
index 44f8027d5c0..62aaaf1db69 100644
--- a/OsmAnd/src/net/osmand/plus/UiUtilities.java
+++ b/OsmAnd/src/net/osmand/plus/UiUtilities.java
@@ -785,15 +785,17 @@ public static void setMargins(View v, int s, int t, int e, int b) {
 		}
 	}
 
-	public static SpannableString createSpannableString(@NonNull String text, @NonNull StyleSpan styleSpan, @NonNull String... textToStyle) {
+	public static SpannableString createSpannableString(@NonNull String text, int style, @NonNull String... textToStyle) {
 		SpannableString spannable = new SpannableString(text);
 		for (String t : textToStyle) {
-			setSpan(spannable, styleSpan, text, t);
+			setSpan(spannable, new StyleSpan(style), text, t);
 		}
 		return spannable;
 	}
 
-	private static void setSpan(@NonNull SpannableString spannable, @NonNull Object styleSpan, @NonNull String text, @NonNull String t) {
+	private static void setSpan(@NonNull SpannableString spannable,
+	                            @NonNull Object styleSpan,
+	                            @NonNull String text, @NonNull String t) {
 		try {
 			int startIndex = text.indexOf(t);
 			spannable.setSpan(
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/RestoreDuplicatesFragment.java b/OsmAnd/src/net/osmand/plus/backup/ui/RestoreDuplicatesFragment.java
index 82f2d1069b7..802ad6b9654 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/RestoreDuplicatesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/RestoreDuplicatesFragment.java
@@ -73,7 +73,7 @@ protected void setupImportingUi() {
 		toolbarLayout.setTitle(getString(R.string.shared_string_importing));
 		description.setText(UiUtilities.createSpannableString(
 				String.format(getString(R.string.importing_from), getString(R.string.osmand_cloud)),
-				new StyleSpan(Typeface.BOLD), getString(R.string.osmand_cloud)
+				Typeface.BOLD, getString(R.string.osmand_cloud)
 		));
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/RestoreSettingsFragment.java b/OsmAnd/src/net/osmand/plus/backup/ui/RestoreSettingsFragment.java
index b04096eb0f7..e329ef6289c 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/RestoreSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/RestoreSettingsFragment.java
@@ -98,7 +98,7 @@ private void updateUi(int toolbarTitleRes, int descriptionRes) {
 		toolbarLayout.setTitle(getString(toolbarTitleRes));
 		description.setText(UiUtilities.createSpannableString(
 				String.format(getString(descriptionRes), getString(R.string.osmand_cloud)),
-				new StyleSpan(Typeface.BOLD), getString(R.string.osmand_cloud)
+				Typeface.BOLD, getString(R.string.osmand_cloud)
 		));
 		buttonsContainer.setVisibility(View.GONE);
 		progressBar.setVisibility(View.VISIBLE);
diff --git a/OsmAnd/src/net/osmand/plus/base/BaseOsmAndDialogFragment.java b/OsmAnd/src/net/osmand/plus/base/BaseOsmAndDialogFragment.java
index 78ec9484cfa..13e4786e212 100644
--- a/OsmAnd/src/net/osmand/plus/base/BaseOsmAndDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/base/BaseOsmAndDialogFragment.java
@@ -47,6 +47,10 @@ protected Drawable getPaintedContentIcon(@DrawableRes int id, @ColorInt int colo
 		return getIconsCache().getPaintedIcon(id, color);
 	}
 
+	protected Drawable getIcon(@DrawableRes int id) {
+		return getIconsCache().getIcon(id);
+	}
+
 	protected Drawable getIcon(@DrawableRes int id, @ColorRes int colorId) {
 		return getIconsCache().getIcon(id, colorId);
 	}
diff --git a/OsmAnd/src/net/osmand/plus/chooseplan/ChoosePlanFragment.java b/OsmAnd/src/net/osmand/plus/chooseplan/ChoosePlanFragment.java
new file mode 100644
index 00000000000..ab466ae9181
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/chooseplan/ChoosePlanFragment.java
@@ -0,0 +1,384 @@
+package net.osmand.plus.chooseplan;
+
+import android.app.Activity;
+import android.app.Dialog;
+import android.content.Context;
+import android.content.Intent;
+import android.graphics.Typeface;
+import android.graphics.drawable.ColorDrawable;
+import android.graphics.drawable.Drawable;
+import android.graphics.drawable.LayerDrawable;
+import android.net.Uri;
+import android.os.Build;
+import android.os.Bundle;
+import android.text.SpannableString;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.view.Window;
+import android.widget.FrameLayout;
+import android.widget.ImageView;
+import android.widget.LinearLayout;
+import android.widget.TextView;
+
+import androidx.annotation.ColorRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.core.content.ContextCompat;
+import androidx.fragment.app.FragmentActivity;
+
+import net.osmand.AndroidUtils;
+import net.osmand.PlatformUtil;
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.UiUtilities;
+import net.osmand.plus.Version;
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.base.BaseOsmAndDialogFragment;
+import net.osmand.plus.inapp.InAppPurchaseHelper;
+import net.osmand.plus.settings.fragments.TroubleshootingOrPurchasingCard;
+
+import org.apache.commons.logging.Log;
+
+import java.util.HashMap;
+import java.util.Map;
+
+import static net.osmand.plus.liveupdates.LiveUpdatesSettingsBottomSheet.getActivePrimaryColorId;
+import static net.osmand.plus.liveupdates.LiveUpdatesSettingsBottomSheet.getDefaultIconColorId;
+
+public class ChoosePlanFragment extends BaseOsmAndDialogFragment {
+
+	public static final String TAG = ChoosePlanFragment.class.getSimpleName();
+	private static final Log LOG = PlatformUtil.getLog(ChoosePlanFragment.class);
+
+	private OsmandApplication app;
+	private InAppPurchaseHelper purchaseHelper;
+	private LayoutInflater inflater;
+	private Context themedCtx;
+	private boolean nightMode;
+
+	private View view;
+	private LinearLayout listContainer;
+	private Map<OsmAndFeature, View> itemViews = new HashMap<>();
+
+	private OsmAndFeature selectedFeature;
+
+	public enum OsmAndFeature {
+		OSMAND_CLOUD(R.string.osmand_cloud, R.string.purchases_feature_desc_osmand_cloud, R.drawable.ic_action_cloud_upload_colored_day, R.drawable.ic_action_cloud_upload_colored_day, false),
+		ADVANCED_WIDGETS(R.string.advanced_widgets, R.string.purchases_feature_desc_advanced_widgets, R.drawable.ic_action_advanced_widgets_colored, R.drawable.ic_action_advanced_widgets_colored, false),
+		HOURLY_MAP_UPDATES(R.string.daily_map_updates, R.string.purchases_feature_desc_hourly_map_updates, R.drawable.ic_action_map_updates_colored_day, R.drawable.ic_action_map_updates_colored_day, false),
+		MONTHLY_MAP_UPDATES(R.string.monthly_map_updates, R.string.purchases_feature_desc_monthly_map_updates, R.drawable.ic_action_monthly_map_updates_colored_day, R.drawable.ic_action_monthly_map_updates_colored_day, true),
+		UNLIMITED_MAP_DOWNLOADS(R.string.unlimited_map_downloads, R.string.purchases_feature_desc_unlimited_map_download, R.drawable.ic_action_unlimited_downloads_colored_day, R.drawable.ic_action_unlimited_downloads_colored_day, true),
+		WIKIPEDIA(R.string.shared_string_wikipedia, R.string.offline_wikipeadia, R.string.purchases_feature_desc_wikipedia, R.drawable.ic_action_wikipedia_download_colored_day, R.drawable.ic_action_wikipedia_download_colored_day, true),
+		WIKIVOYAGE(R.string.shared_string_wikivoyage, R.string.offline_wikivoyage, R.string.purchases_feature_desc_wikivoyage, R.drawable.ic_action_backpack_colored_day, R.drawable.ic_action_backpack_colored_day, true),
+		TERRAIN(R.string.terrain_maps, R.string.terrain_maps_contour_lines_hillshade_slope, R.string.purchases_feature_desc_terrain, R.drawable.ic_action_srtm_colored_day, R.drawable.ic_action_srtm_colored_day, true),
+		NAUTICAL_DEPTH(R.string.nautical_depth, R.string.purchases_feature_desc_nautical, R.drawable.ic_action_nautical_depth_colored_day, R.drawable.ic_action_nautical_depth_colored_day, true);
+
+		OsmAndFeature(int titleId,
+		              int descriptionId,
+		              int icDayId,
+		              int icNightId,
+		              boolean availableInMapsPlus) {
+			// constructor for features with the same titles in header and list
+			this(titleId, titleId, descriptionId, icDayId, icNightId, availableInMapsPlus);
+		}
+
+		OsmAndFeature(int headerTitleId,
+		              int inListTitleId,
+		              int descriptionId,
+		              int icDayId,
+		              int icNightId,
+		              boolean availableInMapsPlus) {
+			this.headerTitleId = headerTitleId;
+			this.inListTitleId = inListTitleId;
+			this.descriptionId = descriptionId;
+			this.icDayId = icDayId;
+			this.icNightId = icNightId;
+			this.availableInMapsPlus = availableInMapsPlus;
+		}
+
+		private int headerTitleId;
+		private int inListTitleId;
+		private int descriptionId;
+		private int icDayId;
+		private int icNightId;
+		public boolean availableInMapsPlus;
+
+		public int getHeaderTitleId() {
+			return headerTitleId;
+		}
+
+		public int getInListTitleId() {
+			return inListTitleId;
+		}
+
+		public int getDescriptionId() {
+			return descriptionId;
+		}
+
+		public boolean isAvailableInMapsPlus() {
+			return availableInMapsPlus;
+		}
+
+		public int getIconId(boolean nightMode) {
+			return nightMode ? icNightId : icDayId;
+		}
+	}
+
+	@Override
+	public void onCreate(Bundle savedInstanceState) {
+		super.onCreate(savedInstanceState);
+		app = getMyApplication();
+		purchaseHelper = app.getInAppPurchaseHelper();
+		nightMode = isNightMode(getMapActivity() != null);
+		inflater = UiUtilities.getInflater(app, nightMode);
+		themedCtx = UiUtilities.getThemedContext(app, nightMode);
+	}
+
+	@NonNull
+	@Override
+	public Dialog onCreateDialog(Bundle savedInstanceState) {
+		Activity ctx = requireActivity();
+		int themeId = nightMode ? R.style.OsmandDarkTheme_DarkActionbar : R.style.OsmandLightTheme_DarkActionbar_LightStatusBar;
+		Dialog dialog = new Dialog(ctx, themeId);
+		Window window = dialog.getWindow();
+		if (window != null) {
+			if (!getSettings().DO_NOT_USE_ANIMATIONS.get()) {
+				window.getAttributes().windowAnimations = R.style.Animations_Alpha;
+			}
+			if (Build.VERSION.SDK_INT >= 21) {
+				window.setStatusBarColor(ContextCompat.getColor(ctx, getStatusBarColorId()));
+			}
+		}
+		return dialog;
+	}
+
+	@Nullable
+	@Override
+	public View onCreateView(@NonNull LayoutInflater inflater,
+	                         @Nullable ViewGroup container,
+	                         @Nullable Bundle savedInstanceState) {
+		view = inflater.inflate(R.layout.fragment_choose_plan, container, false);
+		listContainer = view.findViewById(R.id.list_container);
+		initView();
+		return view;
+	}
+
+	private void initView() {
+		setupHeaderIconBackground();
+		createFeaturesList();
+		setupLaterButton();
+		createTroubleshootingCard();
+		fullUpdateView();
+	}
+
+	private void fullUpdateView() {
+		updateHeader();
+		updateListSelection();
+		updateContinueButtons();
+	}
+
+	private void selectFeature(OsmAndFeature feature) {
+		if (selectedFeature != feature) {
+			selectedFeature = feature;
+			fullUpdateView();
+		}
+	}
+
+	private void setupHeaderIconBackground() {
+		FrameLayout backgroundView = view.findViewById(R.id.header_icon_background);
+		int color = AndroidUtils.getColorFromAttr(themedCtx, R.attr.activity_background_color);
+		Drawable bgDrawable = UiUtilities.createTintedDrawable(app, R.drawable.rectangle_rounded, color);
+		AndroidUtils.setBackground(backgroundView, bgDrawable);
+	}
+
+	private void createFeaturesList() {
+		itemViews.clear();
+		listContainer.removeAllViews();
+		for (OsmAndFeature feature : OsmAndFeature.values()) {
+			View view = createFeatureItemView(feature);
+			itemViews.put(feature, view);
+			listContainer.addView(view);
+		}
+	}
+
+	private View createFeatureItemView(@NonNull OsmAndFeature feature) {
+		View v = inflater.inflate(R.layout.purchase_osmand_feature_item, listContainer, false);
+
+		Drawable icon = getIcon(feature.getIconId(nightMode));
+		((ImageView) v.findViewById(R.id.primary_icon)).setImageDrawable(icon);
+
+		String title = getString(feature.getInListTitleId());
+		((TextView) v.findViewById(R.id.title)).setText(title);
+
+		int mapsPlusVisibility = feature.isAvailableInMapsPlus() ? View.VISIBLE : View.INVISIBLE;
+		v.findViewById(R.id.secondary_icon).setVisibility(mapsPlusVisibility);
+
+		v.setOnClickListener(v1 -> {
+			selectFeature(feature);
+		});
+
+		View divider = v.findViewById(R.id.bottom_divider);
+		divider.setVisibility(isLastItem(feature) ? View.GONE : View.VISIBLE);
+
+		return v;
+	}
+
+	private void setupLaterButton() {
+		int colorNoAlpha = ContextCompat.getColor(themedCtx, getActivePrimaryColorId(nightMode));
+		int colorAlpha = UiUtilities.getColorWithAlpha(colorNoAlpha, 0.15f);
+
+		View button = view.findViewById(R.id.button_later);
+		Drawable bgDrawable = UiUtilities.createTintedDrawable(app, R.drawable.rectangle_rounded, colorAlpha);
+		Drawable selectableBg = UiUtilities.getColoredSelectableDrawable(app, colorAlpha, 1.0f);
+		Drawable[] layers = {bgDrawable, selectableBg};
+		LayerDrawable layerDrawable = new LayerDrawable(layers);
+		AndroidUtils.setBackground(button, layerDrawable);
+	}
+
+	private void createTroubleshootingCard() {
+		FragmentActivity activity = getMapActivity();
+		if (activity != null) {
+			FrameLayout container = view.findViewById(R.id.troubleshooting_card);
+			boolean isPaidVersion = Version.isPaidVersion(app);
+			container.addView(new TroubleshootingOrPurchasingCard(getMapActivity(), purchaseHelper, isPaidVersion)
+					.build(activity));
+		}
+	}
+
+	private void updateHeader() {
+		if (selectedFeature == null) return;
+
+		Drawable icon = getIcon(selectedFeature.getIconId(nightMode));
+		((ImageView) view.findViewById(R.id.header_icon)).setImageDrawable(icon);
+
+		String title = getString(selectedFeature.getHeaderTitleId());
+		((TextView) view.findViewById(R.id.header_title)).setText(title);
+
+		String desc = getString(selectedFeature.getDescriptionId());
+		((TextView) view.findViewById(R.id.primary_description)).setText(desc);
+
+		String mapsPlus = getString(R.string.maps_plus);
+		String osmAndPro = getString(R.string.osmand_pro);
+		String pattern = getString(R.string.you_can_get_feature_as_part_of_pattern);
+		String availablePlans = osmAndPro;
+		if (selectedFeature.isAvailableInMapsPlus()) {
+			availablePlans = String.format(
+					getString(R.string.ltr_or_rtl_combine_via_or),
+					mapsPlus, osmAndPro);
+		}
+		String secondaryDesc = String.format(pattern, title, availablePlans);
+		SpannableString message = UiUtilities.createSpannableString(secondaryDesc, Typeface.BOLD, mapsPlus, osmAndPro);
+		((TextView) view.findViewById(R.id.secondary_description)).setText(message);
+	}
+
+	private void updateListSelection() {
+		for (OsmAndFeature feature : itemViews.keySet()) {
+			View v = itemViews.get(feature);
+
+			boolean selected = feature == selectedFeature;
+			int activeColor = ContextCompat.getColor(themedCtx, getActivePrimaryColorId(nightMode));
+			int transparent = ContextCompat.getColor(themedCtx, R.color.color_transparent);
+			int colorWithAlpha = UiUtilities.getColorWithAlpha(activeColor, 0.15f);
+			int bgColor = selected ? colorWithAlpha : transparent;
+
+			Drawable selectableBg = UiUtilities.getColoredSelectableDrawable(app, colorWithAlpha, 1.0f);
+			Drawable[] layers = {new ColorDrawable(bgColor), selectableBg};
+			LayerDrawable layerDrawable = new LayerDrawable(layers);
+			AndroidUtils.setBackground(v, layerDrawable);
+		}
+	}
+
+	private void updateContinueButtons() {
+		updateContinueButton(view.findViewById(R.id.button_continue_pro),
+				R.drawable.ic_action_osmand_pro_logo,
+				getString(R.string.osmand_pro),
+				"From € 3 / month",
+				true);
+
+		boolean availableInMapsPlus = selectedFeature.isAvailableInMapsPlus();
+		int mapsPlusIconId = availableInMapsPlus ?
+				R.drawable.ic_action_osmand_maps_plus :
+				R.drawable.ic_action_osmand_maps_plus_desaturated;
+		updateContinueButton(view.findViewById(R.id.button_continue_maps_plus),
+				mapsPlusIconId,
+				getString(R.string.maps_plus),
+				"From € 9,99 / year",
+				availableInMapsPlus);
+	}
+
+	private void updateContinueButton(View v,
+	                                  int iconId,
+	                                  String title,
+	                                  String description,
+	                                  boolean available) {
+		int colorNoAlpha = ContextCompat.getColor(themedCtx,
+				available ? getActivePrimaryColorId(nightMode) : getDefaultIconColorId(nightMode));
+		int colorAlphaLess = UiUtilities.getColorWithAlpha(colorNoAlpha, 0.75f);
+		int colorAlphaMany = UiUtilities.getColorWithAlpha(colorNoAlpha, 0.15f);
+
+		int baseTitlePartId = available ? R.string.continue_with : R.string.not_available_with;
+		title = String.format(getString(baseTitlePartId), title);
+		TextView tvTitle = v.findViewById(R.id.title);
+		tvTitle.setText(title);
+		tvTitle.setTextColor(colorNoAlpha);
+
+		TextView tvDescription = v.findViewById(R.id.description);
+		tvDescription.setText(description);
+		tvDescription.setTextColor(colorAlphaLess);
+
+		ImageView ivIcon = v.findViewById(R.id.icon);
+		ivIcon.setImageResource(iconId);
+
+		Drawable bgDrawable = app.getUIUtilities().getPaintedIcon(R.drawable.rectangle_rounded, colorAlphaMany);
+		Drawable selectableBg = UiUtilities.getColoredSelectableDrawable(app, colorAlphaMany, 1.0f);
+		Drawable[] layers = {bgDrawable, selectableBg};
+		LayerDrawable layerDrawable = new LayerDrawable(layers);
+		AndroidUtils.setBackground(v, layerDrawable);
+
+		v.setOnClickListener(v1 -> app.showShortToastMessage("Toast"));
+		v.setEnabled(available);
+	}
+
+	private boolean isLastItem(OsmAndFeature feature) {
+		OsmAndFeature[] features = OsmAndFeature.values();
+		return feature == features[features.length - 1];
+	}
+
+	@ColorRes
+	protected int getStatusBarColorId() {
+		return nightMode ?
+				R.color.list_background_color_dark :
+				R.color.list_background_color_light;
+	}
+
+	@Nullable
+	public MapActivity getMapActivity() {
+		Activity activity = getActivity();
+		if (activity instanceof MapActivity) {
+			return (MapActivity) activity;
+		}
+		return null;
+	}
+
+	public static void showInstance(@NonNull FragmentActivity activity,
+	                                @NonNull OsmAndFeature selectedFeature) {
+		OsmandApplication app = (OsmandApplication) activity.getApplicationContext();
+		if (Version.isAmazon()) {
+			Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(Version.getUrlWithUtmRef(app, "net.osmand.plus")));
+			intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
+			if (AndroidUtils.isIntentSafe(app, intent)) {
+				app.startActivity(intent);
+			}
+		} else {
+			try {
+				ChoosePlanFragment fragment = new ChoosePlanFragment();
+				fragment.selectedFeature = selectedFeature;
+				fragment.show(activity.getSupportFragmentManager(), TAG);
+			} catch (RuntimeException e) {
+				LOG.error(selectedFeature.name(), e);
+			}
+		}
+	}
+
+}
diff --git a/OsmAnd/src/net/osmand/plus/liveupdates/LiveUpdatesClearBottomSheet.java b/OsmAnd/src/net/osmand/plus/liveupdates/LiveUpdatesClearBottomSheet.java
index dc199d61de0..ddbfb3eb599 100644
--- a/OsmAnd/src/net/osmand/plus/liveupdates/LiveUpdatesClearBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/liveupdates/LiveUpdatesClearBottomSheet.java
@@ -68,7 +68,7 @@ public void createMenuItems(Bundle savedInstanceState) {
 
 		String nameToDisplay = getNameToDisplay(fileName, app);
 		String text = getString(R.string.live_update_delete_updates_msg, nameToDisplay);
-		SpannableString message = UiUtilities.createSpannableString(text, new StyleSpan(Typeface.BOLD), nameToDisplay);
+		SpannableString message = UiUtilities.createSpannableString(text, Typeface.BOLD, nameToDisplay);
 
 		items.add(new LongDescriptionItem.Builder()
 				.setDescription(message)
diff --git a/OsmAnd/src/net/osmand/plus/liveupdates/LiveUpdatesSettingsBottomSheet.java b/OsmAnd/src/net/osmand/plus/liveupdates/LiveUpdatesSettingsBottomSheet.java
index 6fc85e67848..5831c311342 100644
--- a/OsmAnd/src/net/osmand/plus/liveupdates/LiveUpdatesSettingsBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/liveupdates/LiveUpdatesSettingsBottomSheet.java
@@ -565,6 +565,10 @@ public static int getTertiaryTextColorId(boolean nightMode) {
 		return nightMode ? R.color.text_color_tertiary_dark : R.color.text_color_tertiary_light;
 	}
 
+	public static int getDefaultIconColorId(boolean nightMode) {
+		return nightMode ? R.color.icon_color_default_dark : R.color.icon_color_default_light;
+	}
+
 	@Override
 	protected int getDismissButtonTextId() {
 		return R.string.shared_string_close;
diff --git a/OsmAnd/src/net/osmand/plus/quickaction/QuickActionListFragment.java b/OsmAnd/src/net/osmand/plus/quickaction/QuickActionListFragment.java
index 28981e5db6d..ea7de632860 100644
--- a/OsmAnd/src/net/osmand/plus/quickaction/QuickActionListFragment.java
+++ b/OsmAnd/src/net/osmand/plus/quickaction/QuickActionListFragment.java
@@ -916,7 +916,7 @@ static void showConfirmDeleteAnActionBottomSheet(FragmentActivity ctx, Fragment
         String message = String.format(ctx.getString(
                 R.string.quick_actions_delete_text), actionName);
         SpannableString styledMessage = UiUtilities.createSpannableString(
-                message, new StyleSpan(Typeface.BOLD), actionName);
+                message, Typeface.BOLD, actionName);
 
         ConfirmationBottomSheet.showInstance(ctx.getSupportFragmentManager(), target,
                 ctx.getString(R.string.quick_actions_delete), styledMessage,
diff --git a/OsmAnd/src/net/osmand/plus/routepreparationmenu/FollowTrackFragment.java b/OsmAnd/src/net/osmand/plus/routepreparationmenu/FollowTrackFragment.java
index b8c80c1acab..128d95d5cb1 100644
--- a/OsmAnd/src/net/osmand/plus/routepreparationmenu/FollowTrackFragment.java
+++ b/OsmAnd/src/net/osmand/plus/routepreparationmenu/FollowTrackFragment.java
@@ -11,8 +11,6 @@
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
-import android.view.ViewGroup.LayoutParams;
-import android.view.ViewGroup.MarginLayoutParams;
 import android.widget.FrameLayout;
 import android.widget.ImageButton;
 import android.widget.LinearLayout;
@@ -54,7 +52,6 @@
 import net.osmand.plus.routepreparationmenu.cards.TracksToFollowCard;
 import net.osmand.plus.routing.GPXRouteParams.GPXRouteParamsBuilder;
 import net.osmand.plus.routing.IRouteInformationListener;
-import net.osmand.plus.routing.RouteService;
 import net.osmand.plus.routing.RoutingHelper;
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.track.TrackSelectSegmentBottomSheet;
diff --git a/OsmAnd/src/net/osmand/plus/search/QuickSearchDialogFragment.java b/OsmAnd/src/net/osmand/plus/search/QuickSearchDialogFragment.java
index bab70d4278e..e3824b36c0a 100644
--- a/OsmAnd/src/net/osmand/plus/search/QuickSearchDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/search/QuickSearchDialogFragment.java
@@ -1284,7 +1284,7 @@ public void onApplyPoiFiltersState(final ApplicationMode appMode, boolean stateC
 											//show "Apply to all profiles" SnackBar
 											String modeName = appMode.toHumanString();
 											String text = app.getString(R.string.changes_applied_to_profile, modeName);
-											SpannableString message = UiUtilities.createSpannableString(text, new StyleSpan(Typeface.BOLD), modeName);
+											SpannableString message = UiUtilities.createSpannableString(text, Typeface.BOLD, modeName);
 											Snackbar snackbar = Snackbar.make(containerView, message, Snackbar.LENGTH_LONG)
 													.setAction(R.string.apply_to_all_profiles, new View.OnClickListener() {
 														@Override
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java
index 36c8a5e9487..1f011239915 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java
@@ -958,7 +958,7 @@ protected void applyPreferenceWithSnackBar(final String prefId,
 		if (containerView != null) {
 			String modeName = appMode.toHumanString();
 			String text = app.getString(R.string.changes_applied_to_profile, modeName);
-			SpannableString message = UiUtilities.createSpannableString(text, new StyleSpan(Typeface.BOLD), modeName);
+			SpannableString message = UiUtilities.createSpannableString(text, Typeface.BOLD, modeName);
 			Snackbar snackbar = Snackbar.make(containerView, message, Snackbar.LENGTH_LONG)
 					.setAction(R.string.apply_to_all_profiles, new View.OnClickListener() {
 						@Override
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/FileImportDuplicatesFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/FileImportDuplicatesFragment.java
index f41d3e83f2b..4f846e8c328 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/FileImportDuplicatesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/FileImportDuplicatesFragment.java
@@ -79,7 +79,7 @@ protected void setupImportingUi() {
 		toolbarLayout.setTitle(getString(R.string.shared_string_importing));
 		description.setText(UiUtilities.createSpannableString(
 				String.format(getString(R.string.importing_from), file.getName()),
-				new StyleSpan(Typeface.BOLD), file.getName()
+				Typeface.BOLD, file.getName()
 		));
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/FileImportSettingsFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/FileImportSettingsFragment.java
index 97c60ec5a09..5127c9a499d 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/FileImportSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/FileImportSettingsFragment.java
@@ -84,7 +84,7 @@ private void updateUi(int toolbarTitleRes, int descriptionRes) {
 			toolbarLayout.setTitle(getString(toolbarTitleRes));
 			description.setText(UiUtilities.createSpannableString(
 					String.format(getString(descriptionRes), fileName),
-					new StyleSpan(Typeface.BOLD), fileName
+					Typeface.BOLD, fileName
 			));
 			buttonsContainer.setVisibility(View.GONE);
 			progressBar.setVisibility(View.VISIBLE);
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/ImportCompleteFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/ImportCompleteFragment.java
index 4c0ff6a12c4..5641196dc85 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/ImportCompleteFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/ImportCompleteFragment.java
@@ -97,7 +97,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup c
 		recyclerView = root.findViewById(R.id.list);
 		description.setText(UiUtilities.createSpannableString(
 				String.format(getString(R.string.import_complete_description), sourceName),
-				new StyleSpan(Typeface.BOLD), sourceName
+				Typeface.BOLD, sourceName
 		));
 		btnClose.setOnClickListener(new View.OnClickListener() {
 			@Override
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/ProfileAppearanceFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/ProfileAppearanceFragment.java
index ea4c09312c6..b557e8fcdc3 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/ProfileAppearanceFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/ProfileAppearanceFragment.java
@@ -59,7 +59,6 @@
 import net.osmand.plus.settings.backend.CommonPreference;
 import net.osmand.plus.settings.backend.backup.FileSettingsHelper.SettingsExportListener;
 import net.osmand.plus.settings.backend.backup.items.ProfileSettingsItem;
-import net.osmand.plus.settings.backend.backup.SettingsHelper;
 import net.osmand.plus.settings.fragments.RouteLineAppearanceFragment.OnApplyRouteLineListener;
 import net.osmand.plus.track.ColorsCard;
 import net.osmand.plus.track.CustomColorBottomSheet.ColorPickerListener;
diff --git a/OsmAnd/src/net/osmand/plus/wikipedia/SelectWikiLanguagesBottomSheet.java b/OsmAnd/src/net/osmand/plus/wikipedia/SelectWikiLanguagesBottomSheet.java
index e9534e55e4f..8cede6c4276 100644
--- a/OsmAnd/src/net/osmand/plus/wikipedia/SelectWikiLanguagesBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/wikipedia/SelectWikiLanguagesBottomSheet.java
@@ -224,7 +224,7 @@ protected void applyPreferenceWithSnackBar(final List<String> localesForSaving,
 		if (mapActivity != null) {
 			String modeName = appMode.toHumanString();
 			String text = app.getString(R.string.changes_applied_to_profile, modeName);
-			SpannableString message = UiUtilities.createSpannableString(text, new StyleSpan(Typeface.BOLD), modeName);
+			SpannableString message = UiUtilities.createSpannableString(text, Typeface.BOLD, modeName);
 			Snackbar snackbar = Snackbar.make(mapActivity.getLayout(), message, Snackbar.LENGTH_LONG)
 					.setAction(R.string.apply_to_all_profiles, new View.OnClickListener() {
 						@Override
diff --git a/OsmAnd/src/net/osmand/plus/wikipedia/WikipediaDialogFragment.java b/OsmAnd/src/net/osmand/plus/wikipedia/WikipediaDialogFragment.java
index 17a8500361a..5c47f31971b 100644
--- a/OsmAnd/src/net/osmand/plus/wikipedia/WikipediaDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/wikipedia/WikipediaDialogFragment.java
@@ -299,7 +299,7 @@ public boolean onMenuItemClick(MenuItem item) {
 		}
 	}
 
-	private Drawable getIcon(int resId) {
+	protected Drawable getIcon(int resId) {
 		int colorId = nightMode ? R.color.ctx_menu_controller_button_text_color_dark_n : R.color.ctx_menu_controller_button_text_color_light_n;
 		return getIcon(resId, colorId);
 	}
