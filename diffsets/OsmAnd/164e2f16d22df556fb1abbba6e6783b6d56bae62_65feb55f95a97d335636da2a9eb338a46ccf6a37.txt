diff --git a/OsmAnd/res/layout/widgets_panel_page.xml b/OsmAnd/res/layout/widgets_panel_page.xml
index b285b104141..a02d1207f89 100644
--- a/OsmAnd/res/layout/widgets_panel_page.xml
+++ b/OsmAnd/res/layout/widgets_panel_page.xml
@@ -10,7 +10,7 @@
 
 	<LinearLayout
 		android:id="@+id/container"
-		android:layout_width="match_parent"
+		android:layout_width="wrap_content"
 		android:layout_height="match_parent"
 		android:orientation="vertical" />
 
diff --git a/OsmAnd/src/net/osmand/plus/views/controls/SideWidgetsPanel.java b/OsmAnd/src/net/osmand/plus/views/controls/SideWidgetsPanel.java
index 29d3cdb8a6f..6717bc19be8 100644
--- a/OsmAnd/src/net/osmand/plus/views/controls/SideWidgetsPanel.java
+++ b/OsmAnd/src/net/osmand/plus/views/controls/SideWidgetsPanel.java
@@ -163,12 +163,12 @@ private int getDotColorId(boolean selected) {
 
 	public void update(DrawSettings drawSettings) {
 		adapter.updateIfNeeded();
-		WrapContentViewPager2Callback.resizeViewPagerToWrapContent(viewPager, null);
-		boolean show = adapter.getItemCount() > 0 && selfShowAllowed;
+		boolean show = hasVisibleWidgets() && selfShowAllowed;
 		selfVisibilityChanging = true;
 		if (AndroidUiHelper.updateVisibility(this, show) && !show) {
 			selfShowAllowed = true;
 		}
+		WrapContentViewPager2Callback.resizeViewPagerToWrapContent(viewPager, null);
 		selfVisibilityChanging = false;
 		updateDots();
 	}
@@ -184,22 +184,25 @@ public void updateColors(@NonNull TextState textState) {
 	protected void dispatchDraw(Canvas canvas) {
 		super.dispatchDraw(canvas);
 
-		boolean shouldHideBorder = false;
+		if (hasVisibleWidgets()) {
+			drawBorder(canvas);
+		}
+	}
+
+	private boolean hasVisibleWidgets() {
 		if (adapter != null) {
 			VisiblePages visiblePages = adapter.getVisiblePages();
 			List<View> views = visiblePages.getWidgetsViews(viewPager.getCurrentItem());
 			if (!Algorithms.isEmpty(views)) {
-				boolean hasVisibleViews = false;
 				for (View view : views) {
-					hasVisibleViews |= view.findViewById(R.id.container).getVisibility() == VISIBLE;
-					hasVisibleViews |= view.findViewById(R.id.empty_banner).getVisibility() == VISIBLE;
+					if (view.findViewById(R.id.container).getVisibility() == VISIBLE
+							|| view.findViewById(R.id.empty_banner).getVisibility() == VISIBLE) {
+						return true;
+					}
 				}
-				shouldHideBorder = !hasVisibleViews;
 			}
 		}
-		if (!shouldHideBorder) {
-			drawBorder(canvas);
-		}
+		return false;
 	}
 
 	private void drawBorder(@NonNull Canvas canvas) {
