diff --git a/OsmAnd/src/net/osmand/plus/routepreparationmenu/MapRouteInfoMenu.java b/OsmAnd/src/net/osmand/plus/routepreparationmenu/MapRouteInfoMenu.java
index de0748bdeb0..d35106d15af 100644
--- a/OsmAnd/src/net/osmand/plus/routepreparationmenu/MapRouteInfoMenu.java
+++ b/OsmAnd/src/net/osmand/plus/routepreparationmenu/MapRouteInfoMenu.java
@@ -108,6 +108,7 @@
 import net.osmand.plus.settings.backend.CommonPreference;
 import net.osmand.plus.settings.backend.OsmandPreference;
 import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.settings.fragments.RouteLineAppearanceFragment;
 import net.osmand.plus.settings.fragments.VoiceLanguageBottomSheetFragment;
 import net.osmand.plus.views.OsmandMapLayer;
 import net.osmand.plus.views.OsmandMapTileView;
@@ -157,6 +158,7 @@ public class MapRouteInfoMenu implements IRouteInformationListener, CardListener
 	private int selectFromMapMenuState = MenuState.HEADER_ONLY;
 	private boolean selectFromMapWaypoints;
 	private boolean selectFromTracks;
+	private boolean customizingRouteLine;
 
 	private boolean showMenu = false;
 	private int showMenuState = DEFAULT_MENU_STATE;
@@ -2002,6 +2004,19 @@ public void cancelSelectionFromTracks() {
 		selectFromTracks = false;
 	}
 
+	public void customizeRouteLine() {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			customizingRouteLine = true;
+			ApplicationMode routingAppMode = mapActivity.getMyApplication().getRoutingHelper().getAppMode();
+			RouteLineAppearanceFragment.showInstance(mapActivity.getSupportFragmentManager(), routingAppMode);
+		}
+	}
+
+	public void finishRouteLineCustomization() {
+		customizingRouteLine = false;
+	}
+
 	public void setupFields(PointType pointType) {
 		View mainView = getMainView();
 		if (mainView != null) {
@@ -2290,7 +2305,8 @@ public void onDismiss(Fragment fragment, int currentMenuState, Bundle arguments,
 				if (switched) {
 					mapActivity.getMapLayers().getMapControlsLayer().switchToRouteFollowingLayout();
 				}
-				if (mapActivity.getPointToNavigate() == null && !selectFromMapTouch && !selectFromTracks) {
+				if (mapActivity.getPointToNavigate() == null && !selectFromMapTouch && !selectFromTracks
+						&& !customizingRouteLine) {
 					mapActivity.getMapActions().stopNavigationWithoutConfirm();
 				}
 				mapActivity.updateStatusBarColor();
diff --git a/OsmAnd/src/net/osmand/plus/routepreparationmenu/RouteOptionsBottomSheet.java b/OsmAnd/src/net/osmand/plus/routepreparationmenu/RouteOptionsBottomSheet.java
index 658c7dfdd2f..2ad1cf7dd1f 100644
--- a/OsmAnd/src/net/osmand/plus/routepreparationmenu/RouteOptionsBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/routepreparationmenu/RouteOptionsBottomSheet.java
@@ -33,6 +33,7 @@
 import net.osmand.plus.measurementtool.MeasurementToolFragment;
 import net.osmand.plus.routepreparationmenu.RoutingOptionsHelper.AvoidPTTypesRoutingParameter;
 import net.osmand.plus.routepreparationmenu.RoutingOptionsHelper.AvoidRoadsRoutingParameter;
+import net.osmand.plus.routepreparationmenu.RoutingOptionsHelper.CustomizeRouteLineRoutingParameter;
 import net.osmand.plus.routepreparationmenu.RoutingOptionsHelper.DividerItem;
 import net.osmand.plus.routepreparationmenu.RoutingOptionsHelper.GpxLocalRoutingParameter;
 import net.osmand.plus.routepreparationmenu.RoutingOptionsHelper.LocalRoutingParameter;
@@ -194,6 +195,8 @@ public void createMenuItems(Bundle savedInstanceState) {
 				items.add(createTimeConditionalRoutingItem(optionsItem));
 			} else if (optionsItem instanceof OtherSettingsRoutingParameter) {
 				items.add(createOtherSettingsRoutingItem(optionsItem));
+			} else if (optionsItem instanceof CustomizeRouteLineRoutingParameter) {
+				items.add(createCustomizeRouteLineRoutingItem(optionsItem));
 			} else if (USE_HEIGHT_OBSTACLES.equals(optionsItem.getKey()) && hasReliefParameters()) {
 				items.add(inflateElevationParameter(optionsItem));
 			} else {
@@ -559,6 +562,22 @@ public void onClick(View view) {
 				.create();
 	}
 
+	private BaseBottomSheetItem createCustomizeRouteLineRoutingItem(
+			final LocalRoutingParameter lineCustomizationItem) {
+		return new SimpleBottomSheetItem.Builder()
+				.setIcon(getContentIcon(lineCustomizationItem.getActiveIconId()))
+				.setTitle(getString(R.string.customize_route_line))
+				.setLayoutId(R.layout.bottom_sheet_item_simple_56dp)
+				.setOnClickListener(v -> {
+					if (mapActivity != null) {
+						MapRouteInfoMenu mapRouteInfoMenu = mapActivity.getMapRouteInfoMenu();
+						mapRouteInfoMenu.hide();
+						mapRouteInfoMenu.customizeRouteLine();
+						dismiss();
+					}
+				}).create();
+	}
+
 	private void inflateRoutingParameter(final LocalRoutingParameter parameter) {
 		if (parameter != null) {
 			final BottomSheetItemWithCompoundButton[] item = new BottomSheetItemWithCompoundButton[1];
@@ -725,6 +744,7 @@ public enum AppModeOptions {
 				TimeConditionalRoutingItem.KEY,
 				DividerItem.KEY,
 				OtherSettingsRoutingParameter.KEY,
+				CustomizeRouteLineRoutingParameter.KEY,
 				RouteSimulationItem.KEY),
 
 		BICYCLE(MuteSoundRoutingParameter.KEY,
@@ -738,6 +758,7 @@ public enum AppModeOptions {
 				TimeConditionalRoutingItem.KEY,
 				DividerItem.KEY,
 				OtherSettingsRoutingParameter.KEY,
+				CustomizeRouteLineRoutingParameter.KEY,
 				RouteSimulationItem.KEY),
 
 		PEDESTRIAN(MuteSoundRoutingParameter.KEY,
@@ -749,6 +770,7 @@ public enum AppModeOptions {
 				TimeConditionalRoutingItem.KEY,
 				DividerItem.KEY,
 				OtherSettingsRoutingParameter.KEY,
+				CustomizeRouteLineRoutingParameter.KEY,
 				RouteSimulationItem.KEY),
 
 		PUBLIC_TRANSPORT(MuteSoundRoutingParameter.KEY,
@@ -767,6 +789,7 @@ public enum AppModeOptions {
 				TimeConditionalRoutingItem.KEY,
 				DividerItem.KEY,
 				OtherSettingsRoutingParameter.KEY,
+				CustomizeRouteLineRoutingParameter.KEY,
 				RouteSimulationItem.KEY),
 
 		STRAIGHT(MuteSoundRoutingParameter.KEY,
@@ -775,6 +798,7 @@ public enum AppModeOptions {
 				DividerItem.KEY,
 				GpxLocalRoutingParameter.KEY,
 				OtherSettingsRoutingParameter.KEY,
+				CustomizeRouteLineRoutingParameter.KEY,
 				RouteSimulationItem.KEY),
 
 		DIRECT_TO(MuteSoundRoutingParameter.KEY,
@@ -783,6 +807,7 @@ public enum AppModeOptions {
 				DividerItem.KEY,
 				GpxLocalRoutingParameter.KEY,
 				OtherSettingsRoutingParameter.KEY,
+				CustomizeRouteLineRoutingParameter.KEY,
 				RouteSimulationItem.KEY);
 
 
diff --git a/OsmAnd/src/net/osmand/plus/routepreparationmenu/RoutingOptionsHelper.java b/OsmAnd/src/net/osmand/plus/routepreparationmenu/RoutingOptionsHelper.java
index 02fe7ecef60..4802af19bcc 100644
--- a/OsmAnd/src/net/osmand/plus/routepreparationmenu/RoutingOptionsHelper.java
+++ b/OsmAnd/src/net/osmand/plus/routepreparationmenu/RoutingOptionsHelper.java
@@ -415,6 +415,8 @@ public LocalRoutingParameter getItem(ApplicationMode am, String parameter) {
 				return new TimeConditionalRoutingItem();
 			case OtherSettingsRoutingParameter.KEY:
 				return new OtherSettingsRoutingParameter();
+			case CustomizeRouteLineRoutingParameter.KEY:
+				return new CustomizeRouteLineRoutingParameter();
 			default:
 				return getRoutingParameterInnerById(am, parameter);
 		}
@@ -962,6 +964,35 @@ public int getDisabledIconId() {
 		}
 	}
 
+	public static class CustomizeRouteLineRoutingParameter extends LocalRoutingParameter {
+
+		public static final String KEY = "CustomizeRouteLineRoutingParameter";
+
+		public CustomizeRouteLineRoutingParameter() {
+			super(null);
+		}
+
+		@Override
+		public String getKey() {
+			return KEY;
+		}
+
+		@Override
+		public boolean canAddToRouteMenu() {
+			return false;
+		}
+
+		@Override
+		public int getActiveIconId() {
+			return R.drawable.ic_action_appearance;
+		}
+
+		@Override
+		public int getDisabledIconId() {
+			return R.drawable.ic_action_appearance;
+		}
+	}
+
 	public static class OtherLocalRoutingParameter extends LocalRoutingParameter {
 
 		public static final String KEY = "OtherLocalRoutingParameter";
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/NavigationFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/NavigationFragment.java
index 5005b3b32c1..f707d709239 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/NavigationFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/NavigationFragment.java
@@ -146,7 +146,9 @@ public boolean onPreferenceClick(Preference preference) {
 		} else if (CUSTOMIZE_ROUTE_LINE.equals(prefId)) {
 			MapActivity mapActivity = getMapActivity();
 			if (mapActivity != null) {
-				RouteLineAppearanceFragment.showInstance(mapActivity.getSupportFragmentManager());
+				FragmentManager fragmentManager = mapActivity.getSupportFragmentManager();
+				ApplicationMode appMode = getSelectedAppMode();
+				RouteLineAppearanceFragment.showInstance(fragmentManager, appMode);
 			}
 		}
 		return false;
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/RouteLineAppearanceFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/RouteLineAppearanceFragment.java
index 6501a7cb21c..d03832d0549 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/RouteLineAppearanceFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/RouteLineAppearanceFragment.java
@@ -48,11 +48,14 @@ public class RouteLineAppearanceFragment extends ContextMenuScrollFragment
 
 	public static final String TAG = RouteLineAppearanceFragment.class.getName();
 
+	private static final String APP_MODE_KEY = "app_mode";
 	private static final String INIT_MAP_THEME = "init_map_theme";
 	private static final String SELECTED_MAP_THEME = "selected_map_theme";
 
 	private PreviewRouteLineInfo previewRouteLineInfo;
 
+	private ApplicationMode appMode;
+
 	private int toolbarHeightPx;
 	private DayNightMode initMapTheme;
 	private DayNightMode selectedMapTheme;
@@ -113,6 +116,7 @@ public boolean shouldShowMapControls(int menuState) {
 	public void onCreate(@Nullable Bundle savedInstanceState) {
 		super.onCreate(savedInstanceState);
 
+		setupAppMode(savedInstanceState);
 		toolbarHeightPx = getResources().getDimensionPixelSize(R.dimen.dashboard_map_toolbar);
 
 		if (savedInstanceState != null) {
@@ -121,7 +125,7 @@ public void onCreate(@Nullable Bundle savedInstanceState) {
 			selectedMapTheme = DayNightMode.valueOf(savedInstanceState.getString(SELECTED_MAP_THEME));
 		} else {
 			previewRouteLineInfo = createPreviewRouteLineInfo();
-			initMapTheme = requireSettings().DAYNIGHT_MODE.get();
+			initMapTheme = requireSettings().DAYNIGHT_MODE.getModeValue(appMode);
 			selectedMapTheme = initMapTheme;
 		}
 
@@ -132,19 +136,27 @@ public void handleOnBackPressed() {
 		});
 	}
 
+	private void setupAppMode(@Nullable Bundle savedInstanceState) {
+		if (appMode == null && savedInstanceState != null) {
+			appMode = ApplicationMode.valueOfStringKey(savedInstanceState.getString(APP_MODE_KEY), null);
+		}
+		if (appMode == null) {
+			appMode =  requireSettings().getApplicationMode();
+		}
+	}
+
 	private PreviewRouteLineInfo createPreviewRouteLineInfo() {
 		OsmandSettings settings = requireSettings();
 
-		int colorDay = settings.CUSTOM_ROUTE_COLOR_DAY.get();
-		int colorNight = settings.CUSTOM_ROUTE_COLOR_NIGHT.get();
-		ColoringType coloringType = settings.ROUTE_COLORING_TYPE.get();
-		String routeInfoAttribute = settings.ROUTE_INFO_ATTRIBUTE.get();
-		String widthKey = settings.ROUTE_LINE_WIDTH.get();
+		int colorDay = settings.CUSTOM_ROUTE_COLOR_DAY.getModeValue(appMode);
+		int colorNight = settings.CUSTOM_ROUTE_COLOR_NIGHT.getModeValue(appMode);
+		ColoringType coloringType = settings.ROUTE_COLORING_TYPE.getModeValue(appMode);
+		String routeInfoAttribute = settings.ROUTE_INFO_ATTRIBUTE.getModeValue(appMode);
+		String widthKey = settings.ROUTE_LINE_WIDTH.getModeValue(appMode);
 
 		PreviewRouteLineInfo previewRouteLineInfo =  new PreviewRouteLineInfo(colorDay, colorNight,
 				coloringType, routeInfoAttribute, widthKey);
 
-		ApplicationMode appMode = settings.getApplicationMode();
 		previewRouteLineInfo.setIconId(appMode.getNavigationIcon().getIconId());
 		previewRouteLineInfo.setIconColor(appMode.getProfileColor(isNightMode()));
 
@@ -298,11 +310,11 @@ private void setupButtons(View view) {
 	private void saveRouteLineAppearance() {
 		if (getMyApplication() != null) {
 			OsmandSettings settings = getMyApplication().getSettings();
-			settings.CUSTOM_ROUTE_COLOR_DAY.set(previewRouteLineInfo.getCustomColor(false));
-			settings.CUSTOM_ROUTE_COLOR_NIGHT.set(previewRouteLineInfo.getCustomColor(true));
-			settings.ROUTE_COLORING_TYPE.set(previewRouteLineInfo.getRouteColoringType());
-			settings.ROUTE_INFO_ATTRIBUTE.set(previewRouteLineInfo.getRouteInfoAttribute());
-			settings.ROUTE_LINE_WIDTH.set(previewRouteLineInfo.getWidth());
+			settings.CUSTOM_ROUTE_COLOR_DAY.setModeValue(appMode, previewRouteLineInfo.getCustomColor(false));
+			settings.CUSTOM_ROUTE_COLOR_NIGHT.setModeValue(appMode, previewRouteLineInfo.getCustomColor(true));
+			settings.ROUTE_COLORING_TYPE.setModeValue(appMode, previewRouteLineInfo.getRouteColoringType());
+			settings.ROUTE_INFO_ATTRIBUTE.setModeValue(appMode, previewRouteLineInfo.getRouteInfoAttribute());
+			settings.ROUTE_LINE_WIDTH.setModeValue(appMode, previewRouteLineInfo.getWidth());
 		}
 	}
 
@@ -421,15 +433,17 @@ private void setDrawInfoOnRouteLayer(@Nullable PreviewRouteLineInfo drawInfo) {
 	@Override
 	public void onSaveInstanceState(@NonNull Bundle outState) {
 		super.onSaveInstanceState(outState);
+		previewRouteLineInfo.saveToBundle(outState);
+		outState.putString(APP_MODE_KEY, appMode.getStringKey());
 		outState.putString(INIT_MAP_THEME, initMapTheme.name());
 		outState.putString(SELECTED_MAP_THEME, selectedMapTheme.name());
-		previewRouteLineInfo.saveToBundle(outState);
 	}
 
 	@Override
 	public void onDestroyView() {
 		super.onDestroyView();
 		exitAppearanceMode();
+		showHideMapRouteInfoMenu();
 	}
 
 	private void enterAppearanceMode() {
@@ -455,6 +469,16 @@ private void exitAppearanceMode() {
 		}
 	}
 
+	private void showHideMapRouteInfoMenu() {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			if (!mapActivity.isChangingConfigurations()) {
+				mapActivity.getMapRouteInfoMenu().finishRouteLineCustomization();
+			}
+			mapActivity.getMapRouteInfoMenu().showHideMenu();
+		}
+	}
+
 	private void updateCardsLayout() {
 		View mainView = getMainView();
 		if (mainView != null) {
@@ -498,9 +522,10 @@ private void updateColorItems() {
 		}
 	}
 
-	public static boolean showInstance(@NonNull FragmentManager fragmentManager) {
+	public static boolean showInstance(@NonNull FragmentManager fragmentManager, @Nullable ApplicationMode appMode) {
 		try {
 			RouteLineAppearanceFragment fragment = new RouteLineAppearanceFragment();
+			fragment.appMode = appMode;
 			fragmentManager.beginTransaction()
 					.replace(R.id.fragmentContainer, fragment, TAG)
 					.addToBackStack(TAG)
@@ -519,7 +544,7 @@ public void onMapThemeUpdated(@NonNull DayNightMode mapTheme) {
 	private void changeMapTheme(@NonNull DayNightMode mapTheme) {
 		OsmandApplication app = getMyApplication();
 		if (app != null) {
-			app.getSettings().DAYNIGHT_MODE.set(mapTheme);
+			app.getSettings().DAYNIGHT_MODE.setModeValue(appMode, mapTheme);
 			selectedMapTheme = mapTheme;
 		}
 	}
