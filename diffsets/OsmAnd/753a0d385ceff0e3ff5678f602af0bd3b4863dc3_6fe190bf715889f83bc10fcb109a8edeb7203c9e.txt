diff --git a/OsmAnd/src/net/osmand/plus/helpers/GpsFilterHelper.java b/OsmAnd/src/net/osmand/plus/helpers/GpsFilterHelper.java
index 5f90c17e3bf..8f14b5dbe76 100644
--- a/OsmAnd/src/net/osmand/plus/helpers/GpsFilterHelper.java
+++ b/OsmAnd/src/net/osmand/plus/helpers/GpsFilterHelper.java
@@ -17,6 +17,7 @@
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.Version;
+import net.osmand.util.Algorithms;
 import net.osmand.util.MapUtils;
 
 import java.util.ArrayList;
@@ -46,6 +47,8 @@ public class GpsFilterHelper {
 	private int leftPoints;
 	private int totalPoints;
 
+	private String lastSavedFilePath;
+
 	public GpsFilterHelper(@NonNull OsmandApplication app) {
 		this.app = app;
 		this.filteredSelectedGpxFile.filtered = true;
@@ -55,6 +58,8 @@ public void setSelectedGpxFile(@NonNull SelectedGpxFile selectedGpxFile) {
 		sourceSelectedGpxFile = selectedGpxFile;
 		filteredSelectedGpxFile.setJoinSegments(sourceSelectedGpxFile.isJoinSegments());
 
+		lastSavedFilePath = null;
+
 		smoothingFilter = new SmoothingFilter(app, selectedGpxFile);
 		speedFilter = new SpeedFilter(app, selectedGpxFile);
 		altitudeFilter = new AltitudeFilter(app, selectedGpxFile);
@@ -81,7 +86,19 @@ public boolean isSourceOfFilteredGpxFile(@NonNull SelectedGpxFile selectedGpxFil
 		return selectedGpxFile.equals(sourceSelectedGpxFile);
 	}
 
+	public void onSavedFile(String path) {
+		lastSavedFilePath = path;
+	}
+
+	public String getLastSavedFilePath() {
+		return lastSavedFilePath;
+	}
+
 	public void disableFilter() {
+		GPXFile sourceGpxFile = sourceSelectedGpxFile.getGpxFile();
+		if (Algorithms.isEmpty(sourceGpxFile.path)) {
+			app.getSelectedGpxHelper().selectGpxFile(sourceGpxFile, false, false);
+		}
 		sourceSelectedGpxFile = null;
 
 		filteredSelectedGpxFile.getModifiablePointsToDisplay().clear();
@@ -376,7 +393,7 @@ public boolean isRangeSupported() {
 
 		@Override
 		public boolean acceptPoint(@NonNull WptPt point, int pointIndex, double distanceToLastSurvivedPoint) {
-			return getSelectedMaxValue() == 0 || distanceToLastSurvivedPoint > getSelectedMaxValue();
+			return !isNeeded() || getSelectedMaxValue() == 0 || distanceToLastSurvivedPoint > getSelectedMaxValue();
 		}
 
 		@Override
@@ -451,7 +468,7 @@ public boolean isRangeSupported() {
 		@Override
 		public boolean acceptPoint(@NonNull WptPt point, int pointIndex, double distanceToLastSurvivedPoint) {
 			float speed = transformSpeed(analysis.speedData.get(pointIndex).speed);
-			return getSelectedMinValue() <= speed && speed <= getSelectedMaxValue();
+			return !isNeeded() || getSelectedMinValue() <= speed && speed <= getSelectedMaxValue();
 		}
 
 		@Override
@@ -538,7 +555,7 @@ public boolean isRangeSupported() {
 		@Override
 		public boolean acceptPoint(@NonNull WptPt point, int pointIndex, double distanceToLastSurvivedPoint) {
 			float altitude = analysis.elevationData.get(pointIndex).elevation;
-			return getSelectedMinValue() <= altitude && altitude <= getSelectedMaxValue();
+			return !isNeeded() || getSelectedMinValue() <= altitude && altitude <= getSelectedMaxValue();
 		}
 
 		@Override
@@ -617,7 +634,7 @@ public boolean isRangeSupported() {
 
 		@Override
 		public boolean acceptPoint(@NonNull WptPt point, int pointIndex, double distanceToLastSurvivedPoint) {
-			return point.hdop <= getSelectedMaxValue();
+			return !isNeeded() || point.hdop <= getSelectedMaxValue();
 		}
 
 		@Override
@@ -645,8 +662,10 @@ public String getFormattedValue(@NonNull Double value) {
 		@Override
 		public CharSequence getFilterTitle() {
 			String gpsPrecision = app.getString(R.string.gps_filter_precision);
-			String title = app.getString(R.string.ltr_or_rtl_combine_via_colon, gpsPrecision,
-					getFormattedValue(getSelectedMaxValue()));
+			String value = isNeeded()
+					? getFormattedValue(getSelectedMaxValue())
+					: app.getString(R.string.gpx_logging_no_data);
+			String title = app.getString(R.string.ltr_or_rtl_combine_via_colon, gpsPrecision, value);
 			return styleFilterTitle(title, gpsPrecision.length() + 1);
 		}
 
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
index c5acbbe1d47..2567700cade 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolFragment.java
@@ -69,6 +69,7 @@
 import net.osmand.plus.base.BaseOsmAndFragment;
 import net.osmand.plus.base.ContextMenuFragment.MenuState;
 import net.osmand.plus.helpers.AndroidUiHelper;
+import net.osmand.plus.helpers.GpsFilterHelper;
 import net.osmand.plus.mapcontextmenu.other.TrackDetailsMenu;
 import net.osmand.plus.measurementtool.GpxApproximationFragment.GpxApproximationFragmentListener;
 import net.osmand.plus.measurementtool.OptionsBottomSheetDialogFragment.OptionsFragmentListener;
@@ -94,6 +95,7 @@
 import net.osmand.plus.routepreparationmenu.cards.MapBaseCard;
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.track.GpsFilterFragment;
 import net.osmand.plus.track.TrackMenuFragment;
 import net.osmand.plus.views.layers.MapControlsLayer.MapControlsThemeInfoProvider;
 import net.osmand.plus.views.mapwidgets.MapInfoWidgetsFactory.TopToolbarController;
@@ -415,11 +417,12 @@ public void onClick(View view) {
 				if (mapActivity != null) {
 					boolean trackSnappedToRoad = !editingCtx.isApproximationNeeded();
 					boolean addNewSegmentAllowed = editingCtx.isAddNewSegmentAllowed();
+					boolean plainTrack = editingCtx.getPointsCount() > 0
+							&& !editingCtx.hasRoutePoints() && !editingCtx.hasRoute();
 					OptionsBottomSheetDialogFragment.showInstance(mapActivity.getSupportFragmentManager(),
 							MeasurementToolFragment.this,
 							trackSnappedToRoad, addNewSegmentAllowed,
-							editingCtx.getAppMode().getStringKey()
-					);
+							editingCtx.getAppMode().getStringKey(), plainTrack);
 				}
 			}
 		});
@@ -1107,7 +1110,43 @@ public void reverseRouteOnClick() {
 
 	@Override
 	public void gpsFilterOnClick() {
-		// todo gps
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			OsmandApplication app = requireMyApplication();
+			GPXFile sourceGpx = editingCtx.getGpxData() != null
+					? editingCtx.getGpxData().getGpxFile()
+					: new GPXFile(Version.getFullVersion(app));
+			GPXFile gpxFile = SaveGpxRouteAsyncTask.generateGpxFile(getMeasurementLayer(),
+					getSuggestedFileName(), sourceGpx, false, false);
+			if (editingCtx.getGpxData() != null) {
+				gpxFile.path = editingCtx.getGpxData().getGpxFile().path;
+			}
+
+			SelectedGpxFile selectedGpxFile = app.getSelectedGpxHelper().selectGpxFile(gpxFile, true, false);
+
+			hide();
+			AndroidUiHelper.setVisibility(mapActivity, View.GONE, R.id.snap_to_road_image_button,
+					R.id.map_ruler_container);
+			GpsFilterFragment.showInstance(mapActivity.getSupportFragmentManager(), selectedGpxFile, this);
+		}
+	}
+
+	public void onGpsFilterClosed() {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			updateSnapToRoadControls();
+			AndroidUiHelper.setVisibility(mapActivity, View.VISIBLE, R.id.map_ruler_container);
+			show();
+
+			GpsFilterHelper gpsFilterHelper = requireMyApplication().getGpsFilterHelper();
+			String path = gpsFilterHelper.getLastSavedFilePath();
+			if (!Algorithms.isEmpty(path)) {
+				editingCtx.clearSegments();
+				editingCtx.setChangesSaved();
+				GPXFile newGpxFile = GPXUtilities.loadGPXFile(new File(path));
+				addNewGpxData(newGpxFile);
+			}
+		}
 	}
 
 	@Override
@@ -1716,7 +1755,10 @@ private boolean isCurrentInfoType(@NonNull InfoType type) {
 	}
 
 	private String getSuggestedFileName() {
-		GpxData gpxData = editingCtx.getGpxData();
+		return getSuggestedFileName(requireMyApplication(), editingCtx.getGpxData());
+	}
+
+	public static String getSuggestedFileName(@NonNull OsmandApplication app, @Nullable GpxData gpxData) {
 		String displayedName = null;
 		if (gpxData != null) {
 			GPXFile gpxFile = gpxData.getGpxFile();
@@ -1728,7 +1770,7 @@ private String getSuggestedFileName() {
 		}
 		if (gpxData == null || displayedName == null) {
 			String suggestedName = new SimpleDateFormat("EEE dd MMM yyyy", Locale.US).format(new Date());
-			displayedName = FileUtils.createUniqueFileName(requireMyApplication(), suggestedName, GPX_INDEX_DIR, GPX_FILE_EXT);
+			displayedName = FileUtils.createUniqueFileName(app, suggestedName, GPX_INDEX_DIR, GPX_FILE_EXT);
 		} else {
 			displayedName = Algorithms.getFileNameWithoutExtension(new File(gpxData.getGpxFile().path).getName());
 		}
@@ -2216,11 +2258,9 @@ public void onCancelGpxApproximation() {
 	private void enterApproximationMode(MapActivity mapActivity) {
 		MeasurementToolLayer layer = getMeasurementLayer();
 		if (layer != null) {
-			FragmentManager manager = mapActivity.getSupportFragmentManager();
-			manager.beginTransaction()
-					.hide(this)
-					.commitAllowingStateLoss();
 			layer.setTapsDisabled(true);
+			hide();
+			FragmentManager manager = mapActivity.getSupportFragmentManager();
 			SnapTrackWarningFragment.showInstance(manager, this);
 			AndroidUiHelper.setVisibility(mapActivity, View.GONE, R.id.map_ruler_container);
 		}
@@ -2231,15 +2271,32 @@ private void exitApproximationMode() {
 		MeasurementToolLayer layer = getMeasurementLayer();
 		MapActivity mapActivity = getMapActivity();
 		if (layer != null && mapActivity != null) {
-			FragmentManager manager = mapActivity.getSupportFragmentManager();
-			manager.beginTransaction()
-					.show(this)
-					.commitAllowingStateLoss();
 			layer.setTapsDisabled(false);
+			show();
 			AndroidUiHelper.setVisibility(mapActivity, View.VISIBLE, R.id.map_ruler_container);
 		}
 	}
 
+	private void show() {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			mapActivity.getSupportFragmentManager()
+					.beginTransaction()
+					.show(this)
+					.commitAllowingStateLoss();
+		}
+	}
+
+	private void hide() {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			mapActivity.getSupportFragmentManager()
+					.beginTransaction()
+					.hide(this)
+					.commitAllowingStateLoss();
+		}
+	}
+
 	public boolean isNightModeForMapControls() {
 		return nightMode;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolLayer.java b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolLayer.java
index 06765107284..0295a614e65 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolLayer.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolLayer.java
@@ -263,6 +263,10 @@ void selectPoint(int position) {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tb, DrawSettings settings) {
+		if (shouldPauseDrawing()) {
+			return;
+		}
+
 		if (inMeasurementMode) {
 			lineAttrs.updatePaints(view.getApplication(), settings, tb);
 
@@ -308,6 +312,10 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tb, DrawSettings
 
 	@Override
 	public void onDraw(Canvas canvas, RotatedTileBox tb, DrawSettings settings) {
+		if (shouldPauseDrawing()) {
+			return;
+		}
+
 		if (inMeasurementMode) {
 			lineAttrs.updatePaints(view.getApplication(), settings, tb);
 			if (!editingCtx.isInApproximationMode()) {
@@ -350,6 +358,10 @@ public void onDraw(Canvas canvas, RotatedTileBox tb, DrawSettings settings) {
 		}
 	}
 
+	private boolean shouldPauseDrawing() {
+		return getApplication().getGpsFilterHelper().isEnabled();
+	}
+
 	private boolean isInTileBox(RotatedTileBox tb, WptPt point) {
 		QuadRect latLonBounds = tb.getLatLonBounds();
 		return point.getLatitude() >= latLonBounds.bottom && point.getLatitude() <= latLonBounds.top
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/OptionsBottomSheetDialogFragment.java b/OsmAnd/src/net/osmand/plus/measurementtool/OptionsBottomSheetDialogFragment.java
index 36d8bf7f423..bb8a0f9f479 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/OptionsBottomSheetDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/OptionsBottomSheetDialogFragment.java
@@ -11,6 +11,7 @@
 import androidx.fragment.app.Fragment;
 import androidx.fragment.app.FragmentManager;
 
+import net.osmand.AndroidUtils;
 import net.osmand.PlatformUtil;
 import net.osmand.plus.R;
 import net.osmand.plus.base.MenuBottomSheetDialogFragment;
@@ -32,6 +33,7 @@ public class OptionsBottomSheetDialogFragment extends MenuBottomSheetDialogFragm
 	public static final String TRACK_SNAPPED_TO_ROAD_KEY = "track_snapped_to_road";
 	public static final String SNAP_TO_ROAD_APP_MODE_KEY = "snap_to_road_app_mode";
 	public static final String ADD_NEW_SEGMENT_ALLOWED_KEY = "add_new_segment_allowed";
+	public static final String PLAIN_TRACK_KEY = "plain_track";
 
 	private ApplicationMode routeAppMode;
 
@@ -40,10 +42,12 @@ public void createMenuItems(Bundle savedInstanceState) {
 		Bundle args = getArguments();
 		boolean trackSnappedToRoad = false;
 		boolean addNewSegmentAllowed = false;
+		boolean plainTrack = false;
 		if (args != null) {
 			trackSnappedToRoad = args.getBoolean(TRACK_SNAPPED_TO_ROAD_KEY);
 			addNewSegmentAllowed = args.getBoolean(ADD_NEW_SEGMENT_ALLOWED_KEY);
 			routeAppMode = ApplicationMode.valueOfStringKey(args.getString(SNAP_TO_ROAD_APP_MODE_KEY), null);
+			plainTrack = args.getBoolean(PLAIN_TRACK_KEY);
 		}
 
 		items.add(new TitleItem(getString(R.string.shared_string_options)));
@@ -176,19 +180,21 @@ public void onClick(View v) {
 				.create();
 		items.add(reverse);
 
-		BaseBottomSheetItem gpsFilter = new Builder()
-				.setIcon(getContentIcon(R.drawable.ic_action_filter))
-				.setTitle(getString(R.string.shared_string_gps_filter))
-				.setLayoutId(R.layout.bottom_sheet_item_simple_pad_32dp)
-				.setOnClickListener(v -> {
-					Fragment fragment = getTargetFragment();
-					if (fragment instanceof OptionsFragmentListener) {
-						((OptionsFragmentListener) fragment).gpsFilterOnClick();
-					}
-					dismiss();
-				})
-				.create();
-		items.add(gpsFilter);
+		if (plainTrack) {
+			BaseBottomSheetItem gpsFilter = new Builder()
+					.setIcon(getContentIcon(R.drawable.ic_action_filter))
+					.setTitle(getString(R.string.shared_string_gps_filter))
+					.setLayoutId(R.layout.bottom_sheet_item_simple_pad_32dp)
+					.setOnClickListener(v -> {
+						Fragment fragment = getTargetFragment();
+						if (fragment instanceof OptionsFragmentListener) {
+							((OptionsFragmentListener) fragment).gpsFilterOnClick();
+						}
+						dismiss();
+					})
+					.create();
+			items.add(gpsFilter);
+		}
 
 		items.add(new OptionsDividerItem(getContext()));
 
@@ -238,20 +244,18 @@ public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceStat
 	}
 
 	public static void showInstance(@NonNull FragmentManager fm, Fragment targetFragment,
-									boolean trackSnappedToRoad, boolean addNewSegmentAllowed, String routeAppModeStringKey) {
-		try {
-			if (!fm.isStateSaved()) {
-				OptionsBottomSheetDialogFragment fragment = new OptionsBottomSheetDialogFragment();
-				Bundle args = new Bundle();
-				args.putBoolean(TRACK_SNAPPED_TO_ROAD_KEY, trackSnappedToRoad);
-				args.putBoolean(ADD_NEW_SEGMENT_ALLOWED_KEY, addNewSegmentAllowed);
-				args.putString(SNAP_TO_ROAD_APP_MODE_KEY, routeAppModeStringKey);
-				fragment.setArguments(args);
-				fragment.setTargetFragment(targetFragment,0);
-				fragment.show(fm, TAG);
-			}
-		} catch (RuntimeException e) {
-			LOG.error("showInstance", e);
+									boolean trackSnappedToRoad, boolean addNewSegmentAllowed,
+	                                String routeAppModeStringKey, boolean plainTrack) {
+		if (AndroidUtils.isFragmentCanBeAdded(fm, TAG)) {
+			OptionsBottomSheetDialogFragment fragment = new OptionsBottomSheetDialogFragment();
+			Bundle args = new Bundle();
+			args.putBoolean(TRACK_SNAPPED_TO_ROAD_KEY, trackSnappedToRoad);
+			args.putBoolean(ADD_NEW_SEGMENT_ALLOWED_KEY, addNewSegmentAllowed);
+			args.putString(SNAP_TO_ROAD_APP_MODE_KEY, routeAppModeStringKey);
+			args.putBoolean(PLAIN_TRACK_KEY, plainTrack);
+			fragment.setArguments(args);
+			fragment.setTargetFragment(targetFragment,0);
+			fragment.show(fm, TAG);
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/SaveGpxRouteAsyncTask.java b/OsmAnd/src/net/osmand/plus/measurementtool/SaveGpxRouteAsyncTask.java
index a098db86933..174e743e828 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/SaveGpxRouteAsyncTask.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/SaveGpxRouteAsyncTask.java
@@ -5,6 +5,7 @@
 import android.os.AsyncTask;
 
 import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
 
 import net.osmand.AndroidUtils;
 import net.osmand.FileUtils;
@@ -74,12 +75,11 @@ protected Exception doInBackground(Void... voids) {
         MapActivity mapActivity = (MapActivity) fragment.getActivity();
         OsmandApplication app = mapActivity.getMyApplication();
         MeasurementToolLayer measurementLayer = mapActivity.getMapLayers().getMeasurementToolLayer();
-        MeasurementEditingContext editingCtx = fragment.getEditingCtx();
         Exception res = null;
         if (gpxFile == null) {
             String fileName = outFile.getName();
             String trackName = fileName.substring(0, fileName.length() - GPX_FILE_EXT.length());
-            GPXFile gpx = generateGpxFile(measurementLayer, editingCtx, trackName, new GPXFile(Version.getFullVersion(app)));
+            GPXFile gpx = generateGpxFile(measurementLayer, trackName, new GPXFile(Version.getFullVersion(app)));
             res = GPXUtilities.writeGpxFile(outFile, gpx);
             gpx.path = outFile.getAbsolutePath();
             savedGpxFile = gpx;
@@ -89,7 +89,7 @@ protected Exception doInBackground(Void... voids) {
         } else {
             backupFile = FileUtils.backupFile(app, outFile);
             String trackName = Algorithms.getFileNameWithoutExtension(outFile);
-            GPXFile gpx = generateGpxFile(measurementLayer, editingCtx, trackName, gpxFile);
+            GPXFile gpx = generateGpxFile(measurementLayer, trackName, gpxFile);
             if (gpxFile.metadata != null) {
                 gpx.metadata = new Metadata();
                 gpx.metadata.getExtensionsToWrite().putAll(gpxFile.metadata.getExtensionsToRead());
@@ -109,9 +109,17 @@ protected Exception doInBackground(Void... voids) {
         return res;
     }
 
-    private GPXFile generateGpxFile(MeasurementToolLayer measurementLayer, MeasurementEditingContext editingCtx,
-                                    String trackName, @NonNull GPXFile gpx) {
+    private GPXFile generateGpxFile(@NonNull MeasurementToolLayer measurementLayer, String trackName, @NonNull GPXFile gpx) {
+        return generateGpxFile(measurementLayer, trackName, gpx, simplified, addToTrack);
+    }
+
+    public static GPXFile generateGpxFile(@Nullable MeasurementToolLayer measurementLayer,
+                                          @NonNull String trackName,
+                                          @NonNull GPXFile gpx,
+                                          boolean simplified,
+                                          boolean addToTrack) {
         if (measurementLayer != null) {
+            MeasurementEditingContext editingCtx = measurementLayer.getEditingCtx();
             List<TrkSegment> before = editingCtx.getBeforeTrkSegmentLine();
             List<TrkSegment> after = editingCtx.getAfterTrkSegmentLine();
             if (simplified) {
diff --git a/OsmAnd/src/net/osmand/plus/track/GpsFilterBaseCard.java b/OsmAnd/src/net/osmand/plus/track/GpsFilterBaseCard.java
index 8819cc302db..2adc0dba584 100644
--- a/OsmAnd/src/net/osmand/plus/track/GpsFilterBaseCard.java
+++ b/OsmAnd/src/net/osmand/plus/track/GpsFilterBaseCard.java
@@ -8,6 +8,7 @@
 
 import net.osmand.AndroidUtils;
 import net.osmand.GPXUtilities.GPXFile;
+import net.osmand.IndexConstants;
 import net.osmand.plus.ColorUtilities;
 import net.osmand.plus.GpxSelectionHelper.SelectedGpxFile;
 import net.osmand.plus.R;
@@ -18,6 +19,7 @@
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.helpers.GpsFilterHelper;
 import net.osmand.plus.helpers.GpsFilterHelper.GpsFilterListener;
+import net.osmand.plus.measurementtool.MeasurementToolFragment;
 import net.osmand.plus.measurementtool.SaveAsNewTrackBottomSheetDialogFragment;
 import net.osmand.plus.measurementtool.SaveAsNewTrackBottomSheetDialogFragment.SaveAsNewTrackFragmentListener;
 import net.osmand.plus.routepreparationmenu.cards.MapBaseCard;
@@ -90,10 +92,13 @@ private void onActionButtonClick(@NonNull ActionButton actionButton) {
 	private void saveAsCopy() {
 		String sourceFilePath = gpsFilterHelper.getFilteredSelectedGpxFile().getGpxFile().path;
 		String sourceFileName = Algorithms.getFileNameWithoutExtension(Algorithms.getFileWithoutDirs(sourceFilePath));
-		String destFileName = sourceFileName + "-copy";
+		String finalFileName = Algorithms.isEmpty(sourceFileName)
+				? MeasurementToolFragment.getSuggestedFileName(app, null)
+				: sourceFileName;
+		String destFileName = finalFileName + "-copy";
 		if (target instanceof SaveAsNewTrackFragmentListener) {
 			SaveAsNewTrackBottomSheetDialogFragment.showInstance(mapActivity.getSupportFragmentManager(),
-					target, null, sourceFileName, destFileName, false, true);
+					target, null, finalFileName, destFileName, false, true);
 		}
 	}
 
@@ -104,7 +109,10 @@ private void saveIntoFile() {
 			sourceSelectedGpxFile.setGpxFile(newGpxFile, app);
 			gpsFilterHelper.setSelectedGpxFile(sourceSelectedGpxFile);
 
-			File outFile = new File(newGpxFile.path);
+			String path = Algorithms.isEmpty(newGpxFile.path)
+					? app.getAppPath(IndexConstants.GPX_INDEX_DIR) + MeasurementToolFragment.getSuggestedFileName(app, null)
+					: newGpxFile.path;
+			File outFile = new File(path);
 			new SaveGpxAsyncTask(outFile, newGpxFile, new SaveGpxListener() {
 
 				@Override
@@ -113,10 +121,13 @@ public void gpxSavingStarted() {
 
 				@Override
 				public void gpxSavingFinished(Exception errorMessage) {
-					String toastMessage = errorMessage == null
-							? MessageFormat.format(app.getString(R.string.gpx_saved_sucessfully), newGpxFile.path)
-							: errorMessage.getMessage();
-					app.showToastMessage(toastMessage);
+					if (app != null) {
+						String toastMessage = errorMessage == null
+								? MessageFormat.format(app.getString(R.string.gpx_saved_sucessfully), newGpxFile.path)
+								: errorMessage.getMessage();
+						app.showToastMessage(toastMessage);
+					}
+					gpsFilterHelper.onSavedFile(newGpxFile.path);
 				}
 			}).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
 
diff --git a/OsmAnd/src/net/osmand/plus/track/GpsFilterFragment.java b/OsmAnd/src/net/osmand/plus/track/GpsFilterFragment.java
index cd76e8a383f..a44b2f55d38 100644
--- a/OsmAnd/src/net/osmand/plus/track/GpsFilterFragment.java
+++ b/OsmAnd/src/net/osmand/plus/track/GpsFilterFragment.java
@@ -119,14 +119,16 @@ public void handleOnBackPressed() {
 	}
 
 	private void restoreSelectedGpxFile(String gpxFilePath) {
-		TrackMenuFragment.loadSelectedGpxFile(requireMapActivity(), gpxFilePath, false, (gpxFile) -> {
-			selectedGpxFile = gpxFile;
-			gpsFilterHelper.setSelectedGpxFile(gpxFile);
-			if (view != null) {
-				initContent();
-			}
-			return true;
-		});
+		if (!Algorithms.isEmpty(gpxFilePath)) {
+			TrackMenuFragment.loadSelectedGpxFile(requireMapActivity(), gpxFilePath, false, (gpxFile) -> {
+				selectedGpxFile = gpxFile;
+				setFileToFilter(selectedGpxFile);
+				if (view != null) {
+					initContent();
+				}
+				return true;
+			});
+		}
 	}
 
 	@Override
@@ -139,13 +141,19 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 				updateCardsLayout();
 			}
 			if (selectedGpxFile != null) {
-				gpsFilterHelper.setSelectedGpxFile(selectedGpxFile);
+				setFileToFilter(selectedGpxFile);
 				initContent();
 			}
 		}
 		return view;
 	}
 
+	private void setFileToFilter(@NonNull SelectedGpxFile selectedGpxFile) {
+		if (!selectedGpxFile.equals(gpsFilterHelper.getSourceSelectedGpxFile())) {
+			gpsFilterHelper.setSelectedGpxFile(selectedGpxFile);
+		}
+	}
+
 	private void initContent() {
 		updateStatusBarColor();
 		setupToolbar();
@@ -253,7 +261,6 @@ public void onSaveInstanceState(@NonNull Bundle outState) {
 	public void onDestroyView() {
 		super.onDestroyView();
 		exitGpsFilterMode();
-		gpsFilterHelper.disableFilter();
 	}
 
 	private void enterGpsFilterMode() {
@@ -417,6 +424,15 @@ private void onGpxSavingFinished(GPXFile gpxFile, Exception error, boolean showO
 		}
 	}
 
+	@Override
+	public void dismiss() {
+		super.dismiss();
+		gpsFilterHelper.disableFilter();
+		if (getTargetFragment() instanceof MeasurementToolFragment) {
+			((MeasurementToolFragment) getTargetFragment()).onGpsFilterClosed();
+		}
+	}
+
 	public static boolean showInstance(@NonNull FragmentManager fragmentManager,
 	                                   @NonNull SelectedGpxFile selectedGpxFile,
 	                                   @NonNull Fragment target) {
diff --git a/OsmAnd/src/net/osmand/plus/track/GpsFiltersCard.java b/OsmAnd/src/net/osmand/plus/track/GpsFiltersCard.java
index 1662361cad3..0329372a629 100644
--- a/OsmAnd/src/net/osmand/plus/track/GpsFiltersCard.java
+++ b/OsmAnd/src/net/osmand/plus/track/GpsFiltersCard.java
@@ -87,6 +87,7 @@ private void setupFilter(View container, GpsFilter filter) {
 		AppCompatImageView upDownButton = container.findViewById(R.id.up_down_button);
 
 		if (!filter.isNeeded()) {
+			updateDisplayedFilterNumbers(container, filter);
 			updateUpDownButton(upDownButton, false);
 			AndroidUiHelper.updateVisibility(content, false);
 			return;
