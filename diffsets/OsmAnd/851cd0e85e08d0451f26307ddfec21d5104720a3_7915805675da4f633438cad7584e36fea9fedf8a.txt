diff --git a/OsmAnd/res/drawable/bg_widget_type_disconnected_icon_dark.xml b/OsmAnd/res/drawable/bg_widget_type_disconnected_icon_dark.xml
new file mode 100644
index 00000000000..f582d1e529c
--- /dev/null
+++ b/OsmAnd/res/drawable/bg_widget_type_disconnected_icon_dark.xml
@@ -0,0 +1,9 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+	android:width="56dp"
+	android:height="56dp"
+	android:viewportWidth="56"
+	android:viewportHeight="56">
+	<path
+		android:fillColor="#303436"
+		android:pathData="M6,0L50,0A6,6 0,0 1,56 6L56,50A6,6 0,0 1,50 56L6,56A6,6 0,0 1,0 50L0,6A6,6 0,0 1,6 0z" />
+</vector>
diff --git a/OsmAnd/res/drawable/bg_widget_type_disconnected_icon_light.xml b/OsmAnd/res/drawable/bg_widget_type_disconnected_icon_light.xml
new file mode 100644
index 00000000000..2b7d91f1d11
--- /dev/null
+++ b/OsmAnd/res/drawable/bg_widget_type_disconnected_icon_light.xml
@@ -0,0 +1,9 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+	android:width="56dp"
+	android:height="56dp"
+	android:viewportWidth="56"
+	android:viewportHeight="56">
+	<path
+		android:fillColor="#F0F0F0"
+		android:pathData="M6,0L50,0A6,6 0,0 1,56 6L56,50A6,6 0,0 1,50 56L6,56A6,6 0,0 1,0 50L0,6A6,6 0,0 1,6 0z" />
+</vector>
diff --git a/OsmAnd/res/drawable/bg_widget_type_icon.xml b/OsmAnd/res/drawable/bg_widget_type_icon.xml
deleted file mode 100644
index df1d1e203bd..00000000000
--- a/OsmAnd/res/drawable/bg_widget_type_icon.xml
+++ /dev/null
@@ -1,9 +0,0 @@
-<vector xmlns:android="http://schemas.android.com/apk/res/android"
-    android:width="56dp"
-    android:height="56dp"
-    android:viewportWidth="56"
-    android:viewportHeight="56">
-    <path
-        android:fillColor="#F0F0F0"
-        android:pathData="M6,0L50,0A6,6 0,0 1,56 6L56,50A6,6 0,0 1,50 56L6,56A6,6 0,0 1,0 50L0,6A6,6 0,0 1,6 0z" />
-</vector>
diff --git a/OsmAnd/res/drawable/bg_widget_type_icon_dark.xml b/OsmAnd/res/drawable/bg_widget_type_icon_dark.xml
new file mode 100644
index 00000000000..e9ee1a628a5
--- /dev/null
+++ b/OsmAnd/res/drawable/bg_widget_type_icon_dark.xml
@@ -0,0 +1,9 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+	android:width="56dp"
+	android:height="56dp"
+	android:viewportWidth="56"
+	android:viewportHeight="56">
+	<path
+		android:fillColor="#4D300E"
+		android:pathData="M6,0L50,0A6,6 0,0 1,56 6L56,50A6,6 0,0 1,50 56L6,56A6,6 0,0 1,0 50L0,6A6,6 0,0 1,6 0z" />
+</vector>
diff --git a/OsmAnd/res/drawable/bg_widget_type_icon_light.xml b/OsmAnd/res/drawable/bg_widget_type_icon_light.xml
new file mode 100644
index 00000000000..1a45501f083
--- /dev/null
+++ b/OsmAnd/res/drawable/bg_widget_type_icon_light.xml
@@ -0,0 +1,9 @@
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+	android:width="56dp"
+	android:height="56dp"
+	android:viewportWidth="56"
+	android:viewportHeight="56">
+	<path
+		android:fillColor="#DEEBFF"
+		android:pathData="M6,0L50,0A6,6 0,0 1,56 6L56,50A6,6 0,0 1,50 56L6,56A6,6 0,0 1,0 50L0,6A6,6 0,0 1,6 0z" />
+</vector>
diff --git a/OsmAnd/res/layout/device_characteristic_item.xml b/OsmAnd/res/layout/device_characteristic_item.xml
index cdf64ebfc65..0213e34da0a 100644
--- a/OsmAnd/res/layout/device_characteristic_item.xml
+++ b/OsmAnd/res/layout/device_characteristic_item.xml
@@ -1,34 +1,50 @@
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    android:gravity="center_vertical"
-    android:paddingStart="@dimen/content_padding"
-    android:paddingLeft="@dimen/content_padding"
-    android:paddingTop="@dimen/content_padding_half"
-    android:paddingEnd="@dimen/content_padding"
-    android:paddingRight="@dimen/content_padding"
-    android:paddingBottom="@dimen/content_padding_half">
+	xmlns:tools="http://schemas.android.com/tools"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content"
+	android:orientation="vertical"
+	android:paddingStart="@dimen/content_padding"
+	android:paddingLeft="@dimen/content_padding">
 
-    <TextView
-        android:id="@+id/title"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_gravity="center_vertical"
-        android:layout_weight="1"
-        android:ellipsize="end"
-        android:textAppearance="@style/TextAppearance.ListItemTitle"
-        tools:text="Title" />
+	<LinearLayout
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:gravity="center_vertical"
+		android:orientation="horizontal"
+		android:paddingTop="@dimen/content_padding_half"
+		android:paddingEnd="@dimen/content_padding"
+		android:paddingRight="@dimen/content_padding"
+		android:paddingBottom="@dimen/content_padding_half">
 
-    <TextView
-        android:id="@+id/value"
-        android:layout_width="0dp"
-        android:layout_height="wrap_content"
-        android:layout_gravity="center_vertical"
-        android:layout_weight="1"
-        android:gravity="right"
-        android:textAppearance="@style/TextAppearance.ListItemTitle"
-        tools:text="20 km/h" />
+		<TextView
+			android:id="@+id/title"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:layout_gravity="center_vertical"
+			android:layout_weight="1"
+			android:ellipsize="end"
+			android:paddingTop="@dimen/content_padding_half"
+			android:paddingBottom="@dimen/content_padding_half"
+			android:textColor="?android:textColorSecondary"
+			android:textSize="@dimen/default_list_text_size"
+			tools:text="Title" />
+
+		<TextView
+			android:id="@+id/value"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:layout_gravity="center_vertical"
+			android:layout_weight="1"
+			android:gravity="right"
+			android:paddingTop="@dimen/content_padding_half"
+			android:paddingBottom="@dimen/content_padding_half"
+			android:textColor="?android:textColorSecondary"
+			android:textSize="@dimen/default_list_text_size"
+			tools:text="20 km/h" />
+
+	</LinearLayout>
+
+	<include layout="@layout/divider" />
 
 </LinearLayout>
diff --git a/OsmAnd/res/layout/fragment_ant_plus_sensors_list.xml b/OsmAnd/res/layout/fragment_ant_plus_sensors_list.xml
index 75e75b31405..45930f741c1 100644
--- a/OsmAnd/res/layout/fragment_ant_plus_sensors_list.xml
+++ b/OsmAnd/res/layout/fragment_ant_plus_sensors_list.xml
@@ -4,7 +4,7 @@
 	android:layout_width="match_parent"
 	android:layout_height="match_parent"
 	android:background="?attr/bg_color"
-	android:fitsSystemWindows="true">
+	android:fitsSystemWindows="false">
 
 	<com.google.android.material.appbar.AppBarLayout
 		android:id="@+id/appbar"
diff --git a/OsmAnd/res/layout/fragment_external_device_details.xml b/OsmAnd/res/layout/fragment_external_device_details.xml
index 71ef68c6e0a..fee2fa99045 100644
--- a/OsmAnd/res/layout/fragment_external_device_details.xml
+++ b/OsmAnd/res/layout/fragment_external_device_details.xml
@@ -41,16 +41,15 @@
 					android:id="@+id/widget_icon"
 					android:layout_width="wrap_content"
 					android:layout_height="wrap_content"
-					android:layout_margin="@dimen/content_padding"
-					android:background="@drawable/bg_widget_type_icon"
+					android:layout_marginLeft="@dimen/content_padding"
+					android:layout_marginRight="@dimen/content_padding"
+					android:background="@drawable/bg_widget_type_icon_light"
 					android:scaleType="center"
 					tools:src="@drawable/widget_sensor_distance_day" />
 
 				<LinearLayout
 					android:layout_width="match_parent"
 					android:layout_height="match_parent"
-					android:layout_marginTop="@dimen/content_padding"
-					android:layout_marginBottom="@dimen/content_padding"
 					android:orientation="vertical">
 
 					<TextView
@@ -63,7 +62,7 @@
 
 					<LinearLayout
 						android:layout_width="wrap_content"
-						android:layout_height="match_parent"
+						android:layout_height="0dp"
 						android:layout_weight="1"
 						android:orientation="horizontal">
 
@@ -117,7 +116,18 @@
 						android:paddingRight="@dimen/content_padding_small"
 						android:textSize="@dimen/default_desc_text_size"
 						osmand:typeface="@string/font_roboto_medium"
-						tools:text="Pair" />
+						tools:text="Pair"
+						tools:visibility="gone" />
+
+					<ProgressBar
+						android:id="@+id/progress_bar"
+						style="?android:attr/progressBarStyleHorizontal"
+						android:layout_width="120dp"
+						android:layout_height="4dp"
+						android:layout_gravity="center"
+						android:indeterminate="true"
+						android:visibility="gone"
+						tools:visibility="visible" />
 
 				</FrameLayout>
 			</FrameLayout>
@@ -167,6 +177,8 @@
 
 			</LinearLayout>
 
+			<include layout="@layout/divider" />
+
 			<LinearLayout
 				android:layout_width="match_parent"
 				android:layout_height="wrap_content"
diff --git a/OsmAnd/res/layout/item_external_device.xml b/OsmAnd/res/layout/item_external_device.xml
index 59069fde614..80cafbf1e0d 100644
--- a/OsmAnd/res/layout/item_external_device.xml
+++ b/OsmAnd/res/layout/item_external_device.xml
@@ -78,7 +78,8 @@
 					android:layout_width="@dimen/icon_size_double"
 					android:layout_height="@dimen/icon_size_double"
 					android:layout_gravity="center_vertical"
-					android:layout_marginHorizontal="@dimen/content_padding"
+					android:layout_marginHorizontal="@dimen/text_margin_small"
+					android:contentDescription="@string/shared_string_menu"
 					android:scaleType="center"
 					android:src="@drawable/ic_overflow_menu_white"
 					android:tint="?attr/secondary_icon_color"
diff --git a/OsmAnd/res/layout/no_bluetooth_view.xml b/OsmAnd/res/layout/no_bluetooth_view.xml
index 1e95c02ac84..da3cc0bd79e 100644
--- a/OsmAnd/res/layout/no_bluetooth_view.xml
+++ b/OsmAnd/res/layout/no_bluetooth_view.xml
@@ -42,12 +42,12 @@
 		android:layout_width="wrap_content"
 		android:layout_height="wrap_content"
 		android:layout_marginStart="@dimen/content_padding_small"
-		android:layout_marginTop="@dimen/content_padding"
+		android:layout_marginTop="@dimen/content_padding_small"
 		android:layout_marginEnd="@dimen/content_padding_small"
 		android:gravity="center_horizontal"
 		android:lineSpacingExtra="5sp"
 		android:text="@string/ant_plus_bluetooth_off_description"
-		android:textColor="?android:textColor"
+		android:textColor="?android:textColorSecondary"
 		android:textSize="@dimen/default_desc_text_size"
 		osmand:layout_constraintLeft_toLeftOf="parent"
 		osmand:layout_constraintRight_toRightOf="parent"
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/DeviceType.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/DeviceType.java
index fc570788941..7d59e22c478 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/DeviceType.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/DeviceType.java
@@ -7,27 +7,30 @@
 
 public enum DeviceType {
 
-	ANT_HEART_RATE(R.string.map_widget_ant_heart_rate, R.drawable.widget_sensor_heart_rate_day, R.drawable.widget_sensor_heart_rate_night),
-	ANT_BICYCLE_POWER(R.string.map_widget_ant_bicycle_power, R.drawable.widget_sensor_bicycle_power_day, R.drawable.widget_sensor_bicycle_power_night),
-	ANT_BICYCLE_SC(R.string.bicycle_scd_device_name, R.drawable.widget_sensor_cadence_day, R.drawable.widget_sensor_cadence_night),
-	ANT_BICYCLE_SD(R.string.bicycle_scd_device_name, R.drawable.widget_sensor_cadence_day, R.drawable.widget_sensor_cadence_night),
+	ANT_HEART_RATE(R.string.map_widget_ant_heart_rate, R.drawable.ic_action_sensor_heart_rate_outlined, R.drawable.widget_sensor_heart_rate_day, R.drawable.widget_sensor_heart_rate_night),
+	ANT_BICYCLE_POWER(R.string.map_widget_ant_bicycle_power, R.drawable.ic_action_sensor_bicycle_power_outlined, R.drawable.widget_sensor_bicycle_power_day, R.drawable.widget_sensor_bicycle_power_night),
+	ANT_BICYCLE_SC(R.string.bicycle_scd_device_name, R.drawable.ic_action_sensor_cadence_outlined, R.drawable.widget_sensor_cadence_day, R.drawable.widget_sensor_cadence_night),
+	ANT_BICYCLE_SD(R.string.bicycle_scd_device_name, R.drawable.ic_action_sensor_cadence_outlined, R.drawable.widget_sensor_cadence_day, R.drawable.widget_sensor_cadence_night),
 
-	BLE_BATTERY(R.string.map_widget_battery, R.drawable.widget_battery_day, R.drawable.widget_battery_night),
-	BLE_TEMPERATURE(R.string.map_settings_weather_temp, R.drawable.widget_weather_temperature_day, R.drawable.widget_weather_temperature_night),
-	BLE_HEART_RATE(R.string.map_widget_ant_heart_rate, R.drawable.widget_sensor_heart_rate_day, R.drawable.widget_sensor_heart_rate_night),
-	BLE_BLOOD_PRESSURE(R.string.external_device_blood_pressure, R.drawable.widget_sensor_heart_rate_day, R.drawable.widget_sensor_heart_rate_night),
-	BLE_BICYCLE_SCD(R.string.bicycle_scd_device_name, R.drawable.widget_sensor_cadence_day, R.drawable.widget_sensor_cadence_night),
-	BLE_RUNNING_SCDS(R.string.running_scds_device_name, R.drawable.widget_sensor_cadence_day, R.drawable.widget_sensor_cadence_night);
+	BLE_BATTERY(R.string.map_widget_battery, R.drawable.widget_battery_day, R.drawable.widget_battery_day, R.drawable.widget_battery_night),
+	BLE_TEMPERATURE(R.string.map_settings_weather_temp, R.drawable.ic_action_thermometer, R.drawable.widget_weather_temperature_day, R.drawable.widget_weather_temperature_night),
+	BLE_HEART_RATE(R.string.map_widget_ant_heart_rate, R.drawable.ic_action_sensor_heart_rate_outlined, R.drawable.widget_sensor_heart_rate_day, R.drawable.widget_sensor_heart_rate_night),
+	BLE_BLOOD_PRESSURE(R.string.external_device_blood_pressure, R.drawable.ic_action_sensor_heart_rate_outlined, R.drawable.widget_sensor_heart_rate_day, R.drawable.widget_sensor_heart_rate_night),
+	BLE_BICYCLE_SCD(R.string.bicycle_scd_device_name, R.drawable.ic_action_sensor_cadence_outlined, R.drawable.widget_sensor_cadence_day, R.drawable.widget_sensor_cadence_night),
+	BLE_RUNNING_SCDS(R.string.running_scds_device_name, R.drawable.ic_action_sensor_cadence_outlined, R.drawable.widget_sensor_cadence_day, R.drawable.widget_sensor_cadence_night);
 
 	@StringRes
 	public final int titleId;
 	@DrawableRes
+	public final int disconnectedIconId;
+	@DrawableRes
 	public final int dayIconId;
 	@DrawableRes
 	public final int nightIconId;
 
-	DeviceType(int titleId, int dayIconId, int nightIconId) {
+	DeviceType(int titleId, int disconnectedIconId,  int dayIconId, int nightIconId) {
 		this.titleId = titleId;
+		this.disconnectedIconId = disconnectedIconId;
 		this.dayIconId = dayIconId;
 		this.nightIconId = nightIconId;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/DevicesHelper.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/DevicesHelper.java
index b20186687c0..ec8b9b3f74d 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/DevicesHelper.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/DevicesHelper.java
@@ -380,6 +380,10 @@ void askAntPluginInstall() {
 		installAntPluginAsked = true;
 	}
 
+	@Override
+	public void onDeviceConnecting(@NonNull AbstractDevice<?> device) {
+	}
+
 	@Override
 	public void onDeviceConnect(@NonNull AbstractDevice<?> device, @NonNull DeviceConnectionResult result, @Nullable String error) {
 		if (!Algorithms.isEmpty(error)) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/ExternalSensorsPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/ExternalSensorsPlugin.java
index 0cac7401b40..1f6e3509564 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/ExternalSensorsPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/ExternalSensorsPlugin.java
@@ -46,6 +46,7 @@
 import net.osmand.plus.views.mapwidgets.widgets.MapWidget;
 import net.osmand.plus.widgets.ctxmenu.ContextMenuAdapter;
 import net.osmand.plus.widgets.ctxmenu.data.ContextMenuItem;
+import net.osmand.util.Algorithms;
 
 import org.apache.commons.logging.Log;
 import org.json.JSONException;
@@ -160,7 +161,7 @@ public List<AbstractDevice<?>> getPairedDevicesByWidgetType(@NonNull SensorWidge
 			}
 		}
 
-		return devicesHelper.getPairedDevices();
+		return filteredDevices;
 	}
 
 
@@ -181,12 +182,20 @@ public AbstractDevice<?> getDevice(@NonNull String deviceId) {
 
 	@Override
 	protected void attachAdditionalInfoToRecordedTrack(Location location, JSONObject json) {
-		Set<String> deviceIds = getEnabledDevicesToWriteToTrack();
-		for (AbstractDevice<?> device : devicesHelper.getDevices()) {
-			if (devicesHelper.isDeviceEnabled(device) && deviceIds.contains(device.getDeviceId())
-					&& device.isConnected()) {
+		for(WriteToGpxWidgetType writeToGpxWidgetType : WriteToGpxWidgetType.values()){
+			attachDeviceSensorInfoToRecordedTrack(writeToGpxWidgetType, json);
+		}
+	}
+
+	private void attachDeviceSensorInfoToRecordedTrack(WriteToGpxWidgetType writeToGpxWidgetType, JSONObject json){
+		ApplicationMode selectedAppMode = settings.getApplicationMode();
+		CommonPreference<String> preference = getPrefSettingsForWidgetType(writeToGpxWidgetType);
+		String speedDeviceId = preference.getModeValue(selectedAppMode);
+		if (!Algorithms.isEmpty(speedDeviceId)) {
+			AbstractDevice<?> device = devicesHelper.getDevice(speedDeviceId);
+			if (device != null) {
 				try {
-					device.writeSensorDataToJson(json);
+					device.writeSensorDataToJson(json, writeToGpxWidgetType.getSensorType());
 				} catch (JSONException e) {
 					LOG.error(e);
 				}
@@ -194,18 +203,6 @@ protected void attachAdditionalInfoToRecordedTrack(Location location, JSONObject
 		}
 	}
 
-	private Set<String> getEnabledDevicesToWriteToTrack() {
-		ApplicationMode selectedAppMode = settings.getApplicationMode();
-		Set<String> linkedSensors = new HashSet<>();
-		linkedSensors.add(SPEED_SENSOR_WRITE_TO_TRACK_DEVICE.getModeValue(selectedAppMode));
-		linkedSensors.add(CADENCE_SENSOR_WRITE_TO_TRACK_DEVICE.getModeValue(selectedAppMode));
-		linkedSensors.add(POWER_SENSOR_WRITE_TO_TRACK_DEVICE.getModeValue(selectedAppMode));
-		linkedSensors.add(HEART_RATE_SENSOR_WRITE_TO_TRACK_DEVICE.getModeValue(selectedAppMode));
-		linkedSensors.add(TEMPERATURE_SENSOR_WRITE_TO_TRACK_DEVICE.getModeValue(selectedAppMode));
-		return linkedSensors;
-	}
-
-
 	@Override
 	public void mapActivityCreate(@NonNull MapActivity activity) {
 		devicesHelper.setActivity(activity);
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/adapters/PairedDevicesAdapter.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/adapters/PairedDevicesAdapter.java
index 47b364b3dfb..2f10cfb89da 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/adapters/PairedDevicesAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/adapters/PairedDevicesAdapter.java
@@ -31,6 +31,11 @@ public void onBindViewHolder(@NonNull FoundDeviceViewHolder holder, int position
 		AbstractDevice<?> device = items.get(position);
 		holder.menuIcon.setVisibility(View.VISIBLE);
 		holder.menuIcon.setOnClickListener(v -> showOptionsMenu(v, device));
+		holder.itemView.setOnClickListener(v -> {
+			if(plugin != null && plugin.isDevicePaired(device)){
+				deviceMenuClickListener.onSettings(device);
+			}
+		});
 	}
 
 	private void showOptionsMenu(View view, AbstractDevice<?> device) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/AbstractDevice.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/AbstractDevice.java
index de7cff82246..2b702eff334 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/AbstractDevice.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/AbstractDevice.java
@@ -10,6 +10,7 @@
 import net.osmand.plus.plugins.externalsensors.DeviceType;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.AbstractSensor;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorData;
+import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType;
 import net.osmand.util.Algorithms;
 
 import org.json.JSONException;
@@ -31,6 +32,8 @@ public abstract class AbstractDevice<T extends AbstractSensor> {
 
 	public interface DeviceListener {
 
+		void onDeviceConnecting(@NonNull AbstractDevice<?> device);
+
 		@AnyThread
 		void onDeviceConnect(@NonNull AbstractDevice<?> device, @NonNull DeviceConnectionResult result,
 		                     @Nullable String error);
@@ -139,9 +142,11 @@ public void fireSensorDataEvent(@NonNull AbstractSensor sensor, @NonNull SensorD
 		}
 	}
 
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 		for (T sensor : sensors) {
-			sensor.writeSensorDataToJson(json);
+			if (sensor.getSupportedWidgetDataFieldTypes().contains(widgetDataFieldType)) {
+				sensor.writeSensorDataToJson(json, widgetDataFieldType);
+			}
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/ant/AntAbstractDevice.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/ant/AntAbstractDevice.java
index b9b666f5b4c..3e198d39a57 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/ant/AntAbstractDevice.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/ant/AntAbstractDevice.java
@@ -165,6 +165,9 @@ public boolean connect(@NonNull Context context, @Nullable Activity activity) {
 				LOG.debug(this + " connecting");
 				resetConnection(activity, context);
 			}
+			for (DeviceListener listener : listeners) {
+				listener.onDeviceConnecting(this);
+			}
 		}
 		return true;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/ble/BLEAbstractDevice.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/ble/BLEAbstractDevice.java
index 054f7e7d7e6..3f97ed5116b 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/ble/BLEAbstractDevice.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/ble/BLEAbstractDevice.java
@@ -153,7 +153,6 @@ public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState
 			if (status == GATT_SUCCESS) {
 				if (newState == BluetoothProfile.STATE_CONNECTED) {
 					int bondState = device.getBondState();
-					fireDeviceConnectedEvent();
 
 					if (bondState == BOND_NONE || bondState == BOND_BONDED) {
 						LOG.debug("Discovering services");
@@ -166,6 +165,7 @@ public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState
 						LOG.debug("Waiting for bonding to complete");
 					}
 					setCurrentState(DeviceConnectionState.CONNECTED);
+					fireDeviceConnectedEvent();
 				} else if (newState == BluetoothProfile.STATE_DISCONNECTED) {
 					fireDeviceDisconnectedEvent();
 					gatt.close();
@@ -281,6 +281,9 @@ public boolean connect(@NonNull Context context, @Nullable Activity activity) {
 			bluetoothGatt = device.connectGatt(context, true, gattCallback, BluetoothDevice.TRANSPORT_LE);
 			LOG.debug("Trying to create new connection");
 			setCurrentState(DeviceConnectionState.CONNECTING);
+			for (DeviceListener listener : listeners) {
+				listener.onDeviceConnecting(this);
+			}
 		}
 		return true;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/AbstractSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/AbstractSensor.java
index c6c08435d3d..bb130ab211d 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/AbstractSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/AbstractSensor.java
@@ -26,9 +26,6 @@ public String getSensorId() {
 		return sensorId;
 	}
 
-	@NonNull
-	abstract protected String getGpxTagName();
-
 	@NonNull
 	public AbstractDevice<?> getDevice() {
 		return device;
@@ -43,7 +40,7 @@ public AbstractDevice<?> getDevice() {
 	@Nullable
 	public abstract List<SensorData> getLastSensorDataList();
 
-	public abstract void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException;
+	public abstract void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException;
 
 	@Override
 	public boolean equals(Object o) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/BikeCadenceDataField.kt b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/BikeCadenceDataField.kt
new file mode 100644
index 00000000000..5449b4480bf
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/BikeCadenceDataField.kt
@@ -0,0 +1,20 @@
+package net.osmand.plus.plugins.externalsensors.devices.sensors
+
+import net.osmand.plus.OsmandApplication
+import net.osmand.plus.R
+import net.osmand.plus.utils.OsmAndFormatter
+
+class BikeCadenceDataField(nameId: Int, unitNameId: Int, cadenceValue: Number) :
+    SensorWidgetDataField(
+        SensorWidgetDataFieldType.BIKE_CADENCE,
+        nameId,
+        unitNameId,
+        cadenceValue) {
+    override fun getFormattedValue(app: OsmandApplication): OsmAndFormatter.FormattedValue? {
+        val cadence = numberValue.toFloat()
+        return if (cadence > 0) OsmAndFormatter.FormattedValue(
+            cadence,
+            cadence.toString(),
+            app.getString(R.string.revolutions_per_minute_unit)) else null
+    }
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/SensorTextWidget.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/SensorTextWidget.java
index dc5b8c12886..dc532809613 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/SensorTextWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/SensorTextWidget.java
@@ -143,6 +143,10 @@ public void onDeviceDisconnect(@NonNull AbstractDevice<?> device) {
 		public void onSensorData(@NonNull AbstractSensor sensor, @NonNull SensorData data) {
 			app.runInUIThread(() -> updateInfo(null));
 		}
+
+		@Override
+		public void onDeviceConnecting(@NonNull AbstractDevice<?> device) {
+		}
 	};
 
 	@NonNull
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBatterySensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBatterySensor.java
index 7142bbb8165..dfc1241ec69 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBatterySensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBatterySensor.java
@@ -1,7 +1,5 @@
 package net.osmand.plus.plugins.externalsensors.devices.sensors.ant;
 
-import static net.osmand.gpx.GPXUtilities.DECIMAL_FORMAT;
-
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
@@ -50,7 +48,7 @@ public double getBatteryTime() {
 		@Override
 		public List<SensorDataField> getDataFields() {
 			return Collections.singletonList(
-					new SensorDataField(R.string.map_widget_battery, -1, cumulativeOperatingTime));
+					new SensorBatteryTimeWidgetDataField(R.string.map_widget_battery, -1, cumulativeOperatingTime));
 		}
 
 		@NonNull
@@ -115,12 +113,7 @@ public void subscribeToEvents() {
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 	}
 
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return "";
-	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeCadenceSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeCadenceSensor.java
index 2adc912051e..209a400a358 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeCadenceSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeCadenceSensor.java
@@ -7,14 +7,13 @@
 
 import com.dsi.ant.plugins.antplus.pcc.AntPlusBikeCadencePcc;
 
-import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.plugins.externalsensors.devices.ant.AntBikeSpeedCadenceDevice;
+import net.osmand.plus.plugins.externalsensors.devices.sensors.BikeCadenceDataField;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorData;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorDataField;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataField;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType;
-import net.osmand.plus.utils.OsmAndFormatter;
 
 import org.json.JSONException;
 import org.json.JSONObject;
@@ -35,22 +34,6 @@ public static class BikeCadenceData implements SensorData {
 		// The cadence calculated from the raw values in the sensor broadcast. Units: rpm.
 		private final int calculatedCadence;
 
-		private static class BikeCadenceDataField extends SensorWidgetDataField {
-
-			public BikeCadenceDataField(int nameId, int unitNameId, @NonNull Number cadenceValue) {
-				super(SensorWidgetDataFieldType.BIKE_CADENCE, nameId, unitNameId, cadenceValue);
-			}
-
-			@Nullable
-			@Override
-			public OsmAndFormatter.FormattedValue getFormattedValue(@NonNull OsmandApplication app) {
-				float cadence = getNumberValue().floatValue();
-				return cadence > 0
-						? new OsmAndFormatter.FormattedValue(cadence, String.valueOf(cadence), "rpm")
-						: null;
-			}
-		}
-
 		BikeCadenceData(long timestamp, int calculatedCadence) {
 			this.timestamp = timestamp;
 			this.calculatedCadence = calculatedCadence;
@@ -68,7 +51,7 @@ public int getCalculatedCadence() {
 		@Override
 		public List<SensorDataField> getDataFields() {
 			return Collections.singletonList(
-					new SensorDataField(R.string.map_widget_ant_bicycle_cadence, -1, calculatedCadence));
+					new BikeCadenceDataField(R.string.map_widget_ant_bicycle_cadence, -1, calculatedCadence));
 		}
 
 		@NonNull
@@ -130,18 +113,11 @@ public void subscribeToEvents() {
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 		BikeCadenceData data = lastBikeCadenceData;
 		int calculatedCadence = data != null ? data.getCalculatedCadence() : 0;
 		if (calculatedCadence > 0) {
-			json.put(getGpxTagName(), calculatedCadence);
+			json.put(SENSOR_TAG_CADENCE, calculatedCadence);
 		}
 	}
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_CADENCE;
-	}
-
 }
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeDistanceSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeDistanceSensor.java
index d97de02074c..477fefcbbc6 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeDistanceSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeDistanceSensor.java
@@ -58,7 +58,7 @@ public double getAccumulatedDistance() {
 		@Override
 		public List<SensorDataField> getDataFields() {
 			return Collections.singletonList(
-					new SensorDataField(R.string.map_widget_ant_bicycle_dist, -1, accumulatedDistance));
+					new SensorDistanceWidgetDataField(R.string.map_widget_ant_bicycle_dist, -1, accumulatedDistance));
 		}
 
 		@NonNull
@@ -123,18 +123,11 @@ public void onNewCalculatedAccumulatedDistance(long estTimestamp, EnumSet<EventF
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 		BikeDistanceData data = lastBikeDistanceData;
 		double accumulatedDistance = data != null ? data.getAccumulatedDistance() : 0;
 		if (accumulatedDistance > 0) {
-			json.put(getGpxTagName(), DECIMAL_FORMAT.format(accumulatedDistance));
+			json.put(SENSOR_TAG_DISTANCE, DECIMAL_FORMAT.format(accumulatedDistance));
 		}
 	}
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_DISTANCE;
-	}
-
 }
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikePowerSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikePowerSensor.java
index cb9f758d6df..6e26a58fc79 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikePowerSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikePowerSensor.java
@@ -83,7 +83,7 @@ public boolean isInitialPowerOnlyData() {
 		@NonNull
 		@Override
 		public List<SensorDataField> getDataFields() {
-			return Collections.singletonList(new SensorDataField(R.string.map_widget_ant_bicycle_power, -1, calculatedPower));
+			return Collections.singletonList(new BikePowerDataField(R.string.map_widget_ant_bicycle_power, -1, calculatedPower));
 		}
 
 		@NonNull
@@ -148,18 +148,11 @@ public void subscribeToEvents() {
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 		BikePowerData data = lastBikePowerData;
 		double calculatedPower = data != null ? data.getCalculatedPower() : 0;
 		if (calculatedPower > 0) {
-			json.put(getGpxTagName(),  DECIMAL_FORMAT.format(calculatedPower));
+			json.put(SENSOR_TAG_BIKE_POWER, DECIMAL_FORMAT.format(calculatedPower));
 		}
 	}
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_BIKE_POWER;
-	}
-
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeSpeedSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeSpeedSensor.java
index 6d2276315f3..272d2d62c93 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeSpeedSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntBikeSpeedSensor.java
@@ -58,7 +58,7 @@ public double getCalculatedSpeed() {
 		@Override
 		public List<SensorDataField> getDataFields() {
 			return Collections.singletonList(
-					new SensorDataField(R.string.map_widget_ant_bicycle_speed, -1, calculatedSpeed));
+					new SensorSpeedWidgetDataField(R.string.map_widget_ant_bicycle_speed, R.string.m_s, calculatedSpeed));
 		}
 
 		@NonNull
@@ -72,7 +72,7 @@ public List<SensorDataField> getExtraDataFields() {
 		@Override
 		public List<SensorWidgetDataField> getWidgetFields() {
 			return Collections.singletonList(
-					new SensorSpeedWidgetDataField(R.string.map_widget_ant_bicycle_speed, -1, calculatedSpeed));
+					new SensorSpeedWidgetDataField(R.string.map_widget_ant_bicycle_speed, R.string.m_s, calculatedSpeed));
 		}
 
 		@NonNull
@@ -116,25 +116,18 @@ public void subscribeToEvents() {
 		getAntDevice().getPcc().subscribeCalculatedSpeedEvent(new CalculatedSpeedReceiver(new BigDecimal(WHEEL_CIRCUMFERENCE)) {
 			@Override
 			public void onNewCalculatedSpeed(long estTimestamp, EnumSet<EventFlag> enumSet, BigDecimal calculatedSpeed) {
-				lastBikeSpeedData = new BikeSpeedData(estTimestamp, calculatedSpeed.doubleValue());
+				lastBikeSpeedData = new BikeSpeedData(estTimestamp, calculatedSpeed.doubleValue());//m/s
 				getDevice().fireSensorDataEvent(AntBikeSpeedSensor.this, lastBikeSpeedData);
 			}
 		});
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 		BikeSpeedData data = lastBikeSpeedData;
 		double calculatedSpeed = data != null ? data.getCalculatedSpeed() : 0;
 		if (calculatedSpeed > 0) {
-			json.put(getGpxTagName(), DECIMAL_FORMAT.format(calculatedSpeed));
+			json.put(SENSOR_TAG_SPEED, DECIMAL_FORMAT.format(calculatedSpeed));
 		}
 	}
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_SPEED;
-	}
-
 }
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntHeartRateSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntHeartRateSensor.java
index 0e36ff9b3ff..9c5f183ee43 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntHeartRateSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntHeartRateSensor.java
@@ -167,18 +167,11 @@ public void subscribeToEvents() {
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 		HeartRateData data = lastHeartRateData;
 		int computedHeartRate = data != null ? data.getComputedHeartRate() : 0;
 		if (computedHeartRate > 0) {
-			json.put(getGpxTagName(), computedHeartRate);
+			json.put(SENSOR_TAG_HEART_RATE, computedHeartRate);
 		}
 	}
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_HEART_RATE;
-	}
-
 }
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntRssiCommonSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntRssiCommonSensor.java
index 21ad462f3c3..0d2d0591202 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntRssiCommonSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntRssiCommonSensor.java
@@ -1,7 +1,5 @@
 package net.osmand.plus.plugins.externalsensors.devices.sensors.ant;
 
-import static net.osmand.gpx.GPXUtilities.DECIMAL_FORMAT;
-
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
@@ -115,14 +113,6 @@ public void subscribeToEvents() {
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 	}
-
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return "";
-	}
-
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntRssiLegacySensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntRssiLegacySensor.java
index fc9336eea7d..1ab928cc9f1 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntRssiLegacySensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ant/AntRssiLegacySensor.java
@@ -1,7 +1,5 @@
 package net.osmand.plus.plugins.externalsensors.devices.sensors.ant;
 
-import static net.osmand.gpx.GPXUtilities.DECIMAL_FORMAT;
-
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
@@ -11,7 +9,6 @@
 import net.osmand.plus.plugins.externalsensors.devices.ant.AntLegacyDevice;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorData;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorDataField;
-import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorSpeedWidgetDataField;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataField;
 import net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType;
 
@@ -117,14 +114,6 @@ public void subscribeToEvents() {
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 	}
-
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return "";
-	}
-
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBatterySensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBatterySensor.java
index 4bb706a359f..6e8272503e2 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBatterySensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBatterySensor.java
@@ -58,7 +58,7 @@ public List<SensorDataField> getExtraDataFields() {
 		@Nullable
 		@Override
 		public List<SensorWidgetDataField> getWidgetFields() {
-			return  Collections.singletonList(
+			return Collections.singletonList(
 					new SensorWidgetDataField(SensorWidgetDataFieldType.BATTERY, R.string.map_widget_battery, -1, batteryLevel));
 		}
 
@@ -138,14 +138,6 @@ private void decodeBatteryCharacteristic(@NonNull BluetoothGatt gatt,
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 	}
-
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return "";
-	}
-
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBikeSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBikeSensor.java
index ba98b56e219..61472c2214f 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBikeSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBikeSensor.java
@@ -296,18 +296,26 @@ private SensorData createBikeCadenceData(float gearRatio, float crankCadence) {
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
-		BikeSpeedDistanceData speedDistanceData = lastBikeSpeedDistanceData;
-		if (speedDistanceData != null) {
-			json.put(getGpxTagName(), speedDistanceData.speed);
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
+		switch (widgetDataFieldType) {
+			case BIKE_SPEED:
+				if (lastBikeSpeedDistanceData != null) {
+					json.put(GPXUtilities.SENSOR_TAG_SPEED, lastBikeSpeedDistanceData.speed);
+				}
+				break;
+			case BIKE_CADENCE:
+				BikeCadenceData cadenceData = lastBikeCadenceData;
+				if (cadenceData != null) {
+					json.put(GPXUtilities.SENSOR_TAG_CADENCE, cadenceData.cadence);
+				}
+				break;
+			case BIKE_DISTANCE:
+				if (lastBikeSpeedDistanceData != null) {
+					json.put(GPXUtilities.SENSOR_TAG_DISTANCE, lastBikeSpeedDistanceData.distance);
+				}
+				break;
+			default:
+				break;
 		}
 	}
-
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_SPEED;
-	}
-
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBloodPressureSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBloodPressureSensor.java
index bd6104b4d25..1e45a2e1429 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBloodPressureSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEBloodPressureSensor.java
@@ -195,14 +195,6 @@ private void decodeBloodPressureCharacteristic(@NonNull BluetoothGatt gatt,
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 	}
-
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return "";
-	}
-
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLECuffPressureSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLECuffPressureSensor.java
index 604b63d77cb..ea92751baee 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLECuffPressureSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLECuffPressureSensor.java
@@ -174,14 +174,6 @@ private void decodeBloodPressureCharacteristic(@NonNull BluetoothGatt gatt,
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 	}
-
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return "";
-	}
-
 }
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEHeartRateSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEHeartRateSensor.java
index 365ef2a5620..335cc5df4fd 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEHeartRateSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLEHeartRateSensor.java
@@ -191,17 +191,10 @@ private void decodeHeartRateCharacteristic(@NonNull BluetoothGatt gatt,
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 		HeartRateData data = lastHeartRateData;
 		if (data != null) {
-			json.put(getGpxTagName(), data.heartRate);
+			json.put(GPXUtilities.SENSOR_TAG_HEART_RATE, data.heartRate);
 		}
 	}
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_HEART_RATE;
-	}
-
 }
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLERunningSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLERunningSensor.java
index 0d4b967b6f9..b8628f52bba 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLERunningSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLERunningSensor.java
@@ -335,17 +335,25 @@ private SensorData createRunningStrideLengthData(float strideLength) {
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
-		RunningSpeedData speedData = lastRunningSpeedData;
-		if (speedData != null) {
-			json.put(getGpxTagName(), speedData.speed);
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
+		switch (widgetDataFieldType) {
+			case BIKE_SPEED:
+				if (lastRunningSpeedData != null) {
+					json.put(SENSOR_TAG_SPEED, lastRunningSpeedData.speed);
+				}
+				break;
+			case BIKE_CADENCE:
+				if (lastRunningCadenceData != null) {
+					json.put(SENSOR_TAG_CADENCE, lastRunningCadenceData.cadence);
+				}
+				break;
+			case BIKE_DISTANCE:
+				if (lastRunningDistanceData != null) {
+					json.put(SENSOR_TAG_DISTANCE, lastRunningDistanceData.totalDistance);
+				}
+				break;
+			default:
+				break;
 		}
 	}
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_SPEED;
-	}
-
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLETemperatureSensor.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLETemperatureSensor.java
index 13cb5eec18f..0b697555d4e 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLETemperatureSensor.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/devices/sensors/ble/BLETemperatureSensor.java
@@ -138,17 +138,10 @@ private void decodeTemperatureCharacteristic(@NonNull BluetoothGatt gatt,
 	}
 
 	@Override
-	public void writeSensorDataToJson(@NonNull JSONObject json) throws JSONException {
+	public void writeSensorDataToJson(@NonNull JSONObject json, @NonNull SensorWidgetDataFieldType widgetDataFieldType) throws JSONException {
 		TemperatureData data = lastTemperatureData;
 		if (data != null) {
-			json.put(getGpxTagName(), data.temperature);
+			json.put(SENSOR_TAG_TEMPERATURE, data.temperature);
 		}
 	}
-
-	@NonNull
-	@Override
-	protected String getGpxTagName() {
-		return SENSOR_TAG_TEMPERATURE;
-	}
-
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDeviceDetailsFragment.kt b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDeviceDetailsFragment.kt
index b253e56853a..67eddca8bb8 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDeviceDetailsFragment.kt
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDeviceDetailsFragment.kt
@@ -33,7 +33,10 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
                 val arguments = Bundle()
                 arguments.putString(DEVICE_ID_KEY, device.deviceId)
                 fragment.arguments = arguments
-                fragment.show(manager, TAG)
+                manager.beginTransaction()
+                    .replace(R.id.fragmentContainer, fragment, TAG)
+                    .addToBackStack(null)
+                    .commitAllowingStateLoss()
             }
         }
     }
@@ -41,6 +44,7 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
     lateinit var device: AbstractDevice<out AbstractSensor>
     private var connectionState: TextView? = null
     private var batteryLevel: TextView? = null
+    private var progress: View? = null
     private var receivedDataView: RecyclerView? = null
     private lateinit var receivedDataAdapter: DeviceCharacteristicsAdapter
 
@@ -64,7 +68,7 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
         val closeButton = view.findViewById<View>(R.id.close_button)
         if (closeButton != null) {
             closeButton.setOnClickListener {
-                dismiss()
+                requireActivity().onBackPressed()
             }
             if (closeButton is ImageView) {
                 UiUtilities.rotateImageByLayoutDirection(closeButton)
@@ -76,13 +80,9 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
         super.setupUI(view)
         val deviceName: TextView = view.findViewById(R.id.device_name)
         deviceName.text = plugin.getDeviceName(device)
-        val widgetIcon: ImageView = view.findViewById(R.id.widget_icon)
-        val deviceType = device.deviceType
-        deviceType.let {
-            widgetIcon.setImageResource(if (nightMode) it.nightIconId else it.dayIconId)
-        }
         connectionState = view.findViewById(R.id.connection_state)
         batteryLevel = view.findViewById(R.id.battery_level)
+        progress = view.findViewById(R.id.progress_bar)
         updateConnectedState(view)
         updateButtonState(view)
         val connectionTypeTextView: TextView = view.findViewById(R.id.connection_type)
@@ -120,6 +120,18 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
         val connectionStateIcon: ImageView = view.findViewById(R.id.connection_state_icon)
         connectionStateIcon.setImageResource(signalLevelIcon)
         batteryLevel?.text = device.batteryLevel.toString()
+        val widgetIcon: ImageView = view.findViewById(R.id.widget_icon)
+        val deviceType = device.deviceType
+        deviceType.let {
+            widgetIcon.background = ContextCompat.getDrawable(
+                requireActivity(),
+                if (isConnected) {
+                    if (nightMode) R.drawable.bg_widget_type_icon_dark else R.drawable.bg_widget_type_icon_light
+                } else {
+                    if (nightMode) R.drawable.bg_widget_type_disconnected_icon_dark else R.drawable.bg_widget_type_disconnected_icon_light
+                })
+            widgetIcon.setImageResource(if (!isConnected) it.disconnectedIconId else if (nightMode) it.nightIconId else it.dayIconId)
+        }
     }
 
     private fun getConnectionTypeName() = if (isBle()) getBleText() else getAntText()
@@ -136,15 +148,6 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
         val pairButtonText = view.findViewById<TextView>(R.id.button_text)
         val pairButton = view.findViewById<View>(R.id.pair_btn)
         val pairButtonContainer = view.findViewById<View>(R.id.button_container)
-        view.post {
-            AndroidUtils.setBackground(
-                app,
-                pairButtonContainer,
-                nightMode,
-                R.drawable.ripple_solid_light,
-                R.drawable.ripple_solid_dark
-            )
-        }
         val connectedStateBtnTextColor = ColorUtilities.getButtonSecondaryTextColorId(nightMode)
         val disconnectedStateBtnTextColor =
             if (nightMode) R.color.dlg_btn_primary_text_dark else R.color.dlg_btn_primary_text_light
@@ -157,13 +160,17 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
         val disconnectedStateBtnBgColorLight = R.drawable.dlg_btn_primary_light
         val disconnectedStateBtnBgColorDark = R.drawable.dlg_btn_primary_dark
 
+        val connectingStateBtnBgColorLight = R.color.active_color_secondary_light
+        val connectingStateBtnBgColorDark = R.color.active_color_secondary_dark
+
         val unpairedStateBtnBgColorLight = R.color.ble_unpaired_device_btn_bg
         val unpairedStateBtnBgColorDark = R.color.ble_unpaired_device_btn_bg
 
         val lightResId: Int
         val darkResId: Int
-        val pairBtnTextColorId: Int
-        val pairBtnTextId: Int
+        var pairBtnTextColorId = 0
+        var pairBtnTextId = 0
+        var isConnecting = false
         if (!plugin.isDevicePaired(device)) {
             lightResId = unpairedStateBtnBgColorLight
             darkResId = unpairedStateBtnBgColorDark
@@ -176,6 +183,11 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
             pairBtnTextColorId = connectedStateBtnTextColor
             pairBtnTextId = R.string.external_device_details_disconnect
             pairButton.setOnClickListener { disconnectDevice() }
+        } else if (device.isConnecting) {
+            lightResId = connectingStateBtnBgColorLight
+            darkResId = connectingStateBtnBgColorDark
+            pairButton.setOnClickListener(null)
+            isConnecting = true
         } else {
             lightResId = disconnectedStateBtnBgColorLight
             darkResId = disconnectedStateBtnBgColorDark
@@ -183,18 +195,31 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
             pairBtnTextId = R.string.external_device_details_connect
             pairButton.setOnClickListener { connectDevice() }
         }
-
-        AndroidUtils.setBackground(
-            app,
-            pairButton,
-            nightMode,
-            lightResId,
-            darkResId
-        )
-
-        pairButtonText.text = getString(pairBtnTextId)
-        val colorStateList = ContextCompat.getColorStateList(app, pairBtnTextColorId)
-        pairButtonText.setTextColor(colorStateList)
+        view.post {
+            AndroidUtils.setBackground(
+                app,
+                pairButtonContainer,
+                nightMode,
+                R.drawable.ripple_solid_light,
+                R.drawable.ripple_solid_dark
+            )
+            AndroidUtils.setBackground(
+                app,
+                pairButton,
+                nightMode,
+                lightResId,
+                darkResId
+            )
+            if (pairBtnTextId != 0) {
+                pairButtonText.text = getString(pairBtnTextId)
+            }
+            if (pairBtnTextColorId != 0) {
+                val colorStateList = ContextCompat.getColorStateList(app, pairBtnTextColorId)
+                pairButtonText.setTextColor(colorStateList)
+            }
+            progress?.visibility = if (isConnecting) View.VISIBLE else View.GONE
+            pairButtonText.visibility = if (isConnecting) View.GONE else View.VISIBLE
+        }
     }
 
     override fun onResume() {
@@ -212,6 +237,7 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
     private fun pairDevice() {
         plugin.pairDevice(device)
         updateButtonState()
+        connectDevice()
     }
 
     private fun connectDevice() {
@@ -222,6 +248,12 @@ class ExternalDeviceDetailsFragment : ExternalDevicesBaseFragment(), DeviceListe
         plugin.disconnectDevice(device)
     }
 
+    override fun onDeviceConnecting(device: AbstractDevice<*>) {
+        app.runInUIThread {
+            updateButtonState()
+        }
+    }
+
     override fun onDeviceConnect(
         device: AbstractDevice<out AbstractSensor>,
         result: DeviceConnectionResult,
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesBaseFragment.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesBaseFragment.java
index 08938d50dd9..9670c56e1c6 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesBaseFragment.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesBaseFragment.java
@@ -1,32 +1,25 @@
 package net.osmand.plus.plugins.externalsensors.dialogs;
 
-import android.app.Activity;
-import android.app.Dialog;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
-import android.view.Window;
 
-import androidx.annotation.ColorRes;
 import androidx.annotation.LayoutRes;
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.appcompat.widget.Toolbar;
-import androidx.core.content.ContextCompat;
 import androidx.core.view.ViewCompat;
 
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
-import net.osmand.plus.base.BaseOsmAndDialogFragment;
-import net.osmand.plus.helpers.AndroidUiHelper;
+import net.osmand.plus.base.BaseOsmAndFragment;
 import net.osmand.plus.plugins.PluginsHelper;
 import net.osmand.plus.plugins.externalsensors.ExternalSensorsPlugin;
 import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.ColorUtilities;
-import net.osmand.plus.utils.UiUtilities;
 
-public abstract class ExternalDevicesBaseFragment extends BaseOsmAndDialogFragment {
+public abstract class ExternalDevicesBaseFragment extends BaseOsmAndFragment {
 
 	public static final String TAG = ExternalDevicesBaseFragment.class.getSimpleName();
 	protected ExternalSensorsPlugin plugin;
@@ -47,6 +40,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup c
 		View view = themedInflater.inflate(getLayoutId(), container, false);
 		setupToolbar(view);
 		setupUI(view);
+		AndroidUtils.addStatusBarPadding21v(requireMyActivity(), view);
 		return view;
 	}
 
@@ -66,7 +60,7 @@ protected void setupToolbar(@NonNull View view) {
 		toolbar.setNavigationIcon(AndroidUtils.getNavigationIconResId(app));
 		toolbar.setNavigationContentDescription(R.string.shared_string_close);
 		toolbar.setNavigationOnClickListener(v -> {
-			dismiss();
+			requireActivity().onBackPressed();
 		});
 	}
 
@@ -74,32 +68,6 @@ protected float getElevation() {
 		return 5.0f;
 	}
 
-	@NonNull
-	@Override
-	public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {
-		Activity activity = requireActivity();
-		int themeId = nightMode ? R.style.OsmandDarkTheme_DarkActionbar : R.style.OsmandLightTheme_DarkActionbar_LightStatusBar;
-		Dialog dialog = new Dialog(activity, themeId) {
-			@Override
-			public void onBackPressed() {
-				dismiss();
-			}
-		};
-		Window window = dialog.getWindow();
-		if (window != null) {
-			if (!settings.DO_NOT_USE_ANIMATIONS.get()) {
-				window.getAttributes().windowAnimations = R.style.Animations_Alpha;
-			}
-			window.setStatusBarColor(ContextCompat.getColor(app, getStatusBarColorId()));
-		}
-		return dialog;
-	}
-
-	@ColorRes
-	protected int getStatusBarColorId() {
-		AndroidUiHelper.setStatusBarContentColor(getView(), nightMode);
-		return nightMode ? R.color.status_bar_color_dark : R.color.status_bar_color_light;
-	}
 
 	@NonNull
 	protected MapActivity requireMapActivity() {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesListFragment.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesListFragment.java
index b8ef5d3efe2..88a9b3e2194 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesListFragment.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesListFragment.java
@@ -17,7 +17,6 @@
 import androidx.recyclerview.widget.RecyclerView;
 
 import com.google.android.material.appbar.AppBarLayout;
-import com.google.android.material.appbar.CollapsingToolbarLayout;
 
 import net.osmand.CallbackWithObject;
 import net.osmand.plus.R;
@@ -207,7 +206,10 @@ public static void showInstance(@NonNull FragmentManager manager) {
 		if (AndroidUtils.isFragmentCanBeAdded(manager, TAG)) {
 			ExternalDevicesListFragment fragment = new ExternalDevicesListFragment();
 			fragment.setRetainInstance(true);
-			fragment.show(manager, TAG);
+			manager.beginTransaction()
+					.replace(R.id.fragmentContainer, fragment, TAG)
+					.addToBackStack(null)
+					.commitAllowingStateLoss();
 		}
 	}
 
@@ -253,6 +255,10 @@ public void changeSensorName(@NonNull String sensorId, @NonNull String newName)
 		updatePairedSensorsList();
 	}
 
+	@Override
+	public void onDeviceConnecting(@NonNull AbstractDevice<?> device) {
+	}
+
 	@Override
 	public void onDeviceConnect(@NonNull AbstractDevice<?> device, @NonNull DeviceConnectionResult result, @Nullable String error) {
 		app.runInUIThread(this::updatePairedSensorsList);
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesSearchFragment.kt b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesSearchFragment.kt
index dc866da7f73..a1acb95612f 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesSearchFragment.kt
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/ExternalDevicesSearchFragment.kt
@@ -50,7 +50,10 @@ class ExternalDevicesSearchFragment : ExternalDevicesBaseFragment(), ScanDevices
                 }
                 fragment.arguments = args
                 fragment.retainInstance = true
-                fragment.show(manager, TAG)
+                manager.beginTransaction()
+                    .replace(R.id.fragmentContainer, fragment, TAG)
+                    .addToBackStack(null)
+                    .commitAllowingStateLoss()
             }
         }
     }
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/PairNewDeviceBottomSheet.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/PairNewDeviceBottomSheet.java
index 18106ed7669..8d61b493892 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/PairNewDeviceBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/PairNewDeviceBottomSheet.java
@@ -10,10 +10,13 @@
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.base.BottomSheetBehaviourDialogFragment;
 import net.osmand.plus.base.bottomsheetmenu.BaseBottomSheetItem;
+import net.osmand.plus.base.bottomsheetmenu.BottomSheetItemButton;
 import net.osmand.plus.base.bottomsheetmenu.BottomSheetItemWithDescription;
 import net.osmand.plus.base.bottomsheetmenu.simpleitems.DividerItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.DividerSpaceItem;
 import net.osmand.plus.base.bottomsheetmenu.simpleitems.TitleItem;
 import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.UiUtilities;
 
 public class PairNewDeviceBottomSheet extends BottomSheetBehaviourDialogFragment {
 
@@ -68,7 +71,17 @@ public void createMenuItems(Bundle savedInstanceState) {
 				})
 				.create();
 		items.add(helpItem);
-
+		BaseBottomSheetItem cancelItem = new BottomSheetItemButton.Builder()
+				.setButtonType(UiUtilities.DialogButtonType.SECONDARY)
+				.setTitle(getString(R.string.shared_string_cancel))
+				.setLayoutId(R.layout.bottom_sheet_button)
+				.setOnClickListener(v -> {
+				 dismiss();
+				})
+				.create();
+		items.add(cancelItem);
+		int padding = getResources().getDimensionPixelSize(R.dimen.content_padding_small);
+		items.add(new DividerSpaceItem(getContext(), padding));
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/SelectExternalDeviceFragment.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/SelectExternalDeviceFragment.java
index 5eceee18768..6f6e257da04 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/SelectExternalDeviceFragment.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/dialogs/SelectExternalDeviceFragment.java
@@ -238,10 +238,17 @@ public static void showInstance(@NonNull FragmentManager manager,
 			fragment.setTargetFragment(targetFragment, 0);
 			fragment.setArguments(arguments);
 			fragment.setRetainInstance(true);
-			fragment.show(manager, TAG);
+			manager.beginTransaction()
+					.replace(R.id.fragmentContainer, fragment, TAG)
+					.addToBackStack(null)
+					.commitAllowingStateLoss();
 		}
 	}
 
+	@Override
+	public void onDeviceConnecting(@NonNull AbstractDevice<?> device) {
+	}
+
 	@Override
 	public void onDeviceConnect(@NonNull AbstractDevice<?> device, @NonNull DeviceConnectionResult result, @Nullable String error) {
 		app.runInUIThread(this::updatePairedSensorsList);
@@ -259,7 +266,7 @@ public void onSensorData(@NonNull AbstractSensor sensor, @NonNull SensorData dat
 	public void onDeviceSelected(@Nullable AbstractDevice<?> device) {
 		if (getTargetFragment() instanceof SelectDeviceListener) {
 			((SelectDeviceListener) getTargetFragment()).selectNewDevice(device, widgetDataFieldType);
-			dismiss();
+			requireActivity().onBackPressed();
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/menuitems/DrawerMenuItemsSettings.java b/OsmAnd/src/net/osmand/plus/settings/backend/menuitems/DrawerMenuItemsSettings.java
index 6705395fc7f..8eee2316983 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/menuitems/DrawerMenuItemsSettings.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/menuitems/DrawerMenuItemsSettings.java
@@ -137,6 +137,7 @@ private static List<String> getDrawerHiddenItemsByDefault() {
 		hiddenByDefault.add(DRAWER_BACKUP_RESTORE_ID);
 		hiddenByDefault.add(DRAWER_LIVE_UPDATES_ID);
 		hiddenByDefault.add(DRAWER_OSMAND_VERSION_ID);
+		hiddenByDefault.add(DRAWER_ANT_PLUS_ID);
 		return hiddenByDefault;
 	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/SettingsScreenType.java b/OsmAnd/src/net/osmand/plus/settings/fragments/SettingsScreenType.java
index 094ba3a8668..dffbda8ba2e 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/SettingsScreenType.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/SettingsScreenType.java
@@ -2,10 +2,10 @@
 
 import net.osmand.plus.R;
 import net.osmand.plus.plugins.accessibility.AccessibilitySettingsFragment;
-import net.osmand.plus.plugins.externalsensors.AntPlusSettingsFragment;
 import net.osmand.plus.plugins.audionotes.MultimediaNotesFragment;
 import net.osmand.plus.plugins.development.DevelopmentSettingsFragment;
 import net.osmand.plus.plugins.externalsensors.ExternalSettingsWriteToTrackSettingsFragment;
+import net.osmand.plus.plugins.externalsensors.dialogs.ExternalDevicesListFragment;
 import net.osmand.plus.plugins.monitoring.MonitoringSettingsFragment;
 import net.osmand.plus.plugins.openplacereviews.OprSettingsFragment;
 import net.osmand.plus.plugins.osmedit.fragments.OsmEditingFragment;
@@ -41,7 +41,7 @@ public enum SettingsScreenType {
 	OPEN_PLACE_REVIEWS(OprSettingsFragment.class.getName(), false, null, R.xml.open_place_reviews, R.layout.global_preference_toolbar),
 	DEVELOPMENT_SETTINGS(DevelopmentSettingsFragment.class.getName(), false, null, R.xml.development_settings, R.layout.global_preference_toolbar),
 	SIMULATION_NAVIGATION(SimulationNavigationSettingFragment.class.getName(), true, ApplyQueryType.NONE, R.xml.simulation_navigation_setting, R.layout.profile_preference_toolbar_with_switch),
-	ANT_PLUS_SETTINGS(AntPlusSettingsFragment.class.getName(), false, null, R.xml.antplus_settings, R.layout.global_preference_toolbar),
+	ANT_PLUS_SETTINGS(ExternalDevicesListFragment.class.getName(), false, null, R.xml.antplus_settings, R.layout.global_preference_toolbar),
 	WEATHER_SETTINGS(WeatherSettingsFragment.class.getName(), true, ApplyQueryType.SNACK_BAR, R.xml.weather_settings, R.layout.profile_preference_toolbar),
 	EXTERNAL_SETTINGS_WRITE_TO_TRACK_SETTINGS(ExternalSettingsWriteToTrackSettingsFragment.class.getName(), true, ApplyQueryType.BOTTOM_SHEET, R.xml.external_sensors_write_to_track_settings, R.layout.profile_preference_toolbar);
 
