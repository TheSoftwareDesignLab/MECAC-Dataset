diff --git a/OsmAnd/src/net/osmand/plus/audionotes/AudioNotesLayer.java b/OsmAnd/src/net/osmand/plus/audionotes/AudioNotesLayer.java
index a82a0645acc..58d6eb017cc 100644
--- a/OsmAnd/src/net/osmand/plus/audionotes/AudioNotesLayer.java
+++ b/OsmAnd/src/net/osmand/plus/audionotes/AudioNotesLayer.java
@@ -63,7 +63,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 		if (contextMenuLayer.getMoveableObject() instanceof Recording) {
 			Recording objectInMotion = (Recording) contextMenuLayer.getMoveableObject();
 			PointF pf = contextMenuLayer.getMovableCenterPoint(tileBox);
-			float textScale = getApplication().getSettings().TEXT_SCALE.get();
+			float textScale = getTextScale();
 			drawRecording(canvas, objectInMotion, pf.x, pf.y, textScale);
 		}
 	}
@@ -72,7 +72,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
 		if (tileBox.getZoom() >= startZoom) {
 			OsmandApplication app = getApplication();
-			float textScale = app.getSettings().TEXT_SCALE.get();
+			float textScale = getTextScale();
 			float iconSize = getIconSize(app);
 			QuadTree<QuadRect> boundIntersections = initBoundIntersections(tileBox);
 
diff --git a/OsmAnd/src/net/osmand/plus/auto/CarSurfaceView.java b/OsmAnd/src/net/osmand/plus/auto/CarSurfaceView.java
index acb07b9d76d..d8e1e8cf16a 100644
--- a/OsmAnd/src/net/osmand/plus/auto/CarSurfaceView.java
+++ b/OsmAnd/src/net/osmand/plus/auto/CarSurfaceView.java
@@ -7,6 +7,9 @@
 @SuppressLint("ViewConstructor")
 public class CarSurfaceView extends View {
 
+	public static final float TEXT_SCALE_DIVIDER_160 = 0.5f;
+	public static final float MAP_DENSITY_DIVIDER_160 = 0.5f;
+
 	private final SurfaceRenderer surfaceRenderer;
 	private int dpi;
 	private float density;
diff --git a/OsmAnd/src/net/osmand/plus/auto/NavigationScreen.java b/OsmAnd/src/net/osmand/plus/auto/NavigationScreen.java
index 620cc784572..cc180be8f72 100644
--- a/OsmAnd/src/net/osmand/plus/auto/NavigationScreen.java
+++ b/OsmAnd/src/net/osmand/plus/auto/NavigationScreen.java
@@ -115,7 +115,7 @@ public SurfaceRenderer getSurfaceRenderer() {
 	@Override
 	public void onFrameRendered(@NonNull Canvas canvas, @NonNull Rect visibleArea, @NonNull Rect stableArea) {
 		DrawSettings drawSettings = new DrawSettings(getCarContext().isDarkMode(), false, mSurfaceRenderer.getDensity());
-		alarmWidget.updateInfo(drawSettings);
+		alarmWidget.updateInfo(drawSettings, true);
 		Bitmap widgetBitmap = alarmWidget.getWidgetBitmap();
 		if (widgetBitmap != null) {
 			canvas.drawBitmap(widgetBitmap, visibleArea.right - widgetBitmap.getWidth() - 10, visibleArea.top + 10, new Paint());
diff --git a/OsmAnd/src/net/osmand/plus/osmedit/OsmBugsLayer.java b/OsmAnd/src/net/osmand/plus/osmedit/OsmBugsLayer.java
index 00970f303cb..62ce522de2b 100644
--- a/OsmAnd/src/net/osmand/plus/osmedit/OsmBugsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/osmedit/OsmBugsLayer.java
@@ -113,7 +113,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 			List<OpenStreetNote> objects = data.getResults();
 
 			if (objects != null) {
-				float textScale = app.getSettings().TEXT_SCALE.get();
+				float textScale = getTextScale();
 				float iconSize = getIconSize(app);
 				QuadTree<QuadRect> boundIntersections = initBoundIntersections(tileBox);
 				List<OpenStreetNote> fullObjects = new ArrayList<>();
diff --git a/OsmAnd/src/net/osmand/plus/osmedit/OsmEditsLayer.java b/OsmAnd/src/net/osmand/plus/osmedit/OsmEditsLayer.java
index ee7b186a475..88e2521166f 100644
--- a/OsmAnd/src/net/osmand/plus/osmedit/OsmEditsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/osmedit/OsmEditsLayer.java
@@ -107,7 +107,7 @@ private List<OsmPoint> drawPoints(Canvas canvas, RotatedTileBox tileBox,
 	}
 
 	private void drawPoint(Canvas canvas, OsmPoint osmPoint, float x, float y) {
-		float textScale = app.getSettings().TEXT_SCALE.get();
+		float textScale = getTextScale();
 		int iconId = getIconId(osmPoint);
 		BackgroundType backgroundType = DEFAULT_BACKGROUND_TYPE;
 		if (osmPoint.getGroup() == OsmPoint.Group.BUG) {
diff --git a/OsmAnd/src/net/osmand/plus/render/MapRenderRepositories.java b/OsmAnd/src/net/osmand/plus/render/MapRenderRepositories.java
index 71a0f97e14f..ed527a2e376 100644
--- a/OsmAnd/src/net/osmand/plus/render/MapRenderRepositories.java
+++ b/OsmAnd/src/net/osmand/plus/render/MapRenderRepositories.java
@@ -762,7 +762,7 @@ public synchronized void loadMap(RotatedTileBox tileRect, MapTileDownloader mapT
 			//Text/icon scales according to mapDensity (so text is size of road)
 //			currentRenderingContext.textScale = (requestedBox.getDensity()*app.getSettings().TEXT_SCALE.get()); 
 			//Text/icon stays same for all sizes 
-			currentRenderingContext.textScale = (requestedBox.getDensity() * app.getSettings().TEXT_SCALE.get())
+			currentRenderingContext.textScale = (requestedBox.getDensity() * app.getOsmandMap().getTextScale())
 					/ mapDensity;
 			
 			currentRenderingContext.screenDensityRatio = 1 / Math.max(1, requestedBox.getDensity()) ;
diff --git a/OsmAnd/src/net/osmand/plus/render/MapVectorLayer.java b/OsmAnd/src/net/osmand/plus/render/MapVectorLayer.java
index 47071c8a0c2..1fa6d68154e 100644
--- a/OsmAnd/src/net/osmand/plus/render/MapVectorLayer.java
+++ b/OsmAnd/src/net/osmand/plus/render/MapVectorLayer.java
@@ -151,7 +151,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tilesRect, DrawSe
 			mapRenderer.setAzimuth(-tilesRect.getRotate());
 			mapRenderer.setZoom((float) (tilesRect.getZoom() + tilesRect.getZoomAnimation() + tilesRect
 					.getZoomFloatPart()));
-			float zoomMagnifier = st.MAP_DENSITY.get();
+			float zoomMagnifier = getMapDensity();
 			mapRenderer.setVisualZoomShift(zoomMagnifier - 1.0f);
 		} else {
 			if (!view.isZooming()) {
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
index ba7b8717519..589c99dd4ac 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
@@ -4,6 +4,7 @@
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.CONFIGURE_MAP_ITEM_ID_SCHEME;
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.DRAWER_ITEM_ID_SCHEME;
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.MAP_CONTEXT_MENU_ACTIONS;
+import static net.osmand.plus.auto.CarSurfaceView.TEXT_SCALE_DIVIDER_160;
 import static net.osmand.plus.routing.TransportRoutingHelper.PUBLIC_TRANSPORT_KEY;
 
 import android.annotation.SuppressLint;
@@ -63,6 +64,7 @@
 import net.osmand.plus.routing.ColoringType;
 import net.osmand.plus.routing.RouteService;
 import net.osmand.plus.srtmplugin.TerrainMode;
+import net.osmand.plus.views.OsmandMapTileView;
 import net.osmand.plus.views.layers.RadiusRulerControlLayer.RadiusRulerMode;
 import net.osmand.plus.voice.CommandPlayer;
 import net.osmand.plus.wikipedia.WikiArticleShowImages;
diff --git a/OsmAnd/src/net/osmand/plus/views/OsmandMap.java b/OsmAnd/src/net/osmand/plus/views/OsmandMap.java
index 89ce8f92b0e..939b61cedc7 100644
--- a/OsmAnd/src/net/osmand/plus/views/OsmandMap.java
+++ b/OsmAnd/src/net/osmand/plus/views/OsmandMap.java
@@ -1,5 +1,8 @@
 package net.osmand.plus.views;
 
+import static net.osmand.plus.auto.CarSurfaceView.MAP_DENSITY_DIVIDER_160;
+import static net.osmand.plus.auto.CarSurfaceView.TEXT_SCALE_DIVIDER_160;
+
 import android.content.Context;
 import android.graphics.Point;
 import android.view.Display;
@@ -179,4 +182,26 @@ public void onNavigationSessionChanged(@Nullable NavigationSession navigationSes
 			app.getMapViewTrackingUtilities().setMapView(null);
 		}
 	}
+
+	public float getTextScale() {
+		float scale = app.getSettings().TEXT_SCALE.get();
+		return scale * getScaleCoef(true);
+	}
+
+	public float getMapDensity() {
+		float scale = app.getSettings().MAP_DENSITY.get();
+		return scale * getScaleCoef(false);
+	}
+
+	public float getScaleCoef(boolean textScale) {
+		OsmandMapTileView mapView = app.getOsmandMap().getMapView();
+		if (mapView.isCarView()) {
+			float carViewDensity = mapView.getCarViewDensity();
+			float density = mapView.getDensity();
+			if (density >= 2 && carViewDensity == 1) {
+				return textScale ? TEXT_SCALE_DIVIDER_160 : MAP_DENSITY_DIVIDER_160;
+			}
+		}
+		return 1f;
+	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/views/OsmandMapLayer.java b/OsmAnd/src/net/osmand/plus/views/OsmandMapLayer.java
index 68220527609..80228da71e7 100644
--- a/OsmAnd/src/net/osmand/plus/views/OsmandMapLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/OsmandMapLayer.java
@@ -1,6 +1,11 @@
 package net.osmand.plus.views;
 
+import static net.osmand.plus.auto.CarSurfaceView.MAP_DENSITY_DIVIDER_160;
+import static net.osmand.plus.auto.CarSurfaceView.TEXT_SCALE_DIVIDER_160;
+
 import android.content.Context;
+import android.graphics.Bitmap;
+import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
 import android.graphics.Color;
 import android.graphics.ColorFilter;
@@ -18,10 +23,12 @@
 import android.view.MotionEvent;
 import android.widget.ImageView;
 
+import androidx.annotation.DrawableRes;
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.annotation.StringRes;
 
+import net.osmand.AndroidUtils;
 import net.osmand.PlatformUtil;
 import net.osmand.binary.BinaryMapIndexReader;
 import net.osmand.data.Amenity;
@@ -304,7 +311,7 @@ public int getDefaultRadiusPoi(RotatedTileBox tb) {
 	}
 
 	protected float getIconSize(OsmandApplication app) {
-		return app.getResources().getDimensionPixelSize(R.dimen.favorites_icon_outline_size) * ICON_VISIBLE_PART_RATIO * app.getSettings().TEXT_SCALE.get();
+		return app.getResources().getDimensionPixelSize(R.dimen.favorites_icon_outline_size) * ICON_VISIBLE_PART_RATIO * getTextScale();
 	}
 
 	public Rect getIconDestinationRect(float x, float y, int width, int height, float scale) {
@@ -320,7 +327,7 @@ public Rect getIconDestinationRect(float x, float y, int width, int height, floa
 	}
 
 	public int getScaledTouchRadius(OsmandApplication app, int radiusPoi) {
-		float textScale = app.getSettings().TEXT_SCALE.get();
+		float textScale = getTextScale();
 		if (textScale < 1.0f) {
 			textScale = 1.0f;
 		}
@@ -336,6 +343,33 @@ public void setMapButtonIcon(ImageView imageView, Drawable icon) {
 		imageView.setImageDrawable(icon);
 	}
 
+	@Nullable
+	protected Bitmap getScaledBitmap(@DrawableRes int drawableId) {
+		return getScaledBitmap(drawableId, getTextScale());
+	}
+
+	protected Bitmap getScaledBitmap(@DrawableRes int drawableId, float scale) {
+		OsmandApplication app = getApplication();
+		Bitmap bitmap = BitmapFactory.decodeResource(app.getResources(), drawableId);
+		if (bitmap != null && scale != 1f && scale > 0) {
+			bitmap = AndroidUtils.scaleBitmap(bitmap,
+					(int) (bitmap.getWidth() * scale), (int) (bitmap.getHeight() * scale), false);
+		}
+		return bitmap;
+	}
+
+	public float getTextScale() {
+		return getApplication().getOsmandMap().getTextScale();
+	}
+
+	public float getMapDensity() {
+		return getApplication().getOsmandMap().getMapDensity();
+	}
+
+	public float getScaleCoef(boolean textScale) {
+		return getApplication().getOsmandMap().getScaleCoef(textScale);
+	}
+
 	public abstract class MapLayerData<T> {
 		public int ZOOM_THRESHOLD = 1;
 		public RotatedTileBox queriedBox;
diff --git a/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java b/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
index 7541bfa477b..cef75490ded 100644
--- a/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
+++ b/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
@@ -546,7 +546,9 @@ public double getZoomFractionalPart() {
 	}
 
 	public double getSettingsMapDensity() {
-		return (getSettings().MAP_DENSITY.get()) * Math.max(1, getDensity());
+		OsmandMap map = application.getOsmandMap();
+		return (map != null ? map.getMapDensity() : getSettings().MAP_DENSITY.get())
+				* Math.max(1, getDensity());
 	}
 
 
@@ -641,6 +643,17 @@ public int getMinZoom() {
 		return BaseMapLayer.DEFAULT_MIN_ZOOM;
 	}
 
+	public boolean isCarView() {
+		return view instanceof CarSurfaceView;
+	}
+
+	public float getCarViewDensity() {
+		if (view instanceof CarSurfaceView) {
+			return ((CarSurfaceView) view).getDensity();
+		}
+		return 0;
+	}
+
 	private void drawBasemap(Canvas canvas) {
 		if (bufferImgLoc != null) {
 			float rot = -bufferImgLoc.getRotate();
@@ -736,9 +749,7 @@ private void refreshMapInternal(DrawSettings drawSettings) {
 				currentViewport.getCenterPixelY() != cy ||
 				currentViewport.getCenterPixelX() != cx) {
 			currentViewport.setPixelDimensions(view.getWidth(), view.getHeight(), ratiox, ratioy);
-			if (view instanceof CarSurfaceView) {
-				currentViewport.setDensity(((CarSurfaceView) view).getDensity());
-			}
+			currentViewport.setMapDensity(getSettingsMapDensity());
 			refreshBufferImage(drawSettings);
 		}
 		if (view instanceof SurfaceView) {
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/BaseRouteLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/BaseRouteLayer.java
index ac218473228..fa73b505367 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/BaseRouteLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/BaseRouteLayer.java
@@ -14,6 +14,7 @@
 import androidx.annotation.ColorInt;
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
+import androidx.core.content.ContextCompat;
 
 import net.osmand.AndroidUtils;
 import net.osmand.PlatformUtil;
@@ -68,6 +69,10 @@ public BaseRouteLayer(@NonNull Context ctx) {
 	@Override
 	public void initLayer(@NonNull OsmandMapTileView view) {
 		this.view = view;
+		init();
+	}
+
+	private void init() {
 		float density = view.getDensity();
 		initAttrs(density);
 		initGeometries(density);
@@ -79,7 +84,7 @@ protected void initAttrs(float density) {
 		attrs = new RenderingLineAttributes("route");
 		attrs.defaultWidth = (int) (12 * density);
 		attrs.defaultWidth3 = (int) (7 * density);
-		attrs.defaultColor = view.getResources().getColor(R.color.nav_track);
+		attrs.defaultColor = ContextCompat.getColor(view.getContext(), R.color.nav_track);
 		attrs.paint3.setStrokeCap(Paint.Cap.BUTT);
 		attrs.paint3.setColor(Color.WHITE);
 		attrs.paint2.setStrokeCap(Paint.Cap.BUTT);
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/ContextMenuLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/ContextMenuLayer.java
index 68572c9b6ce..dd2dff51794 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/ContextMenuLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/ContextMenuLayer.java
@@ -248,7 +248,7 @@ public void onDraw(Canvas canvas, RotatedTileBox box, DrawSettings nightMode) {
 		}
 		float textScale = 1f;
 		if (!pressedLatLonSmall.isEmpty() || !pressedLatLonFull.isEmpty()) {
-			textScale = getApplication().getSettings().TEXT_SCALE.get();
+			textScale = getTextScale();
 		}
 		for (Entry<LatLon, BackgroundType> entry : pressedLatLonSmall.entrySet()) {
 			LatLon latLon = entry.getKey();
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/FavouritesLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/FavouritesLayer.java
index 9a0c3c87054..71cfb557d31 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/FavouritesLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/FavouritesLayer.java
@@ -89,7 +89,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 			FavouritePoint objectInMotion = (FavouritePoint) contextMenuLayer.getMoveableObject();
 			PointF pf = contextMenuLayer.getMovableCenterPoint(tileBox);
 			MapMarker mapMarker = mapMarkersHelper.getMapMarker(objectInMotion);
-			float textScale = this.settings.TEXT_SCALE.get();
+			float textScale = getTextScale();
 			drawBigPoint(canvas, objectInMotion, pf.x, pf.y, mapMarker, textScale);
 		}
 	}
@@ -99,7 +99,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 		cache.clear();
 		if (this.settings.SHOW_FAVORITES.get() && favouritesDbHelper.isFavoritesLoaded()) {
 			if (tileBox.getZoom() >= startZoom) {
-				float textScale = this.settings.TEXT_SCALE.get();
+				float textScale = getTextScale();
 				float iconSize = getIconSize(view.getApplication());
 				QuadTree<QuadRect> boundIntersections = initBoundIntersections(tileBox);
 
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/GPXLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/GPXLayer.java
index 51ecf481f40..e7722478f3b 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/GPXLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/GPXLayer.java
@@ -245,7 +245,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 			if (gpxFile != null) {
 				PointF pf = contextMenuLayer.getMovableCenterPoint(tileBox);
 				MapMarker mapMarker = mapMarkersHelper.getMapMarker(objectInMotion);
-				float textScale = view.getSettings().TEXT_SCALE.get();
+				float textScale = getTextScale();
 				drawBigPoint(canvas, objectInMotion, getFileColor(gpxFile), pf.x, pf.y, mapMarker, textScale);
 			}
 		}
@@ -512,7 +512,7 @@ private void drawPoint(Canvas canvas, QuadRect rect, Drawable icon) {
 
 	private void drawSelectedFilesPoints(Canvas canvas, RotatedTileBox tileBox, List<SelectedGpxFile> selectedGPXFiles) {
 		if (tileBox.getZoom() >= START_ZOOM) {
-			float textScale = view.getSettings().TEXT_SCALE.get();
+			float textScale = getTextScale();
 			float iconSize = getIconSize(view.getApplication());
 			QuadTree<QuadRect> boundIntersections = initBoundIntersections(tileBox);
 
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/ImpassableRoadsLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/ImpassableRoadsLayer.java
index 1d9756745b6..cf1d8b214a9 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/ImpassableRoadsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/ImpassableRoadsLayer.java
@@ -93,7 +93,7 @@ private void drawPoint(Canvas canvas, RotatedTileBox tileBox, double latitude, d
 	}
 
 	private void drawPoint(Canvas canvas, float x, float y, boolean active) {
-		float textScale = getApplication().getSettings().TEXT_SCALE.get();
+		float textScale = getTextScale();
 		y -= roadWorkIcon.getHeight() / 2f * textScale;
 		Rect destRect = getIconDestinationRect(x, y, roadWorkIcon.getWidth(), roadWorkIcon.getHeight(), textScale);
 		canvas.drawBitmap(roadWorkIcon, null, destRect, active ? activePaint : paint);
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
index 85fea527f0d..04470a88d6f 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
@@ -465,7 +465,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings drawSetti
 			streetNameView.updateInfo(drawSettings);
 			topToolbarView.updateInfo();
 			topCoordinatesView.updateInfo();
-			alarmControl.updateInfo(drawSettings);
+			alarmControl.updateInfo(drawSettings, false);
 			lanesControl.updateInfo(drawSettings);
 
 			for (RulerWidget rulerWidget : rulerWidgets) {
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapMarkersLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapMarkersLayer.java
index 76ae7ec966e..b9f99a89f41 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapMarkersLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapMarkersLayer.java
@@ -2,7 +2,6 @@
 
 import android.content.Context;
 import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
 import android.graphics.Paint;
 import android.graphics.Path;
@@ -94,7 +93,7 @@ public class MapMarkersLayer extends OsmandMapLayer implements IContextMenuProvi
 	private TrkSegment route;
 
 	private float textSize;
-	private int verticalOffset;
+	private float verticalOffset;
 
 	private final List<Float> tx = new ArrayList<>();
 	private final List<Float> ty = new ArrayList<>();
@@ -111,6 +110,9 @@ public class MapMarkersLayer extends OsmandMapLayer implements IContextMenuProvi
 
 	private boolean inPlanRouteMode;
 	private boolean defaultAppMode = true;
+	private boolean carView;
+	private float textScale = 1f;
+	private double markerSizePx;
 
 	private final List<Amenity> amenities = new ArrayList<>();
 
@@ -138,17 +140,9 @@ private void initUI() {
 		bitmapPaint = new Paint();
 		bitmapPaint.setAntiAlias(true);
 		bitmapPaint.setFilterBitmap(true);
-		markerBitmapBlue = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_blue);
-		markerBitmapGreen = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_green);
-		markerBitmapOrange = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_orange);
-		markerBitmapRed = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_red);
-		markerBitmapYellow = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_yellow);
-		markerBitmapTeal = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_teal);
-		markerBitmapPurple = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_purple);
-
-		arrowLight = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_direction_arrow_p1_light);
-		arrowToDestination = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_direction_arrow_p2_color);
-		arrowShadow = BitmapFactory.decodeResource(view.getResources(), R.drawable.map_marker_direction_arrow_p3_shadow);
+
+		updateBitmaps(true);
+
 		bitmapPaintDestBlue = createPaintDest(R.color.marker_blue);
 		bitmapPaintDestGreen = createPaintDest(R.color.marker_green);
 		bitmapPaintDestOrange = createPaintDest(R.color.marker_orange);
@@ -158,9 +152,6 @@ private void initUI() {
 		bitmapPaintDestPurple = createPaintDest(R.color.marker_purple);
 
 		contextMenuLayer = view.getLayerByClass(ContextMenuLayer.class);
-
-		textSize = getContext().getResources().getDimensionPixelSize(R.dimen.guide_line_text_size);
-		verticalOffset = getContext().getResources().getDimensionPixelSize(R.dimen.guide_line_vertical_offset);
 	}
 
 	@Override
@@ -319,7 +310,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 				text = TextUtils.ellipsize(text, textPaint, pm.getLength(), TextUtils.TruncateAt.END).toString();
 				Rect bounds = new Rect();
 				textAttrs.paint.getTextBounds(text, 0, text.length(), bounds);
-				float hOffset = pm.getLength() / 2 - bounds.width() / 2;
+				float hOffset = pm.getLength() / 2 - bounds.width() / 2f;
 				lineAttrs.paint.setColor(colors[marker.colorIndex]);
 
 				canvas.rotate(-tileBox.getRotate(), tileBox.getCenterPixelX(), tileBox.getCenterPixelY());
@@ -343,18 +334,19 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings nightMode
 		if (widgetsFactory != null) {
 			widgetsFactory.updateInfo(useFingerLocation ? fingerLocation : null, tileBox.getZoom());
 		}
-		OsmandSettings settings = getApplication().getSettings();
+		OsmandApplication app = getApplication();
+		OsmandSettings settings = app.getSettings();
 
 		if (tileBox.getZoom() < 3 || !settings.SHOW_MAP_MARKERS.get()) {
 			return;
 		}
 
 		int displayedWidgets = settings.DISPLAYED_MARKERS_WIDGETS_COUNT.get();
-
-		MapMarkersHelper markersHelper = getApplication().getMapMarkersHelper();
+		MapMarkersHelper markersHelper = app.getMapMarkersHelper();
+		updateBitmaps(false);
 
 		for (MapMarker marker : markersHelper.getMapMarkers()) {
-			if (isLocationVisible(tileBox, marker) && !overlappedByWaypoint(marker)
+			if (isMarkerVisible(tileBox, marker) && !overlappedByWaypoint(marker)
 					&& !isInMotion(marker) && !isSynced(marker)) {
 				Bitmap bmp = getMapMarkerBitmap(marker.colorIndex);
 				int marginX = bmp.getWidth() / 6;
@@ -406,6 +398,42 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings nightMode
 		}
 	}
 
+	private void updateBitmaps(boolean forceUpdate) {
+		OsmandApplication app = getApplication();
+		float textScale = getTextScale();
+		boolean carView = app.getOsmandMap().getMapView().isCarView();
+		if (this.textScale != textScale || this.carView != carView || forceUpdate) {
+			this.textScale = textScale;
+			this.carView = carView;
+			recreateBitmaps();
+			textSize = app.getResources().getDimensionPixelSize(R.dimen.guide_line_text_size) * textScale;
+			verticalOffset = app.getResources().getDimensionPixelSize(R.dimen.guide_line_vertical_offset) * textScale;
+		}
+	}
+
+	private void recreateBitmaps() {
+		markerBitmapBlue = getScaledBitmap(R.drawable.map_marker_blue);
+		markerBitmapGreen = getScaledBitmap(R.drawable.map_marker_green);
+		markerBitmapOrange = getScaledBitmap(R.drawable.map_marker_orange);
+		markerBitmapRed = getScaledBitmap(R.drawable.map_marker_red);
+		markerBitmapYellow = getScaledBitmap(R.drawable.map_marker_yellow);
+		markerBitmapTeal = getScaledBitmap(R.drawable.map_marker_teal);
+		markerBitmapPurple = getScaledBitmap(R.drawable.map_marker_purple);
+
+		markerSizePx = Math.sqrt(markerBitmapBlue.getWidth() * markerBitmapBlue.getWidth()
+				+ markerBitmapBlue.getHeight() * markerBitmapBlue.getHeight());
+
+		arrowLight = getScaledBitmap(R.drawable.map_marker_direction_arrow_p1_light);
+		arrowToDestination = getScaledBitmap(R.drawable.map_marker_direction_arrow_p2_color);
+		arrowShadow = getScaledBitmap(R.drawable.map_marker_direction_arrow_p3_shadow);
+	}
+
+	@Nullable
+	@Override
+	protected Bitmap getScaledBitmap(int drawableId) {
+		return getScaledBitmap(drawableId, textScale);
+	}
+
 	private boolean isSynced(@NonNull MapMarker marker) {
 		return marker.wptPt != null || marker.favouritePoint != null;
 	}
@@ -419,17 +447,25 @@ public boolean isLocationVisible(RotatedTileBox tb, MapMarker marker) {
 		if (marker == null || tb == null) {
 			return false;
 		}
-		return containsLatLon(tb, marker.getLatitude(), marker.getLongitude());
+		return containsLatLon(tb, marker.getLatitude(), marker.getLongitude(), 0, 0);
+	}
+
+	public boolean isMarkerVisible(RotatedTileBox tb, MapMarker marker) {
+		//noinspection SimplifiableIfStatement
+		if (marker == null || tb == null) {
+			return false;
+		}
+		return containsLatLon(tb, marker.getLatitude(), marker.getLongitude(), markerSizePx, markerSizePx);
 	}
 
-	public boolean containsLatLon(RotatedTileBox tb, double lat, double lon) {
+	public boolean containsLatLon(RotatedTileBox tb, double lat, double lon, double w, double h) {
 		double widgetHeight = 0;
-		if (widgetsFactory != null && widgetsFactory.isTopBarVisible()) {
+		if (widgetsFactory != null && widgetsFactory.isTopBarVisible() && !getApplication().getOsmandMap().getMapView().isCarView()) {
 			widgetHeight = widgetsFactory.getTopBarHeight();
 		}
 		double tx = tb.getPixXFromLatLon(lat, lon);
 		double ty = tb.getPixYFromLatLon(lat, lon);
-		return tx >= 0 && tx <= tb.getPixWidth() && ty >= widgetHeight && ty <= tb.getPixHeight();
+		return tx >= -w && tx <= tb.getPixWidth() + w && ty >= widgetHeight - h && ty <= tb.getPixHeight() + h;
 	}
 
 	public boolean overlappedByWaypoint(MapMarker marker) {
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapTextLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapTextLayer.java
index ec252fe5a53..9d5fd071363 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapTextLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapTextLayer.java
@@ -197,7 +197,7 @@ public boolean drawInScreenPixels() {
 	}
 
 	private void updateTextSize() {
-		float scale = view.getApplication().getSettings().TEXT_SCALE.get();
+		float scale = getTextScale();
 		float textSize = scale * TEXT_SIZE * view.getDensity();
 		if (paintTextIcon.getTextSize() != textSize) {
 			paintTextIcon.setTextSize(textSize);
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
index 9e79131b8de..fe175a2c773 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
@@ -113,7 +113,7 @@ protected List<Amenity> calculateResult(RotatedTileBox tileBox) {
 				if (calculatedFilters.isEmpty() || latLonBounds == null) {
 					return new ArrayList<>();
 				}
-				int z = (int) Math.floor(tileBox.getZoom() + Math.log(view.getSettings().MAP_DENSITY.get()) / Math.log(2));
+				int z = (int) Math.floor(tileBox.getZoom() + Math.log(getMapDensity()) / Math.log(2));
 
 				List<Amenity> res = new ArrayList<>();
 				PoiUIFilter.combineStandardPoiFilters(calculatedFilters, app);
@@ -204,7 +204,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 				data.queryNewData(tileBox);
 				List<Amenity> objects = data.getResults();
 				if (objects != null) {
-					float textScale = app.getSettings().TEXT_SCALE.get();
+					float textScale = getTextScale();
 					float iconSize = getIconSize(app);
 					QuadTree<QuadRect> boundIntersections = initBoundIntersections(tileBox);
 					WaypointHelper wph = app.getWaypointHelper();
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/PointLocationLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/PointLocationLayer.java
index b0a7174156a..e2eb68fa66b 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/PointLocationLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/PointLocationLayer.java
@@ -5,7 +5,6 @@
 
 import android.content.Context;
 import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
 import android.graphics.Paint;
 import android.graphics.Paint.Style;
@@ -22,6 +21,7 @@
 import androidx.core.content.ContextCompat;
 import androidx.core.graphics.drawable.DrawableCompat;
 
+import net.osmand.AndroidUtils;
 import net.osmand.Location;
 import net.osmand.PlatformUtil;
 import net.osmand.data.LatLon;
@@ -47,12 +47,15 @@ public class PointLocationLayer extends OsmandMapLayer implements IContextMenuPr
 	protected final static int RADIUS = 7;
 
 	private Paint headingPaint;
+	private Paint bitmapPaint;
 	private Paint area;
 	private Paint aroundArea;
 
 	private OsmandMapTileView view;
 
 	private ApplicationMode appMode;
+	private boolean carView = false;
+	private float textScale = 1f;
 	@ColorInt
 	private int color;
 	private LayerDrawable navigationIcon;
@@ -73,6 +76,7 @@ public PointLocationLayer(@NonNull Context context) {
 
 	private void initUI() {
 		headingPaint = new Paint(ANTI_ALIAS_FLAG | FILTER_BITMAP_FLAG);
+		bitmapPaint = new Paint(ANTI_ALIAS_FLAG | FILTER_BITMAP_FLAG);
 		area = new Paint();
 		aroundArea = new Paint();
 		aroundArea.setStyle(Style.STROKE);
@@ -139,21 +143,36 @@ public void onDraw(Canvas canvas, RotatedTileBox box, DrawSettings nightMode) {
 			// Issue 5538: Some devices return positives for hasBearing() at rest, hence add 0.0 check:
 			boolean isBearing = lastKnownLocation.hasBearing() && (lastKnownLocation.getBearing() != 0.0)
 					&& (!lastKnownLocation.hasSpeed() || lastKnownLocation.getSpeed() > 0.1);
-
 			if (!locationOutdated && isBearing) {
 				float bearing = lastKnownLocation.getBearing();
 				canvas.rotate(bearing - 90, locationX, locationY);
-				navigationIcon.setBounds(locationX - navigationIcon.getIntrinsicWidth() / 2,
-						locationY - navigationIcon.getIntrinsicHeight() / 2,
-						locationX + navigationIcon.getIntrinsicWidth() / 2,
-						locationY + navigationIcon.getIntrinsicHeight() / 2);
-				navigationIcon.draw(canvas);
+				int width = (int) (navigationIcon.getIntrinsicWidth() * textScale);
+				int height = (int) (navigationIcon.getIntrinsicHeight() * textScale);
+				width += width % 2 == 1 ? 1 : 0;
+				height += height % 2 == 1 ? 1 : 0;
+				if (textScale == 1) {
+					navigationIcon.setBounds(locationX - width / 2, locationY - height / 2,
+							locationX + width / 2, locationY + height / 2);
+					navigationIcon.draw(canvas);
+				} else {
+					navigationIcon.setBounds(0, 0, width, height);
+					Bitmap bitmap = AndroidUtils.createScaledBitmap(navigationIcon, width, height);
+					canvas.drawBitmap(bitmap, locationX - width / 2, locationY - height / 2, bitmapPaint);
+				}
 			} else {
-				locationIcon.setBounds(locationX - locationIcon.getIntrinsicWidth() / 2,
-						locationY - locationIcon.getIntrinsicHeight() / 2,
-						locationX + locationIcon.getIntrinsicWidth() / 2,
-						locationY + locationIcon.getIntrinsicHeight() / 2);
-				locationIcon.draw(canvas);
+				int width = (int) (locationIcon.getIntrinsicWidth() * textScale);
+				int height = (int) (locationIcon.getIntrinsicHeight() * textScale);
+				width += width % 2 == 1 ? 1 : 0;
+				height += height % 2 == 1 ? 1 : 0;
+				if (textScale == 1) {
+					locationIcon.setBounds(locationX - width / 2, locationY - height / 2,
+							locationX + width / 2, locationY + height / 2);
+					locationIcon.draw(canvas);
+				} else {
+					locationIcon.setBounds(0, 0, width, height);
+					Bitmap bitmap = AndroidUtils.createScaledBitmap(locationIcon, width, height);
+					canvas.drawBitmap(bitmap, locationX - width / 2, locationY - height / 2, bitmapPaint);
+				}
 			}
 		}
 	}
@@ -174,11 +193,15 @@ private void updateIcons(ApplicationMode appMode, boolean nighMode, boolean loca
 		int locationIconId = appMode.getLocationIcon().getIconId();
 		int navigationIconId = appMode.getNavigationIcon().getIconId();
 		int headingIconId = appMode.getLocationIcon().getHeadingIconId();
+		float textScale = getTextScale();
+		boolean carView = getApplication().getOsmandMap().getMapView().isCarView();
 		if (appMode != this.appMode || this.nm != nighMode || this.locationOutdated != locationOutdated
 				|| this.color != color
 				|| this.locationIconId != locationIconId
 				|| this.headingIconId != headingIconId
-				|| this.navigationIconId != navigationIconId) {
+				|| this.navigationIconId != navigationIconId
+				|| this.textScale != textScale
+				|| this.carView != carView) {
 			this.appMode = appMode;
 			this.color = color;
 			this.nm = nighMode;
@@ -186,11 +209,13 @@ private void updateIcons(ApplicationMode appMode, boolean nighMode, boolean loca
 			this.locationIconId = locationIconId;
 			this.headingIconId = headingIconId;
 			this.navigationIconId = navigationIconId;
+			this.textScale = textScale;
+			this.carView = carView;
 			navigationIcon = (LayerDrawable) AppCompatResources.getDrawable(ctx, navigationIconId);
 			if (navigationIcon != null) {
 				DrawableCompat.setTint(navigationIcon.getDrawable(1), color);
 			}
-			headingIcon = BitmapFactory.decodeResource(view.getResources(), headingIconId);
+			headingIcon = getScaledBitmap(headingIconId);
 			headingPaint.setColorFilter(new PorterDuffColorFilter(color, PorterDuff.Mode.SRC_IN));
 			locationIcon = (LayerDrawable) AppCompatResources.getDrawable(ctx, locationIconId);
 			if (locationIcon != null) {
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/PointNavigationLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/PointNavigationLayer.java
index 1f55cc12585..eae611e7a1c 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/PointNavigationLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/PointNavigationLayer.java
@@ -3,7 +3,6 @@
 import android.content.Context;
 import android.content.res.Resources;
 import android.graphics.Bitmap;
-import android.graphics.BitmapFactory;
 import android.graphics.Canvas;
 import android.graphics.Paint;
 import android.graphics.Paint.Align;
@@ -15,6 +14,7 @@
 import net.osmand.data.LatLon;
 import net.osmand.data.PointDescription;
 import net.osmand.data.RotatedTileBox;
+import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.TargetPointsHelper;
 import net.osmand.plus.TargetPointsHelper.TargetPoint;
@@ -31,6 +31,9 @@ public class PointNavigationLayer extends OsmandMapLayer implements
 	private Paint mBitmapPaint;
 
 	private OsmandMapTileView mView;
+	private boolean carView;
+	private float textScale = 1f;
+	private double pointSizePx;
 
 	private Bitmap mStartPoint;
 	private Bitmap mTargetPoint;
@@ -55,9 +58,8 @@ private void initUI() {
 		mTextPaint.setTextSize(sp * 18);
 		mTextPaint.setTextAlign(Align.CENTER);
 		mTextPaint.setAntiAlias(true);
-		mStartPoint = BitmapFactory.decodeResource(mView.getResources(), R.drawable.map_start_point);
-		mTargetPoint = BitmapFactory.decodeResource(mView.getResources(), R.drawable.map_target_point);
-		mIntermediatePoint = BitmapFactory.decodeResource(mView.getResources(), R.drawable.map_intermediate_point);
+
+		updateBitmaps(true);
 	}
 
 	@Override
@@ -73,6 +75,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tb, DrawSettings nightMode) {
 		if (tb.getZoom() < 3) {
 			return;
 		}
+		updateBitmaps(false);
 
 		TargetPointsHelper targetPoints = getApplication().getTargetPointsHelper();
 		TargetPoint pointToStart = targetPoints.getPointToStart();
@@ -117,6 +120,31 @@ public void onDraw(Canvas canvas, RotatedTileBox tb, DrawSettings nightMode) {
 
 	}
 
+	private void updateBitmaps(boolean forceUpdate) {
+		OsmandApplication app = getApplication();
+		float textScale = getTextScale();
+		boolean carView = app.getOsmandMap().getMapView().isCarView();
+		if (this.textScale != textScale || this.carView != carView || forceUpdate) {
+			this.textScale = textScale;
+			this.carView = carView;
+			recreateBitmaps();
+			pointSizePx = Math.sqrt(mTargetPoint.getWidth() * mTargetPoint.getWidth()
+					+ mTargetPoint.getHeight() * mTargetPoint.getHeight());
+		}
+	}
+
+	private void recreateBitmaps() {
+		mStartPoint = getScaledBitmap(R.drawable.map_start_point);
+		mTargetPoint = getScaledBitmap(R.drawable.map_target_point);
+		mIntermediatePoint = getScaledBitmap(R.drawable.map_intermediate_point);
+	}
+
+	@Nullable
+	@Override
+	protected Bitmap getScaledBitmap(int drawableId) {
+		return getScaledBitmap(drawableId, textScale);
+	}
+
 	private float getPointX(RotatedTileBox tileBox, TargetPoint point) {
 		if (contextMenuLayer.getMoveableObject() != null
 				&& point == contextMenuLayer.getMoveableObject()) {
@@ -142,7 +170,9 @@ public boolean isLocationVisible(RotatedTileBox tb, TargetPoint p) {
 		} else if (p == null || tb == null) {
 			return false;
 		}
-		return tb.containsLatLon(p.getLatitude(), p.getLongitude());
+		double tx = tb.getPixXFromLatLon(p.getLatitude(), p.getLongitude());
+		double ty = tb.getPixYFromLatLon(p.getLatitude(), p.getLongitude());
+		return tx >= -pointSizePx && tx <= tb.getPixWidth() + pointSizePx && ty >= -pointSizePx && ty <= tb.getPixHeight() + pointSizePx;
 	}
 
 
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/RadiusRulerControlLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/RadiusRulerControlLayer.java
index f57d44967f8..1c6be812de3 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/RadiusRulerControlLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/RadiusRulerControlLayer.java
@@ -29,7 +29,6 @@
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.helpers.enums.AngularConstants;
 import net.osmand.plus.helpers.enums.MetricsConstants;
-import net.osmand.plus.settings.backend.OsmandPreference;
 import net.osmand.plus.views.OsmandMapLayer;
 import net.osmand.plus.views.OsmandMapTileView;
 import net.osmand.util.MapUtils;
@@ -56,7 +55,6 @@ public class RadiusRulerControlLayer extends OsmandMapLayer {
 
 	private QuadPoint cacheCenter;
 	private float cacheMapDensity;
-	private OsmandPreference<Float> mapDensity;
 	private MetricsConstants cacheMetricSystem;
 	private int cacheIntZoom;
 	private LatLon cacheCenterLatLon;
@@ -93,9 +91,8 @@ public RadiusRulerControlLayer(@NonNull Context ctx) {
 	public void initLayer(@NonNull final OsmandMapTileView view) {
 		app = getApplication();
 		this.view = view;
-		mapDensity = app.getSettings().MAP_DENSITY;
 		cacheMetricSystem = app.getSettings().METRIC_SYSTEM.get();
-		cacheMapDensity = mapDensity.get();
+		cacheMapDensity = getMapDensity();
 		cacheDistances = new ArrayList<>();
 		cacheCenter = new QuadPoint();
 		maxRadiusInDp = app.getResources().getDimensionPixelSize(R.dimen.map_ruler_width);
@@ -256,8 +253,9 @@ private void updateData(RotatedTileBox tb, QuadPoint center) {
 			}
 
 			MetricsConstants currentMetricSystem = app.getSettings().METRIC_SYSTEM.get();
+			float mapDensity = getMapDensity();
 			boolean updateCache = tb.getZoom() != cacheIntZoom
-					|| !tb.getCenterLatLon().equals(cacheCenterLatLon) || mapDensity.get() != cacheMapDensity
+					|| !tb.getCenterLatLon().equals(cacheCenterLatLon) || mapDensity != cacheMapDensity
 					|| cacheMetricSystem != currentMetricSystem;
 
 			if (!tb.isZoomAnimated() && updateCache) {
@@ -265,7 +263,7 @@ private void updateData(RotatedTileBox tb, QuadPoint center) {
 				cacheIntZoom = tb.getZoom();
 				LatLon centerLatLon = tb.getCenterLatLon();
 				cacheCenterLatLon = new LatLon(centerLatLon.getLatitude(), centerLatLon.getLongitude());
-				cacheMapDensity = mapDensity.get();
+				cacheMapDensity = mapDensity;
 				updateDistance(tb);
 			}
 		}
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/RouteLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/RouteLayer.java
index 1a18f9786ed..f4b60e28964 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/RouteLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/RouteLayer.java
@@ -14,6 +14,7 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.appcompat.content.res.AppCompatResources;
+import androidx.core.content.ContextCompat;
 
 import net.osmand.AndroidUtils;
 import net.osmand.Location;
@@ -98,7 +99,7 @@ protected void initAttrs(float density) {
 		attrsPT = new RenderingLineAttributes("publicTransportLine");
 		attrsPT.defaultWidth = (int) (12 * density);
 		attrsPT.defaultWidth3 = (int) (7 * density);
-		attrsPT.defaultColor = view.getResources().getColor(R.color.nav_track);
+		attrsPT.defaultColor = ContextCompat.getColor(view.getContext(), R.color.nav_track);
 		attrsPT.paint3.setStrokeCap(Cap.BUTT);
 		attrsPT.paint3.setColor(Color.WHITE);
 		attrsPT.paint2.setStrokeCap(Cap.BUTT);
@@ -107,7 +108,7 @@ protected void initAttrs(float density) {
 		attrsW = new RenderingLineAttributes("walkingRouteLine");
 		attrsW.defaultWidth = (int) (12 * density);
 		attrsW.defaultWidth3 = (int) (7 * density);
-		attrsW.defaultColor = view.getResources().getColor(R.color.nav_track_walk_fill);
+		attrsW.defaultColor = ContextCompat.getColor(view.getContext(), R.color.nav_track_walk_fill);
 		attrsW.paint3.setStrokeCap(Cap.BUTT);
 		attrsW.paint3.setColor(Color.WHITE);
 		attrsW.paint2.setStrokeCap(Cap.BUTT);
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/TransportStopsLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/TransportStopsLayer.java
index 73e7415942c..fdb8fa1d956 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/TransportStopsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/TransportStopsLayer.java
@@ -215,7 +215,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tb, DrawSettings
 
 		if (objects != null) {
 			Context ctx = getContext();
-			float textScale = app.getSettings().TEXT_SCALE.get();
+			float textScale = getTextScale();
 			float iconSize = getIconSize(app);
 			QuadTree<QuadRect> boundIntersections = initBoundIntersections(tb);
 			List<TransportStop> fullObjects = new ArrayList<>();
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AlarmWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AlarmWidget.java
index 94765b2d127..030a91b6f2a 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AlarmWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/AlarmWidget.java
@@ -63,8 +63,6 @@ public class AlarmWidget {
 	private final OsmAndLocationProvider locationProvider;
 	private final WaypointHelper wh;
 
-	private final boolean drawBitmap;
-
 	private int imgId;
 	private String cachedText;
 	private String cachedBottomText;
@@ -93,7 +91,6 @@ public AlarmWidget(@NonNull OsmandApplication app, @Nullable MapActivity mapActi
 			widgetBottomText = null;
 		}
 		this.app = app;
-		this.drawBitmap = mapActivity == null;
 		routingHelper = app.getRoutingHelper();
 		trackingUtilities = app.getMapViewTrackingUtilities();
 		settings = app.getSettings();
@@ -106,7 +103,7 @@ public Bitmap getWidgetBitmap() {
 		return widgetBitmap;
 	}
 
-	public boolean updateInfo(DrawSettings drawSettings) {
+	public boolean updateInfo(DrawSettings drawSettings, boolean drawBitmap) {
 		boolean showRoutingAlarms = settings.SHOW_ROUTING_ALARMS.get();
 		boolean trafficWarnings = settings.SHOW_TRAFFIC_WARNINGS.get();
 		boolean cams = settings.SHOW_CAMERAS.get();
@@ -180,6 +177,9 @@ public boolean updateInfo(DrawSettings drawSettings) {
 			if (!visible && widgetBitmap != null) {
 				changed = true;
 			}
+			if (visible && widgetBitmap == null && drawBitmap) {
+				changed = true;
+			}
 			if (changed && icon == null) {
 				if (info == null || drawSettings == null || !drawBitmap) {
 					widgetBitmap = null;
@@ -192,6 +192,9 @@ public boolean updateInfo(DrawSettings drawSettings) {
 		if (layout != null) {
 			AndroidUiHelper.updateVisibility(layout, visible);
 		}
+		if (!visible && drawBitmap) {
+			widgetBitmap = null;
+		}
 		return true;
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RulerWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RulerWidget.java
index 636ef0af5a5..3e799306d87 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RulerWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RulerWidget.java
@@ -10,22 +10,19 @@
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.helpers.AndroidUiHelper;
-import net.osmand.plus.settings.backend.OsmandPreference;
 import net.osmand.plus.views.OsmandMapLayer.DrawSettings;
 import net.osmand.plus.views.OsmandMapTileView;
 
 public class RulerWidget {
 
-	private MapActivity mapActivity;
-	private OsmandPreference<Float> mapDensity;
+	private final MapActivity mapActivity;
 
-	private View layout;
-	private ImageView icon;
-	private TextView text;
-	private TextView textShadow;
+	private final View layout;
+	private final ImageView icon;
+	private final TextView text;
+	private final TextView textShadow;
 
-	private String cacheRulerText;
-	private int maxWidth;
+	private final int maxWidth;
 	private int cacheRulerZoom;
 	private float cacheMapDensity;
 	private double cacheRulerTileX;
@@ -38,8 +35,7 @@ public RulerWidget(MapActivity mapActivity, View view) {
 		text = view.findViewById(R.id.map_ruler_text);
 		textShadow = view.findViewById(R.id.map_ruler_text_shadow);
 		maxWidth = view.getResources().getDimensionPixelSize(R.dimen.map_ruler_width);
-		mapDensity = mapActivity.getMyApplication().getSettings().MAP_DENSITY;
-		cacheMapDensity = mapDensity.get();
+		cacheMapDensity = mapActivity.getMyApplication().getOsmandMap().getMapDensity();
 	}
 
 	public void updateTextSize(boolean isNight, int textColor, int textShadowColor, int shadowRadius) {
@@ -50,22 +46,23 @@ public void updateTextSize(boolean isNight, int textColor, int textShadowColor,
 	public boolean updateInfo(RotatedTileBox tb, DrawSettings nightMode) {
 		boolean visible = true;
 		OsmandMapTileView view = mapActivity.getMapView();
+		float mapDensity = mapActivity.getMyApplication().getOsmandMap().getMapDensity();
 		// update cache
 		if (view.isZooming()) {
 			visible = false;
 		} else if (!tb.isZoomAnimated() && (tb.getZoom() != cacheRulerZoom || Math.abs(tb.getCenterTileX() - cacheRulerTileX) > 1 || Math
-				.abs(tb.getCenterTileY() - cacheRulerTileY) > 1 || mapDensity.get() != cacheMapDensity) &&
+				.abs(tb.getCenterTileY() - cacheRulerTileY) > 1 || mapDensity != cacheMapDensity) &&
 				tb.getPixWidth() > 0 && maxWidth > 0) {
 			cacheRulerZoom = tb.getZoom();
 			cacheRulerTileX = tb.getCenterTileX();
 			cacheRulerTileY = tb.getCenterTileY();
-			cacheMapDensity = mapDensity.get();
+			cacheMapDensity = mapDensity;
 			double pixDensity = tb.getPixDensity();
 			double roundedDist = OsmAndFormatter.calculateRoundedDist(maxWidth /
 					pixDensity, view.getApplication());
 
 			int cacheRulerDistPix = (int) (pixDensity * roundedDist);
-			cacheRulerText = OsmAndFormatter.getFormattedDistance((float) roundedDist, view.getApplication(), false);
+			String cacheRulerText = OsmAndFormatter.getFormattedDistance((float) roundedDist, view.getApplication(), false);
 			textShadow.setText(cacheRulerText);
 			text.setText(cacheRulerText);
 			ViewGroup.LayoutParams lp = layout.getLayoutParams();
