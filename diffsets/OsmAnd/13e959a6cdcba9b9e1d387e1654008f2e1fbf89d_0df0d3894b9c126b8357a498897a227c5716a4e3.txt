diff --git a/OsmAnd/res/layout/track_appearance.xml b/OsmAnd/res/layout/track_appearance.xml
index 1577d298177..a302486a392 100644
--- a/OsmAnd/res/layout/track_appearance.xml
+++ b/OsmAnd/res/layout/track_appearance.xml
@@ -80,7 +80,7 @@
 					android:layout_height="wrap_content"
 					android:background="?attr/route_info_bg"
 					android:orientation="vertical"
-					android:paddingBottom="30dp">
+					android:paddingBottom="@dimen/dialog_button_ex_height">
 
 				</LinearLayout>
 
diff --git a/OsmAnd/res/layout/track_coloring_card.xml b/OsmAnd/res/layout/track_coloring_card.xml
index 1b71491c5de..47326a9ad7b 100644
--- a/OsmAnd/res/layout/track_coloring_card.xml
+++ b/OsmAnd/res/layout/track_coloring_card.xml
@@ -5,6 +5,13 @@
 	android:layout_height="wrap_content"
 	android:orientation="vertical">
 
+	<View
+		android:id="@+id/top_divider"
+		android:layout_width="match_parent"
+		android:layout_height="1dp"
+		android:background="?attr/divider_color_basic"
+		android:focusable="false" />
+
 	<include
 		android:id="@+id/header_view"
 		layout="@layout/bottom_sheet_item_with_right_descr" />
diff --git a/OsmAnd/res/layout/track_width_card.xml b/OsmAnd/res/layout/track_width_card.xml
index 03103560ebc..8c99b94fd04 100644
--- a/OsmAnd/res/layout/track_width_card.xml
+++ b/OsmAnd/res/layout/track_width_card.xml
@@ -5,6 +5,13 @@
 	android:layout_height="wrap_content"
 	android:orientation="vertical">
 
+	<View
+		android:id="@+id/top_divider"
+		android:layout_width="match_parent"
+		android:layout_height="1dp"
+		android:background="?attr/divider_color_basic"
+		android:focusable="false" />
+
 	<include
 		android:id="@+id/header_view"
 		layout="@layout/bottom_sheet_item_with_right_descr" />
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragment.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragment.java
index 444163fdd73..bfa8c91ebc2 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragment.java
@@ -386,8 +386,8 @@ public void gpxSavingStarted() {
 			}
 
 			@Override
-			public void gpxSavingFinished() {
-				if (!gpxSelected) {
+			public void gpxSavingFinished(Exception errorMessage) {
+				if (errorMessage == null && !gpxSelected) {
 					app.getSelectedGpxHelper().setGpxFileToDisplay(gpxFile);
 				}
 			}
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragmentNew.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragmentNew.java
index 334275e760a..c312115299c 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragmentNew.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/WptPtEditorFragmentNew.java
@@ -486,8 +486,8 @@ public void gpxSavingStarted() {
 			}
 
 			@Override
-			public void gpxSavingFinished() {
-				if (!gpxSelected) {
+			public void gpxSavingFinished(Exception errorMessage) {
+				if (errorMessage == null && !gpxSelected) {
 					app.getSelectedGpxHelper().setGpxFileToDisplay(gpxFile);
 				}
 			}
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/SaveGpxAsyncTask.java b/OsmAnd/src/net/osmand/plus/myplaces/SaveGpxAsyncTask.java
index ac1e9c765bb..a3e2ab051d6 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/SaveGpxAsyncTask.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/SaveGpxAsyncTask.java
@@ -10,7 +10,7 @@
 
 import java.io.File;
 
-public class SaveGpxAsyncTask extends AsyncTask<Void, Void, Void> {
+public class SaveGpxAsyncTask extends AsyncTask<Void, Void, Exception> {
 
 	private final GPXFile gpx;
 	private final SaveGpxListener saveGpxListener;
@@ -29,15 +29,14 @@ protected void onPreExecute() {
 	}
 
 	@Override
-	protected Void doInBackground(Void... params) {
-		GPXUtilities.writeGpxFile(new File(gpx.path), gpx);
-		return null;
+	protected Exception doInBackground(Void... params) {
+		return GPXUtilities.writeGpxFile(new File(gpx.path), gpx);
 	}
 
 	@Override
-	protected void onPostExecute(Void aVoid) {
+	protected void onPostExecute(Exception errorMessage) {
 		if (saveGpxListener != null) {
-			saveGpxListener.gpxSavingFinished();
+			saveGpxListener.gpxSavingFinished(errorMessage);
 		}
 	}
 
@@ -45,6 +44,6 @@ public interface SaveGpxListener {
 
 		void gpxSavingStarted();
 
-		void gpxSavingFinished();
+		void gpxSavingFinished(Exception errorMessage);
 	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/TrackSegmentFragment.java b/OsmAnd/src/net/osmand/plus/myplaces/TrackSegmentFragment.java
index f6129a59808..d94847900e6 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/TrackSegmentFragment.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/TrackSegmentFragment.java
@@ -1263,7 +1263,7 @@ public void gpxSavingStarted() {
 			}
 
 			@Override
-			public void gpxSavingFinished() {
+			public void gpxSavingFinished(Exception errorMessage) {
 				TrackActivity activity = getTrackActivity();
 				if (activity != null) {
 					if (selectedGpxFile != null) {
diff --git a/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java b/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java
index 9e56f27dcde..6d92b58cb65 100644
--- a/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java
+++ b/OsmAnd/src/net/osmand/plus/track/TrackAppearanceFragment.java
@@ -319,8 +319,10 @@ public void gpxSavingStarted() {
 			}
 
 			@Override
-			public void gpxSavingFinished() {
-				app.showShortToastMessage(R.string.shared_string_track_is_saved, Algorithms.getFileWithoutDirs(gpxFile.path));
+			public void gpxSavingFinished(Exception errorMessage) {
+				if (errorMessage == null) {
+					app.showShortToastMessage(R.string.shared_string_track_is_saved, Algorithms.getFileWithoutDirs(gpxFile.path));
+				}
 			}
 		}).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
 	}
diff --git a/OsmAnd/src/net/osmand/plus/track/TrackColoringCard.java b/OsmAnd/src/net/osmand/plus/track/TrackColoringCard.java
index 2e893dc4a12..622040f07c9 100644
--- a/OsmAnd/src/net/osmand/plus/track/TrackColoringCard.java
+++ b/OsmAnd/src/net/osmand/plus/track/TrackColoringCard.java
@@ -63,6 +63,8 @@ protected void updateContent() {
 		RecyclerView groupRecyclerView = view.findViewById(R.id.recycler_view);
 		groupRecyclerView.setAdapter(new GpxWidthAdapter(Arrays.asList(GradientScaleType.values())));
 		groupRecyclerView.setLayoutManager(new LinearLayoutManager(app, RecyclerView.HORIZONTAL, false));
+
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.top_divider), isShowDivider());
 	}
 
 	private void createColorSelector() {
diff --git a/OsmAnd/src/net/osmand/plus/track/TrackWidthCard.java b/OsmAnd/src/net/osmand/plus/track/TrackWidthCard.java
index 8c2bd13242d..c388ec177b6 100644
--- a/OsmAnd/src/net/osmand/plus/track/TrackWidthCard.java
+++ b/OsmAnd/src/net/osmand/plus/track/TrackWidthCard.java
@@ -62,6 +62,8 @@ protected void updateContent() {
 		RecyclerView groupRecyclerView = view.findViewById(R.id.recycler_view);
 		groupRecyclerView.setAdapter(widthAdapter);
 		groupRecyclerView.setLayoutManager(new LinearLayoutManager(app, RecyclerView.HORIZONTAL, false));
+
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.top_divider), isShowDivider());
 	}
 
 	public void updateItems() {
diff --git a/OsmAnd/src/net/osmand/plus/views/GPXLayer.java b/OsmAnd/src/net/osmand/plus/views/GPXLayer.java
index 8b05c2099f8..914bc87ebbd 100644
--- a/OsmAnd/src/net/osmand/plus/views/GPXLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/GPXLayer.java
@@ -40,12 +40,12 @@
 import net.osmand.plus.MapMarkersHelper;
 import net.osmand.plus.MapMarkersHelper.MapMarker;
 import net.osmand.plus.MapMarkersHelper.MapMarkersGroup;
-import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.UiUtilities;
 import net.osmand.plus.base.PointImageDrawable;
 import net.osmand.plus.mapcontextmenu.controllers.SelectedGpxMenuController.SelectedGpxPoint;
 import net.osmand.plus.mapcontextmenu.other.TrackChartPoints;
+import net.osmand.plus.myplaces.SaveGpxAsyncTask;
 import net.osmand.plus.render.OsmandRenderer;
 import net.osmand.plus.render.OsmandRenderer.RenderingContext;
 import net.osmand.plus.settings.backend.OsmandSettings.CommonPreference;
@@ -61,7 +61,6 @@
 
 import org.apache.commons.logging.Log;
 
-import java.io.File;
 import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.HashMap;
@@ -225,10 +224,9 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 		if (textLayer != null && isTextVisible()) {
 			textLayer.putData(this, cache);
 		}
-
 	}
 
-	private int updatePaints(int color, String width, boolean routePoints, boolean currentTrack, DrawSettings drawSettings, RotatedTileBox tileBox) {
+	private void updatePaints(int color, String width, boolean routePoints, boolean currentTrack, DrawSettings drawSettings, RotatedTileBox tileBox) {
 		RenderingRulesStorage rrs = view.getApplication().getRendererRegistry().getCurrentSelectedRenderer();
 		boolean nightMode = drawSettings != null && drawSettings.isNightMode();
 		int hash = calculateHash(rrs, cachedTrackWidth, routePoints, nightMode, tileBox.getMapDensity(), tileBox.getZoom(),
@@ -292,7 +290,6 @@ private int updatePaints(int color, String width, boolean routePoints, boolean c
 		if (strikeWidth != null) {
 			paint.setStrokeWidth(strikeWidth);
 		}
-		return cachedColor;
 	}
 
 	private void acquireTrackWidth(String widthKey, RenderingRulesStorage rrs, RenderingRuleSearchRequest req, RenderingContext rc) {
@@ -339,8 +336,8 @@ private void drawSelectedFilesSplits(Canvas canvas, RotatedTileBox tileBox, List
 					paintInnerRect.setColor(color);
 					paintInnerRect.setAlpha(179);
 
-					paintTextIcon.setColor(txtlabelColor(color));
-					paintOuterRect.setColor(txtlabelColor(color));
+					paintTextIcon.setColor(UiUtilities.getContrastColor(view.getApplication(), color, false));
+					paintOuterRect.setColor(UiUtilities.getContrastColor(view.getApplication(), color, false));
 
 					List<GpxDisplayItem> items = groups.get(0).getModifiableList();
 
@@ -350,14 +347,6 @@ private void drawSelectedFilesSplits(Canvas canvas, RotatedTileBox tileBox, List
 		}
 	}
 
-	private int txtlabelColor(int color) {
-		//Hardy, 2020-03-16: Contrast logic for text labels on tracks
-		if (((int) Color.red(color) * .299 + Color.green(color) * .587 + Color.blue(color) * .114) > 149) {
-			return Color.BLACK;
-		}
-		return Color.WHITE;
-	}
-
 	private void drawSplitItems(Canvas canvas, RotatedTileBox tileBox, List<GpxDisplayItem> items, DrawSettings settings) {
 		final QuadRect latLonBounds = tileBox.getLatLonBounds();
 		int r = (int) (12 * tileBox.getDensity());
@@ -905,10 +894,9 @@ public boolean isObjectMovable(Object o) {
 	@Override
 	public void applyNewObjectPosition(@NonNull Object o,
 									   @NonNull LatLon position,
-									   @Nullable ContextMenuLayer.ApplyMovedObjectCallback callback) {
-
+									   @Nullable final ContextMenuLayer.ApplyMovedObjectCallback callback) {
 		if (o instanceof WptPt) {
-			WptPt objectInMotion = (WptPt) o;
+			final WptPt objectInMotion = (WptPt) o;
 			SelectedGpxFile selectedGpxFile = pointFileMap.get(objectInMotion);
 			if (selectedGpxFile != null) {
 				GPXFile gpxFile = selectedGpxFile.getGpxFile();
@@ -922,7 +910,20 @@ public void applyNewObjectPosition(@NonNull Object o,
 						callback.onApplyMovedObject(true, objectInMotion);
 					}
 				} else {
-					new SaveGpxFileAsyncTask(view.getApplication(), callback, objectInMotion).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, gpxFile);
+					new SaveGpxAsyncTask(gpxFile, new SaveGpxAsyncTask.SaveGpxListener() {
+
+						@Override
+						public void gpxSavingStarted() {
+
+						}
+
+						@Override
+						public void gpxSavingFinished(Exception errorMessage) {
+							if (callback != null) {
+								callback.onApplyMovedObject(errorMessage == null, objectInMotion);
+							}
+						}
+					}).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
 				}
 			}
 		} else if (callback != null) {
@@ -936,33 +937,4 @@ private void syncGpx(GPXFile gpxFile) {
 			mapMarkersHelper.runSynchronization(group);
 		}
 	}
-
-	static class SaveGpxFileAsyncTask extends AsyncTask<GPXFile, Void, Exception> {
-		private final OsmandApplication app;
-		@Nullable
-		private final ContextMenuLayer.ApplyMovedObjectCallback callback;
-		@Nullable
-		private final WptPt point;
-
-		SaveGpxFileAsyncTask(OsmandApplication app,
-							 @Nullable ContextMenuLayer.ApplyMovedObjectCallback callback,
-							 @Nullable WptPt point) {
-			this.app = app;
-			this.callback = callback;
-			this.point = point;
-		}
-
-		@Override
-		protected Exception doInBackground(GPXFile... params) {
-			GPXFile gpxFile = params[0];
-			return GPXUtilities.writeGpxFile(new File(gpxFile.path), gpxFile);
-		}
-
-		@Override
-		protected void onPostExecute(Exception errorMessage) {
-			if (callback != null) {
-				callback.onApplyMovedObject(errorMessage == null, point);
-			}
-		}
-	}
-}
+}
\ No newline at end of file
