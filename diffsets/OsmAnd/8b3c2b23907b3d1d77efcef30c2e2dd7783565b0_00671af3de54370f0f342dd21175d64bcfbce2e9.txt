diff --git a/OsmAnd/src/net/osmand/plus/quickaction/actions/SwitchProfileAction.java b/OsmAnd/src/net/osmand/plus/quickaction/actions/SwitchProfileAction.java
index dd1601fd74e..dff703e9aef 100644
--- a/OsmAnd/src/net/osmand/plus/quickaction/actions/SwitchProfileAction.java
+++ b/OsmAnd/src/net/osmand/plus/quickaction/actions/SwitchProfileAction.java
@@ -116,8 +116,6 @@ public void execute(MapActivity activity) {
 			nextProfile = profiles.get(index + 1);
 		}
 		executeWithParams(activity, nextProfile);
-
-		super.execute(activity);
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/views/MapQuickActionLayer.java b/OsmAnd/src/net/osmand/plus/views/MapQuickActionLayer.java
index 16bf6b83b75..e9b64b29ce2 100644
--- a/OsmAnd/src/net/osmand/plus/views/MapQuickActionLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/MapQuickActionLayer.java
@@ -29,7 +29,6 @@
 import net.osmand.data.RotatedTileBox;
 import net.osmand.plus.OsmAndLocationProvider;
 import net.osmand.plus.OsmandApplication;
-import net.osmand.plus.settings.backend.OsmandSettings;
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.helpers.AndroidUiHelper;
@@ -41,6 +40,7 @@
 import net.osmand.plus.quickaction.QuickActionRegistry;
 import net.osmand.plus.quickaction.QuickActionsWidget;
 import net.osmand.plus.routepreparationmenu.MapRouteInfoMenu;
+import net.osmand.plus.settings.backend.OsmandSettings;
 
 import java.lang.ref.WeakReference;
 import java.util.ArrayList;
@@ -209,15 +209,17 @@ public boolean isWidgetVisible() {
 	 * @return true, if state was changed
 	 */
 	public boolean setLayerState(boolean showWidget) {
+		// check if state change is needed
+		if (currentWidgetState == showWidget) {
+			return false;
+		}
 		currentWidgetState = showWidget;
-		if (isWidgetVisible() == showWidget)    // check if state change is needed
-		    return false;
 
 		updateQuickActionButton(showWidget);
 		if (settings.DO_NOT_USE_ANIMATIONS.get()) {
-		    quickActionsWidget.setVisibility(!showWidget ? View.GONE : View.VISIBLE);
+			quickActionsWidget.setVisibility(!showWidget ? View.GONE : View.VISIBLE);
 		} else {
-		    animateWidget(showWidget);
+			animateWidget(showWidget);
 		}
 		mapActivity.updateStatusBarColor();
 
