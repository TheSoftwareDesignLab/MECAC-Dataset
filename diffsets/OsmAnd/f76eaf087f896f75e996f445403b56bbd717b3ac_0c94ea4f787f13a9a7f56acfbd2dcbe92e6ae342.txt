diff --git a/OsmAnd/res/layout/dash_favorites_item.xml b/OsmAnd/res/layout/dash_favorites_item.xml
deleted file mode 100644
index 5d092612e7b..00000000000
--- a/OsmAnd/res/layout/dash_favorites_item.xml
+++ /dev/null
@@ -1,95 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<LinearLayout
-	xmlns:android="http://schemas.android.com/apk/res/android"
-	xmlns:tools="http://schemas.android.com/tools"
-	android:layout_width="match_parent"
-	android:layout_height="@dimen/dashListItemHeight"
-	android:background="?attr/dashboard_button"
-	android:orientation="vertical">
-
-	<View
-		android:layout_width="match_parent"
-		android:layout_height="1dp"
-		android:background="?attr/dashboard_divider"/>
-
-	<LinearLayout
-		android:layout_width="match_parent"
-		android:layout_height="match_parent"
-		android:orientation="horizontal">
-
-		<ImageView
-			android:id="@+id/icon"
-			android:layout_width="@dimen/favorite_icon_size"
-			android:layout_height="@dimen/favorite_icon_size"
-			android:layout_gravity="center_vertical"
-			android:layout_marginLeft="@dimen/dashFavIconMargin"
-			android:layout_marginRight="@dimen/dashFavIconMargin"/>
-
-		<LinearLayout
-			android:layout_width="0dp"
-			android:layout_height="wrap_content"
-			android:layout_gravity="center_vertical"
-			android:layout_weight="1"
-			android:orientation="vertical">
-
-			<TextView
-				android:id="@+id/name"
-				android:layout_width="wrap_content"
-				android:layout_height="wrap_content"
-				android:textColor="?android:textColorPrimary"
-				android:textSize="@dimen/dashFavNameTextSize"
-				tools:text="@string/lorem_ipsum" />
-
-			<LinearLayout
-				android:layout_width="wrap_content"
-				android:layout_height="wrap_content"
-				android:orientation="horizontal">
-
-				<ImageView
-					android:id="@+id/direction"
-					android:layout_width="@dimen/dashFavDirectionSize"
-					android:layout_height="@dimen/dashFavDirectionSize"
-					android:layout_gravity="center_vertical"
-					android:visibility="gone" />
-
-				<TextView
-					android:id="@+id/distance"
-					android:layout_marginLeft="2dp"
-					android:layout_width="wrap_content"
-					android:layout_height="wrap_content"
-					android:textColor="?android:textColorSecondary"
-					android:textSize="@dimen/showAllButtonTextSize"
-					tools:text="100500 km"/>
-
-				<ImageView
-					android:id="@+id/group_image"
-					android:layout_width="wrap_content"
-					android:layout_height="wrap_content"
-					android:layout_gravity="center_vertical"
-					android:layout_marginLeft="4dp"
-					android:src="@drawable/ic_small_group"/>
-
-				<TextView
-					android:id="@+id/group_name"
-					android:layout_width="wrap_content"
-					android:layout_height="wrap_content"
-					android:layout_gravity="center_vertical"
-					android:layout_marginLeft="4dp"
-					android:textColor="@color/icon_color_light"
-					android:textSize="@dimen/showAllButtonTextSize"/>
-			</LinearLayout>
-
-		</LinearLayout>
-
-		<ImageButton
-			android:id="@+id/navigate_to"
-			android:layout_width="@dimen/dashListItemHeight"
-			android:layout_height="@dimen/dashListItemHeight"
-			android:layout_gravity="center_vertical"
-			android:layout_marginLeft="@dimen/dashFavIconMargin"
-			android:background="?attr/dashboard_button"
-			android:src="@drawable/ic_action_gdirections_light"/>
-	</LinearLayout>
-
-
-</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/dash_gpx_track_item.xml b/OsmAnd/res/layout/dash_gpx_track_item.xml
index bcd6594ebfb..0ca15dcd139 100644
--- a/OsmAnd/res/layout/dash_gpx_track_item.xml
+++ b/OsmAnd/res/layout/dash_gpx_track_item.xml
@@ -5,7 +5,6 @@
 			  android:layout_height="wrap_content"
 			  android:background="?attr/expandable_list_item_background"
 			  android:minHeight="@dimen/dashListItemHeight"
-			  android:focusable="true"
 			  android:orientation="vertical">
 
 	<View
@@ -139,24 +138,25 @@
 				android:visibility="gone"/>
 		</LinearLayout>
 
+
 		<ImageButton
-			android:id="@+id/stop"
+			android:id="@+id/show_on_map"
 			android:layout_width="@dimen/dashListItemHeight"
 			android:layout_height="@dimen/dashListItemHeight"
 			android:layout_gravity="center_vertical"
+			android:layout_marginLeft="@dimen/favorites_icon_right_margin"
 			android:background="?attr/options_button_background"
-			android:src="@drawable/ic_action_rec_stop"
+			android:src="@drawable/ic_action_gsave_dark"
 			android:visibility="gone"
 			tools:visibility="visible"/>
-
+		
 		<ImageButton
-			android:id="@+id/show_on_map"
+			android:id="@+id/stop"
 			android:layout_width="@dimen/dashListItemHeight"
 			android:layout_height="@dimen/dashListItemHeight"
 			android:layout_gravity="center_vertical"
-			android:layout_marginLeft="@dimen/favorites_icon_right_margin"
 			android:background="?attr/options_button_background"
-			android:src="@drawable/ic_action_gsave_dark"
+			android:src="@drawable/ic_action_rec_stop"
 			android:visibility="gone"
 			tools:visibility="visible"/>
 
diff --git a/OsmAnd/res/layout/favorites_list_item.xml b/OsmAnd/res/layout/favorites_list_item.xml
index 99ad3ca0da7..cdd28493092 100644
--- a/OsmAnd/res/layout/favorites_list_item.xml
+++ b/OsmAnd/res/layout/favorites_list_item.xml
@@ -1,93 +1,105 @@
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-			  xmlns:tools="http://schemas.android.com/tools"
-			  android:layout_width="fill_parent"
-			  android:layout_height="wrap_content"
-			  android:background="?attr/expandable_list_item_background"
-			  android:minHeight="@dimen/list_item_height"
-			  android:orientation="horizontal"
-			  android:paddingLeft="@dimen/list_content_padding"
-			  android:paddingRight="@dimen/list_content_padding">
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="fill_parent"
+    android:layout_height="wrap_content"
+    android:background="?attr/expandable_list_item_background"
+    android:minHeight="@dimen/list_item_height"
+    android:orientation="vertical" >
 
-	<CheckBox
-		android:id="@+id/check_item"
-		android:layout_width="wrap_content"
-		android:layout_height="wrap_content"
-		android:layout_marginTop="@dimen/favorites_icon_top_margin"
-		android:layout_marginRight="@dimen/favorites_icon_right_margin"
-		android:focusable="false"
-		android:visibility="gone"
-		tools:visibility="visible"/>
+    <View
+        android:layout_width="match_parent"
+        android:layout_height="1dp"
+        android:id="@+id/divider"
+        android:background="?attr/dashboard_divider" />
 
-	<ImageView
-		android:id="@+id/favourite_icon"
-		android:layout_width="@dimen/favorite_icon_size"
-		android:layout_height="@dimen/favorite_icon_size"
-		android:layout_gravity="center_vertical"
-		android:layout_marginRight="@dimen/favorites_icon_right_margin"/>
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:orientation="horizontal"
+        android:paddingLeft="@dimen/list_content_padding"
+        android:paddingRight="@dimen/list_content_padding" >
 
-	<LinearLayout
-		android:layout_width="match_parent"
-		android:layout_height="wrap_content"
-		android:layout_gravity="center_vertical"
-		android:orientation="horizontal">
+        <CheckBox
+            android:id="@+id/check_item"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginRight="@dimen/favorites_icon_right_margin"
+            android:layout_marginTop="@dimen/favorites_icon_top_margin"
+            android:focusable="false"
+            android:visibility="gone"
+            tools:visibility="visible" />
 
-		<LinearLayout
-			android:layout_width="0dp"
-			android:layout_height="wrap_content"
-			android:layout_gravity="center_vertical"
-			android:layout_weight="1"
-			android:orientation="vertical">
+        <ImageView
+            android:id="@+id/favourite_icon"
+            android:layout_width="@dimen/favorite_icon_size"
+            android:layout_height="@dimen/favorite_icon_size"
+            android:layout_gravity="center_vertical"
+            android:layout_marginRight="@dimen/favorites_icon_right_margin" />
 
-			<TextView
-				android:id="@+id/favourite_label"
-				android:layout_width="wrap_content"
-				android:layout_height="wrap_content"
-				android:textColor="?android:textColorPrimary"
-				android:textSize="@dimen/dashFavNameTextSize"
-				tools:text="@string/lorem_ipsum"/>
+        <LinearLayout
+            android:layout_width="0dp"
+            android:layout_height="wrap_content"
+            android:layout_gravity="center_vertical"
+            android:layout_weight="1"
+            android:orientation="vertical" >
 
-			<LinearLayout
-				android:layout_width="wrap_content"
-				android:layout_height="wrap_content"
-				android:orientation="horizontal">
+            <TextView
+                android:id="@+id/favourite_label"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:textColor="?android:textColorPrimary"
+                android:textSize="@dimen/dashFavNameTextSize"
+                tools:text="@string/lorem_ipsum" />
 
-				<ImageView
-					android:id="@+id/direction"
-					android:layout_width="@dimen/dashFavDirectionSize"
-					android:layout_height="@dimen/dashFavDirectionSize"
-					android:layout_gravity="center_vertical"
-					android:visibility="gone"/>
+            <LinearLayout
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:orientation="horizontal" >
 
-				<TextView
-					android:id="@+id/distance"
-					android:layout_width="wrap_content"
-					android:layout_height="wrap_content"
-					android:layout_marginLeft="2dp"
-					android:textColor="?android:textColorSecondary"
-					android:textSize="@dimen/showAllButtonTextSize"
-					tools:text="100500 km"/>
+                <ImageView
+                    android:id="@+id/direction"
+                    android:layout_width="@dimen/dashFavDirectionSize"
+                    android:layout_height="@dimen/dashFavDirectionSize"
+                    android:layout_gravity="center_vertical"
+                    android:visibility="gone" />
 
-				<ImageView
-					android:id="@+id/group_image"
-					android:layout_width="wrap_content"
-					android:layout_height="wrap_content"
-					android:layout_gravity="center_vertical"
-					android:layout_marginLeft="4dp"
-					android:src="@drawable/ic_small_group"/>
+                <TextView
+                    android:id="@+id/distance"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_marginLeft="2dp"
+                    android:textColor="?android:textColorSecondary"
+                    android:textSize="@dimen/showAllButtonTextSize"
+                    tools:text="100500 km" />
 
-				<TextView
-					android:id="@+id/group_name"
-					android:layout_width="wrap_content"
-					android:layout_height="wrap_content"
-					android:layout_gravity="center_vertical"
-					android:layout_marginLeft="4dp"
-					android:textColor="@color/icon_color_light"
-					android:textSize="@dimen/showAllButtonTextSize"/>
-			</LinearLayout>
+                <ImageView
+                    android:id="@+id/group_image"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_gravity="center_vertical"
+                    android:layout_marginLeft="4dp"
+                    android:src="@drawable/ic_small_group" />
 
-		</LinearLayout>
+                <TextView
+                    android:id="@+id/group_name"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:layout_gravity="center_vertical"
+                    android:layout_marginLeft="4dp"
+                    android:textColor="?android:textColorSecondary"
+                    android:textSize="@dimen/showAllButtonTextSize" />
+            </LinearLayout>
+        </LinearLayout>
 
-	</LinearLayout>
+        <ImageButton
+            android:id="@+id/navigate_to"
+            android:layout_width="@dimen/dashListItemHeight"
+            android:layout_height="@dimen/dashListItemHeight"
+            android:layout_gravity="center_vertical"
+            android:layout_marginLeft="@dimen/dashFavIconMargin"
+            android:background="?attr/dashboard_button"
+            android:src="@drawable/ic_action_gdirections_light" />
+    </LinearLayout>
 
 </LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/gpx_item_list_item.xml b/OsmAnd/res/layout/gpx_item_list_item.xml
index 7922d9b2936..ceb3bbaf079 100644
--- a/OsmAnd/res/layout/gpx_item_list_item.xml
+++ b/OsmAnd/res/layout/gpx_item_list_item.xml
@@ -1,64 +1,59 @@
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-			  xmlns:tools="http://schemas.android.com/tools"
-			  android:layout_width="fill_parent"
-			  android:layout_height="wrap_content"
-			  android:minHeight="@dimen/list_item_height"
-			  android:orientation="vertical"
-			  android:background="?attr/expandable_list_item_background"
-			  android:paddingLeft="8dp"
-			  android:paddingRight="8dp">
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="fill_parent"
+    android:layout_height="wrap_content"
+    android:background="?attr/expandable_list_item_background"
+    android:minHeight="@dimen/list_item_height"
+    android:orientation="vertical"
+    android:paddingLeft="@dimen/list_content_padding"
+    android:paddingRight="@dimen/list_content_padding" >
 
-	<LinearLayout
-		android:layout_width="fill_parent"
-		android:layout_height="wrap_content">
+    <LinearLayout
+        android:layout_width="fill_parent"
+        android:layout_height="wrap_content" >
 
-		<FrameLayout
-			android:layout_width="wrap_content"
-			android:layout_height="wrap_content"
-			android:layout_gravity="center_vertical"
-			android:layout_marginLeft="3dp">
+        <FrameLayout
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_gravity="center_vertical"
+            android:layout_marginRight="@dimen/favorites_icon_right_margin" >
 
-			<ImageView
-				android:id="@+id/icon"
-				android:layout_width="25dp"
-				android:layout_height="wrap_content"
-				android:layout_gravity="center"
-				android:layout_marginTop="2dp"/>
+            <ImageView
+                android:id="@+id/icon"
+                android:layout_width="@dimen/favorite_icon_size"
+                android:layout_height="@dimen/favorite_icon_size"
+                android:layout_gravity="center_vertical" />
 
-			<TextView
-				android:id="@+id/additional"
-				style="@style/ListText.Small"
-				android:layout_width="wrap_content"
-				android:layout_height="wrap_content"
-				android:layout_gravity="center"
-				tools:text="@string/lorem_ipsum"
-				android:maxLines="2"
-				android:layout_marginLeft="2dp"
-				android:layout_marginRight="3dp"
-				android:textSize="@dimen/dashFavNameTextSize"/>
-		</FrameLayout>
+            <TextView
+                android:id="@+id/additional"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_gravity="center"
+                android:maxLines="2"
+                android:textColor="?android:textColorSecondary"
+                android:textSize="@dimen/dashFavDescTextSize"
+                tools:text="@string/lorem_ipsum" />
+        </FrameLayout>
 
-		<TextView
-			android:id="@+id/name"
-			style="@style/ListText.Small"
-			android:layout_width="0dp"
-			android:layout_height="wrap_content"
-			android:layout_gravity="center_vertical"
-			tools:text="@string/lorem_ipsum"
-			android:layout_marginLeft="5dp"
-			android:textSize="@dimen/dashFavNameTextSize"
-			android:layout_weight="1"
-			android:paddingTop="2dp"/>
-	</LinearLayout>
+        <TextView
+            android:id="@+id/name"
+            android:layout_width="0dp"
+            android:layout_height="wrap_content"
+            android:layout_gravity="center_vertical"
+            android:layout_weight="1"
+            android:paddingTop="2dp"
+            android:textColor="?android:textColorPrimary"
+            android:textSize="@dimen/dashFavNameTextSize"
+            tools:text="@string/lorem_ipsum" />
+    </LinearLayout>
 
-	<TextView
-		android:id="@+id/description"
-		style="@style/ListText.Small"
-		android:layout_width="wrap_content"
-		android:layout_height="wrap_content"
-		android:gravity="center_vertical"
-		android:textSize="@dimen/dashFavNameTextSize"
-		android:maxLines="25"/>
+    <TextView
+        android:id="@+id/description"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:gravity="center_vertical"
+        android:textColor="?android:textColorSecondary"
+        android:textSize="@dimen/dashFavDescTextSize" />
 
 </LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/note.xml b/OsmAnd/res/layout/note.xml
index a839a8277c7..5bcba71386a 100644
--- a/OsmAnd/res/layout/note.xml
+++ b/OsmAnd/res/layout/note.xml
@@ -49,8 +49,6 @@
 				android:textColor="?android:textColorPrimary"
 				android:layout_width="wrap_content"
 				android:layout_height="wrap_content"
-				android:maxLines="1"
-				android:ellipsize="end"
 				tools:text="@string/app_version"/>
 
 
diff --git a/OsmAnd/res/layout/search_history.xml b/OsmAnd/res/layout/search_history.xml
index 0910c1ee311..7f24664584e 100644
--- a/OsmAnd/res/layout/search_history.xml
+++ b/OsmAnd/res/layout/search_history.xml
@@ -7,7 +7,6 @@
     <ListView
         android:id="@android:id/list"
         android:layout_width="fill_parent"
-        android:descendantFocusability="blocksDescendants"
         android:layout_height="0dp"
 		android:layout_weight="1"/>
 
diff --git a/OsmAnd/res/layout/search_history_list_item.xml b/OsmAnd/res/layout/search_history_list_item.xml
index 2f23bc8772c..43c6c94965a 100644
--- a/OsmAnd/res/layout/search_history_list_item.xml
+++ b/OsmAnd/res/layout/search_history_list_item.xml
@@ -28,7 +28,6 @@
 			android:id="@+id/name"
 			android:layout_width="wrap_content"
 			android:layout_height="wrap_content"
-			android:ellipsize="end"
 			android:textColor="?android:textColorPrimary"
 			android:textSize="@dimen/dashFavNameTextSize"
 			tools:text="@string/lorem_ipsum"/>
diff --git a/OsmAnd/res/values/sizes.xml b/OsmAnd/res/values/sizes.xml
index 88d38322afa..b67ea4109bb 100644
--- a/OsmAnd/res/values/sizes.xml
+++ b/OsmAnd/res/values/sizes.xml
@@ -51,6 +51,7 @@
 	<dimen name="download_descr_text_size">12sp</dimen>
     <dimen name="subHeaderTextSize">14sp</dimen>
     <dimen name="dashFavNameTextSize">16sp</dimen>
+    <dimen name="dashFavDescTextSize">14sp</dimen>
     <dimen name="dashProgressTextSize">14sp</dimen>
     <dimen name="dashParkingTextSize">24sp</dimen>
 </resources>
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/IconsCache.java b/OsmAnd/src/net/osmand/plus/IconsCache.java
new file mode 100644
index 00000000000..68dc3c026d2
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/IconsCache.java
@@ -0,0 +1,50 @@
+package net.osmand.plus;
+
+import android.app.Activity;
+import android.content.Context;
+import android.graphics.PorterDuff;
+import android.graphics.drawable.Drawable;
+import gnu.trove.map.hash.TIntObjectHashMap;
+import gnu.trove.map.hash.TLongObjectHashMap;
+
+public class IconsCache {
+
+	private TLongObjectHashMap<Drawable> drawable = new TLongObjectHashMap<Drawable>();
+	private OsmandApplication app;
+	
+	public IconsCache(OsmandApplication app) {
+		this.app = app;
+	}
+	
+	
+	private Drawable getDrawable(int resId, int clrId) {
+		long hash = ((long)resId << 31l) + clrId;
+		Drawable d = drawable.get(hash);
+		if(d == null) {
+			d = app.getResources().getDrawable(resId).mutate();
+			d.clearColorFilter();
+			if (clrId != 0) {
+				d.setColorFilter(app.getResources().getColor(clrId), PorterDuff.Mode.MULTIPLY);
+			}
+			drawable.put(hash, d);
+		}
+		return d;
+	}
+	
+	public Drawable getContentIcon(int id, int lightContentColor, int darkContentColor) {
+		return getDrawable(id, app.getSettings().isLightContent() ? lightContentColor : darkContentColor);
+	}
+	
+	public Drawable getContentIcon(int id, int lightContentColor) {
+		return getDrawable(id, app.getSettings().isLightContent() ? lightContentColor : 0);
+	}
+	
+	public Drawable getIcon(int id, int color) {
+		return getDrawable(id, color);
+	}
+	
+	public Drawable getContentIcon(int id) {
+		return getDrawable(id, app.getSettings().isLightContent() ? R.color.icon_color_light : 0);
+	}
+
+}
diff --git a/OsmAnd/src/net/osmand/plus/OsmandApplication.java b/OsmAnd/src/net/osmand/plus/OsmandApplication.java
index d7a03307057..555b9969423 100644
--- a/OsmAnd/src/net/osmand/plus/OsmandApplication.java
+++ b/OsmAnd/src/net/osmand/plus/OsmandApplication.java
@@ -82,6 +82,7 @@ public class OsmandApplication extends Application {
 	OsmAndAppCustomization appCustomization;
 	private final SQLiteAPI sqliteAPI = new SQLiteAPIImpl(this);
 	private final OsmAndTaskManager taskManager = new OsmAndTaskManager(this);
+	private final IconsCache iconsCache = new IconsCache(this);
 	Handler uiHandler;
 
 	NavigationService navigationService;
@@ -105,6 +106,7 @@ public class OsmandApplication extends Application {
 	AvoidSpecificRoads avoidSpecificRoads;
 	BRouterServiceConnection bRouterServiceConnection;
 	OsmandRegions regions;
+	
 
 	RoutingConfiguration.Builder defaultRoutingConfig;
 	
@@ -166,6 +168,10 @@ protected void onPostExecute(Void result) {
 			}
 		}.execute();
 	}
+	
+	public IconsCache getIconsCache() {
+		return iconsCache;
+	}
 
 	@Override
 	public void onTerminate() {
diff --git a/OsmAnd/src/net/osmand/plus/activities/search/SearchHistoryFragment.java b/OsmAnd/src/net/osmand/plus/activities/search/SearchHistoryFragment.java
index 8034f3a1052..5198acb596b 100644
--- a/OsmAnd/src/net/osmand/plus/activities/search/SearchHistoryFragment.java
+++ b/OsmAnd/src/net/osmand/plus/activities/search/SearchHistoryFragment.java
@@ -4,6 +4,7 @@
 
 import net.osmand.data.LatLon;
 import net.osmand.data.PointDescription;
+import net.osmand.plus.IconsCache;
 import net.osmand.plus.OsmAndFormatter;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.OsmandSettings;
@@ -13,6 +14,7 @@
 import net.osmand.plus.helpers.SearchHistoryHelper;
 import net.osmand.plus.helpers.SearchHistoryHelper.HistoryEntry;
 import net.osmand.util.MapUtils;
+import android.R.anim;
 import android.app.Activity;
 import android.content.Context;
 import android.content.Intent;
@@ -28,6 +30,8 @@
 import android.view.MenuItem;
 import android.view.View;
 import android.view.ViewGroup;
+import android.widget.AdapterView;
+import android.widget.AdapterView.OnItemClickListener;
 import android.widget.ArrayAdapter;
 import android.widget.Button;
 import android.widget.ImageButton;
@@ -44,11 +48,11 @@ public class SearchHistoryFragment extends ListFragment implements SearchActivit
 	public static final String SEARCH_LAT = SearchActivity.SEARCH_LAT;
 	public static final String SEARCH_LON = SearchActivity.SEARCH_LON;
 	private HistoryAdapter historyAdapter;
-	private RecentIcons recentIcons;
 	
 
 	@Override
 	public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
+		super.onCreateView(inflater, container, savedInstanceState);
 		View view = inflater.inflate(R.layout.search_history, container, false);
 		clearButton = (Button) view.findViewById(R.id.clearAll);
 		clearButton.setText(R.string.clear_all);
@@ -60,7 +64,14 @@ public void onClick(View v) {
 				clearButton.setVisibility(View.GONE);
 			}
 		});
-		recentIcons = new RecentIcons(getActivity());
+		((ListView)view.findViewById(android.R.id.list)).setOnItemClickListener(new OnItemClickListener() {
+
+			@Override
+			public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
+				onListItemClick((ListView) parent, view, position, id);
+			}
+		});
+		
 		return view;
 	}
 
@@ -166,7 +177,7 @@ public View getView(final int position, View convertView, ViewGroup parent) {
 				row = inflater.inflate(R.layout.search_history_list_item, parent, false);
 			}
 			final HistoryEntry historyEntry = getItem(position);
-			udpateHistoryItem(historyEntry, row, location, getActivity(), recentIcons);
+			udpateHistoryItem(historyEntry, row, location, getActivity(), getMyApplication());
 			ImageButton options = (ImageButton) row.findViewById(R.id.options);
 			options.setVisibility(View.VISIBLE);
 			options.setOnClickListener(new View.OnClickListener() {
@@ -179,62 +190,14 @@ public void onClick(View v) {
 		}
 	}
 	
-	public static class RecentIcons {
-		
-		private Drawable arrowImage;
-		private Drawable addressIcon;
-		private Drawable favoriteIcon;
-		private Drawable locationIcon;
-		private Drawable poiIcon;
-		private Drawable wptIcon;
-		private Drawable audioNoteIcon;
-		private Drawable videoNoteIcon;
-		private Drawable photoNoteIcon;
-		
-		public RecentIcons(Activity a) {
-			loadIcons(a, (OsmandApplication) a.getApplication());
-		}
-		
-		private void loadIcons(Context ctx, OsmandApplication app) {
-			arrowImage = ctx.getResources().getDrawable(R.drawable.ic_destination_arrow_white);
-			arrowImage = arrowImage.mutate();
-			arrowImage.setColorFilter(ctx.getResources().getColor(R.color.color_distance), PorterDuff.Mode.MULTIPLY);
-			addressIcon = ctx.getResources().getDrawable(R.drawable.ic_type_address);
-			favoriteIcon = ctx.getResources().getDrawable(R.drawable.ic_type_favorites);
-			locationIcon = ctx.getResources().getDrawable(R.drawable.ic_type_coordinates);
-			poiIcon = ctx.getResources().getDrawable(R.drawable.ic_type_info);
-			wptIcon = ctx.getResources().getDrawable(R.drawable.ic_type_waypoint);
-			audioNoteIcon = ctx.getResources().getDrawable(R.drawable.ic_type_audio);
-			videoNoteIcon = ctx.getResources().getDrawable(R.drawable.ic_type_video);
-			photoNoteIcon = ctx.getResources().getDrawable(R.drawable.ic_type_img);
-			if (app.getSettings().isLightContent()) {
-				addressIcon = addressIcon.mutate();
-				addressIcon.setColorFilter(ctx.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-				favoriteIcon = favoriteIcon.mutate();
-				favoriteIcon.setColorFilter(ctx.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-				locationIcon = locationIcon.mutate();
-				locationIcon.setColorFilter(ctx.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-				poiIcon = poiIcon.mutate();
-				poiIcon.setColorFilter(ctx.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-				wptIcon = wptIcon.mutate();
-				wptIcon.setColorFilter(ctx.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-				audioNoteIcon = audioNoteIcon.mutate();
-				audioNoteIcon.setColorFilter(ctx.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-				videoNoteIcon = videoNoteIcon.mutate();
-				videoNoteIcon.setColorFilter(ctx.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-				photoNoteIcon = photoNoteIcon.mutate();
-				photoNoteIcon.setColorFilter(ctx.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-			}
-		}
-
-	}
-			
+				
 	public static void udpateHistoryItem(final HistoryEntry historyEntry, View row,
-			LatLon location, Activity activity, RecentIcons ri) {
+			LatLon location, Activity activity, OsmandApplication app) {
 		TextView nameText = (TextView) row.findViewById(R.id.name);
 		TextView distanceText = (TextView) row.findViewById(R.id.distance);
 		ImageView direction = (ImageView) row.findViewById(R.id.direction);
-		direction.setImageDrawable(ri.arrowImage);
+		IconsCache ic = app.getIconsCache();
+		direction.setImageDrawable(ic.getIcon(R.drawable.ic_destination_arrow_white, R.color.color_distance));
 		String distance = "";
 		if (location != null) {
 			int dist = (int) (MapUtils.getDistance(location, historyEntry.getLat(), historyEntry.getLon()));
@@ -246,23 +209,23 @@ public static void udpateHistoryItem(final HistoryEntry historyEntry, View row,
 		ImageView icon = ((ImageView) row.findViewById(R.id.icon));
 
 		if (historyEntry.getName().isAddress()) {
-			icon.setImageDrawable(ri.addressIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_address));
 		} else if (historyEntry.getName().isFavorite()) {
-			icon.setImageDrawable(ri.favoriteIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_favorites));
 		} else if (historyEntry.getName().isLocation()) {
-			icon.setImageDrawable(ri.locationIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_coordinates));
 		} else if (historyEntry.getName().isPoi()) {
-			icon.setImageDrawable(ri.poiIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_info));
 		} else if (historyEntry.getName().isWpt()) {
-			icon.setImageDrawable(ri.wptIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_waypoint));
 		} else if (historyEntry.getName().isAudioNote()) {
-			icon.setImageDrawable(ri.audioNoteIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_audio));
 		} else if (historyEntry.getName().isVideoNote()) {
-			icon.setImageDrawable(ri.videoNoteIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_video));
 		}else if (historyEntry.getName().isPhotoNote()) {
-			icon.setImageDrawable(ri.photoNoteIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_img));
 		}  else {
-			icon.setImageDrawable(ri.addressIcon);
+			icon.setImageDrawable(ic.getContentIcon(R.drawable.ic_type_address));
 		}
 
 		String typeName = historyEntry.getName().getTypeName();
diff --git a/OsmAnd/src/net/osmand/plus/audionotes/DashAudioVideoNotesFragment.java b/OsmAnd/src/net/osmand/plus/audionotes/DashAudioVideoNotesFragment.java
index ef4f3be201c..375edb4dc7f 100644
--- a/OsmAnd/src/net/osmand/plus/audionotes/DashAudioVideoNotesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/audionotes/DashAudioVideoNotesFragment.java
@@ -4,19 +4,16 @@
 import java.util.List;
 
 import net.osmand.data.PointDescription;
+import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.OsmandPlugin;
 import net.osmand.plus.R;
-import net.osmand.plus.myplaces.FavoritesActivity;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.dashboard.DashBaseFragment;
 import net.osmand.plus.helpers.FontCache;
+import net.osmand.plus.myplaces.FavoritesActivity;
 import android.app.Activity;
-import android.content.Context;
 import android.content.Intent;
-import android.graphics.Color;
-import android.graphics.PorterDuff;
 import android.graphics.Typeface;
-import android.graphics.PorterDuff.Mode;
 import android.graphics.drawable.Drawable;
 import android.os.Bundle;
 import android.support.annotation.Nullable;
@@ -99,14 +96,11 @@ public void setupNotes() {
 			}
 		}
 
-		AudioVideoIcons icons = new AudioVideoIcons(getActivity());
 		for (final AudioVideoNotesPlugin.Recording recording : notes) {
 			LayoutInflater inflater = getActivity().getLayoutInflater();
 			View view = inflater.inflate(R.layout.note, null, false);
 
-			Drawable icon = getNoteView(recording, view, getActivity(), icons);
-			icon.setColorFilter(getResources().getColor(R.color.color_distance), PorterDuff.Mode.MULTIPLY);
-			view.setBackgroundColor(Color.TRANSPARENT);
+			getNoteView(recording, view, getMyApplication());
 			view.findViewById(R.id.play).setOnClickListener(new View.OnClickListener() {
 				@Override
 				public void onClick(View v) {
@@ -129,27 +123,8 @@ public void onClick(View v) {
 		}
 	}
 	
-	public static class AudioVideoIcons {
-		Drawable audio;
-		Drawable video;
-		Drawable image;
-
-		public AudioVideoIcons(Context a) {
-			audio = getDrawable(a, R.drawable.ic_type_audio, R.color.distance_color);
-			video = getDrawable(a, R.drawable.ic_type_video, R.color.distance_color);
-			image = getDrawable(a, R.drawable.ic_type_img, R.color.distance_color);
-		}
-
-		private Drawable getDrawable(Context a, int icId, int clrId) {
-			Drawable drawable = a.getResources().getDrawable(icId).mutate();
-			drawable.setColorFilter(a.getResources().getColor(clrId), Mode.MULTIPLY);
-			return drawable;
-		}
-
-	}
-
 	public static Drawable getNoteView(final AudioVideoNotesPlugin.Recording recording, View view,
-								   final Context ctx, AudioVideoIcons icons) {
+								   final OsmandApplication ctx) {
 		String name = recording.getName(ctx);
 		TextView nameText = ((TextView) view.findViewById(R.id.name));
 		nameText.setText(name);
@@ -159,11 +134,11 @@ public static Drawable getNoteView(final AudioVideoNotesPlugin.Recording recordi
 		Drawable iconDrawable;
 		
 		if (recording.isAudio()) {
-			iconDrawable = icons.audio;
+			iconDrawable = ctx.getIconsCache().getIcon(R.drawable.ic_type_audio, R.color.distance_color);
 		} else if (recording.isVideo()) {
-			iconDrawable = icons.video;
+			iconDrawable = ctx.getIconsCache().getIcon(R.drawable.ic_type_video, R.color.distance_color);
 		} else {
-			iconDrawable = icons.image;
+			iconDrawable = ctx.getIconsCache().getIcon(R.drawable.ic_type_img, R.color.distance_color);
 		}
 		icon.setImageDrawable(iconDrawable);
 		return iconDrawable;
diff --git a/OsmAnd/src/net/osmand/plus/audionotes/NotesFragment.java b/OsmAnd/src/net/osmand/plus/audionotes/NotesFragment.java
index 6efe5f9f173..d6c15119238 100644
--- a/OsmAnd/src/net/osmand/plus/audionotes/NotesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/audionotes/NotesFragment.java
@@ -9,7 +9,6 @@
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.audionotes.AudioVideoNotesPlugin.Recording;
-import net.osmand.plus.audionotes.DashAudioVideoNotesFragment.AudioVideoIcons;
 import net.osmand.plus.dialogs.DirectionsDialogs;
 import net.osmand.plus.myplaces.FavoritesActivity;
 import android.app.AlertDialog;
@@ -80,11 +79,9 @@ public OsmandApplication getMyApplication() {
 	}
 
 	class NotesAdapter extends ArrayAdapter<AudioVideoNotesPlugin.Recording> {
-		private AudioVideoIcons icons;
 
 		NotesAdapter(List<AudioVideoNotesPlugin.Recording> recordingList) {
 			super(getActivity(), R.layout.note, recordingList);
-			icons = new AudioVideoIcons(getActivity());
 		}
 
 		@Override
@@ -96,7 +93,7 @@ public View getView(final int position, View convertView, ViewGroup parent) {
 			}
 
 			final AudioVideoNotesPlugin.Recording recording = getItem(position);
-			Drawable icon = DashAudioVideoNotesFragment.getNoteView(recording, row, getActivity(), icons);
+			Drawable icon = DashAudioVideoNotesFragment.getNoteView(recording, row, getMyApplication());
 			icon.setColorFilter(getResources().getColor(R.color.color_distance), Mode.MULTIPLY);
 			row.findViewById(R.id.play).setVisibility(View.GONE);
 			ImageButton options = (ImageButton) row.findViewById(R.id.options);
diff --git a/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java b/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java
index 4b3e06a8762..4826cc3f3aa 100644
--- a/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/dashboard/DashFavoritesFragment.java
@@ -121,10 +121,11 @@ public int compare(FavouritePoint point, FavouritePoint point2) {
 		}
 		for (final FavouritePoint point : points) {
 			LayoutInflater inflater = getActivity().getLayoutInflater();
-			View view = inflater.inflate(R.layout.dash_favorites_item, null, false);
-			TextView name = (TextView) view.findViewById(R.id.name);
+			View view = inflater.inflate(R.layout.favorites_list_item, null, false);
+			TextView name = (TextView) view.findViewById(R.id.favourite_label);
 			TextView label = (TextView) view.findViewById(R.id.distance);
 			ImageView direction = (ImageView) view.findViewById(R.id.direction);
+			view.findViewById(R.id.divider).setVisibility(View.VISIBLE);
 			if (point.getCategory().length() > 0) {
 				((TextView) view.findViewById(R.id.group_name)).setText(point.getCategory());
 			} else {
@@ -132,7 +133,7 @@ public int compare(FavouritePoint point, FavouritePoint point2) {
 			}
 
 
-			((ImageView) view.findViewById(R.id.icon)).
+			((ImageView) view.findViewById(R.id.favourite_icon)).
 					setImageDrawable(FavoriteImageDrawable.getOrCreate(getActivity(), point.getColor()));
 
 			if(loc != null){
@@ -147,6 +148,7 @@ public int compare(FavouritePoint point, FavouritePoint point2) {
 			int dist = (int) (MapUtils.getDistance(point.getLatitude(), point.getLongitude(),
 					loc.getLatitude(), loc.getLongitude()));
 			String distance = OsmAndFormatter.getFormattedDistance(dist, getMyApplication()) + "  ";
+			view.findViewById(R.id.navigate_to).setVisibility(View.VISIBLE);
 			view.findViewById(R.id.navigate_to).setOnClickListener(new View.OnClickListener() {
 				@Override
 				public void onClick(View view) {
diff --git a/OsmAnd/src/net/osmand/plus/dashboard/DashRecentsFragment.java b/OsmAnd/src/net/osmand/plus/dashboard/DashRecentsFragment.java
index d1991751d57..56231db466e 100644
--- a/OsmAnd/src/net/osmand/plus/dashboard/DashRecentsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/dashboard/DashRecentsFragment.java
@@ -11,7 +11,6 @@
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.activities.search.SearchActivity;
 import net.osmand.plus.activities.search.SearchHistoryFragment;
-import net.osmand.plus.activities.search.SearchHistoryFragment.RecentIcons;
 import net.osmand.plus.dialogs.DirectionsDialogs;
 import net.osmand.plus.helpers.FontCache;
 import net.osmand.plus.helpers.SearchHistoryHelper;
@@ -73,10 +72,6 @@ public void onClick(View view) {
 		return view;
 	}
 	
-	@Override
-	public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
-		super.onViewCreated(view, savedInstanceState);
-	}
 
 	@Override
 	public void onResume() {
@@ -112,12 +107,11 @@ public void setupRecents(){
 		if (points.size() > 3){
 			points = points.subList(0, 3);
 		}
-		RecentIcons ri = new RecentIcons(getActivity());
 		for (final HistoryEntry historyEntry : points) {
 			LayoutInflater inflater = getActivity().getLayoutInflater();
 			View view = inflater.inflate(R.layout.search_history_list_item, null, false);
 			SearchHistoryFragment.udpateHistoryItem(historyEntry, view, 
-					loc, getActivity(), ri);
+					loc, getActivity(), getMyApplication());
 			view.findViewById(R.id.navigate_to).setVisibility(View.VISIBLE);
 			view.findViewById(R.id.navigate_to).setOnClickListener(new View.OnClickListener() {
 				@Override
diff --git a/OsmAnd/src/net/osmand/plus/monitoring/DashTrackFragment.java b/OsmAnd/src/net/osmand/plus/monitoring/DashTrackFragment.java
index cda84e13a2d..622b7a9ee12 100644
--- a/OsmAnd/src/net/osmand/plus/monitoring/DashTrackFragment.java
+++ b/OsmAnd/src/net/osmand/plus/monitoring/DashTrackFragment.java
@@ -43,8 +43,6 @@ public class DashTrackFragment extends DashBaseFragment {
 
 	public static final String TAG = "DASH_TRACK_FRAGMENT";
 
-	private Drawable gpxOnMap;
-	private Drawable gpxNormal;
 	private boolean updateEnable;
 
 	@Override
@@ -54,13 +52,6 @@ public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sa
 		TextView header = (TextView) view.findViewById(R.id.fav_text);
 		header.setTypeface(typeface);
 		header.setText(R.string.tracks);
-		gpxNormal = getResources().getDrawable(R.drawable.ic_gpx_track).mutate();
-		gpxOnMap = getResources().getDrawable(R.drawable.ic_gpx_track).mutate();
-		gpxOnMap.setColorFilter(getResources().getColor(R.color.color_distance), PorterDuff.Mode.MULTIPLY);
-		if (getMyApplication().getSettings().isLightContent()) {
-			gpxNormal.setColorFilter(getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-		}
-
 
 		((Button) view.findViewById(R.id.show_all)).setTypeface(typeface);
 
@@ -143,20 +134,18 @@ private void setupGpxFiles() {
 		startHandler(view);
 
 		for (String filename : list) {
-			System.out.println(" >> " + filename);
 			final File f = new File(filename);
 			AvailableGPXFragment.GpxInfo info = new AvailableGPXFragment.GpxInfo();
 			info.subfolder = "";
 			info.file = f;
 			View v = inflater.inflate(R.layout.dash_gpx_track_item, null, false);
-			AvailableGPXFragment.udpateGpxInfoView(v, info, app, gpxNormal, gpxOnMap, true);
+			AvailableGPXFragment.udpateGpxInfoView(v, info, app, true);
 			v.setOnClickListener(new View.OnClickListener() {
 				@Override
 				public void onClick(View v) {
 					showOnMap(GPXUtilities.loadGPXFile(app, f));
 				}
 			});
-			v.setBackgroundColor(Color.TRANSPARENT);
 			tracks.addView(v);
 		}
 	}
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/AvailableGPXFragment.java b/OsmAnd/src/net/osmand/plus/myplaces/AvailableGPXFragment.java
index 32b8a3ec69a..62c137b1655 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/AvailableGPXFragment.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/AvailableGPXFragment.java
@@ -99,8 +99,6 @@ public class AvailableGPXFragment extends OsmandExpandableListFragment {
 	private GpxSelectionHelper selectedGpxHelper;
 	private SavingTrackHelper savingTrackHelper;
 	private OsmandApplication app;
-	private Drawable gpxNormal;
-	private Drawable gpxOnMap;
 	private boolean updateEnable;
 
 
@@ -160,23 +158,14 @@ public void onPause() {
 		}
 	}
 
-	public static void updateCurrentTrack(View v,final Activity ctx, OsmandApplication app) {
+	public static void updateCurrentTrack(View v, final Activity ctx, OsmandApplication app) {
 		if (v == null) {
 			return;
 		}
 		final boolean isRecording = app.getSettings().SAVE_GLOBAL_TRACK_TO_GPX.get();
-		Drawable icon = app.getResources().getDrawable(isRecording ? R.drawable.ic_action_rec_stop : R.drawable.ic_play_dark).mutate();
-		if (app.getSettings().isLightContent()) {
-			icon.setColorFilter(app.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-		}
-
-		if (isRecording) {
-			v.findViewById(R.id.show_on_map).setVisibility(View.VISIBLE);
-		} else {
-			v.findViewById(R.id.show_on_map).setVisibility(View.GONE);
-		}
 		ImageButton stop = ((ImageButton) v.findViewById(R.id.stop));
-		stop.setImageDrawable(icon);
+		stop.setImageDrawable(app.getIconsCache().getContentIcon(isRecording?R.drawable.ic_action_rec_stop:
+			R.drawable.ic_play_dark));
 		stop.setOnClickListener(new View.OnClickListener() {
 			@Override
 			public void onClick(View v) {
@@ -188,22 +177,36 @@ public void onClick(View v) {
 				}
 			}
 		});
+		SavingTrackHelper sth = app.getSavingTrackHelper();
+		ImageButton save = ((ImageButton) v.findViewById(R.id.show_on_map));
+		save.setOnClickListener(new View.OnClickListener() {
+			@Override
+			public void onClick(View v) {
+				Runnable run = new Runnable() {
+					@Override
+					public void run() {
+						final OsmandMonitoringPlugin plugin = OsmandPlugin.getEnabledPlugin(OsmandMonitoringPlugin.class);
+						plugin.saveCurrentTrack();
+					}
+				};
+				run.run();
+			}
+		});
+		if (sth.getPoints() > 0 || sth.getDistance() > 0) {
+			save.setVisibility(View.VISIBLE);
+		} else {
+			save.setVisibility(View.GONE);
+		}
+		save.setImageDrawable(app.getIconsCache().getContentIcon(R.drawable.ic_action_gsave_dark));
+		
 
-//		if (isRecording) {
-			SavingTrackHelper sth = app.getSavingTrackHelper();
-			((TextView) v.findViewById(R.id.points_count)).setText(sth.getPoints()+"");
-			((TextView) v.findViewById(R.id.distance)).setText(OsmAndFormatter.getFormattedDistance(
-					sth.getDistance(), app));
-			v.findViewById(R.id.points_count).setVisibility(View.VISIBLE);
-			v.findViewById(R.id.points_icon).setVisibility(View.VISIBLE);
-			v.findViewById(R.id.distance).setVisibility(View.VISIBLE);
-			v.findViewById(R.id.distance_icon).setVisibility(View.VISIBLE);
-//		} else {
-//			v.findViewById(R.id.points_count).setVisibility(View.GONE);
-//			v.findViewById(R.id.points_icon).setVisibility(View.GONE);
-//			v.findViewById(R.id.distance).setVisibility(View.GONE);
-//			v.findViewById(R.id.distance_icon).setVisibility(View.GONE);
-//		}
+		((TextView) v.findViewById(R.id.points_count)).setText(sth.getPoints() + "");
+		((TextView) v.findViewById(R.id.distance))
+				.setText(OsmAndFormatter.getFormattedDistance(sth.getDistance(), app));
+		v.findViewById(R.id.points_count).setVisibility(View.VISIBLE);
+		v.findViewById(R.id.points_icon).setVisibility(View.VISIBLE);
+		v.findViewById(R.id.distance).setVisibility(View.VISIBLE);
+		v.findViewById(R.id.distance_icon).setVisibility(View.VISIBLE);
 	}
 
 	@Override
@@ -229,12 +232,7 @@ public void onClick(View v) {
 				}
 			});
 		}
-		gpxNormal = getResources().getDrawable(R.drawable.ic_gpx_track).mutate();
-		gpxOnMap = getResources().getDrawable(R.drawable.ic_gpx_track).mutate();
-		gpxOnMap.setColorFilter(getResources().getColor(R.color.color_distance), PorterDuff.Mode.MULTIPLY);
-		if (getMyApplication().getSettings().isLightContent()) {
-			gpxNormal.setColorFilter(getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-		}
+
 
 		return v;
 	}
@@ -242,38 +240,10 @@ public void onClick(View v) {
 	public static void createCurrentTrackView(View v, final OsmandApplication app) {
 		((TextView) v.findViewById(R.id.name)).setText(R.string.currently_recording_track);
 		v.findViewById(R.id.time_icon).setVisibility(View.GONE);
-		boolean light = app.getSettings().isLightContent();
-
-		Drawable icon = app.getResources().getDrawable(R.drawable.ic_action_gsave_dark).mutate();
-		if (light) {
-			icon.setColorFilter(app.getResources().getColor(R.color.icon_color_light), PorterDuff.Mode.MULTIPLY);
-		}
-		ImageButton save = ((ImageButton) v.findViewById(R.id.show_on_map));
-		save.setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View v) {
-
-			}
-		});
-		save.setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View v) {
-				Runnable run = new Runnable() {
-					@Override
-					public void run() {
-						final OsmandMonitoringPlugin plugin = OsmandPlugin.getEnabledPlugin(OsmandMonitoringPlugin.class);
-						plugin.saveCurrentTrack();
-					}
-				};
-				run.run();
-			}
-		});
 		v.findViewById(R.id.divider).setVisibility(View.GONE);
-
 		v.findViewById(R.id.options).setVisibility(View.GONE);
 		v.findViewById(R.id.stop).setVisibility(View.VISIBLE);
 		v.findViewById(R.id.check_item).setVisibility(View.GONE);
-		save.setImageDrawable(icon);
 	}
 
 	@Override
@@ -791,7 +761,7 @@ public View getChildView(final int groupPosition, final int childPosition, boole
 				LayoutInflater inflater = getActivity().getLayoutInflater();
 				v = inflater.inflate(R.layout.dash_gpx_track_item, parent, false);
 			}
-			udpateGpxInfoView(v, child, app, gpxNormal, gpxOnMap, false);
+			udpateGpxInfoView(v, child, app, false);
 
 			ImageView icon = (ImageView) v.findViewById(R.id.icon);
 			ImageButton options = (ImageButton) v.findViewById(R.id.options);
@@ -841,10 +811,11 @@ public void onClick(View v) {
 				@Override
 				public void onClick(View v) {
 					if (child.gpx != null) {
-						selectedGpxHelper.selectGpxFile(child.gpx, checkItem.isChecked(), false);
+						selectedGpxHelper.selectGpxFile(child.gpx, checkItem.isChecked(), true);
 					} else {
 						selectedGpxHelper.getSelectedGPXFiles().remove(selectedGpxFile);
 					}
+					notifyDataSetChanged();
 				}
 			});
 
@@ -1425,7 +1396,6 @@ public String getFileName() {
 	}
 
 	public static void udpateGpxInfoView(View v, GpxInfo child, OsmandApplication app,
-										 Drawable gpxNormal, Drawable gpxOnMap,
 										 boolean isDashItem) {
 		TextView viewName = ((TextView) v.findViewById(R.id.name));
 		if (!isDashItem) {
@@ -1441,7 +1411,7 @@ public static void udpateGpxInfoView(View v, GpxInfo child, OsmandApplication ap
 		//ImageView icon = (ImageView) v.findViewById(!isDashItem? R.id.icon : R.id.show_on_map);
 		ImageView icon = (ImageView) v.findViewById(R.id.icon);
 		icon.setVisibility(View.VISIBLE);
-		icon.setImageDrawable(gpxNormal);
+		icon.setImageDrawable(app.getIconsCache().getContentIcon(R.drawable.ic_gpx_track));
 		if (child.isCorrupted()) {
 			viewName.setTypeface(Typeface.DEFAULT, Typeface.ITALIC);
 		} else {
@@ -1450,7 +1420,7 @@ public static void udpateGpxInfoView(View v, GpxInfo child, OsmandApplication ap
 		SelectedGpxFile sgpx = selectedGpxHelper.getSelectedFileByName(child.getFileName());
 		GPXTrackAnalysis analysis = null;
 		if (sgpx != null) {
-			icon.setImageDrawable(gpxOnMap);
+			icon.setImageDrawable(app.getIconsCache().getIcon(R.drawable.ic_gpx_track, R.color.distance_color));
 			analysis = sgpx.getTrackAnalysis();
 
 		}
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/SelectedGPXFragment.java b/OsmAnd/src/net/osmand/plus/myplaces/SelectedGPXFragment.java
index 127aa890447..785d4c71c59 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/SelectedGPXFragment.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/SelectedGPXFragment.java
@@ -38,15 +38,12 @@
 import android.support.v4.app.ListFragment;
 import android.support.v7.widget.PopupMenu;
 import android.text.Html;
-import android.view.ContextMenu;
-import android.view.ContextMenu.ContextMenuInfo;
 import android.view.LayoutInflater;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
 import android.view.View;
 import android.view.ViewGroup;
-import android.widget.AdapterView;
 import android.widget.ArrayAdapter;
 import android.widget.CheckBox;
 import android.widget.EditText;
@@ -90,7 +87,7 @@ public boolean isArgumentTrue(String arg) {
 	@Override
 	public void onResume() {
 		super.onResume();
-		setContent();
+		updateContent();
 	}
 
 
@@ -100,13 +97,11 @@ private GPXFile getGpx() {
 	}
 
 
-	protected List<GpxDisplayGroup> filterGroups() {
-		List<GpxDisplayGroup> groups = ((TrackActivity) getActivity()).getContent();
-		if (isArgumentTrue(ARG_TO_FILTER_SHORT_TRACKS)) {
-			groups = new ArrayList<GpxSelectionHelper.GpxDisplayGroup>(groups);
-			Iterator<GpxDisplayGroup> it = groups.iterator();
-			while (it.hasNext()) {
-				GpxDisplayGroup group = it.next();
+	protected List<GpxDisplayGroup> filterGroups(GpxDisplayItemType type) {
+		List<GpxDisplayGroup> groups = new ArrayList<GpxSelectionHelper.GpxDisplayGroup>();
+			for(GpxDisplayGroup group : ((TrackActivity) getActivity()).getContent()) {
+			boolean add = group.getType() == type || type == null;
+				if (isArgumentTrue(ARG_TO_FILTER_SHORT_TRACKS)) {
 				Iterator<GpxDisplayItem> item = group.getModifiableList().iterator();
 				while (item.hasNext()) {
 					GpxDisplayItem it2 = item.next();
@@ -115,25 +110,40 @@ protected List<GpxDisplayGroup> filterGroups() {
 					}
 				}
 				if (group.getModifiableList().isEmpty()) {
-					it.remove();
+					add = false;
 				}
-			}
+				}
+				if(add) {
+					groups.add(group);
+				}
+				
 		}
 		return groups;
 	}
 
-	public void setContent(){
-		List<GpxSelectionHelper.GpxDisplayGroup> groups = filterGroups();
+	public void setContent() {
 		lightContent = app.getSettings().isLightContent();
+		adapter = new SelectedGPXAdapter(new ArrayList<GpxSelectionHelper.GpxDisplayItem>());
+		updateContent();
+		setListAdapter(adapter);
+	}
 
-		List<GpxSelectionHelper.GpxDisplayItem> items = new ArrayList<>();
-		for (GpxSelectionHelper.GpxDisplayGroup group : groups) {
-			for (GpxSelectionHelper.GpxDisplayItem item : group.getModifiableList()) {
-				items.add(item);
-			}
+	protected void updateContent() {
+		adapter.clear();
+		List<GpxSelectionHelper.GpxDisplayGroup> groups = filterGroups(filterType());
+		adapter.addAll(flatten(groups));
+	}
+
+	protected GpxDisplayItemType filterType() {
+		return null;
+	}
+
+	protected List<GpxDisplayItem> flatten(List<GpxDisplayGroup> groups) {
+		ArrayList<GpxDisplayItem> list = new ArrayList<GpxDisplayItem>();
+		for(GpxDisplayGroup g : groups) {
+			list.addAll(g.getModifiableList());
 		}
-		adapter = new SelectedGPXAdapter(items);
-		setListAdapter(adapter);
+		return null;
 	}
 
 	@Override
@@ -195,10 +205,14 @@ public boolean onOptionsItemSelected(MenuItem item) {
 		return super.onOptionsItemSelected(item);
 	}
 	
-	protected void saveAsFavorites(final GpxDisplayGroup model) {
+	protected void saveAsFavorites(final GpxDisplayItemType gpxDisplayItemType) {
 		Builder b = new AlertDialog.Builder(getMyActivity());
 		final EditText editText = new EditText(getMyActivity());
-		String name = model.getName();
+		final List<GpxDisplayGroup> gs = filterGroups(gpxDisplayItemType);
+		if (gs.size() == 0) {
+			return;
+		}
+		String name = gs.get(0).getName();
 		if(name.indexOf('\n') > 0) {
 			name = name.substring(0, name.indexOf('\n'));
 		}
@@ -210,7 +224,7 @@ protected void saveAsFavorites(final GpxDisplayGroup model) {
 
 			@Override
 			public void onClick(DialogInterface dialog, int which) {
-				saveFavoritesImpl(model.getModifiableList(), editText.getText().toString());
+				saveFavoritesImpl(flatten(gs), editText.getText().toString());
 
 			}
 		});
@@ -236,9 +250,14 @@ public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
 	}
 
 
-	protected void selectSplitDistance(final GpxDisplayGroup model) {
+	protected void selectSplitDistance() {
+		final List<GpxDisplayGroup> groups = filterGroups(GpxDisplayItemType.TRACK_SEGMENT);
+		if(groups.size() == 0) {
+			return;
+		}
+		
 		Builder bld = new AlertDialog.Builder(getMyActivity());
-		int[] checkedItem = new int[] {!model.isSplitDistance() && !model.isSplitTime()? 0 : -1};
+		int[] checkedItem = new int[] {!groups.get(0).isSplitDistance() && !groups.get(0).isSplitTime()? 0 : -1};
 		List<String> options = new ArrayList<String>();
 		final List<Double> distanceSplit = new ArrayList<Double>();
 		final TIntArrayList timeSplit = new TIntArrayList();
@@ -247,23 +266,23 @@ protected void selectSplitDistance(final GpxDisplayGroup model) {
 		options.add(app.getString(R.string.none));
 		distanceSplit.add(-1d);
 		timeSplit.add(-1);
-		addOptionSplit(30, true, options, distanceSplit, timeSplit, checkedItem, model); // 100 feet, 50 yards, 50 m 
-		addOptionSplit(60, true, options, distanceSplit, timeSplit, checkedItem, model); // 200 feet, 100 yards, 100 m
-		addOptionSplit(150, true, options, distanceSplit, timeSplit, checkedItem, model); // 500 feet, 200 yards, 200 m
-		addOptionSplit(300, true, options, distanceSplit, timeSplit, checkedItem, model); // 1000 feet, 500 yards, 500 m
-		addOptionSplit(600, true, options, distanceSplit, timeSplit, checkedItem, model); // 2000 feet, 1000 yards, 1km
-		addOptionSplit(1500, true, options, distanceSplit, timeSplit, checkedItem, model); // 1mi, 2km
-		addOptionSplit(3000, true, options, distanceSplit, timeSplit, checkedItem, model); // 2mi, 5km
-		addOptionSplit(8000, true, options, distanceSplit, timeSplit, checkedItem, model); // 5mi, 10km
+		addOptionSplit(30, true, options, distanceSplit, timeSplit, checkedItem, groups); // 100 feet, 50 yards, 50 m 
+		addOptionSplit(60, true, options, distanceSplit, timeSplit, checkedItem, groups); // 200 feet, 100 yards, 100 m
+		addOptionSplit(150, true, options, distanceSplit, timeSplit, checkedItem, groups); // 500 feet, 200 yards, 200 m
+		addOptionSplit(300, true, options, distanceSplit, timeSplit, checkedItem, groups); // 1000 feet, 500 yards, 500 m
+		addOptionSplit(600, true, options, distanceSplit, timeSplit, checkedItem, groups); // 2000 feet, 1000 yards, 1km
+		addOptionSplit(1500, true, options, distanceSplit, timeSplit, checkedItem, groups); // 1mi, 2km
+		addOptionSplit(3000, true, options, distanceSplit, timeSplit, checkedItem, groups); // 2mi, 5km
+		addOptionSplit(8000, true, options, distanceSplit, timeSplit, checkedItem, groups); // 5mi, 10km
 		
-		addOptionSplit(15, false, options, distanceSplit, timeSplit, checkedItem, model);
-		addOptionSplit(30, false, options, distanceSplit, timeSplit, checkedItem, model);
-		addOptionSplit(60, false, options, distanceSplit, timeSplit, checkedItem, model);
-		addOptionSplit(120, false, options, distanceSplit, timeSplit, checkedItem, model);
-		addOptionSplit(150, false, options, distanceSplit, timeSplit, checkedItem, model);
-		addOptionSplit(300, false, options, distanceSplit, timeSplit, checkedItem, model);
-		addOptionSplit(600, false, options, distanceSplit, timeSplit, checkedItem, model);
-		addOptionSplit(900, false, options, distanceSplit, timeSplit, checkedItem, model);
+		addOptionSplit(15, false, options, distanceSplit, timeSplit, checkedItem, groups);
+		addOptionSplit(30, false, options, distanceSplit, timeSplit, checkedItem, groups);
+		addOptionSplit(60, false, options, distanceSplit, timeSplit, checkedItem, groups);
+		addOptionSplit(120, false, options, distanceSplit, timeSplit, checkedItem, groups);
+		addOptionSplit(150, false, options, distanceSplit, timeSplit, checkedItem, groups);
+		addOptionSplit(300, false, options, distanceSplit, timeSplit, checkedItem, groups);
+		addOptionSplit(600, false, options, distanceSplit, timeSplit, checkedItem, groups);
+		addOptionSplit(900, false, options, distanceSplit, timeSplit, checkedItem, groups);
 		final CheckBox vis = (CheckBox) view.findViewById(R.id.Visibility);
 		vis.setChecked(app.getSelectedGpxHelper().getSelectedFileByPath(getGpx().path) != null);
 		final Spinner sp = (Spinner) view.findViewById(R.id.Spinner);
@@ -280,8 +299,8 @@ protected void selectSplitDistance(final GpxDisplayGroup model) {
 			
 			@Override
 			public void onClick(DialogInterface dialog, int which) {
-				app.getSelectedGpxHelper().selectGpxFile(model.getGpx(), vis.isChecked(), true);
-				updateSplit(model, distanceSplit, timeSplit, sp.getSelectedItemPosition() );
+				app.getSelectedGpxHelper().selectGpxFile(groups.get(0).getGpx(), vis.isChecked(), true);
+				updateSplit(groups, distanceSplit, timeSplit, sp.getSelectedItemPosition() );
 			}
 		});
 		
@@ -289,12 +308,12 @@ public void onClick(DialogInterface dialog, int which) {
 		
 	}
 	
-	private void updateSplit(final GpxDisplayGroup model, final List<Double> distanceSplit,
+	private void updateSplit(final List<GpxDisplayGroup> groups, final List<Double> distanceSplit,
 			final TIntArrayList timeSplit, final int which) {
 		new AsyncTask<Void, Void, Void>() {
 			
 			protected void onPostExecute(Void result) {
-				adapter.notifyDataSetChanged();
+				updateContent();
 				(getActivity()).setProgressBarIndeterminateVisibility(false);
 			}
 			
@@ -304,12 +323,14 @@ protected void onPreExecute() {
 
 			@Override
 			protected Void doInBackground(Void... params) {
-				if(which == 0) {
-					model.noSplit(app);
-				} else if(distanceSplit.get(which) > 0) {
-					model.splitByDistance(app, distanceSplit.get(which));
-				} else if(timeSplit.get(which) > 0) {
-					model.splitByTime(app, timeSplit.get(which));
+				for (GpxDisplayGroup model : groups) {
+					if (which == 0) {
+						model.noSplit(app);
+					} else if (distanceSplit.get(which) > 0) {
+						model.splitByDistance(app, distanceSplit.get(which));
+					} else if (timeSplit.get(which) > 0) {
+						model.splitByTime(app, timeSplit.get(which));
+					}
 				}
 				return null;
 			}
@@ -317,13 +338,13 @@ protected Void doInBackground(Void... params) {
 	}
 
 	private void addOptionSplit(int value, boolean distance, List<String> options, List<Double> distanceSplit,
-			TIntArrayList timeSplit, int[] checkedItem, GpxDisplayGroup model) {
+			TIntArrayList timeSplit, int[] checkedItem, List<GpxDisplayGroup> model) {
 		if (distance) {
 			double dvalue = OsmAndFormatter.calculateRoundedDist(value, app);
 			options.add(OsmAndFormatter.getFormattedDistance((float) dvalue, app));
 			distanceSplit.add(dvalue);
 			timeSplit.add(-1);
-			if (Math.abs(model.getSplitDistance() - dvalue) < 1) {
+			if (Math.abs(model.get(0).getSplitDistance() - dvalue) < 1) {
 				checkedItem[0] = distanceSplit.size() - 1;
 			}
 		} else {
@@ -336,7 +357,7 @@ private void addOptionSplit(int value, boolean distance, List<String> options, L
 			}
 			distanceSplit.add(-1d);
 			timeSplit.add(value);
-			if (model.getSplitTime() == value) {
+			if (model.get(0).getSplitTime() == value) {
 				checkedItem[0] = distanceSplit.size() - 1;
 			}
 		}
@@ -388,11 +409,9 @@ public View getView(int position, View convertView, ViewGroup parent) {
 			row.setTag(child);
 
 			label.setText(Html.fromHtml(child.name.replace("\n", "<br/>")));
-			if ((child.expanded || isArgumentTrue(ARG_TO_EXPAND_TRACK_INFO)) && !Algorithms.isEmpty(child.description)) {
+			boolean expand = true; //child.expanded || isArgumentTrue(ARG_TO_EXPAND_TRACK_INFO)
+			if (expand && !Algorithms.isEmpty(child.description)) {
 				String d = child.description;
-				if (child.group.getType() == GpxDisplayItemType.TRACK_SEGMENT) {
-					d += "<br/>" + app.getString(R.string.local_index_gpx_info_show);
-				}
 				description.setText(Html.fromHtml(d));
 				description.setVisibility(View.VISIBLE);
 			} else {
@@ -407,8 +426,8 @@ public View getView(int position, View convertView, ViewGroup parent) {
 	@Override
 	public void onListItemClick(ListView l, View v, int position, long id) {
 		GpxDisplayItem child = adapter.getItem(position);
-		if(child.group.getType() == GpxDisplayItemType.TRACK_POINTS ||
-				child.group.getType() == GpxDisplayItemType.TRACK_ROUTE_POINTS) {
+//		if(child.group.getType() == GpxDisplayItemType.TRACK_POINTS ||
+//				child.group.getType() == GpxDisplayItemType.TRACK_ROUTE_POINTS) {
 			ContextMenuAdapter qa = new ContextMenuAdapter(v.getContext());
 			qa.setAnchor(v);
 			PointDescription name = new PointDescription(PointDescription.POINT_TYPE_FAVORITE, child.name);
@@ -418,9 +437,9 @@ public void onListItemClick(ListView l, View v, int position, long id) {
 			DirectionsDialogs.createDirectionActionsPopUpMenu(optionsMenu, location, child.locationStart, name, settings.getLastKnownMapZoom(),
 					getActivity(), true, false);
 			optionsMenu.show();
-		} else {
-			child.expanded = !child.expanded;
-			adapter.notifyDataSetInvalidated();
-		}
+//		} else {
+//			child.expanded = !child.expanded;
+//			adapter.notifyDataSetInvalidated();
+//		}
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/TrackPointFragment.java b/OsmAnd/src/net/osmand/plus/myplaces/TrackPointFragment.java
index 77bb6fe221e..1089191cae2 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/TrackPointFragment.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/TrackPointFragment.java
@@ -4,9 +4,9 @@
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
-
 import net.osmand.plus.GpxSelectionHelper;
 import net.osmand.plus.R;
+import net.osmand.plus.GpxSelectionHelper.GpxDisplayItemType;
 import net.osmand.plus.activities.TrackActivity;
 
 import java.util.ArrayList;
@@ -17,26 +17,10 @@
  * on 04.03.2015.
  */
 public class TrackPointFragment extends SelectedGPXFragment {
-	GpxSelectionHelper.GpxDisplayGroup group;
+	
 	@Override
-	public void setContent() {
-		List<GpxSelectionHelper.GpxDisplayGroup> groups = filterGroups();
-		lightContent = app.getSettings().isLightContent();
-
-
-		List<GpxSelectionHelper.GpxDisplayItem> items = new ArrayList<>();
-		for (GpxSelectionHelper.GpxDisplayGroup group : groups) {
-			if (group.getType() != GpxSelectionHelper.GpxDisplayItemType.TRACK_POINTS){
-				continue;
-			}
-			this.group = group;
-			for (GpxSelectionHelper.GpxDisplayItem item : group.getModifiableList()) {
-				items.add(item);
-			}
-		}
-
-		adapter = new SelectedGPXAdapter(items);
-		setListAdapter(adapter);
+	protected GpxDisplayItemType filterType() {
+		return GpxSelectionHelper.GpxDisplayItemType.TRACK_POINTS;
 	}
 
 	@Override
@@ -50,7 +34,7 @@ public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
 		MenuItem item = menu.add(R.string.add_to_favourite).setIcon(R.drawable.ic_action_fav_dark).setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
 			@Override
 			public boolean onMenuItemClick(MenuItem item) {
-				saveAsFavorites(group);
+				saveAsFavorites(filterType());
 				return true;
 			}
 		});
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/TrackRoutePointFragment.java b/OsmAnd/src/net/osmand/plus/myplaces/TrackRoutePointFragment.java
index b9988d8c3d2..7ba48c00903 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/TrackRoutePointFragment.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/TrackRoutePointFragment.java
@@ -4,56 +4,39 @@
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
-
 import net.osmand.plus.GpxSelectionHelper;
 import net.osmand.plus.R;
+import net.osmand.plus.GpxSelectionHelper.GpxDisplayItemType;
 import net.osmand.plus.activities.TrackActivity;
 
 import java.util.ArrayList;
 import java.util.List;
 
 /**
- * Created by Denis
- * on 05.03.2015.
+ * Created by Denis on 05.03.2015.
  */
 public class TrackRoutePointFragment extends SelectedGPXFragment {
-	GpxSelectionHelper.GpxDisplayGroup group;
 	@Override
-	public void setContent() {
-		List<GpxSelectionHelper.GpxDisplayGroup> groups = filterGroups();
-		lightContent = app.getSettings().isLightContent();
-
-
-		List<GpxSelectionHelper.GpxDisplayItem> items = new ArrayList<>();
-		for (GpxSelectionHelper.GpxDisplayGroup group : groups) {
-			if (group.getType() != GpxSelectionHelper.GpxDisplayItemType.TRACK_ROUTE_POINTS){
-				continue;
-			}
-			this.group = group;
-			for (GpxSelectionHelper.GpxDisplayItem item : group.getModifiableList()) {
-				items.add(item);
-			}
-		}
-
-		adapter = new SelectedGPXAdapter(items);
-		setListAdapter(adapter);
+	protected GpxDisplayItemType filterType() {
+		return GpxSelectionHelper.GpxDisplayItemType.TRACK_ROUTE_POINTS;
 	}
 
 	@Override
 	public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
 		menu.clear();
 		((TrackActivity) getActivity()).getClearToolbar(false);
-		if (isArgumentTrue(ARG_TO_HIDE_CONFIG_BTN)){
+		if (isArgumentTrue(ARG_TO_HIDE_CONFIG_BTN)) {
 			return;
 		}
 
-		MenuItem item = menu.add(R.string.add_to_favourite).setIcon(R.drawable.ic_action_fav_dark).setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
-			@Override
-			public boolean onMenuItemClick(MenuItem item) {
-				saveAsFavorites(group);
-				return true;
-			}
-		});
+		MenuItem item = menu.add(R.string.add_to_favourite).setIcon(R.drawable.ic_action_fav_dark)
+				.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
+					@Override
+					public boolean onMenuItemClick(MenuItem item) {
+						saveAsFavorites(GpxSelectionHelper.GpxDisplayItemType.TRACK_ROUTE_POINTS);
+						return true;
+					}
+				});
 		MenuItemCompat.setShowAsAction(item, MenuItemCompat.SHOW_AS_ACTION_ALWAYS);
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/TrackSegmentFragment.java b/OsmAnd/src/net/osmand/plus/myplaces/TrackSegmentFragment.java
index 9f8fe6051a5..2ec01582c20 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/TrackSegmentFragment.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/TrackSegmentFragment.java
@@ -1,77 +1,33 @@
 package net.osmand.plus.myplaces;
 
-import android.os.Bundle;
+import net.osmand.plus.GpxSelectionHelper;
+import net.osmand.plus.GpxSelectionHelper.GpxDisplayItemType;
+import net.osmand.plus.R;
+import net.osmand.plus.activities.TrackActivity;
 import android.support.v4.view.MenuItemCompat;
-import android.view.ContextMenu;
-import android.view.LayoutInflater;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.AdapterView;
-import android.widget.ListView;
-
-import net.osmand.plus.GpxSelectionHelper;
-import net.osmand.plus.R;
-import net.osmand.plus.activities.TrackActivity;
-
-import java.util.ArrayList;
-import java.util.List;
 
 /**
  * Created by Denis
  * on 04.03.2015.
  */
 public class TrackSegmentFragment extends SelectedGPXFragment {
-	GpxSelectionHelper.GpxDisplayGroup group;
 
 	@Override
-	public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
-		View view = super.onCreateView(inflater, container, savedInstanceState);
-		ListView listView = (ListView) view.findViewById(android.R.id.list);
-		listView.setOnCreateContextMenuListener(new View.OnCreateContextMenuListener() {
-			@Override
-			public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
-				long packedPos = ((AdapterView.AdapterContextMenuInfo) menuInfo).position;
-				showContextMenu(adapter.getItem((int)packedPos));
-			}
-		});
-		return view;
-	}
-
-	@Override
-	public void setContent() {
-		List<GpxSelectionHelper.GpxDisplayGroup> groups = filterGroups();
-		lightContent = app.getSettings().isLightContent();
-
-
-		List<GpxSelectionHelper.GpxDisplayItem> items = new ArrayList<>();
-		for (GpxSelectionHelper.GpxDisplayGroup group : groups) {
-			if (group.getType() != GpxSelectionHelper.GpxDisplayItemType.TRACK_SEGMENT){
-				continue;
-			}
-			this.group = group;
-			for (GpxSelectionHelper.GpxDisplayItem item : group.getModifiableList()) {
-				items.add(item);
-			}
-		}
-		adapter = new SelectedGPXAdapter(items);
-		setListAdapter(adapter);
+	protected GpxDisplayItemType filterType() {
+		return GpxSelectionHelper.GpxDisplayItemType.TRACK_SEGMENT;
 	}
 
 	@Override
 	public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
 		menu.clear();
 		((TrackActivity) getActivity()).getClearToolbar(false);
-		if (isArgumentTrue(ARG_TO_HIDE_CONFIG_BTN)){
-			return;
-		}
-
 		MenuItem item = menu.add(R.string.showed_on_map).setIcon(R.drawable.ic_show_on_map).setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
 			@Override
 			public boolean onMenuItemClick(MenuItem item) {
-				selectSplitDistance(group);
+				selectSplitDistance();
 				return true;
 			}
 		});
