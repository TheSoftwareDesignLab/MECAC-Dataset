diff --git a/OsmAnd-java/src/main/java/net/osmand/NativeLibrary.java b/OsmAnd-java/src/main/java/net/osmand/NativeLibrary.java
index 49f08c1372c..5d182f23208 100644
--- a/OsmAnd-java/src/main/java/net/osmand/NativeLibrary.java
+++ b/OsmAnd-java/src/main/java/net/osmand/NativeLibrary.java
@@ -2,6 +2,7 @@
 
 import static net.osmand.IndexConstants.GPX_FILE_EXT;
 import static net.osmand.IndexConstants.GPX_GZ_FILE_EXT;
+import static net.osmand.data.Amenity.ROUTE_ID;
 
 import java.io.File;
 import java.io.FileOutputStream;
@@ -696,7 +697,7 @@ public List<String> getOriginalNames() {
 
 		public String getRouteID() {
 			for (Map.Entry<String, String> entry : getTags().entrySet()) {
-				if ("route_id".equals(entry.getKey())) {
+				if (ROUTE_ID.equals(entry.getKey())) {
 					return entry.getValue();
 				}
 			}
diff --git a/OsmAnd-java/src/main/java/net/osmand/data/Amenity.java b/OsmAnd-java/src/main/java/net/osmand/data/Amenity.java
index 13e72fae141..d57d0c6457e 100644
--- a/OsmAnd-java/src/main/java/net/osmand/data/Amenity.java
+++ b/OsmAnd-java/src/main/java/net/osmand/data/Amenity.java
@@ -1,7 +1,11 @@
 package net.osmand.data;
 
-import static net.osmand.gpx.GPXUtilities.AMENITY_PREFIX;
-import static net.osmand.gpx.GPXUtilities.OSM_PREFIX;
+import static net.osmand.gpx.GPXUtilities.*;
+import static net.osmand.osm.MapPoiTypes.ROUTES_PREFIX;
+import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE_POINT;
+import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK;
+import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK_POINT;
+import static net.osmand.shared.gpx.GpxFile.XML_COLON;
 
 import net.osmand.Location;
 import net.osmand.binary.BinaryMapIndexReader.TagValuePair;
@@ -48,6 +52,7 @@ public class Amenity extends MapObject {
 	public static final String IS_AGGR_PART = "is_aggr_part";
 	public static final String CONTENT_JSON = "content_json";
 	public static final String ROUTE_ID = "route_id";
+	public static final String ROUTE_ID_OSM_PREFIX = "OSM";
 	public static final String ROUTE_SOURCE = "route_source";
 	public static final String ROUTE_NAME = "route_name";
 	public static final String COLOR = "color";
@@ -169,7 +174,7 @@ public String getAdditionalInfo(String key) {
 		}
 		String str = additionalInfo.get(key);
 		if (str == null && key.contains(":")) {
-			str = additionalInfo.get(key.replaceAll(":", "_-_")); // try content_-_uk after content:uk
+			str = additionalInfo.get(key.replaceAll(":", XML_COLON)); // try content_-_uk after content:uk
 		}
 		if (str != null) {
 			str = unzipContent(str);
@@ -309,7 +314,7 @@ public StringBuilder printNamesAndAdditional() {
 	private void printNames(String prefix, Map<String, String> stringMap, StringBuilder s) {
 		for (Entry<String, String> e : stringMap.entrySet()) {
 			if (e.getValue().startsWith(" gz ")) {
-				s.append(prefix).append(e.getKey()).append("='gzip ...'");
+				s.append(prefix).append(e.getKey()).append("='gzip ...' ");
 			} else {
 				s.append(prefix).append(e.getKey()).append("='").append(e.getValue()).append("' ");
 			}
@@ -347,10 +352,11 @@ public String getColor() {
 	}
 
 	public String getGpxIcon() {
-		return getAdditionalInfo(GPX_ICON);
+		String wikiVoyageIcon = getAdditionalInfo(GPX_ICON);
+		String travelGpxIcon = getAdditionalInfo(ICON_NAME_EXTENSION);
+		return Algorithms.isEmpty(wikiVoyageIcon) ? travelGpxIcon : wikiVoyageIcon;
 	}
 
-
 	public String getContentLanguage(String tag, String lang, String defLang) {
 		if (lang != null) {
 			String translateName = getAdditionalInfo(tag + ":" + lang);
@@ -432,7 +438,7 @@ public String getTagContent(String tag, String lang) {
 			return translateName;
 		}
 		for (String nm : getAdditionalInfoKeys()) {
-			if (nm.startsWith(tag + ":") || nm.startsWith(tag + "_-_")) {
+			if (nm.startsWith(tag + ":") || nm.startsWith(tag + XML_COLON)) {
 				return getAdditionalInfo(nm);
 			}
 		}
@@ -447,6 +453,25 @@ public String getRouteId() {
 		return getAdditionalInfo(ROUTE_ID);
 	}
 
+	public boolean hasOsmRouteId() {
+		String routeId = getRouteId();
+		return routeId != null && routeId.startsWith(ROUTE_ID_OSM_PREFIX);
+	}
+
+	public String getGpxFileName(String lang) {
+		final String gpxFileName = lang != null ? getName(lang) : getEnName(true);
+		if (!Algorithms.isEmpty(gpxFileName)) {
+			return gpxFileName;
+		}
+		if (!Algorithms.isEmpty(getRouteId())) {
+			return getRouteId();
+		}
+		if (!Algorithms.isEmpty(getSubType())) {
+			return getType().getKeyName() + " " + getSubType();
+		}
+		return getType().getKeyName();
+	}
+
 	public String getStrictTagContent(String tag, String lang) {
 		if (lang != null) {
 			String translateName = getAdditionalInfo(tag + ":" + lang);
@@ -549,6 +574,14 @@ public boolean isPrivateAccess() {
 		return PRIVATE_VALUE.equals(getTagContent(ACCESS_PRIVATE_TAG));
 	}
 
+	public boolean isRouteTrack() {
+		return subType != null && (subType.equals(ROUTE_TRACK) || subType.startsWith(ROUTES_PREFIX));
+	}
+
+	public boolean isRoutePoint() {
+		return subType != null && (subType.equals(ROUTE_TRACK_POINT) || subType.equals(ROUTE_ARTICLE_POINT));
+	}
+
 	public JSONObject toJSON() {
 		JSONObject json = super.toJSON();
 		json.put("subType", subType);
diff --git a/OsmAnd-java/src/main/java/net/osmand/gpx/GPXUtilities.java b/OsmAnd-java/src/main/java/net/osmand/gpx/GPXUtilities.java
index e7a42961fbb..fc4d91f3b1d 100644
--- a/OsmAnd-java/src/main/java/net/osmand/gpx/GPXUtilities.java
+++ b/OsmAnd-java/src/main/java/net/osmand/gpx/GPXUtilities.java
@@ -3,6 +3,7 @@
 
 
 import static net.osmand.gpx.GPXUtilities.RouteSegment.START_TRKPT_IDX_ATTR;
+import static net.osmand.shared.gpx.GpxFile.XML_COLON;
 import static net.osmand.util.Algorithms.isDigit;
 
 import net.osmand.IProgress;
@@ -1363,7 +1364,7 @@ private static String getOsmandTagKey(final Entry<String, String> entry) {
 		if (key.startsWith(OSMAND_EXTENSIONS_PREFIX)) {
 			key = key.replace(OSMAND_EXTENSIONS_PREFIX, "");
 		}
-		key = key.replace(":", "_-_");
+		key = key.replace(":", XML_COLON);
 		return OSMAND_EXTENSIONS_PREFIX + key;
 	}
 
diff --git a/OsmAnd-java/src/main/java/net/osmand/osm/MapPoiTypes.java b/OsmAnd-java/src/main/java/net/osmand/osm/MapPoiTypes.java
index 05170babbd1..8e14cf29fd8 100644
--- a/OsmAnd-java/src/main/java/net/osmand/osm/MapPoiTypes.java
+++ b/OsmAnd-java/src/main/java/net/osmand/osm/MapPoiTypes.java
@@ -31,7 +31,7 @@
 
 
 public class MapPoiTypes {
-	private static final String OTHER_MAP_CATEGORY = "Other";
+	public static final String OTHER_MAP_CATEGORY = "Other";
 	private static MapPoiTypes DEFAULT_INSTANCE = null;
 	private static final Log log = PlatformUtil.getLog(MapRenderingTypes.class);
 	private String resourceName;
@@ -48,7 +48,8 @@ public class MapPoiTypes {
 	public static final String ROUTE_ARTICLE = "route_article";
 	public static final String ROUTE_ARTICLE_POINT = "route_article_point";
 	public static final String CATEGORY = "category";
-	public static final String ROUTE_TRACK = "route_track";
+	public static final String ROUTE_TRACK = "route_track"; // routes:route_track (no activity)
+	public static final String ROUTES_PREFIX = "routes_"; // routes:routes_xxx (any activity type)
 	public static final String ROUTE_TRACK_POINT = "route_track_point";
 
 	private PoiTranslator poiTranslator = null;
@@ -970,11 +971,7 @@ public String replaceDeprecatedSubtype(PoiCategory type, String subtype) {
 	}
 
 	public Amenity parseAmenity(String tag, String val, boolean relation, Map<String, String> otherTags) {
-		initPoiTypesByTag();
-		PoiType pt = poiTypesByTag.get(tag + "/" + val);
-		if (pt == null) {
-			pt = poiTypesByTag.get(tag);
-		}
+		PoiType pt = getPoiTypeByTagValue(tag, val);
 		if (pt == null || pt.isAdditional()) {
 			return null;
 		}
@@ -1032,6 +1029,19 @@ public Amenity parseAmenity(String tag, String val, boolean relation, Map<String
 		return a;
 	}
 
+
+	public PoiType getPoiTypeByTagValue(String tag, String val) {
+		initPoiTypesByTag();
+		PoiType pt = poiTypesByTag.get(tag + "/" + val);
+		if (pt == null) {
+			pt = poiTypesByTag.get(tag);
+		}
+//		if (pt == null) {
+//			pt = poitypesbytag.get(tag + "/" + "null"); // required when no type="text" specified
+//		}
+		return pt;
+	}
+
 	public boolean isTextAdditionalInfo(String key, String value) {
 		if (key.startsWith("name:") || key.equals("name")) {
 			return true;
diff --git a/OsmAnd-java/src/main/java/net/osmand/search/SearchUICore.java b/OsmAnd-java/src/main/java/net/osmand/search/SearchUICore.java
index d4b4f2a1f22..e9ff6ea2594 100644
--- a/OsmAnd-java/src/main/java/net/osmand/search/SearchUICore.java
+++ b/OsmAnd-java/src/main/java/net/osmand/search/SearchUICore.java
@@ -1,5 +1,9 @@
 package net.osmand.search;
 
+import static net.osmand.data.Amenity.ROUTE_ID;
+import static net.osmand.osm.MapPoiTypes.ROUTES_PREFIX;
+import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK;
+
 import net.osmand.CallbackWithObject;
 import net.osmand.Collator;
 import net.osmand.PlatformUtil;
@@ -289,11 +293,8 @@ public boolean sameSearchResult(SearchResult r1, SearchResult r2) {
 									|| (subType1.startsWith("route_hiking_") && subType1.endsWith("n_poi"))) {
 								similarityRadius = 50000;
 							}
-							final String ROUTE_ID = "route_id";
-							final String ROUTE_TRACK = "route_track";
-							final String ROUTE_TYPE_PREFIX = "activities_";
 							if (Algorithms.stringsEqual(a1.getAdditionalInfo(ROUTE_ID), a2.getAdditionalInfo(ROUTE_ID))
-								&& (subType1.startsWith(ROUTE_TYPE_PREFIX) || subType1.equals(ROUTE_TRACK))) {
+								&& (subType1.startsWith(ROUTES_PREFIX) || subType1.equals(ROUTE_TRACK))) {
 								similarityRadius = 50000;
 							}
 						}
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/GpxFile.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/GpxFile.kt
index 04ac06a4c1c..b79d879a1d4 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/GpxFile.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/GpxFile.kt
@@ -894,5 +894,6 @@ class GpxFile : GpxExtensions {
 	companion object {
 		const val OSMAND_AUTHOR_PREFIX = "OsmAnd"
 		const val DEFAULT_WPT_GROUP_NAME = ""
+		const val XML_COLON = "_-_"
 	}
 }
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/GpxUtilities.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/GpxUtilities.kt
index c9c43baecf7..f629663c4e7 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/GpxUtilities.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/GpxUtilities.kt
@@ -11,6 +11,7 @@ import kotlinx.datetime.toLocalDateTime
 import net.osmand.shared.KException
 import net.osmand.shared.data.KQuadRect
 import net.osmand.shared.extensions.currentTimeMillis
+import net.osmand.shared.gpx.GpxFile.Companion.XML_COLON
 import net.osmand.shared.gpx.primitives.Author
 import net.osmand.shared.gpx.primitives.Bounds
 import net.osmand.shared.gpx.primitives.Copyright
@@ -349,6 +350,7 @@ object GpxUtilities {
 			const val OBF_POINTS_GROUPS_ICONS = "points_groups_icons"
 			const val OBF_POINTS_GROUPS_COLORS = "points_groups_colors"
 			const val OBF_POINTS_GROUPS_BACKGROUNDS = "points_groups_backgrounds"
+			const val OBF_POINTS_GROUPS_EMPTY_NAME_STUB = "." // stub to store empty points_groups_names
 			const val OBF_POINTS_GROUPS_CATEGORY = "points_groups_category" // optional category of OBF-GPX point
 
 			fun parsePointsGroupAttributes(parser: XmlPullParser): PointsGroup {
@@ -818,7 +820,7 @@ object GpxUtilities {
 		if (newKey.startsWith(OSMAND_EXTENSIONS_PREFIX)) {
 			newKey = newKey.replace(OSMAND_EXTENSIONS_PREFIX, "")
 		}
-		newKey = newKey.replace(":", "_-_")
+		newKey = newKey.replace(":", XML_COLON)
 		return OSMAND_EXTENSIONS_PREFIX + newKey
 	}
 
@@ -999,6 +1001,7 @@ object GpxUtilities {
 		extensionsReader: GpxExtensionsReader?,
 		addGeneralTrack: Boolean
 	): GpxFile {
+		val insideTagDepth = mutableMapOf("trk" to 0)
 		oneOffLogParseTimeErrors = true
 		val gpxFile = GpxFile(null)
 		gpxFile.metadata.time = 0
@@ -1032,6 +1035,7 @@ object GpxUtilities {
 				if (tok == XmlPullParser.START_TAG) {
 					val parse = parserState.lastOrNull()
 					val tag = parser.getName() ?: ""
+					insideTagDepth[tag]?.let { insideTagDepth[tag] = it + 1}
 					if (extensionReadMode && parse != null && !routePointExtension) {
 						val tagName = tag.lowercase()
 						when {
@@ -1062,8 +1066,8 @@ object GpxUtilities {
 								}
 							}
 
-							tagName == "route" -> routeExtension = true
-							tagName == "types" -> typesExtension = true
+							tagName == "route" && insideTagDepth["trk"]!! > 0 -> routeExtension = true
+							tagName == "types" && insideTagDepth["trk"]!! > 0 -> typesExtension = true
 							tagName == "points_groups" -> pointsGroupsExtension = true
 							tagName == "network_route" -> networkRoute = true
 							else -> {
@@ -1314,7 +1318,8 @@ object GpxUtilities {
 					}
 				} else if (tok == XmlPullParser.END_TAG) {
 					val parse = parserState.lastOrNull()
-					val tag = parser.getName()
+					val tag = parser.getName() ?: ""
+					insideTagDepth[tag]?.let { insideTagDepth[tag] = it - 1}
 
 					if (tag.equals("routepointextension", ignoreCase = true)) {
 						routePointExtension = false
@@ -1661,5 +1666,4 @@ object GpxUtilities {
 			i += if (processedPoints > 0) processedPoints else 1
 		}
 	}
-
 }
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/RouteActivityHelper.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/RouteActivityHelper.kt
index 0cc947be854..85c99daf1ff 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/RouteActivityHelper.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/RouteActivityHelper.kt
@@ -45,6 +45,15 @@ object RouteActivityHelper {
 		return cachedActivities
 	}
 
+	fun findActivityByTag(tag: String): RouteActivity? {
+		for (activity in getActivities()) {
+			if (activity.tags != null && activity.tags.contains(tag)) {
+				return activity
+			}
+		}
+		return null
+	}
+
 	fun saveRouteActivity(trackItems: Collection<TrackItem>, routeActivity: RouteActivity?) {
 		runAsync {
 			trackItems.forEach { trackItem ->
@@ -124,7 +133,8 @@ object RouteActivityHelper {
 				val activityId = activityJson["id"]!!.jsonPrimitive.content
 				val activityLabel = activityJson["label"]!!.jsonPrimitive.content
 				val iconName = activityJson["icon_name"]!!.jsonPrimitive.content
-				val activity = RouteActivity(activityId, activityLabel, iconName, activitiesGroup)
+				val tags = activityJson["tags"]?.jsonArray?.map { it.jsonPrimitive.content }?.toSet()
+				val activity = RouteActivity(activityId, activityLabel, iconName, activitiesGroup, tags)
 				cachedActivities.add(activity)
 				activities.add(activity)
 			}
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/primitives/GpxExtensions.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/primitives/GpxExtensions.kt
index dde416446f2..aa771f6ae15 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/primitives/GpxExtensions.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/primitives/GpxExtensions.kt
@@ -87,8 +87,4 @@ open class GpxExtensions {
 	fun removeColor() {
 		getExtensionsToWrite().remove(GpxUtilities.COLOR_NAME_EXTENSION)
 	}
-
-	companion object {
-		const val OBF_GPX_EXTENSION_TAG_PREFIX = "gpx_" // enlisted in poi_types.xml under name="route_track"
-	}
 }
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/primitives/RouteActivity.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/primitives/RouteActivity.kt
index ffa8981e566..4df75a8906d 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/primitives/RouteActivity.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/gpx/primitives/RouteActivity.kt
@@ -4,7 +4,8 @@ data class RouteActivity(
 	val id: String,
 	val label: String,
 	val iconName: String,
-	val group: RouteActivityGroup
+	val group: RouteActivityGroup,
+	val tags: Set<String>? = null
 ) {
 	override fun toString(): String {
 		return id
diff --git a/OsmAnd/res/values-b+sr+Latn/phrases.xml b/OsmAnd/res/values-b+sr+Latn/phrases.xml
index 773b98f0f5d..1fb2f10f421 100644
--- a/OsmAnd/res/values-b+sr+Latn/phrases.xml
+++ b/OsmAnd/res/values-b+sr+Latn/phrases.xml
@@ -4884,17 +4884,6 @@
     <string name="poi_route_article_point">Tačke na putovanjima</string>
     <string name="poi_route_track">Druge rute</string>
     <string name="poi_route_track_point">Tačke drugih ruta</string>
-    <string name="poi_activities_bicycle">Bicikl</string>
-    <string name="poi_activities_trekking">Pešačenje</string>
-    <string name="poi_activities_running">Trčanje</string>
-    <string name="poi_activities_pedestrian">Hodanje</string>
-    <string name="poi_activities_kayak">Sportovi na vodi</string>
-    <string name="poi_activities_skiing">Zimski sportovi</string>
-    <string name="poi_activities_inline_skates">Koturaljke</string>
-    <string name="poi_activities_horse">Jahanje konja</string>
-    <string name="poi_activities_snowmobile">Motorne sanke</string>
-    <string name="poi_activities_fitness">Staze za trčanje</string>
-    <string name="poi_activities_mountain_bike">Brdski biciklizam</string>
     <string name="poi_name_etymology">Etimologija imena</string>
     <string name="poi_name_left">Naziv leve strane</string>
     <string name="poi_name_right">Naziv desne strane</string>
@@ -4904,4 +4893,4 @@
     <string name="poi_camp_site_basic">Osnovno</string>
     <string name="poi_camp_site_standard">Standardno</string>
     <string name="poi_camp_site_serviced">Uslužno</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-cs/phrases.xml b/OsmAnd/res/values-cs/phrases.xml
index 6e6da50a1eb..1f1fa432cbe 100644
--- a/OsmAnd/res/values-cs/phrases.xml
+++ b/OsmAnd/res/values-cs/phrases.xml
@@ -4884,17 +4884,6 @@
     <string name="poi_route_article_point">Body na cestách</string>
     <string name="poi_route_track">Další trasy</string>
     <string name="poi_route_track_point">Další body trasy</string>
-    <string name="poi_activities_bicycle">Kolo</string>
-    <string name="poi_activities_trekking">Pěší turistika</string>
-    <string name="poi_activities_running">Běh</string>
-    <string name="poi_activities_pedestrian">Chůze</string>
-    <string name="poi_activities_kayak">Vodní sporty</string>
-    <string name="poi_activities_horse">Jízda na koni</string>
-    <string name="poi_activities_skiing">Zimní sporty</string>
-    <string name="poi_activities_snowmobile">Sněžný skútr</string>
-    <string name="poi_activities_fitness">Fitness stezky</string>
-    <string name="poi_activities_inline_skates">Inline brusle</string>
-    <string name="poi_activities_mountain_bike">Horská cyklistika</string>
     <string name="poi_name_etymology">Původ názvu</string>
     <string name="poi_name_right">Název pravé strany</string>
     <string name="poi_name_left">Název levé strany</string>
@@ -4904,4 +4893,4 @@
     <string name="poi_camp_site_basic">Základní</string>
     <string name="poi_camp_site_standard">Standardní</string>
     <string name="poi_camp_site_serviced">Se službami</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-de/phrases.xml b/OsmAnd/res/values-de/phrases.xml
index c380b1c3d24..ef8eaa990ae 100644
--- a/OsmAnd/res/values-de/phrases.xml
+++ b/OsmAnd/res/values-de/phrases.xml
@@ -4881,20 +4881,9 @@
     <string name="poi_osmand_foot_prohibited_tunnel">Tunnel für Fußgänger verboten</string>
     <string name="poi_osmand_bicycle_prohibited_tunnel">Tunnel für Radfahrer verboten</string>
     <string name="poi_route_article_point">Reisepunkte</string>
-    <string name="poi_activities_kayak">Wassersport</string>
-    <string name="poi_activities_pedestrian">Gehen</string>
-    <string name="poi_activities_horse">Reiten</string>
     <string name="poi_route_article">Reiseartikel</string>
     <string name="poi_route_track">Andere Routen</string>
     <string name="poi_route_track_point">Weitere Routenpunkte</string>
-    <string name="poi_activities_bicycle">Fahrrad</string>
-    <string name="poi_activities_trekking">Wandern</string>
-    <string name="poi_activities_running">Laufen</string>
-    <string name="poi_activities_skiing">Wintersport</string>
-    <string name="poi_activities_snowmobile">Schneemobil</string>
-    <string name="poi_activities_fitness">Fitness-Parcour</string>
-    <string name="poi_activities_inline_skates">Inlineskates</string>
-    <string name="poi_activities_mountain_bike">Mountainbiken</string>
     <string name="poi_name_etymology">Namensetymologie</string>
     <string name="poi_name_left">Name der linken Seite</string>
     <string name="poi_name_right">Name der rechten Seite</string>
@@ -4904,4 +4893,4 @@
     <string name="poi_camp_site_standard">Standard</string>
     <string name="poi_camp_site_basic">Einfach</string>
     <string name="poi_climbing_boulder">Kletterfels</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-eo/phrases.xml b/OsmAnd/res/values-eo/phrases.xml
index 2152de546ed..20f3c2bb54b 100644
--- a/OsmAnd/res/values-eo/phrases.xml
+++ b/OsmAnd/res/values-eo/phrases.xml
@@ -4880,17 +4880,6 @@
     <string name="poi_route_article_point">Vojaĝaj punktoj</string>
     <string name="poi_route_track">Aliaj kursoj</string>
     <string name="poi_route_track_point">Aliaj kursoj: punktoj</string>
-    <string name="poi_activities_bicycle">Biciklado</string>
-    <string name="poi_activities_trekking">Marŝado</string>
-    <string name="poi_activities_running">Kurado</string>
-    <string name="poi_activities_pedestrian">Irado</string>
-    <string name="poi_activities_kayak">Akvaj sportoj</string>
-    <string name="poi_activities_horse">Ĉevalrajdado</string>
-    <string name="poi_activities_skiing">Vintraj sportoj</string>
-    <string name="poi_activities_snowmobile">Motorsledado</string>
-    <string name="poi_activities_fitness">Vojetoj de sportiloj</string>
-    <string name="poi_activities_inline_skates">Rulglitado</string>
-    <string name="poi_activities_mountain_bike">Montbiciklado</string>
     <string name="poi_payment_parco_yes">Parco</string>
     <string name="poi_payment_parco_no">Parco malakceptata</string>
     <string name="poi_payment_parkster_yes">Parkster</string>
@@ -4904,4 +4893,4 @@
     <string name="poi_camp_site_standard">kun necesejoj kaj akvo</string>
     <string name="poi_camp_site_serviced">kun necesejoj, akvo kaj elektro</string>
     <string name="poi_camp_site_deluxe">luksa</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-es-rAR/phrases.xml b/OsmAnd/res/values-es-rAR/phrases.xml
index 56a46027054..084f86324ac 100644
--- a/OsmAnd/res/values-es-rAR/phrases.xml
+++ b/OsmAnd/res/values-es-rAR/phrases.xml
@@ -4884,17 +4884,6 @@
     <string name="poi_route_article_point">Puntos turísticos</string>
     <string name="poi_route_track">Otras rutas</string>
     <string name="poi_route_track_point">Otros puntos de ruta</string>
-    <string name="poi_activities_bicycle">Bicicleta</string>
-    <string name="poi_activities_trekking">Senderismo</string>
-    <string name="poi_activities_running">Correr</string>
-    <string name="poi_activities_pedestrian">Peatón</string>
-    <string name="poi_activities_kayak">Deportes acuáticos</string>
-    <string name="poi_activities_horse">Equitación</string>
-    <string name="poi_activities_skiing">Deportes de invierno</string>
-    <string name="poi_activities_snowmobile">Motonieve</string>
-    <string name="poi_activities_fitness">Circuitos aeróbicos</string>
-    <string name="poi_activities_inline_skates">Patines en línea</string>
-    <string name="poi_activities_mountain_bike">Ciclismo de montaña</string>
     <string name="poi_name_etymology">Nombre etimológico</string>
     <string name="poi_name_left">Nombre del lado izquierdo</string>
     <string name="poi_name_right">Nombre del lado derecho</string>
@@ -4904,4 +4893,4 @@
     <string name="poi_camp_site_serviced">Con servicios</string>
     <string name="poi_camp_site_type">Tipo de campamento</string>
     <string name="poi_camp_site_deluxe">De lujo</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-es-rUS/phrases.xml b/OsmAnd/res/values-es-rUS/phrases.xml
index 44dae07f6ea..ad7ef86f7d8 100644
--- a/OsmAnd/res/values-es-rUS/phrases.xml
+++ b/OsmAnd/res/values-es-rUS/phrases.xml
@@ -4979,15 +4979,4 @@
     <string name="poi_route_article_point">Puntos turísticos</string>
     <string name="poi_route_track">Otras rutas</string>
     <string name="poi_route_track_point">Otros puntos de ruta</string>
-    <string name="poi_activities_bicycle">Bicicleta</string>
-    <string name="poi_activities_trekking">Senderismo</string>
-    <string name="poi_activities_running">Correr</string>
-    <string name="poi_activities_pedestrian">Peatón</string>
-    <string name="poi_activities_kayak">Deportes acuáticos</string>
-    <string name="poi_activities_horse">Equitación</string>
-    <string name="poi_activities_skiing">Deportes de invierno</string>
-    <string name="poi_activities_snowmobile">Motonieve</string>
-    <string name="poi_activities_fitness">Circuitos aeróbicos</string>
-    <string name="poi_activities_inline_skates">Patines en línea</string>
-    <string name="poi_activities_mountain_bike">Ciclismo de montaña</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-es/phrases.xml b/OsmAnd/res/values-es/phrases.xml
index bc9644cadbc..ac8db966179 100644
--- a/OsmAnd/res/values-es/phrases.xml
+++ b/OsmAnd/res/values-es/phrases.xml
@@ -4880,21 +4880,10 @@
     <string name="poi_payment_parco_yes">Parco</string>
     <string name="poi_osmand_foot_prohibited_tunnel">Túnel prohibido para peatones</string>
     <string name="poi_osmand_bicycle_prohibited_tunnel">Túnel prohibido para ciclistas</string>
-    <string name="poi_activities_bicycle">Bicicleta</string>
-    <string name="poi_activities_trekking">Senderismo</string>
-    <string name="poi_activities_running">Correr</string>
-    <string name="poi_activities_pedestrian">Peatonal</string>
-    <string name="poi_activities_kayak">Deportes acuáticos</string>
-    <string name="poi_activities_horse">Equitación</string>
-    <string name="poi_activities_snowmobile">Motonieve</string>
-    <string name="poi_activities_fitness">Circuitos aeróbicos</string>
-    <string name="poi_activities_inline_skates">Patines en línea</string>
-    <string name="poi_activities_mountain_bike">Bicicleta de montaña</string>
     <string name="poi_route_article">Artículos de viajes</string>
     <string name="poi_route_article_point">Puntos del viaje</string>
     <string name="poi_route_track">Otras rutas</string>
     <string name="poi_route_track_point">Otros puntos de la ruta</string>
-    <string name="poi_activities_skiing">Deportes de invierno</string>
     <string name="poi_name_left">Nombre en el lado izquierdo</string>
     <string name="poi_name_etymology">Etimología del nombre</string>
     <string name="poi_name_right">Nombre en el lado derecho</string>
@@ -4904,4 +4893,4 @@
     <string name="poi_camp_site_deluxe">De lujo</string>
     <string name="poi_camp_site_type">Tipo de camping</string>
     <string name="poi_camp_site_basic">Básico</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-et/phrases.xml b/OsmAnd/res/values-et/phrases.xml
index 1a027924ebb..31608e0a329 100644
--- a/OsmAnd/res/values-et/phrases.xml
+++ b/OsmAnd/res/values-et/phrases.xml
@@ -4872,19 +4872,8 @@
     <string name="poi_cycle_network">Rattateede võrgustik</string>
     <string name="poi_padus_category_designation">Kategooria: määramine</string>
     <string name="poi_padus_category_easement">Kategooria: servituut</string>
-    <string name="poi_activities_kayak">Veespordialad</string>
-    <string name="poi_activities_pedestrian">Kõndimine</string>
-    <string name="poi_activities_running">Jooksmine</string>
-    <string name="poi_activities_trekking">Matkamine</string>
-    <string name="poi_activities_bicycle">Rattasõit</string>
     <string name="poi_route_track_point">Muud teekonnapunktid</string>
     <string name="poi_route_track">Muud teekonnad</string>
-    <string name="poi_activities_skiing">Talispordialad</string>
-    <string name="poi_activities_horse">Ratsutamine</string>
-    <string name="poi_activities_inline_skates">Rulluisutamine üherealiste uiskudega</string>
-    <string name="poi_activities_fitness">Terviserajad</string>
-    <string name="poi_activities_snowmobile">Mootorsaanisõit</string>
-    <string name="poi_activities_mountain_bike">Mägirattasõit</string>
     <string name="poi_payment_parkster_no">Parksteri teenus pole kasutatav</string>
     <string name="poi_payment_parkster_yes">Parkster</string>
     <string name="poi_payment_parco_no">Parco teenus pole kasutatav</string>
@@ -4897,4 +4886,4 @@
     <string name="poi_camp_site_serviced">Lisateenustega</string>
     <string name="poi_camp_site_standard">Standardne</string>
     <string name="poi_camp_site_deluxe">Luksuslik</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-hu/phrases.xml b/OsmAnd/res/values-hu/phrases.xml
index fb3fb66137b..5c8ae442586 100644
--- a/OsmAnd/res/values-hu/phrases.xml
+++ b/OsmAnd/res/values-hu/phrases.xml
@@ -4880,14 +4880,5 @@
     <string name="poi_payment_parco_no">Parcót nem fogad el</string>
     <string name="poi_payment_parkster_yes">Parkster</string>
     <string name="poi_payment_parkster_no">Parkstert nem fogad el</string>
-    <string name="poi_activities_kayak">Vízi sportok</string>
-    <string name="poi_activities_horse">Lovaglás</string>
-    <string name="poi_activities_skiing">Téli sportok</string>
-    <string name="poi_activities_snowmobile">Hójáró</string>
-    <string name="poi_activities_mountain_bike">Hegyi kerékpározás</string>
     <string name="poi_route_track">Egyéb útvonalak</string>
-    <string name="poi_activities_bicycle">Kerékpározás</string>
-    <string name="poi_activities_running">Futás</string>
-    <string name="poi_activities_pedestrian">Gyaloglás</string>
-    <string name="poi_activities_trekking">Túrázás</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-is/phrases.xml b/OsmAnd/res/values-is/phrases.xml
index 0bbfa51f5e5..0714eac1ab4 100644
--- a/OsmAnd/res/values-is/phrases.xml
+++ b/OsmAnd/res/values-is/phrases.xml
@@ -4932,24 +4932,13 @@
     <string name="poi_us_maps_recreation_area_facility_rapid">Flúð</string>
     <string name="poi_us_maps_recreation_area_activity_beachcombing">Fjársjóðaleit á strönd</string>
     <string name="poi_us_maps_recreation_area_activity_interpretive_areas">Túlkunarsvæði</string>
-    <string name="poi_activities_inline_skates">Línuskautar</string>
-    <string name="poi_activities_mountain_bike">Fjallahjólreiðar</string>
     <string name="poi_osmand_foot_prohibited_tunnel">Göng bönnuð fyrir gangandi</string>
     <string name="poi_osmand_bicycle_prohibited_tunnel">Göng bönnuð fyrir hjólandi</string>
     <string name="poi_route_article">Ferðagreinar</string>
     <string name="poi_route_article_point">Punktar ferðar</string>
     <string name="poi_route_track">Aðrar leiðir</string>
     <string name="poi_route_track_point">Punktar í öðrum leiðum</string>
-    <string name="poi_activities_bicycle">Hjólandi</string>
-    <string name="poi_activities_trekking">Gönguferðir</string>
-    <string name="poi_activities_running">Hlaupandi</string>
-    <string name="poi_activities_pedestrian">Gangandi</string>
-    <string name="poi_activities_kayak">Vatnaíþróttir</string>
-    <string name="poi_activities_horse">Hestaferðir</string>
-    <string name="poi_activities_skiing">Vetraríþróttir</string>
-    <string name="poi_activities_snowmobile">Vélsleðar</string>
-    <string name="poi_activities_fitness">Fitness-leiðir</string>
     <string name="poi_name_right">Nafn hægra megin</string>
     <string name="poi_name_etymology">Orðsifjar nafns</string>
     <string name="poi_name_left">Nafn vinstra megin</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-pt-rBR/phrases.xml b/OsmAnd/res/values-pt-rBR/phrases.xml
index 6f9c21b7334..81282c24ebe 100644
--- a/OsmAnd/res/values-pt-rBR/phrases.xml
+++ b/OsmAnd/res/values-pt-rBR/phrases.xml
@@ -4874,21 +4874,11 @@
     <string name="poi_cash_in">Depósito de dinheiro</string>
     <string name="poi_osmand_access_main_tag">Acesso</string>
     <string name="poi_route_track">Outras rotas</string>
-    <string name="poi_activities_running">Corrida</string>
     <string name="poi_osmand_foot_prohibited_tunnel">Túnel proibido para pedestres</string>
     <string name="poi_osmand_bicycle_prohibited_tunnel">Túnel proibido para ciclistas</string>
     <string name="poi_route_article">Artigos de viagem</string>
     <string name="poi_route_article_point">Pontos de viagem</string>
     <string name="poi_route_track_point">Outros pontos de rotas</string>
-    <string name="poi_activities_bicycle">Bicicleta</string>
-    <string name="poi_activities_trekking">Caminhada</string>
-    <string name="poi_activities_pedestrian">A pé</string>
-    <string name="poi_activities_kayak">Esportes aquáticos</string>
-    <string name="poi_activities_horse">Local de equitação</string>
-    <string name="poi_activities_skiing">Esportes de inverno</string>
-    <string name="poi_activities_snowmobile">Moto de neve</string>
-    <string name="poi_activities_fitness">Trilhas de exercícios</string>
-    <string name="poi_activities_inline_skates">Patins em linha</string>
     <string name="poi_payment_parco_no">Parco não aceito</string>
     <string name="poi_payment_parkster_no">Parkster não aceito</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-sr/phrases.xml b/OsmAnd/res/values-sr/phrases.xml
index a7468220dcd..8c644c9f313 100644
--- a/OsmAnd/res/values-sr/phrases.xml
+++ b/OsmAnd/res/values-sr/phrases.xml
@@ -4884,20 +4884,9 @@
     <string name="poi_osmand_bicycle_prohibited_tunnel">Тунел забрањен за бициклисте</string>
     <string name="poi_osmand_foot_prohibited_tunnel">Тунел забрањен за пешаке</string>
     <string name="poi_route_article_point">Тачке на путовањима</string>
-    <string name="poi_activities_trekking">Планинарење</string>
-    <string name="poi_activities_kayak">Спортови на води</string>
-    <string name="poi_activities_horse">Јахање коња</string>
-    <string name="poi_activities_skiing">Зимски спортови</string>
-    <string name="poi_activities_snowmobile">Моторне санке</string>
-    <string name="poi_activities_mountain_bike">Брдски бициклизам</string>
     <string name="poi_route_article">Чланци о путовањима</string>
     <string name="poi_route_track">Друге руте</string>
     <string name="poi_route_track_point">Тачке других рута</string>
-    <string name="poi_activities_bicycle">Бицикл</string>
-    <string name="poi_activities_pedestrian">Пешачење</string>
-    <string name="poi_activities_running">Трчање</string>
-    <string name="poi_activities_fitness">Стазе за трчање</string>
-    <string name="poi_activities_inline_skates">Котураљке</string>
     <string name="poi_name_etymology">Етимологија имена</string>
     <string name="poi_name_left">Назив леве стране</string>
     <string name="poi_name_right">Назив десне стране</string>
@@ -4907,4 +4896,4 @@
     <string name="poi_camp_site_basic">Основно</string>
     <string name="poi_camp_site_standard">Стандардно</string>
     <string name="poi_camp_site_deluxe">Делукс</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-uk/phrases.xml b/OsmAnd/res/values-uk/phrases.xml
index d6bbc9af9cf..e19c1ae12b4 100644
--- a/OsmAnd/res/values-uk/phrases.xml
+++ b/OsmAnd/res/values-uk/phrases.xml
@@ -4881,17 +4881,6 @@
     <string name="poi_route_article_point">Пункти</string>
     <string name="poi_route_track">Інші маршрути</string>
     <string name="poi_route_track_point">Інші пункти маршруту</string>
-    <string name="poi_activities_bicycle">Велосипед</string>
-    <string name="poi_activities_trekking">Піший туризм</string>
-    <string name="poi_activities_running">Біг</string>
-    <string name="poi_activities_pedestrian">Ходьба</string>
-    <string name="poi_activities_kayak">Водні види спорту</string>
-    <string name="poi_activities_horse">Верхова їзда</string>
-    <string name="poi_activities_skiing">Зимові види спорту</string>
-    <string name="poi_activities_snowmobile">Снігохід</string>
-    <string name="poi_activities_fitness">Фітнес-стежки</string>
-    <string name="poi_activities_inline_skates">Роликові ковзани</string>
-    <string name="poi_activities_mountain_bike">Катання на гірських велосипедах</string>
     <string name="poi_payment_parco_no">Паркомісце не прийнято</string>
     <string name="poi_payment_parco_yes">Паркомісце</string>
     <string name="poi_payment_parkster_no">Паркер не прийнято</string>
@@ -4904,4 +4893,4 @@
     <string name="poi_camp_site_deluxe">Делюкс</string>
     <string name="poi_camp_site_type">Тип турбази</string>
     <string name="poi_camp_site_standard">Стандартний</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values-zh-rTW/phrases.xml b/OsmAnd/res/values-zh-rTW/phrases.xml
index 38881b1b4e4..89a3ad1e70d 100644
--- a/OsmAnd/res/values-zh-rTW/phrases.xml
+++ b/OsmAnd/res/values-zh-rTW/phrases.xml
@@ -4882,19 +4882,8 @@
     <string name="poi_osmand_bicycle_prohibited_tunnel">隧道禁止腳踏車騎士通行</string>
     <string name="poi_route_track">其他路線</string>
     <string name="poi_route_track_point">其他路線點</string>
-    <string name="poi_activities_bicycle">腳踏車</string>
-    <string name="poi_activities_horse">騎馬</string>
-    <string name="poi_activities_skiing">冬季運動</string>
-    <string name="poi_activities_snowmobile">雪地摩托車</string>
-    <string name="poi_activities_inline_skates">直排輪鞋</string>
-    <string name="poi_activities_mountain_bike">山區騎乘</string>
     <string name="poi_route_article_point">旅遊點</string>
     <string name="poi_route_article">旅遊文章</string>
-    <string name="poi_activities_trekking">健行</string>
-    <string name="poi_activities_running">跑步</string>
-    <string name="poi_activities_pedestrian">步行</string>
-    <string name="poi_activities_kayak">水上運動</string>
-    <string name="poi_activities_fitness">健身路徑</string>
     <string name="poi_name_etymology">名稱詞源學</string>
     <string name="poi_name_left">左側的名稱</string>
     <string name="poi_name_right">右側的名稱</string>
@@ -4904,4 +4893,4 @@
     <string name="poi_camp_site_type">露營地類型</string>
     <string name="poi_camp_site_basic">基本</string>
     <string name="poi_camp_site_deluxe">豪華</string>
-</resources>
\ No newline at end of file
+</resources>
diff --git a/OsmAnd/res/values/phrases.xml b/OsmAnd/res/values/phrases.xml
index a2157f05ebb..5b8e7cf788d 100644
--- a/OsmAnd/res/values/phrases.xml
+++ b/OsmAnd/res/values/phrases.xml
@@ -5454,19 +5454,15 @@
 
 	<string name="poi_route_article">Travel Articles</string>
 	<string name="poi_route_article_point">Travel Points</string>
-	<string name="poi_route_track">Other routes</string>
-	<string name="poi_route_track_point">Other routes points</string>
-	<string name="poi_activities_bicycle">Bicycle</string>
-	<string name="poi_activities_trekking">Hiking</string>
-	<string name="poi_activities_running">Running</string>
-	<string name="poi_activities_pedestrian">Walking</string>
-	<string name="poi_activities_kayak">Water sports</string>
-	<string name="poi_activities_horse">Horse riding</string>
-	<string name="poi_activities_skiing">Winter sports</string>
-	<string name="poi_activities_snowmobile">Snowmobile</string>
-	<string name="poi_activities_fitness">Fitness trails</string>
-	<string name="poi_activities_inline_skates">Inline skates</string>
-	<string name="poi_activities_mountain_bike">Mountain biking</string>
+	<string name="poi_route_track_point">Route points</string>
+	<string name="poi_routes_driving">Driving</string>
+	<string name="poi_routes_motorcycling">Motorcycling</string>
+	<string name="poi_routes_foot">Foot</string>
+	<string name="poi_routes_winter_sport">Winter sports</string>
+	<string name="poi_routes_cycling">Cycling</string>
+	<string name="poi_routes_air_sports">Air Sports</string>
+	<string name="poi_routes_water_sport">Water sports</string>
+	<string name="poi_routes_other">Other routes</string>
 
 	<string name="poi_name_etymology">Name etymology</string>
 	<string name="poi_name_left">Name of the left side</string>
diff --git a/OsmAnd/src/net/osmand/plus/configmap/TravelRoutesFragment.java b/OsmAnd/src/net/osmand/plus/configmap/TravelRoutesFragment.java
index 5e21d5813b3..4b306030660 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/TravelRoutesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/TravelRoutesFragment.java
@@ -297,7 +297,7 @@ private void setupRouteTypes(ViewGroup container) {
 			updateItemView(tracksView, getString(R.string.display_route_tracks), R.drawable.ic_action_track_16,
 					selected, DescriptionType.VISIBLE_HIDDEN);
 			app.runInUIThread(() -> {
-				rendererHelper.updateRouteTrackFilter();
+				rendererHelper.updateRouteTrackFilters();
 				rendererHelper.updateRouteTypesVisibility();
 				app.getOsmandMap().refreshMap(true);
 				app.getOsmandMap().getMapLayers().updateLayers((MapActivity) getMyActivity());
@@ -316,7 +316,7 @@ private void setupRouteTypes(ViewGroup container) {
 			updateItemView(tracksAsPoiView, getString(R.string.display_route_tracks_as_poi), R.drawable.ic_action_info_dark,
 					selected, DescriptionType.VISIBLE_HIDDEN);
 			app.runInUIThread(() -> {
-				rendererHelper.updateRouteTrackFilter();
+				rendererHelper.updateRouteTrackFilters();
 				rendererHelper.updateRouteTypesVisibility();
 				app.getOsmandMap().refreshMap(true);
 				app.getOsmandMap().getMapLayers().updateLayers((MapActivity) getMyActivity());
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/MergeLocalizedTagsAlgorithm.kt b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/MergeLocalizedTagsAlgorithm.kt
index 8863503dfd8..a8bc9c1218a 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/MergeLocalizedTagsAlgorithm.kt
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/builders/MergeLocalizedTagsAlgorithm.kt
@@ -3,6 +3,7 @@ package net.osmand.plus.mapcontextmenu.builders
 import net.osmand.osm.AbstractPoiType
 import net.osmand.osm.MapPoiTypes
 import net.osmand.plus.OsmandApplication
+import net.osmand.shared.gpx.GpxFile.Companion.XML_COLON
 
 private val NAME_TAG_PREFIXES = listOf(
 	"name", "int_name", "nat_name", "reg_name", "loc_name",
@@ -135,6 +136,6 @@ class MergeLocalizedTagsAlgorithm private constructor(private val app: OsmandApp
 	}
 
 	private fun convertKey(key: String): String {
-		return key.replace("_-_", ":")
+		return key.replace(XML_COLON, ":")
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/controllers/AmenityMenuController.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/controllers/AmenityMenuController.java
index 6790a7068b3..0ee897ea1be 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/controllers/AmenityMenuController.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/controllers/AmenityMenuController.java
@@ -1,12 +1,14 @@
 package net.osmand.plus.mapcontextmenu.controllers;
 
 import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE_POINT;
+import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK_POINT;
 
 import android.graphics.drawable.Drawable;
 import android.text.TextUtils;
 
 import androidx.annotation.NonNull;
 
+import net.osmand.PlatformUtil;
 import net.osmand.data.Amenity;
 import net.osmand.data.LatLon;
 import net.osmand.data.PointDescription;
@@ -25,13 +27,18 @@
 import net.osmand.plus.transport.TransportStopRoute;
 import net.osmand.plus.wikipedia.WikipediaDialogFragment;
 import net.osmand.plus.wikivoyage.data.TravelArticle;
+import net.osmand.plus.wikivoyage.data.TravelGpx;
 import net.osmand.plus.wikivoyage.data.TravelHelper;
+import net.osmand.plus.wikivoyage.data.TravelObfHelper;
 import net.osmand.util.Algorithms;
 import net.osmand.util.OpeningHoursParser;
 
+import org.apache.commons.logging.Log;
+
 import java.util.List;
 
 public class AmenityMenuController extends MenuController {
+	private static final Log LOG = PlatformUtil.getLog(AmenityMenuController.class);
 
 	private Amenity amenity;
 	private final MapMarker marker;
@@ -69,7 +76,7 @@ public AmenityMenuController(@NonNull MapActivity mapActivity,
 					new MapMarkerMenuController(mapActivity, marker.getPointDescription(mapActivity), marker);
 			leftTitleButtonController = markerMenuController.getLeftTitleButtonController();
 			rightTitleButtonController = markerMenuController.getRightTitleButtonController();
-		} else if (amenity.getSubType().equals(ROUTE_ARTICLE_POINT)) {
+		} else if (amenity.isRoutePoint()) {
 			TitleButtonController openTrackButtonController = new TitleButtonController() {
 				@Override
 				public void buttonPressed() {
@@ -101,11 +108,20 @@ public void buttonPressed() {
 
 	void openTrack(MapActivity mapActivity) {
 		TravelHelper travelHelper = mapActivity.getMyApplication().getTravelHelper();
-		String lang = amenity.getTagSuffix(Amenity.LANG_YES + ":");
-		String name = amenity.getTagContent(Amenity.ROUTE_NAME);
-		TravelArticle article = travelHelper.getArticleByTitle(name, lang, true, null);
-		if (article != null) {
-			travelHelper.openTrackMenu(article, mapActivity, name, amenity.getLocation());
+		if (ROUTE_ARTICLE_POINT.equals(amenity.getSubType())) {
+			String lang = amenity.getTagSuffix(Amenity.LANG_YES + ":");
+			String name = amenity.getTagContent(Amenity.ROUTE_NAME);
+			TravelArticle article = travelHelper.getArticleByTitle(name, lang, true, null);
+			if (article != null) {
+				travelHelper.openTrackMenu(article, mapActivity, name, amenity.getLocation(), false);
+			}
+		} else if (ROUTE_TRACK_POINT.equals(amenity.getSubType())) {
+			TravelGpx travelGpx = travelHelper.searchGpx(amenity.getLocation(), amenity.getRouteId(), amenity.getRef());
+			if (travelGpx != null) {
+				travelHelper.openTrackMenu(travelGpx, mapActivity, travelGpx.getTitle(), amenity.getLocation(), false);
+			} else {
+				LOG.error("openTrack() searchGpx() travelGpx is null");
+			}
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/poi/PoiUIFilter.java b/OsmAnd/src/net/osmand/plus/poi/PoiUIFilter.java
index 133a0fac7c0..ebccc7fbcef 100644
--- a/OsmAnd/src/net/osmand/plus/poi/PoiUIFilter.java
+++ b/OsmAnd/src/net/osmand/plus/poi/PoiUIFilter.java
@@ -6,7 +6,6 @@
 import static net.osmand.osm.MapPoiTypes.ROUTES;
 import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE;
 import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE_POINT;
-import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK;
 import static net.osmand.osm.MapPoiTypes.WIKI_PLACE;
 
 import android.content.Context;
@@ -203,10 +202,6 @@ public boolean isRouteArticlePointFilter() {
 		return filterId.startsWith(STD_PREFIX + ROUTE_ARTICLE_POINT);
 	}
 
-	public boolean isRouteTrackFilter() {
-		return filterId.startsWith(STD_PREFIX + ROUTE_TRACK);
-	}
-
 	public boolean isShowPrivateNeeded() {
 		return filterByName != null && filterByName.contains("access:private");
 	}
diff --git a/OsmAnd/src/net/osmand/plus/render/TravelRendererHelper.java b/OsmAnd/src/net/osmand/plus/render/TravelRendererHelper.java
index ea49370d3ad..74cd7cc1776 100644
--- a/OsmAnd/src/net/osmand/plus/render/TravelRendererHelper.java
+++ b/OsmAnd/src/net/osmand/plus/render/TravelRendererHelper.java
@@ -3,6 +3,7 @@
 import static net.osmand.IProgress.EMPTY_PROGRESS;
 import static net.osmand.IndexConstants.BINARY_TRAVEL_GUIDE_MAP_INDEX_EXT;
 import static net.osmand.IndexConstants.WIKIVOYAGE_INDEX_DIR;
+import static net.osmand.osm.MapPoiTypes.ROUTES_PREFIX;
 import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE;
 import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE_POINT;
 import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK;
@@ -20,6 +21,8 @@
 import net.osmand.StateChangedListener;
 import net.osmand.core.android.MapRendererContext;
 import net.osmand.osm.MapPoiTypes;
+import net.osmand.osm.PoiCategory;
+import net.osmand.osm.PoiType;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.poi.PoiUIFilter;
 import net.osmand.plus.render.RendererRegistry.IRendererLoadedEventListener;
@@ -42,6 +45,7 @@
 import java.util.List;
 import java.util.Map;
 import java.util.Set;
+import java.util.TreeSet;
 
 public class TravelRendererHelper implements IRendererLoadedEventListener {
 
@@ -68,7 +72,7 @@ public class TravelRendererHelper implements IRendererLoadedEventListener {
 
 	private PoiUIFilter routeArticleFilter;
 	private PoiUIFilter routeArticlePointsFilter;
-	private PoiUIFilter routeTrackFilter;
+	private Set<PoiUIFilter> routeTrackFilters;
 
 	public interface OnFileVisibilityChangeListener {
 		void fileVisibilityChanged();
@@ -235,11 +239,11 @@ public PoiUIFilter getRouteArticlePointsFilter() {
 	}
 
 	@Nullable
-	public PoiUIFilter getRouteTrackFilter() {
-		if (routeTrackFilter == null && app.getPoiTypes().isInit()) {
-			updateRouteTrackFilter();
+	public Set<PoiUIFilter> getRouteTrackFilters() {
+		if (routeTrackFilters == null) {
+			updateRouteTrackFilters();
 		}
-		return routeTrackFilter;
+		return routeTrackFilters;
 	}
 
 	public void updateRouteArticleFilter() {
@@ -249,26 +253,38 @@ public void updateRouteArticleFilter() {
 	}
 
 	public void updateRouteArticlePointsFilter() {
-		if (!app.getPoiTypes().isInit()) {
-			return;
-		}
-		PoiUIFilter routeArticlePointsFilter = app.getPoiFilters().getFilterById(PoiUIFilter.STD_PREFIX + ROUTE_ARTICLE_POINT);
-		if (routeArticlePointsFilter != null) {
-			Set<String> selectedCategories = new HashSet<>();
-			List<String> categories = app.getResourceManager().searchPoiSubTypesByPrefix(MapPoiTypes.CATEGORY);
-			for (String category : categories) {
-				CommonPreference<Boolean> prop = getRoutePointCategoryProperty(category);
-				if (prop.get()) {
-					selectedCategories.add(category.replace('_', ':').toLowerCase());
+		if (app.getPoiTypes().isInit()) {
+			PoiUIFilter routeArticlePointsFilter = app.getPoiFilters().getFilterById(PoiUIFilter.STD_PREFIX + ROUTE_ARTICLE_POINT);
+			if (routeArticlePointsFilter != null) {
+				Set<String> selectedCategories = new HashSet<>();
+				List<String> categories = app.getResourceManager().searchPoiSubTypesByPrefix(MapPoiTypes.CATEGORY);
+				for (String category : categories) {
+					CommonPreference<Boolean> prop = getRoutePointCategoryProperty(category);
+					if (prop.get()) {
+						selectedCategories.add(category.replace('_', ':').toLowerCase());
+					}
 				}
+				routeArticlePointsFilter.setFilterByName(TextUtils.join(" ", selectedCategories));
 			}
-			routeArticlePointsFilter.setFilterByName(TextUtils.join(" ", selectedCategories));
+			this.routeArticlePointsFilter = routeArticlePointsFilter;
 		}
-		this.routeArticlePointsFilter = routeArticlePointsFilter;
 	}
 
-	public void updateRouteTrackFilter() {
-		routeTrackFilter = app.getPoiFilters().getFilterById(PoiUIFilter.STD_PREFIX + ROUTE_TRACK);
+	public void updateRouteTrackFilters() {
+		if (app.getPoiTypes().isInit()) {
+			routeTrackFilters = new TreeSet<>();
+			PoiCategory routes = app.getPoiTypes().getRoutes();
+			for (PoiType subType : routes.getPoiTypes()) {
+				String subTypeKeyName = subType.getKeyName();
+				if (subTypeKeyName.startsWith(ROUTES_PREFIX)) {
+					routeTrackFilters.add(app.getPoiFilters().getFilterById(PoiUIFilter.STD_PREFIX + subTypeKeyName));
+				}
+			}
+			PoiUIFilter filter = app.getPoiFilters().getFilterById(PoiUIFilter.STD_PREFIX + ROUTE_TRACK);
+			if (filter != null) {
+				routeTrackFilters.add(filter);
+			}
+		}
 	}
 
 	public boolean updateRouteTypeVisibility(RenderingRulesStorage storage, String name, boolean selected) {
diff --git a/OsmAnd/src/net/osmand/plus/search/dialogs/QuickSearchListFragment.java b/OsmAnd/src/net/osmand/plus/search/dialogs/QuickSearchListFragment.java
index 07e5509261d..b0314566fcf 100644
--- a/OsmAnd/src/net/osmand/plus/search/dialogs/QuickSearchListFragment.java
+++ b/OsmAnd/src/net/osmand/plus/search/dialogs/QuickSearchListFragment.java
@@ -16,7 +16,12 @@
 import androidx.fragment.app.FragmentActivity;
 
 import net.osmand.IndexConstants;
+import net.osmand.PlatformUtil;
+import net.osmand.data.Amenity;
 import net.osmand.data.PointDescription;
+import net.osmand.plus.wikivoyage.data.TravelGpx;
+import net.osmand.plus.wikivoyage.data.TravelHelper;
+import net.osmand.plus.wikivoyage.data.TravelObfHelper;
 import net.osmand.shared.gpx.GpxFile;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
@@ -43,11 +48,14 @@
 import net.osmand.search.core.SearchResult;
 import net.osmand.util.Algorithms;
 
+import org.apache.commons.logging.Log;
+
 import java.io.File;
 import java.util.ArrayList;
 import java.util.List;
 
 public abstract class QuickSearchListFragment extends OsmAndListFragment {
+	private static final Log LOG = PlatformUtil.getLog(QuickSearchListFragment.class);
 
 	protected OsmandApplication app;
 	private QuickSearchDialogFragment dialogFragment;
@@ -175,27 +183,46 @@ public boolean isShowResult() {
 	public void showResult(SearchResult searchResult) {
 		showResult = false;
 		if (searchResult.objectType == ObjectType.GPX_TRACK) {
-			GPXInfo gpxInfo = (GPXInfo) searchResult.relatedObject;
-			if (dialogFragment.getSearchType().isTargetPoint()) {
-				File file = gpxInfo.getFile();
-				if (file != null) {
-					selectTrack(file);
-				}
-			} else {
-				showTrackMenuFragment(gpxInfo);
-			}
+			showGpxTrackResult(searchResult);
 		} else if (searchResult.location != null) {
-			Pair<PointDescription, Object> pair = QuickSearchListItem.getPointDescriptionObject(app, searchResult);
+			showResultWithLocation(searchResult);
+		}
+	}
 
-			dialogFragment.hideToolbar();
-			dialogFragment.hide();
+	private void showResultWithLocation(SearchResult searchResult) {
+		Pair<PointDescription, Object> pair = QuickSearchListItem.getPointDescriptionObject(app, searchResult);
 
+		dialogFragment.hideToolbar();
+		dialogFragment.hide();
+
+		if (pair.second instanceof Amenity && ((Amenity) pair.second).isRouteTrack()) {
+			Amenity amenity = (Amenity) pair.second;
+			TravelHelper travelHelper = app.getTravelHelper();
+			TravelGpx travelGpx = travelHelper.searchGpx(amenity.getLocation(), amenity.getRouteId(), amenity.getRef());
+			if (travelGpx != null) {
+				travelHelper.openTrackMenu(travelGpx, getMapActivity(), amenity.getGpxFileName(null), amenity.getLocation(), true);
+			} else {
+				LOG.error("showResultWithLocation() searchGpx() travelGpx is null");
+			}
+		} else {
 			showOnMap(getMapActivity(), dialogFragment,
 					searchResult.location.getLatitude(), searchResult.location.getLongitude(),
 					searchResult.preferredZoom, pair.first, pair.second);
 		}
 	}
 
+	private void showGpxTrackResult(SearchResult searchResult) {
+		GPXInfo gpxInfo = (GPXInfo) searchResult.relatedObject;
+		if (dialogFragment.getSearchType().isTargetPoint()) {
+			File file = gpxInfo.getFile();
+			if (file != null) {
+				selectTrack(file);
+			}
+		} else {
+			showTrackMenuFragment(gpxInfo);
+		}
+	}
+
 	private void selectTrack(@NonNull File file) {
 		SelectedGpxFile selectedGpxFile = app.getSelectedGpxHelper().getSelectedFileByPath(file.getAbsolutePath());
 		if (selectedGpxFile != null) {
diff --git a/OsmAnd/src/net/osmand/plus/track/helpers/GpxUiHelper.java b/OsmAnd/src/net/osmand/plus/track/helpers/GpxUiHelper.java
index 12877fab62b..30b7ac44cbf 100644
--- a/OsmAnd/src/net/osmand/plus/track/helpers/GpxUiHelper.java
+++ b/OsmAnd/src/net/osmand/plus/track/helpers/GpxUiHelper.java
@@ -629,7 +629,8 @@ public static void saveAndOpenGpx(@NonNull MapActivity mapActivity,
 	                                  @NonNull GpxFile gpxFile,
 	                                  @NonNull WptPt selectedPoint,
 	                                  @Nullable GpxTrackAnalysis analyses,
-	                                  @Nullable RouteKey routeKey) {
+	                                  @Nullable RouteKey routeKey,
+	                                  boolean adjustMapPosition) {
 		SaveGpxHelper.saveGpx(file, gpxFile, errorMessage -> {
 			if (errorMessage == null) {
 				OsmandApplication app = mapActivity.getMyApplication();
@@ -638,7 +639,7 @@ public static void saveAndOpenGpx(@NonNull MapActivity mapActivity,
 				GpxTrackAnalysis trackAnalysis = analyses != null ? analyses : selectedGpxFile.getTrackAnalysis(app);
 				SelectedGpxPoint selectedGpxPoint = new SelectedGpxPoint(selectedGpxFile, selectedPoint);
 				Bundle bundle = new Bundle();
-				bundle.putBoolean(TrackMenuFragment.ADJUST_MAP_POSITION, false);
+				bundle.putBoolean(TrackMenuFragment.ADJUST_MAP_POSITION, adjustMapPosition);
 				TrackMenuFragment.showInstance(mapActivity, selectedGpxFile, selectedGpxPoint,
 						trackAnalysis, routeKey, bundle);
 			} else {
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapSelectionHelper.java b/OsmAnd/src/net/osmand/plus/views/layers/MapSelectionHelper.java
index 0e0f17e2e1a..a8c94dcc5e6 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapSelectionHelper.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapSelectionHelper.java
@@ -2,10 +2,13 @@
 
 import static net.osmand.IndexConstants.GPX_FILE_EXT;
 import static net.osmand.binary.BinaryMapIndexReader.ACCEPT_ALL_POI_TYPE_FILTER;
+import static net.osmand.data.Amenity.ROUTE;
+import static net.osmand.data.Amenity.ROUTE_ID;
 import static net.osmand.data.FavouritePoint.DEFAULT_BACKGROUND_TYPE;
 import static net.osmand.data.MapObject.AMENITY_ID_RIGHT_SHIFT;
 import static net.osmand.osm.OsmRouteType.HIKING;
 import static net.osmand.plus.transport.TransportLinesMenu.RENDERING_CATEGORY_TRANSPORT;
+import static net.osmand.plus.wikivoyage.data.TravelGpx.TRAVEL_MAP_TO_POI_TAG;
 import static net.osmand.render.RenderingRuleStorageProperties.UI_CATEGORY_HIDDEN;
 import static net.osmand.router.network.NetworkRouteSelector.NetworkRouteSelectorFilter;
 import static net.osmand.router.network.NetworkRouteSelector.RouteKey;
@@ -216,7 +219,7 @@ private void selectObjectsFromNative(@NonNull MapSelectionResult result, @NonNul
 		if (renderedObjects != null) {
 			double cosRotateTileSize = Math.cos(Math.toRadians(rc.rotate)) * TILE_SIZE;
 			double sinRotateTileSize = Math.sin(Math.toRadians(rc.rotate)) * TILE_SIZE;
-			boolean selectedRoutes = false;
+			boolean isRouteGpxSelected = false;
 			for (RenderedObject renderedObject : renderedObjects) {
 				String routeID = renderedObject.getRouteID();
 				String fileName = renderedObject.getGpxFileName();
@@ -253,14 +256,14 @@ private void selectObjectsFromNative(@NonNull MapSelectionResult result, @NonNul
 					result.objectLatLon = renderedObject.getLabelLatLon();
 				}
 				LatLon searchLatLon = result.objectLatLon != null ? result.objectLatLon : result.pointLatLon;
-				if (isTravelGpx) {
-					addTravelGpx(result, renderedObject, filter);
+				if (isTravelGpx && !isRouteGpxSelected) {
+					isRouteGpxSelected = addTravelGpx(result, filter, renderedObject.getTagValue("ref"));
 				} else {
-					if (isRoute && !selectedRoutes) {
-						selectedRoutes = true;
+					if (isRoute && !isRouteGpxSelected) {
 						NetworkRouteSelectorFilter routeFilter = createRouteFilter();
 						if (!Algorithms.isEmpty(routeFilter.typeFilter)) {
-							addRoute(result, tileBox, point, routeFilter);
+							addOsmRoute(result, tileBox, point, routeFilter);
+							isRouteGpxSelected = true;
 						}
 					}
 					boolean amenityAdded = addAmenity(result, renderedObject, searchLatLon);
@@ -279,7 +282,7 @@ private void selectObjectsFromOpenGl(@NonNull MapSelectionResult result, @NonNul
 			int delta = 20;
 			PointI tl = new PointI((int) point.x - delta, (int) point.y - delta);
 			PointI br = new PointI((int) point.x + delta, (int) point.y + delta);
-			boolean selectedRoutes = false;
+			boolean isRouteGpxSelected = false;
 			MapSymbolInformationList symbols = rendererView.getSymbolsIn(new AreaI(tl, br), false);
 			for (int i = 0; i < symbols.size(); i++) {
 				MapSymbolInformation symbolInfo = symbols.get(i);
@@ -336,14 +339,18 @@ private void selectObjectsFromOpenGl(@NonNull MapSelectionResult result, @NonNul
 						}
 						if (obfMapObject != null) {
 							Map<String, String> tags = getTags(obfMapObject.getResolvedAttributes());
-							boolean isRoute = !Algorithms.isEmpty(OsmRouteType.getRouteKeys(tags));
-							if (isRoute && !selectedRoutes) {
-								selectedRoutes = true;
+							boolean isOsmRoute = !Algorithms.isEmpty(OsmRouteType.getRouteKeys(tags));
+							if (isOsmRoute && !isRouteGpxSelected) {
 								NetworkRouteSelectorFilter routeFilter = createRouteFilter();
 								if (!Algorithms.isEmpty(routeFilter.typeFilter)) {
-									addRoute(result, tileBox, point, routeFilter);
+									addOsmRoute(result, tileBox, point, routeFilter);
+									isRouteGpxSelected = true;
 								}
 							}
+							boolean isTravelGpx = app.getTravelHelper().isTravelGpxTags(tags);
+							if (isTravelGpx && !isRouteGpxSelected) {
+								isRouteGpxSelected = addTravelGpx(result, tags.get(ROUTE_ID), null);
+							}
 							IOnPathMapSymbol onPathMapSymbol = getOnPathMapSymbol(symbolInfo);
 							if (onPathMapSymbol == null) {
 								LatLon latLon = result.objectLatLon;
@@ -352,10 +359,10 @@ private void selectObjectsFromOpenGl(@NonNull MapSelectionResult result, @NonNul
 									latLon = l == null ? latLon : l;
 									tags.remove(TAG_POI_LAT_LON);
 								}
-								amenity = getAmenity(latLon, obfMapObject);
+								amenity = getAmenity(latLon, obfMapObject, tags);
 								if (amenity != null) {
 									amenity.setMapIconName(getMapIconName(symbolInfo));
-								} else if (!isRoute) {
+								} else if (!isOsmRoute && !isTravelGpx) {
 									addRenderedObject(result, symbolInfo, obfMapObject, tags);
 								}
 							}
@@ -433,13 +440,16 @@ private RasterMapSymbol getRasterMapSymbol(@NonNull MapSymbolInformation symbolI
 		return null;
 	}
 
-	private Amenity getAmenity(LatLon latLon, ObfMapObject obfMapObject) {
+	private Amenity getAmenity(LatLon latLon, ObfMapObject obfMapObject, Map<String, String> tags) {
 		Amenity amenity;
 		List<String> names = getValues(obfMapObject.getCaptionsInAllLanguages());
 		String caption = obfMapObject.getCaptionInNativeLanguage();
 		if (!caption.isEmpty()) {
 			names.add(caption);
 		}
+		if (!Algorithms.isEmpty(tags) && tags.containsKey(TRAVEL_MAP_TO_POI_TAG) && "point".equals(tags.get(ROUTE))) {
+			names.add(tags.get(TRAVEL_MAP_TO_POI_TAG)); // additional attribute for TravelGpx points (route_id)
+		}
 		long id = obfMapObject.getId().getId().longValue();
 		amenity = findAmenity(app, latLon, names, id);
 		if (amenity != null && obfMapObject.getPoints31().size() > 1) {
@@ -452,24 +462,24 @@ private Amenity getAmenity(LatLon latLon, ObfMapObject obfMapObject) {
 		return amenity;
 	}
 
-	private void addTravelGpx(@NonNull MapSelectionResult result, @NonNull RenderedObject object, @Nullable String filter) {
-		TravelGpx travelGpx = app.getTravelHelper().searchGpx(result.pointLatLon, filter, object.getTagValue("ref"));
+	private boolean addTravelGpx(@NonNull MapSelectionResult result, @Nullable String routeId, @Nullable String ref) {
+		TravelGpx travelGpx = app.getTravelHelper().searchGpx(result.pointLatLon, routeId, ref);
 		if (travelGpx != null && isUniqueGpx(result.selectedObjects, travelGpx)) {
 			WptPt selectedPoint = new WptPt();
 			selectedPoint.setLat(result.pointLatLon.getLatitude());
 			selectedPoint.setLon(result.pointLatLon.getLongitude());
 			SelectedGpxPoint selectedGpxPoint = new SelectedGpxPoint(null, selectedPoint);
 			result.selectedObjects.put(new Pair<>(travelGpx, selectedGpxPoint), mapLayers.getTravelSelectionLayer());
+			return true;
+		} else if (travelGpx == null) {
+			log.error("addTravelGpx() searchGpx() travelGpx is null");
 		}
+		return false;
 	}
 
 	private boolean isUniqueGpx(@NonNull Map<Object, IContextMenuProvider> selectedObjects,
 	                            @NonNull TravelGpx travelGpx) {
-		String tracksDir = app.getAppPath(IndexConstants.GPX_TRAVEL_DIR).getPath();
-		File file = new File(tracksDir, travelGpx.getRouteId() + GPX_FILE_EXT);
-		if (file.exists()) {
-			return false;
-		}
+		String travelGpxFileName = travelGpx.getGpxFileName() + GPX_FILE_EXT;
 		for (Map.Entry<Object, IContextMenuProvider> entry : selectedObjects.entrySet()) {
 			if (entry.getKey() instanceof Pair && entry.getValue() instanceof GPXLayer
 					&& ((Pair<?, ?>) entry.getKey()).first instanceof TravelGpx) {
@@ -478,12 +488,18 @@ private boolean isUniqueGpx(@NonNull Map<Object, IContextMenuProvider> selectedO
 					return false;
 				}
 			}
+			if (entry.getKey() instanceof SelectedGpxPoint && entry.getValue() instanceof GPXLayer) {
+				SelectedGpxPoint selectedGpxPoint = (SelectedGpxPoint) entry.getKey();
+				if (selectedGpxPoint.getSelectedGpxFile().getGpxFile().getPath().endsWith(travelGpxFileName)) {
+					return false;
+				}
+			}
 		}
 		return true;
 	}
 
-	private void addRoute(@NonNull MapSelectionResult result, @NonNull RotatedTileBox tileBox, @NonNull PointF point,
-	                      @NonNull NetworkRouteSelectorFilter selectorFilter) {
+	private void addOsmRoute(@NonNull MapSelectionResult result, @NonNull RotatedTileBox tileBox, @NonNull PointF point,
+	                         @NonNull NetworkRouteSelectorFilter selectorFilter) {
 		int searchRadius = (int) (OsmandMapLayer.getScaledTouchRadius(app, tileBox.getDefaultRadiusPoi()) * 1.5f);
 		LatLon minLatLon = NativeUtilities.getLatLonFromElevatedPixel(view.getMapRenderer(), tileBox,
 				point.x - searchRadius, point.y - searchRadius);
@@ -703,13 +719,22 @@ public static Amenity findAmenityByOsmId(@NonNull List<Amenity> amenities, long
 	@Nullable
 	public static Amenity findAmenityByName(@NonNull List<Amenity> amenities, @Nullable List<String> names) {
 		if (!Algorithms.isEmpty(names)) {
-			for (Amenity amenity : amenities) {
-				for (String name : names) {
-					if (name.equals(amenity.getName()) && !amenity.isClosed()) {
-						return amenity;
-					}
-				}
-			}
+			return amenities.stream()
+				.filter(amenity -> !amenity.isClosed())
+				.filter(amenity -> names.contains(amenity.getName()))
+				.findAny()
+				.orElseGet(() ->
+					amenities.stream()
+						.filter(amenity -> !amenity.isClosed())
+						.filter(amenity -> amenity.isRoutePoint())
+						.filter(amenity -> amenity.getName().isEmpty())
+						.filter(amenity -> {
+							String travelRouteId = amenity.getAdditionalInfo(TRAVEL_MAP_TO_POI_TAG);
+							return travelRouteId != null && names.contains(travelRouteId);
+						})
+						.findAny()
+						.orElse(null)
+				);
 		}
 		return null;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/NetworkRouteSelectionLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/NetworkRouteSelectionLayer.java
index be9503aa55d..5d7959ef482 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/NetworkRouteSelectionLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/NetworkRouteSelectionLayer.java
@@ -154,7 +154,7 @@ private void saveAndOpenGpx(@NonNull GpxFile gpxFile, @NonNull Pair<RouteKey, Qu
 			String name = getObjectName(pair).getName();
 			String fileName = Algorithms.convertToPermittedFileName(name.endsWith(GPX_FILE_EXT) ? name : name + GPX_FILE_EXT);
 			File file = new File(FileUtils.getTempDir(app), fileName);
-			GpxUiHelper.saveAndOpenGpx(activity, file, gpxFile, wptPt, null, pair.first);
+			GpxUiHelper.saveAndOpenGpx(activity, file, gpxFile, wptPt, null, pair.first, false);
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
index 9d0bb04b441..b65a10c2690 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
@@ -1,8 +1,8 @@
 package net.osmand.plus.views.layers;
 
+import static net.osmand.osm.MapPoiTypes.ROUTES;
 import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE;
 import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE_POINT;
-import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK;
 import static net.osmand.plus.utils.AndroidUtils.dpToPx;
 
 import android.app.Dialog;
@@ -69,6 +69,7 @@
 
 import java.util.ArrayList;
 import java.util.Collections;
+import java.util.HashSet;
 import java.util.List;
 import java.util.Set;
 import java.util.TreeSet;
@@ -99,7 +100,7 @@ public class POIMapLayer extends OsmandMapLayer implements IContextMenuProvider,
 	private boolean routeTrackAsPoiFilterEnabled;
 	private PoiUIFilter routeArticleFilter;
 	private PoiUIFilter routeArticlePointsFilter;
-	private PoiUIFilter routeTrackFilter;
+	private Set<PoiUIFilter> routeTrackFilters;
 	private String routeArticlePointsFilterByName;
 	private boolean fileVisibilityChanged;
 	public CustomMapObjects<Amenity> customObjectsDelegate;
@@ -119,7 +120,7 @@ public POIMapLayer(@NonNull Context context) {
 		routeArticlePointsFilterEnabled = travelRendererHelper.getRouteArticlePointsProperty().get();
 		routeArticleFilter = travelRendererHelper.getRouteArticleFilter();
 		routeArticlePointsFilter = travelRendererHelper.getRouteArticlePointsFilter();
-		routeTrackFilter = travelRendererHelper.getRouteTrackFilter();
+		routeTrackFilters = travelRendererHelper.getRouteTrackFilters();
 		routeArticlePointsFilterByName = routeArticlePointsFilter != null ? routeArticlePointsFilter.getFilterByName() : null;
 
 		routingHelper.addListener(this);
@@ -158,6 +159,7 @@ protected List<Amenity> calculateResult(@NonNull QuadRect latLonBounds, int zoom
 				int z = (int) Math.floor(zoom + Math.log(getMapDensity()) / Math.log(2));
 
 				List<Amenity> res = new ArrayList<>();
+				Set<String> uniqueRouteIds = new HashSet<>();
 				PoiFilterUtils.combineStandardPoiFilters(calculatedFilters, app);
 				for (PoiUIFilter filter : calculatedFilters) {
 					List<Amenity> amenities = filter.searchAmenities(latLonBounds.top, latLonBounds.left,
@@ -173,24 +175,14 @@ public boolean isCancelled() {
 									return isInterrupted();
 								}
 							});
-					if (filter.isRouteTrackFilter()) {
-						for (Amenity amenity : amenities) {
-							boolean hasRoute = false;
+					for (Amenity amenity : amenities) {
+						if (amenity.isRouteTrack()) {
 							String routeId = amenity.getRouteId();
-							if (!Algorithms.isEmpty(routeId)) {
-								for (Amenity a : res) {
-									if (routeId.equals(a.getRouteId())) {
-										hasRoute = true;
-										break;
-									}
-								}
-							}
-							if (!hasRoute) {
-								res.add(amenity);
+							if (routeId != null && !uniqueRouteIds.add(routeId)) {
+								continue; // duplicate
 							}
 						}
-					} else {
-						res.addAll(amenities);
+						res.add(amenity);
 					}
 				}
 
@@ -224,9 +216,8 @@ private Set<PoiUIFilter> collectFilters() {
 				calculatedFilters.add(routeArticlePointsFilter);
 			}
 			boolean routeTrackAsPoiFilterEnabled = this.routeTrackAsPoiFilterEnabled;
-			PoiUIFilter routeTrackFilter = this.routeTrackFilter;
-			if (routeTrackAsPoiFilterEnabled && routeTrackFilter != null) {
-				calculatedFilters.add(routeTrackFilter);
+			if (routeTrackAsPoiFilterEnabled && this.routeTrackFilters != null) {
+				calculatedFilters.addAll(this.routeTrackFilters);
 			}
 		}
 		return calculatedFilters;
@@ -307,7 +298,7 @@ private boolean shouldDraw(int zoom) {
 					&& zoom >= START_ZOOM) {
 				return true;
 			}
-			if (travelRendererHelper.getRouteTracksAsPoiProperty().get() && routeTrackFilter != null) {
+			if (travelRendererHelper.getRouteTracksAsPoiProperty().get() && routeTrackFilters != null) {
 				return travelRendererHelper.getRouteTracksProperty().get()
 						? zoom >= START_ZOOM : zoom >= START_ZOOM_ROUTE_TRACK;
 			}
@@ -321,7 +312,7 @@ private boolean shouldDraw(@NonNull RotatedTileBox tileBox, @NonNull Amenity ame
 		} else {
 			boolean routeArticle = ROUTE_ARTICLE_POINT.equals(amenity.getSubType())
 					|| ROUTE_ARTICLE.equals(amenity.getSubType());
-			boolean routeTrack = ROUTE_TRACK.equals(amenity.getSubType());
+			boolean routeTrack = amenity.isRouteTrack();
 			if (routeArticle) {
 				return tileBox.getZoom() >= START_ZOOM;
 			}  else if (routeTrack) {
@@ -352,7 +343,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 		boolean routeTrackAsPoiFilterEnabled = travelRendererHelper.getRouteTracksAsPoiProperty().get();
 		PoiUIFilter routeArticleFilter = travelRendererHelper.getRouteArticleFilter();
 		PoiUIFilter routeArticlePointsFilter = travelRendererHelper.getRouteArticlePointsFilter();
-		PoiUIFilter routeTrackFilter = travelRendererHelper.getRouteTrackFilter();
+		Set<PoiUIFilter> routeTrackFilters = travelRendererHelper.getRouteTrackFilters();
 		String routeArticlePointsFilterByName = routeArticlePointsFilter != null ? routeArticlePointsFilter.getFilterByName() : null;
 		boolean dataChanged = false;
 		if (this.filters != selectedPoiFilters
@@ -363,7 +354,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 				|| this.routeTrackAsPoiFilterEnabled != routeTrackAsPoiFilterEnabled
 				|| this.routeArticleFilter != routeArticleFilter
 				|| this.routeArticlePointsFilter != routeArticlePointsFilter
-				|| this.routeTrackFilter != routeTrackFilter
+				|| this.routeTrackFilters != routeTrackFilters
 				|| this.fileVisibilityChanged
 				|| !Algorithms.stringsEqual(this.routeArticlePointsFilterByName, routeArticlePointsFilterByName)) {
 			this.filters = selectedPoiFilters;
@@ -374,7 +365,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 			this.routeTrackAsPoiFilterEnabled = routeTrackAsPoiFilterEnabled;
 			this.routeArticleFilter = routeArticleFilter;
 			this.routeArticlePointsFilter = routeArticlePointsFilter;
-			this.routeTrackFilter = routeTrackFilter;
+			this.routeTrackFilters = routeTrackFilters;
 			this.routeArticlePointsFilterByName = routeArticlePointsFilterByName;
 			this.fileVisibilityChanged = false;
 			data.clearCache();
@@ -602,26 +593,30 @@ public LatLon getObjectLocation(Object o) {
 	public boolean showMenuAction(@Nullable Object object) {
 		OsmandApplication app = view.getApplication();
 		MapActivity mapActivity = view.getMapActivity();
-		TravelHelper travelHelper = app.getTravelHelper();
 		if (mapActivity != null && object instanceof Amenity) {
+			TravelHelper travelHelper = app.getTravelHelper();
 			Amenity amenity = (Amenity) object;
-			if (amenity.getSubType().equals(ROUTE_TRACK)) {
-				TravelGpx travelGpx = travelHelper.searchGpx(amenity.getLocation(), amenity.getRouteId(), amenity.getRef());
-				if (travelGpx == null) {
+			String subType = amenity.getSubType();
+			if (amenity.getType().getKeyName().equals(ROUTES)) {
+				if (subType.equals(ROUTE_ARTICLE)) {
+					String lang = app.getLanguage();
+					lang = amenity.getContentLanguage(Amenity.DESCRIPTION, lang, "en");
+					String name = amenity.getGpxFileName(lang);
+					TravelArticle article = travelHelper.getArticleByTitle(name, lang, true, null);
+					if (article == null) {
+						return true;
+					}
+					travelHelper.openTrackMenu(article, mapActivity, name, amenity.getLocation(), false);
 					return true;
-				}
-				travelHelper.openTrackMenu(travelGpx, mapActivity, amenity.getRouteId(), amenity.getLocation());
-				return true;
-			} else if (amenity.getSubType().equals(ROUTE_ARTICLE)) {
-				String lang = app.getLanguage();
-				lang = amenity.getContentLanguage(Amenity.DESCRIPTION, lang, "en");
-				String name = amenity.getName(lang);
-				TravelArticle article = travelHelper.getArticleByTitle(name, lang, true, null);
-				if (article == null) {
+				} else if (amenity.isRouteTrack()) {
+					TravelGpx travelGpx = travelHelper.searchGpx(amenity.getLocation(), amenity.getRouteId(), amenity.getRef());
+					if (travelGpx != null) {
+						travelHelper.openTrackMenu(travelGpx, mapActivity, amenity.getGpxFileName(null), amenity.getLocation(), false);
+					} else {
+						log.error("showMenuAction() searchGpx() travelGpx is null");
+					}
 					return true;
 				}
-				travelHelper.openTrackMenu(article, mapActivity, name, amenity.getLocation());
-				return true;
 			}
 		}
 		return false;
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/TravelSelectionLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/TravelSelectionLayer.java
index c0b92cbd4ea..899aef2bc5a 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/TravelSelectionLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/TravelSelectionLayer.java
@@ -56,8 +56,13 @@ public PointDescription getObjectName(Object o) {
 			Pair<?, ?> pair = (Pair<?, ?>) o;
 			if (pair.first instanceof TravelGpx && pair.second instanceof SelectedGpxPoint) {
 				TravelGpx travelGpx = (TravelGpx) ((Pair<?, ?>) o).first;
-				String name = Algorithms.isEmpty(travelGpx.getDescription()) ? travelGpx.getTitle() : travelGpx.getDescription();
-				return new PointDescription(PointDescription.POINT_TYPE_GPX, name);
+				if (!Algorithms.isEmpty(travelGpx.getTitle())) {
+					return new PointDescription(PointDescription.POINT_TYPE_GPX, travelGpx.getTitle());
+				} else if (!Algorithms.isEmpty(travelGpx.getDescription())) {
+					return new PointDescription(PointDescription.POINT_TYPE_GPX, travelGpx.getDescription());
+				} else {
+					return new PointDescription(PointDescription.POINT_TYPE_GPX, travelGpx.getRouteId()); // nullable
+				}
 			}
 		}
 		return null;
@@ -75,7 +80,8 @@ public boolean showMenuAction(@Nullable Object object) {
 
 					WptPt wptPt = selectedGpxPoint.getSelectedPoint();
 					TravelHelper travelHelper = app.getTravelHelper();
-					travelHelper.openTrackMenu(travelGpx, mapActivity, travelGpx.getRouteId(), new LatLon(wptPt.getLat(), wptPt.getLon()));
+					travelHelper.openTrackMenu(travelGpx, mapActivity, travelGpx.getGpxFileName(),
+							new LatLon(wptPt.getLat(), wptPt.getLon()), false);
 					return true;
 				}
 			}
diff --git a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelArticle.java b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelArticle.java
index 0272ad2f932..218a591c8a3 100644
--- a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelArticle.java
+++ b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelArticle.java
@@ -127,6 +127,27 @@ public String getRouteId() {
 		return routeId;
 	}
 
+	public boolean hasOsmRouteId() {
+		String routeId = getRouteId();
+		return routeId != null && routeId.startsWith(Amenity.ROUTE_ID_OSM_PREFIX);
+	}
+
+	@NonNull
+	public String getGpxFileName() {
+		String gpxFileName = !Algorithms.isEmpty(title) ? title : routeId;
+		if (gpxFileName != null) {
+			return gpxFileName
+				.replace('/', '_')
+				.replace('\'', '_')
+				.replace('\"', '_')
+				.replace('\r', '_')
+				.replace('\n', '_');
+		} else {
+			LOG.error("Empty travel article in " + this.file);
+			return "Travel Article File"; // @NonNull
+		}
+	}
+
 	public String getRouteSource() {
 		return routeSource;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelDbHelper.java b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelDbHelper.java
index 6d4d4d40df7..efd1655a980 100644
--- a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelDbHelper.java
+++ b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelDbHelper.java
@@ -1,5 +1,7 @@
 package net.osmand.plus.wikivoyage.data;
 
+import static net.osmand.IndexConstants.GPX_FILE_EXT;
+
 import android.text.TextUtils;
 
 import androidx.annotation.NonNull;
@@ -203,7 +205,6 @@ public void saveOrRemoveArticle(@NonNull TravelArticle article, boolean save) {
 		}
 	}
 
-
 	public List<File> getExistingTravelBooks() {
 		return existingTravelBooks;
 	}
@@ -713,6 +714,11 @@ public String formatTravelBookName(File tb) {
 		return nm.substring(0, nm.indexOf('.')).replace('_', ' ');
 	}
 
+	@Override
+	public boolean isTravelGpxTags(@NonNull Map<String, String> tags) {
+		return false; // stub
+	}
+
 	@Nullable
 	@Override
 	public TravelGpx searchGpx(@NonNull LatLon location, @Nullable String fileName, @Nullable String ref) {
@@ -721,15 +727,13 @@ public TravelGpx searchGpx(@NonNull LatLon location, @Nullable String fileName,
 
 	@Override
 	public void openTrackMenu(@NonNull TravelArticle article, @NonNull MapActivity mapActivity,
-							  @NonNull String gpxFileName, @NonNull LatLon location) {
-
+							  @NonNull String gpxFileName, @NonNull LatLon location, boolean adjustMapPosition) {
 	}
 
 	@NonNull
 	@Override
 	public String getGPXName(@NonNull TravelArticle article) {
-		return article.getTitle().replace('/', '_').replace('\'', '_')
-				.replace('\"', '_') + IndexConstants.GPX_FILE_EXT;
+		return article.getGpxFileName() + GPX_FILE_EXT;
 	}
 
 	@NonNull
diff --git a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelGpx.java b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelGpx.java
index a724a764404..98c80d09154 100644
--- a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelGpx.java
+++ b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelGpx.java
@@ -1,6 +1,7 @@
 package net.osmand.plus.wikivoyage.data;
 
 import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK;
+import static net.osmand.plus.wikivoyage.data.TravelObfHelper.WPT_EXTRA_TAGS;
 import static net.osmand.shared.gpx.GpxUtilities.POINT_ELEVATION;
 
 import net.osmand.shared.gpx.primitives.WptPt;
@@ -11,11 +12,15 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
+import com.google.gson.Gson;
+import com.google.gson.reflect.TypeToken;
+
 import net.osmand.data.Amenity;
 import net.osmand.util.Algorithms;
 
-import java.util.HashMap;
+import java.lang.reflect.Type;
 import java.util.Map;
+import java.util.Set;
 
 import net.osmand.shared.gpx.GpxTrackAnalysis;
 
@@ -27,9 +32,12 @@ public class TravelGpx extends TravelArticle {
 	public static final String MAX_ELEVATION = "max_ele";
 	public static final String MIN_ELEVATION = "min_ele";
 	public static final String AVERAGE_ELEVATION = "avg_ele";
-	public static final String ROUTE_RADIUS = "route_radius";
+	public static final String START_ELEVATION = "start_ele";
+	public static final String ELE_GRAPH = "ele_graph";
+	public static final String ROUTE_BBOX_RADIUS = "route_bbox_radius";
 	public static final String USER = "user";
 	public static final String ACTIVITY_TYPE = "route_activity_type";
+	public static final String TRAVEL_MAP_TO_POI_TAG = "route_id";
 
 	public String user;
 	public String activityType;
@@ -62,6 +70,8 @@ public GpxTrackAnalysis getAnalysis() {
 		return analysis;
 	}
 
+	private static final Set<String> doNotSaveWptTags = Set.of("route_id", "route_name");
+
 	@NonNull
 	@Override
 	public WptPt createWptPt(@NonNull Amenity amenity, @Nullable String lang) {
@@ -72,26 +82,28 @@ public WptPt createWptPt(@NonNull Amenity amenity, @Nullable String lang) {
 		for (String obfTag : amenity.getAdditionalInfoKeys()) {
 			String value = amenity.getAdditionalInfo(obfTag);
 			if (!Algorithms.isEmpty(value)) {
-				String gpxTag = allowedPointObfToGpxTags.get(obfTag);
-				if (gpxTag != null) {
-					wptPt.getExtensionsToWrite().put(gpxTag, value);
-				}
 				if (OBF_POINTS_GROUPS_CATEGORY.equals(obfTag)) {
 					wptPt.setCategory(value);
+				} else if ("name".equals(obfTag)) {
+					wptPt.setName(value);
+				} else if ("description".equals(obfTag)) {
+					wptPt.setDesc(value);
+				} else if ("note".equals(obfTag)) {
+					wptPt.setComment(value);
+				} else if ("colour".equals(obfTag) && amenity.getAdditionalInfoKeys().contains("color")) {
+					// ignore "colour" if "color" exists
+				} else if (WPT_EXTRA_TAGS.equals(obfTag)) {
+					Gson gson = new Gson();
+					Type type = new TypeToken<Map<String, String>>() {}.getType();
+					wptPt.getExtensionsToWrite().putAll(gson.fromJson(value, type));
+				} else if (!doNotSaveWptTags.contains(obfTag)) {
+					wptPt.getExtensionsToWrite().put(obfTag, value);
 				}
 			}
 		}
 		return wptPt;
 	}
 
-	private final static Map<String, String> allowedPointObfToGpxTags = new HashMap<>();
-
-	static {
-		allowedPointObfToGpxTags.put("color", "color");
-		allowedPointObfToGpxTags.put("gpx_icon", "icon");
-		allowedPointObfToGpxTags.put("gpx_bg", "background");
-	}
-
 	@NonNull
 	@Override
 	public String getPointFilterString() {
@@ -101,6 +113,6 @@ public String getPointFilterString() {
 	@NonNull
 	@Override
 	public String getMainFilterString() {
-		return ROUTE_TRACK;
+		return ROUTE_TRACK; // considered together with ROUTES_PREFIX
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelHelper.java b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelHelper.java
index 91ab8552c18..7c7c948ce4c 100644
--- a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelHelper.java
+++ b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelHelper.java
@@ -61,11 +61,13 @@ interface GpxReadCallback {
 	@NonNull
 	ArrayList<String> getArticleLangs(@NonNull TravelArticleIdentifier articleId);
 
+	boolean isTravelGpxTags(@NonNull Map<String, String> tags);
+
 	@Nullable
 	TravelGpx searchGpx(@NonNull LatLon location, @Nullable String fileName, @Nullable String ref);
 
 	void openTrackMenu(@NonNull TravelArticle article, @NonNull MapActivity mapActivity,
-					   @NonNull String gpxFileName, @NonNull LatLon location);
+					   @NonNull String gpxFileName, @NonNull LatLon location, boolean adjustMapPosition);
 
 	@NonNull
 	String getGPXName(@NonNull TravelArticle article);
@@ -80,5 +82,4 @@ void openTrackMenu(@NonNull TravelArticle article, @NonNull MapActivity mapActiv
 	String getWikivoyageFileName();
 
 	void saveOrRemoveArticle(@NonNull TravelArticle article, boolean save);
-
 }
diff --git a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelObfHelper.java b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelObfHelper.java
index ded6432c219..795349a1c2d 100644
--- a/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelObfHelper.java
+++ b/OsmAnd/src/net/osmand/plus/wikivoyage/data/TravelObfHelper.java
@@ -2,7 +2,9 @@
 
 import static net.osmand.IndexConstants.GPX_FILE_EXT;
 import static net.osmand.data.Amenity.REF;
+import static net.osmand.data.Amenity.ROUTE;
 import static net.osmand.data.Amenity.ROUTE_ID;
+import static net.osmand.osm.MapPoiTypes.ROUTES_PREFIX;
 import static net.osmand.osm.MapPoiTypes.ROUTE_ARTICLE;
 import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK;
 import static net.osmand.osm.MapPoiTypes.ROUTE_TRACK_POINT;
@@ -12,13 +14,16 @@
 import static net.osmand.plus.wikivoyage.data.TravelGpx.DIFF_ELEVATION_DOWN;
 import static net.osmand.plus.wikivoyage.data.TravelGpx.DIFF_ELEVATION_UP;
 import static net.osmand.plus.wikivoyage.data.TravelGpx.DISTANCE;
+import static net.osmand.plus.wikivoyage.data.TravelGpx.ELE_GRAPH;
 import static net.osmand.plus.wikivoyage.data.TravelGpx.MAX_ELEVATION;
 import static net.osmand.plus.wikivoyage.data.TravelGpx.MIN_ELEVATION;
-import static net.osmand.plus.wikivoyage.data.TravelGpx.ROUTE_RADIUS;
+import static net.osmand.plus.wikivoyage.data.TravelGpx.ROUTE_BBOX_RADIUS;
+import static net.osmand.plus.wikivoyage.data.TravelGpx.START_ELEVATION;
 import static net.osmand.plus.wikivoyage.data.TravelGpx.USER;
 import static net.osmand.shared.gpx.GpxUtilities.PointsGroup.OBF_POINTS_GROUPS_BACKGROUNDS;
 import static net.osmand.shared.gpx.GpxUtilities.PointsGroup.OBF_POINTS_GROUPS_COLORS;
 import static net.osmand.shared.gpx.GpxUtilities.PointsGroup.OBF_POINTS_GROUPS_DELIMITER;
+import static net.osmand.shared.gpx.GpxUtilities.PointsGroup.OBF_POINTS_GROUPS_EMPTY_NAME_STUB;
 import static net.osmand.shared.gpx.GpxUtilities.PointsGroup.OBF_POINTS_GROUPS_ICONS;
 import static net.osmand.shared.gpx.GpxUtilities.PointsGroup.OBF_POINTS_GROUPS_NAMES;
 import static net.osmand.shared.gpx.GpxUtilities.PointsGroup.OBF_POINTS_GROUPS_PREFIX;
@@ -26,8 +31,6 @@
 import static net.osmand.shared.gpx.GpxUtilities.TRAVEL_GPX_CONVERT_FIRST_LETTER;
 import static net.osmand.shared.gpx.GpxUtilities.TRAVEL_GPX_CONVERT_MULT_1;
 import static net.osmand.shared.gpx.GpxUtilities.TRAVEL_GPX_CONVERT_MULT_2;
-import static net.osmand.shared.gpx.primitives.GpxExtensions.OBF_GPX_EXTENSION_TAG_PREFIX;
-import static net.osmand.util.Algorithms.capitalizeFirstLetter;
 
 import android.os.AsyncTask;
 import android.text.TextUtils;
@@ -36,12 +39,16 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
+import com.google.gson.Gson;
+import com.google.gson.reflect.TypeToken;
+
 import net.osmand.Collator;
 import net.osmand.binary.BinaryMapPoiReaderAdapter;
 import net.osmand.IndexConstants;
 import net.osmand.OsmAndCollator;
 import net.osmand.PlatformUtil;
 import net.osmand.ResultMatcher;
+import net.osmand.plus.Version;
 import net.osmand.plus.shared.SharedUtil;
 import net.osmand.binary.BinaryMapDataObject;
 import net.osmand.binary.BinaryMapIndexReader;
@@ -62,8 +69,9 @@
 import net.osmand.search.core.SearchPhrase.NameStringMatcher;
 import net.osmand.search.core.SearchSettings;
 import net.osmand.shared.gpx.GpxFile;
-import net.osmand.shared.gpx.GpxHelper;
 import net.osmand.shared.gpx.GpxUtilities;
+import net.osmand.shared.gpx.RouteActivityHelper;
+import net.osmand.shared.gpx.primitives.RouteActivity;
 import net.osmand.shared.gpx.primitives.Track;
 import net.osmand.shared.gpx.primitives.TrkSegment;
 import net.osmand.shared.gpx.primitives.WptPt;
@@ -76,6 +84,7 @@
 
 import java.io.File;
 import java.io.IOException;
+import java.lang.reflect.Type;
 import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.Collection;
@@ -88,7 +97,9 @@
 import java.util.List;
 import java.util.Map;
 import java.util.Map.Entry;
+import java.util.Objects;
 import java.util.Set;
+import java.util.TreeMap;
 import java.util.concurrent.ConcurrentHashMap;
 
 import gnu.trove.set.TLongSet;
@@ -113,6 +124,16 @@ public class TravelObfHelper implements TravelHelper {
 	private final List<Pair<File, Amenity>> foundAmenities = new ArrayList<>();
 	public volatile int requestNumber = 0;
 
+	// Do not clutter GPX with tags that are always generated.
+	private static final Set<String> doNotSaveAmenityGpxTags = Set.of(
+			"date", "distance", "route_name", "route_bbox_radius",
+			"avg_ele", "min_ele", "max_ele", "start_ele", "ele_graph", "diff_ele_up", "diff_ele_down",
+			"avg_speed", "min_speed", "max_speed", "time_moving", "time_moving_no_gaps", "time_span", "time_span_no_gaps"
+	);
+
+	public static final String WPT_EXTRA_TAGS = "wpt_extra_tags";
+	private static final String METADATA_EXTRA_TAGS = "metadata_extra_tags";
+	private static final String EXTENSIONS_EXTRA_TAGS = "extensions_extra_tags";
 
 	public TravelObfHelper(OsmandApplication app) {
 		this.app = app;
@@ -206,8 +227,15 @@ public int compare(Pair article1, Pair article2) {
 		return popularArticles;
 	}
 
+	@Override
+	public boolean isTravelGpxTags(@NonNull Map<String, String> tags) {
+		return tags.containsKey(ROUTE_ID) && "segment".equals(tags.get(ROUTE));
+	}
+
 	@Nullable
 	public synchronized TravelGpx searchGpx(@NonNull LatLon location, @Nullable String filter, @Nullable String ref) {
+		final String lcFilter = filter != null ? filter.toLowerCase() : null;
+		final String lcSearchRef = ref != null ? ref.toLowerCase() : null;
 		List<Pair<File, Amenity>> foundAmenities = new ArrayList<>();
 		int searchRadius = ARTICLE_SEARCH_RADIUS;
 		TravelGpx travelGpx = null;
@@ -221,15 +249,23 @@ public synchronized TravelGpx searchGpx(@NonNull LatLon location, @Nullable Stri
 			}
 			for (Pair<File, Amenity> foundGpx : foundAmenities) {
 				Amenity amenity = foundGpx.second;
-				if ((Algorithms.objectEquals(amenity.getRouteId(), filter)
-						|| Algorithms.objectEquals(amenity.getName(), filter))
-						&& Algorithms.objectEquals(amenity.getRef(), ref)) {
+				final String aRef = amenity.getRef();
+				final String aName = amenity.getName();
+				final String aRouteId = amenity.getRouteId();
+				final String lcRef = aRef != null ? aRef.toLowerCase() : null;
+				final String lcName = aName != null ? aName.toLowerCase() : null;
+				final String lcRouteId = aRouteId != null ? aRouteId.toLowerCase() : null;
+				if ((Algorithms.objectEquals(lcRouteId, lcFilter) || Algorithms.objectEquals(lcName, lcFilter))
+						&& (lcSearchRef == null || Algorithms.objectEquals(lcRef, lcSearchRef))) {
 					travelGpx = getTravelGpx(foundGpx.first, amenity);
 					break;
 				}
 			}
 			searchRadius *= 2;
 		} while (travelGpx == null && searchRadius < MAX_SEARCH_RADIUS);
+		if (travelGpx == null) {
+			LOG.error(String.format("searchGpx(%s, %s, %s) failed", location, filter, ref));
+		}
 		return travelGpx;
 	}
 
@@ -257,7 +293,7 @@ public boolean isCancelled() {
 	private TravelArticle cacheTravelArticles(File file, Amenity amenity, String lang, boolean readPoints, @Nullable GpxReadCallback callback) {
 		TravelArticle article = null;
 		Map<String, TravelArticle> articles;
-		if (ROUTE_TRACK.equals(amenity.getSubType())) {
+		if (amenity.isRouteTrack()) {
 			articles = readRoutePoint(file, amenity);
 		} else {
 			articles = readArticles(file, amenity);
@@ -282,7 +318,7 @@ private TravelGpx getTravelGpx(File file, Amenity amenity) {
 		TravelGpx travelGpx = new TravelGpx();
 		travelGpx.file = file;
 		String title = amenity.getName("en");
-		travelGpx.title = createTitle(Algorithms.isEmpty(title) ? amenity.getName() : title);
+		travelGpx.title = Algorithms.isEmpty(title) ? amenity.getName() : title;
 		travelGpx.lat = amenity.getLocation().getLatitude();
 		travelGpx.lon = amenity.getLocation().getLongitude();
 		travelGpx.description = Algorithms.emptyIfNull(amenity.getTagContent(Amenity.DESCRIPTION));
@@ -290,33 +326,32 @@ private TravelGpx getTravelGpx(File file, Amenity amenity) {
 		travelGpx.user = Algorithms.emptyIfNull(amenity.getTagContent(USER));
 		travelGpx.activityType = Algorithms.emptyIfNull(amenity.getTagContent(ACTIVITY_TYPE));
 		travelGpx.ref = Algorithms.emptyIfNull(amenity.getRef());
-		try {
-			travelGpx.totalDistance = Float.parseFloat(Algorithms.emptyIfNull(amenity.getTagContent(DISTANCE)));
-			travelGpx.diffElevationUp = Double.parseDouble(Algorithms.emptyIfNull(amenity.getTagContent(DIFF_ELEVATION_UP)));
-			travelGpx.diffElevationDown = Double.parseDouble(Algorithms.emptyIfNull(amenity.getTagContent(DIFF_ELEVATION_DOWN)));
-			travelGpx.maxElevation = Double.parseDouble(Algorithms.emptyIfNull(amenity.getTagContent(MAX_ELEVATION)));
-			travelGpx.minElevation = Double.parseDouble(Algorithms.emptyIfNull(amenity.getTagContent(MIN_ELEVATION)));
-			travelGpx.avgElevation = Double.parseDouble(Algorithms.emptyIfNull(amenity.getTagContent(AVERAGE_ELEVATION)));
-			String radius = amenity.getTagContent(ROUTE_RADIUS);
-			if (radius != null) {
-				travelGpx.routeRadius = MapUtils.convertCharToDist(radius.charAt(0), TRAVEL_GPX_CONVERT_FIRST_LETTER,
-						TRAVEL_GPX_CONVERT_FIRST_DIST, TRAVEL_GPX_CONVERT_MULT_1, TRAVEL_GPX_CONVERT_MULT_2);
-			}
-		} catch (NumberFormatException e) {
-			LOG.debug(e.getMessage(), e);
+		travelGpx.totalDistance = Algorithms.parseFloatSilently(amenity.getTagContent(DISTANCE), 0);
+		travelGpx.diffElevationUp = Algorithms.parseDoubleSilently(amenity.getTagContent(DIFF_ELEVATION_UP), 0);
+		travelGpx.diffElevationDown = Algorithms.parseDoubleSilently(amenity.getTagContent(DIFF_ELEVATION_DOWN), 0);
+		travelGpx.minElevation = Algorithms.parseDoubleSilently(amenity.getTagContent(MIN_ELEVATION), 0);
+		travelGpx.avgElevation = Algorithms.parseDoubleSilently(amenity.getTagContent(AVERAGE_ELEVATION), 0);
+		travelGpx.maxElevation = Algorithms.parseDoubleSilently(amenity.getTagContent(MAX_ELEVATION), 0);
+		String radius = amenity.getTagContent(ROUTE_BBOX_RADIUS);
+		if (radius != null) {
+			travelGpx.routeRadius = MapUtils.convertCharToDist(radius.charAt(0), TRAVEL_GPX_CONVERT_FIRST_LETTER,
+					TRAVEL_GPX_CONVERT_FIRST_DIST, TRAVEL_GPX_CONVERT_MULT_1, TRAVEL_GPX_CONVERT_MULT_2);
 		}
 		return travelGpx;
 	}
 
 	@NonNull
-	public static SearchPoiTypeFilter getSearchFilter(String... filterSubcategory) {
+	public static SearchPoiTypeFilter getSearchFilter(String... filterSubcategories) {
 		return new SearchPoiTypeFilter() {
 			@Override
 			public boolean accept(PoiCategory type, String subcategory) {
-				for (String filterSubcategory : filterSubcategory) {
-					if (subcategory.equals(filterSubcategory)) {
+				for (String filter : filterSubcategories) {
+					if (subcategory.equals(filter)) {
 						return true;
 					}
+					if (ROUTE_TRACK.equals(filter) && subcategory.startsWith(ROUTES_PREFIX)) {
+						return true; // include routes:routes_xxx with routes:route_track filter
+					}
 				}
 				return false;
 			}
@@ -694,7 +729,7 @@ private TravelArticle getCachedArticle(@NonNull TravelArticleIdentifier articleI
 
 	@Override
 	public void openTrackMenu(@NonNull TravelArticle article, @NonNull MapActivity mapActivity,
-	                          @NonNull String gpxFileName, @NonNull LatLon latLon) {
+	                          @NonNull String gpxFileName, @NonNull LatLon latLon, boolean adjustMapPosition) {
 		GpxReadCallback callback = new GpxReadCallback() {
 			@Override
 			public void onGpxFileReading() {
@@ -709,7 +744,7 @@ public void onGpxFileRead(@Nullable GpxFile gpxFile) {
 
 					String name = gpxFileName.endsWith(GPX_FILE_EXT) ? gpxFileName : gpxFileName + GPX_FILE_EXT;
 					File file = new File(FileUtils.getTempDir(app), name);
-					GpxUiHelper.saveAndOpenGpx(mapActivity, file, gpxFile, wptPt, article.getAnalysis(), null);
+					GpxUiHelper.saveAndOpenGpx(mapActivity, file, gpxFile, wptPt, article.getAnalysis(), null, adjustMapPosition);
 				}
 			}
 		};
@@ -1037,8 +1072,7 @@ public ArrayList<String> getArticleLangs(@NonNull TravelArticleIdentifier articl
 	@NonNull
 	@Override
 	public String getGPXName(@NonNull TravelArticle article) {
-		return article.getTitle().replace('/', '_').replace('\'', '_')
-				.replace('\"', '_') + GPX_FILE_EXT;
+		return article.getGpxFileName() + GPX_FILE_EXT;
 	}
 
 	@NonNull
@@ -1070,15 +1104,10 @@ public void saveOrRemoveArticle(@NonNull TravelArticle article, boolean save) {
 		}
 	}
 
-	@Nullable
-	private synchronized GpxFile buildGpxFile(@NonNull List<BinaryMapIndexReader> readers, TravelArticle article) {
-		List<BinaryMapDataObject> segmentList = new ArrayList<>();
-		Map<String, String> gpxFileExtensions = new HashMap<>();
-		List<Amenity> pointList = new ArrayList<>();
-		List<String> pgNames = new ArrayList<>();
-		List<String> pgIcons = new ArrayList<>();
-		List<String> pgColors = new ArrayList<>();
-		List<String> pgBackgrounds = new ArrayList<>();
+	private void fetchSegmentsAndPoints(List<BinaryMapIndexReader> readers, TravelArticle article,
+	                                    List<BinaryMapDataObject> segmentList, List<Amenity> pointList,
+	                                    Map<String, String> gpxFileExtensions, List<String> pgNames,
+	                                    List<String> pgIcons, List<String> pgColors, List<String> pgBackgrounds) {
 		for (BinaryMapIndexReader reader : readers) {
 			try {
 				if (article.file != null && !article.file.equals(reader.getFile())) {
@@ -1087,75 +1116,17 @@ private synchronized GpxFile buildGpxFile(@NonNull List<BinaryMapIndexReader> re
 				if (article instanceof TravelGpx) {
 					BinaryMapIndexReader.SearchRequest<BinaryMapDataObject> sr = BinaryMapIndexReader.buildSearchRequest(
 							0, Integer.MAX_VALUE, 0, Integer.MAX_VALUE, 15, null,
-							new ResultMatcher<BinaryMapDataObject>() {
-								@Override
-								public boolean publish(BinaryMapDataObject object) {
-									if (object.getPointsLength() > 1) {
-										if (object.getTagValue(REF).equals(article.ref)
-												&& (object.getTagValue(ROUTE_ID).equals(article.routeId)
-												|| createTitle(object.getName()).equals(article.getTitle()))) {
-											segmentList.add(object);
-										}
-									}
-									return false;
-								}
-
-								@Override
-								public boolean isCancelled() {
-									return false;
-								}
-							});
+							matchSegmentsByRefTitleRouteId(article, segmentList));
 					if (article.routeRadius >= 0) {
 						sr.setBBoxRadius(article.lat, article.lon, article.routeRadius);
 					}
 					reader.searchMapIndex(sr);
 				}
-
 				BinaryMapIndexReader.SearchRequest<Amenity> pointRequest = BinaryMapIndexReader.buildSearchPoiRequest(
 						0, 0, Algorithms.emptyIfNull(article.title), 0, Integer.MAX_VALUE, 0, Integer.MAX_VALUE,
 						getSearchFilter(article.getMainFilterString(), article.getPointFilterString()),
-						new ResultMatcher<Amenity>() {
-							@Override
-							public boolean publish(Amenity amenity) {
-								if (amenity.getRouteId().equals(article.getRouteId())) {
-									if (ROUTE_TRACK.equals(amenity.getSubType())) {
-										for (String key : amenity.getAdditionalInfoKeys()) {
-											if (key.startsWith(OBF_GPX_EXTENSION_TAG_PREFIX)) {
-												String tag = key.replaceFirst(OBF_GPX_EXTENSION_TAG_PREFIX, "");
-												String val = amenity.getAdditionalInfo(key);
-												gpxFileExtensions.put(tag, val);
-											} else if (key.startsWith(OBF_POINTS_GROUPS_PREFIX)) {
-												final String delimiter = OBF_POINTS_GROUPS_DELIMITER;
-												String joinedValues = amenity.getAdditionalInfo(key);
-												List<String> values = Arrays.asList(joinedValues.split(delimiter));
-												if (OBF_POINTS_GROUPS_NAMES.equals(key)) {
-													pgNames.addAll(values);
-												} else if (OBF_POINTS_GROUPS_ICONS.equals(key)) {
-													pgIcons.addAll(values);
-												} else if (OBF_POINTS_GROUPS_COLORS.equals(key)) {
-													pgColors.addAll(values);
-												} else if (OBF_POINTS_GROUPS_BACKGROUNDS.equals(key)) {
-													pgBackgrounds.addAll(values);
-												}
-											}
-										}
-									} else if (ROUTE_TRACK_POINT.equals(amenity.getSubType())) {
-										pointList.add(amenity);
-									} else {
-										String amenityLang = amenity.getTagSuffix(Amenity.LANG_YES + ":");
-										if (Algorithms.stringsEqual(article.lang, amenityLang)) {
-											pointList.add(amenity);
-										}
-									}
-								}
-								return false;
-							}
-
-							@Override
-							public boolean isCancelled() {
-								return false;
-							}
-						}, null);
+						matchPointsAndTags(article, pointList, gpxFileExtensions, pgNames, pgIcons, pgColors, pgBackgrounds),
+						null);
 				if (article.routeRadius >= 0) {
 					pointRequest.setBBoxRadius(article.lat, article.lon, article.routeRadius);
 				}
@@ -1171,9 +1142,129 @@ public boolean isCancelled() {
 				LOG.error(e.getMessage());
 			}
 		}
-		GpxFile gpxFile = null;
-		String description = article.getDescription();
-		String title = FileUtils.isValidFileName(description) ? description : article.getTitle();
+	}
+
+	@NonNull
+	private ResultMatcher<Amenity> matchPointsAndTags(TravelArticle article, List<Amenity> pointList, Map<String, String> gpxFileExtensions, List<String> pgNames, List<String> pgIcons, List<String> pgColors, List<String> pgBackgrounds) {
+		return new ResultMatcher<Amenity>() {
+			boolean isAlreadyProcessed = false;
+			@Override
+			public boolean publish(Amenity amenity) {
+				if (amenity.getRouteId().equals(article.getRouteId())) {
+					if (amenity.isRouteTrack()) {
+						if (!isAlreadyProcessed) {
+							isAlreadyProcessed = true;
+							reconstructGpxTagsFromAmenityType(amenity, gpxFileExtensions);
+							for (String tag : amenity.getAdditionalInfoKeys()) {
+								String value = amenity.getAdditionalInfo(tag);
+								if (tag.startsWith(OBF_POINTS_GROUPS_PREFIX)) {
+									final String delimiter = OBF_POINTS_GROUPS_DELIMITER;
+									List<String> values = Arrays.asList(value.split(delimiter));
+									if (OBF_POINTS_GROUPS_NAMES.equals(tag)) {
+										pgNames.addAll(values);
+									} else if (OBF_POINTS_GROUPS_ICONS.equals(tag)) {
+										pgIcons.addAll(values);
+									} else if (OBF_POINTS_GROUPS_COLORS.equals(tag)) {
+										pgColors.addAll(values);
+									} else if (OBF_POINTS_GROUPS_BACKGROUNDS.equals(tag)) {
+										pgBackgrounds.addAll(values);
+									}
+								} else if (!doNotSaveAmenityGpxTags.contains(tag)) {
+									gpxFileExtensions.put(tag, value);
+								}
+							}
+						}
+					} else if (ROUTE_TRACK_POINT.equals(amenity.getSubType())) {
+						pointList.add(amenity);
+					} else {
+						String amenityLang = amenity.getTagSuffix(Amenity.LANG_YES + ":");
+						if (Algorithms.stringsEqual(article.lang, amenityLang)) {
+							pointList.add(amenity);
+						}
+					}
+				}
+				return false;
+			}
+			@Override
+			public boolean isCancelled() {
+				return false;
+			}
+		};
+	}
+
+	private void reconstructGpxTagsFromAmenityType(Amenity amenity, Map<String, String> gpxFileExtensions) {
+		if (amenity.isRouteTrack() && amenity.getSubType() != null) {
+			String subType = amenity.getSubType();
+			if (subType.startsWith(ROUTES_PREFIX)) {
+				String osmValue = amenity.getType().getPoiTypeByKeyName(subType).getOsmValue();
+				if (!Algorithms.isEmpty(osmValue)) {
+					if (amenity.hasOsmRouteId() || !"other".equals(osmValue)) {
+						gpxFileExtensions.put("route_type", osmValue); // do not litter gpx with default route_type
+					}
+					String activityType = amenity.getAdditionalInfo("route_activity_type");
+					if (activityType != null) {
+						gpxFileExtensions.put(GpxUtilities.ACTIVITY_TYPE, activityType); // osmand:activity in gpx
+					}
+				}
+			}
+		}
+	}
+
+	@NonNull
+	private ResultMatcher<BinaryMapDataObject> matchSegmentsByRefTitleRouteId(
+			TravelArticle article, List<BinaryMapDataObject> segmentList) {
+		return new ResultMatcher<BinaryMapDataObject>() {
+			@Override
+			public boolean publish(BinaryMapDataObject object) {
+				if (object.getPointsLength() > 1) {
+					if (object.getTagValue(REF).equals(article.ref)
+							&& (object.getTagValue(ROUTE_ID).equals(article.routeId)
+							|| object.getName().equals(article.getTitle()))) {
+						segmentList.add(object);
+					}
+				}
+				return false;
+			}
+			@Override
+			public boolean isCancelled() {
+				return false;
+			}
+		};
+	}
+
+	@Nullable
+	private synchronized GpxFile buildGpxFile(@NonNull List<BinaryMapIndexReader> readers, TravelArticle article) {
+		List<BinaryMapDataObject> segmentList = new ArrayList<>();
+		Map<String, String> gpxFileExtensions = new TreeMap<>();
+		List<Amenity> pointList = new ArrayList<>();
+		List<String> pgNames = new ArrayList<>();
+		List<String> pgIcons = new ArrayList<>();
+		List<String> pgColors = new ArrayList<>();
+		List<String> pgBackgrounds = new ArrayList<>();
+
+		fetchSegmentsAndPoints(readers, article, segmentList, pointList, gpxFileExtensions,
+				pgNames, pgIcons, pgColors, pgBackgrounds);
+
+		GpxFile gpxFile;
+		if (article instanceof TravelGpx) {
+			gpxFile = new GpxFile(Version.getFullVersion(app));
+			gpxFile.getMetadata().setName(Objects.requireNonNullElse(article.title, article.routeId)); // path is name
+			if (!Algorithms.isEmpty(article.title) && article.hasOsmRouteId()) {
+				gpxFileExtensions.putIfAbsent("name", article.title);
+			}
+			if (!Algorithms.isEmpty(article.description)) {
+				gpxFile.getMetadata().setDesc(article.description);
+			}
+		} else {
+			String description = article.getDescription();
+			String title = FileUtils.isValidFileName(description) ? description : article.getTitle();
+			gpxFile = new GpxFile(title, article.getLang(), article.getContent());
+		}
+
+		if (!Algorithms.isEmpty(article.getImageTitle())) {
+			gpxFile.getMetadata().setLink(TravelArticle.getImageUrl(article.getImageTitle(), false));
+		}
+
 		if (!segmentList.isEmpty()) {
 			boolean hasAltitude = false;
 			Track track = new Track();
@@ -1185,38 +1276,46 @@ public boolean isCancelled() {
 					point.setLon(MapUtils.get31LongitudeX(segment.getPoint31XTile(i)));
 					trkSegment.getPoints().add(point);
 				}
-				String ele_graph = segment.getTagValue("ele_graph");
+				String ele_graph = segment.getTagValue(ELE_GRAPH);
 				if (!Algorithms.isEmpty(ele_graph)) {
 					hasAltitude = true;
 					List<Integer> heightRes = KMapAlgorithms.INSTANCE.decodeIntHeightArrayGraph(ele_graph, 3);
-					double startEle = 0;
-					try {
-						startEle = Double.parseDouble(segment.getTagValue("start_ele"));
-					} catch (NumberFormatException e) {
-						LOG.debug(e.getMessage(), e);
-					}
+					double startEle = Algorithms.parseDoubleSilently(segment.getTagValue(START_ELEVATION), 0);
 					KMapAlgorithms.INSTANCE.augmentTrkSegmentWithAltitudes(trkSegment, heightRes, startEle);
 				}
 				track.getSegments().add(trkSegment);
 			}
-			gpxFile = new GpxFile(title, article.getLang(), article.getContent());
-			if (!Algorithms.isEmpty(article.getImageTitle())) {
-				gpxFile.getMetadata().setLink(TravelArticle.getImageUrl(article.getImageTitle(), false));
-			}
 			gpxFile.setTracks(new ArrayList<>());
 			gpxFile.getTracks().add(track);
-			gpxFile.setRef(article.ref);
+			if (!(article instanceof TravelGpx)) {
+				gpxFile.setRef(article.ref);
+			}
 			gpxFile.setHasAltitude(hasAltitude);
-			gpxFile.getExtensionsToWrite().putAll(gpxFileExtensions);
+			if (gpxFileExtensions.containsKey(GpxUtilities.ACTIVITY_TYPE)) {
+				gpxFile.getMetadata().getExtensionsToWrite()
+						.put(GpxUtilities.ACTIVITY_TYPE, gpxFileExtensions.get(GpxUtilities.ACTIVITY_TYPE));
+				gpxFileExtensions.remove(GpxUtilities.ACTIVITY_TYPE); // move activity to the metadata
+				gpxFileExtensions.remove("route_activity_type"); // osmand:activity is enough
+				gpxFileExtensions.remove("route_type");
+			}
+
+			Gson gson = new Gson();
+			Type type = new TypeToken<Map<String, String>>() {}.getType();
+			if (gpxFileExtensions.containsKey(EXTENSIONS_EXTRA_TAGS)) {
+				gpxFile.getExtensionsToWrite()
+						.putAll(gson.fromJson(gpxFileExtensions.get(EXTENSIONS_EXTRA_TAGS), type));
+				gpxFileExtensions.remove(EXTENSIONS_EXTRA_TAGS);
+			}
+			if (gpxFileExtensions.containsKey(METADATA_EXTRA_TAGS)) {
+				gpxFile.getMetadata().getExtensionsToWrite()
+						.putAll(gson.fromJson(gpxFileExtensions.get(METADATA_EXTRA_TAGS), type));
+				gpxFileExtensions.remove(METADATA_EXTRA_TAGS);
+			}
+
+			gpxFile.getExtensionsToWrite().putAll(gpxFileExtensions); // finally
 		}
 		reconstructPointsGroups(gpxFile, pgNames, pgIcons, pgColors, pgBackgrounds); // create groups before points
 		if (!pointList.isEmpty()) {
-			if (gpxFile == null) {
-				gpxFile = new GpxFile(title, article.getLang(), article.getContent());
-				if (!Algorithms.isEmpty(article.getImageTitle())) {
-					gpxFile.getMetadata().setLink(TravelArticle.getImageUrl(article.getImageTitle(), false));
-				}
-			}
 			for (Amenity wayPoint : pointList) {
 				gpxFile.addPoint(article.createWptPt(wayPoint, article.getLang()));
 			}
@@ -1234,18 +1333,15 @@ private void reconstructPointsGroups(GpxFile gpxFile, List<String> pgNames, List
 				String icon = pgIcons.get(i);
 				String background = pgBackgrounds.get(i);
 				int color = KAlgorithms.INSTANCE.parseColor(pgColors.get(i));
-				if (name.isEmpty()) name = GpxFile.DEFAULT_WPT_GROUP_NAME; // follow current default
+				if (name.isEmpty() || OBF_POINTS_GROUPS_EMPTY_NAME_STUB.equals(name)) {
+					name = GpxFile.DEFAULT_WPT_GROUP_NAME; // follow current default
+				}
 				GpxUtilities.PointsGroup pg = new GpxUtilities.PointsGroup(name, icon, background, color);
 				gpxFile.addPointsGroup(pg);
 			}
 		}
 	}
 
-	@NonNull
-	public String createTitle(@NonNull String name) {
-		return capitalizeFirstLetter(GpxHelper.INSTANCE.getGpxTitle(name));
-	}
-
 	private class GpxFileReader extends AsyncTask<Void, Void, GpxFile> {
 
 		private final TravelArticle article;
