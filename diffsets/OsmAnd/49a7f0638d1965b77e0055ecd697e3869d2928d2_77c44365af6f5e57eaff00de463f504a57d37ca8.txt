diff --git a/OsmAnd/src/net/osmand/plus/OsmAndAppCustomization.java b/OsmAnd/src/net/osmand/plus/OsmAndAppCustomization.java
index 85af601061c..8a1db019484 100644
--- a/OsmAnd/src/net/osmand/plus/OsmAndAppCustomization.java
+++ b/OsmAnd/src/net/osmand/plus/OsmAndAppCustomization.java
@@ -110,30 +110,6 @@ public String getIndexesUrl() {
 		return "http://"+IndexConstants.INDEX_DOWNLOAD_DOMAIN+"/get_indexes?gzip&" + Version.getVersionAsURLParam(app); //$NON-NLS-1$;
 	}
 
-	public void preDownloadActivity(final DownloadActivity da, final List<DownloadActivityType> downloadTypes, ActionBar actionBar ) {
-		actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
-		ArrayAdapter<String> spinnerAdapter = new ArrayAdapter<String>(actionBar.getThemedContext(), R.layout.sherlock_spinner_item, 
-				toString(downloadTypes)	
-				);
-		spinnerAdapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
-        actionBar.setListNavigationCallbacks(spinnerAdapter, new OnNavigationListener() {
-			
-			@Override
-			public boolean onNavigationItemSelected(int itemPosition, long itemId) {
-				da.changeType(downloadTypes.get(itemPosition));
-				return true;
-			}
-		});		
-	}
-	
-	private List<String> toString(List<DownloadActivityType> t) {
-		ArrayList<String> items = new ArrayList<String>();
-		for(DownloadActivityType ts : t) {
-			items.add(ts.getString(app));
-		}
-		return items;
-	}
-
 	public boolean showDownloadExtraActions() {
 		return true;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/activities/SettingsGeneralActivity.java b/OsmAnd/src/net/osmand/plus/activities/SettingsGeneralActivity.java
index dcf802bce81..35a5a7ef081 100644
--- a/OsmAnd/src/net/osmand/plus/activities/SettingsGeneralActivity.java
+++ b/OsmAnd/src/net/osmand/plus/activities/SettingsGeneralActivity.java
@@ -22,6 +22,7 @@
 import net.osmand.plus.R;
 import net.osmand.plus.Version;
 import net.osmand.plus.base.SuggestExternalDirectoryDialog;
+import net.osmand.plus.download.DownloadActivity;
 import net.osmand.plus.download.DownloadActivityType;
 import net.osmand.plus.download.DownloadIndexFragment;
 import net.osmand.plus.helpers.FileNameTranslationHelper;
@@ -374,7 +375,7 @@ public boolean onPreferenceChange(Preference preference, Object newValue) {
 			if (MORE_VALUE.equals(newValue)) {
 				// listPref.set(oldValue); // revert the change..
 				final Intent intent = new Intent(this, DownloadIndexFragment.class);
-				intent.putExtra(DownloadIndexFragment.FILTER_CAT, DownloadActivityType.VOICE_FILE.getTag());
+				intent.putExtra(DownloadActivity.FILTER_CAT, DownloadActivityType.VOICE_FILE.getTag());
 				startActivity(intent);
 			} else {
 				super.onPreferenceChange(preference, newValue);
diff --git a/OsmAnd/src/net/osmand/plus/download/DownloadActivity.java b/OsmAnd/src/net/osmand/plus/download/DownloadActivity.java
index 8a45af64bea..e008f2ff6e4 100644
--- a/OsmAnd/src/net/osmand/plus/download/DownloadActivity.java
+++ b/OsmAnd/src/net/osmand/plus/download/DownloadActivity.java
@@ -11,15 +11,15 @@
 import android.support.v4.view.ViewPager;
 import android.view.View;
 import android.widget.*;
+import com.actionbarsherlock.app.ActionBar;
 import com.actionbarsherlock.app.SherlockFragmentActivity;
-import net.osmand.plus.OsmandApplication;
-import net.osmand.plus.OsmandSettings;
-import net.osmand.plus.R;
-import net.osmand.plus.Version;
+import net.osmand.plus.*;
 import net.osmand.plus.activities.FavouritesActivity;
 import net.osmand.plus.base.BasicProgressAsyncTask;
+import net.osmand.plus.srtmplugin.SRTMPlugin;
 
 import java.text.MessageFormat;
+import java.util.ArrayList;
 import java.util.LinkedHashMap;
 import java.util.List;
 import java.util.Map;
@@ -44,6 +44,9 @@ public class DownloadActivity extends SherlockFragmentActivity {
 	private TextView progressPercent;
 	private ImageView cancel;
 
+	public static final String FILTER_KEY = "filter";
+	public static final String FILTER_CAT = "filter_cat";
+
 
 	@Override
 	protected void onCreate(Bundle savedInstanceState) {
@@ -100,17 +103,49 @@ public void onClick(View v) {
 			}
 
 		});
+
+		final List<DownloadActivityType> downloadTypes = getDownloadTypes();
+		final Intent intent = getIntent();
+		setType(downloadTypes.get(0));
+		if (intent != null && intent.getExtras() != null) {
+			final String filter = intent.getExtras().getString(FILTER_KEY);
+//			if (filter != null) {
+//				filterText.setText(filter);
+//			}
+			final String filterCat = intent.getExtras().getString(FILTER_CAT);
+			if (filterCat != null) {
+				DownloadActivityType type = DownloadActivityType.getIndexType(filterCat.toLowerCase());
+				if (type != null) {
+					setType(type);
+					downloadTypes.remove(type);
+					downloadTypes.add(0, type);
+				}
+			}
+		}
+
+		getSupportActionBar().setHomeButtonEnabled(true);
 	}
 
 	@Override
 	protected void onResume() {
 		super.onResume();
 		BasicProgressAsyncTask<?, ?, ?> t = downloadListIndexThread.getCurrentRunningTask();
-		if(t instanceof DownloadIndexesThread.DownloadIndexesAsyncTask) {
+	}
+
+
+	@Override
+	public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
+		int itemId = item.getItemId();
+		switch (itemId) {
+			case android.R.id.home:
+				finish();
+				return true;
 
 		}
+		return false;
 	}
 
+
 	public DownloadActivityType getType() { return type;}
 
 	public void setType(DownloadActivityType type) { this.type = type;}
@@ -321,4 +356,18 @@ public void updateDownloadButton(boolean scroll) {
 //		}
 	}
 
+	public List<DownloadActivityType> getDownloadTypes() {
+		List<DownloadActivityType> items = new ArrayList<DownloadActivityType>();
+		items.add(DownloadActivityType.NORMAL_FILE);
+		items.add(DownloadActivityType.VOICE_FILE);
+		items.add(DownloadActivityType.ROADS_FILE);
+		if(OsmandPlugin.getEnabledPlugin(SRTMPlugin.class) != null){
+			items.add(DownloadActivityType.HILLSHADE_FILE);
+			items.add(DownloadActivityType.SRTM_COUNTRY_FILE);
+		}
+		getMyApplication().getAppCustomization().getDownloadTypes(items);
+		return items;
+	}
+
+
 }
diff --git a/OsmAnd/src/net/osmand/plus/download/DownloadIndexFragment.java b/OsmAnd/src/net/osmand/plus/download/DownloadIndexFragment.java
index 35c138cc951..ae7adc9adfe 100644
--- a/OsmAnd/src/net/osmand/plus/download/DownloadIndexFragment.java
+++ b/OsmAnd/src/net/osmand/plus/download/DownloadIndexFragment.java
@@ -12,6 +12,7 @@
 import android.view.LayoutInflater;
 import android.view.ViewGroup;
 import android.widget.*;
+import com.actionbarsherlock.app.ActionBar;
 import com.actionbarsherlock.view.MenuInflater;
 import net.osmand.IndexConstants;
 import net.osmand.access.AccessibleAlertBuilder;
@@ -50,11 +51,6 @@ public class DownloadIndexFragment extends OsmandExpandableListFragment {
 	private static final int DESELECT_ALL_ID = 2;
 	private static final int FILTER_EXISTING_REGIONS = 3;
 	
-    public static final String FILTER_KEY = "filter";
-    public static final String FILTER_CAT = "filter_cat";
-	
-
-	
     private TextWatcher textWatcher ;
 	private EditText filterText;
 	private OsmandSettings settings;
@@ -63,8 +59,7 @@ public class DownloadIndexFragment extends OsmandExpandableListFragment {
 
 	@Override
 	public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
-		final List<DownloadActivityType> downloadTypes = getDownloadTypes();
-		getDownloadActivity().setType(downloadTypes.get(0));
+
 		View view = inflater.inflate(R.layout.download_index, container, false);
 		ExpandableListView listView = (ExpandableListView)view.findViewById(android.R.id.list);
 		List<IndexItem> list = new ArrayList<IndexItem>();
@@ -95,24 +90,6 @@ public void onTextChanged(CharSequence s, int start, int before,
 
 		};
 		filterText.addTextChangedListener(textWatcher);
-		//final Intent intent = getIntent();
-		final Intent intent = null;
-		if (intent != null && intent.getExtras() != null) {
-			final String filter = intent.getExtras().getString(FILTER_KEY);
-			if (filter != null) {
-				filterText.setText(filter);
-			}
-			final String filterCat = intent.getExtras().getString(FILTER_CAT);
-			if (filterCat != null) {
-				DownloadActivityType type = DownloadActivityType.getIndexType(filterCat.toLowerCase());
-				if (type != null) {
-					getDownloadActivity().setType(type);
-					downloadTypes.remove(type);
-					downloadTypes.add(0, type);
-				}
-			}
-		}
-		getMyApplication().getAppCustomization().preDownloadActivity(getDownloadActivity(), downloadTypes, getDownloadActivity().getSupportActionBar());
 
 		return view;
 	}
@@ -277,6 +254,21 @@ public boolean onOptionsItemSelected(MenuItem item) {
 	}
 	@Override
 	public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
+		ActionBar actionBar = getDownloadActivity().getSupportActionBar();
+		final List<DownloadActivityType> downloadTypes = getDownloadActivity().getDownloadTypes();
+		actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
+		ArrayAdapter<String> spinnerAdapter = new ArrayAdapter<String>(actionBar.getThemedContext(), R.layout.sherlock_spinner_item,
+				toString(downloadTypes));
+		spinnerAdapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
+		actionBar.setListNavigationCallbacks(spinnerAdapter, new ActionBar.OnNavigationListener() {
+
+			@Override
+			public boolean onNavigationItemSelected(int itemPosition, long itemId) {
+				getDownloadActivity().changeType(downloadTypes.get(itemPosition));
+				return true;
+			}
+		});
+
 		if (getMyApplication().getAppCustomization().showDownloadExtraActions()) {
 			SubMenu s = menu.addSubMenu(0, MORE_ID, 0, R.string.default_buttons_other_actions);
 			s.add(0, RELOAD_ID, 0, R.string.update_downlod_list);
@@ -286,7 +278,6 @@ public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
 
 			s.setIcon(isLightActionBar() ? R.drawable.abs__ic_menu_moreoverflow_holo_light
 					: R.drawable.abs__ic_menu_moreoverflow_holo_dark);
-			s.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
 		}
 	}
 	
@@ -338,20 +329,6 @@ private void selectAll() {
 
 
 
-	private List<DownloadActivityType> getDownloadTypes() {
-		List<DownloadActivityType> items = new ArrayList<DownloadActivityType>();
-		items.add(DownloadActivityType.NORMAL_FILE);
-		items.add(DownloadActivityType.VOICE_FILE);
-		items.add(DownloadActivityType.ROADS_FILE);
-		if(OsmandPlugin.getEnabledPlugin(SRTMPlugin.class) != null){
-			items.add(DownloadActivityType.HILLSHADE_FILE);
-			items.add(DownloadActivityType.SRTM_COUNTRY_FILE);
-		}
-		getMyApplication().getAppCustomization().getDownloadTypes(items);
-		return items;
-	}
-
-
 	@Override
 	public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
 		final IndexItem e = (IndexItem) listAdapter.getChild(groupPosition, childPosition);
@@ -422,6 +399,14 @@ public void onDestroy() {
 	    }
 		DownloadActivity.downloadListIndexThread.setUiFragment(null);
 	}
+
+	public List<String> toString(List<DownloadActivityType> t) {
+		ArrayList<String> items = new ArrayList<String>();
+		for(DownloadActivityType ts : t) {
+			items.add(ts.getString(getMyApplication()));
+		}
+		return items;
+	}
 	
 
 	public DownloadActivity getDownloadActivity(){ return (DownloadActivity)getActivity();}
diff --git a/OsmAnd/src/net/osmand/plus/download/LocalIndexesFragment.java b/OsmAnd/src/net/osmand/plus/download/LocalIndexesFragment.java
index 50195a28c8b..2ffe60693b2 100644
--- a/OsmAnd/src/net/osmand/plus/download/LocalIndexesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/download/LocalIndexesFragment.java
@@ -10,6 +10,7 @@
 import java.util.Map;
 import java.util.Set;
 
+import com.actionbarsherlock.app.ActionBar;
 import com.actionbarsherlock.view.*;
 import net.osmand.IProgress;
 import net.osmand.IndexConstants;
@@ -452,6 +453,9 @@ public void onDestroy() {
 
 	@Override
 	public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
+		ActionBar actionBar = getDownloadActivity().getSupportActionBar();
+		//actionBar.removeAllTabs();
+		actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
 		optionsMenuAdapter = new ContextMenuAdapter(getDownloadActivity());
 		OnContextMenuClick listener = new OnContextMenuClick() {
 			@Override
diff --git a/OsmAnd/src/net/osmand/plus/views/DownloadedRegionsLayer.java b/OsmAnd/src/net/osmand/plus/views/DownloadedRegionsLayer.java
index 2adee8c7821..af24a3f5590 100644
--- a/OsmAnd/src/net/osmand/plus/views/DownloadedRegionsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/DownloadedRegionsLayer.java
@@ -12,6 +12,7 @@
 import net.osmand.data.RotatedTileBox;
 import net.osmand.map.OsmandRegions;
 import net.osmand.plus.R;
+import net.osmand.plus.download.DownloadActivity;
 import net.osmand.plus.download.DownloadIndexFragment;
 import net.osmand.plus.resources.ResourceManager;
 import net.osmand.util.Algorithms;
@@ -87,7 +88,7 @@ public void initLayer(final OsmandMapTileView view) {
 			@Override
 			public void onClick(View v) {
 				final Intent intent = new Intent(view.getContext(), view.getApplication().getAppCustomization().getDownloadIndexActivity());
-				intent.putExtra(DownloadIndexFragment.FILTER_KEY, filter.toString());
+				intent.putExtra(DownloadActivity.FILTER_KEY, filter.toString());
 				view.getContext().startActivity(intent);
 			}
 		});
