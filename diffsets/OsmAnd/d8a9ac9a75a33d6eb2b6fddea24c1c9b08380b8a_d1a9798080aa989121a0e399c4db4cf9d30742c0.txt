diff --git a/OsmAnd/src/net/osmand/plus/importfiles/ui/ImportTracksFragment.java b/OsmAnd/src/net/osmand/plus/importfiles/ui/ImportTracksFragment.java
index 70456a3f828..852d3b8a6d3 100644
--- a/OsmAnd/src/net/osmand/plus/importfiles/ui/ImportTracksFragment.java
+++ b/OsmAnd/src/net/osmand/plus/importfiles/ui/ImportTracksFragment.java
@@ -7,7 +7,6 @@
 import static net.osmand.plus.myplaces.tracks.dialogs.AvailableTracksFragment.SELECTED_FOLDER_KEY;
 
 import android.app.Dialog;
-import android.content.Context;
 import android.content.Intent;
 import android.os.AsyncTask;
 import android.os.AsyncTask.Status;
@@ -17,7 +16,6 @@
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
-import android.view.WindowManager;
 import android.widget.FrameLayout;
 import android.widget.FrameLayout.LayoutParams;
 import android.widget.ImageView;
@@ -308,9 +306,8 @@ private void collectTracks() {
 
 	@NonNull
 	private MapDrawParams getTracksDrawParams() {
-		WindowManager mgr = (WindowManager) app.getSystemService(Context.WINDOW_SERVICE);
 		DisplayMetrics metrics = new DisplayMetrics();
-		mgr.getDefaultDisplay().getMetrics(metrics);
+		AndroidUtils.getDisplay(requireContext()).getMetrics(metrics);
 
 		int width = metrics.widthPixels - AndroidUtils.dpToPx(app, 32);
 		int height = getResources().getDimensionPixelSize(R.dimen.track_image_height);
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/PointEditorFragment.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/PointEditorFragment.java
index 36a929ba2f5..8f6ce99bc00 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/PointEditorFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/editors/PointEditorFragment.java
@@ -13,7 +13,6 @@
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
-import android.view.WindowManager;
 import android.widget.EditText;
 import android.widget.ImageView;
 import android.widget.TextView;
@@ -394,9 +393,8 @@ public void onBitmapDrawn(boolean success) {
 
 	@NonNull
 	private MapDrawParams getMapDrawParams() {
-		WindowManager mgr = (WindowManager) app.getSystemService(Context.WINDOW_SERVICE);
 		DisplayMetrics metrics = new DisplayMetrics();
-		mgr.getDefaultDisplay().getMetrics(metrics);
+		AndroidUtils.getDisplay(requireContext()).getMetrics(metrics);
 
 		int width = metrics.widthPixels - AndroidUtils.dpToPx(app, 32);
 		int height = getResources().getDimensionPixelSize(R.dimen.point_image_height);
diff --git a/OsmAnd/src/net/osmand/plus/plugins/development/widget/ZoomLevelWidget.java b/OsmAnd/src/net/osmand/plus/plugins/development/widget/ZoomLevelWidget.java
index 32efec9dbc5..97dcae03997 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/development/widget/ZoomLevelWidget.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/development/widget/ZoomLevelWidget.java
@@ -1,14 +1,18 @@
 package net.osmand.plus.plugins.development.widget;
 
-import android.content.Context;
+import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_ZOOM_LEVEL;
+
 import android.util.DisplayMetrics;
 import android.view.View.OnClickListener;
-import android.view.WindowManager;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
 
 import net.osmand.data.RotatedTileBox;
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.settings.backend.preferences.OsmandPreference;
+import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.OsmAndFormatter;
 import net.osmand.plus.utils.OsmAndFormatter.FormattedValue;
 import net.osmand.plus.views.OsmandMap;
@@ -20,11 +24,6 @@
 import net.osmand.plus.views.mapwidgets.widgetstates.ZoomLevelWidgetState;
 import net.osmand.plus.views.mapwidgets.widgetstates.ZoomLevelWidgetState.ZoomLevelType;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
-import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_ZOOM_LEVEL;
-
 public class ZoomLevelWidget extends SimpleWidget {
 
 	private static final int ZOOM_OFFSET_FROM_31 = 17;
@@ -128,15 +127,14 @@ private void setMapScaleText() {
 	}
 
 	private int calculateMapScale() {
-		WindowManager mgr = (WindowManager) app.getSystemService(Context.WINDOW_SERVICE);
-		DisplayMetrics dm = new DisplayMetrics();
-		mgr.getDefaultDisplay().getMetrics(dm);
+		DisplayMetrics metrics = new DisplayMetrics();
+		AndroidUtils.getDisplay(mapActivity).getMetrics(metrics);
 
 		RotatedTileBox tileBox = mapView.getRotatedTileBox();
 		int pixWidth = tileBox.getPixWidth();
 		int pixHeight = tileBox.getPixHeight();
 
-		float averageRealDpi = (dm.xdpi + dm.ydpi) / 2.0f;
+		float averageRealDpi = (metrics.xdpi + metrics.ydpi) / 2.0f;
 		float pixelsPerMeter = averageRealDpi * 100 / 2.54f;
 		double realScreenWidthInMeters = (double) pixWidth / pixelsPerMeter;
 		double mapScreenWidthInMeters = tileBox.getDistance(0, pixHeight / 2, pixWidth, pixHeight / 2);
