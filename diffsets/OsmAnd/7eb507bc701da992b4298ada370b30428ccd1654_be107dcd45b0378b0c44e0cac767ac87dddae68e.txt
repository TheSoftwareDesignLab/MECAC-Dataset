diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
index e928d042ca9..29e092b7df6 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
@@ -310,8 +310,9 @@ public Set<MapWidgetInfo> getWidgetsForPanel(@NonNull MapActivity mapActivity,
 				boolean passAvailable = !availableMode || WidgetsAvailabilityHelper.isWidgetAvailable(app, widget.key, appMode);
 				boolean defaultAvailable = !defaultMode || !widget.isCustomWidget();
 				boolean passMatchedPanels = !matchingPanelsMode || panels.contains(widget.getWidgetPanel());
+				boolean passTypeAllowed = widget.getWidgetType() == null || widget.getWidgetType().isAllowed();
 
-				if (passDisabled && passEnabled && passAvailable && defaultAvailable && passMatchedPanels) {
+				if (passDisabled && passEnabled && passAvailable && defaultAvailable && passMatchedPanels && passTypeAllowed) {
 					filteredWidgets.add(widget);
 				}
 			}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetsFactory.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetsFactory.java
index 36fe87d1d30..0e51fea072f 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetsFactory.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetsFactory.java
@@ -9,7 +9,6 @@
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.plugins.PluginsHelper;
-import net.osmand.plus.plugins.development.OsmandDevelopmentPlugin;
 import net.osmand.plus.views.mapwidgets.widgets.AltitudeWidget;
 import net.osmand.plus.views.mapwidgets.widgets.AverageSpeedWidget;
 import net.osmand.plus.views.mapwidgets.widgets.BatteryWidget;
@@ -57,13 +56,6 @@ public MapWidget createMapWidget(@NonNull WidgetType widgetType) {
 	}
 
 	public MapWidget createMapWidget(@Nullable String customId, @NonNull WidgetType widgetType, @Nullable WidgetsPanel panel) {
-		if (isWidgetCreationAllowed(widgetType)) {
-			return createMapWidgetImpl(customId, widgetType, panel);
-		}
-		return null;
-	}
-
-	private MapWidget createMapWidgetImpl(@Nullable String customId, @NonNull WidgetType widgetType, @Nullable WidgetsPanel panel) {
 		switch (widgetType) {
 			case NEXT_TURN:
 				return new NextTurnWidget(mapActivity, false);
@@ -138,12 +130,4 @@ private MapWidget createMapWidgetImpl(@Nullable String customId, @NonNull Widget
 				return PluginsHelper.createMapWidget(mapActivity, widgetType, customId, panel);
 		}
 	}
-
-	private boolean isWidgetCreationAllowed(@NonNull WidgetType widgetType) {
-		if (widgetType == ALTITUDE_MAP_CENTER) {
-			OsmandDevelopmentPlugin plugin = PluginsHelper.getPlugin(OsmandDevelopmentPlugin.class);
-			return plugin != null && plugin.is3DMapsEnabled();
-		}
-		return true;
-	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetType.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetType.java
index d9e6d52dcc1..2d205f24230 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetType.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetType.java
@@ -1,12 +1,11 @@
 package net.osmand.plus.views.mapwidgets;
 
-import static net.osmand.plus.plugins.audionotes.AudioVideoNotesPlugin.AV_DEFAULT_ACTION_CHOOSE;
 import static net.osmand.plus.views.mapwidgets.MapWidgetInfo.DELIMITER;
 import static net.osmand.plus.views.mapwidgets.WidgetGroup.ALTITUDE;
 import static net.osmand.plus.views.mapwidgets.WidgetGroup.ANT_PLUS;
 import static net.osmand.plus.views.mapwidgets.WidgetGroup.GLIDE;
-import static net.osmand.plus.views.mapwidgets.WidgetGroup.WEATHER;
 import static net.osmand.plus.views.mapwidgets.WidgetGroup.SUNRISE_SUNSET;
+import static net.osmand.plus.views.mapwidgets.WidgetGroup.WEATHER;
 import static net.osmand.plus.views.mapwidgets.WidgetsPanel.BOTTOM;
 import static net.osmand.plus.views.mapwidgets.WidgetsPanel.LEFT;
 import static net.osmand.plus.views.mapwidgets.WidgetsPanel.RIGHT;
@@ -179,15 +178,20 @@ public int getIconId(boolean night) {
 	}
 
 	public WidgetGroup getGroup() {
-		if (group == ALTITUDE) {
-			OsmandDevelopmentPlugin plugin = PluginsHelper.getPlugin(OsmandDevelopmentPlugin.class);
-			if (plugin == null || !plugin.is3DMapsEnabled()) {
-				return null;
-			}
+		if (group == ALTITUDE && !ALTITUDE_MAP_CENTER.isAllowed()) {
+			return null;
 		}
 		return group;
 	}
 
+	public boolean isAllowed() {
+		if (this == ALTITUDE_MAP_CENTER) {
+			OsmandDevelopmentPlugin plugin = PluginsHelper.getPlugin(OsmandDevelopmentPlugin.class);
+			return plugin != null && plugin.is3DMapsEnabled();
+		}
+		return true;
+	}
+
 	@StringRes
 	public int getGroupDescriptionId() {
 		if (this == MAGNETIC_BEARING) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
index 7b267990ed8..31f1acf1c79 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
@@ -17,7 +17,6 @@
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.settings.backend.preferences.CommonPreference;
 import net.osmand.plus.settings.backend.preferences.OsmandPreference;
-import net.osmand.plus.utils.ColorUtilities;
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.views.layers.MapInfoLayer;
 import net.osmand.plus.views.layers.base.OsmandMapLayer;
@@ -148,10 +147,11 @@ public void recreateView() {
 	public final void updateInfo(@Nullable OsmandMapLayer.DrawSettings drawSettings) {
 		boolean shouldHideTopWidgets = (isVerticalWidget && mapActivity.getWidgetsVisibilityHelper().shouldHideTopWidgets());
 		boolean emptyValueTextView = Algorithms.isEmpty(textView.getText());
-		boolean visible = !(shouldHideTopWidgets || emptyValueTextView);
+		boolean typeAllowed = widgetType != null && widgetType.isAllowed();
+		boolean visible = typeAllowed && !(shouldHideTopWidgets || emptyValueTextView);
 
 		updateVisibility(visible);
-		if (!shouldHideTopWidgets || emptyValueTextView) {
+		if (typeAllowed && (!shouldHideTopWidgets || emptyValueTextView)) {
 			updateSimpleWidgetInfo(drawSettings);
 		}
 	}
