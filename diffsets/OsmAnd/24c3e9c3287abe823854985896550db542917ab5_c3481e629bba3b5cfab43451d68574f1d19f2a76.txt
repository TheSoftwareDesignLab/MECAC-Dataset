diff --git a/DataExtractionOSM/src/net/osmand/binary/BinaryMapRouteReaderAdapter.java b/DataExtractionOSM/src/net/osmand/binary/BinaryMapRouteReaderAdapter.java
index 1a9617e7b83..2bebc7bc143 100644
--- a/DataExtractionOSM/src/net/osmand/binary/BinaryMapRouteReaderAdapter.java
+++ b/DataExtractionOSM/src/net/osmand/binary/BinaryMapRouteReaderAdapter.java
@@ -38,7 +38,8 @@ public static class RouteTypeRule {
 		private final static int MAXSPEED = 4;
 		private final static int ROUNDABOUT = 5;
 		public final static int TRAFFIC_SIGNALS = 6;
-		public final static int RAILWAY_CROSSING = 6;
+		public final static int RAILWAY_CROSSING = 7;
+		private final static int LANES = 8;
 		private final String t;
 		private final String v;
 		private int intValue;
@@ -81,6 +82,13 @@ public float maxSpeed(){
 			return -1;
 		}
 		
+		public int lanes(){
+			if(type == LANES){
+				return intValue;
+			}
+			return -1;
+		}
+		
 		public String highwayRoad(){
 			if(type == HIGHWAY_TYPE){
 				return v;
@@ -123,7 +131,15 @@ private void analyze() {
 						floatValue *= 1.6;
 					}
 				}
-				
+			} else if (t.equalsIgnoreCase("lanes") && v != null) {
+				intValue = -1;
+				int i = 0;
+				while (i < v.length() && Character.isDigit(v.charAt(i))) {
+					i++;
+				}
+				if (i > 0) {
+					intValue = Integer.parseInt(v.substring(0, i));
+				}
 			}
 			
 		}
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index 2712a0a4025..ee54072f63b 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -9,6 +9,7 @@
          1. All your modified/created strings are in the top of the file (to make easier find what's translated).
     PLEASE: Have a look at http://code.google.com/p/osmand/wiki/UIConsistency, it may really improve your and our work  :-)  Thx - Hardy
     -->
+    <string name="shared_location">Shared location</string>
     <string name="osmand_parking_event">Pick up the car from parking</string>
     <string name="osmand_parking_warning">Warning</string>
     <string name="osmand_parking_warning_text">Notification to pick up your car was previously added to your Calendar. It will remain there until you will delete it manually.</string>    
diff --git a/OsmAnd/src/net/osmand/LatLonUtils.java b/OsmAnd/src/net/osmand/LatLonUtils.java
deleted file mode 100644
index 5b35bf718a8..00000000000
--- a/OsmAnd/src/net/osmand/LatLonUtils.java
+++ /dev/null
@@ -1,34 +0,0 @@
-package net.osmand;
-
-import android.location.Location;
-
-public class LatLonUtils {
-
-	public static Location middleLocation(Location start, Location end,
-			float meters) {
-		double lat1 = toRad(start.getLatitude());
-		double lon1 = toRad(start.getLongitude());
-		double R = 6371; // radius of earth in km
-		double d = meters / 1000; // in km
-		float brng = (float) (toRad(start.bearingTo(end)));
-		double lat2 = Math.asin(Math.sin(lat1) * Math.cos(d / R)
-				+ Math.cos(lat1) * Math.sin(d / R) * Math.cos(brng));
-		double lon2 = lon1
-				+ Math.atan2(Math.sin(brng) * Math.sin(d / R) * Math.cos(lat1),
-						Math.cos(d / R) - Math.sin(lat1) * Math.sin(lat2));
-		Location nl = new Location(start);
-		nl.setLatitude(toDegree(lat2));
-		nl.setLongitude(toDegree(lon2));
-		nl.setBearing(brng);
-		return nl;
-	}
-
-	private static double toDegree(double radians) {
-		return radians * 180 / Math.PI;
-	}
-
-	private static double toRad(double degree) {
-		return degree * Math.PI / 180;
-	}
-
-}
diff --git a/OsmAnd/src/net/osmand/plus/activities/MapActivity.java b/OsmAnd/src/net/osmand/plus/activities/MapActivity.java
index 4067d2f7f8c..9194ffdaf7e 100644
--- a/OsmAnd/src/net/osmand/plus/activities/MapActivity.java
+++ b/OsmAnd/src/net/osmand/plus/activities/MapActivity.java
@@ -60,7 +60,6 @@
 import android.os.Environment;
 import android.os.Handler;
 import android.os.Message;
-import android.util.DisplayMetrics;
 import android.util.Log;
 import android.view.KeyEvent;
 import android.view.Menu;
@@ -767,12 +766,20 @@ public void run() {
 			long now = System.currentTimeMillis();
 			if (isMapLinkedToLocation()) {
 				if(settings.AUTO_ZOOM_MAP.get() && location.hasSpeed()){
-					float z = defineZoomFromSpeed(location.getSpeed(), mapView.getFloatZoom());
-					if(Math.abs(mapView.getFloatZoom() - z) >= OsmandMapTileView.ZOOM_DELTA_1){
+					float zdelta = defineZoomFromSpeed(location.getSpeed());
+					if(Math.abs(zdelta) >= OsmandMapTileView.ZOOM_DELTA_1){
 						// prevent ui hysteresis (check time interval for autozoom)
-						if(now - lastTimeAutoZooming > 5000){
+						if(zdelta >= 2) {
+							// decrease a bit
+							zdelta -= 3 * OsmandMapTileView.ZOOM_DELTA_1;
+						} else if(zdelta <= -2){
+							// decrease a bit
+							zdelta += 3 * OsmandMapTileView.ZOOM_DELTA_1;
+						}
+						if(now - lastTimeAutoZooming > 4500){
 							lastTimeAutoZooming = now;
-							mapView.setZoom(z);
+							mapView.setZoom(mapView.getFloatZoom() + zdelta);
+							// mapView.getAnimatedDraggingThread().startZooming(mapView.getFloatZoom() + zdelta, false);
 						}
 					}
 				}
@@ -806,27 +813,38 @@ public void run() {
 		mapView.refreshMap();
 	}
 
-	public float defineZoomFromSpeed(float speed, float currentZoom){
-		DisplayMetrics metrics = new DisplayMetrics();
-		getWindowManager().getDefaultDisplay().getMetrics(metrics);
-
-		//FIXME victor review
-		//correct for roughly constant "look ahead" distance on different screens, see Issue 914
-		int screenSizeCorrection = (int)Math.round(Math.log(((float)metrics.heightPixels)/320.0f) / Math.log(2.0f)); 
-
-   	 	if(speed < 7f/3.6){
-			return currentZoom;
-		// less than 23: show zoom 17 
-		} else if(speed < 23f/3.6){
-			return 17 + screenSizeCorrection;
-		} else if(speed < 43f/3.6){
-			return 16 + screenSizeCorrection;
-		} else if(speed < 63f/3.6){
-			return 15 + screenSizeCorrection;
-		} else if(speed < 83f/3.6){
-			return 14 + screenSizeCorrection;
+	public float defineZoomFromSpeed(float speed) {
+		// correct for roughly constant "look ahead" distance on different screens, see Issue 914
+		if (speed < 7f / 3.6) {
+			return 0;
+		}
+		double topLat = mapView.calcLatitude(-mapView.getCenterPointY());
+		double cLat = mapView.calcLatitude(0);
+		double visibleDist = MapUtils.getDistance(cLat, mapView.getLongitude(), topLat, mapView.getLongitude());
+		float time = 75f;
+		if (speed < 83f / 3.6) {
+			time = 60f;
+		}
+		double distToSee = speed * time;
+		float zoomDelta = (float) (Math.log(visibleDist / distToSee) / Math.log(2.0f));
+		zoomDelta = Math.round(zoomDelta * OsmandMapTileView.ZOOM_DELTA) * OsmandMapTileView.ZOOM_DELTA_1;
+		// check if 17, 18 is correct?
+		if(zoomDelta + mapView.getFloatZoom() > 18 - OsmandMapTileView.ZOOM_DELTA_1) {
+			return 18 - OsmandMapTileView.ZOOM_DELTA_1 - mapView.getFloatZoom();
 		}
-		return 13 + screenSizeCorrection;
+		return zoomDelta;
+		// less than 23: show zoom 17
+		// int screenSizeCorrection = (int)Math.round(Math.log(((float)getMapView().getHeight())/320.0f) / Math.log(2.0f));
+		// if(speed < 23f/3.6){
+		// return 17 + screenSizeCorrection;
+		// } else if(speed < 43f/3.6){
+		// return 16 + screenSizeCorrection;
+		// } else if(speed < 63f/3.6){
+		// return 15 + screenSizeCorrection;
+		// } else if(speed < 83f/3.6){
+		// return 14 + screenSizeCorrection;
+		// }
+		// return 13 + screenSizeCorrection;
 	}
 
 	public void navigateToPoint(LatLon point){
@@ -1130,21 +1148,21 @@ public boolean onOptionsItemSelected(MenuItem item) {
 
 	protected void parseLaunchIntentLocation(){
    	 	Intent intent = getIntent();
-		if(intent != null && intent.getData() != null){
+		if (intent != null && intent.getData() != null) {
 			Uri data = intent.getData();
-			if("http".equalsIgnoreCase(data.getScheme()) && "download.osmand.net".equals(data.getHost()) &&
-					"/go".equals( data.getPath())) {
+			if ("http".equalsIgnoreCase(data.getScheme()) && "download.osmand.net".equals(data.getHost()) && "/go".equals(data.getPath())) {
 				String lat = data.getQueryParameter("lat");
 				String lon = data.getQueryParameter("lon");
-					if (lat != null && lon != null) {
+				if (lat != null && lon != null) {
 					try {
 						double lt = Double.parseDouble(lat);
 						double ln = Double.parseDouble(lon);
-						settings.setLastKnownMapLocation((float) lt, (float) ln);
 						String zoom = data.getQueryParameter("z");
-						if(zoom != null){
-							settings.setLastKnownMapZoom(Integer.parseInt(zoom));
+						int z = settings.getLastKnownMapZoom();
+						if (zoom != null) {
+							z = Integer.parseInt(zoom);
 						}
+						settings.setMapLocationToShow(lt, ln, z, getString(R.string.shared_location));
 					} catch (NumberFormatException e) {
 					}
 				}
diff --git a/OsmAnd/src/net/osmand/plus/render/MapVectorLayer.java b/OsmAnd/src/net/osmand/plus/render/MapVectorLayer.java
index 65b1c100405..196e14eaab8 100644
--- a/OsmAnd/src/net/osmand/plus/render/MapVectorLayer.java
+++ b/OsmAnd/src/net/osmand/plus/render/MapVectorLayer.java
@@ -49,10 +49,13 @@ public void initLayer(OsmandMapTileView view) {
 	}
 	
 	private void updateRotatedTileBox(){
-		float ts = view.getTileSize();
+//		float ts = view.getTileSize();
+		int zm = Math.round(view.getFloatZoom());
 		float xL = view.calcDiffTileX(pixRect.left - view.getCenterPointX(), pixRect.top - view.getCenterPointY()) + view.getXTile();
 		float yT = view.calcDiffTileY(pixRect.left - view.getCenterPointX(), pixRect.top - view.getCenterPointY()) + view.getYTile();
-		rotatedTileBox.set(xL, yT, ((float) pixRect.width()) / ts, ((float) pixRect.height()) / ts, view.getRotate(), view.getZoom());
+		float mult = (float) Math.pow(2, zm - view.getZoom());
+		float ts = (float) (view.getSourceTileSize() * Math.pow(2, view.getFloatZoom() - (int) zm));
+		rotatedTileBox.set(xL * mult, yT * mult, ((float) pixRect.width()) / ts , ((float) pixRect.height()) / ts, view.getRotate(), zm);
 	}
 	
 	public boolean isVectorDataVisible() {
diff --git a/OsmAnd/src/net/osmand/plus/routing/RouteAnimation.java b/OsmAnd/src/net/osmand/plus/routing/RouteAnimation.java
index ff15ea60330..075d2fbefd1 100644
--- a/OsmAnd/src/net/osmand/plus/routing/RouteAnimation.java
+++ b/OsmAnd/src/net/osmand/plus/routing/RouteAnimation.java
@@ -5,7 +5,6 @@
 
 import net.osmand.CallbackWithObject;
 import net.osmand.GPXUtilities;
-import net.osmand.LatLonUtils;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
@@ -41,7 +40,7 @@ public void onClick(DialogInterface dialog, int which) {
 						public boolean processResult(GPXUtilities.GPXFile result) {
 							GPXRouteParams prms = new RouteProvider.GPXRouteParams(result, false, ((OsmandApplication) ma.getApplication()).getSettings());
 							mgr.removeUpdates(ma.getGpsListener());
-							startAnimationThread(routingHelper, ma, prms.points);
+							startAnimationThread(routingHelper, ma, prms.points, true, 2);
 							return true;
 						}
 					}, true, false);
@@ -53,7 +52,7 @@ public boolean processResult(GPXUtilities.GPXFile result) {
 				@Override
 				public void onClick(DialogInterface dialog, int which) {
 					mgr.removeUpdates(ma.getGpsListener());
-					startAnimationThread(routingHelper, ma, new ArrayList<Location>(routingHelper.getCurrentRoute()));
+					startAnimationThread(routingHelper, ma, new ArrayList<Location>(routingHelper.getCurrentRoute()), false, 1);
 					
 				}
 			});
@@ -65,26 +64,43 @@ public void onClick(DialogInterface dialog, int which) {
 		}
 	}
 
-	private void startAnimationThread(final RoutingHelper routingHelper, final MapActivity ma, final List<Location> directions) {
-		
+	private void startAnimationThread(final RoutingHelper routingHelper, final MapActivity ma, final List<Location> directions, final boolean useLocationTime, final float coeff) {
+		final float time = 1.5f;
 		routeAnimation = new Thread() {
 			@Override
 			public void run() {
 				Location current = directions.isEmpty() ? null : new Location(directions.remove(0));
-				Location prev = null;
+				Location prev = current;
+				long prevTime = current.getTime();
 				float meters = metersToGoInFiveSteps(directions, current);
 				while (!directions.isEmpty() && routeAnimation != null) {
-					if (current.distanceTo(directions.get(0)) > meters) {
-						current = LatLonUtils.middleLocation(current,
-								directions.get(0), meters);
+					int timeout = (int) (time  * 1000);
+					float intervalTime = time;
+					if(useLocationTime) {
+						current = directions.remove(0);
+						meters = current.distanceTo(prev);
+						if (!directions.isEmpty()) {
+							timeout = (int) (directions.get(0).getTime() - current.getTime());
+							intervalTime = (current.getTime() - prevTime)  / 1000f;
+							prevTime = current.getTime();
+						}
+						
 					} else {
-						current = new Location(directions.remove(0));
-						meters = metersToGoInFiveSteps(directions, current);
+						if (current.distanceTo(directions.get(0)) > meters) {
+							current = middleLocation(current, directions.get(0), meters);
+						} else {
+							current = new Location(directions.remove(0));
+							meters = metersToGoInFiveSteps(directions, current);
+						}
+					}
+					if(intervalTime != 0) {
+						current.setSpeed(meters / intervalTime * coeff);	
 					}
-					current.setSpeed(meters);
 					current.setTime(System.currentTimeMillis());
-					current.setAccuracy(5);
-					if (prev != null) {
+					if(!current.hasAccuracy()) {
+						current.setAccuracy(5);
+					}
+					if (prev != null && prev.distanceTo(current) > 3) {
 						current.setBearing(prev.bearingTo(current));
 					}
 					final Location toset = current;
@@ -95,7 +111,7 @@ public void run() {
 						}
 					});
 					try {
-						Thread.sleep(1500);
+						Thread.sleep((long)(timeout / coeff));
 					} catch (InterruptedException e) {
 						// do nothing
 					}
@@ -122,4 +138,31 @@ public void close() {
 			stop();
 		}
 	}
+	
+	public static Location middleLocation(Location start, Location end,
+			float meters) {
+		double lat1 = toRad(start.getLatitude());
+		double lon1 = toRad(start.getLongitude());
+		double R = 6371; // radius of earth in km
+		double d = meters / 1000; // in km
+		float brng = (float) (toRad(start.bearingTo(end)));
+		double lat2 = Math.asin(Math.sin(lat1) * Math.cos(d / R)
+				+ Math.cos(lat1) * Math.sin(d / R) * Math.cos(brng));
+		double lon2 = lon1
+				+ Math.atan2(Math.sin(brng) * Math.sin(d / R) * Math.cos(lat1),
+						Math.cos(d / R) - Math.sin(lat1) * Math.sin(lat2));
+		Location nl = new Location(start);
+		nl.setLatitude(toDegree(lat2));
+		nl.setLongitude(toDegree(lon2));
+		nl.setBearing(brng);
+		return nl;
+	}
+
+	private static double toDegree(double radians) {
+		return radians * 180 / Math.PI;
+	}
+
+	private static double toRad(double degree) {
+		return degree * Math.PI / 180;
+	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/routing/RouteProvider.java b/OsmAnd/src/net/osmand/plus/routing/RouteProvider.java
index cbb8239e9b5..a642609533a 100644
--- a/OsmAnd/src/net/osmand/plus/routing/RouteProvider.java
+++ b/OsmAnd/src/net/osmand/plus/routing/RouteProvider.java
@@ -135,6 +135,7 @@ private static Location createLocation(WptPt pt){
 		loc.setLongitude(pt.lon);
 		loc.setSpeed((float) pt.speed);
 		loc.setAltitude(pt.ele);
+		loc.setTime(pt.time);
 		loc.setAccuracy((float) pt.hdop);
 		return loc;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java b/OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java
index 6a3eb35012f..832ffd71f32 100644
--- a/OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java
+++ b/OsmAnd/src/net/osmand/plus/routing/RoutingHelper.java
@@ -172,9 +172,10 @@ public boolean removeListener(IRouteInformationListener l){
 	
 	
 	public Location setCurrentLocation(Location currentLocation) {
+		Location locationProjection = currentLocation;
 		if (finalLocation == null || currentLocation == null) {
 			makeUturnWhenPossible = false;
-			return null;
+			return locationProjection;
 		}
 
 		boolean calculateRoute = false;
@@ -218,7 +219,7 @@ public Location setCurrentLocation(Location currentLocation) {
 				if (currentRoute > 0) {
 					double dist = getOrthogonalDistance(currentLocation, routeNodes.get(currentRoute - 1), routeNodes.get(currentRoute));
 					double projectDist = mode == ApplicationMode.CAR ? POSITION_TOLERANCE : POSITION_TOLERANCE / 2;
-					Location locationProjection = lastFixedLocation;
+					locationProjection = new Location(locationProjection);
 					if (dist < projectDist) {
 						Location nextLocation = routeNodes.get(currentRoute);
 						LatLon project = getProject(currentLocation, routeNodes.get(currentRoute - 1), routeNodes.get(currentRoute));
@@ -233,13 +234,13 @@ public Location setCurrentLocation(Location currentLocation) {
 					}
 				}
 			}
-			
+			lastFixedLocation = locationProjection;
 		}
 
 		if (calculateRoute) {
 			recalculateRouteInBackground(lastFixedLocation, finalLocation, currentGPXRoute);
 		}
-		return lastFixedLocation;
+		return locationProjection;
 	}
 
 	private double getOrthogonalDistance(Location loc, Location from, Location to) {
diff --git a/OsmAnd/src/net/osmand/plus/views/MapControlsLayer.java b/OsmAnd/src/net/osmand/plus/views/MapControlsLayer.java
index 9c20b159402..39e2bfcd324 100644
--- a/OsmAnd/src/net/osmand/plus/views/MapControlsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/MapControlsLayer.java
@@ -303,9 +303,11 @@ private void initZoomButtons(final OsmandMapTileView view, FrameLayout parent) {
 			@Override
 			public void onClick(View v) {
 				if (view.isZooming()) {
-					activity.changeZoom(view.getZoom() + 2 );
+//					activity.changeZoom(view.getZoom() + 2 );
+					activity.changeZoom(view.getFloatZoom() + 2 * OsmandMapTileView.ZOOM_DELTA_1 );
 				} else {
-					activity.changeZoom(view.getZoom() + 1 );
+//					activity.changeZoom(view.getZoom() + 1 );
+					activity.changeZoom(view.getFloatZoom() + 1 * OsmandMapTileView.ZOOM_DELTA_1 );
 				}
 
 			}
@@ -314,7 +316,8 @@ public void onClick(View v) {
 		zoomOutButton.setOnClickListener(new View.OnClickListener() {
 			@Override
 			public void onClick(View v) {
-				activity.changeZoom(view.getZoom() - 1 );
+//				activity.changeZoom(view.getZoom() - 1 );
+				activity.changeZoom(view.getFloatZoom() - 1 * OsmandMapTileView.ZOOM_DELTA_1 );
 			}
 		});
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java b/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
index fceee86398f..dd44aac2dbd 100644
--- a/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
+++ b/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
@@ -422,10 +422,10 @@ public void calculateLatLonRectangle(Rect pixRect, RectF latLonRect) {
 		RectF tilesRect = new RectF();
 		calculateTileRectangle(pixRect, w, h, tileX, tileY, tilesRect);
 		
-		latlonRect.top = (float) MapUtils.getLatitudeFromTile(z, tilesRect.top);
-		latlonRect.left = (float) MapUtils.getLongitudeFromTile(z, tilesRect.left);
-		latlonRect.bottom = (float) MapUtils.getLatitudeFromTile(z, tilesRect.bottom);
-		latlonRect.right = (float) MapUtils.getLongitudeFromTile(z, tilesRect.right);
+		latLonRect.top = (float) MapUtils.getLatitudeFromTile(z, tilesRect.top);
+		latLonRect.left = (float) MapUtils.getLongitudeFromTile(z, tilesRect.left);
+		latLonRect.bottom = (float) MapUtils.getLatitudeFromTile(z, tilesRect.bottom);
+		latLonRect.right = (float) MapUtils.getLongitudeFromTile(z, tilesRect.right);
 	}
 	
 
