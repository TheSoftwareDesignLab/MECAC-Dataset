diff --git a/OsmAnd/res/values/colors.xml b/OsmAnd/res/values/colors.xml
index 8cb81c75885..345c34e2f7a 100644
--- a/OsmAnd/res/values/colors.xml
+++ b/OsmAnd/res/values/colors.xml
@@ -137,6 +137,7 @@
 	<color name="status_bar_transparent_gradient">#CC000000</color>
 	<color name="status_bar_mapillary">#11ab51</color>
 	<color name="status_bar_route_light">#d9d9d9</color>
+	<color name="status_bar_route_dark">#000000</color>
 
 
 	<color name="color_transparent">#0000</color>
diff --git a/OsmAnd/src/net/osmand/plus/activities/MapActivity.java b/OsmAnd/src/net/osmand/plus/activities/MapActivity.java
index a0613ec5755..b71a9e5eab7 100644
--- a/OsmAnd/src/net/osmand/plus/activities/MapActivity.java
+++ b/OsmAnd/src/net/osmand/plus/activities/MapActivity.java
@@ -821,7 +821,8 @@ public void updateStatusBarColor() {
 				colorId = ((BaseOsmAndFragment) fragment).getStatusBarColorId();
 			} else if (dashboardOnMap.isVisible()) {
 				colorId = dashboardOnMap.getStatusBarColor();
-			} else if (mapLayers.getMapQuickActionLayer().isWidgetVisible()) {
+			} else if (mapLayers.getMapQuickActionLayer() != null &&
+					mapLayers.getMapQuickActionLayer().isWidgetVisible()) {
 				colorId = R.color.status_bar_transparent_gradient;
 			}
 			if (colorId != -1) {
@@ -829,8 +830,12 @@ public void updateStatusBarColor() {
 				return;
 			}
 			boolean night = app.getDaynightHelper().isNightModeForMapControls();
-			boolean markerTopBar = mapLayers.getMapMarkersLayer().getWidgetsFactory().isTopBarVisible();
-			if (markerTopBar) {
+			boolean mapTopBar = findViewById(R.id.map_top_bar).getVisibility() == View.VISIBLE;
+			boolean markerTopBar = mapLayers.getMapMarkersLayer() != null &&
+					mapLayers.getMapMarkersLayer().getWidgetsFactory().isTopBarVisible();
+			if (mapTopBar) {
+				colorId = night ? R.color.status_bar_route_dark : R.color.status_bar_route_light;
+			} else if (markerTopBar) {
 				colorId = R.color.status_bar_dark;
 			} else {
 				colorId = night ? R.color.status_bar_transparent_dark : R.color.status_bar_transparent_light;
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/MapContextMenuFragment.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/MapContextMenuFragment.java
index c796cafa852..e116f1e130a 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/MapContextMenuFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/MapContextMenuFragment.java
@@ -525,7 +525,7 @@ public int getStatusBarColorId() {
 		if (menu != null && (menu.getCurrentMenuState() == MenuState.FULL_SCREEN || menu.isLandscapeLayout())) {
 			return nightMode ? R.color.status_bar_dark : R.color.status_bar_route_light;
 		}
-		return nightMode ? R.color.status_bar_transparent_dark : R.color.status_bar_transparent_light;
+		return -1;
 	}
 
 	private void updateImageButton(ImageButton button, int iconLightId, int iconDarkId, int bgLightId, int bgDarkId, boolean night) {
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/MapRouteInfoMenuFragment.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/MapRouteInfoMenuFragment.java
index 4ce6d04cc61..1c9f3a26de4 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/MapRouteInfoMenuFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/MapRouteInfoMenuFragment.java
@@ -73,11 +73,7 @@ public void onDestroyView() {
 
 	@Override
 	public int getStatusBarColorId() {
-		if (portrait) {
-			return getMapActivity().getMyApplication().getDaynightHelper().isNightModeForMapControls()
-					? R.color.status_bar_transparent_dark : R.color.status_bar_transparent_light;
-		}
-		return R.color.status_bar_transparent_gradient;
+		return portrait ? -1 : R.color.status_bar_transparent_gradient;
 	}
 
 	public int getHeight() {
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/MarkerMenuOnMapFragment.java b/OsmAnd/src/net/osmand/plus/mapmarkers/MarkerMenuOnMapFragment.java
index 16f26666d2b..714edcdfc1e 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/MarkerMenuOnMapFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/MarkerMenuOnMapFragment.java
@@ -192,10 +192,7 @@ public void onPause() {
 
 	@Override
 	public int getStatusBarColorId() {
-		if (portrait) {
-			return night ? R.color.status_bar_transparent_dark : R.color.status_bar_transparent_light;
-		}
-		return R.color.status_bar_transparent_gradient;
+		return portrait ? -1 : R.color.status_bar_transparent_gradient;
 	}
 
 	@Override
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
index 0a62258445f..831714dc50a 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
@@ -715,7 +715,11 @@ public TopTextView(OsmandApplication app, MapActivity map) {
 		}
 
 		public boolean updateVisibility(boolean visible) {
-			return updateVisibility(topBar, visible);
+			boolean res = updateVisibility(topBar, visible);
+			if (res) {
+				map.updateStatusBarColor();
+			}
+			return res;
 		}
 
 		public boolean updateVisibility(View v, boolean visible) {
