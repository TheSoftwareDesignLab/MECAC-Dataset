diff --git a/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
index 631b02379c3..16780964a57 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
@@ -1,9 +1,5 @@
 package net.osmand.plus.views.layers;
 
-import static net.osmand.AndroidUtils.dpToPx;
-import static net.osmand.plus.wikivoyage.data.TravelObfHelper.ROUTE_ARTICLE;
-import static net.osmand.plus.wikivoyage.data.TravelObfHelper.ROUTE_TRACK;
-
 import android.app.Dialog;
 import android.content.Context;
 import android.graphics.Canvas;
@@ -20,10 +16,6 @@
 import android.widget.ScrollView;
 import android.widget.TextView;
 
-import androidx.annotation.Nullable;
-import androidx.appcompat.widget.Toolbar;
-import androidx.core.content.ContextCompat;
-
 import net.osmand.AndroidUtils;
 import net.osmand.PlatformUtil;
 import net.osmand.ResultMatcher;
@@ -62,6 +54,14 @@
 import java.util.Set;
 import java.util.TreeSet;
 
+import androidx.annotation.Nullable;
+import androidx.appcompat.widget.Toolbar;
+import androidx.core.content.ContextCompat;
+
+import static net.osmand.AndroidUtils.dpToPx;
+import static net.osmand.plus.wikivoyage.data.TravelObfHelper.ROUTE_ARTICLE;
+import static net.osmand.plus.wikivoyage.data.TravelObfHelper.ROUTE_TRACK;
+
 public class POIMapLayer extends OsmandMapLayer implements ContextMenuLayer.IContextMenuProvider,
 		MapTextProvider<Amenity>, IRouteInformationListener {
 	private static final int startZoom = 9;
@@ -70,15 +70,15 @@ public class POIMapLayer extends OsmandMapLayer implements ContextMenuLayer.ICon
 
 	private OsmandMapTileView view;
 
-	private RoutingHelper routingHelper;
+	private final RoutingHelper routingHelper;
 	private Set<PoiUIFilter> filters = new TreeSet<>();
 	private MapTextLayer mapTextLayer;
 
 	/// cache for displayed POI
 	// Work with cache (for map copied from AmenityIndexRepositoryOdb)
-	private MapLayerData<List<Amenity>> data;
+	private final MapLayerData<List<Amenity>> data;
 
-	private OsmandApplication app;
+	private final OsmandApplication app;
 
 	public POIMapLayer(final MapActivity activity) {
 		routingHelper = activity.getRoutingHelper();
@@ -200,14 +200,13 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 			data.clearCache();
 		}
 
-		List<Amenity> objects = Collections.emptyList();
 		List<Amenity> fullObjects = new ArrayList<>();
 		List<LatLon> fullObjectsLatLon = new ArrayList<>();
 		List<LatLon> smallObjectsLatLon = new ArrayList<>();
 		if (!filters.isEmpty()) {
 			if (tileBox.getZoom() >= startZoom) {
 				data.queryNewData(tileBox);
-				objects = data.getResults();
+				List<Amenity> objects = data.getResults();
 				if (objects != null) {
 					float textScale = app.getSettings().TEXT_SCALE.get();
 					float iconSize = getIconSize(app);
@@ -217,29 +216,26 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 							ContextCompat.getColor(app, R.color.osmand_orange), true);
 					pointImageDrawable.setAlpha(0.8f);
 					for (Amenity o : objects) {
-						float x = tileBox.getPixXFromLatLon(o.getLocation().getLatitude(), o.getLocation()
-								.getLongitude());
-						float y = tileBox.getPixYFromLatLon(o.getLocation().getLatitude(), o.getLocation()
-								.getLongitude());
+						LatLon latLon = o.getLocation();
+						float x = tileBox.getPixXFromLatLon(latLon.getLatitude(), latLon.getLongitude());
+						float y = tileBox.getPixYFromLatLon(latLon.getLatitude(), latLon.getLongitude());
 
 						if (tileBox.containsPoint(x, y, iconSize)) {
-							if (intersects(boundIntersections, x, y, iconSize, iconSize) ||
-									(app.getSettings().SHOW_NEARBY_POI.get() && wph.isRouteCalculated() && !wph.isAmenityNoPassed(o))) {
+							boolean intersects = intersects(boundIntersections, x, y, iconSize, iconSize);
+							if (intersects || app.getSettings().SHOW_NEARBY_POI.get()
+									&& routingHelper.isFollowingMode() && !wph.isAmenityNoPassed(o)) {
 								pointImageDrawable.drawSmallPoint(canvas, x, y, textScale);
-								smallObjectsLatLon.add(new LatLon(o.getLocation().getLatitude(),
-										o.getLocation().getLongitude()));
+								smallObjectsLatLon.add(latLon);
 							} else {
 								fullObjects.add(o);
-								fullObjectsLatLon.add(new LatLon(o.getLocation().getLatitude(),
-										o.getLocation().getLongitude()));
+								fullObjectsLatLon.add(latLon);
 							}
 						}
 					}
 					for (Amenity o : fullObjects) {
-						int x = (int) tileBox.getPixXFromLatLon(o.getLocation().getLatitude(), o.getLocation()
-								.getLongitude());
-						int y = (int) tileBox.getPixYFromLatLon(o.getLocation().getLatitude(), o.getLocation()
-								.getLongitude());
+						LatLon latLon = o.getLocation();
+						int x = (int) tileBox.getPixXFromLatLon(latLon.getLatitude(), latLon.getLongitude());
+						int y = (int) tileBox.getPixYFromLatLon(latLon.getLatitude(), latLon.getLongitude());
 						if (tileBox.containsPoint(x, y, iconSize)) {
 							String id = o.getGpxIcon();
 							if (id == null) {
