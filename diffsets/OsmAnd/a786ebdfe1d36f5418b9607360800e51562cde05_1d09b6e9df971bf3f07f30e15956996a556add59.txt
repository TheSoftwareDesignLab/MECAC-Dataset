diff --git a/OsmAnd/src/net/osmand/plus/osmedit/dialogs/BugBottomSheetDialog.java b/OsmAnd/src/net/osmand/plus/osmedit/dialogs/BugBottomSheetDialog.java
index 3793196ce0d..88d81161ba1 100644
--- a/OsmAnd/src/net/osmand/plus/osmedit/dialogs/BugBottomSheetDialog.java
+++ b/OsmAnd/src/net/osmand/plus/osmedit/dialogs/BugBottomSheetDialog.java
@@ -1,9 +1,12 @@
 package net.osmand.plus.osmedit.dialogs;
 
 import android.content.res.ColorStateList;
+import android.graphics.Rect;
 import android.os.AsyncTask;
 import android.os.Bundle;
 import android.view.View;
+import android.view.ViewTreeObserver;
+import android.widget.ScrollView;
 
 import androidx.annotation.NonNull;
 import androidx.core.content.ContextCompat;
@@ -44,6 +47,10 @@ public class BugBottomSheetDialog extends MenuBottomSheetDialogFragment {
 	private OsmNotesPoint point;
 	private HandleOsmNoteAsyncTask.HandleBugListener handleBugListener;
 	private TextInputEditText noteText;
+	private int contentHeightPrevious = 0;
+	private int buttonsHeight;
+	private int shadowHeight;
+	private ScrollView scrollView;
 
 	@Override
 	public void createMenuItems(Bundle savedInstanceState) {
@@ -56,6 +63,7 @@ public void createMenuItems(Bundle savedInstanceState) {
 
 		View osmNoteView = View.inflate(UiUtilities.getThemedContext(app, nightMode),
 				R.layout.open_osm_note_text, null);
+		osmNoteView.getViewTreeObserver().addOnGlobalLayoutListener(getOnGlobalLayoutListener());
 		TextInputLayout textBox = osmNoteView.findViewById(R.id.name_text_box);
 		int highlightColorId = nightMode ? R.color.list_background_color_dark : R.color.activity_background_color_light;
 		textBox.setBoxBackgroundColorResource(highlightColorId);
@@ -74,6 +82,28 @@ public void createMenuItems(Bundle savedInstanceState) {
 		items.add(new DividerSpaceItem(app, app.getResources().getDimensionPixelSize(R.dimen.content_padding_small)));
 	}
 
+	private ViewTreeObserver.OnGlobalLayoutListener getOnGlobalLayoutListener() {
+		return new ViewTreeObserver.OnGlobalLayoutListener() {
+			@Override
+			public void onGlobalLayout() {
+				Rect visibleDisplayFrame = new Rect();
+				buttonsHeight = getResources().getDimensionPixelSize(R.dimen.dialog_button_ex_max_width);
+				shadowHeight = getResources().getDimensionPixelSize(R.dimen.bottom_sheet_top_shadow_height);
+				scrollView = getView().findViewById(R.id.scroll_view);
+				scrollView.getWindowVisibleDisplayFrame(visibleDisplayFrame);
+				int viewHeight = scrollView.getHeight();
+				int contentHeight = visibleDisplayFrame.bottom - visibleDisplayFrame.top - buttonsHeight;
+				if (contentHeightPrevious != contentHeight) {
+					boolean showTopShadow;
+					showTopShadow = viewHeight + shadowHeight < contentHeight;
+					scrollView.requestLayout();
+					contentHeightPrevious = contentHeight;
+					drawTopShadow(showTopShadow);
+				}
+			}
+		};
+	}
+
 	@Override
 	protected int getRightBottomButtonTextId() {
 		return posButtonTextId;
diff --git a/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendGpxBottomSheetFragment.java b/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendGpxBottomSheetFragment.java
index 759f924d10a..3b02b3c05b9 100644
--- a/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendGpxBottomSheetFragment.java
+++ b/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendGpxBottomSheetFragment.java
@@ -69,13 +69,13 @@ public void createMenuItems(Bundle savedInstanceState) {
 		OsmandSettings settings = app.getSettings();
 
 		LayoutInflater themedInflater = UiUtilities.getInflater(app, nightMode);
-		View sendOsmPoiView = themedInflater.inflate(R.layout.send_gpx_fragment, null);
-		sendOsmPoiView.getViewTreeObserver().addOnGlobalLayoutListener(getOnGlobalLayoutListener());
+		View sendGpxView = themedInflater.inflate(R.layout.send_gpx_fragment, null);
+		sendGpxView.getViewTreeObserver().addOnGlobalLayoutListener(getOnGlobalLayoutListener());
 
-		tagsField = sendOsmPoiView.findViewById(R.id.tags_field);
-		messageField = sendOsmPoiView.findViewById(R.id.message_field);
+		tagsField = sendGpxView.findViewById(R.id.tags_field);
+		messageField = sendGpxView.findViewById(R.id.message_field);
 
-		TextView accountName = sendOsmPoiView.findViewById(R.id.user_name);
+		TextView accountName = sendGpxView.findViewById(R.id.user_name);
 		if (!Algorithms.isEmpty(settings.USER_DISPLAY_NAME.get())) {
 			accountName.setText(settings.USER_DISPLAY_NAME.get());
 		} else {
@@ -86,8 +86,8 @@ public void createMenuItems(Bundle savedInstanceState) {
 		messageField.setText(Algorithms.getFileNameWithoutExtension(fileName));
 		messageField.setSelection(messageField.getText().length());
 
-		final TextView visibilityName = sendOsmPoiView.findViewById(R.id.visibility_name);
-		final TextView visibilityDescription = sendOsmPoiView.findViewById(R.id.visibility_description);
+		final TextView visibilityName = sendGpxView.findViewById(R.id.visibility_name);
+		final TextView visibilityDescription = sendGpxView.findViewById(R.id.visibility_description);
 		visibilityName.setText(selectedUploadVisibility.getTitleId());
 		visibilityDescription.setText(selectedUploadVisibility.getDescriptionId());
 
@@ -110,7 +110,7 @@ public void onItemSelected(HorizontalSelectionAdapter.HorizontalSelectionItem it
 				horizontalSelectionAdapter.notifyDataSetChanged();
 			}
 		});
-		LinearLayout account = sendOsmPoiView.findViewById(R.id.account_container);
+		LinearLayout account = sendGpxView.findViewById(R.id.account_container);
 		account.setOnClickListener(new View.OnClickListener() {
 			@Override
 			public void onClick(View v) {
@@ -121,13 +121,13 @@ public void onClick(View v) {
 				dismiss();
 			}
 		});
-		RecyclerView iconCategoriesRecyclerView = sendOsmPoiView.findViewById(R.id.description_view);
+		RecyclerView iconCategoriesRecyclerView = sendGpxView.findViewById(R.id.description_view);
 		iconCategoriesRecyclerView.setAdapter(horizontalSelectionAdapter);
 		iconCategoriesRecyclerView.setLayoutManager(new LinearLayoutManager(app, RecyclerView.HORIZONTAL, false));
 		horizontalSelectionAdapter.notifyDataSetChanged();
 
 		SimpleBottomSheetItem titleItem = (SimpleBottomSheetItem) new SimpleBottomSheetItem.Builder()
-				.setCustomView(sendOsmPoiView)
+				.setCustomView(sendGpxView)
 				.create();
 		items.add(titleItem);
 	}
diff --git a/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendOsmNoteBottomSheetFragment.java b/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendOsmNoteBottomSheetFragment.java
index d26c1ac2127..51f6a5db047 100644
--- a/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendOsmNoteBottomSheetFragment.java
+++ b/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendOsmNoteBottomSheetFragment.java
@@ -1,14 +1,17 @@
 package net.osmand.plus.osmedit.dialogs;
 
 import android.app.Activity;
+import android.graphics.Rect;
 import android.graphics.drawable.Drawable;
 import android.os.Bundle;
 import android.view.ContextThemeWrapper;
 import android.view.View;
 import android.view.ViewGroup;
+import android.view.ViewTreeObserver;
 import android.widget.CompoundButton;
 import android.widget.EditText;
 import android.widget.LinearLayout;
+import android.widget.ScrollView;
 import android.widget.TextView;
 
 import androidx.annotation.NonNull;
@@ -59,6 +62,10 @@ public class SendOsmNoteBottomSheetFragment extends MenuBottomSheetDialogFragmen
 	private LinearLayout signInView;
 	private SwitchCompat uploadAnonymously;
 	private OsmandApplication app;
+	private int contentHeightPrevious = 0;
+	private int buttonsHeight;
+	private int shadowHeight;
+	private ScrollView scrollView;
 
 	private boolean isLoginOAuth() {
 		return !Algorithms.isEmpty(settings.USER_DISPLAY_NAME.get());
@@ -77,6 +84,7 @@ public void createMenuItems(Bundle savedInstanceState) {
 
 		final View sendOsmNoteView = View.inflate(new ContextThemeWrapper(getContext(), themeRes),
 				R.layout.send_osm_note_fragment, null);
+		sendOsmNoteView.getViewTreeObserver().addOnGlobalLayoutListener(getOnGlobalLayoutListener());
 
 		EditText noteText = sendOsmNoteView.findViewById(R.id.note_text);
 		noteText.setText(((OsmNotesPoint) poi[0]).getText());
@@ -148,6 +156,28 @@ public void onClick(View v) {
 		items.add(bottomSheetItem);
 	}
 
+	private ViewTreeObserver.OnGlobalLayoutListener getOnGlobalLayoutListener() {
+		return new ViewTreeObserver.OnGlobalLayoutListener() {
+			@Override
+			public void onGlobalLayout() {
+				Rect visibleDisplayFrame = new Rect();
+				buttonsHeight = getResources().getDimensionPixelSize(R.dimen.dialog_button_ex_max_width);
+				shadowHeight = getResources().getDimensionPixelSize(R.dimen.bottom_sheet_top_shadow_height);
+				scrollView = getView().findViewById(R.id.scroll_view);
+				scrollView.getWindowVisibleDisplayFrame(visibleDisplayFrame);
+				int viewHeight = scrollView.getHeight();
+				int contentHeight = visibleDisplayFrame.bottom - visibleDisplayFrame.top - buttonsHeight;
+				if (contentHeightPrevious != contentHeight) {
+					boolean showTopShadow;
+					showTopShadow = viewHeight + shadowHeight < contentHeight;
+					scrollView.requestLayout();
+					contentHeightPrevious = contentHeight;
+					drawTopShadow(showTopShadow);
+				}
+			}
+		};
+	}
+
 	private void updateAccountName() {
 		String userNameOAuth = settings.USER_DISPLAY_NAME.get();
 		String userNameOpenID = settings.USER_NAME.get();
diff --git a/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendPoiBottomSheetFragment.java b/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendPoiBottomSheetFragment.java
index 6bb227c2d34..afc6dcb53b9 100644
--- a/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendPoiBottomSheetFragment.java
+++ b/OsmAnd/src/net/osmand/plus/osmedit/dialogs/SendPoiBottomSheetFragment.java
@@ -1,12 +1,15 @@
 package net.osmand.plus.osmedit.dialogs;
 
 import android.app.Activity;
+import android.graphics.Rect;
 import android.os.Bundle;
 import android.view.ContextThemeWrapper;
 import android.view.View;
+import android.view.ViewTreeObserver;
 import android.widget.CompoundButton;
 import android.widget.EditText;
 import android.widget.LinearLayout;
+import android.widget.ScrollView;
 import android.widget.TextView;
 
 import androidx.annotation.NonNull;
@@ -40,220 +43,247 @@
 
 public class SendPoiBottomSheetFragment extends MenuBottomSheetDialogFragment {
 
-    public static final String TAG = SendPoiBottomSheetFragment.class.getSimpleName();
-    private static final Log LOG = PlatformUtil.getLog(SendPoiBottomSheetFragment.class);
-    private OsmPoint[] poi;
+	public static final String TAG = SendPoiBottomSheetFragment.class.getSimpleName();
+	private static final Log LOG = PlatformUtil.getLog(SendPoiBottomSheetFragment.class);
+	private OsmPoint[] poi;
+	private int contentHeightPrevious = 0;
+	private int buttonsHeight;
+	private int shadowHeight;
+	private ScrollView scrollView;
 
-    private SwitchCompat closeChangeSet;
-    private EditText messageEditText;
+	private SwitchCompat closeChangeSet;
+	private EditText messageEditText;
 
 
-    private boolean isLoginOAuth(OsmandSettings settings) {
-        return !Algorithms.isEmpty(settings.USER_DISPLAY_NAME.get());
-    }
+	private boolean isLoginOAuth(OsmandSettings settings) {
+		return !Algorithms.isEmpty(settings.USER_DISPLAY_NAME.get());
+	}
 
-    @Override
-    public void createMenuItems(Bundle savedInstanceState) {
-        OsmandApplication app = getMyApplication();
-        if (app == null) {
-            return;
-        }
-        poi = (OsmPoint[]) getArguments().getSerializable(OPENSTREETMAP_POINT);
-        final boolean isNightMode = app.getDaynightHelper().isNightModeForMapControls();
-        final View sendOsmPoiView = View.inflate(new ContextThemeWrapper(getContext(), themeRes),
-                R.layout.send_poi_fragment, null);
-        closeChangeSet = sendOsmPoiView.findViewById(R.id.close_change_set_checkbox);
-        messageEditText = sendOsmPoiView.findViewById(R.id.message_field);
-        String defaultChangeSet = createDefaultChangeSet(app);
-        messageEditText.setText(defaultChangeSet);
-        messageEditText.setSelection(messageEditText.getText().length());
-        final TextView accountName = sendOsmPoiView.findViewById(R.id.user_name);
-        OsmandSettings settings = app.getSettings();
-        String userNameOAuth = settings.USER_DISPLAY_NAME.get();
-        String userNameOpenID = settings.USER_NAME.get();
-        String userName = isLoginOAuth(settings) ? userNameOAuth : userNameOpenID;
-        accountName.setText(userName);
-        closeChangeSet.setBackgroundResource(isNightMode ? R.drawable.layout_bg_dark : R.drawable.layout_bg);
-        final int paddingSmall = app.getResources().getDimensionPixelSize(R.dimen.content_padding_small);
-        closeChangeSet.setPadding(paddingSmall, 0, paddingSmall, 0);
-        closeChangeSet.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
-            @Override
-            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
-                if (isNightMode) {
-                    closeChangeSet.setBackgroundResource(
-                            isChecked ? R.drawable.layout_bg_dark_solid : R.drawable.layout_bg_dark);
-                } else {
-                    closeChangeSet.setBackgroundResource(
-                            isChecked ? R.drawable.layout_bg_solid : R.drawable.layout_bg);
-                }
-                closeChangeSet.setPadding(paddingSmall, 0, paddingSmall, 0);
-            }
-        });
-        LinearLayout account = sendOsmPoiView.findViewById(R.id.account_container);
-        account.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View v) {
-                FragmentActivity activity = getActivity();
-                if (activity != null) {
-                    showOpenStreetMapScreen(activity);
-                }
-                dismiss();
-            }
-        });
-        final SimpleBottomSheetItem titleItem = (SimpleBottomSheetItem) new SimpleBottomSheetItem.Builder()
-                .setCustomView(sendOsmPoiView)
-                .create();
-        items.add(titleItem);
-    }
+	@Override
+	public void createMenuItems(Bundle savedInstanceState) {
+		OsmandApplication app = getMyApplication();
+		if (app == null) {
+			return;
+		}
+		poi = (OsmPoint[]) getArguments().getSerializable(OPENSTREETMAP_POINT);
+		final boolean isNightMode = app.getDaynightHelper().isNightModeForMapControls();
+		final View sendOsmPoiView = View.inflate(new ContextThemeWrapper(getContext(), themeRes),
+				R.layout.send_poi_fragment, null);
+		sendOsmPoiView.getViewTreeObserver().addOnGlobalLayoutListener(getOnGlobalLayoutListener());
+		closeChangeSet = sendOsmPoiView.findViewById(R.id.close_change_set_checkbox);
+		messageEditText = sendOsmPoiView.findViewById(R.id.message_field);
+		String defaultChangeSet = createDefaultChangeSet(app);
+		messageEditText.setText(defaultChangeSet);
+		messageEditText.setSelection(messageEditText.getText().length());
+		final TextView accountName = sendOsmPoiView.findViewById(R.id.user_name);
+		OsmandSettings settings = app.getSettings();
+		String userNameOAuth = settings.USER_DISPLAY_NAME.get();
+		String userNameOpenID = settings.USER_NAME.get();
+		String userName = isLoginOAuth(settings) ? userNameOAuth : userNameOpenID;
+		accountName.setText(userName);
+		closeChangeSet.setBackgroundResource(isNightMode ? R.drawable.layout_bg_dark : R.drawable.layout_bg);
+		final int paddingSmall = app.getResources().getDimensionPixelSize(R.dimen.content_padding_small);
+		closeChangeSet.setPadding(paddingSmall, 0, paddingSmall, 0);
+		closeChangeSet.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
+			@Override
+			public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
+				if (isNightMode) {
+					closeChangeSet.setBackgroundResource(
+							isChecked ? R.drawable.layout_bg_dark_solid : R.drawable.layout_bg_dark);
+				} else {
+					closeChangeSet.setBackgroundResource(
+							isChecked ? R.drawable.layout_bg_solid : R.drawable.layout_bg);
+				}
+				closeChangeSet.setPadding(paddingSmall, 0, paddingSmall, 0);
+			}
+		});
+		LinearLayout account = sendOsmPoiView.findViewById(R.id.account_container);
+		account.setOnClickListener(new View.OnClickListener() {
+			@Override
+			public void onClick(View v) {
+				FragmentActivity activity = getActivity();
+				if (activity != null) {
+					showOpenStreetMapScreen(activity);
+				}
+				dismiss();
+			}
+		});
+		final SimpleBottomSheetItem titleItem = (SimpleBottomSheetItem) new SimpleBottomSheetItem.Builder()
+				.setCustomView(sendOsmPoiView)
+				.create();
+		items.add(titleItem);
+	}
 
-    public static void showInstance(@NonNull FragmentManager fm, @NonNull OsmPoint[] points) {
-        try {
-            if (!fm.isStateSaved()) {
-                SendPoiBottomSheetFragment fragment = new SendPoiBottomSheetFragment();
-                Bundle bundle = new Bundle();
-                bundle.putSerializable(OPENSTREETMAP_POINT, points);
-                fragment.setArguments(bundle);
-                fragment.show(fm, TAG);
-            }
-        } catch (RuntimeException e) {
-            LOG.error("showInstance", e);
-        }
-    }
+	private ViewTreeObserver.OnGlobalLayoutListener getOnGlobalLayoutListener() {
+		return new ViewTreeObserver.OnGlobalLayoutListener() {
+			@Override
+			public void onGlobalLayout() {
+				Rect visibleDisplayFrame = new Rect();
+				buttonsHeight = getResources().getDimensionPixelSize(R.dimen.dialog_button_ex_max_width);
+				shadowHeight = getResources().getDimensionPixelSize(R.dimen.bottom_sheet_top_shadow_height);
+				scrollView = getView().findViewById(R.id.scroll_view);
+				scrollView.getWindowVisibleDisplayFrame(visibleDisplayFrame);
+				int viewHeight = scrollView.getHeight();
+				int contentHeight = visibleDisplayFrame.bottom - visibleDisplayFrame.top - buttonsHeight;
+				if (contentHeightPrevious != contentHeight) {
+					boolean showTopShadow;
+					showTopShadow = viewHeight + shadowHeight < contentHeight;
+					scrollView.requestLayout();
+					contentHeightPrevious = contentHeight;
+					drawTopShadow(showTopShadow);
+				}
+			}
+		};
+	}
 
-    @Override
-    protected UiUtilities.DialogButtonType getRightBottomButtonType() {
-        return (UiUtilities.DialogButtonType.PRIMARY);
-    }
+	public static void showInstance(@NonNull FragmentManager fm, @NonNull OsmPoint[] points) {
+		try {
+			if (!fm.isStateSaved()) {
+				SendPoiBottomSheetFragment fragment = new SendPoiBottomSheetFragment();
+				Bundle bundle = new Bundle();
+				bundle.putSerializable(OPENSTREETMAP_POINT, points);
+				fragment.setArguments(bundle);
+				fragment.show(fm, TAG);
+			}
+		} catch (RuntimeException e) {
+			LOG.error("showInstance", e);
+		}
+	}
 
-    @Override
-    protected void onRightBottomButtonClick() {
-        ProgressDialogPoiUploader progressDialogPoiUploader = null;
-        Activity activity = getActivity();
-        if (activity instanceof MapActivity) {
-            progressDialogPoiUploader = new SimpleProgressDialogPoiUploader((MapActivity) activity);
-        } else if (getParentFragment() instanceof ProgressDialogPoiUploader) {
-            progressDialogPoiUploader = (ProgressDialogPoiUploader) getParentFragment();
-        }
-        if (progressDialogPoiUploader != null) {
-            String comment = messageEditText.getText().toString();
-            if (comment.length() > 0) {
-                for (OsmPoint osmPoint : poi) {
-                    if (osmPoint.getGroup() == OsmPoint.Group.POI) {
-                        ((OpenstreetmapPoint) osmPoint).setComment(comment);
-                        break;
-                    }
-                }
-            }
-            progressDialogPoiUploader.showProgressDialog(poi, closeChangeSet.isChecked(), false);
-        }
-        dismiss();
-    }
+	@Override
+	protected UiUtilities.DialogButtonType getRightBottomButtonType() {
+		return (UiUtilities.DialogButtonType.PRIMARY);
+	}
 
-    @Override
-    protected int getRightBottomButtonTextId() {
-        return R.string.shared_string_upload;
-    }
+	@Override
+	protected void onRightBottomButtonClick() {
+		ProgressDialogPoiUploader progressDialogPoiUploader = null;
+		Activity activity = getActivity();
+		if (activity instanceof MapActivity) {
+			progressDialogPoiUploader = new SimpleProgressDialogPoiUploader((MapActivity) activity);
+		} else if (getParentFragment() instanceof ProgressDialogPoiUploader) {
+			progressDialogPoiUploader = (ProgressDialogPoiUploader) getParentFragment();
+		}
+		if (progressDialogPoiUploader != null) {
+			String comment = messageEditText.getText().toString();
+			if (comment.length() > 0) {
+				for (OsmPoint osmPoint : poi) {
+					if (osmPoint.getGroup() == OsmPoint.Group.POI) {
+						((OpenstreetmapPoint) osmPoint).setComment(comment);
+						break;
+					}
+				}
+			}
+			progressDialogPoiUploader.showProgressDialog(poi, closeChangeSet.isChecked(), false);
+		}
+		dismiss();
+	}
 
-    private String createDefaultChangeSet(OsmandApplication app) {
-        Map<String, PoiType> allTranslatedSubTypes = app.getPoiTypes().getAllTranslatedNames(true);
-        if (allTranslatedSubTypes == null) {
-            return "";
-        }
-        Map<String, Integer> addGroup = new HashMap<>();
-        Map<String, Integer> editGroup = new HashMap<>();
-        Map<String, Integer> deleteGroup = new HashMap<>();
-        Map<String, Integer> reopenGroup = new HashMap<>();
-        String comment = "";
-        for (OsmPoint p : poi) {
-            if (p.getGroup() == OsmPoint.Group.POI) {
-                OsmPoint.Action action = p.getAction();
-                String type = ((OpenstreetmapPoint) p).getEntity().getTag(Entity.POI_TYPE_TAG);
-                if (type == null) {
-                    continue;
-                }
-                PoiType localizedPoiType = allTranslatedSubTypes.get(type.toLowerCase().trim());
-                if (localizedPoiType != null) {
-                    type = Algorithms.capitalizeFirstLetter(localizedPoiType.getKeyName().replace('_', ' '));
-                }
-                if (action == OsmPoint.Action.CREATE) {
-                    if (!addGroup.containsKey(type)) {
-                        addGroup.put(type, 1);
-                    } else {
-                        addGroup.put(type, addGroup.get(type) + 1);
-                    }
-                } else if (action == OsmPoint.Action.MODIFY) {
-                    if (!editGroup.containsKey(type)) {
-                        editGroup.put(type, 1);
-                    } else {
-                        editGroup.put(type, editGroup.get(type) + 1);
-                    }
-                } else if (action == OsmPoint.Action.DELETE) {
-                    if (!deleteGroup.containsKey(type)) {
-                        deleteGroup.put(type, 1);
-                    } else {
-                        deleteGroup.put(type, deleteGroup.get(type) + 1);
-                    }
-                } else if (action == OsmPoint.Action.REOPEN) {
-                    if (!reopenGroup.containsKey(type)) {
-                        reopenGroup.put(type, 1);
-                    } else {
-                        reopenGroup.put(type, reopenGroup.get(type) + 1);
-                    }
-                }
-            }
-        }
-        int modifiedItemsOutOfLimit = 0;
-        for (int i = 0; i < 4; i++) {
-            String action;
-            Map<String, Integer> group;
-            switch (i) {
-                case 0:
-                    action = getString(R.string.default_changeset_add);
-                    group = addGroup;
-                    break;
-                case 1:
-                    action = getString(R.string.default_changeset_edit);
-                    group = editGroup;
-                    break;
-                case 2:
-                    action = getString(R.string.default_changeset_delete);
-                    group = deleteGroup;
-                    break;
-                case 3:
-                    action = getString(R.string.default_changeset_reopen);
-                    group = reopenGroup;
-                    break;
-                default:
-                    action = "";
-                    group = new HashMap<>();
-            }
+	@Override
+	protected int getRightBottomButtonTextId() {
+		return R.string.shared_string_upload;
+	}
 
-            if (!group.isEmpty()) {
-                int pos = 0;
-                for (Map.Entry<String, Integer> entry : group.entrySet()) {
-                    String type = entry.getKey();
-                    int quantity = entry.getValue();
-                    if (comment.length() > 200) {
-                        modifiedItemsOutOfLimit += quantity;
-                    } else {
-                        if (pos == 0) {
-                            comment = comment.concat(comment.length() == 0 ? "" : "; ").concat(action).concat(" ")
-                                    .concat(quantity == 1 ? "" : quantity + " ").concat(type);
-                        } else {
-                            comment = comment.concat(", ").concat(quantity == 1 ? "" : quantity + " ").concat(type);
-                        }
-                    }
-                    pos++;
-                }
-            }
-        }
-        if (modifiedItemsOutOfLimit != 0) {
-            comment = comment.concat("; ").concat(modifiedItemsOutOfLimit + " ")
-                    .concat(getString(R.string.items_modified)).concat(".");
-        } else if (!comment.isEmpty()) {
-            comment = comment.concat(".");
-        }
-        return comment;
-    }
+	private String createDefaultChangeSet(OsmandApplication app) {
+		Map<String, PoiType> allTranslatedSubTypes = app.getPoiTypes().getAllTranslatedNames(true);
+		if (allTranslatedSubTypes == null) {
+			return "";
+		}
+		Map<String, Integer> addGroup = new HashMap<>();
+		Map<String, Integer> editGroup = new HashMap<>();
+		Map<String, Integer> deleteGroup = new HashMap<>();
+		Map<String, Integer> reopenGroup = new HashMap<>();
+		String comment = "";
+		for (OsmPoint p : poi) {
+			if (p.getGroup() == OsmPoint.Group.POI) {
+				OsmPoint.Action action = p.getAction();
+				String type = ((OpenstreetmapPoint) p).getEntity().getTag(Entity.POI_TYPE_TAG);
+				if (type == null) {
+					continue;
+				}
+				PoiType localizedPoiType = allTranslatedSubTypes.get(type.toLowerCase().trim());
+				if (localizedPoiType != null) {
+					type = Algorithms.capitalizeFirstLetter(localizedPoiType.getKeyName().replace('_', ' '));
+				}
+				if (action == OsmPoint.Action.CREATE) {
+					if (!addGroup.containsKey(type)) {
+						addGroup.put(type, 1);
+					} else {
+						addGroup.put(type, addGroup.get(type) + 1);
+					}
+				} else if (action == OsmPoint.Action.MODIFY) {
+					if (!editGroup.containsKey(type)) {
+						editGroup.put(type, 1);
+					} else {
+						editGroup.put(type, editGroup.get(type) + 1);
+					}
+				} else if (action == OsmPoint.Action.DELETE) {
+					if (!deleteGroup.containsKey(type)) {
+						deleteGroup.put(type, 1);
+					} else {
+						deleteGroup.put(type, deleteGroup.get(type) + 1);
+					}
+				} else if (action == OsmPoint.Action.REOPEN) {
+					if (!reopenGroup.containsKey(type)) {
+						reopenGroup.put(type, 1);
+					} else {
+						reopenGroup.put(type, reopenGroup.get(type) + 1);
+					}
+				}
+			}
+		}
+		int modifiedItemsOutOfLimit = 0;
+		for (int i = 0; i < 4; i++) {
+			String action;
+			Map<String, Integer> group;
+			switch (i) {
+				case 0:
+					action = getString(R.string.default_changeset_add);
+					group = addGroup;
+					break;
+				case 1:
+					action = getString(R.string.default_changeset_edit);
+					group = editGroup;
+					break;
+				case 2:
+					action = getString(R.string.default_changeset_delete);
+					group = deleteGroup;
+					break;
+				case 3:
+					action = getString(R.string.default_changeset_reopen);
+					group = reopenGroup;
+					break;
+				default:
+					action = "";
+					group = new HashMap<>();
+			}
+
+			if (!group.isEmpty()) {
+				int pos = 0;
+				for (Map.Entry<String, Integer> entry : group.entrySet()) {
+					String type = entry.getKey();
+					int quantity = entry.getValue();
+					if (comment.length() > 200) {
+						modifiedItemsOutOfLimit += quantity;
+					} else {
+						if (pos == 0) {
+							comment = comment.concat(comment.length() == 0 ? "" : "; ").concat(action).concat(" ")
+									.concat(quantity == 1 ? "" : quantity + " ").concat(type);
+						} else {
+							comment = comment.concat(", ").concat(quantity == 1 ? "" : quantity + " ").concat(type);
+						}
+					}
+					pos++;
+				}
+			}
+		}
+		if (modifiedItemsOutOfLimit != 0) {
+			comment = comment.concat("; ").concat(modifiedItemsOutOfLimit + " ")
+					.concat(getString(R.string.items_modified)).concat(".");
+		} else if (!comment.isEmpty()) {
+			comment = comment.concat(".");
+		}
+		return comment;
+	}
 }
 
diff --git a/OsmAnd/src/net/osmand/plus/settings/bottomsheets/OsmLoginDataBottomSheet.java b/OsmAnd/src/net/osmand/plus/settings/bottomsheets/OsmLoginDataBottomSheet.java
index 622fc119772..6db09d9f36a 100644
--- a/OsmAnd/src/net/osmand/plus/settings/bottomsheets/OsmLoginDataBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/settings/bottomsheets/OsmLoginDataBottomSheet.java
@@ -1,11 +1,14 @@
 package net.osmand.plus.settings.bottomsheets;
 
 import android.content.Context;
+import android.graphics.Rect;
 import android.os.AsyncTask;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
+import android.view.ViewTreeObserver;
 import android.widget.EditText;
+import android.widget.ScrollView;
 
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
@@ -34,6 +37,11 @@ public class OsmLoginDataBottomSheet extends BasePreferenceBottomSheet {
 	private EditText userNameEditText;
 	private EditText passwordEditText;
 
+	private int contentHeightPrevious = 0;
+	private int buttonsHeight;
+	private int shadowHeight;
+	private ScrollView scrollView;
+
 	@Override
 	public void createMenuItems(Bundle savedInstanceState) {
 		Context context = getContext();
@@ -73,6 +81,28 @@ public void createMenuItems(Bundle savedInstanceState) {
 		items.add(titleItem);
 	}
 
+	private ViewTreeObserver.OnGlobalLayoutListener getOnGlobalLayoutListener() {
+		return new ViewTreeObserver.OnGlobalLayoutListener() {
+			@Override
+			public void onGlobalLayout() {
+				Rect visibleDisplayFrame = new Rect();
+				buttonsHeight = getResources().getDimensionPixelSize(R.dimen.dialog_button_ex_max_width);
+				shadowHeight = getResources().getDimensionPixelSize(R.dimen.bottom_sheet_top_shadow_height);
+				scrollView = getView().findViewById(R.id.scroll_view);
+				scrollView.getWindowVisibleDisplayFrame(visibleDisplayFrame);
+				int viewHeight = scrollView.getHeight();
+				int contentHeight = visibleDisplayFrame.bottom - visibleDisplayFrame.top - buttonsHeight;
+				if (contentHeightPrevious != contentHeight) {
+					boolean showTopShadow;
+					showTopShadow = viewHeight + shadowHeight < contentHeight;
+					scrollView.requestLayout();
+					contentHeightPrevious = contentHeight;
+					drawTopShadow(showTopShadow);
+				}
+			}
+		};
+	}
+
 	@Override
 	public void onSaveInstanceState(@NonNull Bundle outState) {
 		super.onSaveInstanceState(outState);
@@ -107,7 +137,7 @@ protected void onRightBottomButtonClick() {
 	}
 
 	public static boolean showInstance(@NonNull FragmentManager fragmentManager, String key, Fragment target,
-	                                   boolean usedOnMap, @Nullable ApplicationMode appMode) {
+									   boolean usedOnMap, @Nullable ApplicationMode appMode) {
 		try {
 			Bundle args = new Bundle();
 			args.putString(PREFERENCE_ID, key);
