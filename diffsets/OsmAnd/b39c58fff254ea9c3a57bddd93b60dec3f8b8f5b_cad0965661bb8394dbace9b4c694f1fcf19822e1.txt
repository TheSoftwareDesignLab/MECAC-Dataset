diff --git a/OsmAnd/res/layout/card_multi_state.xml b/OsmAnd/res/layout/card_multi_state.xml
index 0e46e00a951..63002473c19 100644
--- a/OsmAnd/res/layout/card_multi_state.xml
+++ b/OsmAnd/res/layout/card_multi_state.xml
@@ -3,6 +3,7 @@
 	xmlns:tools="http://schemas.android.com/tools"
 	android:layout_width="match_parent"
 	android:layout_height="wrap_content"
+	android:background="?attr/list_background_color"
 	android:orientation="vertical">
 
 	<LinearLayout
@@ -50,9 +51,9 @@
 				android:layout_height="@dimen/standard_icon_size"
 				android:layout_gravity="center_vertical"
 				android:layout_marginStart="@dimen/dashFavIconMargin"
-				android:scaleType="center"
-				android:duplicateParentState="true"
 				android:clickable="false"
+				android:duplicateParentState="true"
+				android:scaleType="center"
 				android:src="@drawable/ic_action_arrow_down"
 				android:tint="?attr/default_icon_color" />
 
diff --git a/OsmAnd/res/layout/fragment_tracks_default_appearance.xml b/OsmAnd/res/layout/fragment_tracks_default_appearance.xml
new file mode 100644
index 00000000000..ffe36b7ab4c
--- /dev/null
+++ b/OsmAnd/res/layout/fragment_tracks_default_appearance.xml
@@ -0,0 +1,112 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:osmand="http://schemas.android.com/apk/res-auto"
+	android:layout_width="match_parent"
+	android:layout_height="match_parent"
+	android:background="?attr/activity_background_color"
+	android:clickable="true"
+	android:focusable="true">
+
+	<FrameLayout
+		android:layout_width="match_parent"
+		android:layout_height="match_parent"
+		osmand:layout_behavior="@string/appbar_scrolling_view_behavior">
+
+		<androidx.core.widget.NestedScrollView
+			android:id="@+id/scroll_view"
+			android:layout_width="match_parent"
+			android:layout_height="match_parent"
+			android:fillViewport="true"
+			android:overScrollMode="never">
+
+			<LinearLayout
+				android:layout_width="match_parent"
+				android:layout_height="wrap_content"
+				android:orientation="vertical">
+
+				<LinearLayout
+					android:id="@+id/cards_container"
+					android:layout_width="match_parent"
+					android:layout_height="wrap_content"
+					android:orientation="vertical" />
+
+				<include layout="@layout/card_bottom_divider" />
+
+				<View
+					android:layout_width="match_parent"
+					android:layout_height="@dimen/fab_margin_bottom_big" />
+
+			</LinearLayout>
+
+		</androidx.core.widget.NestedScrollView>
+
+	</FrameLayout>
+
+	<LinearLayout
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_gravity="bottom"
+		android:orientation="vertical">
+
+		<androidx.appcompat.widget.AppCompatImageView
+			android:id="@+id/buttons_shadow"
+			android:layout_width="match_parent"
+			android:layout_height="@dimen/abp__shadow_height"
+			android:scaleType="fitXY"
+			osmand:srcCompat="@drawable/bg_shadow_list_top" />
+
+		<FrameLayout
+			android:id="@+id/buttons_container"
+			android:layout_width="match_parent"
+			android:layout_height="@dimen/dialog_button_ex_height"
+			android:background="?attr/list_background_color"
+			android:paddingHorizontal="@dimen/content_padding">
+
+			<net.osmand.plus.widgets.dialogbutton.DialogButton
+				android:id="@+id/apply_button"
+				android:layout_width="match_parent"
+				android:layout_height="wrap_content"
+				android:layout_gravity="center_vertical"
+				osmand:dialogButtonTitle="@string/shared_string_apply"
+				osmand:dialogButtonType="primary" />
+
+		</FrameLayout>
+
+	</LinearLayout>
+
+	<com.google.android.material.appbar.AppBarLayout
+		android:id="@+id/appbar"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:background="@android:color/transparent"
+		android:stateListAnimator="@animator/appbar_always_elevated">
+
+		<com.google.android.material.appbar.CollapsingToolbarLayout
+			android:id="@+id/toolbar_layout"
+			android:layout_width="match_parent"
+			android:layout_height="@dimen/toolbar_height_expanded_large"
+			android:background="?attr/actionModeBackground"
+			osmand:collapsedTitleTextAppearance="@style/AppBarTitle"
+			osmand:expandedTitleGravity="start|bottom"
+			osmand:expandedTitleMarginBottom="@dimen/content_padding_small"
+			osmand:expandedTitleMarginEnd="@dimen/content_padding"
+			osmand:expandedTitleMarginStart="@dimen/content_padding"
+			osmand:expandedTitleTextAppearance="@style/AppBarTitle"
+			osmand:layout_scrollFlags="scroll|exitUntilCollapsed">
+
+			<androidx.appcompat.widget.Toolbar
+				android:id="@+id/toolbar"
+				android:layout_width="match_parent"
+				android:layout_height="@dimen/toolbar_height"
+				android:minHeight="@dimen/toolbar_height"
+				osmand:layout_collapseMode="pin"
+				osmand:layout_scrollFlags="scroll|enterAlways|exitUntilCollapsed"
+				osmand:title="@string/default_appearance"
+				osmand:titleMarginEnd="0dp"
+				osmand:titleMarginStart="0dp" />
+
+		</com.google.android.material.appbar.CollapsingToolbarLayout>
+
+	</com.google.android.material.appbar.AppBarLayout>
+
+</androidx.coordinatorlayout.widget.CoordinatorLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index d961b3467fa..59ae85154b8 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -11,6 +11,7 @@
 	Thx - Hardy
 -->
 
+    <string name="change_default_appearance_confirmation">Change the default appearance of %1$s?</string>
     <string name="fix_north_up">Enable Fixed North Up</string>
     <string name="fix_north_up_descr">Do not rotate map with gestures in North Up map orientation</string>
     <string name="unchanged_parameter_summary">Each track will retain its own parameters.</string>
diff --git a/OsmAnd/src/net/osmand/plus/card/base/multistate/BaseMultiStateCardController.java b/OsmAnd/src/net/osmand/plus/card/base/multistate/BaseMultiStateCardController.java
index aff28b634e7..83310551e69 100644
--- a/OsmAnd/src/net/osmand/plus/card/base/multistate/BaseMultiStateCardController.java
+++ b/OsmAnd/src/net/osmand/plus/card/base/multistate/BaseMultiStateCardController.java
@@ -21,61 +21,59 @@ public abstract class BaseMultiStateCardController implements IMultiStateCardCon
 
 	protected final OsmandApplication app;
 
-	protected IMultiStateCard cardInstance;
-	protected List<CardState> supportedCardStates;
-	protected CardState selectedCardState;
+	protected IMultiStateCard card;
+	protected List<CardState> states;
+	protected CardState selectedState;
 
-	public BaseMultiStateCardController(@NonNull OsmandApplication app,
-	                                    @Nullable Object selectedStateTag) {
+	public BaseMultiStateCardController(@NonNull OsmandApplication app) {
 		this.app = app;
-		this.selectedCardState = findCardState(selectedStateTag);
 	}
 
 	@Override
-	public void bindComponent(@NonNull IMultiStateCard cardInstance) {
-		this.cardInstance = cardInstance;
+	public void bindComponent(@NonNull IMultiStateCard card) {
+		this.card = card;
 	}
 
 	@Override
-	public void onSelectorButtonClicked(@NonNull View selectorView) {
-		boolean nightMode = cardInstance.isNightMode();
-		List<PopUpMenuItem> menuItems = new ArrayList<>();
-		for (CardState cardState : getSupportedCardStates()) {
-			int titleColor = isCardStateAvailable(cardState)
-					? getPrimaryTextColor(app, nightMode)
-					: getDisabledTextColor(app, nightMode);
-			menuItems.add(new PopUpMenuItem.Builder(app)
-					.setTitle(cardState.toHumanString(app))
-					.showTopDivider(cardState.isShowTopDivider())
-					.setTitleColor(titleColor)
-					.setTag(cardState)
+	public void onSelectorButtonClicked(@NonNull View view) {
+		boolean nightMode = card.isNightMode();
+		List<PopUpMenuItem> items = new ArrayList<>();
+		for (CardState state : getCardStates()) {
+			boolean available = isCardStateAvailable(state);
+			int color = available ? getPrimaryTextColor(app, nightMode) : getDisabledTextColor(app, nightMode);
+
+			items.add(new PopUpMenuItem.Builder(app)
+					.setTitle(state.toHumanString(app))
+					.showTopDivider(state.isShowTopDivider())
+					.setTitleColor(color)
+					.setTag(state)
 					.create()
 			);
 		}
-		PopUpMenuDisplayData displayData = new PopUpMenuDisplayData();
-		displayData.anchorView = selectorView;
-		displayData.menuItems = menuItems;
-		displayData.nightMode = nightMode;
-		displayData.onItemClickListener = item -> onSelectCardState((CardState) item.getTag());
-		PopUpMenu.show(displayData);
+		PopUpMenuDisplayData data = new PopUpMenuDisplayData();
+		data.anchorView = view;
+		data.menuItems = items;
+		data.nightMode = nightMode;
+		data.onItemClickListener = item -> onSelectCardState((CardState) item.getTag());
+		PopUpMenu.show(data);
 	}
 
 	@NonNull
-	protected List<CardState> getSupportedCardStates() {
-		if (supportedCardStates == null) {
-			supportedCardStates = collectSupportedCardStates();
+	protected List<CardState> getCardStates() {
+		if (states == null) {
+			states = collectSupportedCardStates();
 		}
-		return supportedCardStates;
+		return states;
 	}
 
 	@NonNull
 	protected CardState findCardState(@Nullable Object tag) {
-		for (CardState cardState : getSupportedCardStates()) {
+		for (CardState cardState : getCardStates()) {
 			if (Objects.equals(tag, cardState.getTag())) {
 				return cardState;
 			}
 		}
-		return supportedCardStates.get(0);
+		return states.get(0);
 	}
 
 	protected boolean isCardStateAvailable(@NonNull CardState cardState) {
diff --git a/OsmAnd/src/net/osmand/plus/card/base/multistate/CardState.java b/OsmAnd/src/net/osmand/plus/card/base/multistate/CardState.java
index 5658d128f10..a5a0556fb47 100644
--- a/OsmAnd/src/net/osmand/plus/card/base/multistate/CardState.java
+++ b/OsmAnd/src/net/osmand/plus/card/base/multistate/CardState.java
@@ -6,6 +6,8 @@
 import androidx.annotation.Nullable;
 import androidx.annotation.StringRes;
 
+import net.osmand.plus.R;
+
 public class CardState {
 
 	private final static int INVALID_ID = -1;
@@ -26,6 +28,11 @@ public CardState(@StringRes int titleId) {
 		this.title = null;
 	}
 
+	@StringRes
+	public int getTitleId() {
+		return titleId;
+	}
+
 	@NonNull
 	public String toHumanString(@NonNull Context context) {
 		return title != null ? title : context.getString(titleId);
@@ -51,4 +58,8 @@ public CardState setShowTopDivider(boolean showTopDivider) {
 		this.showTopDivider = showTopDivider;
 		return this;
 	}
+
+	public boolean isOriginal() {
+		return titleId == R.string.shared_string_original;
+	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/card/base/multistate/MultiStateCard.java b/OsmAnd/src/net/osmand/plus/card/base/multistate/MultiStateCard.java
index de21547acb4..fd6bb33f088 100644
--- a/OsmAnd/src/net/osmand/plus/card/base/multistate/MultiStateCard.java
+++ b/OsmAnd/src/net/osmand/plus/card/base/multistate/MultiStateCard.java
@@ -15,13 +15,11 @@ public class MultiStateCard extends BaseCard implements IMultiStateCard {
 
 	protected final IMultiStateCardController controller;
 
-	public MultiStateCard(@NonNull FragmentActivity activity,
-	                      @NonNull IMultiStateCardController cardController) {
-		this(activity, cardController, true);
+	public MultiStateCard(@NonNull FragmentActivity activity, @NonNull IMultiStateCardController controller) {
+		this(activity, controller, true);
 	}
 
-	public MultiStateCard(@NonNull FragmentActivity activity,
-	                      @NonNull IMultiStateCardController controller, boolean usedOnMap) {
+	public MultiStateCard(@NonNull FragmentActivity activity, @NonNull IMultiStateCardController controller, boolean usedOnMap) {
 		super(activity, usedOnMap);
 		this.controller = controller;
 		controller.bindComponent(this);
diff --git a/OsmAnd/src/net/osmand/plus/card/base/slider/moded/ModedSliderCard.java b/OsmAnd/src/net/osmand/plus/card/base/slider/moded/ModedSliderCard.java
index c0a3d7e9336..1141f4d609a 100644
--- a/OsmAnd/src/net/osmand/plus/card/base/slider/moded/ModedSliderCard.java
+++ b/OsmAnd/src/net/osmand/plus/card/base/slider/moded/ModedSliderCard.java
@@ -9,6 +9,7 @@
 import net.osmand.plus.R;
 import net.osmand.plus.card.base.slider.SliderCard;
 import net.osmand.plus.card.base.slider.moded.data.SliderMode;
+import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.widgets.multistatetoggle.IconToggleButton;
 import net.osmand.plus.widgets.multistatetoggle.IconToggleButton.IconRadioItem;
 import net.osmand.plus.widgets.multistatetoggle.RadioItem;
@@ -93,6 +94,6 @@ private void updateSegmentedButtonContentColor() {
 
 	@Override
 	public void updateSliderVisibility() {
-		updateVisibility(R.id.slider_component_container, controller.isSliderVisible());
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.slider_component_container), controller.isSliderVisible());
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/card/color/ColoringStyleCardController.java b/OsmAnd/src/net/osmand/plus/card/color/ColoringStyleCardController.java
index 8f0839e3361..a8b238d03d8 100644
--- a/OsmAnd/src/net/osmand/plus/card/color/ColoringStyleCardController.java
+++ b/OsmAnd/src/net/osmand/plus/card/color/ColoringStyleCardController.java
@@ -22,9 +22,8 @@ public abstract class ColoringStyleCardController extends BaseMultiStateCardCont
 
 	private IColorCardControllerListener externalListener;
 
-	public ColoringStyleCardController(@NonNull OsmandApplication app,
-	                                   @Nullable ColoringStyle selectedColoringStyle) {
-		super(app, selectedColoringStyle);
+	public ColoringStyleCardController(@NonNull OsmandApplication app) {
+		super(app);
 	}
 
 	public void setListener(@NonNull IColorCardControllerListener externalListener) {
@@ -45,7 +44,7 @@ public String getCardTitle() {
 	@NonNull
 	@Override
 	public String getCardStateSelectorTitle() {
-		return selectedCardState.toHumanString(app);
+		return selectedState.toHumanString(app);
 	}
 
 	@Override
@@ -62,19 +61,19 @@ public ColoringStyle requireSelectedColoringStyle() {
 
 	@Nullable
 	public ColoringStyle getSelectedColoringStyle() {
-		return (ColoringStyle) selectedCardState.getTag();
+		return (ColoringStyle) selectedState.getTag();
 	}
 
 	public void askSelectColoringStyle(@Nullable ColoringStyle coloringStyle) {
-		ColoringStyle selectedColoringStyle = (ColoringStyle) selectedCardState.getTag();
+		ColoringStyle selectedColoringStyle = (ColoringStyle) selectedState.getTag();
 		if (!Objects.equals(selectedColoringStyle, coloringStyle)) {
-			selectedCardState = findCardState(coloringStyle);
+			selectedState = findCardState(coloringStyle);
 			onColoringStyleSelected(coloringStyle);
 		}
 	}
 
 	protected void onColoringStyleSelected(@Nullable ColoringStyle coloringStyle) {
-		cardInstance.updateSelectedCardState();
+		card.updateSelectedCardState();
 		externalListener.onColoringStyleSelected(coloringStyle);
 	}
 
@@ -117,5 +116,5 @@ protected List<String> collectRouteInfoAttributes() {
 	protected abstract ColoringType[] getSupportedColoringTypes();
 
 	public interface IColorCardControllerListener
-			extends OnSelectColoringStyleListener, OnColorsPaletteListener { }
+			extends OnSelectColoringStyleListener, OnColorsPaletteListener {}
 }
diff --git a/OsmAnd/src/net/osmand/plus/card/color/cstyle/ColoringStyleDetailsCard.java b/OsmAnd/src/net/osmand/plus/card/color/cstyle/ColoringStyleDetailsCard.java
index 6bd775a75e2..ccc1d41c2a8 100644
--- a/OsmAnd/src/net/osmand/plus/card/color/cstyle/ColoringStyleDetailsCard.java
+++ b/OsmAnd/src/net/osmand/plus/card/color/cstyle/ColoringStyleDetailsCard.java
@@ -6,6 +6,7 @@
 import androidx.fragment.app.FragmentActivity;
 
 import net.osmand.plus.R;
+import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.routepreparationmenu.cards.BaseCard;
 
 public class ColoringStyleDetailsCard extends BaseCard {
@@ -38,11 +39,10 @@ protected void updateContent() {
 		}
 		updateVisibility(true);
 
-		updateVisibility(R.id.upper_space, controller.shouldShowUpperSpace());
-		updateVisibility(R.id.bottom_space, controller.shouldShowBottomSpace());
-
-		updateVisibility(R.id.slope_legend, controller.shouldShowSlopeLegend());
-		updateVisibility(R.id.speed_altitude_legend, controller.shouldShowSpeedAltitudeLegend());
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.upper_space), controller.shouldShowUpperSpace());
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.bottom_space), controller.shouldShowBottomSpace());
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.slope_legend), controller.shouldShowSlopeLegend());
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.speed_altitude_legend), controller.shouldShowSpeedAltitudeLegend());
 
 		updateDescription();
 		updateLegend();
@@ -54,7 +54,7 @@ private void updateDescription() {
 		if (description != null) {
 			tvDescription.setText(description);
 		}
-		updateVisibility(tvDescription, description != null);
+		AndroidUiHelper.updateVisibility(tvDescription, description != null);
 	}
 
 	private void updateLegend() {
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/AppearanceConfirmationBottomSheet.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/ConfirmChangesBottomSheet.java
similarity index 56%
rename from OsmAnd/src/net/osmand/plus/configmap/tracks/AppearanceConfirmationBottomSheet.java
rename to OsmAnd/src/net/osmand/plus/configmap/tracks/ConfirmChangesBottomSheet.java
index ecf6942cbf7..1c356dfbc93 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/AppearanceConfirmationBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/ConfirmChangesBottomSheet.java
@@ -5,6 +5,7 @@
 import android.os.Bundle;
 
 import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
 import androidx.fragment.app.Fragment;
 import androidx.fragment.app.FragmentManager;
 
@@ -14,19 +15,18 @@
 import net.osmand.plus.base.bottomsheetmenu.simpleitems.TitleItem;
 import net.osmand.plus.utils.AndroidUtils;
 
-public class AppearanceConfirmationBottomSheet extends MenuBottomSheetDialogFragment {
+public class ConfirmChangesBottomSheet extends MenuBottomSheetDialogFragment {
 
-	public static final String TAG = AppearanceConfirmationBottomSheet.class.getSimpleName();
+	public static final String TAG = ConfirmChangesBottomSheet.class.getSimpleName();
 
-	private static final String ITEMS_COUNT_KEY = "items_count";
+	private static final String DESCRIPTION_KEY = "description_key";
 
 	@Override
 	public void createMenuItems(Bundle savedInstanceState) {
 		items.add(new TitleItem(getString(R.string.shared_string_apply_changes)));
 
-		int count = getItemsCount();
 		items.add(new BottomSheetItemWithDescription.Builder()
-				.setDescription(getString(R.string.change_default_tracks_appearance_confirmation_description, String.valueOf(count)))
+				.setDescription(getDescription())
 				.setDescriptionColorId(getPrimaryTextColorId(nightMode))
 				.setLayoutId(R.layout.bottom_sheet_item_descr)
 				.create());
@@ -35,8 +35,8 @@ public void createMenuItems(Bundle savedInstanceState) {
 	@Override
 	protected void onRightBottomButtonClick() {
 		Fragment fragment = getParentFragment();
-		if (fragment instanceof OnAppearanceChangeConfirmedListener) {
-			((OnAppearanceChangeConfirmedListener) fragment).onAppearanceChangeConfirmed();
+		if (fragment instanceof ChangesConfirmationListener) {
+			((ChangesConfirmationListener) fragment).onChangesConfirmed();
 		}
 		dismiss();
 	}
@@ -46,21 +46,23 @@ protected int getRightBottomButtonTextId() {
 		return R.string.shared_string_apply;
 	}
 
-	private int getItemsCount() {
-		Bundle arguments = getArguments();
-		return arguments != null ? arguments.getInt(ITEMS_COUNT_KEY, 0) : 0;
+	@Nullable
+	private String getDescription() {
+		Bundle bundle = getArguments();
+		return bundle != null ? bundle.getString(DESCRIPTION_KEY) : null;
 	}
 
-	public interface OnAppearanceChangeConfirmedListener {
-		void onAppearanceChangeConfirmed();
+	public interface ChangesConfirmationListener {
+		void onChangesConfirmed();
 	}
 
-	public static void showInstance(@NonNull FragmentManager manager, int itemsCount) {
+	public static void showInstance(@NonNull FragmentManager manager, @NonNull String description) {
 		if (AndroidUtils.isFragmentCanBeAdded(manager, TAG)) {
-			AppearanceConfirmationBottomSheet fragment = new AppearanceConfirmationBottomSheet();
-			Bundle arguments = new Bundle();
-			arguments.putInt(ITEMS_COUNT_KEY, itemsCount);
-			fragment.setArguments(arguments);
+			Bundle bundle = new Bundle();
+			bundle.putString(DESCRIPTION_KEY, description);
+
+			ConfirmChangesBottomSheet fragment = new ConfirmChangesBottomSheet();
+			fragment.setArguments(bundle);
 			fragment.setUsedOnMap(true);
 			fragment.show(manager, TAG);
 		}
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/TracksAppearanceFragment.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/TracksAppearanceFragment.java
index 07b3d8c1d25..59e7220b67d 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/TracksAppearanceFragment.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/TracksAppearanceFragment.java
@@ -32,10 +32,11 @@
 import net.osmand.plus.card.base.headed.HeadedContentCard;
 import net.osmand.plus.card.base.multistate.MultiStateCard;
 import net.osmand.plus.card.color.ColoringStyle;
+import net.osmand.plus.card.color.ColoringStyleCardController.IColorCardControllerListener;
 import net.osmand.plus.card.color.palette.main.IColorsPaletteController;
 import net.osmand.plus.card.color.palette.main.data.PaletteColor;
 import net.osmand.plus.card.width.WidthComponentController;
-import net.osmand.plus.configmap.tracks.AppearanceConfirmationBottomSheet.OnAppearanceChangeConfirmedListener;
+import net.osmand.plus.configmap.tracks.ConfirmChangesBottomSheet.ChangesConfirmationListener;
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.inapp.InAppPurchaseHelper.InAppPurchaseListener;
 import net.osmand.plus.myplaces.tracks.ItemsSelectionHelper;
@@ -52,7 +53,6 @@
 import net.osmand.plus.track.fragments.SplitIntervalBottomSheet;
 import net.osmand.plus.track.fragments.TrackAppearanceFragment.OnNeedScrollListener;
 import net.osmand.plus.track.fragments.controller.TrackColorController;
-import net.osmand.plus.card.color.ColoringStyleCardController.IColorCardControllerListener;
 import net.osmand.plus.track.fragments.controller.TrackWidthController;
 import net.osmand.plus.track.fragments.controller.TrackWidthController.ITrackWidthSelectedListener;
 import net.osmand.plus.utils.AndroidUtils;
@@ -66,7 +66,7 @@
 
 public class TracksAppearanceFragment extends BaseOsmAndDialogFragment
 		implements CardListener, IColorCardControllerListener, ITrackWidthSelectedListener,
-		InAppPurchaseListener, SelectionHelperProvider<TrackItem>, OnAppearanceChangeConfirmedListener {
+		InAppPurchaseListener, SelectionHelperProvider<TrackItem>, ChangesConfirmationListener {
 
 	private static final String TAG = TracksAppearanceFragment.class.getSimpleName();
 
@@ -219,7 +219,9 @@ private void setupButtons(@NonNull View view) {
 		applyButton = view.findViewById(R.id.right_bottom_button);
 		applyButton.setOnClickListener(v -> {
 			ItemsSelectionHelper<TrackItem> helper = getSelectionHelper();
-			AppearanceConfirmationBottomSheet.showInstance(getChildFragmentManager(), helper.getSelectedItemsSize());
+			String count = String.valueOf(helper.getSelectedItemsSize());
+			String description = getString(R.string.change_default_tracks_appearance_confirmation_description, count);
+			ConfirmChangesBottomSheet.showInstance(getChildFragmentManager(), description);
 		});
 		applyButton.setButtonType(PRIMARY);
 		applyButton.setTitleId(R.string.shared_string_apply);
@@ -298,7 +300,7 @@ public ItemsSelectionHelper<TrackItem> getSelectionHelper() {
 	}
 
 	@Override
-	public void onAppearanceChangeConfirmed() {
+	public void onChangesConfirmed() {
 		saveTracksAppearance();
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/ChangeAppearanceController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/ChangeAppearanceController.java
index 363eb75c85f..57e869e01bf 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/ChangeAppearanceController.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/ChangeAppearanceController.java
@@ -1,75 +1,80 @@
 package net.osmand.plus.configmap.tracks.appearance;
 
+import static net.osmand.gpx.GpxParameter.COLOR;
+import static net.osmand.gpx.GpxParameter.COLORING_TYPE;
+
+import android.os.AsyncTask;
+
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.fragment.app.Fragment;
 import androidx.fragment.app.FragmentActivity;
 
+import net.osmand.gpx.GpxParameter;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.base.dialog.DialogManager;
+import net.osmand.plus.base.dialog.interfaces.controller.IDialogController;
 import net.osmand.plus.card.color.ColoringStyle;
 import net.osmand.plus.card.color.ColoringStyleCardController.IColorCardControllerListener;
 import net.osmand.plus.card.color.palette.main.data.PaletteColor;
 import net.osmand.plus.configmap.tracks.TrackItem;
 import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData;
-import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData.OnAppearanceModifiedListener;
-import net.osmand.plus.configmap.tracks.appearance.subcontrollers.DirectionArrowsCardController;
-import net.osmand.plus.configmap.tracks.appearance.subcontrollers.SplitMarksCardController;
-import net.osmand.plus.configmap.tracks.appearance.subcontrollers.StartFinishCardController;
+import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData.AppearanceChangedListener;
+import net.osmand.plus.configmap.tracks.appearance.subcontrollers.ArrowsCardController;
 import net.osmand.plus.configmap.tracks.appearance.subcontrollers.ColorCardController;
+import net.osmand.plus.configmap.tracks.appearance.subcontrollers.SplitCardController;
+import net.osmand.plus.configmap.tracks.appearance.subcontrollers.StartFinishCardController;
 import net.osmand.plus.configmap.tracks.appearance.subcontrollers.WidthCardController;
 import net.osmand.plus.configmap.tracks.appearance.tasks.ChangeAppearanceTask;
-import net.osmand.plus.track.fragments.controller.TrackWidthController.ITrackWidthSelectedListener;
+import net.osmand.util.Algorithms;
 
-import java.util.Objects;
 import java.util.Set;
 
-public class ChangeAppearanceController implements IChangeAppearanceController,
-		IColorCardControllerListener, ITrackWidthSelectedListener, OnAppearanceModifiedListener {
+public class ChangeAppearanceController implements IDialogController, IColorCardControllerListener,
+		AppearanceChangedListener {
 
 	public static final String PROCESS_ID = "change_tracks_appearance";
 
 	private final OsmandApplication app;
 
-	private final DirectionArrowsCardController directionArrowsCardController;
+	private final ArrowsCardController arrowsCardController;
 	private final StartFinishCardController showStartAndFinishIconsCardController;
 	private final ColorCardController colorCardController;
 	private final WidthCardController widthCardController;
-	private final SplitMarksCardController splitMarksCardController;
+	private final SplitCardController splitCardController;
 
-	private final AppearanceData initialAppearanceData;
-	private final AppearanceData appearanceData;
-	private final Set<TrackItem> selectedTrackItems;
+	private final AppearanceData data;
+	private final AppearanceData initialData;
+	private final Set<TrackItem> items;
 	private boolean isAppearanceSaved = false;
 
-	private ChangeAppearanceController(@NonNull OsmandApplication app,
-	                                   @NonNull Set<TrackItem> trackItems) {
+	private ChangeAppearanceController(@NonNull OsmandApplication app, @NonNull Set<TrackItem> items) {
 		this.app = app;
-		this.selectedTrackItems = trackItems;
-		this.initialAppearanceData = new AppearanceData();
-		this.appearanceData = new AppearanceData(initialAppearanceData).setModifiedListener(this);
+		this.items = items;
+		this.initialData = buildAppearanceData();
+		this.data = new AppearanceData(initialData).setListener(this);
 
-		directionArrowsCardController = new DirectionArrowsCardController(app, appearanceData);
-		showStartAndFinishIconsCardController = new StartFinishCardController(app, appearanceData);
-		splitMarksCardController = new SplitMarksCardController(app, appearanceData);
+		arrowsCardController = new ArrowsCardController(app, data, true);
+		showStartAndFinishIconsCardController = new StartFinishCardController(app, data, true);
 
-		colorCardController = new ColorCardController(app, appearanceData);
+		colorCardController = new ColorCardController(app, data, true);
 		colorCardController.setListener(this);
 
-		widthCardController = new WidthCardController(app, appearanceData);
-		widthCardController.setListener(this);
+		widthCardController = new WidthCardController(app, data, true);
 		widthCardController.setControlsColorProvider(colorCardController);
+
+		splitCardController = new SplitCardController(app, data, true);
 	}
 
 	@Override
 	public void onColoringStyleSelected(@Nullable ColoringStyle coloringStyle) {
-		appearanceData.setColoringStyle(coloringStyle);
+		data.setParameter(COLORING_TYPE, coloringStyle != null ? coloringStyle.getId() : null);
 		updateColorItems();
 	}
 
 	@Override
 	public void onColorSelectedFromPalette(@NonNull PaletteColor paletteColor) {
-		appearanceData.setCustomColor(paletteColor.getColor());
+		data.setParameter(COLOR, paletteColor.getColor());
 		updateColorItems();
 	}
 
@@ -77,42 +82,40 @@ private void updateColorItems() {
 		widthCardController.updateColorItems();
 	}
 
-	@Override
 	public boolean hasAnyChangesToCommit() {
-		return !Objects.equals(initialAppearanceData, appearanceData);
+		return !Algorithms.objectEquals(initialData, data);
 	}
 
-	@Override
 	public void saveChanges(@NonNull FragmentActivity activity) {
 		colorCardController.getColorsPaletteController().refreshLastUsedTime();
-		ChangeAppearanceTask.execute(activity, appearanceData, selectedTrackItems, result -> {
+
+		ChangeAppearanceTask task = new ChangeAppearanceTask(activity, data, items, result -> {
 			isAppearanceSaved = true;
 			onAppearanceSaved();
 			return true;
 		});
+		task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
 	}
 
 	private void onAppearanceSaved() {
 		app.getDialogManager().askDismissDialog(PROCESS_ID);
 	}
 
-	@Override
 	public int getEditedItemsCount() {
-		return selectedTrackItems.size();
+		return items.size();
 	}
 
-	@Override
 	public boolean isAppearanceSaved() {
 		return isAppearanceSaved;
 	}
 
 	@NonNull
-	public DirectionArrowsCardController getDirectionArrowsCardController() {
-		return directionArrowsCardController;
+	public ArrowsCardController getArrowsCardController() {
+		return arrowsCardController;
 	}
 
 	@NonNull
-	public StartFinishCardController getShowStartAndFinishIconsCardController() {
+	public StartFinishCardController getStartAndFinishIconsCardController() {
 		return showStartAndFinishIconsCardController;
 	}
 
@@ -127,26 +130,28 @@ public WidthCardController getWidthCardController() {
 	}
 
 	@NonNull
-	public SplitMarksCardController getSplitMarksCardController() {
-		return splitMarksCardController;
+	public SplitCardController getSplitCardController() {
+		return splitCardController;
 	}
 
 	@Override
-	public void onAppearanceModified() {
+	public void onAppearanceChanged() {
 		app.getDialogManager().askRefreshDialogCompletely(PROCESS_ID);
 	}
 
-	@Override
-	public void onTrackWidthSelected(@Nullable String width) {
-
+	@NonNull
+	private AppearanceData buildAppearanceData() {
+		AppearanceData data = new AppearanceData();
+		for (GpxParameter parameter : GpxParameter.getAppearanceParameters()) {
+			data.setParameter(parameter, null);
+		}
+		return data;
 	}
 
-	public static void showDialog(@NonNull FragmentActivity activity,
-	                              @NonNull Fragment targetFragment,
-	                              @NonNull Set<TrackItem> selectedItems) {
+	public static void showDialog(@NonNull FragmentActivity activity, @NonNull Fragment fragment, @NonNull Set<TrackItem> items) {
 		OsmandApplication app = (OsmandApplication) activity.getApplicationContext();
 		DialogManager dialogManager = app.getDialogManager();
-		dialogManager.register(PROCESS_ID, new ChangeAppearanceController(app, selectedItems));
-		ChangeAppearanceFragment.showInstance(activity.getSupportFragmentManager(), targetFragment);
+		dialogManager.register(PROCESS_ID, new ChangeAppearanceController(app, items));
+		ChangeAppearanceFragment.showInstance(activity.getSupportFragmentManager(), fragment);
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/ChangeAppearanceFragment.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/ChangeAppearanceFragment.java
index b71fab203ee..56e5049fa22 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/ChangeAppearanceFragment.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/ChangeAppearanceFragment.java
@@ -29,8 +29,8 @@
 import net.osmand.plus.base.dialog.interfaces.dialog.IAskDismissDialog;
 import net.osmand.plus.base.dialog.interfaces.dialog.IAskRefreshDialogCompletely;
 import net.osmand.plus.card.base.multistate.MultiStateCard;
-import net.osmand.plus.configmap.tracks.AppearanceConfirmationBottomSheet;
-import net.osmand.plus.configmap.tracks.AppearanceConfirmationBottomSheet.OnAppearanceChangeConfirmedListener;
+import net.osmand.plus.configmap.tracks.ConfirmChangesBottomSheet;
+import net.osmand.plus.configmap.tracks.ConfirmChangesBottomSheet.ChangesConfirmationListener;
 import net.osmand.plus.configmap.tracks.TracksTabsFragment;
 import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.myplaces.tracks.SearchMyPlacesTracksFragment;
@@ -40,7 +40,7 @@
 import net.osmand.plus.widgets.dialogbutton.DialogButton;
 
 public class ChangeAppearanceFragment extends BaseOsmAndDialogFragment
-		implements IAskDismissDialog, IAskRefreshDialogCompletely, OnAppearanceChangeConfirmedListener {
+		implements IAskDismissDialog, IAskRefreshDialogCompletely, ChangesConfirmationListener {
 
 	private static final String TAG = ChangeAppearanceFragment.class.getSimpleName();
 
@@ -120,36 +120,33 @@ protected void setupToolbar(@NonNull View view) {
 	}
 
 	protected void setupCards(@NonNull View view) {
-		FragmentActivity activity = getActivity();
-		if (activity != null) {
-			ViewGroup cardsContainer = view.findViewById(R.id.cards_container);
-			int cardsBackgroundColor = ColorUtilities.getListBgColor(app, nightMode);
-
-			MultiStateCard directionArrowsCard = new MultiStateCard(activity, controller.getDirectionArrowsCardController());
-			cardsContainer.addView(directionArrowsCard.build());
-			directionArrowsCard.setBackgroundColor(cardsBackgroundColor);
-			inflate(R.layout.list_item_divider_with_padding_basic, cardsContainer, true);
-
-			MultiStateCard showStartFinishIconsCard = new MultiStateCard(activity, controller.getShowStartAndFinishIconsCardController());
-			cardsContainer.addView(showStartFinishIconsCard.build());
-			showStartFinishIconsCard.setBackgroundColor(cardsBackgroundColor);
-			inflate(R.layout.list_item_divider, cardsContainer, true);
-
-			MultiStateCard colorsCard = new MultiStateCard(activity, controller.getColorCardController());
-			cardsContainer.addView(colorsCard.build());
-			colorsCard.setBackgroundColor(cardsBackgroundColor);
-			inflate(R.layout.list_item_divider, cardsContainer, true);
-
-			MultiStateCard widthCard = new MultiStateCard(activity, controller.getWidthCardController());
-			cardsContainer.addView(widthCard.build());
-			widthCard.setBackgroundColor(cardsBackgroundColor);
-			inflate(R.layout.list_item_divider, cardsContainer, true);
-			setupOnNeedScrollListener();
-
-			MultiStateCard splitMarksCard = new MultiStateCard(activity, controller.getSplitMarksCardController());
-			cardsContainer.addView(splitMarksCard.build());
-			splitMarksCard.setBackgroundColor(cardsBackgroundColor);
-		}
+		FragmentActivity activity = requireActivity();
+		ViewGroup container = view.findViewById(R.id.cards_container);
+
+		MultiStateCard arrowsCard = new MultiStateCard(activity, controller.getArrowsCardController());
+		container.addView(arrowsCard.build());
+
+		inflate(R.layout.list_item_divider_with_padding_basic, container, true);
+
+		MultiStateCard iconsCard = new MultiStateCard(activity, controller.getStartAndFinishIconsCardController());
+		container.addView(iconsCard.build());
+
+		inflate(R.layout.list_item_divider, container, true);
+
+		MultiStateCard colorsCard = new MultiStateCard(activity, controller.getColorCardController());
+		container.addView(colorsCard.build());
+
+		inflate(R.layout.list_item_divider, container, true);
+
+		MultiStateCard widthCard = new MultiStateCard(activity, controller.getWidthCardController());
+		container.addView(widthCard.build());
+
+		inflate(R.layout.list_item_divider, container, true);
+
+		MultiStateCard splitCard = new MultiStateCard(activity, controller.getSplitCardController());
+		container.addView(splitCard.build());
+
+		setupOnNeedScrollListener();
 	}
 
 	protected void setupApplyButton(@NonNull View view) {
@@ -164,11 +161,13 @@ protected void updateApplyButtonEnabling(@NonNull View view) {
 	}
 
 	public void onApplyButtonClicked() {
-		AppearanceConfirmationBottomSheet.showInstance(getChildFragmentManager(), controller.getEditedItemsCount());
+		String count = String.valueOf(controller.getEditedItemsCount());
+		String description = getString(R.string.change_default_tracks_appearance_confirmation_description, count);
+		ConfirmChangesBottomSheet.showInstance(getChildFragmentManager(), description);
 	}
 
 	@Override
-	public void onAppearanceChangeConfirmed() {
+	public void onChangesConfirmed() {
 		FragmentActivity activity = getActivity();
 		if (activity != null) {
 			controller.saveChanges(activity);
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/DefaultAppearanceController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/DefaultAppearanceController.java
new file mode 100644
index 00000000000..f2def9ce5f1
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/DefaultAppearanceController.java
@@ -0,0 +1,158 @@
+package net.osmand.plus.configmap.tracks.appearance;
+
+import static net.osmand.gpx.GpxParameter.COLOR;
+import static net.osmand.gpx.GpxParameter.COLORING_TYPE;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.fragment.app.FragmentActivity;
+
+import net.osmand.gpx.GpxParameter;
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.base.dialog.DialogManager;
+import net.osmand.plus.base.dialog.interfaces.controller.IDialogController;
+import net.osmand.plus.card.color.ColoringStyle;
+import net.osmand.plus.card.color.ColoringStyleCardController.IColorCardControllerListener;
+import net.osmand.plus.card.color.palette.main.data.PaletteColor;
+import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData;
+import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData.AppearanceChangedListener;
+import net.osmand.plus.configmap.tracks.appearance.subcontrollers.ArrowsCardController;
+import net.osmand.plus.configmap.tracks.appearance.subcontrollers.ColorCardController;
+import net.osmand.plus.configmap.tracks.appearance.subcontrollers.SplitCardController;
+import net.osmand.plus.configmap.tracks.appearance.subcontrollers.StartFinishCardController;
+import net.osmand.plus.configmap.tracks.appearance.subcontrollers.WidthCardController;
+import net.osmand.plus.track.data.TrackFolder;
+import net.osmand.plus.track.helpers.GpxDbHelper;
+import net.osmand.plus.track.helpers.GpxDirItem;
+import net.osmand.util.Algorithms;
+
+public class DefaultAppearanceController implements IDialogController, IColorCardControllerListener,
+		AppearanceChangedListener {
+
+	public static final String PROCESS_ID = "edit_tracks_folder_default_appearance";
+
+	private final OsmandApplication app;
+	private final GpxDbHelper gpxDbHelper;
+
+	private final ArrowsCardController arrowsCardController;
+	private final StartFinishCardController iconsCardController;
+	private final ColorCardController colorCardController;
+	private final WidthCardController widthCardController;
+	private final SplitCardController splitCardController;
+
+	private final GpxDirItem dirItem;
+	private final TrackFolder folder;
+	private final AppearanceData data;
+	private final AppearanceData initialData;
+	private boolean isAppearanceSaved = false;
+
+	public DefaultAppearanceController(@NonNull OsmandApplication app, @NonNull TrackFolder folder) {
+		this.app = app;
+		this.folder = folder;
+		this.gpxDbHelper = app.getGpxDbHelper();
+		this.dirItem = gpxDbHelper.getGpxDirItem(folder.getDirFile());
+		this.initialData = buildAppearanceData(dirItem);
+		this.data = new AppearanceData(initialData).setListener(this);
+
+		arrowsCardController = new ArrowsCardController(app, data, false);
+		iconsCardController = new StartFinishCardController(app, data, false);
+
+		colorCardController = new ColorCardController(app, data, false);
+		colorCardController.setListener(this);
+
+		widthCardController = new WidthCardController(app, data, false);
+		widthCardController.setControlsColorProvider(colorCardController);
+
+		splitCardController = new SplitCardController(app, data, false);
+	}
+
+	@NonNull
+	public String getTitle() {
+		return folder.getName(app);
+	}
+
+	@Override
+	public void onColoringStyleSelected(@Nullable ColoringStyle coloringStyle) {
+		data.setParameter(COLORING_TYPE, coloringStyle != null ? coloringStyle.getId() : null);
+		updateColorItems();
+	}
+
+	@Override
+	public void onColorSelectedFromPalette(@NonNull PaletteColor paletteColor) {
+		data.setParameter(COLOR, paletteColor.getColor());
+		updateColorItems();
+	}
+
+	private void updateColorItems() {
+		widthCardController.updateColorItems();
+	}
+
+	public boolean hasAnyChangesToSave() {
+		return !Algorithms.objectEquals(initialData, data);
+	}
+
+	public void saveChanges() {
+		colorCardController.getColorsPaletteController().refreshLastUsedTime();
+
+		for (GpxParameter parameter : GpxParameter.getAppearanceParameters()) {
+			dirItem.setParameter(parameter, data.getParameter(parameter));
+		}
+		gpxDbHelper.updateDataItem(dirItem);
+		onAppearanceSaved();
+	}
+
+	private void onAppearanceSaved() {
+		isAppearanceSaved = true;
+		app.getDialogManager().askDismissDialog(PROCESS_ID);
+	}
+
+	public boolean isAppearanceSaved() {
+		return isAppearanceSaved;
+	}
+
+	@NonNull
+	public ArrowsCardController getArrowsCardController() {
+		return arrowsCardController;
+	}
+
+	@NonNull
+	public StartFinishCardController getIconsCardController() {
+		return iconsCardController;
+	}
+
+	@NonNull
+	public ColorCardController getColorCardController() {
+		return colorCardController;
+	}
+
+	@NonNull
+	public WidthCardController getWidthCardController() {
+		return widthCardController;
+	}
+
+	@NonNull
+	public SplitCardController getSplitCardController() {
+		return splitCardController;
+	}
+
+	@Override
+	public void onAppearanceChanged() {
+		app.getDialogManager().askRefreshDialogCompletely(PROCESS_ID);
+	}
+
+	@NonNull
+	private AppearanceData buildAppearanceData(@NonNull GpxDirItem item) {
+		AppearanceData data = new AppearanceData();
+		for (GpxParameter parameter : GpxParameter.getAppearanceParameters()) {
+			data.setParameter(parameter, item.getParameter(parameter));
+		}
+		return data;
+	}
+
+	public static void showDialog(@NonNull FragmentActivity activity, @NonNull TrackFolder folder) {
+		OsmandApplication app = (OsmandApplication) activity.getApplicationContext();
+		DialogManager dialogManager = app.getDialogManager();
+		dialogManager.register(PROCESS_ID, new DefaultAppearanceController(app, folder));
+		DefaultAppearanceFragment.showInstance(activity.getSupportFragmentManager());
+	}
+}
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/DefaultAppearanceFragment.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/DefaultAppearanceFragment.java
new file mode 100644
index 00000000000..b351879045d
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/DefaultAppearanceFragment.java
@@ -0,0 +1,206 @@
+package net.osmand.plus.configmap.tracks.appearance;
+
+import static net.osmand.plus.configmap.tracks.appearance.DefaultAppearanceController.PROCESS_ID;
+
+import android.app.Activity;
+import android.app.Dialog;
+import android.os.Bundle;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.view.Window;
+
+import androidx.annotation.ColorRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.appcompat.widget.Toolbar;
+import androidx.core.view.ViewCompat;
+import androidx.core.widget.NestedScrollView;
+import androidx.fragment.app.FragmentActivity;
+import androidx.fragment.app.FragmentManager;
+
+import net.osmand.plus.R;
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.base.BaseOsmAndDialogFragment;
+import net.osmand.plus.base.dialog.DialogManager;
+import net.osmand.plus.base.dialog.interfaces.dialog.IAskDismissDialog;
+import net.osmand.plus.base.dialog.interfaces.dialog.IAskRefreshDialogCompletely;
+import net.osmand.plus.card.base.multistate.MultiStateCard;
+import net.osmand.plus.configmap.tracks.ConfirmChangesBottomSheet;
+import net.osmand.plus.configmap.tracks.ConfirmChangesBottomSheet.ChangesConfirmationListener;
+import net.osmand.plus.helpers.AndroidUiHelper;
+import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.ColorUtilities;
+
+public class DefaultAppearanceFragment extends BaseOsmAndDialogFragment implements IAskDismissDialog,
+		IAskRefreshDialogCompletely, ChangesConfirmationListener {
+
+	private static final String TAG = DefaultAppearanceFragment.class.getSimpleName();
+
+	private DialogManager dialogManager;
+	private DefaultAppearanceController controller;
+
+	private View applyButton;
+
+	@ColorRes
+	public int getStatusBarColorId() {
+		AndroidUiHelper.setStatusBarContentColor(getView(), nightMode);
+		return ColorUtilities.getStatusBarColorId(nightMode);
+	}
+
+	@NonNull
+	@Override
+	public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {
+		updateNightMode();
+		Activity activity = requireActivity();
+		int themeId = nightMode ? R.style.OsmandDarkTheme_DarkActionbar : R.style.OsmandLightTheme_DarkActionbar_LightStatusBar;
+		Dialog dialog = new Dialog(activity, themeId) {
+			@Override
+			public void onBackPressed() {
+				dismiss();
+			}
+		};
+		Window window = dialog.getWindow();
+		if (window != null) {
+			if (!settings.DO_NOT_USE_ANIMATIONS.get()) {
+				window.getAttributes().windowAnimations = R.style.Animations_Alpha;
+			}
+			window.setStatusBarColor(ColorUtilities.getColor(app, getStatusBarColorId()));
+		}
+		return dialog;
+	}
+
+	@Override
+	public void onCreate(Bundle savedInstanceState) {
+		super.onCreate(savedInstanceState);
+		dialogManager = app.getDialogManager();
+		dialogManager.register(PROCESS_ID, this);
+		controller = (DefaultAppearanceController) dialogManager.findController(PROCESS_ID);
+	}
+
+	@Nullable
+	@Override
+	public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
+		updateNightMode();
+		View view = inflate(R.layout.fragment_tracks_default_appearance, container);
+
+		setupToolbar(view);
+		setupCards(view);
+		setupApplyButton(view);
+
+		return view;
+	}
+
+	@Override
+	public void onDestroy() {
+		super.onDestroy();
+
+		FragmentActivity activity = getActivity();
+		if (activity != null && !activity.isChangingConfigurations()) {
+			dialogManager.unregister(PROCESS_ID);
+		}
+	}
+
+	private void setupToolbar(@NonNull View view) {
+		View appbar = view.findViewById(R.id.appbar);
+		ViewCompat.setElevation(appbar, 5.0f);
+
+		int colorId = ColorUtilities.getActiveButtonsAndLinksTextColorId(nightMode);
+		Toolbar toolbar = view.findViewById(R.id.toolbar);
+		toolbar.setNavigationIcon(getIcon(AndroidUtils.getNavigationIconResId(app), colorId));
+		toolbar.setNavigationContentDescription(R.string.shared_string_close);
+		toolbar.setNavigationOnClickListener(v -> dismiss());
+	}
+
+	protected void setupCards(@NonNull View view) {
+		FragmentActivity activity = requireActivity();
+		ViewGroup container = view.findViewById(R.id.cards_container);
+
+		MultiStateCard arrowsCard = new MultiStateCard(activity, controller.getArrowsCardController());
+		container.addView(arrowsCard.build());
+
+		inflate(R.layout.list_item_divider_with_padding_basic, container, true);
+
+		MultiStateCard iconsCard = new MultiStateCard(activity, controller.getIconsCardController());
+		container.addView(iconsCard.build());
+
+		inflate(R.layout.list_item_divider, container, true);
+
+		MultiStateCard colorsCard = new MultiStateCard(activity, controller.getColorCardController());
+		container.addView(colorsCard.build());
+
+		inflate(R.layout.list_item_divider, container, true);
+
+		MultiStateCard widthCard = new MultiStateCard(activity, controller.getWidthCardController());
+		container.addView(widthCard.build());
+
+		inflate(R.layout.list_item_divider, container, true);
+
+		MultiStateCard splitCard = new MultiStateCard(activity, controller.getSplitCardController());
+		container.addView(splitCard.build());
+
+		setupOnNeedScrollListener();
+	}
+
+	private void setupApplyButton(@NonNull View view) {
+		applyButton = view.findViewById(R.id.apply_button);
+		applyButton.setOnClickListener(v -> {
+			String description = getString(R.string.change_default_appearance_confirmation, controller.getTitle());
+			ConfirmChangesBottomSheet.showInstance(getChildFragmentManager(), description);
+		});
+		updateApplyButton();
+	}
+
+	private void updateApplyButton() {
+		if (applyButton != null) {
+			applyButton.setEnabled(controller.hasAnyChangesToSave());
+		}
+	}
+
+	private void setupOnNeedScrollListener() {
+		controller.getWidthCardController().setOnNeedScrollListener(y -> {
+			View view = getView();
+			if (view != null) {
+				int bottomVisibleY = view.findViewById(R.id.buttons_container).getTop();
+				if (y > bottomVisibleY) {
+					NestedScrollView scrollView = view.findViewById(R.id.scroll_view);
+					int diff = y - bottomVisibleY;
+					int scrollY = scrollView.getScrollY();
+					scrollView.smoothScrollTo(0, scrollY + diff);
+				}
+			}
+		});
+	}
+
+	@Override
+	public void onChangesConfirmed() {
+		controller.saveChanges();
+	}
+
+	@Override
+	public void onAskRefreshDialogCompletely(@NonNull String processId) {
+		updateApplyButton();
+	}
+
+	@Override
+	public void onAskDismissDialog(@NonNull String processId) {
+		if (controller.isAppearanceSaved()) {
+			onAppearanceSaved();
+		}
+		dismiss();
+	}
+
+	private void onAppearanceSaved() {
+		FragmentActivity activity = getActivity();
+		if (activity instanceof MapActivity) {
+			((MapActivity) activity).refreshMapComplete();
+		}
+	}
+
+	public static void showInstance(@NonNull FragmentManager manager) {
+		if (AndroidUtils.isFragmentCanBeAdded(manager, TAG)) {
+			DefaultAppearanceFragment fragment = new DefaultAppearanceFragment();
+			fragment.show(manager, TAG);
+		}
+	}
+}
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/IChangeAppearanceController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/IChangeAppearanceController.java
deleted file mode 100644
index 88ed31675be..00000000000
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/IChangeAppearanceController.java
+++ /dev/null
@@ -1,17 +0,0 @@
-package net.osmand.plus.configmap.tracks.appearance;
-
-import androidx.annotation.NonNull;
-import androidx.fragment.app.FragmentActivity;
-
-import net.osmand.plus.base.dialog.interfaces.controller.IDialogController;
-
-public interface IChangeAppearanceController extends IDialogController {
-
-	boolean hasAnyChangesToCommit();
-
-	void saveChanges(@NonNull FragmentActivity activity);
-
-	int getEditedItemsCount();
-
-	boolean isAppearanceSaved();
-}
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/SplitIntervalBottomSheet.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/SplitIntervalBottomSheet.java
index 52e26da813e..f2803e42085 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/SplitIntervalBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/SplitIntervalBottomSheet.java
@@ -39,7 +39,6 @@
 import org.apache.commons.logging.Log;
 
 import java.util.ArrayList;
-import java.util.Collections;
 import java.util.LinkedHashMap;
 import java.util.List;
 import java.util.Map;
@@ -303,9 +302,13 @@ private void applySelectedSplit() {
 		double splitInterval = GpxSplitType.DISTANCE == selectedSplitType ? distanceSplit : timeSplit;
 
 		DialogManager dialogManager = app.getDialogManager();
-		ChangeAppearanceController controller = (ChangeAppearanceController) dialogManager.findController(ChangeAppearanceController.PROCESS_ID);
-		if (controller != null) {
-			controller.getSplitMarksCardController().onSplitSelected(selectedSplitType.getType(), splitInterval);
+		ChangeAppearanceController changeAppearanceController = (ChangeAppearanceController) dialogManager.findController(ChangeAppearanceController.PROCESS_ID);
+		if (changeAppearanceController != null) {
+			changeAppearanceController.getSplitCardController().onSplitSelected(selectedSplitType.getType(), splitInterval);
+		}
+		DefaultAppearanceController defaultAppearanceController = (DefaultAppearanceController) dialogManager.findController(DefaultAppearanceController.PROCESS_ID);
+		if (defaultAppearanceController != null) {
+			defaultAppearanceController.getSplitCardController().onSplitSelected(selectedSplitType.getType(), splitInterval);
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/data/AppearanceData.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/data/AppearanceData.java
index d8af7ad862f..b8295cbcdd0 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/data/AppearanceData.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/data/AppearanceData.java
@@ -1,162 +1,106 @@
 package net.osmand.plus.configmap.tracks.appearance.data;
 
-import androidx.annotation.ColorInt;
+import android.util.Pair;
+
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
-import net.osmand.plus.card.color.ColoringStyle;
+import net.osmand.gpx.GpxParameter;
+import net.osmand.util.Algorithms;
 
-import java.util.Objects;
+import java.util.HashMap;
+import java.util.Map;
 
 public class AppearanceData {
 
-	private Boolean showArrows = null;
-	private Boolean showStartFinish = null;
-	private ColoringStyle coloringStyle = null;
-	@ColorInt
-	private Integer customColor = null;
-	private String width = null;
-	private Integer splitType;
-	private Double splitInterval;
-
-
-	private OnAppearanceModifiedListener modifiedListener;
-
-	public AppearanceData() { }
-
-	public AppearanceData(@NonNull AppearanceData appearanceData) {
-		this.showArrows = appearanceData.shouldShowArrows();
-		this.showStartFinish = appearanceData.shouldShowStartFinish();
-		this.coloringStyle = appearanceData.getColoringStyle();
-		this.customColor = appearanceData.getCustomColor();
-		this.width = appearanceData.getWidthValue();
-	}
-
-	@NonNull
-	public AppearanceData setModifiedListener(@NonNull OnAppearanceModifiedListener modifiedListener) {
-		this.modifiedListener = modifiedListener;
-		return this;
-	}
-
-	@Nullable
-	public Boolean shouldShowArrows() {
-		return showArrows;
-	}
-
-	@NonNull
-	public AppearanceData setShowArrows(@Nullable Boolean showArrows) {
-		this.showArrows = showArrows;
-		notifyOnAppearanceModified();
-		return this;
-	}
+	private final Map<GpxParameter, Pair<Boolean, Object>> map = new HashMap<>();
 
-	@Nullable
-	public Boolean shouldShowStartFinish() {
-		return showStartFinish;
-	}
+	private AppearanceChangedListener listener;
 
-	@NonNull
-	public AppearanceData setShowStartFinish(@Nullable Boolean showStartFinish) {
-		this.showStartFinish = showStartFinish;
-		notifyOnAppearanceModified();
-		return this;
+	public AppearanceData() {
 	}
 
-	@Nullable
-	public ColoringStyle getColoringStyle() {
-		return coloringStyle;
+	public AppearanceData(@NonNull AppearanceData data) {
+		this.map.putAll(data.map);
+		this.listener = data.listener;
 	}
 
 	@NonNull
-	public AppearanceData setColoringStyle(@Nullable ColoringStyle coloringStyle) {
-		this.coloringStyle = coloringStyle;
-		notifyOnAppearanceModified();
+	public AppearanceData setListener(@NonNull AppearanceChangedListener listener) {
+		this.listener = listener;
 		return this;
 	}
 
 	@Nullable
-	public String getWidthValue() {
-		return width;
-	}
-
-	@NonNull
-	public AppearanceData setWidthValue(@Nullable String width) {
-		this.width = width;
-		notifyOnAppearanceModified();
-		return this;
+	@SuppressWarnings("unchecked")
+	public <T> T getParameter(@NonNull GpxParameter parameter) {
+		Pair<Boolean, Object> pair = map.get(parameter);
+		return pair != null ? ((Class<T>) parameter.getTypeClass()).cast(pair.second) : null;
 	}
 
-	@Nullable
-	public Integer getCustomColor() {
-		return customColor;
+	public boolean setParameter(@NonNull GpxParameter parameter, @Nullable Object value) {
+		if (isValidValue(parameter, value)) {
+			map.put(parameter, new Pair<>(false, value));
+			notifyAppearanceModified();
+			return true;
+		}
+		return false;
 	}
 
-	@NonNull
-	public AppearanceData setCustomColor(@Nullable Integer customColor) {
-		this.customColor = customColor;
-		notifyOnAppearanceModified();
-		return this;
+	public boolean resetParameter(@NonNull GpxParameter parameter) {
+		if (parameter.isAppearanceParameter()) {
+			map.put(parameter, new Pair<>(true, null));
+			notifyAppearanceModified();
+			return true;
+		}
+		return false;
 	}
 
-	@Nullable
-	public Integer getSplitType() {
-		return splitType;
+	public boolean shouldResetParameter(@NonNull GpxParameter parameter) {
+		if (parameter.isAppearanceParameter()) {
+			Pair<Boolean, Object> pair = map.get(parameter);
+			return pair != null && pair.first;
+		}
+		return false;
 	}
 
-	@Nullable
-	public Double getSplitInterval() {
-		return splitInterval;
+	public boolean shouldResetAnything() {
+		for (GpxParameter parameter : GpxParameter.getAppearanceParameters()) {
+			if (shouldResetParameter(parameter)) {
+				return true;
+			}
+		}
+		return false;
 	}
 
-	@NonNull
-	public AppearanceData setSplit(@Nullable Integer splitType, @Nullable Double splitInterval) {
-		this.splitType = splitType;
-		this.splitInterval = splitInterval;
-		notifyOnAppearanceModified();
-		return this;
+	public boolean isValidValue(@NonNull GpxParameter parameter, @Nullable Object value) {
+		return parameter.isAppearanceParameter() && (value == null || parameter.getTypeClass() == value.getClass());
 	}
 
-	private void notifyOnAppearanceModified() {
-		if (modifiedListener != null) {
-			modifiedListener.onAppearanceModified();
+	private void notifyAppearanceModified() {
+		if (listener != null) {
+			listener.onAppearanceChanged();
 		}
 	}
 
-	public interface OnAppearanceModifiedListener {
-		void onAppearanceModified();
+	public interface AppearanceChangedListener {
+		void onAppearanceChanged();
 	}
 
 	@Override
 	public boolean equals(Object o) {
-		if (this == o) return true;
-		if (!(o instanceof AppearanceData)) return false;
-
-		AppearanceData that = (AppearanceData) o;
-
-		if (!Objects.equals(shouldShowArrows(), that.shouldShowArrows()))
-			return false;
-		if (!Objects.equals(shouldShowStartFinish(), that.shouldShowStartFinish()))
-			return false;
-		if (!Objects.equals(getColoringStyle(), that.getColoringStyle()))
-			return false;
-		if (!Objects.equals(getCustomColor(), that.getCustomColor()))
-			return false;
-		if (!Objects.equals(getSplitType(), that.getSplitType()))
-			return false;
-		if (!Objects.equals(getSplitInterval(), that.getSplitInterval()))
+		if (this == o) {
+			return true;
+		}
+		if (o == null || getClass() != o.getClass()) {
 			return false;
-		return Objects.equals(getWidthValue(), that.getWidthValue());
+		}
+		AppearanceData that = (AppearanceData) o;
+		return Algorithms.objectEquals(map, that.map);
 	}
 
 	@Override
 	public int hashCode() {
-		int result = shouldShowArrows() != null ? shouldShowArrows().hashCode() : 0;
-		result = 31 * result + (shouldShowStartFinish() != null ? shouldShowStartFinish().hashCode() : 0);
-		result = 31 * result + (getColoringStyle() != null ? getColoringStyle().hashCode() : 0);
-		result = 31 * result + (getCustomColor() != null ? getCustomColor().hashCode() : 0);
-		result = 31 * result + (getWidthValue() != null ? getWidthValue().hashCode() : 0);
-		result = 31 * result + (getSplitType() != null ? getSplitType().hashCode() : 0);
-		result = 31 * result + (getSplitInterval() != null ? getSplitInterval().hashCode() : 0);
-		return result;
+		return Algorithms.hash(map);
 	}
-}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/ArrowsCardController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/ArrowsCardController.java
new file mode 100644
index 00000000000..789e26e137f
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/ArrowsCardController.java
@@ -0,0 +1,73 @@
+package net.osmand.plus.configmap.tracks.appearance.subcontrollers;
+
+import static net.osmand.gpx.GpxParameter.SHOW_ARROWS;
+
+import android.view.View;
+import android.view.ViewGroup;
+
+import androidx.annotation.NonNull;
+import androidx.fragment.app.FragmentActivity;
+
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.card.base.multistate.BaseMultiStateCardController;
+import net.osmand.plus.card.base.multistate.CardState;
+import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData;
+
+import java.util.ArrayList;
+import java.util.List;
+
+public class ArrowsCardController extends BaseMultiStateCardController {
+
+	private final AppearanceData data;
+	private final boolean addUnchanged;
+
+	public ArrowsCardController(@NonNull OsmandApplication app, @NonNull AppearanceData data, boolean addUnchanged) {
+		super(app);
+		this.data = data;
+		this.addUnchanged = addUnchanged;
+		this.selectedState = findCardState(data.getParameter(SHOW_ARROWS));
+	}
+
+	@NonNull
+	@Override
+	public String getCardTitle() {
+		return app.getString(R.string.gpx_direction_arrows);
+	}
+
+	@NonNull
+	@Override
+	public String getCardStateSelectorTitle() {
+		return selectedState.toHumanString(app);
+	}
+
+	@Override
+	public void onBindCardContent(@NonNull FragmentActivity activity, @NonNull ViewGroup container, boolean nightMode) {
+		container.setVisibility(View.GONE);
+	}
+
+	@Override
+	protected void onSelectCardState(@NonNull CardState cardState) {
+		selectedState = cardState;
+		card.updateSelectedCardState();
+
+		if (cardState.isOriginal()) {
+			data.resetParameter(SHOW_ARROWS);
+		} else {
+			data.setParameter(SHOW_ARROWS, cardState.getTag());
+		}
+	}
+
+	@NonNull
+	protected List<CardState> collectSupportedCardStates() {
+		List<CardState> states = new ArrayList<>();
+		if (addUnchanged) {
+			states.add(new CardState(R.string.shared_string_unchanged));
+		}
+		states.add(new CardState(R.string.shared_string_original));
+		states.add(new CardState(R.string.shared_string_on).setTag(true).setShowTopDivider(true));
+		states.add(new CardState(R.string.shared_string_off).setTag(false));
+
+		return states;
+	}
+}
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/ColorCardController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/ColorCardController.java
index f8c4afd546d..7c349f89fe7 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/ColorCardController.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/ColorCardController.java
@@ -1,5 +1,8 @@
 package net.osmand.plus.configmap.tracks.appearance.subcontrollers;
 
+import static net.osmand.gpx.GpxParameter.COLOR;
+import static net.osmand.gpx.GpxParameter.COLORING_TYPE;
+import static net.osmand.plus.card.color.ColoringPurpose.TRACK;
 import static net.osmand.plus.routing.ColoringType.TRACK_SOLID;
 
 import android.view.LayoutInflater;
@@ -13,7 +16,6 @@
 import net.osmand.plus.R;
 import net.osmand.plus.card.base.multistate.CardState;
 import net.osmand.plus.card.base.simple.DescriptionCard;
-import net.osmand.plus.card.color.ColoringPurpose;
 import net.osmand.plus.card.color.ColoringStyle;
 import net.osmand.plus.card.color.ColoringStyleCardController;
 import net.osmand.plus.card.color.IControlsColorProvider;
@@ -38,14 +40,29 @@
 
 public class ColorCardController extends ColoringStyleCardController implements IControlsColorProvider {
 
+	private final AppearanceData data;
+	private final boolean addUnchanged;
+
 	private IColorsPaletteController colorsPaletteController;
 	private IColoringStyleDetailsController coloringStyleDetailsController;
-	private final AppearanceData appearanceData;
 
-	public ColorCardController(@NonNull OsmandApplication app,
-	                           @NonNull AppearanceData appearanceData) {
-		super(app, appearanceData.getColoringStyle());
-		this.appearanceData = appearanceData;
+	public ColorCardController(@NonNull OsmandApplication app, @NonNull AppearanceData data, boolean addUnchanged) {
+		super(app);
+		this.data = data;
+		this.addUnchanged = addUnchanged;
+		this.selectedState = findCardState(getColoringStyle());
+	}
+
+	@Override
+	protected void onSelectCardState(@NonNull CardState cardState) {
+		if (cardState.isOriginal()) {
+			selectedState = cardState;
+			card.updateSelectedCardState();
+			data.resetParameter(COLOR);
+			data.resetParameter(COLORING_TYPE);
+		} else {
+			askSelectColoringStyle((ColoringStyle) cardState.getTag());
+		}
 	}
 
 	@Override
@@ -84,12 +101,12 @@ public IColorsPaletteController getColorsPaletteController() {
 			bundle.predefinedColors = TrackColorController.getPredefinedColors(app);
 			bundle.palettePreference = settings.TRACK_COLORS_PALETTE;
 			bundle.customColorsPreference = settings.CUSTOM_TRACK_PALETTE_COLORS;
-			Integer selectedCustomColor = appearanceData.getCustomColor();
-			if (selectedCustomColor == null) {
-				selectedCustomColor = bundle.predefinedColors.get(0).getColor();
+			Integer color = data.getParameter(COLOR);
+			if (color == null) {
+				color = bundle.predefinedColors.get(0).getColor();
 			}
 			ColorsCollection colorsCollection = new ColorsCollection(bundle);
-			colorsPaletteController = new ColorsPaletteController(app, colorsCollection, selectedCustomColor);
+			colorsPaletteController = new ColorsPaletteController(app, colorsCollection, color);
 		}
 		colorsPaletteController.setPaletteListener(getExternalListener());
 		return colorsPaletteController;
@@ -98,11 +115,11 @@ public IColorsPaletteController getColorsPaletteController() {
 	@NonNull
 	private IColoringStyleDetailsController getColoringStyleDetailsController() {
 		if (coloringStyleDetailsController == null) {
-			ColoringStyle selectedColoringStyle = appearanceData.getColoringStyle();
-			if (selectedColoringStyle == null) {
-				selectedColoringStyle = new ColoringStyle(TRACK_SOLID);
+			ColoringStyle selectedStyle = getColoringStyle();
+			if (selectedStyle == null) {
+				selectedStyle = new ColoringStyle(TRACK_SOLID);
 			}
-			coloringStyleDetailsController = new ColoringStyleDetailsCardController(app, selectedColoringStyle) {
+			coloringStyleDetailsController = new ColoringStyleDetailsCardController(app, selectedStyle) {
 				@Override
 				public boolean shouldShowBottomSpace() {
 					return true;
@@ -112,23 +129,40 @@ public boolean shouldShowBottomSpace() {
 		return coloringStyleDetailsController;
 	}
 
+	@Nullable
+	private ColoringStyle getColoringStyle() {
+		String coloringType = data.getParameter(COLORING_TYPE);
+		if (coloringType != null) {
+			ColoringType type = ColoringType.requireValueOf(TRACK, coloringType);
+			String attribute = ColoringType.getRouteInfoAttribute(coloringType);
+			return new ColoringStyle(type, attribute);
+		}
+		return null;
+	}
+
 	@NonNull
 	@Override
 	protected List<CardState> collectSupportedCardStates() {
-		List<CardState> result = new ArrayList<>();
-		result.add(new CardState(R.string.shared_string_unchanged));
+		List<CardState> list = new ArrayList<>();
+
+		if (addUnchanged) {
+			list.add(new CardState(R.string.shared_string_unchanged));
+		}
+		list.add(new CardState(R.string.shared_string_original));
+
 		List<CardState> other = super.collectSupportedCardStates();
 		if (other.size() > 0) {
 			other.get(0).setShowTopDivider(true);
 		}
-		result.addAll(other);
-		return result;
+		list.addAll(other);
+
+		return list;
 	}
 
 	@Override
 	@NonNull
 	protected ColoringType[] getSupportedColoringTypes() {
-		return ColoringType.valuesOf(ColoringPurpose.TRACK);
+		return ColoringType.valuesOf(TRACK);
 	}
 
 	@Override
@@ -137,7 +171,7 @@ public int getSelectedControlsColor() {
 		ColoringType coloringType = coloringStyle != null ? coloringStyle.getType() : null;
 		Integer color = null;
 		if (coloringType == TRACK_SOLID) {
-			color = appearanceData.getCustomColor();
+			color = data.getParameter(COLOR);
 		}
 		if (color == null) {
 			color = GpxAppearanceAdapter.getTrackColor(app);
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/DirectionArrowsCardController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/DirectionArrowsCardController.java
deleted file mode 100644
index 5289ffeeea9..00000000000
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/DirectionArrowsCardController.java
+++ /dev/null
@@ -1,64 +0,0 @@
-package net.osmand.plus.configmap.tracks.appearance.subcontrollers;
-
-import android.view.View;
-import android.view.ViewGroup;
-
-import androidx.annotation.NonNull;
-import androidx.fragment.app.FragmentActivity;
-
-import net.osmand.plus.OsmandApplication;
-import net.osmand.plus.R;
-import net.osmand.plus.card.base.multistate.BaseMultiStateCardController;
-import net.osmand.plus.card.base.multistate.CardState;
-import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData;
-
-import java.util.Arrays;
-import java.util.List;
-import java.util.Objects;
-
-public class DirectionArrowsCardController extends BaseMultiStateCardController {
-
-	private final AppearanceData appearanceData;
-
-	public DirectionArrowsCardController(@NonNull OsmandApplication app,
-	                                     @NonNull AppearanceData appearanceData) {
-		super(app, appearanceData.shouldShowArrows());
-		this.appearanceData = appearanceData;
-	}
-
-	@NonNull
-	@Override
-	public String getCardTitle() {
-		return app.getString(R.string.gpx_direction_arrows);
-	}
-
-	@NonNull
-	@Override
-	public String getCardStateSelectorTitle() {
-		return selectedCardState.toHumanString(app);
-	}
-
-	@Override
-	public void onBindCardContent(@NonNull FragmentActivity activity,
-	                              @NonNull ViewGroup container, boolean nightMode) {
-		container.setVisibility(View.GONE);
-	}
-
-	@Override
-	protected void onSelectCardState(@NonNull CardState cardState) {
-		if (!Objects.equals(selectedCardState.getTag(), cardState.getTag())) {
-			selectedCardState = cardState;
-			cardInstance.updateSelectedCardState();
-			appearanceData.setShowArrows((Boolean) cardState.getTag());
-		}
-	}
-
-	@NonNull
-	protected List<CardState> collectSupportedCardStates() {
-		return Arrays.asList(
-				new CardState(R.string.shared_string_unchanged),
-				new CardState(R.string.shared_string_on).setTag(true).setShowTopDivider(true),
-				new CardState(R.string.shared_string_off).setTag(false)
-		);
-	}
-}
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/SplitMarksCardController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/SplitCardController.java
similarity index 66%
rename from OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/SplitMarksCardController.java
rename to OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/SplitCardController.java
index 0648aadfe53..33179675cbb 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/SplitMarksCardController.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/SplitCardController.java
@@ -1,5 +1,8 @@
 package net.osmand.plus.configmap.tracks.appearance.subcontrollers;
 
+import static net.osmand.gpx.GpxParameter.SPLIT_INTERVAL;
+import static net.osmand.gpx.GpxParameter.SPLIT_TYPE;
+
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -19,18 +22,21 @@
 import net.osmand.plus.utils.OsmAndFormatter;
 import net.osmand.plus.utils.UiUtilities;
 
-import java.util.Arrays;
+import java.util.ArrayList;
 import java.util.List;
 
-public class SplitMarksCardController extends BaseMultiStateCardController {
+public class SplitCardController extends BaseMultiStateCardController {
 
 	private static final int CARD_STATE_SELECT_ID = 1;
 
 	private final AppearanceData appearanceData;
+	private final boolean addUnchanged;
 
-	public SplitMarksCardController(@NonNull OsmandApplication app, @NonNull AppearanceData appearanceData) {
-		super(app, appearanceData.getSplitType());
-		this.appearanceData = appearanceData;
+	public SplitCardController(@NonNull OsmandApplication app, @NonNull AppearanceData data, boolean addUnchanged) {
+		super(app);
+		this.appearanceData = data;
+		this.addUnchanged = addUnchanged;
+		this.selectedState = findCardState(data.getParameter(SPLIT_TYPE));
 	}
 
 	@NonNull
@@ -42,15 +48,15 @@ public String getCardTitle() {
 	@NonNull
 	@Override
 	public String getCardStateSelectorTitle() {
-		if (selectedCardState.getTag() == null) {
-			return selectedCardState.toHumanString(app);
+		if (selectedState.getTag() == null) {
+			return selectedState.toHumanString(app);
 		}
 		return getSplitIntervalSummary();
 	}
 
 	@Override
 	public void onBindCardContent(@NonNull FragmentActivity activity, @NonNull ViewGroup container, boolean nightMode) {
-		if (selectedCardState.getTag() == null) {
+		if (selectedState.getTag() == null) {
 			if (container.getChildCount() == 0) {
 				LayoutInflater inflater = UiUtilities.getInflater(activity, nightMode);
 				inflater.inflate(R.layout.list_item_divider_with_padding_basic, container, true);
@@ -65,18 +71,27 @@ public void onBindCardContent(@NonNull FragmentActivity activity, @NonNull ViewG
 	@NonNull
 	@Override
 	protected List<CardState> collectSupportedCardStates() {
-		return Arrays.asList(
-				new CardState(R.string.shared_string_unchanged),
-				new CardState(R.string.shared_string_select).setTag(CARD_STATE_SELECT_ID).setShowTopDivider(true)
-		);
+		List<CardState> list = new ArrayList<>();
+		if (addUnchanged) {
+			list.add(new CardState(R.string.shared_string_unchanged));
+		}
+		list.add(new CardState(R.string.shared_string_original));
+		list.add(new CardState(R.string.shared_string_select).setTag(CARD_STATE_SELECT_ID).setShowTopDivider(true));
+
+		return list;
 	}
 
 	@Override
 	protected void onSelectCardState(@NonNull CardState cardState) {
-		if (cardState.getTag() == null) {
+		if (cardState.isOriginal()) {
+			selectedState = cardState;
+			card.updateSelectedCardState();
+			appearanceData.resetParameter(SPLIT_TYPE);
+			appearanceData.resetParameter(SPLIT_INTERVAL);
+		} else if (cardState.getTag() == null) {
 			onSplitSelected(cardState, null, null);
 		} else {
-			SplitIntervalBottomSheet.showInstance(cardInstance.getActivity());
+			SplitIntervalBottomSheet.showInstance(card.getActivity());
 		}
 	}
 
@@ -85,15 +100,17 @@ public void onSplitSelected(@Nullable Integer splitType, @Nullable Double splitI
 	}
 
 	private void onSplitSelected(@NonNull CardState cardState, @Nullable Integer splitType, @Nullable Double splitInterval) {
-		selectedCardState = cardState;
-		appearanceData.setSplit(splitType, splitInterval);
-		cardInstance.updateSelectedCardState();
+		selectedState = cardState;
+		appearanceData.setParameter(SPLIT_TYPE, splitType);
+		appearanceData.setParameter(SPLIT_INTERVAL, splitInterval);
+		card.updateSelectedCardState();
 	}
 
+	@NonNull
 	private String getSplitIntervalSummary() {
 		String summary = "";
-		Integer splitType = appearanceData.getSplitType();
-		Double splitInterval = appearanceData.getSplitInterval();
+		Integer splitType = appearanceData.getParameter(SPLIT_TYPE);
+		Double splitInterval = appearanceData.getParameter(SPLIT_INTERVAL);
 		if (splitInterval != null && splitType != null) {
 			if (splitType == GpxSplitType.NO_SPLIT.getType()) {
 				summary = GpxSplitType.NO_SPLIT.getHumanString(app);
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/StartFinishCardController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/StartFinishCardController.java
index c90e86c24ee..abab52332a9 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/StartFinishCardController.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/StartFinishCardController.java
@@ -1,5 +1,7 @@
 package net.osmand.plus.configmap.tracks.appearance.subcontrollers;
 
+import static net.osmand.gpx.GpxParameter.SHOW_START_FINISH;
+
 import android.view.View;
 import android.view.ViewGroup;
 
@@ -12,18 +14,19 @@
 import net.osmand.plus.card.base.multistate.CardState;
 import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData;
 
-import java.util.Arrays;
+import java.util.ArrayList;
 import java.util.List;
-import java.util.Objects;
 
 public class StartFinishCardController extends BaseMultiStateCardController {
 
-	private final AppearanceData appearanceData;
+	private final AppearanceData data;
+	private final boolean addUnchanged;
 
-	public StartFinishCardController(@NonNull OsmandApplication app,
-	                                 @NonNull AppearanceData appearanceData) {
-		super(app, appearanceData.shouldShowStartFinish());
-		this.appearanceData = appearanceData;
+	public StartFinishCardController(@NonNull OsmandApplication app, @NonNull AppearanceData data, boolean addUnchanged) {
+		super(app);
+		this.data = data;
+		this.addUnchanged = addUnchanged;
+		this.selectedState = findCardState(data.getParameter(SHOW_START_FINISH));
 	}
 
 	@NonNull
@@ -35,31 +38,38 @@ public String getCardTitle() {
 	@NonNull
 	@Override
 	public String getCardStateSelectorTitle() {
-		return selectedCardState.toHumanString(app);
+		return selectedState.toHumanString(app);
 	}
 
 	@Override
-	public void onBindCardContent(@NonNull FragmentActivity activity,
-	                              @NonNull ViewGroup container, boolean nightMode) {
+	public void onBindCardContent(@NonNull FragmentActivity activity, @NonNull ViewGroup container, boolean nightMode) {
 		container.setVisibility(View.GONE);
 	}
 
 	@Override
 	protected void onSelectCardState(@NonNull CardState cardState) {
-		if (!Objects.equals(selectedCardState.getTag(), cardState.getTag())) {
-			selectedCardState = cardState;
-			appearanceData.setShowStartFinish((Boolean) selectedCardState.getTag());
-			cardInstance.updateSelectedCardState();
+		if (cardState.getTitleId() != selectedState.getTitleId()) {
+			selectedState = cardState;
+			card.updateSelectedCardState();
+
+			if (cardState.isOriginal()) {
+				data.resetParameter(SHOW_START_FINISH);
+			} else {
+				data.setParameter(SHOW_START_FINISH, cardState.getTag());
+			}
 		}
 	}
 
 	@NonNull
 	protected List<CardState> collectSupportedCardStates() {
-		return Arrays.asList(
-				new CardState(R.string.shared_string_unchanged),
-				new CardState(R.string.shared_string_on).setTag(true).setShowTopDivider(true),
-				new CardState(R.string.shared_string_off).setTag(false)
-		);
-	}
+		List<CardState> states = new ArrayList<>();
+		if (addUnchanged) {
+			states.add(new CardState(R.string.shared_string_unchanged));
+		}
+		states.add(new CardState(R.string.shared_string_original));
+		states.add(new CardState(R.string.shared_string_on).setTag(true).setShowTopDivider(true));
+		states.add(new CardState(R.string.shared_string_off).setTag(false));
 
+		return states;
+	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/WidthCardController.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/WidthCardController.java
index 22be83c3800..623b7225388 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/WidthCardController.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/subcontrollers/WidthCardController.java
@@ -1,6 +1,6 @@
 package net.osmand.plus.configmap.tracks.appearance.subcontrollers;
 
-import static net.osmand.util.Algorithms.parseIntSilently;
+import static net.osmand.gpx.GpxParameter.WIDTH;
 
 import android.view.LayoutInflater;
 import android.view.ViewGroup;
@@ -23,6 +23,7 @@
 import net.osmand.plus.track.fragments.TrackAppearanceFragment.OnNeedScrollListener;
 import net.osmand.plus.track.fragments.controller.TrackWidthController.ITrackWidthSelectedListener;
 import net.osmand.plus.utils.UiUtilities;
+import net.osmand.util.Algorithms;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -36,18 +37,21 @@ public class WidthCardController extends BaseMultiStateCardController {
 	private static final int CUSTOM_WIDTH_MAX = 24;
 
 	private final AppearanceData appearanceData;
+	private final boolean addUnchanged;
 
 	private IControlsColorProvider controlsColorProvider;
 	private WidthComponentController widthComponentController;
 	private OnNeedScrollListener onNeedScrollListener;
 	private ITrackWidthSelectedListener listener;
 
-	public WidthCardController(@NonNull OsmandApplication app, @NonNull AppearanceData appearanceData) {
-		super(app, appearanceData.getWidthValue());
-		this.appearanceData = appearanceData;
+	public WidthCardController(@NonNull OsmandApplication app, @NonNull AppearanceData data, boolean addUnchanged) {
+		super(app);
+		this.appearanceData = data;
+		this.addUnchanged = addUnchanged;
+		this.selectedState = findCardState(data.getParameter(WIDTH));
 	}
 
-	public void setListener(@NonNull ITrackWidthSelectedListener listener) {
+	public void setListener(@Nullable ITrackWidthSelectedListener listener) {
 		this.listener = listener;
 	}
 
@@ -68,20 +72,25 @@ public String getCardTitle() {
 	@NonNull
 	@Override
 	public String getCardStateSelectorTitle() {
-		return selectedCardState.getTag() == null
-				? selectedCardState.toHumanString(app)
+		return selectedState.getTag() == null
+				? selectedState.toHumanString(app)
 				: getWidthComponentController().getSummary(app);
 	}
 
 	@Override
 	protected void onSelectCardState(@NonNull CardState cardState) {
-		String widthValue = getWidthValue(cardState);
-		onWidthValueSelected(widthValue);
+		if (cardState.isOriginal()) {
+			selectedState = cardState;
+			card.updateSelectedCardState();
+			appearanceData.resetParameter(WIDTH);
+		} else {
+			widthValueSelected(getWidthValue(cardState));
+		}
 	}
 
 	@Override
 	public void onBindCardContent(@NonNull FragmentActivity activity, @NonNull ViewGroup container, boolean nightMode) {
-		if (selectedCardState.getTag() == null) {
+		if (selectedState.getTag() == null) {
 			bindSummaryCard(activity, container, nightMode);
 		} else {
 			bindWidthComponentCardIfNeeded(activity, container);
@@ -113,15 +122,18 @@ private void bindWidthComponentCardIfNeeded(@NonNull FragmentActivity activity,
 			container.addView(widthComponentCard.build(activity));
 			updateColorItems();
 		}
-		controller.askSelectWidthMode(getWidthValue(selectedCardState));
+		controller.askSelectWidthMode(getWidthValue(selectedState));
 		container.setTag(WIDTH_COMPONENT_CARD_ID);
 	}
 
-	private void onWidthValueSelected(@Nullable String widthValue) {
-		selectedCardState = findCardStateByWidthValue(widthValue);
-		cardInstance.updateSelectedCardState();
-		appearanceData.setWidthValue(widthValue);
-		listener.onTrackWidthSelected(widthValue);
+	private void widthValueSelected(@Nullable String widthValue) {
+		selectedState = findCardStateByWidthValue(widthValue);
+		card.updateSelectedCardState();
+		appearanceData.setParameter(WIDTH, widthValue);
+
+		if (listener != null) {
+			listener.onTrackWidthSelected(widthValue);
+		}
 	}
 
 	public void updateColorItems() {
@@ -132,10 +144,10 @@ public void updateColorItems() {
 	@NonNull
 	private WidthComponentController getWidthComponentController() {
 		if (widthComponentController == null) {
-			String selectedWidth = appearanceData.getWidthValue();
+			String selectedWidth = appearanceData.getParameter(WIDTH);
 			WidthMode widthMode = WidthMode.valueOfKey(selectedWidth);
-			int customValue = parseIntSilently(selectedWidth, CUSTOM_WIDTH_MIN);
-			widthComponentController = new WidthComponentController(widthMode, customValue, this::onWidthValueSelected) {
+			int customValue = Algorithms.parseIntSilently(selectedWidth, CUSTOM_WIDTH_MIN);
+			widthComponentController = new WidthComponentController(widthMode, customValue, this::widthValueSelected) {
 				@NonNull
 				@Override
 				public Limits getSliderLimits() {
@@ -179,14 +191,17 @@ private boolean isCustomValue(@NonNull CardState cardState) {
 	@NonNull
 	@Override
 	protected List<CardState> collectSupportedCardStates() {
-		List<CardState> result = new ArrayList<>();
-		result.add(new CardState(R.string.shared_string_unchanged));
+		List<CardState> list = new ArrayList<>();
+		if (addUnchanged) {
+			list.add(new CardState(R.string.shared_string_unchanged));
+		}
+		list.add(new CardState(R.string.shared_string_original));
+
 		for (WidthMode widthMode : WidthMode.values()) {
-			result.add(new CardState(widthMode.getTitleId())
+			list.add(new CardState(widthMode.getTitleId())
 					.setShowTopDivider(widthMode.ordinal() == 0)
-					.setTag(widthMode)
-			);
+					.setTag(widthMode));
 		}
-		return result;
+		return list;
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/tasks/ChangeAppearanceTask.java b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/tasks/ChangeAppearanceTask.java
index f2f04601343..c545645dd59 100644
--- a/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/tasks/ChangeAppearanceTask.java
+++ b/OsmAnd/src/net/osmand/plus/configmap/tracks/appearance/tasks/ChangeAppearanceTask.java
@@ -4,9 +4,8 @@
 import static net.osmand.gpx.GpxParameter.COLORING_TYPE;
 import static net.osmand.gpx.GpxParameter.SHOW_ARROWS;
 import static net.osmand.gpx.GpxParameter.SHOW_START_FINISH;
-import static net.osmand.gpx.GpxParameter.SPLIT_INTERVAL;
-import static net.osmand.gpx.GpxParameter.SPLIT_TYPE;
 import static net.osmand.gpx.GpxParameter.WIDTH;
+import static net.osmand.plus.card.color.ColoringPurpose.TRACK;
 
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
@@ -15,9 +14,9 @@
 import net.osmand.CallbackWithObject;
 import net.osmand.gpx.GpxParameter;
 import net.osmand.plus.base.BaseLoadAsyncTask;
-import net.osmand.plus.card.color.ColoringStyle;
 import net.osmand.plus.configmap.tracks.TrackItem;
 import net.osmand.plus.configmap.tracks.appearance.data.AppearanceData;
+import net.osmand.plus.routing.ColoringType;
 import net.osmand.plus.track.helpers.GpxDataItem;
 import net.osmand.plus.track.helpers.GpxDbHelper;
 import net.osmand.plus.track.helpers.GpxDbHelper.GpxDataItemCallback;
@@ -32,17 +31,15 @@ public class ChangeAppearanceTask extends BaseLoadAsyncTask<Void, File, Void> {
 	private final GpxDbHelper gpxDbHelper;
 	private final GpxSelectionHelper selectionHelper;
 
+	private final AppearanceData data;
 	private final Set<TrackItem> trackItems;
-	private final AppearanceData appearanceData;
 	private final CallbackWithObject<Void> callback;
 
-	public ChangeAppearanceTask(@NonNull FragmentActivity activity,
-								@NonNull AppearanceData appearanceData,
-	                            @NonNull Set<TrackItem> trackItems,
-	                            @Nullable CallbackWithObject<Void> callback) {
+	public ChangeAppearanceTask(@NonNull FragmentActivity activity, @NonNull AppearanceData data,
+	                            @NonNull Set<TrackItem> trackItems, @Nullable CallbackWithObject<Void> callback) {
 		super(activity);
+		this.data = data;
 		this.trackItems = trackItems;
-		this.appearanceData = appearanceData;
 		this.callback = callback;
 		this.gpxDbHelper = app.getGpxDbHelper();
 		this.selectionHelper = app.getSelectedGpxHelper();
@@ -66,14 +63,9 @@ protected Void doInBackground(Void... params) {
 	}
 
 	private void updateTrackAppearance(@NonNull GpxDataItem item) {
-		ColoringStyle coloringStyle = appearanceData.getColoringStyle();
-		setParameterIfEdited(item, COLORING_TYPE, coloringStyle != null ? coloringStyle.getId() : null);
-		setParameterIfEdited(item, COLOR, appearanceData.getCustomColor());
-		setParameterIfEdited(item, WIDTH, appearanceData.getWidthValue());
-		setParameterIfEdited(item, SHOW_ARROWS, appearanceData.shouldShowArrows());
-		setParameterIfEdited(item, SHOW_START_FINISH, appearanceData.shouldShowStartFinish());
-		setParameterIfEdited(item, SPLIT_TYPE, appearanceData.getSplitType());
-		setParameterIfEdited(item, SPLIT_INTERVAL, appearanceData.getSplitInterval());
+		for (GpxParameter parameter : GpxParameter.getAppearanceParameters()) {
+			setParameterIfEdited(item, parameter, data.getParameter(parameter));
+		}
 		app.getGpxDbHelper().updateDataItem(item);
 
 		SelectedGpxFile selectedGpxFile = selectionHelper.getSelectedFileByPath(item.getFile().getAbsolutePath());
@@ -89,26 +81,26 @@ private void setParameterIfEdited(@NonNull GpxDataItem item, @NonNull GpxParamet
 	}
 
 	private void updateCurrentTrackAppearance() {
-		Integer customColor = appearanceData.getCustomColor();
-		if (customColor != null) {
-			settings.CURRENT_TRACK_COLOR.set(customColor);
+		Integer color = data.getParameter(COLOR);
+		if (color != null) {
+			settings.CURRENT_TRACK_COLOR.set(color);
 		}
-		ColoringStyle coloringStyle = appearanceData.getColoringStyle();
-		if (coloringStyle != null) {
-			settings.CURRENT_TRACK_COLORING_TYPE.set(coloringStyle.getType());
-			settings.CURRENT_TRACK_ROUTE_INFO_ATTRIBUTE.set(coloringStyle.getRouteInfoAttribute());
+		String coloringType = data.getParameter(COLORING_TYPE);
+		if (coloringType != null) {
+			settings.CURRENT_TRACK_COLORING_TYPE.set(ColoringType.requireValueOf(TRACK, coloringType));
+			settings.CURRENT_TRACK_ROUTE_INFO_ATTRIBUTE.set(ColoringType.getRouteInfoAttribute(coloringType));
 		}
-		String widthValue = appearanceData.getWidthValue();
-		if (widthValue != null) {
-			settings.CURRENT_TRACK_WIDTH.set(widthValue);
+		String width = data.getParameter(WIDTH);
+		if (width != null) {
+			settings.CURRENT_TRACK_WIDTH.set(width);
 		}
-		Boolean shouldShowArrows = appearanceData.shouldShowArrows();
-		if (shouldShowArrows != null) {
-			settings.CURRENT_TRACK_SHOW_ARROWS.set(shouldShowArrows);
+		Boolean showArrows = data.getParameter(SHOW_ARROWS);
+		if (showArrows != null) {
+			settings.CURRENT_TRACK_SHOW_ARROWS.set(showArrows);
 		}
-		Boolean shouldShowStartFinish = appearanceData.shouldShowStartFinish();
-		if (shouldShowStartFinish != null) {
-			settings.CURRENT_TRACK_SHOW_START_FINISH.set(shouldShowStartFinish);
+		Boolean showStartFinish = data.getParameter(SHOW_START_FINISH);
+		if (showStartFinish != null) {
+			settings.CURRENT_TRACK_SHOW_START_FINISH.set(showStartFinish);
 		}
 	}
 
@@ -134,11 +126,4 @@ protected void onPostExecute(Void result) {
 			callback.processResult(null);
 		}
 	}
-
-	public static void execute(@NonNull FragmentActivity activity,
-	                           @NonNull AppearanceData appearanceData,
-	                           @NonNull Set<TrackItem> trackItems,
-	                           @Nullable CallbackWithObject<Void> callback) {
-		new ChangeAppearanceTask(activity, appearanceData, trackItems, callback).execute();
-	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/helpers/AndroidUiHelper.java b/OsmAnd/src/net/osmand/plus/helpers/AndroidUiHelper.java
index 9870c5244f1..65066264a6d 100644
--- a/OsmAnd/src/net/osmand/plus/helpers/AndroidUiHelper.java
+++ b/OsmAnd/src/net/osmand/plus/helpers/AndroidUiHelper.java
@@ -178,9 +178,9 @@ public static boolean isOrientationPortrait(@NonNull Activity ctx) {
 				orientation == ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;
 	}
 
-	public static void setStatusBarContentColor(@Nullable View view, boolean isNightMode) {
+	public static void setStatusBarContentColor(@Nullable View view, boolean nightMode) {
 		if (view != null) {
-			setStatusBarContentColor(view, view.getSystemUiVisibility(), !isNightMode);
+			setStatusBarContentColor(view, view.getSystemUiVisibility(), !nightMode);
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/dialogs/BaseTrackFolderFragment.java b/OsmAnd/src/net/osmand/plus/myplaces/tracks/dialogs/BaseTrackFolderFragment.java
index 6a82ea24637..5d6cfedc124 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/dialogs/BaseTrackFolderFragment.java
+++ b/OsmAnd/src/net/osmand/plus/myplaces/tracks/dialogs/BaseTrackFolderFragment.java
@@ -40,7 +40,7 @@
 import net.osmand.plus.configmap.tracks.TrackTab;
 import net.osmand.plus.configmap.tracks.TrackTabType;
 import net.osmand.plus.configmap.tracks.TracksComparator;
-import net.osmand.plus.configmap.tracks.appearance.ChangeAppearanceController;
+import net.osmand.plus.configmap.tracks.appearance.DefaultAppearanceController;
 import net.osmand.plus.configmap.tracks.viewholders.EmptyTracksViewHolder.EmptyTracksListener;
 import net.osmand.plus.configmap.tracks.viewholders.SortTracksViewHolder.SortTracksListener;
 import net.osmand.plus.configmap.tracks.viewholders.TrackViewHolder.TrackSelectionListener;
@@ -49,7 +49,6 @@
 import net.osmand.plus.importfiles.ImportHelper;
 import net.osmand.plus.myplaces.MyPlacesActivity;
 import net.osmand.plus.myplaces.favorites.dialogs.FragmentStateHolder;
-import net.osmand.plus.myplaces.tracks.ItemsSelectionHelper;
 import net.osmand.plus.myplaces.tracks.ItemsSelectionHelper.SelectionHelperProvider;
 import net.osmand.plus.myplaces.tracks.TrackFoldersHelper;
 import net.osmand.plus.myplaces.tracks.TracksSearchFilter;
@@ -536,8 +535,7 @@ public void showExportDialog(@NonNull SmartFolder folder) {
 	public void showChangeAppearanceDialog(@NonNull TrackFolder folder) {
 		FragmentActivity activity = getActivity();
 		if (activity != null) {
-			ItemsSelectionHelper<TrackItem> selectionHelper = getSelectionHelper();
-			ChangeAppearanceController.showDialog(activity, this, selectionHelper.getSelectedItems());
+			DefaultAppearanceController.showDialog(activity, folder);
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/routepreparationmenu/cards/BaseCard.java b/OsmAnd/src/net/osmand/plus/routepreparationmenu/cards/BaseCard.java
index cc74e3e2899..d11b5ba24b8 100644
--- a/OsmAnd/src/net/osmand/plus/routepreparationmenu/cards/BaseCard.java
+++ b/OsmAnd/src/net/osmand/plus/routepreparationmenu/cards/BaseCard.java
@@ -218,21 +218,7 @@ public void setText(int viewId, @NonNull String text) {
 		}
 	}
 
-	public void setBackgroundColor(@ColorInt int backgroundColor) {
-		view.setBackgroundColor(backgroundColor);
-	}
-
-	public void updateVisibility(int viewId, boolean show) {
-		if (view != null) {
-			updateVisibility(view.findViewById(viewId), show);
-		}
-	}
-
 	public void updateVisibility(boolean show) {
-		updateVisibility(view, show);
-	}
-
-	public void updateVisibility(@Nullable View view, boolean show) {
 		AndroidUiHelper.updateVisibility(view, show);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/settings/bottomsheets/ConfirmationBottomSheet.java b/OsmAnd/src/net/osmand/plus/settings/bottomsheets/ConfirmationBottomSheet.java
index fa0eeda564d..7e93cc26b8b 100644
--- a/OsmAnd/src/net/osmand/plus/settings/bottomsheets/ConfirmationBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/settings/bottomsheets/ConfirmationBottomSheet.java
@@ -85,9 +85,7 @@ protected void onDismissButtonClickAction() {
 		dismiss();
 	}
 
-	public static void showResetSettingsDialog(@NonNull FragmentManager manager,
-	                                           @NonNull Fragment target,
-	                                           @StringRes int titleId) {
+	public static void showResetSettingsDialog(@NonNull FragmentManager manager, @NonNull Fragment target, @StringRes int titleId) {
 		ConfirmationBottomSheet fragment = new ConfirmationBottomSheet();
 		fragment.usedOnMap = false;
 		fragment.title = target.getString(titleId);
@@ -110,8 +108,7 @@ public static void showConfirmDeleteDialog(@NonNull FragmentManager manager, @No
 		showInstance(fragment, manager, target, actionId);
 	}
 
-	private static void showInstance(@NonNull ConfirmationBottomSheet fragment,
-	                                 @NonNull FragmentManager manager,
+	private static void showInstance(@NonNull ConfirmationBottomSheet fragment, @NonNull FragmentManager manager,
 	                                 @NonNull Fragment target, int actionId) {
 		if (AndroidUtils.isFragmentCanBeAdded(manager, TAG)) {
 			fragment.actionId = actionId;
diff --git a/OsmAnd/src/net/osmand/plus/settings/controllers/RouteLineColorController.java b/OsmAnd/src/net/osmand/plus/settings/controllers/RouteLineColorController.java
index c726ace34ea..b1ca7b5fb55 100644
--- a/OsmAnd/src/net/osmand/plus/settings/controllers/RouteLineColorController.java
+++ b/OsmAnd/src/net/osmand/plus/settings/controllers/RouteLineColorController.java
@@ -14,16 +14,16 @@
 import net.osmand.plus.base.dialog.DialogManager;
 import net.osmand.plus.base.dialog.interfaces.controller.IDialogController;
 import net.osmand.plus.card.color.ColoringPurpose;
-import net.osmand.plus.card.color.IControlsColorProvider;
-import net.osmand.plus.card.color.cstyle.ColoringStyleDetailsCard;
 import net.osmand.plus.card.color.ColoringStyle;
 import net.osmand.plus.card.color.ColoringStyleCardController;
+import net.osmand.plus.card.color.IControlsColorProvider;
+import net.osmand.plus.card.color.cstyle.ColoringStyleDetailsCard;
 import net.osmand.plus.card.color.cstyle.ColoringStyleDetailsCardController;
 import net.osmand.plus.card.color.cstyle.IColoringStyleDetailsController;
 import net.osmand.plus.card.color.palette.main.data.ColorsCollection;
 import net.osmand.plus.card.color.palette.main.data.ColorsCollectionBundle;
-import net.osmand.plus.card.color.palette.main.data.PaletteColor;
 import net.osmand.plus.card.color.palette.main.data.DefaultColors;
+import net.osmand.plus.card.color.palette.main.data.PaletteColor;
 import net.osmand.plus.card.color.palette.main.data.PaletteMode;
 import net.osmand.plus.card.color.palette.moded.ModedColorsPaletteCard;
 import net.osmand.plus.card.color.palette.moded.ModedColorsPaletteController;
@@ -57,9 +57,9 @@ public class RouteLineColorController extends ColoringStyleCardController
 	private IColoringStyleDetailsController coloringStyleDetailsController;
 	private boolean initialNightMode;
 
-	private RouteLineColorController(@NonNull OsmandApplication app,
-	                                 @NonNull ColoringStyle selectedColoringStyle) {
-		super(app, selectedColoringStyle);
+	private RouteLineColorController(@NonNull OsmandApplication app, @NonNull ColoringStyle selectedStyle) {
+		super(app);
+		this.selectedState = findCardState(selectedStyle);
 	}
 
 	public void setRouteLinePreview(@NonNull PreviewRouteLineInfo routeLinePreview) {
@@ -250,6 +250,5 @@ public static RouteLineColorController getInstance(@NonNull OsmandApplication ap
 		return controller;
 	}
 
-	public interface IRouteLineColorControllerListener
-			extends IColorCardControllerListener, OnPaletteModeSelectedListener { }
+	public interface IRouteLineColorControllerListener extends IColorCardControllerListener, OnPaletteModeSelectedListener {}
 }
diff --git a/OsmAnd/src/net/osmand/plus/settings/controllers/RouteLineWidthController.java b/OsmAnd/src/net/osmand/plus/settings/controllers/RouteLineWidthController.java
index 29ae5310b51..67506a3171b 100644
--- a/OsmAnd/src/net/osmand/plus/settings/controllers/RouteLineWidthController.java
+++ b/OsmAnd/src/net/osmand/plus/settings/controllers/RouteLineWidthController.java
@@ -49,7 +49,8 @@ public class RouteLineWidthController extends BaseMultiStateCardController imple
 	private IRouteLineWidthControllerListener listener;
 
 	public RouteLineWidthController(@NonNull OsmandApplication app, @Nullable String widthValue) {
-		super(app, widthValue);
+		super(app);
+		this.selectedState = findCardState(widthValue);
 	}
 
 	public void setListener(@NonNull IRouteLineWidthControllerListener listener) {
@@ -77,8 +78,8 @@ public String getCardTitle() {
 	@NonNull
 	@Override
 	public String getCardStateSelectorTitle() {
-		return selectedCardState.getTag() == null
-				? selectedCardState.toHumanString(app)
+		return selectedState.getTag() == null
+				? selectedState.toHumanString(app)
 				: getWidthComponentController().getSummary(app);
 	}
 
@@ -91,7 +92,7 @@ protected void onSelectCardState(@NonNull CardState cardState) {
 	@Override
 	public void onBindCardContent(@NonNull FragmentActivity activity,
 	                              @NonNull ViewGroup container, boolean nightMode) {
-		if (selectedCardState.getTag() == null) {
+		if (selectedState.getTag() == null) {
 			bindSummaryCard(activity, container, nightMode);
 		} else {
 			bindWidthComponentCardIfNeeded(activity, container);
@@ -141,14 +142,14 @@ public void onStopTrackingTouch(@NonNull Slider slider) {
 			});
 			updateColorItems();
 		}
-		controller.askSelectWidthMode(getWidthValue(selectedCardState));
+		controller.askSelectWidthMode(getWidthValue(selectedState));
 		container.setTag(WIDTH_COMPONENT_CARD_ID);
 	}
 
 	private void onWidthValueSelected(@Nullable String widthValue) {
 		setRouteLineWidth(widthValue);
-		selectedCardState = findCardStateByWidthValue(widthValue);
-		cardInstance.updateSelectedCardState();
+		selectedState = findCardStateByWidthValue(widthValue);
+		card.updateSelectedCardState();
 		listener.onRouteLineWidthSelected(widthValue);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/track/fragments/controller/TrackColorController.java b/OsmAnd/src/net/osmand/plus/track/fragments/controller/TrackColorController.java
index 5ba8421fcad..a21aa83ad6e 100644
--- a/OsmAnd/src/net/osmand/plus/track/fragments/controller/TrackColorController.java
+++ b/OsmAnd/src/net/osmand/plus/track/fragments/controller/TrackColorController.java
@@ -32,8 +32,8 @@
 import net.osmand.plus.card.color.palette.main.IColorsPaletteController;
 import net.osmand.plus.card.color.palette.main.data.ColorsCollection;
 import net.osmand.plus.card.color.palette.main.data.ColorsCollectionBundle;
-import net.osmand.plus.card.color.palette.main.data.PredefinedPaletteColor;
 import net.osmand.plus.card.color.palette.main.data.PaletteColor;
+import net.osmand.plus.card.color.palette.main.data.PredefinedPaletteColor;
 import net.osmand.plus.chooseplan.PromoBannerCard;
 import net.osmand.plus.routing.ColoringType;
 import net.osmand.plus.settings.backend.OsmandSettings;
@@ -49,8 +49,7 @@
 import java.util.ArrayList;
 import java.util.List;
 
-public class TrackColorController
-		extends ColoringStyleCardController implements IDialogController, IControlsColorProvider {
+public class TrackColorController extends ColoringStyleCardController implements IDialogController, IControlsColorProvider {
 
 	private static final String PROCESS_ID = "select_track_color";
 
@@ -63,9 +62,10 @@ public class TrackColorController
 	public TrackColorController(@NonNull OsmandApplication app,
 	                            @Nullable SelectedGpxFile selectedGpx,
 	                            @NonNull TrackDrawInfo drawInfo) {
-		super(app, drawInfo.getColoringStyle());
+		super(app);
 		this.selectedGpx = selectedGpx;
 		this.drawInfo = drawInfo;
+		this.selectedState = findCardState(drawInfo.getColoringStyle());
 	}
 
 	@Override
@@ -113,7 +113,7 @@ public void askSelectColoringStyle(@NonNull ColoringStyle coloringStyle) {
 		if (isDataAvailable(coloringStyle)) {
 			super.askSelectColoringStyle(coloringStyle);
 		} else {
-			showUnavailableColoringStyleSnackBar(cardInstance.getActivity(), coloringStyle, cardInstance.getSelectorView());
+			showUnavailableColoringStyleSnackBar(card.getActivity(), coloringStyle, card.getSelectorView());
 		}
 	}
 
@@ -177,7 +177,7 @@ private void showUnavailableColoringStyleSnackBar(@NonNull FragmentActivity acti
 		text += " " + app.getString(R.string.select_another_colorization);
 		Snackbar snackbar = Snackbar.make(view, text, Snackbar.LENGTH_LONG)
 				.setAnchorView(activity.findViewById(R.id.dismiss_button));
-		UiUtilities.setupSnackbar(snackbar, cardInstance.isNightMode());
+		UiUtilities.setupSnackbar(snackbar, card.isNightMode());
 		snackbar.show();
 	}
 
