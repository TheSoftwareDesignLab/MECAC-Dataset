diff --git a/OsmAnd/src/net/osmand/plus/views/controls/MapHudLayout.java b/OsmAnd/src/net/osmand/plus/views/controls/MapHudLayout.java
index f04cbffdedc..4387bd443fe 100644
--- a/OsmAnd/src/net/osmand/plus/views/controls/MapHudLayout.java
+++ b/OsmAnd/src/net/osmand/plus/views/controls/MapHudLayout.java
@@ -191,10 +191,11 @@ private ButtonPositionSize updateWidgetPosition(@NonNull View view, @NonNull But
 			int parentWidth = getWidth();
 			int parentHeight = getAdjustedHeight();
 			int[] margins = AndroidUtils.getRelativeMargins(this, view);
-
-			position.calcGridPositionFromPixel(dpToPx, parentWidth, parentHeight,
-					position.left, position.left ? margins[0] : margins[2],
-					position.top, position.top ? margins[1] - statusBarHeight : margins[3] - statusBarHeight);
+			if (margins[0] >= 0 && margins[1] >= 0 && margins[2] >= 0 && margins[3] >= 0) {
+				position.calcGridPositionFromPixel(dpToPx, parentWidth, parentHeight,
+						position.left, position.left ? margins[0] : margins[2],
+						position.top, position.top ? margins[1] - statusBarHeight : margins[3] - statusBarHeight);
+			}
 		}
 		return position;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapControlsLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapControlsLayer.java
index 57e439f0548..38096ef1e30 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapControlsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapControlsLayer.java
@@ -209,7 +209,7 @@ public void hideMapControls() {
 
 	private void animateMapControls(boolean show) {
 		MapActivity mapActivity = requireMapActivity();
-		View mapHudLayout = mapActivity.findViewById(R.id.map_hud_layout);
+		MapHudLayout mapHudLayout = mapActivity.findViewById(R.id.map_hud_layout);
 		View mapHudButtonsTop = mapActivity.findViewById(R.id.MapHudButtonsOverlayTop);
 		View mapHudButtonsBottom = mapActivity.findViewById(R.id.MapHudButtonsOverlayBottom);
 
@@ -245,6 +245,7 @@ public void onAnimationEnd(Animator animation) {
 					mapHudButtonsBottom.setTranslationY(transBottomInitial);
 					mapHudLayout.setAlpha(alphaInitial);
 				}
+				mapHudLayout.updateButtons();
 				mapActivity.updateStatusBarColor();
 			}
 		});
