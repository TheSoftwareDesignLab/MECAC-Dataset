diff --git a/OsmAnd/src/net/osmand/plus/activities/search/SearchHistoryFragment.java b/OsmAnd/src/net/osmand/plus/activities/search/SearchHistoryFragment.java
index 4052e18bd32..da8592c1efe 100644
--- a/OsmAnd/src/net/osmand/plus/activities/search/SearchHistoryFragment.java
+++ b/OsmAnd/src/net/osmand/plus/activities/search/SearchHistoryFragment.java
@@ -1,6 +1,5 @@
 package net.osmand.plus.activities.search;
 
-import android.app.Activity;
 import android.content.DialogInterface;
 import android.content.Intent;
 import android.os.Bundle;
@@ -21,6 +20,7 @@
 import android.widget.TextView.BufferType;
 
 import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
 import androidx.appcompat.app.AlertDialog;
 import androidx.appcompat.widget.PopupMenu;
 import androidx.core.view.ViewCompat;
@@ -40,6 +40,7 @@
 import net.osmand.plus.base.OsmAndListFragment;
 import net.osmand.plus.helpers.SearchHistoryHelper;
 import net.osmand.plus.helpers.SearchHistoryHelper.HistoryEntry;
+import net.osmand.util.Algorithms;
 import net.osmand.util.MapUtils;
 
 import java.util.List;
@@ -236,21 +237,16 @@ public View getView(final int position, View convertView, ViewGroup parent) {
 				row = inflater.inflate(R.layout.search_history_list_item, parent, false);
 			}
 			final HistoryEntry historyEntry = getItem(position);
-			udpateHistoryItem(historyEntry, row, location, getActivity(), getMyApplication());
-			TextView distanceText = (TextView) row.findViewById(R.id.distance);
-			ImageView direction = (ImageView) row.findViewById(R.id.direction);
+			updateHistoryItem(historyEntry, row, location, getMyApplication());
+			TextView distanceText = row.findViewById(R.id.distance);
+			ImageView direction = row.findViewById(R.id.direction);
 			getMyApplication().getUIUtilities().updateLocationView(updateLocationViewCache, 
 					direction, distanceText, historyEntry.getLat(),
 					historyEntry.getLon());
-			ImageButton options = (ImageButton) row.findViewById(R.id.options);
+			ImageButton options = row.findViewById(R.id.options);
 			options.setImageDrawable(getMyApplication().getUIUtilities().getThemedIcon(R.drawable.ic_overflow_menu_white));
 			options.setVisibility(View.VISIBLE);
-			options.setOnClickListener(new View.OnClickListener() {
-				@Override
-				public void onClick(View v) {
-					selectModelOptions(historyEntry, v);
-				}
-			});
+			options.setOnClickListener(v -> selectModelOptions(historyEntry, v));
 			if (getActivity() instanceof SearchActivity)
 				ViewCompat.setAccessibilityDelegate(row, ((SearchActivity)getActivity()).getAccessibilityAssistant());
 			return row;
@@ -258,27 +254,29 @@ public void onClick(View v) {
 	}
 	
 				
-	public static void udpateHistoryItem(final HistoryEntry historyEntry, View row,
-			LatLon location, Activity activity, OsmandApplication app) {
-		TextView nameText = (TextView) row.findViewById(R.id.name);
-		TextView distanceText = (TextView) row.findViewById(R.id.distance);
-		ImageView direction = (ImageView) row.findViewById(R.id.direction);
+	public static void updateHistoryItem(@NonNull HistoryEntry historyEntry, @NonNull View row,
+	                                     @Nullable LatLon location, @NonNull OsmandApplication app) {
+		TextView nameText = row.findViewById(R.id.name);
+		TextView distanceText = row.findViewById(R.id.distance);
+		ImageView direction = row.findViewById(R.id.direction);
 		UiUtilities ic = app.getUIUtilities();
 		direction.setImageDrawable(ic.getIcon(R.drawable.ic_direction_arrow, R.color.color_distance));
+
 		String distance = "";
 		if (location != null) {
 			int dist = (int) (MapUtils.getDistance(location, historyEntry.getLat(), historyEntry.getLon()));
-			distance = OsmAndFormatter.getFormattedDistance(dist, (OsmandApplication) activity.getApplication()) + "  ";
+			distance = OsmAndFormatter.getFormattedDistance(dist, app) + "  ";
 		}
 		distanceText.setText(distance);
-		PointDescription pd = historyEntry.getName();
-		nameText.setText(pd.getSimpleName(activity, false), BufferType.SPANNABLE);
-		ImageView icon = ((ImageView) row.findViewById(R.id.icon));
-		icon.setImageDrawable(ic.getThemedIcon(getItemIcon(historyEntry.getName())));
-
-		String typeName = historyEntry.getName().getTypeName();
-		if (typeName != null && !typeName.isEmpty()) {
-			ImageView group = (ImageView) row.findViewById(R.id.type_name_icon);
+
+		PointDescription pointDescription = historyEntry.getName();
+		nameText.setText(pointDescription.getSimpleName(app, false), BufferType.SPANNABLE);
+		ImageView icon = row.findViewById(R.id.icon);
+		icon.setImageDrawable(ic.getThemedIcon(getItemIcon(pointDescription)));
+
+		String typeName = pointDescription.getTypeName();
+		if (!Algorithms.isEmpty(typeName)) {
+			ImageView group = row.findViewById(R.id.type_name_icon);
 			group.setVisibility(View.VISIBLE);
 			group.setImageDrawable(ic.getThemedIcon(R.drawable.ic_action_group_name_16));
 			((TextView) row.findViewById(R.id.type_name)).setText(typeName);
@@ -298,6 +296,8 @@ public static int getItemIcon(@NonNull PointDescription pd) {
 			iconId = R.drawable.ic_action_marker_dark;
 		} else if (pd.isPoi()) {
 			iconId = R.drawable.ic_action_info_dark;
+		} else if (pd.isGpxFile()) {
+			iconId = R.drawable.ic_action_polygom_dark;
 		} else if (pd.isWpt()) {
 			iconId = R.drawable.ic_action_flag_stroke;
 		} else if (pd.isAudioNote()) {
diff --git a/OsmAnd/src/net/osmand/plus/dashboard/DashBaseFragment.java b/OsmAnd/src/net/osmand/plus/dashboard/DashBaseFragment.java
index 8958a7fd5e7..c20d4423873 100644
--- a/OsmAnd/src/net/osmand/plus/dashboard/DashBaseFragment.java
+++ b/OsmAnd/src/net/osmand/plus/dashboard/DashBaseFragment.java
@@ -23,20 +23,15 @@
 import net.osmand.plus.widgets.tools.SwipeDismissTouchListener;
 
 public abstract class DashBaseFragment extends Fragment {
+
 	protected DashboardOnMap dashboard;
 
+	private DismissListener defaultDismissListener;
+
 	public interface DismissListener {
 		void onDismiss();
 	}
 
-	@Nullable
-	public OsmandApplication getMyApplication() {
-		if (getActivity() == null) {
-			return null;
-		}
-		return (OsmandApplication) getActivity().getApplication();
-	}
-
 	@Override
 	public void onAttach(@NonNull Context context) {
 		super.onAttach(context);
@@ -115,7 +110,9 @@ public final void onPause() {
 	}
 
 	public void closeDashboard() {
-		dashboard.hideDashboard(false);
+		if (dashboard != null) {
+			dashboard.hideDashboard(false);
+		}
 	}
 
 	@Override
@@ -153,7 +150,25 @@ protected View getParentView() {
 		return dashboard.getParentView();
 	}
 
-	private DismissListener defaultDismissListener;
+	@Nullable
+	protected MapActivity getMapActivity() {
+		return getActivity() == null ? null : ((MapActivity) getActivity());
+	}
+
+	@NonNull
+	protected MapActivity requireMapActivity() {
+		return ((MapActivity) requireActivity());
+	}
+
+	@Nullable
+	protected OsmandApplication getMyApplication() {
+		return getActivity() == null ? null : ((OsmandApplication) getActivity().getApplication());
+	}
+
+	@NonNull
+	protected OsmandApplication requireMyApplication() {
+		return ((OsmandApplication) requireActivity().getApplication());
+	}
 
 	public static class DefaultDismissListener implements DismissListener {
 		private View parentView;
diff --git a/OsmAnd/src/net/osmand/plus/dashboard/DashLocationFragment.java b/OsmAnd/src/net/osmand/plus/dashboard/DashLocationFragment.java
index bb4f89d6fca..33233aba7ed 100644
--- a/OsmAnd/src/net/osmand/plus/dashboard/DashLocationFragment.java
+++ b/OsmAnd/src/net/osmand/plus/dashboard/DashLocationFragment.java
@@ -4,6 +4,7 @@
 import java.util.List;
 
 import net.osmand.data.LatLon;
+import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.utils.UiUtilities.UpdateLocationViewCache;
 import android.annotation.SuppressLint;
@@ -50,11 +51,11 @@ public LatLon getDefaultLocation() {
 	}
 
 	public void updateAllWidgets() {
-		DashboardOnMap d = dashboard;
-		if (d == null) {
+		OsmandApplication app = getMyApplication();
+		if (app == null || dashboard == null) {
 			return;
 		}
-		UiUtilities ic = getMyApplication().getUIUtilities();
+		UiUtilities ic = app.getUIUtilities();
 		UpdateLocationViewCache cache = ic.getUpdateLocationViewCache();
 		for (DashLocationView lv : distances) {
 			cache.arrowResId = lv.arrowResId;
diff --git a/OsmAnd/src/net/osmand/plus/dashboard/DashRecentsFragment.java b/OsmAnd/src/net/osmand/plus/dashboard/DashRecentsFragment.java
index 1c53018106d..1f18aeec2f1 100644
--- a/OsmAnd/src/net/osmand/plus/dashboard/DashRecentsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/dashboard/DashRecentsFragment.java
@@ -1,5 +1,7 @@
 package net.osmand.plus.dashboard;
 
+import android.app.Activity;
+import android.graphics.drawable.Drawable;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
@@ -8,9 +10,11 @@
 import android.widget.LinearLayout;
 import android.widget.TextView;
 
-import androidx.annotation.Nullable;
-
+import net.osmand.CallbackWithObject;
+import net.osmand.GPXUtilities.GPXFile;
 import net.osmand.data.LatLon;
+import net.osmand.data.PointDescription;
+import net.osmand.data.QuadRect;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
@@ -18,17 +22,29 @@
 import net.osmand.plus.dashboard.tools.DashFragmentData;
 import net.osmand.plus.dialogs.DirectionsDialogs;
 import net.osmand.plus.helpers.AndroidUiHelper;
+import net.osmand.plus.helpers.GpxUiHelper;
 import net.osmand.plus.helpers.SearchHistoryHelper;
 import net.osmand.plus.helpers.SearchHistoryHelper.HistoryEntry;
+import net.osmand.plus.routing.GPXRouteParams.GPXRouteParamsBuilder;
+import net.osmand.plus.track.fragments.TrackMenuFragment;
+import net.osmand.plus.track.fragments.TrackSelectSegmentBottomSheet;
+import net.osmand.plus.track.fragments.TrackSelectSegmentBottomSheet.OnSegmentSelectedListener;
+import net.osmand.plus.track.helpers.GpxSelectionHelper.SelectedGpxFile;
 import net.osmand.util.Algorithms;
 
-import java.util.ArrayList;
+import java.io.File;
 import java.util.List;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.fragment.app.FragmentManager;
+
+import static net.osmand.IndexConstants.GPX_INDEX_DIR;
+
 /**
  * Created by Denis on 24.11.2014.
  */
-public class DashRecentsFragment extends DashLocationFragment {
+public class DashRecentsFragment extends DashLocationFragment implements OnSegmentSelectedListener {
 
 	public static final String TAG = "DASH_RECENTS_FRAGMENT";
 	public static final int TITLE_ID = R.string.shared_string_history;
@@ -70,9 +86,8 @@ public void setupRecents() {
 		if (mainView == null) {
 			return;
 		}
-
-		SearchHistoryHelper helper = SearchHistoryHelper.getInstance((OsmandApplication) getActivity()
-				.getApplicationContext());
+		OsmandApplication app = requireMyApplication();
+		SearchHistoryHelper helper = SearchHistoryHelper.getInstance(app);
 		List<HistoryEntry> historyEntries = helper.getHistoryEntries(true);
 		if (Algorithms.isEmpty(historyEntries)) {
 			AndroidUiHelper.updateVisibility(mainView.findViewById(R.id.main_fav), false);
@@ -83,39 +98,134 @@ public void setupRecents() {
 
 		LinearLayout recents = mainView.findViewById(R.id.items);
 		recents.removeAllViews();
-		DashboardOnMap.handleNumberOfRows(historyEntries, getMyApplication().getSettings(), ROW_NUMBER_TAG);
+		DashboardOnMap.handleNumberOfRows(historyEntries, app.getSettings(), ROW_NUMBER_TAG);
 		LatLon loc = getDefaultLocation();
-		List<DashLocationView> distances = new ArrayList<DashLocationFragment.DashLocationView>();
-		for (final HistoryEntry historyEntry : historyEntries) {
-			LayoutInflater inflater = getActivity().getLayoutInflater();
-			View view = inflater.inflate(R.layout.search_history_list_item, null, false);
-			SearchHistoryFragment.udpateHistoryItem(historyEntry, view, loc, getActivity(), getMyApplication());
-			view.findViewById(R.id.divider).setVisibility(View.VISIBLE);
-			view.findViewById(R.id.navigate_to).setVisibility(View.VISIBLE);
-			((ImageView) view.findViewById(R.id.navigate_to)).setImageDrawable(getMyApplication().getUIUtilities().getThemedIcon(R.drawable.ic_action_gdirections_dark));
-
-			view.findViewById(R.id.navigate_to).setOnClickListener(v -> {
-				if (getActivity() != null) {
-					DirectionsDialogs.directionsToDialogAndLaunchMap(getActivity(), historyEntry.getLat(),
-							historyEntry.getLon(), historyEntry.getName());
+
+		for (HistoryEntry historyEntry : historyEntries) {
+			LayoutInflater inflater = requireActivity().getLayoutInflater();
+			View itemView = inflater.inflate(R.layout.search_history_list_item, null, false);
+			SearchHistoryFragment.updateHistoryItem(historyEntry, itemView, loc, app);
+			itemView.findViewById(R.id.divider).setVisibility(View.VISIBLE);
+			itemView.findViewById(R.id.navigate_to).setVisibility(View.VISIBLE);
+
+			Drawable navigationIcon = app.getUIUtilities().getThemedIcon(R.drawable.ic_action_gdirections_dark);
+			((ImageView) itemView.findViewById(R.id.navigate_to)).setImageDrawable(navigationIcon);
+
+			itemView.findViewById(R.id.navigate_to).setOnClickListener(v -> runNavigation(historyEntry));
+			itemView.setOnClickListener(v -> showContextMenu(historyEntry));
+			setupDistanceAndDirection(historyEntry, itemView);
+
+			recents.addView(itemView);
+		}
+	}
+
+	private void runNavigation(@NonNull HistoryEntry historyEntry) {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity == null) {
+			return;
+		}
+
+		PointDescription pointDescription = historyEntry.getName();
+		if (pointDescription.isGpxFile()) {
+			getGpxFile(pointDescription.getName(), gpxFile -> {
+				MapActivity mapActivity1 = getMapActivity();
+				if (mapActivity1 != null) {
+					navigateGpxFile(gpxFile, mapActivity1);
 				}
+				return false;
 			});
+		} else {
+			DirectionsDialogs.directionsToDialogAndLaunchMap(mapActivity, historyEntry.getLat(),
+					historyEntry.getLon(), historyEntry.getName());
+		}
+	}
 
-			view.setOnClickListener(v -> {
-				if (getActivity() != null) {
-					getMyApplication().getSettings().setMapLocationToShow(historyEntry.getLat(),
-							historyEntry.getLon(), 15, historyEntry.getName(), true,
-							historyEntry);
-					MapActivity.launchMapActivityMoveToTop(getActivity());
-				}
+	private void navigateGpxFile(@NonNull GPXFile gpxFile, @NonNull MapActivity mapActivity) {
+		if (gpxFile.getNonEmptySegmentsCount() > 1) {
+			FragmentManager fragmentManager = mapActivity.getSupportFragmentManager();
+			TrackSelectSegmentBottomSheet.showInstance(fragmentManager, gpxFile, this);
+		} else {
+			TrackMenuFragment.startNavigationForGPX(gpxFile, mapActivity.getMapActions(), mapActivity);
+			closeDashboard();
+		}
+	}
+
+	private void showContextMenu(@NonNull HistoryEntry historyEntry) {
+		Activity activity = getActivity();
+		if (activity == null) {
+			return;
+		}
+		OsmandApplication app = requireMyApplication();
+
+		PointDescription pointDescription = historyEntry.getName();
+		if (pointDescription.isGpxFile()) {
+			File tracksDir = app.getAppPath(GPX_INDEX_DIR);
+			String relativeGpxPath = pointDescription.getName();
+			File gpxFile = new File(tracksDir, relativeGpxPath);
+			if (gpxFile.isFile()) {
+				SearchHistoryHelper.getInstance(app).addNewItemToHistory(0, 0, pointDescription);
+				TrackMenuFragment.openTrack(activity, gpxFile, null);
+				closeDashboard();
+			}
+		} else {
+			app.getSettings().setMapLocationToShow(historyEntry.getLat(), historyEntry.getLon(),
+					15, historyEntry.getName(), true, historyEntry);
+			MapActivity.launchMapActivityMoveToTop(getActivity());
+		}
+	}
+
+	private void setupDistanceAndDirection(@NonNull HistoryEntry historyEntry, @NonNull View itemView) {
+		ImageView directionArrow = itemView.findViewById(R.id.direction);
+		TextView distanceText = itemView.findViewById(R.id.distance);
+		PointDescription pointDescription = historyEntry.getName();
+		if (pointDescription.isGpxFile()) {
+			String relativeGpxPath = pointDescription.getName();
+			getGpxFile(relativeGpxPath, gpxFile -> {
+				QuadRect gpxRect = gpxFile.getRect();
+				LatLon latLon = new LatLon(gpxRect.centerY(), gpxRect.centerX());
+				DashLocationView locationView = new DashLocationView(directionArrow, distanceText, latLon);
+				distances.add(locationView);
+				updateAllWidgets();
+				return true;
 			});
+		} else {
+			LatLon latLon = new LatLon(historyEntry.getLat(), historyEntry.getLon());
+			DashLocationView locationView = new DashLocationView(directionArrow, distanceText, latLon);
+			distances.add(locationView);
+		}
+	}
+
+	private void getGpxFile(@NonNull String relativeGpxPath, @NonNull CallbackWithObject<GPXFile> callback) {
+		MapActivity mapActivity = requireMapActivity();
+		OsmandApplication app = mapActivity.getMyApplication();
+		File tracksPath = app.getAppPath(GPX_INDEX_DIR);
+		String gpxPath = new File(tracksPath, relativeGpxPath).getAbsolutePath();
+		SelectedGpxFile selectedGpxFile = app.getSelectedGpxHelper().getSelectedFileByPath(gpxPath);
+		if (selectedGpxFile != null) {
+			callback.processResult(selectedGpxFile.getGpxFileToDisplay());
+		} else {
+			CallbackWithObject<GPXFile[]> onGpxLoaded = gpxFiles -> {
+				callback.processResult(gpxFiles[0]);
+				return false;
+			};
+			GpxUiHelper.loadGPXFileInDifferentThread(mapActivity, onGpxLoaded, tracksPath,
+					null, relativeGpxPath);
+		}
+	}
 
-			DashLocationView dv = new DashLocationView(view.findViewById(R.id.direction),
-					view.findViewById(R.id.distance), new LatLon(historyEntry.getLat(),
-							historyEntry.getLon()));
-			distances.add(dv);
-			recents.addView(view);
+	@Override
+	public void onSegmentSelect(GPXFile gpxFile, int selectedSegment) {
+		MapActivity mapActivity = getMapActivity();
+		if (mapActivity != null) {
+			OsmandApplication app = mapActivity.getMyApplication();
+			app.getSettings().GPX_ROUTE_SEGMENT.set(selectedSegment);
+			TrackMenuFragment.startNavigationForGPX(gpxFile, mapActivity.getMapActions(), mapActivity);
+			GPXRouteParamsBuilder paramsBuilder = app.getRoutingHelper().getCurrentGPXRoute();
+			if (paramsBuilder != null) {
+				paramsBuilder.setSelectedSegment(selectedSegment);
+				app.getRoutingHelper().onSettingsChanged(true);
+			}
+			closeDashboard();
 		}
-		this.distances = distances;
 	}
-}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/track/fragments/TrackMenuFragment.java b/OsmAnd/src/net/osmand/plus/track/fragments/TrackMenuFragment.java
index ca5154fc4b0..9191af2858d 100644
--- a/OsmAnd/src/net/osmand/plus/track/fragments/TrackMenuFragment.java
+++ b/OsmAnd/src/net/osmand/plus/track/fragments/TrackMenuFragment.java
@@ -1564,7 +1564,7 @@ public void onDismissGpsFilterFragment(boolean savedCopy, @Nullable String saved
 		}
 	}
 
-	public static void openTrack(@NonNull Context context, @Nullable File file, Bundle prevIntentParams) {
+	public static void openTrack(@NonNull Context context, @Nullable File file, @Nullable Bundle prevIntentParams) {
 		openTrack(context, file, prevIntentParams, null);
 	}
 
@@ -1574,7 +1574,7 @@ public static void openTrack(@NonNull Context context, @Nullable File file, @Nul
 	}
 
 	public static void openTrack(@NonNull Context context, @Nullable File file, @Nullable Bundle prevIntentParams,
-	                             @Nullable String returnScreenName, TrackMenuType tabToOpen) {
+	                             @Nullable String returnScreenName, @NonNull TrackMenuType tabToOpen) {
 		boolean currentRecording = file == null;
 		String path = file != null ? file.getAbsolutePath() : null;
 		if (context instanceof MapActivity) {
