diff --git a/OsmAnd-java/src/main/java/net/osmand/gpx/PointAttributes.java b/OsmAnd-java/src/main/java/net/osmand/gpx/PointAttributes.java
index 45a3ca903a0..fdebc3f8688 100644
--- a/OsmAnd-java/src/main/java/net/osmand/gpx/PointAttributes.java
+++ b/OsmAnd-java/src/main/java/net/osmand/gpx/PointAttributes.java
@@ -12,6 +12,8 @@ public class PointAttributes {
 	public static final String SENSOR_TAG_TEMPERATURE = "temp";
 	public static final String SENSOR_TAG_DISTANCE = "osmand:bike_distance_sensor";
 
+	public static final String DEV_ZOOM = "zoom";
+
 	public float distance;
 	public final float timeDiff;
 	public final boolean firstPoint;
@@ -24,6 +26,7 @@ public class PointAttributes {
 	public float bikeCadence;
 	public float bikePower;
 	public float temperature;
+	public float zoom;
 
 	public PointAttributes(float distance, float timeDiff, boolean firstPoint, boolean lastPoint) {
 		this.distance = distance;
@@ -48,6 +51,8 @@ public Float getAttributeValue(String tag) {
 				return bikePower;
 			case SENSOR_TAG_TEMPERATURE:
 				return temperature;
+			case DEV_ZOOM:
+				return zoom;
 		}
 		return null;
 	}
@@ -75,6 +80,9 @@ public void setAttributeValue(String tag, float value) {
 			case SENSOR_TAG_TEMPERATURE:
 				temperature = value;
 				break;
+			case DEV_ZOOM:
+				zoom = value;
+				break;
 		}
 	}
 
diff --git a/OsmAnd/res/layout/chart_marker_view.xml b/OsmAnd/res/layout/chart_marker_view.xml
index a72ff02417e..e2846ff1b59 100644
--- a/OsmAnd/res/layout/chart_marker_view.xml
+++ b/OsmAnd/res/layout/chart_marker_view.xml
@@ -75,79 +75,50 @@
 
         </LinearLayout>
 
-        <View
-            android:id="@+id/divider"
-            android:layout_width="1dp"
-            android:layout_height="match_parent"
-            android:layout_marginTop="1dp"
-            android:layout_marginBottom="1dp"
-            android:background="?attr/dashboard_divider" />
-
         <LinearLayout
             android:id="@+id/second_container"
             android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
+            android:layout_height="match_parent"
             android:orientation="horizontal"
             android:layout_gravity="center_vertical"
-            android:paddingStart="@dimen/chart_marker_horizontal_padding"
-            android:paddingTop="@dimen/chart_marker_vertical_padding"
-            android:paddingEnd="@dimen/chart_marker_horizontal_padding"
-            android:paddingBottom="@dimen/chart_marker_vertical_padding">
+            android:gravity="center_vertical">
 
-            <TextView
-                android:id="@id/text_value"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:ellipsize="end"
-                android:maxLines="1"
-                android:textColor="@color/gpx_chart_orange"
-                android:textSize="@dimen/default_desc_text_size"
-                android:textStyle="bold"
-                tools:text="100 "/>
+            <View
+                android:layout_width="1dp"
+                android:layout_height="match_parent"
+                android:layout_marginTop="1dp"
+                android:layout_marginBottom="1dp"
+                android:background="?attr/dashboard_divider" />
 
-            <TextView
-                android:id="@id/text_units"
+            <LinearLayout
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
-                android:ellipsize="end"
-                android:maxLines="1"
-                android:textColor="?android:attr/textColorSecondary"
-                android:textSize="@dimen/default_sub_text_size"
-                tools:text="km/h" />
-
-        </LinearLayout>
+                android:orientation="horizontal"
+                android:paddingStart="@dimen/chart_marker_horizontal_padding"
+                android:paddingEnd="@dimen/chart_marker_horizontal_padding">
 
-        <LinearLayout
-            android:id="@+id/third_container"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:orientation="horizontal"
-            android:layout_gravity="center_vertical"
-            android:paddingStart="@dimen/chart_marker_horizontal_padding"
-            android:paddingTop="@dimen/chart_marker_vertical_padding"
-            android:paddingEnd="@dimen/chart_marker_horizontal_padding"
-            android:paddingBottom="@dimen/chart_marker_vertical_padding">
+                <TextView
+                    android:id="@id/text_value"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:ellipsize="end"
+                    android:maxLines="1"
+                    android:textColor="@color/gpx_chart_orange"
+                    android:textSize="@dimen/default_desc_text_size"
+                    android:textStyle="bold"
+                    tools:text="100 " />
 
-            <TextView
-                android:id="@id/text_value"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:ellipsize="end"
-                android:maxLines="1"
-                android:textColor="@color/gpx_chart_green"
-                android:textSize="@dimen/default_desc_text_size"
-                android:textStyle="bold"
-                tools:text="100 "/>
+                <TextView
+                    android:id="@id/text_units"
+                    android:layout_width="wrap_content"
+                    android:layout_height="wrap_content"
+                    android:ellipsize="end"
+                    android:maxLines="1"
+                    android:textColor="?android:attr/textColorSecondary"
+                    android:textSize="@dimen/default_sub_text_size"
+                    tools:text="km/h" />
 
-            <TextView
-                android:id="@id/text_units"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:ellipsize="end"
-                android:maxLines="1"
-                android:text="%"
-                android:textColor="?android:attr/textColorSecondary"
-                android:textSize="@dimen/default_sub_text_size" />
+            </LinearLayout>
 
         </LinearLayout>
 
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index 7290df2855c..97b838c61b1 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -10,6 +10,8 @@
 	- For wording and consistency, please note https://docs.osmand.net/docs/technical/contributions/translating-osmand
 	Thx - Hardy
 -->
+    <string name="zoom_animated">Animated zoom</string>
+    <string name="zoom_non_animated">Non-animated zoom</string>
     <string name="remove_widget_first">Please remove widget first</string>
     <string name="add_row">Add row</string>
     <string name="row_number">Row %1$s</string>
diff --git a/OsmAnd/src/net/osmand/plus/base/MapViewTrackingUtilities.java b/OsmAnd/src/net/osmand/plus/base/MapViewTrackingUtilities.java
index f71c097b586..3fc77dc0072 100644
--- a/OsmAnd/src/net/osmand/plus/base/MapViewTrackingUtilities.java
+++ b/OsmAnd/src/net/osmand/plus/base/MapViewTrackingUtilities.java
@@ -39,6 +39,7 @@
 import net.osmand.plus.settings.enums.DrivingRegion;
 import net.osmand.plus.utils.NativeUtilities;
 import net.osmand.plus.views.AnimateDraggingMapThread;
+import net.osmand.plus.views.AutoZoomBySpeedUtils;
 import net.osmand.plus.views.OsmandMapTileView;
 import net.osmand.util.MapUtils;
 
@@ -223,8 +224,11 @@ public void updateLocation(Location location) {
 				Pair<Integer, Double> zoom = null;
 				Float rotation = null;
 				boolean pendingRotation = false;
-				if (settings.AUTO_ZOOM_MAP.get()) {
-					zoom = autozoom(tb, location);
+				if (shouldAutoZoom(location)) {
+					zoom = AutoZoomBySpeedUtils.calculateAutoZoomBySpeed(app, tb, location.getSpeed());
+					if (zoom != null) {
+						lastTimeAutoZooming = System.currentTimeMillis();
+					}
 				}
 				int currentMapRotation = settings.ROTATE_MAP.get();
 				boolean smallSpeedForCompass = isSmallSpeedForCompass(location);
@@ -369,38 +373,16 @@ private float defineZoomFromSpeed(RotatedTileBox tb, float speed) {
 		return (float) (Math.log(visibleDist / distToSee) / Math.log(2.0f));
 	}
 
-	@Nullable
-	public Pair<Integer, Double> autozoom(RotatedTileBox tb, Location location) {
-		if (location.hasSpeed()) {
-			long now = System.currentTimeMillis();
-			float zdelta = defineZoomFromSpeed(tb, location.getSpeed());
-			if (Math.abs(zdelta) >= 0.5/*?Math.sqrt(0.5)*/) {
-				// prevent ui hysteresis (check time interval for autozoom)
-				if (zdelta >= 2) {
-					// decrease a bit
-					zdelta -= 1;
-				} else if (zdelta <= -2) {
-					// decrease a bit
-					zdelta += 1;
-				}
-				double targetZoom = Math.min(tb.getZoom() + tb.getZoomFloatPart() + zdelta, settings.AUTO_ZOOM_MAP_SCALE.get().maxZoom);
-				boolean isUserZoomed = lastTimeManualZooming > lastTimeAutoZooming;
-				int threshold = settings.AUTO_FOLLOW_ROUTE.get();
-				if ((now - lastTimeAutoZooming > AUTO_ZOOM_DEFAULT_CHANGE_ZOOM && !isUserZoomed)
-						|| (now - lastTimeManualZooming > Math.max(threshold, AUTO_ZOOM_DEFAULT_CHANGE_ZOOM) && isUserZoomed)) {
-					lastTimeAutoZooming = now;
-//					double settingsZoomScale = Math.log(mapView.getSettingsMapDensity()) / Math.log(2.0f);
-//					double zoomScale = Math.log(tb.getMapDensity()) / Math.log(2.0f);
-//					double complexZoom = tb.getZoom() + zoomScale + zdelta;
-					// round to 0.33
-					targetZoom = Math.round(targetZoom * 3) / 3f;
-					int newIntegerZoom = (int) Math.round(targetZoom);
-					double zPart = targetZoom - newIntegerZoom;
-					return newIntegerZoom > 0 ? new Pair<>(newIntegerZoom, zPart) : null;
-				}
-			}
+	private boolean shouldAutoZoom(@NonNull Location location) {
+		if (!settings.AUTO_ZOOM_MAP.get() || !location.hasSpeed()) {
+			return false;
 		}
-		return null;
+
+		long now = System.currentTimeMillis();
+		boolean isUserZoomed = lastTimeManualZooming > lastTimeAutoZooming;
+		return isUserZoomed
+				? now - lastTimeManualZooming > Math.max(settings.AUTO_FOLLOW_ROUTE.get(), AUTO_ZOOM_DEFAULT_CHANGE_ZOOM)
+				: now - lastTimeAutoZooming > AUTO_ZOOM_DEFAULT_CHANGE_ZOOM;
 	}
 
 	public void backToLocationImpl() {
diff --git a/OsmAnd/src/net/osmand/plus/charts/ChartUtils.java b/OsmAnd/src/net/osmand/plus/charts/ChartUtils.java
index 3c669bc2e27..051f3628d23 100644
--- a/OsmAnd/src/net/osmand/plus/charts/ChartUtils.java
+++ b/OsmAnd/src/net/osmand/plus/charts/ChartUtils.java
@@ -544,6 +544,7 @@ public static OrderedLineDataSet createGPXSpeedDataSet(@NonNull OsmandApplicatio
 	                                                       @NonNull GPXDataSetType graphType,
 	                                                       @NonNull GPXDataSetAxisType axisType,
 	                                                       boolean useRightAxis,
+														   boolean setYAxisMinimum,
 	                                                       boolean drawFilled,
 	                                                       boolean calcWithoutGaps) {
 		OsmandSettings settings = app.getSettings();
@@ -558,9 +559,13 @@ public static OrderedLineDataSet createGPXSpeedDataSet(@NonNull OsmandApplicatio
 		boolean speedInTrack = analysis.hasSpeedInTrack();
 		int textColor = ColorUtilities.getColor(app, graphType.getTextColorId(!speedInTrack));
 		YAxis yAxis = getYAxis(chart, textColor, useRightAxis);
-		yAxis.setAxisMinimum(0f);
+		if (setYAxisMinimum) {
+			yAxis.setAxisMinimum(0f);
+		} else {
+			yAxis.resetAxisMinimum();
+		}
 
-		List<Entry> values = getPointAttributeValues(graphType.getDataKey(), analysis, axisType, divX, mulSpeed, divSpeed, calcWithoutGaps);
+		List<Entry> values = getPointAttributeValues(graphType.getDataKey(), analysis.pointAttributes, axisType, divX, mulSpeed, divSpeed, calcWithoutGaps);
 		OrderedLineDataSet dataSet = new OrderedLineDataSet(values, "", graphType, axisType, !useRightAxis);
 
 		String mainUnitY = graphType.getMainUnitY(app);
@@ -626,15 +631,15 @@ public static Pair<Float, Float> getScalingY(@NonNull OsmandApplication app, @No
 
 	@NonNull
 	public static List<Entry> getPointAttributeValues(@NonNull String key,
-	                                                  @NonNull GPXTrackAnalysis analysis,
+	                                                  @NonNull List<PointAttributes> pointAttributes,
 	                                                  @NonNull GPXDataSetAxisType axisType,
 	                                                  float divX, float mulY, float divY,
 	                                                  boolean calcWithoutGaps) {
 		List<Entry> values = new ArrayList<>();
 		float currentX = 0;
 
-		for (int i = 0; i < analysis.pointAttributes.size(); i++) {
-			PointAttributes attribute = analysis.pointAttributes.get(i);
+		for (int i = 0; i < pointAttributes.size(); i++) {
+			PointAttributes attribute = pointAttributes.get(i);
 
 			float stepX = axisType == TIME || axisType == TIME_OF_DAY ? attribute.timeDiff : attribute.distance;
 
@@ -829,13 +834,13 @@ public static List<ILineDataSet> getDataSets(LineChart chart,
 		}
 		List<ILineDataSet> result = new ArrayList<>();
 		if (secondType == null) {
-			ILineDataSet dataSet = getDataSet(app, chart, analysis, firstType, calcWithoutGaps, false);
+			ILineDataSet dataSet = getDataSet(app, chart, analysis, firstType, null, calcWithoutGaps, false);
 			if (dataSet != null) {
 				result.add(dataSet);
 			}
 		} else {
-			OrderedLineDataSet dataSet1 = getDataSet(app, chart, analysis, firstType, calcWithoutGaps, false);
-			OrderedLineDataSet dataSet2 = getDataSet(app, chart, analysis, secondType, calcWithoutGaps, true);
+			OrderedLineDataSet dataSet1 = getDataSet(app, chart, analysis, firstType, secondType, calcWithoutGaps, false);
+			OrderedLineDataSet dataSet2 = getDataSet(app, chart, analysis, secondType, firstType, calcWithoutGaps, true);
 			if (dataSet1 == null && dataSet2 == null) {
 				return new ArrayList<>();
 			} else if (dataSet1 == null) {
@@ -867,6 +872,7 @@ public static OrderedLineDataSet getDataSet(@NonNull OsmandApplication app,
 	                                            @NonNull LineChart chart,
 	                                            @NonNull GPXTrackAnalysis analysis,
 	                                            @NonNull GPXDataSetType graphType,
+												@Nullable GPXDataSetType otherGraphType,
 	                                            boolean calcWithoutGaps,
 	                                            boolean useRightAxis) {
 		switch (graphType) {
@@ -883,7 +889,9 @@ public static OrderedLineDataSet getDataSet(@NonNull OsmandApplication app,
 			}
 			case SPEED: {
 				if (analysis.hasSpeedData()) {
-					return createGPXSpeedDataSet(app, chart, analysis, graphType, DISTANCE, useRightAxis, true, calcWithoutGaps);
+					boolean setYAxisMinimum = otherGraphType != GPXDataSetType.ZOOM_ANIMATED
+							&& otherGraphType != GPXDataSetType.ZOOM_NON_ANIMATED;
+					return createGPXSpeedDataSet(app, chart, analysis, graphType, DISTANCE, useRightAxis, setYAxisMinimum, true, calcWithoutGaps);
 				}
 			}
 			default: {
diff --git a/OsmAnd/src/net/osmand/plus/charts/GPXDataSetType.java b/OsmAnd/src/net/osmand/plus/charts/GPXDataSetType.java
index eca78f344fe..27c32837aa7 100644
--- a/OsmAnd/src/net/osmand/plus/charts/GPXDataSetType.java
+++ b/OsmAnd/src/net/osmand/plus/charts/GPXDataSetType.java
@@ -1,22 +1,23 @@
 package net.osmand.plus.charts;
 
-import static net.osmand.gpx.PointAttributes.SENSOR_TAG_BIKE_POWER;
-import static net.osmand.gpx.PointAttributes.SENSOR_TAG_CADENCE;
-import static net.osmand.gpx.PointAttributes.SENSOR_TAG_HEART_RATE;
-import static net.osmand.gpx.PointAttributes.SENSOR_TAG_SPEED;
-import static net.osmand.gpx.PointAttributes.SENSOR_TAG_TEMPERATURE;
-
 import android.content.Context;
 
+import net.osmand.gpx.GPXUtilities;
+import net.osmand.gpx.PointAttributes;
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.settings.backend.OsmandSettings;
+
 import androidx.annotation.ColorRes;
 import androidx.annotation.DrawableRes;
 import androidx.annotation.NonNull;
 import androidx.annotation.StringRes;
 
-import net.osmand.gpx.GPXUtilities;
-import net.osmand.plus.OsmandApplication;
-import net.osmand.plus.R;
-import net.osmand.plus.settings.backend.OsmandSettings;
+import static net.osmand.gpx.PointAttributes.SENSOR_TAG_BIKE_POWER;
+import static net.osmand.gpx.PointAttributes.SENSOR_TAG_CADENCE;
+import static net.osmand.gpx.PointAttributes.SENSOR_TAG_HEART_RATE;
+import static net.osmand.gpx.PointAttributes.SENSOR_TAG_SPEED;
+import static net.osmand.gpx.PointAttributes.SENSOR_TAG_TEMPERATURE;
 
 public enum GPXDataSetType {
 
@@ -29,8 +30,10 @@ public enum GPXDataSetType {
 	SENSOR_HEART_RATE(R.string.map_widget_ant_heart_rate, R.drawable.ic_action_sensor_heart_rate_outlined, SENSOR_TAG_HEART_RATE, R.color.gpx_chart_pink_label, R.color.gpx_chart_pink),
 	SENSOR_BIKE_POWER(R.string.map_widget_ant_bicycle_power, R.drawable.ic_action_sensor_bicycle_power_outlined, SENSOR_TAG_BIKE_POWER, R.color.gpx_chart_teal_label, R.color.gpx_chart_teal),
 	SENSOR_BIKE_CADENCE(R.string.map_widget_ant_bicycle_cadence, R.drawable.ic_action_sensor_cadence_outlined, SENSOR_TAG_CADENCE, R.color.gpx_chart_indigo_label, R.color.gpx_chart_indigo),
-	SENSOR_TEMPERATURE(R.string.map_settings_weather_temp, R.drawable.ic_action_thermometer, SENSOR_TAG_TEMPERATURE, R.color.gpx_chart_green_label, R.color.gpx_chart_green);
+	SENSOR_TEMPERATURE(R.string.map_settings_weather_temp, R.drawable.ic_action_thermometer, SENSOR_TAG_TEMPERATURE, R.color.gpx_chart_green_label, R.color.gpx_chart_green),
 
+	ZOOM_ANIMATED(R.string.zoom_animated, R.drawable.widget_developer_map_zoom_day, PointAttributes.DEV_ZOOM, R.color.gpx_chart_teal_label, R.color.gpx_chart_teal),
+	ZOOM_NON_ANIMATED(R.string.zoom_non_animated, R.drawable.widget_developer_map_zoom_day, PointAttributes.DEV_ZOOM, R.color.gpx_chart_indigo_label, R.color.gpx_chart_indigo);
 
 	@StringRes
 	private final int titleId;
@@ -111,6 +114,8 @@ public String getMainUnitY(@NonNull OsmandApplication app) {
 				return app.getString(R.string.revolutions_per_minute_unit);
 			}
 			case SENSOR_TEMPERATURE:
+			case ZOOM_ANIMATED:
+			case ZOOM_NON_ANIMATED:
 				return "";
 		}
 		return "";
diff --git a/OsmAnd/src/net/osmand/plus/charts/GpxMarkerView.java b/OsmAnd/src/net/osmand/plus/charts/GpxMarkerView.java
index ca9368ef25d..74636833d87 100644
--- a/OsmAnd/src/net/osmand/plus/charts/GpxMarkerView.java
+++ b/OsmAnd/src/net/osmand/plus/charts/GpxMarkerView.java
@@ -1,7 +1,5 @@
 package net.osmand.plus.charts;
 
-import static android.text.format.DateUtils.SECOND_IN_MILLIS;
-
 import android.annotation.SuppressLint;
 import android.content.Context;
 import android.graphics.drawable.Drawable;
@@ -9,9 +7,6 @@
 import android.widget.ImageView;
 import android.widget.TextView;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 import com.github.mikephil.charting.components.MarkerView;
 import com.github.mikephil.charting.data.ChartData;
 import com.github.mikephil.charting.data.DataSet;
@@ -28,20 +23,22 @@
 import net.osmand.plus.utils.OsmAndFormatter.FormattedValue;
 import net.osmand.util.MapUtils;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import static android.text.format.DateUtils.SECOND_IN_MILLIS;
+
 @SuppressLint("ViewConstructor")
 public class GpxMarkerView extends MarkerView {
 
-	private final View firstContainer;
-	private final View secondContainer;
-	private final View thirdContainer;
+	private final View firstYAxisContainer;
+	private final View secondYAxisContainer;
 	private final View xAxisContainer;
 
-	private final View divider;
-
 	private final boolean hasIcon;
 	private final long startTimeMillis;
 	private final boolean useHours;
-	private final boolean includeXAxisDataSet;
+	private final boolean showXAxisValue;
 
 	public GpxMarkerView(@NonNull Context context, @Nullable Drawable icon) {
 		this(context, icon, 0, false, false);
@@ -55,17 +52,15 @@ private GpxMarkerView(@NonNull Context context,
 	                      @Nullable Drawable icon,
 	                      long startTimeMillis,
 	                      boolean useHours,
-	                      boolean includeXAxisDataSet) {
+	                      boolean showXAxisValue) {
 		super(context, R.layout.chart_marker_view);
 		this.startTimeMillis = startTimeMillis;
 		this.useHours = useHours;
-		this.includeXAxisDataSet = includeXAxisDataSet;
+		this.showXAxisValue = showXAxisValue;
 
-		firstContainer = findViewById(R.id.first_container);
-		secondContainer = findViewById(R.id.second_container);
-		thirdContainer = findViewById(R.id.third_container);
+		firstYAxisContainer = findViewById(R.id.first_container);
+		secondYAxisContainer = findViewById(R.id.second_container);
 		xAxisContainer = findViewById(R.id.x_axis_container);
-		divider = findViewById(R.id.divider);
 
 		hasIcon = icon != null;
 		((ImageView) findViewById(R.id.icon)).setImageDrawable(icon);
@@ -86,78 +81,46 @@ public void refreshContent(@NonNull Entry entry, @NonNull Highlight highlight) {
 		if (lastDataSet != null && lastDataSet.getDataSetType() == GPXDataSetType.ALTITUDE_EXTRM) {
 			dataSetCount--;
 		}
-		if (dataSetCount == 1) {
-			OrderedLineDataSet dataSet = (OrderedLineDataSet) chartData.getDataSetByIndex(0);
-			updateMarker(firstContainer, dataSet, entry);
-			AndroidUiHelper.updateVisibility(divider, false);
-		} else if (dataSetCount == 2) {
+
+		if (dataSetCount == 1 || dataSetCount == 2) {
 			OrderedLineDataSet firstDataSet = (OrderedLineDataSet) chartData.getDataSetByIndex(0);
-			OrderedLineDataSet secondDataSet = ((OrderedLineDataSet) chartData.getDataSetByIndex(1));
-			updateMarkerWithTwoDataSets(firstDataSet, secondDataSet, entry);
+			OrderedLineDataSet secondDataSet = dataSetCount == 2
+					? (OrderedLineDataSet) chartData.getDataSetByIndex(1)
+					: null;
+			if (dataSetCount == 2 && !firstDataSet.isLeftAxis()) {
+				OrderedLineDataSet temp = firstDataSet;
+				firstDataSet = secondDataSet;
+				secondDataSet = temp;
+			}
+
+			updateYAxisValue(entry, firstDataSet, firstYAxisContainer);
+			updateYAxisValue(entry, secondDataSet, secondYAxisContainer);
+			updateXAxisValue(firstDataSet, entry);
 		} else {
-			AndroidUiHelper.setVisibility(GONE, firstContainer, secondContainer, thirdContainer, xAxisContainer, divider);
+			AndroidUiHelper.setVisibility(GONE, firstYAxisContainer, secondYAxisContainer, xAxisContainer);
 		}
+
 		super.refreshContent(entry, highlight);
 	}
 
-	private void updateMarker(@NonNull View container, @NonNull OrderedLineDataSet dataSet, @NonNull Entry entry) {
-		int value = (int) (entry.getY() + 0.5);
-		String formattedValue = formatValue(value);
-		updateMarker(container, dataSet, formattedValue);
-
-		AndroidUiHelper.setVisibility(GONE, firstContainer, secondContainer, thirdContainer, xAxisContainer);
-		AndroidUiHelper.updateVisibility(container, true);
-		updateXAxisValue(dataSet, entry);
-	}
+	private void updateYAxisValue(@NonNull Entry entry, @Nullable OrderedLineDataSet dataSet, @NonNull View container) {
+		AndroidUiHelper.updateVisibility(container, dataSet != null);
+		if (dataSet == null) {
+			return;
+		}
 
-	private void updateMarker(@NonNull View container, @NonNull OrderedLineDataSet dataSet, @NonNull String formattedValue) {
 		TextView textValue = container.findViewById(R.id.text_value);
 		TextView textUnits = container.findViewById(R.id.text_units);
 
+		float y = getOrInterpolateY(dataSet, entry);
+		String formattedValue = dataSet.getMarkerValueFormatter().formatValue(getMyApplication(), y);
+
 		textValue.setText(formattedValue);
 		textValue.setTextColor(dataSet.getColor());
 		textUnits.setText(dataSet.getUnits());
 	}
 
-	private void updateMarkerWithTwoDataSets(@NonNull OrderedLineDataSet firstDataSet,
-	                                         @NonNull OrderedLineDataSet secondDataSet,
-	                                         @NonNull Entry entry) {
-		OrderedLineDataSet altitudeDataSet = getDataSetByType(GPXDataSetType.ALTITUDE, firstDataSet, secondDataSet);
-		OrderedLineDataSet speedDataSet = getDataSetByType(GPXDataSetType.SPEED, firstDataSet, secondDataSet);
-		OrderedLineDataSet slopeDataSet = getDataSetByType(GPXDataSetType.SLOPE, firstDataSet, secondDataSet);
-
-		updateMarkerText(firstContainer, altitudeDataSet, entry);
-		updateMarkerText(secondContainer, speedDataSet, entry);
-		updateMarkerText(thirdContainer, slopeDataSet, entry);
-
-		AndroidUiHelper.updateVisibility(xAxisContainer, false);
-		AndroidUiHelper.updateVisibility(divider, true);
-		updateXAxisValue(firstDataSet, entry);
-	}
-
-	@Nullable
-	private OrderedLineDataSet getDataSetByType(@NonNull GPXDataSetType dataSetType,
-	                                            @NonNull OrderedLineDataSet firstDataSet,
-	                                            @NonNull OrderedLineDataSet secondDataSet) {
-		if (dataSetType == secondDataSet.getDataSetType()) {
-			return secondDataSet;
-		} else if (dataSetType == firstDataSet.getDataSetType()) {
-			return firstDataSet;
-		} else {
-			return null;
-		}
-	}
-
-	private void updateMarkerText(@NonNull View container, @Nullable OrderedLineDataSet dataSet, @NonNull Entry entry) {
-		if (dataSet != null) {
-			float y = getInterpolatedY(dataSet, entry);
-			String formattedValue = formatValue((int) (y + 0.5));
-			updateMarker(container, dataSet, formattedValue);
-		}
-		AndroidUiHelper.updateVisibility(container, dataSet != null);
-	}
-
-	private float getInterpolatedY(@NonNull OrderedLineDataSet dataSet, @NonNull Entry entry) {
+	private float getOrInterpolateY(@NonNull OrderedLineDataSet dataSet, @NonNull Entry entry) {
 		if (dataSet.getEntryIndex(entry) == -1) {
 			Entry upEntry = dataSet.getEntryForXValue(entry.getX(), Float.NaN, DataSet.Rounding.UP);
 			Entry downEntry = upEntry;
@@ -172,7 +135,7 @@ private float getInterpolatedY(@NonNull OrderedLineDataSet dataSet, @NonNull Ent
 	}
 
 	private void updateXAxisValue(@NonNull OrderedLineDataSet dataSet, @NonNull Entry entry) {
-		if (includeXAxisDataSet) {
+		if (showXAxisValue) {
 			GPXDataSetAxisType xAxisType = dataSet.getDataSetAxisType();
 			if (xAxisType == GPXDataSetAxisType.DISTANCE) {
 				updateXAxisValueWithDistance(dataSet, entry);
@@ -229,19 +192,15 @@ public MPPointF getOffset() {
 			dataSetCount--;
 		}
 		int halfDp = AndroidUtils.dpToPx(getContext(), .5f);
+		float offsetX;
 		if (dataSetCount == 2) {
-			int x = divider.getLeft();
-			return new MPPointF(-x - halfDp, 0);
+			offsetX = -secondYAxisContainer.getLeft() - halfDp;
+		} else if (dataSetCount == 1 && showXAxisValue) {
+			offsetX = -xAxisContainer.getLeft() - halfDp;
 		} else {
-			if (dataSetCount == 1) {
-				OrderedLineDataSet dataSet = (OrderedLineDataSet) chartData.getDataSetByIndex(0);
-				if (dataSet.getDataSetType() == GPXDataSetType.SPEED && includeXAxisDataSet) {
-					int x = xAxisContainer.getLeft();
-					return new MPPointF(-x - halfDp, 0);
-				}
-			}
-			return new MPPointF(-getWidth() / 2f, 0);
+			offsetX = -getWidth() / 2f;
 		}
+		return new MPPointF(offsetX, 0);
 	}
 
 	@Override
@@ -258,13 +217,13 @@ public MPPointF getOffsetForDrawingAtPoint(float posX, float posY) {
 		return offset;
 	}
 
-	@NonNull
-	private String formatValue(int value) {
-		return OsmAndFormatter.formatIntegerValue(value, "", getMyApplication()).value + " ";
-	}
-
 	@NonNull
 	private OsmandApplication getMyApplication() {
 		return ((OsmandApplication) getContext().getApplicationContext());
 	}
+
+	public interface MarkerValueFormatter {
+		@NonNull
+		String formatValue(@NonNull OsmandApplication app, float value);
+	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/charts/OrderedLineDataSet.java b/OsmAnd/src/net/osmand/plus/charts/OrderedLineDataSet.java
index dad20f3fe3b..91cc52102fe 100644
--- a/OsmAnd/src/net/osmand/plus/charts/OrderedLineDataSet.java
+++ b/OsmAnd/src/net/osmand/plus/charts/OrderedLineDataSet.java
@@ -3,8 +3,13 @@
 import com.github.mikephil.charting.data.Entry;
 import com.github.mikephil.charting.data.LineDataSet;
 
+import net.osmand.plus.charts.GpxMarkerView.MarkerValueFormatter;
+import net.osmand.plus.utils.OsmAndFormatter;
+
 import java.util.List;
 
+import androidx.annotation.NonNull;
+
 public class OrderedLineDataSet extends LineDataSet {
 
 	private final GPXDataSetType dataSetType;
@@ -16,6 +21,9 @@ public class OrderedLineDataSet extends LineDataSet {
 	private float priority;
 	private float divX = 1f;
 
+	@NonNull
+	private MarkerValueFormatter markerValueFormatter;
+
 	public OrderedLineDataSet(List<Entry> yVals, String label, GPXDataSetType dataSetType,
 	                          GPXDataSetAxisType dataSetAxisType, boolean leftAxis) {
 		super(yVals, label);
@@ -23,6 +31,8 @@ public OrderedLineDataSet(List<Entry> yVals, String label, GPXDataSetType dataSe
 		this.dataSetType = dataSetType;
 		this.dataSetAxisType = dataSetAxisType;
 		this.leftAxis = leftAxis;
+		this.markerValueFormatter = (app, value) ->
+				OsmAndFormatter.formatIntegerValue((int) (value + 0.5f), "", app).value + " ";
 	}
 
 	public GPXDataSetType getDataSetType() {
@@ -60,4 +70,13 @@ public void setUnits(String units) {
 	public boolean isLeftAxis() {
 		return leftAxis;
 	}
+
+	@NonNull
+	public MarkerValueFormatter getMarkerValueFormatter() {
+		return markerValueFormatter;
+	}
+
+	public void setAxisValueFormatter(@NonNull MarkerValueFormatter markerValueFormatter) {
+		this.markerValueFormatter = markerValueFormatter;
+	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/TrackDetailsMenu.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/TrackDetailsMenu.java
index 487e470a24e..831c22194aa 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/TrackDetailsMenu.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/TrackDetailsMenu.java
@@ -679,21 +679,32 @@ public void onChartTranslate(MotionEvent me, float dX, float dY) {
 				OrderedLineDataSet dataSet = null;
 				boolean withoutGaps = selectedGpxFile != null && (!selectedGpxFile.isJoinSegments() && gpxItem.isGeneralTrack());
 				switch (dataSetType) {
-					case ALTITUDE:
+					case ALTITUDE: {
 						dataSet = ChartUtils.createGPXElevationDataSet(app, chart, analysis,
 								dataSetType, gpxItem.chartAxisType, false, true, withoutGaps);
 						break;
-					case SPEED:
+					}
+					case SPEED: {
+						boolean setYAxisMinimum = true;
+						for (GPXDataSetType type : gpxItem.chartTypes) {
+							if (type == GPXDataSetType.ZOOM_ANIMATED || type == GPXDataSetType.ZOOM_NON_ANIMATED) {
+								setYAxisMinimum = false;
+								break;
+							}
+						}
 						dataSet = ChartUtils.createGPXSpeedDataSet(app, chart, analysis,
-								dataSetType, gpxItem.chartAxisType, gpxItem.chartTypes.length > 1, true, withoutGaps);
+								dataSetType, gpxItem.chartAxisType, gpxItem.chartTypes.length > 1, setYAxisMinimum, true, withoutGaps);
 						break;
-					case SLOPE:
+					}
+					case SLOPE: {
 						boolean useRightAxis = gpxItem.chartTypes[0] != GPXDataSetType.SLOPE;
 						dataSet = ChartUtils.createGPXSlopeDataSet(app, chart, analysis,
 								dataSetType, gpxItem.chartAxisType, null, useRightAxis, true, withoutGaps);
 						break;
+					}
 					default: {
-						dataSet = PluginsHelper.getOrderedLineDataSet(chart, analysis, dataSetType, gpxItem.chartAxisType, withoutGaps, false);
+						boolean useRightAxis = !dataSets.isEmpty();
+						dataSet = PluginsHelper.getOrderedLineDataSet(chart, analysis, dataSetType, gpxItem.chartAxisType, withoutGaps, useRightAxis);
 					}
 				}
 				if (dataSet != null) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/OsmandPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/OsmandPlugin.java
index ffa4515085d..018fa27dda5 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/OsmandPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/OsmandPlugin.java
@@ -7,13 +7,6 @@
 import android.graphics.drawable.Drawable;
 import android.view.View;
 
-import androidx.annotation.DrawableRes;
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-import androidx.fragment.app.Fragment;
-import androidx.fragment.app.FragmentActivity;
-import androidx.fragment.app.FragmentManager;
-
 import com.github.mikephil.charting.charts.LineChart;
 
 import net.osmand.IProgress;
@@ -24,8 +17,7 @@
 import net.osmand.data.LatLon;
 import net.osmand.data.MapObject;
 import net.osmand.gpx.GPXTrackAnalysis;
-import net.osmand.gpx.GPXUtilities.WptPt;
-import net.osmand.gpx.PointAttributes;
+import net.osmand.gpx.GPXTrackAnalysis.TrackPointsAnalyser;
 import net.osmand.map.WorldRegion;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
@@ -78,6 +70,13 @@
 import java.util.Map;
 import java.util.Set;
 
+import androidx.annotation.DrawableRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.fragment.app.Fragment;
+import androidx.fragment.app.FragmentActivity;
+import androidx.fragment.app.FragmentManager;
+
 public abstract class OsmandPlugin {
 
 	private static final Log LOG = PlatformUtil.getLog(PluginsHelper.class);
@@ -499,7 +498,9 @@ protected boolean layerShouldBeDisabled(@NonNull OsmandMapLayer layer) {
 	public void updateMapPresentationEnvironment(@NonNull MapRendererContext mapRendererContext) {
 	}
 
-	protected void onAnalysePoint(@NonNull GPXTrackAnalysis analysis, @NonNull WptPt point, @NonNull PointAttributes attribute) {
+	@Nullable
+	protected TrackPointsAnalyser getTrackPointsAnalyser() {
+		return null;
 	}
 
 	@Nullable
diff --git a/OsmAnd/src/net/osmand/plus/plugins/PluginsHelper.java b/OsmAnd/src/net/osmand/plus/plugins/PluginsHelper.java
index 1f920914b04..6f1f6b90291 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/PluginsHelper.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/PluginsHelper.java
@@ -5,12 +5,6 @@
 import android.content.Intent;
 import android.content.pm.PackageManager.NameNotFoundException;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-import androidx.fragment.app.Fragment;
-import androidx.fragment.app.FragmentActivity;
-import androidx.fragment.app.FragmentManager;
-
 import com.github.mikephil.charting.charts.LineChart;
 
 import net.osmand.IProgress;
@@ -20,8 +14,7 @@
 import net.osmand.data.Amenity;
 import net.osmand.data.MapObject;
 import net.osmand.gpx.GPXTrackAnalysis;
-import net.osmand.gpx.GPXUtilities.WptPt;
-import net.osmand.gpx.PointAttributes;
+import net.osmand.gpx.GPXTrackAnalysis.TrackPointsAnalyser;
 import net.osmand.map.WorldRegion;
 import net.osmand.plus.AppInitializer;
 import net.osmand.plus.AppInitializer.AppInitializeListener;
@@ -86,6 +79,12 @@
 import java.util.Map;
 import java.util.Set;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.fragment.app.Fragment;
+import androidx.fragment.app.FragmentActivity;
+import androidx.fragment.app.FragmentManager;
+
 public class PluginsHelper {
 
 	private static final Log log = PlatformUtil.getLog(PluginsHelper.class);
@@ -799,10 +798,19 @@ public static void updateMapPresentationEnvironment(MapRendererContext mapRender
 		}
 	}
 
-	public static void onAnalysePoint(@NonNull GPXTrackAnalysis analysis, @NonNull WptPt point, @NonNull PointAttributes attribute) {
-		for (OsmandPlugin plugin : getAvailablePlugins()) {
-			plugin.onAnalysePoint(analysis, point, attribute);
+	public static TrackPointsAnalyser getTrackPointsAnalyser() {
+		List<TrackPointsAnalyser> trackPointsAnalysers = new ArrayList<>();
+		for (OsmandPlugin plugin : getActivePlugins()) {
+			TrackPointsAnalyser analyser = plugin.getTrackPointsAnalyser();
+			if (analyser != null) {
+				trackPointsAnalysers.add(analyser);
+			}
 		}
+		return (gpxTrackAnalysis, wptPt, pointAttributes) -> {
+			for (TrackPointsAnalyser analyser : trackPointsAnalysers) {
+				analyser.onAnalysePoint(gpxTrackAnalysis, wptPt, pointAttributes);
+			}
+		};
 	}
 
 	@Nullable
diff --git a/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
index fb925e547d5..1229b83c9dd 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
@@ -1,25 +1,20 @@
 package net.osmand.plus.plugins.development;
 
-import static net.osmand.aidlapi.OsmAndCustomizationConstants.DRAWER_BUILDS_ID;
-import static net.osmand.aidlapi.OsmAndCustomizationConstants.PLUGIN_OSMAND_DEV;
-import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_CAMERA_DISTANCE;
-import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_CAMERA_TILT;
-import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_FPS;
-import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_MEMORY;
-import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_TARGET_DISTANCE;
-import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_ZOOM_LEVEL;
-
 import android.content.Intent;
 import android.graphics.drawable.Drawable;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
+import com.github.mikephil.charting.charts.LineChart;
 
 import net.osmand.StateChangedListener;
+import net.osmand.gpx.GPXTrackAnalysis;
+import net.osmand.gpx.GPXTrackAnalysis.TrackPointsAnalyser;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.Version;
 import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.charts.GPXDataSetAxisType;
+import net.osmand.plus.charts.GPXDataSetType;
+import net.osmand.plus.charts.OrderedLineDataSet;
 import net.osmand.plus.dashboard.tools.DashFragmentData;
 import net.osmand.plus.inapp.InAppPurchaseHelper;
 import net.osmand.plus.plugins.OsmandPlugin;
@@ -38,6 +33,7 @@
 import net.osmand.plus.settings.backend.WidgetsAvailabilityHelper;
 import net.osmand.plus.settings.backend.preferences.OsmandPreference;
 import net.osmand.plus.settings.fragments.SettingsScreenType;
+import net.osmand.plus.views.AutoZoomBySpeedUtils;
 import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetInfoCreator;
 import net.osmand.plus.views.mapwidgets.WidgetType;
@@ -49,6 +45,18 @@
 import java.util.ArrayList;
 import java.util.List;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import static net.osmand.aidlapi.OsmAndCustomizationConstants.DRAWER_BUILDS_ID;
+import static net.osmand.aidlapi.OsmAndCustomizationConstants.PLUGIN_OSMAND_DEV;
+import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_CAMERA_DISTANCE;
+import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_CAMERA_TILT;
+import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_FPS;
+import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_MEMORY;
+import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_TARGET_DISTANCE;
+import static net.osmand.plus.views.mapwidgets.WidgetType.DEV_ZOOM_LEVEL;
+
 public class OsmandDevelopmentPlugin extends OsmandPlugin {
 
 	public static final String DOWNLOAD_BUILD_NAME = "osmandToInstall.apk";
@@ -231,4 +239,22 @@ public boolean isRelief3dPurchased() {
 	private SRTMPlugin getSrtmPlugin() {
 		return PluginsHelper.getEnabledPlugin(SRTMPlugin.class);
 	}
+
+	@Override
+	public void getAvailableGPXDataSetTypes(@NonNull GPXTrackAnalysis analysis, @NonNull List<GPXDataSetType[]> availableTypes) {
+		AutoZoomBySpeedUtils.addAvailableGPXDataSetTypes(app, analysis, availableTypes);
+	}
+
+	@Nullable
+	@Override
+	public OrderedLineDataSet getOrderedLineDataSet(@NonNull LineChart chart, @NonNull GPXTrackAnalysis analysis, @NonNull GPXDataSetType graphType, @NonNull GPXDataSetAxisType chartAxisType, boolean calcWithoutGaps, boolean useRightAxis) {
+		return AutoZoomBySpeedUtils.getOrderedLineDataSet(app, chart, analysis, graphType, chartAxisType,
+				calcWithoutGaps, useRightAxis);
+	}
+
+	@Nullable
+	@Override
+	protected TrackPointsAnalyser getTrackPointsAnalyser() {
+		return AutoZoomBySpeedUtils.getTrackPointsAnalyser(app);
+	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/ExternalSensorsPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/ExternalSensorsPlugin.java
index df5e3071d11..435a281eaa7 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/ExternalSensorsPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/ExternalSensorsPlugin.java
@@ -1,31 +1,16 @@
 package net.osmand.plus.plugins.externalsensors;
 
-import static net.osmand.aidlapi.OsmAndCustomizationConstants.DRAWER_ANT_PLUS_ID;
-import static net.osmand.aidlapi.OsmAndCustomizationConstants.PLUGIN_ANT_PLUS;
-import static net.osmand.plus.plugins.externalsensors.devices.sensors.DeviceChangeableProperties.NAME;
-import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.BIKE_CADENCE;
-import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.BIKE_DISTANCE;
-import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.BIKE_POWER;
-import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.BIKE_SPEED;
-import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.HEART_RATE;
-import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.TEMPERATURE;
-
 import android.app.Activity;
 import android.graphics.drawable.Drawable;
 import android.os.Handler;
 import android.os.Looper;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-import androidx.annotation.StringRes;
-
 import com.github.mikephil.charting.charts.LineChart;
 
 import net.osmand.Location;
 import net.osmand.PlatformUtil;
 import net.osmand.gpx.GPXTrackAnalysis;
-import net.osmand.gpx.GPXUtilities.WptPt;
-import net.osmand.gpx.PointAttributes;
+import net.osmand.gpx.GPXTrackAnalysis.TrackPointsAnalyser;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.Version;
@@ -61,6 +46,20 @@
 import java.util.ArrayList;
 import java.util.List;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
+
+import static net.osmand.aidlapi.OsmAndCustomizationConstants.DRAWER_ANT_PLUS_ID;
+import static net.osmand.aidlapi.OsmAndCustomizationConstants.PLUGIN_ANT_PLUS;
+import static net.osmand.plus.plugins.externalsensors.devices.sensors.DeviceChangeableProperties.NAME;
+import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.BIKE_CADENCE;
+import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.BIKE_DISTANCE;
+import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.BIKE_POWER;
+import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.BIKE_SPEED;
+import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.HEART_RATE;
+import static net.osmand.plus.plugins.externalsensors.devices.sensors.SensorWidgetDataFieldType.TEMPERATURE;
+
 public class ExternalSensorsPlugin extends OsmandPlugin {
 	private static final Log LOG = PlatformUtil.getLog(ExternalSensorsPlugin.class);
 	private static final int DEVICES_SEARCH_TIMEOUT = 10000;
@@ -400,9 +399,10 @@ public CommonPreference<String> getPrefSettingsForWidgetType(@NonNull WriteToGpx
 		throw new IllegalArgumentException("Unknown widget type");
 	}
 
+	@NonNull
 	@Override
-	protected void onAnalysePoint(@NonNull GPXTrackAnalysis analysis, @NonNull WptPt point, @NonNull PointAttributes attribute) {
-		SensorAttributesUtils.onAnalysePoint(analysis, point, attribute);
+	protected TrackPointsAnalyser getTrackPointsAnalyser() {
+		return SensorAttributesUtils::onAnalysePoint;
 	}
 
 	@Nullable
diff --git a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/SensorAttributesUtils.java b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/SensorAttributesUtils.java
index 5c6d1d5b318..78b57108b3b 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/externalsensors/SensorAttributesUtils.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/externalsensors/SensorAttributesUtils.java
@@ -151,7 +151,7 @@ public static OrderedLineDataSet createSensorDataSet(@NonNull OsmandApplication
 		YAxis yAxis = ChartUtils.getYAxis(chart, textColor, useRightAxis);
 		yAxis.setAxisMinimum(0f);
 
-		List<Entry> values = ChartUtils.getPointAttributeValues(graphType.getDataKey(), analysis, axisType, divX, mulY, divY, calcWithoutGaps);
+		List<Entry> values = ChartUtils.getPointAttributeValues(graphType.getDataKey(), analysis.pointAttributes, axisType, divX, mulY, divY, calcWithoutGaps);
 		OrderedLineDataSet dataSet = new OrderedLineDataSet(values, "", graphType, axisType, !useRightAxis);
 
 		String format = null;
diff --git a/OsmAnd/src/net/osmand/plus/settings/enums/AutoZoomMap.java b/OsmAnd/src/net/osmand/plus/settings/enums/AutoZoomMap.java
index ef3135a58e8..936757b933d 100644
--- a/OsmAnd/src/net/osmand/plus/settings/enums/AutoZoomMap.java
+++ b/OsmAnd/src/net/osmand/plus/settings/enums/AutoZoomMap.java
@@ -3,15 +3,15 @@
 import net.osmand.plus.R;
 
 public enum AutoZoomMap {
-	FARTHEST(R.string.auto_zoom_farthest, 1f, 15.5f),
-	FAR(R.string.auto_zoom_far, 1.4f, 17f),
-	CLOSE(R.string.auto_zoom_close, 2f, 19f);
+	FARTHEST(R.string.auto_zoom_farthest, 1f, 16),
+	FAR(R.string.auto_zoom_far, 1.4f, 17),
+	CLOSE(R.string.auto_zoom_close, 2f, 19);
 
 	public final float coefficient;
 	public final int name;
-	public final float maxZoom;
+	public final int maxZoom;
 
-	AutoZoomMap(int name, float coefficient, float maxZoom) {
+	AutoZoomMap(int name, float coefficient, int maxZoom) {
 		this.name = name;
 		this.coefficient = coefficient;
 		this.maxZoom = maxZoom;
diff --git a/OsmAnd/src/net/osmand/plus/track/SplitTrackAsyncTask.java b/OsmAnd/src/net/osmand/plus/track/SplitTrackAsyncTask.java
index f66d264fbd9..12416e20281 100644
--- a/OsmAnd/src/net/osmand/plus/track/SplitTrackAsyncTask.java
+++ b/OsmAnd/src/net/osmand/plus/track/SplitTrackAsyncTask.java
@@ -1,14 +1,8 @@
 package net.osmand.plus.track;
 
 
-import static net.osmand.plus.track.helpers.GpxDisplayHelper.buildTrackSegmentName;
-
 import android.os.AsyncTask;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-import androidx.core.content.ContextCompat;
-
 import net.osmand.IProgress;
 import net.osmand.gpx.GPXTrackAnalysis;
 import net.osmand.gpx.GPXTrackAnalysis.TrackPointsAnalyser;
@@ -27,6 +21,12 @@
 import java.util.ArrayList;
 import java.util.List;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.core.content.ContextCompat;
+
+import static net.osmand.plus.track.helpers.GpxDisplayHelper.buildTrackSegmentName;
+
 public class SplitTrackAsyncTask extends AsyncTask<Void, Void, Void> {
 
 	private static final int ELEVATION_THRESHOLD = 3;
@@ -203,7 +203,7 @@ public static String getItemName(@NonNull OsmandApplication app, @NonNull GpxDis
 
 	@NonNull
 	private static TrackPointsAnalyser getTrackPointsAnalyser() {
-		return PluginsHelper::onAnalysePoint;
+		return PluginsHelper.getTrackPointsAnalyser();
 	}
 
 	@NonNull
diff --git a/OsmAnd/src/net/osmand/plus/views/AutoZoomBySpeedUtils.java b/OsmAnd/src/net/osmand/plus/views/AutoZoomBySpeedUtils.java
new file mode 100644
index 00000000000..7cae69356f2
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/AutoZoomBySpeedUtils.java
@@ -0,0 +1,247 @@
+package net.osmand.plus.views;
+
+import com.github.mikephil.charting.charts.LineChart;
+import com.github.mikephil.charting.components.YAxis;
+import com.github.mikephil.charting.data.Entry;
+
+import net.osmand.core.android.MapRendererView;
+import net.osmand.data.RotatedTileBox;
+import net.osmand.gpx.GPXTrackAnalysis;
+import net.osmand.gpx.GPXTrackAnalysis.TrackPointsAnalyser;
+import net.osmand.gpx.PointAttributes;
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.charts.ChartUtils;
+import net.osmand.plus.charts.GPXDataSetAxisType;
+import net.osmand.plus.charts.GPXDataSetType;
+import net.osmand.plus.charts.OrderedLineDataSet;
+import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.settings.enums.AutoZoomMap;
+import net.osmand.plus.utils.ColorUtilities;
+import net.osmand.plus.utils.OsmAndFormatter;
+import net.osmand.plus.utils.OsmAndFormatter.FormattedValue;
+import net.osmand.util.Algorithms;
+
+import java.util.ArrayList;
+import java.util.List;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.core.util.Pair;
+
+public class AutoZoomBySpeedUtils {
+
+	private static final float ZOOM_PER_SECOND = 0.25f;
+	private static final int SHOW_DRIVING_SECONDS = 60;
+
+	@Nullable
+	public static Pair<Integer, Double> calculateAutoZoomBySpeed(@NonNull OsmandApplication app, @NonNull RotatedTileBox tb, float speed) {
+		OsmandSettings settings = app.getSettings();
+
+		float zoomProximityCoeff = settings.AUTO_ZOOM_MAP_SCALE.get().coefficient;
+		float zoomDelta = defineZoomFromSpeed(tb, speed, zoomProximityCoeff);
+		if (Math.abs(zoomDelta) < 0.5) {
+			return null;
+		}
+
+		if (zoomDelta >= 2) {
+			zoomDelta -= 1;
+		} else if (zoomDelta <= -2) {
+			zoomDelta += 1;
+		}
+		double targetZoom = Math.min(tb.getZoom() + tb.getZoomFloatPart() + zoomDelta, settings.AUTO_ZOOM_MAP_SCALE.get().maxZoom);
+		targetZoom = Math.round(targetZoom * 3) / 3f;
+		int newIntegerZoom = (int) Math.round(targetZoom);
+		double zPart = targetZoom - newIntegerZoom;
+		return newIntegerZoom > 0 ? new Pair<>(newIntegerZoom, zPart) : null;
+	}
+
+	private static float defineZoomFromSpeed(@NonNull RotatedTileBox tb, float speed, float zoomProximityCoeff) {
+		if (speed < 7f / 3.6) {
+			return 0;
+		}
+		double visibleDist = tb.getDistance(tb.getCenterPixelX(), 0, tb.getCenterPixelX(), tb.getCenterPixelY());
+		float time = speed < 83f / 3.6 ? 60 : 75;
+		double distToSee = speed * time / zoomProximityCoeff;
+		float currentZoom = (float) (tb.getZoom() + tb.getZoomFloatPart() + tb.getZoomAnimation());
+		return Zoom.fromDistanceRatio(visibleDist, distToSee, currentZoom);
+	}
+
+	public static float autoZoomBySpeed(@NonNull OsmandApplication app, @NonNull RotatedTileBox tileBox, float speed) {
+		if (speed < 7 / 3.6) {
+			return Float.NaN;
+		}
+
+		OsmandMapTileView mapView = app.getOsmandMap().getMapView();
+
+		AutoZoomMap autoZoomScale = app.getSettings().AUTO_ZOOM_MAP_SCALE.get();
+		double visibleDist = tileBox.getDistance(tileBox.getCenterPixelX(), 0, tileBox.getCenterPixelX(), tileBox.getCenterPixelY());
+		float distanceToDrive = speed * SHOW_DRIVING_SECONDS / autoZoomScale.coefficient;
+		float currentZoom = (float) (tileBox.getZoom() + tileBox.getZoomFloatPart() + tileBox.getZoomAnimation());
+		float expectedZoom = Zoom.fromDistanceRatio(visibleDist, distanceToDrive, currentZoom);
+
+		int minZoom = mapView.getMinZoom();
+		int maxZoom = Math.min(mapView.getMaxZoom(), autoZoomScale.maxZoom);
+		Zoom boundedZoom = Zoom.checkZoomBounds(expectedZoom, minZoom, maxZoom);
+		return boundedZoom.getBaseZoom() + boundedZoom.getZoomFloatPart();
+	}
+
+	@Nullable
+	public static TrackPointsAnalyser getTrackPointsAnalyser(@NonNull OsmandApplication app) {
+		OsmandMapTileView mapView = app.getOsmandMap().getMapView();
+		MapRendererView mapRenderer = mapView.getMapRenderer();
+		RotatedTileBox tileBox = mapView.getRotatedTileBox();
+
+		if (mapRenderer == null) {
+			return null;
+		}
+
+		return (analysis, point, attributes) -> {
+			float autoZoom = AutoZoomBySpeedUtils.autoZoomBySpeed(app, tileBox, attributes.speed);
+
+			if (!Float.isNaN(autoZoom)) {
+				tileBox.setZoomAndAnimation((int) autoZoom, 0.0, autoZoom - (int) autoZoom);
+			}
+
+			float expectedZoom = (float) (tileBox.getZoom() + tileBox.getZoomFloatPart() + tileBox.getZoomAnimation());
+			attributes.setAttributeValue(PointAttributes.DEV_ZOOM, expectedZoom);
+			if (!analysis.hasData(PointAttributes.DEV_ZOOM)) {
+				analysis.setHasData(PointAttributes.DEV_ZOOM, true);
+			}
+		};
+	}
+
+	public static void addAvailableGPXDataSetTypes(@NonNull OsmandApplication app,
+			@NonNull GPXTrackAnalysis analysis,
+			@NonNull List<GPXDataSetType[]> availableTypes) {
+		boolean cameraElevationAvailable = app.getOsmandMap().getMapView().hasMapRenderer()
+				&& analysis.hasData(PointAttributes.DEV_ZOOM);
+		if (cameraElevationAvailable) {
+			if (analysis.hasSpeedData()) {
+				availableTypes.add(new GPXDataSetType[] {GPXDataSetType.ZOOM_NON_ANIMATED, GPXDataSetType.SPEED});
+				availableTypes.add(new GPXDataSetType[] {GPXDataSetType.ZOOM_ANIMATED, GPXDataSetType.SPEED});
+			}
+			availableTypes.add(new GPXDataSetType[] {GPXDataSetType.ZOOM_NON_ANIMATED, GPXDataSetType.ZOOM_ANIMATED});
+		}
+	}
+
+	@Nullable
+	public static OrderedLineDataSet getOrderedLineDataSet(@NonNull OsmandApplication app,
+	                                                       @NonNull LineChart chart,
+	                                                       @NonNull GPXTrackAnalysis analysis,
+	                                                       @NonNull GPXDataSetType graphType,
+	                                                       @NonNull GPXDataSetAxisType chartAxisType,
+	                                                       boolean calcWithoutGaps,
+	                                                       boolean useRightAxis) {
+		switch (graphType) {
+			case ZOOM_NON_ANIMATED:
+				if (analysis.hasData(PointAttributes.DEV_ZOOM)) {
+					return getZoomDataSet(app, chart, analysis, analysis.pointAttributes, graphType,
+							chartAxisType, calcWithoutGaps, useRightAxis);
+				}
+			case ZOOM_ANIMATED:
+				if (analysis.hasData(PointAttributes.DEV_ZOOM)) {
+					List<PointAttributes> animatedAttributes = simulateZoomAttributesAnimation(analysis.pointAttributes);
+					return getZoomDataSet(app, chart, analysis, animatedAttributes, graphType,
+							chartAxisType, calcWithoutGaps, useRightAxis);
+				}
+		}
+		return null;
+	}
+
+	@NonNull
+	private static OrderedLineDataSet getZoomDataSet(@NonNull OsmandApplication app,
+	                                                 @NonNull LineChart chart,
+	                                                 @NonNull GPXTrackAnalysis analysis,
+	                                                 @NonNull List<PointAttributes> pointAttributes,
+	                                                 @NonNull GPXDataSetType graphType,
+	                                                 @NonNull GPXDataSetAxisType chartAxisType,
+	                                                 boolean calcWithoutGaps,
+	                                                 boolean useRightAxis) {
+		OsmandSettings settings = app.getSettings();
+		boolean nightMode = !settings.isLightContent();
+
+		float divX = ChartUtils.getDivX(app, chart, analysis, chartAxisType, calcWithoutGaps);
+
+		List<Entry> values = ChartUtils.getPointAttributeValues(graphType.getDataKey(), pointAttributes, chartAxisType, divX, 1f, Float.NaN, calcWithoutGaps);
+		OrderedLineDataSet dataSet = new OrderedLineDataSet(values, "", graphType, chartAxisType, !useRightAxis);
+		dataSet.setAxisValueFormatter((app1, value) -> OsmAndFormatter.formatValue(value, "", true, 2, app1).value);
+
+		int textColor = ColorUtilities.getColor(app, graphType.getTextColorId(false));
+		YAxis yAxis = ChartUtils.getYAxis(chart, textColor, useRightAxis);
+		yAxis.resetAxisMinimum();
+		String mainUnitY = graphType.getMainUnitY(app);
+		yAxis.setValueFormatter((value, axis) ->
+				OsmAndFormatter.formatValue(value, mainUnitY, true, 2, app).value);
+
+		dataSet.setDivX(divX);
+		dataSet.setUnits(mainUnitY);
+
+		int color = ColorUtilities.getColor(app, graphType.getFillColorId(false));
+		ChartUtils.setupDataSet(app, dataSet, color, color, true, false, useRightAxis, nightMode);
+
+		return dataSet;
+	}
+
+	@NonNull
+	private static List<PointAttributes> simulateZoomAttributesAnimation(@NonNull List<PointAttributes> original) {
+		List<PointAttributes> result = new ArrayList<>();
+
+		float currentZoom = original.get(0).zoom;
+		PointAttributes overridenCurrentAttribute = null;
+
+		for (int i = 1; i < original.size(); i++) {
+			PointAttributes currentAttributes = overridenCurrentAttribute != null
+					? overridenCurrentAttribute
+					: original.get(i);
+
+			float zoomToAnimate = currentAttributes.zoom;
+
+			PointAttributes currentAnimatedAttributes = new PointAttributes(
+					currentAttributes.distance,
+					currentAttributes.timeDiff,
+					currentAttributes.firstPoint,
+					currentAttributes.lastPoint
+			);
+			currentAnimatedAttributes.zoom = currentZoom;
+			result.add(currentAnimatedAttributes);
+
+			if (i + 1 == original.size()) {
+				break;
+			}
+
+			PointAttributes nextAttributes = original.get(i + 1);
+
+			float zoomDelta = zoomToAnimate - currentZoom;
+			float allowedZoomDelta = ZOOM_PER_SECOND * nextAttributes.timeDiff;
+
+			if (Math.abs(zoomDelta) < allowedZoomDelta) {
+				float secondsToZoom = Math.abs(zoomDelta) / ZOOM_PER_SECOND;
+				float offsetN = secondsToZoom / nextAttributes.timeDiff;
+
+				PointAttributes intermediateAttribute = new PointAttributes(
+						nextAttributes.distance * offsetN,
+						secondsToZoom,
+						nextAttributes.firstPoint,
+						false
+				);
+				intermediateAttribute.zoom = zoomToAnimate;
+				result.add(intermediateAttribute);
+
+				overridenCurrentAttribute = new PointAttributes(
+						nextAttributes.distance * (1.0f - offsetN),
+						nextAttributes.timeDiff - secondsToZoom,
+						false,
+						nextAttributes.lastPoint
+				);
+				overridenCurrentAttribute.zoom = nextAttributes.zoom;
+
+				currentZoom = zoomToAnimate;
+			} else {
+				currentZoom += Math.signum(zoomDelta) * Math.min(Math.abs(zoomDelta), allowedZoomDelta);
+				overridenCurrentAttribute = null;
+			}
+		}
+
+		return result;
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/Zoom.java b/OsmAnd/src/net/osmand/plus/views/Zoom.java
index 860016caaf8..41a77fc3f10 100644
--- a/OsmAnd/src/net/osmand/plus/views/Zoom.java
+++ b/OsmAnd/src/net/osmand/plus/views/Zoom.java
@@ -100,9 +100,55 @@ private void checkZoomBounds() {
 	}
 
 	@NonNull
-	public static Zoom checkZoomBounds(int baseZoom, float zoomFloatPart, int maxZoom, int minZoom) {
-		Zoom zoom = new Zoom(baseZoom, zoomFloatPart, maxZoom, minZoom);
+	public static Zoom checkZoomBounds(float zoom, int minZoom, int maxZoom) {
+		return checkZoomBounds((int) zoom, zoom - (int) zoom, minZoom, maxZoom);
+	}
+
+	@NonNull
+	public static Zoom checkZoomBounds(int baseZoom, float zoomFloatPart, int minZoom, int maxZoom) {
+		Zoom zoom = new Zoom(baseZoom, zoomFloatPart, minZoom, maxZoom);
 		zoom.checkZoomBounds();
 		return zoom;
 	}
+
+	public static float getZoomedDistance(float distance, float startZoom, float endZoom) {
+		int startZoomBase = (int) startZoom;
+		float startZoomFloatPart = startZoom - startZoomBase;
+
+		float distanceNoStartZoomFloatPart = distance * floatPartToVisual(startZoomFloatPart);
+
+		float zoomDeltaFromStartZoomBase = endZoom - startZoomBase;
+		float zoomFactorFromStartIntZoom = (1 << (int) Math.abs(zoomDeltaFromStartZoomBase))
+				* (Math.abs(zoomDeltaFromStartZoomBase - (int) zoomDeltaFromStartZoomBase) + 1.0f);
+		if (zoomDeltaFromStartZoomBase < 0.0f) {
+			zoomFactorFromStartIntZoom = 1.0f / zoomFactorFromStartIntZoom;
+		}
+
+		return distanceNoStartZoomFloatPart / zoomFactorFromStartIntZoom;
+	}
+
+	public static float fromDistanceRatio(double startDistance, double endDistance, float startZoom) {
+		int startIntZoom = (int) startZoom;
+		float startZoomFloatPart = startZoom - startIntZoom;
+		double startDistanceIntZoom = startDistance * floatPartToVisual(startZoomFloatPart);
+		double log2 = Math.log(startDistanceIntZoom / endDistance) / Math.log(2);
+		int intZoomDelta = (int) log2;
+		double startDistanceIntZoomed = intZoomDelta >= 0
+				? startDistanceIntZoom / (1 << intZoomDelta)
+				: startDistanceIntZoom * (1 << -intZoomDelta);
+		float zoomFloatPartDelta = visualToFloatPart((float) (startDistanceIntZoomed / endDistance));
+		return startIntZoom + intZoomDelta + zoomFloatPartDelta;
+	}
+
+	public static float floatPartToVisual(float zoomFloatPart) {
+		return zoomFloatPart >= 0
+				? 1.0f + zoomFloatPart
+				: 1.0f + zoomFloatPart / 2.0f;
+	}
+
+	public static float visualToFloatPart(float visualZoom) {
+		return visualZoom >= 1.0f
+				? visualZoom - 1.0f
+				: (visualZoom - 1.0f) * 2.0f;
+	}
 }
\ No newline at end of file
