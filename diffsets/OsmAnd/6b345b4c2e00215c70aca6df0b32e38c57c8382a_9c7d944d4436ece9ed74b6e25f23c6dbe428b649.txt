diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/BackupCloudFragment.java b/OsmAnd/src/net/osmand/plus/backup/ui/BackupCloudFragment.java
index cd25f2b2acf..e0ca541798b 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/BackupCloudFragment.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/BackupCloudFragment.java
@@ -288,7 +288,7 @@ public void onCardButtonPressed(@NonNull BaseCard card, int buttonIndex) {
 				refreshContent();
 			} else if (IntroductionCard.SETTINGS_BUTTON_INDEX == buttonIndex) {
 				dialogType = null;
-				BackupTypesFragment.showInstance(manager);
+				BackupTypesController.showScreen(requireActivity());
 			}
 		} else if (card instanceof CloudSyncCard) {
 			if (SYNC_BUTTON_INDEX == buttonIndex) {
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesAdapter.java b/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesAdapter.java
index d97eac03b99..7d449378bb5 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesAdapter.java
@@ -1,278 +1,81 @@
 package net.osmand.plus.backup.ui;
 
 import android.content.Context;
-import android.graphics.drawable.Drawable;
 import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.CompoundButton;
-import android.widget.ImageView;
-import android.widget.TextView;
 
 import androidx.annotation.NonNull;
+import androidx.annotation.StringRes;
 
 import net.osmand.plus.OsmandApplication;
-import net.osmand.plus.R;
 import net.osmand.plus.backup.RemoteFile;
 import net.osmand.plus.base.OsmandBaseExpandableListAdapter;
-import net.osmand.plus.chooseplan.button.PurchasingUtils;
-import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.mapmarkers.MapMarkersGroup;
 import net.osmand.plus.settings.backend.ExportCategory;
 import net.osmand.plus.settings.backend.backup.exporttype.ExportType;
 import net.osmand.plus.settings.backend.backup.items.FileSettingsItem;
-import net.osmand.plus.settings.fragments.ExportSettingsAdapter;
 import net.osmand.plus.settings.fragments.SettingsCategoryItems;
-import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.ColorUtilities;
-import net.osmand.plus.utils.FontCache;
 import net.osmand.plus.utils.UiUtilities;
-import net.osmand.plus.utils.UiUtilities.CompoundButtonType;
-import net.osmand.util.Algorithms;
 import net.osmand.util.CollectionUtils;
 
 import java.io.File;
-import java.util.ArrayList;
-import java.util.Collections;
-import java.util.List;
-import java.util.Map;
 
-public class BackupTypesAdapter extends OsmandBaseExpandableListAdapter {
+public abstract class BackupTypesAdapter extends OsmandBaseExpandableListAdapter {
 
-	private final OsmandApplication app;
-	private final UiUtilities uiUtilities;
-	private final BaseBackupTypesController controller;
+	protected final OsmandApplication app;
+	protected final UiUtilities iconsCache;
+	protected final BaseBackupTypesController controller;
 
-	private List<ExportCategory> itemsTypes;
-	private Map<ExportType, List<?>> selectedItemsMap;
-	private Map<ExportCategory, SettingsCategoryItems> itemsMap;
+	protected final LayoutInflater themedInflater;
+	protected final int activeColor;
+	protected final boolean nightMode;
 
-	private final LayoutInflater themedInflater;
-
-	private final int activeColor;
-	private final boolean nightMode;
-
-	public BackupTypesAdapter(@NonNull Context context, @NonNull BaseBackupTypesController controller) {
+	public BackupTypesAdapter(@NonNull Context context,
+	                          @NonNull BaseBackupTypesController controller) {
 		this.app = (OsmandApplication) context.getApplicationContext();
 		this.controller = controller;
 		this.nightMode = controller.isNightMode();
-		uiUtilities = app.getUIUtilities();
+		iconsCache = app.getUIUtilities();
 		themedInflater = UiUtilities.getInflater(context, nightMode);
 		activeColor = ColorUtilities.getActiveIconColor(app, nightMode);
 	}
 
-	@Override
-	public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
-		View view = convertView;
-		if (view == null) {
-			view = themedInflater.inflate(R.layout.backup_type_item, parent, false);
-		}
-		ExportCategory category = itemsTypes.get(groupPosition);
-		SettingsCategoryItems items = itemsMap.get(category);
-
-		String name = app.getString(category.getTitleId());
-		TextView titleTv = view.findViewById(R.id.title);
-		titleTv.setText(UiUtilities.createCustomFontSpannable(FontCache.getMediumFont(), name, name));
-
-		TextView description = view.findViewById(R.id.description);
-		description.setText(getCategoryDescr(category));
-
-		int selectedTypes = 0;
-		for (ExportType exportType : items.getTypes()) {
-			if (selectedItemsMap.get(exportType) != null) {
-				selectedTypes++;
-			}
-		}
-		CompoundButton compoundButton = view.findViewById(R.id.switch_widget);
-		boolean available = controller.isBackupAvailable();
-		compoundButton.setChecked(available && selectedTypes == items.getTypes().size());
-		compoundButton.setEnabled(available);
-		UiUtilities.setupCompoundButton(compoundButton, nightMode, CompoundButtonType.GLOBAL);
-		View switchContainer = view.findViewById(R.id.switch_container);
-		if (available) {
-			switchContainer.setOnClickListener(v -> {
-				compoundButton.performClick();
-				controller.onCategorySelected(category, compoundButton.isChecked());
-				notifyDataSetChanged();
-			});
-		} else {
-			switchContainer.setOnClickListener(null);
-		}
-		setupSelectableBackground(view);
-		adjustIndicator(app, groupPosition, isExpanded, view, !nightMode);
-		AndroidUiHelper.updateVisibility(view.findViewById(R.id.divider), isExpanded);
-		AndroidUiHelper.updateVisibility(view.findViewById(R.id.card_top_divider), true);
-		AndroidUiHelper.updateVisibility(view.findViewById(R.id.card_bottom_divider), !isExpanded);
-
-		return view;
-	}
-
-	@Override
-	public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
-		View view = convertView;
-		if (view == null) {
-			view = themedInflater.inflate(R.layout.backup_type_item, parent, false);
-		}
-		ExportCategory category = itemsTypes.get(groupPosition);
-		SettingsCategoryItems categoryItems = itemsMap.get(category);
-		ExportType exportType = categoryItems.getTypes().get(childPosition);
-		List<?> items = categoryItems.getItemsForType(exportType);
-		List<?> selectedItems = selectedItemsMap.get(exportType);
-
-		boolean selected = selectedItems != null;
-		TextView title = view.findViewById(R.id.title);
-		title.setText(exportType.getTitleId());
-
-		TextView description = view.findViewById(R.id.description);
-		description.setText(getSelectedTypeDescr(app, selectedItemsMap, exportType, items));
-
-		CompoundButton compoundButton = view.findViewById(R.id.switch_widget);
-		compoundButton.setChecked(selected);
-		UiUtilities.setupCompoundButton(compoundButton, nightMode, CompoundButtonType.GLOBAL);
-
-		ImageView proIcon = view.findViewById(R.id.pro_icon);
-		boolean showProIcon = !controller.isExportTypeAvailable(exportType);
-		setupChildIcon(view, exportType.getIconId(), selected && !showProIcon);
-		proIcon.setImageResource(PurchasingUtils.getProFeatureIconId(nightMode));
-		view.setOnClickListener(v -> {
-			compoundButton.performClick();
-			controller.onTypeSelected(exportType, compoundButton.isChecked());
-			notifyDataSetChanged();
-		});
-		AndroidUiHelper.updateVisibility(proIcon, showProIcon);
-		AndroidUiHelper.updateVisibility(view.findViewById(R.id.switch_container), !showProIcon);
-		setupSelectableBackground(view);
-		AndroidUiHelper.updateVisibility(view.findViewById(R.id.divider), false);
-		AndroidUiHelper.updateVisibility(view.findViewById(R.id.card_top_divider), false);
-		AndroidUiHelper.updateVisibility(view.findViewById(R.id.card_bottom_divider), isLastChild);
-
-		return view;
-	}
-
-	private void setupSelectableBackground(View view) {
-		View selectableView = view.findViewById(R.id.selectable_list_item);
-		if (selectableView.getBackground() == null) {
-			Drawable drawable = UiUtilities.getColoredSelectableDrawable(app, activeColor, 0.3f);
-			AndroidUtils.setBackground(selectableView, drawable);
-		}
-	}
-
-	private void setupChildIcon(View view, int iconRes, boolean itemSelected) {
-		int colorRes;
-		if (itemSelected) {
-			colorRes = nightMode ? R.color.icon_color_active_dark : R.color.icon_color_osmand_light;
-		} else {
-			colorRes = nightMode ? R.color.icon_color_secondary_dark : R.color.icon_color_secondary_light;
-		}
-		ImageView icon = view.findViewById(R.id.explicit_indicator);
-		icon.setImageDrawable(uiUtilities.getIcon(iconRes, colorRes));
-	}
-
-	public void updateSettingsItems() {
-		this.itemsMap = controller.getDataList();
-		this.itemsTypes = new ArrayList<>(itemsMap.keySet());
-		this.selectedItemsMap = controller.getSelectedItems();
-		Collections.sort(itemsTypes);
-		notifyDataSetChanged();
-	}
-
-	@NonNull
-	private String getCategoryDescr(ExportCategory category) {
-		long itemsSize = 0;
-		int selectedTypes = 0;
-		SettingsCategoryItems items = itemsMap.get(category);
-		for (ExportType exportType : items.getTypes()) {
-			if (selectedItemsMap.get(exportType) != null) {
-				selectedTypes++;
-				itemsSize += ExportSettingsAdapter.calculateItemsSize(items.getItemsForType(exportType));
-			}
-		}
-		String description;
-		if (selectedTypes == 0) {
-			description = app.getString(R.string.shared_string_none);
-		} else if (selectedTypes == items.getTypes().size()) {
-			description = app.getString(R.string.shared_string_all);
-		} else {
-			description = app.getString(R.string.ltr_or_rtl_combine_via_slash, String.valueOf(selectedTypes), String.valueOf(items.getTypes().size()));
-		}
-		String formattedSize = AndroidUtils.formatSize(app, itemsSize);
-		return itemsSize == 0 ? description : app.getString(R.string.ltr_or_rtl_combine_via_comma, description, formattedSize);
-	}
-
-	@NonNull
-	public static String getSelectedTypeDescr(@NonNull OsmandApplication app,
-	                                          @NonNull Map<ExportType, List<?>> selectedItemsMap,
-	                                          @NonNull ExportType exportType, @NonNull List<?> items) {
-		List<?> selectedItems = selectedItemsMap.get(exportType);
-		if (!Algorithms.isEmpty(selectedItems)) {
-			CalculatedItemsSize calculatedSize = calculateSelectedItemsSize(items, selectedItems);
-			long itemsSize = calculatedSize.itemsSize;
-			int selectedTypes = calculatedSize.selectedTypes;
-			String description;
-			if (selectedTypes == items.size()) {
-				description = app.getString(R.string.shared_string_all);
-				if (!items.isEmpty()) {
-					description = app.getString(R.string.ltr_or_rtl_combine_via_comma, description, String.valueOf(items.size()));
-				}
-			} else {
-				description = app.getString(R.string.ltr_or_rtl_combine_via_slash, String.valueOf(selectedTypes), String.valueOf(items.size()));
-			}
-			String formattedSize = AndroidUtils.formatSize(app, itemsSize);
-			if (Algorithms.isEmpty(formattedSize)) {
-				return description;
-			} else {
-				return app.getString(R.string.ltr_or_rtl_combine_via_comma, description, formattedSize);
+	protected long getItemSize(@NonNull Object object) {
+		if (object instanceof FileSettingsItem fileSettingsItem) {
+			return fileSettingsItem.getSize();
+		} else if (object instanceof File file) {
+			return file.length();
+		} else if (object instanceof RemoteFile remoteFile) {
+			return  remoteFile.getZipSize();
+		} else if (object instanceof MapMarkersGroup markersGroup) {
+			if (CollectionUtils.equalsToAny(markersGroup.getId(), ExportType.ACTIVE_MARKERS.name(), ExportType.HISTORY_MARKERS.name())) {
+				return  ((MapMarkersGroup) object).getMarkers().size();
 			}
-		} else {
-			return app.getString(R.string.shared_string_none);
 		}
+		return 0;
 	}
 
-	@NonNull
-	private static CalculatedItemsSize calculateSelectedItemsSize(@NonNull List<?> items,
-	                                                              @NonNull List<?> selectedItems) {
-		long itemsSize = 0;
-		int selectedTypes = 0;
-		for (int i = 0; i < items.size(); i++) {
-			Object object = items.get(i);
-			if (selectedItems.contains(object)) {
-				selectedTypes++;
-				if (object instanceof FileSettingsItem) {
-					itemsSize += ((FileSettingsItem) object).getSize();
-				} else if (object instanceof File) {
-					itemsSize += ((File) object).length();
-				} else if (object instanceof RemoteFile) {
-					itemsSize += ((RemoteFile) object).getZipSize();
-				} else if (object instanceof MapMarkersGroup markersGroup) {
-					if (CollectionUtils.equalsToAny(markersGroup.getId(), ExportType.ACTIVE_MARKERS.name(), ExportType.HISTORY_MARKERS.name())) {
-						itemsSize += ((MapMarkersGroup) object).getMarkers().size();
-					}
-				}
-			}
-		}
-		return new CalculatedItemsSize(itemsSize, selectedTypes);
-	}
-
-	private record CalculatedItemsSize(long itemsSize, int selectedTypes) { }
-
 	@Override
 	public int getGroupCount() {
-		return itemsTypes.size();
+		return controller.getCategories().size();
 	}
 
 	@Override
 	public int getChildrenCount(int i) {
-		return itemsMap.get(itemsTypes.get(i)).getTypes().size();
+		ExportCategory category = controller.getCategory(i);
+		return controller.getCategoryItems(category).getTypes().size();
 	}
 
 	@Override
 	public Object getGroup(int i) {
-		return itemsMap.get(itemsTypes.get(i));
+		ExportCategory category = controller.getCategory(i);
+		return controller.getCategoryItems(category);
 	}
 
 	@Override
 	public Object getChild(int groupPosition, int childPosition) {
-		SettingsCategoryItems categoryItems = itemsMap.get(itemsTypes.get(groupPosition));
+		ExportCategory category = controller.getCategory(groupPosition);
+		SettingsCategoryItems categoryItems = controller.getCategoryItems(category);
 		ExportType exportType = categoryItems.getTypes().get(groupPosition);
 		return categoryItems.getItemsForType(exportType).get(childPosition);
 	}
@@ -297,11 +100,14 @@ public boolean isChildSelectable(int i, int i1) {
 		return true;
 	}
 
+	public String getString(@StringRes int resId, Object ... formatArgs) {
+		return app.getString(resId, formatArgs);
+	}
+
 	public interface OnItemSelectedListener {
 
 		void onTypeSelected(@NonNull ExportType exportType, boolean selected);
 
 		void onCategorySelected(ExportCategory exportCategory, boolean selected);
-
 	}
-}
\ No newline at end of file
+}
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesController.java b/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesController.java
index ed6811e2a63..cfd0f528640 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesController.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesController.java
@@ -19,7 +19,7 @@
 import java.util.List;
 import java.util.Map;
 
-public class BackupTypesController extends BaseBackupTypesController {
+public class BackupTypesController extends SwitchBackupTypesController {
 
 	private static final String PROCESS_ID = "select_cloud_backup_types";
 
@@ -54,10 +54,10 @@ protected Map<ExportType, List<?>> collectSelectedItems() {
 	}
 
 	@Override
-	public void onCategorySelected(ExportCategory exportCategory, boolean selected) {
-		super.onCategorySelected(exportCategory, selected);
+	public void onCategorySelected(ExportCategory category, boolean selected) {
+		super.onCategorySelected(category, selected);
 
-		SettingsCategoryItems categoryItems = dataList.get(exportCategory);
+		SettingsCategoryItems categoryItems = getCategoryItems(category);
 		for (ExportType exportType : categoryItems.getTypes()) {
 			backupHelper.getBackupTypePref(exportType).set(selected);
 		}
@@ -70,7 +70,7 @@ public void onTypeSelected(@NonNull ExportType exportType, boolean selected) {
 	}
 
 	@Override
-	public void clearDataForTypes(@NonNull List<ExportType> types) throws UserNotRegisteredException {
+	public void clearDataTypes(@NonNull List<ExportType> types) throws UserNotRegisteredException {
 		backupHelper.deleteAllFiles(types);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesFragment.java b/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesFragment.java
index 17a78538458..b58f753dc8a 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/BackupTypesFragment.java
@@ -62,16 +62,12 @@ public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup c
 		View view = inflate(R.layout.fragment_backup_types, container);
 		AndroidUtils.addStatusBarPadding21v(requireMyActivity(), view);
 		setupToolbar(view);
-
 		progressBar = view.findViewById(R.id.progress_bar);
 
-		adapter = new BackupTypesAdapter(view.getContext(), controller);
-		adapter.updateSettingsItems();
-
+		adapter = controller.createUiAdapter(view.getContext());
 		ExpandableListView expandableList = view.findViewById(R.id.list);
 		expandableList.setAdapter(adapter);
 		BaseSettingsListFragment.setupListView(expandableList);
-
 		return view;
 	}
 
@@ -100,7 +96,7 @@ public void onResume() {
 			if (!wasDrawerDisabled) {
 				mapActivity.disableDrawer();
 			}
-			controller.onResume();
+			controller.updateListeners(true);
 		}
 	}
 
@@ -111,7 +107,7 @@ public void onPause() {
 		if (mapActivity != null && !wasDrawerDisabled) {
 			mapActivity.enableDrawer();
 		}
-		controller.onPause();
+		controller.updateListeners(false);
 	}
 
 	@Override
@@ -135,7 +131,7 @@ public int getStatusBarColorId() {
 	public void onItemPurchased(String sku, boolean active) {
 		controller.updateData();
 		if (isResumed() && adapter != null) {
-			adapter.updateSettingsItems();
+			adapter.notifyDataSetChanged();
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/BaseBackupTypesController.java b/OsmAnd/src/net/osmand/plus/backup/ui/BaseBackupTypesController.java
index 49de5f933d8..d6f71f6217c 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/BaseBackupTypesController.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/BaseBackupTypesController.java
@@ -1,8 +1,9 @@
 package net.osmand.plus.backup.ui;
 
+import android.content.Context;
+
 import androidx.annotation.NonNull;
 import androidx.annotation.StringRes;
-import androidx.fragment.app.FragmentActivity;
 
 import net.osmand.PlatformUtil;
 import net.osmand.plus.OsmandApplication;
@@ -10,39 +11,38 @@
 import net.osmand.plus.backup.BackupListeners.OnDeleteFilesListener;
 import net.osmand.plus.backup.PrepareBackupResult.RemoteFilesType;
 import net.osmand.plus.backup.RemoteFile;
-import net.osmand.plus.backup.UserNotRegisteredException;
 import net.osmand.plus.backup.ui.BackupTypesAdapter.OnItemSelectedListener;
 import net.osmand.plus.backup.ui.ClearTypesBottomSheet.BackupClearType;
 import net.osmand.plus.backup.ui.ClearTypesBottomSheet.OnClearTypesListener;
 import net.osmand.plus.base.dialog.BaseDialogController;
 import net.osmand.plus.base.dialog.interfaces.dialog.IDialog;
-import net.osmand.plus.chooseplan.OsmAndProPlanFragment;
 import net.osmand.plus.inapp.InAppPurchaseUtils;
 import net.osmand.plus.settings.backend.ExportCategory;
 import net.osmand.plus.settings.backend.backup.SettingsHelper;
 import net.osmand.plus.settings.backend.backup.exporttype.ExportType;
 import net.osmand.plus.settings.fragments.SettingsCategoryItems;
-import net.osmand.util.Algorithms;
 
 import org.apache.commons.logging.Log;
 
 import java.util.ArrayList;
+import java.util.Collection;
 import java.util.Collections;
 import java.util.EnumMap;
 import java.util.LinkedHashMap;
 import java.util.List;
 import java.util.Map;
+import java.util.Objects;
 
 public abstract class BaseBackupTypesController extends BaseDialogController
 		implements OnItemSelectedListener, OnClearTypesListener, OnDeleteFilesListener {
 
-	private static final Log LOG = PlatformUtil.getLog(BaseBackupTypesController.class);
+	protected static final Log LOG = PlatformUtil.getLog(BaseBackupTypesController.class);
 
 	protected final BackupHelper backupHelper;
 	protected final BackupClearType clearType;
 	protected final RemoteFilesType remoteFilesType;
-	protected Map<ExportCategory, SettingsCategoryItems> dataList = new LinkedHashMap<>();
-	protected Map<ExportType, List<?>> selectedItemsMap = new EnumMap<>(ExportType.class);
+	protected Map<ExportCategory, SettingsCategoryItems> data = new LinkedHashMap<>();
+	protected List<ExportCategory> categories;
 	protected BackupTypesFragment screen;
 	protected boolean cloudRestore;
 
@@ -63,34 +63,48 @@ public void registerDialog(@NonNull IDialog dialog) {
 		updateData();
 	}
 
-	public void onResume() {
-		backupHelper.getBackupListeners().addDeleteFilesListener(this);
-	}
-
-	public void onPause() {
-		backupHelper.getBackupListeners().removeDeleteFilesListener(this);
-	}
+	@NonNull
+	public abstract SwitchBackupTypesAdapter createUiAdapter(@NonNull Context context);
 
 	@StringRes
 	public abstract int getTitleId();
 
 	public void updateData() {
-		this.dataList = collectAllItems();
-		this.selectedItemsMap = collectSelectedItems();
+		this.data = collectData();
+		this.categories = new ArrayList<>(data.keySet());
+		Collections.sort(categories);
+	}
+
+	public void updateListeners(boolean register) {
+		if (register) {
+			backupHelper.getBackupListeners().addDeleteFilesListener(this);
+		} else {
+			backupHelper.getBackupListeners().removeDeleteFilesListener(this);
+		}
 	}
 
 	@NonNull
-	public Map<ExportCategory, SettingsCategoryItems> getDataList() {
-		return dataList;
+	public Map<ExportCategory, SettingsCategoryItems> getData() {
+		return data;
 	}
 
 	@NonNull
-	public Map<ExportType, List<?>> getSelectedItems() {
-		return selectedItemsMap;
+	public Collection<ExportCategory> getCategories() {
+		return categories;
 	}
 
 	@NonNull
-	private Map<ExportCategory, SettingsCategoryItems> collectAllItems() {
+	public ExportCategory getCategory(int position) {
+		return categories.get(position);
+	}
+
+	@NonNull
+	public SettingsCategoryItems getCategoryItems(@NonNull ExportCategory category) {
+		return Objects.requireNonNull(data.get(category));
+	}
+
+	@NonNull
+	private Map<ExportCategory, SettingsCategoryItems> collectData() {
 		Map<String, RemoteFile> remoteFiles = backupHelper.getBackup().getRemoteFiles(remoteFilesType);
 		if (remoteFiles == null) {
 			remoteFiles = Collections.emptyMap();
@@ -108,81 +122,6 @@ private Map<ExportCategory, SettingsCategoryItems> collectAllItems() {
 		return SettingsHelper.categorizeSettingsToOperate(dataToOperate, true);
 	}
 
-	@NonNull
-	protected abstract Map<ExportType, List<?>> collectSelectedItems();
-
-	@NonNull
-	public List<?> getItemsForType(@NonNull ExportType exportType) {
-		for (SettingsCategoryItems categoryItems : dataList.values()) {
-			if (categoryItems.getTypes().contains(exportType)) {
-				return categoryItems.getItemsForType(exportType);
-			}
-		}
-		return Collections.emptyList();
-	}
-
-	@Override
-	public void onCategorySelected(ExportCategory exportCategory, boolean selected) {
-		boolean hasItemsToDelete = false;
-		SettingsCategoryItems categoryItems = dataList.get(exportCategory);
-		List<ExportType> exportTypes = categoryItems.getTypes();
-		for (ExportType exportType : exportTypes) {
-			if (isExportTypeAvailable(exportType)) {
-				List<?> items = getItemsForType(exportType);
-				hasItemsToDelete |= !Algorithms.isEmpty(items);
-				selectedItemsMap.put(exportType, selected ? items : null);
-			}
-		}
-		if (!selected && hasItemsToDelete) {
-			showClearTypesBottomSheet(exportTypes);
-		}
-	}
-
-	@Override
-	public void onTypeSelected(@NonNull ExportType exportType, boolean selected) {
-		if (isExportTypeAvailable(exportType)) {
-			List<?> items = getItemsForType(exportType);
-			selectedItemsMap.put(exportType, selected ? items : null);
-			if (!selected && !Algorithms.isEmpty(items)) {
-				showClearTypesBottomSheet(Collections.singletonList(exportType));
-			}
-		} else {
-			FragmentActivity activity = getActivity();
-			if (activity != null) {
-				OsmAndProPlanFragment.showInstance(activity);
-			}
-		}
-	}
-
-	protected void showClearTypesBottomSheet(List<ExportType> types) {
-		FragmentActivity activity = getActivity();
-		if (activity != null) {
-			ClearTypesBottomSheet.showInstance(activity, this, types);
-		}
-	}
-
-	// TODO: delete
-	protected boolean isExportTypeAvailable(@NonNull ExportType exportType) {
-		return InAppPurchaseUtils.isExportTypeAvailable(app, exportType) || cloudRestore;
-	}
-
-	protected boolean isBackupAvailable() {
-		return InAppPurchaseUtils.isBackupAvailable(app) || cloudRestore;
-	}
-
-	@Override
-	public void onClearTypesConfirmed(@NonNull List<ExportType> types) {
-		try {
-			screen.updateProgressVisibility(true);
-			clearDataForTypes(types);
-		} catch (UserNotRegisteredException e) {
-			screen.updateProgressVisibility(false);
-			LOG.error(e);
-		}
-	}
-
-	protected abstract void clearDataForTypes(@NonNull List<ExportType> types) throws UserNotRegisteredException;
-
 	@Override
 	public void onFileDeleteProgress(@NonNull RemoteFile file, int progress) {
 		screen.updateProgressVisibility(true);
@@ -200,7 +139,21 @@ public void onFilesDeleteError(int status, @NonNull String message) {
 		backupHelper.prepareBackup();
 	}
 
-	public boolean isCloudRestore() {
-		return cloudRestore;
+	protected boolean isExportTypeAvailable(@NonNull ExportType exportType) {
+		return InAppPurchaseUtils.isExportTypeAvailable(app, exportType) || cloudRestore;
+	}
+
+	protected boolean isBackupAvailable() {
+		return InAppPurchaseUtils.isBackupAvailable(app) || cloudRestore;
+	}
+
+	@NonNull
+	public List<?> getItemsForType(@NonNull ExportType exportType) {
+		for (SettingsCategoryItems categoryItems : data.values()) {
+			if (categoryItems.getTypes().contains(exportType)) {
+				return categoryItems.getItemsForType(exportType);
+			}
+		}
+		return Collections.emptyList();
 	}
 }
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/SwitchBackupTypesAdapter.java b/OsmAnd/src/net/osmand/plus/backup/ui/SwitchBackupTypesAdapter.java
new file mode 100644
index 00000000000..84b6c65fbdc
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/SwitchBackupTypesAdapter.java
@@ -0,0 +1,205 @@
+package net.osmand.plus.backup.ui;
+
+import android.content.Context;
+import android.graphics.drawable.Drawable;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.CompoundButton;
+import android.widget.ImageView;
+import android.widget.TextView;
+
+import androidx.annotation.DrawableRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.chooseplan.button.PurchasingUtils;
+import net.osmand.plus.helpers.AndroidUiHelper;
+import net.osmand.plus.settings.backend.ExportCategory;
+import net.osmand.plus.settings.backend.backup.exporttype.ExportType;
+import net.osmand.plus.settings.fragments.ExportSettingsAdapter;
+import net.osmand.plus.settings.fragments.SettingsCategoryItems;
+import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.FontCache;
+import net.osmand.plus.utils.UiUtilities;
+import net.osmand.plus.utils.UiUtilities.CompoundButtonType;
+import net.osmand.util.Algorithms;
+
+import java.util.List;
+
+public class SwitchBackupTypesAdapter extends BackupTypesAdapter {
+
+	private final SwitchBackupTypesController controller;
+
+	public SwitchBackupTypesAdapter(@NonNull Context context, @NonNull SwitchBackupTypesController controller) {
+		super(context, controller);
+		this.controller = controller;
+		notifyDataSetChanged();
+	}
+
+	@Override
+	public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
+		View view = convertView;
+		if (view == null) {
+			view = themedInflater.inflate(R.layout.backup_type_item, parent, false);
+		}
+		ExportCategory category = controller.getCategory(groupPosition);
+		SettingsCategoryItems items = controller.getCategoryItems(category);
+
+		String name = getString(category.getTitleId());
+		TextView titleTv = view.findViewById(R.id.title);
+		titleTv.setText(UiUtilities.createCustomFontSpannable(FontCache.getMediumFont(), name, name));
+
+		TextView description = view.findViewById(R.id.description);
+		description.setText(getGroupSummary(category));
+
+		int selectedTypes = 0;
+		for (ExportType exportType : items.getTypes()) {
+			if (controller.hasSelectedItemsOfType(exportType)) {
+				selectedTypes++;
+			}
+		}
+		CompoundButton compoundButton = view.findViewById(R.id.switch_widget);
+		boolean available = controller.isBackupAvailable();
+		compoundButton.setChecked(available && selectedTypes == items.getTypes().size());
+		compoundButton.setEnabled(available);
+		UiUtilities.setupCompoundButton(compoundButton, nightMode, CompoundButtonType.GLOBAL);
+		View switchContainer = view.findViewById(R.id.switch_container);
+		if (available) {
+			switchContainer.setOnClickListener(v -> {
+				compoundButton.performClick();
+				controller.onCategorySelected(category, compoundButton.isChecked());
+				notifyDataSetChanged();
+			});
+		} else {
+			switchContainer.setOnClickListener(null);
+		}
+		setupSelectableBackground(view);
+		adjustIndicator(app, groupPosition, isExpanded, view, !nightMode);
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.divider), isExpanded);
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.card_top_divider), true);
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.card_bottom_divider), !isExpanded);
+
+		return view;
+	}
+
+	@Override
+	public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
+		View view = convertView;
+		if (view == null) {
+			view = themedInflater.inflate(R.layout.backup_type_item, parent, false);
+		}
+		ExportCategory category = controller.getCategory(groupPosition);
+		SettingsCategoryItems categoryItems = controller.getCategoryItems(category);
+
+		ExportType exportType = categoryItems.getTypes().get(childPosition);
+		List<?> items = categoryItems.getItemsForType(exportType);
+		List<?> selectedItems = controller.getSelectedItemsOfType(exportType);
+
+		boolean selected = selectedItems != null;
+		TextView title = view.findViewById(R.id.title);
+		title.setText(exportType.getTitleId());
+
+		TextView description = view.findViewById(R.id.description);
+		description.setText(getChildSummary(app, items, selectedItems));
+
+		CompoundButton compoundButton = view.findViewById(R.id.switch_widget);
+		compoundButton.setChecked(selected);
+		UiUtilities.setupCompoundButton(compoundButton, nightMode, CompoundButtonType.GLOBAL);
+
+		ImageView proIcon = view.findViewById(R.id.pro_icon);
+		boolean showProIcon = !controller.isExportTypeAvailable(exportType);
+		setupChildIcon(view, exportType.getIconId(), selected && !showProIcon);
+		proIcon.setImageResource(PurchasingUtils.getProFeatureIconId(nightMode));
+		view.setOnClickListener(v -> {
+			compoundButton.performClick();
+			controller.onTypeSelected(exportType, compoundButton.isChecked());
+			notifyDataSetChanged();
+		});
+		AndroidUiHelper.updateVisibility(proIcon, showProIcon);
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.switch_container), !showProIcon);
+		setupSelectableBackground(view);
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.divider), false);
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.card_top_divider), false);
+		AndroidUiHelper.updateVisibility(view.findViewById(R.id.card_bottom_divider), isLastChild);
+
+		return view;
+	}
+
+	private void setupSelectableBackground(@NonNull View view) {
+		View selectableView = view.findViewById(R.id.selectable_list_item);
+		if (selectableView.getBackground() == null) {
+			Drawable drawable = UiUtilities.getColoredSelectableDrawable(app, activeColor, 0.3f);
+			AndroidUtils.setBackground(selectableView, drawable);
+		}
+	}
+
+	private void setupChildIcon(@NonNull View view, @DrawableRes int iconRes, boolean selected) {
+		int colorRes;
+		if (selected) {
+			colorRes = nightMode ? R.color.icon_color_active_dark : R.color.icon_color_osmand_light;
+		} else {
+			colorRes = nightMode ? R.color.icon_color_secondary_dark : R.color.icon_color_secondary_light;
+		}
+		ImageView icon = view.findViewById(R.id.explicit_indicator);
+		icon.setImageDrawable(iconsCache.getIcon(iconRes, colorRes));
+	}
+
+	@NonNull
+	private String getGroupSummary(@NonNull ExportCategory category) {
+		long itemsSize = 0;
+		int selectedTypes = 0;
+		SettingsCategoryItems items = controller.getCategoryItems(category);
+		for (ExportType exportType : items.getTypes()) {
+			if (controller.hasSelectedItemsOfType(exportType)) {
+				selectedTypes++;
+				itemsSize += ExportSettingsAdapter.calculateItemsSize(items.getItemsForType(exportType));
+			}
+		}
+		String description;
+		if (selectedTypes == 0) {
+			description = getString(R.string.shared_string_none);
+		} else if (selectedTypes == items.getTypes().size()) {
+			description = getString(R.string.shared_string_all);
+		} else {
+			description = getString(R.string.ltr_or_rtl_combine_via_slash, String.valueOf(selectedTypes), String.valueOf(items.getTypes().size()));
+		}
+		String formattedSize = AndroidUtils.formatSize(app, itemsSize);
+		return itemsSize == 0 ? description : getString(R.string.ltr_or_rtl_combine_via_comma, description, formattedSize);
+	}
+
+	@NonNull
+	public String getChildSummary(@NonNull OsmandApplication app,
+	                              @NonNull List<?> items, @Nullable List<?> selectedItems) {
+		if (!Algorithms.isEmpty(selectedItems)) {
+			long itemsSize = 0;
+			int selectedTypesCount = 0;
+
+			for (Object object : items) {
+				if (selectedItems.contains(object)) {
+					selectedTypesCount++;
+					itemsSize += getItemSize(object);
+				}
+			}
+
+			String description;
+			if (selectedTypesCount == items.size()) {
+				description = getString(R.string.shared_string_all);
+				if (!items.isEmpty()) {
+					description = getString(R.string.ltr_or_rtl_combine_via_comma, description, String.valueOf(items.size()));
+				}
+			} else {
+				description = getString(R.string.ltr_or_rtl_combine_via_slash, String.valueOf(selectedTypesCount), String.valueOf(items.size()));
+			}
+			String formattedSize = AndroidUtils.formatSize(app, itemsSize);
+			if (Algorithms.isEmpty(formattedSize)) {
+				return description;
+			} else {
+				return getString(R.string.ltr_or_rtl_combine_via_comma, description, formattedSize);
+			}
+		} else {
+			return getString(R.string.shared_string_none);
+		}
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/SwitchBackupTypesController.java b/OsmAnd/src/net/osmand/plus/backup/ui/SwitchBackupTypesController.java
new file mode 100644
index 00000000000..2192790c9de
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/SwitchBackupTypesController.java
@@ -0,0 +1,116 @@
+package net.osmand.plus.backup.ui;
+
+import android.content.Context;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.fragment.app.FragmentActivity;
+
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.backup.PrepareBackupResult.RemoteFilesType;
+import net.osmand.plus.backup.UserNotRegisteredException;
+import net.osmand.plus.backup.ui.ClearTypesBottomSheet.BackupClearType;
+import net.osmand.plus.chooseplan.OsmAndProPlanFragment;
+import net.osmand.plus.settings.backend.ExportCategory;
+import net.osmand.plus.settings.backend.backup.exporttype.ExportType;
+import net.osmand.plus.settings.fragments.SettingsCategoryItems;
+import net.osmand.util.Algorithms;
+
+import java.util.Collections;
+import java.util.EnumMap;
+import java.util.List;
+import java.util.Map;
+
+public abstract class SwitchBackupTypesController extends BaseBackupTypesController {
+
+	protected Map<ExportType, List<?>> selectedItemsMap = new EnumMap<>(ExportType.class);
+
+	public SwitchBackupTypesController(@NonNull OsmandApplication app,
+	                                   @NonNull BackupClearType clearType,
+	                                   @NonNull RemoteFilesType remoteFilesType) {
+		super(app, clearType, remoteFilesType);
+	}
+
+	@Override
+	public void updateData() {
+		super.updateData();
+		this.selectedItemsMap = collectSelectedItems();
+	}
+
+	@NonNull
+	@Override
+	public SwitchBackupTypesAdapter createUiAdapter(@NonNull Context context) {
+		return new SwitchBackupTypesAdapter(context, this);
+	}
+
+	@NonNull
+	protected abstract Map<ExportType, List<?>> collectSelectedItems();
+
+	@NonNull
+	public Map<ExportType, List<?>> getSelectedItems() {
+		return selectedItemsMap;
+	}
+
+	public boolean hasSelectedItemsOfType(@NonNull ExportType exportType) {
+		return getSelectedItemsOfType(exportType) != null;
+	}
+
+	@Nullable
+	public List<?> getSelectedItemsOfType(@NonNull ExportType exportType) {
+		return selectedItemsMap.get(exportType);
+	}
+
+	@Override
+	public void onCategorySelected(ExportCategory exportCategory, boolean selected) {
+		boolean hasItemsToDelete = false;
+		SettingsCategoryItems categoryItems = data.get(exportCategory);
+		List<ExportType> exportTypes = categoryItems.getTypes();
+		for (ExportType exportType : exportTypes) {
+			if (isExportTypeAvailable(exportType)) {
+				List<?> items = getItemsForType(exportType);
+				hasItemsToDelete |= !Algorithms.isEmpty(items);
+				selectedItemsMap.put(exportType, selected ? items : null);
+			}
+		}
+		if (!selected && hasItemsToDelete) {
+			showClearTypesBottomSheet(exportTypes);
+		}
+	}
+
+	@Override
+	public void onTypeSelected(@NonNull ExportType exportType, boolean selected) {
+		if (isExportTypeAvailable(exportType)) {
+			List<?> items = getItemsForType(exportType);
+			selectedItemsMap.put(exportType, selected ? items : null);
+			if (!selected && !Algorithms.isEmpty(items)) {
+				showClearTypesBottomSheet(Collections.singletonList(exportType));
+			}
+		} else {
+			FragmentActivity activity = getActivity();
+			if (activity != null) {
+				OsmAndProPlanFragment.showInstance(activity);
+			}
+		}
+	}
+
+	// TODO: delete
+	protected void showClearTypesBottomSheet(List<ExportType> types) {
+		FragmentActivity activity = getActivity();
+		if (activity != null) {
+			ClearTypesBottomSheet.showInstance(activity, this, types);
+		}
+	}
+
+	@Override
+	public void onClearTypesConfirmed(@NonNull List<ExportType> types) {
+		try {
+			screen.updateProgressVisibility(true);
+			clearDataTypes(types);
+		} catch (UserNotRegisteredException e) {
+			screen.updateProgressVisibility(false);
+			LOG.error(e);
+		}
+	}
+
+	protected abstract void clearDataTypes(@NonNull List<ExportType> types) throws UserNotRegisteredException;
+}
diff --git a/OsmAnd/src/net/osmand/plus/backup/ui/VersionHistoryController.java b/OsmAnd/src/net/osmand/plus/backup/ui/VersionHistoryController.java
index afc54a7f898..0d3bcf23db3 100644
--- a/OsmAnd/src/net/osmand/plus/backup/ui/VersionHistoryController.java
+++ b/OsmAnd/src/net/osmand/plus/backup/ui/VersionHistoryController.java
@@ -18,7 +18,7 @@
 import java.util.List;
 import java.util.Map;
 
-public class VersionHistoryController extends BaseBackupTypesController {
+public class VersionHistoryController extends SwitchBackupTypesController {
 
 	private static final String PROCESS_ID = "select_types_to_manage_version_history";
 
@@ -52,7 +52,8 @@ protected Map<ExportType, List<?>> collectSelectedItems() {
 	@Override
 	public void onCategorySelected(ExportCategory exportCategory, boolean selected) {
 		super.onCategorySelected(exportCategory, selected);
-		SettingsCategoryItems categoryItems = dataList.get(exportCategory);
+
+		SettingsCategoryItems categoryItems = getCategoryItems(exportCategory);
 		for (ExportType exportType : categoryItems.getTypes()) {
 			backupHelper.getVersionHistoryTypePref(exportType).set(selected);
 		}
@@ -65,7 +66,7 @@ public void onTypeSelected(@NonNull ExportType exportType, boolean selected) {
 	}
 
 	@Override
-	public void clearDataForTypes(@NonNull List<ExportType> types) throws UserNotRegisteredException {
+	public void clearDataTypes(@NonNull List<ExportType> types) throws UserNotRegisteredException {
 		backupHelper.deleteOldFiles(types);
 	}
 
