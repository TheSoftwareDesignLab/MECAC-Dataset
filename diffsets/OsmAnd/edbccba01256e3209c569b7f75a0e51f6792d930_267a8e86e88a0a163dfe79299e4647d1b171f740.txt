diff --git a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolLayer.java b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolLayer.java
index 78dd8f725c1..871ca44dae1 100644
--- a/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolLayer.java
+++ b/OsmAnd/src/net/osmand/plus/measurementtool/MeasurementToolLayer.java
@@ -317,6 +317,7 @@ void selectPoint(int position) {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tb, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tb, settings);
 		boolean hasMapRenderer = hasMapRenderer();
 		if (isDrawingEnabled()) {
 			boolean updated = lineAttrs.updatePaints(view.getApplication(), settings, tb) || mapActivityInvalidated;
diff --git a/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioNotesLayer.java b/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioNotesLayer.java
index e2bdc77ab3d..bf97117cf79 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioNotesLayer.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioNotesLayer.java
@@ -84,6 +84,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		MapRendererView mapRenderer = getMapRenderer();
 		if (mapRenderer != null) {
 			DataTileManager<Recording> recs = plugin.getRecordings();
diff --git a/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryVectorLayer.java b/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryVectorLayer.java
index 1a10089d72e..12b3f9099ef 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryVectorLayer.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryVectorLayer.java
@@ -118,6 +118,7 @@ private void recreateBitmaps() {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings drawSettings) {
+		super.onPrepareBufferImage(canvas, tileBox, drawSettings);
 		updateBitmaps(false);
 		MapRendererView mapRenderer = getMapRenderer();
 		if (mapRenderer != null) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/osmedit/OsmBugsLayer.java b/OsmAnd/src/net/osmand/plus/plugins/osmedit/OsmBugsLayer.java
index c1516138d82..0faf401bfd9 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/osmedit/OsmBugsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/osmedit/OsmBugsLayer.java
@@ -119,6 +119,7 @@ public boolean drawInScreenPixels() {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		OsmandApplication app = getApplication();
 		startZoom = plugin.SHOW_OSM_BUGS_MIN_ZOOM.get();
 		MapRendererView mapRenderer = getMapRenderer();
diff --git a/OsmAnd/src/net/osmand/plus/plugins/osmedit/OsmEditsLayer.java b/OsmAnd/src/net/osmand/plus/plugins/osmedit/OsmEditsLayer.java
index 289041bbad2..26d2e8f9dc6 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/osmedit/OsmEditsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/osmedit/OsmEditsLayer.java
@@ -105,6 +105,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		MapRendererView mapRenderer = getMapView().getMapRenderer();
 		if (mapRenderer != null) {
 			if (!poiTypesInitialized) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/srtm/TerrainLayer.java b/OsmAnd/src/net/osmand/plus/plugins/srtm/TerrainLayer.java
index c73e188c812..33acb574c7b 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/srtm/TerrainLayer.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/srtm/TerrainLayer.java
@@ -58,6 +58,7 @@ public TerrainLayer(@NonNull Context context, SRTMPlugin srtmPlugin) {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings drawSettings) {
+		super.onPrepareBufferImage(canvas, tileBox, drawSettings);
 		int zoom = tileBox.getZoom();
 		if (zoom >= srtmPlugin.getTerrainMinZoom() && zoom <= srtmPlugin.getTerrainMaxZoom()) {
 			setAlpha(srtmPlugin.getTerrainTransparency());
diff --git a/OsmAnd/src/net/osmand/plus/views/AnimateDraggingMapThread.java b/OsmAnd/src/net/osmand/plus/views/AnimateDraggingMapThread.java
index 045f6891e11..64a81e9dce5 100644
--- a/OsmAnd/src/net/osmand/plus/views/AnimateDraggingMapThread.java
+++ b/OsmAnd/src/net/osmand/plus/views/AnimateDraggingMapThread.java
@@ -137,9 +137,9 @@ public boolean isAnimating() {
 	 */
 	public void stopAnimatingSync() {
 		// wait until current thread != null
-		MapAnimator animator = getAnimator();
-		if (animator != null) {
-			animator.pause();
+		MapRendererView renderer = getMapRenderer();
+		if (renderer != null) {
+			renderer.pauseAnimation();
 		}
 		stopped = true;
 		Thread tt;
@@ -271,7 +271,7 @@ public void startMoving(double finalLat, double finalLon, Pair<Integer, Double>
 				if (animateZoom) {
 					isAnimatingZoom = true;
 				}
-				animatingMapAnimator(mapRenderer, animator);
+				animatingMapAnimator(mapRenderer);
 				if (animateZoom) {
 					isAnimatingZoom = false;
 				}
@@ -379,7 +379,7 @@ public void startMoving(double finalLat, double finalLon, int endZoom, boolean n
 				if (animateZoom) {
 					isAnimatingZoom = true;
 				}
-				animatingMapAnimator(mapRenderer, animator);
+				animatingMapAnimator(mapRenderer);
 				if (animateZoom) {
 					isAnimatingZoom = false;
 				}
@@ -449,11 +449,7 @@ public int calculateMoveZoom(RotatedTileBox rb, double finalLat, double finalLon
 		return skipAnimation ? 0 : rb.getZoom();
 	}
 
-	private void animatingMapAnimator(@NonNull MapRendererView mapRenderer, @NonNull MapAnimator animator) {
-		long startTime = SystemClock.uptimeMillis();
-		long currTime = startTime;
-		long prevTime = currTime;
-
+	private void animatingMapAnimator(@NonNull MapRendererView mapRenderer) {
 		int targetIntZoom = this.targetIntZoom;
 		double targetFloatZoom = this.targetFloatZoom;
 
@@ -468,13 +464,12 @@ private void animatingMapAnimator(@NonNull MapRendererView mapRenderer, @NonNull
 
 		mapRenderer.setSymbolsUpdateInterval(SYMBOLS_UPDATE_INTERVAL);
 		if (!stopped) {
-			animator.resume();
+			mapRenderer.resumeAnimation();
 		}
 		RotatedTileBox tb = tileView.getCurrentRotatedTileBox();
 		while (!stopped) {
-			currTime = SystemClock.uptimeMillis();
-			boolean animationFinished = animator.update((currTime - prevTime) / 1000f);
-			prevTime = currTime;
+			mapRenderer.requestRender();
+			sleepToRedraw(true);
 
 			PointI target31 = mapRenderer.getTarget();
 			float azimuth = mapRenderer.getAzimuth();
@@ -502,11 +497,9 @@ private void animatingMapAnimator(@NonNull MapRendererView mapRenderer, @NonNull
 				tb.setRotate(-azimuth);
 			}
 
-			if (animationFinished) {
+			if (mapRenderer.isAnimationFinished()) {
 				break;
 			}
-			mapRenderer.requestRender();
-			sleepToRedraw(true);
 		}
 		if (animateZoom) {
 			mapRenderer.setZoom(targetIntZoom + (float) targetFloatZoom);
@@ -676,7 +669,7 @@ public void startZooming(int zoomEnd, double zoomPart, boolean notifyListener) {
 			setTargetValues(zoomEnd, zoomPart, finalLat, finalLon);
 			if (mapRenderer != null && animator != null) {
 				isAnimatingZoom = true;
-				animatingMapAnimator(mapRenderer, animator);
+				animatingMapAnimator(mapRenderer);
 				isAnimatingZoom = false;
 			} else {
 				RotatedTileBox tb = tileView.getCurrentRotatedTileBox().copy();
@@ -842,7 +835,7 @@ public void startRotate(float rotate) {
 			animator.animateAzimuthTo(-rotate, ROTATION_ANIMATION_TIME / 1000f, TimingFunction.Linear,
 					locationServicesAnimationKey);
 
-			startThreadAnimating(() -> animatingMapAnimator(mapRenderer, animator));
+			startThreadAnimating(() -> animatingMapAnimator(mapRenderer));
 		} else {
 			if (!isAnimating()) {
 				clearTargetValues();
diff --git a/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java b/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
index ac07f8ac2a4..4d9a21eb9f9 100644
--- a/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
+++ b/OsmAnd/src/net/osmand/plus/views/OsmandMapTileView.java
@@ -1171,7 +1171,6 @@ private void setZoomAndAnimationImpl(int zoom, double zoomAnimation, double zoom
 	private void setZoomAndAnimationImpl(int zoom, double zoomAnimation, double zoomFloatPart, int centerX, int centerY) {
 		MapRendererView mapRenderer = getMapRenderer();
 		if (mapRenderer != null) {
-			RotatedTileBox tb = currentViewport.copy();
 			int centerX31Before = 0;
 			int centerY31Before = 0;
 
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/AidlMapLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/AidlMapLayer.java
index 6b46a8fa436..98eacc8a064 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/AidlMapLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/AidlMapLayer.java
@@ -177,6 +177,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		boolean carView = getApplication().getOsmandMap().getMapView().isCarView();
 		boolean carViewChanged = this.carView != carView;
 		this.carView = carView;
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/DownloadedRegionsLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/DownloadedRegionsLayer.java
index 824ad7195e2..ea9ea312c56 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/DownloadedRegionsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/DownloadedRegionsLayer.java
@@ -217,6 +217,7 @@ private Paint getPaint(int color) {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		int zoom = tileBox.getZoom();
 		if (zoom < ZOOM_TO_SHOW_SELECTION_ST || !indexRegionBoundaries) {
 			return;
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/FavouritesLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/FavouritesLayer.java
index c503961fcd1..523b891448f 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/FavouritesLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/FavouritesLayer.java
@@ -116,6 +116,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		boolean nightMode = settings != null && settings.isNightMode();
 		boolean nightModeChanged = this.nightMode != nightMode;
 		this.nightMode = nightMode;
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/GPXLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/GPXLayer.java
index c70620b9c4c..04e1a33a447 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/GPXLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/GPXLayer.java
@@ -333,6 +333,7 @@ private void drawMovableWpt(@NonNull Canvas canvas, @NonNull RotatedTileBox tile
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		List<SelectedGpxFile> visibleGPXFiles = new ArrayList<>(selectedGpxHelper.getSelectedGPXFiles());
 
 		boolean tmpVisibleTrackChanged = false;
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/ImpassableRoadsLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/ImpassableRoadsLayer.java
index 4de5cfaf9af..0a1fb383343 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/ImpassableRoadsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/ImpassableRoadsLayer.java
@@ -84,6 +84,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		if (tileBox.getZoom() >= START_ZOOM) {
 			MapRendererView mapRenderer = getMapRenderer();
 			if (mapRenderer != null) {
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapMarkersLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapMarkersLayer.java
index 878ec95febd..3b68b45fdd9 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapMarkersLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapMarkersLayer.java
@@ -267,7 +267,8 @@ public void initLayer(@NonNull OsmandMapTileView view) {
 	}
 
 	@Override
-	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings nightMode) {
+	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings drawSettings) {
+		super.onPrepareBufferImage(canvas, tileBox, drawSettings);
 		OsmandApplication app = getApplication();
 		OsmandSettings settings = app.getSettings();
 		if (!settings.SHOW_MAP_MARKERS.get()) {
@@ -291,7 +292,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 		}
 
 		if (route != null && route.points.size() > 0) {
-			planRouteAttrs.updatePaints(app, nightMode, tileBox);
+			planRouteAttrs.updatePaints(app, drawSettings, tileBox);
 			if (mapRenderer != null) {
 				boolean shouldDraw = shouldDrawPoints();
 				if (shouldDraw || mapActivityInvalidated) {
@@ -321,7 +322,7 @@ public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSett
 		}
 
 		if (settings.SHOW_LINES_TO_FIRST_MARKERS.get() && mapRenderer == null) {
-			drawLineAndText(canvas, tileBox, nightMode);
+			drawLineAndText(canvas, tileBox, drawSettings);
 		}
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapTextLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapTextLayer.java
index e8fa706335f..9d093556cfa 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapTextLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapTextLayer.java
@@ -88,6 +88,7 @@ public void putData(OsmandMapLayer ml, Collection<?> objects) {
 	@SuppressWarnings("unchecked")
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		QuadTree<QuadRect> intersections = initBoundIntersections(tileBox);
 		for (Map.Entry<OsmandMapLayer, Collection<?>> entry : textObjects.entrySet()) {
 			OsmandMapLayer l = entry.getKey();
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapTileLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapTileLayer.java
index 8f2bd263fc1..391fd545181 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapTileLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapTileLayer.java
@@ -286,6 +286,7 @@ private void updateLayerProviderAlpha(int alpha) {
 	@SuppressLint("WrongCall")
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tilesRect, DrawSettings drawSettings) {
+		super.onPrepareBufferImage(canvas, tilesRect, drawSettings);
 		if (view == null) {
 			return;
 		}
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapVectorLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapVectorLayer.java
index f91ce5ca29c..b68550ccf3e 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapVectorLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapVectorLayer.java
@@ -112,6 +112,7 @@ private void updateLayerProviderAlpha(int alpha) {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tilesRect, DrawSettings drawSettings) {
+		super.onPrepareBufferImage(canvas, tilesRect, drawSettings);
 		if (view == null) {
 			return;
 		}
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
index b0c8a4df048..b814ca18f82 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/POIMapLayer.java
@@ -317,6 +317,7 @@ public void fileVisibilityChanged() {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		Set<PoiUIFilter> selectedPoiFilters = app.getPoiFilters().getSelectedPoiFilters();
 		boolean showTravel = app.getSettings().SHOW_TRAVEL.get();
 		boolean routeArticleFilterEnabled = travelRendererHelper.getRouteArticlesProperty().get();
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/PointLocationLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/PointLocationLayer.java
index 9c1aac90436..12d2de44d65 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/PointLocationLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/PointLocationLayer.java
@@ -25,11 +25,9 @@
 import net.osmand.Location;
 import net.osmand.PlatformUtil;
 import net.osmand.core.android.MapRendererView;
-import net.osmand.core.jni.IMapRenderer;
 import net.osmand.core.jni.MapMarker;
 import net.osmand.core.jni.MapMarkerBuilder;
 import net.osmand.core.jni.MapMarkersCollection;
-import net.osmand.core.jni.MapRendererTargetChangedObservable;
 import net.osmand.core.jni.PointI;
 import net.osmand.core.jni.SWIGTYPE_p_void;
 import net.osmand.core.jni.SwigUtilities;
@@ -94,10 +92,6 @@ public class PointLocationLayer extends OsmandMapLayer implements IContextMenuPr
 	private CoreMapMarker navigationMarker;
 	private CoreMapMarker navigationMarkerWithHeading;
 
-	private static final int TARGET_CHANGED_OBSERVABLE_TAG = 1;
-	private MapRendererTargetChangedObservable targetChangedObservable;
-	private IMapRenderer.ITargetChanged onTargetChanged;
-
 	private boolean markersInvalidated = true;
 	private boolean showHeadingCached = false;
 	private Location lastKnownLocationCached;
@@ -180,11 +174,6 @@ private void initCoreRenderer() {
 	@Override
 	public void setMapActivity(@Nullable MapActivity mapActivity) {
 		super.setMapActivity(mapActivity);
-		if (targetChangedObservable != null) {
-			targetChangedObservable.detach(TARGET_CHANGED_OBSERVABLE_TAG);
-			targetChangedObservable = null;
-			onTargetChanged = null;
-		}
 		if (mapActivity != null) {
 			initCoreRenderer();
 		} else {
@@ -204,6 +193,29 @@ public void initLayer(@NonNull OsmandMapTileView view) {
 		updateParams(view.getSettings().getApplicationMode(), false, locationProvider.getLastKnownLocation() == null);
 	}
 
+	@Override
+	public boolean areMapRendererViewEventsAllowed() {
+		return true;
+	}
+
+	@Override
+	public void onUpdateFrame(MapRendererView mapRenderer) {
+		super.onUpdateFrame(mapRenderer);
+		if (useMapCenter()) {
+			Location lastKnownLocation = locationProvider.getLastStaleKnownLocation();
+			Boolean snapToRoad = getApplication().getSettings().SNAP_TO_ROAD.get();
+			Location lastRouteProjection = snapToRoad
+					? getApplication().getOsmandMap().getMapLayers().getRouteLayer().getLastRouteProjection()
+					: null;
+			PointI target31 = mapRenderer.getTarget();
+			Float heading = locationProvider.getHeading();
+			updateMarkerData(lastRouteProjection != null
+					? lastRouteProjection : lastKnownLocation, target31, heading);
+			lastKnownLocationCached = lastKnownLocation;
+			lastHeadingCached = heading;
+		}
+	}
+
 	private boolean setMarkerState(MarkerState markerState, boolean showHeading, boolean forceUpdate) {
 		if (currentMarkerState == markerState && !forceUpdate) {
 			return false;
@@ -385,38 +397,12 @@ private void drawMarkers(@NonNull Canvas canvas, @NonNull RotatedTileBox box, @N
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		if (view == null || tileBox.getZoom() < MIN_ZOOM || locationProvider.getLastStaleKnownLocation() == null) {
 			clearMapMarkersCollections();
 			return;
 		}
 
-		MapRendererView mapRenderer = getMapRenderer();
-		if (mapRenderer != null && targetChangedObservable == null && onTargetChanged == null) {
-			targetChangedObservable = mapRenderer.getTargetChangedObservable();
-			onTargetChanged = new IMapRenderer.ITargetChanged() {
-				@Override
-				public void method(IMapRenderer renderer) {
-					getApplication().runInUIThread(() -> {
-						MapRendererView mapRenderer = getMapRenderer();
-						if (mapRenderer != null && useMapCenter()) {
-							Location lastKnownLocation = locationProvider.getLastStaleKnownLocation();
-							Boolean snapToRoad = getApplication().getSettings().SNAP_TO_ROAD.get();
-							Location lastRouteProjection = snapToRoad
-									? getApplication().getOsmandMap().getMapLayers().getRouteLayer().getLastRouteProjection()
-									: null;
-							PointI target31 = mapRenderer.getTarget();
-							Float heading = locationProvider.getHeading();
-							updateMarkerData(lastRouteProjection != null
-									? lastRouteProjection : lastKnownLocation, target31, heading);
-							lastKnownLocationCached = lastKnownLocation;
-							lastHeadingCached = heading;
-						}
-					});
-				}
-			};
-			onTargetChanged.attachTo(targetChangedObservable, TARGET_CHANGED_OBSERVABLE_TAG);
-		}
-
 		boolean nightMode = settings != null && settings.isNightMode();
 		updateParams(view.getSettings().getApplicationMode(), nightMode, locationProvider.getLastKnownLocation() == null);
 	}
@@ -461,7 +447,6 @@ public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings)
 	@Override
 	public void destroyLayer() {
 		super.destroyLayer();
-		onTargetChanged = null;
 		clearMapMarkersCollections();
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/PointNavigationLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/PointNavigationLayer.java
index a6b6a39d78d..cd2ae50622a 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/PointNavigationLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/PointNavigationLayer.java
@@ -132,6 +132,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tb, DrawSettings nightMode) {
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
 		MapRendererView mapRenderer = getMapView().getMapRenderer();
 		if (mapRenderer != null) {
 			//OpenGL
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/RouteLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/RouteLayer.java
index 971fbf7a79e..4839ade5dfc 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/RouteLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/RouteLayer.java
@@ -20,10 +20,8 @@
 import net.osmand.Location;
 import net.osmand.PlatformUtil;
 import net.osmand.core.android.MapRendererView;
-import net.osmand.core.jni.IMapRenderer;
 import net.osmand.core.jni.MapMarkerBuilder;
 import net.osmand.core.jni.MapMarkersCollection;
-import net.osmand.core.jni.MapRendererTargetChangedObservable;
 import net.osmand.core.jni.PointI;
 import net.osmand.data.LatLon;
 import net.osmand.data.PointDescription;
@@ -33,7 +31,6 @@
 import net.osmand.plus.ChartPointsHelper;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
-import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.base.MapViewTrackingUtilities;
 import net.osmand.plus.mapcontextmenu.other.TrackChartPoints;
 import net.osmand.plus.profiles.LocationIcon;
@@ -99,10 +96,6 @@ public class RouteLayer extends BaseRouteLayer implements IContextMenuProvider {
 	private LatLon highlightedPointLocationCached;
 	private List<LatLon> xAxisPointsCached = new ArrayList<>();
 
-	private static final int TARGET_CHANGED_OBSERVABLE_TAG = 2;
-	private MapRendererTargetChangedObservable targetChangedObservable;
-	private IMapRenderer.ITargetChanged onTargetChanged;
-
 	public RouteLayer(@NonNull Context context) {
 		super(context);
 		OsmandApplication app = (OsmandApplication) context.getApplicationContext();
@@ -116,16 +109,6 @@ public RoutingHelper getHelper() {
 		return helper;
 	}
 
-	@Override
-	public void setMapActivity(@Nullable MapActivity mapActivity) {
-		super.setMapActivity(mapActivity);
-		if (targetChangedObservable != null) {
-			targetChangedObservable.detach(TARGET_CHANGED_OBSERVABLE_TAG);
-			targetChangedObservable = null;
-			onTargetChanged = null;
-		}
-	}
-
 	public void setTrackChartPoints(TrackChartPoints trackChartPoints) {
 		this.trackChartPoints = trackChartPoints;
 	}
@@ -167,25 +150,23 @@ protected void initGeometries(float density) {
 	}
 
 	@Override
-	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
-		super.onPrepareBufferImage(canvas, tileBox, settings);
+	public boolean areMapRendererViewEventsAllowed() {
+		return true;
+	}
 
-		MapRendererView mapRenderer = getMapRenderer();
-		if (mapRenderer != null && targetChangedObservable == null && onTargetChanged == null) {
-			targetChangedObservable = mapRenderer.getTargetChangedObservable();
-			onTargetChanged = new IMapRenderer.ITargetChanged() {
-				@Override
-				public void method(IMapRenderer renderer) {
-					getApplication().runInUIThread(() -> {
-						if (hasMapRenderer() && useMapCenter() && !helper.isPublicTransportMode()) {
-							drawLocations(null, view.getRotatedTileBox());
-						}
-					});
-				}
-			};
-			onTargetChanged.attachTo(targetChangedObservable, TARGET_CHANGED_OBSERVABLE_TAG);
+	@Override
+	public void onUpdateFrame(MapRendererView mapRenderer) {
+		super.onUpdateFrame(mapRenderer);
+		if (hasMapRenderer() && useMapCenter() && !helper.isPublicTransportMode()
+				&& helper.getFinalLocation() != null && helper.getRoute().isCalculated()) {
+			drawLocations(null, view.getRotatedTileBox());
 		}
+	}
 
+	@Override
+	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tileBox, settings);
+		MapRendererView mapRenderer = getMapRenderer();
 		if ((helper.isPublicTransportMode() && transportHelper.getRoutes() != null) ||
 				(helper.getFinalLocation() != null && helper.getRoute().isCalculated())) {
 
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/TransportStopsLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/TransportStopsLayer.java
index 389879d5cc6..783d8b5f331 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/TransportStopsLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/TransportStopsLayer.java
@@ -193,6 +193,7 @@ private int getRadiusPoi(RotatedTileBox tb){
 
 	@Override
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tb, DrawSettings settings) {
+		super.onPrepareBufferImage(canvas, tb, settings);
 		if (!mapsInitialized) {
 			return;
 		}
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/base/OsmandMapLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/base/OsmandMapLayer.java
index 5030963f8c3..335310f6a88 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/base/OsmandMapLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/base/OsmandMapLayer.java
@@ -30,6 +30,7 @@
 
 import net.osmand.PlatformUtil;
 import net.osmand.core.android.MapRendererView;
+import net.osmand.core.android.MapRendererView.MapRendererViewListener;
 import net.osmand.core.jni.MapMarkersCollection;
 import net.osmand.core.jni.PointI;
 import net.osmand.core.jni.QListMapMarker;
@@ -60,7 +61,7 @@
 import java.util.List;
 import java.util.Objects;
 
-public abstract class OsmandMapLayer {
+public abstract class OsmandMapLayer implements MapRendererViewListener {
 	private static final Log LOG = PlatformUtil.getLog(OsmandMapLayer.class);
 
 	public static final float ICON_VISIBLE_PART_RATIO = 0.45f;
@@ -109,6 +110,7 @@ public boolean hasMapRenderer() {
 		return getMapRenderer() != null;
 	}
 
+	@Nullable
 	public MapRendererView getMapRenderer() {
 		return view != null ? view.getMapRenderer() : null;
 	}
@@ -120,8 +122,16 @@ public MapActivity getMapActivity() {
 
 	public void setMapActivity(@Nullable MapActivity mapActivity) {
 		this.mapActivity = mapActivity;
+		MapRendererView mapRenderer = getMapRenderer();
 		if (mapActivity != null) {
+			if (mapRenderer != null) {
+				mapRenderer.addListener(this);
+			}
 			mapActivityInvalidated = true;
+		} else {
+			if (mapRenderer != null) {
+				mapRenderer.removeListener(this);
+			}
 		}
 	}
 
@@ -160,6 +170,10 @@ public boolean isMapGestureAllowed(MapGestureType type) {
 		return true;
 	}
 
+	public boolean areMapRendererViewEventsAllowed() {
+		return false;
+	}
+
 	public void initLayer(@NonNull OsmandMapTileView view) {
 		this.view = view;
 	}
@@ -167,10 +181,22 @@ public void initLayer(@NonNull OsmandMapTileView view) {
 	public abstract void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings);
 
 	public void onPrepareBufferImage(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {
+		MapRendererView mapRenderer = getMapRenderer();
+		if (mapRenderer != null && areMapRendererViewEventsAllowed()) {
+			mapRenderer.addListener(this);
+		}
+	}
+
+	@Override
+	public void onUpdateFrame(MapRendererView mapRenderer) {
 	}
 
 	public void destroyLayer() {
 		clearMapMarkersCollections();
+		MapRendererView mapRenderer = getMapRenderer();
+		if (mapRenderer != null && areMapRendererViewEventsAllowed()) {
+			mapRenderer.removeListener(this);
+		}
 	}
 
 	public void populateObjectContextMenu(@NonNull LatLon latLon, @Nullable Object o, @NonNull ContextMenuAdapter adapter) {
