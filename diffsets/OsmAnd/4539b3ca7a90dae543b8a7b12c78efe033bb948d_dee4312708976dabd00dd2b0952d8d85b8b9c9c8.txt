diff --git a/OsmAnd-shared/build.gradle.kts b/OsmAnd-shared/build.gradle.kts
index 244bd00cfda..134cbe98e09 100644
--- a/OsmAnd-shared/build.gradle.kts
+++ b/OsmAnd-shared/build.gradle.kts
@@ -32,6 +32,7 @@ kotlin {
     val okioVersion = "3.9.0"
     val kxml2Version = "2.1.8"
     val sqliterVersion = "1.3.1"
+    val dateTimeVersion = "0.6.1"
 
     sourceSets {
         commonMain.dependencies {
@@ -41,6 +42,7 @@ kotlin {
             implementation("org.jetbrains.kotlinx:kotlinx-coroutines-core:$coroutinesCoreVersion")
             implementation("org.jetbrains.kotlinx:kotlinx-datetime:$datetimeVersion")
             implementation("com.squareup.okio:okio:$okioVersion")
+            implementation("org.jetbrains.kotlinx:kotlinx-datetime:$dateTimeVersion")
         }
         androidMain.dependencies {
             implementation("androidx.sqlite:sqlite:$sqliteVersion")
diff --git a/OsmAnd-shared/src/androidMain/kotlin/net/osmand/shared/util/PlatformUtil.kt b/OsmAnd-shared/src/androidMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
index 25322f3bc81..d9ca38e9b1b 100644
--- a/OsmAnd-shared/src/androidMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
+++ b/OsmAnd-shared/src/androidMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
@@ -3,23 +3,29 @@ package net.osmand.shared.util
 import android.annotation.SuppressLint
 import android.content.Context
 import android.content.res.Resources
+import kotlinx.datetime.Instant
 import net.osmand.shared.KException
+import net.osmand.shared.api.OsmAndContext
 import net.osmand.shared.api.SQLiteAPI
 import net.osmand.shared.api.SQLiteAPIImpl
 import net.osmand.shared.io.KFile
 import java.io.File
 import java.lang.ref.WeakReference
+import java.text.SimpleDateFormat
+import java.util.Locale
 
 actual object PlatformUtil {
 
 	private var context: WeakReference<Context>? = null
 	private var appDir: File? = null
 	private var gpxDir: File? = null
+	private lateinit var osmAndContext: OsmAndContext
 
 	private var sqliteApi: SQLiteAPI? = null
 
-	fun initialize(context: Context, appDir: File, gpxDir: File) {
+	fun initialize(context: Context, appDir: File, gpxDir: File, osmAndContext: OsmAndContext) {
 		this.context = WeakReference(context)
+		this.osmAndContext = osmAndContext
 		this.appDir = appDir
 		this.gpxDir = gpxDir
 
@@ -27,6 +33,10 @@ actual object PlatformUtil {
 		Localization.initialize(context)
 	}
 
+	actual fun getOsmAndContext(): OsmAndContext {
+		return osmAndContext
+	}
+
 	actual fun currentTimeMillis(): Long {
 		return System.currentTimeMillis()
 	}
@@ -77,4 +87,10 @@ actual object PlatformUtil {
 		}
 		throw Resources.NotFoundException()
 	}
+
+
+	actual fun formatDate(date:Instant, pattern: String):String {
+		val formatter = SimpleDateFormat(pattern, Locale.getDefault())
+		return formatter.format(date)
+	}
 }
\ No newline at end of file
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/api/OsmAndContext.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/api/OsmAndContext.kt
new file mode 100644
index 00000000000..70f6d31f493
--- /dev/null
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/api/OsmAndContext.kt
@@ -0,0 +1,10 @@
+package net.osmand.shared.api
+
+import net.osmand.shared.data.SpeedConstants
+import net.osmand.shared.filters.KMetricsConstants
+
+interface OsmAndContext {
+	fun isGpxFileVisible(path: String): Boolean
+	fun getSpeedSystem(): SpeedConstants?
+	fun getMetricSystem(): KMetricsConstants?
+}
\ No newline at end of file
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/data/SpeedConstants.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/data/SpeedConstants.kt
new file mode 100644
index 00000000000..0b7003b4568
--- /dev/null
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/data/SpeedConstants.kt
@@ -0,0 +1,20 @@
+package net.osmand.shared.data
+
+import net.osmand.shared.util.PlatformUtil
+
+enum class SpeedConstants(val key: String, val descr: String, val imperial: Boolean) {
+	KILOMETERS_PER_HOUR("km_h", "si_kmh", false),
+	MILES_PER_HOUR("mile_per_hour", "si_mph", true),
+	METERS_PER_SECOND("m_s", "si_m_s", false),
+	MINUTES_PER_MILE("min_mile", "si_min_m", true),
+	MINUTES_PER_KILOMETER("min_km", "si_min_km", false),
+	NAUTICALMILES_PER_HOUR("nm_h", "si_nm_h", true);
+
+	fun toHumanString(): String {
+		return PlatformUtil.getStringResource(descr)
+	}
+
+	fun toShortString(): String {
+		return PlatformUtil.getStringResource(key)
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/data/WidthMode.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/data/WidthMode.kt
new file mode 100644
index 00000000000..acd87566b51
--- /dev/null
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/data/WidthMode.kt
@@ -0,0 +1,9 @@
+package net.osmand.plus.card.width
+
+enum class WidthMode(
+	val key: String) {
+	THIN("thin"),
+	MEDIUM("medium"),
+	BOLD("bold"),
+	CUSTOM("");
+}
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ColorSingleFieldTrackFilterParams.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ColorSingleFieldTrackFilterParams.kt
new file mode 100644
index 00000000000..a77dc0a92c9
--- /dev/null
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ColorSingleFieldTrackFilterParams.kt
@@ -0,0 +1,41 @@
+package net.osmand.shared.filters
+
+import net.osmand.plus.myplaces.tracks.filters.SingleFieldTrackFilterParams
+import net.osmand.shared.util.KAlgorithms
+import net.osmand.shared.util.PlatformUtil
+
+class ColorSingleFieldTrackFilterParams : SingleFieldTrackFilterParams() {
+
+//	override fun getItemIcon(app: OsmandApplication, itemName: String): Drawable? {
+//		return if (Algorithms.isEmpty(itemName)) {
+//			app.uiUtilities.getThemedIcon(R.drawable.ic_action_appearance_disabled)
+//		} else {
+//			val color = Color.parseColor(itemName)
+//			val transparencyIcon = getTransparencyIcon(app, color)
+//			val colorIcon = app.uiUtilities.getPaintedIcon(R.drawable.bg_point_circle, color)
+//			UiUtilities.getLayeredIcon(transparencyIcon, colorIcon)
+//		}
+//	}
+//
+//	private fun getTransparencyIcon(app: OsmandApplication, @ColorInt color: Int): Drawable? {
+//		val colorWithoutAlpha = ColorUtilities.removeAlpha(color)
+//		val transparencyColor = ColorUtilities.getColorWithAlpha(colorWithoutAlpha, 0.8f)
+//		return app.uiUtilities.getPaintedIcon(R.drawable.ic_bg_transparency, transparencyColor)
+//	}
+
+	override fun getItemText(itemName: String): String {
+		return if (KAlgorithms.isEmpty(itemName)) {
+			PlatformUtil.getStringResource("not_specified")
+		} else {
+			itemName
+		}
+	}
+
+	override fun trackParamToString(trackParam: Any): String {
+		return KAlgorithms.colorToString(trackParam as Int)
+	}
+
+	override fun includeEmptyValues(): Boolean {
+		return true
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/DateTrackFilter.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/DateTrackFilter.kt
similarity index 57%
rename from OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/DateTrackFilter.kt
rename to OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/DateTrackFilter.kt
index de375d123ce..bbd70fb0ad7 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/DateTrackFilter.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/DateTrackFilter.kt
@@ -1,28 +1,36 @@
-package net.osmand.plus.myplaces.tracks.filters
+package net.osmand.shared.filters
 
-import com.google.gson.annotations.Expose
-import net.osmand.shared.gpx.GpxParameter
+import kotlinx.datetime.Clock
+import kotlinx.datetime.Instant
+import kotlinx.datetime.format.DateTimeComponents
+import kotlinx.datetime.format.DateTimeFormat
+import kotlinx.datetime.format.byUnicodePattern
+import kotlinx.serialization.Serializable
 import net.osmand.plus.configmap.tracks.TrackItem
-import java.text.SimpleDateFormat
-import java.util.Date
-import java.util.Locale
+import net.osmand.shared.gpx.GpxParameter
+import net.osmand.shared.util.PlatformUtil
+
+//import java.text.SimpleDateFormat
+//import java.util.Locale
+
+private const val DATE_PATTERN = "dd.MM.yyyy"
 
 class DateTrackFilter(
 	trackFilterType: TrackFilterType,
 	dateFrom: Long,
 	filterChangedListener: FilterChangedListener?) :
 	BaseTrackFilter(trackFilterType, filterChangedListener) {
-	var initialValueFrom = dateFrom
-	var initialValueTo = Date().time
+	var initialValueFrom = Instant.fromEpochMilliseconds(dateFrom)
+	var initialValueTo = Clock.System.now()
 
-	@Expose
+	@Serializable
 	var valueFrom = initialValueFrom
 		set(value) {
 			field = value
 			filterChangedListener?.onFilterChanged()
 		}
 
-	@Expose
+	@Serializable
 	var valueTo = initialValueTo
 		set(value) {
 			field = value
@@ -35,20 +43,20 @@ class DateTrackFilter(
 			valueTo)
 	}
 
-	private fun isDatesEquals(day1: Long, day2: Long): Boolean {
-		val day1String: String = getDateFormat().format(day1)
-		val day2String: String = getDateFormat().format(day2)
+	private fun isDatesEquals(day1: Instant, day2: Instant): Boolean {
+		val day1String: String = PlatformUtil.formatDate(day1, DATE_PATTERN)
+		val day2String: String = PlatformUtil.formatDate(day2, DATE_PATTERN)
 		return day1String == day2String
 	}
 
 	override fun isTrackAccepted(trackItem: TrackItem): Boolean {
-		return if (trackItem.dataItem == null)
-			false
-		else {
-			val result =
-				trackItem.dataItem!!.getParameter(GpxParameter.FILE_CREATION_TIME) in valueFrom..valueTo
-			result
+
+		trackItem.dataItem?.let {
+			it.getParameter<Long>(GpxParameter.FILE_CREATION_TIME)?.let{creationTime ->
+				return Instant.fromEpochMilliseconds(creationTime) in valueFrom..valueTo
+			}
 		}
+		return false
 	}
 
 	override fun initWithValue(value: BaseTrackFilter) {
@@ -74,8 +82,4 @@ class DateTrackFilter(
 	override fun hashCode(): Int {
 		return valueFrom.hashCode() + valueTo.hashCode()
 	}
-
-	private fun getDateFormat(): SimpleDateFormat {
-		return SimpleDateFormat("dd.MM.yyyy", Locale.getDefault())
-	}
 }
\ No newline at end of file
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/FolderSingleFieldTrackFilterParams.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/FolderSingleFieldTrackFilterParams.kt
index c106d83732c..5cc4dd6ef77 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/FolderSingleFieldTrackFilterParams.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/FolderSingleFieldTrackFilterParams.kt
@@ -1,34 +1,38 @@
 package net.osmand.shared.filters
 
+import net.osmand.plus.myplaces.tracks.filters.SingleFieldTrackFilterParams
+import net.osmand.shared.util.KAlgorithms
+import net.osmand.shared.util.PlatformUtil
+
 class FolderSingleFieldTrackFilterParams : SingleFieldTrackFilterParams() {
-	override fun getItemText(app: OsmandApplication, itemName: String): String {
-		return if (Algorithms.isEmpty(itemName)) {
-			app.getString(R.string.root_folder)
+	override fun getItemText(itemName: String): String {
+		return if (KAlgorithms.isEmpty(itemName)) {
+			PlatformUtil.getStringResource("root_folder")
 		} else {
 			itemName.replace("/", " / ")
 		}
 	}
 
-	override fun getItemIcon(app: OsmandApplication, itemName: String): Drawable? {
-		return app.uiUtilities.getPaintedIcon(
-			R.drawable.ic_action_folder,
-			app.getColor(R.color.icon_color_default_light))
-	}
-
-	override fun getAllItemsIcon(
-		app: OsmandApplication,
-		isChecked: Boolean,
-		nightMode: Boolean): Drawable? {
-		return if (isChecked) {
-			app.uiUtilities.getActiveIcon(
-				R.drawable.ic_action_group_select_all,
-				nightMode)
-		} else {
-			app.uiUtilities.getPaintedIcon(
-				R.drawable.ic_action_group_select_all,
-				app.getColor(R.color.icon_color_default_light))
-		}
-	}
+//	override fun getItemIcon(itemName: String): Drawable? {
+//		return app.uiUtilities.getPaintedIcon(
+//			R.drawable.ic_action_folder,
+//			app.getColor(R.color.icon_color_default_light))
+//	}
+//
+//	override fun getAllItemsIcon(
+//		app: OsmandApplication,
+//		isChecked: Boolean,
+//		nightMode: Boolean): Drawable? {
+//		return if (isChecked) {
+//			app.uiUtilities.getActiveIcon(
+//				R.drawable.ic_action_group_select_all,
+//				nightMode)
+//		} else {
+//			app.uiUtilities.getPaintedIcon(
+//				R.drawable.ic_action_group_select_all,
+//				app.getColor(R.color.icon_color_default_light))
+//		}
+//	}
 
 	override fun hasSelectAllVariant(): Boolean {
 		return true
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/FolderTrackFilter.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/FolderTrackFilter.kt
similarity index 62%
rename from OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/FolderTrackFilter.kt
rename to OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/FolderTrackFilter.kt
index 11bb64f249f..64490994e39 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/FolderTrackFilter.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/FolderTrackFilter.kt
@@ -1,14 +1,12 @@
-package net.osmand.plus.myplaces.tracks.filters
+package net.osmand.shared.filters
 
-import net.osmand.plus.OsmandApplication
 import net.osmand.plus.configmap.tracks.TrackItem
-import net.osmand.plus.myplaces.tracks.filters.TrackFilterType.FOLDER
+import net.osmand.shared.filters.TrackFilterType.FOLDER
 
 open class FolderTrackFilter(
-	app: OsmandApplication,
 	filterChangedListener: FilterChangedListener?
 ) :
-	ListTrackFilter(app, FOLDER, filterChangedListener) {
+	ListTrackFilter(FOLDER, filterChangedListener) {
 
 	override fun isTrackAccepted(trackItem: TrackItem): Boolean {
 		val trackItemPropertyValue = getTrackPropertyValue(trackItem)
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ListFilterAdapter.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ListFilterAdapter.kt
new file mode 100644
index 00000000000..6cdaff49079
--- /dev/null
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ListFilterAdapter.kt
@@ -0,0 +1,251 @@
+package net.osmand.shared.filters
+
+import android.view.View
+import android.view.ViewGroup
+import android.widget.ImageView
+import androidx.fragment.app.FragmentManager
+import androidx.recyclerview.widget.RecyclerView
+import net.osmand.CollatorStringMatcher
+import net.osmand.plus.OsmandApplication
+import net.osmand.plus.R
+import net.osmand.plus.helpers.AndroidUiHelper
+import net.osmand.plus.myplaces.tracks.DialogClosedListener
+import net.osmand.plus.myplaces.tracks.dialogs.FilterAllVariantsListFragment
+import net.osmand.plus.myplaces.tracks.filters.viewholders.FilterVariantViewHolder
+import net.osmand.plus.myplaces.tracks.filters.viewholders.ShowAllViewHolder
+import net.osmand.plus.utils.UiUtilities
+import net.osmand.search.core.SearchPhrase
+import net.osmand.util.Algorithms
+import net.osmand.view.ThreeStateCheckbox
+
+class ListFilterAdapter(
+	val app: OsmandApplication,
+	var nightMode: Boolean,
+	val filterChangedListener: FilterChangedListener?,
+	private val filterPropertiesClosed: DialogClosedListener?) :
+	RecyclerView.Adapter<RecyclerView.ViewHolder>(),
+	TrackFilterPropertiesAdapter {
+	companion object {
+		private const val MIN_VISIBLE_COUNT = 5
+		private const val SELECT_ALL_ITEM_TYPE = 0
+		private const val ITEM_TYPE = 1
+		private const val SHOW_ALL_ITEM_TYPE = 2
+	}
+
+	var items = ArrayList<String>()
+	var showAllItems = false
+	private var additionalItems = ArrayList<String>()
+	lateinit var fragmentManager: FragmentManager
+	lateinit var filter: ListTrackFilter
+	private var isSelectAllItemsBeingSet = false
+
+	private val newSelectedItemsListener =
+		object : FilterAllVariantsListFragment.NewSelectedItemsListener {
+			override fun setSelectedItemsDiff(
+				allSelectedItems: List<String>,
+				selectedItems: List<String>) {
+				filterCollection("")
+				filter.setSelectedItems(allSelectedItems)
+				setNewSelectedItems(selectedItems)
+			}
+		}
+
+	override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {
+		val inflater = UiUtilities.getInflater(parent.context, nightMode)
+		return when (viewType) {
+			ITEM_TYPE -> {
+				val view =
+					inflater.inflate(R.layout.track_filter_checkbox_item, parent, false)
+				FilterVariantViewHolder(view, nightMode)
+			}
+
+			SELECT_ALL_ITEM_TYPE -> {
+				val view = inflater.inflate(
+					R.layout.all_folders_filter_item,
+					parent,
+					false)
+				SelectAllViewHolder(app, view, nightMode)
+			}
+
+			else -> {
+				val view = inflater.inflate(
+					R.layout.show_all_filter_items_item,
+					parent,
+					false)
+				val topBottomPadding =
+					app.resources.getDimensionPixelSize(R.dimen.content_padding_small)
+				val leftRightPadding = if(items.size > 0 && filter.collectionFilterParams.getItemIcon(app, items[0]) != null) {
+					app.resources.getDimensionPixelSize(R.dimen.content_padding_extra_large)
+				} else {
+					app.resources.getDimensionPixelSize(R.dimen.content_padding)
+				}
+				view.setPadding(
+					leftRightPadding,
+					topBottomPadding,
+					leftRightPadding,
+					topBottomPadding)
+				ShowAllViewHolder(view)
+			}
+		}
+	}
+
+	override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {
+		when (holder) {
+			is ShowAllViewHolder -> {
+				holder.title.setText(R.string.shared_string_show_all)
+				holder.itemView.setOnClickListener {
+					FilterAllVariantsListFragment.showInstance(
+						app,
+						fragmentManager,
+						filter,
+						filterPropertiesClosed,
+						newSelectedItemsListener,
+						nightMode)
+				}
+			}
+
+			is FilterVariantViewHolder -> {
+				val itemName = getItem(position)
+				val icon = filter.collectionFilterParams.getItemIcon(app, itemName)
+				holder.title.text = filter.collectionFilterParams.getItemText(app, itemName)
+				holder.icon.setImageDrawable(icon)
+				AndroidUiHelper.updateVisibility(holder.icon, icon != null)
+				AndroidUiHelper.updateVisibility(holder.divider, position != itemCount - 1)
+				holder.itemView.setOnClickListener {
+					filter.setItemSelected(itemName, !filter.isItemSelected(itemName))
+					this.notifyItemChanged(position)
+				}
+				holder.count.text = filter.getTracksCountForItem(itemName).toString()
+				holder.checkBox.isChecked = filter.isItemSelected(itemName)
+			}
+
+			is SelectAllViewHolder -> {
+				isSelectAllItemsBeingSet = true
+				holder.switch.state = if (filter.isSelectAllItemsSelected ||
+					filter.selectedItems.size == items.size) {
+					holder.switch.isChecked = true
+					ThreeStateCheckbox.State.CHECKED
+				} else if (filter.selectedItems.size > 0) {
+					holder.switch.isChecked = false
+					ThreeStateCheckbox.State.MISC
+				} else {
+					holder.switch.isChecked = false
+					ThreeStateCheckbox.State.UNCHECKED
+				}
+				isSelectAllItemsBeingSet = false
+				holder.icon.setImageDrawable(
+					filter.collectionFilterParams.getAllItemsIcon(app,
+						holder.switch.state != ThreeStateCheckbox.State.UNCHECKED,
+						nightMode))
+				holder.switch.setOnCheckedChangeListener { _, isChecked ->
+					onAllFolderSelected(holder.switch, isChecked)
+				}
+				holder.itemView.setOnClickListener {
+					onAllFolderSelected(holder.switch, !filter.isSelectAllItemsSelected)
+					this.notifyItemChanged(position)
+				}
+			}
+		}
+	}
+
+	private fun onAllFolderSelected(checkbox: ThreeStateCheckbox, selected: Boolean) {
+		if (isSelectAllItemsBeingSet) return
+		filter.isSelectAllItemsSelected = selected
+		if (selected) {
+			checkbox.state = ThreeStateCheckbox.State.CHECKED
+			filter.addSelectedItems(ArrayList(filter.allItemsCollection.keys))
+		} else {
+			filter.clearSelectedItems()
+			checkbox.state = ThreeStateCheckbox.State.UNCHECKED
+		}
+		notifyDataSetChanged()
+		filterChangedListener?.onFilterChanged()
+
+	}
+
+	override fun getItemCount(): Int {
+		val correctionForSelectAllItem = if (hasSelectAllVariant()) 1 else 0
+		return if (showAllItems) {
+			items.size
+		} else if (items.size > MIN_VISIBLE_COUNT) {
+			MIN_VISIBLE_COUNT +
+					additionalItems.size +
+					(if (MIN_VISIBLE_COUNT + additionalItems.size == items.size) 0 else 1) +
+					correctionForSelectAllItem
+		} else {
+			items.size + correctionForSelectAllItem
+		}
+	}
+
+	override fun getItemViewType(position: Int): Int {
+		return if (showAllItems) {
+			ITEM_TYPE
+		} else if (position == 0 && hasSelectAllVariant()) {
+			SELECT_ALL_ITEM_TYPE
+		} else if (position == itemCount - 1 && items.size > MIN_VISIBLE_COUNT + additionalItems.size) {
+			SHOW_ALL_ITEM_TYPE
+		} else {
+			ITEM_TYPE
+		}
+	}
+
+	private fun getItem(position: Int): String {
+		val correctionForSelectAllItem = if (hasSelectAllVariant()) 1 else 0
+		return if (showAllItems) {
+			items[position]
+		} else if (position - correctionForSelectAllItem < MIN_VISIBLE_COUNT) {
+			items[position - correctionForSelectAllItem]
+		} else {
+			additionalItems[position - correctionForSelectAllItem - MIN_VISIBLE_COUNT]
+		}
+	}
+
+	private fun hasSelectAllVariant() = filter.collectionFilterParams.hasSelectAllVariant()
+
+	override fun setNewSelectedItems(newSelectedItems: List<String>) {
+		val additionalItems = ArrayList<String>()
+		val correctionForSelectAllItem = if (hasSelectAllVariant()) 1 else 0
+		for (selectedItem in newSelectedItems) {
+			if (items.indexOf(selectedItem) + correctionForSelectAllItem >= MIN_VISIBLE_COUNT) {
+				additionalItems.add(selectedItem)
+			}
+		}
+		this.additionalItems = additionalItems
+		notifyDataSetChanged()
+	}
+
+	override fun filterCollection(query: String) {
+		val filteredItems = ArrayList<String>()
+		if (Algorithms.isEmpty(query)) {
+			filteredItems.addAll(filter.allItems)
+		} else {
+			val matcher = SearchPhrase.NameStringMatcher(
+				query.trim { it <= ' ' },
+				CollatorStringMatcher.StringMatcherMode.CHECK_CONTAINS)
+			filter.let {
+				for (item in it.allItems) {
+					if (matcher.matches(item)) {
+						filteredItems.add(item)
+					}
+				}
+			}
+		}
+		items = filteredItems
+		notifyDataSetChanged()
+	}
+
+	class SelectAllViewHolder(app: OsmandApplication, view: View, val nightMode: Boolean) :
+		RecyclerView.ViewHolder(view) {
+		var switch: ThreeStateCheckbox
+		var icon: ImageView
+
+		init {
+			switch = view.findViewById(R.id.toggle_item)
+			icon = view.findViewById(R.id.icon)
+			UiUtilities.setupCompoundButton(
+				nightMode,
+				net.osmand.plus.utils.ColorUtilities.getActiveColor(app, nightMode),
+				switch)
+		}
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/ListTrackFilter.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ListTrackFilter.kt
similarity index 82%
rename from OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/ListTrackFilter.kt
rename to OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ListTrackFilter.kt
index bd71490975b..aca1c2f63b6 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/ListTrackFilter.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/ListTrackFilter.kt
@@ -1,16 +1,14 @@
-package net.osmand.plus.myplaces.tracks.filters
+package net.osmand.shared.filters
 
-import android.graphics.drawable.Drawable
-import android.util.Pair
-import com.google.gson.annotations.Expose
-import com.google.gson.annotations.SerializedName
-import net.osmand.shared.gpx.GpxParameter
-import net.osmand.plus.OsmandApplication
+import kotlinx.serialization.Serializable
 import net.osmand.plus.configmap.tracks.TrackItem
-import net.osmand.util.Algorithms
+import net.osmand.plus.myplaces.tracks.filters.SingleFieldTrackFilterParams
+import net.osmand.shared.gpx.GpxParameter
+import net.osmand.shared.util.KAlgorithms
+import net.osmand.shared.util.MultiNameSerializer
+import net.osmand.shared.util.SerialNames
 
 open class ListTrackFilter(
-	val app: OsmandApplication,
 	trackFilterType: TrackFilterType,
 	filterChangedListener: FilterChangedListener?) :
 	BaseTrackFilter(trackFilterType, filterChangedListener) {
@@ -34,7 +32,7 @@ open class ListTrackFilter(
 		}
 
 	fun updateFullCollection(items: List<TrackItem>?) {
-		if (Algorithms.isEmpty(items)) {
+		if (KAlgorithms.isEmpty(items)) {
 			allItemsCollection = HashMap()
 		} else {
 			val newCollection = HashMap<String, Int>()
@@ -48,11 +46,12 @@ open class ListTrackFilter(
 	}
 
 	override fun isEnabled(): Boolean {
-		return !Algorithms.isEmpty(selectedItems)
+		return !KAlgorithms.isEmpty(selectedItems)
 	}
 
-	@Expose
-	@SerializedName("selectedItems", alternate=["selectedFolders", "selectedCities", "electedColors", "selectedWidths"])
+//	@SerialName("selectedItems", alternate=["selectedFolders", "selectedCities", "electedColors", "selectedWidths"])
+	@SerialNames("selectedItems", "selectedFolders", "selectedCities", "electedColors", "selectedWidths")
+	@Serializable(with = MultiNameSerializer::class)
 	var selectedItems = ArrayList<String>()
 		protected set
 	var allItems: MutableList<String> = arrayListOf()
@@ -64,7 +63,7 @@ open class ListTrackFilter(
 		allItemsCollection = collection
 	}
 
-	@Expose
+	@Serializable
 	var isSelectAllItemsSelected = false
 		set(value) {
 			field = value
@@ -131,13 +130,13 @@ open class ListTrackFilter(
 		return itemName
 	}
 
-	open fun getItemIcon(itemName: String): Drawable? {
-		return null
-	}
-
-	open fun getSelectAllItemIcon(isChecked: Boolean, nightMode: Boolean): Drawable? {
-		return null
-	}
+//	open fun getItemIcon(itemName: String): Drawable? {
+//		return null
+//	}
+//
+//	open fun getSelectAllItemIcon(isChecked: Boolean, nightMode: Boolean): Drawable? {
+//		return null
+//	}
 
 	fun getTracksCountForItem(itemName: String): Int {
 		return allItemsCollection[itemName] ?: 0
@@ -158,7 +157,7 @@ open class ListTrackFilter(
 	override fun isTrackAccepted(trackItem: TrackItem): Boolean {
 		val trackItemPropertyValue = getTrackPropertyValue(trackItem)
 		for (item in selectedItems) {//***
-			if (Algorithms.stringsEqual(trackItemPropertyValue, item)) {
+			if (KAlgorithms.stringsEqual(trackItemPropertyValue, item)) {
 				return true
 			}
 		}
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/MeasureUnitType.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/MeasureUnitType.kt
index ea5d689dbfd..9da98a4d224 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/MeasureUnitType.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/MeasureUnitType.kt
@@ -1,5 +1,7 @@
 package net.osmand.shared.filters
 
+import net.osmand.shared.util.OsmAndFormatter
+
 //import net.osmand.shared.filters.KMetricsConstants;
 
 enum class MeasureUnitType {
@@ -84,22 +86,19 @@ enum class MeasureUnitType {
 		}
 	}
 
-	fun getBaseValueFromFormatted(mc: KMetricsConstants, value: String): Float {
-		val metricsConstants: MetricsConstants = app.settings.METRIC_SYSTEM.get()
-		val mode = app.settings.applicationMode
-		val speedConstant = app.settings.SPEED_SYSTEM.getModeValue(mode)
+	fun getBaseValueFromFormatted(value: String): Float {
+//		val metricsConstants: MetricsConstants = app.settings.METRIC_SYSTEM.get()
+//		val mode = app.settings.applicationMode
+//		val speedConstant = app.settings.SPEED_SYSTEM.getModeValue(mode)
 		return when (this) {
 			SPEED -> OsmAndFormatter.convertSpeedToMetersPerSecond(
-				value.toFloat(),
-				speedConstant)
+				value.toFloat())
 
 			ALTITUDE -> OsmAndFormatter.getMetersFromFormattedAltitudeValue(
-				value.toFloat(),
-				metricsConstants)
+				value.toFloat())
 
 			DISTANCE -> OsmAndFormatter.convertToMeters(
-				value.toFloat(),
-				metricsConstants)
+				value.toFloat())
 
 			TIME_DURATION -> value.toFloat() * 1000 * 60
 
@@ -108,25 +107,4 @@ enum class MeasureUnitType {
 
 	}
 
-	fun getFormattedValue(mc: KMetricsConstants, value: String): OsmAndFormatter.FormattedValue {
-		val metricsConstants: MetricsConstants = app.settings.METRIC_SYSTEM.get()
-		return when (this) {
-			SPEED -> OsmAndFormatter.getFormattedSpeedValue(value.toFloat(), app)
-			ALTITUDE -> OsmAndFormatter.getFormattedAltitudeValue(
-				value.toDouble(),
-				app,
-				metricsConstants)
-
-			DISTANCE -> OsmAndFormatter.getFormattedDistanceValue(
-				value.toFloat(),
-				app)
-
-			TIME_DURATION -> OsmAndFormatter.FormattedValue(
-				value.toFloat() / 1000 / 60,
-				value,
-				"")
-
-			else -> OsmAndFormatter.FormattedValue(value.toFloat(), value, "")
-		}
-	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/OtherTrackFilter.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/OtherTrackFilter.kt
similarity index 87%
rename from OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/OtherTrackFilter.kt
rename to OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/OtherTrackFilter.kt
index 2547009d569..2190343bfaf 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/OtherTrackFilter.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/OtherTrackFilter.kt
@@ -1,26 +1,25 @@
-package net.osmand.plus.myplaces.tracks.filters
+package net.osmand.shared.filters
 
-import com.google.gson.annotations.Expose
-import net.osmand.plus.OsmandApplication
+import kotlinx.serialization.Serializable
 import net.osmand.plus.configmap.tracks.TrackItem
-import net.osmand.util.Algorithms
+import net.osmand.shared.util.KAlgorithms
+import net.osmand.shared.util.PlatformUtil
 
 class OtherTrackFilter(
-	val app: OsmandApplication,
 	trackFilterType: TrackFilterType,
 	filterChangedListener: FilterChangedListener?) :
 	BaseTrackFilter(trackFilterType, filterChangedListener) {
 
-	@Expose
+	@Serializable
 	var selectedParams = ArrayList<OtherTrackParam>()
 
 	val parameters = ArrayList<OtherTrackParam>()
 
 	//for migration purposes only
-	@Expose
+	@Serializable
 	private var isVisibleOnMap: Boolean = false
 
-	@Expose
+	@Serializable
 	private var hasWaypoints: Boolean = false
 
 	init {
@@ -36,7 +35,7 @@ class OtherTrackFilter(
 	}
 
 	override fun isEnabled(): Boolean {
-		return !Algorithms.isEmpty(selectedParams)
+		return !KAlgorithms.isEmpty(selectedParams)
 	}
 
 	fun isParamSelected(param: OtherTrackParam): Boolean {
@@ -59,8 +58,7 @@ class OtherTrackFilter(
 	private fun isTrackParamAccepted(trackItem: TrackItem, param: OtherTrackParam): Boolean {
 		return when (param) {
 			OtherTrackParam.VISIBLE_ON_MAP -> {
-				val selectedGpxHelper = app.selectedGpxHelper
-				selectedGpxHelper.getSelectedFileByPath(trackItem.path) != null
+				PlatformUtil.getOsmAndContext().isGpxFileVisible(trackItem.path)
 			}
 
 			OtherTrackParam.WITH_WAYPOINTS -> {
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/RangeTrackFilter.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/RangeTrackFilter.kt
similarity index 80%
rename from OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/RangeTrackFilter.kt
rename to OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/RangeTrackFilter.kt
index df91ab724df..bf3dd7dfa74 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/RangeTrackFilter.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/RangeTrackFilter.kt
@@ -1,9 +1,8 @@
-package net.osmand.plus.myplaces.tracks.filters
+package net.osmand.shared.filters
 
-import com.google.gson.annotations.Expose
-import net.osmand.shared.gpx.GpxParameter
-import net.osmand.plus.OsmandApplication
+import kotlinx.serialization.Serializable
 import net.osmand.plus.configmap.tracks.TrackItem
+import net.osmand.shared.gpx.GpxParameter
 import kotlin.math.ceil
 import kotlin.math.floor
 
@@ -11,22 +10,21 @@ import kotlin.math.floor
 open class RangeTrackFilter<T : Comparable<T>>(
 	minValue: T,
 	maxValue: T,
-	val app: OsmandApplication,
 	trackFilterType: TrackFilterType,
 	filterChangedListener: FilterChangedListener?)
 	: BaseTrackFilter(trackFilterType, filterChangedListener) {
 
-	@Expose
+	@Serializable
 	var minValue: T
 
-	@Expose
+	@Serializable
 	var maxValue: T
 		private set
 
-	@Expose
+	@Serializable
 	var valueFrom: T
 
-	@Expose
+	@Serializable
 	var valueTo: T
 
 	init {
@@ -48,14 +46,14 @@ open class RangeTrackFilter<T : Comparable<T>>(
 		val convertedValue: T? = when (getProperty().typeClass) {
 			Double::class -> check(value.toDouble())
 			Float::class -> check(value.toFloat())
-			Integer::class -> check(value.toInt())
+			Int::class -> check(value.toInt())
 			Long::class -> check(value.toLong())
 			else -> null
 		}
 		if (convertedValue != null) {
 			return convertedValue
 		} else {
-			throw java.lang.IllegalArgumentException("value can not be cast to ${trackFilterType.property!!.typeClass}")
+			throw IllegalArgumentException("value can not be cast to ${trackFilterType.property!!.typeClass}")
 		}
 
 	}
@@ -63,7 +61,6 @@ open class RangeTrackFilter<T : Comparable<T>>(
 	fun setValueTo(to: String, updateListeners: Boolean = true) {
 		val baseValue = getComparableValue(
 			trackFilterType.measureUnitType.getBaseValueFromFormatted(
-				app,
 				to))
 		setValueTo(baseValue, updateListeners)
 	}
@@ -71,7 +68,6 @@ open class RangeTrackFilter<T : Comparable<T>>(
 	fun setValueFrom(from: String, updateListeners: Boolean = true) {
 		val baseValue = getComparableValue(
 			trackFilterType.measureUnitType.getBaseValueFromFormatted(
-				app,
 				from)).toString()
 		setValueFrom(getValueFromString(baseValue), updateListeners)
 	}
@@ -133,10 +129,10 @@ open class RangeTrackFilter<T : Comparable<T>>(
 				other.valueTo == valueTo
 	}
 
-	open fun getDisplayMinValue(): Int {
-		val formattedValue = trackFilterType.measureUnitType.getFormattedValue(app, flor(minValue))
-		return formattedValue.valueSrc.toInt()
-	}
+//	open fun getDisplayMinValue(): Int {
+//		val formattedValue = trackFilterType.measureUnitType.getFormattedValue(app, flor(minValue))
+//		return formattedValue.valueSrc.toInt()
+//	}
 
 	private fun flor(value: T): String {
 		return when (value) {
@@ -170,21 +166,21 @@ open class RangeTrackFilter<T : Comparable<T>>(
 		}
 	}
 
-	open fun getDisplayMaxValue(): Int {
-		val formattedValue = trackFilterType.measureUnitType.getFormattedValue(app, ceil(maxValue))
-		return formattedValue.valueSrc.toInt()
-	}
-
-	open fun getDisplayValueFrom(): Int {
-		val formattedValue =
-			trackFilterType.measureUnitType.getFormattedValue(app, valueFrom.toString())
-		return formattedValue.valueSrc.toInt()
-	}
-
-	open fun getDisplayValueTo(): Int {
-		val formattedValue = trackFilterType.measureUnitType.getFormattedValue(app, ceil(valueTo))
-		return formattedValue.valueSrc.toInt()
-	}
+//	open fun getDisplayMaxValue(): Int {
+//		val formattedValue = trackFilterType.measureUnitType.getFormattedValue(app, ceil(maxValue))
+//		return formattedValue.valueSrc.toInt()
+//	}
+//
+//	open fun getDisplayValueFrom(): Int {
+//		val formattedValue =
+//			trackFilterType.measureUnitType.getFormattedValue(app, valueFrom.toString())
+//		return formattedValue.valueSrc.toInt()
+//	}
+//
+//	open fun getDisplayValueTo(): Int {
+//		val formattedValue = trackFilterType.measureUnitType.getFormattedValue(app, ceil(valueTo))
+//		return formattedValue.valueSrc.toInt()
+//	}
 
 	private fun getProperty(): GpxParameter {
 		return trackFilterType.property!!
@@ -195,7 +191,7 @@ open class RangeTrackFilter<T : Comparable<T>>(
 			return getValueFromString(value)
 		} else if (value is Number) {
 			return when (getProperty().typeClass) {
-				Integer::class -> check(value.toInt()) as T
+				Int::class -> check(value.toInt()) as T
 				Double::class -> check(value.toDouble()) as T
 				Long::class -> check(value.toLong()) as T
 				Float::class -> check(value.toFloat()) as T
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/SingleFieldTrackFilterParams.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/SingleFieldTrackFilterParams.kt
index 1aa44111ff2..8825a00feaf 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/SingleFieldTrackFilterParams.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/SingleFieldTrackFilterParams.kt
@@ -6,27 +6,26 @@ open class SingleFieldTrackFilterParams {
 		return false
 	}
 
-	fun getItemText(itemName: String): String {
+	open fun getItemText(itemName: String): String {
 		return itemName
 	}
 
-	@Nullable
-	fun getItemIcon(
-		app: OsmandApplication?,
-		itemName: String?): android.graphics.drawable.Drawable? {
-		return null
-	}
-
-	@Nullable
-	fun getAllItemsIcon(
-		app: OsmandApplication?,
-		isChecked: Boolean,
-		nightMode: Boolean): android.graphics.drawable.Drawable? {
-		return null
-	}
-
-	@NonNull
-	open fun trackParamToString(@NonNull trackParam: Any): String? {
+//	@Nullable
+//	fun getItemIcon(
+//		app: OsmandApplication?,
+//		itemName: String?): android.graphics.drawable.Drawable? {
+//		return null
+//	}
+//
+//	@Nullable
+//	fun getAllItemsIcon(
+//		app: OsmandApplication?,
+//		isChecked: Boolean,
+//		nightMode: Boolean): android.graphics.drawable.Drawable? {
+//		return null
+//	}
+
+	open fun trackParamToString(trackParam: Any): String {
 		return trackParam.toString()
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/TextTrackFilter.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/TextTrackFilter.kt
similarity index 96%
rename from OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/TextTrackFilter.kt
rename to OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/TextTrackFilter.kt
index 3ab53b68afa..b93e9578636 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/TextTrackFilter.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/TextTrackFilter.kt
@@ -1,4 +1,4 @@
-package net.osmand.plus.myplaces.tracks.filters
+package net.osmand.shared.filters
 
 import com.google.gson.annotations.Expose
 import net.osmand.CollatorStringMatcher
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/TrackFilterType.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/TrackFilterType.kt
index 3f4a0e8f524..fc8504a15ce 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/TrackFilterType.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/TrackFilterType.kt
@@ -1,5 +1,6 @@
 package net.osmand.shared.filters
 
+import net.osmand.plus.myplaces.tracks.filters.SingleFieldTrackFilterParams
 import net.osmand.shared.gpx.GpxParameter
 import net.osmand.shared.filters.OtherTrackParam.VISIBLE_ON_MAP
 import net.osmand.shared.filters.OtherTrackParam.WITH_WAYPOINTS
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/WidthSingleFieldTrackFilterParams.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/WidthSingleFieldTrackFilterParams.kt
new file mode 100644
index 00000000000..d2b2e40db0f
--- /dev/null
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/filters/WidthSingleFieldTrackFilterParams.kt
@@ -0,0 +1,50 @@
+package net.osmand.shared.filters
+
+import net.osmand.plus.card.width.WidthMode
+import net.osmand.plus.myplaces.tracks.filters.SingleFieldTrackFilterParams
+import net.osmand.shared.util.KAlgorithms
+import net.osmand.shared.util.PlatformUtil
+
+class WidthSingleFieldTrackFilterParams : SingleFieldTrackFilterParams() {
+
+//	override fun getItemIcon(app: OsmandApplication, itemName: String): Drawable? {
+//		return if (Algorithms.isEmpty(itemName)) {
+//			app.uiUtilities.getThemedIcon(R.drawable.ic_action_appearance_disabled)
+//		} else {
+//			val iconColor = when (itemName) {
+//				WidthMode.THIN.key,
+//				WidthMode.MEDIUM.key,
+//				WidthMode.BOLD.key -> R.color.track_filter_width_standard
+//
+//				else -> {
+//					R.color.track_filter_width_custom
+//				}
+//			}
+//			TrackAppearanceFragment.getTrackIcon(
+//				app,
+//				itemName,
+//				false,
+//				app.getColor(iconColor))
+//		}
+//	}
+
+	override fun getItemText(itemName: String): String {
+		return if (KAlgorithms.isEmpty(itemName)) {
+			PlatformUtil.getStringResource("not_specified")
+		} else {
+			when (itemName) {
+				WidthMode.THIN.key -> PlatformUtil.getStringResource("rendering_value_thin_name")
+				WidthMode.MEDIUM.key -> PlatformUtil.getStringResource("rendering_value_medium_name")
+				WidthMode.BOLD.key -> PlatformUtil.getStringResource("rendering_value_bold_name")
+				else -> {
+					"${PlatformUtil.getStringResource("shared_string_custom")}: $itemName"
+				}
+
+			}
+		}
+	}
+
+	override fun includeEmptyValues(): Boolean {
+		return true
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/MultiNameSerializer.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/MultiNameSerializer.kt
new file mode 100644
index 00000000000..81999cf545f
--- /dev/null
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/MultiNameSerializer.kt
@@ -0,0 +1,44 @@
+package net.osmand.shared.util
+
+import kotlinx.serialization.*
+import kotlinx.serialization.descriptors.*
+import kotlinx.serialization.encoding.*
+import kotlinx.serialization.json.JsonDecoder
+import kotlinx.serialization.json.JsonElement
+import kotlinx.serialization.json.JsonObject
+@Target(AnnotationTarget.PROPERTY)
+@Retention(AnnotationRetention.RUNTIME)
+annotation class SerialNames(vararg val names: String)
+
+object MultiNameSerializer : KSerializer<String> {
+
+    override val descriptor: SerialDescriptor = PrimitiveSerialDescriptor("MultiNameSerializer", PrimitiveKind.STRING)
+
+    override fun serialize(encoder: Encoder, value: String) {
+        encoder.encodeString(value)
+    }
+
+    @OptIn(ExperimentalSerializationApi::class)
+    override fun deserialize(decoder: Decoder): String {
+        require(decoder is JsonDecoder) { "This class can be loaded only by JSON" }
+        val jsonElement = decoder.decodeJsonElement()
+
+        val jsonObject = jsonElement as? JsonObject
+            ?: throw SerializationException("Expected JsonObject")
+
+        val annotations = decoder.serializersModule.getContextualDescriptor(descriptor)?.getElementAnnotations(0)
+            ?: throw SerializationException("Descriptor or annotations not found")
+
+        val possibleNames = annotations
+            .filterIsInstance<SerialNames>()
+            .flatMap { it.names.toList() }
+
+        for (name in possibleNames) {
+            jsonObject[name]?.let {
+                return it.toString().trim('"')
+            }
+        }
+
+        throw SerializationException("None of the expected names were found in the JSON")
+    }
+}
\ No newline at end of file
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/OsmAndFormatter.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/OsmAndFormatter.kt
new file mode 100644
index 00000000000..46f37f4142f
--- /dev/null
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/OsmAndFormatter.kt
@@ -0,0 +1,58 @@
+package net.osmand.shared.util
+
+import net.osmand.shared.data.SpeedConstants.KILOMETERS_PER_HOUR
+import net.osmand.shared.data.SpeedConstants.MILES_PER_HOUR
+import net.osmand.shared.data.SpeedConstants.NAUTICALMILES_PER_HOUR
+import net.osmand.shared.filters.KMetricsConstants
+
+object OsmAndFormatter {
+	const val METERS_IN_KILOMETER = 1000f
+	const val METERS_IN_ONE_MILE = 1609.344f // 1609.344
+
+	const val METERS_IN_ONE_NAUTICALMILE = 1852f // 1852
+
+
+	const val YARDS_IN_ONE_METER = 1.0936f
+	const val FEET_IN_ONE_METER = YARDS_IN_ONE_METER * 3f
+	const val INCHES_IN_ONE_METER = FEET_IN_ONE_METER * 12
+
+	const val KILOGRAMS_IN_ONE_TON = 1000
+	const val POUNDS_IN_ONE_KILOGRAM = 2.2046f
+
+
+	fun convertSpeedToMetersPerSecond(
+		formattedValueSrc: Float): Float {
+		val mc = PlatformUtil.getOsmAndContext().getSpeedSystem()
+		return when (mc) {
+			KILOMETERS_PER_HOUR -> formattedValueSrc / 3.6f
+			MILES_PER_HOUR -> (formattedValueSrc * METERS_IN_ONE_MILE / 3.6 * 1000).toFloat()
+			NAUTICALMILES_PER_HOUR -> (formattedValueSrc * METERS_IN_ONE_NAUTICALMILE / 3.6 * 1000).toFloat()
+			else -> formattedValueSrc
+		}
+	}
+
+	fun getMetersFromFormattedAltitudeValue(altitude: Float): Float {
+		val mc = PlatformUtil.getOsmAndContext().getMetricSystem()
+		val useFeet =
+			mc == KMetricsConstants.MILES_AND_FEET || mc == KMetricsConstants.MILES_AND_YARDS || mc == KMetricsConstants.NAUTICAL_MILES_AND_FEET
+		return if (useFeet) {
+			altitude / FEET_IN_ONE_METER
+		} else {
+			altitude
+		}
+	}
+
+	fun convertToMeters(distance: Float): Float {
+		val mainUnitInMeters: Float
+		val mc = PlatformUtil.getOsmAndContext().getMetricSystem()
+		mainUnitInMeters =
+			when (mc) {
+				KMetricsConstants.MILES_AND_FEET, KMetricsConstants.MILES_AND_METERS -> METERS_IN_ONE_MILE
+				KMetricsConstants.NAUTICAL_MILES_AND_METERS, KMetricsConstants.NAUTICAL_MILES_AND_FEET -> METERS_IN_ONE_NAUTICALMILE
+				else -> METERS_IN_KILOMETER
+			}
+		return distance * mainUnitInMeters
+	}
+
+
+}
\ No newline at end of file
diff --git a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/PlatformUtil.kt b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
index 56b40481f5d..00078143cc7 100644
--- a/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
+++ b/OsmAnd-shared/src/commonMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
@@ -1,5 +1,7 @@
 package net.osmand.shared.util
 
+import kotlinx.datetime.Instant
+import net.osmand.shared.api.OsmAndContext
 import net.osmand.shared.api.SQLiteAPI
 import net.osmand.shared.io.KFile
 
@@ -13,4 +15,8 @@ expect object PlatformUtil {
 	fun getSQLiteAPI(): SQLiteAPI
 
 	fun getStringResource(stringId: String): String
+
+	fun formatDate(date: Instant, pattern: String):String
+
+	fun getOsmAndContext(): OsmAndContext
 }
\ No newline at end of file
diff --git a/OsmAnd-shared/src/iosMain/kotlin/net/osmand/shared/util/PlatformUtil.kt b/OsmAnd-shared/src/iosMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
index d7355b88e1f..cb703a9f2de 100644
--- a/OsmAnd-shared/src/iosMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
+++ b/OsmAnd-shared/src/iosMain/kotlin/net/osmand/shared/util/PlatformUtil.kt
@@ -1,5 +1,6 @@
 package net.osmand.shared.util
 
+import kotlinx.datetime.Instant
 import net.osmand.shared.api.SQLiteAPI
 import net.osmand.shared.api.SQLiteAPIImpl
 import net.osmand.shared.api.XmlFactoryAPI
@@ -74,4 +75,12 @@ actual object PlatformUtil {
 			return xmlFactoryApi.createXmlSerializerApi()
 		}
 	}
+
+	actual fun getStringResource(stringId: String): String {
+		TODO("Not yet implemented")
+	}
+
+	actual fun formatDate(date: Instant, pattern: String): String {
+		TODO("Not yet implemented")
+	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/OsmAndContextImpl.kt b/OsmAnd/src/net/osmand/OsmAndContextImpl.kt
new file mode 100644
index 00000000000..077c9d96eeb
--- /dev/null
+++ b/OsmAnd/src/net/osmand/OsmAndContextImpl.kt
@@ -0,0 +1,64 @@
+package net.osmand
+
+import android.content.Context
+import net.osmand.plus.OsmandApplication
+import net.osmand.plus.settings.enums.MetricsConstants
+import net.osmand.shared.api.OsmAndContext
+import net.osmand.shared.data.SpeedConstants
+import net.osmand.plus.settings.enums.SpeedConstants.KILOMETERS_PER_HOUR
+import net.osmand.plus.settings.enums.SpeedConstants.MILES_PER_HOUR
+import net.osmand.plus.settings.enums.SpeedConstants.METERS_PER_SECOND
+import net.osmand.plus.settings.enums.SpeedConstants.MINUTES_PER_MILE
+import net.osmand.plus.settings.enums.SpeedConstants.MINUTES_PER_KILOMETER
+import net.osmand.plus.settings.enums.SpeedConstants.NAUTICALMILES_PER_HOUR
+import net.osmand.shared.filters.KMetricsConstants
+import java.lang.ref.WeakReference
+
+object OsmAndContextImpl: OsmAndContext {
+	private var app: WeakReference<OsmandApplication>? = null
+
+	fun initialize(application: OsmandApplication) {
+		app = WeakReference(application)
+	}
+
+	override fun isGpxFileVisible(path: String): Boolean {
+		app?.get()?.let {
+			val helper = it.selectedGpxHelper
+			helper.getSelectedFileByPath(path) != null
+		}
+		return false
+	}
+
+	override fun getSpeedSystem(): SpeedConstants? {
+		app?.get()?.let {
+			val settings = it.settings
+			val mode = settings.applicationMode
+			return when(settings.SPEED_SYSTEM.getModeValue(mode)) {
+				KILOMETERS_PER_HOUR -> SpeedConstants.KILOMETERS_PER_HOUR
+				MILES_PER_HOUR -> SpeedConstants.MILES_PER_HOUR
+				METERS_PER_SECOND -> SpeedConstants.METERS_PER_SECOND
+				MINUTES_PER_MILE -> SpeedConstants.MINUTES_PER_MILE
+				MINUTES_PER_KILOMETER -> SpeedConstants.MINUTES_PER_KILOMETER
+				NAUTICALMILES_PER_HOUR -> SpeedConstants.NAUTICALMILES_PER_HOUR
+				else -> null
+			}
+		}
+		return null
+	}
+
+	override fun getMetricSystem(): KMetricsConstants? {
+		app?.get()?.let {
+			val metricsConstants = it.settings.METRIC_SYSTEM.get()
+			return when(metricsConstants) {
+				MetricsConstants.KILOMETERS_AND_METERS -> KMetricsConstants.KILOMETERS_AND_METERS
+				MetricsConstants.MILES_AND_FEET -> KMetricsConstants.MILES_AND_FEET
+				MetricsConstants.MILES_AND_METERS -> KMetricsConstants.MILES_AND_METERS
+				MetricsConstants.MILES_AND_YARDS -> KMetricsConstants.MILES_AND_YARDS
+				MetricsConstants.NAUTICAL_MILES_AND_METERS -> KMetricsConstants.NAUTICAL_MILES_AND_METERS
+				MetricsConstants.NAUTICAL_MILES_AND_FEET -> KMetricsConstants.NAUTICAL_MILES_AND_FEET
+				else -> null
+			}
+		}
+		return null
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/OsmandApplication.java b/OsmAnd/src/net/osmand/plus/OsmandApplication.java
index 1a34a268b35..265eab6464d 100644
--- a/OsmAnd/src/net/osmand/plus/OsmandApplication.java
+++ b/OsmAnd/src/net/osmand/plus/OsmandApplication.java
@@ -31,6 +31,7 @@
 import androidx.multidex.MultiDex;
 import androidx.multidex.MultiDexApplication;
 
+import net.osmand.OsmAndContextImpl;
 import net.osmand.PlatformUtil;
 import net.osmand.aidl.OsmandAidlApi;
 import net.osmand.data.LatLon;
@@ -270,7 +271,8 @@ public void onStop(@NonNull LifecycleOwner owner) {
 		FileUtils.removeUnnecessaryFiles(this);
 
 		// Initialize shared library
-		net.osmand.shared.util.PlatformUtil.INSTANCE.initialize(this, getAppPath(null), getAppPath(GPX_INDEX_DIR));
+		OsmAndContextImpl.INSTANCE.initialize(this);
+		net.osmand.shared.util.PlatformUtil.INSTANCE.initialize(this, getAppPath(null), getAppPath(GPX_INDEX_DIR), OsmAndContextImpl.INSTANCE);
 
 		localeHelper.checkPreferredLocale();
 		appInitializer.onCreateApplication();
diff --git a/OsmAnd/src/net/osmand/plus/charts/ChartUtils.java b/OsmAnd/src/net/osmand/plus/charts/ChartUtils.java
index 71e3fba7718..29902e63868 100644
--- a/OsmAnd/src/net/osmand/plus/charts/ChartUtils.java
+++ b/OsmAnd/src/net/osmand/plus/charts/ChartUtils.java
@@ -49,7 +49,7 @@
 import net.osmand.plus.plugins.PluginsHelper;
 import net.osmand.plus.settings.backend.OsmandSettings;
 import net.osmand.plus.settings.enums.MetricsConstants;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.ColorUtilities;
 import net.osmand.plus.utils.OsmAndFormatter;
diff --git a/OsmAnd/src/net/osmand/plus/helpers/WaypointHelper.java b/OsmAnd/src/net/osmand/plus/helpers/WaypointHelper.java
index c0aa66f81cd..63ff3b14542 100644
--- a/OsmAnd/src/net/osmand/plus/helpers/WaypointHelper.java
+++ b/OsmAnd/src/net/osmand/plus/helpers/WaypointHelper.java
@@ -31,7 +31,7 @@
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.OsmandSettings;
 import net.osmand.plus.settings.enums.MetricsConstants;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.util.MapUtils;
 
 import java.util.ArrayList;
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/ColorSingleFieldTrackFilterParams.kt b/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/ColorSingleFieldTrackFilterParams.kt
deleted file mode 100644
index da680b0444e..00000000000
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/ColorSingleFieldTrackFilterParams.kt
+++ /dev/null
@@ -1,46 +0,0 @@
-package net.osmand.plus.myplaces.tracks.filters
-
-import android.graphics.Color
-import android.graphics.drawable.Drawable
-import androidx.annotation.ColorInt
-import net.osmand.plus.OsmandApplication
-import net.osmand.plus.R
-import net.osmand.plus.utils.ColorUtilities
-import net.osmand.plus.utils.UiUtilities
-import net.osmand.util.Algorithms
-
-class ColorSingleFieldTrackFilterParams : SingleFieldTrackFilterParams() {
-
-	override fun getItemIcon(app: OsmandApplication, itemName: String): Drawable? {
-		return if (Algorithms.isEmpty(itemName)) {
-			app.uiUtilities.getThemedIcon(R.drawable.ic_action_appearance_disabled)
-		} else {
-			val color = Color.parseColor(itemName)
-			val transparencyIcon = getTransparencyIcon(app, color)
-			val colorIcon = app.uiUtilities.getPaintedIcon(R.drawable.bg_point_circle, color)
-			UiUtilities.getLayeredIcon(transparencyIcon, colorIcon)
-		}
-	}
-
-	private fun getTransparencyIcon(app: OsmandApplication, @ColorInt color: Int): Drawable? {
-		val colorWithoutAlpha = ColorUtilities.removeAlpha(color)
-		val transparencyColor = ColorUtilities.getColorWithAlpha(colorWithoutAlpha, 0.8f)
-		return app.uiUtilities.getPaintedIcon(R.drawable.ic_bg_transparency, transparencyColor)
-	}
-
-	override fun getItemText(app: OsmandApplication, itemName: String): String {
-		return if (Algorithms.isEmpty(itemName)) {
-			app.getString(R.string.not_specified)
-		} else {
-			itemName
-		}
-	}
-
-	override fun trackParamToString(trackParam: Any): String {
-		return Algorithms.colorToString(trackParam as Int)
-	}
-
-	override fun includeEmptyValues(): Boolean {
-		return true
-	}
-}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/FolderSingleFieldTrackFilterParams.kt b/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/FolderSingleFieldTrackFilterParams.kt
deleted file mode 100644
index 06015ca23f1..00000000000
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/FolderSingleFieldTrackFilterParams.kt
+++ /dev/null
@@ -1,48 +0,0 @@
-package net.osmand.plus.myplaces.tracks.filters
-
-import android.graphics.drawable.Drawable
-import net.osmand.plus.OsmandApplication
-import net.osmand.plus.R
-import net.osmand.util.Algorithms
-
-class FolderSingleFieldTrackFilterParams : SingleFieldTrackFilterParams() {
-	override fun getItemText(app: OsmandApplication, itemName: String): String {
-		return if (Algorithms.isEmpty(itemName)) {
-			app.getString(R.string.root_folder)
-		} else {
-			itemName.replace("/", " / ")
-		}
-	}
-
-	override fun getItemIcon(app: OsmandApplication, itemName: String): Drawable? {
-		return app.uiUtilities.getPaintedIcon(
-			R.drawable.ic_action_folder,
-			app.getColor(R.color.icon_color_default_light))
-	}
-
-	override fun getAllItemsIcon(
-		app: OsmandApplication,
-		isChecked: Boolean,
-		nightMode: Boolean): Drawable? {
-		return if (isChecked) {
-			app.uiUtilities.getActiveIcon(
-				R.drawable.ic_action_group_select_all,
-				nightMode)
-		} else {
-			app.uiUtilities.getPaintedIcon(
-				R.drawable.ic_action_group_select_all,
-				app.getColor(R.color.icon_color_default_light))
-		}
-	}
-
-	override fun hasSelectAllVariant(): Boolean {
-		return true
-	}
-
-	override fun sortByName(): Boolean {
-		return true
-	}
-	override fun sortDescending(): Boolean {
-		return false
-	}
-}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/OtherFilterAdapter.kt b/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/OtherFilterAdapter.kt
index 6f99d6ee5bb..d837a8d8982 100644
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/OtherFilterAdapter.kt
+++ b/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/OtherFilterAdapter.kt
@@ -9,6 +9,9 @@ import net.osmand.plus.OsmandApplication
 import net.osmand.plus.R
 import net.osmand.plus.utils.UiUtilities
 import net.osmand.plus.widgets.TextViewEx
+import net.osmand.shared.filters.FilterChangedListener
+import net.osmand.shared.filters.OtherTrackFilter
+import net.osmand.shared.filters.OtherTrackParam
 
 class OtherFilterAdapter(
 	val app: OsmandApplication,
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/SingleFieldTrackFilterParams.java b/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/SingleFieldTrackFilterParams.java
deleted file mode 100644
index 27ee8e272fe..00000000000
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/SingleFieldTrackFilterParams.java
+++ /dev/null
@@ -1,45 +0,0 @@
-package net.osmand.plus.myplaces.tracks.filters;
-
-import android.graphics.drawable.Drawable;
-
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
-import net.osmand.plus.OsmandApplication;
-
-public class SingleFieldTrackFilterParams {
-	boolean hasSelectAllVariant() {
-		return false;
-	}
-
-	String getItemText(OsmandApplication app, String itemName) {
-		return itemName;
-	}
-
-	@Nullable
-	Drawable getItemIcon(OsmandApplication app, String itemName) {
-		return null;
-	}
-
-	@Nullable
-	Drawable getAllItemsIcon(OsmandApplication app, boolean isChecked, boolean nightMode) {
-		return null;
-	}
-
-	@NonNull
-	String trackParamToString(@NonNull Object trackParam) {
-		return trackParam.toString();
-	}
-
-	public boolean includeEmptyValues() {
-		return false;
-	}
-
-	public boolean sortByName() {
-		return false;
-	}
-
-	public boolean sortDescending() {
-		return true;
-	}
-}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/WidthSingleFieldTrackFilterParams.kt b/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/WidthSingleFieldTrackFilterParams.kt
deleted file mode 100644
index 61789bd5d06..00000000000
--- a/OsmAnd/src/net/osmand/plus/myplaces/tracks/filters/WidthSingleFieldTrackFilterParams.kt
+++ /dev/null
@@ -1,51 +0,0 @@
-package net.osmand.plus.myplaces.tracks.filters
-
-import android.graphics.drawable.Drawable
-import net.osmand.plus.OsmandApplication
-import net.osmand.plus.R
-import net.osmand.plus.card.width.WidthMode
-import net.osmand.plus.track.fragments.TrackAppearanceFragment
-import net.osmand.util.Algorithms
-
-class WidthSingleFieldTrackFilterParams : SingleFieldTrackFilterParams() {
-
-	override fun getItemIcon(app: OsmandApplication, itemName: String): Drawable? {
-		return if (Algorithms.isEmpty(itemName)) {
-			app.uiUtilities.getThemedIcon(R.drawable.ic_action_appearance_disabled)
-		} else {
-			val iconColor = when (itemName) {
-				WidthMode.THIN.key,
-				WidthMode.MEDIUM.key,
-				WidthMode.BOLD.key -> R.color.track_filter_width_standard
-
-				else -> {
-					R.color.track_filter_width_custom
-				}
-			}
-			TrackAppearanceFragment.getTrackIcon(
-				app,
-				itemName,
-				false,
-				app.getColor(iconColor))
-		}
-	}
-
-	override fun getItemText(app: OsmandApplication, itemName: String): String {
-		return if (Algorithms.isEmpty(itemName)) {
-			app.getString(R.string.not_specified)
-		} else {
-			when (itemName) {
-				WidthMode.THIN.key -> app.getString(R.string.rendering_value_thin_name)
-				WidthMode.MEDIUM.key -> app.getString(R.string.rendering_value_medium_name)
-				WidthMode.BOLD.key -> app.getString(R.string.rendering_value_bold_name)
-				else -> {
-					"${app.getString(R.string.shared_string_custom)}: $itemName"
-				}
-			}
-		}
-	}
-
-	override fun includeEmptyValues(): Boolean {
-		return true
-	}
-}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
index 41ba86a3873..573fc85b143 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
@@ -61,7 +61,6 @@
 import net.osmand.plus.api.SettingsAPIImpl;
 import net.osmand.plus.avoidroads.AvoidRoadInfo;
 import net.osmand.plus.card.color.palette.gradient.PaletteGradientColor;
-import net.osmand.plus.card.color.palette.gradient.PaletteGradientColor;
 import net.osmand.plus.card.color.palette.main.data.DefaultColors;
 import net.osmand.plus.configmap.routes.MtbClassification;
 import net.osmand.plus.download.IndexItem;
diff --git a/OsmAnd/src/net/osmand/plus/settings/bottomsheets/SpeedLimitBottomSheet.java b/OsmAnd/src/net/osmand/plus/settings/bottomsheets/SpeedLimitBottomSheet.java
index 5ed786e8cf4..655eda3f016 100644
--- a/OsmAnd/src/net/osmand/plus/settings/bottomsheets/SpeedLimitBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/settings/bottomsheets/SpeedLimitBottomSheet.java
@@ -23,7 +23,7 @@
 import net.osmand.plus.base.bottomsheetmenu.simpleitems.LongDescriptionItem;
 import net.osmand.plus.base.bottomsheetmenu.simpleitems.TitleItem;
 import net.osmand.plus.settings.backend.ApplicationMode;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.plus.settings.fragments.OnPreferenceChanged;
 import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.OsmAndFormatter;
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/GeneralProfileSettingsFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/GeneralProfileSettingsFragment.java
index e28c0f2749f..1900727c158 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/GeneralProfileSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/GeneralProfileSettingsFragment.java
@@ -35,7 +35,7 @@
 import net.osmand.plus.settings.enums.DrivingRegion;
 import net.osmand.plus.settings.enums.CompassMode;
 import net.osmand.plus.settings.enums.MetricsConstants;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.plus.settings.preferences.ListPreferenceEx;
 import net.osmand.plus.settings.preferences.SwitchPreferenceEx;
 import net.osmand.plus.utils.UiUtilities;
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/VehicleSpeedHelper.java b/OsmAnd/src/net/osmand/plus/settings/fragments/VehicleSpeedHelper.java
index b21014cf9e4..950b1758a30 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/VehicleSpeedHelper.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/VehicleSpeedHelper.java
@@ -29,7 +29,7 @@
 import net.osmand.plus.routing.RouteService;
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.OsmandSettings;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.plus.settings.enums.SpeedSliderType;
 import net.osmand.plus.utils.OsmAndFormatter;
 import net.osmand.plus.utils.UiUtilities;
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/voice/VoiceAnnouncesFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/voice/VoiceAnnouncesFragment.java
index d952e9f5dce..6b412ce1d33 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/voice/VoiceAnnouncesFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/voice/VoiceAnnouncesFragment.java
@@ -25,7 +25,7 @@
 import net.osmand.plus.settings.backend.OsmandSettings;
 import net.osmand.plus.settings.bottomsheets.AnnouncementTimeBottomSheet;
 import net.osmand.plus.settings.bottomsheets.SpeedLimitBottomSheet;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.plus.settings.fragments.ApplyQueryType;
 import net.osmand.plus.settings.fragments.BaseSettingsFragment;
 import net.osmand.plus.settings.preferences.ListPreferenceEx;
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java
index 564ec5bfdb5..ad27acc6bbf 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/settings/AverageSpeedWidgetSettingFragment.java
@@ -10,7 +10,7 @@
 import androidx.annotation.NonNull;
 
 import net.osmand.plus.R;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.plus.views.mapwidgets.utils.AverageSpeedComputer;
 import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.WidgetType;
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/utils/AverageSpeedComputer.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/utils/AverageSpeedComputer.java
index 1f471228969..b8198f3fff8 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/utils/AverageSpeedComputer.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/utils/AverageSpeedComputer.java
@@ -10,7 +10,7 @@
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.WidgetsAvailabilityHelper;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.MapWidgetRegistry;
 import net.osmand.plus.views.mapwidgets.widgets.AverageSpeedWidget;
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SpeedometerWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SpeedometerWidget.java
index d54ceace419..31ff3e5417d 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SpeedometerWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SpeedometerWidget.java
@@ -45,7 +45,7 @@
 import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.OsmandSettings;
 import net.osmand.plus.settings.enums.DrivingRegion;
-import net.osmand.plus.settings.enums.SpeedConstants;
+import net.osmand.shared.data.SpeedConstants;
 import net.osmand.plus.settings.enums.WidgetSize;
 import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.ColorUtilities;
