diff --git a/OsmAnd/res/layout/track_details.xml b/OsmAnd/res/layout/track_details.xml
index 5498ee81de6..530b5463e6e 100644
--- a/OsmAnd/res/layout/track_details.xml
+++ b/OsmAnd/res/layout/track_details.xml
@@ -118,6 +118,7 @@
                 android:focusable="false"/>
 
             <LinearLayout
+                android:id="@+id/chart_container"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
                 android:orientation="vertical"
diff --git a/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/TrackDetailsMenuFragment.java b/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/TrackDetailsMenuFragment.java
index c625bf78075..088f5bf1e08 100644
--- a/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/TrackDetailsMenuFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapcontextmenu/other/TrackDetailsMenuFragment.java
@@ -5,6 +5,7 @@
 import android.support.annotation.NonNull;
 import android.support.v4.app.FragmentActivity;
 import android.support.v4.app.FragmentManager;
+import android.support.v7.view.ContextThemeWrapper;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -33,11 +34,13 @@ private MapActivity getMapActivity() {
 	public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 							 Bundle savedInstanceState) {
 		MapActivity mapActivity = getMapActivity();
-
 		menu = mapActivity.getMapLayers().getMapControlsLayer().getTrackDetailsMenu();
-		View view = inflater.inflate(R.layout.track_details, container, false);
-		if (!AndroidUiHelper.isOrientationPortrait(getActivity())) {
-			AndroidUtils.addStatusBarPadding21v(getActivity(), view);
+		boolean nightMode = mapActivity.getMyApplication().getDaynightHelper().isNightModeForMapControls();
+		ContextThemeWrapper context =
+				new ContextThemeWrapper(mapActivity, !nightMode ? R.style.OsmandLightTheme : R.style.OsmandDarkTheme);
+		View view = LayoutInflater.from(context).inflate(R.layout.track_details, container, false);
+		if (!AndroidUiHelper.isOrientationPortrait(mapActivity)) {
+			AndroidUtils.addStatusBarPadding21v(mapActivity, view);
 		}
 		if (menu == null || menu.getGpxItem() == null) {
 			return view;
@@ -50,7 +53,7 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 			if (menu.getGpxItem().group != null) {
 				topBarTitle.setText(menu.getGpxItem().group.getGpxName());
 			} else {
-				topBarTitle.setText(mapActivity.getString(R.string.rendering_category_details));
+				topBarTitle.setText(R.string.rendering_category_details);
 			}
 		}
 
@@ -60,7 +63,10 @@ public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
 			backButton.setOnClickListener(new View.OnClickListener() {
 				@Override
 				public void onClick(View v) {
-					getActivity().onBackPressed();
+					FragmentActivity activity = getActivity();
+					if (activity != null) {
+						activity.onBackPressed();
+					}
 				}
 			});
 		}
@@ -179,7 +185,6 @@ public void applyDayNightMode() {
 		if (backButton != null) {
 			backButton.setImageDrawable(getIcon(R.drawable.ic_arrow_back, R.color.color_white));
 		}
-
 	}
 
 	public static boolean showInstance(final MapActivity mapActivity) {
