diff --git a/OsmAnd/res/layout-land/map_hud_top.xml b/OsmAnd/res/layout-land/map_hud_top.xml
index f3b1193e48e..878dc877b46 100644
--- a/OsmAnd/res/layout-land/map_hud_top.xml
+++ b/OsmAnd/res/layout-land/map_hud_top.xml
@@ -6,7 +6,12 @@
 	android:layout_height="match_parent"
 	android:orientation="vertical">
 
-	<!-- Map markers -->
+	<!-- Container for top widgets: Coordinates, Map markers bar, Street name, Lanes -->
+	<LinearLayout
+		android:id="@+id/top_widgets_panel"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:orientation="vertical" />
 
 	<LinearLayout
 		android:layout_width="match_parent"
@@ -56,7 +61,7 @@
 
 			<!-- Street name widget (default position) -->
 			<FrameLayout
-				android:id="@+id/street_name_widget_default_container"
+				android:id="@+id/street_name_widget_special_container"
 				android:layout_width="match_parent"
 				android:layout_height="wrap_content" />
 
@@ -258,7 +263,7 @@
 
 				<!-- Lanes widget (default position) -->
 				<FrameLayout
-					android:id="@+id/lanes_widget_default_position"
+					android:id="@+id/lanes_widget_special_position"
 					android:layout_width="wrap_content"
 					android:layout_height="wrap_content"
 					android:layout_gravity="center_horizontal|top"
diff --git a/OsmAnd/res/layout/map_hud_top.xml b/OsmAnd/res/layout/map_hud_top.xml
index 61768bf8103..f2ed833aaa8 100644
--- a/OsmAnd/res/layout/map_hud_top.xml
+++ b/OsmAnd/res/layout/map_hud_top.xml
@@ -156,7 +156,12 @@
 
 	</FrameLayout>
 
-	<!-- Map markers -->
+	<!-- Container for top widgets: Coordinates, Map markers bar, Street name, Lanes -->
+	<LinearLayout
+		android:id="@+id/top_widgets_panel"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:orientation="vertical" />
 
 	<!-- LEFT, CENTER and RIGHT widgets -->
 	<FrameLayout
@@ -294,7 +299,7 @@
 
 		<!-- Lanes widget (default position) -->
 		<FrameLayout
-			android:id="@+id/lanes_widget_default_position"
+			android:id="@+id/lanes_widget_special_position"
 			android:layout_width="wrap_content"
 			android:layout_height="wrap_content"
 			android:layout_gravity="center_horizontal|top"
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index 05a81d0832e..a4d89ae775b 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -11,6 +11,7 @@
 	Thx - Hardy
 -->
 
+    <string name="map_markers_bar">Map markers bar</string>
     <string name="shared_string_visible_widgets">Visible widgets</string>
     <string name="top_widgets_panel">Top panel</string>
     <string name="bottom_widgets_panel">Bottom panel</string>
diff --git a/OsmAnd/src/net/osmand/aidl/ConnectedApp.java b/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
index 53f06fa217f..a02c2d7a28f 100644
--- a/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
+++ b/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
@@ -21,6 +21,8 @@
 import net.osmand.plus.views.layers.MapInfoLayer;
 import net.osmand.plus.views.layers.base.OsmandMapLayer;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
+import net.osmand.plus.views.mapwidgets.widgets.RightTextInfoWidget;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.util.Algorithms;
 
@@ -180,14 +182,14 @@ void registerWidgetControls(@NonNull MapActivity mapActivity) {
 				int iconId = AndroidUtils.getDrawableId(mapActivity.getMyApplication(), widget.getMenuIconName());
 				int menuIconId = iconId != 0 ? iconId : ContextMenuItem.INVALID_ID;
 				String widgetKey = "aidl_widget_" + widget.getId();
-				layer.registerSideWidget(control, menuIconId, widget.getMenuTitle(), widgetKey, false, widget.getOrder());
+				layer.registerWidget(widgetKey, control, menuIconId, widget.getMenuTitle(), WidgetsPanel.RIGHT, widget.getOrder());
 			}
 		}
 	}
 
 	@NonNull
 	TextInfoWidget createWidgetControl(@NonNull MapActivity mapActivity, String widgetId) {
-		TextInfoWidget control = new TextInfoWidget(mapActivity) {
+		TextInfoWidget control = new RightTextInfoWidget(mapActivity) {
 
 			private boolean init = true;
 			private String cachedTxt;
diff --git a/OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java b/OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java
index 5c46552d667..c5792f0c61a 100644
--- a/OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java
+++ b/OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java
@@ -98,6 +98,7 @@
 import net.osmand.plus.views.layers.AidlMapLayer;
 import net.osmand.plus.views.layers.MapInfoLayer;
 import net.osmand.plus.views.layers.base.OsmandMapLayer;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.router.TurnType;
 import net.osmand.util.Algorithms;
@@ -379,7 +380,7 @@ public void onReceive(Context context, Intent intent) {
 							int iconId = AndroidUtils.getDrawableId(app, widget.getMenuIconName());
 							int menuIconId = iconId != 0 ? iconId : ContextMenuItem.INVALID_ID;
 							String widgetKey = "aidl_widget_" + widgetId;
-							layer.registerSideWidget(control, menuIconId, widget.getMenuTitle(), widgetKey, false, widget.getOrder());
+							layer.registerWidget(widgetKey, control, menuIconId, widget.getMenuTitle(), WidgetsPanel.RIGHT, widget.getOrder());
 							layer.recreateControls();
 						}
 					}
diff --git a/OsmAnd/src/net/osmand/plus/importfiles/SettingsImportTask.java b/OsmAnd/src/net/osmand/plus/importfiles/SettingsImportTask.java
index 62e3fe9535b..78e0a1e7782 100644
--- a/OsmAnd/src/net/osmand/plus/importfiles/SettingsImportTask.java
+++ b/OsmAnd/src/net/osmand/plus/importfiles/SettingsImportTask.java
@@ -160,7 +160,7 @@ public void onImportFinished(boolean succeed, boolean needRestart, @NonNull List
 						plugin.indexingFiles(true, true);
 					}
 					if (activity instanceof MapActivity) {
-						((MapActivity) activity).getMapLayers().getMapWidgetRegistry().updateVisibleWidgets();
+						((MapActivity) activity).getMapLayers().getMapWidgetRegistry().updateVisibleSideWidgets();
 						((MapActivity) activity).updateApplicationModeSettings();
 					}
 					if (!silentImport && file != null && activity != null) {
diff --git a/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesPlugin.java
index e62f4162ecf..e2cdfc27b2e 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/audionotes/AudioVideoNotesPlugin.java
@@ -61,6 +61,8 @@
 import net.osmand.plus.views.OsmandMapTileView;
 import net.osmand.plus.views.layers.MapInfoLayer;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
+import net.osmand.plus.views.mapwidgets.widgets.RightTextInfoWidget;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
 import net.osmand.render.RenderingRuleProperty;
@@ -117,6 +119,8 @@ public class AudioVideoNotesPlugin extends OsmandPlugin {
 	private static final int TAKE_VIDEO_NOTE_ITEM_ORDER = 4300;
 	private static final int TAKE_PHOTO_NOTE_ITEM_ORDER = 4500;
 
+	public static final String WIDGET_AUDIO_VIDEO_NOTES = "audionotes";
+
 	private TextInfoWidget recordControl;
 
 	public final CommonPreference<Boolean> AV_EXTERNAL_RECORDER;
@@ -746,7 +750,7 @@ public void updateLayers(@NonNull Context context, @Nullable MapActivity mapActi
 	private void registerWidget(@NonNull MapActivity mapActivity) {
 		MapInfoLayer mapInfoLayer = mapActivity.getMapLayers().getMapInfoLayer();
 		if (mapInfoLayer != null) {
-			recordControl = new TextInfoWidget(mapActivity) {
+			recordControl = new RightTextInfoWidget(mapActivity) {
 
 				private Integer cachedAction;
 				private Boolean cachedRecording;
@@ -790,7 +794,8 @@ public void updateInfo(@Nullable DrawSettings drawSettings) {
 					}
 				}
 			});
-			mapInfoLayer.registerSideWidget(recordControl, new AudioVideoNotesWidgetState(app, AV_DEFAULT_ACTION), "audionotes", false, 32);
+			WidgetState widgetState = new AudioVideoNotesWidgetState(app, AV_DEFAULT_ACTION);
+			mapInfoLayer.registerWidget(WIDGET_AUDIO_VIDEO_NOTES, recordControl, widgetState, WidgetsPanel.RIGHT);
 			mapInfoLayer.recreateControls();
 		}
 	}
diff --git a/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
index ff691c6a209..08638b60caf 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/development/OsmandDevelopmentPlugin.java
@@ -23,13 +23,16 @@
 import net.osmand.plus.views.OsmandMapTileView;
 import net.osmand.plus.views.layers.MapInfoLayer;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
-import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
+import net.osmand.plus.views.mapwidgets.widgets.RightTextInfoWidget;
 
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.DRAWER_BUILDS_ID;
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.PLUGIN_OSMAND_DEV;
 
 public class OsmandDevelopmentPlugin extends OsmandPlugin {
 
+	public static final String WIDGET_FPS = "fps";
+
 	public OsmandDevelopmentPlugin(OsmandApplication app) {
 		super(app);
 		//ApplicationMode.regWidgetVisibility("fps", new ApplicationMode[0]);
@@ -96,7 +99,7 @@ public void updateLayers(@NonNull Context context, @Nullable MapActivity mapActi
 		}
 	}
 
-	public static class FPSTextInfoWidget extends TextInfoWidget {
+	public static class FPSTextInfoWidget extends RightTextInfoWidget {
 
 		private final OsmandMapTileView mapView;
 
@@ -119,8 +122,8 @@ private void registerWidget(@NonNull MapActivity mapActivity) {
 		if (mapInfoLayer != null && mapInfoLayer.getSideWidget(FPSTextInfoWidget.class) == null) {
 			FPSTextInfoWidget fps = new FPSTextInfoWidget(mapActivity);
 			fps.setIcons(R.drawable.widget_fps_day, R.drawable.widget_fps_night);
-			mapInfoLayer.registerSideWidget(fps, R.drawable.ic_action_fps,
-					R.string.map_widget_fps_info, "fps", false, 50);
+			mapInfoLayer.registerWidget(WIDGET_FPS, fps, R.drawable.ic_action_fps,
+					R.string.map_widget_fps_info, WidgetsPanel.RIGHT);
 			mapInfoLayer.recreateControls();
 		}
 	}
diff --git a/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryPlugin.java
index 7be01686de4..24e9410f024 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/mapillary/MapillaryPlugin.java
@@ -39,7 +39,8 @@
 import net.osmand.plus.views.OsmandMapTileView;
 import net.osmand.plus.views.layers.MapInfoLayer;
 import net.osmand.plus.views.layers.MapTileLayer;
-import net.osmand.plus.views.mapwidgets.MapWidgetRegInfo;
+import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.render.RenderingRuleProperty;
 import net.osmand.util.Algorithms;
@@ -62,6 +63,8 @@ public class MapillaryPlugin extends OsmandPlugin {
 	public static final String TYPE_MAPILLARY_PHOTO = "mapillary-photo";
 	public static final String TYPE_MAPILLARY_CONTRIBUTE = "mapillary-contribute";
 
+	public static final String WIDGET_MAPILLARY = "mapillary";
+
 	private static final String MAPILLARY_PACKAGE_ID = "com.mapillary.app";
 
 	private static final Log LOG = PlatformUtil.getLog(OpenPlaceReviewsPlugin.class);
@@ -80,7 +83,7 @@ public class MapillaryPlugin extends OsmandPlugin {
 
 	private MapillaryVectorLayer vectorLayer;
 	private TextInfoWidget mapillaryControl;
-	private MapWidgetRegInfo mapillaryWidgetRegInfo;
+	private MapWidgetInfo mapillaryWidgetRegInfo;
 
 	public MapillaryPlugin(OsmandApplication app) {
 		super(app);
@@ -242,8 +245,8 @@ public boolean onContextMenuClick(final ArrayAdapter<ContextMenuItem> adapter, i
 	private void registerWidget(@NonNull MapActivity activity) {
 		MapInfoLayer layer = activity.getMapLayers().getMapInfoLayer();
 		mapillaryControl = createMonitoringControl(activity);
-		mapillaryWidgetRegInfo = layer.registerSideWidget(mapillaryControl,
-				R.drawable.ic_action_mapillary, R.string.mapillary, "mapillary", false, 19);
+		mapillaryWidgetRegInfo = layer.registerWidget(WIDGET_MAPILLARY, mapillaryControl,
+				R.drawable.ic_action_mapillary, R.string.mapillary, WidgetsPanel.RIGHT);
 		layer.recreateControls();
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/plugins/monitoring/OsmandMonitoringPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/monitoring/OsmandMonitoringPlugin.java
index 29731491567..64ab69220b4 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/monitoring/OsmandMonitoringPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/monitoring/OsmandMonitoringPlugin.java
@@ -2,28 +2,17 @@
 
 import static net.osmand.IndexConstants.GPX_FILE_EXT;
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.PLUGIN_OSMAND_MONITORING;
-import static net.osmand.plus.utils.UiUtilities.CompoundButtonType.PROFILE_DEPENDENT;
 
 import android.app.Activity;
 import android.content.Context;
-import android.content.DialogInterface.OnClickListener;
 import android.content.pm.PackageManager;
 import android.graphics.drawable.Drawable;
-import android.view.View;
-import android.view.ViewGroup;
-import android.widget.LinearLayout;
-import android.widget.LinearLayout.LayoutParams;
-import android.widget.TextView;
 
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
-import androidx.appcompat.app.AlertDialog;
-import androidx.appcompat.widget.AppCompatCheckBox;
 import androidx.fragment.app.FragmentActivity;
 import androidx.fragment.app.FragmentManager;
 
-import com.google.android.material.slider.Slider;
-
 import net.osmand.GPXUtilities.GPXFile;
 import net.osmand.Location;
 import net.osmand.PlatformUtil;
@@ -45,11 +34,11 @@
 import net.osmand.plus.track.helpers.SavingTrackHelper;
 import net.osmand.plus.track.helpers.SavingTrackHelper.SaveGpxResult;
 import net.osmand.plus.utils.AndroidUtils;
-import net.osmand.plus.utils.ColorUtilities;
 import net.osmand.plus.utils.OsmAndFormatter;
-import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.views.layers.MapInfoLayer;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
+import net.osmand.plus.views.mapwidgets.widgets.RightTextInfoWidget;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.util.Algorithms;
 
@@ -67,6 +56,8 @@ public class OsmandMonitoringPlugin extends OsmandPlugin {
 	public static final String OSMAND_SAVE_SERVICE_ACTION = "OSMAND_SAVE_SERVICE_ACTION";
 	public static final int REQUEST_LOCATION_PERMISSION_FOR_GPX_RECORDING = 208;
 
+	public static final String WIDGET_TRIP_RECORDING = "monitoring";
+
 	private final OsmandSettings settings;
 	private final LiveMonitoringHelper liveMonitoringHelper;
 
@@ -156,8 +147,8 @@ private void registerWidget(@NonNull MapActivity activity) {
 		MapInfoLayer layer = activity.getMapLayers().getMapInfoLayer();
 		monitoringControl = createMonitoringControl(activity);
 
-		layer.registerSideWidget(monitoringControl,
-				R.drawable.ic_action_play_dark, R.string.map_widget_monitoring, "monitoring", false, 30);
+		layer.registerWidget(WIDGET_TRIP_RECORDING, monitoringControl, R.drawable.ic_action_play_dark,
+				R.string.map_widget_monitoring, WidgetsPanel.RIGHT);
 		layer.recreateControls();
 	}
 
@@ -197,7 +188,7 @@ public String getPrefsDescription() {
 	 * creates (if it wasn't created previously) the control to be added on a MapInfoLayer that shows a monitoring state (recorded/stopped)
 	 */
 	private TextInfoWidget createMonitoringControl(@NonNull MapActivity mapActivity) {
-		monitoringControl = new TextInfoWidget(mapActivity) {
+		monitoringControl = new RightTextInfoWidget(mapActivity) {
 			long lastUpdateTime;
 
 			@Override
diff --git a/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingPositionPlugin.java b/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingPositionPlugin.java
index 636d19540e0..799800295e0 100644
--- a/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingPositionPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/plugins/parking/ParkingPositionPlugin.java
@@ -46,6 +46,8 @@
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 import net.osmand.plus.views.OsmandMapTileView;
 import net.osmand.plus.views.layers.MapInfoLayer;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
+import net.osmand.plus.views.mapwidgets.widgets.RightTextInfoWidget;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 
 import java.util.ArrayList;
@@ -60,13 +62,15 @@
  */
 public class ParkingPositionPlugin extends OsmandPlugin {
 
-	public static final String PARKING_PLUGIN_COMPONENT = "net.osmand.parkingPlugin"; //$NON-NLS-1$
-	public static final String PARKING_POINT_LAT = "parking_point_lat"; //$NON-NLS-1$
-	public static final String PARKING_POINT_LON = "parking_point_lon"; //$NON-NLS-1$
-	public static final String PARKING_TYPE = "parking_type"; //$NON-NLS-1$
-	public static final String PARKING_TIME = "parking_limit_time"; //$//$NON-NLS-1$
-	public static final String PARKING_START_TIME = "parking_time"; //$//$NON-NLS-1$
-	public static final String PARKING_EVENT_ADDED = "parking_event_added"; //$//$NON-NLS-1$
+	public static final String PARKING_PLUGIN_COMPONENT = "net.osmand.parkingPlugin";
+	public static final String PARKING_POINT_LAT = "parking_point_lat";
+	public static final String PARKING_POINT_LON = "parking_point_lon";
+	public static final String PARKING_TYPE = "parking_type";
+	public static final String PARKING_TIME = "parking_limit_time";
+	public static final String PARKING_START_TIME = "parking_time";
+	public static final String PARKING_EVENT_ADDED = "parking_event_added";
+
+	public static final String WIDGET_PARKING = "parking";
 
 	// Constants for determining the order of items in the additional actions context menu
 	private static final int MARK_AS_PARKING_POS_ITEM_ORDER = 10500;
@@ -231,8 +235,8 @@ private void registerWidget(@NonNull MapActivity activity) {
 		MapInfoLayer mapInfoLayer = activity.getMapLayers().getMapInfoLayer();
 		if (mapInfoLayer != null) {
 			parkingPlaceControl = createParkingPlaceInfoControl(activity);
-			mapInfoLayer.registerSideWidget(parkingPlaceControl,
-					R.drawable.ic_action_parking_dark,  R.string.map_widget_parking, "parking", false, 10);
+			mapInfoLayer.registerWidget(WIDGET_PARKING, parkingPlaceControl,
+					R.drawable.ic_action_parking_dark,  R.string.map_widget_parking, WidgetsPanel.RIGHT);
 			mapInfoLayer.recreateControls();
 		}
 	}
@@ -454,7 +458,7 @@ private void cancelParking() {
 	 * and the location of the parked car
 	 */
 	private TextInfoWidget createParkingPlaceInfoControl(@NonNull MapActivity mapActivity) {
-		TextInfoWidget parkingPlaceControl = new TextInfoWidget(mapActivity) {
+		TextInfoWidget parkingPlaceControl = new RightTextInfoWidget(mapActivity) {
 			private float[] calculations = new float[1];
 			private int cachedMeters = 0;			
 			
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
index 0384e4f4ced..46e24f79601 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
@@ -19,6 +19,7 @@
 import android.net.NetworkInfo;
 import android.os.Build;
 import android.os.Environment;
+import android.text.TextUtils;
 
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
@@ -85,6 +86,7 @@
 import net.osmand.plus.settings.enums.TracksSortByMode;
 import net.osmand.plus.utils.FileUtils;
 import net.osmand.plus.views.layers.RadiusRulerControlLayer.RadiusRulerMode;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
 import net.osmand.plus.voice.CommandPlayer;
 import net.osmand.plus.wikipedia.WikiArticleShowImages;
 import net.osmand.render.RenderingRulesStorage;
@@ -1735,6 +1737,18 @@ protected boolean setValue(Object prefs, Integer stream) {
 
 	public final OsmandPreference<Boolean> TRANSPARENT_STATUS_BAR = new BooleanPreference(this, "transparent_status_bar", true).makeGlobal().makeShared();
 
+	public final ListStringPreference LEFT_WIDGET_PANEL_ORDER = (ListStringPreference) new ListStringPreference(this,
+			"left_widget_panel_order", TextUtils.join(",", WidgetsPanel.LEFT.getOriginalOrder()), ",").makeProfile();
+
+	public final ListStringPreference TOP_WIDGET_PANEL_ORDER = (ListStringPreference) new ListStringPreference(this,
+			"top_widget_panel_order", TextUtils.join(",", WidgetsPanel.TOP.getOriginalOrder()), ",").makeProfile();
+
+	public final ListStringPreference RIGHT_WIDGET_PANEL_ORDER = (ListStringPreference) new ListStringPreference(this,
+			"right_widget_panel_order", TextUtils.join(",", WidgetsPanel.RIGHT.getOriginalOrder()), ",").makeProfile();
+
+	public final ListStringPreference BOTTOM_WIDGET_PANEL_ORDER = (ListStringPreference) new ListStringPreference(this,
+			"bottom_widget_panel_order", TextUtils.join(",", WidgetsPanel.BOTTOM.getOriginalOrder()), ",").makeProfile();
+
 	public final OsmandPreference<Boolean> MARKERS_DISTANCE_INDICATION_ENABLED = new BooleanPreference(this, "markers_distance_indication_enabled", true).makeProfile();
 
 	public final OsmandPreference<Integer> DISPLAYED_MARKERS_WIDGETS_COUNT = new IntPreference(this, "displayed_markers_widgets_count", 1).makeProfile();
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/ConfigureProfileFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/ConfigureProfileFragment.java
index da8ede01da0..2a737532a15 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/ConfigureProfileFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/ConfigureProfileFragment.java
@@ -7,7 +7,6 @@
 import android.graphics.Rect;
 import android.graphics.drawable.ColorDrawable;
 import android.graphics.drawable.Drawable;
-import android.os.Build;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
@@ -231,7 +230,7 @@ private void updateCopiedOrResetPrefs() {
 		MapActivity mapActivity = getMapActivity();
 		if (mapActivity != null) {
 			app.getPoiFilters().loadSelectedPoiFilters();
-			mapActivity.getMapLayers().getMapWidgetRegistry().updateVisibleWidgets();
+			mapActivity.getMapLayers().getMapWidgetRegistry().updateVisibleSideWidgets();
 			mapActivity.updateApplicationModeSettings();
 			updateToolbar();
 			updateAllSettings();
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/ProfileAppearanceFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/ProfileAppearanceFragment.java
index 08ef85f705d..62ce1d1abb9 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/ProfileAppearanceFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/ProfileAppearanceFragment.java
@@ -835,7 +835,7 @@ private void customProfileSaved() {
 		FragmentActivity activity = getActivity();
 		if (activity != null) {
 			if (activity instanceof MapActivity) {
-				((MapActivity) activity).getMapLayers().getMapWidgetRegistry().updateVisibleWidgets();
+				((MapActivity) activity).getMapLayers().getMapWidgetRegistry().updateVisibleSideWidgets();
 				((MapActivity) activity).updateApplicationModeSettings();
 			}
 			FragmentManager fragmentManager = activity.getSupportFragmentManager();
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
index f4300aca899..475d23cd23b 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
@@ -7,13 +7,14 @@
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.ImageButton;
-import android.widget.LinearLayout;
 
 import net.osmand.data.RotatedTileBox;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.helpers.AndroidUiHelper;
 import net.osmand.plus.mapcontextmenu.other.TrackChartPoints;
+import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.settings.backend.OsmandSettings;
 import net.osmand.plus.utils.ColorUtilities;
 import net.osmand.plus.utils.UiUtilities;
@@ -23,16 +24,17 @@
 import net.osmand.plus.views.mapwidgets.MapInfoWidgetsFactory.TopToolbarController;
 import net.osmand.plus.views.mapwidgets.MapInfoWidgetsFactory.TopToolbarControllerType;
 import net.osmand.plus.views.mapwidgets.MapInfoWidgetsFactory.TopToolbarView;
-import net.osmand.plus.views.mapwidgets.MarkersWidgetsHelper;
-import net.osmand.plus.views.mapwidgets.MapWidgetRegInfo;
+import net.osmand.plus.views.mapwidgets.MapWidgetInfo;
 import net.osmand.plus.views.mapwidgets.MapWidgetRegistry;
+import net.osmand.plus.views.mapwidgets.MarkersWidgetsHelper;
 import net.osmand.plus.views.mapwidgets.RouteInfoWidgetsFactory;
+import net.osmand.plus.views.mapwidgets.WidgetsPanel;
 import net.osmand.plus.views.mapwidgets.widgets.AlarmWidget;
 import net.osmand.plus.views.mapwidgets.widgets.CoordinatesWidget;
 import net.osmand.plus.views.mapwidgets.widgets.ElevationProfileWidget;
 import net.osmand.plus.views.mapwidgets.widgets.LanesWidget;
 import net.osmand.plus.views.mapwidgets.widgets.MapMarkersBarWidget;
-import net.osmand.plus.views.mapwidgets.widgets.NextTurnWidget;
+import net.osmand.plus.views.mapwidgets.widgets.MapWidget;
 import net.osmand.plus.views.mapwidgets.widgets.RulerWidget;
 import net.osmand.plus.views.mapwidgets.widgets.StreetNameWidget;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
@@ -47,15 +49,19 @@
 import androidx.annotation.DrawableRes;
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
 import androidx.core.content.ContextCompat;
 
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_ALTITUDE;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_BATTERY;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_BEARING;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_COORDINATES;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_DISTANCE;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_GPS_INFO;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_INTERMEDIATE_DISTANCE;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_INTERMEDIATE_TIME;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_LANES;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_MAP_MARKERS;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_MARKER_1;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_MARKER_2;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_MAX_SPEED;
@@ -65,6 +71,7 @@
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_PLAIN_TIME;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_RADIUS_RULER;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_SPEED;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_STREET_NAME;
 import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_TIME;
 
 public class MapInfoLayer extends OsmandMapLayer {
@@ -75,9 +82,9 @@ public class MapInfoLayer extends OsmandMapLayer {
 	private final OsmandSettings settings;
 	private OsmandMapTileView view;
 
-	// groups
-	private LinearLayout rightStack;
-	private LinearLayout leftStack;
+	private ViewGroup topWidgetsContainer;
+	private ViewGroup rightWidgetsContainer;
+	private ViewGroup leftWidgetsContainer;
 
 	private ImageButton expandButton;
 	private View mapRulerLayout;
@@ -113,24 +120,23 @@ public void setMapActivity(@Nullable MapActivity mapActivity) {
 		super.setMapActivity(mapActivity);
 		if (mapActivity != null) {
 			mapInfoControls = mapActivity.getMapLayers().getMapWidgetRegistry();
-			leftStack = mapActivity.findViewById(R.id.map_left_widgets_panel);
-			rightStack = mapActivity.findViewById(R.id.map_right_widgets_panel);
+			topWidgetsContainer = mapActivity.findViewById(R.id.top_widgets_panel);
+			leftWidgetsContainer = mapActivity.findViewById(R.id.map_left_widgets_panel);
+			rightWidgetsContainer = mapActivity.findViewById(R.id.map_right_widgets_panel);
 			expandButton = mapActivity.findViewById(R.id.map_collapse_button);
 			mapRulerLayout = mapActivity.findViewById(R.id.map_ruler_layout);
 
-			// update and create controls
 			registerAllControls(mapActivity);
-			getApplication().getAidlApi().registerWidgetControls(mapActivity);
-
 			recreateControls();
 		} else {
 			if (mapInfoControls != null) {
-				mapInfoControls.clearSideWidgets();
+				mapInfoControls.clearWidgets();
 			}
 			mapInfoControls = null;
 
-			leftStack = null;
-			rightStack = null;
+			topWidgetsContainer = null;
+			leftWidgetsContainer = null;
+			rightWidgetsContainer = null;
 			expandButton = null;
 			mapRulerLayout = null;
 
@@ -145,41 +151,6 @@ public void setMapActivity(@Nullable MapActivity mapActivity) {
 		}
 	}
 
-	@Nullable
-	public MapWidgetRegInfo registerSideWidget(TextInfoWidget widget, int drawableMenu,
-											   int messageId, String key, boolean left, int priorityOrder) {
-		if (mapInfoControls != null) {
-			MapWidgetRegInfo reg = mapInfoControls.registerWidget(key, widget, null, drawableMenu, messageId, null, priorityOrder, left);
-			updateReg(calculateTextState(), reg);
-			return reg;
-		} else {
-			return null;
-		}
-	}
-
-	@Nullable
-	public MapWidgetRegInfo registerSideWidget(@NonNull TextInfoWidget widget,
-	                                           @DrawableRes int settingsIconId,
-											   @Nullable String message,
-	                                           @NonNull String key,
-	                                           boolean left,
-	                                           int order) {
-		if (mapInfoControls != null) {
-			MapWidgetRegInfo reg = mapInfoControls.registerWidget(key, widget, null, settingsIconId, MapWidgetRegInfo.INVALID_ID, message, order, left);
-			updateReg(calculateTextState(), reg);
-			return reg;
-		} else {
-			return null;
-		}
-	}
-
-	public void registerSideWidget(TextInfoWidget widget, WidgetState widgetState, String key, boolean left, int priorityOrder) {
-		if (mapInfoControls != null) {
-			MapWidgetRegInfo reg = mapInfoControls.registerWidget(key, widget, widgetState, MapWidgetRegInfo.INVALID_ID, MapWidgetRegInfo.INVALID_ID, null, priorityOrder, left);
-			updateReg(calculateTextState(), reg);
-		}
-	}
-
 	@Nullable
 	public <T extends TextInfoWidget> T getSideWidget(Class<T> cl) {
 		return mapInfoControls != null ? mapInfoControls.getSideWidget(cl) : null;
@@ -223,32 +194,8 @@ public boolean isTopToolbarViewVisible() {
 	private void registerAllControls(@NonNull MapActivity mapActivity) {
 		OsmandApplication app = mapActivity.getMyApplication();
 		rulerWidgets = new ArrayList<>();
-		RouteInfoWidgetsFactory ric = new RouteInfoWidgetsFactory(app);
-		MapInfoWidgetsFactory mic = new MapInfoWidgetsFactory(app);
-		MarkersWidgetsHelper markersWidgetsHelper = mapActivity.getMapLayers().getMapMarkersLayer().getMarkersWidgetsHelper();
-
-		TextState ts = calculateTextState();
-
-		topCoordinatesView = new CoordinatesWidget(mapActivity, ts);
-		((ViewGroup) mapActivity.findViewById(R.id.MapHudButtonsOverlayTop)).addView(topCoordinatesView.getView(), 0);
-
-		streetNameWidget = new StreetNameWidget(mapActivity, ts);
-		ViewGroup defaultStreetNamePosition = mapActivity.findViewById(R.id.street_name_widget_default_container);
-		if (defaultStreetNamePosition != null) {
-			defaultStreetNamePosition.removeAllViews();
-			defaultStreetNamePosition.addView(streetNameWidget.getView());
-		} else {
-			((ViewGroup) mapActivity.findViewById(R.id.MapHudButtonsOverlayTop)).addView(streetNameWidget.getView(), 1);
-		}
-
-		mapMarkersBarWidget = markersWidgetsHelper.getMapMarkersBarWidget();
-		int insertIndex = defaultStreetNamePosition != null ? 1 : 2;
-		((ViewGroup) mapActivity.findViewById(R.id.MapHudButtonsOverlayTop)).addView(mapMarkersBarWidget.getView(), insertIndex);
-
-		lanesWidget = new LanesWidget(mapActivity, ts);
-		ViewGroup defaultLanesPosition = mapActivity.findViewById(R.id.lanes_widget_default_position);
-		defaultLanesPosition.removeAllViews();
-		defaultLanesPosition.addView(lanesWidget.getView());
+		RouteInfoWidgetsFactory routeWidgetsFactory = new RouteInfoWidgetsFactory(app);
+		MapInfoWidgetsFactory mapWidgetsFactory = new MapInfoWidgetsFactory(app);
 
 		topToolbarView = new TopToolbarView(mapActivity);
 		updateTopToolbar(false);
@@ -260,75 +207,166 @@ private void registerAllControls(@NonNull MapActivity mapActivity) {
 
 		setupRulerWidget(mapRulerLayout);
 
-		// register left stack
-
-		NextTurnWidget bigInfoControl = ric.createNextInfoControl(mapActivity, false);
-		registerSideWidget(bigInfoControl, R.drawable.ic_action_next_turn, R.string.map_widget_next_turn, WIDGET_NEXT_TURN, true, 5);
-		NextTurnWidget smallInfoControl = ric.createNextInfoControl(mapActivity, true);
-		registerSideWidget(smallInfoControl, R.drawable.ic_action_next_turn, R.string.map_widget_next_turn_small, WIDGET_NEXT_TURN_SMALL, true, 6);
-		NextTurnWidget nextNextInfoControl = ric.createNextNextInfoControl(mapActivity, true);
-		registerSideWidget(nextNextInfoControl, R.drawable.ic_action_next_turn, R.string.map_widget_next_next_turn, WIDGET_NEXT_NEXT_TURN, true, 7);
-
-		// register right stack
-		// priorityOrder: 10s navigation-related, 20s position-related, 30s recording- and other plugin-related, 40s general device information, 50s debugging-purpose
-		TextInfoWidget intermediateDist = ric.createIntermediateDistanceControl(mapActivity);
-		registerSideWidget(intermediateDist, R.drawable.ic_action_intermediate, R.string.map_widget_intermediate_distance, WIDGET_INTERMEDIATE_DISTANCE, false, 13);
-		TextInfoWidget intermediateTime = ric.createTimeControl(mapActivity, true);
-		registerSideWidget(intermediateTime, new TimeWidgetState(app, true), WIDGET_INTERMEDIATE_TIME, false, 14);
-		TextInfoWidget dist = ric.createDistanceControl(mapActivity);
-		registerSideWidget(dist, R.drawable.ic_action_target, R.string.map_widget_distance, WIDGET_DISTANCE, false, 15);
-		TextInfoWidget time = ric.createTimeControl(mapActivity, false);
-		registerSideWidget(time, new TimeWidgetState(app, false), WIDGET_TIME, false, 16);
-
-
-		TextInfoWidget marker = markersWidgetsHelper.getMapMarkerSideWidget(true);
-		registerSideWidget(marker, R.drawable.ic_action_flag, R.string.map_marker_1st, WIDGET_MARKER_1, false, 17);
-		TextInfoWidget bearing = ric.createBearingControl(mapActivity);
-		registerSideWidget(bearing, new BearingWidgetState(app), WIDGET_BEARING, false, 18);
-		TextInfoWidget marker2nd = markersWidgetsHelper.getMapMarkerSideWidget(false);
-		registerSideWidget(marker2nd, R.drawable.ic_action_flag, R.string.map_marker_2nd, WIDGET_MARKER_2, false, 19);
-
-		TextInfoWidget speed = ric.createSpeedControl(mapActivity);
-		registerSideWidget(speed, R.drawable.ic_action_speed, R.string.map_widget_speed, WIDGET_SPEED, false, 20);
-		TextInfoWidget maxspeed = ric.createMaxSpeedControl(mapActivity);
-		registerSideWidget(maxspeed, R.drawable.ic_action_speed_limit, R.string.map_widget_max_speed, WIDGET_MAX_SPEED, false, 21);
-		TextInfoWidget alt = mic.createAltitudeControl(mapActivity);
-		registerSideWidget(alt, R.drawable.ic_action_altitude, R.string.map_widget_altitude, WIDGET_ALTITUDE, false, 23);
-		TextInfoWidget gpsInfo = mic.createGPSInfoControl(mapActivity);
-
-		registerSideWidget(gpsInfo, R.drawable.ic_action_gps_info, R.string.map_widget_gps_info, WIDGET_GPS_INFO, false, 28);
-		TextInfoWidget plainTime = ric.createPlainTimeControl(mapActivity);
-		registerSideWidget(plainTime, R.drawable.ic_action_time, R.string.map_widget_plain_time, WIDGET_PLAIN_TIME, false, 41);
-		TextInfoWidget battery = ric.createBatteryControl(mapActivity);
-		registerSideWidget(battery, R.drawable.ic_action_battery, R.string.map_widget_battery, WIDGET_BATTERY, false, 42);
-		TextInfoWidget radiusRuler = mic.createRadiusRulerControl(mapActivity);
-		registerSideWidget(radiusRuler, new CompassRulerWidgetState(app), WIDGET_RADIUS_RULER, false, 43);
+		registerTopWidgets(mapActivity);
+		registerLeftWidgets(mapActivity, routeWidgetsFactory);
+		registerRightWidgets(mapActivity, routeWidgetsFactory, mapWidgetsFactory);
+
+		app.getAidlApi().registerWidgetControls(mapActivity);
 	}
 
-	public void recreateControls() {
-		if (leftStack != null) {
-			leftStack.removeAllViews();
-			if (mapInfoControls != null) {
-				mapInfoControls.populateStackControl(leftStack, settings.getApplicationMode(), true, WIDGETS_EXPANDED);
-			}
-			leftStack.requestLayout();
+	private void registerTopWidgets(@NonNull MapActivity mapActivity) {
+		WidgetsPanel topPanel = WidgetsPanel.TOP;
+
+		MapWidget coordinatedWidget = new CoordinatesWidget(mapActivity);
+		registerWidget(WIDGET_COORDINATES, coordinatedWidget, R.drawable.ic_action_coordinates_widget,
+				R.string.coordinates_widget, topPanel);
+
+		MapWidget mapMarkersWidget = mapActivity.getMapLayers().getMapMarkersLayer()
+				.getMarkersWidgetsHelper().getMapMarkersBarWidget();
+		registerWidget(WIDGET_MAP_MARKERS, mapMarkersWidget, R.drawable.ic_action_marker_dark,
+				R.string.map_markers_bar, topPanel);
+
+		MapWidget streetNameWidget = new StreetNameWidget(mapActivity);
+		registerWidget(WIDGET_STREET_NAME, streetNameWidget, R.drawable.widget_coordinates_latitude_day,
+				R.string.street_name, topPanel);
+
+		MapWidget lanesWidget = new LanesWidget(mapActivity);
+		registerWidget(WIDGET_LANES, lanesWidget, R.drawable.ic_action_lanes, R.string.show_lanes, topPanel);
+	}
+
+	private void registerLeftWidgets(@NonNull MapActivity mapActivity,
+	                                 @NonNull RouteInfoWidgetsFactory routeWidgetsFactory) {
+		int settingsIconId = R.drawable.ic_action_next_turn;
+		WidgetsPanel leftPanel = WidgetsPanel.LEFT;
+
+		MapWidget bigInfoControl = routeWidgetsFactory.createNextInfoControl(mapActivity, false);
+		registerWidget(WIDGET_NEXT_TURN, bigInfoControl, settingsIconId, R.string.map_widget_next_turn, leftPanel);
+
+		MapWidget smallInfoControl = routeWidgetsFactory.createNextInfoControl(mapActivity, true);
+		registerWidget(WIDGET_NEXT_TURN_SMALL, smallInfoControl, settingsIconId, R.string.map_widget_next_turn_small, leftPanel);
+
+		MapWidget nextNextInfoControl = routeWidgetsFactory.createNextNextInfoControl(mapActivity, true);
+		registerWidget(WIDGET_NEXT_NEXT_TURN, nextNextInfoControl, settingsIconId, R.string.map_widget_next_next_turn, leftPanel);
+	}
+
+	private void registerRightWidgets(@NonNull MapActivity mapActivity,
+	                                  @NonNull RouteInfoWidgetsFactory routeWidgetsFactory,
+	                                  @NonNull MapInfoWidgetsFactory mapWidgetsFactory) {
+		OsmandApplication app = mapActivity.getMyApplication();
+		MarkersWidgetsHelper markersWidgetsHelper = mapActivity.getMapLayers().getMapMarkersLayer().getMarkersWidgetsHelper();
+		WidgetsPanel rightPanel = WidgetsPanel.RIGHT;
+
+		MapWidget intermediateDist = routeWidgetsFactory.createIntermediateDistanceControl(mapActivity);
+		registerWidget(WIDGET_INTERMEDIATE_DISTANCE, intermediateDist, R.drawable.ic_action_intermediate, R.string.map_widget_intermediate_distance, rightPanel);
+
+		TextInfoWidget intermediateTime = routeWidgetsFactory.createTimeControl(mapActivity, true);
+		registerWidget(WIDGET_INTERMEDIATE_TIME, intermediateTime, new TimeWidgetState(app, true), rightPanel);
+
+		MapWidget dist = routeWidgetsFactory.createDistanceControl(mapActivity);
+		registerWidget(WIDGET_DISTANCE, dist, R.drawable.ic_action_target, R.string.map_widget_distance, rightPanel);
+
+		MapWidget time = routeWidgetsFactory.createTimeControl(mapActivity, false);
+		registerWidget(WIDGET_TIME, time, new TimeWidgetState(app, false), rightPanel);
+
+		MapWidget marker = markersWidgetsHelper.getMapMarkerSideWidget(true);
+		registerWidget(WIDGET_MARKER_1, marker, R.drawable.ic_action_flag, R.string.map_marker_1st, rightPanel);
+
+		MapWidget bearing = routeWidgetsFactory.createBearingControl(mapActivity);
+		registerWidget(WIDGET_BEARING, bearing, new BearingWidgetState(app), rightPanel);
+
+		MapWidget marker2nd = markersWidgetsHelper.getMapMarkerSideWidget(false);
+		registerWidget(WIDGET_MARKER_2, marker2nd, R.drawable.ic_action_flag, R.string.map_marker_2nd, rightPanel);
+
+		MapWidget speed = routeWidgetsFactory.createSpeedControl(mapActivity);
+		registerWidget(WIDGET_SPEED, speed, R.drawable.ic_action_speed, R.string.map_widget_speed, rightPanel);
+
+		MapWidget maxSpeed = routeWidgetsFactory.createMaxSpeedControl(mapActivity);
+		registerWidget(WIDGET_MAX_SPEED, maxSpeed, R.drawable.ic_action_speed_limit, R.string.map_widget_max_speed, rightPanel);
+
+		MapWidget alt = mapWidgetsFactory.createAltitudeControl(mapActivity);
+		registerWidget(WIDGET_ALTITUDE, alt, R.drawable.ic_action_altitude, R.string.map_widget_altitude, rightPanel);
+
+		MapWidget gpsInfo = mapWidgetsFactory.createGPSInfoControl(mapActivity);
+		registerWidget(WIDGET_GPS_INFO, gpsInfo, R.drawable.ic_action_gps_info, R.string.map_widget_gps_info, rightPanel);
+
+		MapWidget plainTime = routeWidgetsFactory.createPlainTimeControl(mapActivity);
+		registerWidget(WIDGET_PLAIN_TIME, plainTime, R.drawable.ic_action_time, R.string.map_widget_plain_time, rightPanel);
+
+		MapWidget battery = routeWidgetsFactory.createBatteryControl(mapActivity);
+		registerWidget(WIDGET_BATTERY, battery, R.drawable.ic_action_battery, R.string.map_widget_battery, rightPanel);
+
+		MapWidget radiusRuler = mapWidgetsFactory.createRadiusRulerControl(mapActivity);
+		registerWidget(WIDGET_RADIUS_RULER, radiusRuler, new CompassRulerWidgetState(app), rightPanel);
+	}
+
+	@Nullable
+	public MapWidgetInfo registerWidget(@NonNull String key, @NonNull MapWidget widget,
+	                                    @DrawableRes int settingsIconId, @StringRes int messageId,
+	                                    @NonNull WidgetsPanel widgetPanel) {
+		if (mapInfoControls != null) {
+			int order = widgetPanel.getWidgetOrder(key, settings);
+			MapWidgetInfo widgetInfo = mapInfoControls.registerWidget(key, widget, null,
+					settingsIconId, messageId, null, order, widgetPanel);
+			widget.updateColors(calculateTextState());
+			return widgetInfo;
+		} else {
+			return null;
 		}
-		if (rightStack != null) {
-			rightStack.removeAllViews();
+	}
+
+	@Nullable
+	public MapWidgetInfo registerWidget(@NonNull String key, @NonNull MapWidget widget,
+	                                    @DrawableRes int settingsIconId, @Nullable String message,
+	                                    @NonNull WidgetsPanel widgetPanel, int order) {
+		if (mapInfoControls != null) {
+			MapWidgetInfo reg = mapInfoControls.registerWidget(key, widget, null, settingsIconId,
+					MapWidgetInfo.INVALID_ID, message, order, widgetPanel);
+			widget.updateColors(calculateTextState());
+			return reg;
+		} else {
+			return null;
+		}
+	}
+
+	public void registerWidget(@NonNull String key, @NonNull MapWidget widget,
+			                   @NonNull WidgetState widgetState, @NonNull WidgetsPanel widgetPanel) {
+		if (mapInfoControls != null) {
+			int order = widgetPanel.getWidgetOrder(key, settings);
+			mapInfoControls.registerWidget(key, widget, widgetState,
+					MapWidgetInfo.INVALID_ID, MapWidgetInfo.INVALID_ID, null, order, widgetPanel);
+			widget.updateColors(calculateTextState());
+		}
+	}
+
+	public void recreateControls() {
+		ApplicationMode appMode = settings.getApplicationMode();
+		recreateWidgetsPanel(topWidgetsContainer, WidgetsPanel.TOP, appMode);
+		recreateWidgetsPanel(leftWidgetsContainer, WidgetsPanel.LEFT, appMode);
+		recreateWidgetsPanel(rightWidgetsContainer, WidgetsPanel.RIGHT, appMode);
+		setupExpandButton();
+	}
+
+	private void recreateWidgetsPanel(@Nullable ViewGroup container, @NonNull WidgetsPanel panel,
+	                                  @NonNull ApplicationMode appMode) {
+		if (container != null) {
+			container.removeAllViews();
 			if (mapInfoControls != null) {
-				mapInfoControls.populateStackControl(rightStack, settings.getApplicationMode(), false, WIDGETS_EXPANDED);
+				mapInfoControls.populateControlsContainer(container, appMode, panel, WIDGETS_EXPANDED);
 			}
-			rightStack.requestLayout();
+			container.requestLayout();
 		}
+	}
+
+	private void setupExpandButton() {
 		if (expandButton != null) {
-			expandButton.setVisibility(mapInfoControls.hasCollapsibles(settings.getApplicationMode()) ?
-					View.VISIBLE : View.GONE);
+			AndroidUiHelper.updateVisibility(expandButton, mapInfoControls.hasCollapsibles(settings.getApplicationMode()));
 			UiUtilities uiUtilities = getApplication().getUIUtilities();
 			int iconId = WIDGETS_EXPANDED ? R.drawable.ic_action_arrow_up : R.drawable.ic_action_arrow_down;
 			int colorId = ColorUtilities.getMapButtonIconColorId(false);
 			Drawable expandIcon = uiUtilities.getIcon(iconId, colorId);
 			setMapButtonIcon(expandButton, expandIcon);
-			expandButton.setContentDescription(getString(WIDGETS_EXPANDED ? R.string.shared_string_collapse : R.string.access_widget_expand));
+			int contentDescrId = WIDGETS_EXPANDED ? R.string.shared_string_collapse : R.string.access_widget_expand;
+			expandButton.setContentDescription(getString(contentDescrId));
 			expandButton.setOnClickListener(v -> {
 				WIDGETS_EXPANDED = !WIDGETS_EXPANDED;
 				recreateControls();
@@ -392,22 +430,18 @@ public void updateColorShadowsOfText() {
 			themeId = calcThemeId;
 			TextState ts = calculateTextState();
 			if (mapInfoControls != null) {
-				for (MapWidgetRegInfo reg : mapInfoControls.getLeftWidgetSet()) {
-					updateReg(ts, reg);
-				}
-				for (MapWidgetRegInfo reg : mapInfoControls.getRightWidgetSet()) {
-					updateReg(ts, reg);
+				for (MapWidgetInfo widgetInfo : mapInfoControls.getAllWidgets()) {
+					widgetInfo.widget.updateColors(ts);
 				}
 			}
-			updateStreetName(ts);
-			updateTopCoordinates(ts);
 			updateTopToolbar(nightMode);
-			lanesWidget.updateColors(ts);
-			int padding = expandButton.getPaddingLeft();
+
 			expandButton.setBackgroundResource(ts.expand);
+			int padding = expandButton.getPaddingLeft();
 			expandButton.setPadding(padding, padding, padding, padding);
-			rightStack.invalidate();
-			leftStack.invalidate();
+			topWidgetsContainer.invalidate();
+			rightWidgetsContainer.invalidate();
+			leftWidgetsContainer.invalidate();
 
 			for (RulerWidget rulerWidget : rulerWidgets) {
 				rulerWidget.updateTextSize(nightMode, ts.textColor, ts.textShadowColor, (int) (2 * view.getDensity()));
@@ -415,26 +449,11 @@ public void updateColorShadowsOfText() {
 		}
 	}
 
-	private void updateStreetName(TextState ts) {
-		streetNameWidget.updateColors(ts);
-	}
-
 	private void updateTopToolbar(boolean nightMode) {
 		topToolbarView.updateColors(nightMode);
 	}
 
-	private void updateTopCoordinates(TextState ts) {
-		topCoordinatesView.updateColors(ts);
-	}
-
-	private void updateReg(TextState ts, MapWidgetRegInfo reg) {
-		View v = reg.widget != null ? reg.widget.getView().findViewById(R.id.widget_bg) : null;
-		if (v != null) {
-			v.setBackgroundResource(reg.left ? ts.leftRes : ts.rightRes);
-			reg.widget.updateColors(ts);
-		}
-	}
-
+	@NonNull
 	private TextState calculateTextState() {
 		boolean transparent = view.getSettings().TRANSPARENT_MAP_THEME.get();
 		boolean nightMode = getApplication().getDaynightHelper().isNightMode();
@@ -477,18 +496,14 @@ private TextState calculateTextState() {
 	@Override
 	public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings drawSettings) {
 		if (getMapActivity() != null) {
-			// update data on draw
 			updateColorShadowsOfText();
 			if (mapInfoControls != null) {
-				mapInfoControls.updateInfo(settings.getApplicationMode(), drawSettings, WIDGETS_EXPANDED);
+				ApplicationMode appMode = settings.getApplicationMode();
+				mapInfoControls.updateWidgetsInfo(appMode, drawSettings, WIDGETS_EXPANDED);
 			}
-			streetNameWidget.updateInfo(drawSettings);
-			mapMarkersBarWidget.updateInfo(drawSettings);
 			topToolbarView.updateInfo();
-			topCoordinatesView.updateInfo(drawSettings);
 			elevationProfileWidget.updateInfo();
 			alarmControl.updateInfo(drawSettings, false);
-			lanesWidget.updateInfo(drawSettings);
 
 			for (RulerWidget rulerWidget : rulerWidgets) {
 				rulerWidget.updateInfo(tileBox, drawSettings);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/CenterWidgetInfo.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/CenterWidgetInfo.java
new file mode 100644
index 00000000000..e68388ad1b0
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/CenterWidgetInfo.java
@@ -0,0 +1,50 @@
+package net.osmand.plus.views.mapwidgets;
+
+import net.osmand.plus.settings.backend.ApplicationMode;
+import net.osmand.plus.views.mapwidgets.widgets.MapWidget;
+import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
+
+import androidx.annotation.DrawableRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
+
+public class CenterWidgetInfo extends MapWidgetInfo {
+
+	public CenterWidgetInfo(@NonNull String key,
+	                        @NonNull MapWidget widget,
+	                        @Nullable WidgetState widgetState,
+	                        @DrawableRes int settingsIconId,
+	                        @StringRes int messageId,
+	                        @Nullable String message,
+	                        int priority,
+	                        @NonNull WidgetsPanel widgetPanel) {
+		super(key, widget, widgetState, settingsIconId, messageId, message, priority, widgetPanel);
+	}
+
+	@Override
+	public boolean isVisibleCollapsed(@NonNull ApplicationMode appMode) {
+		return false;
+	}
+
+	@Override
+	public boolean isVisible(@NonNull ApplicationMode appMode) {
+		return true;
+	}
+
+	@Override
+	public void addVisible(@NonNull ApplicationMode appMode) {
+	}
+
+	@Override
+	public void addVisibleCollapsible(@NonNull ApplicationMode appMode) {
+	}
+
+	@Override
+	public void removeVisible(@NonNull ApplicationMode appMode) {
+	}
+
+	@Override
+	public void removeVisibleCollapsible(@NonNull ApplicationMode appMode) {
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
index 29fa0e30b55..9b10fb9877a 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapInfoWidgetsFactory.java
@@ -23,6 +23,7 @@
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.views.layers.RadiusRulerControlLayer.RadiusRulerMode;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.widgets.RightTextInfoWidget;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.util.MapUtils;
 
@@ -59,7 +60,7 @@ public enum TopToolbarControllerType {
 	}
 
 	public TextInfoWidget createAltitudeControl(@NonNull MapActivity mapActivity) {
-		TextInfoWidget altitudeControl = new TextInfoWidget(mapActivity) {
+		TextInfoWidget altitudeControl = new RightTextInfoWidget(mapActivity) {
 			private int cachedAlt = 0;
 
 			@Override
@@ -94,7 +95,7 @@ public boolean isMetricSystemDepended() {
 	}
 
 	public TextInfoWidget createGPSInfoControl(@NonNull MapActivity mapActivity) {
-		TextInfoWidget gpsInfoControl = new TextInfoWidget(mapActivity) {
+		TextInfoWidget gpsInfoControl = new RightTextInfoWidget(mapActivity) {
 			private int usedSatellites = -1;
 			private int foundSatellites = -1;
 
@@ -118,7 +119,7 @@ public void updateInfo(@Nullable DrawSettings drawSettings) {
 
 	public TextInfoWidget createRadiusRulerControl(@NonNull MapActivity mapActivity) {
 		final String title = "";
-		final TextInfoWidget radiusRulerControl = new TextInfoWidget(mapActivity) {
+		final TextInfoWidget radiusRulerControl = new RightTextInfoWidget(mapActivity) {
 
 			@Override
 			public void updateInfo(@Nullable DrawSettings drawSettings) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegInfo.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
similarity index 67%
rename from OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegInfo.java
rename to OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
index cfd4f5da9c0..81cffb80cad 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegInfo.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
@@ -6,37 +6,36 @@
 import androidx.annotation.StringRes;
 
 import net.osmand.plus.settings.backend.ApplicationMode;
-import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
+import net.osmand.plus.views.mapwidgets.widgets.MapWidget;
 import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
 
 import java.util.LinkedHashSet;
 import java.util.Set;
 
-public class MapWidgetRegInfo implements Comparable<MapWidgetRegInfo> {
+public abstract class MapWidgetInfo implements Comparable<MapWidgetInfo> {
 
 	public static final int INVALID_ID = 0;
 
 	public final String key;
-	public final TextInfoWidget widget;
-	public final boolean left;
+	public final MapWidget widget;
+	public final WidgetsPanel widgetPanel;
 	public final int priority;
+
 	@DrawableRes
 	private final int settingsIconId;
 	@StringRes
 	private final int messageId;
 	private final String message;
 	private final WidgetState widgetState;
-	private final Set<ApplicationMode> visibleCollapsible = new LinkedHashSet<>();
-	private final Set<ApplicationMode> visibleModes = new LinkedHashSet<>();
 
-	public MapWidgetRegInfo(@NonNull String key,
-	                        TextInfoWidget widget,
+	public MapWidgetInfo(@NonNull String key,
+	                        @NonNull MapWidget widget,
 	                        @Nullable WidgetState widgetState,
 	                        @DrawableRes int settingsIconId,
 	                        @StringRes int messageId,
 	                        @Nullable String message,
 	                        int priority,
-	                        boolean left) {
+	                        @NonNull WidgetsPanel widgetPanel) {
 		this.key = key;
 		this.widget = widget;
 		this.widgetState = widgetState;
@@ -44,7 +43,7 @@ public MapWidgetRegInfo(@NonNull String key,
 		this.messageId = messageId;
 		this.message = message;
 		this.priority = priority;
-		this.left = left;
+		this.widgetPanel = widgetPanel;
 	}
 
 	@Nullable
@@ -71,29 +70,17 @@ public int getMessageId() {
 				: messageId;
 	}
 
-	public boolean isVisibleCollapsed(ApplicationMode mode) {
-		return visibleCollapsible.contains(mode);
-	}
+	public abstract boolean isVisibleCollapsed(@NonNull ApplicationMode appMode);
 
-	public boolean isVisible(ApplicationMode mode) {
-		return visibleModes.contains(mode);
-	}
+	public abstract boolean isVisible(@NonNull ApplicationMode appMode);
 
-	public void addVisible(ApplicationMode mode) {
-		visibleModes.add(mode);
-	}
+	public abstract void addVisible(@NonNull ApplicationMode appMode);
 
-	public void addVisibleCollapsible(ApplicationMode mode) {
-		visibleCollapsible.add(mode);
-	}
+	public abstract void addVisibleCollapsible(@NonNull ApplicationMode appMode);
 
-	public void removeVisible(ApplicationMode mode) {
-		visibleModes.remove(mode);
-	}
+	public abstract void removeVisible(@NonNull ApplicationMode appMode);
 
-	public void removeVisibleCollapsible(ApplicationMode mode) {
-		visibleCollapsible.remove(mode);
-	}
+	public abstract void removeVisibleCollapsible(@NonNull ApplicationMode appMode);
 
 	@Override
 	public int hashCode() {
@@ -110,7 +97,7 @@ public boolean equals(Object obj) {
 		} else if (getClass() != obj.getClass()) {
 			return false;
 		}
-		MapWidgetRegInfo other = (MapWidgetRegInfo) obj;
+		MapWidgetInfo other = (MapWidgetInfo) obj;
 		if (getMessageId() == 0 && other.getMessageId() == 0) {
 			return key.equals(other.key);
 		}
@@ -118,7 +105,7 @@ public boolean equals(Object obj) {
 	}
 
 	@Override
-	public int compareTo(@NonNull MapWidgetRegInfo another) {
+	public int compareTo(@NonNull MapWidgetInfo another) {
 		if (getMessageId() == 0 && another.getMessageId() == 0) {
 			if (key.equals(another.key)) {
 				return 0;
@@ -135,4 +122,4 @@ public int compareTo(@NonNull MapWidgetRegInfo another) {
 		}
 		return priority - another.priority;
 	}
-}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
index 2b453aa7d7a..9acf7cefe1f 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
@@ -1,16 +1,10 @@
 package net.osmand.plus.views.mapwidgets;
 
-import android.content.Context;
 import android.graphics.drawable.Drawable;
 import android.view.View;
 import android.view.View.OnClickListener;
+import android.view.ViewGroup;
 import android.widget.ArrayAdapter;
-import android.widget.LinearLayout;
-
-import androidx.annotation.DrawableRes;
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-import androidx.annotation.StringRes;
 
 import net.osmand.StateChangedListener;
 import net.osmand.plus.ContextMenuAdapter;
@@ -28,6 +22,7 @@
 import net.osmand.plus.views.layers.MapInfoLayer;
 import net.osmand.plus.views.layers.MapQuickActionLayer;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
+import net.osmand.plus.views.mapwidgets.widgets.MapWidget;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.plus.views.mapwidgets.widgetstates.ElevationProfileWidgetState;
 import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
@@ -37,6 +32,7 @@
 
 import java.util.ArrayList;
 import java.util.Collections;
+import java.util.HashMap;
 import java.util.Iterator;
 import java.util.LinkedHashMap;
 import java.util.LinkedHashSet;
@@ -45,6 +41,11 @@
 import java.util.Set;
 import java.util.TreeSet;
 
+import androidx.annotation.DrawableRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
+
 public class MapWidgetRegistry {
 
 	public static final String COLLAPSED_PREFIX = "+";
@@ -54,68 +55,83 @@ public class MapWidgetRegistry {
 
 	public static final String WIDGET_COMPASS = "compass";
 
-	public static String WIDGET_NEXT_TURN = "next_turn";
-	public static String WIDGET_NEXT_TURN_SMALL = "next_turn_small";
-	public static String WIDGET_NEXT_NEXT_TURN = "next_next_turn";
-	public static String WIDGET_DISTANCE = "distance";
-	public static String WIDGET_INTERMEDIATE_DISTANCE = "intermediate_distance";
-	public static String WIDGET_TIME = "time";
-	public static String WIDGET_INTERMEDIATE_TIME = "intermediate_time";
-	public static String WIDGET_MAX_SPEED = "max_speed";
-	public static String WIDGET_SPEED = "speed";
-	public static String WIDGET_ALTITUDE = "altitude";
-	public static String WIDGET_GPS_INFO = "gps_info";
-	public static String WIDGET_MARKER_1 = "map_marker_1st";
-	public static String WIDGET_MARKER_2 = "map_marker_2nd";
-	public static String WIDGET_BEARING = "bearing";
-	public static String WIDGET_PLAIN_TIME = "plain_time";
-	public static String WIDGET_BATTERY = "battery";
-	public static String WIDGET_RADIUS_RULER = "ruler";
-
-	public static String WIDGET_STREET_NAME = "street_name";
-
-
-	private final Set<MapWidgetRegInfo> leftWidgetSet = new TreeSet<>();
-	private final Set<MapWidgetRegInfo> rightWidgetSet = new TreeSet<>();
-	private final Map<ApplicationMode, Set<String>> visibleElementsFromSettings = new LinkedHashMap<>();
+	public static final String WIDGET_NEXT_TURN = "next_turn";
+	public static final String WIDGET_NEXT_TURN_SMALL = "next_turn_small";
+	public static final String WIDGET_NEXT_NEXT_TURN = "next_next_turn";
+
+	public static final String WIDGET_DISTANCE = "distance";
+	public static final String WIDGET_INTERMEDIATE_DISTANCE = "intermediate_distance";
+	public static final String WIDGET_TIME = "time";
+	public static final String WIDGET_INTERMEDIATE_TIME = "intermediate_time";
+	public static final String WIDGET_MAX_SPEED = "max_speed";
+	public static final String WIDGET_SPEED = "speed";
+	public static final String WIDGET_ALTITUDE = "altitude";
+	public static final String WIDGET_GPS_INFO = "gps_info";
+	public static final String WIDGET_MARKER_1 = "map_marker_1st";
+	public static final String WIDGET_MARKER_2 = "map_marker_2nd";
+	public static final String WIDGET_BEARING = "bearing";
+	public static final String WIDGET_PLAIN_TIME = "plain_time";
+	public static final String WIDGET_BATTERY = "battery";
+	public static final String WIDGET_RADIUS_RULER = "ruler";
+
+	public static final String WIDGET_COORDINATES = "coordinates";
+	public static final String WIDGET_STREET_NAME = "street_name";
+	public static final String WIDGET_MAP_MARKERS = "map_markers_top";
+	public static final String WIDGET_LANES = "lanes";
+
+	public static final String WIDGET_ELEVATION_PROFILE = "elevation_profile";
+
 	private final OsmandApplication app;
 	private final OsmandSettings settings;
 
+	private final Map<WidgetsPanel, Set<MapWidgetInfo>> allWidgets = new HashMap<>();
+	private final Map<ApplicationMode, Set<String>> visibleSideWidgetsFromSettings = new LinkedHashMap<>();
+
 	private final StateChangedListener<String> listener;
 
 	public MapWidgetRegistry(OsmandApplication app) {
 		this.app = app;
 		this.settings = app.getSettings();
 		loadVisibleElementsFromSettings();
-		listener = change -> updateVisibleWidgets();
+		listener = change -> updateVisibleSideWidgets();
 		settings.AVAILABLE_APP_MODES.addListener(listener);
 		settings.MAP_INFO_CONTROLS.addListener(listener);
 	}
 
-	public void populateStackControl(LinearLayout stack,
-	                                 ApplicationMode mode, boolean left, boolean expanded) {
-		Set<MapWidgetRegInfo> s = left ? this.leftWidgetSet : this.rightWidgetSet;
-		for (MapWidgetRegInfo r : s) {
-			if (r.widget != null && r.isVisible(mode)) {
-				stack.addView(r.widget.getView());
+	public void populateControlsContainer(@NonNull ViewGroup container, @NonNull ApplicationMode mode,
+	                                      @NonNull WidgetsPanel widgetPanel, boolean expanded) {
+		Set<MapWidgetInfo> widgets = getWidgetsForPanel(widgetPanel);
+
+		List<MapWidget> widgetsToShow = new ArrayList<>();
+		for (MapWidgetInfo widgetInfo : widgets) {
+			if (widgetInfo.isVisible(mode)) {
+				widgetsToShow.add(widgetInfo.widget);
 			}
 		}
 		if (expanded) {
-			for (MapWidgetRegInfo r : s) {
-				if (r.widget != null && r.isVisibleCollapsed(mode)) {
-					stack.addView(r.widget.getView());
+			for (MapWidgetInfo widgetInfo : widgets) {
+				if (widgetInfo.isVisibleCollapsed(mode)) {
+					widgetsToShow.add(widgetInfo.widget);
 				}
 			}
 		}
+
+		for (int i = 0; i < widgetsToShow.size(); i++) {
+			MapWidget widget = widgetsToShow.get(i);
+			List<MapWidget> followingWidgets = i + 1 == widgetsToShow.size()
+					? new ArrayList<>()
+					: widgetsToShow.subList(i + 1, widgetsToShow.size());
+			widget.attachView(container, i, followingWidgets);
+		}
 	}
 
 	public boolean hasCollapsibles(ApplicationMode mode) {
-		for (MapWidgetRegInfo r : leftWidgetSet) {
+		for (MapWidgetInfo r : getLeftWidgets()) {
 			if (r.isVisibleCollapsed(mode)) {
 				return true;
 			}
 		}
-		for (MapWidgetRegInfo r : rightWidgetSet) {
+		for (MapWidgetInfo r : getRightWidgets()) {
 			if (r.isVisibleCollapsed(mode)) {
 				return true;
 			}
@@ -123,28 +139,31 @@ public boolean hasCollapsibles(ApplicationMode mode) {
 		return false;
 	}
 
-
-	public void updateInfo(ApplicationMode mode, DrawSettings drawSettings, boolean expanded) {
-		update(mode, drawSettings, expanded, leftWidgetSet);
-		update(mode, drawSettings, expanded, rightWidgetSet);
+	public void updateWidgetsInfo(@NonNull ApplicationMode appMode, @NonNull DrawSettings drawSettings,
+	                              boolean expanded) {
+		for (WidgetsPanel panel : WidgetsPanel.values()) {
+			Set<MapWidgetInfo> panelWidgets = getWidgetsForPanel(panel);
+			updatePanelInfo(panelWidgets, appMode, drawSettings, expanded);
+		}
 	}
 
-	private void update(ApplicationMode mode, DrawSettings drawSettings, boolean expanded, Set<MapWidgetRegInfo> l) {
-		for (MapWidgetRegInfo r : l) {
-			if (r.widget != null && (r.isVisible(mode) || (r.isVisibleCollapsed(mode) && expanded))) {
-				r.widget.updateInfo(drawSettings);
+	private void updatePanelInfo(@NonNull Set<MapWidgetInfo> panelWidgets, @NonNull ApplicationMode mode,
+	                             @NonNull DrawSettings drawSettings, boolean expanded) {
+		for (MapWidgetInfo widgetInfo : panelWidgets) {
+			if (widgetInfo.isVisible(mode) || (widgetInfo.isVisibleCollapsed(mode) && expanded)) {
+				widgetInfo.widget.updateInfo(drawSettings);
 			}
 		}
 	}
 
 	public void removeSideWidgetInternal(TextInfoWidget widget) {
-		Iterator<MapWidgetRegInfo> it = leftWidgetSet.iterator();
+		Iterator<MapWidgetInfo> it = getLeftWidgets().iterator();
 		while (it.hasNext()) {
 			if (it.next().widget == widget) {
 				it.remove();
 			}
 		}
-		it = rightWidgetSet.iterator();
+		it = getRightWidgets().iterator();
 		while (it.hasNext()) {
 			if (it.next().widget == widget) {
 				it.remove();
@@ -152,19 +171,18 @@ public void removeSideWidgetInternal(TextInfoWidget widget) {
 		}
 	}
 
-	public void clearSideWidgets() {
-		leftWidgetSet.clear();
-		rightWidgetSet.clear();
+	public void clearWidgets() {
+		allWidgets.clear();
 	}
 
 	public <T extends TextInfoWidget> T getSideWidget(Class<T> cl) {
-		for (MapWidgetRegInfo ri : leftWidgetSet) {
+		for (MapWidgetInfo ri : getLeftWidgets()) {
 			if (cl.isInstance(ri)) {
 				//noinspection unchecked
 				return (T) ri.widget;
 			}
 		}
-		for (MapWidgetRegInfo ri : rightWidgetSet) {
+		for (MapWidgetInfo ri : getRightWidgets()) {
 			if (cl.isInstance(ri)) {
 				//noinspection unchecked
 				return (T) ri.widget;
@@ -173,82 +191,87 @@ public <T extends TextInfoWidget> T getSideWidget(Class<T> cl) {
 		return null;
 	}
 
-	public MapWidgetRegInfo registerWidget(@NonNull String key,
-	                                       @Nullable TextInfoWidget widget,
-	                                       @Nullable WidgetState widgetState,
-	                                       @DrawableRes int drawableMenu,
-	                                       @StringRes int messageId,
-	                                       String message,
-	                                       int priorityOrder,
-	                                       boolean left) {
-		MapWidgetRegInfo ii = new MapWidgetRegInfo(key, widget,
-				widgetState, drawableMenu, messageId, message, priorityOrder, left);
-		processVisibleModes(key, ii);
-		if (widget != null) {
+	@NonNull
+	public MapWidgetInfo registerWidget(@NonNull String key,
+	                                    @NonNull MapWidget widget,
+	                                    @Nullable WidgetState widgetState,
+	                                    @DrawableRes int settingsIconId,
+	                                    @StringRes int messageId,
+	                                    @Nullable String message,
+	                                    int priorityOrder,
+	                                    @NonNull WidgetsPanel widgetPanel) {
+		MapWidgetInfo widgetInfo;
+
+		if (widget instanceof TextInfoWidget) {
+			widgetInfo = new SideWidgetInfo(key, widget, widgetState, settingsIconId, messageId, message,
+					priorityOrder, widgetPanel);
+			processVisibleModes(key, widgetInfo);
+			TextInfoWidget textWidget = ((TextInfoWidget) widget);
 			if (message != null) {
-				widget.setContentTitle(message);
-			} else if (messageId != MapWidgetRegInfo.INVALID_ID){
-				widget.setContentTitle(messageId);
+				textWidget.setContentTitle(message);
+			} else if (messageId != MapWidgetInfo.INVALID_ID) {
+				textWidget.setContentTitle(messageId);
 			} else if (widgetState != null) {
-				widget.setContentTitle(widgetState.getMenuTitleId());
+				textWidget.setContentTitle(widgetState.getMenuTitleId());
 			}
-		}
-		if (left) {
-			this.leftWidgetSet.add(ii);
 		} else {
-			this.rightWidgetSet.add(ii);
+			widgetInfo = new CenterWidgetInfo(key, widget, widgetState, settingsIconId, messageId, message,
+					priorityOrder, widgetPanel);
 		}
-		return ii;
+
+		getWidgetsForPanel(widgetPanel).add(widgetInfo);
+
+		return widgetInfo;
 	}
 
-	private void processVisibleModes(String key, MapWidgetRegInfo ii) {
+	private void processVisibleModes(String key, MapWidgetInfo widgetInfo) {
 		for (ApplicationMode ms : ApplicationMode.values(app)) {
 			boolean collapse = ms.isWidgetCollapsible(key);
-			boolean def = ms.isWidgetVisible(key);
-			Set<String> set = visibleElementsFromSettings.get(ms);
+			boolean visible = ms.isWidgetVisible(key);
+			Set<String> set = visibleSideWidgetsFromSettings.get(ms);
 			if (set != null) {
 				if (set.contains(key)) {
-					def = true;
+					visible = true;
 					collapse = false;
 				} else if (set.contains(HIDE_PREFIX + key)) {
-					def = false;
+					visible = false;
 					collapse = false;
 				} else if (set.contains(COLLAPSED_PREFIX + key)) {
-					def = false;
+					visible = false;
 					collapse = true;
 				}
 			}
-			if (def) {
-				ii.addVisible(ms);
+			if (visible) {
+				widgetInfo.addVisible(ms);
 			} else if (collapse) {
-				ii.addVisibleCollapsible(ms);
+				widgetInfo.addVisibleCollapsible(ms);
 			} else {
-				ii.removeVisible(ms);
-				ii.removeVisibleCollapsible(ms);
+				widgetInfo.removeVisible(ms);
+				widgetInfo.removeVisibleCollapsible(ms);
 			}
 		}
 	}
 
-	private void restoreModes(Set<String> set, Set<MapWidgetRegInfo> mi, ApplicationMode mode) {
-		for (MapWidgetRegInfo m : mi) {
-			if (m.isVisible(mode)) {
-				set.add(m.key);
-			} else if (m.isVisibleCollapsed(mode)) {
-				set.add(COLLAPSED_PREFIX + m.key);
+	private void restoreModes(Set<String> set, Set<MapWidgetInfo> widgetsInfo, ApplicationMode mode) {
+		for (MapWidgetInfo widgetInfo : widgetsInfo) {
+			if (widgetInfo.isVisible(mode)) {
+				set.add(widgetInfo.key);
+			} else if (widgetInfo.isVisibleCollapsed(mode)) {
+				set.add(COLLAPSED_PREFIX + widgetInfo.key);
 			} else {
-				set.add(HIDE_PREFIX + m.key);
+				set.add(HIDE_PREFIX + widgetInfo.key);
 			}
 		}
 	}
 
 	public boolean isVisible(String key) {
 		ApplicationMode mode = settings.APPLICATION_MODE.get();
-		Set<String> elements = visibleElementsFromSettings.get(mode);
+		Set<String> elements = visibleSideWidgetsFromSettings.get(mode);
 		return elements != null && (elements.contains(key) || elements.contains(COLLAPSED_PREFIX + key));
 	}
 
 	private void setVisibility(ArrayAdapter<ContextMenuItem> adapter,
-	                           MapWidgetRegInfo r,
+	                           MapWidgetInfo r,
 	                           int position,
 	                           boolean visible,
 	                           boolean collapsed) {
@@ -265,62 +288,62 @@ private void setVisibility(ArrayAdapter<ContextMenuItem> adapter,
 		adapter.notifyDataSetChanged();
 	}
 
-	public void setVisibility(MapWidgetRegInfo m, boolean visible, boolean collapsed) {
+	public void setVisibility(MapWidgetInfo m, boolean visible, boolean collapsed) {
 		ApplicationMode mode = settings.APPLICATION_MODE.get();
 		setVisibility(mode, m, visible, collapsed);
 	}
 
-	public void setVisibility(ApplicationMode mode, MapWidgetRegInfo m, boolean visible, boolean collapsed) {
+	public void setVisibility(ApplicationMode mode, MapWidgetInfo m, boolean visible, boolean collapsed) {
 		defineDefaultSettingsElement(mode);
 		// clear everything
-		this.visibleElementsFromSettings.get(mode).remove(m.key);
-		this.visibleElementsFromSettings.get(mode).remove(COLLAPSED_PREFIX + m.key);
-		this.visibleElementsFromSettings.get(mode).remove(HIDE_PREFIX + m.key);
+		visibleSideWidgetsFromSettings.get(mode).remove(m.key);
+		visibleSideWidgetsFromSettings.get(mode).remove(COLLAPSED_PREFIX + m.key);
+		visibleSideWidgetsFromSettings.get(mode).remove(HIDE_PREFIX + m.key);
 		m.removeVisible(mode);
 		m.removeVisibleCollapsible(mode);
 		if (visible && collapsed) {
 			// Set "collapsed" state
 			m.addVisibleCollapsible(mode);
-			this.visibleElementsFromSettings.get(mode).add(COLLAPSED_PREFIX + m.key);
+			visibleSideWidgetsFromSettings.get(mode).add(COLLAPSED_PREFIX + m.key);
 		} else if (visible) {
 			// Set "visible" state
 			m.addVisible(mode);
-			this.visibleElementsFromSettings.get(mode).add(SHOW_PREFIX + m.key);
+			visibleSideWidgetsFromSettings.get(mode).add(SHOW_PREFIX + m.key);
 		} else {
 			// Set "hidden" state
-			this.visibleElementsFromSettings.get(mode).add(HIDE_PREFIX + m.key);
+			visibleSideWidgetsFromSettings.get(mode).add(HIDE_PREFIX + m.key);
 		}
 		saveVisibleElementsToSettings(mode);
 	}
 
 	private void defineDefaultSettingsElement(ApplicationMode mode) {
-		if (this.visibleElementsFromSettings.get(mode) == null) {
+		if (visibleSideWidgetsFromSettings.get(mode) == null) {
 			LinkedHashSet<String> set = new LinkedHashSet<>();
-			restoreModes(set, leftWidgetSet, mode);
-			restoreModes(set, rightWidgetSet, mode);
-			this.visibleElementsFromSettings.put(mode, set);
+			restoreModes(set, getLeftWidgets(), mode);
+			restoreModes(set, getRightWidgets(), mode);
+			visibleSideWidgetsFromSettings.put(mode, set);
 		}
 	}
 
-	public void updateVisibleWidgets() {
+	public void updateVisibleSideWidgets() {
 		loadVisibleElementsFromSettings();
-		for (MapWidgetRegInfo ri : leftWidgetSet) {
+		for (MapWidgetInfo ri : getLeftWidgets()) {
 			processVisibleModes(ri.key, ri);
 		}
-		for (MapWidgetRegInfo ri : rightWidgetSet) {
+		for (MapWidgetInfo ri : getRightWidgets()) {
 			processVisibleModes(ri.key, ri);
 		}
 	}
 
 	private void loadVisibleElementsFromSettings() {
-		visibleElementsFromSettings.clear();
+		visibleSideWidgetsFromSettings.clear();
 		for (ApplicationMode ms : ApplicationMode.values(app)) {
 			String mpf = settings.MAP_INFO_CONTROLS.getModeValue(ms);
 			if (mpf.equals(SHOW_PREFIX)) {
-				visibleElementsFromSettings.put(ms, null);
+				visibleSideWidgetsFromSettings.put(ms, null);
 			} else {
 				LinkedHashSet<String> set = new LinkedHashSet<>();
-				visibleElementsFromSettings.put(ms, set);
+				visibleSideWidgetsFromSettings.put(ms, set);
 				Collections.addAll(set, mpf.split(SETTINGS_SEPARATOR));
 			}
 		}
@@ -328,15 +351,15 @@ private void loadVisibleElementsFromSettings() {
 
 	private void saveVisibleElementsToSettings(ApplicationMode mode) {
 		StringBuilder bs = new StringBuilder();
-		for (String ks : this.visibleElementsFromSettings.get(mode)) {
+		for (String ks : visibleSideWidgetsFromSettings.get(mode)) {
 			bs.append(ks).append(SETTINGS_SEPARATOR);
 		}
 		settings.MAP_INFO_CONTROLS.set(bs.toString());
 	}
 
 
-	private void resetDefault(ApplicationMode mode, Set<MapWidgetRegInfo> set) {
-		for (MapWidgetRegInfo ri : set) {
+	private void resetDefault(ApplicationMode mode, Set<MapWidgetInfo> set) {
+		for (MapWidgetInfo ri : set) {
 			ri.removeVisibleCollapsible(mode);
 			ri.removeVisible(mode);
 			if (mode.isWidgetVisible(ri.key)) {
@@ -351,10 +374,10 @@ private void resetDefault(ApplicationMode mode, Set<MapWidgetRegInfo> set) {
 
 	public void resetToDefault() {
 		ApplicationMode appMode = settings.getApplicationMode();
-		resetDefault(appMode, leftWidgetSet);
-		resetDefault(appMode, rightWidgetSet);
+		resetDefault(appMode, getLeftWidgets());
+		resetDefault(appMode, getRightWidgets());
 		resetDefaultAppearance(appMode);
-		this.visibleElementsFromSettings.put(appMode, null);
+		visibleSideWidgetsFromSettings.put(appMode, null);
 		settings.MAP_INFO_CONTROLS.set(SHOW_PREFIX);
 	}
 
@@ -365,11 +388,11 @@ private void resetDefaultAppearance(ApplicationMode mode) {
 	}
 
 	public void updateMapMarkersMode(MapActivity mapActivity) {
-		for (MapWidgetRegInfo info : rightWidgetSet) {
-			if ("map_marker_1st".equals(info.key)) {
+		for (MapWidgetInfo info : getRightWidgets()) {
+			if (WIDGET_MARKER_1.equals(info.key)) {
 				setVisibility(info, settings.MAP_MARKERS_MODE.get().isWidgets()
 						&& settings.MARKERS_DISTANCE_INDICATION_ENABLED.get(), false);
-			} else if ("map_marker_2nd".equals(info.key)) {
+			} else if (WIDGET_MARKER_2.equals(info.key)) {
 				setVisibility(info, settings.MAP_MARKERS_MODE.get().isWidgets()
 						&& settings.MARKERS_DISTANCE_INDICATION_ENABLED.get()
 						&& settings.DISPLAYED_MARKERS_WIDGETS_COUNT.get() == 2, false);
@@ -389,23 +412,33 @@ private void addControlId(@NonNull MapActivity mapActivity, @NonNull ContextMenu
 				.setListener(new AppearanceItemClickListener(pref, mapActivity)).createItem());
 	}
 
-	public static boolean distChanged(int oldDist, int dist) {
-		return !(oldDist != 0 && oldDist - dist < 100 && Math.abs(((float) dist - oldDist) / oldDist) < 0.01);
+	@NonNull
+	public Set<MapWidgetInfo> getLeftWidgets() {
+		return getWidgetsForPanel(WidgetsPanel.LEFT);
 	}
 
-	public String getText(Context ctx, final ApplicationMode mode, final MapWidgetRegInfo r) {
-		if (r.getMessage() != null) {
-			return (r.isVisibleCollapsed(mode) ? " + " : "  ") + r.getMessage();
-		}
-		return (r.isVisibleCollapsed(mode) ? " + " : "  ") + ctx.getString(r.getMessageId());
+	@NonNull
+	public Set<MapWidgetInfo> getRightWidgets() {
+		return getWidgetsForPanel(WidgetsPanel.RIGHT);
 	}
 
-	public Set<MapWidgetRegInfo> getRightWidgetSet() {
-		return rightWidgetSet;
+	@NonNull
+	public List<MapWidgetInfo> getAllWidgets() {
+		List<MapWidgetInfo> widgets = new ArrayList<>();
+		for (Set<MapWidgetInfo> panelWidgets : allWidgets.values()) {
+			widgets.addAll(panelWidgets);
+		}
+		return widgets;
 	}
 
-	public Set<MapWidgetRegInfo> getLeftWidgetSet() {
-		return leftWidgetSet;
+	@NonNull
+	public Set<MapWidgetInfo> getWidgetsForPanel(@NonNull WidgetsPanel panel) {
+		Set<MapWidgetInfo> widgets = allWidgets.get(panel);
+		if (widgets == null) {
+			widgets = new TreeSet<>();
+			allWidgets.put(panel, widgets);
+		}
+		return widgets;
 	}
 
 	public void addControls(@NonNull MapActivity mapActivity, @NonNull ContextMenuAdapter cm,
@@ -413,10 +446,10 @@ public void addControls(@NonNull MapActivity mapActivity, @NonNull ContextMenuAd
 		addQuickActionControl(mapActivity, cm);
 		// Right panel
 		addHeader(mapActivity, cm, R.string.map_widget_right);
-		addControls(mapActivity, cm, rightWidgetSet, mode);
+		addControls(mapActivity, cm, getRightWidgets(), mode);
 		// Left panel
 		addHeader(mapActivity, cm, R.string.map_widget_left);
-		addControls(mapActivity, cm, leftWidgetSet, mode);
+		addControls(mapActivity, cm, getRightWidgets(), mode);
 		// Remaining items
 		addHeader(mapActivity, cm, R.string.map_widget_appearance_rem);
 		addControlsAppearance(mapActivity, cm, mode);
@@ -472,8 +505,8 @@ private void setVisibility(ArrayAdapter<ContextMenuItem> adapter,
 	}
 
 	private void addControls(@NonNull MapActivity mapActivity, @NonNull ContextMenuAdapter contextMenuAdapter,
-	                         @NonNull Set<MapWidgetRegInfo> groupTitle, @NonNull ApplicationMode mode) {
-		for (final MapWidgetRegInfo r : groupTitle) {
+	                         @NonNull Set<MapWidgetInfo> groupTitle, @NonNull ApplicationMode mode) {
+		for (final MapWidgetInfo r : groupTitle) {
 			if (!mode.isWidgetAvailable(r.key)) {
 				continue;
 			}
@@ -523,7 +556,7 @@ public boolean onContextMenuClick(ArrayAdapter<ContextMenuItem> a,
 	}
 
 	private OnClickListener getPopupMenuItemListener(final ArrayAdapter<ContextMenuItem> adapter,
-	                                                      final MapWidgetRegInfo r,
+	                                                      final MapWidgetInfo r,
 	                                                      final int pos,
 	                                                      final boolean visible,
 	                                                      final boolean collapsed) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/RouteInfoWidgetsFactory.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/RouteInfoWidgetsFactory.java
index 8bc15b9d292..38f91d79b44 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/RouteInfoWidgetsFactory.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/RouteInfoWidgetsFactory.java
@@ -29,6 +29,7 @@
 import net.osmand.plus.views.mapwidgets.widgets.AlarmWidget;
 import net.osmand.plus.views.mapwidgets.widgets.DistanceToPointWidget;
 import net.osmand.plus.views.mapwidgets.widgets.NextTurnWidget;
+import net.osmand.plus.views.mapwidgets.widgets.RightTextInfoWidget;
 import net.osmand.plus.views.mapwidgets.widgets.RulerWidget;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.router.TurnType;
@@ -173,7 +174,7 @@ public TextInfoWidget createTimeControl(@NonNull MapActivity mapActivity, boolea
 				? settings.SHOW_INTERMEDIATE_ARRIVAL_TIME_OTHERWISE_EXPECTED_TIME
 				: settings.SHOW_ARRIVAL_TIME_OTHERWISE_EXPECTED_TIME;
 
-		final TextInfoWidget leftTimeControl = new TextInfoWidget(mapActivity) {
+		final TextInfoWidget leftTimeControl = new RightTextInfoWidget(mapActivity) {
 			private long cachedLeftTime = 0;
 			
 			@Override
@@ -234,7 +235,7 @@ private void setTimeControlIcons(TextInfoWidget timeControl, boolean showArrival
 	}
 
 	public TextInfoWidget createPlainTimeControl(@NonNull MapActivity mapActivity) {
-		TextInfoWidget plainTimeControl = new TextInfoWidget(mapActivity) {
+		TextInfoWidget plainTimeControl = new RightTextInfoWidget(mapActivity) {
 			private long cachedLeftTime = 0;
 			
 			@Override
@@ -261,7 +262,7 @@ public TextInfoWidget createBatteryControl(@NonNull MapActivity mapActivity) {
 		int batteryN = R.drawable.widget_battery_night;
 		int batteryCharging = R.drawable.widget_battery_charging_day;
 		int batteryChargingN = R.drawable.widget_battery_charging_night;
-		TextInfoWidget batteryControl = new TextInfoWidget(mapActivity) {
+		TextInfoWidget batteryControl = new RightTextInfoWidget(mapActivity) {
 			private long cachedLeftTime = 0;
 
 			@Override
@@ -293,7 +294,7 @@ public void updateInfo(@Nullable DrawSettings drawSettings) {
 
 	public TextInfoWidget createMaxSpeedControl(@NonNull MapActivity mapActivity) {
 		MapViewTrackingUtilities trackingUtilities = mapActivity.getMapViewTrackingUtilities();
-		TextInfoWidget speedControl = new TextInfoWidget(mapActivity) {
+		TextInfoWidget speedControl = new RightTextInfoWidget(mapActivity) {
 			private float cachedSpeed = 0;
 
 			@Override
@@ -339,7 +340,7 @@ public boolean isMetricSystemDepended() {
 	}
 
 	public TextInfoWidget createSpeedControl(@NonNull MapActivity mapActivity) {
-		TextInfoWidget speedControl = new TextInfoWidget(mapActivity) {
+		TextInfoWidget speedControl = new RightTextInfoWidget(mapActivity) {
 			private float cachedSpeed = 0;
 
 			@Override
@@ -435,7 +436,7 @@ public TextInfoWidget createBearingControl(@NonNull MapActivity mapActivity) {
 		int relativeBearingNightResId = R.drawable.widget_relative_bearing_night;
 		OsmandPreference<Boolean> showRelativeBearing = settings.SHOW_RELATIVE_BEARING_OTHERWISE_REGULAR_BEARING;
 
-		TextInfoWidget bearingControl = new TextInfoWidget(mapActivity) {
+		TextInfoWidget bearingControl = new RightTextInfoWidget(mapActivity) {
 			private int cachedDegrees;
 			private float MIN_SPEED_FOR_HEADING = 1f;
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/SideWidgetInfo.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/SideWidgetInfo.java
new file mode 100644
index 00000000000..13497b9b91c
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/SideWidgetInfo.java
@@ -0,0 +1,60 @@
+package net.osmand.plus.views.mapwidgets;
+
+import net.osmand.plus.settings.backend.ApplicationMode;
+import net.osmand.plus.views.mapwidgets.widgets.MapWidget;
+import net.osmand.plus.views.mapwidgets.widgetstates.WidgetState;
+
+import java.util.LinkedHashSet;
+import java.util.Set;
+
+import androidx.annotation.DrawableRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
+
+public class SideWidgetInfo extends MapWidgetInfo {
+
+	private final Set<ApplicationMode> visibleCollapsible = new LinkedHashSet<>();
+	private final Set<ApplicationMode> visible = new LinkedHashSet<>();
+
+	public SideWidgetInfo(@NonNull String key,
+	                      @NonNull MapWidget widget,
+	                      @Nullable WidgetState widgetState,
+	                      @DrawableRes int settingsIconId,
+	                      @StringRes int messageId,
+	                      @Nullable String message,
+	                      int priority,
+	                      @NonNull WidgetsPanel widgetPanel) {
+		super(key, widget, widgetState, settingsIconId, messageId, message, priority, widgetPanel);
+	}
+
+	@Override
+	public boolean isVisible(@NonNull ApplicationMode appMode) {
+		return visible.contains(appMode);
+	}
+
+	@Override
+	public boolean isVisibleCollapsed(@NonNull ApplicationMode appMode) {
+		return visibleCollapsible.contains(appMode);
+	}
+
+	@Override
+	public void addVisible(@NonNull ApplicationMode appMode) {
+		visible.add(appMode);
+	}
+
+	@Override
+	public void addVisibleCollapsible(@NonNull ApplicationMode appMode) {
+		visibleCollapsible.add(appMode);
+	}
+
+	@Override
+	public void removeVisible(@NonNull ApplicationMode appMode) {
+		visible.remove(appMode);
+	}
+
+	@Override
+	public void removeVisibleCollapsible(@NonNull ApplicationMode appMode) {
+		visibleCollapsible.remove(appMode);
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsPanel.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsPanel.java
index e74ec163bcb..47d36fd43c7 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsPanel.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetsPanel.java
@@ -1,6 +1,42 @@
 package net.osmand.plus.views.mapwidgets;
 
 import net.osmand.plus.R;
+import net.osmand.plus.settings.backend.OsmandSettings;
+import net.osmand.plus.settings.backend.preferences.ListStringPreference;
+import net.osmand.util.Algorithms;
+
+import java.util.ArrayList;
+import java.util.List;
+
+import androidx.annotation.NonNull;
+
+import static net.osmand.plus.plugins.audionotes.AudioVideoNotesPlugin.WIDGET_AUDIO_VIDEO_NOTES;
+import static net.osmand.plus.plugins.development.OsmandDevelopmentPlugin.WIDGET_FPS;
+import static net.osmand.plus.plugins.mapillary.MapillaryPlugin.WIDGET_MAPILLARY;
+import static net.osmand.plus.plugins.monitoring.OsmandMonitoringPlugin.WIDGET_TRIP_RECORDING;
+import static net.osmand.plus.plugins.parking.ParkingPositionPlugin.WIDGET_PARKING;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_ALTITUDE;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_BATTERY;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_BEARING;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_COORDINATES;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_DISTANCE;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_ELEVATION_PROFILE;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_GPS_INFO;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_INTERMEDIATE_DISTANCE;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_INTERMEDIATE_TIME;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_LANES;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_MAP_MARKERS;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_MARKER_1;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_MARKER_2;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_MAX_SPEED;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_NEXT_NEXT_TURN;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_NEXT_TURN;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_NEXT_TURN_SMALL;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_PLAIN_TIME;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_RADIUS_RULER;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_SPEED;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_STREET_NAME;
+import static net.osmand.plus.views.mapwidgets.MapWidgetRegistry.WIDGET_TIME;
 
 public enum WidgetsPanel {
 
@@ -9,6 +45,44 @@ public enum WidgetsPanel {
 	TOP(R.drawable.ic_action_screen_side_top, R.string.top_widgets_panel, R.id.top_side),
 	BOTTOM(R.drawable.ic_action_screen_side_bottom, R.string.bottom_widgets_panel, R.id.bottom_side);
 
+	private static final List<String> originalLeftOrder = new ArrayList<>();
+	private static final List<String> originalRightOrder = new ArrayList<>();
+	private static final List<String> originalTopOrder = new ArrayList<>();
+	private static final List<String> originalBottomOrder = new ArrayList<>();
+
+	static {
+		originalLeftOrder.add(WIDGET_NEXT_TURN);
+		originalLeftOrder.add(WIDGET_NEXT_TURN_SMALL);
+		originalLeftOrder.add(WIDGET_NEXT_NEXT_TURN);
+
+		originalRightOrder.add(WIDGET_INTERMEDIATE_DISTANCE);
+		originalRightOrder.add(WIDGET_INTERMEDIATE_TIME);
+		originalRightOrder.add(WIDGET_DISTANCE);
+		originalRightOrder.add(WIDGET_TIME);
+		originalRightOrder.add(WIDGET_MARKER_1);
+		originalRightOrder.add(WIDGET_BEARING);
+		originalRightOrder.add(WIDGET_MARKER_2);
+		originalRightOrder.add(WIDGET_SPEED);
+		originalRightOrder.add(WIDGET_MAX_SPEED);
+		originalRightOrder.add(WIDGET_ALTITUDE);
+		originalRightOrder.add(WIDGET_GPS_INFO);
+		originalRightOrder.add(WIDGET_TRIP_RECORDING);
+		originalRightOrder.add(WIDGET_AUDIO_VIDEO_NOTES);
+		originalRightOrder.add(WIDGET_MAPILLARY);
+		originalRightOrder.add(WIDGET_PARKING);
+		originalRightOrder.add(WIDGET_PLAIN_TIME);
+		originalRightOrder.add(WIDGET_BATTERY);
+		originalRightOrder.add(WIDGET_RADIUS_RULER);
+		originalRightOrder.add(WIDGET_FPS);
+
+		originalTopOrder.add(WIDGET_COORDINATES);
+		originalTopOrder.add(WIDGET_STREET_NAME);
+		originalTopOrder.add(WIDGET_MAP_MARKERS);
+		originalTopOrder.add(WIDGET_LANES);
+
+		originalBottomOrder.add(WIDGET_ELEVATION_PROFILE);
+	}
+
 	private final int iconId;
 	private final int titleId;
 	private final int tabId;
@@ -31,4 +105,36 @@ public int getTabId() {
 		return tabId;
 	}
 
-}
+	@NonNull
+	public List<String> getOriginalOrder() {
+		if (this == LEFT) {
+			return new ArrayList<>(originalLeftOrder);
+		} else if (this == RIGHT) {
+			return new ArrayList<>(originalRightOrder);
+		} else if (this == TOP) {
+			return new ArrayList<>(originalTopOrder);
+		} else {
+			return new ArrayList<>(originalBottomOrder);
+		}
+	}
+
+	public int getWidgetOrder(@NonNull String widgetId, @NonNull OsmandSettings settings) {
+		ListStringPreference orderPreference;
+		if (this == LEFT) {
+			orderPreference = settings.LEFT_WIDGET_PANEL_ORDER;
+		} else if (this == RIGHT) {
+			orderPreference = settings.RIGHT_WIDGET_PANEL_ORDER;
+		} else if (this == TOP) {
+			orderPreference = settings.TOP_WIDGET_PANEL_ORDER;
+		} else {
+			orderPreference = settings.BOTTOM_WIDGET_PANEL_ORDER;
+		}
+		List<String> orderIds = orderPreference.getStringsList();
+		if (Algorithms.isEmpty(orderIds)) {
+			return 0;
+		}
+
+		int order = orderIds.indexOf(widgetId);
+		return order == -1 ? orderIds.size() + 1 : order;
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CoordinatesWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CoordinatesWidget.java
index f7d3525694d..d3bb83047b1 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CoordinatesWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/CoordinatesWidget.java
@@ -55,7 +55,7 @@ protected int getLayoutId() {
 		return R.layout.coordinates_widget;
 	}
 
-	public CoordinatesWidget(@NonNull MapActivity mapActivity, @NonNull TextState textState) {
+	public CoordinatesWidget(@NonNull MapActivity mapActivity) {
 		super(mapActivity);
 
 		locationProvider = app.getLocationProvider();
@@ -71,7 +71,6 @@ public CoordinatesWidget(@NonNull MapActivity mapActivity, @NonNull TextState te
 
 		view.setOnClickListener(v -> copyCoordinates());
 		updateVisibility(false);
-		updateColors(textState);
 	}
 
 	private void copyCoordinates() {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/DistanceToPointWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/DistanceToPointWidget.java
index 6301010cf6b..3dfeccd8b22 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/DistanceToPointWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/DistanceToPointWidget.java
@@ -13,7 +13,7 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
-public abstract class DistanceToPointWidget extends TextInfoWidget {
+public abstract class DistanceToPointWidget extends RightTextInfoWidget {
 
 	private final OsmandMapTileView view;
 	private float[] calculations = new float[1];
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LanesWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LanesWidget.java
index 38f57aea225..a109de7a805 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LanesWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LanesWidget.java
@@ -1,5 +1,6 @@
 package net.osmand.plus.views.mapwidgets.widgets;
 
+import android.view.ViewGroup;
 import android.widget.ImageView;
 import android.widget.TextView;
 
@@ -43,7 +44,7 @@ public class LanesWidget extends MapWidget {
 	private int cachedDist;
 	private int shadowRadius;
 
-	public LanesWidget(@NonNull MapActivity mapActivity, @NonNull TextState textState) {
+	public LanesWidget(@NonNull MapActivity mapActivity) {
 		super(mapActivity);
 
 		routingHelper = mapActivity.getMyApplication().getRoutingHelper();
@@ -55,7 +56,6 @@ public LanesWidget(@NonNull MapActivity mapActivity, @NonNull TextState textStat
 		lanesDrawable = new LanesDrawable(mapActivity, mapActivity.getMapView().getScaleCoefficient());
 		lanesImage.setImageDrawable(lanesDrawable);
 
-		updateColors(textState);
 		updateVisibility(false);
 	}
 
@@ -163,4 +163,22 @@ public void updateColors(@NonNull TextState textState) {
 		updateTextColor(lanesText, lanesShadowText, textState.textColor,
 				textState.textShadowColor, textState.textBold, shadowRadius);
 	}
+
+	@Override
+	public void attachView(@NonNull ViewGroup container, int order, @NonNull List<MapWidget> followingWidgets) {
+		boolean specialPosition = true;
+		for (MapWidget widget : followingWidgets) {
+			if (widget instanceof CoordinatesWidget || widget instanceof StreetNameWidget) {
+				specialPosition = false;
+				break;
+			}
+		}
+		if (specialPosition) {
+			ViewGroup specialContainer = mapActivity.findViewById(R.id.lanes_widget_special_position);
+			specialContainer.removeAllViews();
+			specialContainer.addView(view);
+		} else {
+			container.addView(view, order);
+		}
+	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LeftTextInfoWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LeftTextInfoWidget.java
new file mode 100644
index 00000000000..4ab1a18f226
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/LeftTextInfoWidget.java
@@ -0,0 +1,19 @@
+package net.osmand.plus.views.mapwidgets.widgets;
+
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.views.layers.MapInfoLayer.TextState;
+
+import androidx.annotation.NonNull;
+
+public class LeftTextInfoWidget extends TextInfoWidget {
+
+	public LeftTextInfoWidget(@NonNull MapActivity mapActivity) {
+		super(mapActivity);
+	}
+
+	@Override
+	public void updateColors(@NonNull TextState textState) {
+		super.updateColors(textState);
+		view.setBackgroundResource(textState.leftRes);
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkerSideWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkerSideWidget.java
index 295ec9f3dcc..84bfdc245c2 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkerSideWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapMarkerSideWidget.java
@@ -20,7 +20,7 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
-public class MapMarkerSideWidget extends TextInfoWidget {
+public class MapMarkerSideWidget extends RightTextInfoWidget {
 
 	private final MapMarkersHelper mapMarkersHelper;
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
index fceb44cd2b2..286063c94e7 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/MapWidget.java
@@ -3,6 +3,7 @@
 import android.graphics.Paint.Style;
 import android.graphics.Typeface;
 import android.view.View;
+import android.view.ViewGroup;
 import android.widget.TextView;
 
 import net.osmand.plus.OsmandApplication;
@@ -13,6 +14,8 @@
 import net.osmand.plus.views.layers.MapInfoLayer.TextState;
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 
+import java.util.List;
+
 import androidx.annotation.ColorInt;
 import androidx.annotation.LayoutRes;
 import androidx.annotation.NonNull;
@@ -47,6 +50,10 @@ public View getView() {
 		return view;
 	}
 
+	public void attachView(@NonNull ViewGroup container, int order, @NonNull List<MapWidget> followingWidgets) {
+		container.addView(view);
+	}
+
 	public boolean isNightMode() {
 		return nightMode;
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnWidget.java
index 8b639ee7845..248da361955 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/NextTurnWidget.java
@@ -21,7 +21,7 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
-public class NextTurnWidget extends TextInfoWidget {
+public class NextTurnWidget extends LeftTextInfoWidget {
 
 	protected boolean horizontalMini;
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RightTextInfoWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RightTextInfoWidget.java
new file mode 100644
index 00000000000..f11515a5553
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/RightTextInfoWidget.java
@@ -0,0 +1,19 @@
+package net.osmand.plus.views.mapwidgets.widgets;
+
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.plus.views.layers.MapInfoLayer.TextState;
+
+import androidx.annotation.NonNull;
+
+public class RightTextInfoWidget extends TextInfoWidget {
+
+	public RightTextInfoWidget(@NonNull MapActivity mapActivity) {
+		super(mapActivity);
+	}
+
+	@Override
+	public void updateColors(@NonNull TextState textState) {
+		super.updateColors(textState);
+		view.setBackgroundResource(textState.rightRes);
+	}
+}
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/StreetNameWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/StreetNameWidget.java
index 4857706a581..65981fad22c 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/StreetNameWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/StreetNameWidget.java
@@ -41,6 +41,8 @@
 import net.osmand.render.RenderingRulesStorage;
 import net.osmand.util.Algorithms;
 
+import java.util.List;
+
 import androidx.annotation.ColorRes;
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
@@ -74,7 +76,7 @@ protected int getLayoutId() {
 		return R.layout.street_name_widget;
 	}
 
-	public StreetNameWidget(@NonNull MapActivity mapActivity, @NonNull TextState textState) {
+	public StreetNameWidget(@NonNull MapActivity mapActivity) {
 		super(mapActivity);
 
 		waypointHelper = app.getWaypointHelper();
@@ -89,7 +91,6 @@ public StreetNameWidget(@NonNull MapActivity mapActivity, @NonNull TextState tex
 		turnDrawable = new TurnDrawable(mapActivity, true);
 
 		updateVisibility(false);
-		updateColors(textState);
 	}
 
 	@Override
@@ -343,6 +344,26 @@ protected boolean updateVisibility(boolean visible) {
 		return updatedVisibility;
 	}
 
+	@Override
+	public void attachView(@NonNull ViewGroup container, int order, @NonNull List<MapWidget> followingWidgets) {
+		ViewGroup specialContainer = mapActivity.findViewById(R.id.street_name_widget_special_container);
+		boolean specialPosition = specialContainer != null;
+		if (specialPosition) {
+			for (MapWidget widget : followingWidgets) {
+				if (widget instanceof CoordinatesWidget) {
+					specialPosition = false;
+					break;
+				}
+			}
+		}
+		if (specialPosition) {
+			specialContainer.removeAllViews();
+			specialContainer.addView(view);
+		} else {
+			container.addView(view, order);
+		}
+	}
+
 	private static class StreetNameWidgetParams {
 
 		private final OsmandApplication app;
