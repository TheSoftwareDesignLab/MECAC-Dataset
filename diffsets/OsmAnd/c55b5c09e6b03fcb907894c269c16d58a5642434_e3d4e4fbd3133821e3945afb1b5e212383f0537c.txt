diff --git a/OsmAnd/src/net/osmand/plus/views/layers/RadiusRulerControlLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/RadiusRulerControlLayer.java
index 39cac830c6e..563af7cd1e3 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/RadiusRulerControlLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/RadiusRulerControlLayer.java
@@ -196,7 +196,7 @@ public void onDraw(Canvas canvas, RotatedTileBox tb, DrawSettings drawSettings)
 
 	public boolean rulerModeOn() {
 		MapWidgetRegistry mapWidgetRegistry = getApplication().getOsmandMap().getMapLayers().getMapWidgetRegistry();
-		return mapWidgetRegistry.isWidgetOrAnyDuplicateVisible(RADIUS_RULER.id)
+		return mapWidgetRegistry.isAnyWidgetOfTypeVisible(RADIUS_RULER)
 				&& (rightWidgetsPanel == null || rightWidgetsPanel.getVisibility() == View.VISIBLE);
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
index e4a3ffe272c..895227bba55 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
@@ -95,6 +95,11 @@ public boolean isIconPainted() {
 		return false;
 	}
 
+	@NonNull
+	public WidgetType getWidgetType() {
+		return widget.getWidgetType();
+	}
+
 	@NonNull
 	public String getTitle(@NonNull Context ctx) {
 		String message = getMessage();
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
index c208aa0112b..9631dedf876 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
@@ -136,9 +136,9 @@ public void clearWidgets() {
 		notifyWidgetsCleared();
 	}
 
-	public boolean isWidgetOrAnyDuplicateVisible(@NonNull String originalWidgetId) {
+	public boolean isAnyWidgetOfTypeVisible(@NonNull WidgetType widgetType) {
 		ApplicationMode appMode = settings.getApplicationMode();
-		List<MapWidgetInfo> widgets = getWidgetAndDuplicatesInfo(originalWidgetId);
+		List<MapWidgetInfo> widgets = getWidgetInfoForType(widgetType);
 		for (MapWidgetInfo widgetInfo : widgets) {
 			if (widgetInfo.isEnabledForAppMode(appMode)) {
 				return true;
@@ -229,10 +229,10 @@ private void reorderWidgets(@NonNull List<MapWidgetInfo> widgetInfos) {
 	}
 
 	@NonNull
-	public List<MapWidgetInfo> getWidgetAndDuplicatesInfo(@NonNull String originalWidgetId) {
+	public List<MapWidgetInfo> getWidgetInfoForType(@NonNull WidgetType widgetType) {
 		List<MapWidgetInfo> widgets = new ArrayList<>();
 		for (MapWidgetInfo widgetInfo : getAllWidgets()) {
-			if (widgetInfo.key != null && widgetInfo.key.startsWith(originalWidgetId)) {
+			if (widgetInfo.getWidgetType() == widgetType) {
 				widgets.add(widgetInfo);
 			}
 		}
