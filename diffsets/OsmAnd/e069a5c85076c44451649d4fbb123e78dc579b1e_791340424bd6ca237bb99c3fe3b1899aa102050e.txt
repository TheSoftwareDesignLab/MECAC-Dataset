diff --git a/DataExtractionOSM/src/net/osmand/data/preparation/IndexCreator.java b/DataExtractionOSM/src/net/osmand/data/preparation/IndexCreator.java
index 18edf5ee0b6..4f55fa1e019 100644
--- a/DataExtractionOSM/src/net/osmand/data/preparation/IndexCreator.java
+++ b/DataExtractionOSM/src/net/osmand/data/preparation/IndexCreator.java
@@ -1565,7 +1565,7 @@ private void writeBinaryEntityToMapDatabase(Entity e, long baseId, boolean inver
 		int zoom;
 		long id = (baseId << 3) | ((level & 3) << 1);
 		rtree = mapTree[level];
-		zoom = MAP_ZOOMS[MAP_ZOOMS.length - level - 1];
+		zoom = MAP_ZOOMS[MAP_ZOOMS.length - level - 1] - 1;
 		boolean skip = false;
 		if (e instanceof Way) {
 			id |= 1;
@@ -2537,8 +2537,8 @@ public static void main(String[] args) throws IOException, SAXException, SQLExce
 //		 creator.setNodesDBFile(new File("e:/Information/OSM maps/osmand/minsk.tmp.odb"));
 //		 creator.generateIndexes(new File("e:/Information/OSM maps/belarus osm/minsk.osm"), new ConsoleProgressImplementation(3), null);
 
-		 creator.setNodesDBFile(new File("e:/Information/OSM maps/osmand/belarus_nodes.tmp.odb"));
-		 creator.generateIndexes(new File("e:/Information/OSM maps/belarus osm/belarus.osm.pbf"), new ConsoleProgressImplementation(3), null);
+//		 creator.setNodesDBFile(new File("e:/Information/OSM maps/osmand/belarus_nodes.tmp.odb"));
+//		 creator.generateIndexes(new File("e:/Information/OSM maps/belarus osm/belarus.osm.pbf"), new ConsoleProgressImplementation(3), null);
 		 
 //		 creator.setNodesDBFile(new File("e:/Information/OSM maps/osmand/ams.tmp.odb"));
 //		 creator.generateIndexes(new File("e:/Information/OSM maps/osm_map/ams_part_map.osm"), new ConsoleProgressImplementation(3), null);
@@ -2555,6 +2555,7 @@ public static void main(String[] args) throws IOException, SAXException, SQLExce
 //		 creator.generateIndexes(new File("e:/Information/OSM maps/osm_map/luxembourg.osm.pbf"), new ConsoleProgressImplementation(15), null);
 		 
 //		 creator.generateIndexes(new File("e:/Information/OSM maps/osm_map/new_zealand.osm.bz2"), new ConsoleProgressImplementation(3), null);
+		 creator.generateIndexes(new File("e:/Information/OSM maps/osm_map/map.osm"), new ConsoleProgressImplementation(15), null);
 
 		 System.out.println("WHOLE GENERATION TIME :  " + (System.currentTimeMillis() - time));
 		 System.out.println("COORDINATES_SIZE " + BinaryMapIndexWriter.COORDINATES_SIZE + " count " + BinaryMapIndexWriter.COORDINATES_COUNT);
diff --git a/DataExtractionOSM/src/net/osmand/osm/Entity.java b/DataExtractionOSM/src/net/osmand/osm/Entity.java
index 3a7533dcbd2..5401fa1e7ed 100644
--- a/DataExtractionOSM/src/net/osmand/osm/Entity.java
+++ b/DataExtractionOSM/src/net/osmand/osm/Entity.java
@@ -148,6 +148,11 @@ public boolean isVirtual(){
 		return id < 0;
 	}
 
+	
+	@Override
+	public String toString() {
+		return EntityId.valueOf(this).toString();
+	}
 	@Override
 	public int hashCode() {
 		if (id < 0) {
diff --git a/DataExtractionOSM/src/net/osmand/osm/MapRenderingTypes.java b/DataExtractionOSM/src/net/osmand/osm/MapRenderingTypes.java
index f63f6b03d3f..e3a6539efb4 100644
--- a/DataExtractionOSM/src/net/osmand/osm/MapRenderingTypes.java
+++ b/DataExtractionOSM/src/net/osmand/osm/MapRenderingTypes.java
@@ -758,7 +758,11 @@ private static void stepSubtype(int st, int minZoom, String tag, String val, int
 			}
 		} else if(st == INIT_TYPE_ZOOM){
 			if(minZoom < 15){
-				objectsToMinZoom.put((((subtype) << 5) | type) << 2, (byte) minZoom);
+				int value = (((subtype) << 5) | type) << 2;
+				if(!objectsToMinZoom.containsKey(value)){
+					// add only first
+					objectsToMinZoom.put(value, (byte) minZoom);
+				}
 			}
 		}
 	}
diff --git a/OsmAnd/src/net/osmand/render/OsmandRenderer.java b/OsmAnd/src/net/osmand/render/OsmandRenderer.java
index 5d641ebd5fe..090c48839ab 100644
--- a/OsmAnd/src/net/osmand/render/OsmandRenderer.java
+++ b/OsmAnd/src/net/osmand/render/OsmandRenderer.java
@@ -36,12 +36,15 @@
 import android.graphics.Shader;
 import android.graphics.Typeface;
 import android.graphics.Bitmap.Config;
+import android.graphics.BitmapFactory.Options;
 import android.graphics.Paint.Align;
 import android.graphics.Paint.Cap;
 import android.graphics.Paint.Style;
 import android.graphics.Shader.TileMode;
 import android.text.TextPaint;
+import android.util.DisplayMetrics;
 import android.util.FloatMath;
+import android.view.WindowManager;
 
 public class OsmandRenderer {
 	private static final Log log = LogUtil.getLog(OsmandRenderer.class);
@@ -63,7 +66,7 @@ public class OsmandRenderer {
 	private final Context context;
 
 	private BaseOsmandRender render;
-
+	private DisplayMetrics dm;
 	
 	private static class TextDrawInfo {
 		
@@ -231,6 +234,9 @@ public OsmandRenderer(Context context) {
 		paintFillEmpty.setStyle(Style.FILL);
 		paintFillEmpty.setColor(clFillScreen);
 		render = RendererRegistry.getRegistry().defaultRender();
+		dm = new DisplayMetrics();
+		WindowManager wmgr = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
+		wmgr.getDefaultDisplay().getMetrics(dm);
 	}
 	
 	public PathEffect getDashEffect(String dashes){
@@ -334,14 +340,35 @@ public Bitmap generateNewBitmap(RenderingContext rc, List<BinaryMapDataObject> o
 					return null;
 				}
 			}
+			
+			int skewConstant = 16;
+			
+			int iconsW = rc.width / skewConstant ;
+			int iconsH = rc.height / skewConstant;
+			int[] alreadyDrawnIcons = new int[iconsW * iconsH / 32];
 			for(IconDrawInfo icon : rc.iconsToDraw){
-				if(icon.resId != 0){
-					if(cachedIcons.get(icon.resId) == null){
+				if (icon.resId != 0) {
+					if (cachedIcons.get(icon.resId) == null) {
+						Options options = new BitmapFactory.Options();
+						options.inScaled = false;
 						cachedIcons.put(icon.resId, BitmapFactory.decodeResource(context.getResources(), icon.resId));
 					}
 					Bitmap ico = cachedIcons.get(icon.resId);
-					if (ico  != null) {
-						cv.drawBitmap(ico, icon.x - ico.getWidth() / 2, icon.y - ico.getHeight() / 2, paintIcon);
+					if (ico != null) {
+						if (icon.y >= 0 && icon.y < rc.height && icon.x >= 0 && icon.x < rc.width) {
+							int z = (((int) icon.x / skewConstant) + ((int) icon.y / skewConstant) * iconsW);
+							int i = z / 32;
+							if (i >= alreadyDrawnIcons.length) {
+								continue;
+							}
+							int ind = alreadyDrawnIcons[i];
+							int b = z % 32;
+							// check bit b if it is set
+							if (((ind >> b) & 1) == 0) {
+								alreadyDrawnIcons[i] = ind | (1 << b);
+								cv.drawBitmap(ico, icon.x - ico.getWidth() / 2, icon.y - ico.getHeight() / 2, paintIcon);
+							}
+						}
 					}
 				}
 				if(rc.interrupted){
@@ -381,7 +408,7 @@ public int compare(RectF object1, RectF object2) {
 					text.text = Junidecode.unidecode(text.text);
 				}
 				RectF bounds = new RectF();
-				paintText.setTextSize(text.textSize);
+				paintText.setTextSize(text.textSize * dm.density);
 				paintText.setFakeBoldText(text.bold);
 				float mes = paintText.measureText(text.text);
 				if(text.drawOnPath == null || 
