diff --git a/OsmAnd/res/layout/card_coloring_type.xml b/OsmAnd/res/layout/card_coloring_type.xml
new file mode 100644
index 00000000000..534dd93d3ab
--- /dev/null
+++ b/OsmAnd/res/layout/card_coloring_type.xml
@@ -0,0 +1,103 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:osmand="http://schemas.android.com/apk/res-auto"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content"
+	android:orientation="vertical"
+	android:paddingHorizontal="@dimen/content_padding">
+
+	<net.osmand.plus.widgets.TextViewEx
+		android:id="@+id/description"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:gravity="start"
+		android:letterSpacing="@dimen/description_letter_spacing"
+		android:paddingTop="@dimen/content_padding_small"
+		android:paddingBottom="@dimen/content_padding_half"
+		android:textColor="?android:textColorSecondary"
+		android:textSize="@dimen/default_desc_text_size"
+		osmand:typeface="@string/font_roboto_regular"
+		tools:text="Specify color for map mode: day." />
+
+	<View
+		android:id="@+id/upper_space"
+		android:layout_width="match_parent"
+		android:layout_height="@dimen/content_padding" />
+
+	<LinearLayout
+		android:id="@+id/speed_altitude_legend"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:orientation="vertical"
+		android:visibility="gone"
+		tools:visibility="visible">
+
+		<View
+			android:layout_width="match_parent"
+			android:layout_height="@dimen/pages_item_size"
+			android:layout_marginBottom="@dimen/content_padding_half"
+			android:background="@drawable/bg_track_gradient" />
+
+		<LinearLayout
+			android:layout_width="match_parent"
+			android:layout_height="wrap_content"
+			android:orientation="horizontal">
+
+			<net.osmand.plus.widgets.TextViewEx
+				android:id="@+id/min_value"
+				android:layout_width="0dp"
+				android:layout_height="wrap_content"
+				android:layout_weight="1"
+				android:textColor="?attr/main_font_color_basic"
+				android:textSize="@dimen/default_list_text_size"
+				osmand:typeface="@string/font_roboto_regular"
+				tools:text="100 m"/>
+
+			<net.osmand.plus.widgets.TextViewEx
+				android:id="@+id/max_value"
+				android:layout_width="0dp"
+				android:layout_height="wrap_content"
+				android:layout_weight="1"
+				android:gravity="end"
+				android:textColor="?attr/main_font_color_basic"
+				android:textSize="@dimen/default_list_text_size"
+				osmand:typeface="@string/font_roboto_regular"
+				tools:text="100 m"/>
+
+		</LinearLayout>
+
+	</LinearLayout>
+
+	<LinearLayout
+		android:id="@+id/slope_legend"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:orientation="vertical"
+		android:visibility="gone"
+		tools:visibility="visible">
+
+		<androidx.appcompat.widget.AppCompatImageView
+			android:layout_width="match_parent"
+			android:layout_height="wrap_content"
+			android:adjustViewBounds="true"
+			osmand:srcCompat="@drawable/img_legend_route_slope" />
+
+	</LinearLayout>
+
+	<net.osmand.plus.widgets.TextViewEx
+		android:id="@+id/grey_color_description"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:layout_marginTop="@dimen/content_padding_half"
+		android:text="@string/grey_color_undefined"
+		android:textColor="?android:attr/textColorSecondary"
+		android:textSize="@dimen/default_desc_text_size"
+		osmand:typeface="@string/font_roboto_regular" />
+
+	<View
+		android:id="@+id/bottom_space"
+		android:layout_width="match_parent"
+		android:layout_height="@dimen/gpx_small_text_margin" />
+
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/card/base/multistate/IMultiStateCardController.java b/OsmAnd/src/net/osmand/plus/card/base/multistate/IMultiStateCardController.java
index 27f5de294f7..874b2db63f9 100644
--- a/OsmAnd/src/net/osmand/plus/card/base/multistate/IMultiStateCardController.java
+++ b/OsmAnd/src/net/osmand/plus/card/base/multistate/IMultiStateCardController.java
@@ -1,9 +1,9 @@
 package net.osmand.plus.card.base.multistate;
 
-import android.view.LayoutInflater;
 import android.view.ViewGroup;
 
 import androidx.annotation.NonNull;
+import androidx.fragment.app.FragmentActivity;
 
 import net.osmand.plus.widgets.popup.PopUpMenuItem;
 
@@ -24,5 +24,5 @@ public interface IMultiStateCardController {
 
 	boolean onMenuItemSelected(@NonNull PopUpMenuItem item);
 
-	void onBindStateRelatedContent(@NonNull LayoutInflater layoutInflater, @NonNull ViewGroup container);
+	void onBindContentView(@NonNull FragmentActivity activity, @NonNull ViewGroup container);
 }
diff --git a/OsmAnd/src/net/osmand/plus/card/base/multistate/MultiStateCard.java b/OsmAnd/src/net/osmand/plus/card/base/multistate/MultiStateCard.java
index dc3124989e6..02df1a1cc79 100644
--- a/OsmAnd/src/net/osmand/plus/card/base/multistate/MultiStateCard.java
+++ b/OsmAnd/src/net/osmand/plus/card/base/multistate/MultiStateCard.java
@@ -71,7 +71,7 @@ private void updateStateSelectorTitle() {
 	private void updateStateRelatedContent() {
 		ViewGroup contentContainer = view.findViewById(R.id.content);
 		contentContainer.removeAllViews();
-		cardController.onBindStateRelatedContent(themedInflater, contentContainer);
+		cardController.onBindContentView(activity, contentContainer);
 	}
 
 	private void showStateSelectionMenu() {
diff --git a/OsmAnd/src/net/osmand/plus/card/color/ColorTypeCard.java b/OsmAnd/src/net/osmand/plus/card/color/ColorTypeCard.java
new file mode 100644
index 00000000000..37f3829cd51
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/card/color/ColorTypeCard.java
@@ -0,0 +1,63 @@
+package net.osmand.plus.card.color;
+
+import android.widget.TextView;
+
+import androidx.annotation.NonNull;
+import androidx.fragment.app.FragmentActivity;
+
+import net.osmand.plus.R;
+import net.osmand.plus.routepreparationmenu.cards.BaseCard;
+
+public class ColorTypeCard extends BaseCard {
+
+	private final IColorTypeCardController controller;
+
+	public ColorTypeCard(@NonNull FragmentActivity activity,
+	                     @NonNull IColorTypeCardController controller) {
+		super(activity);
+		this.controller = controller;
+		controller.bindCard(this);
+	}
+
+	@Override
+	public int getCardLayoutId() {
+		return R.layout.card_coloring_type;
+	}
+
+	@Override
+	protected void updateContent() {
+		if (controller.shouldHideCard()) {
+			updateVisibility(false);
+			return;
+		}
+		updateVisibility(true);
+
+		updateVisibility(R.id.upper_space, controller.shouldShowUpperSpace());
+		updateVisibility(R.id.bottom_space, controller.shouldShowBottomSpace());
+
+		updateVisibility(R.id.slope_legend, controller.shouldShowSlopeLegend());
+		updateVisibility(R.id.speed_altitude_legend, controller.shouldShowSpeedAltitudeLegend());
+
+		updateDescription();
+		updateLegend();
+	}
+
+	private void updateDescription() {
+		TextView tvDescription = view.findViewById(R.id.description);
+		String description = controller.getTypeDescription();
+		if (description != null) {
+			tvDescription.setText(description);
+		}
+		updateVisibility(tvDescription, description != null);
+	}
+
+	private void updateLegend() {
+		CharSequence[] legendHeadlines = controller.getLegendHeadlines();
+		if (legendHeadlines != null) {
+			TextView minValue = view.findViewById(R.id.min_value);
+			TextView maxValue = view.findViewById(R.id.max_value);
+			minValue.setText(legendHeadlines[0]);
+			maxValue.setText(legendHeadlines[1]);
+		}
+	}
+}
diff --git a/OsmAnd/src/net/osmand/plus/card/color/ColorTypeCardController.java b/OsmAnd/src/net/osmand/plus/card/color/ColorTypeCardController.java
new file mode 100644
index 00000000000..77b3306452a
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/card/color/ColorTypeCardController.java
@@ -0,0 +1,131 @@
+package net.osmand.plus.card.color;
+
+import android.text.Spannable;
+import android.text.SpannableString;
+import android.text.style.ForegroundColorSpan;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+import net.osmand.gpx.GPXTrackAnalysis;
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.R;
+import net.osmand.plus.routing.ColoringType;
+import net.osmand.plus.settings.backend.ApplicationMode;
+import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.OsmAndFormatter;
+import net.osmand.router.RouteColorize;
+import net.osmand.router.RouteColorize.ColorizationType;
+
+public class ColorTypeCardController implements IColorTypeCardController {
+
+	protected final OsmandApplication app;
+	protected final GPXTrackAnalysis trackAnalysis;
+	protected ColoringInfo coloringInfo;
+	protected ColorTypeCard card;
+
+	public ColorTypeCardController(@NonNull OsmandApplication app,
+	                               @NonNull ColoringInfo coloringInfo,
+	                               @Nullable GPXTrackAnalysis trackAnalysis) {
+		this.app = app;
+		this.coloringInfo = coloringInfo;
+		this.trackAnalysis = trackAnalysis;
+	}
+
+	@Override
+	public void bindCard(@NonNull ColorTypeCard card) {
+		this.card = card;
+	}
+
+	public void setColoringInfo(@NonNull ColoringInfo coloringInfo) {
+		this.coloringInfo = coloringInfo;
+		if (card != null) {
+			card.updateContent();
+		}
+	}
+
+	@Override
+	public boolean shouldHideCard() {
+		return coloringInfo.getColoringType().isSolidSingleColor();
+	}
+
+	@Override
+	public boolean shouldShowUpperSpace() {
+		ColoringType coloringType = coloringInfo.getColoringType();
+		return trackAnalysis == null || !coloringType.isRouteInfoAttribute() || coloringType == ColoringType.ALTITUDE;
+	}
+
+	@Override
+	public boolean shouldShowBottomSpace() {
+		return trackAnalysis != null;
+	}
+
+	@Override
+	public boolean shouldShowSpeedAltitudeLegend() {
+		ColoringType coloringType = coloringInfo.getColoringType();
+		return coloringType == ColoringType.ALTITUDE || coloringType == ColoringType.SPEED;
+	}
+
+	@Override
+	public boolean shouldShowSlopeLegend() {
+		return coloringInfo.getColoringType() == ColoringType.SLOPE;
+	}
+
+	@Nullable
+	@Override
+	public String getTypeDescription() {
+		return null;
+	}
+
+	@Nullable
+	@Override
+	public CharSequence[] getLegendHeadlines() {
+		ColoringType coloringType = coloringInfo.getColoringType();
+		if (isLegendDataSpecified() && coloringType.toGradientScaleType() != null) {
+			ApplicationMode appMode = app.getSettings().getApplicationMode();
+			ColorizationType colorizationType = coloringType.toGradientScaleType().toColorizationType();
+			double min = RouteColorize.getMinValue(colorizationType, trackAnalysis);
+			double max = RouteColorize.getMaxValue(colorizationType, trackAnalysis, min, appMode.getMaxSpeed());
+			return new CharSequence[] { formatValue(min), formatValue(max) };
+		} else if (coloringType == ColoringType.SPEED) {
+			return new CharSequence[] {
+					app.getString(R.string.shared_string_min_speed),
+					app.getString(R.string.shared_string_max_speed)
+			};
+		} else if (coloringType == ColoringType.ALTITUDE) {
+			return new CharSequence[] {
+					app.getString(R.string.shared_string_min_height),
+					app.getString(R.string.shared_string_max_height)
+			};
+		}
+		return null;
+	}
+
+	private boolean isLegendDataSpecified() {
+		ColoringType coloringType = coloringInfo.getColoringType();
+		if (trackAnalysis != null) {
+			boolean useElevationData = coloringType == ColoringType.ALTITUDE && trackAnalysis.isElevationSpecified();
+			boolean useSpeedData = coloringType == ColoringType.SPEED && trackAnalysis.isSpeedSpecified();
+			return useElevationData || useSpeedData;
+		}
+		return false;
+	}
+
+	@NonNull
+	private CharSequence formatValue(double value) {
+		ColoringType coloringType = coloringInfo.getColoringType();
+		if (coloringType == ColoringType.ALTITUDE) {
+			return OsmAndFormatter.getFormattedAlt(value, app);
+		} else if (coloringType == ColoringType.SLOPE) {
+			value *= 100; // slope value in the range 0..1
+			return app.getString(R.string.ltr_or_rtl_combine_via_space, String.valueOf((int) value), "%");
+		}
+		String speed = OsmAndFormatter.getFormattedSpeed((float) value, app);
+		String speedUnit = app.getSettings().SPEED_SYSTEM.get().toShortString(app);
+		Spannable formattedSpeed = new SpannableString(speed);
+		formattedSpeed.setSpan(
+				new ForegroundColorSpan(AndroidUtils.getColorFromAttr(app, android.R.attr.textColorSecondary)),
+				speed.indexOf(speedUnit), speed.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
+		return formattedSpeed;
+	}
+}
diff --git a/OsmAnd/src/net/osmand/plus/card/color/ColoringTypeWrapper.java b/OsmAnd/src/net/osmand/plus/card/color/ColoringInfo.java
similarity index 77%
rename from OsmAnd/src/net/osmand/plus/card/color/ColoringTypeWrapper.java
rename to OsmAnd/src/net/osmand/plus/card/color/ColoringInfo.java
index d60945489c6..2924e264d4e 100644
--- a/OsmAnd/src/net/osmand/plus/card/color/ColoringTypeWrapper.java
+++ b/OsmAnd/src/net/osmand/plus/card/color/ColoringInfo.java
@@ -12,21 +12,30 @@
 
 import java.util.Objects;
 
-public class ColoringTypeWrapper {
+public class ColoringInfo {
 
 	private final ColoringType coloringType;
 	private final String routeInfoAttribute;
 
-	public ColoringTypeWrapper(@NonNull ColoringType coloringType) {
+	public ColoringInfo(@NonNull ColoringType coloringType) {
 		this(coloringType, null);
 	}
 
-	public ColoringTypeWrapper(@NonNull ColoringType coloringType,
-	                           @Nullable String routeInfoAttribute) {
+	public ColoringInfo(@NonNull ColoringType coloringType, @Nullable String routeInfoAttribute) {
 		this.coloringType = coloringType;
 		this.routeInfoAttribute = routeInfoAttribute;
 	}
 
+	@NonNull
+	public ColoringType getColoringType() {
+		return coloringType;
+	}
+
+	@Nullable
+	public String getRouteInfoAttribute() {
+		return routeInfoAttribute;
+	}
+
 	@NonNull
 	public String toHumanString(@NonNull Context context) {
 		return coloringType == ColoringType.ATTRIBUTE
@@ -46,9 +55,9 @@ private String getRouteInfoAttributeName(@NonNull Context context) {
 	@Override
 	public boolean equals(Object o) {
 		if (this == o) return true;
-		if (!(o instanceof ColoringTypeWrapper)) return false;
+		if (!(o instanceof ColoringInfo)) return false;
 
-		ColoringTypeWrapper that = (ColoringTypeWrapper) o;
+		ColoringInfo that = (ColoringInfo) o;
 		if (coloringType != that.coloringType) return false;
 		return Objects.equals(routeInfoAttribute, that.routeInfoAttribute);
 	}
diff --git a/OsmAnd/src/net/osmand/plus/card/color/ColorsCardController.java b/OsmAnd/src/net/osmand/plus/card/color/ColorsCardController.java
index 296cb061696..45365b4f040 100644
--- a/OsmAnd/src/net/osmand/plus/card/color/ColorsCardController.java
+++ b/OsmAnd/src/net/osmand/plus/card/color/ColorsCardController.java
@@ -28,45 +28,45 @@ public String getCardTitle() {
 	@NonNull
 	@Override
 	public String getMenuButtonTitle() {
-		return getSelectedColoringType().toHumanString(app);
+		return getSelectedColoring().toHumanString(app);
 	}
 
 	@Override
 	public boolean shouldShowMenuButton() {
-		return getSupportedColoringTypes().size() > 1;
+		return getSupportedColorings().size() > 1;
 	}
 
 	@NonNull
 	@Override
 	public List<PopUpMenuItem> getMenuItems() {
 		List<PopUpMenuItem> menuItems = new ArrayList<>();
-		for (ColoringTypeWrapper coloringType : getSupportedColoringTypes()) {
+		for (ColoringInfo coloringInfo : getSupportedColorings()) {
 			menuItems.add(new PopUpMenuItem.Builder(app)
-					.setTitle(coloringType.toHumanString(app))
-					.showTopDivider(shouldShowTopDivider(coloringType))
-					.setTag(coloringType)
+					.setTitle(coloringInfo.toHumanString(app))
+					.showTopDivider(shouldShowTopDivider(coloringInfo))
+					.setTag(coloringInfo)
 					.create()
 			);
 		}
 		return menuItems;
 	}
 
-	protected abstract boolean shouldShowTopDivider(@NonNull ColoringTypeWrapper coloringType);
+	protected abstract boolean shouldShowTopDivider(@NonNull ColoringInfo coloringInfo);
 
 	@NonNull
-	protected abstract ColoringTypeWrapper getSelectedColoringType();
+	protected abstract ColoringInfo getSelectedColoring();
 
-	protected abstract void setSelectedColoringType(@NonNull ColoringTypeWrapper coloringType);
+	protected abstract void setSelectedColoring(@NonNull ColoringInfo coloringInfo);
 
 	@NonNull
-	protected abstract List<ColoringTypeWrapper> getSupportedColoringTypes();
+	protected abstract List<ColoringInfo> getSupportedColorings();
 
 	@Override
 	public boolean onMenuItemSelected(@NonNull PopUpMenuItem item) {
-		ColoringTypeWrapper selectedColoringType = getSelectedColoringType();
-		ColoringTypeWrapper coloringType = (ColoringTypeWrapper) item.getTag();
-		if (!Objects.equals(selectedColoringType, coloringType)) {
-			setSelectedColoringType(coloringType);
+		ColoringInfo selectedColoring = getSelectedColoring();
+		ColoringInfo newColoring = (ColoringInfo) item.getTag();
+		if (!Objects.equals(selectedColoring, newColoring)) {
+			setSelectedColoring(newColoring);
 			return true;
 		}
 		return false;
diff --git a/OsmAnd/src/net/osmand/plus/card/color/IColorTypeCardController.java b/OsmAnd/src/net/osmand/plus/card/color/IColorTypeCardController.java
new file mode 100644
index 00000000000..ed09e3abd38
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/card/color/IColorTypeCardController.java
@@ -0,0 +1,25 @@
+package net.osmand.plus.card.color;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+public interface IColorTypeCardController {
+
+	void bindCard(@NonNull ColorTypeCard card);
+
+	boolean shouldHideCard();
+
+	boolean shouldShowUpperSpace();
+
+	boolean shouldShowBottomSpace();
+
+	boolean shouldShowSpeedAltitudeLegend();
+
+	boolean shouldShowSlopeLegend();
+
+	@Nullable
+	String getTypeDescription();
+
+	@Nullable
+	CharSequence[] getLegendHeadlines();
+}
diff --git a/OsmAnd/src/net/osmand/plus/routepreparationmenu/cards/BaseCard.java b/OsmAnd/src/net/osmand/plus/routepreparationmenu/cards/BaseCard.java
index d765df77d54..ad71f8202e7 100644
--- a/OsmAnd/src/net/osmand/plus/routepreparationmenu/cards/BaseCard.java
+++ b/OsmAnd/src/net/osmand/plus/routepreparationmenu/cards/BaseCard.java
@@ -195,7 +195,17 @@ public void setTransparentBackground(boolean transparentBackground) {
 		this.transparentBackground = transparentBackground;
 	}
 
+	public void updateVisibility(int viewId, boolean show) {
+		if (view != null) {
+			updateVisibility(view.findViewById(viewId), show);
+		}
+	}
+
 	public void updateVisibility(boolean show) {
+		updateVisibility(view, show);
+	}
+
+	public void updateVisibility(@Nullable View view, boolean show) {
 		AndroidUiHelper.updateVisibility(view, show);
 	}
 
