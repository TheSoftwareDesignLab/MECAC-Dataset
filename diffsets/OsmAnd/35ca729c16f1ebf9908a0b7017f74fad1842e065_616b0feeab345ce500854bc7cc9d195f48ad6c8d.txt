diff --git a/OsmAnd/src/net/osmand/aidl/ConnectedApp.java b/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
index 51f0db9cc22..1763537e58b 100644
--- a/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
+++ b/OsmAnd/src/net/osmand/aidl/ConnectedApp.java
@@ -8,9 +8,6 @@
 import android.view.View;
 import android.widget.CompoundButton;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.activities.MapActivity;
@@ -23,7 +20,6 @@
 import net.osmand.plus.views.layers.base.OsmandMapLayer.DrawSettings;
 import net.osmand.plus.views.mapwidgets.WidgetsPanel;
 import net.osmand.plus.views.mapwidgets.widgets.RightTextInfoWidget;
-import net.osmand.plus.views.layers.base.OsmandMapLayer;
 import net.osmand.plus.views.mapwidgets.widgets.TextInfoWidget;
 import net.osmand.plus.widgets.ctxmenu.ContextMenuAdapter;
 import net.osmand.plus.widgets.ctxmenu.callback.ItemClickListener;
@@ -37,11 +33,10 @@
 import java.util.Map;
 import java.util.concurrent.ConcurrentHashMap;
 
-import static net.osmand.aidlapi.OsmAndCustomizationConstants.CONFIGURE_MAP_ITEM_ID_SCHEME;
-
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 
+import static net.osmand.aidl.OsmandAidlApi.WIDGET_ID_PREFIX;
 import static net.osmand.aidlapi.OsmAndCustomizationConstants.CONFIGURE_MAP_ITEM_ID_SCHEME;
 
 public class ConnectedApp implements Comparable<ConnectedApp> {
@@ -181,15 +176,16 @@ public boolean onContextMenuClick(@Nullable OnDataChangeUiAdapter uiAdapter,
 	}
 
 	void registerWidgetControls(@NonNull MapActivity mapActivity) {
-		for (AidlMapWidgetWrapper widget : widgets.values()) {
+		for (AidlMapWidgetWrapper widgetData : widgets.values()) {
 			MapInfoLayer layer = mapActivity.getMapLayers().getMapInfoLayer();
 			if (layer != null) {
-				TextInfoWidget control = createWidgetControl(mapActivity, widget.getId());
-				widgetControls.put(widget.getId(), control);
-				int iconId = AndroidUtils.getDrawableId(mapActivity.getMyApplication(), widget.getMenuIconName());
+				TextInfoWidget widget = createWidgetControl(mapActivity, widgetData.getId());
+				widgetControls.put(widgetData.getId(), widget);
+				int iconId = AndroidUtils.getDrawableId(mapActivity.getMyApplication(), widgetData.getMenuIconName());
 				int menuIconId = iconId != 0 ? iconId : ContextMenuItem.INVALID_ID;
-				String widgetKey = "aidl_widget_" + widget.getId();
-				layer.registerWidget(widgetKey, control, menuIconId, widget.getMenuTitle(), WidgetsPanel.RIGHT, widget.getOrder());
+				String widgetKey = WIDGET_ID_PREFIX + widgetData.getId();
+				layer.registerExternalWidget(widgetKey, widget, menuIconId, widgetData.getMenuTitle(), pack,
+						WidgetsPanel.RIGHT, widgetData.getOrder());
 			}
 		}
 	}
diff --git a/OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java b/OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java
index d00fa0e2c96..0df66436ce0 100644
--- a/OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java
+++ b/OsmAnd/src/net/osmand/aidl/OsmandAidlApi.java
@@ -16,9 +16,6 @@
 import android.os.ParcelFileDescriptor;
 import android.view.KeyEvent;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-
 import com.google.gson.Gson;
 import com.google.gson.reflect.TypeToken;
 
@@ -138,6 +135,9 @@
 import java.util.TreeMap;
 import java.util.concurrent.ConcurrentHashMap;
 
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
 import static net.osmand.aidl.ConnectedApp.AIDL_ADD_MAP_LAYER;
 import static net.osmand.aidl.ConnectedApp.AIDL_ADD_MAP_WIDGET;
 import static net.osmand.aidl.ConnectedApp.AIDL_OBJECT_ID;
@@ -169,6 +169,8 @@ public class OsmandAidlApi {
 	public static final int KEY_ON_KEY_EVENT = 16;
 	public static final int KEY_ON_LOGCAT_MESSAGE = 32;
 
+	public static final String WIDGET_ID_PREFIX = "aidl_widget_";
+
 	private static final Log LOG = PlatformUtil.getLog(OsmandAidlApi.class);
 
 	private static final String AIDL_REFRESH_MAP = "aidl_refresh_map";
@@ -380,17 +382,19 @@ public void onReceive(Context context, Intent intent) {
 				if (mapActivity != null && widgetId != null && packName != null) {
 					ConnectedApp connectedApp = connectedApps.get(packName);
 					if (connectedApp != null) {
-						AidlMapWidgetWrapper widget = connectedApp.getWidgets().get(widgetId);
+						AidlMapWidgetWrapper widgetData = connectedApp.getWidgets().get(widgetId);
 						MapInfoLayer layer = mapActivity.getMapLayers().getMapInfoLayer();
-						if (widget != null && layer != null) {
-							ApplicationMode.regWidgetVisibility(widget.getId(), (ApplicationMode[]) null);
-							TextInfoWidget control = connectedApp.createWidgetControl(mapActivity, widgetId);
-							connectedApp.getWidgetControls().put(widgetId, control);
+						if (widgetData != null && layer != null) {
+							ApplicationMode.regWidgetVisibility(widgetData.getId(), (ApplicationMode[]) null);
+							TextInfoWidget widget = connectedApp.createWidgetControl(mapActivity, widgetId);
+							connectedApp.getWidgetControls().put(widgetId, widget);
 
-							int iconId = AndroidUtils.getDrawableId(app, widget.getMenuIconName());
+							int iconId = AndroidUtils.getDrawableId(app, widgetData.getMenuIconName());
 							int menuIconId = iconId != 0 ? iconId : ContextMenuItem.INVALID_ID;
-							String widgetKey = "aidl_widget_" + widgetId;
-							layer.registerWidget(widgetKey, control, menuIconId, widget.getMenuTitle(), WidgetsPanel.RIGHT, widget.getOrder());
+							String widgetKey = WIDGET_ID_PREFIX + widgetId;
+							layer.registerExternalWidget(widgetKey, widget, menuIconId,
+									widgetData.getMenuTitle(), connectedApp.getPack(),
+									WidgetsPanel.RIGHT, widgetData.getOrder());
 							layer.recreateControls();
 						}
 					}
@@ -1924,6 +1928,7 @@ public void registerNavDrawerItems(final Activity activity, ContextMenuAdapter a
 		app.getAppCustomization().registerNavDrawerItems(activity, adapter);
 	}
 
+	@Nullable
 	public ConnectedApp getConnectedApp(@NonNull String pack) {
 		List<ConnectedApp> connectedApps = getConnectedApps();
 		for (ConnectedApp connectedApp : connectedApps) {
diff --git a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
index e5afb96ffa0..5d317dc4f99 100644
--- a/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
+++ b/OsmAnd/src/net/osmand/plus/views/layers/MapInfoLayer.java
@@ -326,44 +326,43 @@ private void registerRightWidgets(@NonNull MapActivity mapActivity,
 	public MapWidgetInfo registerWidget(@NonNull WidgetParams widgetParams,
 	                                    @NonNull MapWidget widget,
 	                                    @NonNull WidgetsPanel widgetPanel) {
+		return registerWidget(widgetParams, widget, null, widgetPanel);
+	}
+
+	@Nullable
+	public MapWidgetInfo registerWidget(@NonNull WidgetParams widgetParams,
+	                                    @NonNull MapWidget widget,
+	                                    @Nullable WidgetState widgetState,
+	                                    @NonNull WidgetsPanel widgetPanel) {
 		if (mapInfoControls != null) {
 			int page = widgetPanel.getWidgetPage(widgetParams.id, settings);
 			int order = widgetPanel.getWidgetOrder(widgetParams.id, settings);
-			MapWidgetInfo widgetInfo = mapInfoControls.registerWidget(widgetParams.id, widget,
-					null, widgetParams.dayIconId, widgetParams.nightIconId, widgetParams.titleId,
-					null, page, order, widgetPanel);
+			MapWidgetInfo widgetInfo = mapInfoControls.registerWidget(widgetParams.id, widget, widgetState,
+					widgetParams.dayIconId, widgetParams.nightIconId, widgetParams.titleId,
+					null, null, page, order, widgetPanel);
 			widget.updateColors(calculateTextState());
 			return widgetInfo;
+		} else {
+			return null;
 		}
-		return null;
 	}
 
-	@Nullable
-	public MapWidgetInfo registerWidget(@NonNull String key, @NonNull MapWidget widget,
-	                                    @DrawableRes int settingsIconId, @Nullable String message,
-	                                    @NonNull WidgetsPanel widgetPanel, int order) {
+	public void registerExternalWidget(@NonNull String key,
+	                                   @NonNull MapWidget widget,
+	                                   @DrawableRes int settingsIconId,
+	                                   @Nullable String message,
+	                                   @NonNull String externalProviderPackage,
+	                                   @NonNull WidgetsPanel widgetPanel,
+	                                   int order) {
 		if (mapInfoControls != null) {
 			int page = widgetPanel.getWidgetPage(key, settings);
 			int savedOrder = widgetPanel.getWidgetOrder(key, settings);
 			if (savedOrder != WidgetsPanel.DEFAULT_ORDER) {
 				order = savedOrder;
 			}
-			MapWidgetInfo reg = mapInfoControls.registerWidget(key, widget, null, settingsIconId,
-					settingsIconId, MapWidgetInfo.INVALID_ID, message, page, order, widgetPanel);
-			widget.updateColors(calculateTextState());
-			return reg;
-		} else {
-			return null;
-		}
-	}
-
-	public void registerWidget(@NonNull WidgetParams widgetParams, @NonNull MapWidget widget,
-	                           @NonNull WidgetState widgetState, @NonNull WidgetsPanel widgetPanel) {
-		if (mapInfoControls != null) {
-			int page = widgetPanel.getWidgetPage(widgetParams.id, settings);
-			int order = widgetPanel.getWidgetOrder(widgetParams.id, settings);
-			mapInfoControls.registerWidget(widgetParams.id, widget, widgetState, widgetParams.dayIconId,
-					widgetParams.nightIconId, widgetParams.titleId, null, page, order, widgetPanel);
+			mapInfoControls.registerWidget(key, widget, null, settingsIconId,
+					settingsIconId, MapWidgetInfo.INVALID_ID, message, externalProviderPackage,
+					page, order, widgetPanel);
 			widget.updateColors(calculateTextState());
 		}
 	}
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
index 6154877d3ca..2b12f11931a 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetInfo.java
@@ -106,6 +106,11 @@ public int getMessageId() {
 				: messageId;
 	}
 
+	@Nullable
+	public String getExternalProviderPackage() {
+		return null;
+	}
+
 	public abstract boolean isEnabledForAppMode(@NonNull ApplicationMode appMode);
 
 	public abstract void enableDisableForMode(@NonNull ApplicationMode appMode, boolean enabled);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
index b7b01efb5a7..9b2cfd6662f 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/MapWidgetRegistry.java
@@ -147,6 +147,7 @@ public MapWidgetInfo registerWidget(@NonNull String key,
 	                                    @DrawableRes int nightSettingIconId,
 	                                    @StringRes int messageId,
 	                                    @Nullable String message,
+	                                    @Nullable String externalProviderPackage,
 	                                    int page,
 	                                    int order,
 	                                    @NonNull WidgetsPanel widgetPanel) {
@@ -155,6 +156,9 @@ public MapWidgetInfo registerWidget(@NonNull String key,
 			TextInfoWidget textInfoWidget = ((TextInfoWidget) widget);
 			widgetInfo = new SideWidgetInfo(key, textInfoWidget, widgetState, daySettingsIconId, nightSettingIconId,
 					messageId, message, page, order, widgetPanel);
+			if (!Algorithms.isEmpty(externalProviderPackage)) {
+				((SideWidgetInfo) widgetInfo).setExternalProviderPackage(externalProviderPackage);
+			}
 		} else {
 			widgetInfo = new CenterWidgetInfo(key, widget, widgetState, daySettingsIconId, nightSettingIconId,
 					messageId, message, page, order, widgetPanel);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/SideWidgetInfo.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/SideWidgetInfo.java
index 1a5ab72f70e..3be7c249626 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/SideWidgetInfo.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/SideWidgetInfo.java
@@ -20,6 +20,8 @@
 
 public class SideWidgetInfo extends MapWidgetInfo {
 
+	private String externalProviderPackage;
+
 	public SideWidgetInfo(@NonNull String key,
 	                      @NonNull TextInfoWidget widget,
 	                      @Nullable WidgetState widgetState,
@@ -42,6 +44,15 @@ public SideWidgetInfo(@NonNull String key,
 		}
 	}
 
+	public void setExternalProviderPackage(@NonNull String externalProviderPackage) {
+		this.externalProviderPackage = externalProviderPackage;
+	}
+
+	@Nullable
+	public String getExternalProviderPackage() {
+		return externalProviderPackage;
+	}
+
 	@Override
 	public boolean isEnabledForAppMode(@NonNull ApplicationMode appMode) {
 		List<String> widgetsVisibility = getWidgetsVisibility(appMode);
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
index c0e5f3c24eb..6e032ca6a44 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/WidgetParams.java
@@ -99,10 +99,6 @@ public int getIconId(boolean night) {
 		return night ? nightIconId : dayIconId;
 	}
 
-	public boolean isIconColored() {
-		return dayIconId != nightIconId;
-	}
-
 	@Nullable
 	public String getDocsUrl() {
 		if (this == COORDINATES) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/AddWidgetFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/AddWidgetFragment.java
index 282dee4a4a9..0040eca87a3 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/AddWidgetFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/AddWidgetFragment.java
@@ -11,10 +11,13 @@
 import android.widget.ImageView;
 import android.widget.TextView;
 
+import net.osmand.aidl.AidlMapWidgetWrapper;
+import net.osmand.aidl.ConnectedApp;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
 import net.osmand.plus.base.BaseOsmAndFragment;
 import net.osmand.plus.helpers.AndroidUiHelper;
+import net.osmand.plus.settings.backend.ApplicationMode;
 import net.osmand.plus.utils.AndroidUtils;
 import net.osmand.plus.utils.UiUtilities;
 import net.osmand.plus.utils.UiUtilities.DialogButtonType;
@@ -25,24 +28,31 @@
 import java.util.Collections;
 import java.util.List;
 
+import androidx.annotation.DrawableRes;
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
+import androidx.fragment.app.Fragment;
 import androidx.fragment.app.FragmentActivity;
 import androidx.fragment.app.FragmentManager;
 
+import static net.osmand.aidl.OsmandAidlApi.WIDGET_ID_PREFIX;
+
 public class AddWidgetFragment extends BaseOsmAndFragment {
 
 	public static final String TAG = AddWidgetFragment.class.getSimpleName();
 
+	private static final String KEY_APP_MODE = "app_mode";
 	private static final String KEY_GROUP_NAME = "group_name";
 	private static final String KEY_WIDGET_ID = "widget_id";
+	private static final String KEY_EXTERNAL_PROVIDER_PACKAGE = "external_provider_package";
 	private static final String KEY_SELECTED_WIDGETS_IDS = "selected_widgets_ids";
 
 	private OsmandApplication app;
+	private ApplicationMode appMode;
 	private boolean nightMode;
 
-	private WidgetGroup widgetGroup;
-	private WidgetParams widgetParams;
+	private WidgetDataHolder widgetsDataHolder;
 
 	private View view;
 
@@ -52,15 +62,21 @@ public void onCreate(@Nullable Bundle savedInstanceState) {
 		app = requireMyApplication();
 		nightMode = !app.getSettings().isLightContent();
 
+		Bundle args = getArguments();
 		if (savedInstanceState != null) {
-			if (savedInstanceState.containsKey(KEY_GROUP_NAME)) {
-				widgetGroup = WidgetGroup.valueOf(savedInstanceState.getString(KEY_GROUP_NAME));
-			} else {
-				widgetParams = WidgetParams.getById(savedInstanceState.getString(KEY_WIDGET_ID));
-			}
+			restoreAppMode(savedInstanceState);
+			widgetsDataHolder = new WidgetDataHolder(app, savedInstanceState);
+		} else if (args != null) {
+			restoreAppMode(args);
+			widgetsDataHolder = new WidgetDataHolder(app, args);
 		}
 	}
 
+	private void restoreAppMode(@NonNull Bundle bundle) {
+		String appModeKey = bundle.getString(KEY_APP_MODE);
+		appMode = ApplicationMode.valueOfStringKey(appModeKey, app.getSettings().getApplicationMode());
+	}
+
 	@Nullable
 	@Override
 	public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
@@ -84,7 +100,7 @@ private void setupToolbar() {
 		closeButton.setOnClickListener(v -> dismiss());
 
 		View helpButton = view.findViewById(R.id.help_button);
-		String docsUrl = widgetGroup != null ? widgetGroup.docsUrl : widgetParams.getDocsUrl();
+		String docsUrl = widgetsDataHolder.getDocsUrl();
 		if (!Algorithms.isEmpty(docsUrl)) {
 			helpButton.setOnClickListener(v -> {
 				FragmentActivity activity = getActivity();
@@ -97,20 +113,25 @@ private void setupToolbar() {
 		}
 
 		TextView title = view.findViewById(R.id.title);
-		title.setText(widgetGroup != null ? widgetGroup.titleId : widgetParams.titleId);
+		title.setText(widgetsDataHolder.getTitle());
 
 		TextView subTitle = view.findViewById(R.id.sub_title);
-		if (widgetGroup != null) {
+		int widgetsCount = widgetsDataHolder.getWidgetsCount();
+		if (widgetsCount > 1) {
 			String widgetsString = getString(R.string.shared_string_widgets);
-			String widgetsCount = String.valueOf(widgetGroup.getWidgets().size());
-			subTitle.setText(getString(R.string.ltr_or_rtl_combine_via_colon, widgetsString, widgetsCount));
+			String widgetsCountString = String.valueOf(widgetsCount);
+			subTitle.setText(getString(R.string.ltr_or_rtl_combine_via_colon, widgetsString, widgetsCountString));
 		} else {
 			subTitle.setText(R.string.shared_string_widget);
 		}
 
 		ImageView icon = view.findViewById(R.id.icon);
-		int iconId = widgetGroup != null ? widgetGroup.getIconId(nightMode) : widgetParams.getIconId(nightMode);
-		icon.setImageDrawable(getIcon(iconId));
+		int iconId = widgetsDataHolder.getIconId(nightMode);
+		if (iconId != 0) {
+			WidgetIconsHelper iconsHelper = new WidgetIconsHelper(app, appMode.getProfileColor(nightMode), nightMode);
+			boolean externalWidget = !Algorithms.isEmpty(widgetsDataHolder.aidlWidgetId);
+			iconsHelper.updateWidgetIcon(icon, 0, iconId, externalWidget);
+		}
 	}
 
 	private void dismiss() {
@@ -121,25 +142,25 @@ private void dismiss() {
 	}
 
 	private void setupContent() {
-		TextView description = view.findViewById(R.id.description);
-		int descriptionId = widgetGroup != null ? widgetGroup.descId : widgetParams.descId;
-		if (descriptionId != 0) {
-			description.setText(descriptionId);
+		TextView descriptionText = view.findViewById(R.id.description);
+		String description = widgetsDataHolder.getDescription();
+		if (Algorithms.isEmpty(description)) {
+			AndroidUiHelper.updateVisibility(descriptionText, false);
 		} else {
-			AndroidUiHelper.updateVisibility(description, false);
+			descriptionText.setText(description);
 		}
 
-		List<WidgetParams> widgets = widgetGroup != null
-				? widgetGroup.getWidgets()
-				: Collections.singletonList(widgetParams);
-		inflateWidgetsList(widgets);
 
-		int secondaryDescId = widgetGroup != null
-				? widgetGroup.getSecondaryDescriptionId()
-				: widgetParams.getSecondaryDescriptionId();
-		int secondaryIconId = widgetGroup != null
-				? widgetGroup.getSecondaryIconId()
-				: widgetParams.getSecondaryIconId();
+		List<WidgetParams> widgets = widgetsDataHolder.getWidgetsList();
+		AidlMapWidgetWrapper aidlWidgetData = widgetsDataHolder.getAidlWidgetData();
+		if (widgets != null) {
+			inflateWidgetsList(widgets);
+		} else if (aidlWidgetData != null) {
+			inflateAidlWidget(aidlWidgetData);
+		}
+
+		int secondaryDescId = widgetsDataHolder.getSecondaryDescriptionId();
+		int secondaryIconId = widgetsDataHolder.getSecondaryIconId();
 		if (secondaryDescId != 0 && secondaryIconId != 0) {
 			AndroidUiHelper.updateVisibility(view.findViewById(R.id.secondary_info_container), true);
 			((TextView) view.findViewById(R.id.secondary_description)).setText(secondaryDescId);
@@ -156,7 +177,7 @@ private void inflateWidgetsList(@NonNull List<WidgetParams> widgets) {
 			((ImageView) view.findViewById(R.id.icon)).setImageDrawable(getIcon(widget.getIconId(nightMode)));
 			((TextView) view.findViewById(R.id.title)).setText(widget.titleId);
 
-			if (widgetGroup != null && widget.descId != 0) {
+			if (widgetsDataHolder.widgetGroup != null && widget.descId != 0) {
 				TextView description = view.findViewById(R.id.description);
 				description.setText(widget.descId);
 				AndroidUiHelper.updateVisibility(description, true);
@@ -166,6 +187,10 @@ private void inflateWidgetsList(@NonNull List<WidgetParams> widgets) {
 		}
 	}
 
+	private void inflateAidlWidget(@NonNull AidlMapWidgetWrapper aidlWidgetData) {
+
+	}
+
 	private void setupApplyButton() {
 		View applyButton = view.findViewById(R.id.dismiss_button);
 		applyButton.setOnClickListener(v -> app.showToastMessage("No action yet"));
@@ -175,11 +200,8 @@ private void setupApplyButton() {
 	@Override
 	public void onSaveInstanceState(@NonNull Bundle outState) {
 		super.onSaveInstanceState(outState);
-		if (widgetGroup != null) {
-			outState.putString(KEY_GROUP_NAME, widgetGroup.name());
-		} else {
-			outState.putString(KEY_WIDGET_ID, widgetParams.id);
-		}
+		outState.putString(KEY_APP_MODE, appMode.getStringKey());
+		widgetsDataHolder.saveState(outState);
 	}
 
 	@Override
@@ -188,10 +210,39 @@ public int getStatusBarColorId() {
 		return nightMode ? R.color.status_bar_color_dark : R.color.activity_background_color_light;
 	}
 
-	public static void showInstance(@NonNull FragmentManager fragmentManager, @NonNull WidgetGroup widgetGroup) {
+	public static void showInstance(@NonNull FragmentManager fragmentManager,
+	                                @NonNull ApplicationMode appMode,
+	                                @NonNull WidgetGroup widgetGroup) {
+		Bundle args = new Bundle();
+		args.putString(KEY_APP_MODE, appMode.getStringKey());
+		args.putString(KEY_GROUP_NAME, widgetGroup.name());
+		showFragment(fragmentManager, args);
+	}
+
+	public static void showInstance(@NonNull FragmentManager fragmentManager,
+	                                @NonNull ApplicationMode appMode,
+	                                @NonNull WidgetParams widgetParams) {
+		Bundle args = new Bundle();
+		args.putString(KEY_APP_MODE, appMode.getStringKey());
+		args.putString(KEY_WIDGET_ID, widgetParams.id);
+		showFragment(fragmentManager, args);
+	}
+
+	public static void showInstance(@NonNull FragmentManager fragmentManager,
+	                                @NonNull ApplicationMode appMode,
+	                                @NonNull String widgetId,
+	                                @NonNull String externalProviderPackage) {
+		Bundle args = new Bundle();
+		args.putString(KEY_APP_MODE, appMode.getStringKey());
+		args.putString(KEY_WIDGET_ID, widgetId);
+		args.putString(KEY_EXTERNAL_PROVIDER_PACKAGE, externalProviderPackage);
+		showFragment(fragmentManager, args);
+	}
+
+	private static void showFragment(@NonNull FragmentManager fragmentManager, @NonNull Bundle args) {
 		if (AndroidUtils.isFragmentCanBeAdded(fragmentManager, TAG)) {
-			AddWidgetFragment fragment = new AddWidgetFragment();
-			fragment.widgetGroup = widgetGroup;
+			Fragment fragment = new AddWidgetFragment();
+			fragment.setArguments(args);
 			fragmentManager.beginTransaction()
 					.add(R.id.fragmentContainer, fragment, TAG)
 					.addToBackStack(TAG)
@@ -199,14 +250,139 @@ public static void showInstance(@NonNull FragmentManager fragmentManager, @NonNu
 		}
 	}
 
-	public static void showInstance(@NonNull FragmentManager fragmentManager, @NonNull WidgetParams widgetParams) {
-		if (AndroidUtils.isFragmentCanBeAdded(fragmentManager, TAG)) {
-			AddWidgetFragment fragment = new AddWidgetFragment();
-			fragment.widgetParams = widgetParams;
-			fragmentManager.beginTransaction()
-					.add(R.id.fragmentContainer, fragment, TAG)
-					.addToBackStack(TAG)
-					.commitAllowingStateLoss();
+	private static class WidgetDataHolder {
+
+		private final OsmandApplication app;
+
+		private WidgetGroup widgetGroup;
+		private WidgetParams widgetParams;
+
+		private ConnectedApp connectedApp;
+		private String aidlWidgetId;
+		private String externalProviderPackage;
+		private AidlMapWidgetWrapper aidlWidgetData;
+
+		public WidgetDataHolder(@NonNull OsmandApplication app, @NonNull Bundle bundle) {
+			this.app = app;
+
+			if (bundle.containsKey(KEY_GROUP_NAME)) {
+				widgetGroup = WidgetGroup.valueOf(bundle.getString(KEY_GROUP_NAME));
+			} else if (bundle.containsKey(KEY_EXTERNAL_PROVIDER_PACKAGE)) {
+				aidlWidgetId = bundle.getString(KEY_WIDGET_ID);
+				externalProviderPackage = bundle.getString(KEY_EXTERNAL_PROVIDER_PACKAGE);
+				connectedApp = app.getAidlApi().getConnectedApp(externalProviderPackage);
+				if (connectedApp != null) {
+					String sourceId = aidlWidgetId.replaceFirst(WIDGET_ID_PREFIX, "");
+					aidlWidgetData = connectedApp.getWidgets().get(sourceId);
+				}
+			} else {
+				widgetParams = WidgetParams.getById(bundle.getString(KEY_WIDGET_ID));
+			}
+		}
+
+		@NonNull
+		public String getTitle() {
+			if (widgetGroup != null) {
+				return getString(widgetGroup.titleId);
+			} else if (widgetParams != null) {
+				return getString(widgetParams.titleId);
+			} else if (aidlWidgetData != null) {
+				return aidlWidgetData.getMenuTitle();
+			}
+			return "";
+		}
+
+		public int getWidgetsCount() {
+			return widgetGroup != null ? widgetGroup.getWidgets().size() : 1;
+		}
+
+		/**
+		 * @return existing icon id or 0
+		 */
+		@DrawableRes
+		public int getIconId(boolean nightMode) {
+			if (widgetGroup != null) {
+				return widgetGroup.getIconId(nightMode);
+			} else if (widgetParams != null) {
+				return widgetParams.getIconId(nightMode);
+			} else if (aidlWidgetData != null) {
+				String iconName = aidlWidgetData.getMenuIconName();
+				return AndroidUtils.getDrawableId(app, iconName);
+			}
+			return 0;
+		}
+
+		@Nullable
+		public String getDescription() {
+			if (widgetGroup != null && widgetGroup.descId != 0) {
+				return getString(widgetGroup.descId);
+			} else if (widgetParams != null && widgetParams.descId != 0) {
+				return getString(widgetParams.descId);
+			} else if (connectedApp != null) {
+				return connectedApp.getName();
+			}
+			return null;
+		}
+
+		@Nullable
+		public List<WidgetParams> getWidgetsList() {
+			if (widgetGroup != null) {
+				return widgetGroup.getWidgets();
+			} else if (widgetParams != null) {
+				return Collections.singletonList(widgetParams);
+			}
+			return null;
+		}
+
+		@Nullable
+		public AidlMapWidgetWrapper getAidlWidgetData() {
+			return aidlWidgetData;
+		}
+
+		@StringRes
+		public int getSecondaryDescriptionId() {
+			if (widgetGroup != null) {
+				return widgetGroup.getSecondaryDescriptionId();
+			} else if (widgetParams != null) {
+				return widgetParams.getSecondaryDescriptionId();
+			}
+			return 0;
+		}
+
+		@DrawableRes
+		public int getSecondaryIconId() {
+			if (widgetGroup != null) {
+				return widgetGroup.getSecondaryIconId();
+			} else if (widgetParams != null) {
+				return widgetParams.getSecondaryIconId();
+			}
+			return 0;
+		}
+
+		@Nullable
+		public String getDocsUrl() {
+			if (widgetGroup != null) {
+				return widgetGroup.docsUrl;
+			} else if (widgetParams != null) {
+				return widgetParams.getDocsUrl();
+			}
+			return null;
+		}
+
+		public void saveState(@NonNull Bundle outState) {
+			if (widgetGroup != null) {
+				outState.putString(KEY_GROUP_NAME, widgetGroup.name());
+			} else if (widgetParams != null) {
+				outState.putString(KEY_WIDGET_ID, widgetParams.id);
+			} else {
+				outState.putString(KEY_WIDGET_ID, aidlWidgetId);
+				outState.putString(KEY_EXTERNAL_PROVIDER_PACKAGE, externalProviderPackage);
+			}
+		}
+
+		@NonNull
+		private String getString(@StringRes int stringId) {
+			return app.getString(stringId);
 		}
 	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/WidgetIconsHelper.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/WidgetIconsHelper.java
index 29ac7d4040c..a5c224ecd59 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/WidgetIconsHelper.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/WidgetIconsHelper.java
@@ -38,14 +38,13 @@ public void updateWidgetIcon(@NonNull ImageView icon, @NonNull MapWidgetInfo wid
 
 	public void updateWidgetIcon(@NonNull ImageView icon, @NonNull WidgetParams widgetParams) {
 		int settingsIconId = widgetParams.getIconId(nightMode);
-		boolean shouldPaintIcon = !widgetParams.isIconColored();
-		updateWidgetIcon(icon, 0, settingsIconId, shouldPaintIcon);
+		updateWidgetIcon(icon, 0, settingsIconId, false);
 	}
 
-	private void updateWidgetIcon(@NonNull ImageView icon,
-	                              @DrawableRes int mapIconId,
-	                              @DrawableRes int settingsIconId,
-	                              boolean shouldPaintIcon) {
+	public void updateWidgetIcon(@NonNull ImageView icon,
+	                             @DrawableRes int mapIconId,
+	                             @DrawableRes int settingsIconId,
+	                             boolean shouldPaintIcon) {
 		if (mapIconId != 0) {
 			icon.setImageResource(mapIconId);
 			if (shouldPaintIcon) {
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/WidgetsListFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/WidgetsListFragment.java
index d55039ccb42..135f528c6f5 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/WidgetsListFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/panel/WidgetsListFragment.java
@@ -314,9 +314,9 @@ private void inflateAvailableDefaultWidgets(@NonNull List<WidgetParams> widgets,
 				if (activity != null) {
 					FragmentManager fragmentManager = activity.getSupportFragmentManager();
 					if (widgetGroup != null) {
-						AddWidgetFragment.showInstance(fragmentManager, widgetGroup);
+						AddWidgetFragment.showInstance(fragmentManager, selectedAppMode, widgetGroup);
 					} else {
-						AddWidgetFragment.showInstance(fragmentManager, widget);
+						AddWidgetFragment.showInstance(fragmentManager, selectedAppMode, widget);
 					}
 				}
 			});
@@ -347,7 +347,12 @@ private void inflateAvailableExternalWidgets(@NonNull List<MapWidgetInfo> extern
 
 			View infoButton = view.findViewById(R.id.info_button);
 			infoButton.setOnClickListener(v -> {
-				// TODO widgets: show new dialog
+				FragmentActivity activity = getActivity();
+				String externalProviderPackage = widget.getExternalProviderPackage();
+				if (activity != null && !Algorithms.isEmpty(externalProviderPackage)) {
+					FragmentManager fragmentManager = activity.getSupportFragmentManager();
+					AddWidgetFragment.showInstance(fragmentManager, selectedAppMode, widget.key, externalProviderPackage);
+				}
 			});
 
 			boolean last = i + 1 == externalWidgets.size();
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/reorder/ReorderWidgetsAdapter.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/reorder/ReorderWidgetsAdapter.java
index 37d0ee07d3c..ab98bd07e72 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/reorder/ReorderWidgetsAdapter.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/reorder/ReorderWidgetsAdapter.java
@@ -32,6 +32,7 @@
 import net.osmand.plus.views.mapwidgets.configure.reorder.viewholder.PageViewHolder;
 import net.osmand.plus.views.mapwidgets.configure.reorder.viewholder.PageViewHolder.PageUiInfo;
 import net.osmand.plus.views.mapwidgets.configure.reorder.viewholder.SpaceViewHolder;
+import net.osmand.util.Algorithms;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -266,18 +267,25 @@ private void bindAvailableWidgetViewHolder(@NonNull AvailableItemViewHolder view
 		iconsHelper.updateWidgetIcon(viewHolder.icon, widgetInfo.info);
 		viewHolder.title.setText(widgetInfo.title);
 
-		WidgetParams widgetParams = WidgetParams.getById(widgetInfo.key);
-		if (widgetParams != null) {
-			viewHolder.infoButton.setOnClickListener(v -> {
-				if (actionsListener != null) {
-					actionsListener.showWidgetInfo(widgetParams);
-				}
-			});
-		}
+		viewHolder.infoButton.setOnClickListener(v -> showWidgetInfoIfPossible(widgetInfo));
 
 		updateAvailableItemDivider(viewHolder, position);
 	}
 
+	private void showWidgetInfoIfPossible(@NonNull AvailableWidgetUiInfo widgetInfo) {
+		if (actionsListener != null) {
+			WidgetParams widgetParams = WidgetParams.getById(widgetInfo.key);
+			if (widgetParams != null) {
+				actionsListener.showWidgetInfo(widgetParams);
+			} else {
+				String externalProviderPackage = widgetInfo.info.getExternalProviderPackage();
+				if (!Algorithms.isEmpty(externalProviderPackage)) {
+					actionsListener.showExternalWidgetIndo(widgetInfo.key, externalProviderPackage);
+				}
+			}
+		}
+	}
+
 	private void updateAvailableItemDivider(@NonNull AvailableItemViewHolder viewHolder, int position) {
 		ItemType nextItemType = position + 1 == items.size() ? null : items.get(position + 1).type;
 		boolean lastAvailableItem = nextItemType != ItemType.AVAILABLE_GROUP && nextItemType != ItemType.AVAILABLE_WIDGET;
@@ -361,5 +369,7 @@ public interface WidgetsAdapterActionsListener{
 		void showWidgetInfo(@NonNull WidgetParams widget);
 
 		void showWidgetGroupInfo(@NonNull WidgetGroup widgetGroup);
+
+		void showExternalWidgetIndo(@NonNull String widgetId, @NonNull String externalProviderPackage);
 	}
 }
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/reorder/ReorderWidgetsFragment.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/reorder/ReorderWidgetsFragment.java
index 6e660e77661..a46caadd895 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/reorder/ReorderWidgetsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/configure/reorder/ReorderWidgetsFragment.java
@@ -178,19 +178,32 @@ public void onPageDeleted(int page, int position) {
 
 			@Override
 			public void showWidgetGroupInfo(@NonNull WidgetGroup widgetGroup) {
-				FragmentActivity activity = getActivity();
-				if (activity != null) {
-					AddWidgetFragment.showInstance(activity.getSupportFragmentManager(), widgetGroup);
+				FragmentManager fragmentManager = getSupportFragmentManager();
+				if (fragmentManager != null) {
+					AddWidgetFragment.showInstance(fragmentManager, selectedAppMode, widgetGroup);
 				}
 			}
 
 			@Override
 			public void showWidgetInfo(@NonNull WidgetParams widget) {
-				FragmentActivity activity = getActivity();
-				if (activity != null) {
-					AddWidgetFragment.showInstance(activity.getSupportFragmentManager(), widget);
+				FragmentManager fragmentManager = getSupportFragmentManager();
+				if (fragmentManager != null) {
+					AddWidgetFragment.showInstance(fragmentManager, selectedAppMode, widget);
 				}
 			}
+
+			@Override
+			public void showExternalWidgetIndo(@NonNull String widgetId, @NonNull String externalProviderPackage) {
+				FragmentManager fragmentManager = getSupportFragmentManager();
+				if (fragmentManager != null) {
+					AddWidgetFragment.showInstance(fragmentManager, selectedAppMode, widgetId, externalProviderPackage);
+				}
+			}
+
+			@Nullable
+			private FragmentManager getSupportFragmentManager() {
+				return getActivity() != null ? getActivity().getSupportFragmentManager() : null;
+			}
 		});
 
 		recyclerView.setAdapter(adapter);
