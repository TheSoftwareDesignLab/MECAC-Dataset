diff --git a/OsmAnd-java/src/main/java/net/osmand/Location.java b/OsmAnd-java/src/main/java/net/osmand/Location.java
index 35fb969aada..eef5769352f 100644
--- a/OsmAnd-java/src/main/java/net/osmand/Location.java
+++ b/OsmAnd-java/src/main/java/net/osmand/Location.java
@@ -52,6 +52,7 @@ public class Location {
     private double mLon2 = 0.0;
     private float mDistance = 0.0f;
     private float mInitialBearing = 0.0f;
+    private boolean trafficLight;
     // Scratchpad
     private float[] mResults = new float[2];
     
@@ -99,6 +100,7 @@ public void set(Location l) {
         mAccuracy = l.mAccuracy;
         mHasVerticalAccuracy = l.mHasVerticalAccuracy;
         mVerticalAccuracy = l.mVerticalAccuracy;
+        trafficLight = l.trafficLight;
     }
 
     /**
@@ -539,6 +541,14 @@ public void removeVerticalAccuracy() {
         mHasVerticalAccuracy = false;
     }
 
+    public boolean isTrafficLight() {
+        return trafficLight;
+    }
+
+    public void setTrafficLight(boolean trafficLight) {
+        this.trafficLight = trafficLight;
+    }
+
     @Override public String toString() {
         return "Location[mProvider=" + mProvider +
             ",mTime=" + mTime +
@@ -553,7 +563,8 @@ public void removeVerticalAccuracy() {
             ",mHasAccuracy=" + mHasAccuracy +
             ",mAccuracy=" + mAccuracy +
             ",mHasVerticalAccuracy=" + mHasVerticalAccuracy +
-            ",mVerticalAccuracy=" + mVerticalAccuracy;
+            ",mVerticalAccuracy=" + mVerticalAccuracy +
+            ",trafficLight=" + trafficLight;
     }
 
     
diff --git a/OsmAnd-java/src/main/java/net/osmand/router/RouteSegmentResult.java b/OsmAnd-java/src/main/java/net/osmand/router/RouteSegmentResult.java
index 574b1934720..f9e284c6f96 100644
--- a/OsmAnd-java/src/main/java/net/osmand/router/RouteSegmentResult.java
+++ b/OsmAnd-java/src/main/java/net/osmand/router/RouteSegmentResult.java
@@ -527,19 +527,31 @@ public LatLon getStartPoint() {
 	public int getStartPointIndex() {
 		return startPointIndex;
 	}
-	
+
 	public int getEndPointIndex() {
 		return endPointIndex;
 	}
-	
+
 	public LatLon getPoint(int i) {
 		return convertPoint(object, i);
 	}
-	
+
+	public boolean isTrafficLight(int i) {
+		int[] pointTypes = object.getPointTypes(i);
+		if (pointTypes != null) {
+			for (int pointType : pointTypes) {
+				if (object.region.routeEncodingRules.get(pointType).getValue().startsWith("traffic_signals")) {
+					return true;
+				}
+			}
+		}
+		return false;
+	}
+
 	public LatLon getEndPoint() {
 		return convertPoint(object, endPointIndex);
 	}
-	
+
 	public boolean isForwardDirection() {
 		return endPointIndex - startPointIndex > 0;
 	}
diff --git a/OsmAnd/res/layout/preference_simulation_mode_item.xml b/OsmAnd/res/layout/preference_simulation_mode_item.xml
new file mode 100644
index 00000000000..6545632da03
--- /dev/null
+++ b/OsmAnd/res/layout/preference_simulation_mode_item.xml
@@ -0,0 +1,79 @@
+<?xml version="1.0" encoding="utf-8"?>
+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content"
+	android:background="?attr/list_background_color"
+	xmlns:osmand="http://schemas.android.com/apk/res-auto">
+
+	<LinearLayout
+		android:id="@+id/selectable_list_item"
+		android:orientation="vertical"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:background="?android:attr/selectableItemBackground">
+
+		<LinearLayout
+			android:orientation="horizontal"
+			android:layout_width="match_parent"
+			android:layout_height="wrap_content">
+
+			<LinearLayout
+				android:orientation="vertical"
+				android:layout_width="0dp"
+				android:layout_weight="1"
+				android:paddingTop="@dimen/content_padding_small"
+				android:paddingBottom="@dimen/content_padding_small"
+				android:paddingLeft="@dimen/content_padding"
+				android:paddingRight="@dimen/content_padding"
+				android:layout_height="wrap_content"
+				android:paddingEnd="@dimen/content_padding"
+				android:paddingStart="@dimen/content_padding">
+
+				<net.osmand.plus.widgets.TextViewEx
+					android:id="@android:id/title"
+					android:layout_width="wrap_content"
+					android:layout_height="wrap_content"
+					android:textSize="@dimen/default_list_text_size"
+					osmand:typeface="@string/font_roboto_regular"
+					android:textColor="?android:textColorPrimary"
+					tools:text="Boost mode" />
+
+				<net.osmand.plus.widgets.TextViewEx
+					android:id="@+id/description"
+					android:layout_width="wrap_content"
+					android:layout_height="wrap_content"
+					android:textSize="@dimen/default_desc_text_size"
+					osmand:typeface="@string/font_roboto_regular"
+					android:textColor="?android:textColorSecondary"
+					osmand:lineHeight="@dimen/default_desc_line_height"
+					tools:text="description" />
+			</LinearLayout>
+
+			<RadioButton
+				android:id="@android:id/checkbox"
+				android:layout_width="wrap_content"
+				android:layout_height="wrap_content"
+				android:layout_gravity="center_vertical"
+				android:layout_marginEnd="@dimen/content_padding_small"
+				android:background="@null"
+				android:clickable="true"
+				android:focusable="true" />
+		</LinearLayout>
+
+		<FrameLayout
+			android:id="@+id/divider"
+			android:layout_width="match_parent"
+			android:layout_height="wrap_content">
+
+			<View
+				android:layout_gravity="bottom"
+				android:layout_width="match_parent"
+				android:layout_height="1dp"
+				android:layout_marginStart="@dimen/content_padding"
+				android:background="?attr/list_divider" />
+		</FrameLayout>
+
+	</LinearLayout>
+
+</FrameLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/preference_simulation_mode_slider.xml b/OsmAnd/res/layout/preference_simulation_mode_slider.xml
new file mode 100644
index 00000000000..5b7d6ede47b
--- /dev/null
+++ b/OsmAnd/res/layout/preference_simulation_mode_slider.xml
@@ -0,0 +1,122 @@
+<?xml version="1.0" encoding="utf-8"?>
+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content"
+	android:background="?attr/list_background_color"
+	xmlns:osmand="http://schemas.android.com/apk/res-auto">
+
+	<LinearLayout
+		android:id="@+id/selectable_list_item"
+		android:orientation="vertical"
+		android:layout_width="match_parent"
+		android:layout_height="wrap_content"
+		android:background="?android:attr/selectableItemBackground">
+
+		<LinearLayout
+			android:paddingBottom="@dimen/content_padding_small"
+			android:orientation="vertical"
+			android:layout_width="match_parent"
+			android:layout_height="wrap_content">
+
+			<LinearLayout
+				android:orientation="horizontal"
+				android:layout_width="match_parent"
+				android:layout_height="wrap_content"
+				android:paddingTop="@dimen/measurement_tool_button_padding_top">
+
+				<net.osmand.plus.widgets.TextViewEx
+					android:id="@android:id/title"
+					android:layout_width="0dp"
+					android:layout_height="wrap_content"
+					android:layout_marginStart="@dimen/content_padding"
+					android:layout_weight="1"
+					android:layout_gravity="center_vertical"
+					android:textSize="@dimen/default_list_text_size"
+					osmand:typeface="@string/font_roboto_regular"
+					android:textColor="?android:textColorPrimary"
+					tools:text="Constant speed" />
+
+				<RadioButton
+					android:id="@android:id/checkbox"
+					android:layout_width="wrap_content"
+					android:layout_height="wrap_content"
+					android:layout_gravity="end"
+					android:layout_marginEnd="@dimen/content_padding_small"
+					android:background="@null"
+					android:clickable="true"
+					android:focusable="true" />
+			</LinearLayout>
+
+			<LinearLayout
+				android:id="@+id/slider_group"
+				android:orientation="vertical"
+				android:layout_width="match_parent"
+				android:paddingLeft="@dimen/content_padding"
+				android:paddingRight="@dimen/content_padding"
+				android:layout_height="wrap_content"
+				android:paddingEnd="@dimen/content_padding"
+				android:paddingStart="@dimen/content_padding">
+
+				<com.google.android.material.slider.Slider
+					android:id="@+id/slider"
+					android:layout_width="match_parent"
+					android:layout_height="wrap_content" />
+
+				<LinearLayout
+					android:orientation="horizontal"
+					android:layout_width="match_parent"
+					android:layout_height="wrap_content"
+					android:paddingBottom="@dimen/content_padding_small">
+
+					<net.osmand.plus.widgets.TextViewEx
+						android:id="@+id/min"
+						android:layout_width="wrap_content"
+						android:layout_height="wrap_content"
+						android:textSize="@dimen/default_list_text_size"
+						osmand:typeface="@string/font_roboto_regular"
+						android:textColor="?android:textColorPrimary"
+						tools:text="5 km/h" />
+
+					<net.osmand.plus.widgets.TextViewEx
+						android:id="@+id/max"
+						android:layout_width="match_parent"
+						android:layout_height="wrap_content"
+						android:gravity="end"
+						android:textSize="@dimen/default_list_text_size"
+						osmand:typeface="@string/font_roboto_regular"
+						android:textColor="?android:textColorPrimary"
+						tools:text="900 km/h" />
+				</LinearLayout>
+
+				<net.osmand.plus.widgets.TextViewEx
+					android:id="@+id/description"
+					android:layout_width="wrap_content"
+					android:layout_height="wrap_content"
+					android:textSize="@dimen/default_desc_text_size"
+					android:lineSpacingMultiplier="@dimen/bottom_sheet_text_spacing_multiplier"
+					osmand:typeface="@string/font_roboto_regular"
+					android:textColor="?android:textColorSecondary"
+					osmand:lineHeight="@dimen/default_desc_line_height"
+					tools:text="description" />
+
+			</LinearLayout>
+
+		</LinearLayout>
+
+		<FrameLayout
+			android:id="@+id/divider"
+			android:layout_width="match_parent"
+			android:layout_height="wrap_content">
+
+			<View
+				android:layout_gravity="bottom"
+				android:layout_width="match_parent"
+				android:layout_height="1dp"
+				android:layout_marginStart="@dimen/content_padding"
+				android:background="?attr/list_divider" />
+		</FrameLayout>
+
+	</LinearLayout>
+
+</FrameLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/layout/preference_simulation_title.xml b/OsmAnd/res/layout/preference_simulation_title.xml
new file mode 100644
index 00000000000..1af43dbaf35
--- /dev/null
+++ b/OsmAnd/res/layout/preference_simulation_title.xml
@@ -0,0 +1,34 @@
+<?xml version="1.0" encoding="utf-8"?>
+
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+	xmlns:osmand="http://schemas.android.com/apk/res-auto"
+	xmlns:tools="http://schemas.android.com/tools"
+	android:layout_width="match_parent"
+	android:layout_height="wrap_content"
+	android:paddingTop="@dimen/bottom_sheet_title_padding_top"
+	android:orientation="vertical">
+	<include layout="@layout/card_top_divider" />
+	<LinearLayout
+		android:layout_width="match_parent"
+		android:layout_height="@dimen/card_row_min_height"
+		android:background="?attr/list_background_color"
+		android:minHeight="@dimen/bottom_sheet_cancel_button_height"
+		android:paddingTop="@dimen/content_padding_small"
+		android:paddingBottom="@dimen/content_padding_small"
+		android:orientation="vertical">
+
+		<net.osmand.plus.widgets.TextViewEx
+			android:id="@android:id/title"
+			android:layout_width="wrap_content"
+			android:layout_height="wrap_content"
+			android:layout_gravity="center_vertical|start"
+			android:paddingLeft="@dimen/content_padding"
+			android:paddingRight="@dimen/content_padding"
+			android:textSize="@dimen/default_list_text_size"
+			osmand:typeface="@string/font_roboto_medium"
+			tools:text="@string/plugin_settings"
+			android:paddingEnd="@dimen/content_padding"
+			android:paddingStart="@dimen/content_padding" />
+
+	</LinearLayout>
+</LinearLayout>
\ No newline at end of file
diff --git a/OsmAnd/res/values/strings.xml b/OsmAnd/res/values/strings.xml
index dabdc37561a..0cc7a98d91a 100644
--- a/OsmAnd/res/values/strings.xml
+++ b/OsmAnd/res/values/strings.xml
@@ -10,7 +10,13 @@
 	- For wording and consistency, please note https://docs.osmand.net/en/main@latest/development/contributions/translating-osmand
 	Thx - Hardy
 -->
-    <string name="rendering_attr_showFitnessTrails_name">Show fitness trails</string>
+    <string name="sim_real_mode_desc">The maximum speed during the simulation will be equal to the maximum speed of the roads along the route.</string>
+    <string name="sim_real_mode_title">Close to reality mode</string>
+    <string name="sim_constant_mode_desc">The speed will be constant during the simulation.</string>
+    <string name="sim_constant_mode_title">Simulate with a given speed</string>
+    <string name="sim_preview_mode_desc">The speed will be randomly vary during the simulation.</string>
+    <string name="sim_preview_mode_title">Fast preview mode</string>
+    <string name="speed_mode">Speed mode</string>
     <string name="rendering_attr_showFitnessTrails_description">Show fitness trails</string>
     <string name="stop_download_desc">Download is not complete. If you interrupt the download now, only part of the tiles will be available for viewing.</string>
     <string name="stop_download">Stop download</string>
diff --git a/OsmAnd/res/xml/simulation_navigation_setting.xml b/OsmAnd/res/xml/simulation_navigation_setting.xml
index 41d2ef14c5a..c4a4b37d7ae 100644
--- a/OsmAnd/res/xml/simulation_navigation_setting.xml
+++ b/OsmAnd/res/xml/simulation_navigation_setting.xml
@@ -1,6 +1,4 @@
 <?xml version="1.0" encoding="utf-8"?>
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent">
-
-</LinearLayout>
\ No newline at end of file
+<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
+	android:title="@string/simulate_navigation">
+</PreferenceScreen>
\ No newline at end of file
diff --git a/OsmAnd/src/net/osmand/plus/OsmAndLocationSimulation.java b/OsmAnd/src/net/osmand/plus/OsmAndLocationSimulation.java
index ec8b3a63c11..08369df0dd3 100644
--- a/OsmAnd/src/net/osmand/plus/OsmAndLocationSimulation.java
+++ b/OsmAnd/src/net/osmand/plus/OsmAndLocationSimulation.java
@@ -1,6 +1,8 @@
 package net.osmand.plus;
 
 
+import static net.osmand.plus.settings.fragments.SimulationNavigationSettingFragment.*;
+
 import android.app.Activity;
 import android.view.View;
 import android.widget.TextView;
@@ -106,12 +108,12 @@ public void startStopRouteAnimation(@Nullable Activity activity, boolean useGpx,
 			}
 		}
 	}
-	
-	public void startStopRouteAnimation(@Nullable Activity activity)  {
+
+	public void startStopRouteAnimation(@Nullable Activity activity) {
 		startStopRouteAnimation(activity, false, null);
 	}
 
-	public void startStopGpxAnimation(@Nullable Activity activity)  {
+	public void startStopGpxAnimation(@Nullable Activity activity) {
 		startStopRouteAnimation(activity, true, null);
 	}
 
@@ -128,10 +130,9 @@ public void run() {
 				if (current != null) {
 					current.setProvider(OsmAndLocationProvider.SIMULATED_PROVIDER);
 				}
-				//int simSpeed = app.getSettings().SIMULATION_SPEED;
-				//boolean reality = app.getSettings().CLOSE_TO_REALITY_SIMULATION;
-				int simSpeed = 0;
-				boolean reality = true;
+				float simSpeed = app.getSettings().simulateNavigationSpeed;
+				SimulationMode simulationMode = SimulationMode.getMode(app.getSettings().simulateNavigationMode);
+				boolean reality = simulationMode == SimulationMode.REALITY;
 
 				while (!directions.isEmpty() && routeAnimation != null) {
 					long timeout = (long) (time * 1000);
@@ -146,7 +147,7 @@ public void run() {
 						}
 					} else {
 						List<Object> result;
-						if (simSpeed != 0) {
+						if (simulationMode == SimulationMode.CONSTANT) {
 							result = useSimulationConstantSpeed(simSpeed, current, directions, meters, intervalTime, coeff);
 						} else {
 							result = useDefaultSimulation(current, directions, meters);
@@ -168,7 +169,8 @@ public void run() {
 					final Location toset = current;
 					app.runInUIThread(() -> provider.setLocationFromSimulation(toset));
 					try {
-						Thread.sleep((long) (timeout / coeff));
+						long delay = (long) (timeout / coeff) + (reality && toset.isTrafficLight() ? 5000 : 0);
+						Thread.sleep(delay);
 					} catch (InterruptedException e) {
 						// do nothing
 					}
@@ -181,9 +183,8 @@ public void run() {
 		routeAnimation.start();
 	}
 
-	private List<Object> useSimulationConstantSpeed(int speed, Location current, List<Location> directions, float meters, float intervalTime, float coeff) {
+	private List<Object> useSimulationConstantSpeed(float speed, Location current, List<Location> directions, float meters, float intervalTime, float coeff) {
 		List<Object> result = new ArrayList<>();
-		speed = (int) (speed / 3.6);
 		if (current.distanceTo(directions.get(0)) > meters) {
 			current = middleLocation(current, directions.get(0), meters);
 		} else {
@@ -234,6 +235,7 @@ public static Location middleLocation(Location start, Location end, float meters
 		nl.setLatitude(toDegree(lat2));
 		nl.setLongitude(toDegree(lon2));
 		nl.setBearing(brng);
+		nl.setTrafficLight(false);
 		return nl;
 	}
 
diff --git a/OsmAnd/src/net/osmand/plus/routepreparationmenu/RouteOptionsBottomSheet.java b/OsmAnd/src/net/osmand/plus/routepreparationmenu/RouteOptionsBottomSheet.java
index 894ada342b1..476d5cc9633 100644
--- a/OsmAnd/src/net/osmand/plus/routepreparationmenu/RouteOptionsBottomSheet.java
+++ b/OsmAnd/src/net/osmand/plus/routepreparationmenu/RouteOptionsBottomSheet.java
@@ -442,6 +442,7 @@ private BaseBottomSheetItem createRouteSimulationItem(final LocalRoutingParamete
 				R.layout.bottom_sheet_item_with_descr_switch_and_additional_button_56dp, null, false);
 		final ImageView icon = itemView.findViewById(R.id.icon);
 		TextView tvTitle = itemView.findViewById(R.id.title);
+		itemView.findViewById(R.id.description).setVisibility(View.GONE);
 		View basicItem = itemView.findViewById(R.id.basic_item_body);
 		final CompoundButton cb = itemView.findViewById(R.id.compound_button);
 		View settingBtn = itemView.findViewById(R.id.additional_button);
diff --git a/OsmAnd/src/net/osmand/plus/routing/RouteCalculationResult.java b/OsmAnd/src/net/osmand/plus/routing/RouteCalculationResult.java
index 14d036b0d94..20fa8c5cdc8 100644
--- a/OsmAnd/src/net/osmand/plus/routing/RouteCalculationResult.java
+++ b/OsmAnd/src/net/osmand/plus/routing/RouteCalculationResult.java
@@ -377,6 +377,7 @@ private static List<RouteSegmentResult> convertVectorResult(List<RouteDirectionI
 				n.setLatitude(point.getLatitude());
 				n.setLongitude(point.getLongitude());
 				n.setSpeed(s.getSegmentSpeed());
+				n.setTrafficLight(s.isTrafficLight(i));
 				if (vls != null && i * 2 + 1 < vls.length) {
 					float h = vls[2 * i + 1];
 					n.setAltitude(h);
diff --git a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
index 44ac466ae88..aa71ca2843c 100644
--- a/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
+++ b/OsmAnd/src/net/osmand/plus/settings/backend/OsmandSettings.java
@@ -7,6 +7,7 @@
 import static net.osmand.plus.routing.TransportRoutingHelper.PUBLIC_TRANSPORT_KEY;
 import static net.osmand.plus.settings.enums.LocationSource.ANDROID_API;
 import static net.osmand.plus.settings.enums.LocationSource.GOOGLE_PLAY_SERVICES;
+import static net.osmand.plus.settings.fragments.SimulationNavigationSettingFragment.*;
 
 import android.annotation.SuppressLint;
 import android.annotation.TargetApi;
@@ -81,6 +82,7 @@
 import net.osmand.plus.settings.enums.MetricsConstants;
 import net.osmand.plus.settings.enums.SpeedConstants;
 import net.osmand.plus.settings.enums.TracksSortByMode;
+import net.osmand.plus.settings.fragments.SimulationNavigationSettingFragment;
 import net.osmand.plus.utils.FileUtils;
 import net.osmand.plus.views.layers.RadiusRulerControlLayer.RadiusRulerMode;
 import net.osmand.plus.voice.CommandPlayer;
@@ -1364,6 +1366,8 @@ protected boolean setValue(Object prefs, Boolean val) {
 	public final CommonPreference<Boolean> ENABLE_TIME_CONDITIONAL_ROUTING = new BooleanPreference(this, "enable_time_conditional_routing", true).makeProfile();
 
 	public boolean simulateNavigation = false;
+	public String simulateNavigationMode = SimulationMode.PREVIEW.getKey();
+	public float simulateNavigationSpeed = SimulationNavigationSettingFragment.MIN_SPEED;
 
 	public final CommonPreference<Boolean> SHOW_ROUTING_ALARMS = new BooleanPreference(this, "show_routing_alarms", true).makeProfile().cache();
 
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java
index 628dd336191..ab704207bad 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/BaseSettingsFragment.java
@@ -143,7 +143,7 @@ public enum SettingsScreenType {
 		OPEN_PLACE_REVIEWS(OprSettingsFragment.class.getName(), false, null, R.xml.open_place_reviews, R.layout.global_preference_toolbar),
 		DEVELOPMENT_SETTINGS(DevelopmentSettingsFragment.class.getName(), false, null, R.xml.development_settings, R.layout.global_preference_toolbar),
 		BACKUP_AUTHORIZATION(BackupAuthorizationFragment.class.getName(), false, null, R.xml.backup_authorization, R.layout.profile_preference_toolbar),
-		SIMULATION_NAVIGATION(SimulationNavigationSettingFragment.class.getName(), true, ApplyQueryType.SNACK_BAR, R.xml.simulation_navigation_setting, R.layout.profile_preference_toolbar);
+		SIMULATION_NAVIGATION(SimulationNavigationSettingFragment.class.getName(), true, ApplyQueryType.NONE, R.xml.simulation_navigation_setting, R.layout.profile_preference_toolbar_with_switch);
 
 		public final String fragmentName;
 		public final boolean profileDependent;
diff --git a/OsmAnd/src/net/osmand/plus/settings/fragments/SimulationNavigationSettingFragment.java b/OsmAnd/src/net/osmand/plus/settings/fragments/SimulationNavigationSettingFragment.java
index cb9375078e4..787ffac8c8e 100644
--- a/OsmAnd/src/net/osmand/plus/settings/fragments/SimulationNavigationSettingFragment.java
+++ b/OsmAnd/src/net/osmand/plus/settings/fragments/SimulationNavigationSettingFragment.java
@@ -1,9 +1,237 @@
 package net.osmand.plus.settings.fragments;
 
+import static net.osmand.plus.utils.OsmAndFormatter.*;
+import static net.osmand.plus.utils.UiUtilities.CompoundButtonType.TOOLBAR;
+
+import android.graphics.drawable.ColorDrawable;
+import android.os.Bundle;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.ImageView;
+import android.widget.TextView;
+
+import androidx.annotation.ColorRes;
+import androidx.annotation.LayoutRes;
+import androidx.annotation.Nullable;
+import androidx.annotation.StringRes;
+import androidx.appcompat.widget.SwitchCompat;
+import androidx.core.content.ContextCompat;
+import androidx.preference.CheckBoxPreference;
+import androidx.preference.Preference;
+import androidx.preference.PreferenceScreen;
+import androidx.preference.PreferenceViewHolder;
+import androidx.recyclerview.widget.RecyclerView;
+
+import com.google.android.material.slider.Slider;
+
+import net.osmand.plus.R;
+import net.osmand.plus.activities.OsmandActionBarActivity;
+import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.ColorUtilities;
+import net.osmand.plus.utils.UiUtilities;
+
 public class SimulationNavigationSettingFragment extends BaseSettingsFragment {
 
-    @Override
-    protected void setupPreferences() {
+	public static final float MIN_SPEED = 5 / 3.6f;
+	public static final float MAX_SPEED = 900 / 3.6f;
+	private OsmandActionBarActivity activity;
+
+	@Override
+	public void onCreate(Bundle savedInstanceState) {
+		super.onCreate(savedInstanceState);
+		activity = getMyActivity();
+	}
+
+	@Override
+	protected void createToolbar(LayoutInflater inflater, View view) {
+		super.createToolbar(inflater, view);
+
+		view.findViewById(R.id.toolbar_switch_container).setOnClickListener(v -> {
+			settings.simulateNavigation = !settings.simulateNavigation;
+			updateToolbarSwitch(view);
+			updateAllSettings();
+		});
+	}
+
+	protected void updateToolbar() {
+		View view = getView();
+		if (view == null) {
+			return;
+		}
+		ImageView profileIcon = view.findViewById(R.id.profile_icon);
+		profileIcon.setVisibility(View.GONE);
+		TextView profileTitle = view.findViewById(R.id.toolbar_subtitle);
+		profileTitle.setVisibility(View.GONE);
+		updateToolbarSwitch(view);
+	}
+
+	private void updateToolbarSwitch(View view) {
+		boolean checked = settings.simulateNavigation;
+		int color = checked ? getActiveProfileColor() : ContextCompat.getColor(app, R.color.preference_top_switch_off);
+		View switchContainer = view.findViewById(R.id.toolbar_switch_container);
+		AndroidUtils.setBackground(switchContainer, new ColorDrawable(color));
+		SwitchCompat switchView = switchContainer.findViewById(R.id.switchWidget);
+		switchView.setChecked(checked);
+		UiUtilities.setupCompoundButton(switchView, isNightMode(), TOOLBAR);
+		TextView title = switchContainer.findViewById(R.id.switchButtonText);
+		title.setText(checked ? R.string.shared_string_enabled : R.string.shared_string_disabled);
+	}
+
+	@Override
+	protected void setupPreferences() {
+		PreferenceScreen screen = getPreferenceScreen();
+		if (screen == null) {
+			return;
+		}
+		if (settings.simulateNavigation) {
+			setSimulationPref(screen);
+			updateView(screen);
+		} else {
+			screen.removeAll();
+		}
+	}
+
+	@Override
+	public boolean onPreferenceChange(Preference preference, Object newValue) {
+		super.onPreferenceChange(preference, newValue);
+		settings.simulateNavigationMode = preference.getKey();
+		PreferenceScreen screen = getPreferenceScreen();
+		if (screen == null) {
+			return false;
+		}
+		updateView(screen);
+		updateAllSettings();
+		return false;
+	}
+
+	@ColorRes
+	protected int getBackgroundColorRes() {
+		return ColorUtilities.getActivityBgColorId(isNightMode());
+	}
+
+	private void updateView(PreferenceScreen screen) {
+		for (int i = 0; i < screen.getPreferenceCount(); i++) {
+			Preference preference = screen.getPreference(i);
+			if (preference instanceof CheckBoxPreference) {
+				String preferenceKey = preference.getKey();
+				boolean checked = preferenceKey != null && preferenceKey.equals(settings.simulateNavigationMode);
+				((CheckBoxPreference) preference).setChecked(checked);
+			}
+		}
+	}
+
+	private void setSimulationPref(PreferenceScreen screen) {
+		Preference preference = new Preference(activity);
+		preference.setLayoutResource(R.layout.preference_simulation_title);
+		preference.setTitle(R.string.speed_mode);
+		preference.setSelectable(false);
+		screen.addPreference(preference);
+		for (SimulationMode sm : SimulationMode.values()) {
+			preference = new CheckBoxPreference(activity);
+			preference.setKey(sm.key);
+			preference.setTitle(sm.title);
+			preference.setLayoutResource(sm.layout);
+			screen.addPreference(preference);
+		}
+		preference = new Preference(activity);
+		preference.setLayoutResource(R.layout.card_bottom_divider);
+		preference.setSelectable(false);
+		screen.addPreference(preference);
+	}
+
+	@Override
+	public RecyclerView onCreateRecyclerView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
+		RecyclerView recyclerView = super.onCreateRecyclerView(inflater, parent, savedInstanceState);
+		recyclerView.setItemAnimator(null);
+		return recyclerView;
+	}
+
+	@Override
+	protected void onBindPreferenceViewHolder(Preference preference, PreferenceViewHolder holder) {
+		super.onBindPreferenceViewHolder(preference, holder);
+		String key = preference.getKey();
+		if (key == null) {
+			return;
+		}
+		final View itemView = holder.itemView;
+		if (preference instanceof CheckBoxPreference) {
+			SimulationMode mode = SimulationMode.getMode(key);
+			if (mode != null) {
+				TextView description = itemView.findViewById(R.id.description);
+				boolean checked = ((CheckBoxPreference) preference).isChecked();
+				description.setVisibility(checked ? View.VISIBLE : View.GONE);
+				description.setText(mode.description);
+				View slider = itemView.findViewById(R.id.slider_group);
+				if (slider != null) {
+					slider.setVisibility(checked ? View.VISIBLE : View.GONE);
+					if (checked) {
+						setupSpeedSlider(itemView);
+					}
+				}
+				View divider = itemView.findViewById(R.id.divider);
+				if (mode != SimulationMode.REALITY) {
+					divider.setVisibility(View.VISIBLE);
+				} else {
+					divider.setVisibility(View.GONE);
+				}
+			}
+		}
+	}
+
+	private void setupSpeedSlider(View itemView) {
+		float min = MIN_SPEED;
+		float max = MAX_SPEED;
+		float speedValue = settings.simulateNavigationSpeed;
+		final Slider slider = itemView.findViewById(R.id.slider);
+		final TextView title = itemView.findViewById(android.R.id.title);
+		final TextView minSpeed = itemView.findViewById(R.id.min);
+		final TextView maxSpeed = itemView.findViewById(R.id.max);
+
+		minSpeed.setText(getFormattedSpeed(min, app));
+		maxSpeed.setText(getFormattedSpeed(max, app));
+		title.setText(getString(R.string.ltr_or_rtl_combine_via_colon, "Simulate with a given speed",
+				getFormattedSpeed(speedValue, app)));
+		slider.setValueTo(max - min);
+		slider.setValue(speedValue);
+		slider.addOnChangeListener((s, val, fromUser) -> {
+			float value = min + val;
+			title.setText(SimulationNavigationSettingFragment.this.getString(R.string.ltr_or_rtl_combine_via_colon, "Simulate with a given speed",
+					getFormattedSpeed(value, app)));
+			settings.simulateNavigationSpeed = value;
+		});
+		UiUtilities.setupSlider(slider, isNightMode(), getActiveProfileColor());
+	}
+
+	public enum SimulationMode {
+		PREVIEW("preview_mode", R.string.sim_preview_mode_title, R.string.sim_preview_mode_desc, R.layout.preference_simulation_mode_item),
+		CONSTANT("const_mode", R.string.sim_constant_mode_title, R.string.sim_constant_mode_desc, R.layout.preference_simulation_mode_slider),
+		REALITY("real_mode", R.string.sim_real_mode_title, R.string.sim_real_mode_desc, R.layout.preference_simulation_mode_item);
+
+		String key;
+		int title;
+		int description;
+		int layout;
+
+		SimulationMode(String key, @StringRes int title, @StringRes int description, @LayoutRes int layout) {
+			this.key = key;
+			this.title = title;
+			this.description = description;
+			this.layout = layout;
+		}
+
+		@Nullable
+		public static SimulationMode getMode(String key) {
+			for (SimulationMode mode : SimulationMode.values()) {
+				if (mode.key.equals(key)) {
+					return mode;
+				}
+			}
+			return null;
+		}
 
-    }
+		public String getKey() {
+			return key;
+		}
+	}
 }
