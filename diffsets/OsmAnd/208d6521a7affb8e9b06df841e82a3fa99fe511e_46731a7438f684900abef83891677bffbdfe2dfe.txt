diff --git a/OsmAnd/src/net/osmand/plus/osmodroid/OsMoDroidLayer.java b/OsmAnd/src/net/osmand/plus/osmodroid/OsMoDroidLayer.java
index 7ad675e0766..9b1b5a7342c 100644
--- a/OsmAnd/src/net/osmand/plus/osmodroid/OsMoDroidLayer.java
+++ b/OsmAnd/src/net/osmand/plus/osmodroid/OsMoDroidLayer.java
@@ -124,7 +124,6 @@ public void initLayer(OsmandMapTileView view) {
 		opIcon = BitmapFactory.decodeResource(view.getResources(), R.drawable.bicycle_location);
 		osMoDroidPointArrayList = myOsMoDroidPlugin.getOsMoDroidPointArrayList(layerId);
 		osMoDroidFixedPointArrayList = myOsMoDroidPlugin.getOsMoDroidFixedPointArrayList(layerId);
-		myOsMoDroidPlugin.getGpxArrayList(layerId);
 		initUI();
 	}
 	
@@ -250,13 +249,13 @@ private void drawSegment(Canvas canvas, RotatedTileBox tb, List<WptPt> l, int st
 	public void onDraw(Canvas canvas, RotatedTileBox tileBox, DrawSettings settings) {}
 
 	public void getOsMoDroidPointFromPoint(RotatedTileBox tb,PointF point, List<? super OsMoDroidPoint> om) {
-		if (myOsMoDroidPlugin.getOsMoDroidPointArrayList(layerId) != null) {
+		if (osMoDroidPointArrayList != null) {
 			int ex = (int) point.x;
 			int ey = (int) point.y;
 
 			try {
-				for (int i = 0; i < myOsMoDroidPlugin.getOsMoDroidPointArrayList(layerId).size(); i++) {
-					OsMoDroidPoint n = myOsMoDroidPlugin.getOsMoDroidPointArrayList(layerId).get(i);
+				for (int i = 0; i < osMoDroidPointArrayList.size(); i++) {
+					OsMoDroidPoint n = osMoDroidPointArrayList.get(i);
 					if (!om.contains(n)) {
 						int x = (int) tb.getPixXFromLatLon(n.latlon.getLatitude(), n.latlon.getLongitude());
 						int y = (int) tb.getPixYFromLatLon(n.latlon.getLatitude(), n.latlon.getLongitude());
@@ -270,13 +269,13 @@ public void getOsMoDroidPointFromPoint(RotatedTileBox tb,PointF point, List<? su
 				// synchronized block
 			}
 		}
-		if (myOsMoDroidPlugin.getOsMoDroidFixedPointArrayList(layerId) != null) {
+		if (osMoDroidFixedPointArrayList != null) {
 			int ex = (int) point.x;
 			int ey = (int) point.y;
 
 			try {
-				for (int i = 0; i < myOsMoDroidPlugin.getOsMoDroidFixedPointArrayList(layerId).size(); i++) {
-					OsMoDroidPoint n = myOsMoDroidPlugin.getOsMoDroidFixedPointArrayList(layerId).get(i);
+				for (int i = 0; i <osMoDroidFixedPointArrayList.size(); i++) {
+					OsMoDroidPoint n =osMoDroidFixedPointArrayList.get(i);
 					if (!om.contains(n)) {
 						int x = (int) tb.getPixXFromLatLon(n.latlon.getLatitude(), n.latlon.getLongitude());
 						int y = (int) tb.getPixYFromLatLon(n.latlon.getLatitude(), n.latlon.getLongitude());
diff --git a/OsmAnd/src/net/osmand/plus/osmodroid/OsMoDroidPlugin.java b/OsmAnd/src/net/osmand/plus/osmodroid/OsMoDroidPlugin.java
index 01ce0cb164e..64d146797e4 100644
--- a/OsmAnd/src/net/osmand/plus/osmodroid/OsMoDroidPlugin.java
+++ b/OsmAnd/src/net/osmand/plus/osmodroid/OsMoDroidPlugin.java
@@ -110,7 +110,7 @@ public void updateLayers(OsmandMapTileView mapView, MapActivity activity) {
 	private OsMoDroidLayer osmoDroidLayer;
 	protected boolean connected = false;
 	ArrayList<OsMoDroidLayer> osmoDroidLayerList = new ArrayList<OsMoDroidLayer>();
-	private AsyncTask<Void, Void, ArrayList<ColoredGPX>> task;
+	private AsyncTask<Void, Void, Void> task;
 
 	public ArrayList<OsMoDroidPoint> getOsMoDroidPointArrayList(int id) {
 		ArrayList<OsMoDroidPoint> result = new ArrayList<OsMoDroidPoint>();
@@ -214,6 +214,7 @@ void requestLayersFromOsMoDroid(MapActivity activity) {
 
 			log.error(e.getMessage(), e);
 		}
+		 getGpxArrayList(); 
 	}
 
 	@Override
@@ -316,51 +317,35 @@ public void onContextMenuClick(int itemId, int pos, boolean isChecked,
 		}).reg();
 	}
 
-	public void getGpxArrayList(final int id) {
-		final ArrayList<ColoredGPX> result = new ArrayList<ColoredGPX>();
+	public void getGpxArrayList() {
 		if(task!=null){
 			task.cancel(true);
 		}
-		 task = new AsyncTask<Void, Void, ArrayList<ColoredGPX>>() {
-			@Override
-			protected ArrayList<ColoredGPX> doInBackground(Void... params) {
+		 task = new AsyncTask<Void, Void, Void>() {
+		@Override
+			protected Void doInBackground(Void... params) {
+				for (OsMoDroidLayer l : osmoDroidLayerList){
 				ArrayList<ColoredGPX> temp = new ArrayList<ColoredGPX>();
 				try {
-					for (int i = 0; i < mIRemoteService.getNumberOfGpx(id); i++) {
+					for (int i = 0; i < mIRemoteService.getNumberOfGpx(l.layerId); i++) {
 						ColoredGPX cg = new ColoredGPX();
-						cg.gpxFile =  GPXUtilities.loadGPXFile(app, new File(mIRemoteService.getGpxFile(id, i)), false);
-						cg.color = mIRemoteService.getGpxColor(id, i); 
+						cg.gpxFile =  GPXUtilities.loadGPXFile(app, new File(mIRemoteService.getGpxFile(l.layerId, i)), false);
+						cg.color = mIRemoteService.getGpxColor(l.layerId, i); 
 						temp.add(cg);
 					}
-					return temp;
+					l.inGPXFilelist(temp);
 				} catch (RemoteException e) {
 					log.error(e.getMessage(), e);
 				}
-				return temp;					
-				}
-
-			@Override
-			protected void onPostExecute(ArrayList<ColoredGPX> backgroundresult) {
-				if(backgroundresult!=null){
-					try {
-						for (OsMoDroidLayer l : osmoDroidLayerList){
-							if (l.layerId==id){
-								l.inGPXFilelist(backgroundresult);
-							}
-						}
-					} catch (ConcurrentModificationException e) {
-						log.error(e.getMessage(), e);
-					}
-					
-					
-					
+				 catch (ConcurrentModificationException e) {
+					log.error(e.getMessage(), e);
 				}
+				
+			}
+				return null;
+		
 			}
 		};
 		task.execute();
-		
-		
-		
-		
 	}
 }
diff --git a/SherlockBar/project.properties b/SherlockBar/project.properties
index 616f300c31f..0e58ae1c0da 100644
--- a/SherlockBar/project.properties
+++ b/SherlockBar/project.properties
@@ -9,4 +9,4 @@
 
 android.library=true
 # Project target.
-target=android-16
+target=android-17
