diff --git a/OsmAnd/res/layout/fragment_plan_route_options_bottom_sheet_dialog.xml b/OsmAnd/res/layout/fragment_plan_route_options_bottom_sheet_dialog.xml
deleted file mode 100644
index 1c9345234f8..00000000000
--- a/OsmAnd/res/layout/fragment_plan_route_options_bottom_sheet_dialog.xml
+++ /dev/null
@@ -1,258 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<LinearLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:osmand="http://schemas.android.com/apk/res-auto"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    android:background="?attr/bg_color"
-    android:orientation="vertical">
-
-    <ScrollView
-        android:id="@+id/sort_by_scroll_view"
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content">
-
-        <LinearLayout
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:orientation="vertical"
-            android:paddingBottom="@dimen/bottom_sheet_content_padding_small">
-
-            <net.osmand.plus.widgets.TextViewEx
-                android:id="@+id/title"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_title_height"
-                android:gravity="center_vertical"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding"
-                android:text="@string/shared_string_options"
-                android:textAppearance="@style/TextAppearance.ListItemTitle"
-                osmand:typeface="@string/font_roboto_medium"/>
-
-            <LinearLayout
-                android:id="@+id/select_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:gravity="center_vertical"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding"
-                android:visibility="gone"
-                tools:visibility="visible">
-
-                <ImageView
-                    android:id="@+id/select_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_select_all"/>
-
-                <TextView
-                    android:id="@+id/select_title"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:ellipsize="end"
-                    android:maxLines="1"
-                    android:textAppearance="@style/TextAppearance.ListItemTitle"
-                    tools:text="Select all"/>
-            </LinearLayout>
-
-            <LinearLayout
-                android:id="@+id/navigate_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:gravity="center_vertical"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding">
-
-                <ImageView
-                    android:id="@+id/navigate_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/map_directions"/>
-
-                <TextView
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:ellipsize="end"
-                    android:maxLines="1"
-                    android:text="@string/get_directions"
-                    android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-            </LinearLayout>
-
-            <LinearLayout
-                android:id="@+id/make_round_trip_row"
-                android:layout_width="match_parent"
-                android:layout_height="wrap_content"
-                android:background="?attr/selectableItemBackground"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding">
-
-                <ImageView
-                    android:id="@+id/make_round_trip_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="center_vertical"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_trip_round"/>
-
-                <LinearLayout
-                    android:layout_width="0dp"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="center_vertical"
-                    android:layout_weight="1"
-                    android:orientation="vertical">
-
-                    <TextView
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:ellipsize="end"
-                        android:maxLines="1"
-                        android:text="@string/make_round_trip"
-                        android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-
-                    <TextView
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:ellipsize="end"
-                        android:maxLines="2"
-                        android:text="@string/make_round_trip_descr"
-                        android:textColor="?android:textColorSecondary"
-                        android:textSize="@dimen/default_desc_text_size"/>
-                </LinearLayout>
-
-                <android.support.v7.widget.SwitchCompat
-                    android:id="@+id/make_round_trip_switch"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_gravity="center_vertical"
-                    android:layout_marginLeft="@dimen/bottom_sheet_content_margin"
-                    android:layout_marginStart="@dimen/bottom_sheet_content_margin"
-                    android:background="@null"
-                    android:clickable="false"
-                    android:focusable="false"
-                    android:focusableInTouchMode="false"/>
-            </LinearLayout>
-
-            <View
-                android:layout_width="match_parent"
-                android:layout_height="1dp"
-                android:layout_marginTop="@dimen/bottom_sheet_content_padding_small"
-                android:background="?attr/dashboard_divider"/>
-
-            <net.osmand.plus.widgets.TextViewEx
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_title_height"
-                android:gravity="center_vertical"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding"
-                android:text="@string/sort_by"
-                android:textAllCaps="true"
-                android:textColor="?android:textColorSecondary"
-                android:textSize="@dimen/default_desc_text_size"
-                osmand:typeface="@string/font_roboto_medium"/>
-
-            <LinearLayout
-                android:id="@+id/door_to_door_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:gravity="center_vertical"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding">
-
-                <ImageView
-                    android:id="@+id/door_to_door_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_sort_door_to_door"/>
-
-                <TextView
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:ellipsize="end"
-                    android:maxLines="1"
-                    android:text="@string/intermediate_items_sort_by_distance"
-                    android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-            </LinearLayout>
-
-            <LinearLayout
-                android:id="@+id/reverse_row"
-                android:layout_width="match_parent"
-                android:layout_height="@dimen/bottom_sheet_list_item_height"
-                android:background="?attr/selectableItemBackground"
-                android:gravity="center_vertical"
-                android:minHeight="@dimen/bottom_sheet_list_item_height"
-                android:paddingEnd="@dimen/content_padding"
-                android:paddingLeft="@dimen/content_padding"
-                android:paddingRight="@dimen/content_padding"
-                android:paddingStart="@dimen/content_padding">
-
-                <ImageView
-                    android:id="@+id/reverse_icon"
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:layout_marginEnd="@dimen/bottom_sheet_icon_margin"
-                    android:layout_marginRight="@dimen/bottom_sheet_icon_margin"
-                    tools:src="@drawable/ic_action_sort_reverse_order"/>
-
-                <TextView
-                    android:layout_width="wrap_content"
-                    android:layout_height="wrap_content"
-                    android:ellipsize="end"
-                    android:maxLines="1"
-                    android:text="@string/shared_string_reverse_order"
-                    android:textAppearance="@style/TextAppearance.ListItemTitle"/>
-            </LinearLayout>
-
-        </LinearLayout>
-
-    </ScrollView>
-
-    <View
-        android:layout_width="match_parent"
-        android:layout_height="1dp"
-        android:background="?attr/dashboard_divider"/>
-
-    <FrameLayout
-        android:id="@+id/cancel_row"
-        android:layout_width="match_parent"
-        android:layout_height="@dimen/bottom_sheet_cancel_button_height"
-        android:background="?attr/selectableItemBackground">
-
-        <TextView
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_gravity="center"
-            android:text="@string/shared_string_close"
-            android:textAllCaps="true"
-            android:textColor="?attr/color_dialog_buttons"
-            android:textSize="@dimen/default_desc_text_size"
-            android:textStyle="bold"/>
-    </FrameLayout>
-
-</LinearLayout>
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/PlanRouteFragment.java b/OsmAnd/src/net/osmand/plus/mapmarkers/PlanRouteFragment.java
index fab4fcc504c..a14e2e306ae 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/PlanRouteFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/PlanRouteFragment.java
@@ -150,9 +150,7 @@ public void showMarkersRouteOnMap(boolean adjustMap) {
 		}
 		Fragment optionsFragment = fragmentManager.findFragmentByTag(PlanRouteOptionsBottomSheetDialogFragment.TAG);
 		if (optionsFragment != null) {
-			PlanRouteOptionsBottomSheetDialogFragment fragment = (PlanRouteOptionsBottomSheetDialogFragment) optionsFragment;
-			fragment.setSelectAll(!(selectedCount == markersHelper.getMapMarkers().size() && markersHelper.isStartFromMyLocation()));
-			fragment.setListener(createOptionsFragmentListener());
+			((PlanRouteOptionsBottomSheetDialogFragment) optionsFragment).setListener(createOptionsFragmentListener());
 		}
 
 		toolbarHeight = mapActivity.getResources().getDimensionPixelSize(R.dimen.dashboard_map_toolbar);
@@ -722,9 +720,12 @@ private void exitPlanRouteMode() {
 	private void optionsOnClick() {
 		MapActivity mapActivity = getMapActivity();
 		if (mapActivity != null) {
+			Bundle args = new Bundle();
+			args.putBoolean(PlanRouteOptionsBottomSheetDialogFragment.SELECT_ALL_KEY,
+					!(selectedCount == markersHelper.getMapMarkers().size() && markersHelper.isStartFromMyLocation()));
 			PlanRouteOptionsBottomSheetDialogFragment fragment = new PlanRouteOptionsBottomSheetDialogFragment();
+			fragment.setArguments(args);
 			fragment.setUsedOnMap(true);
-			fragment.setSelectAll(!(selectedCount == markersHelper.getMapMarkers().size() && markersHelper.isStartFromMyLocation()));
 			fragment.setListener(createOptionsFragmentListener());
 			fragment.show(mapActivity.getSupportFragmentManager(), PlanRouteOptionsBottomSheetDialogFragment.TAG);
 		}
diff --git a/OsmAnd/src/net/osmand/plus/mapmarkers/PlanRouteOptionsBottomSheetDialogFragment.java b/OsmAnd/src/net/osmand/plus/mapmarkers/PlanRouteOptionsBottomSheetDialogFragment.java
index 53be218d7ca..46f647a985c 100644
--- a/OsmAnd/src/net/osmand/plus/mapmarkers/PlanRouteOptionsBottomSheetDialogFragment.java
+++ b/OsmAnd/src/net/osmand/plus/mapmarkers/PlanRouteOptionsBottomSheetDialogFragment.java
@@ -1,116 +1,132 @@
 package net.osmand.plus.mapmarkers;
 
 import android.os.Bundle;
-import android.support.v4.content.ContextCompat;
-import android.view.ContextThemeWrapper;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
-import android.widget.CompoundButton;
-import android.widget.ImageView;
-import android.widget.TextView;
 
 import net.osmand.plus.R;
 import net.osmand.plus.base.MenuBottomSheetDialogFragment;
+import net.osmand.plus.base.bottomsheetmenu.BaseBottomSheetItem;
+import net.osmand.plus.base.bottomsheetmenu.BottomSheetItemWithCompoundButton;
+import net.osmand.plus.base.bottomsheetmenu.SimpleBottomSheetItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.DescriptionItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.DividerItem;
+import net.osmand.plus.base.bottomsheetmenu.simpleitems.TitleItem;
 import net.osmand.plus.helpers.AndroidUiHelper;
 
 public class PlanRouteOptionsBottomSheetDialogFragment extends MenuBottomSheetDialogFragment {
 
-	public final static String TAG = "PlanRouteOptionsBottomSheetDialogFragment";
+	public static final String TAG = "PlanRouteOptionsBottomSheetDialogFragment";
+
+	public static final String SELECT_ALL_KEY = "select_all";
 
 	private PlanRouteOptionsFragmentListener listener;
-	private boolean selectAll;
 
 	public void setListener(PlanRouteOptionsFragmentListener listener) {
 		this.listener = listener;
 	}
 
-	public void setSelectAll(boolean selectAll) {
-		this.selectAll = selectAll;
-	}
-
 	@Override
 	public View createMenuItems(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
-		boolean portrait = AndroidUiHelper.isOrientationPortrait(getActivity());
-		final int themeRes = nightMode ? R.style.OsmandDarkTheme : R.style.OsmandLightTheme;
-
-		final View mainView = View.inflate(new ContextThemeWrapper(getContext(), themeRes), R.layout.fragment_plan_route_options_bottom_sheet_dialog, container);
-
-		if (nightMode) {
-			((TextView) mainView.findViewById(R.id.title)).setTextColor(ContextCompat.getColor(getActivity(), R.color.ctx_menu_info_text_dark));
+		items.add(new TitleItem(getString(R.string.shared_string_options)));
+
+		if (!AndroidUiHelper.isOrientationPortrait(getActivity())) {
+			boolean selectAll = getArguments().getBoolean(SELECT_ALL_KEY);
+
+			BaseBottomSheetItem selectItem = new SimpleBottomSheetItem.Builder()
+					.setIcon(getContentIcon(selectAll ? R.drawable.ic_action_select_all : R.drawable.ic_action_deselect_all))
+					.setTitle(getString(selectAll ? R.string.shared_string_select_all : R.string.shared_string_deselect_all))
+					.setLayoutId(R.layout.bottom_sheet_item_simple)
+					.setOnClickListener(new View.OnClickListener() {
+						@Override
+						public void onClick(View v) {
+							if (listener != null) {
+								listener.selectOnClick();
+							}
+							dismiss();
+						}
+					})
+					.create();
+			items.add(selectItem);
 		}
 
-		((ImageView) mainView.findViewById(R.id.navigate_icon)).setImageDrawable(getContentIcon(R.drawable.ic_action_gdirections_dark));
-		((ImageView) mainView.findViewById(R.id.make_round_trip_icon)).setImageDrawable(getContentIcon(R.drawable.ic_action_trip_round));
-		((ImageView) mainView.findViewById(R.id.door_to_door_icon)).setImageDrawable(getContentIcon(R.drawable.ic_action_sort_door_to_door));
-		((ImageView) mainView.findViewById(R.id.reverse_icon)).setImageDrawable(getContentIcon(R.drawable.ic_action_sort_reverse_order));
-
-		((CompoundButton) mainView.findViewById(R.id.make_round_trip_switch)).setChecked(getMyApplication().getSettings().ROUTE_MAP_MARKERS_ROUND_TRIP.get());
-
-		if (!portrait) {
-			((ImageView) mainView.findViewById(R.id.select_icon))
-					.setImageDrawable(getContentIcon(selectAll ? R.drawable.ic_action_select_all : R.drawable.ic_action_deselect_all));
-
-			((TextView) mainView.findViewById(R.id.select_title))
-					.setText(getString(selectAll ? R.string.shared_string_select_all : R.string.shared_string_deselect_all));
-
-			View selectRow = mainView.findViewById(R.id.select_row);
-			selectRow.setVisibility(View.VISIBLE);
-			selectRow.setOnClickListener(new View.OnClickListener() {
-				@Override
-				public void onClick(View view) {
-					listener.selectOnClick();
-					dismiss();
-				}
-			});
-		}
-		mainView.findViewById(R.id.navigate_row).setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				if (listener != null) {
-					listener.navigateOnClick();
-					dismiss();
-				}
-			}
-		});
-		mainView.findViewById(R.id.make_round_trip_row).setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				if (listener != null) {
-					listener.makeRoundTripOnClick();
-					dismiss();
-				}
-			}
-		});
-		mainView.findViewById(R.id.door_to_door_row).setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				if (listener != null) {
-					listener.doorToDoorOnClick();
-					dismiss();
-				}
-			}
-		});
-		mainView.findViewById(R.id.reverse_row).setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				if (listener != null) {
-					listener.reverseOrderOnClick();
-					dismiss();
-				}
-			}
-		});
-
-		mainView.findViewById(R.id.cancel_row).setOnClickListener(new View.OnClickListener() {
-			@Override
-			public void onClick(View view) {
-				dismiss();
-			}
-		});
-
-		setupHeightAndBackground(mainView, R.id.sort_by_scroll_view);
-
-		return mainView;
+		BaseBottomSheetItem navigateItem = new SimpleBottomSheetItem.Builder()
+				.setIcon(getContentIcon(R.drawable.ic_action_gdirections_dark))
+				.setTitle(getString(R.string.get_directions))
+				.setLayoutId(R.layout.bottom_sheet_item_simple)
+				.setOnClickListener(new View.OnClickListener() {
+					@Override
+					public void onClick(View v) {
+						if (listener != null) {
+							listener.navigateOnClick();
+						}
+						dismiss();
+					}
+				})
+				.create();
+		items.add(navigateItem);
+
+		BaseBottomSheetItem roundTripItem = new BottomSheetItemWithCompoundButton.Builder()
+				.setChecked(getMyApplication().getSettings().ROUTE_MAP_MARKERS_ROUND_TRIP.get())
+				.setDescription(getString(R.string.make_round_trip_descr))
+				.setIcon(getContentIcon(R.drawable.ic_action_trip_round))
+				.setTitle(getString(R.string.make_round_trip))
+				.setLayoutId(R.layout.bottom_sheet_item_with_descr_and_switch_56dp)
+				.setOnClickListener(new View.OnClickListener() {
+					@Override
+					public void onClick(View v) {
+						if (listener != null) {
+							listener.makeRoundTripOnClick();
+						}
+						dismiss();
+					}
+				})
+				.create();
+		items.add(roundTripItem);
+
+		items.add(new DividerItem(getContext()));
+
+		items.add(new DescriptionItem(getString(R.string.sort_by)));
+
+		BaseBottomSheetItem doorToDoorItem = new SimpleBottomSheetItem.Builder()
+				.setIcon(getContentIcon(R.drawable.ic_action_sort_door_to_door))
+				.setTitle(getString(R.string.intermediate_items_sort_by_distance))
+				.setLayoutId(R.layout.bottom_sheet_item_simple)
+				.setOnClickListener(new View.OnClickListener() {
+					@Override
+					public void onClick(View v) {
+						if (listener != null) {
+							listener.doorToDoorOnClick();
+						}
+						dismiss();
+					}
+				})
+				.create();
+		items.add(doorToDoorItem);
+
+		BaseBottomSheetItem reversItem = new SimpleBottomSheetItem.Builder()
+				.setIcon(getContentIcon(R.drawable.ic_action_sort_reverse_order))
+				.setTitle(getString(R.string.shared_string_reverse_order))
+				.setLayoutId(R.layout.bottom_sheet_item_simple)
+				.setOnClickListener(new View.OnClickListener() {
+					@Override
+					public void onClick(View v) {
+						if (listener != null) {
+							listener.reverseOrderOnClick();
+						}
+						dismiss();
+					}
+				})
+				.create();
+		items.add(reversItem);
+
+		return null;
+	}
+
+	@Override
+	protected int getCloseRowTextId() {
+		return R.string.shared_string_close;
 	}
 
 	interface PlanRouteOptionsFragmentListener {
