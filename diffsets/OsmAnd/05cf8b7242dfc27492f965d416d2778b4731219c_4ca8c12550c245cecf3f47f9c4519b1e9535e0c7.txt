diff --git a/OsmAnd/build-common.gradle b/OsmAnd/build-common.gradle
index 3c444891456..573f4fa29a7 100644
--- a/OsmAnd/build-common.gradle
+++ b/OsmAnd/build-common.gradle
@@ -47,7 +47,9 @@ android {
 			assets.srcDirs = ["assets"]
 		}
 		androidTest {
-			java.srcDirs = ["tests"]
+			java.srcDirs = ["test/java"]
+			res.srcDirs = ["test/res"]
+			assets.srcDirs = ["test/assets"]
 		}
 		legacy {
 			jniLibs.srcDirs = ["libc++"]
@@ -274,6 +276,15 @@ task copyWidgetIcons(type: Sync) {
 	}
 }
 
+task collectTestResources(type: Copy) {
+	into "test/assets/"
+	from("../../resources/test-resources/ui/") {
+		include "*"
+		include "/search/*"
+		include "/routing/*"
+	}
+}
+
 task collectExternalResources {
 	dependsOn collectVoiceAssets,
 			collectFonts,
@@ -291,7 +302,8 @@ task collectExternalResources {
 			copyHeightmapFiles,
 			copyPoiCategories,
 			downloadWorldMiniBasemap,
-			downloadDefaultWikivoyage
+			downloadDefaultWikivoyage,
+			collectTestResources
 }
 
 // Legacy core build
@@ -405,13 +417,13 @@ dependencies {
 
 	implementation 'com.google.android.gms:play-services-location:21.0.1'
 
-	implementation "androidx.tracing:tracing:1.1.0"
-	debugImplementation 'androidx.test:monitor:1.6.1'
+	//implementation "androidx.tracing:tracing:1.1.0"
+	//debugImplementation 'androidx.test:monitor:1.6.1'
 	androidTestImplementation "androidx.test:runner:1.5.2"
 	androidTestImplementation "androidx.test:rules:1.5.0"
 	androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
-	debugImplementation("androidx.test:core:1.5.0")
-	androidTestImplementation 'androidx.test.ext:junit:1.2.0-alpha02'
+	//debugImplementation("androidx.test:core:1.5.0")
+	androidTestImplementation 'androidx.test.ext:junit:1.1.5'
 	androidTestImplementation ('androidx.test.espresso:espresso-contrib:3.5.1') {
 		exclude module: "protobuf-lite"
 	}
diff --git a/OsmAnd/src/net/osmand/plus/importfiles/ImportHelper.java b/OsmAnd/src/net/osmand/plus/importfiles/ImportHelper.java
index f06965e8b83..9189f6877e0 100644
--- a/OsmAnd/src/net/osmand/plus/importfiles/ImportHelper.java
+++ b/OsmAnd/src/net/osmand/plus/importfiles/ImportHelper.java
@@ -380,26 +380,43 @@ public static String copyFile(@NonNull OsmandApplication app, @NonNull File dest
 		}
 		String error = null;
 		InputStream in = null;
-		OutputStream out = null;
-		ZipInputStream zis = null;
 		try {
 			in = app.getContentResolver().openInputStream(uri);
 			if (in != null) {
-				if (unzip) {
-					ZipEntry entry;
-					zis = new ZipInputStream(in);
-					String extension = Algorithms.getFileExtension(dest);
-					while ((entry = zis.getNextEntry()) != null) {
-						if (entry.getName().endsWith(extension)) {
-							out = new FileOutputStream(dest);
-							Algorithms.streamCopy(zis, out);
-							break;
-						}
+				error = copyFile(app, dest, in, overwrite, unzip);
+			}
+		} catch (IOException | SecurityException e) {
+			e.printStackTrace();
+			error = e.getMessage();
+		} finally {
+			Algorithms.closeStream(in);
+		}
+		return error;
+	}
+
+	@Nullable
+	public static String copyFile(@NonNull OsmandApplication app, @NonNull File dest, @NonNull InputStream in, boolean overwrite, boolean unzip) {
+		if (dest.exists() && !overwrite) {
+			return app.getString(R.string.file_with_name_already_exists);
+		}
+		String error = null;
+		OutputStream out = null;
+		ZipInputStream zis = null;
+		try {
+			if (unzip) {
+				ZipEntry entry;
+				zis = new ZipInputStream(in);
+				String extension = Algorithms.getFileExtension(dest);
+				while ((entry = zis.getNextEntry()) != null) {
+					if (entry.getName().endsWith(extension)) {
+						out = new FileOutputStream(dest);
+						Algorithms.streamCopy(zis, out);
+						break;
 					}
-				} else {
-					out = new FileOutputStream(dest);
-					Algorithms.streamCopy(in, out);
 				}
+			} else {
+				out = new FileOutputStream(dest);
+				Algorithms.streamCopy(in, out);
 			}
 		} catch (IOException | SecurityException e) {
 			e.printStackTrace();
diff --git a/OsmAnd/src/net/osmand/plus/importfiles/SaveImportedGpxListener.java b/OsmAnd/src/net/osmand/plus/importfiles/SaveImportedGpxListener.java
index 23b236e6622..3a499b7572f 100644
--- a/OsmAnd/src/net/osmand/plus/importfiles/SaveImportedGpxListener.java
+++ b/OsmAnd/src/net/osmand/plus/importfiles/SaveImportedGpxListener.java
@@ -9,9 +9,9 @@
 
 public interface SaveImportedGpxListener {
 
-	void onGpxSavingStarted();
+	default void onGpxSavingStarted() {}
 
-	void onGpxSaved(@Nullable String error, @NonNull GPXFile gpxFile);
+	default void onGpxSaved(@Nullable String error, @NonNull GPXFile gpxFile) {}
 
-	void onGpxSavingFinished(@NonNull List<String> warnings);
+	default void onGpxSavingFinished(@NonNull List<String> warnings) {}
 }
\ No newline at end of file
diff --git a/OsmAnd/test/assets/.gitignore b/OsmAnd/test/assets/.gitignore
new file mode 100644
index 00000000000..711c0722704
--- /dev/null
+++ b/OsmAnd/test/assets/.gitignore
@@ -0,0 +1,9 @@
+/*.json
+/osm_live/*.json
+/search/*
+/routing/*
+*.obf
+*.osm
+*.gpx
+phrases.xml
+*.obf.gz
\ No newline at end of file
diff --git a/OsmAnd/tests/net/osmand/plus/activities/CrosswalkWarningTooEarlyTest.java b/OsmAnd/test/java/net/osmand/test/activities/CrosswalkWarningTooEarlyTest.java
similarity index 78%
rename from OsmAnd/tests/net/osmand/plus/activities/CrosswalkWarningTooEarlyTest.java
rename to OsmAnd/test/java/net/osmand/test/activities/CrosswalkWarningTooEarlyTest.java
index c9bd732a38a..e1abb148a81 100644
--- a/OsmAnd/tests/net/osmand/plus/activities/CrosswalkWarningTooEarlyTest.java
+++ b/OsmAnd/test/java/net/osmand/test/activities/CrosswalkWarningTooEarlyTest.java
@@ -1,33 +1,39 @@
-package net.osmand.plus.activities;
+package net.osmand.test.activities;
 
 
+import static androidx.test.espresso.Espresso.onView;
+import static androidx.test.espresso.assertion.ViewAssertions.matches;
+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;
+import static androidx.test.espresso.matcher.ViewMatchers.withContentDescription;
+import static androidx.test.espresso.matcher.ViewMatchers.withId;
+import static net.osmand.test.common.Interactions.openNavigationMenu;
+import static net.osmand.test.common.Interactions.setRouteEnd;
+import static net.osmand.test.common.Interactions.setRouteStart;
+import static net.osmand.test.common.Interactions.startNavigation;
+import static net.osmand.test.common.OsmAndDialogInteractions.skipAppStartDialogs;
+import static org.hamcrest.Matchers.allOf;
+import static org.hamcrest.Matchers.not;
+
+import androidx.annotation.NonNull;
+import androidx.test.espresso.ViewInteraction;
+import androidx.test.ext.junit.rules.ActivityScenarioRule;
+import androidx.test.ext.junit.runners.AndroidJUnit4;
+import androidx.test.filters.LargeTest;
+
 import net.osmand.data.LatLon;
 import net.osmand.plus.R;
-import net.osmand.plus.common.AndroidTest;
+import net.osmand.plus.activities.MapActivity;
 import net.osmand.plus.routing.RoutingHelper;
+import net.osmand.test.common.AndroidTest;
+import net.osmand.test.common.ResourcesImporter;
 
 import org.junit.Before;
 import org.junit.Rule;
 import org.junit.Test;
 import org.junit.runner.RunWith;
 
-import androidx.annotation.NonNull;
-import androidx.test.espresso.ViewInteraction;
-import androidx.test.ext.junit.rules.ActivityScenarioRule;
-import androidx.test.ext.junit.runners.AndroidJUnit4;
-import androidx.test.filters.LargeTest;
-
-import static androidx.test.espresso.Espresso.onView;
-import static androidx.test.espresso.assertion.ViewAssertions.matches;
-import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;
-import static androidx.test.espresso.matcher.ViewMatchers.withContentDescription;
-import static androidx.test.espresso.matcher.ViewMatchers.withId;
-import static net.osmand.plus.common.Interactions.openNavigationMenu;
-import static net.osmand.plus.common.Interactions.setRouteEnd;
-import static net.osmand.plus.common.Interactions.setRouteStart;
-import static net.osmand.plus.common.Interactions.startNavigation;
-import static org.hamcrest.Matchers.allOf;
-import static org.hamcrest.Matchers.not;
+import java.io.IOException;
+import java.util.Collections;
 
 @LargeTest
 @RunWith(AndroidJUnit4.class)
@@ -45,11 +51,18 @@ public class CrosswalkWarningTooEarlyTest extends AndroidTest {
     public void setup() {
         super.setup();
         enableSimulation(80);
+	    try {
+		    ResourcesImporter.importObfAssets(app, Collections.singletonList("alarm_test.obf"));
+	    } catch (IOException e) {
+		    throw new RuntimeException(e);
+	    }
     }
 
     @Test
 	public void crosswalkWarningTooEarlyTest() throws Throwable {
-        openNavigationMenu();
+	    skipAppStartDialogs(app);
+
+		openNavigationMenu();
 		setRouteStart(START);
 		setRouteEnd(END);
         startNavigation();
diff --git a/OsmAnd/tests/net/osmand/plus/activities/RouteRecalculationFromBeginningTest.java b/OsmAnd/test/java/net/osmand/test/activities/RouteRecalculationFromBeginningTest.java
similarity index 82%
rename from OsmAnd/tests/net/osmand/plus/activities/RouteRecalculationFromBeginningTest.java
rename to OsmAnd/test/java/net/osmand/test/activities/RouteRecalculationFromBeginningTest.java
index 8ad83718ac2..ec22b517864 100644
--- a/OsmAnd/tests/net/osmand/plus/activities/RouteRecalculationFromBeginningTest.java
+++ b/OsmAnd/test/java/net/osmand/test/activities/RouteRecalculationFromBeginningTest.java
@@ -1,13 +1,38 @@
-package net.osmand.plus.activities;
+package net.osmand.test.activities;
+
+import static androidx.test.espresso.Espresso.onView;
+import static androidx.test.espresso.action.ViewActions.click;
+import static androidx.test.espresso.action.ViewActions.scrollTo;
+import static androidx.test.espresso.contrib.RecyclerViewActions.actionOnItemAtPosition;
+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;
+import static androidx.test.espresso.matcher.ViewMatchers.withContentDescription;
+import static androidx.test.espresso.matcher.ViewMatchers.withId;
+import static net.osmand.test.common.EspressoUtils.waitForView;
+import static net.osmand.test.common.Interactions.openNavigationMenu;
+import static net.osmand.test.common.Interactions.setRouteStart;
+import static net.osmand.test.common.Interactions.startNavigation;
+import static net.osmand.test.common.Matchers.childAtPosition;
+import static net.osmand.test.common.OsmAndDialogInteractions.skipAppStartDialogs;
+import static org.hamcrest.Matchers.allOf;
 
 import android.os.Handler;
 import android.os.Looper;
 
+import androidx.annotation.NonNull;
+import androidx.test.espresso.Espresso;
+import androidx.test.espresso.IdlingPolicies;
+import androidx.test.espresso.ViewInteraction;
+import androidx.test.ext.junit.rules.ActivityScenarioRule;
+import androidx.test.ext.junit.runners.AndroidJUnit4;
+import androidx.test.filters.LargeTest;
+
 import net.osmand.data.LatLon;
 import net.osmand.plus.OsmandApplication;
 import net.osmand.plus.R;
-import net.osmand.plus.common.AndroidTest;
-import net.osmand.plus.common.BaseIdlingResource;
+import net.osmand.plus.activities.MapActivity;
+import net.osmand.test.common.AndroidTest;
+import net.osmand.test.common.BaseIdlingResource;
+import net.osmand.test.common.ResourcesImporter;
 
 import org.junit.After;
 import org.junit.Before;
@@ -15,30 +40,10 @@
 import org.junit.Test;
 import org.junit.runner.RunWith;
 
+import java.io.IOException;
+import java.util.Collections;
 import java.util.concurrent.TimeUnit;
 
-import androidx.annotation.NonNull;
-import androidx.test.espresso.Espresso;
-import androidx.test.espresso.IdlingPolicies;
-import androidx.test.espresso.ViewInteraction;
-import androidx.test.ext.junit.rules.ActivityScenarioRule;
-import androidx.test.ext.junit.runners.AndroidJUnit4;
-import androidx.test.filters.LargeTest;
-
-import static androidx.test.espresso.Espresso.onView;
-import static androidx.test.espresso.action.ViewActions.click;
-import static androidx.test.espresso.action.ViewActions.scrollTo;
-import static androidx.test.espresso.contrib.RecyclerViewActions.actionOnItemAtPosition;
-import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;
-import static androidx.test.espresso.matcher.ViewMatchers.withContentDescription;
-import static androidx.test.espresso.matcher.ViewMatchers.withId;
-import static net.osmand.plus.common.EspressoUtils.waitForView;
-import static net.osmand.plus.common.Interactions.openNavigationMenu;
-import static net.osmand.plus.common.Interactions.setRouteStart;
-import static net.osmand.plus.common.Interactions.startNavigation;
-import static net.osmand.plus.common.Matchers.childAtPosition;
-import static org.hamcrest.Matchers.allOf;
-
 @LargeTest
 @RunWith(AndroidJUnit4.class)
 public class RouteRecalculationFromBeginningTest extends AndroidTest {
@@ -57,6 +62,11 @@ public void setup() {
 		super.setup();
 		IdlingPolicies.setIdlingResourceTimeout(40, TimeUnit.SECONDS);
 		enableSimulation(500);
+		try {
+			ResourcesImporter.importGpxAssets(app, Collections.singletonList("gpx_recalc_test.gpx"));
+		} catch (IOException e) {
+			throw new RuntimeException(e);
+		}
 	}
 
 	@After
@@ -69,6 +79,8 @@ public void cleanUp() {
 
 	@Test
 	public void test() throws Throwable {
+		skipAppStartDialogs(app);
+
 		openNavigationMenu();
 
 		ViewInteraction linearLayout = waitForView(allOf(withId(R.id.map_options_route_button),
@@ -106,10 +118,11 @@ public void test() throws Throwable {
 
 		observeDistToFinishIdlingResource = new ObserveDistToFinishIdlingResource(app);
 		registerIdlingResources(observeDistToFinishIdlingResource);
+
 		Espresso.onIdle();
 	}
 
-	private class ObserveDistToFinishIdlingResource extends BaseIdlingResource {
+	private static class ObserveDistToFinishIdlingResource extends BaseIdlingResource {
 
 		private static final int CHECK_INTERVAL = 1000;
 		private static final int IDLE_ON_LEFT_DISTANCE = 5900;
diff --git a/OsmAnd/tests/net/osmand/plus/common/AndroidTest.java b/OsmAnd/test/java/net/osmand/test/common/AndroidTest.java
similarity index 95%
rename from OsmAnd/tests/net/osmand/plus/common/AndroidTest.java
rename to OsmAnd/test/java/net/osmand/test/common/AndroidTest.java
index 416a642f509..fffbf704e43 100644
--- a/OsmAnd/tests/net/osmand/plus/common/AndroidTest.java
+++ b/OsmAnd/test/java/net/osmand/test/common/AndroidTest.java
@@ -1,4 +1,4 @@
-package net.osmand.plus.common;
+package net.osmand.test.common;
 
 import android.content.Context;
 
@@ -26,6 +26,8 @@ public void setup() {
 		Context context = InstrumentationRegistry.getInstrumentation().getTargetContext();
 		app = ((OsmandApplication) context.getApplicationContext());
 
+		EspressoUtils.grantPermissions(app);
+
 		appInitIdlingResource = new AppInitIdlingResource(app);
 		registerIdlingResources(appInitIdlingResource);
 		Espresso.onIdle();
diff --git a/OsmAnd/tests/net/osmand/plus/common/AppInitIdlingResource.java b/OsmAnd/test/java/net/osmand/test/common/AppInitIdlingResource.java
similarity index 95%
rename from OsmAnd/tests/net/osmand/plus/common/AppInitIdlingResource.java
rename to OsmAnd/test/java/net/osmand/test/common/AppInitIdlingResource.java
index 5cc26492b31..257b16894b9 100644
--- a/OsmAnd/tests/net/osmand/plus/common/AppInitIdlingResource.java
+++ b/OsmAnd/test/java/net/osmand/test/common/AppInitIdlingResource.java
@@ -1,4 +1,4 @@
-package net.osmand.plus.common;
+package net.osmand.test.common;
 
 import net.osmand.plus.AppInitializer;
 import net.osmand.plus.AppInitializer.AppInitializeListener;
diff --git a/OsmAnd/test/java/net/osmand/test/common/AssetUtils.java b/OsmAnd/test/java/net/osmand/test/common/AssetUtils.java
new file mode 100644
index 00000000000..9cd08507a5e
--- /dev/null
+++ b/OsmAnd/test/java/net/osmand/test/common/AssetUtils.java
@@ -0,0 +1,45 @@
+package net.osmand.test.common;
+
+import android.content.Context;
+import android.content.res.AssetManager;
+import android.net.Uri;
+
+import androidx.annotation.NonNull;
+import androidx.test.platform.app.InstrumentationRegistry;
+
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.utils.AndroidUtils;
+import net.osmand.plus.utils.FileUtils;
+
+import java.io.File;
+import java.io.IOException;
+import java.io.InputStream;
+import java.io.OutputStream;
+import java.nio.file.Files;
+
+public class AssetUtils {
+
+	@NonNull
+	public static Uri getUriFromAssetFile(@NonNull OsmandApplication app, @NonNull String assetPath, @NonNull String assetName) throws IOException {
+		File cacheDir = new File(FileUtils.getTempDir(app), "assets/" + assetPath);
+		if (!cacheDir.exists())
+			cacheDir.mkdirs();
+		File fileToShare = new File(cacheDir, assetName);
+
+		AssetManager assetManager = InstrumentationRegistry.getInstrumentation().getContext().getAssets();
+		InputStream in = assetManager.open(assetPath + "/" + assetName);
+		OutputStream out = Files.newOutputStream(fileToShare.toPath());
+
+		byte[] buffer = new byte[4096];
+		int read;
+		while ((read = in.read(buffer)) != -1) {
+			out.write(buffer, 0, read);
+		}
+		in.close();
+		out.flush();
+		out.close();
+
+		return AndroidUtils.getUriForFile(app, fileToShare);
+	}
+
+}
diff --git a/OsmAnd/tests/net/osmand/plus/common/BaseIdlingResource.java b/OsmAnd/test/java/net/osmand/test/common/BaseIdlingResource.java
similarity index 95%
rename from OsmAnd/tests/net/osmand/plus/common/BaseIdlingResource.java
rename to OsmAnd/test/java/net/osmand/test/common/BaseIdlingResource.java
index 711f9ff5f96..d5a11efe462 100644
--- a/OsmAnd/tests/net/osmand/plus/common/BaseIdlingResource.java
+++ b/OsmAnd/test/java/net/osmand/test/common/BaseIdlingResource.java
@@ -1,4 +1,4 @@
-package net.osmand.plus.common;
+package net.osmand.test.common;
 
 import net.osmand.plus.OsmandApplication;
 
diff --git a/OsmAnd/tests/net/osmand/plus/common/EspressoUtils.java b/OsmAnd/test/java/net/osmand/test/common/EspressoUtils.java
similarity index 80%
rename from OsmAnd/tests/net/osmand/plus/common/EspressoUtils.java
rename to OsmAnd/test/java/net/osmand/test/common/EspressoUtils.java
index ca15b2259ed..2e29e2629fc 100644
--- a/OsmAnd/tests/net/osmand/plus/common/EspressoUtils.java
+++ b/OsmAnd/test/java/net/osmand/test/common/EspressoUtils.java
@@ -1,8 +1,13 @@
-package net.osmand.plus.common;
+package net.osmand.test.common;
 
-import android.view.View;
+import static androidx.test.espresso.Espresso.onData;
+import static androidx.test.espresso.Espresso.onView;
+import static androidx.test.espresso.matcher.ViewMatchers.isRoot;
+import static androidx.test.platform.app.InstrumentationRegistry.getInstrumentation;
 
-import org.hamcrest.Matcher;
+import android.content.Context;
+import android.os.Build;
+import android.view.View;
 
 import androidx.annotation.NonNull;
 import androidx.test.espresso.NoMatchingViewException;
@@ -11,12 +16,17 @@
 import androidx.test.espresso.ViewInteraction;
 import androidx.test.espresso.util.TreeIterables;
 
-import static androidx.test.espresso.Espresso.onData;
-import static androidx.test.espresso.Espresso.onView;
-import static androidx.test.espresso.matcher.ViewMatchers.isRoot;
+import org.hamcrest.Matcher;
 
 public class EspressoUtils {
 
+	public static void grantPermissions(@NonNull Context ctx) {
+		if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
+			getInstrumentation().getUiAutomation().executeShellCommand(
+					"pm grant " + ctx.getPackageName() + " android.permission.POST_NOTIFICATIONS");
+		}
+	}
+
 	@NonNull
 	public static ViewInteraction waitForView(@NonNull Matcher<View> viewMatcher) throws Throwable {
 		return waitForView(viewMatcher, 5000);
@@ -96,4 +106,15 @@ public static void waitForDataToPerform(@NonNull Matcher<?> dataMatcher,
 
 		throw new Exception("Failed to list item in " + waitMillis + " millis matching " + dataMatcher);
 	}
+
+	public static String escapeRegex(@NonNull String input) {
+		StringBuilder sb = new StringBuilder();
+		for (char c : input.toCharArray()) {
+			if ("*+{}[\\]|()?".indexOf(c) != -1 || c == '\\') {
+				sb.append('\\');
+			}
+			sb.append(c);
+		}
+		return sb.toString();
+	}
 }
\ No newline at end of file
diff --git a/OsmAnd/tests/net/osmand/plus/common/Interactions.java b/OsmAnd/test/java/net/osmand/test/common/Interactions.java
similarity index 68%
rename from OsmAnd/tests/net/osmand/plus/common/Interactions.java
rename to OsmAnd/test/java/net/osmand/test/common/Interactions.java
index 2e021164113..d5227189f02 100644
--- a/OsmAnd/tests/net/osmand/plus/common/Interactions.java
+++ b/OsmAnd/test/java/net/osmand/test/common/Interactions.java
@@ -1,15 +1,4 @@
-package net.osmand.plus.common;
-
-import android.view.View;
-
-import net.osmand.data.LatLon;
-import net.osmand.plus.R;
-
-import org.hamcrest.Matcher;
-
-import androidx.annotation.IdRes;
-import androidx.annotation.NonNull;
-import androidx.test.espresso.ViewInteraction;
+package net.osmand.test.common;
 
 import static androidx.test.espresso.Espresso.onView;
 import static androidx.test.espresso.action.ViewActions.click;
@@ -20,28 +9,38 @@
 import static androidx.test.espresso.matcher.ViewMatchers.withClassName;
 import static androidx.test.espresso.matcher.ViewMatchers.withId;
 import static androidx.test.espresso.matcher.ViewMatchers.withParent;
-import static net.osmand.plus.common.EspressoUtils.waitForDataToPerform;
-import static net.osmand.plus.common.EspressoUtils.waitForView;
-import static net.osmand.plus.common.Matchers.childAtPosition;
-import static net.osmand.plus.common.Matchers.hasOnClickListener;
-import static net.osmand.plus.common.Matchers.searchItemWithLocaleName;
+import static net.osmand.test.common.OsmAndDialogInteractions.skipSpeedCamerasBottomSheet;
 import static org.hamcrest.Matchers.allOf;
 import static org.hamcrest.Matchers.is;
 
+import android.view.View;
+
+import androidx.annotation.IdRes;
+import androidx.annotation.NonNull;
+import androidx.test.espresso.ViewInteraction;
+
+import net.osmand.data.LatLon;
+import net.osmand.plus.R;
+
+import org.hamcrest.Matcher;
+import org.hamcrest.Matchers;
+
 public class Interactions {
 
 	public static void openNavigationMenu() throws Throwable {
-		ViewInteraction appCompatImageButton = waitForView(allOf(withId(R.id.map_route_info_button),
-				hasOnClickListener(),
+		ViewInteraction appCompatImageButton = EspressoUtils.waitForView(Matchers.allOf(withId(R.id.map_route_info_button),
+				net.osmand.test.common.Matchers.hasOnClickListener(),
 				isDisplayed()));
 		appCompatImageButton.perform(click());
+
+		skipSpeedCamerasBottomSheet();
 	}
 
 	public static void startNavigation() {
 		ViewInteraction frameLayout = onView(
-				allOf(withId(R.id.start_button),
-						childAtPosition(
-								childAtPosition(
+				Matchers.allOf(withId(R.id.start_button),
+						net.osmand.test.common.Matchers.childAtPosition(
+								net.osmand.test.common.Matchers.childAtPosition(
 										withId(R.id.control_buttons),
 										1),
 								2),
@@ -70,9 +69,9 @@ private static void openRouteStartEndDialog(boolean start) {
 		int id = start ? R.id.FromLayout : R.id.ToLayout;
 		int position = start ? 0 : 4;
 		ViewInteraction linearLayout = onView(
-				allOf(withId(id),
-						childAtPosition(
-								childAtPosition(
+				Matchers.allOf(withId(id),
+						net.osmand.test.common.Matchers.childAtPosition(
+								net.osmand.test.common.Matchers.childAtPosition(
 										withId(R.id.route_menu_top_shadow_all),
 										1),
 								position),
@@ -82,9 +81,9 @@ private static void openRouteStartEndDialog(boolean start) {
 
 	public static void openRoutePointSearch() {
 		ViewInteraction linearLayout = onView(
-				allOf(withId(R.id.first_item),
-						childAtPosition(
-								childAtPosition(
+				Matchers.allOf(withId(R.id.first_item),
+						net.osmand.test.common.Matchers.childAtPosition(
+								net.osmand.test.common.Matchers.childAtPosition(
 										withClassName(is("android.widget.LinearLayout")),
 										0),
 								0)));
@@ -93,10 +92,10 @@ public static void openRoutePointSearch() {
 
 	public static void searchCoordinate(@NonNull String coordinate) {
 		ViewInteraction appCompatEditText = onView(
-				allOf(withId(R.id.searchEditText),
-						childAtPosition(
-								allOf(withId(R.id.search_container),
-										childAtPosition(
+				Matchers.allOf(withId(R.id.searchEditText),
+						net.osmand.test.common.Matchers.childAtPosition(
+								Matchers.allOf(withId(R.id.search_container),
+										net.osmand.test.common.Matchers.childAtPosition(
 												withId(R.id.toolbar),
 												0)),
 								0),
@@ -105,10 +104,10 @@ public static void searchCoordinate(@NonNull String coordinate) {
 	}
 
 	public static void selectSearchedCoordinate(@NonNull String coordinate) throws Throwable {
-		Matcher<View> adapterMatcher = allOf(withId(android.R.id.list),
-				childAtPosition(
+		Matcher<View> adapterMatcher = Matchers.allOf(withId(android.R.id.list),
+				net.osmand.test.common.Matchers.childAtPosition(
 						allOf(withClassName(is("android.widget.LinearLayout")), withParent(withId(R.id.search_view))),
 						0));
-		waitForDataToPerform(searchItemWithLocaleName(coordinate), adapterMatcher, click());
+		EspressoUtils.waitForDataToPerform(net.osmand.test.common.Matchers.searchItemWithLocaleName(coordinate), adapterMatcher, click());
 	}
 }
\ No newline at end of file
diff --git a/OsmAnd/tests/net/osmand/plus/common/Matchers.java b/OsmAnd/test/java/net/osmand/test/common/Matchers.java
similarity index 98%
rename from OsmAnd/tests/net/osmand/plus/common/Matchers.java
rename to OsmAnd/test/java/net/osmand/test/common/Matchers.java
index 4c5ee5bc459..9ae729b40be 100644
--- a/OsmAnd/tests/net/osmand/plus/common/Matchers.java
+++ b/OsmAnd/test/java/net/osmand/test/common/Matchers.java
@@ -1,4 +1,4 @@
-package net.osmand.plus.common;
+package net.osmand.test.common;
 
 import android.view.View;
 import android.view.ViewGroup;
diff --git a/OsmAnd/test/java/net/osmand/test/common/OsmAndDialogInteractions.java b/OsmAnd/test/java/net/osmand/test/common/OsmAndDialogInteractions.java
new file mode 100644
index 00000000000..85028c7ba60
--- /dev/null
+++ b/OsmAnd/test/java/net/osmand/test/common/OsmAndDialogInteractions.java
@@ -0,0 +1,62 @@
+package net.osmand.test.common;
+
+import static androidx.test.espresso.action.ViewActions.click;
+import static androidx.test.espresso.matcher.ViewMatchers.isDisplayed;
+import static androidx.test.espresso.matcher.ViewMatchers.withId;
+import static androidx.test.espresso.matcher.ViewMatchers.withText;
+import static net.osmand.test.common.Matchers.hasOnClickListener;
+
+import android.content.Context;
+
+import androidx.annotation.NonNull;
+import androidx.test.espresso.Espresso;
+import androidx.test.espresso.ViewInteraction;
+
+import net.osmand.StringMatcher;
+import net.osmand.plus.R;
+
+import org.hamcrest.BaseMatcher;
+import org.hamcrest.Description;
+import org.hamcrest.core.StringRegularExpression;
+
+import java.util.regex.Pattern;
+
+public class OsmAndDialogInteractions {
+
+	public static void skipAppStartDialogs(@NonNull Context ctx) {
+		skipFirstUsageDialog();
+		skipNavigationRestoration(ctx);
+	}
+
+	public static void skipFirstUsageDialog() {
+		try {
+			ViewInteraction skipButton = EspressoUtils.waitForView(org.hamcrest.Matchers.allOf(withId(R.id.skip_button),
+					hasOnClickListener(),
+					isDisplayed()), 500);
+			skipButton.perform(click());
+		} catch (Throwable ignore) {
+		}
+	}
+
+	public static void skipSpeedCamerasBottomSheet() {
+		try {
+			EspressoUtils.waitForView(org.hamcrest.Matchers.allOf(withId(R.id.button_text),
+					withText(R.string.keep_active),
+					isDisplayed()), 500);
+			Espresso.pressBack();
+		} catch (Throwable ignore) {
+		}
+	}
+
+	public static void skipNavigationRestoration(@NonNull Context ctx) {
+		try {
+			String template = EspressoUtils.escapeRegex(ctx.getString(R.string.continue_follow_previous_route_auto, "<NUMBER>"));
+			String regex = template.replace("<NUMBER>", "\\d+");
+			EspressoUtils.waitForView(org.hamcrest.Matchers.allOf(
+					withText(StringRegularExpression.matchesRegex(regex)),
+					isDisplayed()), 500);
+			Espresso.pressBack();
+		} catch (Throwable ignore) {
+		}
+	}
+}
diff --git a/OsmAnd/test/java/net/osmand/test/common/ResourcesImporter.java b/OsmAnd/test/java/net/osmand/test/common/ResourcesImporter.java
new file mode 100644
index 00000000000..ff3206db044
--- /dev/null
+++ b/OsmAnd/test/java/net/osmand/test/common/ResourcesImporter.java
@@ -0,0 +1,93 @@
+package net.osmand.test.common;
+
+import android.content.res.AssetManager;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.test.platform.app.InstrumentationRegistry;
+
+import net.osmand.IProgress;
+import net.osmand.IndexConstants;
+import net.osmand.gpx.GPXFile;
+import net.osmand.gpx.GPXUtilities;
+import net.osmand.plus.OsmandApplication;
+import net.osmand.plus.importfiles.ImportHelper;
+import net.osmand.plus.importfiles.SaveImportedGpxListener;
+import net.osmand.plus.importfiles.tasks.SaveGpxAsyncTask;
+import net.osmand.plus.utils.FileUtils;
+import net.osmand.util.Algorithms;
+
+import java.io.File;
+import java.io.IOException;
+import java.io.InputStream;
+import java.util.ArrayList;
+import java.util.List;
+import java.util.concurrent.ExecutionException;
+
+public class ResourcesImporter {
+
+	public static void importGpxAssets(@NonNull OsmandApplication app, @NonNull List<String> assetFilePaths) throws IOException {
+		File tmpDir = FileUtils.getTempDir(app);
+		File gpxDestinationDir = ImportHelper.getGpxDestinationDir(app, true);
+		for (String assetFilePath : assetFilePaths) {
+			String fileName = new File(assetFilePath).getName();
+			File file = new File(tmpDir, System.currentTimeMillis() + "_" + fileName);
+			try (InputStream is = InstrumentationRegistry.getInstrumentation().getContext().getAssets()
+					.open(assetFilePath, AssetManager.ACCESS_STREAMING)) {
+				String error = ImportHelper.copyFile(app, file, is, true, false);
+				if (error == null) {
+					GPXFile gpxFile = GPXUtilities.loadGPXFile(file);
+					String[] errors = {""};
+					SaveImportedGpxListener listener = new SaveImportedGpxListener() {
+						@Override
+						public void onGpxSaved(@Nullable String error, @NonNull GPXFile gpxFile) {
+							errors[0] = error;
+						}
+					};
+					new SaveGpxAsyncTask(app, gpxFile, gpxDestinationDir, fileName, listener, true).execute().get();
+					if (!Algorithms.isEmpty(errors[0])) {
+						throw new IOException("Import gpx error: " + errors[0]);
+					}
+				}
+			} catch (ExecutionException | InterruptedException e) {
+				throw new RuntimeException(e);
+			}
+		}
+	}
+
+	public static void importObfAssets(@NonNull OsmandApplication app, @NonNull List<String> assetFilePaths) throws IOException {
+		String error = null;
+		for (String assetFilePath : assetFilePaths) {
+			String name = new File(assetFilePath).getName();
+			InputStream is = InstrumentationRegistry.getInstrumentation().getContext().getAssets()
+					.open(assetFilePath, AssetManager.ACCESS_STREAMING);
+			boolean unzip = name.endsWith(IndexConstants.ZIP_EXT);
+			String fileName = unzip ? name.replace(IndexConstants.ZIP_EXT, "") : name;
+			File dest = getObfDestFile(app, fileName);
+			error = ImportHelper.copyFile(app, dest, is, true, unzip);
+			if (error != null) {
+				break;
+			}
+		}
+		if (error == null) {
+			app.getResourceManager().reloadIndexes(IProgress.EMPTY_PROGRESS, new ArrayList<>());
+			app.getDownloadThread().updateLoadedFiles();
+		} else {
+			throw new IOException("Map import error: " + error);
+		}
+	}
+
+	@NonNull
+	private static File getObfDestFile(@NonNull OsmandApplication app, @NonNull String name) {
+		if (name.endsWith(IndexConstants.BINARY_ROAD_MAP_INDEX_EXT)) {
+			return app.getAppPath(IndexConstants.ROADS_INDEX_DIR + name);
+		} else if (name.endsWith(IndexConstants.BINARY_WIKI_MAP_INDEX_EXT)) {
+			return app.getAppPath(IndexConstants.WIKI_INDEX_DIR + name);
+		} else if (name.endsWith(IndexConstants.BINARY_TRAVEL_GUIDE_MAP_INDEX_EXT)) {
+			return app.getAppPath(IndexConstants.WIKIVOYAGE_INDEX_DIR + name);
+		} else if (name.endsWith(IndexConstants.BINARY_DEPTH_MAP_INDEX_EXT)) {
+			return app.getAppPath(IndexConstants.NAUTICAL_INDEX_DIR + name);
+		}
+		return app.getAppPath(name);
+	}
+}
diff --git a/OsmAnd/test/java/net/osmand/test/common/SystemDialogInteractions.java b/OsmAnd/test/java/net/osmand/test/common/SystemDialogInteractions.java
new file mode 100644
index 00000000000..aa82b1d6f5e
--- /dev/null
+++ b/OsmAnd/test/java/net/osmand/test/common/SystemDialogInteractions.java
@@ -0,0 +1,4 @@
+package net.osmand.test.common;
+
+public class SystemDialogInteractions {
+}
