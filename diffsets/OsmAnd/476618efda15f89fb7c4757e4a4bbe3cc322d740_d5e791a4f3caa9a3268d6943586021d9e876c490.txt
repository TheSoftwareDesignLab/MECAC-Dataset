diff --git a/OsmAnd/res/layout-v26/simple_map_widget_small.xml b/OsmAnd/res/layout-v26/simple_map_widget_small.xml
index d523eea9657..fc3578a4988 100644
--- a/OsmAnd/res/layout-v26/simple_map_widget_small.xml
+++ b/OsmAnd/res/layout-v26/simple_map_widget_small.xml
@@ -22,18 +22,18 @@
 			android:layout_marginEnd="@dimen/content_padding_small"
 			osmand:srcCompat="@drawable/ic_action_remove_dark" />
 
-		<TextView
+		<net.osmand.plus.widgets.AutoScaleTextView
 			android:id="@+id/widget_text"
 			android:layout_width="wrap_content"
 			android:layout_height="match_parent"
-			android:autoSizeMaxTextSize="@dimen/simple_widget_value_small_size"
-			android:autoSizeMinTextSize="@dimen/simple_widget_value_minimum_size"
-			android:autoSizeStepGranularity="2sp"
-			android:autoSizeTextType="uniform"
+			android:layout_gravity="center_vertical|start"
 			android:gravity="center_vertical|start"
+			android:includeFontPadding="false"
+			android:lines="1"
 			android:maxLines="1"
 			android:textColor="@color/text_color_primary_light"
-			android:textSize="@dimen/simple_widget_value_small_size"
+			osmand:maxTextSize="@dimen/simple_widget_value_small_size"
+			osmand:minTextSize="@dimen/simple_widget_value_minimum_size"
 			tools:text="155" />
 
 		<LinearLayout
diff --git a/OsmAnd/res/values/attrs.xml b/OsmAnd/res/values/attrs.xml
index 351b513a53b..b1f292002b3 100644
--- a/OsmAnd/res/values/attrs.xml
+++ b/OsmAnd/res/values/attrs.xml
@@ -275,4 +275,9 @@
 
     <!--<declare-styleable name="ButtonEx" parent="TextViewEx" />
     <declare-styleable name="SwitchEx" parent="ButtonEx" />-->
+
+	<declare-styleable name="AutoScaleTextView">
+		<attr name="minTextSize" format="dimension" />
+		<attr name="maxTextSize" format="dimension" />
+	</declare-styleable>
 </resources>
diff --git a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
index e7b902ca158..c0eb534ad1f 100644
--- a/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
+++ b/OsmAnd/src/net/osmand/plus/views/mapwidgets/widgets/SimpleWidget.java
@@ -62,13 +62,7 @@ private void setupViews() {
 	}
 
 	public void updateValueAlign(boolean fullRow) {
-		if (WidgetSize.SMALL == getWidgetSizePref().get()) {
-			if (!fullRow) {
-				textView.setMaxWidth((int) (container.getWidth() - app.getResources().getDimension(R.dimen.content_padding) +
-						app.getResources().getDimension(R.dimen.map_widget_icon) +
-						app.getResources().getDimension(R.dimen.content_padding_small)));
-			}
-		} else {
+		if (WidgetSize.SMALL != getWidgetSizePref().get()) {
 			ViewGroup.LayoutParams textViewLayoutParams = textView.getLayoutParams();
 			if (textViewLayoutParams instanceof FrameLayout.LayoutParams) {
 				FrameLayout.LayoutParams params = (FrameLayout.LayoutParams) textView.getLayoutParams();
diff --git a/OsmAnd/src/net/osmand/plus/widgets/AutoScaleTextView.kt b/OsmAnd/src/net/osmand/plus/widgets/AutoScaleTextView.kt
new file mode 100644
index 00000000000..41bc22e5e24
--- /dev/null
+++ b/OsmAnd/src/net/osmand/plus/widgets/AutoScaleTextView.kt
@@ -0,0 +1,74 @@
+package net.osmand.plus.widgets
+
+import android.content.Context
+import android.graphics.Rect
+import android.util.AttributeSet
+import android.util.TypedValue
+import androidx.annotation.Dimension
+import net.osmand.plus.R
+import kotlin.math.min
+
+
+class AutoScaleTextView : androidx.appcompat.widget.AppCompatTextView {
+	constructor(context: Context) : super(context)
+	constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0)
+	constructor(
+		context: Context, attrs: AttributeSet?,
+		defStyleAttr: Int) : super(context, attrs) {
+		val typedArray = context.theme.obtainStyledAttributes(
+			attrs,
+			R.styleable.AutoScaleTextView,
+			defStyleAttr,
+			0)
+		minTextSize = typedArray.getDimension(R.styleable.AutoScaleTextView_minTextSize, 1f)
+		maxTextSize = typedArray.getDimension(R.styleable.AutoScaleTextView_maxTextSize, 30f)
+		typedArray.recycle()
+	}
+
+	private val textRect = Rect()
+	private var minTextSize = 1f
+	private var maxTextSize = 30f
+
+	override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {
+		super.onMeasure(widthMeasureSpec, heightMeasureSpec)
+		var width = MeasureSpec.getSize(widthMeasureSpec)
+		var height = MeasureSpec.getSize(heightMeasureSpec)
+		val modeW = MeasureSpec.getMode(widthMeasureSpec)
+		val modeH = MeasureSpec.getMode(heightMeasureSpec)
+		var desiredWidth = width
+		var desiredHeight = height
+		var curTextSize = minTextSize
+		if (text != null) {
+			val textScaleCoef = TypedValue.applyDimension(
+				TypedValue.COMPLEX_UNIT_SP,
+				1f, resources.displayMetrics)
+			paint.textSize = curTextSize
+			paint.getTextBounds(text.toString(), 0, text.length, textRect)
+			while (getTextWidth() < width && textRect.height() < height && curTextSize < maxTextSize) {
+				curTextSize++
+				paint.textSize = curTextSize
+				paint.getTextBounds(text.toString(), 0, text.length, textRect)
+			}
+			if (getTextWidth() > width || textRect.height() > height) {
+				curTextSize--
+			}
+			setTextSize(Dimension.SP, curTextSize / textScaleCoef)
+			desiredWidth = getTextWidth()
+		}
+
+		val measuredWidth = when (modeW) {
+			MeasureSpec.EXACTLY -> width
+			MeasureSpec.AT_MOST -> min(desiredWidth, width)
+			else -> desiredWidth
+		}
+
+		val measuredHeight = when (modeH) {
+			MeasureSpec.EXACTLY -> height
+			MeasureSpec.AT_MOST -> min(desiredHeight, height)
+			else -> desiredHeight
+		}
+		setMeasuredDimension(measuredWidth, measuredHeight)
+	}
+
+	private fun getTextWidth() = (paint.measureText(text.toString()) + 0.5f).toInt()
+}
