diff --git a/Simplenote/src/main/java/com/automattic/simplenote/NoteEditorActivity.java b/Simplenote/src/main/java/com/automattic/simplenote/NoteEditorActivity.java
index f8d542d06..8003c6d17 100644
--- a/Simplenote/src/main/java/com/automattic/simplenote/NoteEditorActivity.java
+++ b/Simplenote/src/main/java/com/automattic/simplenote/NoteEditorActivity.java
@@ -5,6 +5,7 @@
 import android.content.Intent;
 import android.content.res.Configuration;
 import android.os.Bundle;
+import android.support.annotation.NonNull;
 import android.support.design.widget.TabLayout;
 import android.support.v4.app.Fragment;
 import android.support.v4.app.FragmentManager;
@@ -89,7 +90,9 @@ public void onPageSelected(int position) {
                             if (position == 1) {
                                 final InputMethodManager imm = (InputMethodManager) getSystemService(
                                         Context.INPUT_METHOD_SERVICE);
-                                imm.hideSoftInputFromWindow(mViewPager.getWindowToken(), 0);
+                                if (imm != null) {
+                                    imm.hideSoftInputFromWindow(mViewPager.getWindowToken(), 0);
+                                }
                             }
                         }
 
@@ -183,7 +186,7 @@ private static class NoteEditorFragmentPagerAdapter extends FragmentPagerAdapter
         private final ArrayList<Fragment> mFragments = new ArrayList<>();
         private final ArrayList<String> mTitles = new ArrayList<>();
 
-        public NoteEditorFragmentPagerAdapter(FragmentManager manager) {
+        NoteEditorFragmentPagerAdapter(FragmentManager manager) {
             super(manager);
         }
 
@@ -198,7 +201,7 @@ public Fragment getItem(int position) {
         }
 
         @Override
-        public int getItemPosition(Object object) {
+        public int getItemPosition(@NonNull Object object) {
             return PagerAdapter.POSITION_NONE;
         }
 
@@ -207,7 +210,7 @@ public CharSequence getPageTitle(int position) {
             return mTitles.get(position);
         }
 
-        public void addFragment(Fragment fragment, String title) {
+        void addFragment(Fragment fragment, String title) {
             mFragments.add(fragment);
             mTitles.add(title);
             notifyDataSetChanged();
diff --git a/Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java b/Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
index 36682ef62..27d5ba7b7 100644
--- a/Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
+++ b/Simplenote/src/main/java/com/automattic/simplenote/NoteEditorFragment.java
@@ -56,6 +56,7 @@
 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView;
 import com.automattic.simplenote.utils.TagsMultiAutoCompleteTextView.OnTagAddedListener;
 import com.automattic.simplenote.utils.TextHighlighter;
+import com.automattic.simplenote.utils.ThemeUtils;
 import com.automattic.simplenote.widgets.SimplenoteEditText;
 import com.simperium.client.Bucket;
 import com.simperium.client.BucketObjectMissingException;
@@ -76,8 +77,6 @@ public class NoteEditorFragment extends Fragment implements Bucket.Listener<Note
     public static final String ARG_MATCH_OFFSETS = "match_offsets";
     public static final String ARG_MARKDOWN_ENABLED = "markdown_enabled";
     private static final String STATE_NOTE_ID = "state_note_id";
-    public static final int THEME_LIGHT = 0;
-    public static final int THEME_DARK = 1;
     private static final int AUTOSAVE_DELAY_MILLIS = 2000;
     private static final int MAX_REVISIONS = 30;
     private static final int PUBLISH_TIMEOUT = 20000;
@@ -300,17 +299,11 @@ public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sa
         mPlaceholderView = mRootView.findViewById(R.id.placeholder);
         if (DisplayUtils.isLargeScreenLandscape(getActivity()) && mNote == null) {
             mPlaceholderView.setVisibility(View.VISIBLE);
-            getActivity().invalidateOptionsMenu();
+            requireActivity().invalidateOptionsMenu();
             mMarkdown = mRootView.findViewById(R.id.markdown);
-
-            switch (PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_THEME, THEME_LIGHT)) {
-                case THEME_DARK:
-                    mCss = ContextUtils.readCssFile(getActivity(), "dark.css");
-                    break;
-                case THEME_LIGHT:
-                    mCss = ContextUtils.readCssFile(getActivity(), "light.css");
-                    break;
-            }
+            mCss = ThemeUtils.isLightTheme(requireContext())
+                    ? ContextUtils.readCssFile(requireContext(), "light.css")
+                    : ContextUtils.readCssFile(requireContext(), "dark.css");
         }
 
         mTagView.setAdapter(mAutocompleteAdapter);
diff --git a/Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java b/Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java
index 4c1dbed87..6a8b0d548 100644
--- a/Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java
+++ b/Simplenote/src/main/java/com/automattic/simplenote/NoteMarkdownFragment.java
@@ -15,14 +15,12 @@
 import com.automattic.simplenote.utils.ContextUtils;
 import com.automattic.simplenote.utils.DrawableUtils;
 import com.automattic.simplenote.utils.NoteUtils;
-import com.automattic.simplenote.utils.PrefUtils;
+import com.automattic.simplenote.utils.ThemeUtils;
 import com.commonsware.cwac.anddown.AndDown;
 import com.simperium.client.Bucket;
 import com.simperium.client.BucketObjectMissingException;
 
 public class NoteMarkdownFragment extends Fragment {
-    public static final int THEME_LIGHT = 0;
-    public static final int THEME_DARK = 1;
     public static final String ARG_ITEM_ID = "item_id";
     private Note mNote;
     private String mCss;
@@ -56,26 +54,16 @@ public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
     public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
         // Load note if we were passed an ID.
         Bundle arguments = getArguments();
-
         if (arguments != null && arguments.containsKey(ARG_ITEM_ID)) {
             String key = arguments.getString(ARG_ITEM_ID);
             new loadNoteTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, key);
         }
-
         setHasOptionsMenu(true);
-
+        mCss = ThemeUtils.isLightTheme(requireContext())
+                ? ContextUtils.readCssFile(requireContext(), "light.css")
+                : ContextUtils.readCssFile(requireContext(), "dark.css");
         View layout = inflater.inflate(R.layout.fragment_note_markdown, container, false);
         mMarkdown = layout.findViewById(R.id.markdown);
-
-        switch (PrefUtils.getIntPref(getActivity(), PrefUtils.PREF_THEME, THEME_LIGHT)) {
-            case THEME_DARK:
-                mCss = ContextUtils.readCssFile(getActivity(), "dark.css");
-                break;
-            case THEME_LIGHT:
-                mCss = ContextUtils.readCssFile(getActivity(), "light.css");
-                break;
-        }
-
         return layout;
     }
 
diff --git a/Simplenote/src/main/java/com/automattic/simplenote/utils/ThemeUtils.java b/Simplenote/src/main/java/com/automattic/simplenote/utils/ThemeUtils.java
index d9ce7bd0c..a9a2449ee 100644
--- a/Simplenote/src/main/java/com/automattic/simplenote/utils/ThemeUtils.java
+++ b/Simplenote/src/main/java/com/automattic/simplenote/utils/ThemeUtils.java
@@ -4,6 +4,7 @@
 import android.content.Context;
 import android.content.Intent;
 import android.content.SharedPreferences;
+import android.content.res.Configuration;
 import android.graphics.Point;
 import android.net.Uri;
 import android.preference.PreferenceManager;
@@ -53,8 +54,9 @@ else if (theme == THEME_DARK)
     }
 
     public static boolean isLightTheme(Context context) {
-        return context == null ||
-                PrefUtils.getIntPref(context, PrefUtils.PREF_THEME, THEME_LIGHT) == THEME_LIGHT;
+        int uiMode = context.getResources().getConfiguration().uiMode &
+                        Configuration.UI_MODE_NIGHT_MASK;
+        return uiMode != Configuration.UI_MODE_NIGHT_YES;
     }
 
     public static boolean themeWasChanged(Intent intent) {
