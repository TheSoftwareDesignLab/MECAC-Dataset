diff --git a/.gitattributes b/.gitattributes
index 73ae4868fddc..8a832885606f 100644
--- a/.gitattributes
+++ b/.gitattributes
@@ -209,13 +209,17 @@ libs/CWAC-Bus.jar -text
 libs/CWAC-Task.jar -text
 libs/android-support-v4.jar -text
 res/anim/cycle_5.xml -text
+res/anim/disappear.xml -text
 res/anim/grow_from_bottom.xml -text
 res/anim/grow_from_bottomleft_to_topright.xml -text
 res/anim/grow_from_bottomright_to_topleft.xml -text
 res/anim/grow_from_top.xml -text
 res/anim/grow_from_topleft_to_bottomright.xml -text
 res/anim/grow_from_topright_to_bottomleft.xml -text
+res/anim/pump_bottom.xml -text
+res/anim/pump_top.xml -text
 res/anim/rail.xml -text
+res/anim/rotate_comment_badge.xml -text
 res/anim/shake.xml -text
 res/anim/shrink_from_bottom.xml -text
 res/anim/shrink_from_bottomleft_to_topright.xml -text
@@ -232,9 +236,20 @@ res/drawable-hdpi-v4/btn_check_on_selected.png -text
 res/drawable-hdpi-v4/btn_dropdown_normal.9.png -text
 res/drawable-hdpi-v4/btn_dropdown_pressed.9.png -text
 res/drawable-hdpi-v4/btn_dropdown_selected.9.png -text
+res/drawable-hdpi-v4/comment_badge.png -text
 res/drawable-hdpi-v4/comments_tab.png -text
 res/drawable-hdpi-v4/comments_tab_active.png -text
 res/drawable-hdpi-v4/content_bg.9.png -text
+res/drawable-hdpi-v4/dashboard_bg.jpg -text
+res/drawable-hdpi-v4/dashboard_icon_comments.png -text
+res/drawable-hdpi-v4/dashboard_icon_pages.png -text
+res/drawable-hdpi-v4/dashboard_icon_photo.png -text
+res/drawable-hdpi-v4/dashboard_icon_posts.png -text
+res/drawable-hdpi-v4/dashboard_icon_settings.png -text
+res/drawable-hdpi-v4/dashboard_icon_stats.png -text
+res/drawable-hdpi-v4/dashboard_icon_subs.png -text
+res/drawable-hdpi-v4/dashboard_icon_video.png -text
+res/drawable-hdpi-v4/dashboard_icon_write.png -text
 res/drawable-hdpi-v4/gallery_selected_default.9.png -text
 res/drawable-hdpi-v4/grey_wp_button.9.png -text
 res/drawable-hdpi-v4/grey_wp_button_active.9.png -text
@@ -246,6 +261,7 @@ res/drawable-hdpi-v4/pages_tab.png -text
 res/drawable-hdpi-v4/pages_tab_active.png -text
 res/drawable-hdpi-v4/posts_tab.png -text
 res/drawable-hdpi-v4/posts_tab_active.png -text
+res/drawable-hdpi-v4/posts_tab_icon.png -text
 res/drawable-hdpi-v4/refresh.png -text
 res/drawable-hdpi-v4/stats_tab.png -text
 res/drawable-hdpi-v4/stats_tab_active.png -text
@@ -255,6 +271,8 @@ res/drawable-hdpi-v4/wp_small.9.png -text
 res/drawable-hdpi-v4/wp_small_down.9.png -text
 res/drawable-hdpi-v4/wp_small_over.9.png -text
 res/drawable-hdpi-v4/wp_small_toggle.9.png -text
+res/drawable/action_item_btn.xml -text
+res/drawable/action_item_selected.9.png -text
 res/drawable/add.png -text
 res/drawable/add_small.png -text
 res/drawable/app_icon.png -text
@@ -274,6 +292,12 @@ res/drawable/comments_tab.png -text
 res/drawable/comments_tab_active.png -text
 res/drawable/comments_tab_icon.png -text
 res/drawable/content_bg.9.png -text
+res/drawable/dashboard_btn.xml -text
+res/drawable/dashboard_btn_bottom_left.xml -text
+res/drawable/dashboard_btn_bottom_right.xml -text
+res/drawable/dashboard_btn_down.xml -text
+res/drawable/dashboard_btn_top_left.xml -text
+res/drawable/dashboard_btn_top_right.xml -text
 res/drawable/drafts_icon.png -text
 res/drawable/gallery_selected_default.9.png -text
 res/drawable/grey_wp_button.9.png -text
@@ -336,8 +360,12 @@ res/drawable/title_bar_gradient.xml -text
 res/drawable/title_bg.xml -text
 res/drawable/video.png -text
 res/drawable/wordpress_gallery_background.xml -text
-res/drawable/wordpress_home.png -text
 res/drawable/wp_button.xml -text
+res/drawable/wp_button_dashboard.xml -text
+res/drawable/wp_button_dashboard_bottom_left.xml -text
+res/drawable/wp_button_dashboard_bottom_right.xml -text
+res/drawable/wp_button_dashboard_top_left.xml -text
+res/drawable/wp_button_dashboard_top_right.xml -text
 res/drawable/wp_button_small.xml -text
 res/drawable/wp_button_toggle.xml -text
 res/drawable/wp_check_off.png -text
@@ -350,13 +378,13 @@ res/drawable/wp_small_down.9.png -text
 res/drawable/wp_small_over.9.png -text
 res/drawable/wp_small_toggle.9.png -text
 res/drawable/wp_spinner_bg.xml -text
+res/drawable/wp_spinner_title_bar_bg.xml -text
 res/drawable/wpcom.png -text
 res/drawable/wplogo.png -text
 res/layout-hdpi-v4/new_account.xml -text
 res/layout-small-v4/new_account.xml -text
 res/layout-v4/row.xml -text
 res/layout/action_bar.xml -text
-res/layout/action_bar_spinner.xml -text
 res/layout/action_item.xml -text
 res/layout/add_account.xml -text
 res/layout/add_account_settings.xml -text
@@ -390,7 +418,6 @@ res/layout/select_categories.xml -text
 res/layout/settings.xml -text
 res/layout/signup.xml -text
 res/layout/spinner_textview.xml -text
-res/layout/splashscreen.xml -text
 res/layout/stats_tab_selector.xml -text
 res/layout/table_row.xml -text
 res/layout/table_row_header.xml -text
@@ -442,11 +469,11 @@ src/org/wordpress/android/AddCategory.java -text
 src/org/wordpress/android/AddQuickPressShortcut.java -text
 src/org/wordpress/android/CommentBroadcastReceiver.java -text
 src/org/wordpress/android/CommentService.java -text
-src/org/wordpress/android/CustomPopupWindow.java -text
 src/org/wordpress/android/Dashboard.java -text
 src/org/wordpress/android/EditPost.java -text
 src/org/wordpress/android/Link.java -text
 src/org/wordpress/android/NewAccount.java -text
+src/org/wordpress/android/PopupWindows.java -text
 src/org/wordpress/android/Preferences.java -text
 src/org/wordpress/android/QuickAction.java -text
 src/org/wordpress/android/ReplyToComment.java -text
@@ -471,6 +498,7 @@ src/org/wordpress/android/models/MediaFile.java -text
 src/org/wordpress/android/models/Post.java -text
 src/org/wordpress/android/util/AlertUtil.java -text
 src/org/wordpress/android/util/Base64.java -text
+src/org/wordpress/android/util/CommentBadgeTextView.java -text
 src/org/wordpress/android/util/ConnectionClient.java -text
 src/org/wordpress/android/util/DashboardLayout.java -text
 src/org/wordpress/android/util/DrawableManager.java -text
@@ -481,6 +509,7 @@ src/org/wordpress/android/util/IntHashMap.java -text
 src/org/wordpress/android/util/StringHelper.java -text
 src/org/wordpress/android/util/TrustAllManager.java -text
 src/org/wordpress/android/util/TrustAllSSLSocketFactory.java -text
+src/org/wordpress/android/util/WPTitleBar.java -text
 src/org/wordpress/android/wpAndroid.java -text
 src/org/xmlrpc/android/ApiHelper.java -text
 src/org/xmlrpc/android/Base64.java -text
diff --git a/AndroidManifest.xml b/AndroidManifest.xml
index 7488b6641238..808d83e155c3 100644
--- a/AndroidManifest.xml
+++ b/AndroidManifest.xml
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android" package="org.wordpress.android" android:installLocation="auto" android:versionCode="33" android:versionName="1.5 Alpha">
-	<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="11"></uses-sdk>
+	<uses-sdk android:targetSdkVersion="11" android:minSdkVersion="7"></uses-sdk>
 	<application android:icon="@drawable/app_icon" android:theme="@style/WordPress"
 		android:label="WordPress" android:name="WordPress" android:hardwareAccelerated="true" android:debuggable="true">
 		<activity android:name="wpAndroid" android:icon="@drawable/app_icon" android:configChanges="orientation|keyboardHidden"/>
diff --git a/bin/classes.dex b/bin/classes.dex
index eba497a5c2c9..db899276a959 100644
Binary files a/bin/classes.dex and b/bin/classes.dex differ
diff --git a/bin/resources.ap_ b/bin/resources.ap_
index bcf495de3dbd..31baa965c525 100644
Binary files a/bin/resources.ap_ and b/bin/resources.ap_ differ
diff --git a/bin/wp-android.apk b/bin/wp-android.apk
index 5bf6b2e66198..43d2dcff9f56 100644
Binary files a/bin/wp-android.apk and b/bin/wp-android.apk differ
diff --git a/res/anim/disappear.xml b/res/anim/disappear.xml
new file mode 100644
index 000000000000..b1fd5e3a46ff
--- /dev/null
+++ b/res/anim/disappear.xml
@@ -0,0 +1,9 @@
+<?xml version="1.0" encoding="utf-8"?>
+<set xmlns:android="http://schemas.android.com/apk/res/android">
+
+	<alpha
+		android:interpolator="@android:anim/decelerate_interpolator"
+		android:fromAlpha="1.0" android:toAlpha="0.0"
+		android:duration="400"
+	/>
+</set>
\ No newline at end of file
diff --git a/res/anim/pump_bottom.xml b/res/anim/pump_bottom.xml
new file mode 100644
index 000000000000..f681951a8dde
--- /dev/null
+++ b/res/anim/pump_bottom.xml
@@ -0,0 +1,14 @@
+<?xml version="1.0" encoding="utf-8"?>
+<set xmlns:android="http://schemas.android.com/apk/res/android">
+	<scale
+		android:fromXScale="1.1" android:toXScale="1.0"
+		android:fromYScale="1.1" android:toYScale="1.0"
+		android:pivotX="50%" android:pivotY="100%"
+		android:duration="@android:integer/config_shortAnimTime"
+	/>
+	<alpha
+		android:interpolator="@android:anim/decelerate_interpolator"
+		android:fromAlpha="0.0" android:toAlpha="1.0"
+		android:duration="@android:integer/config_shortAnimTime"
+	/>
+</set>
diff --git a/res/anim/pump_top.xml b/res/anim/pump_top.xml
new file mode 100644
index 000000000000..65637b56ca12
--- /dev/null
+++ b/res/anim/pump_top.xml
@@ -0,0 +1,14 @@
+<?xml version="1.0" encoding="utf-8"?>
+<set xmlns:android="http://schemas.android.com/apk/res/android">
+	<scale
+		android:fromXScale="1.1" android:toXScale="1.0"
+		android:fromYScale="1.1" android:toYScale="1.0"
+		android:pivotX="50%" android:pivotY="0%"
+		android:duration="@android:integer/config_shortAnimTime"
+	/>
+	<alpha
+		android:interpolator="@android:anim/decelerate_interpolator"
+		android:fromAlpha="0.0" android:toAlpha="1.0"
+		android:duration="@android:integer/config_shortAnimTime"
+	/>
+</set>
diff --git a/res/anim/rotate_comment_badge.xml b/res/anim/rotate_comment_badge.xml
new file mode 100644
index 000000000000..0cac43cec546
--- /dev/null
+++ b/res/anim/rotate_comment_badge.xml
@@ -0,0 +1,9 @@
+<?xml version="1.0" encoding="utf-8"?>
+<rotate
+ xmlns:android="http://schemas.android.com/apk/res/android"
+    android:fromDegrees="0"
+    android:toDegrees="45"
+    android:pivotX="50%"
+    android:pivotY="50%"
+    android:duration="0" android:fillAfter="true">
+</rotate>
diff --git a/res/drawable-hdpi-v4/comment_badge.png b/res/drawable-hdpi-v4/comment_badge.png
new file mode 100644
index 000000000000..674e26f70d9d
Binary files /dev/null and b/res/drawable-hdpi-v4/comment_badge.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_bg.jpg b/res/drawable-hdpi-v4/dashboard_bg.jpg
new file mode 100644
index 000000000000..59258a9b0a63
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_bg.jpg differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_comments.png b/res/drawable-hdpi-v4/dashboard_icon_comments.png
new file mode 100644
index 000000000000..8b9426c1fb5b
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_comments.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_pages.png b/res/drawable-hdpi-v4/dashboard_icon_pages.png
new file mode 100644
index 000000000000..4e96f3486966
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_pages.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_photo.png b/res/drawable-hdpi-v4/dashboard_icon_photo.png
new file mode 100644
index 000000000000..866f2005c27e
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_photo.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_posts.png b/res/drawable-hdpi-v4/dashboard_icon_posts.png
new file mode 100644
index 000000000000..672505da31b5
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_posts.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_settings.png b/res/drawable-hdpi-v4/dashboard_icon_settings.png
new file mode 100644
index 000000000000..18ef04c2991b
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_settings.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_stats.png b/res/drawable-hdpi-v4/dashboard_icon_stats.png
new file mode 100644
index 000000000000..644303ec16f4
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_stats.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_subs.png b/res/drawable-hdpi-v4/dashboard_icon_subs.png
new file mode 100644
index 000000000000..6943b7f075a4
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_subs.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_video.png b/res/drawable-hdpi-v4/dashboard_icon_video.png
new file mode 100644
index 000000000000..781ee2240752
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_video.png differ
diff --git a/res/drawable-hdpi-v4/dashboard_icon_write.png b/res/drawable-hdpi-v4/dashboard_icon_write.png
new file mode 100644
index 000000000000..49bcef81ac04
Binary files /dev/null and b/res/drawable-hdpi-v4/dashboard_icon_write.png differ
diff --git a/res/drawable-hdpi-v4/posts_tab_icon.png b/res/drawable-hdpi-v4/posts_tab_icon.png
new file mode 100644
index 000000000000..3ee83c00258d
Binary files /dev/null and b/res/drawable-hdpi-v4/posts_tab_icon.png differ
diff --git a/res/drawable/action_item_btn.xml b/res/drawable/action_item_btn.xml
new file mode 100644
index 000000000000..df17f0acb05f
--- /dev/null
+++ b/res/drawable/action_item_btn.xml
@@ -0,0 +1,17 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:dither="true">
+
+    <item 
+      android:state_window_focused="false"
+        android:drawable="@android:color/transparent" />
+    <item 
+      android:state_pressed="true"
+        android:drawable="@drawable/action_item_selected"/>
+    <item 
+      android:state_focused="true"
+        android:drawable="@drawable/action_item_selected"/>
+    <item
+        android:drawable="@android:color/transparent"/>
+        
+</selector>
diff --git a/res/drawable/action_item_selected.9.png b/res/drawable/action_item_selected.9.png
new file mode 100644
index 000000000000..de41f40e1cdf
Binary files /dev/null and b/res/drawable/action_item_selected.9.png differ
diff --git a/res/drawable/dashboard_btn.xml b/res/drawable/dashboard_btn.xml
new file mode 100644
index 000000000000..9dd459a5e6fb
--- /dev/null
+++ b/res/drawable/dashboard_btn.xml
@@ -0,0 +1,14 @@
+<?xml version="1.0" encoding="UTF-8"?> 
+<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
+    <gradient
+        android:startColor="#ffeceeef"
+        android:endColor="#ffffffff"
+        android:height="1px"
+        android:angle="90"
+        android:dither="true" />   
+
+    <stroke android:width="1px"
+            android:color="#ffCCCCCC"
+            />
+
+</shape>
diff --git a/res/drawable/dashboard_btn_bottom_left.xml b/res/drawable/dashboard_btn_bottom_left.xml
new file mode 100644
index 000000000000..e8525e8de203
--- /dev/null
+++ b/res/drawable/dashboard_btn_bottom_left.xml
@@ -0,0 +1,16 @@
+<?xml version="1.0" encoding="UTF-8"?> 
+<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
+    <gradient
+        android:startColor="#ffeceeef"
+        android:endColor="#ffffffff"
+        android:height="1px"
+        android:angle="90"
+        android:dither="true" />   
+
+    <stroke android:width="1px"
+            android:color="#ffCCCCCC"
+            />
+
+    <corners android:bottomRightRadius="3dp" android:bottomLeftRadius="0dp" 
+     android:topLeftRadius="0dp" android:topRightRadius="0dp"/> 
+</shape>
diff --git a/res/drawable/dashboard_btn_bottom_right.xml b/res/drawable/dashboard_btn_bottom_right.xml
new file mode 100644
index 000000000000..3a368e04e8bc
--- /dev/null
+++ b/res/drawable/dashboard_btn_bottom_right.xml
@@ -0,0 +1,16 @@
+<?xml version="1.0" encoding="UTF-8"?> 
+<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
+    <gradient
+        android:startColor="#ffeceeef"
+        android:endColor="#ffffffff"
+        android:height="1px"
+        android:angle="90"
+        android:dither="true" />   
+
+    <stroke android:width="1px"
+            android:color="#ffCCCCCC"
+            />
+
+    <corners android:bottomRightRadius="0dp" android:bottomLeftRadius="3dp" 
+     android:topLeftRadius="0dp" android:topRightRadius="0dp"/> 
+</shape>
diff --git a/res/drawable/dashboard_btn_down.xml b/res/drawable/dashboard_btn_down.xml
new file mode 100644
index 000000000000..0b2e42f77dca
--- /dev/null
+++ b/res/drawable/dashboard_btn_down.xml
@@ -0,0 +1,8 @@
+<?xml version="1.0" encoding="UTF-8"?> 
+<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
+    <solid android:color="#ffD8D8D8"/>   
+
+    <stroke android:width="1px"
+            android:color="#ffCCCCCC"
+            />
+</shape>
diff --git a/res/drawable/dashboard_btn_top_left.xml b/res/drawable/dashboard_btn_top_left.xml
new file mode 100644
index 000000000000..a61c0abae5ae
--- /dev/null
+++ b/res/drawable/dashboard_btn_top_left.xml
@@ -0,0 +1,16 @@
+<?xml version="1.0" encoding="UTF-8"?> 
+<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
+    <gradient
+        android:startColor="#ffeceeef"
+        android:endColor="#ffffffff"
+        android:height="1px"
+        android:angle="90"
+        android:dither="true" />   
+
+    <stroke android:width="1px"
+            android:color="#ffCCCCCC"
+            />
+
+    <corners android:bottomRightRadius="0dp" android:bottomLeftRadius="0dp" 
+     android:topLeftRadius="3dp" android:topRightRadius="0dp"/> 
+</shape>
diff --git a/res/drawable/dashboard_btn_top_right.xml b/res/drawable/dashboard_btn_top_right.xml
new file mode 100644
index 000000000000..d5fffdfee8a0
--- /dev/null
+++ b/res/drawable/dashboard_btn_top_right.xml
@@ -0,0 +1,16 @@
+<?xml version="1.0" encoding="UTF-8"?> 
+<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
+    <gradient
+        android:startColor="#ffeceeef"
+        android:endColor="#ffffffff"
+        android:height="1px"
+        android:angle="90"
+        android:dither="true" />   
+
+    <stroke android:width="1px"
+            android:color="#ffCCCCCC"
+            />
+
+    <corners android:bottomRightRadius="0dp" android:bottomLeftRadius="0dp" 
+     android:topLeftRadius="0dp" android:topRightRadius="3dp"/> 
+</shape>
diff --git a/res/drawable/wordpress_home.png b/res/drawable/wordpress_home.png
deleted file mode 100644
index 9b4953b45293..000000000000
Binary files a/res/drawable/wordpress_home.png and /dev/null differ
diff --git a/res/drawable/wp_button.xml b/res/drawable/wp_button.xml
index f5ca3cdfa1e5..873d8586d0e9 100644
--- a/res/drawable/wp_button.xml
+++ b/res/drawable/wp_button.xml
@@ -1,7 +1,6 @@
 <?xml version="1.0" encoding="utf-8"?>
 <selector
   xmlns:android="http://schemas.android.com/apk/res/android">
-  ï»¿
   <item
     android:state_window_focused="false"
     android:state_enabled="true"
diff --git a/res/drawable/wp_button_dashboard.xml b/res/drawable/wp_button_dashboard.xml
new file mode 100644
index 000000000000..0e3b1558bd9a
--- /dev/null
+++ b/res/drawable/wp_button_dashboard.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector
+  xmlns:android="http://schemas.android.com/apk/res/android">
+  <item
+    android:state_window_focused="false"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn" />
+  <item
+    android:state_pressed="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_focused="true"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn" />
+</selector>
diff --git a/res/drawable/wp_button_dashboard_bottom_left.xml b/res/drawable/wp_button_dashboard_bottom_left.xml
new file mode 100644
index 000000000000..142f7345371d
--- /dev/null
+++ b/res/drawable/wp_button_dashboard_bottom_left.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector
+  xmlns:android="http://schemas.android.com/apk/res/android">
+  <item
+    android:state_window_focused="false"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_bottom_left" />
+  <item
+    android:state_pressed="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_focused="true"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_bottom_left" />
+</selector>
diff --git a/res/drawable/wp_button_dashboard_bottom_right.xml b/res/drawable/wp_button_dashboard_bottom_right.xml
new file mode 100644
index 000000000000..e2b9c987d594
--- /dev/null
+++ b/res/drawable/wp_button_dashboard_bottom_right.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector
+  xmlns:android="http://schemas.android.com/apk/res/android">
+  <item
+    android:state_window_focused="false"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_bottom_right" />
+  <item
+    android:state_pressed="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_focused="true"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_bottom_right" />
+</selector>
diff --git a/res/drawable/wp_button_dashboard_top_left.xml b/res/drawable/wp_button_dashboard_top_left.xml
new file mode 100644
index 000000000000..d973bcc3e88d
--- /dev/null
+++ b/res/drawable/wp_button_dashboard_top_left.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector
+  xmlns:android="http://schemas.android.com/apk/res/android">
+  <item
+    android:state_window_focused="false"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_top_left" />
+  <item
+    android:state_pressed="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_focused="true"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_top_left" />
+</selector>
diff --git a/res/drawable/wp_button_dashboard_top_right.xml b/res/drawable/wp_button_dashboard_top_right.xml
new file mode 100644
index 000000000000..f67430a5d156
--- /dev/null
+++ b/res/drawable/wp_button_dashboard_top_right.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector
+  xmlns:android="http://schemas.android.com/apk/res/android">
+  <item
+    android:state_window_focused="false"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_top_right" />
+  <item
+    android:state_pressed="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_focused="true"
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_down" />
+  <item
+    android:state_enabled="true"
+    android:drawable="@drawable/dashboard_btn_top_right" />
+</selector>
diff --git a/res/drawable/wp_spinner_title_bar_bg.xml b/res/drawable/wp_spinner_title_bar_bg.xml
new file mode 100644
index 000000000000..65d155d956ba
--- /dev/null
+++ b/res/drawable/wp_spinner_title_bar_bg.xml
@@ -0,0 +1,18 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector
+  xmlns:android="http://schemas.android.com/apk/res/android">
+  <item
+    android:state_focused="true"
+    android:state_pressed="false"
+    android:drawable="@drawable/btn_dropdown_selected" />
+  <item
+    android:state_focused="true"
+    android:state_pressed="true"
+    android:drawable="@drawable/btn_dropdown_pressed" />
+  <item
+    android:state_focused="false"
+    android:state_pressed="true"
+    android:drawable="@drawable/btn_dropdown_pressed" />
+  <item
+    android:drawable="@drawable/btn_dropdown_normal" />
+</selector>
diff --git a/res/layout/action_bar.xml b/res/layout/action_bar.xml
index e40b854c78c1..fbc5a20c8e39 100644
--- a/res/layout/action_bar.xml
+++ b/res/layout/action_bar.xml
@@ -1,75 +1,52 @@
 <?xml version="1.0" encoding="utf-8"?>
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
- android:id="@+id/action_bar"
- android:orientation="horizontal"
- android:layout_width="fill_parent"
- android:layout_height="42dip"
- android:gravity="left|top"
- android:background="@drawable/title_bar_gradient" > 
-<LinearLayout android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	android:orientation="horizontal"
-	>
-<ImageView
-	android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	android:id="@+id/blavatar_img"
-	android:background="@null"
-	android:layout_marginRight="2dip"
-	/>
-<TextView
-	android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	android:textSize="18dip"
-	android:textColor="#F0F0F0"
-	android:gravity="left|center"
-	android:id="@+id/blogname"	
-	android:background="@null"
-	android:layout_marginLeft="2dip"
-	android:layout_marginRight="2dip"
-/>
-</LinearLayout>
+<org.wordpress.android.util.WPTitleBar
+  xmlns:android="http://schemas.android.com/apk/res/android"
+  android:id="@+id/action_bar"
+  android:orientation="horizontal"
+  android:layout_width="fill_parent"
+  android:layout_height="42dip"
+  android:gravity="left|top"
+  android:background="@drawable/title_bar_gradient">
+  <RelativeLayout
+    android:layout_width="wrap_content"
+    android:layout_height="fill_parent"
+    android:orientation="horizontal">
+    <ImageView
+      android:layout_width="42dip"
+      android:layout_height="42dip"
+      android:padding="4dip"
+      android:id="@+id/blavatar_img"
+      android:src="@drawable/wp_logo_home" />
+    <Button
+      android:background="@android:color/transparent"
+      android:text="WordPress"
+      android:id="@+id/blog_title"
+      android:layout_width="wrap_content"
+      android:layout_height="wrap_content"
+      android:shadowColor="#FF464646"
+      android:shadowDy="1"
+      android:shadowRadius="1"
+      android:paddingTop="8dip"
+      android:singleLine="True"
+      android:textStyle="bold"
+      android:textColor="#FFFFFF"
+      android:textSize="18dp"
+      android:layout_toRightOf="@id/blavatar_img" />
+  </RelativeLayout>
 
-<RelativeLayout android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	>
-    	
-<ImageButton android:id="@+id/add_small"
-	android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	android:src="@drawable/add_small"	
-	android:layout_alignParentRight="true"
-	android:layout_marginRight="4dip"
-	android:layout_marginLeft="4dip"
-	android:background="@null" 	
-	/>
-        
-<View android:id="@+id/View02"
-	android:layout_width="1dip"
-	android:layout_height="42dip"
-	android:background="#C0C0C0"
-	android:layout_toLeftOf="@id/add_small"
-	android:layout_marginLeft="2dip"
-	android:layout_marginRight="2dip"
-    />
+  <RelativeLayout
+    android:layout_width="wrap_content"
+    android:layout_height="fill_parent">
 
-  <ImageButton
-	android:layout_height="fill_parent"
-	android:layout_width="wrap_content"
-	android:src="@drawable/home_small"
-	android:layout_toLeftOf="@id/View02"
-	android:id="@+id/home_small"
-	android:layout_marginLeft="4dip"
-	android:layout_marginRight="4dip"
-	android:background="@null"
-	/>
-	
-  <View android:id="@+id/View01"
-	android:layout_width="1dip"
-	android:layout_height="42dip"
-	android:background="#C0C0C0"
-	android:layout_toLeftOf="@id/home_small"	
-    />
-    
-</RelativeLayout>
-</LinearLayout>
\ No newline at end of file
+    <ImageButton
+      android:id="@+id/add_small"
+      android:layout_width="wrap_content"
+      android:layout_height="fill_parent"
+      android:src="@drawable/add_small"
+      android:layout_alignParentRight="true"
+      android:layout_marginRight="4dip"
+      android:layout_marginLeft="4dip"
+      android:background="@null" />
+
+  </RelativeLayout>
+</org.wordpress.android.util.WPTitleBar>
\ No newline at end of file
diff --git a/res/layout/action_bar_spinner.xml b/res/layout/action_bar_spinner.xml
deleted file mode 100644
index 202162d42ace..000000000000
--- a/res/layout/action_bar_spinner.xml
+++ /dev/null
@@ -1,70 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
- android:id="@+id/action_bar"
- android:orientation="horizontal"
- android:layout_width="fill_parent"
- android:layout_height="42dip"
- android:gravity="left|top"
- android:background="@drawable/title_bar_gradient" >
-<LinearLayout android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	android:orientation="horizontal"
-	>
-<ImageView
-	android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	android:id="@+id/blavatar_img"
-	android:background="@null"
-	android:layout_marginRight="2dip"
-	/>
-<Spinner
-	android:layout_width="240dip"
-	android:layout_height="wrap_content"	
-	android:id="@+id/blogname"	
-/>
-
-</LinearLayout>
-
-<RelativeLayout android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	>
-    	
-<ImageButton android:id="@+id/add_small"
-	android:layout_width="wrap_content"
-	android:layout_height="fill_parent"
-	android:src="@drawable/add_small"	
-	android:layout_alignParentRight="true"
-	android:layout_marginRight="4dip"
-	android:layout_marginLeft="4dip"
-	android:background="@null" 	
-	/>
-        
-<View android:id="@+id/View02"
-	android:layout_width="1dip"
-	android:layout_height="42dip"
-	android:background="#C0C0C0"
-	android:layout_toLeftOf="@id/add_small"
-	android:layout_marginLeft="2dip"
-	android:layout_marginRight="2dip"
-    />
-
-<ImageButton
-	android:layout_height="fill_parent"
-	android:layout_width="wrap_content"
-	android:src="@drawable/home_small"
-	android:layout_toLeftOf="@id/View02"
-	android:id="@+id/home_small"
-	android:layout_marginLeft="4dip"
-	android:layout_marginRight="4dip"
-	android:background="@null"
-	/>
-	
-<View android:id="@+id/View01"
-	android:layout_width="1dip"
-	android:layout_height="42dip"
-	android:background="#C0C0C0"
-	android:layout_toLeftOf="@id/home_small"	
-    />
-    
-</RelativeLayout>
-</LinearLayout>
\ No newline at end of file
diff --git a/res/layout/action_item.xml b/res/layout/action_item.xml
index 189f1d683db0..f7dba59ccc69 100644
--- a/res/layout/action_item.xml
+++ b/res/layout/action_item.xml
@@ -1,27 +1,27 @@
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout
-	xmlns:android="http://schemas.android.com/apk/res/android"
-	android:orientation="horizontal"
-	android:layout_width="wrap_content"
-	android:layout_height="wrap_content"
-	android:paddingLeft="10dip"
-	android:paddingRight="10dip" 
-	android:gravity="center"
-	android:clickable="true"
-	android:background="@drawable/quickcontact_slider_btn">
+  xmlns:android="http://schemas.android.com/apk/res/android"
+  android:orientation="horizontal"
+  android:layout_width="fill_parent"
+  android:layout_height="wrap_content" 
+  android:clickable="true"
+  android:focusable="true"
+  android:background="@drawable/action_item_btn">
+          
+  <ImageView
+    android:id="@+id/iv_icon" 
+    android:layout_width="wrap_content" 
+    android:layout_height="wrap_content"/>
 
-	<ImageView
-		android:id="@+id/icon" 
-		android:layout_width="wrap_content" 
-		android:layout_height="wrap_content"/>
-
-	<TextView 
-		android:id="@+id/title"
-		android:layout_width="fill_parent" 
-		android:layout_height="fill_parent" 
-		android:gravity="center_vertical"
-		android:paddingLeft="5dip"
-		android:paddingRight="10dip"
-		android:textSize="11sp"
-		android:textColor="#666"/>
-</LinearLayout>
\ No newline at end of file
+  <TextView 
+    android:id="@+id/tv_title"
+    android:layout_width="fill_parent" 
+    android:layout_height="fill_parent" 
+    android:gravity="center_vertical"
+    android:paddingLeft="5dip"
+    android:paddingRight="10dip"
+    android:text="Chart"
+    android:singleLine="true"
+    android:textColor="#fff"/>
+                           
+</LinearLayout> 
\ No newline at end of file
diff --git a/res/layout/dashboard.xml b/res/layout/dashboard.xml
index 1c66bce8873d..2e6a8c80c577 100644
--- a/res/layout/dashboard.xml
+++ b/res/layout/dashboard.xml
@@ -4,42 +4,104 @@
     android:orientation="vertical"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
-    android:background="#FAFAFA">
-<include layout="@layout/action_bar_spinner" />
-<org.wordpress.android.util.DashboardLayout
+    android:background="@drawable/dashboard_bg">
+<include layout="@layout/action_bar" />
+<ImageView android:layout_width="60dip"
+    android:layout_height="60dip"
+    android:layout_marginTop="10dip"
+    android:layout_gravity="center_horizontal"
+    android:src="@drawable/wp_logo_home" />
+<RelativeLayout
         xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
+        android:layout_marginTop="12dip"
+        android:gravity="center_horizontal"
         android:layout_weight="1">
-<Button android:id="@+id/dashboard_posts_btn"
+    <Button android:id="@+id/dashboard_write_btn"
         style="@style/DashboardButton"
-        android:text="@string/tab_posts"
-        android:drawableTop="@drawable/posts_tab_icon" />
+        android:text="Write"
+        android:drawableTop="@drawable/dashboard_icon_write"
+        android:background="@drawable/wp_button_dashboard_top_left" />
     <Button android:id="@+id/dashboard_pages_btn"
         style="@style/DashboardButton"
         android:text="@string/tab_pages"
-        android:drawableTop="@drawable/pages_tab_icon" />
-    <Button android:id="@+id/dashboard_drafts_btn"
-        style="@style/DashboardButton"
-        android:text="Drafts"
-        android:drawableTop="@drawable/drafts_icon" />
+        android:drawableTop="@drawable/dashboard_icon_pages"
+        android:background="@drawable/wp_button_dashboard"
+        android:layout_toRightOf="@id/dashboard_write_btn" />
     <Button android:id="@+id/dashboard_comments_btn"
         style="@style/DashboardButton"
         android:text="@string/tab_comments"
-        android:drawableTop="@drawable/comments_tab_icon" />
-    <Button android:id="@+id/dashboard_stats_btn"
+        android:drawableTop="@drawable/dashboard_icon_comments"
+        android:background="@drawable/wp_button_dashboard_top_right"
+        android:layout_toRightOf="@id/dashboard_pages_btn" />
+    <Button android:id="@+id/dashboard_posts_btn"
+        style="@style/DashboardButton"
+        android:text="@string/tab_posts"
+        android:drawableTop="@drawable/dashboard_icon_posts"
+        android:background="@drawable/wp_button_dashboard"
+        android:layout_below="@id/dashboard_write_btn" />
+    <Button android:id="@+id/dashboard_picture_btn"
         style="@style/DashboardButton"
-        android:text="@string/tab_stats"
-        android:drawableTop="@drawable/stats_tab_icon" />
+        android:text="Picture"
+        android:drawableTop="@drawable/dashboard_icon_photo"
+        android:background="@drawable/wp_button_dashboard"
+        android:layout_toRightOf="@id/dashboard_posts_btn"
+        android:layout_below="@id/dashboard_pages_btn" />
+    <Button android:id="@+id/dashboard_video_btn"
+        style="@style/DashboardButton"
+        android:text="Video"
+        android:drawableTop="@drawable/dashboard_icon_video"
+        android:background="@drawable/wp_button_dashboard"
+        android:layout_toRightOf="@id/dashboard_picture_btn"
+        android:layout_below="@id/dashboard_comments_btn" />
     <Button android:id="@+id/dashboard_settings_btn"
         style="@style/DashboardButton"
-        android:text="@string/settings"
-        android:drawableTop="@drawable/settings_icon" />
-</org.wordpress.android.util.DashboardLayout>
-<Button android:layout_width="320dp"
-  android:layout_height="60dp"
-  android:text="Quickpress"
+        android:text="Settings"
+        android:drawableTop="@drawable/dashboard_icon_settings"
+        android:background="@drawable/wp_button_dashboard_bottom_left"
+        android:layout_below="@id/dashboard_posts_btn" />
+    <Button android:id="@+id/dashboard_subs_btn"
+        style="@style/DashboardButton"
+        android:text="Reader"
+        android:drawableTop="@drawable/dashboard_icon_subs"
+        android:background="@drawable/wp_button_dashboard"
+        android:layout_toRightOf="@id/dashboard_settings_btn"
+        android:layout_below="@id/dashboard_picture_btn" />
+    <Button android:id="@+id/dashboard_stats_btn"
+        style="@style/DashboardButton"
+        android:text="Stats"
+        android:drawableTop="@drawable/dashboard_icon_stats"
+        android:background="@drawable/wp_button_dashboard_bottom_right"
+        android:layout_toRightOf="@id/dashboard_subs_btn"
+        android:layout_below="@id/dashboard_video_btn" />
+    <TextView android:id="@+id/comment_badge"
+  android:layout_width="wrap_content"
+   android:layout_height="wrap_content"
+   android:text="0"
+   android:textStyle="bold"
+   android:gravity="center"
+   android:textSize="13dip"
+   android:paddingBottom="4dip"
+   android:shadowDy="1"
+   android:shadowRadius="1"
+   android:shadowColor="#FF464646"
+   android:textColor="#FFFFFFFF"
+   android:background="@drawable/comment_badge"
+   android:layout_alignTop="@id/dashboard_comments_btn"
+   android:layout_alignRight="@id/dashboard_comments_btn"
+   android:layout_marginRight="-15dip"
+   />
+</RelativeLayout>
+<Button android:layout_width="fill_parent"
+  android:layout_height="70dp"
+  android:text="Tap to QuickPress"
   android:id="@+id/quickpress"
+  android:textColor="#FF111111"
+  android:background="@drawable/wp_button_small"
+  android:layout_marginLeft="16dip"
+  android:layout_marginRight="16dip"
+  android:layout_marginBottom="10dip"
 />
 </LinearLayout>
\ No newline at end of file
diff --git a/res/layout/popup.xml b/res/layout/popup.xml
index c1e989b02cda..e44c676ad1a1 100644
--- a/res/layout/popup.xml
+++ b/res/layout/popup.xml
@@ -1,42 +1,40 @@
 <?xml version="1.0" encoding="utf-8"?>
-<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:fadingEdge="horizontal">
-            
-        <ScrollView android:id="@+id/scroller"
-                        android:layout_marginTop="16dip"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:background="@drawable/popup"            
-                android:fadingEdgeLength="5dip"
-                android:scrollbars="none">
-        
-        <LinearLayout
-                android:id="@+id/tracks"
-                android:orientation="horizontal"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:layout_weight="1"
-                android:paddingTop="3dp"
-                android:paddingLeft="3dp"
-                android:paddingRight="3dp"
-                android:paddingBottom="5dp" />
-       
-        </ScrollView >
-        
-        <ImageView
-        android:id="@+id/arrow_up"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:src="@drawable/arrow_up" />
-        
-        <ImageView
-        android:id="@+id/arrow_down"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_below="@id/scroller"
-        android:layout_marginTop="-4dip"
-        android:src="@drawable/arrow_down" />
+<RelativeLayout
+  xmlns:android="http://schemas.android.com/apk/res/android"
+  android:layout_width="wrap_content"
+  android:layout_height="wrap_content">
+
+  <ScrollView
+    android:id="@+id/scroller"
+    android:layout_marginTop="16dip"
+    android:layout_width="wrap_content"
+    android:layout_height="wrap_content"
+    android:background="@drawable/popup"
+    android:fadingEdgeLength="5dip"
+    android:scrollbars="none">
+
+    <LinearLayout
+      android:id="@+id/tracks"
+      android:orientation="vertical"
+      android:layout_width="wrap_content"
+      android:layout_height="wrap_content"
+      android:layout_weight="1"
+      android:padding="10dip" />
+
+  </ScrollView>
+
+  <ImageView
+    android:id="@+id/arrow_up"
+    android:layout_width="wrap_content"
+    android:layout_height="wrap_content"
+    android:src="@drawable/arrow_up" />
+
+  <ImageView
+    android:id="@+id/arrow_down"
+    android:layout_width="wrap_content"
+    android:layout_height="wrap_content"
+    android:layout_below="@id/scroller"
+    android:layout_marginTop="-4dip"
+    android:src="@drawable/arrow_down" />
 
 </RelativeLayout>
\ No newline at end of file
diff --git a/res/layout/post_fullscreen.xml b/res/layout/post_fullscreen.xml
index e71925ea4185..e60dd3e24f71 100644
--- a/res/layout/post_fullscreen.xml
+++ b/res/layout/post_fullscreen.xml
@@ -3,8 +3,8 @@
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:background="#000000"
-  android:layout_width="match_parent"
-  android:layout_height="match_parent">
+  android:layout_width="fill_parent"
+  android:layout_height="fill_parent">
   <RelativeLayout
   	android:id="@+id/fullscreen_page"
     android:layout_width="wrap_content"
diff --git a/res/layout/quickaction.xml b/res/layout/quickaction.xml
index 5360736af348..57258d340c2b 100644
--- a/res/layout/quickaction.xml
+++ b/res/layout/quickaction.xml
@@ -1,65 +1,25 @@
-<?xml version="1.0" encoding="utf-8"?>
-<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:layout_width="wrap_content"
-    android:layout_height="wrap_content">
-        
-     <FrameLayout
-  		android:layout_marginTop="10dip"
-        android:id="@+id/header2"
-        android:layout_width="fill_parent"
-        android:layout_height="wrap_content"
-        android:background="@drawable/quickcontact_top_frame"/>
-        
-  	<ImageView
-        android:id="@+id/arrow_up"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"	
-        android:src="@drawable/quickcontact_arrow_up" />
-       
-    <HorizontalScrollView
-        android:id="@+id/scroll"
-        android:layout_width="fill_parent"
-        android:layout_height="wrap_content"
-        android:fadingEdgeLength="0dip"
-        android:layout_below="@id/header2"
-        android:background="@drawable/quickcontact_slider_background"
-        android:scrollbars="none">
+<LinearLayout
+  xmlns:android="http://schemas.android.com/apk/res/android"
+  android:orientation="horizontal"
+  android:layout_width="fill_parent"
+  android:layout_height="wrap_content" 
+  android:clickable="true"
+  android:focusable="true"
+  android:background="@drawable/action_item_btn">
+          
+  <ImageView
+    android:id="@+id/iv_icon" 
+    android:layout_width="wrap_content" 
+    android:layout_height="wrap_content"/>
 
-        <LinearLayout
-            android:id="@+id/tracks"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:paddingTop="4dip"
-            android:paddingBottom="4dip" 
-            android:orientation="horizontal">
-        
-            <ImageView
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:src="@drawable/quickcontact_slider_grip_left" />
+  <TextView 
+    android:id="@+id/tv_title"
+    android:layout_width="fill_parent" 
+    android:layout_height="fill_parent" 
+    android:gravity="center_vertical"
+    android:paddingLeft="5dip"
+    android:paddingRight="10dip"
+    android:text="Chart"
+    android:textColor="#fff"/>
 
-            <ImageView
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:src="@drawable/quickcontact_slider_grip_right" />
-                
-        </LinearLayout>
-            
-    </HorizontalScrollView>
-
-    <FrameLayout
-        android:id="@+id/footer"
-        android:layout_width="fill_parent"
-        android:layout_height="wrap_content"
-        android:layout_below="@id/scroll"
-        android:background="@drawable/quickcontact_bottom_frame" />
-
-    <ImageView
-        android:id="@+id/arrow_down"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-    	android:layout_marginTop="-1dip"
-        android:layout_below="@id/footer"
-        android:src="@drawable/quickcontact_arrow_down" />
-
-</RelativeLayout>
\ No newline at end of file
+</LinearLayout> 
\ No newline at end of file
diff --git a/res/layout/splashscreen.xml b/res/layout/splashscreen.xml
deleted file mode 100644
index d08af50f07b4..000000000000
--- a/res/layout/splashscreen.xml
+++ /dev/null
@@ -1,33 +0,0 @@
-<LinearLayout
-  android:id="@+id/LinearLayout01"
-  android:layout_width="fill_parent"
-  android:layout_height="fill_parent"
-  xmlns:android="http://schemas.android.com/apk/res/android"
-  android:gravity="center|center"
-  android:background="@drawable/home_gradient"
-  android:orientation="vertical">
-  <ImageView
-    android:layout_marginTop="-60dip"
-    android:paddingLeft="20dip"
-    android:paddingRight="20dip"
-    android:scaleType="centerInside"
-    android:layout_width="wrap_content"
-    android:layout_height="wrap_content"
-    android:id="@+id/wordpress_logo"
-    android:src="@drawable/wordpress_home"></ImageView>
-  <TextView
-    android:text="@+id/TextView01"
-    android:layout_width="wrap_content"
-    android:layout_height="wrap_content"
-    android:layout_marginTop="20dip"
-    android:typeface="serif"
-    android:shadowDx="0"
-    android:shadowDy="2"
-    android:shadowRadius="1"
-    android:shadowColor="#FFFFFF"
-    android:textColor="#444444"
-    android:textSize="20dip"
-    android:id="@+id/versionNumber"
-    android:gravity="bottom">
-  </TextView>
-</LinearLayout>
diff --git a/res/layout/view_stats.xml b/res/layout/view_stats.xml
index c2e2c29ca622..e845d36c203d 100644
--- a/res/layout/view_stats.xml
+++ b/res/layout/view_stats.xml
@@ -5,11 +5,11 @@
   android:layout_height="fill_parent"
   android:background="#FFFFFFFF"
   android:fillViewport="true">
-  <include layout="@layout/action_bar" /> 
-  <RelativeLayout
+  <LinearLayout
     android:id="@+id/mainRL"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">
+    <include layout="@layout/action_bar" /> 
     <RelativeLayout
       android:layout_above="@id/mainRL"
       android:id="@+id/loading"
@@ -172,5 +172,5 @@
         android:paddingLeft="4dip"
         android:text="@string/help_stats" />
     </RelativeLayout>
-  </RelativeLayout>
+  </LinearLayout>
 </ScrollView>
diff --git a/res/values/styles.xml b/res/values/styles.xml
index 6f08bcc19041..87e8b8617ce1 100644
--- a/res/values/styles.xml
+++ b/res/values/styles.xml
@@ -130,50 +130,61 @@
 
 	<!-- PopDownMenu -->
 	<style name="Animations.PopDownMenu" />
-	
+
+	<style name="Animations.PopDownMenu.Center">
+		<item name="@android:windowEnterAnimation">@anim/grow_from_top</item>
+		<item name="@android:windowExitAnimation">@anim/shrink_from_bottom</item>
+	</style>
+
 	<style name="Animations.PopDownMenu.Left">
 		<item name="@android:windowEnterAnimation">@anim/grow_from_topleft_to_bottomright</item>
 		<item name="@android:windowExitAnimation">@anim/shrink_from_bottomright_to_topleft</item>
 	</style>
-	
+
 	<style name="Animations.PopDownMenu.Right">
 		<item name="@android:windowEnterAnimation">@anim/grow_from_topright_to_bottomleft</item>
 		<item name="@android:windowExitAnimation">@anim/shrink_from_bottomleft_to_topright</item>
 	</style>
-	
-	<style name="Animations.PopDownMenu.Center">
-		<item name="@android:windowEnterAnimation">@anim/grow_from_top</item>
-		<item name="@android:windowExitAnimation">@anim/shrink_from_bottom</item>
+
+	<style name="Animations.PopDownMenu.Reflect">
+		<item name="@android:windowEnterAnimation">@anim/pump_top</item>
+		<item name="@android:windowExitAnimation">@anim/disappear</item>
 	</style>
-	
+
 	<!-- PopUpMenu -->
 	<style name="Animations.PopUpMenu" />
-	
+
+	<style name="Animations.PopUpMenu.Center">
+		<item name="@android:windowEnterAnimation">@anim/grow_from_bottom</item>
+		<item name="@android:windowExitAnimation">@anim/shrink_from_top</item>
+	</style>
+
 	<style name="Animations.PopUpMenu.Left">
 		<item name="@android:windowEnterAnimation">@anim/grow_from_bottomleft_to_topright</item>
 		<item name="@android:windowExitAnimation">@anim/shrink_from_topright_to_bottomleft</item>
 	</style>
-	
+
 	<style name="Animations.PopUpMenu.Right">
 		<item name="@android:windowEnterAnimation">@anim/grow_from_bottomright_to_topleft</item>
 		<item name="@android:windowExitAnimation">@anim/shrink_from_topleft_to_bottomright</item>
 	</style>
-	
-	<style name="Animations.PopUpMenu.Center">
-		<item name="@android:windowEnterAnimation">@anim/grow_from_bottom</item>
-		<item name="@android:windowExitAnimation">@anim/shrink_from_top</item>
+
+	<style name="Animations.PopUpMenu.Reflect">
+		<item name="@android:windowEnterAnimation">@anim/pump_bottom</item>
+		<item name="@android:windowExitAnimation">@anim/disappear</item>
 	</style>
   
   <style name="DashboardButton">
         <item name="android:layout_gravity">center_vertical</item>
-        <item name="android:layout_width">wrap_content</item>
-        <item name="android:layout_height">wrap_content</item>
+        <item name="android:layout_width">94dip</item>
+        <item name="android:layout_height">94dip</item>
         <item name="android:gravity">center_horizontal</item>
         <item name="android:drawablePadding">2dp</item>
         <item name="android:textSize">12dip</item>
         <item name="android:textStyle">bold</item>
-        <item name="android:textColor">#464646</item>
+        <item name="android:textColor">#111111</item>
         <item name="android:background">@null</item>
+        <item name="android:paddingTop">6dip</item>
     </style>
 
 </resources>
diff --git a/src/com/commonsware/cwac/cache/AsyncCache.java b/src/com/commonsware/cwac/cache/AsyncCache.java
index a4dc9efe7156..65a93fb52ac4 100644
--- a/src/com/commonsware/cwac/cache/AsyncCache.java
+++ b/src/com/commonsware/cwac/cache/AsyncCache.java
@@ -14,10 +14,10 @@
 
 package com.commonsware.cwac.cache;
 
-import java.io.File;
-
 import com.commonsware.cwac.bus.AbstractBus;
 
+import java.io.File;
+
 abstract public class AsyncCache<K, V, B extends AbstractBus<?, ?, ?>, M>
 	extends CacheBase<K,V> {
 	protected abstract V create(K key, M message, int forceStyle);
diff --git a/src/com/commonsware/cwac/cache/CacheBase.java b/src/com/commonsware/cwac/cache/CacheBase.java
index 3a31a60edd85..a4e084bf5626 100644
--- a/src/com/commonsware/cwac/cache/CacheBase.java
+++ b/src/com/commonsware/cwac/cache/CacheBase.java
@@ -14,12 +14,14 @@
 
 package com.commonsware.cwac.cache;
 
+import com.commonsware.cwac.task.AsyncTaskEx;
+
 import android.util.Log;
+
 import java.io.File;
 import java.util.Collections;
 import java.util.LinkedHashMap;
 import java.util.Map;
-import com.commonsware.cwac.task.AsyncTaskEx;
 
 abstract public class CacheBase<K, V> {
 	public static final int CACHE_MEMORY=1;
diff --git a/src/com/commonsware/cwac/cache/SimpleWebImageCache.java b/src/com/commonsware/cwac/cache/SimpleWebImageCache.java
index 68d2fbd1194d..e355d8fa02ef 100644
--- a/src/com/commonsware/cwac/cache/SimpleWebImageCache.java
+++ b/src/com/commonsware/cwac/cache/SimpleWebImageCache.java
@@ -14,6 +14,12 @@
 
 package com.commonsware.cwac.cache;
 
+import com.commonsware.cwac.bus.AbstractBus;
+import com.commonsware.cwac.task.AsyncTaskEx;
+
+import android.graphics.drawable.BitmapDrawable;
+import android.graphics.drawable.Drawable;
+
 import java.io.BufferedInputStream;
 import java.io.ByteArrayInputStream;
 import java.io.ByteArrayOutputStream;
@@ -24,12 +30,6 @@
 import java.net.URLConnection;
 import java.security.MessageDigest;
 
-import android.graphics.drawable.BitmapDrawable;
-import android.graphics.drawable.Drawable;
-
-import com.commonsware.cwac.bus.AbstractBus;
-import com.commonsware.cwac.task.AsyncTaskEx;
-
 public class SimpleWebImageCache<B extends AbstractBus, M>
 	extends CacheBase<String, Drawable> {
 	//private static final String TAG="SimpleWebImageCache";
diff --git a/src/com/commonsware/cwac/cache/WebImageCache.java b/src/com/commonsware/cwac/cache/WebImageCache.java
index 994903753f4a..24a117d0589a 100644
--- a/src/com/commonsware/cwac/cache/WebImageCache.java
+++ b/src/com/commonsware/cwac/cache/WebImageCache.java
@@ -14,12 +14,16 @@
 
 package com.commonsware.cwac.cache;
 
+import com.commonsware.cwac.bus.SimpleBus;
+import com.commonsware.cwac.task.AsyncTaskEx;
+
 import android.app.Activity;
 import android.graphics.drawable.BitmapDrawable;
 import android.graphics.drawable.Drawable;
 import android.os.Bundle;
 import android.util.Log;
 import android.widget.ImageView;
+
 import java.io.BufferedInputStream;
 import java.io.ByteArrayInputStream;
 import java.io.ByteArrayOutputStream;
@@ -29,8 +33,6 @@
 import java.net.URL;
 import java.net.URLConnection;
 import java.security.MessageDigest;
-import com.commonsware.cwac.bus.SimpleBus;
-import com.commonsware.cwac.task.AsyncTaskEx;
 
 public class WebImageCache
 	extends AsyncCache<String, Drawable, SimpleBus, Bundle> {
diff --git a/src/com/commonsware/cwac/thumbnail/ThumbnailActivity.java b/src/com/commonsware/cwac/thumbnail/ThumbnailActivity.java
index d05f2092bb38..25f4223afe99 100644
--- a/src/com/commonsware/cwac/thumbnail/ThumbnailActivity.java
+++ b/src/com/commonsware/cwac/thumbnail/ThumbnailActivity.java
@@ -15,9 +15,10 @@
 	 
 package com.commonsware.cwac.thumbnail;
 
+import com.commonsware.cwac.cache.SimpleWebImageCache;
+
 import android.app.ListActivity;
 import android.widget.ListAdapter;
-import com.commonsware.cwac.cache.SimpleWebImageCache;
 
 abstract public class ThumbnailActivity extends ListActivity {
 	abstract protected int[] getImageIdArray();
diff --git a/src/com/commonsware/cwac/thumbnail/ThumbnailAdapter.java b/src/com/commonsware/cwac/thumbnail/ThumbnailAdapter.java
index 6b1444b0f133..21263ded53bb 100644
--- a/src/com/commonsware/cwac/thumbnail/ThumbnailAdapter.java
+++ b/src/com/commonsware/cwac/thumbnail/ThumbnailAdapter.java
@@ -1,5 +1,8 @@
 package com.commonsware.cwac.thumbnail;
 
+import com.commonsware.cwac.adapter.AdapterWrapper;
+import com.commonsware.cwac.cache.SimpleWebImageCache;
+
 import android.app.Activity;
 import android.graphics.Bitmap;
 import android.graphics.Canvas;
@@ -16,9 +19,6 @@
 import android.widget.ImageView;
 import android.widget.ListAdapter;
 
-import com.commonsware.cwac.adapter.AdapterWrapper;
-import com.commonsware.cwac.cache.SimpleWebImageCache;
-
 public class ThumbnailAdapter extends AdapterWrapper {
 	private static final String TAG="ThumbnailAdapter";
 	private int[] imageIds;
diff --git a/src/org/wordpress/android/ActionItem.java b/src/org/wordpress/android/ActionItem.java
index 1692ee4d1fb0..2d7f0571b465 100644
--- a/src/org/wordpress/android/ActionItem.java
+++ b/src/org/wordpress/android/ActionItem.java
@@ -1,7 +1,7 @@
 package org.wordpress.android;
 
+import android.graphics.Bitmap;
 import android.graphics.drawable.Drawable;
-import android.view.View.OnClickListener;
 
 /**
  * Action item, displayed as menu with icon and text.
@@ -11,8 +11,9 @@
  */
 public class ActionItem {
 	private Drawable icon;
+	private Bitmap thumb;
 	private String title;
-	private OnClickListener listener;
+	private boolean selected;
 	
 	/**
 	 * Constructor
@@ -64,20 +65,38 @@ public Drawable getIcon() {
 	}
 	
 	/**
-	 * Set on click listener
+	 * Set selected flag;
 	 * 
-	 * @param listener on click listener {@link View.OnClickListener}
+	 * @param selected Flag to indicate the item is selected
 	 */
-	public void setOnClickListener(OnClickListener listener) {
-		this.listener = listener;
+	public void setSelected(boolean selected) {
+		this.selected = selected;
 	}
 	
 	/**
-	 * Get on click listener
+	 * Check if item is selected
 	 * 
-	 * @return on click listener {@link View.OnClickListener}
+	 * @return true or false
 	 */
-	public OnClickListener getListener() {
-		return this.listener;
+	public boolean isSelected() {
+		return this.selected;
+	}
+
+	/**
+	 * Set thumb
+	 * 
+	 * @param thumb Thumb image
+	 */
+	public void setThumb(Bitmap thumb) {
+		this.thumb = thumb;
+	}
+	
+	/**
+	 * Get thumb image
+	 * 
+	 * @return Thumb image
+	 */
+	public Bitmap getThumb() {
+		return this.thumb;
 	}
 }
\ No newline at end of file
diff --git a/src/org/wordpress/android/AddAccount.java b/src/org/wordpress/android/AddAccount.java
index 63af07ced3e8..1c1d8232af30 100644
--- a/src/org/wordpress/android/AddAccount.java
+++ b/src/org/wordpress/android/AddAccount.java
@@ -1,15 +1,5 @@
 package org.wordpress.android;
 
-import java.io.IOException;
-import java.io.InputStream;
-import java.net.HttpURLConnection;
-import java.net.MalformedURLException;
-import java.net.URI;
-import java.net.URL;
-import java.net.URLConnection;
-import java.util.ArrayList;
-import java.util.HashMap;
-
 import org.apache.http.conn.HttpHostConnectException;
 import org.wordpress.android.util.EscapeUtils;
 import org.xmlpull.v1.XmlPullParser;
@@ -44,6 +34,16 @@
 import android.widget.Toast;
 import android.widget.AdapterView.OnItemClickListener;
 
+import java.io.IOException;
+import java.io.InputStream;
+import java.net.HttpURLConnection;
+import java.net.MalformedURLException;
+import java.net.URI;
+import java.net.URL;
+import java.net.URLConnection;
+import java.util.ArrayList;
+import java.util.HashMap;
+
 public class AddAccount extends Activity {
 	private XMLRPCClient client;
 	public boolean success = false;
diff --git a/src/org/wordpress/android/AddCategory.java b/src/org/wordpress/android/AddCategory.java
index a68d04c5705a..d844f5abf963 100644
--- a/src/org/wordpress/android/AddCategory.java
+++ b/src/org/wordpress/android/AddCategory.java
@@ -1,7 +1,5 @@
 package org.wordpress.android;
 
-import java.util.ArrayList;
-import java.util.Vector;
 import android.app.Activity;
 import android.app.AlertDialog;
 import android.content.DialogInterface;
@@ -14,8 +12,11 @@
 import android.widget.EditText;
 import android.widget.Spinner;
 
+import java.util.ArrayList;
+import java.util.Vector;
+
 public class AddCategory extends Activity {
-	String id = "";
+	private int id;
 	@Override
 	protected void onCreate(Bundle savedInstanceState) {
 		// TODO Auto-generated method stub
@@ -26,7 +27,7 @@ protected void onCreate(Bundle savedInstanceState) {
 		Bundle extras = getIntent().getExtras();
         if(extras !=null)
         {
-         id = extras.getString("id");
+         id = extras.getInt("id");
         }
         
         loadCategories();
diff --git a/src/org/wordpress/android/AddQuickPressShortcut.java b/src/org/wordpress/android/AddQuickPressShortcut.java
index cb12c20a9dbd..a8510c954715 100644
--- a/src/org/wordpress/android/AddQuickPressShortcut.java
+++ b/src/org/wordpress/android/AddQuickPressShortcut.java
@@ -1,7 +1,9 @@
 package org.wordpress.android;
 
-import java.util.HashMap;
-import java.util.Vector;
+import com.commonsware.cwac.cache.SimpleWebImageCache;
+import com.commonsware.cwac.thumbnail.ThumbnailAdapter;
+import com.commonsware.cwac.thumbnail.ThumbnailBus;
+import com.commonsware.cwac.thumbnail.ThumbnailMessage;
 
 import org.wordpress.android.util.EscapeUtils;
 
@@ -27,10 +29,8 @@
 import android.widget.Toast;
 import android.widget.AdapterView.OnItemClickListener;
 
-import com.commonsware.cwac.cache.SimpleWebImageCache;
-import com.commonsware.cwac.thumbnail.ThumbnailAdapter;
-import com.commonsware.cwac.thumbnail.ThumbnailBus;
-import com.commonsware.cwac.thumbnail.ThumbnailMessage;
+import java.util.HashMap;
+import java.util.Vector;
 
 public class AddQuickPressShortcut extends ListActivity {
 	public Vector<?> accounts;
diff --git a/src/org/wordpress/android/CommentService.java b/src/org/wordpress/android/CommentService.java
index 25b7248ae167..5e9f8e2399aa 100644
--- a/src/org/wordpress/android/CommentService.java
+++ b/src/org/wordpress/android/CommentService.java
@@ -1,9 +1,6 @@
 package org.wordpress.android;
 
-import java.util.HashMap;
-import java.util.Timer;
-import java.util.Vector;
-
+import org.wordpress.android.models.Blog;
 import org.xmlrpc.android.XMLRPCClient;
 import org.xmlrpc.android.XMLRPCException;
 import org.xmlrpc.android.XMLRPCFault;
@@ -17,13 +14,17 @@
 import android.os.Handler;
 import android.os.IBinder;
 import android.os.Looper;
-import android.util.Log;
+
+import java.util.HashMap;
+import java.util.Timer;
+import java.util.Vector;
 
 public class CommentService extends Service {
 
 	public static final String response = "true";
 	public static ServiceUpdateUIListener UI_UPDATE_LISTENER;
-	public String accountID = "", accountName = "", updateInterval = "";
+	public String accountName = "", updateInterval = "";
+	public int accountID;
 	private XMLRPCClient client;
 	private Timer timer = new Timer();
 
@@ -91,26 +92,26 @@ private void _getUpdatedComments() {
     		for (int i = 0; i < notificationAccounts.size(); i++)
     		{
     			
-    			accountID = notificationAccounts.get(i).toString();
-    			accountName = settingsDB.getAccountName(this, accountID);
+    			accountID = (Integer)notificationAccounts.get(i);
+                Blog blog = new Blog(accountID, CommentService.this);
+    			accountName = blog.getBlogName();
     			//Log.i("WordPressCommentService", "Checking Comments for " + accountName);
 
-    	Vector<?> settings = settingsDB.loadSettings(this, accountID);
-    	final int latestCommentID = settingsDB.getLatestCommentID(this, accountID);
+    	final int latestCommentID = blog.getLastCommentId();
     	
     	String sURL = "";
-    	if (settings.get(0).toString().contains("xmlrpc.php"))
+    	if (blog.getUrl().contains("xmlrpc.php"))
     	{
-    		sURL = settings.get(0).toString();
+    		sURL = blog.getUrl();
     	}
     	else
     	{
-    		sURL = settings.get(0).toString() + "xmlrpc.php";
+    		sURL = blog.getUrl() + "xmlrpc.php";
     	}
-		String sUsername = settings.get(2).toString();
-		String sPassword = settings.get(3).toString();
-		String sHttpuser = settings.get(4).toString();
-		String sHttppassword = settings.get(5).toString();
+		String sUsername = blog.getUsername();
+		String sPassword = blog.getPassword();
+		String sHttpuser = blog.getHttpuser();
+		String sHttppassword = blog.getHttppassword();
 		
 		client = new XMLRPCClient(sURL, sHttpuser, sHttppassword);
     	
diff --git a/src/org/wordpress/android/CustomPopupWindow.java b/src/org/wordpress/android/CustomPopupWindow.java
deleted file mode 100644
index 53cb57c1783b..000000000000
--- a/src/org/wordpress/android/CustomPopupWindow.java
+++ /dev/null
@@ -1,211 +0,0 @@
-package org.wordpress.android;
-
-import android.content.Context;
-
-import android.graphics.Rect;
-import android.graphics.drawable.BitmapDrawable;
-import android.graphics.drawable.Drawable;
-
-import android.view.Gravity;
-import android.view.LayoutInflater;
-import android.view.MotionEvent;
-import android.view.View;
-import android.view.View.OnTouchListener;
-import android.view.ViewGroup.LayoutParams;
-import android.view.WindowManager;
-
-import android.widget.PopupWindow;
-
-/**
- * This class does most of the work of wrapping the {@link PopupWindow} so it's simpler to use. 
- * Edited by Lorensius. W. L. T
- * 
- * @author qberticus
- * 
- */
-public class CustomPopupWindow {
-	protected final View anchor;
-	protected final PopupWindow window;
-	private View root;
-	private Drawable background = null;
-	protected final WindowManager windowManager;
-	
-	/**
-	 * Create a QuickAction
-	 * 
-	 * @param anchor
-	 *            the view that the QuickAction will be displaying 'from'
-	 */
-	public CustomPopupWindow(View anchor) {
-		this.anchor = anchor;
-		this.window = new PopupWindow(anchor.getContext());
-
-		// when a touch even happens outside of the window
-		// make the window go away
-		window.setTouchInterceptor(new OnTouchListener() {
-			public boolean onTouch(View v, MotionEvent event) {
-				if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
-					CustomPopupWindow.this.window.dismiss();
-					
-					return true;
-				}
-				
-				return false;
-			}
-		});
-
-		windowManager = (WindowManager) anchor.getContext().getSystemService(Context.WINDOW_SERVICE);
-		
-		onCreate();
-	}
-
-	/**
-	 * Anything you want to have happen when created. Probably should create a view and setup the event listeners on
-	 * child views.
-	 */
-	protected void onCreate() {}
-
-	/**
-	 * In case there is stuff to do right before displaying.
-	 */
-	protected void onShow() {}
-
-	protected void preShow() {
-		if (root == null) {
-			throw new IllegalStateException("setContentView was not called with a view to display.");
-		}
-		
-		onShow();
-
-		if (background == null) {
-			window.setBackgroundDrawable(new BitmapDrawable());
-		} else {
-			window.setBackgroundDrawable(background);
-		}
-
-		// if using PopupWindow#setBackgroundDrawable this is the only values of the width and hight that make it work
-		// otherwise you need to set the background of the root viewgroup
-		// and set the popupwindow background to an empty BitmapDrawable
-		
-		window.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
-		window.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
-		window.setTouchable(true);
-		window.setFocusable(true);
-		window.setOutsideTouchable(true);
-
-		window.setContentView(root);
-	}
-
-	public void setBackgroundDrawable(Drawable background) {
-		this.background = background;
-	}
-
-	/**
-	 * Sets the content view. Probably should be called from {@link onCreate}
-	 * 
-	 * @param root
-	 *            the view the popup will display
-	 */
-	public void setContentView(View root) {
-		this.root = root;
-		
-		window.setContentView(root);
-	}
-
-	/**
-	 * Will inflate and set the view from a resource id
-	 * 
-	 * @param layoutResID
-	 */
-	public void setContentView(int layoutResID) {
-		LayoutInflater inflator =
-				(LayoutInflater) anchor.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
-		
-		setContentView(inflator.inflate(layoutResID, null));
-	}
-
-	/**
-	 * If you want to do anything when {@link dismiss} is called
-	 * 
-	 * @param listener
-	 */
-	public void setOnDismissListener(PopupWindow.OnDismissListener listener) {
-		window.setOnDismissListener(listener);
-	}
-
-	/**
-	 * Displays like a popdown menu from the anchor view
-	 */
-	public void showDropDown() {
-		showDropDown(0, 0);
-	}
-
-	/**
-	 * Displays like a popdown menu from the anchor view.
-	 * 
-	 * @param xOffset
-	 *            offset in X direction
-	 * @param yOffset
-	 *            offset in Y direction
-	 */
-	public void showDropDown(int xOffset, int yOffset) {
-		preShow();
-
-		window.setAnimationStyle(R.style.Animations_PopDownMenu_Left);
-
-		window.showAsDropDown(anchor, xOffset, yOffset);
-	}
-
-	/**
-	 * Displays like a QuickAction from the anchor view.
-	 */
-	public void showLikeQuickAction() {
-		showLikeQuickAction(0, 0);
-	}
-
-	/**
-	 * Displays like a QuickAction from the anchor view.
-	 * 
-	 * @param xOffset
-	 *            offset in the X direction
-	 * @param yOffset
-	 *            offset in the Y direction
-	 */
-	public void showLikeQuickAction(int xOffset, int yOffset) {
-		preShow();
-
-		window.setAnimationStyle(R.style.Animations_PopUpMenu_Center);
-
-		int[] location = new int[2];
-		anchor.getLocationOnScreen(location);
-
-		Rect anchorRect =
-				new Rect(location[0], location[1], location[0] + anchor.getWidth(), location[1]
-					+ anchor.getHeight());
-
-		root.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
-		root.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-		
-		int rootWidth 		= root.getMeasuredWidth();
-		int rootHeight 		= root.getMeasuredHeight();
-
-		int screenWidth 	= windowManager.getDefaultDisplay().getWidth();
-		//int screenHeight 	= windowManager.getDefaultDisplay().getHeight();
-
-		int xPos 			= ((screenWidth - rootWidth) / 2) + xOffset;
-		int yPos	 		= anchorRect.top - rootHeight + yOffset;
-
-		// display on bottom
-		if (rootHeight > anchorRect.top) {
-			yPos = anchorRect.bottom + yOffset;
-			
-			window.setAnimationStyle(R.style.Animations_PopDownMenu_Center);
-		}
-
-		window.showAtLocation(anchor, Gravity.NO_GRAVITY, xPos, yPos);
-	}
-	
-	public void dismiss() {
-		window.dismiss();
-	}
-}
\ No newline at end of file
diff --git a/src/org/wordpress/android/Dashboard.java b/src/org/wordpress/android/Dashboard.java
index dcb252481cdf..613700606e2e 100644
--- a/src/org/wordpress/android/Dashboard.java
+++ b/src/org/wordpress/android/Dashboard.java
@@ -1,23 +1,13 @@
 
 package org.wordpress.android;
 
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.UnsupportedEncodingException;
-import java.net.MalformedURLException;
-import java.net.URL;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.UUID;
-import java.util.Vector;
-
 import org.apache.http.NameValuePair;
 import org.apache.http.client.HttpClient;
 import org.apache.http.client.entity.UrlEncodedFormEntity;
 import org.apache.http.client.methods.HttpPost;
 import org.apache.http.impl.client.DefaultHttpClient;
 import org.apache.http.message.BasicNameValuePair;
+import org.wordpress.android.models.Blog;
 import org.wordpress.android.util.AlertUtil;
 import org.wordpress.android.util.EscapeUtils;
 
@@ -40,14 +30,24 @@
 import android.view.View;
 import android.view.WindowManager;
 import android.view.View.OnClickListener;
-import android.widget.AdapterView;
-import android.widget.ArrayAdapter;
+import android.view.animation.Animation;
+import android.view.animation.AnimationUtils;
 import android.widget.Button;
 import android.widget.ImageButton;
 import android.widget.ImageView;
-import android.widget.Spinner;
+import android.widget.TextView;
 import android.widget.Toast;
-import android.widget.AdapterView.OnItemSelectedListener;
+
+import java.io.IOException;
+import java.io.InputStream;
+import java.io.UnsupportedEncodingException;
+import java.net.MalformedURLException;
+import java.net.URL;
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.List;
+import java.util.UUID;
+import java.util.Vector;
 
 public class Dashboard extends Activity {
     public Vector<?> accounts;
@@ -56,10 +56,8 @@ public class Dashboard extends Activity {
     private String blavatar_url;
     boolean fromNotification = false;
     int uploadID = 0;
-    public ArrayList<String> defBlogNames = new ArrayList<String>();
-    public int[] blogIDs;
     public Integer default_blog;
-    QuickAction qa;
+    TextView commentBadge;
 
     @Override
     public void onCreate(Bundle savedInstanceState) {
@@ -71,16 +69,10 @@ public void onCreate(Bundle savedInstanceState) {
 
         final WordPressDB settingsDB = new WordPressDB(this);
         accounts = settingsDB.getAccounts(this);
-
-        Bundle extras = getIntent().getExtras();
-        if (extras != null) {
-            activateTab = extras.getString("activateTab");
-            fromNotification = extras.getBoolean("fromNotification", false);
-            action = extras.getString("action");
-            uploadID = extras.getInt("uploadID");
-            blavatar_url = extras.getString("blavatar");
-            default_blog = extras.getInt("default_blog");
-        }
+        
+        Animation rotateAnim = AnimationUtils.loadAnimation(this, R.anim.rotate_comment_badge);
+        commentBadge = (TextView) findViewById(R.id.comment_badge);
+        commentBadge.setAnimation(rotateAnim);
     }
     
     @Override
@@ -122,7 +114,7 @@ protected void onActivityResult(int requestCode, int resultCode, Intent data) {
         {
             Bundle bundle = data.getExtras();
             String status = bundle.getString("returnStatus");
-            if (status.equals("CANCEL") && blogIDs == null) {
+            if (status.equals("CANCEL") && WordPress.currentBlog != null) {
                 finish();
             }
         }
@@ -356,20 +348,14 @@ private void uploadStats(int numBlogs) {
     
     public void displayAccounts() {
 
-        /*setContentView(R.layout.home);
-        setTitle(getResources().getText(R.string.app_name));*/
-
         // settings time!
-        WordPressDB settingsDB = new WordPressDB(this);
+        final WordPressDB settingsDB = new WordPressDB(this);
         accounts = settingsDB.getAccounts(this);
 
         // upload stats
         checkStats(accounts.size());
 
         if (accounts.size() > 0) {
-            
-            ImageButton home = (ImageButton) findViewById(R.id.home_small);
-            ImageButton add = (ImageButton) findViewById(R.id.add_small);
 
             try {
                 ImageView i = (ImageView) findViewById(R.id.blavatar_img);
@@ -382,187 +368,18 @@ public void displayAccounts() {
                 e.printStackTrace();
             }
 
-            blogIDs = new int[accounts.size()];
-            
-            for (int i = 0; i < accounts.size(); i++) {
-                HashMap<?, ?> defHash = (HashMap<?, ?>) accounts.get(i);
-                String curBlogName = EscapeUtils.unescapeHtml(defHash.get("blogName").toString());
-
-                defBlogNames.add(curBlogName);
-                blogIDs[i] = Integer.valueOf(defHash.get("id").toString());
-            }
+            //Integer blog_num = blog_select.getSelectedItemPosition();
+            //blog_num = blog_num + 1;
 
-            final Spinner blog_select = (Spinner) findViewById(R.id.blogname);
-            ArrayAdapter blog_list = new ArrayAdapter(this,
-                    android.R.layout.simple_spinner_item, defBlogNames);
-            blog_select.setAdapter(blog_list);
+            //id = blog_num.toString();
             
-            blog_select.setOnItemSelectedListener(new OnItemSelectedListener() {
-                public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long row_id) {
-
-                    WordPressDB wpDB = new WordPressDB(Dashboard.this);
-                    wpDB.updateLastBlogID(Dashboard.this, blogIDs[position]);
-                    id = String.valueOf(blogIDs[position]);
-                }
-
-                public void onNothingSelected(AdapterView<?> parentView) {
-                    // your code here
-                }
-
-            });
-            
-            int lastBlogID = settingsDB.getLastBlogID(this);
-            if (lastBlogID != -1) {
-                try {
-                    boolean matchedID = false;
-                    for (int i=0;i<blogIDs.length;i++) {
-                        if (blogIDs[i] == lastBlogID) {
-                            blog_select.setSelection(i); 
-                            matchedID = true;
-                        }
-                    }
-                    if (!matchedID) {
-                        blog_select.setSelection(0);
-                    }
-                } catch (Exception e) {
-                    e.printStackTrace();
-                }
-            }
-            else {
-                blog_select.setSelection(0);
-            }
-
-            Integer blog_num = blog_select.getSelectedItemPosition();
-            blog_num = blog_num + 1;
-
-            id = blog_num.toString();
-
-            home.setOnClickListener(new OnClickListener() {
-                public void onClick(View v) {
-                    Intent i = new Intent(Dashboard.this, Dashboard.class);
-                    startActivity(i);
-                }
-            });
-
-            final ActionItem newpost = new ActionItem();
-
-            newpost.setTitle("Add New Post");
-            newpost.setIcon(getResources().getDrawable(R.drawable.posts_tab));
-            newpost.setOnClickListener(new OnClickListener() {
-                public void onClick(View v) {
-
-                    Intent i = new Intent(Dashboard.this, EditPost.class);
-                    i.putExtra("blavatar", blavatar_url);
-                    i.putExtra("id", id);
-                    i.putExtra("isNew", true);
-                    startActivityForResult(i, 0);
-                    if (qa != null)
-                        qa.dismiss();
-                    
-                }
-            });
-
-            final ActionItem newpage = new ActionItem();
-
-            newpage.setTitle("Add New Page");
-            newpage.setIcon(getResources().getDrawable(R.drawable.pages_tab));
-            newpage.setOnClickListener(new OnClickListener() {
-                public void onClick(View v) {
-
-                    Intent i = new Intent(Dashboard.this, EditPost.class);
-                    i.putExtra("id", id);
-                    i.putExtra("blavatar", blavatar_url);
-                    i.putExtra("isNew", true);
-                    i.putExtra("isPage", true);
-                    startActivityForResult(i, 0);
-                }
-            });
-
-            final ActionItem addOldPhoto = new ActionItem();
-            addOldPhoto.setTitle("Add Image From Gallery");
-            addOldPhoto.setIcon(getResources().getDrawable(R.drawable.media));
-            addOldPhoto.setOnClickListener(new OnClickListener() {
-                public void onClick(View v) {
-                    Intent i = new Intent(Dashboard.this, EditPost.class);
-                    i.putExtra("id", id);
-                    i.putExtra("isNew", true);
-                    i.putExtra("blavatar", blavatar_url);
-                    i.putExtra("viewPages", true);
-                    i.putExtra("option", "photoPicker");
-                    startActivityForResult(i, 0);
-                }
-            });
-
-            final ActionItem takeNewPhoto = new ActionItem();
-            takeNewPhoto.setTitle("Take Photo");
-            takeNewPhoto.setIcon(getResources().getDrawable(R.drawable.media));
-            takeNewPhoto.setOnClickListener(new OnClickListener() {
-                public void onClick(View v) {
-                    Intent i = new Intent(Dashboard.this, EditPost.class);
-                    i.putExtra("id", id);
-                    i.putExtra("isNew", true);
-                    i.putExtra("blavatar", blavatar_url);
-                    i.putExtra("viewPages", true);
-                    i.putExtra("option", "takePhotoFromCamera");
-                    startActivityForResult(i, 0);
-                }
-            });
-
-            final ActionItem addOldVideo = new ActionItem();
-            addOldVideo.setTitle("Add Video from Gallery");
-            addOldVideo.setIcon(getResources().getDrawable(R.drawable.media));
-            addOldVideo.setOnClickListener(new OnClickListener() {
-                public void onClick(View v) {
-                    Intent i = new Intent(Dashboard.this, EditPost.class);
-                    i.putExtra("id", id);
-                    i.putExtra("isNew", true);
-                    i.putExtra("blavatar", blavatar_url);
-                    i.putExtra("viewPages", true);
-                    i.putExtra("option", "videoPicker");
-                    startActivityForResult(i, 0);
-                }
-            });
-
-            final ActionItem takeNewVideo = new ActionItem();
-            takeNewVideo.setTitle("Take Video");
-            takeNewVideo.setIcon(getResources().getDrawable(R.drawable.media));
-            takeNewVideo.setOnClickListener(new OnClickListener() {
-                public void onClick(View v) {
-                    Intent i = new Intent(Dashboard.this, EditPost.class);
-                    i.putExtra("id", id);
-                    i.putExtra("isNew", true);
-                    i.putExtra("blavatar", blavatar_url);
-                    i.putExtra("viewPages", true);
-                    i.putExtra("option", "takeVideo");
-                    startActivityForResult(i, 0);
-                }
-            });
-
-            add.setOnClickListener(new View.OnClickListener() {
-                public void onClick(View v) {
-
-                    Integer blog_num = blog_select.getSelectedItemPosition();
-                    blog_num = blog_num + 1;
-
-                    id = blog_num.toString();
-
-                    qa = new QuickAction(v);
-                    qa.addActionItem(newpost);
-                    qa.addActionItem(newpage);
-                    qa.addActionItem(addOldPhoto);
-                    qa.addActionItem(takeNewPhoto);
-                    qa.addActionItem(addOldVideo);
-                    qa.addActionItem(takeNewVideo);
-                    qa.setAnimStyle(QuickAction.ANIM_AUTO);
-                    qa.show();
-                }
-            });
+            updateCommentBadge();
 
             Button postsButton = (Button) findViewById(R.id.dashboard_posts_btn);
             postsButton.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View v) {
                     Intent i = new Intent(Dashboard.this, ViewPosts.class);
-                    i.putExtra("id", id);
+                    i.putExtra("id", WordPress.currentBlog.getId());
                     i.putExtra("blavatar", blavatar_url);
                     i.putExtra("isNew", true);
                     startActivityForResult(i, 0);
@@ -573,7 +390,7 @@ public void onClick(View v) {
             pagesButton.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View v) {
                     Intent i = new Intent(Dashboard.this, ViewPosts.class);
-                    i.putExtra("id", id);
+                    i.putExtra("id", WordPress.currentBlog.getId());
                     i.putExtra("isNew", true);
                     i.putExtra("blavatar", blavatar_url);
                     i.putExtra("viewPages", true);
@@ -581,7 +398,7 @@ public void onClick(View v) {
                 }
             });
             
-            Button draftsButton = (Button) findViewById(R.id.dashboard_drafts_btn);
+            /*Button draftsButton = (Button) findViewById(R.id.dashboard_drafts_btn);
             draftsButton.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View v) {
                     Intent i = new Intent(Dashboard.this, ViewDrafts.class);
@@ -590,13 +407,13 @@ public void onClick(View v) {
                     i.putExtra("isNew", true);
                     startActivityForResult(i, 0);
                 }
-            });
+            });*/
             
             Button commentsButton = (Button) findViewById(R.id.dashboard_comments_btn);
             commentsButton.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View v) {
                     Intent i = new Intent(Dashboard.this, ViewComments.class);
-                    i.putExtra("id", id);
+                    i.putExtra("id", WordPress.currentBlog.getId());
                     i.putExtra("blavatar", blavatar_url);
                     i.putExtra("isNew", true);
                     startActivityForResult(i, 0);
@@ -607,7 +424,7 @@ public void onClick(View v) {
             statsButton.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View v) {
                     Intent i = new Intent(Dashboard.this, ViewStats.class);
-                    i.putExtra("id", id);
+                    i.putExtra("id", WordPress.currentBlog.getId());
                     i.putExtra("blavatar", blavatar_url);
                     i.putExtra("isNew", true);
                     startActivityForResult(i, 0);
@@ -618,7 +435,7 @@ public void onClick(View v) {
             settingsButton.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View v) {
                     Intent i = new Intent(Dashboard.this, Settings.class);
-                    i.putExtra("id", id);
+                    i.putExtra("id", WordPress.currentBlog.getId());
                     i.putExtra("blavatar", blavatar_url);
                     i.putExtra("isNew", true);
                     startActivityForResult(i, 0);
@@ -629,13 +446,13 @@ public void onClick(View v) {
 
             quickpress.setOnClickListener(new View.OnClickListener() {
                 public void onClick(View v) {
-                    Integer blog_num = blog_select.getSelectedItemPosition();
-                    blog_num = blog_num + 1;
+                    //Integer blog_num = blog_select.getSelectedItemPosition();
+                    //blog_num = blog_num + 1;
 
-                    id = blog_num.toString();
+                    //id = blog_num.toString();
                     Intent i = new Intent(Dashboard.this, EditPost.class);
                     i.putExtra("blavatar", blavatar_url);
-                    i.putExtra("id", id);
+                    i.putExtra("id", WordPress.currentBlog.getId());
                     i.putExtra("isNew", true);
                     i.putExtra("option", "");
                     startActivityForResult(i, 0);
@@ -650,4 +467,10 @@ public void onClick(View v) {
 
         }
     }
+    
+    public void updateCommentBadge(){
+        if (WordPress.currentBlog != null) {
+            commentBadge.setText(String.valueOf(WordPress.currentBlog.getUnmoderatedCommentCount(this)));
+        }
+    }
 }
diff --git a/src/org/wordpress/android/EditPost.java b/src/org/wordpress/android/EditPost.java
index fa1b11540b5f..696ad2db3fef 100644
--- a/src/org/wordpress/android/EditPost.java
+++ b/src/org/wordpress/android/EditPost.java
@@ -1,23 +1,11 @@
 package org.wordpress.android;
 
-import java.io.DataInputStream;
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.FileNotFoundException;
-import java.io.IOException;
-import java.io.Serializable;
-import java.net.MalformedURLException;
-import java.net.URL;
-import java.text.DateFormatSymbols;
-import java.text.SimpleDateFormat;
-import java.util.ArrayList;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Locale;
-import java.util.Vector;
+import org.json.JSONArray;
+import org.json.JSONException;
+import org.wordpress.android.models.Blog;
+import org.wordpress.android.models.Post;
+import org.wordpress.android.util.EscapeUtils;
+import org.wordpress.android.util.ImageHelper;
 
 import android.app.Activity;
 import android.app.AlertDialog;
@@ -78,14 +66,23 @@
 import android.widget.Toast;
 import android.widget.ToggleButton;
 
-import org.json.JSONArray;
-import org.json.JSONException;
-import org.json.JSONObject;
-import org.wordpress.android.models.Blog;
-import org.wordpress.android.models.Post;
-import org.wordpress.android.util.EscapeUtils;
-import org.wordpress.android.util.ImageHelper;
-import org.xmlrpc.android.ApiHelper;
+import java.io.DataInputStream;
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.FileNotFoundException;
+import java.io.IOException;
+import java.io.Serializable;
+import java.net.MalformedURLException;
+import java.net.URL;
+import java.text.DateFormatSymbols;
+import java.text.SimpleDateFormat;
+import java.util.ArrayList;
+import java.util.Calendar;
+import java.util.Date;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Locale;
+import java.util.Vector;
 
 public class EditPost extends Activity implements LocationListener{
     /** Called when the activity is first created. */
@@ -103,10 +100,10 @@ public class EditPost extends Activity implements LocationListener{
 	public ArrayList<CharSequence> textArray = new ArrayList<CharSequence>();
 	public ArrayList<CharSequence> loadTextArray = new ArrayList<CharSequence>();
 	public Boolean newStart = true;
-	public String categoryErrorMsg = "", id = "", accountName = "", SD_CARD_TEMP_DIR = "", mediaErrorMsg = "";
+	public String categoryErrorMsg = "", accountName = "", SD_CARD_TEMP_DIR = "", mediaErrorMsg = "";
 	private JSONArray categories;
 	private Vector<Uri> selectedImageIDs = new Vector<Uri>();
-	private int selectedImageCtr = 0;
+	private int selectedImageCtr = 0, id;
 	long postID;
     private int ID_DIALOG_POSTING = 1, ID_DIALOG_LOADING = 2, ID_DIALOG_DATE = 3, ID_DIALOG_TIME = 4;
     public String newID, imgHTML, sMaxImageWidth, sImagePlacement, sSlug, setText, option;
@@ -130,7 +127,7 @@ public void onCreate(Bundle icicle) {
         categories = new JSONArray();
         if(extras !=null)
         {
-         id = extras.getString("id");
+         id = extras.getInt("id");
          blog = new Blog(id, this);
          accountName = EscapeUtils.unescapeHtml(extras.getString("accountName"));
          postID = extras.getLong("postID");
@@ -207,7 +204,7 @@ public void onCreate(Bundle icicle) {
 			if (accounts.size() > 0){
 
 				final String blogNames[] = new String[accounts.size()];
-				final String accountIDs[] = new String[accounts.size()];
+				final int accountIDs[] = new int[accounts.size()];
 
 				for (int i = 0; i < accounts.size(); i++) {
 
@@ -217,7 +214,7 @@ public void onCreate(Bundle icicle) {
 					} catch (Exception e) {
 						blogNames[i] = "(No Blog Title)";
 					}
-					accountIDs[i] = curHash.get("id").toString();
+					accountIDs[i] = (Integer)curHash.get("id");
 
 				} 
 
@@ -425,7 +422,7 @@ else if (blog.isLocation()){
 	            public void onClick(View v) {
 	            	 
 	            	Bundle bundle = new Bundle();
-					bundle.putString("id", id);
+					bundle.putInt("id", id);
 					if (categories.length() > 0){
 					bundle.putString("categoriesCSV", getCategoriesCSV());
 					}
diff --git a/src/org/wordpress/android/PopupWindows.java b/src/org/wordpress/android/PopupWindows.java
new file mode 100644
index 000000000000..aa9f281f5ff3
--- /dev/null
+++ b/src/org/wordpress/android/PopupWindows.java
@@ -0,0 +1,132 @@
+package org.wordpress.android;
+
+import android.content.Context;
+import android.graphics.drawable.BitmapDrawable;
+import android.graphics.drawable.Drawable;
+import android.view.LayoutInflater;
+import android.view.MotionEvent;
+import android.view.View;
+import android.view.WindowManager;
+import android.view.View.OnTouchListener;
+import android.widget.PopupWindow;
+
+/**
+ * Custom popup window.
+ * 
+ * @author Lorensius W. L. T <lorenz@londatiga.net>
+ *
+ */
+public class PopupWindows {
+	protected Context mContext;
+	protected PopupWindow mWindow;
+	protected View mRootView;
+	protected Drawable mBackground = null;
+	protected WindowManager mWindowManager;
+	
+	/**
+	 * Constructor.
+	 * 
+	 * @param context Context
+	 */
+	public PopupWindows(Context context) {
+		mContext	= context;
+		mWindow 	= new PopupWindow(context);
+
+		mWindow.setTouchInterceptor(new OnTouchListener() {
+			@Override
+			public boolean onTouch(View v, MotionEvent event) {
+				if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
+					mWindow.dismiss();
+					
+					return true;
+				}
+				
+				return false;
+			}
+		});
+
+		mWindowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
+	}
+	
+	/**
+	 * On dismiss
+	 */
+	protected void onDismiss() {		
+	}
+	
+	/**
+	 * On show
+	 */
+	protected void onShow() {		
+	}
+
+	/**
+	 * On pre show
+	 */
+	protected void preShow() {
+		if (mRootView == null) 
+			throw new IllegalStateException("setContentView was not called with a view to display.");
+	
+		onShow();
+
+		if (mBackground == null) 
+			mWindow.setBackgroundDrawable(new BitmapDrawable());
+		else 
+			mWindow.setBackgroundDrawable(mBackground);
+
+		mWindow.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
+		mWindow.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
+		mWindow.setTouchable(true);
+		mWindow.setFocusable(true);
+		mWindow.setOutsideTouchable(true);
+
+		mWindow.setContentView(mRootView);
+	}
+
+	/**
+	 * Set background drawable.
+	 * 
+	 * @param background Background drawable
+	 */
+	public void setBackgroundDrawable(Drawable background) {
+		mBackground = background;
+	}
+
+	/**
+	 * Set content view.
+	 * 
+	 * @param root Root view
+	 */
+	public void setContentView(View root) {
+		mRootView = root;
+		
+		mWindow.setContentView(root);
+	}
+
+	/**
+	 * Set content view.
+	 * 
+	 * @param layoutResID Resource id
+	 */
+	public void setContentView(int layoutResID) {
+		LayoutInflater inflator = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
+		
+		setContentView(inflator.inflate(layoutResID, null));
+	}
+
+	/**
+	 * Set listener on window dismissed.
+	 * 
+	 * @param listener
+	 */
+	public void setOnDismissListener(PopupWindow.OnDismissListener listener) {
+		mWindow.setOnDismissListener(listener);  
+	}
+
+	/**
+	 * Dismiss the popup window.
+	 */
+	public void dismiss() {
+		mWindow.dismiss();
+	}
+}
\ No newline at end of file
diff --git a/src/org/wordpress/android/Preferences.java b/src/org/wordpress/android/Preferences.java
index 7741825e4289..61d4c753fb09 100644
--- a/src/org/wordpress/android/Preferences.java
+++ b/src/org/wordpress/android/Preferences.java
@@ -1,8 +1,5 @@
 package org.wordpress.android;
 
-import java.util.HashMap;
-import java.util.Vector;
-
 import org.wordpress.android.util.EscapeUtils;
 
 import android.app.Activity;
@@ -26,6 +23,9 @@
 import android.widget.Spinner;
 import android.widget.TextView;
 
+import java.util.HashMap;
+import java.util.Vector;
+
 
 public class Preferences extends Activity {
     /** Called when the activity is first created. */
diff --git a/src/org/wordpress/android/QuickAction.java b/src/org/wordpress/android/QuickAction.java
index e5231422d8d3..b1ac6baa96f1 100644
--- a/src/org/wordpress/android/QuickAction.java
+++ b/src/org/wordpress/android/QuickAction.java
@@ -1,255 +1,249 @@
 package org.wordpress.android;
 
 import android.content.Context;
-
 import android.graphics.Rect;
 import android.graphics.drawable.Drawable;
-
-import android.widget.ImageView;
-import android.widget.TextView;
-import android.widget.LinearLayout;
-import android.widget.ScrollView;
-
 import android.view.Gravity;
 import android.view.LayoutInflater;
 import android.view.View;
+import android.view.ViewGroup;
 import android.view.View.OnClickListener;
 import android.view.ViewGroup.LayoutParams;
-import android.view.ViewGroup;
-
-import java.util.ArrayList;
+import android.widget.ImageView;
+import android.widget.ScrollView;
+import android.widget.TextView;
 
 /**
  * Popup window, shows action list as icon and text like the one in Gallery3D app. 
  * 
  * @author Lorensius. W. T
  */
-public class QuickAction extends CustomPopupWindow {
-	private final View root;
-	private final ImageView mArrowUp;
-	private final ImageView mArrowDown;
-	private final LayoutInflater inflater;
-	private final Context context;
-	
-	protected static final int ANIM_GROW_FROM_LEFT = 1;
-	protected static final int ANIM_GROW_FROM_RIGHT = 2;
-	protected static final int ANIM_GROW_FROM_CENTER = 3;
-	protected static final int ANIM_REFLECT = 4;
-	protected static final int ANIM_AUTO = 5;
-	
-	private int animStyle;
-	private ViewGroup mTrack;
-	private ScrollView scroller;
-	private ArrayList<ActionItem> actionList;
-	
-	/**
-	 * Constructor
-	 * 
-	 * @param anchor {@link View} on where the popup window should be displayed
-	 */
-	public QuickAction(View anchor) {
-		super(anchor);
-		
-		actionList	= new ArrayList<ActionItem>();
-		context		= anchor.getContext();
-		inflater 	= (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
-		
-		root		= (ViewGroup) inflater.inflate(R.layout.popup, null);
-		mArrowDown 	= (ImageView) root.findViewById(R.id.arrow_down);
-		mArrowUp 	= (ImageView) root.findViewById(R.id.arrow_up);
-		
-		setContentView(root);
-	    
-		mTrack 			= (ViewGroup) root.findViewById(R.id.tracks);
-		scroller		= (ScrollView) root.findViewById(R.id.scroller);
-		animStyle		= ANIM_AUTO;
-	}
+public class QuickAction extends PopupWindows {
+    private View mRootView;
+    private ImageView mArrowUp;
+    private ImageView mArrowDown;
+    private LayoutInflater inflater;
+    private ViewGroup mTrack;
+    private ScrollView mScroller;
+    private OnActionItemClickListener mListener;
+    
+    protected static final int ANIM_GROW_FROM_LEFT = 1;
+    protected static final int ANIM_GROW_FROM_RIGHT = 2;
+    protected static final int ANIM_GROW_FROM_CENTER = 3;
+    protected static final int ANIM_REFLECT = 4;
+    public static final int ANIM_AUTO = 5;
+    
+    private int mChildPos;
+    private int animStyle;
+    
+    /**
+     * Constructor.
+     * 
+     * @param context Context
+     */
+    public QuickAction(Context context) {
+        super(context);
+        
+        inflater        = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
+        
+        setRootViewId(R.layout.popup);
+       
+        animStyle       = ANIM_AUTO;
+        mChildPos       = 0;
+    }
 
-	/**
-	 * Set animation style
-	 * 
-	 * @param animStyle animation style, default is set to ANIM_AUTO
-	 */
-	public void setAnimStyle(int animStyle) {
-		this.animStyle = animStyle;
-	}
+    /**
+     * Set root view.
+     * 
+     * @param id Layout resource id
+     */
+    public void setRootViewId(int id) {
+        mRootView   = (ViewGroup) inflater.inflate(id, null);
+        mTrack      = (ViewGroup) mRootView.findViewById(R.id.tracks);
 
-	/**
-	 * Add action item
-	 * 
-	 * @param action  {@link ActionItem} object
-	 */
-	public void addActionItem(ActionItem action) {
-		actionList.add(action); 
-	}
-	
-	/**
-	 * Show popup window. Popup is automatically positioned, on top or bottom of anchor view.
-	 * 
-	 */
-	public void show () {
-		preShow();
-		
-		int xPos, yPos;
-		
-		int[] location 		= new int[2];
-	
-		anchor.getLocationOnScreen(location);
+        mArrowDown  = (ImageView) mRootView.findViewById(R.id.arrow_down);
+        mArrowUp    = (ImageView) mRootView.findViewById(R.id.arrow_up);
 
-		Rect anchorRect 	= new Rect(location[0], location[1], location[0] + anchor.getWidth(), location[1] 
-		                	+ anchor.getHeight());
+        mScroller   = (ScrollView) mRootView.findViewById(R.id.scroller);
+        
+        setContentView(mRootView);
+    }
+    
+    /**
+     * Set animation style
+     * 
+     * @param animStyle animation style, default is set to ANIM_AUTO
+     */
+    public void setAnimStyle(int animStyle) {
+        this.animStyle = animStyle;
+    }
+    
+    /**
+     * Set listener for action item clicked.
+     * 
+     * @param listener Listener
+     */
+    public void setOnActionItemClickListener(OnActionItemClickListener listener) {
+        mListener = listener;
+    }
+    
+    /**
+     * Add action item
+     * 
+     * @param action  {@link ActionItem}
+     */
+    public void addActionItem(ActionItem action) {
+        
+        String title    = action.getTitle();
+        Drawable icon   = action.getIcon();
+        
+        View container  = (View) inflater.inflate(R.layout.action_item, null);
+        
+        ImageView img   = (ImageView) container.findViewById(R.id.iv_icon);
+        TextView text   = (TextView) container.findViewById(R.id.tv_title);
+        
+        if (icon != null) 
+            img.setImageDrawable(icon);
+        else
+            img.setVisibility(View.GONE);
+        
+        if (title != null)
+            text.setText(title);
+        else
+            text.setVisibility(View.GONE);
+        
+        final int pos =  mChildPos;
+        
+        container.setOnClickListener(new OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                if (mListener != null) mListener.onItemClick(pos);
+                    
+                dismiss();
+            }
+        });
+        
+        container.setFocusable(true);
+        container.setClickable(true);
+             
+        mTrack.addView(container, mChildPos);
+        
+        mChildPos++;
+    }
+    
+    /**
+     * Show popup window. Popup is automatically positioned, on top or bottom of anchor view.
+     * 
+     */
+    public void show (View anchor) {
+        preShow();
+        
+        int xPos, yPos;
+        
+        int[] location      = new int[2];
+    
+        anchor.getLocationOnScreen(location);
 
-		createActionList();
-		
-		root.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
-		root.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
-	
-		int rootHeight 		= root.getMeasuredHeight();
-		int rootWidth		= root.getMeasuredWidth();
-		
-		int screenWidth 	= windowManager.getDefaultDisplay().getWidth();
-		int screenHeight	= windowManager.getDefaultDisplay().getHeight();
-		
-		//automatically get X coord of popup (top left)
-		if ((anchorRect.left + rootWidth) > screenWidth) {
-			xPos = anchorRect.left - (rootWidth-anchor.getWidth());
-		} else {
-			if (anchor.getWidth() > rootWidth) {
-				xPos = anchorRect.centerX() - (rootWidth/2);
-			} else {
-				xPos = anchorRect.left;
-			}
-		}
-		
-		int dyTop			= anchorRect.top;
-		int dyBottom		= screenHeight - anchorRect.bottom;
+        Rect anchorRect     = new Rect(location[0], location[1], location[0] + anchor.getWidth(), location[1] 
+                            + anchor.getHeight());
 
-		boolean onTop		= (dyTop > dyBottom) ? true : false;
+        mRootView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
+        mRootView.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
+    
+        int rootHeight      = mRootView.getMeasuredHeight();
+        int rootWidth       = mRootView.getMeasuredWidth();
+        
+        int screenWidth     = mWindowManager.getDefaultDisplay().getWidth();
+        int screenHeight    = mWindowManager.getDefaultDisplay().getHeight();
+        
+        //automatically get X coord of popup (top left)
+        if ((anchorRect.left + rootWidth) > screenWidth) {
+            xPos = anchorRect.left - (rootWidth-anchor.getWidth());
+        } else {
+            if (anchor.getWidth() > rootWidth) {
+                xPos = anchorRect.centerX() - (rootWidth/2);
+            } else {
+                xPos = anchorRect.left;
+            }
+        }
+        
+        int dyTop           = anchorRect.top;
+        int dyBottom        = screenHeight - anchorRect.bottom;
 
-		if (onTop) {
-			if (rootHeight > dyTop) {
-				yPos 			= 15;
-				LayoutParams l 	= scroller.getLayoutParams();
-				l.height		= dyTop - anchor.getHeight();
-			} else {
-				yPos = anchorRect.top - rootHeight;
-			}
-		} else {
-			yPos = anchorRect.bottom;
-			
-			if (rootHeight > dyBottom) { 
-				LayoutParams l 	= scroller.getLayoutParams();
-				l.height		= dyBottom;
-			}
-		}
-		
-		showArrow(((onTop) ? R.id.arrow_down : R.id.arrow_up), anchorRect.centerX()-xPos);
-		
-		setAnimationStyle(screenWidth, anchorRect.centerX(), onTop);
-		
-		window.showAtLocation(anchor, Gravity.NO_GRAVITY, xPos, yPos);
-	}
-	
-	/**
-	 * Set animation style
-	 * 
-	 * @param screenWidth screen width
-	 * @param requestedX distance from left edge
-	 * @param onTop flag to indicate where the popup should be displayed. Set TRUE if displayed on top of anchor view
-	 * 		  and vice versa
-	 */
-	private void setAnimationStyle(int screenWidth, int requestedX, boolean onTop) {
-		int arrowPos = requestedX - mArrowUp.getMeasuredWidth()/2;
+        boolean onTop       = (dyTop > dyBottom) ? true : false;
 
-		switch (animStyle) {
-		case ANIM_GROW_FROM_LEFT:
-			window.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Left : R.style.Animations_PopDownMenu_Left);
-			break;
-					
-		case ANIM_GROW_FROM_RIGHT:
-			window.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Right : R.style.Animations_PopDownMenu_Right);
-			break;
-					
-		case ANIM_GROW_FROM_CENTER:
-			window.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Center : R.style.Animations_PopDownMenu_Center);
-		break;
-			
-		case ANIM_REFLECT:
-			//window.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Reflect : R.style.Animations_PopDownMenu_Reflect);
-		break;
-		
-		case ANIM_AUTO:
-			if (arrowPos <= screenWidth/4) {
-				window.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Left : R.style.Animations_PopDownMenu_Left);
-			} else if (arrowPos > screenWidth/4 && arrowPos < 3 * (screenWidth/4)) {
-				window.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Center : R.style.Animations_PopDownMenu_Center);
-			} else {
-				window.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Right : R.style.Animations_PopDownMenu_Right);
-			}
-					
-			break;
-		}
-	}
-	
-	/**
-	 * Create action list
-	 */
-	private void createActionList() {
-		View view;
-		String title;
-		Drawable icon;
-		OnClickListener listener;
-	
-		for (int i = 0; i < actionList.size(); i++) {
-			title 		= actionList.get(i).getTitle();
-			icon 		= actionList.get(i).getIcon();
-			listener	= actionList.get(i).getListener();
-	
-			view 		= getActionItem(title, icon, listener);
-		
-			view.setFocusable(true);
-			view.setClickable(true);
-			 
-			mTrack.addView(view);
-		}
-	}
-	
-	/**
-	 * Get action item {@link View}
-	 * 
-	 * @param title action item title
-	 * @param icon {@link Drawable} action item icon
-	 * @param listener {@link View.OnClickListener} action item listener
-	 * @return action item {@link View}
-	 */
-	private View getActionItem(String title, Drawable icon, OnClickListener listener) {
-		LinearLayout container	= (LinearLayout) inflater.inflate(R.layout.action_item, null);
-		
-		ImageView img			= (ImageView) container.findViewById(R.id.icon);
-		TextView text			= (TextView) container.findViewById(R.id.title);
-		
-		if (icon != null) {
-			img.setImageDrawable(icon);
-		}
-		
-		if (title != null) {			
-			text.setText(title);
-		}
-		
-		if (listener != null) {
-			container.setOnClickListener(listener);
-		}
+        if (onTop) {
+            if (rootHeight > dyTop) {
+                yPos            = 15;
+                LayoutParams l  = mScroller.getLayoutParams();
+                l.height        = dyTop - anchor.getHeight();
+            } else {
+                yPos = anchorRect.top - rootHeight;
+            }
+        } else {
+            yPos = anchorRect.bottom;
+            
+            if (rootHeight > dyBottom) { 
+                LayoutParams l  = mScroller.getLayoutParams();
+                l.height        = dyBottom;
+            }
+        }
+        
+        showArrow(((onTop) ? R.id.arrow_down : R.id.arrow_up), anchorRect.centerX()-xPos);
+        
+        setAnimationStyle(screenWidth, anchorRect.centerX(), onTop);
+        
+        mWindow.showAtLocation(anchor, Gravity.NO_GRAVITY, xPos, yPos);
+    }
+    
+    /**
+     * Set animation style
+     * 
+     * @param screenWidth screen width
+     * @param requestedX distance from left edge
+     * @param onTop flag to indicate where the popup should be displayed. Set TRUE if displayed on top of anchor view
+     *        and vice versa
+     */
+    private void setAnimationStyle(int screenWidth, int requestedX, boolean onTop) {
+        int arrowPos = requestedX - mArrowUp.getMeasuredWidth()/2;
 
-		return container;
-	}
-	
-	/**
-	 * Show arrow
-	 * 
-	 * @param whichArrow arrow type resource id
-	 * @param requestedX distance from left screen
-	 */
-	private void showArrow(int whichArrow, int requestedX) {
+        switch (animStyle) {
+        case ANIM_GROW_FROM_LEFT:
+            mWindow.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Left : R.style.Animations_PopDownMenu_Left);
+            break;
+                    
+        case ANIM_GROW_FROM_RIGHT:
+            mWindow.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Right : R.style.Animations_PopDownMenu_Right);
+            break;
+                    
+        case ANIM_GROW_FROM_CENTER:
+            mWindow.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Center : R.style.Animations_PopDownMenu_Center);
+        break;
+            
+        case ANIM_REFLECT:
+            mWindow.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Reflect : R.style.Animations_PopDownMenu_Reflect);
+        break;
+        
+        case ANIM_AUTO:
+            if (arrowPos <= screenWidth/4) {
+                mWindow.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Left : R.style.Animations_PopDownMenu_Left);
+            } else if (arrowPos > screenWidth/4 && arrowPos < 3 * (screenWidth/4)) {
+                mWindow.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Center : R.style.Animations_PopDownMenu_Center);
+            } else {
+                mWindow.setAnimationStyle((onTop) ? R.style.Animations_PopUpMenu_Right : R.style.Animations_PopDownMenu_Right);
+            }
+                    
+            break;
+        }
+    }
+    
+    /**
+     * Show arrow
+     * 
+     * @param whichArrow arrow type resource id
+     * @param requestedX distance from left screen
+     */
+    private void showArrow(int whichArrow, int requestedX) {
         final View showArrow = (whichArrow == R.id.arrow_up) ? mArrowUp : mArrowDown;
         final View hideArrow = (whichArrow == R.id.arrow_up) ? mArrowDown : mArrowUp;
 
@@ -263,4 +257,12 @@ private void showArrow(int whichArrow, int requestedX) {
         
         hideArrow.setVisibility(View.INVISIBLE);
     }
+    
+    /**
+     * Listener for item click
+     *
+     */
+    public interface OnActionItemClickListener {
+        public abstract void onItemClick(int pos);
+    }
 }
\ No newline at end of file
diff --git a/src/org/wordpress/android/SelectCategories.java b/src/org/wordpress/android/SelectCategories.java
index 1578ecb8d66c..db562e607e5c 100644
--- a/src/org/wordpress/android/SelectCategories.java
+++ b/src/org/wordpress/android/SelectCategories.java
@@ -1,10 +1,5 @@
 package org.wordpress.android;
 
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.Map;
-import java.util.Vector;
-
 import org.wordpress.android.models.Blog;
 import org.xmlrpc.android.XMLRPCClient;
 import org.xmlrpc.android.XMLRPCException;
@@ -27,10 +22,15 @@
 import android.widget.ListView;
 import android.widget.Toast;
 
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.Map;
+import java.util.Vector;
+
 
 public class SelectCategories extends ListActivity {
     /** Called when the activity is first created. */
-	String id = "", categoriesCSV = "";
+	String categoriesCSV = "";
 	long[] checkedCategories;
 	private XMLRPCClient client;
 	String finalResult = "", addCategoryResult = "";
@@ -40,6 +40,7 @@ public class SelectCategories extends ListActivity {
 	public ArrayList<CharSequence> loadTextArray = new ArrayList<CharSequence>();
 	private final Handler mHandler = new Handler();
 	private Blog blog;
+	private int id;
 	
     @Override
     public void onCreate(Bundle icicle) {
@@ -54,7 +55,7 @@ public void onCreate(Bundle icicle) {
         Bundle extras = getIntent().getExtras();
         if(extras !=null)
         {
-         id = extras.getString("id");
+         id = extras.getInt("id");
          blog = new Blog(id, this);
          checkedCategories = extras.getLongArray("checkedCategories");
          categoriesCSV = extras.getString("categoriesCSV");
@@ -68,7 +69,7 @@ public void onCreate(Bundle icicle) {
         	public void onClick(View v) {
         		
         		Bundle bundle = new Bundle();
-            	bundle.putString("id", id);
+            	bundle.putInt("id", id);
                 Intent i = new Intent(SelectCategories.this, AddCategory.class);
         		i.putExtras(bundle);
         		startActivityForResult(i, 0);
diff --git a/src/org/wordpress/android/Settings.java b/src/org/wordpress/android/Settings.java
index bbb732ea1a98..98f50655309c 100644
--- a/src/org/wordpress/android/Settings.java
+++ b/src/org/wordpress/android/Settings.java
@@ -1,6 +1,4 @@
 package org.wordpress.android;
-import java.util.Vector;
-
 import org.wordpress.android.models.Blog;
 
 import android.app.Activity;
@@ -19,9 +17,10 @@
 
 public class Settings extends Activity {
 	protected static Intent svc = null;
-	private String id = "", originalUsername;
+	private String originalUsername;
 	private String xmlrpcPath;
 	private Blog blog;
+	private int id;
 	@Override
 	protected void onCreate(Bundle savedInstanceState) {
 		super.onCreate(savedInstanceState);
@@ -32,7 +31,7 @@ protected void onCreate(Bundle savedInstanceState) {
         Bundle extras = getIntent().getExtras();
         if(extras !=null)
         {
-         id = extras.getString("id");
+         id = extras.getInt("id");
          blog = new Blog(id, this);
         }
 		
diff --git a/src/org/wordpress/android/Signup.java b/src/org/wordpress/android/Signup.java
index 093a6b50220c..e0bb993e4774 100644
--- a/src/org/wordpress/android/Signup.java
+++ b/src/org/wordpress/android/Signup.java
@@ -1,7 +1,5 @@
 package org.wordpress.android;
 
-import java.util.HashMap;
-
 import org.xmlrpc.android.XMLRPCClient;
 import org.xmlrpc.android.XMLRPCException;
 
@@ -19,6 +17,8 @@
 import android.widget.TextView;
 import android.widget.Toast;
 
+import java.util.HashMap;
+
 public class Signup extends Activity {
 	public Activity activity = this;
 	public HashMap resultData;
diff --git a/src/org/wordpress/android/ViewComment.java b/src/org/wordpress/android/ViewComment.java
index 1bcd5d843ff6..a459e10d571c 100644
--- a/src/org/wordpress/android/ViewComment.java
+++ b/src/org/wordpress/android/ViewComment.java
@@ -1,12 +1,5 @@
 package org.wordpress.android;
 
-import java.io.InputStream;
-import java.math.BigInteger;
-import java.net.MalformedURLException;
-import java.net.URL;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-
 import android.app.Activity;
 import android.content.Intent;
 import android.content.res.Configuration;
@@ -22,6 +15,13 @@
 import android.widget.ImageView;
 import android.widget.TextView;
 
+import java.io.InputStream;
+import java.math.BigInteger;
+import java.net.MalformedURLException;
+import java.net.URL;
+import java.security.MessageDigest;
+import java.security.NoSuchAlgorithmException;
+
 public class ViewComment extends Activity {
 
 	private String comment= "";
diff --git a/src/org/wordpress/android/ViewComments.java b/src/org/wordpress/android/ViewComments.java
index d1db52cb8bb0..6294122c228c 100644
--- a/src/org/wordpress/android/ViewComments.java
+++ b/src/org/wordpress/android/ViewComments.java
@@ -1,37 +1,28 @@
 package org.wordpress.android;
 
-import java.math.BigInteger;
-import java.net.URI;
-import java.security.MessageDigest;
-import java.security.NoSuchAlgorithmException;
-import java.text.ParseException;
-import java.text.SimpleDateFormat;
-import java.util.ArrayList;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.TimeZone;
-import java.util.Vector;
-
 import org.wordpress.android.models.Blog;
+import org.wordpress.android.models.Post;
 import org.wordpress.android.util.EscapeUtils;
+import org.wordpress.android.util.StringHelper;
+import org.xmlpull.v1.XmlPullParser;
+import org.xmlrpc.android.ApiHelper;
 import org.xmlrpc.android.XMLRPCClient;
 import org.xmlrpc.android.XMLRPCException;
-import org.xmlrpc.android.XMLRPCFault;
 
 import android.app.AlertDialog;
 import android.app.Dialog;
 import android.app.ListActivity;
 import android.app.ProgressDialog;
+import android.content.Context;
 import android.content.DialogInterface;
 import android.content.Intent;
-import android.content.res.Configuration;
 import android.graphics.Color;
 import android.os.Bundle;
-import android.os.Handler;
 import android.os.Looper;
 import android.util.Log;
+import android.util.Xml;
 import android.view.ContextMenu;
+import android.view.Display;
 import android.view.LayoutInflater;
 import android.view.MenuItem;
 import android.view.View;
@@ -45,11 +36,9 @@
 import android.view.animation.LayoutAnimationController;
 import android.view.animation.TranslateAnimation;
 import android.widget.AdapterView;
-import android.widget.ArrayAdapter;
+import android.widget.BaseAdapter;
 import android.widget.Button;
-import android.widget.CheckBox;
 import android.widget.ImageButton;
-import android.widget.ImageView;
 import android.widget.ListView;
 import android.widget.RelativeLayout;
 import android.widget.TextView;
@@ -57,1691 +46,1124 @@
 import android.widget.ViewSwitcher;
 import android.widget.AdapterView.OnItemClickListener;
 
-import com.commonsware.cwac.cache.SimpleWebImageCache;
-import com.commonsware.cwac.thumbnail.ThumbnailAdapter;
-import com.commonsware.cwac.thumbnail.ThumbnailBus;
-import com.commonsware.cwac.thumbnail.ThumbnailMessage;
-
-public class ViewComments extends ListActivity {
-	private static final int[] IMAGE_IDS={R.id.avatar};
-	private ThumbnailAdapter thumbs=null;
-	private ArrayList<CommentEntry> model=null;
-	private XMLRPCClient client;
-	private String id = "", accountName = "", moderateErrorMsg = "", selectedPostID = "";
-	public Object[] origComments;
-	public int[] changedStatuses;
-	public HashMap<String, HashMap<?, ?>> allComments = new HashMap<String, HashMap<?, ?>>();
-	public int ID_DIALOG_MODERATING = 1;
-	public int ID_DIALOG_REPLYING = 2;
-	public int ID_DIALOG_DELETING = 3;
-	public boolean initializing = true;
-	public int selectedID = 0;
-	public int rowID = 0;
-	public ProgressDialog pd;
-	private ViewSwitcher switcher;
-	private int numRecords = 0;
-	boolean loadMore = false;
-	int totalComments = 0;
-	int commentsToLoad = 30;
-	private Vector<String> checkedComments;
-	private int checkedCommentTotal = 0; 
-	private boolean inModeration = false;
-	private Blog blog;
-	@Override
-	public void onCreate(Bundle icicle) {
-		super.onCreate(icicle);
-		setContentView(R.layout.moderatecomments);
-		boolean fromNotification = false;
-		Bundle extras = getIntent().getExtras();
-		if(extras !=null)
-		{
-			id = extras.getString("id");
-			blog = new Blog(id, this);
-			pd = new ProgressDialog(this);
-			fromNotification = extras.getBoolean("fromNotification", false);       		
-		}      
-
-		TextView blogname = (TextView) findViewById(R.id.blogname);
-		blogname.setText(blog.getBlogName());
-
-        ImageButton home = (ImageButton) findViewById(R.id.home_small);
-		ImageButton add = (ImageButton) findViewById(R.id.add_small);
-		
-		home.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewComments.this, Dashboard.class);		
-				startActivity(i);
-			}
-		});
-				
-		final ActionItem newpost = new ActionItem();
-		
-		newpost.setTitle("Add New Post");
-		newpost.setIcon(getResources().getDrawable(R.drawable.posts_tab));
-		newpost.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewComments.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);				
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem newpage = new ActionItem();
-		
-		newpage.setTitle("Add New Page");
-		newpage.setIcon(getResources().getDrawable(R.drawable.pages_tab));
-		newpage.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewComments.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				i.putExtra("isPage", true);
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem addOldPhoto = new ActionItem();
-		addOldPhoto.setTitle("Add Image From Gallery");
-		addOldPhoto.setIcon(getResources().getDrawable(R.drawable.media));
-		addOldPhoto.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewComments.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "photoPicker");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem takeNewPhoto = new ActionItem();
-		takeNewPhoto.setTitle("Take Photo");
-		takeNewPhoto.setIcon(getResources().getDrawable(R.drawable.media));
-		takeNewPhoto.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewComments.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "takePhotoFromCamera");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		final ActionItem addOldVideo = new ActionItem();
-		addOldVideo.setTitle("Add Video from Gallery");
-		addOldVideo.setIcon(getResources().getDrawable(R.drawable.media));
-		addOldVideo.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewComments.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "videoPicker");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		final ActionItem takeNewVideo = new ActionItem();
-		takeNewVideo.setTitle("Take Video");
-		takeNewVideo.setIcon(getResources().getDrawable(R.drawable.media));
-		takeNewVideo.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewComments.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "takeVideo");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		add.setOnClickListener(new View.OnClickListener() {
-			public void onClick(View v) {
-				QuickAction qa = new QuickAction(v);				
-				qa.addActionItem(newpost);
-				qa.addActionItem(newpage);
-				qa.addActionItem(addOldPhoto);
-				qa.addActionItem(takeNewPhoto);
-				qa.addActionItem(addOldVideo);
-				qa.addActionItem(takeNewVideo);
-				qa.setAnimStyle(QuickAction.ANIM_AUTO);				
-				qa.show();
-			}
-		});	
-		
-		//create the ViewSwitcher in the current context
-		switcher = new ViewSwitcher(this);
-		Button footer = (Button)View.inflate(this, R.layout.list_footer_btn, null);
-		footer.setText(getResources().getText(R.string.load_more) + " " + getResources().getText(R.string.tab_comments));
-
-		footer.setOnClickListener(new Button.OnClickListener() {
-			public void onClick(View v) {
-				switcher.showNext();
-				refreshComments(true, false, false);
-			}
-		});
-		
-		View progress = View.inflate(this, R.layout.list_footer_progress, null);
-
-		switcher.addView(footer);
-		switcher.addView(progress);
-
-		if (fromNotification) //dismiss the notification 
-		{
-			//NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
-			//nm.cancel(22 + Integer.valueOf(id));
-			//loadComments(false, false);
-		}
-
-		this.setTitle(accountName + " - Moderate Comments");
-
-		boolean loadedComments = loadComments(false, false);
-
-		if (!loadedComments){
-
-			refreshComments(false, false, false);
-		}
-
-		
-		/*Button bulkEdit = (Button) findViewById(R.id.bulkEdit);   
-
-		bulkEdit.setOnClickListener(new Button.OnClickListener() {
-			public void onClick(View v) {
-				inModeration = !inModeration;
-				showOrHideBulkCheckBoxes();
-			}
-		});*/ 
-
-		Button deleteComments = (Button) findViewById(R.id.deleteComment);   
-
-		deleteComments.setOnClickListener(new Button.OnClickListener() {
-			public void onClick(View v) {
-				showDialog(ID_DIALOG_DELETING);
-				new Thread() {
-					public void run() { 
-						Looper.prepare();
-						deleteComments();
-					}
-				}.start();
-
-			}
-		});
-
-		Button approveComments = (Button) findViewById(R.id.approveComment);   
-
-		approveComments.setOnClickListener(new Button.OnClickListener() {
-			public void onClick(View v) {
-				showDialog(ID_DIALOG_MODERATING);
-				new Thread() {
-					public void run() { 
-						Looper.prepare();
-						moderateComments("approve");
-					}
-				}.start();
-			}
-		});
-
-		Button unapproveComments = (Button) findViewById(R.id.unapproveComment);   
-
-		unapproveComments.setOnClickListener(new Button.OnClickListener() {
-			public void onClick(View v) {
-				showDialog(ID_DIALOG_MODERATING);
-				new Thread() {
-					public void run() { 
-						Looper.prepare();
-						moderateComments("hold");
-					}
-				}.start();
-			}
-		});
-
-		Button spamComments = (Button) findViewById(R.id.markSpam);   
-
-		spamComments.setOnClickListener(new Button.OnClickListener() {
-			public void onClick(View v) {
-				showDialog(ID_DIALOG_MODERATING);
-				new Thread() {
-					public void run() { 
-						Looper.prepare();
-						moderateComments("spam");
-					}
-				}.start();
-			}
-		});
-
-	}
-
-	protected void showOrHideBulkCheckBoxes() {
-		ListView listView = getListView();
-		int loopMax = 0;
-		if (listView.getFooterViewsCount() >= 1){
-			//we don't want a checkmark on the footer view 
-			if (listView.getLastVisiblePosition() == thumbs.getCount()){
-				loopMax = listView.getChildCount() - 1;
-			}
-			else{
-				loopMax = listView.getChildCount();
-			}
-		}
-		else{
-			loopMax = listView.getChildCount();
-		}
-		for (int i=0; i < loopMax;i++){
-			RelativeLayout rl = (RelativeLayout) (View)listView.getChildAt(i).findViewById(R.id.bulkEditGroup);
-			showBulkCheckBoxes(rl);
-			/*if (inModeration){
-				showBulkCheckBoxes(rl);
-			}
-			else{
-				hideBulkCheckBoxes(rl);
-			}*/
-		}
-
-	}
-
-	@SuppressWarnings("unchecked")
-	protected void moderateComments(String newStatus) {
-		//handles bulk moderation
-		WordPressDB db = new WordPressDB(this);
-		for (int i=0;i < checkedComments.size(); i++)
-		{
-			if (checkedComments.get(i).toString().equals("true")){
-
-				client = new XMLRPCClient(blog.getUrl(), blog.getHttpuser(), blog.getHttppassword());
-
-				CommentEntry listRow = (CommentEntry) getListView().getItemAtPosition(i);
-				String curCommentID = listRow.commentID;
-
-				HashMap contentHash, postHash = new HashMap();
-				contentHash = (HashMap) allComments.get(curCommentID);
-				postHash.put("status", newStatus);
-				postHash.put("content", contentHash.get("comment"));
-				postHash.put("author", contentHash.get("author"));
-				postHash.put("author_url", contentHash.get("url"));
-				postHash.put("author_email", contentHash.get("email"));
-
-				Object[] params = {
-						blog.getBlogId(),
-						blog.getUsername(),
-						blog.getPassword(),
-						curCommentID,
-						postHash
-				};
-
-				Object result = null;
-				try {
-					result = (Object) client.call("wp.editComment", params);
-					boolean bResult = Boolean.parseBoolean(result.toString());
-					if (bResult){
-						checkedComments.set(i, "false");
-						listRow.status = newStatus;
-						model.set(i, listRow);
-						db.updateCommentStatus(ViewComments.this, id, listRow.commentID, newStatus);
-					}
-				} catch (XMLRPCException e) {
-					moderateErrorMsg = e.getLocalizedMessage();
-				}	
-			}
-		}
-		dismissDialog(ID_DIALOG_MODERATING);
-		Thread action = new Thread() 
-		{ 
-			public void run() 
-			{
-				if (moderateErrorMsg == ""){
-					Toast.makeText(ViewComments.this, getResources().getText(R.string.comments_moderated), Toast.LENGTH_SHORT).show();
-				}
-				else{
-					//there was an xmlrpc error
-					AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-					dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-					dialogBuilder.setMessage(moderateErrorMsg);
-					dialogBuilder.setPositiveButton("OK",  new
-							DialogInterface.OnClickListener() {
-						public void onClick(DialogInterface dialog, int whichButton) {
-							// Just close the window.
-
-						}
-					});
-					dialogBuilder.setCancelable(true);
-					if (!isFinishing()){
-						dialogBuilder.create().show();
-					}
-				}
-			} 
-		}; 
-		this.runOnUiThread(action);
-		if (moderateErrorMsg == ""){
-			//no errors, refresh list
-			checkedCommentTotal = 0;
-			inModeration = false;
-			Thread action2 = new Thread() 
-			{ 
-				public void run() 
-				{
-					pd = new ProgressDialog(ViewComments.this);  // to avoid crash
-					showOrHideBulkCheckBoxes();
-					hideModerationBar();
-					thumbs.notifyDataSetChanged();
-				} 
-			}; 
-			this.runOnUiThread(action2);
-		}
-	}
-
-	protected void hideBulkCheckBoxes(RelativeLayout rl) {
-		AnimationSet set = new AnimationSet(true);
-		Animation animation = new AlphaAnimation(1.0f, 0.0f);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		animation = new TranslateAnimation(
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 1.0f,
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f
-		);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		rl.startAnimation(set);
-		rl.setVisibility(View.GONE);
-		if (checkedCommentTotal > 0){
-			hideModerationBar();
-		}
-	}
-
-	protected void showBulkCheckBoxes(RelativeLayout rl) {
-		AnimationSet set = new AnimationSet(true);
-		Animation animation = new AlphaAnimation(0.0f, 1.0f);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		animation = new TranslateAnimation(
-				Animation.RELATIVE_TO_SELF, 1.0f,Animation.RELATIVE_TO_SELF, 0.0f,
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f
-		);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		rl.setVisibility(View.VISIBLE);
-		rl.startAnimation(set);
-		if (checkedCommentTotal > 0){
-			showModerationBar();
-		}
-	}
-
-	protected void deleteComments() {
-		//bulk detete comments
-		
-		for (int i=0;i < checkedComments.size(); i++)
-		{
-			if (checkedComments.get(i).toString().equals("true")){
-
-				client = new XMLRPCClient(blog.getUrl(), blog.getHttpuser(), blog.getHttppassword());
-
-				CommentEntry listRow = (CommentEntry) getListView().getItemAtPosition(i);
-				String curCommentID = listRow.commentID;
-
-				Object[] params = {
-						blog.getBlogId(),
-						blog.getUsername(),
-						blog.getPassword(),
-						curCommentID
-				};
-
-				try {
-					client.call("wp.deleteComment", params);
-				} catch (final XMLRPCException e) {
-					moderateErrorMsg = e.getLocalizedMessage();
-				}
-			}
-		}
-		dismissDialog(ID_DIALOG_DELETING);
-		Thread action = new Thread() 
-		{ 
-			public void run() 
-			{
-				if (moderateErrorMsg == ""){
-					Toast.makeText(ViewComments.this, getResources().getText(R.string.comment_moderated), Toast.LENGTH_SHORT).show();
-				}
-				else{
-					//error occured during delete request
-					AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-					dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-					dialogBuilder.setMessage(moderateErrorMsg);
-					dialogBuilder.setPositiveButton("OK",  new
-							DialogInterface.OnClickListener() {
-						public void onClick(DialogInterface dialog, int whichButton) {
-							// Just close the window.
-
-						}
-					});
-					dialogBuilder.setCancelable(true);
-					if (!isFinishing()){
-						dialogBuilder.create().show();
-					}
-				}
-			} 
-		}; 
-		this.runOnUiThread(action);
-		Thread action2 = new Thread() 
-		{ 
-			public void run() 
-			{
-				if (moderateErrorMsg == ""){
-				pd = new ProgressDialog(ViewComments.this);  // to avoid crash
-				refreshComments(false, true, true);
-				}
-			} 
-		}; 
-		this.runOnUiThread(action2);
-		checkedCommentTotal = 0;
-		inModeration = false;
-
-	}
-
-	@SuppressWarnings("unchecked")
-	private boolean loadComments(boolean addMore, boolean refreshOnly) {
-		WordPressDB postStoreDB = new WordPressDB(this);
-		String author, postID, commentID, comment, dateCreatedFormatted, status, authorEmail, authorURL, postTitle;
-		if (!addMore){
-			Vector<?> loadedPosts = postStoreDB.loadComments(ViewComments.this, id);
-			if (loadedPosts != null){
-				HashMap<Object, Object> countHash = new HashMap<Object, Object>();
-				countHash = (HashMap) loadedPosts.get(0);
-				numRecords = Integer.parseInt(countHash.get("numRecords").toString());
-				if (refreshOnly){
-					if (model != null){
-						model.clear();
-					}
-				}	
-				else{
-					model=new ArrayList<CommentEntry>();
-				}
-				
-				//fixes trac #72 (1.5 bug)
-				int sdk_int = 0;
-				try {
-					sdk_int = Integer.valueOf(android.os.Build.VERSION.SDK);
-				} catch (Exception e1) {
-					sdk_int = 3; //assume they are on cupcake
-				}
-				
-				checkedComments = new Vector();
-				for (int i=1; i < loadedPosts.size(); i++){
-					checkedComments.add(i-1, "false");
-					HashMap contentHash = (HashMap) loadedPosts.get(i);
-					allComments.put(contentHash.get("commentID").toString(), contentHash);
-					author = EscapeUtils.unescapeHtml(contentHash.get("author").toString());
-					commentID = contentHash.get("commentID").toString();
-					postID = contentHash.get("postID").toString();
-					comment = EscapeUtils.unescapeHtml(contentHash.get("comment").toString());
-					dateCreatedFormatted = contentHash.get("commentDateFormatted").toString();
-					status = contentHash.get("status").toString();
-					authorEmail = EscapeUtils.unescapeHtml(contentHash.get("email").toString());
-					authorURL = EscapeUtils.unescapeHtml(contentHash.get("url").toString());
-					postTitle = EscapeUtils.unescapeHtml(contentHash.get("postTitle").toString());
-					
-					if (model == null){
-						model=new ArrayList<CommentEntry>();
-					}
-
-					//add to model
-					model.add(new CommentEntry(postID,
-							commentID, 
-							author,
-							dateCreatedFormatted,
-							comment,
-							status,
-							postTitle,
-							authorURL,
-							authorEmail,
-							URI.create("http://gravatar.com/avatar/" + getMd5Hash(authorEmail.trim()) + "?s=60&d=identicon")));
-				}
-
-				if (!refreshOnly){
-					try {
-						ThumbnailBus bus = new ThumbnailBus();
-						thumbs=new ThumbnailAdapter(this, new CommentAdapter(),new SimpleWebImageCache<ThumbnailBus, ThumbnailMessage>(null, null, 101, bus),IMAGE_IDS);
-					} catch (Exception e1) {
-						e1.printStackTrace();
-					}
-
-					ListView listView = (ListView) findViewById(android.R.id.list);
-					listView.removeFooterView(switcher);
-					if (loadedPosts.size() >= 30){
-						listView.addFooterView(switcher);
-					}
-					setListAdapter(thumbs);
-					
-					listView.setOnItemClickListener(new OnItemClickListener() {
-
-						public void onItemClick(AdapterView<?> arg0, View arg1,
-								int position, long arg3) {
-							Intent intent = new Intent(ViewComments.this, ViewComment.class);
-							//intent.putExtra("pageID", pageIDs[(int) arg3]);
-							//intent.putExtra("postTitle", titles[(int) arg3]);
-							intent.putExtra("id", id);
-							intent.putExtra("accountName", accountName);
-							intent.putExtra("comment", model.get((int) arg3).comment);
-							intent.putExtra("name", model.get((int) arg3).name);
-							intent.putExtra("email", model.get((int) arg3).authorEmail);
-							intent.putExtra("url", model.get((int) arg3).authorURL);
-							intent.putExtra("date", model.get((int) arg3).dateCreatedFormatted);
-							intent.putExtra("status", model.get((int) arg3).status);
-							intent.putExtra("comment_id", model.get((int) arg3).commentID);
-							intent.putExtra("post_id", model.get((int) arg3).postID);
-							intent.putExtra("position", position);
-							startActivityForResult(intent, 1);
-						}
-					});
-
-					listView.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {
-
-						public void onCreateContextMenu(ContextMenu menu, View v,
-								ContextMenuInfo menuInfo) {
-							AdapterView.AdapterContextMenuInfo info;
-							try {
-								info = (AdapterView.AdapterContextMenuInfo) menuInfo;
-							} catch (ClassCastException e) {
-								//Log.e(TAG, "bad menuInfo", e);
-								return;
-							}
-
-							selectedID = info.targetView.getId();
-							rowID = info.position;
-							selectedPostID = model.get(info.position).postID;
-
-							menu.setHeaderTitle(getResources().getText(R.string.comment_actions));
-							menu.add(0, 0, 0, getResources().getText(R.string.mark_approved));
-							menu.add(0, 1, 0, getResources().getText(R.string.mark_unapproved));
-							menu.add(0, 2, 0, getResources().getText(R.string.mark_spam));
-							menu.add(0, 3, 0, getResources().getText(R.string.reply));
-							menu.add(0, 4, 0, getResources().getText(R.string.delete));
-						}
-					});
-				}
-				else{
-					thumbs.notifyDataSetChanged();
-				}
-				return true;
-			}
-			else{
-				return false;
-			}
-		}
-		else{
-			Vector latestComments = postStoreDB.loadMoreComments(ViewComments.this, id, commentsToLoad);
-			if (latestComments != null){
-				numRecords += latestComments.size();
-				for (int i=latestComments.size(); i > 0; i--){
-					HashMap contentHash = (HashMap) latestComments.get(i-1);
-					allComments.put(contentHash.get("commentID").toString(), contentHash);
-					author = EscapeUtils.unescapeHtml(contentHash.get("author").toString());
-					commentID = contentHash.get("commentID").toString();
-					postID = contentHash.get("postID").toString();
-					comment = EscapeUtils.unescapeHtml(contentHash.get("comment").toString());
-					dateCreatedFormatted = contentHash.get("commentDateFormatted").toString();
-					status = contentHash.get("status").toString();
-					authorEmail = EscapeUtils.unescapeHtml(contentHash.get("email").toString());
-					authorURL = EscapeUtils.unescapeHtml(contentHash.get("url").toString());
-					postTitle = EscapeUtils.unescapeHtml(contentHash.get("postTitle").toString());
-
-					//add to model
-					model.add(new CommentEntry(postID,
-							commentID, 
-							author,
-							dateCreatedFormatted,
-							comment,
-							status,
-							postTitle,
-							authorURL,
-							authorEmail,
-							URI.create("http://gravatar.com/avatar/" + getMd5Hash(authorEmail.trim()) + "?s=60&d=identicon")));
-				}
-				thumbs.notifyDataSetChanged();
-			}
-			return true;
-		}
-	}
-
-	@SuppressWarnings("unchecked")
-	public void refreshComments(final boolean loadMore, final boolean refreshOnly, final boolean doInBackground) {
-
-		if (!loadMore && !doInBackground){
-			showProgressBar();
-		}
-		client = new XMLRPCClient(blog.getUrl(), blog.getHttpuser(), blog.getHttppassword());
-
-		HashMap hPost = new HashMap();
-		hPost.put("status", "");
-		hPost.put("post_id", "");
-		if (loadMore){
-			hPost.put("offset", numRecords);
-		}
-		if (totalComments != 0 && ((totalComments - numRecords) < 30)){
-			commentsToLoad = totalComments - numRecords;
-			hPost.put("number", commentsToLoad);
-		}
-		else{
-			hPost.put("number", 30);
-		}
-
-		XMLRPCMethod method = new XMLRPCMethod("wp.getComments", new XMLRPCMethodCallback() {
-			public void callFinished(Object[] result) {
-				if (result.length == 0){
-					// no comments found
-					if (pd.isShowing())
-					{
-						pd.dismiss();
-					}
-				}
-				else{
-					origComments = result;
-					String author, postID, commentID, comment, dateCreated, dateCreatedFormatted, status, authorEmail, authorURL, postTitle;
-
-					HashMap contentHash = new HashMap();
-					Vector dbVector = new Vector();
-
-					Date d = new Date();
-					SimpleDateFormat sdf = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy");
-					Calendar cal = Calendar.getInstance();
-					TimeZone tz = cal.getTimeZone();
-					String shortDisplayName = "";
-					shortDisplayName = tz.getDisplayName(true, TimeZone.SHORT);
-					if (result.length < 30){
-						//end of list reached
-						getListView().removeFooterView(switcher);
-					}
-					//loop this!
-					for (int ctr = 0; ctr < result.length; ctr++){
-						if (loadMore){
-							checkedComments.add("false"); 
-						}
-						HashMap<String, String> dbValues = new HashMap();
-						contentHash = (HashMap) result[ctr];
-						allComments.put(contentHash.get("comment_id").toString(), contentHash);
-						comment = contentHash.get("content").toString();
-						author = contentHash.get("author").toString();
-						status = contentHash.get("status").toString();
-						postID = contentHash.get("post_id").toString();
-						commentID = contentHash.get("comment_id").toString();
-						dateCreated = contentHash.get("date_created_gmt").toString();
-						authorURL = contentHash.get("author_url").toString();
-						authorEmail = contentHash.get("author_email").toString();
-						postTitle = contentHash.get("post_title").toString();
-
-						//make the date pretty
-						String cDate = dateCreated.replace(tz.getID(), shortDisplayName);
-						try{  
-							d = sdf.parse(cDate);
-							SimpleDateFormat sdfOut = new SimpleDateFormat("MMMM dd, yyyy hh:mm a"); 
-							dateCreatedFormatted = sdfOut.format(d);
-						} catch (ParseException pe){  
-							pe.printStackTrace();
-							dateCreatedFormatted = dateCreated;  //just make it the ugly date if it doesn't work
-						} 
-
-						dbValues.put("blogID", id);
-						dbValues.put("postID", postID);
-						dbValues.put("commentID", commentID);
-						dbValues.put("author", author);
-						dbValues.put("comment", comment);
-						dbValues.put("commentDate", dateCreated);
-						dbValues.put("commentDateFormatted", dateCreatedFormatted);
-						dbValues.put("status", status);
-						dbValues.put("url", authorURL);
-						dbValues.put("email", authorEmail);
-						dbValues.put("postTitle", postTitle);
-						dbVector.add(ctr, dbValues);
-					}
-
-					WordPressDB postStoreDB = new WordPressDB(ViewComments.this);
-					postStoreDB.saveComments(ViewComments.this, dbVector, loadMore);
-
-					if (!doInBackground){
-						loadComments(loadMore, refreshOnly);
-					}
-
-					if (pd.isShowing())
-					{
-						pd.dismiss();
-					}
-
-				}  
-				
-				if (!loadMore && !doInBackground){
-					closeProgressBar();
-				}
-				else if (loadMore){
-					switcher.showPrevious();
-				}
-
-			}
-		});
-		Object[] params = {
-				blog.getBlogId(),
-				blog.getUsername(),
-				blog.getPassword(),
-				hPost
-		};
-
-		method.call(params);
-
-	}
-
-	public void showProgressBar() {
-		AnimationSet set = new AnimationSet(true);
-		Animation animation = new AlphaAnimation(0.0f, 1.0f);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		animation = new TranslateAnimation(
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,
-				Animation.RELATIVE_TO_SELF, -1.0f,Animation.RELATIVE_TO_SELF, 0.0f
-		);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		LayoutAnimationController controller =
-			new LayoutAnimationController(set, 0.5f);
-		RelativeLayout loading = (RelativeLayout) findViewById(R.id.loading);       
-		loading.setVisibility(View.VISIBLE);
-		loading.setLayoutAnimation(controller);
-	}
-
-	public void closeProgressBar() {
-
-		AnimationSet set = new AnimationSet(true);
-		Animation animation = new AlphaAnimation(1.0f, 0.0f);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		animation = new TranslateAnimation(
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, -1.0f
-		);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		RelativeLayout loading = (RelativeLayout) findViewById(R.id.loading);       
-		loading.startAnimation(set);
-		loading.setVisibility(View.INVISIBLE);
-	}
-
-	@Override
-	public void onDestroy() {
-		super.onDestroy();
-
-	}
-
-	@Override
-	public Object onRetainNonConfigurationInstance() {
-		return(model);
-	}
-
-	private void goBlooey(Throwable t) {
-		Log.e("WordPress", "Exception!", t);
-
-		AlertDialog.Builder builder=new AlertDialog.Builder(this);
-
-		builder
-		.setTitle("Error")
-		.setMessage(t.toString())
-		.setPositiveButton("OK", null)
-		.show();
-	}
-
-	class CommentEntry {
-		String postID="";
-		String commentID="";
-		String name="";
-		String emailURL="";
-		String status="";
-		String comment="";
-		String postTitle="";
-		String authorURL="";
-		String authorEmail="";
-		String dateCreatedFormatted="";
-		URI profileImageUrl=null;
-
-		CommentEntry(String postID, String commentID, String name, String dateCreatedFormatted,
-				String comment, String status, String postTitle, String authorURL, String authorEmail, URI profileImageUrl) {
-			this.postID=postID;
-			this.commentID=commentID;
-			this.name=name;
-			this.emailURL=authorEmail;
-			this.status=status;
-			this.comment=comment;
-			this.postTitle=postTitle;
-			this.authorURL=authorURL;
-			this.authorEmail=authorEmail;
-			this.profileImageUrl=profileImageUrl;
-			this.dateCreatedFormatted=dateCreatedFormatted;
-		}
-	}
-
-	class CommentAdapter extends ArrayAdapter<CommentEntry> {
-		CommentAdapter() {
-			super(ViewComments.this, R.layout.row, model);
-		}
-
-		public View getView(int position, View convertView,
-				ViewGroup parent) {
-			View row=convertView;
-			CommentEntryWrapper wrapper=null;
-
-			if (row==null) {													
-				LayoutInflater inflater=getLayoutInflater();
-
-				row=inflater.inflate(R.layout.row, null);
-				wrapper=new CommentEntryWrapper(row);
-				row.setTag(wrapper);
-			}
-			else {
-				wrapper=(CommentEntryWrapper)row.getTag();
-			}
-			CommentEntry commentEntry = getItem(position);
-			if("hold".equals(commentEntry.status))
-				row.setBackgroundDrawable(getResources().getDrawable(R.drawable.comment_pending_bg_selector));
-			else
-				row.setBackgroundDrawable(getResources().getDrawable(R.drawable.list_bg_selector));
-			wrapper.populateFrom(commentEntry, position);
-
-			return(row);
-		}
-	}
-
-	class CommentEntryWrapper {
-		private TextView name=null;
-		private TextView emailURL=null;
-		private TextView comment=null;
-		private TextView status=null;
-		private TextView postTitle=null;
-		private ImageView avatar=null;
-		private View row=null;
-		private CheckBox bulkCheck=null;
-		private RelativeLayout bulkEditGroup=null;
-
-		CommentEntryWrapper(View row) {
-			this.row=row;
-
-		}
-
-		void populateFrom(CommentEntry s, final int position) {
-			getName().setText(s.name);
-
-			String fEmailURL = s.authorURL;
-			// use the required email address if the commenter didn't leave a url
-			if (fEmailURL == ""){
-				fEmailURL = s.emailURL;
-			}
-
-			getEmailURL().setText(fEmailURL);
-			getComment().setText(s.comment);
-			getPostTitle().setText(getResources().getText(R.string.on) + " " + s.postTitle);
-
-			row.setId(Integer.valueOf(s.commentID));
-
-			String prettyComment,textColor = "";
-
-			if (s.status.equals("spam")){
-				prettyComment = getResources().getText(R.string.spam).toString();
-				textColor = "#FF0000";
-			}
-			else if (s.status.equals("hold")){
-				prettyComment = getResources().getText(R.string.unapproved).toString();
-				textColor = "#D54E21";
-			}
-			else{
-				prettyComment = getResources().getText(R.string.approved).toString();
-				textColor = "#006505";
-			}
-
-			getBulkEditGroup().setVisibility(View.VISIBLE);
-			/*if (inModeration){
-				getBulkEditGroup().setVisibility(View.VISIBLE);
-			}
-			else{
-				getBulkEditGroup().setVisibility(View.GONE);
-			}*/
-
-			getStatus().setText(prettyComment);
-			getStatus().setTextColor(Color.parseColor(textColor));
-
-			getBulkCheck().setChecked(Boolean.parseBoolean(checkedComments.get(position).toString()));
-			getBulkCheck().setTag(position);
-			getBulkCheck().setOnClickListener(new OnClickListener() { 
-
-				public void onClick(View arg0) { 
-					checkedComments.set(position, String.valueOf(getBulkCheck().isChecked()));
-					showOrHideModerateButtons();
-				} 
-			}); 
-
-			if (s.profileImageUrl!=null) {
-				try {
-					getAvatar().setImageResource(R.drawable.placeholder);
-					getAvatar().setTag(s.profileImageUrl.toString());
-				}
-				catch (Throwable t) {
-					goBlooey(t);
-				}
-			}
-		}
-
-		TextView getName() {
-			if (name==null) {
-				name=(TextView)row.findViewById(R.id.name);
-			}
-
-			return(name);
-		}
-
-		TextView getEmailURL() {
-			if (emailURL==null) {
-				emailURL=(TextView)row.findViewById(R.id.email_url);
-			}
-
-			return(emailURL);
-		}
-
-		TextView getComment() {
-			if (comment==null) {
-				comment=(TextView)row.findViewById(R.id.comment);
-			}
-
-			return(comment);
-		}
-
-		TextView getStatus() {
-			if (status==null) {
-				status=(TextView)row.findViewById(R.id.status);
-			}
-
-			status.setTextSize(10);
-
-			return(status);
-		}
-
-		TextView getPostTitle() {
-			if (postTitle==null) {
-				postTitle=(TextView)row.findViewById(R.id.postTitle);
-			}
-
-			return(postTitle);
-		}
-
-		ImageView getAvatar() {
-			if (avatar==null) {
-				avatar=(ImageView)row.findViewById(R.id.avatar);
-			}
-
-			return(avatar);
-		}
-
-		CheckBox getBulkCheck() {
-			if (bulkCheck==null) {
-				bulkCheck=(CheckBox)row.findViewById(R.id.bulkCheck);
-			}
-
-			return(bulkCheck);
-		}
-
-		RelativeLayout getBulkEditGroup() {
-			if (bulkEditGroup==null) {
-				bulkEditGroup=(RelativeLayout)row.findViewById(R.id.bulkEditGroup);
-			}
-
-			return(bulkEditGroup);
-		}
-
-		protected void showOrHideModerateButtons() {
-			int previousTotal = checkedCommentTotal;
-			checkedCommentTotal = 0;
-			for (int i=0;i < checkedComments.size();i++){
-				if (checkedComments.get(i).equals("true")){
-					checkedCommentTotal++;
-				}
-			}
-			if (checkedCommentTotal > 0 && previousTotal == 0){
-				showModerationBar();
-			}
-			if (checkedCommentTotal == 0 && previousTotal > 0){
-
-				hideModerationBar();
-
-			}
-
-		}
-	}
-
-	public static String getMd5Hash(String input) {
-		try     {
-			MessageDigest md = MessageDigest.getInstance("MD5");
-			byte[] messageDigest = md.digest(input.getBytes());
-			BigInteger number = new BigInteger(1,messageDigest);
-			String md5 = number.toString(16);
-
-			while (md5.length() < 32)
-				md5 = "0" + md5;
-
-			return md5;
-		} catch(NoSuchAlgorithmException e) {
-			Log.e("MD5", e.getLocalizedMessage());
-			return null;
-		}
-	}
-
-	public void hideModerationBar() {
-		AnimationSet set = new AnimationSet(true);
-		Animation animation = new AlphaAnimation(1.0f, 0.0f);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		animation = new TranslateAnimation(
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 1.0f
-		);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		RelativeLayout moderationBar = (RelativeLayout) findViewById(R.id.moderationBar);       
-		moderationBar.clearAnimation();
-		moderationBar.startAnimation(set);
-		moderationBar.setVisibility(View.INVISIBLE);
-
-	}
-
-	public void showModerationBar(){
-		AnimationSet set = new AnimationSet(true);
-
-		Animation animation = new AlphaAnimation(0.0f, 1.0f);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		animation = new TranslateAnimation(
-				Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,
-				Animation.RELATIVE_TO_SELF, 1.0f,Animation.RELATIVE_TO_SELF, 0.0f
-		);
-		animation.setDuration(500);
-		set.addAnimation(animation);
-		RelativeLayout moderationBar = (RelativeLayout) findViewById(R.id.moderationBar);       
-		moderationBar.setVisibility(View.VISIBLE);
-		moderationBar.startAnimation(set);
-	}
-
-	interface XMLRPCMethodCallback {
-		void callFinished(Object[] result);
-	}
-
-	class XMLRPCMethod extends Thread {
-		private String method;
-		private Object[] params;
-		private Handler handler;
-		private XMLRPCMethodCallback callBack;
-		public XMLRPCMethod(String method, XMLRPCMethodCallback callBack) {
-			this.method = method;
-			this.callBack = callBack;
-			handler = new Handler();
-		}
-		public void call() {
-			call(null);
-		}
-		public void call(Object[] params) {
-			this.params = params;
-			start();
-		}
-		@SuppressWarnings("unchecked")
-		@Override
-		public void run() {
-			try {
-				//get the total comments
-				HashMap<Object, Object> countResult = new HashMap<Object, Object>();
-				Object[] countParams = {
-						blog.getBlogId(),
-						blog.getUsername(),
-						blog.getPassword(),
-						0
-				};
-				try {
-					countResult = (HashMap) client.call("wp.getCommentCount", countParams);
-					totalComments = Integer.valueOf(countResult.get("awaiting_moderation").toString()) + Integer.valueOf(countResult.get("approved").toString());
-				} catch (XMLRPCException e) {
-					e.printStackTrace();
-				}
-				final Object[] result = (Object[]) client.call(method, params);
-				handler.post(new Runnable() {
-					public void run() {
-
-						callBack.callFinished(result);
-					}
-				});
-			} catch (final XMLRPCFault e) {
-				handler.post(new Runnable() {
-					public void run() {
-						if (pd.isShowing())
-						{
-							pd.dismiss();
-						}
-						closeProgressBar();
-						AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-						dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-						String msg = e.getLocalizedMessage();
-						dialogBuilder.setMessage(e.getFaultString());
-						if (msg.contains("403")){
-							dialogBuilder.setMessage(e.getFaultString() + " " + getResources().getString(R.string.load_settings));
-							dialogBuilder.setPositiveButton(getResources().getString(R.string.yes),  new
-									DialogInterface.OnClickListener() {
-								public void onClick(DialogInterface dialog, int whichButton) {
-									Intent i = new Intent(ViewComments.this, Settings.class);
-									i.putExtra("id", id);
-									i.putExtra("accountName", accountName);
-									startActivity(i);
-
-								}
-							});
-							
-							dialogBuilder.setNegativeButton(getResources().getString(R.string.no),  new
-									DialogInterface.OnClickListener() {
-								public void onClick(DialogInterface dialog, int whichButton) {
-									// Just close the window.
-
-								}
-							});
-						}
-						else{
-						dialogBuilder.setPositiveButton("OK",  new
-								DialogInterface.OnClickListener() {
-							public void onClick(DialogInterface dialog, int whichButton) {
-								// Just close the window.
-
-							}
-						});
-						}
-						dialogBuilder.setCancelable(true);
-						if (!isFinishing()){
-							dialogBuilder.create().show();
-						}
-					}
-				});
-			} catch (final XMLRPCException e) {
-				handler.post(new Runnable() {
-					public void run() {
-						if (pd.isShowing())
-						{
-							pd.dismiss();
-						}
-						closeProgressBar();
-						AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-						dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-						dialogBuilder.setMessage(e.getLocalizedMessage());
-						dialogBuilder.setPositiveButton("OK",  new
-								DialogInterface.OnClickListener() {
-							public void onClick(DialogInterface dialog, int whichButton) {
-								// Just close the window.
-
-							}
-						});
-						dialogBuilder.setCancelable(true);
-						if (!isFinishing()){
-							dialogBuilder.create().show();
-						}
-					}
-				});
-			}
-		}
-	}
-
-	interface XMLRPCMethodCallbackEditComment {
-		void callFinished(Object result);
-	}
-
-	class XMLRPCMethodEditComment extends Thread {
-		private String method;
-		private Object[] params;
-		private Handler handler;
-		private XMLRPCMethodCallbackEditComment callBack;
-		public XMLRPCMethodEditComment(String method, XMLRPCMethodCallbackEditComment callBack) {
-			this.method = method;
-			this.callBack = callBack;
-			handler = new Handler();
-		}
-		public void call() {
-			call(null);
-		}
-		public void call(Object[] params) {
-			this.params = params;
-			start();
-		}
-		@Override
-		public void run() {
-			try {
-				final Object result = (Object) client.call(method, params);
-				handler.post(new Runnable() {
-					public void run() {
-						callBack.callFinished(result);
-					}
-				});
-			} catch (final XMLRPCFault e) {
-				handler.post(new Runnable() {
-					public void run() {
-						dismissDialog(ID_DIALOG_MODERATING);
-						AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-						dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-						dialogBuilder.setMessage(e.getFaultString());
-						dialogBuilder.setPositiveButton("OK",  new
-								DialogInterface.OnClickListener() {
-							public void onClick(DialogInterface dialog, int whichButton) {
-								// Just close the window.
-
-							}
-						});
-						dialogBuilder.setCancelable(true);
-						if (!isFinishing()){
-							dialogBuilder.create().show();
-						}
-					}
-				});
-			} catch (final XMLRPCException e) {
-				handler.post(new Runnable() {
-					public void run() {
-						dismissDialog(ID_DIALOG_MODERATING);
-						AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-						dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-						dialogBuilder.setMessage(e.getLocalizedMessage());
-						dialogBuilder.setPositiveButton("OK",  new
-								DialogInterface.OnClickListener() {
-							public void onClick(DialogInterface dialog, int whichButton) {
-								// Just close the window.
-							}
-						});
-						dialogBuilder.setCancelable(true);
-						if (!isFinishing()){
-							dialogBuilder.create().show();
-						}
-					}
-				});
-			}
-		}
-	}
-
-	@Override
-	protected Dialog onCreateDialog(int id) {
-		if(id == ID_DIALOG_MODERATING){
-			ProgressDialog loadingDialog = new ProgressDialog(this);
-			if (checkedCommentTotal <= 1){
-				loadingDialog.setMessage(getResources().getText(R.string.moderating_comment));
-			}
-			else{
-				loadingDialog.setMessage(getResources().getText(R.string.moderating_comments));
-			}
-			loadingDialog.setIndeterminate(true);
-			loadingDialog.setCancelable(false);
-			return loadingDialog;
-		}
-		else if (id == ID_DIALOG_REPLYING){
-			ProgressDialog loadingDialog = new ProgressDialog(this);
-			loadingDialog.setMessage(getResources().getText(R.string.replying_comment));
-			loadingDialog.setIndeterminate(true);
-			loadingDialog.setCancelable(false);
-			return loadingDialog;
-		}
-		else if (id == ID_DIALOG_DELETING){
-			ProgressDialog loadingDialog = new ProgressDialog(this);
-			if (checkedCommentTotal <= 1){
-				loadingDialog.setMessage(getResources().getText(R.string.deleting_comment));
-			}
-			else{
-				loadingDialog.setMessage(getResources().getText(R.string.deleting_comments));
-			}
-			loadingDialog.setIndeterminate(true);
-			loadingDialog.setCancelable(false);
-			return loadingDialog;
-		}
-
-		return super.onCreateDialog(id);
-	}
-
-	@Override
-	public void onConfigurationChanged(Configuration newConfig) {
-
-		super.onConfigurationChanged(newConfig); 
-	}
-
-
-	@Override
-	public boolean onContextItemSelected(MenuItem item) {
-
-		/* Switch on the ID of the item, to get what the user selected. */
-		switch (item.getItemId()) {
-		case 0:
-			showDialog(ID_DIALOG_MODERATING);
-			new Thread() {
-				public void run() {
-					Looper.prepare();
-					changeCommentStatus("approve", selectedID, rowID);
-				}
-			}.start();
-			return true;
-		case 1:
-			showDialog(ID_DIALOG_MODERATING);
-			new Thread() {
-				public void run() { 
-					Looper.prepare();
-					changeCommentStatus("hold", selectedID, rowID);
-				}
-			}.start();
-
-			return true;
-		case 2:
-			showDialog(ID_DIALOG_MODERATING);
-			new Thread() {
-				public void run() { 
-					Looper.prepare();
-					changeCommentStatus("spam", selectedID, rowID);
-				}
-			}.start();
-			return true;
-		case 3:
-			Intent i = new Intent(this, ReplyToComment.class);
-			i.putExtra("commentID", selectedID);
-			i.putExtra("accountName", accountName);
-			i.putExtra("postID", selectedPostID);
-			startActivityForResult(i, 0);
-
-			return true;
-		case 4:
-			showDialog(ID_DIALOG_DELETING);
-			new Thread() {
-				public void run() { 
-					Looper.prepare();
-					deleteComment(selectedID);
-				}
-			}.start();
-			return true;
-
-		}
-		return false;
-	}
-
-	@SuppressWarnings("unchecked")
-	private void changeCommentStatus(final String newStatus, final int selCommentID, int position) {
-		//for individual comment moderation
-		String sSelCommentID = String.valueOf(selCommentID);
-		ListView lv = getListView();
-		CommentEntry ce = (CommentEntry)lv.getItemAtPosition(position);
-		WordPressDB db = new WordPressDB(this);
-		client = new XMLRPCClient(blog.getUrl(), blog.getHttpuser(), blog.getHttppassword());
-
-		HashMap contentHash, postHash = new HashMap();
-		contentHash = (HashMap) allComments.get(sSelCommentID);
-		postHash.put("status", newStatus); 
-		postHash.put("content", contentHash.get("comment"));
-		postHash.put("author", contentHash.get("author"));
-		postHash.put("author_url", contentHash.get("url"));
-		postHash.put("author_email", contentHash.get("email"));
-
-
-		Object[] params = {
-				blog.getBlogId(),
-				blog.getUsername(),
-				blog.getPassword(),
-				sSelCommentID,
-				postHash
-		};
-
-		Object result = null;
-		try {
-			result = (Object) client.call("wp.editComment", params);
-			boolean bResult = Boolean.parseBoolean(result.toString());
-			if (bResult){
-				ce.status = newStatus;
-				model.set(position, ce);
-				db.updateCommentStatus(ViewComments.this, id, ce.commentID, newStatus);
-			}
-			dismissDialog(ID_DIALOG_MODERATING);
-			Thread action = new Thread() 
-			{ 
-				public void run() 
-				{
-					Toast.makeText(ViewComments.this, getResources().getText(R.string.comment_moderated), Toast.LENGTH_SHORT).show();
-				} 
-			}; 
-			this.runOnUiThread(action);
-			Thread action2 = new Thread() 
-			{ 
-				public void run() 
-				{
-					thumbs.notifyDataSetChanged();				  
-				} 
-			}; 
-			this.runOnUiThread(action2);
-
-		} catch (final XMLRPCException e) {
-			dismissDialog(ID_DIALOG_MODERATING);
-			Thread action3 = new Thread() 
-			{ 
-				public void run() 
-				{
-					AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-					dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-					dialogBuilder.setMessage(e.getLocalizedMessage());
-					dialogBuilder.setPositiveButton("OK",  new
-							DialogInterface.OnClickListener() {
-						public void onClick(DialogInterface dialog, int whichButton) {
-							// Just close the window.
-
-						}
-					});
-					dialogBuilder.setCancelable(true);
-					if (!isFinishing()){
-						dialogBuilder.create().show();
-					}
-				}
-			}; 
-			this.runOnUiThread(action3);
-		}	
-	}
-
-	private void deleteComment(final int selCommentID) {
-		//delete individual comment
-
-		client = new XMLRPCClient(blog.getUrl(), blog.getHttpuser(), blog.getHttppassword());
-
-		Object[] params = {
-				blog.getBlogId(),
-				blog.getUsername(),
-				blog.getPassword(),
-				selCommentID
-		};
-
-		try {
-			client.call("wp.deleteComment", params);
-			dismissDialog(ID_DIALOG_DELETING);
-			Thread action = new Thread() 
-			{ 
-				public void run() 
-				{
-					Toast.makeText(ViewComments.this, getResources().getText(R.string.comment_moderated), Toast.LENGTH_SHORT).show();
-				} 
-			}; 
-			this.runOnUiThread(action);
-			Thread action2 = new Thread() 
-			{ 
-				public void run() 
-				{
-					pd = new ProgressDialog(ViewComments.this);  // to avoid crash
-					refreshComments(false, true, false);				  } 
-			}; 
-			this.runOnUiThread(action2);
-
-		} catch (final XMLRPCException e) {
-			dismissDialog(ID_DIALOG_DELETING);
-			Thread action3 = new Thread() 
-			{ 
-				public void run() 
-				{
-					AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-					dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-					dialogBuilder.setMessage(e.getLocalizedMessage());
-					dialogBuilder.setPositiveButton("OK",  new
-							DialogInterface.OnClickListener() {
-						public void onClick(DialogInterface dialog, int whichButton) {
-							// Just close the window.
-
-						}
-					});
-					dialogBuilder.setCancelable(true);
-					if (!isFinishing()){
-						dialogBuilder.create().show();
-					}
-				}
-			}; 
-			this.runOnUiThread(action3);
-		}	
-	}
-
-	private void replyToComment(final String postID, final int commentID, final String comment) {
-		//reply to individual comment
-		Vector<Object> settings = new Vector<Object>();
-
-		client = new XMLRPCClient(blog.getUrl(), blog.getHttpuser(), blog.getHttppassword());
-
-		HashMap<String, Object> replyHash = new HashMap<String, Object>();
-		replyHash.put("comment_parent", commentID);
-		replyHash.put("content", comment);
-		replyHash.put("author", "");
-		replyHash.put("author_url", "");
-		replyHash.put("author_email", "");
-
-		Object[] params = {
-				blog.getBlogId(),
-				blog.getUsername(),
-				blog.getPassword(),
-				Integer.valueOf(postID),
-				replyHash
-		};
-
-		try {
-			client.call("wp.newComment", params);
-			dismissDialog(ID_DIALOG_REPLYING);
-			Thread action = new Thread() 
-			{ 
-				public void run() 
-				{
-					Toast.makeText(ViewComments.this, getResources().getText(R.string.reply_added), Toast.LENGTH_SHORT).show();
-				} 
-			}; 
-			this.runOnUiThread(action);
-			Thread action2 = new Thread() 
-			{ 
-				public void run() 
-				{
-					pd = new ProgressDialog(ViewComments.this);  // to avoid crash
-					refreshComments(false, true, false);				  } 
-			}; 
-			this.runOnUiThread(action2);
-
-		} catch (final XMLRPCException e) {
-			dismissDialog(ID_DIALOG_REPLYING);
-			Thread action3 = new Thread() 
-			{ 
-				public void run() 
-				{
-					AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(ViewComments.this);
-					dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
-					dialogBuilder.setMessage(e.getLocalizedMessage());
-					dialogBuilder.setPositiveButton("OK",  new
-							DialogInterface.OnClickListener() {
-						public void onClick(DialogInterface dialog, int whichButton) {
-							// Just close the window.
-
-						}
-					});
-					dialogBuilder.setCancelable(true);
-					if (!isFinishing()){
-						dialogBuilder.create().show();
-					}
-				}
-			}; 
-			this.runOnUiThread(action3);
-
-		}
-
-	}
-
-	@Override
-	protected void onActivityResult(int requestCode, int resultCode, Intent data) {
-		super.onActivityResult(requestCode, resultCode, data);
-		if (data != null)
-		{
-
-			Bundle extras = data.getExtras();
-
-			switch(requestCode) {
-			case 0:
-				final String returnText = extras.getString("replyText");
-
-				if (!returnText.equals("CANCEL")){
-					final String postID = extras.getString("postID");
-					final int commentID = extras.getInt("commentID");
-					showDialog(ID_DIALOG_REPLYING);
-
-					new Thread(new Runnable(){
-						public void run(){
-							Looper.prepare();
-							pd = new ProgressDialog(ViewComments.this);  // to avoid crash
-							replyToComment(postID, commentID, returnText);
-						}
-					}).start();
-				}
-
-
-				break;
-			case 1:
-				if (resultCode == RESULT_OK){
-
-					String comment_id;
-					final String action;
-					comment_id = extras.getString("comment_id");
-					final int position = extras.getInt("position");
-
-					action = extras.getString("action");
-					if (action.equals("approve") || action.equals("hold") || action.equals("spam")){
-						final int commentID = Integer.parseInt(comment_id);
-						showDialog(ID_DIALOG_MODERATING);
-						new Thread() {
-							public void run() {
-								Looper.prepare();
-								changeCommentStatus(action, commentID, position);
-							}
-						}.start();
-					}
-					else if (action.equals("delete")){
-						final int commentID_del = Integer.parseInt(comment_id);
-						showDialog(ID_DIALOG_DELETING);
-						new Thread() {
-							public void run() {	    		
-								deleteComment(commentID_del);
-							}
-						}.start();
-					}
-					else if (action.equals("reply")){
-
-						Intent i = new Intent(this, ReplyToComment.class);
-						i.putExtra("commentID", Integer.parseInt(comment_id));
-						i.putExtra("accountName", accountName);
-						i.putExtra("postID", extras.getString("post_id"));
-						startActivityForResult(i, 0);
-					}
-
-				}
-				break;
-			}
-		}
-	}
-}
\ No newline at end of file
+import java.io.IOException;
+import java.io.InputStream;
+import java.lang.reflect.InvocationTargetException;
+import java.lang.reflect.Method;
+import java.net.HttpURLConnection;
+import java.net.MalformedURLException;
+import java.net.URL;
+import java.net.URLConnection;
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Map;
+import java.util.Vector;
+
+public class ViewDrafts extends ListActivity {
+    /** Called when the activity is first created. */
+    private XMLRPCClient client;
+    private String[] postIDs, titles, dateCreated, dateCreatedFormatted,
+            draftIDs, draftTitles, publish;
+    private Integer[] uploaded;
+    private String accountName = "";
+    int rowID = 0;
+    long selectedID;
+    private int ID_DIALOG_DELETING = 1, ID_DIALOG_POSTING = 2;
+    public boolean inDrafts = false;
+    public String imgHTML, sImagePlacement = "", sMaxImageWidth = "";
+    public boolean centerThumbnail = false;
+    public Vector<String> imageUrl = new Vector<String>();
+    public String imageTitle = null;
+    public boolean thumbnailOnly, secondPass, xmlrpcError = false;
+    public String submitResult = "", mediaErrorMsg = "";
+    public ProgressDialog loadingDialog;
+    public int totalDrafts = 0, id;
+    public boolean isPage = false, vpUpgrade = false;
+    boolean largeScreen = false;
+    public int numRecords = 20;
+    public ViewSwitcher switcher;
+    private PostListAdapter pla;
+    private Blog blog;
+
+    @Override
+    public void onCreate(Bundle icicle) {
+        super.onCreate(icicle);
+        setContentView(R.layout.viewposts);
+
+        Bundle extras = getIntent().getExtras();
+        String action = null;
+        if (extras != null) {
+            id = extras.getInt("id");
+            blog = new Blog(id, this);
+            isPage = extras.getBoolean("viewPages");
+            action = extras.getString("action");
+        }
+
+        createSwitcher();
+
+        // user came from action intent
+        if (action != null && !isPage) {
+            if (action.equals("upload")) {
+                selectedID = extras.getInt("uploadID");
+                showDialog(ID_DIALOG_POSTING);
+
+                try {
+                    submitResult = submitPost();
+
+                } catch (IOException e) {
+                    e.printStackTrace();
+                }
+
+            } else {
+
+                loadPosts(false);
+                
+            }
+        } else {
+
+            // query for posts and refresh view
+            loadPosts(false);
+
+        }
+
+        Display display = getWindowManager().getDefaultDisplay();
+        int width = display.getWidth();
+        int height = display.getHeight();
+        if (width > 480 || height > 480) {
+            largeScreen = true;
+        }
+
+        final ImageButton addNewPost = (ImageButton) findViewById(R.id.newPost);
+
+        addNewPost.setOnClickListener(new ImageButton.OnClickListener() {
+            public void onClick(View v) {
+
+                Intent i = new Intent(ViewDrafts.this, EditPost.class);
+                i.putExtra("accountName", accountName);
+                i.putExtra("id", id);
+                i.putExtra("isNew", true);
+                if (isPage) {
+                    i.putExtra("isPage", true);
+                }
+                startActivityForResult(i, 0);
+
+            }
+        });
+
+        final ImageButton refresh = (ImageButton) findViewById(R.id.refresh);
+
+        refresh.setOnClickListener(new ImageButton.OnClickListener() {
+            public void onClick(View v) {
+                refreshPosts(false);
+            }
+        });
+
+    }
+
+    private void createSwitcher() {
+        // add footer view
+        if (!isPage) {
+            // create the ViewSwitcher in the current context
+            switcher = new ViewSwitcher(this);
+            Button footer = (Button) View.inflate(this,
+                    R.layout.list_footer_btn, null);
+            footer.setText(getResources().getText(R.string.load_more) + " "
+                    + getResources().getText(R.string.tab_posts));
+
+            footer.setOnClickListener(new Button.OnClickListener() {
+                public void onClick(View v) {
+                    // first view is showing, show the second progress view
+                    switcher.showNext();
+                    // get 30 more posts
+                    numRecords += 30;
+                    refreshPosts(true);
+                }
+            });
+
+            View progress = View.inflate(this, R.layout.list_footer_progress,
+                    null);
+
+            switcher.addView(footer);
+            switcher.addView(progress);
+        }
+
+    }
+
+    public void refreshPosts(final boolean loadMore) {
+
+        if (!loadMore) {
+            showProgressBar();
+        }
+        Vector<Object> apiArgs = new Vector<Object>();
+        apiArgs.add(blog);
+        apiArgs.add(isPage);
+        apiArgs.add(ViewDrafts.this);
+        apiArgs.add(numRecords);
+        apiArgs.add(loadMore);
+        new ApiHelper.getRecentPostsTask().execute(apiArgs);
+    }
+
+    public Map<String, ?> createItem(String title, String caption) {
+        Map<String, String> item = new HashMap<String, String>();
+        item.put("title", title);
+        item.put("caption", caption);
+        return item;
+    }
+
+    public void loadPosts(boolean loadMore) { // loads posts from the db
+
+        WordPressDB lDraftsDB = new WordPressDB(this);
+        Vector<?> loadedPosts;
+        if (isPage) {
+            loadedPosts = lDraftsDB.loadDrafts(ViewDrafts.this, id, true);
+        } else {
+            loadedPosts = lDraftsDB.loadDrafts(ViewDrafts.this, id, false);
+        }
+        if (loadedPosts != null) {
+            draftIDs = new String[loadedPosts.size()];
+            draftTitles = new String[loadedPosts.size()];
+            publish = new String[loadedPosts.size()];
+            uploaded = new Integer[loadedPosts.size()];
+            totalDrafts = loadedPosts.size();
+
+            for (int i = 0; i < loadedPosts.size(); i++) {
+                HashMap<?, ?> contentHash = (HashMap<?, ?>) loadedPosts.get(i);
+                draftIDs[i] = contentHash.get("id").toString();
+                draftTitles[i] = EscapeUtils.unescapeHtml(contentHash.get(
+                        "title").toString());
+                if (contentHash.get("status") != null) {
+                    publish[i] = contentHash.get("status").toString();
+                } else {
+                    publish[i] = "";
+                }
+                uploaded[i] = (Integer) contentHash.get("uploaded");
+            }
+        } else {
+            totalDrafts = 0;
+        }
+        
+        if (loadedPosts != null) {
+            List<String> draftIDList = Arrays.asList(draftIDs);
+            List<String> newDraftIDList = new ArrayList<String>();
+            newDraftIDList.add("draftsHeader");
+            newDraftIDList.addAll(draftIDList);
+            draftIDs = (String[]) newDraftIDList
+                    .toArray(new String[newDraftIDList.size()]);
+
+            if(loadedPosts!=null) {
+            List<String> titleList = Arrays.asList(draftTitles);
+            List<CharSequence> newTitleList = new ArrayList<CharSequence>();
+            newTitleList.add(getResources().getText(R.string.local_drafts));
+            newTitleList.addAll(titleList);
+            draftTitles = (String[]) newTitleList
+                    .toArray(new String[newTitleList.size()]);
+
+            List<String> publishList = Arrays.asList(publish);
+            List<String> newPublishList = new ArrayList<String>();
+            newPublishList.add("draftsHeader");
+            newPublishList.addAll(publishList);
+            publish = (String[]) newPublishList
+                    .toArray(new String[newPublishList.size()]);
+
+            postIDs = StringHelper.mergeStringArrays(draftIDs, postIDs);
+            titles = StringHelper.mergeStringArrays(draftTitles, titles);
+            dateCreatedFormatted = StringHelper.mergeStringArrays(publish,
+                    dateCreatedFormatted);
+            }
+            
+        
+            ListView listView = (ListView) findViewById(android.R.id.list);
+
+            if (!isPage) {
+                listView.removeFooterView(switcher);
+                if (loadedPosts != null) {
+                    if (loadedPosts.size() >= 20) {
+                        listView.addFooterView(switcher);
+                    }
+                }
+            }
+
+            if (loadMore) {
+                pla.notifyDataSetChanged();
+            } else {
+                pla = new PostListAdapter(ViewDrafts.this);
+                listView.setAdapter(pla);
+
+                listView.setOnItemClickListener(new OnItemClickListener() {
+
+                    public void onItemClick(AdapterView<?> arg0, View arg1,
+                            int arg2, long arg3) {
+                        if (arg1 != null) {
+                            arg1.performLongClick();
+                        }
+
+                    }
+
+                });
+
+                listView
+                        .setOnCreateContextMenuListener(new OnCreateContextMenuListener() {
+
+                            public void onCreateContextMenu(ContextMenu menu,
+                                    View v, ContextMenuInfo menuInfo) {
+                                AdapterView.AdapterContextMenuInfo info;
+                                try {
+                                    info = (AdapterView.AdapterContextMenuInfo) menuInfo;
+                                } catch (ClassCastException e) {
+                                    // Log.e(TAG, "bad menuInfo", e);
+                                    return;
+                                }
+
+                                Object[] args = { R.id.row_post_id };
+
+                                try {
+                                    Method m = android.view.View.class
+                                            .getMethod("getTag");
+                                    m.invoke(selectedID, args);
+                                } catch (NoSuchMethodException e) {
+                                    selectedID = info.targetView.getId();
+                                } catch (IllegalArgumentException e) {
+                                    selectedID = info.targetView.getId();
+                                } catch (IllegalAccessException e) {
+                                    selectedID = info.targetView.getId();
+                                } catch (InvocationTargetException e) {
+                                    selectedID = info.targetView.getId();
+                                }
+                                // selectedID = (String)
+                                // info.targetView.getTag(R.id.row_post_id);
+                                rowID = info.position;
+
+                                if (totalDrafts > 0 && rowID <= totalDrafts
+                                        && rowID != 0) {
+                                    menu.clear();
+                                    menu.setHeaderTitle(getResources().getText(
+                                            R.string.draft_actions));
+                                    menu.add(1, 0, 0, getResources().getText(
+                                            R.string.edit_draft));
+                                    menu.add(1, 1, 0, getResources().getText(
+                                            R.string.upload));
+                                    menu.add(1, 2, 0, getResources().getText(
+                                            R.string.delete_draft));
+                                } else if (rowID == 1
+                                        || ((rowID != (totalDrafts + 1)) && rowID != 0)) {
+                                    menu.clear();
+
+                                    if (isPage) {
+                                        menu
+                                                .setHeaderTitle(getResources()
+                                                        .getText(
+                                                                R.string.page_actions));
+                                        menu
+                                                .add(
+                                                        2,
+                                                        0,
+                                                        0,
+                                                        getResources()
+                                                                .getText(
+                                                                        R.string.preview_page));
+                                        menu
+                                                .add(
+                                                        2,
+                                                        1,
+                                                        0,
+                                                        getResources()
+                                                                .getText(
+                                                                        R.string.view_comments));
+                                        menu.add(2, 2, 0, getResources()
+                                                .getText(R.string.edit_page));
+                                        menu.add(2, 3, 0, getResources()
+                                                .getText(R.string.delete_page));
+                                        menu.add(2, 4, 0, getResources()
+                                                .getText(R.string.share_url));
+                                    } else {
+                                        menu
+                                                .setHeaderTitle(getResources()
+                                                        .getText(
+                                                                R.string.post_actions));
+                                        menu
+                                                .add(
+                                                        0,
+                                                        0,
+                                                        0,
+                                                        getResources()
+                                                                .getText(
+                                                                        R.string.preview_post));
+                                        menu
+                                                .add(
+                                                        0,
+                                                        1,
+                                                        0,
+                                                        getResources()
+                                                                .getText(
+                                                                        R.string.view_comments));
+                                        menu.add(0, 2, 0, getResources()
+                                                .getText(R.string.edit_post));
+                                        menu.add(0, 3, 0, getResources()
+                                                .getText(R.string.delete_post));
+                                        menu.add(0, 4, 0, getResources()
+                                                .getText(R.string.share_url));
+                                    }
+                                }
+                            }
+                        });
+            }
+        } else {
+            TextView noDrafts = (TextView) findViewById (R.id.noDrafts);
+            noDrafts.setVisibility(View.VISIBLE);
+        }
+
+    }
+
+    class ViewWrapper {
+        View base;
+        TextView title = null;
+        TextView date = null;
+
+        ViewWrapper(View base) {
+            this.base = base;
+        }
+
+        TextView getTitle() {
+            if (title == null) {
+                title = (TextView) base.findViewById(R.id.title);
+            }
+            return (title);
+        }
+
+        TextView getDate() {
+            if (date == null) {
+                date = (TextView) base.findViewById(R.id.date);
+            }
+            return (date);
+        }
+    }
+
+    private class PostListAdapter extends BaseAdapter {
+
+        public PostListAdapter(Context context) {
+        }
+
+        public int getCount() {
+            return postIDs.length;
+        }
+
+        public Object getItem(int position) {
+            return position;
+        }
+
+        public long getItemId(int position) {
+            return position;
+        }
+
+        public View getView(int position, View convertView, ViewGroup parent) {
+            View pv = convertView;
+            ViewWrapper wrapper = null;
+            if (pv == null) {
+                LayoutInflater inflater = getLayoutInflater();
+                pv = inflater.inflate(R.layout.row_post_page, parent, false);
+                wrapper = new ViewWrapper(pv);
+                if (position == 0) {
+                    // dateHeight = wrapper.getDate().getHeight();
+                }
+                pv.setTag(wrapper);
+                wrapper = new ViewWrapper(pv);
+                pv.setTag(wrapper);
+            } else {
+                wrapper = (ViewWrapper) pv.getTag();
+            }
+
+            String date = dateCreatedFormatted[position];
+            if (date.equals("postsHeader") || date.equals("draftsHeader")) {
+
+                pv.setBackgroundDrawable(getResources().getDrawable(
+                        R.drawable.list_header_bg));
+
+                wrapper.getTitle().setTextColor(Color.parseColor("#EEEEEE"));
+                wrapper.getTitle().setShadowLayer(1, 1, 1,
+                        Color.parseColor("#444444"));
+                if (largeScreen) {
+                    wrapper.getTitle().setPadding(12, 0, 12, 3);
+                } else {
+                    wrapper.getTitle().setPadding(8, 0, 8, 2);
+                }
+                wrapper.getTitle().setTextScaleX(1.2f);
+                wrapper.getTitle().setTextSize(17);
+                wrapper.getDate().setHeight(0);
+
+                if (date.equals("draftsHeader")) {
+                    inDrafts = true;
+                    date = "";
+                } else if (date.equals("postsHeader")) {
+                    inDrafts = false;
+                    date = "";
+                }
+            } else {
+                pv.setBackgroundDrawable(getResources().getDrawable(
+                        R.drawable.list_bg_selector));
+                if (largeScreen) {
+                    wrapper.getTitle().setPadding(12, 12, 12, 0);
+                } else {
+                    wrapper.getTitle().setPadding(8, 8, 8, 0);
+                }
+                wrapper.getTitle().setTextColor(Color.parseColor("#444444"));
+                wrapper.getTitle().setShadowLayer(0, 0, 0,
+                        Color.parseColor("#444444"));
+                wrapper.getTitle().setTextScaleX(1.0f);
+                wrapper.getTitle().setTextSize(16);
+                wrapper.getDate().setTextColor(Color.parseColor("#888888"));
+
+                Object[] args = { R.id.row_post_id, postIDs[position] };
+
+                try {
+                    Method m = android.view.View.class.getMethod("setTag");
+                    m.invoke(pv, args);
+                } catch (NoSuchMethodException e) {
+                    pv.setId(Integer.valueOf(postIDs[position]));
+                } catch (IllegalArgumentException e) {
+                    pv.setId(Integer.valueOf(postIDs[position]));
+                } catch (IllegalAccessException e) {
+                    pv.setId(Integer.valueOf(postIDs[position]));
+                } catch (InvocationTargetException e) {
+                    pv.setId(Integer.valueOf(postIDs[position]));
+                }
+
+                // pv.setId(Integer.valueOf(postIDs[position]));
+                // pv.setTag(R.id.row_post_id, postIDs[position]);
+
+                if (wrapper.getDate().getHeight() == 0) {
+                    wrapper.getDate().setHeight(
+                            (int) wrapper.getTitle().getTextSize()
+                                    + wrapper.getDate().getPaddingBottom());
+                }
+                String customDate = date;
+
+                if (customDate.equals("draft")) {
+                    customDate = getResources().getText(R.string.draft)
+                            .toString();
+                } else if (customDate.equals("pending")) {
+                    customDate = getResources()
+                            .getText(R.string.pending_review).toString();
+                } else if (customDate.equals("private")) {
+                    customDate = getResources().getText(R.string.post_private)
+                            .toString();
+                } else if (customDate.equals("publish")) {
+                    customDate = getResources().getText(R.string.publish_post)
+                            .toString();
+                    wrapper.getDate().setTextColor(Color.parseColor("#006505"));
+                }
+                date = customDate;
+
+            }
+            String titleText = titles[position];
+            if (titleText == "") titleText = "(" + getResources().getText(R.string.untitled) + ")";
+            wrapper.getTitle().setText(titleText);
+            wrapper.getDate().setText(date);
+
+            return pv;
+
+        }
+
+    }
+
+    @Override
+    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
+        super.onActivityResult(requestCode, resultCode, data);
+        if (resultCode == RESULT_OK) {
+            Bundle extras = data.getExtras();
+            String returnResult = extras.getString("returnStatus");
+
+            if (returnResult != null) {
+                switch (requestCode) {
+                case 0:
+                    if (returnResult.equals("OK")) {
+                        boolean uploadNow = false;
+                        uploadNow = extras.getBoolean("upload");
+                        if (uploadNow) {
+                            selectedID = extras.getLong("newID");
+                            showDialog(ID_DIALOG_POSTING);
+
+                            try {
+                                submitResult = submitPost();
+
+                            } catch (IOException e) {
+                                e.printStackTrace();
+                            }
+
+                        } else {
+                            loadPosts(false);
+                        }
+                    }
+                    break;
+                case 1:
+                    if (returnResult.equals("OK")) {
+                        refreshPosts(false);
+                    }
+                    break;
+                }
+            }
+        }
+    }
+
+    @Override
+    public boolean onContextItemSelected(MenuItem item) {
+
+        /* Switch on the ID of the item, to get what the user selected. */
+        if (item.getGroupId() == 0) {
+            switch (item.getItemId()) {
+            case 0:
+                Intent i0 = new Intent(ViewDrafts.this, ViewPost.class);
+                i0.putExtra("postID", selectedID);
+                i0.putExtra("id", id);
+                i0.putExtra("accountName", accountName);
+                startActivity(i0);
+                return true;
+            case 1:
+                Intent i = new Intent(ViewDrafts.this, ViewPostComments.class);
+                i.putExtra("postID", selectedID);
+                i.putExtra("id", id);
+                i.putExtra("accountName", accountName);
+                startActivity(i);
+                return true;
+            case 2:
+                Intent i2 = new Intent(ViewDrafts.this, EditPost.class);
+                i2.putExtra("postID", selectedID);
+                i2.putExtra("id", id);
+                i2.putExtra("accountName", accountName);
+                startActivityForResult(i2, 0);
+                return true;
+            case 3:
+                AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
+                        ViewDrafts.this);
+                dialogBuilder.setTitle(getResources().getText(
+                        R.string.delete_post));
+                dialogBuilder.setMessage(getResources().getText(
+                        R.string.delete_sure_post)
+                        + " '" + titles[rowID] + "'?");
+                dialogBuilder.setPositiveButton(getResources().getText(
+                        R.string.yes), new DialogInterface.OnClickListener() {
+                    public void onClick(DialogInterface dialog, int whichButton) {
+                        showDialog(ID_DIALOG_DELETING);
+                        new Thread() {
+                            public void run() {
+                                deletePost();
+                            }
+                        }.start();
+
+                    }
+                });
+                dialogBuilder.setNegativeButton(getResources().getText(
+                        R.string.no), new DialogInterface.OnClickListener() {
+                    public void onClick(DialogInterface dialog, int whichButton) {
+                        // Just close the window.
+
+                    }
+                });
+                dialogBuilder.setCancelable(true);
+                if (!isFinishing()) {
+                    dialogBuilder.create().show();
+                }
+
+                return true;
+            case 4:
+                loadingDialog = ProgressDialog.show(this, getResources()
+                        .getText(R.string.share_url), getResources().getText(
+                        R.string.attempting_fetch_url), true, false);
+                Thread action = new Thread() {
+                    public void run() {
+                        Looper.prepare();
+                        shareURL(id, String.valueOf(selectedID), false);
+                        Looper.loop();
+                    }
+                };
+                action.start();
+                return true;
+            }
+
+        } else if (item.getGroupId() == 2) {
+            switch (item.getItemId()) {
+            case 0:
+                Intent i0 = new Intent(ViewDrafts.this, ViewPost.class);
+                i0.putExtra("postID", String.valueOf(selectedID));
+                i0.putExtra("id", id);
+                i0.putExtra("accountName", accountName);
+                i0.putExtra("isPage", true);
+                startActivity(i0);
+                return true;
+            case 1:
+                Intent i = new Intent(ViewDrafts.this, ViewPostComments.class);
+                i.putExtra("postID", String.valueOf(selectedID));
+                i.putExtra("id", id);
+                i.putExtra("accountName", accountName);
+                startActivity(i);
+                return true;
+            case 2:
+                Intent i2 = new Intent(ViewDrafts.this, EditPost.class);
+                i2.putExtra("postID", selectedID);
+                i2.putExtra("id", id);
+                i2.putExtra("accountName", accountName);
+                i2.putExtra("isPage", true);
+                startActivityForResult(i2, 0);
+                return true;
+            case 3:
+                AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
+                        ViewDrafts.this);
+                dialogBuilder.setTitle(getResources().getText(
+                        R.string.delete_page));
+                dialogBuilder.setMessage(getResources().getText(
+                        R.string.delete_sure_page)
+                        + " '" + titles[rowID] + "'?");
+                dialogBuilder.setPositiveButton(getResources().getText(
+                        R.string.yes), new DialogInterface.OnClickListener() {
+                    public void onClick(DialogInterface dialog, int whichButton) {
+                        showDialog(ID_DIALOG_DELETING);
+                        new Thread() {
+                            public void run() {
+                                deletePost();
+                            }
+                        }.start();
+                    }
+                });
+                dialogBuilder.setNegativeButton(getResources().getText(
+                        R.string.no), new DialogInterface.OnClickListener() {
+                    public void onClick(DialogInterface dialog, int whichButton) {
+                        // Just close the window.
+
+                    }
+                });
+                dialogBuilder.setCancelable(true);
+                if (!isFinishing()) {
+                    dialogBuilder.create().show();
+                }
+                return true;
+            case 4:
+                loadingDialog = ProgressDialog.show(this, getResources()
+                        .getText(R.string.share_url), getResources().getText(
+                        R.string.attempting_fetch_url), true, false);
+                Thread action = new Thread() {
+                    public void run() {
+                        Looper.prepare();
+                        shareURL(id, String.valueOf(selectedID), true);
+                        Looper.loop();
+                    }
+                };
+                action.start();
+                return true;
+            }
+
+        } else {
+            switch (item.getItemId()) {
+            case 0:
+                Intent i2 = new Intent(ViewDrafts.this, EditPost.class);
+                i2.putExtra("postID", selectedID);
+                i2.putExtra("id", id);
+                if (isPage) {
+                    i2.putExtra("isPage", true);
+                }
+                i2.putExtra("accountName", accountName);
+                i2.putExtra("localDraft", true);
+                startActivityForResult(i2, 0);
+                return true;
+            case 1:
+                showDialog(ID_DIALOG_POSTING);
+
+                new Thread() {
+                    public void run() {
+
+                        try {
+                            submitResult = submitPost();
+
+                        } catch (IOException e) {
+                            e.printStackTrace();
+                        }
+
+                    }
+                }.start();
+                return true;
+            case 2:
+                AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
+                        ViewDrafts.this);
+                dialogBuilder.setTitle(getResources().getText(
+                        R.string.delete_draft));
+                dialogBuilder.setMessage(getResources().getText(
+                        R.string.delete_sure)
+                        + " '" + titles[rowID] + "'?");
+                dialogBuilder.setPositiveButton(getResources().getText(
+                        R.string.yes), new DialogInterface.OnClickListener() {
+                    public void onClick(DialogInterface dialog, int whichButton) {
+
+                        Post post = new Post(id, selectedID, isPage,
+                                ViewDrafts.this);
+                        post.delete();
+
+                        loadPosts(false);
+
+                    }
+                });
+                dialogBuilder.setNegativeButton(getResources().getText(
+                        R.string.no), new DialogInterface.OnClickListener() {
+                    public void onClick(DialogInterface dialog, int whichButton) {
+                        // Just close the window.
+
+                    }
+                });
+                dialogBuilder.setCancelable(true);
+                if (!isFinishing()) {
+                    dialogBuilder.create().show();
+                }
+
+            }
+        }
+
+        return false;
+    }
+
+    private void deletePost() {
+
+        String selPostID = String.valueOf(selectedID);
+        client = new XMLRPCClient(blog.getUrl(), blog.getHttpuser(), blog
+                .getHttppassword());
+
+        Object[] postParams = { "", selPostID, blog.getUsername(),
+                blog.getPassword() };
+        Object[] pageParams = { blog.getBlogId(), blog.getUsername(),
+                blog.getPassword(), selPostID };
+
+        try {
+            client.call((isPage) ? "wp.deletePage" : "blogger.deletePost",
+                    (isPage) ? pageParams : postParams);
+            dismissDialog(ID_DIALOG_DELETING);
+            Thread action = new Thread() {
+                public void run() {
+                    Toast.makeText(
+                            ViewDrafts.this,
+                            getResources().getText(
+                                    (isPage) ? R.string.page_deleted
+                                            : R.string.post_deleted),
+                            Toast.LENGTH_SHORT).show();
+                }
+            };
+            this.runOnUiThread(action);
+            Thread action2 = new Thread() {
+                public void run() {
+                    refreshPosts(false);
+                }
+            };
+            this.runOnUiThread(action2);
+
+        } catch (final XMLRPCException e) {
+            dismissDialog(ID_DIALOG_DELETING);
+            Thread action3 = new Thread() {
+                public void run() {
+                    AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
+                            ViewDrafts.this);
+                    dialogBuilder.setTitle(getResources().getText(
+                            R.string.connection_error));
+                    dialogBuilder.setMessage(e.getLocalizedMessage());
+                    dialogBuilder.setPositiveButton("OK",
+                            new DialogInterface.OnClickListener() {
+                                public void onClick(DialogInterface dialog,
+                                        int whichButton) {
+                                    // Just close the window.
+
+                                }
+                            });
+                    dialogBuilder.setCancelable(true);
+                    if (!isFinishing()) {
+                        dialogBuilder.create().show();
+                    }
+                }
+            };
+            this.runOnUiThread(action3);
+        }
+
+    }
+
+    @Override
+    protected Dialog onCreateDialog(int id) {
+        if (id == ID_DIALOG_POSTING) {
+            loadingDialog = new ProgressDialog(this);
+            loadingDialog.setTitle(getResources().getText(
+                    R.string.uploading_content));
+            loadingDialog.setMessage(getResources().getText(
+                    (isPage) ? R.string.page_attempt_upload
+                            : R.string.post_attempt_upload));
+            loadingDialog.setCancelable(false);
+            return loadingDialog;
+        } else if (id == ID_DIALOG_DELETING) {
+            loadingDialog = new ProgressDialog(this);
+            loadingDialog.setTitle(getResources().getText(
+                    (isPage) ? R.string.delete_page : R.string.delete_post));
+            loadingDialog.setMessage(getResources().getText(
+                    (isPage) ? R.string.attempt_delete_page
+                            : R.string.attempt_delete_post));
+            loadingDialog.setCancelable(false);
+            return loadingDialog;
+        }
+
+        return super.onCreateDialog(id);
+    }
+
+    public String submitPost() throws IOException {
+
+        Post post = new Post(id, selectedID, isPage, ViewDrafts.this);
+
+        post.upload();
+
+        return "";
+    }
+
+    public void showProgressBar() {
+        AnimationSet set = new AnimationSet(true);
+
+        Animation animation = new AlphaAnimation(0.0f, 1.0f);
+        animation.setDuration(500);
+        set.addAnimation(animation);
+
+        animation = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f,
+                Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,
+                -1.0f, Animation.RELATIVE_TO_SELF, 0.0f);
+        animation.setDuration(500);
+        set.addAnimation(animation);
+
+        LayoutAnimationController controller = new LayoutAnimationController(
+                set, 0.5f);
+        RelativeLayout loading = (RelativeLayout) findViewById(R.id.loading);
+        loading.setVisibility(View.VISIBLE);
+        loading.setLayoutAnimation(controller);
+    }
+
+    public void closeProgressBar() {
+
+        AnimationSet set = new AnimationSet(true);
+
+        Animation animation = new AlphaAnimation(0.0f, 1.0f);
+        animation.setDuration(500);
+        set.addAnimation(animation);
+
+        animation = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0.0f,
+                Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF,
+                0.0f, Animation.RELATIVE_TO_SELF, -1.0f);
+        animation.setDuration(500);
+        set.addAnimation(animation);
+
+        LayoutAnimationController controller = new LayoutAnimationController(
+                set, 0.5f);
+        RelativeLayout loading = (RelativeLayout) findViewById(R.id.loading);
+
+        loading.setLayoutAnimation(controller);
+
+        loading.setVisibility(View.INVISIBLE);
+    }
+
+    private void shareURL(int accountId, String postId, final boolean isPage) {
+
+        String errorStr = null;
+
+        client = new XMLRPCClient(blog.getUrl(), blog.getHttpuser(), blog
+                .getHttppassword());
+
+        Object versionResult = new Object();
+        try {
+            if (isPage) {
+                Object[] vParams = { blog.getBlogId(), postId,
+                        blog.getUsername(), blog.getPassword() };
+                versionResult = (Object) client.call("wp.getPage", vParams);
+            } else {
+                Object[] vParams = { postId, blog.getUsername(),
+                        blog.getPassword() };
+                versionResult = (Object) client.call("metaWeblog.getPost",
+                        vParams);
+            }
+        } catch (XMLRPCException e) {
+            errorStr = e.getMessage();
+            Log.d("WP", "Error", e);
+        }
+
+        if (errorStr == null && versionResult != null) {
+            try {
+                HashMap<?, ?> contentHash = (HashMap<?, ?>) versionResult;
+
+                if ((isPage && !"publish".equals(contentHash.get("page_status")
+                        .toString()))
+                        || (!isPage && !"publish".equals(contentHash.get(
+                                "post_status").toString()))) {
+                    Thread prompt = new Thread() {
+                        public void run() {
+                            AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
+                                    ViewDrafts.this);
+                            dialogBuilder.setTitle(getResources().getText(
+                                    R.string.share_url));
+                            if (isPage) {
+                                dialogBuilder.setMessage(ViewDrafts.this
+                                        .getResources().getText(
+                                                R.string.page_not_published));
+                            } else {
+                                dialogBuilder.setMessage(ViewDrafts.this
+                                        .getResources().getText(
+                                                R.string.post_not_published));
+                            }
+                            dialogBuilder.setPositiveButton("OK",
+                                    new DialogInterface.OnClickListener() {
+                                        public void onClick(
+                                                DialogInterface dialog,
+                                                int whichButton) {
+                                        }
+                                    });
+                            dialogBuilder.setCancelable(true);
+                            dialogBuilder.create().show();
+                        }
+                    };
+                    this.runOnUiThread(prompt);
+                } else {
+                    String postURL = contentHash.get("permaLink").toString();
+                    String shortlink = getShortlinkTagHref(postURL);
+                    Intent share = new Intent(Intent.ACTION_SEND);
+                    share.setType("text/plain");
+                    if (shortlink == null) {
+                        share.putExtra(Intent.EXTRA_TEXT, postURL);
+                    } else {
+                        share.putExtra(Intent.EXTRA_TEXT, shortlink);
+                    }
+                    share.putExtra(Intent.EXTRA_SUBJECT, contentHash.get(
+                            "title").toString());
+                    startActivity(Intent.createChooser(share, this
+                            .getText(R.string.share_url)));
+                }
+            } catch (Exception e) {
+                errorStr = e.getMessage();
+                Log.d("WP", "Error", e);
+            }
+        }
+
+        loadingDialog.dismiss();
+        if (errorStr != null) {
+            final String fErrorStr = errorStr;
+            Thread prompt = new Thread() {
+                public void run() {
+                    AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
+                            ViewDrafts.this);
+                    dialogBuilder.setTitle(getResources().getText(
+                            R.string.connection_error));
+                    dialogBuilder.setMessage(fErrorStr);
+                    dialogBuilder.setPositiveButton("OK",
+                            new DialogInterface.OnClickListener() {
+                                public void onClick(DialogInterface dialog,
+                                        int whichButton) {
+                                }
+                            });
+                    dialogBuilder.setCancelable(true);
+                    dialogBuilder.create().show();
+                }
+            };
+            this.runOnUiThread(prompt);
+        }
+    }
+
+    private String getShortlinkTagHref(String urlString) {
+        InputStream in = getResponse(urlString);
+
+        if (in != null) {
+            XmlPullParser parser = Xml.newPullParser();
+            try {
+                // auto-detect the encoding from the stream
+                parser.setInput(in, null);
+                int eventType = parser.getEventType();
+                while (eventType != XmlPullParser.END_DOCUMENT) {
+                    String name = null;
+                    String rel = "";
+                    String href = "";
+                    switch (eventType) {
+                    case XmlPullParser.START_TAG:
+                        name = parser.getName();
+                        if (name.equalsIgnoreCase("link")) {
+                            for (int i = 0; i < parser.getAttributeCount(); i++) {
+                                String attrName = parser.getAttributeName(i);
+                                String attrValue = parser.getAttributeValue(i);
+                                if (attrName.equals("rel")) {
+                                    rel = attrValue;
+                                } else if (attrName.equals("href")) {
+                                    href = attrValue;
+                                }
+                            }
+
+                            if (rel.equals("shortlink")) {
+                                return href;
+                            }
+                        }
+                        break;
+                    }
+                    eventType = parser.next();
+                }
+            } catch (Exception e) {
+                e.printStackTrace();
+                return null;
+            }
+
+        }
+        return null; // never found the shortlink tag
+    }
+
+    private InputStream getResponse(String urlString) {
+        InputStream in = null;
+        int response = -1;
+
+        URL url = null;
+        try {
+            url = new URL(urlString);
+        } catch (MalformedURLException e1) {
+            e1.printStackTrace();
+            return null;
+        }
+        URLConnection conn = null;
+        try {
+            conn = url.openConnection();
+        } catch (IOException e1) {
+            e1.printStackTrace();
+            return null;
+        }
+
+        try {
+            HttpURLConnection httpConn = (HttpURLConnection) conn;
+            httpConn.setAllowUserInteraction(false);
+            httpConn.setInstanceFollowRedirects(true);
+            httpConn.setRequestMethod("GET");
+            httpConn.addRequestProperty("user-agent", "Mozilla/5.0");
+            httpConn.connect();
+
+            response = httpConn.getResponseCode();
+            if (response == HttpURLConnection.HTTP_OK) {
+                in = httpConn.getInputStream();
+            }
+        } catch (Exception ex) {
+            ex.printStackTrace();
+            return null;
+        }
+        return in;
+    }
+
+    public void uploadCompleted() {
+        this.dismissDialog(ID_DIALOG_POSTING);
+        this.refreshPosts(false);
+    }
+    
+    public void uploadFailed(String error) {
+        this.dismissDialog(ID_DIALOG_POSTING);
+        AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
+                ViewDrafts.this);
+        dialogBuilder.setTitle(getResources().getText(
+                R.string.connection_error));
+        dialogBuilder.setMessage(error);
+        dialogBuilder.setPositiveButton("OK",
+                new DialogInterface.OnClickListener() {
+                    public void onClick(DialogInterface dialog,
+                            int whichButton) {
+                        loadPosts(false);
+                    }
+                });
+        dialogBuilder.setCancelable(true);
+        dialogBuilder.create().show();
+    }
+
+}
diff --git a/src/org/wordpress/android/ViewDrafts.java b/src/org/wordpress/android/ViewDrafts.java
index 77caff9cfa69..6294122c228c 100644
--- a/src/org/wordpress/android/ViewDrafts.java
+++ b/src/org/wordpress/android/ViewDrafts.java
@@ -1,21 +1,5 @@
 package org.wordpress.android;
 
-import java.io.IOException;
-import java.io.InputStream;
-import java.lang.reflect.InvocationTargetException;
-import java.lang.reflect.Method;
-import java.net.HttpURLConnection;
-import java.net.MalformedURLException;
-import java.net.URL;
-import java.net.URLConnection;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-import java.util.TimeZone;
-import java.util.Vector;
-
 import org.wordpress.android.models.Blog;
 import org.wordpress.android.models.Post;
 import org.wordpress.android.util.EscapeUtils;
@@ -35,7 +19,6 @@
 import android.graphics.Color;
 import android.os.Bundle;
 import android.os.Looper;
-import android.text.format.DateUtils;
 import android.util.Log;
 import android.util.Xml;
 import android.view.ContextMenu;
@@ -63,13 +46,28 @@
 import android.widget.ViewSwitcher;
 import android.widget.AdapterView.OnItemClickListener;
 
+import java.io.IOException;
+import java.io.InputStream;
+import java.lang.reflect.InvocationTargetException;
+import java.lang.reflect.Method;
+import java.net.HttpURLConnection;
+import java.net.MalformedURLException;
+import java.net.URL;
+import java.net.URLConnection;
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Map;
+import java.util.Vector;
+
 public class ViewDrafts extends ListActivity {
     /** Called when the activity is first created. */
     private XMLRPCClient client;
     private String[] postIDs, titles, dateCreated, dateCreatedFormatted,
             draftIDs, draftTitles, publish;
     private Integer[] uploaded;
-    private String id = "", accountName = "";
+    private String accountName = "";
     int rowID = 0;
     long selectedID;
     private int ID_DIALOG_DELETING = 1, ID_DIALOG_POSTING = 2;
@@ -81,7 +79,7 @@ public class ViewDrafts extends ListActivity {
     public boolean thumbnailOnly, secondPass, xmlrpcError = false;
     public String submitResult = "", mediaErrorMsg = "";
     public ProgressDialog loadingDialog;
-    public int totalDrafts = 0;
+    public int totalDrafts = 0, id;
     public boolean isPage = false, vpUpgrade = false;
     boolean largeScreen = false;
     public int numRecords = 20;
@@ -97,134 +95,11 @@ public void onCreate(Bundle icicle) {
         Bundle extras = getIntent().getExtras();
         String action = null;
         if (extras != null) {
-            id = extras.getString("id");
+            id = extras.getInt("id");
             blog = new Blog(id, this);
             isPage = extras.getBoolean("viewPages");
             action = extras.getString("action");
         }
-        
-        TextView blogname = (TextView) findViewById(R.id.blogname);
-		blogname.setText(blog.getBlogName());
-        ImageButton home = (ImageButton) findViewById(R.id.home_small);
-		ImageButton add = (ImageButton) findViewById(R.id.add_small);
-		
-		home.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewDrafts.this, Dashboard.class);		
-				startActivity(i);
-			}
-		});
-				
-		final ActionItem newpost = new ActionItem();
-		
-		newpost.setTitle("Add New Post");
-		newpost.setIcon(getResources().getDrawable(R.drawable.posts_tab));
-		newpost.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewDrafts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);				
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem newpage = new ActionItem();
-		
-		newpage.setTitle("Add New Page");
-		newpage.setIcon(getResources().getDrawable(R.drawable.pages_tab));
-		newpage.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewDrafts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				i.putExtra("isPage", true);
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem addOldPhoto = new ActionItem();
-		addOldPhoto.setTitle("Add Image From Gallery");
-		addOldPhoto.setIcon(getResources().getDrawable(R.drawable.media));
-		addOldPhoto.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewDrafts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "photoPicker");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem takeNewPhoto = new ActionItem();
-		takeNewPhoto.setTitle("Take Photo");
-		takeNewPhoto.setIcon(getResources().getDrawable(R.drawable.media));
-		takeNewPhoto.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewDrafts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "takePhotoFromCamera");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		final ActionItem addOldVideo = new ActionItem();
-		addOldVideo.setTitle("Add Video from Gallery");
-		addOldVideo.setIcon(getResources().getDrawable(R.drawable.media));
-		addOldVideo.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewDrafts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "videoPicker");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		final ActionItem takeNewVideo = new ActionItem();
-		takeNewVideo.setTitle("Take Video");
-		takeNewVideo.setIcon(getResources().getDrawable(R.drawable.media));
-		takeNewVideo.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewDrafts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "takeVideo");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		add.setOnClickListener(new View.OnClickListener() {
-			public void onClick(View v) {
-				QuickAction qa = new QuickAction(v);				
-				qa.addActionItem(newpost);
-				qa.addActionItem(newpage);
-				qa.addActionItem(addOldPhoto);
-				qa.addActionItem(takeNewPhoto);
-				qa.addActionItem(addOldVideo);
-				qa.addActionItem(takeNewVideo);
-				qa.setAnimStyle(QuickAction.ANIM_AUTO);				
-				qa.show();
-			}
-		});	
-
 
         createSwitcher();
 
@@ -339,7 +214,7 @@ public void refreshPosts(final boolean loadMore) {
 
     public void loadPosts(boolean loadMore) { // loads posts from the db
 
-    	WordPressDB lDraftsDB = new WordPressDB(this);
+        WordPressDB lDraftsDB = new WordPressDB(this);
         Vector<?> loadedPosts;
         if (isPage) {
             loadedPosts = lDraftsDB.loadDrafts(ViewDrafts.this, id, true);
@@ -535,8 +410,8 @@ public void onCreateContextMenu(ContextMenu menu,
                         });
             }
         } else {
-        	TextView noDrafts = (TextView) findViewById (R.id.noDrafts);
-        	noDrafts.setVisibility(View.VISIBLE);
+            TextView noDrafts = (TextView) findViewById (R.id.noDrafts);
+            noDrafts.setVisibility(View.VISIBLE);
         }
 
     }
@@ -1082,7 +957,7 @@ public void closeProgressBar() {
         loading.setVisibility(View.INVISIBLE);
     }
 
-    private void shareURL(String accountId, String postId, final boolean isPage) {
+    private void shareURL(int accountId, String postId, final boolean isPage) {
 
         String errorStr = null;
 
diff --git a/src/org/wordpress/android/ViewPost.java b/src/org/wordpress/android/ViewPost.java
index bbddf4479915..8fb87c48c0f2 100644
--- a/src/org/wordpress/android/ViewPost.java
+++ b/src/org/wordpress/android/ViewPost.java
@@ -1,9 +1,6 @@
 
 package org.wordpress.android;
 
-import java.util.HashMap;
-
-import org.wordpress.android.R;
 import org.wordpress.android.models.Blog;
 import org.wordpress.android.util.AlertUtil;
 import org.wordpress.android.util.EscapeUtils;
@@ -23,12 +20,14 @@
 import android.webkit.WebViewClient;
 import android.widget.Toast;
 
+import java.util.HashMap;
+
 public class ViewPost extends Activity {
     /** Called when the activity is first created. */
     private XMLRPCClient client;
     public String[] authors;
     public String[] comments;
-    private String id = "";
+    private int id;
     private String postID = "";
     private boolean isPage = false;
     private Blog blog;
@@ -42,7 +41,7 @@ public void onCreate(Bundle icicle) {
 
         Bundle extras = getIntent().getExtras();
         if (extras != null) {
-            id = extras.getString("id");
+            id = extras.getInt("id");
             blog = new Blog(id, this);
             postID = extras.getString("postID");
             isPage = extras.getBoolean("isPage");
diff --git a/src/org/wordpress/android/ViewPostComments.java b/src/org/wordpress/android/ViewPostComments.java
index 30a3590a893a..d1a8c791e148 100644
--- a/src/org/wordpress/android/ViewPostComments.java
+++ b/src/org/wordpress/android/ViewPostComments.java
@@ -1,8 +1,5 @@
 package org.wordpress.android;
 
-import java.util.HashMap;
-import java.util.Vector;
-
 import org.apache.http.conn.HttpHostConnectException;
 import org.wordpress.android.models.Blog;
 import org.xmlrpc.android.XMLRPCClient;
@@ -22,6 +19,8 @@
 import android.widget.LinearLayout;
 import android.widget.TextView;
 
+import java.util.HashMap;
+
 
 public class ViewPostComments extends ListActivity {
     /** Called when the activity is first created. */
@@ -29,7 +28,7 @@ public class ViewPostComments extends ListActivity {
 	public String[] authors;
 	public String[] comments;
 	public String[] status;
-	private String id = "";
+	private int id;
 	private String postID = "";
 	private String accountName = "";
 	private Blog blog;
@@ -41,7 +40,7 @@ public void onCreate(Bundle icicle) {
         Bundle extras = getIntent().getExtras();
         if(extras !=null)
         {
-         id = extras.getString("id");
+         id = extras.getInt("id");
          blog = new Blog(id, this);
          postID = extras.getString("postID");
          accountName = extras.getString("accountName");
diff --git a/src/org/wordpress/android/ViewPosts.java b/src/org/wordpress/android/ViewPosts.java
index 67e272110880..e1cada715887 100644
--- a/src/org/wordpress/android/ViewPosts.java
+++ b/src/org/wordpress/android/ViewPosts.java
@@ -1,21 +1,5 @@
 package org.wordpress.android;
 
-import java.io.IOException;
-import java.io.InputStream;
-import java.lang.reflect.InvocationTargetException;
-import java.lang.reflect.Method;
-import java.net.HttpURLConnection;
-import java.net.MalformedURLException;
-import java.net.URL;
-import java.net.URLConnection;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-import java.util.TimeZone;
-import java.util.Vector;
-
 import org.wordpress.android.models.Blog;
 import org.wordpress.android.models.Post;
 import org.wordpress.android.util.EscapeUtils;
@@ -62,13 +46,29 @@
 import android.widget.ViewSwitcher;
 import android.widget.AdapterView.OnItemClickListener;
 
+import java.io.IOException;
+import java.io.InputStream;
+import java.lang.reflect.InvocationTargetException;
+import java.lang.reflect.Method;
+import java.net.HttpURLConnection;
+import java.net.MalformedURLException;
+import java.net.URL;
+import java.net.URLConnection;
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Map;
+import java.util.TimeZone;
+import java.util.Vector;
+
 public class ViewPosts extends ListActivity {
     /** Called when the activity is first created. */
     private XMLRPCClient client;
     private String[] postIDs, titles, dateCreated, dateCreatedFormatted,
             draftIDs, draftTitles, publish;
     private Integer[] uploaded;
-    private String id = "", accountName = "";
+    private String accountName = "";
     int rowID = 0;
     long selectedID;
     private int ID_DIALOG_DELETING = 1, ID_DIALOG_POSTING = 2;
@@ -83,7 +83,7 @@ public class ViewPosts extends ListActivity {
     public int totalDrafts = 0;
     public boolean isPage = false, vpUpgrade = false;
     boolean largeScreen = false;
-    public int numRecords = 20;
+    public int numRecords = 20, id;
     public ViewSwitcher switcher;
     private PostListAdapter pla;
     private Blog blog;
@@ -96,135 +96,12 @@ public void onCreate(Bundle icicle) {
         Bundle extras = getIntent().getExtras();
         String action = null;
         if (extras != null) {
-            id = extras.getString("id");
+            id = WordPress.currentBlog.getId();
             blog = new Blog(id, this);
             isPage = extras.getBoolean("viewPages");
             action = extras.getString("action");
         }
         
-        TextView blogname = (TextView) findViewById(R.id.blogname);
-		blogname.setText(blog.getBlogName());
-        ImageButton home = (ImageButton) findViewById(R.id.home_small);
-		ImageButton add = (ImageButton) findViewById(R.id.add_small);
-		
-		home.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewPosts.this, Dashboard.class);		
-				startActivity(i);
-			}
-		});
-				
-		final ActionItem newpost = new ActionItem();
-		
-		newpost.setTitle("Add New Post");
-		newpost.setIcon(getResources().getDrawable(R.drawable.posts_tab));
-		newpost.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewPosts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);				
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem newpage = new ActionItem();
-		
-		newpage.setTitle("Add New Page");
-		newpage.setIcon(getResources().getDrawable(R.drawable.pages_tab));
-		newpage.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewPosts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				i.putExtra("isPage", true);
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem addOldPhoto = new ActionItem();
-		addOldPhoto.setTitle("Add Image From Gallery");
-		addOldPhoto.setIcon(getResources().getDrawable(R.drawable.media));
-		addOldPhoto.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewPosts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "photoPicker");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		
-		final ActionItem takeNewPhoto = new ActionItem();
-		takeNewPhoto.setTitle("Take Photo");
-		takeNewPhoto.setIcon(getResources().getDrawable(R.drawable.media));
-		takeNewPhoto.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewPosts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "takePhotoFromCamera");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		final ActionItem addOldVideo = new ActionItem();
-		addOldVideo.setTitle("Add Video from Gallery");
-		addOldVideo.setIcon(getResources().getDrawable(R.drawable.media));
-		addOldVideo.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewPosts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "videoPicker");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		final ActionItem takeNewVideo = new ActionItem();
-		takeNewVideo.setTitle("Take Video");
-		takeNewVideo.setIcon(getResources().getDrawable(R.drawable.media));
-		takeNewVideo.setOnClickListener(new OnClickListener() {
-			public void onClick(View v) {
-				Intent i = new Intent(ViewPosts.this, EditPost.class);
-				i.putExtra("accountName", accountName);
-				i.putExtra("id", id);
-				i.putExtra("isNew", true);
-				//i.putExtra("blavatar", blavatar_url);
-				i.putExtra("viewPages", true);    	    	
-				i.putExtra("option", "takeVideo");
-				startActivityForResult(i, 0);
-			}
-		});
-		
-		add.setOnClickListener(new View.OnClickListener() {
-			public void onClick(View v) {
-
-				QuickAction qa = new QuickAction(v);				
-				qa.addActionItem(newpost);
-				qa.addActionItem(newpage);
-				qa.addActionItem(addOldPhoto);
-				qa.addActionItem(takeNewPhoto);
-				qa.addActionItem(addOldVideo);
-				qa.addActionItem(takeNewVideo);
-				qa.setAnimStyle(QuickAction.ANIM_AUTO);				
-				qa.show();
-			}
-		});	
-
         createSwitcher();
 
         // user came from action intent
@@ -1144,7 +1021,7 @@ public void closeProgressBar() {
         loading.setVisibility(View.INVISIBLE);
     }
 
-    private void shareURL(String accountId, String postId, final boolean isPage) {
+    private void shareURL(int accountId, String postId, final boolean isPage) {
 
         String errorStr = null;
 
diff --git a/src/org/wordpress/android/ViewStats.java b/src/org/wordpress/android/ViewStats.java
index 4580056dfbc9..512ccda9503f 100644
--- a/src/org/wordpress/android/ViewStats.java
+++ b/src/org/wordpress/android/ViewStats.java
@@ -27,24 +27,6 @@
  https://public-api.wordpress.com/getuserblogs.php?f=json
  */
 
-import java.io.BufferedInputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.PushbackInputStream;
-import java.net.MalformedURLException;
-import java.net.URI;
-import java.net.URL;
-import java.net.URLConnection;
-import java.security.KeyManagementException;
-import java.security.KeyStoreException;
-import java.security.NoSuchAlgorithmException;
-import java.security.UnrecoverableKeyException;
-import java.text.SimpleDateFormat;
-import java.util.Arrays;
-import java.util.Calendar;
-import java.util.HashMap;
-import java.util.Vector;
-
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpResponse;
 import org.apache.http.HttpStatus;
@@ -91,17 +73,35 @@
 import android.widget.TextView;
 import android.widget.Toast;
 
+import java.io.BufferedInputStream;
+import java.io.IOException;
+import java.io.InputStream;
+import java.io.PushbackInputStream;
+import java.net.MalformedURLException;
+import java.net.URI;
+import java.net.URL;
+import java.net.URLConnection;
+import java.security.KeyManagementException;
+import java.security.KeyStoreException;
+import java.security.NoSuchAlgorithmException;
+import java.security.UnrecoverableKeyException;
+import java.text.SimpleDateFormat;
+import java.util.Arrays;
+import java.util.Calendar;
+import java.util.HashMap;
+import java.util.Vector;
+
 public class ViewStats extends Activity {
 	public boolean success = false;
 	public String blogURL, xmlrpcURL;
 	private ConnectionClient client;
 	private HttpPost postMethod;
 	private HttpParams httpParams;
-	String id = "", accountName = "", errorMsg = "";
+	String accountName = "", errorMsg = "";
 	boolean loginShowing = false;
 	ProgressDialog loadingDialog;
 	private int ID_DIALOG_GET_STATS = 0;
-	private int firstRun = 0;
+	private int firstRun = 0, id;
 	private Blog blog;
 
 	@Override
@@ -112,7 +112,7 @@ protected void onCreate(Bundle savedInstanceState) {
 
 		Bundle extras = getIntent().getExtras();
 		if (extras != null) {
-			id = extras.getString("id");
+			id = extras.getInt("id");
 			blog = new Blog(id, this);
 			accountName = extras.getString("accountName");
 		}
diff --git a/src/org/wordpress/android/WordPress.java b/src/org/wordpress/android/WordPress.java
index 0026d7d54b86..204c784eece9 100644
--- a/src/org/wordpress/android/WordPress.java
+++ b/src/org/wordpress/android/WordPress.java
@@ -1,7 +1,9 @@
 package org.wordpress.android;
 
+import org.wordpress.android.models.Blog;
+
 import android.app.Application;
 
 public class WordPress extends Application {
-
+    public static Blog currentBlog;
 }
diff --git a/src/org/wordpress/android/WordPressDB.java b/src/org/wordpress/android/WordPressDB.java
index 05adfefeae5c..f384be5fd1db 100644
--- a/src/org/wordpress/android/WordPressDB.java
+++ b/src/org/wordpress/android/WordPressDB.java
@@ -1,15 +1,5 @@
 package org.wordpress.android;
 
-import java.text.StringCharacterIterator;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.Vector;
-
-import javax.crypto.Cipher;
-import javax.crypto.SecretKey;
-import javax.crypto.SecretKeyFactory;
-import javax.crypto.spec.DESKeySpec;
-
 import org.json.JSONArray;
 import org.json.JSONException;
 import org.wordpress.android.models.Post;
@@ -22,6 +12,16 @@
 import android.database.SQLException;
 import android.database.sqlite.SQLiteDatabase;
 
+import java.text.StringCharacterIterator;
+import java.util.Date;
+import java.util.HashMap;
+import java.util.Vector;
+
+import javax.crypto.Cipher;
+import javax.crypto.SecretKey;
+import javax.crypto.SecretKeyFactory;
+import javax.crypto.spec.DESKeySpec;
+
 public class WordPressDB {
 
 	private static final int DATABASE_VERSION = 11;
@@ -291,7 +291,7 @@ else if (db.getVersion() == 10){
 					
 					for (int i = 0; i < numRows; ++i) {
 					if (c.getString(0) != null){
-						Post post = new Post(c.getString(0), c.getString(1), c.getString(2), c.getString(3), c.getLong(4), c.getString(5), c.getString(6), c.getString(7), c.getString(8), c.getDouble(9), c.getDouble(10), false, ctx);
+						Post post = new Post(c.getInt(0), c.getString(1), c.getString(2), c.getString(3), c.getLong(4), c.getString(5), c.getString(6), c.getString(7), c.getString(8), c.getDouble(9), c.getDouble(10), false, ctx);
 						post.setLocalDraft(true);
 						post.save();	
 					}
@@ -309,7 +309,7 @@ else if (db.getVersion() == 10){
 					
 					for (int i = 0; i < numRows; ++i) {
 					if (c.getString(0) != null){
-						Post post = new Post(c.getString(0), c.getString(1), c.getString(2), c.getString(3), c.getLong(4), c.getString(5), c.getString(6), null, null, 0, 0, true, ctx);
+						Post post = new Post(c.getInt(0), c.getString(1), c.getString(2), c.getString(3), c.getLong(4), c.getString(5), c.getString(6), null, null, 0, 0, true, ctx);
 						post.setLocalDraft(true);
 						post.setPage(true);
 						post.save();	
@@ -496,7 +496,7 @@ public boolean deleteAccount(Context ctx, String id) {
 		return (returnValue);
 	}
 
-	public Vector<Object> loadSettings(Context ctx, String id) {
+	public Vector<Object> loadSettings(Context ctx, int id) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		
 		Cursor c = db.query(SETTINGS_TABLE, new String[] { "url", "blogName", "username", "password", "httpuser", "httppassword", "imagePlacement", "centerThumbnail", "fullSizeImage", "maxImageWidth", "maxImageWidthId", "runService", "blogId", "location", "dotcomFlag", "dotcom_username", "dotcom_password", "api_key", "api_blogid", "wpVersion"}, "id=" + id, null, null, null, null);
@@ -571,7 +571,7 @@ public Vector<String> loadStatsLogin(Context ctx, String id) {
 		return returnVector;
 	}
 	
-	public boolean saveStatsLogin(Context ctx, String id, String statsUsername, String statsPassword) {
+	public boolean saveStatsLogin(Context ctx, int id, String statsUsername, String statsPassword) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		ContentValues values = new ContentValues();
 		values.put("dotcom_username", statsUsername);
@@ -583,7 +583,7 @@ public boolean saveStatsLogin(Context ctx, String id, String statsUsername, Stri
 		
 	}
 	
-	public Vector<String> loadAPIData(Context ctx, String id) {
+	public Vector<String> loadAPIData(Context ctx, int id) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		
 		Cursor c = db.query(SETTINGS_TABLE, new String[] { "api_key", "api_blogid"}, "id=" + id, null, null, null, null);
@@ -605,7 +605,7 @@ public Vector<String> loadAPIData(Context ctx, String id) {
 		return returnVector;
 	}
 	
-	public boolean saveAPIData(Context ctx, String id, String apiKey, String apiBlogID) {
+	public boolean saveAPIData(Context ctx, int id, String apiKey, String apiBlogID) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		ContentValues values = new ContentValues();
 		values.put("api_key", apiKey);
@@ -631,7 +631,7 @@ public int getLatestCommentID(Context ctx, String id) {
 	}
 
 
-	public boolean updateLatestCommentID(Context ctx, String id, Integer newCommentID) {
+	public boolean updateLatestCommentID(Context ctx, int id, Integer newCommentID) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		ContentValues values = new ContentValues();
 		values.put("lastCommentId", newCommentID);
@@ -796,7 +796,7 @@ public int getLastBlogID(Context ctx) {
         return returnValue;
     }
 	
-	public Vector<HashMap<String, Object>> loadDrafts(Context ctx, String blogID, boolean loadPages) {
+	public Vector<HashMap<String, Object>> loadDrafts(Context ctx, int blogID, boolean loadPages) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		Vector<HashMap<String, Object>> returnVector = new Vector<HashMap<String, Object>>();
 		Cursor c;
@@ -847,7 +847,7 @@ public boolean deletePost(Context ctx, Post post) {
 		return returnValue;
 	}
 
-	public boolean savePosts(Context ctx, Vector<?> postValues, String blogID, boolean isPage) {
+	public boolean savePosts(Context ctx, Vector<?> postValues, int blogID, boolean isPage) {
 		boolean returnValue = false;
 		if (postValues.size() != 0)
 		{
@@ -920,7 +920,7 @@ public boolean savePosts(Context ctx, Vector<?> postValues, String blogID, boole
 		return (returnValue);
 	}
 	
-	public long savePost(Context ctx, Post post, String blogID) {
+	public long savePost(Context ctx, Post post, int blogID) {
 		long returnValue = -1;
 		if (post != null)
 		{
@@ -957,7 +957,7 @@ public long savePost(Context ctx, Post post, String blogID) {
 		return (returnValue);
 	}
 	
-	public int updatePost(Context ctx, Post post, String blogID) {
+	public int updatePost(Context ctx, Post post, int blogID) {
         int success = 0;
         if (post != null)
         {
@@ -998,7 +998,7 @@ public int updatePost(Context ctx, Post post, String blogID) {
         return (success);
     }
 
-	public Vector<HashMap<String, Object>> loadUploadedPosts(Context ctx, String blogID, boolean loadPages) {
+	public Vector<HashMap<String, Object>> loadUploadedPosts(Context ctx, int blogID, boolean loadPages) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		Vector<HashMap<String, Object>> returnVector = new Vector<HashMap<String, Object>>();
 		Cursor c;
@@ -1033,7 +1033,7 @@ public Vector<HashMap<String, Object>> loadUploadedPosts(Context ctx, String blo
 		return returnVector;
 	}
 	
-	public Vector<Object> loadPost(Context ctx, String blogID, boolean isPage, long id) {
+	public Vector<Object> loadPost(Context ctx, int blogID, boolean isPage, long id) {
 		Vector<Object> values = null;
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		int pageInt = 0;
@@ -1081,7 +1081,7 @@ public Vector<Object> loadPost(Context ctx, String blogID, boolean isPage, long
 		return values;
 	}
 	
-	public Vector<HashMap<String, Object>> loadComments(Context ctx, String blogID) {
+	public Vector<HashMap<String, Object>> loadComments(Context ctx, int blogID) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		Vector<HashMap<String, Object>> returnVector = new Vector<HashMap<String, Object>>();
 		Cursor c = db.query(COMMENTS_TABLE, new String[] { "blogID", "postID", "iCommentID", "author", "comment", "commentDate", "commentDateFormatted", "status", "url", "email", "postTitle"}, "blogID=" + blogID, null, null, null, null);
@@ -1124,7 +1124,7 @@ public Vector<HashMap<String, Object>> loadComments(Context ctx, String blogID)
 		return returnVector;
 	}
 	
-	public Vector<HashMap<String, Object>> loadMoreComments(Context ctx, String blogID, int limit) {
+	public Vector<HashMap<String, Object>> loadMoreComments(Context ctx, int blogID, int limit) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		Vector<HashMap<String, Object>> returnVector = new Vector<HashMap<String, Object>>();
 		Cursor c = db.query(COMMENTS_TABLE, new String[] { "blogID", "postID", "iCommentID", "author", "comment", "commentDate", "commentDateFormatted", "status", "url", "email", "postTitle"}, "blogID=" + blogID, null, null, null, "iCommentID ASC", String.valueOf(limit));
@@ -1206,7 +1206,7 @@ public boolean saveComments(Context ctx, Vector<?> commentValues, boolean loadMo
 		
 	}
 	
-	public void updateCommentStatus(Context ctx, String blogID, String id, String newStatus) {
+	public void updateCommentStatus(Context ctx, int blogID, String id, String newStatus) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		
 		ContentValues values = new ContentValues();
@@ -1281,7 +1281,7 @@ public long getStatsDate(Context ctx) {
 	}
 	
 	//categories
-	public boolean insertCategory(Context ctx, String id, int wp_id, String category_name) {
+	public boolean insertCategory(Context ctx, int id, int wp_id, String category_name) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		ContentValues values = new ContentValues();
 		values.put("blog_id", id);
@@ -1292,7 +1292,7 @@ public boolean insertCategory(Context ctx, String id, int wp_id, String category
 		return (returnValue);
 	}
 
-	public Vector<String> loadCategories(Context ctx, String id) {
+	public Vector<String> loadCategories(Context ctx, int id) {
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		
 		Cursor c = db.query(CATEGORIES_TABLE, new String[] { "id", "wp_id", "category_name" }, "blog_id=" + id, null, null, null, null);
@@ -1313,7 +1313,7 @@ public Vector<String> loadCategories(Context ctx, String id) {
 		return returnVector;
 	}
 	
-	public int getCategoryId(Context ctx, String id, String category){
+	public int getCategoryId(Context ctx, int id, String category){
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		
 		Cursor c = db.query(CATEGORIES_TABLE, new String[] {"wp_id"}, "category_name=\"" + category + "\" AND blog_id=" + id, null, null, null, null);
@@ -1324,7 +1324,7 @@ public int getCategoryId(Context ctx, String id, String category){
 		return categoryID;
 	}
 	
-	public void clearCategories(Context ctx, String id){
+	public void clearCategories(Context ctx, int id){
 		db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
 		//clear out the table since we are refreshing the whole enchilada
 		db.delete(CATEGORIES_TABLE, "blog_id=" + id, null);
@@ -1469,4 +1469,22 @@ private void migratePasswords(Context ctx) {
 		}
 		c.close();
 	}
+
+
+    public int getUnmoderatedCommentCount(Context ctx, int blogID) {
+            int commentCount = 0;
+            db = ctx.openOrCreateDatabase(DATABASE_NAME, 0, null);
+            Cursor c = db.rawQuery("select count(*) from comments where blogID=? AND status='hold'", new String[] { String.valueOf(blogID) });
+            int numRows = c.getCount();
+            c.moveToFirst();
+            
+            HashMap<String, Object> numRecords = new HashMap<String, Object>();
+            if (numRows > 0){
+                commentCount=c.getInt(0);
+            }
+            
+            c.close();
+            db.close();
+        return commentCount;
+    }
 }
diff --git a/src/org/wordpress/android/Write.java b/src/org/wordpress/android/Write.java
index de5922848e23..84078d1050b6 100644
--- a/src/org/wordpress/android/Write.java
+++ b/src/org/wordpress/android/Write.java
@@ -1,7 +1,5 @@
 package org.wordpress.android;
 
-import java.util.Vector;
-
 import org.wordpress.android.models.Blog;
 import org.wordpress.android.models.Post;
 import org.wordpress.android.util.EscapeUtils;
@@ -28,13 +26,14 @@
 import android.view.WindowManager;
 import android.widget.Button;
 import android.widget.EditText;
-import android.widget.RelativeLayout;
 import android.widget.TextView;
 import android.widget.ToggleButton;
 
+import java.util.Vector;
+
 public class Write extends Activity {
     /** Called when the activity is first created. */
-	public String categoryErrorMsg = "", id = "", accountName = "", SD_CARD_TEMP_DIR = "", categories = "", mediaErrorMsg = "";
+	public String categoryErrorMsg = "", accountName = "", SD_CARD_TEMP_DIR = "", categories = "", mediaErrorMsg = "";
 	private Vector<Uri> selectedImageIDs = new Vector<Uri>();
 	long postID;
     public Boolean localDraft = false, centerThumbnail = false, xmlrpcError = false, isPage = false, isNew = false, 
@@ -42,6 +41,7 @@ public class Write extends Activity {
     private Blog blog;
     private Post post;
     public String setText;
+    public int id;
     int styleStart = -1, cursorLoc = 0, screenDensity = 0;
     @Override
     public void onCreate(Bundle icicle) {
@@ -54,7 +54,7 @@ public void onCreate(Bundle icicle) {
         Bundle extras = getIntent().getExtras();
         if(extras !=null)
         {
-         id = extras.getString("id");
+         id = extras.getInt("id");
          blog = new Blog(id, this);
          accountName = EscapeUtils.unescapeHtml(extras.getString("accountName"));
          postID = extras.getLong("postID");
diff --git a/src/org/wordpress/android/models/Blog.java b/src/org/wordpress/android/models/Blog.java
index def2e5830fa6..938d2f840fd3 100644
--- a/src/org/wordpress/android/models/Blog.java
+++ b/src/org/wordpress/android/models/Blog.java
@@ -2,12 +2,12 @@
 
 package org.wordpress.android.models;
 
-import java.util.Vector;
-
 import org.wordpress.android.WordPressDB;
 
 import android.content.Context;
 
+import java.util.Vector;
+
 public class Blog {
 	
 	private int id;
@@ -35,14 +35,14 @@ public class Blog {
 	private WordPressDB db;
 	private String postFormats;
 	
-	public Blog(String blog_id, Context ctx){
+	public Blog(int blog_id, Context ctx){
 		//instantiate a new blog
 		db = new WordPressDB(ctx);
 		
 		Vector<Object> blogVals = db.loadSettings(ctx, blog_id);
 		
 		if (blogVals != null) {
-			this.id = Integer.parseInt(blog_id);
+			this.id = blog_id;
 			this.url = blogVals.get(0).toString();
 			this.blogName = blogVals.get(1).toString();
 			this.username = blogVals.get(2).toString();
@@ -262,6 +262,8 @@ public void setPostFormats(String postFormats) {
         this.postFormats = postFormats;
     }
 	
-	
+	public int getUnmoderatedCommentCount(Context ctx) {
+	    return db.getUnmoderatedCommentCount(ctx, this.id);
+	}
 	
 }
diff --git a/src/org/wordpress/android/models/Post.java b/src/org/wordpress/android/models/Post.java
index 772f08f9a360..a403102b845a 100644
--- a/src/org/wordpress/android/models/Post.java
+++ b/src/org/wordpress/android/models/Post.java
@@ -1,24 +1,12 @@
 package org.wordpress.android.models;
 
-import java.io.DataInputStream;
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.FileNotFoundException;
-import java.io.IOException;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.Map;
-import java.util.Vector;
-
 import org.json.JSONArray;
 import org.json.JSONException;
-import org.wordpress.android.CommentService;
 import org.wordpress.android.Dashboard;
 import org.wordpress.android.R;
-import org.wordpress.android.TabView;
 import org.wordpress.android.ViewDrafts;
-import org.wordpress.android.WordPressDB;
 import org.wordpress.android.ViewPosts;
+import org.wordpress.android.WordPressDB;
 import org.wordpress.android.util.ImageHelper;
 import org.xmlrpc.android.XMLRPCClient;
 import org.xmlrpc.android.XMLRPCException;
@@ -35,10 +23,20 @@
 import android.provider.MediaStore.Images;
 import android.provider.MediaStore.Video;
 
+import java.io.DataInputStream;
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.FileNotFoundException;
+import java.io.IOException;
+import java.util.Date;
+import java.util.HashMap;
+import java.util.Map;
+import java.util.Vector;
+
 public class Post {
 	
 	private long id;
-	private String blogID;
+	private int blogID;
 	private String categories;
     private String custom_fields;
     private long dateCreated;
@@ -79,7 +77,7 @@ public class Post {
 	public Vector<String> imageUrl = new Vector<String>();
 	Vector<String> selectedCategories = new Vector<String>();
     
-    public Post(String blog_id, long post_id, boolean isPage, Context ctx){
+    public Post(int blog_id, long post_id, boolean isPage, Context ctx){
 		//load an existing post
     	db = new WordPressDB(ctx);
     	context = ctx;
@@ -120,7 +118,7 @@ public Post(String blog_id, long post_id, boolean isPage, Context ctx){
     	}
     }
     
-public Post(String blog_id, String title, String content, String picturePaths, long date, String categories, String tags, String status, String password, double latitude, double longitude, boolean isPage, Context ctx){
+public Post(int blog_id, String title, String content, String picturePaths, long date, String categories, String tags, String status, String password, double latitude, double longitude, boolean isPage, Context ctx){
 		//create a new post
     	db = new WordPressDB(ctx);
     	context = ctx;
@@ -158,11 +156,11 @@ public void setDate_created_gmt(long dateCreatedGmt) {
 		date_created_gmt = dateCreatedGmt;
 	}
 
-	public String getBlogID() {
+	public int getBlogID() {
 		return blogID;
 	}
 
-	public void setBlogID(String blogID) {
+	public void setBlogID(int blogID) {
 		this.blogID = blogID;
 	}
 	
diff --git a/src/org/wordpress/android/util/CommentBadgeTextView.java b/src/org/wordpress/android/util/CommentBadgeTextView.java
new file mode 100644
index 000000000000..87593f28af18
--- /dev/null
+++ b/src/org/wordpress/android/util/CommentBadgeTextView.java
@@ -0,0 +1,32 @@
+
+package org.wordpress.android.util;
+
+import android.content.Context;
+import android.graphics.Canvas;
+import android.util.AttributeSet;
+import android.widget.TextView;
+
+public class CommentBadgeTextView extends TextView {
+
+    public CommentBadgeTextView(Context context) {
+        super(context);
+    }
+
+    public CommentBadgeTextView(Context context, AttributeSet attrs) {
+        this(context, attrs, 0);
+    }
+
+    public CommentBadgeTextView(Context context, AttributeSet attrs, int defStyle) {
+        super(context, attrs, defStyle);
+    }
+
+    @Override
+    protected void onDraw(Canvas canvas) {
+        canvas.save();
+        canvas.rotate(45);
+        super.onDraw(canvas);
+        canvas.restore();
+
+    }
+
+}
diff --git a/src/org/wordpress/android/util/ConnectionClient.java b/src/org/wordpress/android/util/ConnectionClient.java
index 032f5ae22c12..04c30b634327 100644
--- a/src/org/wordpress/android/util/ConnectionClient.java
+++ b/src/org/wordpress/android/util/ConnectionClient.java
@@ -1,16 +1,16 @@
 package org.wordpress.android.util;
 
-import java.security.KeyManagementException; 
-import java.security.KeyStoreException; 
-import java.security.NoSuchAlgorithmException; 
-import java.security.UnrecoverableKeyException; 
+import org.apache.http.auth.AuthScope;
+import org.apache.http.auth.Credentials;
+import org.apache.http.conn.scheme.Scheme;
+import org.apache.http.impl.client.BasicCredentialsProvider;
+import org.apache.http.impl.client.DefaultHttpClient;
+import org.apache.http.params.HttpConnectionParams;
 
-import org.apache.http.auth.AuthScope; 
-import org.apache.http.auth.Credentials; 
-import org.apache.http.conn.scheme.Scheme; 
-import org.apache.http.impl.client.BasicCredentialsProvider; 
-import org.apache.http.impl.client.DefaultHttpClient; 
-import org.apache.http.params.HttpConnectionParams; 
+import java.security.KeyManagementException;
+import java.security.KeyStoreException;
+import java.security.NoSuchAlgorithmException;
+import java.security.UnrecoverableKeyException;
 
 
 public class ConnectionClient extends DefaultHttpClient { 
diff --git a/src/org/wordpress/android/util/DrawableManager.java b/src/org/wordpress/android/util/DrawableManager.java
index ce8f2f0dbdf3..70ea453245ae 100644
--- a/src/org/wordpress/android/util/DrawableManager.java
+++ b/src/org/wordpress/android/util/DrawableManager.java
@@ -1,11 +1,5 @@
 package org.wordpress.android.util;
 
-import java.io.IOException;
-import java.io.InputStream;
-import java.net.MalformedURLException;
-import java.util.HashMap;
-import java.util.Map;
-
 import org.apache.http.HttpResponse;
 import org.apache.http.client.methods.HttpGet;
 import org.apache.http.impl.client.DefaultHttpClient;
@@ -16,6 +10,12 @@
 import android.util.Log;
 import android.widget.ImageView;
 
+import java.io.IOException;
+import java.io.InputStream;
+import java.net.MalformedURLException;
+import java.util.HashMap;
+import java.util.Map;
+
 public class DrawableManager {
     private final Map<String, Drawable> drawableMap;
 
diff --git a/src/org/wordpress/android/util/ImageHelper.java b/src/org/wordpress/android/util/ImageHelper.java
index 28d0a6825046..de6a42f984ec 100644
--- a/src/org/wordpress/android/util/ImageHelper.java
+++ b/src/org/wordpress/android/util/ImageHelper.java
@@ -1,14 +1,15 @@
 package org.wordpress.android.util;
 
-import java.io.ByteArrayOutputStream;
-import java.lang.reflect.Constructor;
-import java.lang.reflect.InvocationTargetException;
-import java.lang.reflect.Method;
 import android.graphics.Bitmap;
 import android.graphics.BitmapFactory;
 import android.graphics.Matrix;
 import android.media.ExifInterface;
 
+import java.io.ByteArrayOutputStream;
+import java.lang.reflect.Constructor;
+import java.lang.reflect.InvocationTargetException;
+import java.lang.reflect.Method;
+
 public class ImageHelper{
 
 	public byte[] createThumbnail(byte[] bytes, String sMaxImageWidth, String orientation, boolean tiny) {
diff --git a/src/org/wordpress/android/util/TrustAllManager.java b/src/org/wordpress/android/util/TrustAllManager.java
index 8dcc87382f0c..722b4b86fda2 100644
--- a/src/org/wordpress/android/util/TrustAllManager.java
+++ b/src/org/wordpress/android/util/TrustAllManager.java
@@ -1,9 +1,9 @@
 package org.wordpress.android.util;
 
-import java.security.cert.CertificateException; 
-import java.security.cert.X509Certificate; 
+import java.security.cert.CertificateException;
+import java.security.cert.X509Certificate;
 
-import javax.net.ssl.X509TrustManager; 
+import javax.net.ssl.X509TrustManager;
 
 public class TrustAllManager implements X509TrustManager { 
     public void checkClientTrusted(X509Certificate[] cert, String authType) throws CertificateException { } 
diff --git a/src/org/wordpress/android/util/TrustAllSSLSocketFactory.java b/src/org/wordpress/android/util/TrustAllSSLSocketFactory.java
index 9dccd69705e8..d8cf6096add8 100644
--- a/src/org/wordpress/android/util/TrustAllSSLSocketFactory.java
+++ b/src/org/wordpress/android/util/TrustAllSSLSocketFactory.java
@@ -1,19 +1,19 @@
 package org.wordpress.android.util;
 
-import java.io.IOException; 
-import java.net.InetAddress; 
-import java.net.Socket; 
-import java.security.KeyManagementException; 
-import java.security.KeyStoreException; 
-import java.security.NoSuchAlgorithmException; 
-import java.security.UnrecoverableKeyException; 
+import org.apache.http.conn.scheme.SocketFactory;
+import org.apache.http.conn.ssl.AllowAllHostnameVerifier;
+import org.apache.http.conn.ssl.SSLSocketFactory;
 
-import javax.net.ssl.SSLContext; 
-import javax.net.ssl.TrustManager; 
+import java.io.IOException;
+import java.net.InetAddress;
+import java.net.Socket;
+import java.security.KeyManagementException;
+import java.security.KeyStoreException;
+import java.security.NoSuchAlgorithmException;
+import java.security.UnrecoverableKeyException;
 
-import org.apache.http.conn.scheme.SocketFactory; 
-import org.apache.http.conn.ssl.AllowAllHostnameVerifier; 
-import org.apache.http.conn.ssl.SSLSocketFactory; 
+import javax.net.ssl.SSLContext;
+import javax.net.ssl.TrustManager;
 
 public class TrustAllSSLSocketFactory extends SSLSocketFactory { 
     private javax.net.ssl.SSLSocketFactory factory; 
diff --git a/src/org/wordpress/android/util/WPTitleBar.java b/src/org/wordpress/android/util/WPTitleBar.java
new file mode 100644
index 000000000000..61fa2e35c978
--- /dev/null
+++ b/src/org/wordpress/android/util/WPTitleBar.java
@@ -0,0 +1,154 @@
+
+package org.wordpress.android.util;
+
+import org.wordpress.android.ActionItem;
+import org.wordpress.android.Dashboard;
+import org.wordpress.android.EditPost;
+import org.wordpress.android.QuickAction;
+import org.wordpress.android.R;
+import org.wordpress.android.WordPress;
+import org.wordpress.android.WordPressDB;
+import org.wordpress.android.models.Blog;
+
+import android.content.Context;
+import android.location.LocationManager;
+import android.util.AttributeSet;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.widget.Button;
+import android.widget.ImageButton;
+import android.widget.LinearLayout;
+import android.widget.TextView;
+
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.Vector;
+
+public class WPTitleBar extends LinearLayout {
+
+    QuickAction qa, qaBlogs;
+    public ArrayList<String> defBlogNames = new ArrayList<String>();
+    public int[] blogIDs;
+    public Vector<?> accounts;
+    private Context context;
+    Button blogTitle;
+
+    public WPTitleBar(final Context ctx, AttributeSet attrs) {
+        super(ctx, attrs);
+
+        context = ctx;
+    }
+
+    @Override
+    protected void onFinishInflate() {
+        super.onFinishInflate();
+
+        final WordPressDB settingsDB = new WordPressDB(context);
+        accounts = settingsDB.getAccounts(context);
+
+        defBlogNames.clear();
+        blogIDs = new int[accounts.size()];
+
+        qaBlogs = new QuickAction(context);
+        qaBlogs.setAnimStyle(QuickAction.ANIM_AUTO);
+
+        for (int i = 0; i < accounts.size(); i++) {
+            HashMap<?, ?> defHash = (HashMap<?, ?>) accounts.get(i);
+            String curBlogName = EscapeUtils.unescapeHtml(defHash.get("blogName").toString());
+
+            defBlogNames.add(curBlogName);
+            blogIDs[i] = Integer.valueOf(defHash.get("id").toString());
+
+            ActionItem blogIA = new ActionItem();
+
+            blogIA.setTitle(curBlogName);
+            blogIA.setIcon(getResources().getDrawable(R.drawable.wp_logo));
+            qaBlogs.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {
+                @Override
+                public void onItemClick(int pos) {
+                    blogTitle.setText(defBlogNames.get(pos));
+                    WordPress.currentBlog = new Blog(blogIDs[pos], context);
+                    settingsDB.updateLastBlogID(context, blogIDs[pos]);
+                }
+            });
+            
+            blogTitle = (Button) findViewById(R.id.blog_title);
+            blogTitle.setOnClickListener(new Button.OnClickListener() {
+                public void onClick(View v) {
+                    if (qaBlogs != null)
+                    {
+                        qaBlogs.show(v);
+                    }
+                }
+            });
+
+            qaBlogs.addActionItem(blogIA);
+
+        }
+        
+        int lastBlogID = settingsDB.getLastBlogID(context);
+        if (lastBlogID != -1) {
+            try {
+                boolean matchedID = false;
+                for (int i=0;i<blogIDs.length;i++) {
+                    if (blogIDs[i] == lastBlogID) {
+                        matchedID = true;
+                        WordPress.currentBlog = new Blog(blogIDs[i], context);
+                    }
+                }
+                if (!matchedID) {
+                    WordPress.currentBlog = new Blog(blogIDs[0], context);
+                }
+            } catch (Exception e) {
+                e.printStackTrace();
+            }
+        }
+        else {
+            WordPress.currentBlog = new Blog(blogIDs[0], context);
+        }
+        blogTitle.setText(WordPress.currentBlog.getBlogName());
+
+        final ActionItem newpost = new ActionItem();
+
+        newpost.setTitle("Add New Post");
+        newpost.setIcon(getResources().getDrawable(R.drawable.posts_tab));
+
+        final ActionItem newpage = new ActionItem();
+
+        newpage.setTitle("Add New Page");
+        newpage.setIcon(getResources().getDrawable(R.drawable.pages_tab));
+
+        final ActionItem addOldPhoto = new ActionItem();
+        addOldPhoto.setTitle("Add Image From Gallery");
+        addOldPhoto.setIcon(getResources().getDrawable(R.drawable.media));
+
+        final ActionItem takeNewPhoto = new ActionItem();
+        takeNewPhoto.setTitle("Take Photo");
+        takeNewPhoto.setIcon(getResources().getDrawable(R.drawable.media));
+
+        final ActionItem addOldVideo = new ActionItem();
+        addOldVideo.setTitle("Add Video from Gallery");
+        addOldVideo.setIcon(getResources().getDrawable(R.drawable.media));
+
+        final ActionItem takeNewVideo = new ActionItem();
+        takeNewVideo.setTitle("Take Video");
+        takeNewVideo.setIcon(getResources().getDrawable(R.drawable.media));
+
+        ImageButton add = (ImageButton) findViewById(R.id.add_small);
+
+        add.setOnClickListener(new View.OnClickListener() {
+            public void onClick(View v) {
+
+                qa = new QuickAction(context);
+                qa.addActionItem(newpost);
+                qa.addActionItem(newpage);
+                qa.addActionItem(addOldPhoto);
+                qa.addActionItem(takeNewPhoto);
+                qa.addActionItem(addOldVideo);
+                qa.addActionItem(takeNewVideo);
+                qa.setAnimStyle(QuickAction.ANIM_AUTO);
+                qa.show(v);
+            }
+        });
+    }
+}
diff --git a/src/org/wordpress/android/wpAndroid.java b/src/org/wordpress/android/wpAndroid.java
index b87ae4631223..04df6b27766f 100644
--- a/src/org/wordpress/android/wpAndroid.java
+++ b/src/org/wordpress/android/wpAndroid.java
@@ -1,11 +1,6 @@
 package org.wordpress.android;
 
-import java.io.UnsupportedEncodingException;
-import java.util.ArrayList;
-import java.util.HashMap;
-import java.util.List;
-import java.util.UUID;
-import java.util.Vector;
+import com.commonsware.cwac.thumbnail.ThumbnailAdapter;
 
 import org.apache.http.NameValuePair;
 import org.apache.http.client.HttpClient;
@@ -28,7 +23,6 @@
 import android.content.res.Configuration;
 import android.graphics.PixelFormat;
 import android.os.Bundle;
-import android.os.Handler;
 import android.telephony.TelephonyManager;
 import android.view.ContextMenu;
 import android.view.LayoutInflater;
@@ -42,7 +36,6 @@
 import android.view.ViewGroup.LayoutParams;
 import android.widget.AdapterView;
 import android.widget.BaseAdapter;
-import android.widget.Button;
 import android.widget.ImageView;
 import android.widget.LinearLayout;
 import android.widget.ListView;
@@ -51,7 +44,12 @@
 import android.widget.Toast;
 import android.widget.AdapterView.OnItemClickListener;
 
-import com.commonsware.cwac.thumbnail.ThumbnailAdapter;
+import java.io.UnsupportedEncodingException;
+import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.List;
+import java.util.UUID;
+import java.util.Vector;
 
 public class wpAndroid extends ListActivity {
 	/** Called when the activity is first created. */
diff --git a/src/org/xmlrpc/android/ApiHelper.java b/src/org/xmlrpc/android/ApiHelper.java
index f4e25d594097..2aa35c29f51a 100644
--- a/src/org/xmlrpc/android/ApiHelper.java
+++ b/src/org/xmlrpc/android/ApiHelper.java
@@ -1,16 +1,8 @@
 package org.xmlrpc.android;
 
-import java.text.ParseException;
-import java.text.SimpleDateFormat;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.TimeZone;
-import java.util.Vector;
-
 import org.json.JSONObject;
-import org.wordpress.android.WordPressDB;
 import org.wordpress.android.ViewPosts;
+import org.wordpress.android.WordPressDB;
 import org.wordpress.android.models.Blog;
 
 import android.app.Activity;
@@ -18,6 +10,14 @@
 import android.os.AsyncTask;
 import android.os.Bundle;
 
+import java.text.ParseException;
+import java.text.SimpleDateFormat;
+import java.util.Calendar;
+import java.util.Date;
+import java.util.HashMap;
+import java.util.TimeZone;
+import java.util.Vector;
+
 
 public class ApiHelper extends Activity {
     /** Called when the activity is first created. */
@@ -28,7 +28,7 @@ public void onCreate(Bundle icicle) {
     }
     
     @SuppressWarnings("unchecked")
-	static void refreshComments(final String id, final Context ctx) {
+	static void refreshComments(final int id, final Context ctx) {
 
     	WordPressDB db = new WordPressDB(ctx);
 		Blog blog = new Blog(id, ctx);
@@ -91,7 +91,7 @@ static void refreshComments(final String id, final Context ctx) {
 						dateCreatedFormatted = dateCreated;  //just make it the ugly date if it doesn't work
 					} 
 	
-					dbValues.put("blogID", id);
+					dbValues.put("blogID", String.valueOf(id));
 					dbValues.put("postID", postID);
 					dbValues.put("commentID", commentID);
 					dbValues.put("author", author);
@@ -131,7 +131,7 @@ protected void onPostExecute(Object[] result) {
                         dbVector.add(ctr, contentHash);
                     }// end for loop
 
-                    postStoreDB.savePosts(ctx, dbVector, String.valueOf(blog.getId()), isPage);
+                    postStoreDB.savePosts(ctx, dbVector, blog.getId(), isPage);
                     ((ViewPosts) ctx).numRecords += 20;
                     if (loadMore)
                         ((ViewPosts) ctx).switcher.showPrevious();
diff --git a/src/org/xmlrpc/android/XMLRPCClient.java b/src/org/xmlrpc/android/XMLRPCClient.java
index 8effbe56c855..22206a1849c7 100644
--- a/src/org/xmlrpc/android/XMLRPCClient.java
+++ b/src/org/xmlrpc/android/XMLRPCClient.java
@@ -1,17 +1,5 @@
 package org.xmlrpc.android;
 
-import java.io.File;
-import java.io.FileWriter;
-import java.io.PushbackInputStream;
-import java.io.StringWriter;
-import java.net.URI;
-import java.net.URL;
-import java.security.KeyManagementException;
-import java.security.KeyStoreException;
-import java.security.NoSuchAlgorithmException;
-import java.security.UnrecoverableKeyException;
-import java.util.Map;
-
 import org.apache.http.HttpEntity;
 import org.apache.http.HttpResponse;
 import org.apache.http.HttpStatus;
@@ -31,6 +19,18 @@
 import android.util.Log;
 import android.util.Xml;
 
+import java.io.File;
+import java.io.FileWriter;
+import java.io.PushbackInputStream;
+import java.io.StringWriter;
+import java.net.URI;
+import java.net.URL;
+import java.security.KeyManagementException;
+import java.security.KeyStoreException;
+import java.security.NoSuchAlgorithmException;
+import java.security.UnrecoverableKeyException;
+import java.util.Map;
+
 public class XMLRPCClient {
 	private static final String TAG_METHOD_CALL = "methodCall";
 	private static final String TAG_METHOD_NAME = "methodName";
diff --git a/src/org/xmlrpc/android/XMLRPCSerializer.java b/src/org/xmlrpc/android/XMLRPCSerializer.java
index 63637d1fbad1..42e1a8aec0ed 100644
--- a/src/org/xmlrpc/android/XMLRPCSerializer.java
+++ b/src/org/xmlrpc/android/XMLRPCSerializer.java
@@ -1,5 +1,10 @@
 package org.xmlrpc.android;
 
+import org.wordpress.android.models.MediaFile;
+import org.xmlpull.v1.XmlPullParser;
+import org.xmlpull.v1.XmlPullParserException;
+import org.xmlpull.v1.XmlSerializer;
+
 import java.io.BufferedReader;
 import java.io.DataInputStream;
 import java.io.FileInputStream;
@@ -18,11 +23,6 @@
 import java.util.TimeZone;
 import java.util.Map.Entry;
 
-import org.wordpress.android.models.MediaFile;
-import org.xmlpull.v1.XmlPullParser;
-import org.xmlpull.v1.XmlPullParserException;
-import org.xmlpull.v1.XmlSerializer;
-
 class XMLRPCSerializer {
 	static final String TAG_NAME = "name";
 	static final String TAG_MEMBER = "member";
