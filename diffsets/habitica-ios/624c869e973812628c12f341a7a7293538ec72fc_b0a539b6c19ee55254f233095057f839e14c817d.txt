diff --git a/HabitRPG/Habitica-Info.plist b/HabitRPG/Habitica-Info.plist
index 1bbfbf983..5e20f36ac 100644
--- a/HabitRPG/Habitica-Info.plist
+++ b/HabitRPG/Habitica-Info.plist
@@ -277,7 +277,7 @@
 	<key>CFBundlePackageType</key>
 	<string>APPL</string>
 	<key>CFBundleShortVersionString</key>
-	<string>2.3.2</string>
+	<string>2.3.4</string>
 	<key>CFBundleURLTypes</key>
 	<array>
 		<dict>
@@ -297,7 +297,7 @@
 		</dict>
 	</array>
 	<key>CFBundleVersion</key>
-	<string>389</string>
+	<string>391</string>
 	<key>CustomDomain</key>
 	<string>${CUSTOM_DOMAIN}</string>
 	<key>DisableSSL</key>
diff --git a/HabitRPG/Storyboards/Base.lproj/BuyModal.storyboard b/HabitRPG/Storyboards/Base.lproj/BuyModal.storyboard
index 24ef09871..05a1bb1ff 100644
--- a/HabitRPG/Storyboards/Base.lproj/BuyModal.storyboard
+++ b/HabitRPG/Storyboards/Base.lproj/BuyModal.storyboard
@@ -1,11 +1,11 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="14460.31" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES" initialViewController="PIR-jb-93G">
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="14490.70" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES" initialViewController="PIR-jb-93G">
     <device id="ipad9_7" orientation="portrait">
         <adaptation id="fullscreen"/>
     </device>
     <dependencies>
         <deployment identifier="iOS"/>
-        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14460.20"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14490.49"/>
         <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
     </dependencies>
     <scenes>
@@ -229,7 +229,7 @@
                                         <nil key="highlightedColor"/>
                                     </label>
                                     <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="f5k-Rr-PH2" customClass="HRPGSimpleShopItemView" customModule="Habitica" customModuleProvider="target">
-                                        <rect key="frame" x="0.0" y="46" width="400" height="140"/>
+                                        <rect key="frame" x="0.0" y="46" width="400" height="168.5"/>
                                         <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                                         <userDefinedRuntimeAttributes>
                                             <userDefinedRuntimeAttribute type="image" keyPath="image" value="84_gems"/>
@@ -238,7 +238,7 @@
                                         </userDefinedRuntimeAttributes>
                                     </view>
                                     <button opaque="NO" contentMode="scaleToFill" contentHorizontalAlignment="center" contentVerticalAlignment="center" buttonType="roundedRect" lineBreakMode="middleTruncation" translatesAutoresizingMaskIntoConstraints="NO" id="u6f-ro-Ehm">
-                                        <rect key="frame" x="0.0" y="186" width="400" height="50"/>
+                                        <rect key="frame" x="0.0" y="214.5" width="400" height="50"/>
                                         <color key="backgroundColor" red="0.97647058819999999" green="0.96862745100000003" blue="1" alpha="1" colorSpace="calibratedRGB"/>
                                         <constraints>
                                             <constraint firstAttribute="height" constant="50" id="Enx-lB-SGa"/>
@@ -305,7 +305,7 @@
                         <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                         <subviews>
                             <view clipsSubviews="YES" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="XMT-e1-oa1" customClass="HRPGShopModalBgView" customModule="Habitica" customModuleProvider="target">
-                                <rect key="frame" x="184" y="365.5" width="400" height="293"/>
+                                <rect key="frame" x="184" y="390.5" width="400" height="243"/>
                                 <subviews>
                                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" textAlignment="natural" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="MAF-Nb-1hY">
                                         <rect key="frame" x="200" y="15" width="0.0" height="0.0"/>
@@ -314,7 +314,7 @@
                                         <nil key="highlightedColor"/>
                                     </label>
                                     <button opaque="NO" contentMode="scaleToFill" contentHorizontalAlignment="center" contentVerticalAlignment="center" buttonType="roundedRect" lineBreakMode="middleTruncation" translatesAutoresizingMaskIntoConstraints="NO" id="Wl4-Aq-qfJ">
-                                        <rect key="frame" x="0.0" y="243" width="400" height="50"/>
+                                        <rect key="frame" x="0.0" y="193" width="400" height="50"/>
                                         <color key="backgroundColor" red="0.97647058819999999" green="0.96862745100000003" blue="1" alpha="1" colorSpace="calibratedRGB"/>
                                         <constraints>
                                             <constraint firstAttribute="height" constant="50" id="pMb-uf-UO2"/>
@@ -325,7 +325,7 @@
                                         </connections>
                                     </button>
                                     <view contentMode="center" translatesAutoresizingMaskIntoConstraints="NO" id="JPn-ef-wu2" customClass="HRPGSimpleShopItemView" customModule="Habitica" customModuleProvider="target">
-                                        <rect key="frame" x="0.0" y="52" width="400" height="189"/>
+                                        <rect key="frame" x="0.0" y="52" width="400" height="139"/>
                                         <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                                         <constraints>
                                             <constraint firstAttribute="height" constant="139" id="clb-WV-yX3"/>
diff --git a/HabitRPG/Storyboards/Base.lproj/Shop.storyboard b/HabitRPG/Storyboards/Base.lproj/Shop.storyboard
index bb7fa008b..a3393eece 100644
--- a/HabitRPG/Storyboards/Base.lproj/Shop.storyboard
+++ b/HabitRPG/Storyboards/Base.lproj/Shop.storyboard
@@ -1,11 +1,11 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="14460.31" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES" initialViewController="SK0-Yv-8jC">
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="14490.70" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES" initialViewController="SK0-Yv-8jC">
     <device id="retina4_7" orientation="portrait">
         <adaptation id="fullscreen"/>
     </device>
     <dependencies>
         <deployment identifier="iOS"/>
-        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14460.20"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14490.49"/>
         <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
     </dependencies>
     <scenes>
@@ -31,7 +31,7 @@
                                     <rect key="frame" x="0.0" y="0.0" width="375" height="90"/>
                                     <autoresizingMask key="autoresizingMask"/>
                                     <subviews>
-                                        <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="EdC-Za-0BK">
+                                        <view tag="2" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="EdC-Za-0BK">
                                             <rect key="frame" x="16" y="4" width="343" height="82"/>
                                             <subviews>
                                                 <label opaque="NO" userInteractionEnabled="NO" tag="1" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" textAlignment="center" lineBreakMode="tailTruncation" numberOfLines="0" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="vZT-3v-vhS">
@@ -202,7 +202,7 @@
         </scene>
     </scenes>
     <resources>
-        <image name="carret_down" width="48" height="48"/>
+        <image name="carret_down" width="24" height="24"/>
     </resources>
     <color key="tintColor" red="0.6058621407" green="0.38462612029999999" blue="0.99835687880000001" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
 </document>
diff --git a/HabitRPG/Storyboards/Base.lproj/Social.storyboard b/HabitRPG/Storyboards/Base.lproj/Social.storyboard
index bf2599f9b..f0479c95e 100644
--- a/HabitRPG/Storyboards/Base.lproj/Social.storyboard
+++ b/HabitRPG/Storyboards/Base.lproj/Social.storyboard
@@ -374,19 +374,19 @@
                                         <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="genericGamma22GrayColorSpace"/>
                                     </view>
                                     <stackView opaque="NO" contentMode="scaleToFill" verticalHuggingPriority="1000" verticalCompressionResistancePriority="1000" misplaced="YES" axis="vertical" distribution="fillProportionally" spacing="28" translatesAutoresizingMaskIntoConstraints="NO" id="Q0X-P7-X28">
-                                        <rect key="frame" x="15" y="16" width="345" height="20168"/>
+                                        <rect key="frame" x="15" y="16" width="345" height="188230.5"/>
                                         <subviews>
                                             <stackView opaque="NO" contentMode="scaleToFill" axis="vertical" spacing="8" translatesAutoresizingMaskIntoConstraints="NO" id="vms-Gl-8Ff">
-                                                <rect key="frame" x="0.0" y="0.0" width="345" height="10071"/>
+                                                <rect key="frame" x="0.0" y="0.0" width="345" height="93994"/>
                                                 <subviews>
                                                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" textAlignment="natural" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="Hdi-g1-MiM">
-                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="10000"/>
+                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="93923"/>
                                                         <fontDescription key="fontDescription" type="system" pointSize="15"/>
                                                         <color key="textColor" red="0.53023332359999997" green="0.50720638039999999" blue="0.56472396849999995" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
                                                         <nil key="highlightedColor"/>
                                                     </label>
                                                     <stackView opaque="NO" contentMode="scaleToFill" spacing="20" translatesAutoresizingMaskIntoConstraints="NO" id="V5p-do-14l">
-                                                        <rect key="frame" x="0.0" y="10008" width="345" height="63"/>
+                                                        <rect key="frame" x="0.0" y="93931" width="345" height="63"/>
                                                         <subviews>
                                                             <imageView userInteractionEnabled="NO" contentMode="scaleAspectFit" horizontalHuggingPriority="251" verticalHuggingPriority="251" translatesAutoresizingMaskIntoConstraints="NO" id="maA-rD-Xo6">
                                                                 <rect key="frame" x="0.0" y="0.0" width="63" height="63"/>
@@ -453,16 +453,16 @@
                                                 </subviews>
                                             </stackView>
                                             <stackView opaque="NO" contentMode="scaleToFill" axis="vertical" spacing="8" translatesAutoresizingMaskIntoConstraints="NO" id="UPz-xj-UTk">
-                                                <rect key="frame" x="0.0" y="10099" width="345" height="10041"/>
+                                                <rect key="frame" x="0.0" y="94022" width="345" height="93714"/>
                                                 <subviews>
                                                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" textAlignment="natural" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="PvU-aP-uYa">
-                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="10000"/>
+                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="93673"/>
                                                         <fontDescription key="fontDescription" type="system" pointSize="15"/>
                                                         <color key="textColor" red="0.53023332359999997" green="0.50720638039999999" blue="0.56472396849999995" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
                                                         <nil key="highlightedColor"/>
                                                     </label>
                                                     <textView clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" verticalHuggingPriority="1000" verticalCompressionResistancePriority="1000" scrollEnabled="NO" editable="NO" textAlignment="natural" selectable="NO" translatesAutoresizingMaskIntoConstraints="NO" id="xdN-Nt-8pH">
-                                                        <rect key="frame" x="0.0" y="10008" width="345" height="33"/>
+                                                        <rect key="frame" x="0.0" y="93681" width="345" height="33"/>
                                                         <constraints>
                                                             <constraint firstAttribute="height" priority="500" constant="100" id="dum-SZ-kcm"/>
                                                         </constraints>
@@ -473,10 +473,10 @@
                                                 </subviews>
                                             </stackView>
                                             <stackView opaque="NO" contentMode="scaleToFill" axis="vertical" spacing="8" translatesAutoresizingMaskIntoConstraints="NO" id="03F-b3-D6O">
-                                                <rect key="frame" x="0.0" y="20168" width="345" height="0.0"/>
+                                                <rect key="frame" x="0.0" y="187764" width="345" height="466.5"/>
                                                 <subviews>
                                                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" textAlignment="natural" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="q4z-83-kc2">
-                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="0.0"/>
+                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="466.5"/>
                                                         <fontDescription key="fontDescription" type="system" pointSize="15"/>
                                                         <color key="textColor" red="0.53023332359999997" green="0.50720638039999999" blue="0.56472396849999995" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
                                                         <nil key="highlightedColor"/>
@@ -489,7 +489,7 @@
                                         </constraints>
                                     </stackView>
                                     <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="gLh-F8-lA2">
-                                        <rect key="frame" x="0.0" y="20199" width="375" height="70"/>
+                                        <rect key="frame" x="0.0" y="188261.5" width="375" height="70"/>
                                         <subviews>
                                             <stackView opaque="NO" contentMode="scaleToFill" distribution="fillEqually" spacing="15" translatesAutoresizingMaskIntoConstraints="NO" id="Tp5-9p-PEL">
                                                 <rect key="frame" x="16" y="18" width="343" height="36"/>
@@ -1438,9 +1438,6 @@
                                                             <userDefinedRuntimeAttribute type="number" keyPath="cornerRadius">
                                                                 <real key="value" value="4"/>
                                                             </userDefinedRuntimeAttribute>
-                                                            <userDefinedRuntimeAttribute type="color" keyPath="buttonColor">
-                                                                <color key="value" red="0.99927479029999999" green="0.65261268620000001" blue="0.14139345289999999" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
-                                                            </userDefinedRuntimeAttribute>
                                                         </userDefinedRuntimeAttributes>
                                                         <connections>
                                                             <action selector="innButtonTapped:" destination="i00-35-H2A" eventType="touchUpInside" id="70Q-4M-KeW"/>
@@ -1480,9 +1477,7 @@
                                                         <constraints>
                                                             <constraint firstAttribute="height" relation="greaterThanOrEqual" constant="38" id="OyR-Kp-a2h"/>
                                                         </constraints>
-                                                        <state key="normal" title="View Community Guidelines">
-                                                            <color key="titleColor" red="0.60365134480000004" green="0.38511508700000002" blue="1" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
-                                                        </state>
+                                                        <state key="normal" title="View Community Guidelines"/>
                                                         <userDefinedRuntimeAttributes>
                                                             <userDefinedRuntimeAttribute type="number" keyPath="cornerRadius">
                                                                 <real key="value" value="4"/>
@@ -1526,9 +1521,7 @@
                                                         <constraints>
                                                             <constraint firstAttribute="height" relation="greaterThanOrEqual" constant="38" id="aH1-Nc-Ggb"/>
                                                         </constraints>
-                                                        <state key="normal" title="View FAQ">
-                                                            <color key="titleColor" red="0.60365134480000004" green="0.38511508700000002" blue="1" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
-                                                        </state>
+                                                        <state key="normal" title="View FAQ"/>
                                                         <userDefinedRuntimeAttributes>
                                                             <userDefinedRuntimeAttribute type="number" keyPath="cornerRadius">
                                                                 <real key="value" value="4"/>
@@ -1544,9 +1537,7 @@
                                                         <constraints>
                                                             <constraint firstAttribute="height" relation="greaterThanOrEqual" constant="38" id="gdB-Xc-dhK"/>
                                                         </constraints>
-                                                        <state key="normal" title="Report a Bug">
-                                                            <color key="titleColor" red="0.60365134480000004" green="0.38511508700000002" blue="1" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
-                                                        </state>
+                                                        <state key="normal" title="Report a Bug"/>
                                                         <userDefinedRuntimeAttributes>
                                                             <userDefinedRuntimeAttribute type="number" keyPath="cornerRadius">
                                                                 <real key="value" value="4"/>
@@ -1586,11 +1577,14 @@
                         </constraints>
                     </view>
                     <connections>
+                        <outlet property="faqButton" destination="1kC-MI-SIq" id="z3y-Uc-pTW"/>
+                        <outlet property="guidelinesButton" destination="PQZ-Md-abl" id="bpJ-8d-wH2"/>
                         <outlet property="guidelinesStackView" destination="cJ1-Nq-YSk" id="aTB-a1-W1w"/>
                         <outlet property="innButton" destination="x55-Jn-3In" id="Lxn-Kf-nhq"/>
                         <outlet property="innStackView" destination="hLu-EM-YaS" id="A51-2t-Zcm"/>
                         <outlet property="linksStackView" destination="Qwk-6P-BZe" id="rQL-70-Hww"/>
                         <outlet property="questProgressView" destination="Tec-cM-iOQ" id="UtX-Su-rUP"/>
+                        <outlet property="reportButton" destination="a2o-0k-TlN" id="yyt-ct-XgS"/>
                         <outlet property="scrollView" destination="XQ3-dk-VGA" id="lPc-jb-eng"/>
                         <outlet property="tavernHeaderView" destination="Rbl-0s-XZ1" id="1rZ-AP-xCd"/>
                         <outlet property="worldBossStackView" destination="ZjB-q3-Y3D" id="wAx-1v-P09"/>
@@ -1971,7 +1965,7 @@
                         <viewControllerLayoutGuide type="bottom" id="Mt2-dF-B4p"/>
                     </layoutGuides>
                     <view key="view" contentMode="scaleToFill" id="Czc-6v-sm8">
-                        <rect key="frame" x="0.0" y="0.0" width="375" height="667"/>
+                        <rect key="frame" x="0.0" y="0.0" width="375" height="647"/>
                         <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                         <subviews>
                             <scrollView clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="clS-8V-xVt">
@@ -2726,7 +2720,7 @@
     </resources>
     <inferredMetricsTieBreakers>
         <segue reference="71z-UW-WBb"/>
-        <segue reference="gAH-Zh-PJ3"/>
+        <segue reference="Cwl-t5-j4W"/>
         <segue reference="BKi-xg-gxr"/>
         <segue reference="9hs-wq-6bn"/>
         <segue reference="jXp-j5-lvy"/>
diff --git a/HabitRPG/TableViewController/Modals/HRPGBuyItemModalViewController.swift b/HabitRPG/TableViewController/Modals/HRPGBuyItemModalViewController.swift
index d1334c22b..0f9ddfa48 100644
--- a/HabitRPG/TableViewController/Modals/HRPGBuyItemModalViewController.swift
+++ b/HabitRPG/TableViewController/Modals/HRPGBuyItemModalViewController.swift
@@ -62,6 +62,17 @@ class HRPGBuyItemModalViewController: UIViewController, Themeable {
         let inAppReward = reward
         pinButton.isHidden = inAppReward?.pinType == "armoire" || inAppReward?.pinType == "potion"
         
+        if #available(iOS 11.0, *) {
+            pinButton.layer.cornerRadius = 12
+            buyButton.layer.cornerRadius = 12
+            if pinButton.isHidden {
+                buyButton.layer.maskedCorners = [.layerMinXMaxYCorner, .layerMaxXMaxYCorner]
+            } else {
+                pinButton.layer.maskedCorners = [ .layerMinXMaxYCorner]
+                buyButton.layer.maskedCorners = [ .layerMaxXMaxYCorner]
+            }
+        }
+
         ThemeService.shared.addThemeable(themable: self)
         
         populateText()
diff --git a/HabitRPG/TableViewDataSources/ShopCollectionViewDataSource.swift b/HabitRPG/TableViewDataSources/ShopCollectionViewDataSource.swift
index c92277dbb..6ed10f95d 100644
--- a/HabitRPG/TableViewDataSources/ShopCollectionViewDataSource.swift
+++ b/HabitRPG/TableViewDataSources/ShopCollectionViewDataSource.swift
@@ -255,6 +255,7 @@ class ShopCollectionViewDataSource: BaseReactiveCollectionViewDataSource<InAppRe
             if !hasGearSection() {
                 let cell = collectionView.dequeueReusableCell(withReuseIdentifier: "EmptyGearCell", for: indexPath)
                 (cell.viewWithTag(1) as? UILabel)?.text = L10n.Shops.purchasedAllGear
+                cell.viewWithTag(2)?.backgroundColor = ThemeService.shared.theme.windowBackgroundColor
                 return cell
             }
         }
diff --git a/HabitRPG/UI/Social/Tavern/TavernDetailViewController.swift b/HabitRPG/UI/Social/Tavern/TavernDetailViewController.swift
index ae160bfb7..da2e38f5a 100644
--- a/HabitRPG/UI/Social/Tavern/TavernDetailViewController.swift
+++ b/HabitRPG/UI/Social/Tavern/TavernDetailViewController.swift
@@ -14,7 +14,10 @@ class TavernDetailViewController: GroupDetailViewController {
     
     @IBOutlet weak var tavernHeaderView: NPCBannerView!
     
-    @IBOutlet weak var innButton: UIButton!
+    @IBOutlet weak var innButton: HabiticaButton!
+    @IBOutlet weak var guidelinesButton: UIButton!
+    @IBOutlet weak var faqButton: UIButton!
+    @IBOutlet weak var reportButton: UIButton!
     @IBOutlet weak var worldBossStackView: CollapsibleStackView!
     @IBOutlet weak var innStackView: CollapsibleStackView!
     @IBOutlet weak var guidelinesStackView: CollapsibleStackView!
@@ -83,7 +86,14 @@ class TavernDetailViewController: GroupDetailViewController {
     
     override func populateText() {
         worldBossTitleView.text = L10n.WorldBoss.worldBoss
-        
+    }
+    
+    override func applyTheme(theme: Theme) {
+        super.applyTheme(theme: theme)
+        innButton.buttonColor = theme.warningColor
+        guidelinesButton.backgroundColor = theme.offsetBackgroundColor
+        faqButton.backgroundColor = theme.offsetBackgroundColor
+        reportButton.backgroundColor = theme.offsetBackgroundColor
     }
     
     override func viewWillAppear(_ animated: Bool) {
diff --git a/HabitRPG/UI/Social/UserProfileViewController.swift b/HabitRPG/UI/Social/UserProfileViewController.swift
index df02f7066..19a1a24ca 100644
--- a/HabitRPG/UI/Social/UserProfileViewController.swift
+++ b/HabitRPG/UI/Social/UserProfileViewController.swift
@@ -212,9 +212,11 @@ class UserProfileViewController: BaseTableViewController {
         
         let healthLabel = cell.viewWithTag(2) as? HRPGLabeledProgressBar
         if ThemeService.shared.theme.isDark {
-            healthLabel?.color = UIColor.red50()
+            healthLabel?.color = UIColor.red50().withAlphaComponent(0.75)
+            healthLabel?.iconView.alpha = 0.8
         } else {
             healthLabel?.color = UIColor.red100()
+            healthLabel?.iconView.alpha = 1.0
         }
         healthLabel?.icon = HabiticaIcons.imageOfHeartLightBg
         healthLabel?.type = L10n.health
@@ -223,9 +225,11 @@ class UserProfileViewController: BaseTableViewController {
         
         let experienceLabel = cell.viewWithTag(3) as? HRPGLabeledProgressBar
         if ThemeService.shared.theme.isDark {
-            experienceLabel?.color = UIColor.yellow50()
+            experienceLabel?.color = UIColor.yellow50().withAlphaComponent(0.75)
+            experienceLabel?.iconView.alpha = 0.8
         } else {
             experienceLabel?.color = UIColor.yellow100()
+            experienceLabel?.iconView.alpha = 1.0
         }
         experienceLabel?.icon = HabiticaIcons.imageOfExperience
         experienceLabel?.type = L10n.experience
@@ -235,9 +239,11 @@ class UserProfileViewController: BaseTableViewController {
         let magicLabel = cell.viewWithTag(4) as? HRPGLabeledProgressBar
         if stats.level >= 10 {
             if ThemeService.shared.theme.isDark {
-                magicLabel?.color = UIColor.blue50()
+                magicLabel?.color = UIColor.blue50().withAlphaComponent(0.75)
+                magicLabel?.iconView.alpha = 0.8
             } else {
                 magicLabel?.color = UIColor.blue100()
+                magicLabel?.iconView.alpha = 1.0
             }
             magicLabel?.icon = HabiticaIcons.imageOfMagic
             magicLabel?.type = L10n.mana
diff --git a/HabitRPG/UIColor.Habitica.m b/HabitRPG/UIColor.Habitica.m
index 848c3c0a6..c15652e3f 100644
--- a/HabitRPG/UIColor.Habitica.m
+++ b/HabitRPG/UIColor.Habitica.m
@@ -249,7 +249,11 @@ + (UIColor *)contributorColorFor:(NSInteger)level {
     } else if (level == 8) {
         return [UIColor tierModColor];
     } else if (level == 9) {
-        return [UIColor purple300];
+        if ([ObjcThemeWrapper themeIsDark]) {
+            return [UIColor purple400];
+        } else {
+            return [UIColor purple300];
+        }
     }
     return [ObjcThemeWrapper primaryTextColor];
 }
diff --git a/HabitRPG/Utilities/Theme Engine/Theme.swift b/HabitRPG/Utilities/Theme Engine/Theme.swift
index f68bb8ab1..58b344f0a 100644
--- a/HabitRPG/Utilities/Theme Engine/Theme.swift	
+++ b/HabitRPG/Utilities/Theme Engine/Theme.swift	
@@ -33,6 +33,7 @@ public protocol Theme {
     var badgeColor: UIColor { get }
     var successColor: UIColor { get }
     var errorColor: UIColor { get }
+    var warningColor: UIColor { get }
     var taskOverlayTint: UIColor { get }
 }
 
@@ -65,6 +66,7 @@ extension Theme {
     public var badgeColor: UIColor { return tintColor }
     public var successColor: UIColor { return UIColor.green100() }
     public var errorColor: UIColor { return UIColor.red100() }
+    public var warningColor: UIColor { return UIColor.yellow100() }
     public var taskOverlayTint: UIColor { return UIColor.white.withAlphaComponent(0) }
     
     public func applyContentBackgroundColor(views: [UIView]) {
@@ -80,8 +82,9 @@ extension Theme {
 
 extension DarkTheme {
     public var isDark: Bool { return true }
-    public var successColor: UIColor { return UIColor.green10() }
+    public var successColor: UIColor { return UIColor.green10().withAlphaComponent(0.7) }
     public var errorColor: UIColor { return UIColor.red10() }
+    public var warningColor: UIColor { return UIColor.yellow10().withAlphaComponent(0.7) }
 }
 
 @objc
@@ -96,5 +99,6 @@ class ObjcThemeWrapper: NSObject {
     @objc public static var primaryTextColor: UIColor { return ThemeService.shared.theme.primaryTextColor }
     @objc public static var secondaryTextColor: UIColor { return ThemeService.shared.theme.secondaryTextColor }
     @objc public static var dimmedTextColor: UIColor { return ThemeService.shared.theme.dimmedTextColor }
-    @objc public static var lightTextColor: UIColor { return ThemeService.shared.theme.lightTextColor}
+    @objc public static var lightTextColor: UIColor { return ThemeService.shared.theme.lightTextColor }
+    @objc public static var themeIsDark: Bool { return ThemeService.shared.theme.isDark }
 }
diff --git a/HabitRPG/Utilities/Theme Engine/Themes.swift b/HabitRPG/Utilities/Theme Engine/Themes.swift
index 87d8c5014..8b94edb27 100644
--- a/HabitRPG/Utilities/Theme Engine/Themes.swift	
+++ b/HabitRPG/Utilities/Theme Engine/Themes.swift	
@@ -93,8 +93,8 @@ public struct DarkNightTheme: DarkTheme {
     public var contentBackgroundColor: UIColor { return UIColor.blackPurple50() }
     public var offsetBackgroundColor: UIColor { return UIColor.blackPurple100() }
     public var lightlyTintedBackgroundColor: UIColor { return UIColor.gray300() }
-    public var backgroundTintColor: UIColor { return UIColor.gray400() }
-    public var tintColor: UIColor { return UIColor.gray600() }
+    public var backgroundTintColor: UIColor { return UIColor.gray300() }
+    public var tintColor: UIColor { return UIColor.gray500() }
     public var primaryTextColor: UIColor { return UIColor.gray700() }
     public var secondaryTextColor: UIColor { return UIColor.gray600() }
     public var ternaryTextColor: UIColor { return UIColor.gray500() }
@@ -102,10 +102,10 @@ public struct DarkNightTheme: DarkTheme {
     public var separatorColor: UIColor { return UIColor.gray10() }
     public var tableviewSeparatorColor: UIColor { return UIColor.gray100() }
     public var navbarHiddenColor: UIColor { return contentBackgroundColor }
-    public var dimmedColor: UIColor { return UIColor.gray200() }
+    public var dimmedColor: UIColor { return UIColor.gray100() }
     public var dimmBackgroundColor: UIColor { return UIColor.gray50() }
     public var badgeColor: UIColor { return UIColor.gray200() }
-    public var taskOverlayTint: UIColor { return UIColor.blackPurple50().withAlphaComponent(0.15) }
+    public var taskOverlayTint: UIColor { return UIColor.blackPurple50().withAlphaComponent(0.30) }
 }
 
 public struct TrueBlackTheme: DarkTheme {
@@ -125,5 +125,5 @@ public struct TrueBlackTheme: DarkTheme {
     public var dimmedColor: UIColor { return UIColor.gray200() }
     public var dimmBackgroundColor: UIColor { return UIColor.gray10() }
     public var badgeColor: UIColor { return UIColor.gray100() }
-    public var taskOverlayTint: UIColor { return UIColor.black.withAlphaComponent(0.15) }
+    public var taskOverlayTint: UIColor { return UIColor.black.withAlphaComponent(0.30) }
 }
diff --git a/HabitRPG/Views/QuestDetailView.swift b/HabitRPG/Views/QuestDetailView.swift
index 45a08d339..63cf283df 100644
--- a/HabitRPG/Views/QuestDetailView.swift
+++ b/HabitRPG/Views/QuestDetailView.swift
@@ -9,8 +9,9 @@
 import UIKit
 import Habitica_Models
 
-class QuestDetailView: UIView {
+class QuestDetailView: UIView, Themeable {
     @IBOutlet weak var questTypeLabel: UILabel!
+    @IBOutlet weak var rewardsLabel: UILabel!
     @IBOutlet weak var rewardsStackView: UIStackView!
     @IBOutlet weak var ownerRewardsLabel: UILabel!
     @IBOutlet weak var ownerRewardsStackView: UIStackView!
@@ -37,9 +38,7 @@ class QuestDetailView: UIView {
             
             addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "V:|-0-[view]-0-|", options: NSLayoutConstraint.FormatOptions(rawValue: 0), metrics: nil, views: ["view": view]))
             addConstraints(NSLayoutConstraint.constraints(withVisualFormat: "H:|-0-[view]-0-|", options: NSLayoutConstraint.FormatOptions(rawValue: 0), metrics: nil, views: ["view": view]))
-            
-            let theme = ThemeService.shared.theme
-            view.backgroundColor = theme.contentBackgroundColor
+            ThemeService.shared.addThemeable(themable: self)
             
             setNeedsUpdateConstraints()
             updateConstraints()
@@ -48,6 +47,12 @@ class QuestDetailView: UIView {
         }
     }
     
+    func applyTheme(theme: Theme) {
+        rewardsLabel.textColor = theme.secondaryTextColor
+        ownerRewardsLabel.textColor = theme.secondaryTextColor
+        questTypeLabel.textColor = theme.secondaryTextColor
+    }
+    
     func configure(quest: QuestProtocol) {
         if quest.boss?.health ?? 0 > 0 {
             questTypeLabel.text = L10n.Quests.bossBattle
@@ -82,11 +87,13 @@ class QuestDetailView: UIView {
     
     func makeRewardView(title: String?, imageName: String) -> UIView {
         if let view = UIView.fromNib(nibName: "QuestDetailRewardView") {
+            view.backgroundColor = ThemeService.shared.theme.windowBackgroundColor
             if let imageView = view.viewWithTag(1) as? UIImageView {
                 imageView.setImagewith(name: imageName)
             }
             if let label = view.viewWithTag(2) as? UILabel {
                 label.text = title
+                label.textColor = ThemeService.shared.theme.primaryTextColor
             }
             return view
         }
@@ -95,11 +102,13 @@ class QuestDetailView: UIView {
     
     func makeRewardView(title: String?, image: UIImage) -> UIView {
         if let view = UIView.fromNib(nibName: "QuestDetailRewardView") {
+            view.backgroundColor = ThemeService.shared.theme.windowBackgroundColor
             if let imageView = view.viewWithTag(1) as? UIImageView {
                 imageView.image = image
             }
             if let label = view.viewWithTag(2) as? UILabel {
                 label.text = title
+                label.textColor = ThemeService.shared.theme.primaryTextColor
             }
             return view
         }
diff --git a/HabitRPG/Views/QuestDetailView.xib b/HabitRPG/Views/QuestDetailView.xib
index c518dafb7..a95c51a4d 100644
--- a/HabitRPG/Views/QuestDetailView.xib
+++ b/HabitRPG/Views/QuestDetailView.xib
@@ -1,11 +1,11 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="12121" systemVersion="16F73" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES">
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="14490.70" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES">
     <device id="retina4_7" orientation="portrait">
         <adaptation id="fullscreen"/>
     </device>
     <dependencies>
         <deployment identifier="iOS"/>
-        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="12089"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14490.49"/>
         <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
     </dependencies>
     <objects>
@@ -15,6 +15,7 @@
                 <outlet property="ownerRewardsStackView" destination="Imt-qe-XV9" id="JZa-qP-uRi"/>
                 <outlet property="questGoalView" destination="c4o-RZ-fmE" id="Wlh-y9-PBn"/>
                 <outlet property="questTypeLabel" destination="6kB-a3-bZU" id="XLH-tP-FCh"/>
+                <outlet property="rewardsLabel" destination="DgU-Oy-n2i" id="NXB-Bu-37p"/>
                 <outlet property="rewardsStackView" destination="fMK-ki-ck2" id="U5m-Fk-Jga"/>
             </connections>
         </placeholder>
@@ -34,7 +35,6 @@
                 </label>
                 <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="c4o-RZ-fmE" customClass="QuestGoalView" customModule="Habitica" customModuleProvider="target">
                     <rect key="frame" x="16" y="4" width="343" height="68"/>
-                    <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                     <constraints>
                         <constraint firstAttribute="height" constant="68" id="ZPe-61-5U5"/>
                     </constraints>
@@ -70,7 +70,6 @@
                     </constraints>
                 </stackView>
             </subviews>
-            <color key="backgroundColor" red="1" green="1" blue="1" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
             <constraints>
                 <constraint firstItem="6kB-a3-bZU" firstAttribute="top" secondItem="iN0-l3-epB" secondAttribute="top" id="5nO-or-JUR"/>
                 <constraint firstItem="fMK-ki-ck2" firstAttribute="leading" secondItem="iN0-l3-epB" secondAttribute="leading" constant="16" id="6SD-D4-w3f"/>
diff --git a/HabitRPG/Views/Quests/QuestGoalView.swift b/HabitRPG/Views/Quests/QuestGoalView.swift
index 1ee3d1cf8..0557db322 100644
--- a/HabitRPG/Views/Quests/QuestGoalView.swift
+++ b/HabitRPG/Views/Quests/QuestGoalView.swift
@@ -18,7 +18,8 @@ class QuestGoalView: UIView {
     @IBOutlet weak var difficultyImageView: UIImageView!
     @IBOutlet weak var rageMeterView: PaddedLabel!
     @IBOutlet weak var typeBackgroundView: UIView!
-
+    @IBOutlet weak var bottomView: UIView!
+    
     override init(frame: CGRect) {
         super.init(frame: CGRect(x: 0, y: 0, width: 154, height: 36))
         setupView()
@@ -53,19 +54,24 @@ class QuestGoalView: UIView {
     }
     
     func configure(quest: QuestProtocol) {
+        let theme = ThemeService.shared.theme
+        bottomView.backgroundColor = theme.windowBackgroundColor
+        difficultyLabel.textColor = theme.primaryTextColor
         if let bossHealth = quest.boss?.health, bossHealth > 0 {
             healthIcon.isHidden = false
             typeLabel.text = L10n.health
             goalDetailLabel.text = "\(bossHealth)"
-            //rageMeterView.isHidden = (quest.boss?.rage ?? 0) == 0
-            typeBackgroundView.backgroundColor = .red100()
+            rageMeterView.isHidden = (quest.boss?.rage?.value ?? 0) <= 0
+            rageMeterView.backgroundColor = theme.dimmedColor
+            rageMeterView.textColor = theme.secondaryTextColor
+            typeBackgroundView.backgroundColor = theme.errorColor
             difficultyImageView.image = HabiticaIcons.imageOfDifficultyStars(difficulty: CGFloat(quest.boss?.strength ?? 0))
         } else {
             healthIcon.isHidden = true
             typeLabel.text = L10n.collect
             goalDetailLabel.text = ""
             rageMeterView.isHidden = true
-            typeBackgroundView.backgroundColor = .green100()
+            typeBackgroundView.backgroundColor = theme.successColor
             difficultyImageView.image = HabiticaIcons.imageOfDifficultyStars(difficulty: 1)
         }
     }
diff --git a/HabitRPG/Views/Quests/QuestGoalView.xib b/HabitRPG/Views/Quests/QuestGoalView.xib
index dc6056a33..45b747b67 100644
--- a/HabitRPG/Views/Quests/QuestGoalView.xib
+++ b/HabitRPG/Views/Quests/QuestGoalView.xib
@@ -1,16 +1,17 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="14460.31" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES">
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="14490.70" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES">
     <device id="retina4_7" orientation="portrait">
         <adaptation id="fullscreen"/>
     </device>
     <dependencies>
         <deployment identifier="iOS"/>
-        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14460.20"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14490.49"/>
         <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
     </dependencies>
     <objects>
         <placeholder placeholderIdentifier="IBFilesOwner" id="-1" userLabel="File's Owner" customClass="QuestGoalView">
             <connections>
+                <outlet property="bottomView" destination="W80-bu-Apc" id="0ZI-s4-B4c"/>
                 <outlet property="difficultyImageView" destination="bAY-vY-nCp" id="ddz-tq-P2y"/>
                 <outlet property="difficultyLabel" destination="HDl-eR-Km6" id="Fm2-O7-3NQ"/>
                 <outlet property="goalDetailLabel" destination="BHt-Da-4LB" id="Lb3-TJ-AZp"/>
diff --git a/HabitRPG/Views/UserTopHeader.swift b/HabitRPG/Views/UserTopHeader.swift
index 3e848a48b..ca743501e 100644
--- a/HabitRPG/Views/UserTopHeader.swift
+++ b/HabitRPG/Views/UserTopHeader.swift
@@ -97,13 +97,21 @@ class UserTopHeader: UIView, Themeable {
         magicLabel.progressBar.barBackgroundColor = theme.contentBackgroundColorDimmed
         
         if theme.isDark {
-            healthLabel.color = UIColor.red50()
-            experienceLabel.color = UIColor.yellow50()
-            magicLabel.color = UIColor.blue50()
+            healthLabel.color = UIColor.red50().withAlphaComponent(0.75)
+            experienceLabel.color = UIColor.yellow50().withAlphaComponent(0.75)
+            magicLabel.color = UIColor.blue50().withAlphaComponent(0.75)
+            healthLabel.iconView.alpha = 0.8
+            experienceLabel.iconView.alpha = 0.8
+            magicLabel.iconView.alpha = 0.8
+            classImageView.alpha = 0.8
         } else {
             healthLabel.color = UIColor.red100()
             experienceLabel.color = UIColor.yellow100()
             magicLabel.color = UIColor.blue100()
+            healthLabel.iconView.alpha = 1.0
+            experienceLabel.iconView.alpha = 1.0
+            magicLabel.iconView.alpha = 1.0
+            classImageView.alpha = 1.0
         }
     }
     
diff --git a/Habitica Snapshots/Info.plist b/Habitica Snapshots/Info.plist
index 550476df6..1cc359782 100644
--- a/Habitica Snapshots/Info.plist	
+++ b/Habitica Snapshots/Info.plist	
@@ -17,6 +17,6 @@
 	<key>CFBundleShortVersionString</key>
 	<string>1.0</string>
 	<key>CFBundleVersion</key>
-	<string>389</string>
+	<string>391</string>
 </dict>
 </plist>
diff --git a/Habitica.xcodeproj/project.pbxproj b/Habitica.xcodeproj/project.pbxproj
index 699337965..d25f15966 100644
--- a/Habitica.xcodeproj/project.pbxproj
+++ b/Habitica.xcodeproj/project.pbxproj
@@ -4172,7 +4172,7 @@
 				CODE_SIGN_ENTITLEMENTS = Habitica.entitlements;
 				CODE_SIGN_IDENTITY = "iPhone Developer";
 				"CODE_SIGN_IDENTITY[sdk=iphoneos*]" = "iPhone Developer";
-				CURRENT_PROJECT_VERSION = 389;
+				CURRENT_PROJECT_VERSION = 391;
 				DEVELOPMENT_TEAM = 9Q9SMRMCNN;
 				ENABLE_BITCODE = NO;
 				EXCLUDED_SOURCE_FILE_NAMES = "";
@@ -4264,7 +4264,7 @@
 				CODE_SIGN_ENTITLEMENTS = Habitica.entitlements;
 				CODE_SIGN_IDENTITY = "iPhone Developer";
 				"CODE_SIGN_IDENTITY[sdk=iphoneos*]" = "iPhone Developer";
-				CURRENT_PROJECT_VERSION = 389;
+				CURRENT_PROJECT_VERSION = 391;
 				DEVELOPMENT_TEAM = 9Q9SMRMCNN;
 				ENABLE_BITCODE = NO;
 				EXCLUDED_SOURCE_FILE_NAMES = "FLEX*";
diff --git a/HabiticaTests/Info.plist b/HabiticaTests/Info.plist
index 439e1cce9..edb078253 100644
--- a/HabiticaTests/Info.plist
+++ b/HabiticaTests/Info.plist
@@ -19,6 +19,6 @@
 	<key>CFBundleSignature</key>
 	<string>????</string>
 	<key>CFBundleVersion</key>
-	<string>389</string>
+	<string>391</string>
 </dict>
 </plist>
diff --git a/fastlane/README.md b/fastlane/README.md
index d5dbab81e..ab2a13560 100644
--- a/fastlane/README.md
+++ b/fastlane/README.md
@@ -21,9 +21,9 @@ or alternatively using `brew cask install fastlane`
 fastlane ios test
 ```
 Runs all the tests
-### ios snap
+### ios screenshots
 ```
-fastlane ios snap
+fastlane ios screenshots
 ```
 
 ### ios beta
