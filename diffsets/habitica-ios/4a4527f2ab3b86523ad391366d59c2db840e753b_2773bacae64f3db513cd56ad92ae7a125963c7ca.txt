diff --git a/HabitRPG/AppDelegate.swift b/HabitRPG/AppDelegate.swift
index 560bfb61e..8bb127e56 100644
--- a/HabitRPG/AppDelegate.swift
+++ b/HabitRPG/AppDelegate.swift
@@ -55,7 +55,6 @@ class HabiticaAppDelegate: NSObject, MessagingDelegate, UNUserNotificationCenter
     @objc
     func setupPopups() {
         let appearance = PopupDialogOverlayView.appearance()
-        appearance.color = UIColor.purple50()
         appearance.opacity = 0.6
         appearance.blurEnabled = false
         let dialogAppearance = PopupDialogDefaultView.appearance()
diff --git a/HabitRPG/Images.xcassets/filters.imageset/Contents.json b/HabitRPG/Images.xcassets/filters.imageset/Contents.json
index 0b919b66d..ecf38455a 100644
--- a/HabitRPG/Images.xcassets/filters.imageset/Contents.json
+++ b/HabitRPG/Images.xcassets/filters.imageset/Contents.json
@@ -19,5 +19,8 @@
   "info" : {
     "version" : 1,
     "author" : "xcode"
+  },
+  "properties" : {
+    "template-rendering-intent" : "template"
   }
 }
\ No newline at end of file
diff --git a/HabitRPG/Storyboards/Base.lproj/Social.storyboard b/HabitRPG/Storyboards/Base.lproj/Social.storyboard
index b9ccfae31..bf2599f9b 100644
--- a/HabitRPG/Storyboards/Base.lproj/Social.storyboard
+++ b/HabitRPG/Storyboards/Base.lproj/Social.storyboard
@@ -374,19 +374,19 @@
                                         <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="genericGamma22GrayColorSpace"/>
                                     </view>
                                     <stackView opaque="NO" contentMode="scaleToFill" verticalHuggingPriority="1000" verticalCompressionResistancePriority="1000" misplaced="YES" axis="vertical" distribution="fillProportionally" spacing="28" translatesAutoresizingMaskIntoConstraints="NO" id="Q0X-P7-X28">
-                                        <rect key="frame" x="15" y="16" width="345" height="187754.5"/>
+                                        <rect key="frame" x="15" y="16" width="345" height="20168"/>
                                         <subviews>
                                             <stackView opaque="NO" contentMode="scaleToFill" axis="vertical" spacing="8" translatesAutoresizingMaskIntoConstraints="NO" id="vms-Gl-8Ff">
-                                                <rect key="frame" x="0.0" y="0.0" width="345" height="93989.5"/>
+                                                <rect key="frame" x="0.0" y="0.0" width="345" height="10071"/>
                                                 <subviews>
                                                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" textAlignment="natural" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="Hdi-g1-MiM">
-                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="93918.5"/>
+                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="10000"/>
                                                         <fontDescription key="fontDescription" type="system" pointSize="15"/>
                                                         <color key="textColor" red="0.53023332359999997" green="0.50720638039999999" blue="0.56472396849999995" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
                                                         <nil key="highlightedColor"/>
                                                     </label>
                                                     <stackView opaque="NO" contentMode="scaleToFill" spacing="20" translatesAutoresizingMaskIntoConstraints="NO" id="V5p-do-14l">
-                                                        <rect key="frame" x="0.0" y="93926.5" width="345" height="63"/>
+                                                        <rect key="frame" x="0.0" y="10008" width="345" height="63"/>
                                                         <subviews>
                                                             <imageView userInteractionEnabled="NO" contentMode="scaleAspectFit" horizontalHuggingPriority="251" verticalHuggingPriority="251" translatesAutoresizingMaskIntoConstraints="NO" id="maA-rD-Xo6">
                                                                 <rect key="frame" x="0.0" y="0.0" width="63" height="63"/>
@@ -453,16 +453,16 @@
                                                 </subviews>
                                             </stackView>
                                             <stackView opaque="NO" contentMode="scaleToFill" axis="vertical" spacing="8" translatesAutoresizingMaskIntoConstraints="NO" id="UPz-xj-UTk">
-                                                <rect key="frame" x="0.0" y="94017.5" width="345" height="93709"/>
+                                                <rect key="frame" x="0.0" y="10099" width="345" height="10041"/>
                                                 <subviews>
                                                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" textAlignment="natural" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="PvU-aP-uYa">
-                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="93668"/>
+                                                        <rect key="frame" x="0.0" y="0.0" width="345" height="10000"/>
                                                         <fontDescription key="fontDescription" type="system" pointSize="15"/>
                                                         <color key="textColor" red="0.53023332359999997" green="0.50720638039999999" blue="0.56472396849999995" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
                                                         <nil key="highlightedColor"/>
                                                     </label>
                                                     <textView clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" verticalHuggingPriority="1000" verticalCompressionResistancePriority="1000" scrollEnabled="NO" editable="NO" textAlignment="natural" selectable="NO" translatesAutoresizingMaskIntoConstraints="NO" id="xdN-Nt-8pH">
-                                                        <rect key="frame" x="0.0" y="93676" width="345" height="33"/>
+                                                        <rect key="frame" x="0.0" y="10008" width="345" height="33"/>
                                                         <constraints>
                                                             <constraint firstAttribute="height" priority="500" constant="100" id="dum-SZ-kcm"/>
                                                         </constraints>
@@ -473,7 +473,7 @@
                                                 </subviews>
                                             </stackView>
                                             <stackView opaque="NO" contentMode="scaleToFill" axis="vertical" spacing="8" translatesAutoresizingMaskIntoConstraints="NO" id="03F-b3-D6O">
-                                                <rect key="frame" x="0.0" y="187754.5" width="345" height="0.0"/>
+                                                <rect key="frame" x="0.0" y="20168" width="345" height="0.0"/>
                                                 <subviews>
                                                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="" textAlignment="natural" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="q4z-83-kc2">
                                                         <rect key="frame" x="0.0" y="0.0" width="345" height="0.0"/>
@@ -489,7 +489,7 @@
                                         </constraints>
                                     </stackView>
                                     <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="gLh-F8-lA2">
-                                        <rect key="frame" x="0.0" y="187785.5" width="375" height="70"/>
+                                        <rect key="frame" x="0.0" y="20199" width="375" height="70"/>
                                         <subviews>
                                             <stackView opaque="NO" contentMode="scaleToFill" distribution="fillEqually" spacing="15" translatesAutoresizingMaskIntoConstraints="NO" id="Tp5-9p-PEL">
                                                 <rect key="frame" x="16" y="18" width="343" height="36"/>
@@ -807,7 +807,7 @@
                     <tableView key="view" clipsSubviews="YES" contentMode="scaleToFill" alwaysBounceVertical="YES" dataMode="prototypes" style="plain" separatorStyle="default" allowsSelection="NO" rowHeight="-1" estimatedRowHeight="-1" sectionHeaderHeight="28" sectionFooterHeight="28" id="mSs-Sh-idc">
                         <rect key="frame" x="0.0" y="0.0" width="375" height="647"/>
                         <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
-                        <color key="backgroundColor" red="0.97647058823529409" green="0.97647058823529409" blue="0.97647058823529409" alpha="1" colorSpace="calibratedRGB"/>
+                        <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="genericGamma22GrayColorSpace"/>
                         <inset key="separatorInset" minX="0.0" minY="0.0" maxX="0.0" maxY="0.0"/>
                         <connections>
                             <outlet property="dataSource" destination="LJL-4h-PRX" id="1ig-QN-NYm"/>
@@ -1340,7 +1340,7 @@
                     <tableView key="view" clipsSubviews="YES" contentMode="scaleToFill" alwaysBounceVertical="YES" dataMode="prototypes" style="plain" separatorStyle="default" rowHeight="86" sectionHeaderHeight="28" sectionFooterHeight="28" id="SWx-Y1-cyG">
                         <rect key="frame" x="0.0" y="0.0" width="375" height="647"/>
                         <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
-                        <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
+                        <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="genericGamma22GrayColorSpace"/>
                         <connections>
                             <outlet property="dataSource" destination="BE2-xn-Wwl" id="CDz-2e-dyy"/>
                             <outlet property="delegate" destination="BE2-xn-Wwl" id="5wQ-dI-zJ2"/>
@@ -1971,7 +1971,7 @@
                         <viewControllerLayoutGuide type="bottom" id="Mt2-dF-B4p"/>
                     </layoutGuides>
                     <view key="view" contentMode="scaleToFill" id="Czc-6v-sm8">
-                        <rect key="frame" x="0.0" y="0.0" width="375" height="647"/>
+                        <rect key="frame" x="0.0" y="0.0" width="375" height="667"/>
                         <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                         <subviews>
                             <scrollView clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="clS-8V-xVt">
diff --git a/HabitRPG/TableViewController/MultiModelTableViewController.swift b/HabitRPG/TableViewController/MultiModelTableViewController.swift
index f670a7c7b..6eff07693 100644
--- a/HabitRPG/TableViewController/MultiModelTableViewController.swift
+++ b/HabitRPG/TableViewController/MultiModelTableViewController.swift
@@ -8,7 +8,7 @@
 
 import UIKit
 
-class MultiModelTableViewController: HRPGBaseViewController {
+class MultiModelTableViewController: BaseTableViewController {
     let dataSource: MultiModelDataSource = MultiModelDataSource()
 
     override func viewDidLoad() {
diff --git a/HabitRPG/TableviewCells/Challenges/ChallengeCategoriesTableViewCell.swift b/HabitRPG/TableviewCells/Challenges/ChallengeCategoriesTableViewCell.swift
index ebd245017..4bb833608 100644
--- a/HabitRPG/TableviewCells/Challenges/ChallengeCategoriesTableViewCell.swift
+++ b/HabitRPG/TableviewCells/Challenges/ChallengeCategoriesTableViewCell.swift
@@ -51,8 +51,8 @@ class ChallengeCategoriesTableViewCell: ResizableTableViewCell, ChallengeConfigu
     func createCategoryLabel(_ category: String) -> UILabel {
         let label = emptyTagLabel()
         label.text = "  \(category)  "
-        label.textColor = UIColor.gray200()
-        label.backgroundColor = UIColor.gray600()
+        label.textColor = ThemeService.shared.theme.ternaryTextColor
+        label.backgroundColor = ThemeService.shared.theme.offsetBackgroundColor
         label.translatesAutoresizingMaskIntoConstraints = false
         label.sizeToFit()
         return label
diff --git a/HabitRPG/TableviewCells/Challenges/ChallengeDescriptionTableViewCell.swift b/HabitRPG/TableviewCells/Challenges/ChallengeDescriptionTableViewCell.swift
index 2b45e7cff..7e74aa3a6 100644
--- a/HabitRPG/TableviewCells/Challenges/ChallengeDescriptionTableViewCell.swift
+++ b/HabitRPG/TableviewCells/Challenges/ChallengeDescriptionTableViewCell.swift
@@ -27,7 +27,6 @@ class ChallengeDescriptionTableViewCell: ResizableTableViewCell, ChallengeConfig
     func configure(with challenge: ChallengeProtocol) {
         if let notes = challenge.notes {
             descriptionLabel.attributedText = try? Down(markdownString: notes.unicodeEmoji).toHabiticaAttributedString(baseSize: descriptionLabel.font.pointSize)
-            descriptionLabel.textColor = UIColor.gray10()
         }
     }
     
diff --git a/HabitRPG/TableviewCells/Challenges/ChallengeDetailInfoTableViewCell.swift b/HabitRPG/TableviewCells/Challenges/ChallengeDetailInfoTableViewCell.swift
index 297122667..a5c50523e 100644
--- a/HabitRPG/TableviewCells/Challenges/ChallengeDetailInfoTableViewCell.swift
+++ b/HabitRPG/TableviewCells/Challenges/ChallengeDetailInfoTableViewCell.swift
@@ -15,6 +15,8 @@ class ChallengeDetailInfoTableViewCell: UITableViewCell, ChallengeConfigurable {
     @IBOutlet weak var rewardCurrencyCountView: HRPGCurrencyCountView!
     @IBOutlet weak var participantsLabel: UILabel!
     @IBOutlet weak var tagHolderView: UIView!
+    @IBOutlet weak var participantsWrapper: UIView!
+    @IBOutlet weak var prizeWrapper: UIView!
     
     override func awakeFromNib() {
         super.awakeFromNib()
@@ -29,6 +31,11 @@ class ChallengeDetailInfoTableViewCell: UITableViewCell, ChallengeConfigurable {
         
         tagHolderView.translatesAutoresizingMaskIntoConstraints = false
         addTags(for: challenge)
+        
+        let theme = ThemeService.shared.theme
+        contentView.backgroundColor = theme.windowBackgroundColor
+        participantsWrapper.backgroundColor = theme.contentBackgroundColor
+        prizeWrapper.backgroundColor = theme.contentBackgroundColor
     }
     
     func addTags(for challenge: ChallengeProtocol) {
@@ -107,7 +114,7 @@ class ChallengeDetailInfoTableViewCell: UITableViewCell, ChallengeConfigurable {
         let label = emptyTagLabel()
         label.text = "  \(shortName.unicodeEmoji)  "
         label.textColor = UIColor.gray200()
-        label.backgroundColor = UIColor.gray600()
+        label.backgroundColor = ThemeService.shared.theme.offsetBackgroundColor
         
         return label
     }
diff --git a/HabitRPG/TableviewCells/Challenges/ChallengeDetailInfoTableViewCell.xib b/HabitRPG/TableviewCells/Challenges/ChallengeDetailInfoTableViewCell.xib
index e343d29c3..4a4c260f4 100644
--- a/HabitRPG/TableviewCells/Challenges/ChallengeDetailInfoTableViewCell.xib
+++ b/HabitRPG/TableviewCells/Challenges/ChallengeDetailInfoTableViewCell.xib
@@ -1,11 +1,11 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="13529" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" useSafeAreas="YES" colorMatched="YES">
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="14490.70" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" useSafeAreas="YES" colorMatched="YES">
     <device id="retina4_7" orientation="portrait">
         <adaptation id="fullscreen"/>
     </device>
     <dependencies>
         <deployment identifier="iOS"/>
-        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="13527"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14490.49"/>
         <capability name="Safe area layout guides" minToolsVersion="9.0"/>
         <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
     </dependencies>
@@ -20,7 +20,7 @@
                 <autoresizingMask key="autoresizingMask"/>
                 <subviews>
                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="Challenge Title" textAlignment="center" lineBreakMode="tailTruncation" numberOfLines="4" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="4WQ-0g-PAH">
-                        <rect key="frame" x="16" y="8" width="288" height="21"/>
+                        <rect key="frame" x="16" y="8" width="288" height="20.5"/>
                         <fontDescription key="fontDescription" type="system" weight="semibold" pointSize="17"/>
                         <color key="textColor" red="0.30588235294117649" green="0.29019607843137252" blue="0.3411764705882353" alpha="1" colorSpace="calibratedRGB"/>
                         <nil key="highlightedColor"/>
@@ -41,7 +41,7 @@
                                 <nil key="highlightedColor"/>
                             </label>
                             <imageView userInteractionEnabled="NO" contentMode="scaleToFill" horizontalHuggingPriority="251" verticalHuggingPriority="251" image="participants_details" translatesAutoresizingMaskIntoConstraints="NO" id="SXe-v0-yLB">
-                                <rect key="frame" x="35" y="11" width="24" height="24"/>
+                                <rect key="frame" x="35" y="11.5" width="24" height="24"/>
                             </imageView>
                         </subviews>
                         <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
@@ -65,7 +65,6 @@
                         <subviews>
                             <view contentMode="scaleToFill" ambiguous="YES" translatesAutoresizingMaskIntoConstraints="NO" id="JNN-zz-1gk" customClass="HRPGCurrencyCountView" customModule="Habitica" customModuleProvider="target">
                                 <rect key="frame" x="8" y="8" width="128" height="33"/>
-                                <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                             </view>
                             <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" misplaced="YES" text="Challenge Prize" textAlignment="center" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="VPE-JY-daU">
                                 <rect key="frame" x="28" y="49" width="89" height="21"/>
@@ -88,7 +87,7 @@
                         </userDefinedRuntimeAttributes>
                     </view>
                     <label hidden="YES" opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="Ends on " textAlignment="natural" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="dcc-fD-hHj">
-                        <rect key="frame" x="135.5" y="37" width="49" height="14.5"/>
+                        <rect key="frame" x="135.5" y="36.5" width="49" height="14.5"/>
                         <fontDescription key="fontDescription" type="system" pointSize="12"/>
                         <color key="textColor" red="0.52941176469999995" green="0.50588235290000005" blue="0.56470588239999997" alpha="1" colorSpace="calibratedRGB"/>
                         <nil key="highlightedColor"/>
@@ -97,7 +96,7 @@
                         <rect key="frame" x="107.5" y="34" width="20" height="20"/>
                     </imageView>
                     <view contentMode="scaleToFill" ambiguous="YES" translatesAutoresizingMaskIntoConstraints="NO" id="9o1-yw-Y5u">
-                        <rect key="frame" x="16" y="59.5" width="288" height="69.5"/>
+                        <rect key="frame" x="16" y="59" width="288" height="70"/>
                         <color key="backgroundColor" white="0.0" alpha="0.0" colorSpace="custom" customColorSpace="genericGamma22GrayColorSpace"/>
                     </view>
                 </subviews>
@@ -127,6 +126,8 @@
                 <outlet property="challengeTitleLabel" destination="4WQ-0g-PAH" id="maJ-Em-EAS"/>
                 <outlet property="expirationLabel" destination="dcc-fD-hHj" id="3GA-dk-GdZ"/>
                 <outlet property="participantsLabel" destination="UKx-BH-FaZ" id="yuj-3H-SWG"/>
+                <outlet property="participantsWrapper" destination="z75-Sz-mPV" id="6cw-Xr-ECb"/>
+                <outlet property="prizeWrapper" destination="y1q-zC-HVD" id="iJC-fE-6ST"/>
                 <outlet property="rewardCurrencyCountView" destination="JNN-zz-1gk" id="47Z-gH-N7B"/>
                 <outlet property="tagHolderView" destination="9o1-yw-Y5u" id="Z1t-8j-faI"/>
             </connections>
diff --git a/HabitRPG/TableviewCells/Challenges/ChallengeTableViewCell.xib b/HabitRPG/TableviewCells/Challenges/ChallengeTableViewCell.xib
index 67a69a513..f437bffb0 100644
--- a/HabitRPG/TableviewCells/Challenges/ChallengeTableViewCell.xib
+++ b/HabitRPG/TableviewCells/Challenges/ChallengeTableViewCell.xib
@@ -1,12 +1,11 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="14109" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" useSafeAreas="YES" colorMatched="YES">
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="14490.70" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" useSafeAreas="YES" colorMatched="YES">
     <device id="retina4_7" orientation="portrait">
         <adaptation id="fullscreen"/>
     </device>
     <dependencies>
         <deployment identifier="iOS"/>
-        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14088"/>
-        <capability name="Constraints to layout margins" minToolsVersion="6.0"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14490.49"/>
         <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
     </dependencies>
     <objects>
@@ -26,7 +25,7 @@
                         </constraints>
                     </imageView>
                     <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="10" textAlignment="center" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="dwk-Uu-v8M">
-                        <rect key="frame" x="4" y="46" width="58" height="21"/>
+                        <rect key="frame" x="4" y="46.5" width="58" height="21"/>
                         <constraints>
                             <constraint firstAttribute="width" constant="58" id="auV-oQ-byq"/>
                             <constraint firstAttribute="height" constant="21" id="pOC-Qy-Bhc"/>
@@ -36,10 +35,10 @@
                         <nil key="highlightedColor"/>
                     </label>
                     <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="ZOg-jY-5Vr">
-                        <rect key="frame" x="66" y="19" width="719" height="48"/>
+                        <rect key="frame" x="66" y="19" width="812" height="48"/>
                         <subviews>
                             <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="1000" verticalCompressionResistancePriority="1000" ambiguous="YES" text="" textAlignment="natural" lineBreakMode="tailTruncation" numberOfLines="0" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="3Pf-Wi-0Gq">
-                                <rect key="frame" x="0.0" y="0.0" width="719" height="52"/>
+                                <rect key="frame" x="0.0" y="0.0" width="812" height="52"/>
                                 <constraints>
                                     <constraint firstAttribute="height" priority="500" constant="21" id="Gt2-Lb-tf9"/>
                                 </constraints>
@@ -48,7 +47,7 @@
                                 <nil key="highlightedColor"/>
                             </label>
                             <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="1000" verticalCompressionResistancePriority="1000" ambiguous="YES" text="" textAlignment="natural" lineBreakMode="tailTruncation" numberOfLines="0" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="F3S-xl-CMk">
-                                <rect key="frame" x="0.0" y="56" width="719" height="0.0"/>
+                                <rect key="frame" x="0.0" y="56" width="812" height="0.0"/>
                                 <constraints>
                                     <constraint firstAttribute="height" priority="500" constant="21" id="jIl-VG-yDl"/>
                                 </constraints>
@@ -150,7 +149,6 @@
                                 </constraints>
                             </stackView>
                         </subviews>
-                        <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                         <constraints>
                             <constraint firstAttribute="trailing" relation="greaterThanOrEqual" secondItem="obq-qJ-T3a" secondAttribute="trailing" id="2VK-1S-qhO"/>
                             <constraint firstAttribute="trailing" secondItem="F3S-xl-CMk" secondAttribute="trailing" id="2sb-tq-cAx"/>
diff --git a/HabitRPG/TableviewCells/Challenges/ChallengeTableViewHeaderView.swift b/HabitRPG/TableviewCells/Challenges/ChallengeTableViewHeaderView.swift
index 1ac86fe66..94d2d203d 100644
--- a/HabitRPG/TableviewCells/Challenges/ChallengeTableViewHeaderView.swift
+++ b/HabitRPG/TableviewCells/Challenges/ChallengeTableViewHeaderView.swift
@@ -17,12 +17,12 @@ class ChallengeTableViewHeaderView: UITableViewHeaderFooterView {
     }
     
     func setup() {
-        titleLabel.textColor = UIColor.gray50()
+        let theme = ThemeService.shared.theme
+        titleLabel.textColor = theme.primaryTextColor
 
-        countLabel.textColor = UIColor.gray400()
         countLabel.layer.cornerRadius = 11
-        countLabel.backgroundColor = UIColor.white
-        countLabel.textColor = UIColor.gray400()
+        countLabel.backgroundColor = theme.contentBackgroundColor
+        countLabel.textColor = theme.dimmedTextColor
         countLabel.clipsToBounds = true
 
         backgroundView?.backgroundColor = ThemeService.shared.theme.windowBackgroundColor
diff --git a/HabitRPG/UI/Challenges/ChallengeTableViewController.swift b/HabitRPG/UI/Challenges/ChallengeTableViewController.swift
index 710c36615..684c07e0b 100644
--- a/HabitRPG/UI/Challenges/ChallengeTableViewController.swift
+++ b/HabitRPG/UI/Challenges/ChallengeTableViewController.swift
@@ -12,7 +12,7 @@ import ReactiveSwift
 import ReactiveCocoa
 import Habitica_Models
 
-class ChallengeTableViewController: HRPGBaseViewController, UISearchBarDelegate, ChallengeFilterChangedDelegate {
+class ChallengeTableViewController: BaseTableViewController, UISearchBarDelegate, ChallengeFilterChangedDelegate {
     
     var selectedChallenge: ChallengeProtocol?
 
@@ -43,7 +43,7 @@ class ChallengeTableViewController: HRPGBaseViewController, UISearchBarDelegate,
         
         self.tableView.tableHeaderView = searchbar
         
-        filterButton.setImage(HabiticaIcons.imageOfFilterIcon(), for: .normal)
+        filterButton.setImage(HabiticaIcons.imageOfFilterIcon().withRenderingMode(.alwaysTemplate), for: .normal)
         filterButton.addTarget(self, action: #selector(filterTapped(_:)), for: .touchUpInside)
         navigationItem.rightBarButtonItem = UIBarButtonItem(customView: filterButton)
         
@@ -69,6 +69,11 @@ class ChallengeTableViewController: HRPGBaseViewController, UISearchBarDelegate,
         
         segmentedFilterControl.selectedSegmentIndex = 0
     }
+    
+    override func applyTheme(theme: Theme) {
+        super.applyTheme(theme: theme)
+        navigationItem.rightBarButtonItem?.tintColor = theme.tintColor
+    }
 
     override func viewWillAppear(_ animated: Bool) {
         super.viewWillAppear(animated)
diff --git a/HabitRPG/UI/Challenges/Details/ChallengeDetailsTableViewController.swift b/HabitRPG/UI/Challenges/Details/ChallengeDetailsTableViewController.swift
index fca44011d..1073d455e 100644
--- a/HabitRPG/UI/Challenges/Details/ChallengeDetailsTableViewController.swift
+++ b/HabitRPG/UI/Challenges/Details/ChallengeDetailsTableViewController.swift
@@ -16,7 +16,6 @@ class ChallengeDetailsTableViewController: MultiModelTableViewController {
     override func viewDidLoad() {
         super.viewDidLoad()
         self.topHeaderCoordinator.hideHeader = true
-        self.topHeaderCoordinator.navbarHiddenColor = .white
         self.topHeaderCoordinator.followScrollView = false
         
         title = "Details"
diff --git a/HabitRPG/UI/Social/UserProfileViewController.swift b/HabitRPG/UI/Social/UserProfileViewController.swift
index 24230c26c..df02f7066 100644
--- a/HabitRPG/UI/Social/UserProfileViewController.swift
+++ b/HabitRPG/UI/Social/UserProfileViewController.swift
@@ -39,6 +39,8 @@ class UserProfileViewController: BaseTableViewController {
     
     override func viewDidLoad() {
         super.viewDidLoad()
+        topHeaderCoordinator?.hideHeader = true
+        topHeaderCoordinator.followScrollView = false
         
         refresh()
         
@@ -209,14 +211,22 @@ class UserProfileViewController: BaseTableViewController {
         levelLabel?.text = L10n.levelNumber(stats.level)
         
         let healthLabel = cell.viewWithTag(2) as? HRPGLabeledProgressBar
-        healthLabel?.color = UIColor.red100()
+        if ThemeService.shared.theme.isDark {
+            healthLabel?.color = UIColor.red50()
+        } else {
+            healthLabel?.color = UIColor.red100()
+        }
         healthLabel?.icon = HabiticaIcons.imageOfHeartLightBg
         healthLabel?.type = L10n.health
         healthLabel?.value = NSNumber(value: stats.health)
         healthLabel?.maxValue = NSNumber(value: stats.maxHealth)
         
         let experienceLabel = cell.viewWithTag(3) as? HRPGLabeledProgressBar
-        experienceLabel?.color = UIColor.yellow100()
+        if ThemeService.shared.theme.isDark {
+            experienceLabel?.color = UIColor.yellow50()
+        } else {
+            experienceLabel?.color = UIColor.yellow100()
+        }
         experienceLabel?.icon = HabiticaIcons.imageOfExperience
         experienceLabel?.type = L10n.experience
         experienceLabel?.value = NSNumber(value: stats.experience)
@@ -224,7 +234,11 @@ class UserProfileViewController: BaseTableViewController {
         
         let magicLabel = cell.viewWithTag(4) as? HRPGLabeledProgressBar
         if stats.level >= 10 {
-            magicLabel?.color = UIColor.blue100()
+            if ThemeService.shared.theme.isDark {
+                magicLabel?.color = UIColor.blue50()
+            } else {
+                magicLabel?.color = UIColor.blue100()
+            }
             magicLabel?.icon = HabiticaIcons.imageOfMagic
             magicLabel?.type = L10n.mana
             magicLabel?.value = NSNumber(value: stats.mana)
diff --git a/HabitRPG/Utilities/Theme Engine/Theme.swift b/HabitRPG/Utilities/Theme Engine/Theme.swift
index e2b991086..f68bb8ab1 100644
--- a/HabitRPG/Utilities/Theme Engine/Theme.swift	
+++ b/HabitRPG/Utilities/Theme Engine/Theme.swift	
@@ -21,6 +21,7 @@ public protocol Theme {
     var tableviewSeparatorColor: UIColor { get }
     
     var dimmedColor: UIColor { get }
+    var dimmBackgroundColor: UIColor { get }
     
     var navbarHiddenColor: UIColor { get }
     
@@ -51,6 +52,7 @@ extension Theme {
     public var tableviewSeparatorColor: UIColor { return UIColor.gray500() }
     
     public var dimmedColor: UIColor { return UIColor.gray500() }
+    public var dimmBackgroundColor: UIColor { return UIColor.purple50() }
     
     public var navbarHiddenColor: UIColor { return backgroundTintColor }
     
diff --git a/HabitRPG/Utilities/Theme Engine/ThemeService.swift b/HabitRPG/Utilities/Theme Engine/ThemeService.swift
index f4b0ca841..2db50fc5d 100644
--- a/HabitRPG/Utilities/Theme Engine/ThemeService.swift	
+++ b/HabitRPG/Utilities/Theme Engine/ThemeService.swift	
@@ -8,6 +8,7 @@
 
 import UIKit
 import Eureka
+import PopupDialog
 
 @objc
 public class ThemeService: NSObject {
@@ -81,6 +82,9 @@ public class ThemeService: NSObject {
         UITableView.appearance().separatorColor = theme.tableviewSeparatorColor
         UICollectionView.appearance().backgroundColor = theme.windowBackgroundColor
         
+        let appearance = PopupDialogOverlayView.appearance()
+        appearance.color = theme.dimmBackgroundColor
+        
         let view = UIView.appearance(whenContainedInInstancesOf: [UIAlertController.self])
         view.tintColor = theme.tintColor
         // Update styles via UIAppearance
diff --git a/HabitRPG/Utilities/Theme Engine/Themes.swift b/HabitRPG/Utilities/Theme Engine/Themes.swift
index 7d2d22d47..87d8c5014 100644
--- a/HabitRPG/Utilities/Theme Engine/Themes.swift	
+++ b/HabitRPG/Utilities/Theme Engine/Themes.swift	
@@ -11,46 +11,55 @@ import UIKit
 public struct DefaultTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.purple300() }
     public var tintColor: UIColor { return UIColor.purple400() }
+    public var dimmBackgroundColor: UIColor { return UIColor.purple50() }
 }
 
 public struct GreenTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.green10() }
     public var tintColor: UIColor { return UIColor.green100() }
+    public var dimmBackgroundColor: UIColor { return UIColor.green50() }
 }
 
 public struct BlueTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.blue10() }
     public var tintColor: UIColor { return UIColor.blue100() }
+    public var dimmBackgroundColor: UIColor { return UIColor.blue50() }
 }
 
 public struct RedTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.red10() }
     public var tintColor: UIColor { return UIColor.red100() }
+    public var dimmBackgroundColor: UIColor { return UIColor.red50() }
 }
 
 public struct TealTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.teal10() }
     public var tintColor: UIColor { return UIColor.teal100() }
+    public var dimmBackgroundColor: UIColor { return UIColor.teal50() }
 }
 
 public struct MaroonTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.darkRed10() }
     public var tintColor: UIColor { return UIColor.darkRed100() }
+    public var dimmBackgroundColor: UIColor { return UIColor.darkRed50() }
 }
 
 public struct OrangeTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.orange10() }
     public var tintColor: UIColor { return UIColor.orange50() }
+    public var dimmBackgroundColor: UIColor { return UIColor.orange50() }
 }
 
 public struct YellowTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.yellow5() }
     public var tintColor: UIColor { return UIColor.yellow10() }
+    public var dimmBackgroundColor: UIColor { return UIColor.yellow5() }
 }
 
 public struct GrayTheme: Theme {
     public var backgroundTintColor: UIColor { return UIColor.gray50() }
     public var tintColor: UIColor { return UIColor.gray100() }
+    public var dimmBackgroundColor: UIColor { return UIColor.gray50() }
 }
 
 public struct DysheatenerTheme: Theme {
@@ -74,6 +83,7 @@ public struct NightTheme: DarkTheme {
     public var tableviewSeparatorColor: UIColor { return UIColor.purple300() }
     public var navbarHiddenColor: UIColor { return contentBackgroundColor }
     public var dimmedColor: UIColor { return UIColor.purple200() }
+    public var dimmBackgroundColor: UIColor { return UIColor.purple10() }
     public var taskOverlayTint: UIColor { return UIColor.blackPurple50().withAlphaComponent(0.15) }
 }
 
@@ -93,6 +103,7 @@ public struct DarkNightTheme: DarkTheme {
     public var tableviewSeparatorColor: UIColor { return UIColor.gray100() }
     public var navbarHiddenColor: UIColor { return contentBackgroundColor }
     public var dimmedColor: UIColor { return UIColor.gray200() }
+    public var dimmBackgroundColor: UIColor { return UIColor.gray50() }
     public var badgeColor: UIColor { return UIColor.gray200() }
     public var taskOverlayTint: UIColor { return UIColor.blackPurple50().withAlphaComponent(0.15) }
 }
@@ -112,6 +123,7 @@ public struct TrueBlackTheme: DarkTheme {
     public var tableviewSeparatorColor: UIColor { return UIColor.gray200() }
     public var navbarHiddenColor: UIColor { return contentBackgroundColor }
     public var dimmedColor: UIColor { return UIColor.gray200() }
+    public var dimmBackgroundColor: UIColor { return UIColor.gray10() }
     public var badgeColor: UIColor { return UIColor.gray100() }
     public var taskOverlayTint: UIColor { return UIColor.black.withAlphaComponent(0.15) }
 }
diff --git a/HabitRPG/Views/ChallengeFilterAlert.swift b/HabitRPG/Views/ChallengeFilterAlert.swift
index b4296ebc8..2218d2a1a 100644
--- a/HabitRPG/Views/ChallengeFilterAlert.swift
+++ b/HabitRPG/Views/ChallengeFilterAlert.swift
@@ -17,6 +17,12 @@ protocol ChallengeFilterChangedDelegate: class {
 
 class ChallengeFilterAlert: UIViewController, Themeable {
 
+    @IBOutlet weak var titleLabel: UILabel!
+    @IBOutlet weak var topSeparator: UIView!
+    @IBOutlet weak var middleSeparator: UIView!
+    @IBOutlet weak var groupsTitleLabel: UILabel!
+    @IBOutlet weak var ownershipTitleLabel: UILabel!
+    
     @IBOutlet weak private var doneButton: UIButton!
     @IBOutlet weak private var allGroupsButton: UIButton!
     @IBOutlet weak private var noGroupsButton: UIButton!
@@ -43,11 +49,19 @@ class ChallengeFilterAlert: UIViewController, Themeable {
     }
     
     func applyTheme(theme: Theme) {
+        view.backgroundColor = theme.contentBackgroundColor
+        titleLabel.textColor = theme.primaryTextColor
+        topSeparator.backgroundColor = theme.separatorColor
+        middleSeparator.backgroundColor = theme.separatorColor
+        groupsTitleLabel.textColor = theme.ternaryTextColor
+        ownershipTitleLabel.textColor = theme.ternaryTextColor
         doneButton.setTitleColor(theme.tintColor, for: .normal)
         allGroupsButton.setTitleColor(theme.tintColor, for: .normal)
         noGroupsButton.setTitleColor(theme.tintColor, for: .normal)
         ownedButton.tintColor = theme.tintColor
+        ownedButton.textColor = theme.primaryTextColor
         notOwnedButton.tintColor = theme.tintColor
+        notOwnedButton.textColor = theme.primaryTextColor
         groupListView.arrangedSubviews.forEach { (view) in
             if let checkview = view as? LabeledCheckboxView {
                 checkview.tintColor = theme.tintColor
@@ -131,7 +145,7 @@ class ChallengeFilterAlert: UIViewController, Themeable {
             }
             groupView.isChecked = shownGuilds.contains(groupID)
             groupView.numberOfLines = 0
-            groupView.textColor = UIColor(white: 0, alpha: 0.5)
+            groupView.textColor = ThemeService.shared.theme.secondaryTextColor
             groupView.tintColor = ThemeService.shared.theme.tintColor
             groupView.checkedAction = { [weak self] isChecked in
                 if isChecked {
diff --git a/HabitRPG/Views/ChallengeFilterAlert.xib b/HabitRPG/Views/ChallengeFilterAlert.xib
index 5d6513ece..7b5e236db 100644
--- a/HabitRPG/Views/ChallengeFilterAlert.xib
+++ b/HabitRPG/Views/ChallengeFilterAlert.xib
@@ -1,11 +1,11 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="13771" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES">
+<document type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="3.0" toolsVersion="14490.70" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" colorMatched="YES">
     <device id="retina4_7" orientation="portrait">
         <adaptation id="fullscreen"/>
     </device>
     <dependencies>
         <deployment identifier="iOS"/>
-        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="13772"/>
+        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="14490.49"/>
         <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
     </dependencies>
     <objects>
@@ -15,9 +15,14 @@
                 <outlet property="allGroupsButton" destination="NYk-ki-ylf" id="vHH-ns-qjy"/>
                 <outlet property="doneButton" destination="xiO-DA-hFh" id="D7f-GU-gfa"/>
                 <outlet property="groupListView" destination="Mxr-wB-rfG" id="kbO-1G-7Af"/>
+                <outlet property="groupsTitleLabel" destination="Uut-nF-9j5" id="1Tj-bt-DGK"/>
                 <outlet property="heightConstraint" destination="rxx-Tv-GXn" id="Ko5-qS-UKx"/>
+                <outlet property="middleSeparator" destination="wWF-8E-u3J" id="aAE-qU-78x"/>
                 <outlet property="notOwnedButton" destination="tn7-Ob-POT" id="RZu-Kd-N85"/>
                 <outlet property="ownedButton" destination="obx-BP-Btf" id="cvc-Gi-omK"/>
+                <outlet property="ownershipTitleLabel" destination="bnc-7M-J7M" id="T34-vC-0eU"/>
+                <outlet property="titleLabel" destination="ZI2-9S-IzK" id="hAR-Ts-z6B"/>
+                <outlet property="topSeparator" destination="1iV-ne-ksQ" id="SIf-CO-RS3"/>
                 <outlet property="view" destination="iN0-l3-epB" id="7KS-fG-XwV"/>
             </connections>
         </placeholder>
@@ -94,7 +99,6 @@
                                 </button>
                                 <view contentMode="scaleToFill" verticalHuggingPriority="1000" verticalCompressionResistancePriority="1000" translatesAutoresizingMaskIntoConstraints="NO" id="Mxr-wB-rfG" customClass="UIStackView">
                                     <rect key="frame" x="16" y="62" width="343" height="25"/>
-                                    <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                                     <constraints>
                                         <constraint firstAttribute="height" priority="500" constant="128" id="s87-Ti-iWi"/>
                                     </constraints>
@@ -134,7 +138,6 @@
                                     <nil key="highlightedColor"/>
                                 </label>
                             </subviews>
-                            <color key="backgroundColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                             <constraints>
                                 <constraint firstItem="wWF-8E-u3J" firstAttribute="leading" secondItem="Zbu-Lv-kTO" secondAttribute="leading" constant="16" id="0Qe-pX-H0k"/>
                                 <constraint firstAttribute="height" priority="501" constant="211" id="0vi-D0-rUi"/>
diff --git a/HabitRPG/Views/GroupInvitationView.swift b/HabitRPG/Views/GroupInvitationView.swift
index d164efff1..42416ea4e 100644
--- a/HabitRPG/Views/GroupInvitationView.swift
+++ b/HabitRPG/Views/GroupInvitationView.swift
@@ -85,7 +85,14 @@ class GroupInvitationView: UIView {
         addSubview(acceptButton)
         addSubview(separatorView)
         
-        backgroundColor = UIColor.blue100()
+        let theme = ThemeService.shared.theme
+        if theme.isDark {
+            backgroundColor = UIColor.blue10()
+        } else {
+            backgroundColor = UIColor.blue100()
+        }
+        acceptButton.backgroundColor = theme.contentBackgroundColor
+        declineButton.backgroundColor = theme.contentBackgroundColor
     }
     
     func set(invitation: GroupInvitationProtocol) {
diff --git a/HabitRPG/Views/HabiticaAlertController.swift b/HabitRPG/Views/HabiticaAlertController.swift
index 9d860bfd2..bba9a5908 100644
--- a/HabitRPG/Views/HabiticaAlertController.swift
+++ b/HabitRPG/Views/HabiticaAlertController.swift
@@ -123,7 +123,7 @@ class HabiticaAlertController: UIViewController, Themeable {
     }
     
     func applyTheme(theme: Theme) {
-        view.backgroundColor = theme.backgroundTintColor.darker(by: 50).withAlphaComponent(0.6)
+        view.backgroundColor = theme.dimmBackgroundColor.withAlphaComponent(0.7)
         buttonContainerView.backgroundColor = theme.contentBackgroundColor
         buttonBackgroundView.backgroundColor = theme.tintColor.withAlphaComponent(0.05)
         alertBackgroundView.backgroundColor = theme.contentBackgroundColor
@@ -286,6 +286,7 @@ class HabiticaAlertController: UIViewController, Themeable {
         if closeButton != nil {
             closeButton.isHidden = closeAction == nil
             closeButton.setTitle(closeTitle, for: .normal)
+            closeButton.tintColor = ThemeService.shared.theme.tintColor
         }
     }
     
diff --git a/HabitRPG/Views/HabiticaAlertController.xib b/HabitRPG/Views/HabiticaAlertController.xib
index e7f813073..dee2cdea0 100644
--- a/HabitRPG/Views/HabiticaAlertController.xib
+++ b/HabitRPG/Views/HabiticaAlertController.xib
@@ -140,9 +140,7 @@
                                 <constraint firstAttribute="height" constant="50" id="5sM-4R-vXw"/>
                             </constraints>
                             <fontDescription key="fontDescription" type="system" weight="semibold" pointSize="16"/>
-                            <state key="normal" title="Close">
-                                <color key="titleColor" red="0.6058621407" green="0.38462612029999999" blue="0.99835687880000001" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
-                            </state>
+                            <state key="normal" title="Close"/>
                             <userDefinedRuntimeAttributes>
                                 <userDefinedRuntimeAttribute type="number" keyPath="cornerRadius">
                                     <real key="value" value="12"/>
diff --git a/HabitRPG/Views/MemberLlistView.swift b/HabitRPG/Views/MemberLlistView.swift
index 871f24bf4..dd44a40b8 100644
--- a/HabitRPG/Views/MemberLlistView.swift
+++ b/HabitRPG/Views/MemberLlistView.swift
@@ -19,40 +19,52 @@ class MemberListView: UIView {
     let sublineLabel: UILabel = {
         let view = UILabel()
         view.font = UIFont.systemFont(ofSize: 12)
-        view.textColor = UIColor.gray200()
+        view.textColor = ThemeService.shared.theme.ternaryTextColor
         return view
     }()
     let healthBar: ProgressBar = {
         let view = ProgressBar()
-        view.barColor = UIColor.red100()
+        if ThemeService.shared.theme.isDark {
+            view.barColor = UIColor.red50()
+        } else {
+            view.barColor = UIColor.red100()
+        }
         return view
     }()
     let healthLabel: UILabel = {
         let view = UILabel()
         view.font = UIFont.systemFont(ofSize: 12)
-        view.textColor = UIColor.gray200()
+        view.textColor = ThemeService.shared.theme.ternaryTextColor
         return view
     }()
     let experienceBar: ProgressBar = {
         let view = ProgressBar()
-        view.barColor = UIColor.yellow50()
+        if ThemeService.shared.theme.isDark {
+            view.barColor = UIColor.yellow10()
+        } else {
+            view.barColor = UIColor.yellow50()
+        }
         return view
     }()
     let experienceLabel: UILabel = {
         let view = UILabel()
         view.font = UIFont.systemFont(ofSize: 12)
-        view.textColor = UIColor.gray200()
+        view.textColor = ThemeService.shared.theme.ternaryTextColor
         return view
     }()
     let manaBar: ProgressBar = {
         let view = ProgressBar()
-        view.barColor = UIColor.blue100()
+        if ThemeService.shared.theme.isDark {
+            view.barColor = UIColor.blue50()
+        } else {
+            view.barColor = UIColor.blue100()
+        }
         return view
     }()
     let manaLabel: UILabel = {
         let view = UILabel()
         view.font = UIFont.systemFont(ofSize: 12)
-        view.textColor = UIColor.gray200()
+        view.textColor = ThemeService.shared.theme.ternaryTextColor
         return view
     }()
     let classIconView = UIImageView()
@@ -60,7 +72,7 @@ class MemberListView: UIView {
     let leaderView: UILabel = {
         let view = UILabel()
         view.font = UIFont.systemFont(ofSize: 12)
-        view.textColor = UIColor.gray300()
+        view.textColor = ThemeService.shared.theme.dimmedTextColor
         view.backgroundColor = ThemeService.shared.theme.offsetBackgroundColor
         view.cornerRadius = 10
         view.textAlignment = .center
diff --git a/HabitRPG/Views/ProgressBar.swift b/HabitRPG/Views/ProgressBar.swift
index 7df074229..ba02f36c3 100644
--- a/HabitRPG/Views/ProgressBar.swift
+++ b/HabitRPG/Views/ProgressBar.swift
@@ -35,7 +35,7 @@ class ProgressBar: UIView {
             setNeedsDisplay()
         }
     }
-    @objc var barBackgroundColor: UIColor = UIColor.gray600() {
+    @objc var barBackgroundColor: UIColor = ThemeService.shared.theme.offsetBackgroundColor {
         didSet {
             setNeedsDisplay()
         }
diff --git a/HabitRPG/Views/UserTopHeader.swift b/HabitRPG/Views/UserTopHeader.swift
index 7fd5acc14..3e848a48b 100644
--- a/HabitRPG/Views/UserTopHeader.swift
+++ b/HabitRPG/Views/UserTopHeader.swift
@@ -38,15 +38,12 @@ class UserTopHeader: UIView, Themeable {
     override func awakeFromNib() {
         super.awakeFromNib()
     
-        healthLabel.color = UIColor.red100()
         healthLabel.icon = HabiticaIcons.imageOfHeartLightBg
         healthLabel.type = L10n.health
         
-        experienceLabel.color = UIColor.yellow100()
         experienceLabel.icon = HabiticaIcons.imageOfExperience
         experienceLabel.type = L10n.experience
         
-        magicLabel.color = UIColor.blue100()
         magicLabel.icon = HabiticaIcons.imageOfMagic
         magicLabel.type = L10n.mana
         
@@ -98,6 +95,16 @@ class UserTopHeader: UIView, Themeable {
         magicLabel.textColor = theme.primaryTextColor
         magicLabel.backgroundColor = theme.contentBackgroundColor
         magicLabel.progressBar.barBackgroundColor = theme.contentBackgroundColorDimmed
+        
+        if theme.isDark {
+            healthLabel.color = UIColor.red50()
+            experienceLabel.color = UIColor.yellow50()
+            magicLabel.color = UIColor.blue50()
+        } else {
+            healthLabel.color = UIColor.red100()
+            experienceLabel.color = UIColor.yellow100()
+            magicLabel.color = UIColor.blue100()
+        }
     }
     
     private func set(user: UserProtocol) {
