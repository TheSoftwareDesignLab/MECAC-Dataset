diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelection.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelection.kt
index 1d3b13cf1df..72e45e0ff49 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelection.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelection.kt
@@ -3,6 +3,10 @@ package de.westnordost.streetcomplete.screens.settings.quest_selection
 import de.westnordost.streetcomplete.data.osmnotes.notequests.OsmNoteQuestType
 import de.westnordost.streetcomplete.data.quest.QuestType
 
-data class QuestSelection(val questType: QuestType, val selected: Boolean) {
+data class QuestSelection(
+    val questType: QuestType,
+    val selected: Boolean,
+    val enabledInCurrentCountry: Boolean
+) {
     val isInteractionEnabled get() = questType !is OsmNoteQuestType
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionAdapter.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionAdapter.kt
deleted file mode 100644
index bba59ac3309..00000000000
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionAdapter.kt
+++ /dev/null
@@ -1,19 +0,0 @@
-package de.westnordost.streetcomplete.screens.settings.quest_selection
-
-/*
-            binding.visibilityCheckBox.setOnClickListener {
-                if (!item.selected && item.questType.defaultDisabledMessage != 0) {
-                    AlertDialog.Builder(context)
-                        .setTitle(R.string.enable_quest_confirmation_title)
-                        .setMessage(item.questType.defaultDisabledMessage)
-                        .setPositiveButton(android.R.string.ok) { _, _ ->
-                            viewModel.selectQuest(item.questType, true)
-                        }
-                        .setNegativeButton(android.R.string.cancel) { _, _ -> binding.visibilityCheckBox.isChecked = false }
-                        .setOnCancelListener { binding.visibilityCheckBox.isChecked = false }
-                        .show()
-                } else {
-                    viewModel.selectQuest(item.questType, !item.selected)
-                }
-            }
-    */
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionFragment.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionFragment.kt
index 0318019831f..94af62e05cb 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionFragment.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionFragment.kt
@@ -1,26 +1,13 @@
 package de.westnordost.streetcomplete.screens.settings.quest_selection
 
-import android.content.Context
-import android.content.res.Configuration
 import android.os.Bundle
 import android.view.LayoutInflater
 import android.view.View
 import android.view.ViewGroup
-import androidx.appcompat.app.AlertDialog
-import androidx.appcompat.widget.SearchView
-import androidx.appcompat.widget.Toolbar
 import androidx.compose.material.Surface
 import androidx.fragment.app.Fragment
-import androidx.recyclerview.widget.DividerItemDecoration
-import androidx.recyclerview.widget.LinearLayoutManager
-import de.westnordost.streetcomplete.R
-import de.westnordost.streetcomplete.data.quest.QuestType
-import de.westnordost.streetcomplete.screens.settings.genericQuestTitle
 import de.westnordost.streetcomplete.ui.util.composableContent
-import de.westnordost.streetcomplete.util.ktx.containsAll
-import de.westnordost.streetcomplete.util.ktx.observe
 import org.koin.androidx.viewmodel.ext.android.viewModel
-import java.util.Locale
 
 /** Shows a screen in which the user can enable and disable quests as well as re-order them */
 class QuestSelectionFragment : Fragment() {
@@ -34,41 +21,4 @@ class QuestSelectionFragment : Fragment() {
                 onClickBack = { parentFragmentManager.popBackStack() }
             )
         } }
-/*
-    private fun createOptionsMenu(toolbar: Toolbar) {
-        toolbar.inflateMenu(R.menu.menu_quest_selection)
-
-        val searchView = toolbar.menu.findItem(R.id.action_search).actionView as SearchView
-        searchView.setOnQueryTextListener(object : SearchView.OnQueryTextListener {
-            override fun onQueryTextSubmit(query: String?): Boolean = false
-            override fun onQueryTextChange(newText: String?): Boolean {
-                updateDisplayedQuestCount()
-                return false
-            }
-        })
-
-        toolbar.setOnMenuItemClickListener { item ->
-            when (item.itemId) {
-                R.id.action_reset -> {
-                    AlertDialog.Builder(requireContext())
-                        .setMessage(R.string.pref_quests_reset)
-                        .setPositiveButton(android.R.string.ok) { _, _ -> viewModel.resetQuestSelectionsAndOrder() }
-                        .setNegativeButton(android.R.string.cancel, null)
-                        .show()
-                    true
-                }
-                R.id.action_deselect_all -> {
-                    AlertDialog.Builder(requireContext())
-                        .setTitle(R.string.pref_quests_deselect_all)
-                        .setPositiveButton(android.R.string.ok) { _, _ -> viewModel.unselectAllQuests() }
-                        .setNegativeButton(android.R.string.cancel, null)
-                        .show()
-                    true
-                }
-                else -> false
-            }
-        }
-    }
-
- */
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionItem.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionItem.kt
index 543cd0b6468..6871d790048 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionItem.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionItem.kt
@@ -1,7 +1,7 @@
 package de.westnordost.streetcomplete.screens.settings.quest_selection
 
 import androidx.compose.foundation.Image
-import androidx.compose.foundation.background
+import androidx.compose.foundation.layout.Arrangement
 import androidx.compose.foundation.layout.Box
 import androidx.compose.foundation.layout.Column
 import androidx.compose.foundation.layout.IntrinsicSize
@@ -11,13 +11,14 @@ import androidx.compose.foundation.layout.height
 import androidx.compose.foundation.layout.padding
 import androidx.compose.foundation.layout.size
 import androidx.compose.foundation.layout.width
-import androidx.compose.foundation.shape.RoundedCornerShape
 import androidx.compose.material.Checkbox
 import androidx.compose.material.MaterialTheme
 import androidx.compose.material.Text
 import androidx.compose.runtime.Composable
+import androidx.compose.runtime.getValue
 import androidx.compose.runtime.mutableStateOf
 import androidx.compose.runtime.remember
+import androidx.compose.runtime.setValue
 import androidx.compose.ui.Alignment
 import androidx.compose.ui.Modifier
 import androidx.compose.ui.graphics.BlendMode
@@ -27,65 +28,47 @@ import androidx.compose.ui.res.painterResource
 import androidx.compose.ui.res.stringResource
 import androidx.compose.ui.text.font.FontStyle
 import androidx.compose.ui.tooling.preview.Preview
-import androidx.compose.ui.unit.Dp
 import androidx.compose.ui.unit.dp
 import de.westnordost.streetcomplete.R
-import de.westnordost.streetcomplete.data.quest.QuestType
 import de.westnordost.streetcomplete.quests.surface.AddRoadSurface
 import de.westnordost.streetcomplete.screens.settings.genericQuestTitle
-import de.westnordost.streetcomplete.ui.theme.disabled
-import de.westnordost.streetcomplete.ui.theme.surfaceContainer
+import de.westnordost.streetcomplete.ui.theme.disabledText
+import de.westnordost.streetcomplete.ui.theme.hint
 
 @Composable
 fun QuestSelectionItem(
-    questType: QuestType,
-    isSelected: Boolean,
+    item: QuestSelection,
     onToggleSelection: (isSelected: Boolean) -> Unit,
-    isInteractionEnabled: Boolean,
     displayCountry: String,
-    isEnabledInCurrentCountry: Boolean,
-    iconSize: Dp,
-    modifier: Modifier = Modifier,
+    modifier: Modifier = Modifier
 ) {
-    val backgroundColor =
-        if (isInteractionEnabled) MaterialTheme.colors.surface
-        else MaterialTheme.colors.disabled
-
-    val iconTint = if (!isSelected) ColorFilter.tint(MaterialTheme.colors.disabled, BlendMode.DstIn) else null
-    val textColor = if (!isSelected) MaterialTheme.colors.disabled else Color.Unspecified
+    val iconTint = if (!item.selected) ColorFilter.tint(MaterialTheme.colors.disabledText, BlendMode.DstIn) else null
+    val textColor = if (!item.selected) MaterialTheme.colors.disabledText else Color.Unspecified
 
     Row(
-        modifier = modifier
-            .background(backgroundColor)
-            .padding(vertical = 8.dp)
-            .height(IntrinsicSize.Min),
+        modifier = modifier.height(IntrinsicSize.Min),
         verticalAlignment = Alignment.CenterVertically,
     ) {
         Image(
-            painter = painterResource(questType.icon),
-            contentDescription = questType.name,
-            modifier = Modifier.padding(start = 16.dp).size(iconSize),
+            painter = painterResource(item.questType.icon),
+            contentDescription = item.questType.name,
+            modifier = Modifier.padding(start = 16.dp).size(48.dp),
             colorFilter = iconTint
         )
         Column(
-            Modifier
-                .padding(start = 16.dp)
-                .weight(0.1f)) {
+            modifier = Modifier.padding(start = 16.dp).weight(0.1f),
+            verticalArrangement = Arrangement.spacedBy(4.dp)
+        ) {
             Text(
-                text = genericQuestTitle(questType),
+                text = genericQuestTitle(item.questType),
                 style = MaterialTheme.typography.body1,
                 color = textColor
             )
-            if (!isEnabledInCurrentCountry) {
-                Text(
-                    text = stringResource(R.string.questList_disabled_in_country, displayCountry),
-                    modifier = Modifier
-                        .padding(top = 6.dp)
-                        .background(MaterialTheme.colors.surfaceContainer, RoundedCornerShape(4.dp))
-                        .padding(horizontal = 6.dp, vertical = 2.dp),
-                    style = MaterialTheme.typography.body2,
-                    fontStyle = FontStyle.Italic
-                )
+            if (!item.enabledInCurrentCountry) {
+                DisabledHint(stringResource(R.string.questList_disabled_in_country, displayCountry))
+            }
+            if (item.questType.defaultDisabledMessage != 0) {
+                DisabledHint(stringResource(R.string.questList_disabled_by_default))
             }
         }
         Box(
@@ -93,26 +76,32 @@ fun QuestSelectionItem(
             contentAlignment = Alignment.Center
         ) {
             Checkbox(
-                checked = isSelected,
+                checked = item.selected,
                 onCheckedChange = onToggleSelection,
-                enabled = isInteractionEnabled
+                enabled = item.isInteractionEnabled
             )
         }
     }
 }
 
+@Composable
+private fun DisabledHint(text: String) {
+    Text(
+        text = text,
+        style = MaterialTheme.typography.body2,
+        fontStyle = FontStyle.Italic,
+        color = MaterialTheme.colors.hint
+    )
+}
+
 @Preview
 @Composable
 private fun QuestSelectionItemPreview() {
-    val selected = remember { mutableStateOf(true) }
+    var selected by remember { mutableStateOf(true) }
 
     QuestSelectionItem(
-        questType = AddRoadSurface(),
-        isSelected = selected.value,
-        onToggleSelection = { selected.value = !selected.value },
-        isInteractionEnabled = true,
+        item = QuestSelection(AddRoadSurface(), selected, false),
+        onToggleSelection = { selected = !selected },
         displayCountry = "Atlantis",
-        isEnabledInCurrentCountry = false,
-        iconSize = 64.dp,
     )
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionList.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionList.kt
new file mode 100644
index 00000000000..382c30876cf
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionList.kt
@@ -0,0 +1,106 @@
+package de.westnordost.streetcomplete.screens.settings.quest_selection
+
+import androidx.compose.foundation.background
+import androidx.compose.foundation.layout.Column
+import androidx.compose.foundation.layout.Row
+import androidx.compose.foundation.layout.fillMaxWidth
+import androidx.compose.foundation.layout.padding
+import androidx.compose.foundation.lazy.LazyColumn
+import androidx.compose.foundation.lazy.itemsIndexed
+import androidx.compose.material.Divider
+import androidx.compose.material.MaterialTheme
+import androidx.compose.material.Text
+import androidx.compose.runtime.Composable
+import androidx.compose.runtime.getValue
+import androidx.compose.runtime.mutableStateOf
+import androidx.compose.runtime.remember
+import androidx.compose.runtime.setValue
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.tooling.preview.Preview
+import androidx.compose.ui.unit.dp
+import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.data.osmnotes.notequests.OsmNoteQuestType
+import de.westnordost.streetcomplete.data.quest.QuestType
+import de.westnordost.streetcomplete.quests.seating.AddSeating
+import de.westnordost.streetcomplete.quests.tactile_paving.AddTactilePavingBusStop
+import de.westnordost.streetcomplete.ui.common.ConfirmationDialog
+import de.westnordost.streetcomplete.ui.theme.titleMedium
+
+/** Quest list */
+@Composable
+fun QuestSelectionList(
+    items: List<QuestSelection>,
+    displayCountry: String,
+    onSelectQuest: (questType: QuestType, selected: Boolean) -> Unit,
+) {
+    var showEnableQuestDialog by remember { mutableStateOf<QuestType?>(null) }
+
+    Column {
+        QuestSelectionHeader()
+        LazyColumn {
+            itemsIndexed(items, key = { _, it -> it.questType.name }) { index, item ->
+                Column(Modifier.background(MaterialTheme.colors.surface)) {
+                    if (index > 0) Divider()
+                    QuestSelectionItem(
+                        item = item,
+                        onToggleSelection = { isSelected ->
+                            // when enabling quest that is disabled by default, require confirmation
+                            if (isSelected && item.questType.defaultDisabledMessage != 0) {
+                                showEnableQuestDialog = item.questType
+                            } else {
+                                onSelectQuest(item.questType, isSelected)
+                            }
+                        },
+                        displayCountry = displayCountry,
+                        modifier = Modifier.padding(vertical = 8.dp)
+                    )
+                }
+            }
+        }
+    }
+
+    showEnableQuestDialog?.let { questType ->
+        ConfirmationDialog(
+            onDismissRequest = { showEnableQuestDialog = null },
+            onConfirmed = { onSelectQuest(questType, true) },
+            title = { Text(stringResource(R.string.enable_quest_confirmation_title)) },
+            text = { Text(stringResource(questType.defaultDisabledMessage)) }
+        )
+    }
+}
+
+@Composable
+private fun QuestSelectionHeader() {
+    Column {
+        Row(
+            Modifier
+                .fillMaxWidth()
+                .padding(horizontal = 16.dp, vertical = 8.dp)) {
+            Text(
+                text = stringResource(R.string.quest_type),
+                modifier = Modifier.weight(1f),
+                style = MaterialTheme.typography.titleMedium
+            )
+            Text(
+                text = stringResource(R.string.quest_enabled),
+                style = MaterialTheme.typography.titleMedium
+            )
+        }
+        Divider()
+    }
+}
+
+@Preview
+@Composable
+private fun PreviewQuestSelectionList() {
+    QuestSelectionList(
+        items = listOf(
+            QuestSelection(OsmNoteQuestType, true, true),
+            QuestSelection(AddSeating(), false, true),
+            QuestSelection(AddTactilePavingBusStop(), true, false),
+        ),
+        displayCountry = "Atlantis",
+        onSelectQuest = { _,_ -> }
+    )
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionScreen.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionScreen.kt
index 06f41aa9907..ced4e89e2ce 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionScreen.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionScreen.kt
@@ -1,55 +1,36 @@
 package de.westnordost.streetcomplete.screens.settings.quest_selection
 
-import androidx.compose.foundation.ExperimentalFoundationApi
-import androidx.compose.foundation.background
 import androidx.compose.foundation.layout.BoxWithConstraints
 import androidx.compose.foundation.layout.Column
-import androidx.compose.foundation.layout.Row
 import androidx.compose.foundation.layout.fillMaxSize
-import androidx.compose.foundation.layout.padding
-import androidx.compose.foundation.lazy.LazyColumn
-import androidx.compose.foundation.lazy.LazyItemScope
-import androidx.compose.foundation.lazy.itemsIndexed
-import androidx.compose.material.Divider
-import androidx.compose.material.IconButton
-import androidx.compose.material.MaterialTheme
-import androidx.compose.material.Text
-import androidx.compose.material.TopAppBar
 import androidx.compose.runtime.Composable
 import androidx.compose.runtime.ReadOnlyComposable
 import androidx.compose.runtime.collectAsState
 import androidx.compose.runtime.getValue
 import androidx.compose.runtime.mutableStateOf
 import androidx.compose.runtime.remember
+import androidx.compose.runtime.setValue
 import androidx.compose.ui.Modifier
 import androidx.compose.ui.res.stringResource
-import androidx.compose.ui.unit.coerceIn
-import androidx.compose.ui.unit.dp
+import androidx.compose.ui.text.input.TextFieldValue
 import de.westnordost.streetcomplete.R
-import de.westnordost.streetcomplete.data.quest.QuestType
 import de.westnordost.streetcomplete.screens.settings.genericQuestTitle
 import de.westnordost.streetcomplete.ui.common.CenteredLargeTitleHint
-import de.westnordost.streetcomplete.ui.common.BackIcon
-import de.westnordost.streetcomplete.ui.theme.titleMedium
 import de.westnordost.streetcomplete.util.ktx.containsAll
 import java.util.Locale
 
-@OptIn(ExperimentalFoundationApi::class)
 @Composable fun QuestSelectionScreen(
     viewModel: QuestSelectionViewModel,
     onClickBack: () -> Unit,
 ) {
     val quests by viewModel.quests.collectAsState()
 
-    val filter = remember { mutableStateOf("") } // TODO
+    var searchText by remember { mutableStateOf(TextFieldValue()) }
 
     val displayCountry = remember {
         viewModel.currentCountry?.let { Locale("", it).displayCountry } ?: "Atlantis"
     }
 
-    // TODO Compose: SearchBar only exists for material3, but we use material2
-    //  https://developer.android.com/reference/kotlin/androidx/compose/material3/package-summary?hl=en#SearchBar(kotlin.Function0,kotlin.Boolean,kotlin.Function1,androidx.compose.ui.Modifier,androidx.compose.ui.graphics.Shape,androidx.compose.material3.SearchBarColors,androidx.compose.ui.unit.Dp,androidx.compose.ui.unit.Dp,androidx.compose.foundation.layout.WindowInsets,kotlin.Function1)
-
     // TODO Compose: reordering items not implemented. Seems to be not possible out of the box in
     //  Compose, third-party libraries exist (like sh.calvin.reorderable:reorderable), but I didn't
     //  find how to call viewModel.orderQuest only on drop, i.e end of dragging.
@@ -58,93 +39,42 @@ import java.util.Locale
     //  see also https://developer.android.com/jetpack/androidx/compose-roadmap ("Drag and drop in Lazy layouts")
 
     Column(Modifier.fillMaxSize()) {
-        val presetName = viewModel.selectedQuestPresetName
-            ?: stringResource(R.string.quest_presets_default_name)
+        QuestSelectionTopAppBar(
+            currentPresetName = viewModel.selectedQuestPresetName ?: stringResource(R.string.quest_presets_default_name),
+            onClickBack = onClickBack,
+            onUnselectAll = { viewModel.unselectAllQuests() },
+            onReset = { viewModel.resetQuestSelectionsAndOrder() },
+            search = searchText,
+            onSearchChange = { searchText = it }
+        )
 
-        TopAppBar(
-            title = {
-                Column {
-                    Text(stringResource(R.string.pref_title_quests2))
-                    Text(
-                        text = stringResource(R.string.pref_subtitle_quests_preset_name, presetName),
-                        style = MaterialTheme.typography.body1,
-                    )
-                }
-            },
-            navigationIcon = { IconButton(onClick = { onClickBack() }) { BackIcon() } },
-            actions = {
-                // TODO
-            },
+        // the filtering is not done in the view model because it involves accessing localized
+        // resources, which we consider UI (framework) specific data and view models should be
+        // free of that.
+        val filteredQuests = filterQuests(quests, searchText.text)
 
-        )
-        if (quests.isEmpty()) {
+        if (filteredQuests.isEmpty()) {
             CenteredLargeTitleHint(stringResource(R.string.no_search_results))
         } else {
-            BoxWithConstraints {
-                val iconSize = (maxHeight / 12).coerceIn(32.dp, 64.dp)
-                LazyColumn {
-                    stickyHeader {
-                        QuestSelectionHeader()
-                    }
-                    itemsIndexed(
-                        items = quests,
-                        key = { _, it -> it.questType.name }
-                    ) { index, item ->
-                        if (index != 0) Divider()
-                        val isEnabled = viewModel.isQuestEnabledInCurrentCountry(item.questType)
-                        QuestSelectionItem(
-                            questType = item.questType,
-                            isSelected = item.selected,
-                            onToggleSelection = { viewModel.selectQuest(item.questType, !it) },
-                            isInteractionEnabled = item.isInteractionEnabled,
-                            displayCountry = displayCountry,
-                            isEnabledInCurrentCountry = isEnabled,
-                            iconSize = iconSize
-                        )
-                    }
+            QuestSelectionList(
+                items = filteredQuests,
+                displayCountry = displayCountry,
+                onSelectQuest = { questType, selected ->
+                    viewModel.selectQuest(questType, selected)
                 }
-            }
-        }
-    }
-}
-
-@Composable
-private fun LazyItemScope.QuestSelectionHeader() {
-    Column(Modifier.background(MaterialTheme.colors.surface)) {
-        Row(
-            modifier = Modifier
-                .fillParentMaxWidth()
-                .padding(24.dp, 8.dp, 8.dp, 8.dp)
-        ) {
-            Text(
-                text = stringResource(R.string.quest_type),
-                modifier = Modifier.weight(1f),
-                style = MaterialTheme.typography.titleMedium
-            )
-            Text(
-                text = stringResource(R.string.quest_enabled),
-                style = MaterialTheme.typography.titleMedium
             )
         }
-        Divider()
     }
 }
 
 @Composable
 @ReadOnlyComposable
-private fun filterQuests(quests: List<QuestSelection>, filter: String?): List<QuestSelection> {
-    val words = filter.orEmpty().trim().lowercase()
+private fun filterQuests(quests: List<QuestSelection>, filter: String): List<QuestSelection> {
+    val words = filter.trim().lowercase()
     return if (words.isEmpty()) {
         quests
     } else {
-        quests.filter { questTypeMatchesSearchWords(it.questType, words.split(' ')) }
+        val wordList = words.split(' ')
+        quests.filter { genericQuestTitle(it.questType).lowercase().containsAll(wordList) }
     }
 }
-
-@Composable
-@ReadOnlyComposable
-private fun questTypeMatchesSearchWords(questType: QuestType, words: List<String>) =
-    genericQuestTitle(questType).lowercase().containsAll(words)
-    // TODO Compose: no idea how to access English resources in order to also search English words.
-    //  Not really worth investigating until after switching to compose multiplatform because that
-    //  comes with an own (non-Android-specific) resource management system
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionTopAppBar.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionTopAppBar.kt
new file mode 100644
index 00000000000..4dccd7ed3a6
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionTopAppBar.kt
@@ -0,0 +1,161 @@
+package de.westnordost.streetcomplete.screens.settings.quest_selection
+
+import androidx.compose.foundation.layout.Box
+import androidx.compose.foundation.layout.Column
+import androidx.compose.foundation.layout.fillMaxWidth
+import androidx.compose.foundation.layout.padding
+import androidx.compose.material.AppBarDefaults
+import androidx.compose.material.DropdownMenu
+import androidx.compose.material.DropdownMenuItem
+import androidx.compose.material.IconButton
+import androidx.compose.material.MaterialTheme
+import androidx.compose.material.Surface
+import androidx.compose.material.Text
+import androidx.compose.material.TextFieldDefaults
+import androidx.compose.material.TopAppBar
+import androidx.compose.material.primarySurface
+import androidx.compose.runtime.Composable
+import androidx.compose.runtime.getValue
+import androidx.compose.runtime.mutableStateOf
+import androidx.compose.runtime.remember
+import androidx.compose.runtime.setValue
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.text.input.TextFieldValue
+import androidx.compose.ui.text.style.TextOverflow
+import androidx.compose.ui.tooling.preview.Preview
+import androidx.compose.ui.unit.dp
+import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.ui.common.BackIcon
+import de.westnordost.streetcomplete.ui.common.ConfirmationDialog
+import de.westnordost.streetcomplete.ui.common.ExpandableSearchField
+import de.westnordost.streetcomplete.ui.common.MoreIcon
+import de.westnordost.streetcomplete.ui.common.SearchIcon
+
+/** Top bar and search field */
+@Composable fun QuestSelectionTopAppBar(
+    currentPresetName: String,
+    onClickBack: () -> Unit,
+    onUnselectAll: () -> Unit,
+    onReset: () -> Unit,
+    search: TextFieldValue,
+    onSearchChange: (TextFieldValue) -> Unit,
+    modifier: Modifier = Modifier,
+) {
+    var showSearch by remember { mutableStateOf(false) }
+
+    Surface(
+        modifier = modifier,
+        color = MaterialTheme.colors.primarySurface,
+        elevation = AppBarDefaults.TopAppBarElevation,
+    ) {
+        Column {
+            TopAppBar(
+                title = { QuestSelectionTitle(currentPresetName) },
+                navigationIcon = { IconButton(onClick = onClickBack) { BackIcon() } },
+                actions = {
+                    QuestSelectionTopBarActions(
+                        onUnselectAll = onUnselectAll,
+                        onReset = onReset,
+                        onClickSearch = { showSearch = !showSearch }
+                    )
+                },
+                elevation = 0.dp
+            )
+            ExpandableSearchField(
+                expanded = showSearch,
+                onDismiss = {
+                    showSearch = false
+                    onSearchChange(TextFieldValue())
+                },
+                search = search,
+                onSearchChange = onSearchChange,
+                modifier = Modifier
+                    .fillMaxWidth()
+                    .padding(horizontal = 16.dp, vertical = 8.dp),
+                colors = TextFieldDefaults.textFieldColors(
+                    textColor = MaterialTheme.colors.onSurface,
+                    backgroundColor = MaterialTheme.colors.surface
+                )
+            )
+        }
+    }
+}
+
+@Composable
+private fun QuestSelectionTitle(currentPresetName: String) {
+    Column {
+        Text(
+            text = stringResource(R.string.pref_title_quests2),
+            maxLines = 1,
+            overflow = TextOverflow.Ellipsis
+        )
+        Text(
+            text = stringResource(R.string.pref_subtitle_quests_preset_name, currentPresetName),
+            style = MaterialTheme.typography.body1,
+        )
+    }
+}
+
+@Composable
+private fun QuestSelectionTopBarActions(
+    onUnselectAll: () -> Unit,
+    onReset: () -> Unit,
+    onClickSearch: () -> Unit,
+) {
+    var showResetDialog by remember { mutableStateOf(false) }
+    var showDeselectAllDialog by remember { mutableStateOf(false) }
+    var showActionsDropdown by remember { mutableStateOf(false) }
+
+    IconButton(onClick = onClickSearch) { SearchIcon() }
+    Box {
+        IconButton(onClick = { showActionsDropdown = true }) { MoreIcon() }
+        DropdownMenu(
+            expanded = showActionsDropdown,
+            onDismissRequest = { showActionsDropdown = false },
+        ) {
+            DropdownMenuItem(onClick = {
+                showResetDialog = true
+                showActionsDropdown = false
+            }) {
+                Text(stringResource(R.string.action_reset))
+            }
+            DropdownMenuItem(onClick = {
+                showDeselectAllDialog = true
+                showActionsDropdown = false
+            }) {
+                Text(stringResource(R.string.action_deselect_all))
+            }
+        }
+    }
+
+    if (showDeselectAllDialog) {
+        ConfirmationDialog(
+            onDismissRequest = { showDeselectAllDialog = false },
+            onConfirmed = onUnselectAll,
+            text = { Text(stringResource(R.string.pref_quests_deselect_all)) },
+        )
+    }
+
+    if (showResetDialog) {
+        ConfirmationDialog(
+            onDismissRequest = { showResetDialog = false },
+            onConfirmed = onReset,
+            text = { Text(stringResource(R.string.pref_quests_reset)) },
+        )
+    }
+}
+
+@Preview
+@Composable
+private fun PreviewQuestSelectionTopBar() {
+    var searchText by remember { mutableStateOf(TextFieldValue()) }
+    QuestSelectionTopAppBar(
+        currentPresetName = "Test",
+        onClickBack = {},
+        onUnselectAll = {},
+        onReset = {},
+        search = searchText,
+        onSearchChange = { searchText = it },
+    )
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionViewModel.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionViewModel.kt
index 09ea05368d5..ba9c0c96dbb 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionViewModel.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/settings/quest_selection/QuestSelectionViewModel.kt
@@ -27,7 +27,6 @@ abstract class QuestSelectionViewModel : ViewModel() {
     abstract val currentCountry: String?
     abstract val quests: StateFlow<List<QuestSelection>>
 
-    abstract fun isQuestEnabledInCurrentCountry(questType: QuestType): Boolean
     abstract fun selectQuest(questType: QuestType, selected: Boolean)
     abstract fun orderQuest(questType: QuestType, toAfter: QuestType)
     abstract fun unselectAllQuests()
@@ -96,15 +95,6 @@ class QuestSelectionViewModelImpl(
         questTypeOrderController.removeListener(questTypeOrderListener)
     }
 
-    override fun isQuestEnabledInCurrentCountry(questType: QuestType): Boolean {
-        if (questType !is OsmElementQuestType<*>) return true
-        return when (val countries = questType.enabledInCountries) {
-            is AllCountries -> true
-            is AllCountriesExcept -> !countries.exceptions.containsAny(currentCountryCodes)
-            is NoCountriesExcept -> countries.exceptions.containsAny(currentCountryCodes)
-        }
-    }
-
     override fun selectQuest(questType: QuestType, selected: Boolean) {
         launch(IO) {
             visibleQuestTypeController.setVisibility(questType, selected)
@@ -135,8 +125,21 @@ class QuestSelectionViewModelImpl(
             val sortedQuestTypes = questTypeRegistry.toMutableList()
             questTypeOrderController.sort(sortedQuestTypes)
             quests.value = sortedQuestTypes
-                .map { QuestSelection(it, visibleQuestTypeController.isVisible(it)) }
+                .map { QuestSelection(
+                    questType = it,
+                    selected = visibleQuestTypeController.isVisible(it),
+                    enabledInCurrentCountry = isQuestEnabledInCurrentCountry(it)
+                ) }
                 .toMutableList()
         }
     }
+
+    private fun isQuestEnabledInCurrentCountry(questType: QuestType): Boolean {
+        if (questType !is OsmElementQuestType<*>) return true
+        return when (val countries = questType.enabledInCountries) {
+            is AllCountries -> true
+            is AllCountriesExcept -> !countries.exceptions.containsAny(currentCountryCodes)
+            is NoCountriesExcept -> countries.exceptions.containsAny(currentCountryCodes)
+        }
+    }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/ui/common/CenteredLargeTitleHint.kt b/app/src/main/java/de/westnordost/streetcomplete/ui/common/CenteredLargeTitleHint.kt
index 86a65576434..d0dfddf57a5 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/ui/common/CenteredLargeTitleHint.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/ui/common/CenteredLargeTitleHint.kt
@@ -12,6 +12,7 @@ import androidx.compose.ui.unit.dp
 import de.westnordost.streetcomplete.ui.theme.hint
 import de.westnordost.streetcomplete.ui.theme.titleLarge
 
+/** A large hint text shown in the center. Usually used to describe missing content */
 @Composable
 fun CenteredLargeTitleHint(text: String, modifier: Modifier = Modifier) {
     Box(
diff --git a/app/src/main/java/de/westnordost/streetcomplete/ui/common/ConfirmationDialog.kt b/app/src/main/java/de/westnordost/streetcomplete/ui/common/ConfirmationDialog.kt
new file mode 100644
index 00000000000..890efa41122
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/ui/common/ConfirmationDialog.kt
@@ -0,0 +1,45 @@
+package de.westnordost.streetcomplete.ui.common
+
+import androidx.compose.material.AlertDialog
+import androidx.compose.material.MaterialTheme
+import androidx.compose.material.Text
+import androidx.compose.material.TextButton
+import androidx.compose.material.contentColorFor
+import androidx.compose.runtime.Composable
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.graphics.Color
+import androidx.compose.ui.graphics.Shape
+import androidx.compose.ui.res.stringResource
+import androidx.compose.ui.window.DialogProperties
+
+/** Slight specialization of an alert dialog: AlertDialog with OK and Cancel button. Both buttons
+ *  call [onDismissRequest] and the OK button additionally calls [onConfirmed]. */
+@Composable
+fun ConfirmationDialog(
+    onDismissRequest: () -> Unit,
+    onConfirmed: () -> Unit,
+    modifier: Modifier = Modifier,
+    title: @Composable (() -> Unit)? = null,
+    text: @Composable (() -> Unit)? = null,
+    confirmButtonText: String = stringResource(android.R.string.ok),
+    cancelButtonText: String = stringResource(android.R.string.cancel),
+    shape : Shape = MaterialTheme . shapes . medium,
+    backgroundColor: Color = MaterialTheme.colors.surface,
+    contentColor: Color = contentColorFor(backgroundColor),
+    properties: DialogProperties = DialogProperties(),
+) {
+    AlertDialog(
+        onDismissRequest = onDismissRequest,
+        confirmButton = {
+            TextButton(onClick = { onConfirmed(); onDismissRequest() }) { Text(confirmButtonText) }
+        },
+        modifier = modifier,
+        dismissButton = { TextButton(onClick = onDismissRequest) { Text(cancelButtonText) } },
+        title = title,
+        text = text,
+        shape = shape,
+        backgroundColor = backgroundColor,
+        contentColor = contentColor,
+        properties = properties,
+    )
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/ui/common/ExpandableSearchField.kt b/app/src/main/java/de/westnordost/streetcomplete/ui/common/ExpandableSearchField.kt
new file mode 100644
index 00000000000..603b1c4de2f
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/ui/common/ExpandableSearchField.kt
@@ -0,0 +1,48 @@
+package de.westnordost.streetcomplete.ui.common
+
+import androidx.compose.animation.AnimatedVisibility
+import androidx.compose.foundation.layout.fillMaxWidth
+import androidx.compose.material.IconButton
+import androidx.compose.material.TextField
+import androidx.compose.material.TextFieldColors
+import androidx.compose.material.TextFieldDefaults
+import androidx.compose.runtime.Composable
+import androidx.compose.runtime.LaunchedEffect
+import androidx.compose.runtime.remember
+import androidx.compose.ui.Modifier
+import androidx.compose.ui.focus.FocusRequester
+import androidx.compose.ui.focus.focusRequester
+import androidx.compose.ui.text.input.TextFieldValue
+
+/** Expandable text field that can be dismissed and requests focus when it is expanded */
+@Composable
+fun ExpandableSearchField(
+    expanded: Boolean,
+    onDismiss: () -> Unit,
+    search: TextFieldValue,
+    onSearchChange: (TextFieldValue) -> Unit,
+    modifier: Modifier = Modifier,
+    colors: TextFieldColors = TextFieldDefaults.textFieldColors(),
+) {
+    val filterFocusRequester = remember { FocusRequester() }
+
+    fun onClickClear() {
+        if (search.text.isBlank()) onDismiss()
+        else onSearchChange(TextFieldValue())
+    }
+
+    LaunchedEffect(expanded) {
+        if (expanded) filterFocusRequester.requestFocus()
+    }
+    AnimatedVisibility(visible = expanded, modifier = Modifier.fillMaxWidth()) {
+        TextField(
+            value = search,
+            onValueChange = onSearchChange,
+            modifier = modifier.focusRequester(filterFocusRequester),
+            leadingIcon = { SearchIcon() },
+            trailingIcon = { IconButton(onClick = ::onClickClear) { ClearIcon() } },
+            singleLine = true,
+            colors = colors
+        )
+    }
+}
diff --git a/app/src/main/res/menu/menu_quest_selection.xml b/app/src/main/res/menu/menu_quest_selection.xml
deleted file mode 100644
index 8a0ba1c9b61..00000000000
--- a/app/src/main/res/menu/menu_quest_selection.xml
+++ /dev/null
@@ -1,19 +0,0 @@
-<menu xmlns:android="http://schemas.android.com/apk/res/android"
-      xmlns:app="http://schemas.android.com/apk/res-auto">
-
-    <item android:id="@+id/action_reset"
-        android:title="@string/action_reset"
-        android:orderInCategory="1"
-        app:showAsAction="never"
-        />
-    <item android:id="@+id/action_deselect_all"
-        android:title="@string/action_deselect_all"
-        android:orderInCategory="2"
-        app:showAsAction="never" />
-
-    <item android:id="@+id/action_search"
-        android:title="@string/action_search"
-        app:actionViewClass="androidx.appcompat.widget.SearchView"
-        android:icon="@drawable/ic_search_24dp"
-        app:showAsAction="ifRoom"/>
-</menu>
