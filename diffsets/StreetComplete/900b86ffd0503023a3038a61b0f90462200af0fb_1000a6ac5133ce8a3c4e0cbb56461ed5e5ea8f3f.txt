diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/LastPickedValuesStore.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/LastPickedValuesStore.kt
index 73ac781da94..74252140ecf 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/LastPickedValuesStore.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/LastPickedValuesStore.kt
@@ -46,26 +46,20 @@ fun <T> LastPickedValuesStore<T>.getWeighted(
     itemPool: List<GroupableDisplayItem<T>>
 ): List<GroupableDisplayItem<T>> {
     val stringToItem = itemPool.associateBy { it.value.toString() }
-    val weightedItems = getWeighted(key, count, historyCount, stringToItem::get)
-    return weightedItems.padWith(defaultItems).toList()
+    val lastPickedItems = get(key).map { stringToItem.get(it) }
+    return lastPickedItems.mostCommonWithin(count, historyCount).padWith(defaultItems).toList()
 }
 
-fun <T, I> LastPickedValuesStore<T>.getWeighted(
-    key: String,
-    count: Int,
-    historyCount: Int,
-    deserialize: (String) -> I?
-): Sequence<I> {
-    val lastPickedItems = get(key).map(deserialize)
-    val counts = lastPickedItems.countUniqueNonNull(historyCount, count)
-    val topRecent = counts.keys.sortedByDescending { counts.get(it) }
-    val latest = lastPickedItems.take(1).filterNotNull()
-    val items = (latest + topRecent).distinct().take(count)
+fun <T : Any> Sequence<T?>.mostCommonWithin(count: Int, historyCount: Int): Sequence<T> {
+    val counts = this.countUniqueNonNull(historyCount, count)
+    val top = counts.keys.sortedByDescending { counts.get(it) }
+    val latest = this.take(1).filterNotNull()
+    val items = (latest + top).distinct().take(count)
     return items.sortedByDescending { counts.get(it) }
 }
 
 // Counts at least the first `minItems`, keeps going until it finds at least `target` unique values
-private fun <T> Sequence<T?>.countUniqueNonNull(minItems: Int, target: Int): Map<T, Int> {
+private fun <T : Any> Sequence<T?>.countUniqueNonNull(minItems: Int, target: Int): Map<T, Int> {
     val counts = mutableMapOf<T, Int>()
     val items = takeAtLeastWhile(minItems) { counts.size < target }.filterNotNull()
     return items.groupingBy { it }.eachCountTo(counts)
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/building_levels/AddBuildingLevelsForm.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/building_levels/AddBuildingLevelsForm.kt
index 9d7529b9b6f..55226bb9d2a 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/building_levels/AddBuildingLevelsForm.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/building_levels/AddBuildingLevelsForm.kt
@@ -16,7 +16,7 @@ import de.westnordost.streetcomplete.databinding.QuestBuildingLevelsLastPickedBu
 import de.westnordost.streetcomplete.quests.AbstractQuestFormAnswerFragment
 import de.westnordost.streetcomplete.quests.LastPickedValuesStore
 import de.westnordost.streetcomplete.quests.AnswerItem
-import de.westnordost.streetcomplete.quests.getWeighted
+import de.westnordost.streetcomplete.quests.mostCommonWithin
 import de.westnordost.streetcomplete.util.TextChangedWatcher
 
 class AddBuildingLevelsForm : AbstractQuestFormAnswerFragment<BuildingLevelsAnswer>() {
@@ -32,7 +32,8 @@ class AddBuildingLevelsForm : AbstractQuestFormAnswerFragment<BuildingLevelsAnsw
     private val roofLevels get() = binding.roofLevelsInput.text?.toString().orEmpty().trim()
 
     private val lastPickedAnswers by lazy {
-        favs.getWeighted(javaClass.simpleName, 5, 30) { it.toBuildingLevelAnswer() }
+        favs.get(javaClass.simpleName).map { it.toBuildingLevelAnswer() }
+            .mostCommonWithin(5, 30)
             .sortedWith(compareBy<BuildingLevelsAnswer> { it.levels }.thenBy { it.roofLevels })
             .toList()
     }
