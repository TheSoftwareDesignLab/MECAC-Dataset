diff --git a/app/src/main/java/de/westnordost/streetcomplete/data/edithistory/Edit.kt b/app/src/main/java/de/westnordost/streetcomplete/data/edithistory/Edit.kt
index 914bab6b5fb..1bb8239fecb 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/data/edithistory/Edit.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/data/edithistory/Edit.kt
@@ -3,6 +3,7 @@ package de.westnordost.streetcomplete.data.edithistory
 import de.westnordost.streetcomplete.data.osm.mapdata.LatLon
 import de.westnordost.streetcomplete.data.quest.OsmNoteQuestKey
 import de.westnordost.streetcomplete.data.quest.OsmQuestKey
+import kotlinx.serialization.Serializable
 
 interface Edit {
     val key: EditKey
@@ -12,9 +13,14 @@ interface Edit {
     val isSynced: Boolean?
 }
 
+@Serializable
 sealed class EditKey
 
+@Serializable
 data class ElementEditKey(val id: Long) : EditKey()
+@Serializable
 data class NoteEditKey(val id: Long) : EditKey()
+@Serializable
 data class OsmQuestHiddenKey(val osmQuestKey: OsmQuestKey) : EditKey()
+@Serializable
 data class OsmNoteQuestHiddenKey(val osmNoteQuestKey: OsmNoteQuestKey) : EditKey()
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistorySidebar.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistorySidebar.kt
index 18c179f0691..66327b4adc5 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistorySidebar.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistorySidebar.kt
@@ -47,6 +47,8 @@ import de.westnordost.streetcomplete.ui.ktx.isItemAtIndexFullyVisible
 import de.westnordost.streetcomplete.ui.theme.titleSmall
 import de.westnordost.streetcomplete.util.ktx.toast
 import kotlinx.coroutines.launch
+import kotlinx.serialization.encodeToString
+import kotlinx.serialization.json.Json
 import java.text.DateFormat
 
 /** Shows the edit history in a sidebar. The edit history is grouped by time and date, ordered by
@@ -124,7 +126,10 @@ fun EditHistorySidebar(
                 bottom = insets.calculateBottomPadding() + 22.dp // to align with undo button
             )
         ) {
-            items(editItems) { editItem ->
+            items(
+                items = editItems,
+                key = { Json.encodeToString(it.edit.key) }
+            ) { editItem ->
                 Column {
                     DateTimeHeader(
                         timestamp = editItem.edit.createdTimestamp,
