diff --git a/app/src/main/java/de/westnordost/streetcomplete/data/edithistory/EditHistoryController.kt b/app/src/main/java/de/westnordost/streetcomplete/data/edithistory/EditHistoryController.kt
index 762b9877dd0..fcc16a71a3f 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/data/edithistory/EditHistoryController.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/data/edithistory/EditHistoryController.kt
@@ -62,7 +62,8 @@ class EditHistoryController(
         osmQuestsHiddenController.addListener(osmQuestHiddenListener)
     }
 
-    fun undo(edit: Edit): Boolean {
+    fun undo(editKey: EditKey): Boolean {
+        val edit = get(editKey) ?: return false
         if (!edit.isUndoable) return false
         return when (edit) {
             is ElementEdit -> elementEditsController.undo(edit)
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistoryFragment.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistoryFragment.kt
index 9676c9425c9..4adcce9b72a 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistoryFragment.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistoryFragment.kt
@@ -51,7 +51,7 @@ class EditHistoryFragment : Fragment(R.layout.fragment_edit_history_list) {
                         editItem.edit,
                         element,
                         viewModel.featureDictionaryLazy,
-                        viewModel::undo
+                        { viewModel.undo(it.key) }
                     ).show()
                 }
             } else {
diff --git a/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistoryViewModel.kt b/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistoryViewModel.kt
index 9e290a54d45..c6fa45ea9f5 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistoryViewModel.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/screens/main/edithistory/EditHistoryViewModel.kt
@@ -34,7 +34,7 @@ abstract class EditHistoryViewModel : ViewModel() {
     abstract suspend fun getEditGeometry(edit: Edit): ElementGeometry
 
     abstract fun select(editKey: EditKey?)
-    abstract fun undo(edit: Edit)
+    abstract fun undo(editKey: EditKey)
 
     abstract val featureDictionaryLazy: Lazy<FeatureDictionary>
 }
@@ -91,9 +91,9 @@ class EditHistoryViewModelImpl(
             else null
     }
 
-    override fun undo(edit: Edit) {
+    override fun undo(editKey: EditKey) {
         launch(IO) {
-            editHistoryController.undo(edit)
+            editHistoryController.undo(editKey)
         }
     }
 
