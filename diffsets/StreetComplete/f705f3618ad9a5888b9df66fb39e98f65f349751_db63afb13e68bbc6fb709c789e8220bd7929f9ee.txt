diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/Surface.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/Surface.kt
deleted file mode 100644
index 93ed76c6622..00000000000
--- a/app/src/main/java/de/westnordost/streetcomplete/osm/Surface.kt
+++ /dev/null
@@ -1,31 +0,0 @@
-package de.westnordost.streetcomplete.osm
-
-val SOFT_SURFACES = setOf(
-    "ground", "earth", "dirt", "grass", "sand", "mud", "ice", "salt", "snow", "woodchips"
-)
-
-val ANYTHING_UNPAVED = SOFT_SURFACES + setOf(
-    "unpaved", "compacted", "gravel", "fine_gravel", "pebblestone", "grass_paver",
-)
-
-val ANYTHING_FULLY_PAVED = setOf(
-    "paved", "asphalt", "cobblestone", "cobblestone:flattened", "sett",
-    "concrete", "concrete:plates", "paving_stones",
-    "metal", "wood", "unhewn_cobblestone"
-)
-
-val ANYTHING_PAVED = ANYTHING_FULLY_PAVED + setOf(
-    "concrete:lanes"
-)
-
-val INVALID_SURFACES_FOR_TRACKTYPES = mapOf(
-    "grade1" to ANYTHING_UNPAVED,
-    "grade2" to SOFT_SURFACES,
-    "grade3" to ANYTHING_FULLY_PAVED,
-    "grade4" to ANYTHING_FULLY_PAVED,
-    "grade5" to ANYTHING_FULLY_PAVED,
-)
-
-fun isSurfaceAndTracktypeMismatching(surface: String, tracktype: String): Boolean {
-    return INVALID_SURFACES_FOR_TRACKTYPES[tracktype]?.contains(surface) == true
-}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurface.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurface.kt
new file mode 100644
index 00000000000..6ac87fabc36
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurface.kt
@@ -0,0 +1,8 @@
+package de.westnordost.streetcomplete.osm.sidewalk_surface
+
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+
+data class LeftAndRightSidewalkSurface(
+    val left: SurfaceAndNote?,
+    val right: SurfaceAndNote?,
+)
diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceCreator.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceCreator.kt
new file mode 100644
index 00000000000..42b891a6f8e
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceCreator.kt
@@ -0,0 +1,25 @@
+package de.westnordost.streetcomplete.osm.sidewalk_surface
+
+import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.expandSides
+import de.westnordost.streetcomplete.osm.hasCheckDateForKey
+import de.westnordost.streetcomplete.osm.mergeSides
+import de.westnordost.streetcomplete.osm.surface.applyTo
+import de.westnordost.streetcomplete.osm.updateCheckDateForKey
+
+fun LeftAndRightSidewalkSurface.applyTo(tags: Tags) {
+    tags.expandSides("sidewalk", "surface")
+    tags.expandSides("sidewalk", "surface:note")
+    tags.expandSides("sidewalk", "smoothness")
+
+    left?.applyTo(tags, "sidewalk:left", updateCheckDate = false)
+    right?.applyTo(tags, "sidewalk:right", updateCheckDate = false)
+
+    tags.mergeSides("sidewalk", "surface")
+    tags.mergeSides("sidewalk", "surface:note")
+    tags.mergeSides("sidewalk", "smoothness")
+
+    if (!tags.hasChanges || tags.hasCheckDateForKey("sidewalk:surface")) {
+        tags.updateCheckDateForKey("sidewalk:surface")
+    }
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceParser.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceParser.kt
new file mode 100644
index 00000000000..4248736c717
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceParser.kt
@@ -0,0 +1,22 @@
+package de.westnordost.streetcomplete.osm.sidewalk_surface
+
+import de.westnordost.streetcomplete.osm.expandSidesTags
+import de.westnordost.streetcomplete.osm.surface.createSurfaceAndNote
+
+fun createSidewalkSurface(tags: Map<String, String>): LeftAndRightSidewalkSurface? {
+    val expandedTags = expandRelevantSidesTags(tags)
+
+    val left = createSurfaceAndNote(expandedTags, "sidewalk:left")
+    val right = createSurfaceAndNote(expandedTags, "sidewalk:right")
+
+    if (left == null && right == null) return null
+
+    return LeftAndRightSidewalkSurface(left, right)
+}
+
+private fun expandRelevantSidesTags(tags: Map<String, String>): Map<String, String> {
+    val result = tags.toMutableMap()
+    result.expandSidesTags("sidewalk", "surface", true)
+    result.expandSidesTags("sidewalk", "surface:note", true)
+    return result
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/surface/Surface.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/Surface.kt
new file mode 100644
index 00000000000..de440f2b307
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/Surface.kt
@@ -0,0 +1,80 @@
+package de.westnordost.streetcomplete.osm.surface
+
+import de.westnordost.streetcomplete.osm.surface.Surface.*
+
+data class SurfaceAndNote(val surface: Surface?, val note: String? = null)
+
+enum class Surface(val osmValue: String?) {
+    ASPHALT("asphalt"),
+    CONCRETE("concrete"),
+    CONCRETE_PLATES("concrete:plates"),
+    CONCRETE_LANES("concrete:lanes"),
+    FINE_GRAVEL("fine_gravel"),
+    PAVING_STONES("paving_stones"),
+    COMPACTED("compacted"),
+    DIRT("dirt"),
+    MUD("mud"),
+    SETT("sett"),
+    UNHEWN_COBBLESTONE("unhewn_cobblestone"),
+    GRASS_PAVER("grass_paver"),
+    WOOD("wood"),
+    WOODCHIPS("woodchips"),
+    METAL("metal"),
+    GRAVEL("gravel"),
+    PEBBLES("pebblestone"),
+    GRASS("grass"),
+    SAND("sand"),
+    ROCK("rock"),
+    CLAY("clay"),
+    ARTIFICIAL_TURF("artificial_turf"),
+    TARTAN("tartan"),
+
+    // generic surfaces
+    PAVED("paved"),
+    UNPAVED("unpaved"),
+    GROUND("ground"),
+
+    // extra values, handled as synonyms (not selectable)
+    EARTH("earth"), // synonym of "dirt"
+    CHIPSEAL("chipseal"), // subtype/synonym of asphalt
+    METAL_GRID("metal_grid"), // more specific than "metal"
+
+    // these values ideally would be removed from OpenStreetMap, but while they remain
+    // we want to handle them as synonyms
+    SOIL("soil"), // synonym of earth and dirt
+    PAVING_STONES_WITH_WEIRD_SUFFIX("paving_stones:30"), // https://wiki.openstreetmap.org/wiki/Tag%3Asurface%3Dpaving_stones%3A30
+    COBBLESTONE_FLATTENED("cobblestone:flattened"), // =sett with good smoothness
+    BRICK("brick"),
+    BRICKS("bricks"),
+
+    // various possibly valid surfaces not supported as duplicates
+    UNKNOWN(null),
+}
+
+val SELECTABLE_PITCH_SURFACES = listOf(
+    GRASS, ASPHALT, SAND, CONCRETE,
+    CLAY, ARTIFICIAL_TURF, TARTAN, DIRT,
+    FINE_GRAVEL, PAVING_STONES, COMPACTED,
+    SETT, UNHEWN_COBBLESTONE, GRASS_PAVER,
+    WOOD, METAL, GRAVEL, PEBBLES,
+    ROCK, PAVED, UNPAVED, GROUND
+)
+
+val SELECTABLE_WAY_SURFACES = listOf(
+    // paved surfaces
+    ASPHALT, PAVING_STONES, CONCRETE, CONCRETE_PLATES, CONCRETE_LANES,
+    SETT, UNHEWN_COBBLESTONE, GRASS_PAVER, WOOD, METAL,
+    // unpaved surfaces
+    COMPACTED, FINE_GRAVEL, GRAVEL, PEBBLES, WOODCHIPS,
+    // ground surfaces
+    DIRT, MUD, GRASS, SAND, ROCK,
+    // generic surfaces
+    PAVED, UNPAVED, GROUND
+)
+
+private val UNDERSPECIFED_SURFACES = setOf(PAVED, UNPAVED)
+
+val Surface.shouldBeDescribed: Boolean get() = this in UNDERSPECIFED_SURFACES
+
+val SurfaceAndNote.isComplete: Boolean get() =
+    surface != null && (!surface.shouldBeDescribed || note != null)
diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceCreator.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceCreator.kt
new file mode 100644
index 00000000000..2c654fec6ee
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceCreator.kt
@@ -0,0 +1,47 @@
+package de.westnordost.streetcomplete.osm.surface
+
+import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.removeCheckDatesForKey
+import de.westnordost.streetcomplete.osm.updateWithCheckDate
+
+/** Apply the surface and note to the given [tags], with optional [prefix], e.g. "footway" for
+ *  "footway:surface.
+ *  By default the check date is also updated if the surface did not change, specified
+ *  [updateCheckDate] = false if this should not be done. */
+fun SurfaceAndNote.applyTo(tags: Tags, prefix: String? = null, updateCheckDate: Boolean = true) {
+    val osmValue = surface?.osmValue
+    requireNotNull(osmValue) { "Surface must be valid and not null" }
+
+    val pre = if (prefix != null) "$prefix:" else ""
+    val key = "${pre}surface"
+    val previousOsmValue = tags[key]
+
+    val shouldRemoveTracktype = prefix == null && isSurfaceAndTracktypeConflicting(osmValue, tags["tracktype"])
+    if (shouldRemoveTracktype) {
+        tags.remove("tracktype")
+        tags.removeCheckDatesForKey("tracktype")
+    }
+
+    // remove smoothness (etc) tags if surface was changed
+    // or surface can be treated as outdated
+    if ((previousOsmValue != null && previousOsmValue != osmValue) || shouldRemoveTracktype) {
+        getKeysAssociatedWithSurface(pre).forEach { tags.remove(it) }
+    }
+
+    // update surface + check date
+    if (updateCheckDate) {
+        tags.updateWithCheckDate(key, osmValue)
+    } else {
+        tags[key] = osmValue
+    }
+
+    // add/remove note - used to describe generic surfaces
+    if (note != null) {
+        tags["$key:note"] = note
+    } else {
+        tags.remove("$key:note")
+    }
+
+    // always clean up old source tags - source should be in changeset tags
+    tags.remove("source:$key")
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceItem.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceItem.kt
new file mode 100644
index 00000000000..1b248a4465e
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceItem.kt
@@ -0,0 +1,86 @@
+package de.westnordost.streetcomplete.osm.surface
+
+import android.content.res.Resources
+import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.osm.surface.Surface.*
+import de.westnordost.streetcomplete.view.DrawableImage
+import de.westnordost.streetcomplete.view.ResImage
+import de.westnordost.streetcomplete.view.ResText
+import de.westnordost.streetcomplete.view.RotatedCircleDrawable
+import de.westnordost.streetcomplete.view.controller.StreetSideDisplayItem
+import de.westnordost.streetcomplete.view.controller.StreetSideItem2
+import de.westnordost.streetcomplete.view.image_select.DisplayItem
+import de.westnordost.streetcomplete.view.image_select.Item
+
+fun List<Surface>.toItems() = this.map { it.asItem() }
+
+fun Surface.asItem(): DisplayItem<Surface> = Item(this, iconResId, titleResId)
+
+fun Surface.asStreetSideItem(resources: Resources): StreetSideDisplayItem<Surface> =
+    StreetSideItem2(
+        this,
+        ResImage(R.drawable.ic_sidewalk_illustration_yes),
+        ResText(titleResId),
+        ResImage(iconResId),
+        DrawableImage(RotatedCircleDrawable(resources.getDrawable(iconResId)))
+    )
+
+val Surface.titleResId: Int get() = when (this) {
+    ASPHALT, CHIPSEAL -> R.string.quest_surface_value_asphalt
+    CONCRETE -> R.string.quest_surface_value_concrete
+    CONCRETE_PLATES -> R.string.quest_surface_value_concrete_plates
+    CONCRETE_LANES -> R.string.quest_surface_value_concrete_lanes
+    FINE_GRAVEL -> R.string.quest_surface_value_fine_gravel
+    PAVING_STONES, PAVING_STONES_WITH_WEIRD_SUFFIX, BRICK, BRICKS -> R.string.quest_surface_value_paving_stones
+    COMPACTED -> R.string.quest_surface_value_compacted
+    DIRT, SOIL, EARTH -> R.string.quest_surface_value_dirt
+    MUD -> R.string.quest_surface_value_mud
+    SETT, COBBLESTONE_FLATTENED -> R.string.quest_surface_value_sett
+    UNHEWN_COBBLESTONE -> R.string.quest_surface_value_unhewn_cobblestone
+    GRASS_PAVER -> R.string.quest_surface_value_grass_paver
+    WOOD -> R.string.quest_surface_value_wood
+    WOODCHIPS -> R.string.quest_surface_value_woodchips
+    METAL, METAL_GRID -> R.string.quest_surface_value_metal
+    GRAVEL -> R.string.quest_surface_value_gravel
+    PEBBLES -> R.string.quest_surface_value_pebblestone
+    GRASS -> R.string.quest_surface_value_grass
+    SAND -> R.string.quest_surface_value_sand
+    ROCK -> R.string.quest_surface_value_rock
+    CLAY -> R.string.quest_surface_value_clay
+    ARTIFICIAL_TURF -> R.string.quest_surface_value_artificial_turf
+    TARTAN -> R.string.quest_surface_value_tartan
+    PAVED -> R.string.quest_surface_value_paved
+    UNPAVED -> R.string.quest_surface_value_unpaved
+    GROUND -> R.string.quest_surface_value_ground
+    UNKNOWN -> R.string.unknown_surface_title
+}
+
+val Surface.iconResId: Int get() = when (this) {
+    ASPHALT, CHIPSEAL -> R.drawable.surface_asphalt
+    CONCRETE -> R.drawable.surface_concrete
+    CONCRETE_PLATES -> R.drawable.surface_concrete_plates
+    CONCRETE_LANES -> R.drawable.surface_concrete_lanes
+    FINE_GRAVEL -> R.drawable.surface_fine_gravel
+    PAVING_STONES, PAVING_STONES_WITH_WEIRD_SUFFIX, BRICK, BRICKS -> R.drawable.surface_paving_stones
+    COMPACTED -> R.drawable.surface_compacted
+    DIRT, SOIL, EARTH -> R.drawable.surface_dirt
+    MUD -> R.drawable.surface_mud
+    SETT, COBBLESTONE_FLATTENED -> R.drawable.surface_sett
+    UNHEWN_COBBLESTONE -> R.drawable.surface_cobblestone
+    GRASS_PAVER -> R.drawable.surface_grass_paver
+    WOOD -> R.drawable.surface_wood
+    WOODCHIPS -> R.drawable.surface_woodchips
+    METAL, METAL_GRID -> R.drawable.surface_metal
+    GRAVEL -> R.drawable.surface_gravel
+    PEBBLES -> R.drawable.surface_pebblestone
+    GRASS -> R.drawable.surface_grass
+    SAND -> R.drawable.surface_sand
+    ROCK -> R.drawable.surface_rock
+    CLAY -> R.drawable.surface_tennis_clay
+    ARTIFICIAL_TURF -> R.drawable.surface_artificial_turf
+    TARTAN -> R.drawable.surface_tartan
+    PAVED -> R.drawable.surface_paved_area
+    UNPAVED -> R.drawable.surface_unpaved_area
+    GROUND -> R.drawable.surface_ground_area
+    UNKNOWN -> R.drawable.space_128dp
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceParser.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceParser.kt
new file mode 100644
index 00000000000..59440dcbd35
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceParser.kt
@@ -0,0 +1,21 @@
+package de.westnordost.streetcomplete.osm.surface
+
+/** Parse the surface and optional associated note from the given [tags].
+ *  Specify a [prefix] if you want for example the surface of the "footway" (then looks for
+ *  "footway:surface") */
+fun createSurfaceAndNote(tags: Map<String, String>, prefix: String? = null): SurfaceAndNote? {
+    val pre = if (prefix != null) "$prefix:" else ""
+    val note = tags["${pre}surface:note"]
+    val surface = createSurface(tags["${pre}surface"])
+    if (surface == null && note == null) return null
+    return SurfaceAndNote(surface, note)
+}
+
+fun createSurface(surface: String?): Surface? {
+    if (surface == null) return null
+    if (surface in INVALID_SURFACES) return null
+    val foundSurface = Surface.values().find { it.osmValue == surface }
+
+    return foundSurface
+        ?: if (";" in surface || "<" in surface) null else Surface.UNKNOWN
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceUtils.kt b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceUtils.kt
new file mode 100644
index 00000000000..fc1bf06135e
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/osm/surface/SurfaceUtils.kt
@@ -0,0 +1,78 @@
+package de.westnordost.streetcomplete.osm.surface
+
+import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.getLastCheckDateKeys
+
+val INVALID_SURFACES = setOf(
+    "cobblestone", // https://wiki.openstreetmap.org/wiki/Tag%3Asurface%3Dcobblestone
+    "cement", // https://community.openstreetmap.org/t/mysterious-surface-cement/5158 and https://wiki.openstreetmap.org/wiki/Tag:surface%3Dconcrete
+)
+
+val SOFT_SURFACES = setOf(
+    "ground", "earth", "dirt", "soil", "grass", "sand", "mud", "ice", "salt", "snow", "woodchips"
+)
+
+val ANYTHING_UNPAVED = SOFT_SURFACES + setOf(
+    "unpaved", "compacted", "gravel", "fine_gravel", "pebblestone", "grass_paver"
+)
+
+val ANYTHING_FULLY_PAVED = setOf(
+    "paved", "asphalt", "cobblestone", "cobblestone:flattened", "sett",
+    "concrete", "concrete:plates", "paving_stones",
+    "metal", "wood", "unhewn_cobblestone", "chipseal",
+    "brick", "bricks", "cobblestone:flattened", "paving_stones:30",
+)
+
+val ANYTHING_PAVED = ANYTHING_FULLY_PAVED + setOf(
+    "concrete:lanes"
+)
+
+val INVALID_SURFACES_FOR_TRACKTYPES = mapOf(
+    "grade1" to ANYTHING_UNPAVED,
+    "grade2" to SOFT_SURFACES,
+    "grade3" to ANYTHING_FULLY_PAVED,
+    "grade4" to ANYTHING_FULLY_PAVED,
+    "grade5" to ANYTHING_FULLY_PAVED,
+)
+
+/** @return whether the given tag value for [surface] contradicts the tag value for [tracktype].
+ *  E.g. surface=asphalt but tracktype=grade5. */
+fun isSurfaceAndTracktypeConflicting(surface: String, tracktype: String?): Boolean =
+    INVALID_SURFACES_FOR_TRACKTYPES[tracktype]?.contains(surface) == true
+
+/** Sets the common surface of the foot- and cycleway parts into the surface tag, if any. If the
+ *  surfaces of the foot- and cycleway parts have nothing in common, removes the surface tag */
+fun updateCommonSurfaceFromFootAndCyclewaySurface(tags: Tags) {
+    val footwaySurface = tags["footway:surface"]
+    val cyclewaySurface = tags["cycleway:surface"]
+    if (cyclewaySurface != null && footwaySurface != null) {
+        val commonSurface = getCommonSurface(footwaySurface, cyclewaySurface)
+        if (commonSurface != null) {
+            SurfaceAndNote(createSurface(commonSurface), tags["surface:note"]).applyTo(tags)
+        } else {
+            tags.remove("surface")
+            tags.remove("surface:note")
+            getKeysAssociatedWithSurface().forEach { tags.remove(it) }
+        }
+    }
+}
+
+private fun getCommonSurface(vararg surface: String?): String?  = when {
+    surface.any { it == null } -> null
+    surface.all { it == surface.firstOrNull() } -> surface.firstOrNull()
+    surface.all { it in ANYTHING_PAVED } -> "paved"
+    surface.all { it in ANYTHING_UNPAVED } -> "unpaved"
+    else -> null
+}
+
+fun getKeysAssociatedWithSurface(prefix: String = ""): Set<String> =
+    setOf(
+        "${prefix}surface:grade",
+        "${prefix}surface:colour",
+        "source:${prefix}surface",
+        "${prefix}smoothness",
+        "${prefix}smoothness:date",
+        "source:${prefix}smoothness",
+    ) +
+        getLastCheckDateKeys("${prefix}surface") +
+        getLastCheckDateKeys("${prefix}smoothness")
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/AImageSelectOverlayForm.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/AImageSelectOverlayForm.kt
index 0cd2c4cf369..5577d110e13 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/overlays/AImageSelectOverlayForm.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/AImageSelectOverlayForm.kt
@@ -31,7 +31,7 @@ abstract class AImageSelectOverlayForm<I> : AbstractOverlayForm() {
     override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
         super.onViewCreated(view, savedInstanceState)
 
-        binding.selectButton.setOnClickListener {
+        binding.selectButton.root.setOnClickListener {
             ImageListPickerDialog(requireContext(), items, cellLayoutId, itemsPerRow) { item ->
                 if (item != selectedItem) {
                     selectedItem = item
@@ -42,18 +42,18 @@ abstract class AImageSelectOverlayForm<I> : AbstractOverlayForm() {
 
         if (savedInstanceState != null) onLoadInstanceState(savedInstanceState)
 
-        LayoutInflater.from(requireContext()).inflate(cellLayoutId, binding.selectedCellView, true)
-        binding.selectedCellView.children.first().background = null
+        LayoutInflater.from(requireContext()).inflate(cellLayoutId, binding.selectButton.selectedCellView, true)
+        binding.selectButton.selectedCellView.children.first().background = null
 
         updateSelectedCell()
     }
 
     private fun updateSelectedCell() {
         val item = selectedItem
-        binding.selectTextView.isGone = item != null
-        binding.selectedCellView.isGone = item == null
+        binding.selectButton.selectTextView.isGone = item != null
+        binding.selectButton.selectedCellView.isGone = item == null
         if (item != null) {
-            ItemViewHolder(binding.selectedCellView).bind(item)
+            ItemViewHolder(binding.selectButton.selectedCellView).bind(item)
         }
     }
 
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/Color.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/Color.kt
index 1c6bf746ae1..c56d9df73ac 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/overlays/Color.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/Color.kt
@@ -11,12 +11,13 @@ package de.westnordost.streetcomplete.overlays
  *
  *   The palette is loosely based on Color Universal Design (CUD) by Masataka Okabe and Kei Ito's
  *   color palette (https://jfly.uni-koeln.de/color/), compare:
- *   https://davidmathlogic.com/colorblind/#%23000000-%230072B2-%2356B4E9-%23CC79A7-%23009E73-%23D55E00-%23E69F00-%23F0E442
+ *   https://davidmathlogic.com/colorblind/#%23000000-%230072B2-%2356B4E9-%23CC79A7-%23009E73-%23D55E00-%23E69F00-%23F0E442-%23DDDDDD
  *
  *   However,
  *   - the colors have been made more vibrant
  *   - and a few added
  *   - balanced to not be too close to the colors used on the background map
+ *   - gray colour was added for emergency use
  *
  *   Also, it has been made so that black and crimson stand out, because these two are reserved in
  *   all overlays as having a special meaning
@@ -39,6 +40,8 @@ object Color {
     const val ORANGE = "#F37D1E"
     const val GOLD = "#EEBD0D"
     const val LIME = "#B6EF28"
+    // extra gray colour - works, but better to avoid it
+    const val GRAY = "#dddddd"
 
     // note that AQUAMARINE and TEAL look like SKY and BLUE for Blue-yellow color blind people
     // (~0.01% of population)
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/OverlaysModule.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/OverlaysModule.kt
index 46c6932ed02..fce476b20a5 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/overlays/OverlaysModule.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/OverlaysModule.kt
@@ -6,6 +6,7 @@ import de.westnordost.streetcomplete.overlays.cycleway.CyclewayOverlay
 import de.westnordost.streetcomplete.overlays.shops.ShopsOverlay
 import de.westnordost.streetcomplete.overlays.sidewalk.SidewalkOverlay
 import de.westnordost.streetcomplete.overlays.street_parking.StreetParkingOverlay
+import de.westnordost.streetcomplete.overlays.surface.SurfaceOverlay
 import de.westnordost.streetcomplete.overlays.way_lit.WayLitOverlay
 import org.koin.core.qualifier.named
 import org.koin.dsl.module
@@ -20,5 +21,6 @@ val overlaysModule = module {
         3 to AddressOverlay(get(named("CountryBoundariesFuture"))),
         4 to ShopsOverlay(get(named("FeatureDictionaryFuture"))),
         5 to CyclewayOverlay(get(), get(named("CountryBoundariesFuture"))),
+        6 to SurfaceOverlay(),
     )) }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/cycleway/CyclewayOverlay.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/cycleway/CyclewayOverlay.kt
index 3c77793a78a..81117b80477 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/overlays/cycleway/CyclewayOverlay.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/cycleway/CyclewayOverlay.kt
@@ -11,7 +11,6 @@ import de.westnordost.streetcomplete.data.osm.mapdata.MapDataWithGeometry
 import de.westnordost.streetcomplete.data.osm.mapdata.filter
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement
 import de.westnordost.streetcomplete.osm.ALL_ROADS
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.MAXSPEED_TYPE_KEYS
 import de.westnordost.streetcomplete.osm.bicycle_boulevard.BicycleBoulevard
 import de.westnordost.streetcomplete.osm.bicycle_boulevard.createBicycleBoulevard
@@ -22,6 +21,7 @@ import de.westnordost.streetcomplete.osm.cycleway.isAmbiguous
 import de.westnordost.streetcomplete.osm.cycleway_separate.SeparateCycleway
 import de.westnordost.streetcomplete.osm.cycleway_separate.createSeparateCycleway
 import de.westnordost.streetcomplete.osm.isPrivateOnFoot
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.overlays.Color
 import de.westnordost.streetcomplete.overlays.Overlay
 import de.westnordost.streetcomplete.overlays.PolylineStyle
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/sidewalk/SidewalkOverlay.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/sidewalk/SidewalkOverlay.kt
index 5d2d084bb03..1330d0b1443 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/overlays/sidewalk/SidewalkOverlay.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/sidewalk/SidewalkOverlay.kt
@@ -7,7 +7,6 @@ import de.westnordost.streetcomplete.data.osm.mapdata.MapDataWithGeometry
 import de.westnordost.streetcomplete.data.osm.mapdata.filter
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.PEDESTRIAN
 import de.westnordost.streetcomplete.osm.ALL_ROADS
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.MAXSPEED_TYPE_KEYS
 import de.westnordost.streetcomplete.osm.cycleway_separate.SeparateCycleway
 import de.westnordost.streetcomplete.osm.cycleway_separate.createSeparateCycleway
@@ -15,6 +14,7 @@ import de.westnordost.streetcomplete.osm.isPrivateOnFoot
 import de.westnordost.streetcomplete.osm.sidewalk.Sidewalk
 import de.westnordost.streetcomplete.osm.sidewalk.any
 import de.westnordost.streetcomplete.osm.sidewalk.createSidewalkSides
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.overlays.AbstractOverlayForm
 import de.westnordost.streetcomplete.overlays.Color
 import de.westnordost.streetcomplete.overlays.Overlay
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceAndNoteViewController.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceAndNoteViewController.kt
new file mode 100644
index 00000000000..2b17dd3ced7
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceAndNoteViewController.kt
@@ -0,0 +1,104 @@
+package de.westnordost.streetcomplete.overlays.surface
+
+import android.view.LayoutInflater
+import android.view.ViewGroup
+import android.widget.EditText
+import android.widget.TextView
+import androidx.core.view.children
+import androidx.core.view.isGone
+import androidx.core.widget.doAfterTextChanged
+import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.asItem
+import de.westnordost.streetcomplete.osm.surface.shouldBeDescribed
+import de.westnordost.streetcomplete.osm.surface.toItems
+import de.westnordost.streetcomplete.quests.surface.DescribeGenericSurfaceDialog
+import de.westnordost.streetcomplete.util.ktx.nonBlankTextOrNull
+import de.westnordost.streetcomplete.view.image_select.DisplayItem
+import de.westnordost.streetcomplete.view.image_select.ImageListPickerDialog
+import de.westnordost.streetcomplete.view.image_select.ItemViewHolder
+
+/** Manages UI for inputting the surface and conditionally the surface description / note.
+ *  Tapping on the [selectButton] opens a chooser dialog for the [selectableSurfaces]. The selected
+ *  surface is shown in the [selectedCellView] and if nothing is selected (so far), the
+ *  [selectTextView] is shown.
+ *  If the user chose a generic surface or there is already a note, the [noteInput] is shown. */
+class SurfaceAndNoteViewController(
+    private val selectButton: ViewGroup,
+    private val noteInput: EditText,
+    private val selectedCellView: ViewGroup,
+    private val selectTextView: TextView,
+    selectableSurfaces: List<Surface>
+) {
+    var value: SurfaceAndNote?
+    set(value) {
+        selectedSurfaceItem = value?.surface?.asItem()
+        noteText = value?.note
+    }
+    get() {
+        val surface = selectedSurfaceItem?.value
+        val note = noteText
+        return if (surface == null && note == null) null else SurfaceAndNote(surface, note)
+    }
+
+    private var selectedSurfaceItem: DisplayItem<Surface>? = null
+        set(value) {
+            field = value
+            updateSelectedCell()
+            updateNoteVisibility()
+        }
+
+    private var noteText: String?
+        set(value) {
+            noteInput.setText(value)
+            updateNoteVisibility()
+        }
+        get() = noteInput.nonBlankTextOrNull
+
+    private val cellLayoutId: Int = R.layout.cell_labeled_icon_select
+    private val items: List<DisplayItem<Surface>> = selectableSurfaces.toItems()
+
+    var onInputChanged: (() -> Unit)? = null
+
+    init {
+        noteInput.doAfterTextChanged { onInputChanged?.invoke() }
+
+        selectButton.setOnClickListener {
+            collectSurfaceData { surface: Surface, note: String? ->
+                selectedSurfaceItem = surface.asItem()
+                noteText = note
+                onInputChanged?.invoke()
+            }
+        }
+
+        LayoutInflater.from(selectButton.context).inflate(cellLayoutId, selectedCellView, true)
+        selectButton.children.first().background = null
+    }
+
+    private fun updateSelectedCell() {
+        val item = selectedSurfaceItem
+        selectTextView.isGone = item != null
+        selectedCellView.isGone = item == null
+        if (item != null) {
+            ItemViewHolder(selectedCellView).bind(item)
+        }
+    }
+
+    private fun updateNoteVisibility() {
+        noteInput.isGone = noteInput.nonBlankTextOrNull == null && selectedSurfaceItem?.value?.shouldBeDescribed != true
+    }
+
+    private fun collectSurfaceData(callback: (Surface, String?) -> Unit) {
+        ImageListPickerDialog(selectButton.context, items, cellLayoutId, 2) { item ->
+            val value = item.value
+            if (value != null && value.shouldBeDescribed) {
+                DescribeGenericSurfaceDialog(selectButton.context) { description ->
+                    callback(item.value!!, description)
+                }.show()
+            } else {
+                callback(item.value!!, null)
+            }
+        }.show()
+    }
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceColorMapping.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceColorMapping.kt
new file mode 100644
index 00000000000..ab976bb8d8b
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceColorMapping.kt
@@ -0,0 +1,80 @@
+package de.westnordost.streetcomplete.overlays.surface
+
+import de.westnordost.streetcomplete.data.osm.mapdata.Element
+import de.westnordost.streetcomplete.osm.isPrivateOnFoot
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.Surface.*
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.isComplete
+import de.westnordost.streetcomplete.overlays.Color
+
+/*
+ * Design considerations:
+ * - use standard colour set, for consistency and for better support for colour-blind people
+ *  - it is OK to use some extra colours if absolutely needed
+ *
+ * - red is reserved for missing data
+ * - black is reserved for generic surface with note tag
+ *
+ * - similar surface should have similar colours
+ *  - all paved ones are one such group
+ *  - all unpaved ones are another
+ *  - grass paver and compacted being high quality unpaved, unhewn cobblestone being low quality unpaved
+ *    should be on border between these two groups
+ *
+ * - asphalt, concrete, paving stones are associated with grey
+ *   but colouring these surfaces as grey resulted in really depressing, unfunny
+ *   and soul-crushing display in cities where everything is well paved.
+ *   Blue is more fun and less sad (while it will not convince anyone
+ *   that concrete desert is a good thing).
+ *
+ * - highly unusual (for roads and paths) surfaces also got black colour
+ * - due to running out of colors all well paved surfaces get the same colour
+ * - due to running out of colours fine gravel, gravel, pebbles, rock got gray surface
+ * - dashes were tested but due to limitation of Tangram were not working well and were
+ *   incapable of replacing colour coding
+ *
+ * - ideally, sand would have colour close to yellow and grass colour close to green caused
+ *   by extremely strong association between surface and colour
+ */
+val Surface.color get() = when (this) {
+    ASPHALT, CHIPSEAL, CONCRETE, PAVING_STONES, PAVING_STONES_WITH_WEIRD_SUFFIX, BRICK, BRICKS
+                       -> Color.BLUE
+    WOOD, METAL, METAL_GRID
+                       -> Color.SKY
+    CONCRETE_PLATES, CONCRETE_LANES, SETT, COBBLESTONE_FLATTENED
+                       -> Color.CYAN
+    UNHEWN_COBBLESTONE, GRASS_PAVER -> Color.AQUAMARINE
+    COMPACTED, FINE_GRAVEL
+                       -> Color.TEAL
+    SAND               -> Color.ORANGE
+    GRASS              -> Color.LIME
+    DIRT, SOIL, EARTH, MUD, GROUND, WOODCHIPS
+                       -> Color.GOLD
+    GRAVEL, PEBBLES, ROCK
+                       -> Color.GRAY
+    CLAY, ARTIFICIAL_TURF, TARTAN
+                       -> Color.BLACK // not encountered in normal situations, get the same as surface with surface:note
+    UNKNOWN, PAVED, UNPAVED
+                       -> Color.BLACK
+}
+
+fun SurfaceAndNote?.getColor(element: Element): String =
+    if (this?.isComplete != true) {
+        // not set but indoor, private or just a "virtual" link -> do not highlight as missing
+        if (isIndoor(element.tags) || isPrivateOnFoot(element) || isLink(element.tags)) {
+            Color.INVISIBLE
+        } else {
+            Color.DATA_REQUESTED
+        }
+    } else {
+        surface!!.color
+    }
+
+private fun isIndoor(tags: Map<String, String>): Boolean = tags["indoor"] == "yes"
+
+private fun isLink(tags: Map<String, String>): Boolean =
+    tags["path"] == "link"
+    || tags["footway"] == "link"
+    || tags["cycleway"] == "link"
+    || tags["bridleway"] == "link"
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceOverlay.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceOverlay.kt
new file mode 100644
index 00000000000..78566b8b15a
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceOverlay.kt
@@ -0,0 +1,71 @@
+package de.westnordost.streetcomplete.overlays.surface
+
+import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.data.osm.mapdata.Element
+import de.westnordost.streetcomplete.data.osm.mapdata.MapDataWithGeometry
+import de.westnordost.streetcomplete.data.osm.mapdata.filter
+import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.*
+import de.westnordost.streetcomplete.osm.ALL_PATHS
+import de.westnordost.streetcomplete.osm.ALL_ROADS
+import de.westnordost.streetcomplete.osm.surface.createSurfaceAndNote
+import de.westnordost.streetcomplete.overlays.Color
+import de.westnordost.streetcomplete.overlays.Overlay
+import de.westnordost.streetcomplete.overlays.PolygonStyle
+import de.westnordost.streetcomplete.overlays.PolylineStyle
+import de.westnordost.streetcomplete.overlays.StrokeStyle
+import de.westnordost.streetcomplete.overlays.Style
+import de.westnordost.streetcomplete.quests.surface.AddCyclewayPartSurface
+import de.westnordost.streetcomplete.quests.surface.AddFootwayPartSurface
+import de.westnordost.streetcomplete.quests.surface.AddPathSurface
+import de.westnordost.streetcomplete.quests.surface.AddRoadSurface
+
+class SurfaceOverlay : Overlay {
+
+    override val title = R.string.overlay_surface
+    override val icon = R.drawable.ic_quest_street_surface
+    override val changesetComment = "Specify surfaces"
+    override val wikiLink: String = "Key:surface"
+    override val achievements = listOf(CAR, PEDESTRIAN, WHEELCHAIR, BICYCLIST, OUTDOORS)
+    override val hidesQuestTypes = setOf(
+        AddRoadSurface::class.simpleName!!,
+        AddPathSurface::class.simpleName!!,
+        AddFootwayPartSurface::class.simpleName!!,
+        AddCyclewayPartSurface::class.simpleName!!,
+    )
+
+    override fun getStyledElements(mapData: MapDataWithGeometry): Sequence<Pair<Element, Style>> =
+        mapData.filter("""
+            ways, relations with
+                highway ~ ${(ALL_PATHS + ALL_ROADS).joinToString("|")}
+        """).map { it to getStyle(it) }
+
+    override fun createForm(element: Element?) = SurfaceOverlayForm()
+}
+
+private fun getStyle(element: Element): Style {
+    val isArea = element.tags["area"] == "yes"
+    val isSegregated = element.tags["segregated"] == "yes"
+    val isPath = element.tags["highway"] in ALL_PATHS
+
+    val color = if (isPath && isSegregated) {
+        val footwayColor = createSurfaceAndNote(element.tags, "footway").getColor(element)
+        val cyclewayColor = createSurfaceAndNote(element.tags, "cycleway").getColor(element)
+        // take worst case for showing
+        listOf(footwayColor, cyclewayColor).minBy { color ->
+            when (color) {
+                Color.DATA_REQUESTED -> 0
+                Color.INVISIBLE -> 1
+                Color.BLACK -> 2
+                else -> 3
+            }
+        }
+    } else {
+        val mainColor = createSurfaceAndNote(element.tags).getColor(element)
+        // unspecified surface on motorways is okay (assumption is that all motorways are asphalted)
+        if (mainColor == Color.DATA_REQUESTED && isMotorway(element.tags)) Color.INVISIBLE else mainColor
+    }
+    return if (isArea) PolygonStyle(color) else PolylineStyle(StrokeStyle(color))
+}
+
+private fun isMotorway(tags: Map<String, String>): Boolean =
+    tags["highway"] == "motorway" || tags["highway"] == "motorway_link"
diff --git a/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceOverlayForm.kt b/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceOverlayForm.kt
new file mode 100644
index 00000000000..cc34baf5bab
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/overlays/surface/SurfaceOverlayForm.kt
@@ -0,0 +1,222 @@
+package de.westnordost.streetcomplete.overlays.surface
+
+import android.os.Bundle
+import android.view.View
+import androidx.core.view.isGone
+import de.westnordost.osmfeatures.GeometryType
+import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.data.elementfilter.toElementFilterExpression
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapChangesBuilder
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.UpdateElementTagsAction
+import de.westnordost.streetcomplete.data.osm.mapdata.Element
+import de.westnordost.streetcomplete.databinding.FragmentOverlaySurfaceSelectBinding
+import de.westnordost.streetcomplete.osm.surface.SELECTABLE_WAY_SURFACES
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.applyTo
+import de.westnordost.streetcomplete.osm.surface.createSurface
+import de.westnordost.streetcomplete.osm.surface.createSurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.isComplete
+import de.westnordost.streetcomplete.osm.surface.updateCommonSurfaceFromFootAndCyclewaySurface
+import de.westnordost.streetcomplete.overlays.AbstractOverlayForm
+import de.westnordost.streetcomplete.overlays.AnswerItem
+import de.westnordost.streetcomplete.overlays.IAnswerItem
+import de.westnordost.streetcomplete.util.getFeatureName
+
+class SurfaceOverlayForm : AbstractOverlayForm() {
+    override val contentLayoutResId = R.layout.fragment_overlay_surface_select
+    private val binding by contentViewBinding(FragmentOverlaySurfaceSelectBinding::bind)
+
+    private lateinit var surfaceCtrl: SurfaceAndNoteViewController
+    private lateinit var cyclewaySurfaceCtrl: SurfaceAndNoteViewController
+    private lateinit var footwaySurfaceCtrl: SurfaceAndNoteViewController
+
+    private var originalSurface: SurfaceAndNote? = null
+    private var originalFootwaySurface: SurfaceAndNote? = null
+    private var originalCyclewaySurface: SurfaceAndNote? = null
+
+    private var isSegregatedLayout = false
+
+    override val otherAnswers: List<IAnswerItem> get() =
+        if (isSegregatedLayout) {
+            /*
+            No option to switch back to single surface. Removing info about separate cycleway is
+            too complicated.
+
+            Typically it requires editing not only surface info but also an access info as it
+            happens in cases where bicycle access is gone. May require also removal of
+            cycleway=separate, bicycle=use_sidepath from the road.
+
+            And in cases where there is a segregated cycleway with the same surface as footway
+            then StreetComplete will anyway ask for cycleway:surface and footway:surface.
+
+            Fortunately need for this change are really rare. Notes can be left as usual.
+            */
+            listOf()
+
+        } else if (isBothFootAndBicycleTraffic(element!!)) {
+            /*
+            Only where bicycle access is already present because adding bicycle access typically
+            requires adding proper access tags, interconnections with roads and often also other
+            geometry changes.
+
+            In case where path is not clearly marked as carrying both foot and bicycle traffic
+            mapper can leave a note
+            */
+            listOf(
+                AnswerItem(R.string.overlay_path_surface_segregated) {
+                    // reset previous data
+                    surfaceCtrl.value = originalSurface
+                    switchToFootwayCyclewaySurfaceLayout()
+                }
+            )
+        } else {
+            listOf()
+        }
+
+    private val isBothFootAndBicycleTrafficFilter by lazy { """
+        ways, relations with
+          highway = footway and bicycle ~ yes|designated
+          or highway = cycleway and foot ~ yes|designated
+          or highway = path and foot != no and bicycle != no
+    """.toElementFilterExpression() }
+
+    private fun isBothFootAndBicycleTraffic(element: Element): Boolean =
+        isBothFootAndBicycleTrafficFilter.matches(element)
+
+    private fun switchToFootwayCyclewaySurfaceLayout() {
+        isSegregatedLayout = true
+        binding.main.root.isGone = true
+        binding.cyclewaySurfaceContainer.isGone = false
+        binding.footwaySurfaceContainer.isGone = false
+    }
+
+    override fun onCreate(savedInstanceState: Bundle?) {
+        super.onCreate(savedInstanceState)
+
+        originalSurface = createSurfaceAndNote(element!!.tags)
+        originalCyclewaySurface = createSurfaceAndNote(element!!.tags, "cycleway")
+        originalFootwaySurface = createSurfaceAndNote(element!!.tags, "footway")
+    }
+
+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
+        super.onViewCreated(view, savedInstanceState)
+
+        surfaceCtrl = SurfaceAndNoteViewController(
+            binding.main.selectButton.root,
+            binding.main.explanationInput,
+            binding.main.selectButton.selectedCellView,
+            binding.main.selectButton.selectTextView,
+            SELECTABLE_WAY_SURFACES
+        )
+        surfaceCtrl.onInputChanged = { checkIsFormComplete() }
+
+        cyclewaySurfaceCtrl = SurfaceAndNoteViewController(
+            binding.cycleway.selectButton.root,
+            binding.cycleway.explanationInput,
+            binding.cycleway.selectButton.selectedCellView,
+            binding.cycleway.selectButton.selectTextView,
+            SELECTABLE_WAY_SURFACES
+        )
+        cyclewaySurfaceCtrl.onInputChanged = { checkIsFormComplete() }
+
+        footwaySurfaceCtrl = SurfaceAndNoteViewController(
+            binding.footway.selectButton.root,
+            binding.footway.explanationInput,
+            binding.footway.selectButton.selectedCellView,
+            binding.footway.selectButton.selectTextView,
+            SELECTABLE_WAY_SURFACES
+        )
+        footwaySurfaceCtrl.onInputChanged = { checkIsFormComplete() }
+
+        if (savedInstanceState != null) {
+            onLoadInstanceState(savedInstanceState)
+        } else {
+            initStateFromTags()
+        }
+
+        if (element!!.tags["segregated"] == "yes" || originalCyclewaySurface != null || originalFootwaySurface != null) {
+            switchToFootwayCyclewaySurfaceLayout()
+        }
+
+        val conf = resources.configuration
+        binding.cyclewaySurfaceLabel.text = featureDictionary.getFeatureName(conf, mapOf("highway" to "cycleway"), GeometryType.LINE)
+        binding.footwaySurfaceLabel.text = featureDictionary.getFeatureName(conf, mapOf("highway" to "footway"), GeometryType.LINE)
+
+        checkIsFormComplete()
+    }
+
+    private fun initStateFromTags() {
+        surfaceCtrl.value = originalSurface
+        cyclewaySurfaceCtrl.value = originalCyclewaySurface
+        footwaySurfaceCtrl.value = originalFootwaySurface
+    }
+
+    /* ------------------------------------- instance state ------------------------------------- */
+
+    private fun onLoadInstanceState(inState: Bundle) {
+        surfaceCtrl.value = SurfaceAndNote(
+            createSurface(inState.getString(SURFACE)),
+            inState.getString(NOTE)
+        )
+        cyclewaySurfaceCtrl.value = SurfaceAndNote(
+            createSurface(inState.getString(CYCLEWAY_SURFACE)),
+            inState.getString(CYCLEWAY_NOTE)
+        )
+        footwaySurfaceCtrl.value = SurfaceAndNote(
+            createSurface(inState.getString(FOOTWAY_SURFACE)),
+            inState.getString(FOOTWAY_NOTE)
+        )
+    }
+
+    override fun onSaveInstanceState(outState: Bundle) {
+        super.onSaveInstanceState(outState)
+
+        outState.putString(SURFACE, surfaceCtrl.value?.surface?.osmValue)
+        outState.putString(NOTE, surfaceCtrl.value?.note)
+
+        outState.putString(CYCLEWAY_SURFACE, cyclewaySurfaceCtrl.value?.surface?.osmValue)
+        outState.putString(CYCLEWAY_NOTE, cyclewaySurfaceCtrl.value?.note)
+
+        outState.putString(FOOTWAY_SURFACE, footwaySurfaceCtrl.value?.surface?.osmValue)
+        outState.putString(FOOTWAY_NOTE, footwaySurfaceCtrl.value?.note)
+    }
+
+    /* -------------------------------------- apply answer -------------------------------------- */
+
+    override fun isFormComplete(): Boolean =
+        if (isSegregatedLayout) {
+            cyclewaySurfaceCtrl.value?.isComplete == true
+            && footwaySurfaceCtrl.value?.isComplete == true
+        } else {
+            surfaceCtrl.value?.isComplete == true
+        }
+
+    override fun hasChanges(): Boolean =
+        surfaceCtrl.value != originalSurface ||
+        cyclewaySurfaceCtrl.value != originalCyclewaySurface ||
+        footwaySurfaceCtrl.value != originalFootwaySurface
+
+    override fun onClickOk() {
+        val changesBuilder = StringMapChangesBuilder(element!!.tags)
+
+        if (isSegregatedLayout) {
+            changesBuilder["segregated"] = "yes"
+            cyclewaySurfaceCtrl.value!!.applyTo(changesBuilder, "cycleway")
+            footwaySurfaceCtrl.value!!.applyTo(changesBuilder, "footway")
+            updateCommonSurfaceFromFootAndCyclewaySurface(changesBuilder)
+        } else {
+            surfaceCtrl.value!!.applyTo(changesBuilder)
+        }
+
+        applyEdit(UpdateElementTagsAction(changesBuilder.create()))
+    }
+
+    companion object {
+        private const val SURFACE = "selected_surface"
+        private const val NOTE = "note"
+        private const val CYCLEWAY_SURFACE = "cycleway_surface"
+        private const val CYCLEWAY_NOTE = "cycleway_note"
+        private const val FOOTWAY_SURFACE = "footway_surface"
+        private const val FOOTWAY_NOTE = "footway_note"
+    }
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/cycleway/AddCycleway.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/cycleway/AddCycleway.kt
index 6849fc52b8d..f2efffa73e2 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/cycleway/AddCycleway.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/cycleway/AddCycleway.kt
@@ -15,7 +15,6 @@ import de.westnordost.streetcomplete.data.osm.mapdata.MapDataWithGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmElementQuestType
 import de.westnordost.streetcomplete.data.quest.NoCountriesExcept
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.BICYCLIST
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.MAXSPEED_TYPE_KEYS
 import de.westnordost.streetcomplete.osm.Tags
 import de.westnordost.streetcomplete.osm.cycleway.Cycleway.UNSPECIFIED_LANE
@@ -28,6 +27,7 @@ import de.westnordost.streetcomplete.osm.cycleway.isAmbiguous
 import de.westnordost.streetcomplete.osm.estimateParkingOffRoadWidth
 import de.westnordost.streetcomplete.osm.estimateRoadwayWidth
 import de.westnordost.streetcomplete.osm.guessRoadwayWidth
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.util.math.isNearAndAligned
 import java.util.concurrent.FutureTask
 
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/foot/AddProhibitedForPedestrians.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/foot/AddProhibitedForPedestrians.kt
index 022cd7c0466..a89e0965842 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/foot/AddProhibitedForPedestrians.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/foot/AddProhibitedForPedestrians.kt
@@ -4,9 +4,9 @@ import de.westnordost.streetcomplete.R
 import de.westnordost.streetcomplete.data.osm.geometry.ElementGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.PEDESTRIAN
-import de.westnordost.streetcomplete.osm.ANYTHING_PAVED
 import de.westnordost.streetcomplete.osm.ROADS_ASSUMED_TO_BE_PAVED
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_PAVED
 import de.westnordost.streetcomplete.quests.foot.ProhibitedForPedestriansAnswer.HAS_SEPARATE_SIDEWALK
 import de.westnordost.streetcomplete.quests.foot.ProhibitedForPedestriansAnswer.IS_LIVING_STREET
 import de.westnordost.streetcomplete.quests.foot.ProhibitedForPedestriansAnswer.NO
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/lanes/AddLanes.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/lanes/AddLanes.kt
index d812839e610..fe62b015c78 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/lanes/AddLanes.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/lanes/AddLanes.kt
@@ -4,10 +4,10 @@ import de.westnordost.streetcomplete.R
 import de.westnordost.streetcomplete.data.osm.geometry.ElementGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.CAR
-import de.westnordost.streetcomplete.osm.ANYTHING_PAVED
 import de.westnordost.streetcomplete.osm.MAXSPEED_TYPE_KEYS
 import de.westnordost.streetcomplete.osm.ROADS_ASSUMED_TO_BE_PAVED
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_PAVED
 
 class AddLanes : OsmFilterQuestType<LanesAnswer>() {
 
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/max_speed/AddMaxSpeed.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/max_speed/AddMaxSpeed.kt
index b8bd4a6c728..ae1460ca699 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/max_speed/AddMaxSpeed.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/max_speed/AddMaxSpeed.kt
@@ -5,9 +5,9 @@ import de.westnordost.streetcomplete.data.osm.geometry.ElementGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.quest.AllCountriesExcept
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.CAR
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.MAXSPEED_TYPE_KEYS
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.util.ktx.toYesNo
 
 class AddMaxSpeed : OsmFilterQuestType<MaxSpeedAnswer>() {
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/segregated/AddCyclewaySegregation.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/segregated/AddCyclewaySegregation.kt
index 66d266d7e57..a143bf414ac 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/segregated/AddCyclewaySegregation.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/segregated/AddCyclewaySegregation.kt
@@ -5,8 +5,8 @@ import de.westnordost.streetcomplete.data.osm.geometry.ElementGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.BICYCLIST
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.OUTDOORS
-import de.westnordost.streetcomplete.osm.ANYTHING_PAVED
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_PAVED
 import de.westnordost.streetcomplete.osm.updateWithCheckDate
 import de.westnordost.streetcomplete.util.ktx.toYesNo
 
@@ -18,6 +18,7 @@ class AddCyclewaySegregation : OsmFilterQuestType<CyclewaySegregation>() {
           (highway = path and bicycle = designated and foot = designated)
           or (highway = footway and bicycle = designated)
           or (highway = cycleway and foot ~ designated|yes)
+          or highway ~ path|footway|cycleway and (footway:surface or cycleway:surface)
         )
         and surface ~ ${ANYTHING_PAVED.joinToString("|")}
         and area != yes
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/shoulder/AddShoulder.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/shoulder/AddShoulder.kt
index 1bf922279a7..be9f12ebfc5 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/shoulder/AddShoulder.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/shoulder/AddShoulder.kt
@@ -4,9 +4,9 @@ import de.westnordost.streetcomplete.R
 import de.westnordost.streetcomplete.data.osm.geometry.ElementGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.CAR
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.MAXSPEED_TYPE_KEYS
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
 
 class AddShoulder : OsmFilterQuestType<ShoulderSides>() {
 
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/sidewalk/AddSidewalk.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/sidewalk/AddSidewalk.kt
index 2ea8ef168f4..5d28d2b223c 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/sidewalk/AddSidewalk.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/sidewalk/AddSidewalk.kt
@@ -8,7 +8,6 @@ import de.westnordost.streetcomplete.data.osm.mapdata.Element
 import de.westnordost.streetcomplete.data.osm.mapdata.MapDataWithGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmElementQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.PEDESTRIAN
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.MAXSPEED_TYPE_KEYS
 import de.westnordost.streetcomplete.osm.Tags
 import de.westnordost.streetcomplete.osm.estimateCycleTrackWidth
@@ -20,6 +19,7 @@ import de.westnordost.streetcomplete.osm.sidewalk.Sidewalk.INVALID
 import de.westnordost.streetcomplete.osm.sidewalk.any
 import de.westnordost.streetcomplete.osm.sidewalk.applyTo
 import de.westnordost.streetcomplete.osm.sidewalk.createSidewalkSides
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.util.math.isNearAndAligned
 
 class AddSidewalk : OsmElementQuestType<LeftAndRightSidewalk> {
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/smoothness/AddSmoothnessForm.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/smoothness/AddSmoothnessForm.kt
index 3aafa652eaa..db0c559d350 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/smoothness/AddSmoothnessForm.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/smoothness/AddSmoothnessForm.kt
@@ -12,10 +12,10 @@ import androidx.core.view.isGone
 import de.westnordost.streetcomplete.R
 import de.westnordost.streetcomplete.data.osm.mapdata.Way
 import de.westnordost.streetcomplete.databinding.QuestGenericListBinding
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.asItem
 import de.westnordost.streetcomplete.quests.AImageListQuestForm
 import de.westnordost.streetcomplete.quests.AnswerItem
-import de.westnordost.streetcomplete.quests.surface.Surface
-import de.westnordost.streetcomplete.quests.surface.asItem
 import de.westnordost.streetcomplete.util.ktx.asImageSpan
 import de.westnordost.streetcomplete.util.ktx.isArea
 import de.westnordost.streetcomplete.view.image_select.ItemViewHolder
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddCyclewayPartSurface.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddCyclewayPartSurface.kt
index 2881c01abc0..787ec0ac1fc 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddCyclewayPartSurface.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddCyclewayPartSurface.kt
@@ -6,8 +6,11 @@ import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.BICYCLIST
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.OUTDOORS
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.applyTo
+import de.westnordost.streetcomplete.osm.surface.updateCommonSurfaceFromFootAndCyclewaySurface
 
-class AddCyclewayPartSurface : OsmFilterQuestType<SurfaceAnswer>() {
+class AddCyclewayPartSurface : OsmFilterQuestType<SurfaceAndNote>() {
 
     override val elementFilter = """
         ways with (
@@ -38,8 +41,8 @@ class AddCyclewayPartSurface : OsmFilterQuestType<SurfaceAnswer>() {
 
     override fun createForm() = AddPathPartSurfaceForm()
 
-    override fun applyAnswerTo(answer: SurfaceAnswer, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
+    override fun applyAnswerTo(answer: SurfaceAndNote, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
         answer.applyTo(tags, "cycleway")
-        answer.updateSegregatedFootAndCycleway(tags)
+        updateCommonSurfaceFromFootAndCyclewaySurface(tags)
     }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddFootwayPartSurface.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddFootwayPartSurface.kt
index a2c36e5a265..37c79fc3168 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddFootwayPartSurface.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddFootwayPartSurface.kt
@@ -7,8 +7,11 @@ import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.PEDESTRIAN
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.WHEELCHAIR
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.applyTo
+import de.westnordost.streetcomplete.osm.surface.updateCommonSurfaceFromFootAndCyclewaySurface
 
-class AddFootwayPartSurface : OsmFilterQuestType<SurfaceAnswer>() {
+class AddFootwayPartSurface : OsmFilterQuestType<SurfaceAndNote>() {
 
     override val elementFilter = """
         ways with (
@@ -39,8 +42,8 @@ class AddFootwayPartSurface : OsmFilterQuestType<SurfaceAnswer>() {
 
     override fun createForm() = AddPathPartSurfaceForm()
 
-    override fun applyAnswerTo(answer: SurfaceAnswer, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
+    override fun applyAnswerTo(answer: SurfaceAndNote, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
         answer.applyTo(tags, "footway")
-        answer.updateSegregatedFootAndCycleway(tags)
+        updateCommonSurfaceFromFootAndCyclewaySurface(tags)
     }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathPartSurfaceForm.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathPartSurfaceForm.kt
index 955d1e3b0e2..a6de21f369d 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathPartSurfaceForm.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathPartSurfaceForm.kt
@@ -1,29 +1,21 @@
 package de.westnordost.streetcomplete.quests.surface
 
-import androidx.appcompat.app.AlertDialog
-import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.osm.surface.SELECTABLE_WAY_SURFACES
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.toItems
 import de.westnordost.streetcomplete.quests.AImageListQuestForm
 
-class AddPathPartSurfaceForm : AImageListQuestForm<Surface, SurfaceAnswer>() {
-    override val items get() =
-        (PAVED_SURFACES + UNPAVED_SURFACES + GROUND_SURFACES + GENERIC_ROAD_SURFACES).toItems()
+class AddPathPartSurfaceForm : AImageListQuestForm<Surface, SurfaceAndNote>() {
+    override val items get() = SELECTABLE_WAY_SURFACES.toItems()
 
     override val itemsPerRow = 3
 
     override fun onClickOk(selectedItems: List<Surface>) {
         val value = selectedItems.single()
-        if (value.shouldBeDescribed) {
-            AlertDialog.Builder(requireContext())
-                .setMessage(R.string.quest_surface_detailed_answer_impossible_confirmation)
-                .setPositiveButton(R.string.quest_generic_confirmation_yes) { _, _ ->
-                    DescribeGenericSurfaceDialog(requireContext()) { description ->
-                        applyAnswer(SurfaceAnswer(value, description))
-                    }.show()
-                }
-                .setNegativeButton(android.R.string.cancel, null)
-                .show()
-            return
+
+        collectSurfaceDescriptionIfNecessary(requireContext(), value) {
+            applyAnswer(SurfaceAndNote(value, it))
         }
-        applyAnswer(SurfaceAnswer(value))
     }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathSurface.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathSurface.kt
index 4088a462549..0a5abd04c40 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathSurface.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathSurface.kt
@@ -7,8 +7,10 @@ import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.OUTDOORS
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.PEDESTRIAN
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.WHEELCHAIR
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
+import de.westnordost.streetcomplete.osm.surface.INVALID_SURFACES
+import de.westnordost.streetcomplete.osm.surface.applyTo
 
 class AddPathSurface : OsmFilterQuestType<SurfaceOrIsStepsAnswer>() {
 
@@ -23,7 +25,7 @@ class AddPathSurface : OsmFilterQuestType<SurfaceOrIsStepsAnswer>() {
           or surface ~ ${ANYTHING_UNPAVED.joinToString("|")} and surface older today -6 years
           or surface older today -8 years
           or (
-            surface ~ paved|unpaved|cobblestone
+            surface ~ paved|unpaved|${INVALID_SURFACES.joinToString("|")}
             and !surface:note
             and !note:surface
           )
@@ -44,7 +46,7 @@ class AddPathSurface : OsmFilterQuestType<SurfaceOrIsStepsAnswer>() {
     override fun applyAnswerTo(answer: SurfaceOrIsStepsAnswer, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
         when (answer) {
             is SurfaceAnswer -> {
-                answer.applyTo(tags)
+                answer.value.applyTo(tags)
             }
             is IsActuallyStepsAnswer -> {
                 tags["highway"] = "steps"
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathSurfaceForm.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathSurfaceForm.kt
index dbfa2ded0ee..5cdee45082a 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathSurfaceForm.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPathSurfaceForm.kt
@@ -3,13 +3,17 @@ package de.westnordost.streetcomplete.quests.surface
 import androidx.appcompat.app.AlertDialog
 import de.westnordost.streetcomplete.R
 import de.westnordost.streetcomplete.data.osm.mapdata.Way
+import de.westnordost.streetcomplete.osm.surface.SELECTABLE_WAY_SURFACES
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.shouldBeDescribed
+import de.westnordost.streetcomplete.osm.surface.toItems
 import de.westnordost.streetcomplete.quests.AImageListQuestForm
 import de.westnordost.streetcomplete.quests.AnswerItem
 import de.westnordost.streetcomplete.util.ktx.isArea
 
 class AddPathSurfaceForm : AImageListQuestForm<Surface, SurfaceOrIsStepsAnswer>() {
-    override val items get() =
-        (PAVED_SURFACES + UNPAVED_SURFACES + GROUND_SURFACES + GENERIC_ROAD_SURFACES).toItems()
+    override val items get() = SELECTABLE_WAY_SURFACES.toItems()
 
     override val otherAnswers get() = listOfNotNull(
         createConvertToStepsAnswer(),
@@ -25,14 +29,14 @@ class AddPathSurfaceForm : AImageListQuestForm<Surface, SurfaceOrIsStepsAnswer>(
                 .setMessage(R.string.quest_surface_detailed_answer_impossible_confirmation)
                 .setPositiveButton(R.string.quest_generic_confirmation_yes) { _, _ ->
                     DescribeGenericSurfaceDialog(requireContext()) { description ->
-                        applyAnswer(SurfaceAnswer(value, description))
+                        applyAnswer(SurfaceAnswer(SurfaceAndNote(value, description)))
                     }.show()
                 }
                 .setNegativeButton(android.R.string.cancel, null)
                 .show()
             return
         }
-        applyAnswer(SurfaceAnswer(value))
+        applyAnswer(SurfaceAnswer(SurfaceAndNote(value)))
     }
 
     private fun createConvertToStepsAnswer(): AnswerItem? {
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPitchSurface.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPitchSurface.kt
index 8aaea19acf4..96bd1773df0 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPitchSurface.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPitchSurface.kt
@@ -5,8 +5,10 @@ import de.westnordost.streetcomplete.data.osm.geometry.ElementGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.OUTDOORS
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.applyTo
 
-class AddPitchSurface : OsmFilterQuestType<SurfaceAnswer>() {
+class AddPitchSurface : OsmFilterQuestType<SurfaceAndNote>() {
     private val sportValuesWherePitchSurfaceQuestionIsInteresting = listOf(
         // #2377
         "multi", "soccer", "tennis", "basketball", "equestrian", "athletics", "volleyball",
@@ -47,7 +49,7 @@ class AddPitchSurface : OsmFilterQuestType<SurfaceAnswer>() {
 
     override fun createForm() = AddPitchSurfaceForm()
 
-    override fun applyAnswerTo(answer: SurfaceAnswer, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
+    override fun applyAnswerTo(answer: SurfaceAndNote, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
         answer.applyTo(tags)
     }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPitchSurfaceForm.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPitchSurfaceForm.kt
index 48c6fa53044..e6034cb79d2 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPitchSurfaceForm.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddPitchSurfaceForm.kt
@@ -1,29 +1,20 @@
 package de.westnordost.streetcomplete.quests.surface
 
-import androidx.appcompat.app.AlertDialog
-import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.osm.surface.SELECTABLE_PITCH_SURFACES
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.toItems
 import de.westnordost.streetcomplete.quests.AImageListQuestForm
 
-class AddPitchSurfaceForm : AImageListQuestForm<Surface, SurfaceAnswer>() {
-    override val items get() =
-        PITCH_SURFACES.toItems()
+class AddPitchSurfaceForm : AImageListQuestForm<Surface, SurfaceAndNote>() {
+    override val items get() = SELECTABLE_PITCH_SURFACES.toItems()
 
     override val itemsPerRow = 3
 
     override fun onClickOk(selectedItems: List<Surface>) {
         val value = selectedItems.single()
-        if (value.shouldBeDescribed) {
-            AlertDialog.Builder(requireContext())
-                .setMessage(R.string.quest_surface_detailed_answer_impossible_confirmation)
-                .setPositiveButton(R.string.quest_generic_confirmation_yes) { _, _ ->
-                    DescribeGenericSurfaceDialog(requireContext()) { description ->
-                        applyAnswer(SurfaceAnswer(value, description))
-                    }.show()
-                }
-                .setNegativeButton(android.R.string.cancel, null)
-                .show()
-            return
+        collectSurfaceDescriptionIfNecessary(requireContext(), value) {
+            applyAnswer(SurfaceAndNote(value, it))
         }
-        applyAnswer(SurfaceAnswer(value))
     }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurface.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurface.kt
index 7cf58b841a8..6e1b63c8135 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurface.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurface.kt
@@ -5,11 +5,14 @@ import de.westnordost.streetcomplete.data.osm.geometry.ElementGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.BICYCLIST
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.CAR
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
-import de.westnordost.streetcomplete.osm.INVALID_SURFACES_FOR_TRACKTYPES
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
+import de.westnordost.streetcomplete.osm.surface.INVALID_SURFACES
+import de.westnordost.streetcomplete.osm.surface.INVALID_SURFACES_FOR_TRACKTYPES
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.applyTo
 
-class AddRoadSurface : OsmFilterQuestType<SurfaceAnswer>() {
+class AddRoadSurface : OsmFilterQuestType<SurfaceAndNote>() {
 
     override val elementFilter = """
         ways with (
@@ -25,7 +28,7 @@ class AddRoadSurface : OsmFilterQuestType<SurfaceAnswer>() {
           or surface ~ ${ANYTHING_UNPAVED.joinToString("|")} and surface older today -6 years
           or surface older today -12 years
           or (
-            surface ~ paved|unpaved|cobblestone
+            surface ~ paved|unpaved|${INVALID_SURFACES.joinToString("|")}
             and !surface:note
             and !note:surface
           )
@@ -49,7 +52,7 @@ class AddRoadSurface : OsmFilterQuestType<SurfaceAnswer>() {
 
     override fun createForm() = AddRoadSurfaceForm()
 
-    override fun applyAnswerTo(answer: SurfaceAnswer, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
+    override fun applyAnswerTo(answer: SurfaceAndNote, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
         answer.applyTo(tags)
     }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurfaceForm.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurfaceForm.kt
index 2c5a1e8afcd..cc5bea8a73f 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurfaceForm.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurfaceForm.kt
@@ -2,59 +2,40 @@ package de.westnordost.streetcomplete.quests.surface
 
 import androidx.appcompat.app.AlertDialog
 import de.westnordost.streetcomplete.R
-import de.westnordost.streetcomplete.osm.isSurfaceAndTracktypeMismatching
+import de.westnordost.streetcomplete.osm.surface.SELECTABLE_WAY_SURFACES
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.isSurfaceAndTracktypeConflicting
+import de.westnordost.streetcomplete.osm.surface.toItems
 import de.westnordost.streetcomplete.quests.AImageListQuestForm
 
-class AddRoadSurfaceForm : AImageListQuestForm<Surface, SurfaceAnswer>() {
-    override val items get() =
-        (PAVED_SURFACES + UNPAVED_SURFACES + GROUND_SURFACES + GENERIC_ROAD_SURFACES).toItems()
+class AddRoadSurfaceForm : AImageListQuestForm<Surface, SurfaceAndNote>() {
+    override val items get() = SELECTABLE_WAY_SURFACES.toItems()
 
     override val itemsPerRow = 3
 
     override fun onClickOk(selectedItems: List<Surface>) {
         val surface = selectedItems.single()
         confirmPotentialTracktypeMismatch(surface) {
-            collectSurfaceDescription(surface) { description ->
-                applyAnswer(SurfaceAnswer(surface, description))
+            collectSurfaceDescriptionIfNecessary(requireContext(), surface) { description ->
+                applyAnswer(SurfaceAndNote(surface, description))
             }
         }
     }
 
-    private fun confirmPotentialTracktypeMismatch(
-        surface: Surface,
-        onTracktypeConfirmed: () -> Unit
-    ) {
+    private fun confirmPotentialTracktypeMismatch(surface: Surface, onConfirmed: () -> Unit) {
         val tracktype = element.tags["tracktype"]
-        if (tracktype == null) {
-            onTracktypeConfirmed()
-        } else if (isSurfaceAndTracktypeMismatching(surface.osmValue, tracktype)) {
+        if (isSurfaceAndTracktypeConflicting(surface.osmValue!!, tracktype)) {
             AlertDialog.Builder(requireContext())
                 .setTitle(R.string.quest_generic_confirmation_title)
                 .setMessage(R.string.quest_surface_tractypeMismatchInput_confirmation_description)
                 .setPositiveButton(R.string.quest_generic_confirmation_yes) { _, _ ->
-                    onTracktypeConfirmed()
+                    onConfirmed()
                 }
                 .setNegativeButton(R.string.quest_generic_confirmation_no, null)
                 .show()
         } else {
-            onTracktypeConfirmed()
-        }
-    }
-
-    private fun collectSurfaceDescription(
-        surface: Surface,
-        onSurfaceDescribed: (description: String?) -> Unit
-    ) {
-        if (!surface.shouldBeDescribed) {
-            onSurfaceDescribed(null)
-        } else {
-            AlertDialog.Builder(requireContext())
-                .setMessage(R.string.quest_surface_detailed_answer_impossible_confirmation)
-                .setPositiveButton(R.string.quest_generic_confirmation_yes) { _, _ ->
-                    DescribeGenericSurfaceDialog(requireContext(), onSurfaceDescribed).show()
-                }
-                .setNegativeButton(android.R.string.cancel, null)
-                .show()
+            onConfirmed()
         }
     }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurface.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurface.kt
index b5563194ac2..81ec009f9b9 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurface.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurface.kt
@@ -6,9 +6,8 @@ import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.PEDESTRIAN
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.WHEELCHAIR
 import de.westnordost.streetcomplete.osm.Tags
-import de.westnordost.streetcomplete.osm.hasCheckDateForKey
 import de.westnordost.streetcomplete.osm.removeCheckDatesForKey
-import de.westnordost.streetcomplete.osm.updateCheckDateForKey
+import de.westnordost.streetcomplete.osm.sidewalk_surface.applyTo
 
 class AddSidewalkSurface : OsmFilterQuestType<SidewalkSurfaceAnswer>() {
 
@@ -39,97 +38,21 @@ class AddSidewalkSurface : OsmFilterQuestType<SidewalkSurfaceAnswer>() {
     override fun createForm() = AddSidewalkSurfaceForm()
 
     override fun applyAnswerTo(answer: SidewalkSurfaceAnswer, tags: Tags, geometry: ElementGeometry, timestampEdited: Long) {
-       when (answer) {
+        when (answer) {
             is SidewalkIsDifferent -> {
-                deleteSmoothnessKeys(Side.LEFT, tags)
-                deleteSmoothnessKeys(Side.RIGHT, tags)
-                deleteSmoothnessKeys(Side.BOTH, tags)
-                deleteSidewalkSurfaceAnswerIfExists(Side.LEFT, tags)
-                deleteSidewalkSurfaceAnswerIfExists(Side.RIGHT, tags)
-                deleteSidewalkSurfaceAnswerIfExists(Side.BOTH, tags)
-                tags.remove("sidewalk:left")
-                tags.remove("sidewalk:right")
-                tags.remove("sidewalk:both")
-                tags.remove("sidewalk")
+                for (side in listOf(":left", ":right", ":both", "")) {
+                    tags.remove("sidewalk$side:surface")
+                    tags.remove("sidewalk$side:surface:note")
+                    tags.remove("sidewalk$side:smoothness")
+                    tags.remove("sidewalk$side")
+                }
+                tags.removeCheckDatesForKey("sidewalk")
+                tags.removeCheckDatesForKey("sidewalk:surface")
+                tags.removeCheckDatesForKey("sidewalk:smoothness")
             }
             is SidewalkSurface -> {
-                val leftChanged = answer.left?.let { sideSurfaceChanged(it, Side.LEFT, tags) }
-                val rightChanged = answer.right?.let { sideSurfaceChanged(it, Side.RIGHT, tags) }
-
-                if (leftChanged == true) {
-                    deleteSmoothnessKeys(Side.LEFT, tags)
-                    deleteSmoothnessKeys(Side.BOTH, tags)
-                }
-                if (rightChanged == true) {
-                    deleteSmoothnessKeys(Side.RIGHT, tags)
-                    deleteSmoothnessKeys(Side.BOTH, tags)
-                }
-
-                if (answer.left == answer.right) {
-                    answer.left?.let { applySidewalkSurfaceAnswerTo(it, Side.BOTH, tags) }
-                    deleteSidewalkSurfaceAnswerIfExists(Side.LEFT, tags)
-                    deleteSidewalkSurfaceAnswerIfExists(Side.RIGHT, tags)
-                } else {
-                    answer.left?.let { applySidewalkSurfaceAnswerTo(it, Side.LEFT, tags) }
-                    answer.right?.let { applySidewalkSurfaceAnswerTo(it, Side.RIGHT, tags) }
-                    deleteSidewalkSurfaceAnswerIfExists(Side.BOTH, tags)
-                }
+                answer.value.applyTo(tags)
             }
         }
-
-        deleteSidewalkSurfaceAnswerIfExists(null, tags)
-
-        // only set the check date if nothing was changed or if check date was already set
-        if (!tags.hasChanges || tags.hasCheckDateForKey("sidewalk:surface")) {
-            tags.updateCheckDateForKey("sidewalk:surface")
-        }
-    }
-
-    private enum class Side(val value: String) {
-        LEFT("left"), RIGHT("right"), BOTH("both")
-    }
-
-    private fun sideSurfaceChanged(surface: SurfaceAnswer, side: Side, tags: Tags): Boolean {
-        val previousSideOsmValue = tags["sidewalk:${side.value}:surface"]
-        val previousBothOsmValue = tags["sidewalk:both:surface"]
-        val osmValue = surface.value.osmValue
-
-        return previousSideOsmValue != null && previousSideOsmValue != osmValue
-            || previousBothOsmValue != null && previousBothOsmValue != osmValue
-    }
-
-    private fun applySidewalkSurfaceAnswerTo(surface: SurfaceAnswer, side: Side, tags: Tags) {
-        val sidewalkKey = "sidewalk:" + side.value
-        val sidewalkSurfaceKey = "$sidewalkKey:surface"
-
-        tags[sidewalkSurfaceKey] = surface.value.osmValue
-
-        // add/remove note - used to describe generic surfaces
-        if (surface.note != null) {
-            tags["$sidewalkSurfaceKey:note"] = surface.note
-        } else {
-            tags.remove("$sidewalkSurfaceKey:note")
-        }
-        // clean up old source tags - source should be in changeset tags
-        tags.remove("source:$sidewalkSurfaceKey")
-    }
-
-    /** clear smoothness tags for the given side*/
-    private fun deleteSmoothnessKeys(side: Side, tags: Tags) {
-        val sidewalkKey = "sidewalk:" + side.value
-        tags.remove("$sidewalkKey:smoothness")
-        tags.remove("$sidewalkKey:smoothness:date")
-        tags.removeCheckDatesForKey("$sidewalkKey:smoothness")
-    }
-
-    /** clear previous answers for the given side */
-    private fun deleteSidewalkSurfaceAnswerIfExists(side: Side?, tags: Tags) {
-        val sideVal = if (side == null) "" else ":" + side.value
-        val sidewalkSurfaceKey = "sidewalk$sideVal:surface"
-
-        // only things are cleared that are set by this quest
-        // for example cycleway:surface should only be cleared by a cycleway surface quest etc.
-        tags.remove(sidewalkSurfaceKey)
-        tags.remove("$sidewalkSurfaceKey:note")
     }
 }
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurfaceForm.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurfaceForm.kt
index 4be8771d4af..331983c2152 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurfaceForm.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurfaceForm.kt
@@ -6,11 +6,19 @@ import androidx.appcompat.app.AlertDialog
 import de.westnordost.streetcomplete.R
 import de.westnordost.streetcomplete.osm.sidewalk.Sidewalk
 import de.westnordost.streetcomplete.osm.sidewalk.createSidewalkSides
+import de.westnordost.streetcomplete.osm.sidewalk_surface.LeftAndRightSidewalkSurface
+import de.westnordost.streetcomplete.osm.surface.SELECTABLE_WAY_SURFACES
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.asStreetSideItem
+import de.westnordost.streetcomplete.osm.surface.shouldBeDescribed
+import de.westnordost.streetcomplete.osm.surface.toItems
 import de.westnordost.streetcomplete.quests.AStreetSideSelectForm
 import de.westnordost.streetcomplete.quests.AnswerItem
 import de.westnordost.streetcomplete.view.controller.StreetSideSelectWithLastAnswerButtonViewController.Sides.BOTH
 import de.westnordost.streetcomplete.view.controller.StreetSideSelectWithLastAnswerButtonViewController.Sides.LEFT
 import de.westnordost.streetcomplete.view.controller.StreetSideSelectWithLastAnswerButtonViewController.Sides.RIGHT
+import de.westnordost.streetcomplete.view.image_select.DisplayItem
 import de.westnordost.streetcomplete.view.image_select.ImageListPickerDialog
 
 class AddSidewalkSurfaceForm : AStreetSideSelectForm<Surface, SidewalkSurfaceAnswer>() {
@@ -18,6 +26,8 @@ class AddSidewalkSurfaceForm : AStreetSideSelectForm<Surface, SidewalkSurfaceAns
     private var leftNote: String? = null
     private var rightNote: String? = null
 
+    private val items: List<DisplayItem<Surface>> = SELECTABLE_WAY_SURFACES.toItems()
+
     override val otherAnswers = listOf(
         AnswerItem(R.string.quest_sidewalk_answer_different) { applyAnswer(SidewalkIsDifferent) }
     )
@@ -50,33 +60,33 @@ class AddSidewalkSurfaceForm : AStreetSideSelectForm<Surface, SidewalkSurfaceAns
     }
 
     override fun onClickSide(isRight: Boolean) {
-        val items = (PAVED_SURFACES + UNPAVED_SURFACES + GROUND_SURFACES + GENERIC_ROAD_SURFACES)
-            .map { it.asItem() }
-
-        ImageListPickerDialog(requireContext(), items, R.layout.cell_icon_select_with_label_below, 2) { item ->
-            val streetSideItem = item.value!!.asStreetSideItem(requireContext().resources)
-
-            if (item.value?.shouldBeDescribed == true) {
-                AlertDialog.Builder(requireContext())
-                    .setMessage(R.string.quest_surface_detailed_answer_impossible_confirmation)
-                    .setPositiveButton(R.string.quest_generic_confirmation_yes) { _, _ ->
-                        DescribeGenericSurfaceDialog(requireContext()) { description ->
-                            setNote(isRight, description)
-                            streetSideSelect.replacePuzzleSide(streetSideItem, isRight)
-                        }.show()
-                    }
-                    .setNegativeButton(android.R.string.cancel, null)
-                    .show()
+        ImageListPickerDialog(requireContext(), items, R.layout.cell_labeled_icon_select, 2) { item ->
+            val surface = item.value!!
+            if (surface.shouldBeDescribed) {
+                showDescribeSurfaceDialog(isRight, surface)
             } else {
-                setNote(isRight, null)
-                streetSideSelect.replacePuzzleSide(streetSideItem, isRight)
+                replaceSurfaceSide(isRight, surface, null)
             }
         }.show()
     }
 
-    private fun setNote(isRight: Boolean, note: String?) {
-        if (isRight) rightNote = note
-        else leftNote = note
+    private fun showDescribeSurfaceDialog(isRight: Boolean, surface: Surface) {
+        AlertDialog.Builder(requireContext())
+            .setMessage(R.string.quest_surface_detailed_answer_impossible_confirmation)
+            .setPositiveButton(R.string.quest_generic_confirmation_yes) { _, _ ->
+                DescribeGenericSurfaceDialog(requireContext()) { description ->
+                    replaceSurfaceSide(isRight, surface, description)
+                }.show()
+            }
+            .setNegativeButton(android.R.string.cancel, null)
+            .show()
+    }
+
+    private fun replaceSurfaceSide(isRight: Boolean, surface: Surface, description: String?) {
+        val streetSideItem = surface.asStreetSideItem(requireContext().resources)
+        if (isRight) rightNote = description
+        else leftNote = description
+        streetSideSelect.replacePuzzleSide(streetSideItem, isRight)
     }
 
     override fun onClickOk() {
@@ -85,10 +95,10 @@ class AddSidewalkSurfaceForm : AStreetSideSelectForm<Surface, SidewalkSurfaceAns
         if (left?.shouldBeDescribed != true && right?.shouldBeDescribed != true) {
             streetSideSelect.saveLastSelection()
         }
-        applyAnswer(SidewalkSurface(
-            left?.let { SurfaceAnswer(it, leftNote) },
-            right?.let { SurfaceAnswer(it, rightNote) }
-        ))
+        applyAnswer(SidewalkSurface(LeftAndRightSidewalkSurface(
+            left?.let { SurfaceAndNote(it, leftNote) },
+            right?.let { SurfaceAndNote(it, rightNote) }
+        )))
     }
 
     /* ------------------------------------- instance state ------------------------------------- */
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SidewalkSurfaceAnswer.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SidewalkSurfaceAnswer.kt
index 18cacdc59fe..3055c296dc4 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SidewalkSurfaceAnswer.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SidewalkSurfaceAnswer.kt
@@ -1,12 +1,8 @@
 package de.westnordost.streetcomplete.quests.surface
 
-sealed interface SidewalkSurfaceAnswer
+import de.westnordost.streetcomplete.osm.sidewalk_surface.LeftAndRightSidewalkSurface
 
-data class SidewalkSurface(
-    val left: SurfaceAnswer?,
-    val right: SurfaceAnswer?,
-) : SidewalkSurfaceAnswer
+sealed interface SidewalkSurfaceAnswer
 
+data class SidewalkSurface(val value: LeftAndRightSidewalkSurface) : SidewalkSurfaceAnswer
 object SidewalkIsDifferent : SidewalkSurfaceAnswer
-
-data class SidewalkSurfaceSide(val surface: Surface)
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/Surface.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/Surface.kt
deleted file mode 100644
index 079320a55ba..00000000000
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/Surface.kt
+++ /dev/null
@@ -1,90 +0,0 @@
-package de.westnordost.streetcomplete.quests.surface
-
-import de.westnordost.streetcomplete.quests.surface.Surface.ARTIFICIAL_TURF
-import de.westnordost.streetcomplete.quests.surface.Surface.ASPHALT
-import de.westnordost.streetcomplete.quests.surface.Surface.CLAY
-import de.westnordost.streetcomplete.quests.surface.Surface.COMPACTED
-import de.westnordost.streetcomplete.quests.surface.Surface.CONCRETE
-import de.westnordost.streetcomplete.quests.surface.Surface.CONCRETE_LANES
-import de.westnordost.streetcomplete.quests.surface.Surface.CONCRETE_PLATES
-import de.westnordost.streetcomplete.quests.surface.Surface.DIRT
-import de.westnordost.streetcomplete.quests.surface.Surface.FINE_GRAVEL
-import de.westnordost.streetcomplete.quests.surface.Surface.GRASS
-import de.westnordost.streetcomplete.quests.surface.Surface.GRASS_PAVER
-import de.westnordost.streetcomplete.quests.surface.Surface.GRAVEL
-import de.westnordost.streetcomplete.quests.surface.Surface.GROUND_AREA
-import de.westnordost.streetcomplete.quests.surface.Surface.GROUND_ROAD
-import de.westnordost.streetcomplete.quests.surface.Surface.METAL
-import de.westnordost.streetcomplete.quests.surface.Surface.PAVED_AREA
-import de.westnordost.streetcomplete.quests.surface.Surface.PAVED_ROAD
-import de.westnordost.streetcomplete.quests.surface.Surface.PAVING_STONES
-import de.westnordost.streetcomplete.quests.surface.Surface.PEBBLES
-import de.westnordost.streetcomplete.quests.surface.Surface.ROCK
-import de.westnordost.streetcomplete.quests.surface.Surface.SAND
-import de.westnordost.streetcomplete.quests.surface.Surface.SETT
-import de.westnordost.streetcomplete.quests.surface.Surface.TARTAN
-import de.westnordost.streetcomplete.quests.surface.Surface.UNHEWN_COBBLESTONE
-import de.westnordost.streetcomplete.quests.surface.Surface.UNPAVED_AREA
-import de.westnordost.streetcomplete.quests.surface.Surface.UNPAVED_ROAD
-import de.westnordost.streetcomplete.quests.surface.Surface.WOOD
-import de.westnordost.streetcomplete.quests.surface.Surface.WOODCHIPS
-
-enum class Surface(val osmValue: String) {
-    ASPHALT("asphalt"),
-    CONCRETE("concrete"),
-    CONCRETE_PLATES("concrete:plates"),
-    CONCRETE_LANES("concrete:lanes"),
-    FINE_GRAVEL("fine_gravel"),
-    PAVING_STONES("paving_stones"),
-    COMPACTED("compacted"),
-    DIRT("dirt"),
-    SETT("sett"),
-    UNHEWN_COBBLESTONE("unhewn_cobblestone"),
-    GRASS_PAVER("grass_paver"),
-    WOOD("wood"),
-    WOODCHIPS("woodchips"),
-    METAL("metal"),
-    GRAVEL("gravel"),
-    PEBBLES("pebblestone"),
-    GRASS("grass"),
-    SAND("sand"),
-    ROCK("rock"),
-    CLAY("clay"),
-    ARTIFICIAL_TURF("artificial_turf"),
-    TARTAN("tartan"),
-    PAVED_ROAD("paved"),
-    UNPAVED_ROAD("unpaved"),
-    GROUND_ROAD("ground"),
-    PAVED_AREA("paved"),
-    UNPAVED_AREA("unpaved"),
-    GROUND_AREA("ground"),
-}
-
-val PAVED_SURFACES = listOf(
-    ASPHALT, CONCRETE, CONCRETE_PLATES, CONCRETE_LANES,
-    PAVING_STONES, SETT, UNHEWN_COBBLESTONE, GRASS_PAVER,
-    WOOD, METAL
-)
-
-val UNPAVED_SURFACES = listOf(
-    COMPACTED, FINE_GRAVEL, GRAVEL, PEBBLES, WOODCHIPS
-)
-
-val GROUND_SURFACES = listOf(
-    DIRT, GRASS, SAND, ROCK
-)
-
-val PITCH_SURFACES = listOf(
-    GRASS, ASPHALT, SAND, CONCRETE,
-    CLAY, ARTIFICIAL_TURF, TARTAN, DIRT,
-    FINE_GRAVEL, PAVING_STONES, COMPACTED,
-    SETT, UNHEWN_COBBLESTONE, GRASS_PAVER,
-    WOOD, METAL, GRAVEL, PEBBLES,
-    ROCK, PAVED_AREA, UNPAVED_AREA, GROUND_AREA
-)
-
-val GENERIC_ROAD_SURFACES = listOf(
-    PAVED_ROAD, UNPAVED_ROAD, GROUND_ROAD
-)
-
-val Surface.shouldBeDescribed: Boolean get() = this == PAVED_ROAD || this == UNPAVED_ROAD || this == PAVED_AREA || this == UNPAVED_AREA
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceAnswer.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceAnswer.kt
deleted file mode 100644
index e17fc4147df..00000000000
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceAnswer.kt
+++ /dev/null
@@ -1,82 +0,0 @@
-package de.westnordost.streetcomplete.quests.surface
-
-import de.westnordost.streetcomplete.osm.ANYTHING_FULLY_PAVED
-import de.westnordost.streetcomplete.osm.Tags
-import de.westnordost.streetcomplete.osm.isSurfaceAndTracktypeMismatching
-import de.westnordost.streetcomplete.osm.removeCheckDatesForKey
-import de.westnordost.streetcomplete.osm.updateWithCheckDate
-
-sealed interface SurfaceOrIsStepsAnswer
-object IsActuallyStepsAnswer : SurfaceOrIsStepsAnswer
-object IsIndoorsAnswer : SurfaceOrIsStepsAnswer
-
-data class SurfaceAnswer(val value: Surface, val note: String? = null) : SurfaceOrIsStepsAnswer
-
-fun SurfaceAnswer.applyTo(tags: Tags, prefix: String? = null) {
-    val osmValue = value.osmValue
-    val pre = if (prefix != null) "$prefix:" else ""
-    val key = "${pre}surface"
-    val previousOsmValue = tags[key]
-
-    var replacesTracktype = false
-    if (prefix == null) {
-        replacesTracktype = tags.containsKey("tracktype")
-            && isSurfaceAndTracktypeMismatching(osmValue, tags["tracktype"]!!)
-
-        if (replacesTracktype) {
-            tags.remove("tracktype")
-            tags.removeCheckDatesForKey("tracktype")
-        }
-    }
-
-    // remove smoothness tag if surface was changed
-    // or surface can be treated as outdated
-    if ((previousOsmValue != null && previousOsmValue != osmValue) || replacesTracktype) {
-        tags.remove("$key:grade")
-        tags.remove("${pre}smoothness")
-        tags.remove("${pre}smoothness:date")
-        tags.remove("source:smoothness")
-        tags.removeCheckDatesForKey("${pre}smoothness")
-    }
-
-    // update surface + check date
-    tags.updateWithCheckDate(key, osmValue)
-
-    // add/remove note - used to describe generic surfaces
-    if (note != null) {
-        tags["$key:note"] = note
-    } else {
-        tags.remove("$key:note")
-    }
-    // clean up old source tags - source should be in changeset tags
-    tags.remove("source:$key")
-}
-
-fun SurfaceAnswer.updateSegregatedFootAndCycleway(tags: Tags) {
-    val footwaySurface = tags["footway:surface"]
-    val cyclewaySurface = tags["cycleway:surface"]
-    if (cyclewaySurface != null && footwaySurface != null) {
-        val commonSurface = when {
-            footwaySurface == cyclewaySurface -> this
-            footwaySurface in ANYTHING_FULLY_PAVED && cyclewaySurface in ANYTHING_FULLY_PAVED -> SurfaceAnswer(Surface.PAVED_ROAD)
-            else -> null
-        }
-        if (commonSurface != null) {
-            commonSurface.applyTo(tags)
-        } else {
-            removeSurface(tags)
-        }
-    }
-}
-
-private fun removeSurface(tags: Tags) {
-    tags.remove("surface")
-    tags.remove("surface:note")
-    tags.remove("source:surface")
-    tags.removeCheckDatesForKey("surface")
-    tags.remove("surface:grade")
-    tags.remove("smoothness")
-    tags.remove("smoothness:date")
-    tags.remove("source:smoothness")
-    tags.removeCheckDatesForKey("smoothness")
-}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceDescriptionUtils.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceDescriptionUtils.kt
new file mode 100644
index 00000000000..3e88fc0265a
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceDescriptionUtils.kt
@@ -0,0 +1,25 @@
+package de.westnordost.streetcomplete.quests.surface
+
+import android.content.Context
+import androidx.appcompat.app.AlertDialog
+import de.westnordost.streetcomplete.R
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.shouldBeDescribed
+
+fun collectSurfaceDescriptionIfNecessary(
+    context: Context,
+    surface: Surface,
+    onDescribed: (description: String?) -> Unit
+) {
+    if (!surface.shouldBeDescribed) {
+        onDescribed(null)
+    } else {
+        AlertDialog.Builder(context)
+            .setMessage(R.string.quest_surface_detailed_answer_impossible_confirmation)
+            .setPositiveButton(R.string.quest_generic_confirmation_yes) { _, _ ->
+                DescribeGenericSurfaceDialog(context, onDescribed).show()
+            }
+            .setNegativeButton(android.R.string.cancel, null)
+            .show()
+    }
+}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceItem.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceItem.kt
deleted file mode 100644
index 50401d2e204..00000000000
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceItem.kt
+++ /dev/null
@@ -1,115 +0,0 @@
-package de.westnordost.streetcomplete.quests.surface
-
-import android.content.res.Resources
-import de.westnordost.streetcomplete.R
-import de.westnordost.streetcomplete.quests.surface.Surface.ARTIFICIAL_TURF
-import de.westnordost.streetcomplete.quests.surface.Surface.ASPHALT
-import de.westnordost.streetcomplete.quests.surface.Surface.CLAY
-import de.westnordost.streetcomplete.quests.surface.Surface.COMPACTED
-import de.westnordost.streetcomplete.quests.surface.Surface.CONCRETE
-import de.westnordost.streetcomplete.quests.surface.Surface.CONCRETE_LANES
-import de.westnordost.streetcomplete.quests.surface.Surface.CONCRETE_PLATES
-import de.westnordost.streetcomplete.quests.surface.Surface.DIRT
-import de.westnordost.streetcomplete.quests.surface.Surface.FINE_GRAVEL
-import de.westnordost.streetcomplete.quests.surface.Surface.GRASS
-import de.westnordost.streetcomplete.quests.surface.Surface.GRASS_PAVER
-import de.westnordost.streetcomplete.quests.surface.Surface.GRAVEL
-import de.westnordost.streetcomplete.quests.surface.Surface.GROUND_AREA
-import de.westnordost.streetcomplete.quests.surface.Surface.GROUND_ROAD
-import de.westnordost.streetcomplete.quests.surface.Surface.METAL
-import de.westnordost.streetcomplete.quests.surface.Surface.PAVED_AREA
-import de.westnordost.streetcomplete.quests.surface.Surface.PAVED_ROAD
-import de.westnordost.streetcomplete.quests.surface.Surface.PAVING_STONES
-import de.westnordost.streetcomplete.quests.surface.Surface.PEBBLES
-import de.westnordost.streetcomplete.quests.surface.Surface.ROCK
-import de.westnordost.streetcomplete.quests.surface.Surface.SAND
-import de.westnordost.streetcomplete.quests.surface.Surface.SETT
-import de.westnordost.streetcomplete.quests.surface.Surface.TARTAN
-import de.westnordost.streetcomplete.quests.surface.Surface.UNHEWN_COBBLESTONE
-import de.westnordost.streetcomplete.quests.surface.Surface.UNPAVED_AREA
-import de.westnordost.streetcomplete.quests.surface.Surface.UNPAVED_ROAD
-import de.westnordost.streetcomplete.quests.surface.Surface.WOOD
-import de.westnordost.streetcomplete.quests.surface.Surface.WOODCHIPS
-import de.westnordost.streetcomplete.view.DrawableImage
-import de.westnordost.streetcomplete.view.ResImage
-import de.westnordost.streetcomplete.view.ResText
-import de.westnordost.streetcomplete.view.RotatedCircleDrawable
-import de.westnordost.streetcomplete.view.controller.StreetSideDisplayItem
-import de.westnordost.streetcomplete.view.controller.StreetSideItem2
-import de.westnordost.streetcomplete.view.image_select.DisplayItem
-import de.westnordost.streetcomplete.view.image_select.Item
-
-fun List<Surface>.toItems() = this.map { it.asItem() }
-
-fun Surface.asItem(): DisplayItem<Surface> = Item(this, iconResId, titleResId)
-
-fun Surface.asStreetSideItem(resources: Resources): StreetSideDisplayItem<Surface> =
-    StreetSideItem2(
-        this,
-        ResImage(R.drawable.ic_sidewalk_illustration_yes),
-        ResText(titleResId),
-        ResImage(iconResId),
-        DrawableImage(RotatedCircleDrawable(resources.getDrawable(iconResId)))
-    )
-
-private val Surface.titleResId: Int get() = when (this) {
-    ASPHALT ->         R.string.quest_surface_value_asphalt
-    CONCRETE ->        R.string.quest_surface_value_concrete
-    CONCRETE_PLATES -> R.string.quest_surface_value_concrete_plates
-    CONCRETE_LANES ->  R.string.quest_surface_value_concrete_lanes
-    FINE_GRAVEL ->     R.string.quest_surface_value_fine_gravel
-    PAVING_STONES ->   R.string.quest_surface_value_paving_stones
-    COMPACTED ->       R.string.quest_surface_value_compacted
-    DIRT ->            R.string.quest_surface_value_dirt
-    SETT ->            R.string.quest_surface_value_sett
-    UNHEWN_COBBLESTONE -> R.string.quest_surface_value_unhewn_cobblestone
-    GRASS_PAVER ->     R.string.quest_surface_value_grass_paver
-    WOOD ->            R.string.quest_surface_value_wood
-    WOODCHIPS ->       R.string.quest_surface_value_woodchips
-    METAL ->           R.string.quest_surface_value_metal
-    GRAVEL ->          R.string.quest_surface_value_gravel
-    PEBBLES ->         R.string.quest_surface_value_pebblestone
-    GRASS ->           R.string.quest_surface_value_grass
-    SAND ->            R.string.quest_surface_value_sand
-    ROCK ->            R.string.quest_surface_value_rock
-    CLAY ->            R.string.quest_surface_value_clay
-    ARTIFICIAL_TURF -> R.string.quest_surface_value_artificial_turf
-    TARTAN ->          R.string.quest_surface_value_tartan
-    PAVED_ROAD ->      R.string.quest_surface_value_paved
-    UNPAVED_ROAD ->    R.string.quest_surface_value_unpaved
-    GROUND_ROAD ->     R.string.quest_surface_value_ground
-    PAVED_AREA ->      R.string.quest_surface_value_paved
-    UNPAVED_AREA ->    R.string.quest_surface_value_unpaved
-    GROUND_AREA ->     R.string.quest_surface_value_ground
-}
-
-private val Surface.iconResId: Int get() = when (this) {
-    ASPHALT ->         R.drawable.surface_asphalt
-    CONCRETE ->        R.drawable.surface_concrete
-    CONCRETE_PLATES -> R.drawable.surface_concrete_plates
-    CONCRETE_LANES ->  R.drawable.surface_concrete_lanes
-    FINE_GRAVEL ->     R.drawable.surface_fine_gravel
-    PAVING_STONES ->   R.drawable.surface_paving_stones
-    COMPACTED ->       R.drawable.surface_compacted
-    DIRT ->            R.drawable.surface_dirt
-    SETT ->            R.drawable.surface_sett
-    UNHEWN_COBBLESTONE -> R.drawable.surface_cobblestone
-    GRASS_PAVER ->     R.drawable.surface_grass_paver
-    WOOD ->            R.drawable.surface_wood
-    WOODCHIPS ->       R.drawable.surface_woodchips
-    METAL ->           R.drawable.surface_metal
-    GRAVEL ->          R.drawable.surface_gravel
-    PEBBLES ->         R.drawable.surface_pebblestone
-    GRASS ->           R.drawable.surface_grass
-    SAND ->            R.drawable.surface_sand
-    ROCK ->            R.drawable.surface_rock
-    CLAY ->            R.drawable.surface_tennis_clay
-    ARTIFICIAL_TURF -> R.drawable.surface_artificial_turf
-    TARTAN ->          R.drawable.surface_tartan
-    PAVED_ROAD ->      R.drawable.path_surface_paved
-    UNPAVED_ROAD ->    R.drawable.path_surface_unpaved
-    GROUND_ROAD ->     R.drawable.surface_ground
-    PAVED_AREA ->      R.drawable.surface_paved_area
-    UNPAVED_AREA ->    R.drawable.surface_unpaved_area
-    GROUND_AREA ->     R.drawable.surface_ground_area
-}
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceOrIsStepsAnswer.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceOrIsStepsAnswer.kt
new file mode 100644
index 00000000000..105c07690f1
--- /dev/null
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/surface/SurfaceOrIsStepsAnswer.kt
@@ -0,0 +1,9 @@
+package de.westnordost.streetcomplete.quests.surface
+
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+
+sealed interface SurfaceOrIsStepsAnswer
+object IsActuallyStepsAnswer : SurfaceOrIsStepsAnswer
+object IsIndoorsAnswer : SurfaceOrIsStepsAnswer
+data class SurfaceAnswer(val value: SurfaceAndNote) : SurfaceOrIsStepsAnswer
+
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/tracktype/AddTracktype.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/tracktype/AddTracktype.kt
index 9b14dbbadfd..8db098d74d8 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/tracktype/AddTracktype.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/tracktype/AddTracktype.kt
@@ -5,8 +5,8 @@ import de.westnordost.streetcomplete.data.osm.geometry.ElementGeometry
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmFilterQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.BICYCLIST
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement.CAR
-import de.westnordost.streetcomplete.osm.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_UNPAVED
 import de.westnordost.streetcomplete.osm.updateWithCheckDate
 
 class AddTracktype : OsmFilterQuestType<Tracktype>() {
diff --git a/app/src/main/java/de/westnordost/streetcomplete/quests/width/AddRoadWidth.kt b/app/src/main/java/de/westnordost/streetcomplete/quests/width/AddRoadWidth.kt
index f7a405e4904..b33c1c1b004 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/quests/width/AddRoadWidth.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/quests/width/AddRoadWidth.kt
@@ -8,10 +8,10 @@ import de.westnordost.streetcomplete.data.osm.mapdata.MapDataWithGeometry
 import de.westnordost.streetcomplete.data.osm.mapdata.filter
 import de.westnordost.streetcomplete.data.osm.osmquests.OsmElementQuestType
 import de.westnordost.streetcomplete.data.user.achievements.EditTypeAchievement
-import de.westnordost.streetcomplete.osm.ANYTHING_PAVED
 import de.westnordost.streetcomplete.osm.MAXSPEED_TYPE_KEYS
 import de.westnordost.streetcomplete.osm.ROADS_ASSUMED_TO_BE_PAVED
 import de.westnordost.streetcomplete.osm.Tags
+import de.westnordost.streetcomplete.osm.surface.ANYTHING_PAVED
 import de.westnordost.streetcomplete.screens.measure.ArSupportChecker
 
 class AddRoadWidth(
diff --git a/app/src/main/java/de/westnordost/streetcomplete/util/NameAndLocationLabel.kt b/app/src/main/java/de/westnordost/streetcomplete/util/NameAndLocationLabel.kt
index bc8c01cd496..d6a613e4295 100644
--- a/app/src/main/java/de/westnordost/streetcomplete/util/NameAndLocationLabel.kt
+++ b/app/src/main/java/de/westnordost/streetcomplete/util/NameAndLocationLabel.kt
@@ -1,14 +1,15 @@
 package de.westnordost.streetcomplete.util
 
+import android.content.res.Configuration
 import android.content.res.Resources
 import android.text.Html
 import androidx.core.text.parseAsHtml
 import de.westnordost.osmfeatures.FeatureDictionary
+import de.westnordost.osmfeatures.GeometryType
 import de.westnordost.streetcomplete.R
 import de.westnordost.streetcomplete.data.osm.mapdata.Element
 import de.westnordost.streetcomplete.data.osm.mapdata.ElementType
 import de.westnordost.streetcomplete.util.ktx.geometryType
-import java.util.Locale
 
 fun getNameAndLocationLabel(
     element: Element,
@@ -16,8 +17,9 @@ fun getNameAndLocationLabel(
     featureDictionary: FeatureDictionary,
     showHouseNumber: Boolean? = null
 ): CharSequence? {
-    val locales = getLocalesForFeatureDictionary(resources.configuration)
-    val feature = getFeatureName(element, featureDictionary, locales)
+    // only if geometry is not a node because at this point we cannot tell apart points vs vertices
+    val geometryType = if (element.type == ElementType.NODE) null else element.geometryType
+    val feature = featureDictionary.getFeatureName(resources.configuration, element.tags, geometryType)
         ?.withNonBreakingSpaces()
         ?.inItalics()
     val name = getNameLabel(element.tags)
@@ -69,22 +71,18 @@ private fun getLocationHtml(
 }
 
 /** Returns the feature name only, e.g. "Bakery" */
-private fun getFeatureName(
-    element: Element,
-    featureDictionary: FeatureDictionary,
-    locales: Array<Locale?>
-): String? {
-    val builder = featureDictionary
-        .byTags(element.tags)
-        .isSuggestion(false)
-        .forLocale(*locales)
-
-    // only if geometry is not a node because at this point we cannot tell apart points vs vertices
-    if (element.type != ElementType.NODE) {
-        builder.forGeometry(element.geometryType)
-    }
-    return builder.find().firstOrNull()?.name
-}
+fun FeatureDictionary.getFeatureName(
+    configuration: Configuration,
+    tags: Map<String, String>,
+    geometryType: GeometryType? = null,
+): String? = this
+    .byTags(tags)
+    .isSuggestion(false)
+    .forLocale(*getLocalesForFeatureDictionary(configuration))
+    .forGeometry(geometryType)
+    .find()
+    .firstOrNull()
+    ?.name
 
 /** Returns a text that identifies the feature by name, ref, brand or whatever, e.g. "The Leaky Cauldron" */
 fun getNameLabel(tags: Map<String, String>): String? {
diff --git a/app/src/main/res/authors.txt b/app/src/main/res/authors.txt
index caf6406058d..3c70a592e88 100644
--- a/app/src/main/res/authors.txt
+++ b/app/src/main/res/authors.txt
@@ -238,11 +238,9 @@ surface_fine_gravel.jpg        CC0               https://commons.wikimedia.org/w
 surface_grass.jpg              CC-BY-SA 2.0      https://commons.wikimedia.org/wiki/File:Footpath_through_the_long_grass_near_Southorpe_Bottom_(geograph_4621359).jpg (Richard Humphrey)
 surface_grass_paver.jpg        Public Domain     https://commons.wikimedia.org/wiki/File:Rasenpflasterstein_1.jpg (Immanuel Giel)
 surface_gravel.jpg             CC-BY 3.0         https://commons.wikimedia.org/wiki/File:Gravel_at_the_top_of_Vidova_gora,_island_of_Bra%C4%8D,_Croatia.jpg (Ante Perkovic)
-surface_ground.jpg             CC-BY 3.0         https://commons.wikimedia.org/wiki/File:Dirt_Road,_Bulacan,_Philippines_-_panoramio.jpg
+surface_mud.jpg                CC-BY-SA 3.0      https://commons.wikimedia.org/wiki/File:Dirt_road,_Ond%C5%99ejovsko_(4).jpg (Pavel evela [sevela.p])
 surface_metal.jpg              Public Domain     https://commons.wikimedia.org/wiki/File:Metal_steel_surface.jpg (Titus Tscharntke)
 surface_paved.jpg              CC0               https://www.goodfreephotos.com/united-states/indiana/hoosier-hill/hooiser-hill-road-near-the-top-indiana.jpg.php
-path_surface_paved.jpg         CC-BY 4.0         https://github.com/streetcomplete/StreetComplete/issues/133#issuecomment-393650654 (Bjorn Rasmussen)
-path_surface_unpaved.jpg       CC-BY 4.0         https://github.com/streetcomplete/StreetComplete/issues/133#issuecomment-393650654 (Bjorn Rasmussen)
 surface_paving_stones.jpg      CC-BY-SA 4.0      Tobias Zwick with modifications by Mateusz Konieczny
 surface_rock.jpg               CC0               Elliot Plack
 surface_tennis_clay.jpg        CC-BY-SA 2.0      https://commons.wikimedia.org/wiki/File:Rafael_Nadal%2C_2011_Roland_Garros_(3).jpg (Yann Caradec)
diff --git a/app/src/main/res/drawable-hdpi/path_surface_paved.jpg b/app/src/main/res/drawable-hdpi/path_surface_paved.jpg
deleted file mode 100644
index 792b602c616..00000000000
Binary files a/app/src/main/res/drawable-hdpi/path_surface_paved.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-hdpi/path_surface_unpaved.jpg b/app/src/main/res/drawable-hdpi/path_surface_unpaved.jpg
deleted file mode 100644
index b8f79f27d6d..00000000000
Binary files a/app/src/main/res/drawable-hdpi/path_surface_unpaved.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-hdpi/surface_ground.jpg b/app/src/main/res/drawable-hdpi/surface_ground.jpg
deleted file mode 100644
index 92451809bb9..00000000000
Binary files a/app/src/main/res/drawable-hdpi/surface_ground.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-hdpi/surface_mud.jpg b/app/src/main/res/drawable-hdpi/surface_mud.jpg
new file mode 100644
index 00000000000..36562c2c797
Binary files /dev/null and b/app/src/main/res/drawable-hdpi/surface_mud.jpg differ
diff --git a/app/src/main/res/drawable-mdpi/path_surface_paved.jpg b/app/src/main/res/drawable-mdpi/path_surface_paved.jpg
deleted file mode 100644
index 9fb74604fac..00000000000
Binary files a/app/src/main/res/drawable-mdpi/path_surface_paved.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-mdpi/path_surface_unpaved.jpg b/app/src/main/res/drawable-mdpi/path_surface_unpaved.jpg
deleted file mode 100644
index ffe7b982e89..00000000000
Binary files a/app/src/main/res/drawable-mdpi/path_surface_unpaved.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-mdpi/surface_ground.jpg b/app/src/main/res/drawable-mdpi/surface_ground.jpg
deleted file mode 100644
index a1f68224b4a..00000000000
Binary files a/app/src/main/res/drawable-mdpi/surface_ground.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-mdpi/surface_mud.jpg b/app/src/main/res/drawable-mdpi/surface_mud.jpg
new file mode 100644
index 00000000000..40f8bceb74f
Binary files /dev/null and b/app/src/main/res/drawable-mdpi/surface_mud.jpg differ
diff --git a/app/src/main/res/drawable-xhdpi/path_surface_paved.jpg b/app/src/main/res/drawable-xhdpi/path_surface_paved.jpg
deleted file mode 100644
index 4f08fe54d62..00000000000
Binary files a/app/src/main/res/drawable-xhdpi/path_surface_paved.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-xhdpi/path_surface_unpaved.jpg b/app/src/main/res/drawable-xhdpi/path_surface_unpaved.jpg
deleted file mode 100644
index 0dab792a0e7..00000000000
Binary files a/app/src/main/res/drawable-xhdpi/path_surface_unpaved.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-xhdpi/surface_ground.jpg b/app/src/main/res/drawable-xhdpi/surface_ground.jpg
deleted file mode 100644
index ba44327729c..00000000000
Binary files a/app/src/main/res/drawable-xhdpi/surface_ground.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-xhdpi/surface_mud.jpg b/app/src/main/res/drawable-xhdpi/surface_mud.jpg
new file mode 100644
index 00000000000..b4bcb01b9f5
Binary files /dev/null and b/app/src/main/res/drawable-xhdpi/surface_mud.jpg differ
diff --git a/app/src/main/res/drawable-xxhdpi/path_surface_paved.jpg b/app/src/main/res/drawable-xxhdpi/path_surface_paved.jpg
deleted file mode 100644
index 91b2f43d344..00000000000
Binary files a/app/src/main/res/drawable-xxhdpi/path_surface_paved.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-xxhdpi/path_surface_unpaved.jpg b/app/src/main/res/drawable-xxhdpi/path_surface_unpaved.jpg
deleted file mode 100644
index 2b27dda4f65..00000000000
Binary files a/app/src/main/res/drawable-xxhdpi/path_surface_unpaved.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-xxhdpi/surface_ground.jpg b/app/src/main/res/drawable-xxhdpi/surface_ground.jpg
deleted file mode 100644
index a1001d0500a..00000000000
Binary files a/app/src/main/res/drawable-xxhdpi/surface_ground.jpg and /dev/null differ
diff --git a/app/src/main/res/drawable-xxhdpi/surface_mud.jpg b/app/src/main/res/drawable-xxhdpi/surface_mud.jpg
new file mode 100644
index 00000000000..d75bf8253ac
Binary files /dev/null and b/app/src/main/res/drawable-xxhdpi/surface_mud.jpg differ
diff --git a/app/src/main/res/drawable/space_128dp.xml b/app/src/main/res/drawable/space_128dp.xml
new file mode 100644
index 00000000000..52022a4d6b7
--- /dev/null
+++ b/app/src/main/res/drawable/space_128dp.xml
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="utf-8"?>
+<shape xmlns:android="http://schemas.android.com/apk/res/android">
+    <size android:height="128dp" android:width="128dp"/>
+</shape>
diff --git a/app/src/main/res/layout/fragment_move_node.xml b/app/src/main/res/layout/fragment_move_node.xml
index 083a38c4e3f..f7e4d1b21e2 100644
--- a/app/src/main/res/layout/fragment_move_node.xml
+++ b/app/src/main/res/layout/fragment_move_node.xml
@@ -124,8 +124,8 @@
         <ImageView
             android:id="@+id/okButton"
             android:src="@drawable/ic_check_48dp"
-            android:layout_width="72dp"
-            android:layout_height="72dp"
+            android:layout_width="@dimen/ok_button_size"
+            android:layout_height="@dimen/ok_button_size"
             android:layout_alignParentEnd="true"
             android:layout_alignParentBottom="true"
             android:scaleType="centerInside"
diff --git a/app/src/main/res/layout/fragment_overlay.xml b/app/src/main/res/layout/fragment_overlay.xml
index cb884e49853..dbe5e4f53cc 100644
--- a/app/src/main/res/layout/fragment_overlay.xml
+++ b/app/src/main/res/layout/fragment_overlay.xml
@@ -116,8 +116,8 @@
                             android:src="@drawable/ic_check_48dp"
                             android:scaleType="centerInside"
                             style="@style/RoundAccentButton"
-                            android:layout_width="72dp"
-                            android:layout_height="72dp"
+                            android:layout_width="@dimen/ok_button_size"
+                            android:layout_height="@dimen/ok_button_size"
                             android:padding="20dp"/>
 
                     </RelativeLayout>
diff --git a/app/src/main/res/layout/fragment_overlay_image_select.xml b/app/src/main/res/layout/fragment_overlay_image_select.xml
index deec37688db..9e295de93ce 100644
--- a/app/src/main/res/layout/fragment_overlay_image_select.xml
+++ b/app/src/main/res/layout/fragment_overlay_image_select.xml
@@ -1,54 +1,15 @@
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
-    android:minHeight="160dp">
+    android:paddingLeft="16dp"
+    android:paddingRight="16dp"
+    android:minHeight="160dp"
+    android:gravity="center">
 
-    <androidx.constraintlayout.widget.ConstraintLayout
+    <include
         android:id="@+id/selectButton"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_marginLeft="16dp"
-        android:layout_marginRight="16dp"
-        android:background="@drawable/background_button_selectable_outline"
-        android:animateLayoutChanges="true"
-        android:layout_centerInParent="true">
-
-        <FrameLayout
-            android:id="@+id/selectedCellView"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            app:layout_constrainedWidth="true"
-            app:layout_constraintEnd_toStartOf="@id/selectTextView"
-            app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toTopOf="parent"
-            app:layout_constraintBottom_toBottomOf="parent" />
-
-        <TextView
-            android:id="@+id/selectTextView"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:text="@string/quest_select_hint"
-            android:textAppearance="@style/TextAppearance.AppCompat.Widget.Button"
-            android:padding="16dp"
-            app:layout_constraintStart_toEndOf="@id/selectedCellView"
-            app:layout_constraintTop_toTopOf="parent"
-            app:layout_constraintBottom_toBottomOf="parent"
-            app:layout_constraintEnd_toStartOf="@id/dropDownArrowImageView" />
-
-        <ImageView
-            android:id="@+id/dropDownArrowImageView"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:src="@drawable/ic_arrow_expand_down_24dp"
-            android:padding="4dp"
-            app:layout_constrainedWidth="true"
-            app:layout_constraintStart_toEndOf="@id/selectTextView"
-            app:layout_constraintTop_toTopOf="parent"
-            app:layout_constraintBottom_toBottomOf="parent"
-            app:layout_constraintEnd_toEndOf="parent" />
-
-    </androidx.constraintlayout.widget.ConstraintLayout>
+        layout="@layout/view_image_select"
+        />
 
 </RelativeLayout>
diff --git a/app/src/main/res/layout/fragment_overlay_surface_select.xml b/app/src/main/res/layout/fragment_overlay_surface_select.xml
new file mode 100644
index 00000000000..10e85d8616d
--- /dev/null
+++ b/app/src/main/res/layout/fragment_overlay_surface_select.xml
@@ -0,0 +1,77 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:minHeight="160dp"
+    android:weightSum="2"
+    android:divider="@drawable/space_16dp"
+    android:showDividers="middle|beginning|end"
+    android:orientation="horizontal">
+
+    <include
+        android:id="@+id/main"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        layout="@layout/view_image_select_plus_text"
+        tools:visibility="gone"
+        />
+
+    <LinearLayout
+        android:id="@+id/cycleway_surface_container"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:visibility="gone"
+        tools:visibility="visible"
+        android:layout_weight="1"
+        android:gravity="center_horizontal"
+        android:orientation="vertical">
+
+        <TextView
+            android:id="@+id/cyclewaySurfaceLabel"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            tools:text="Cycleway Path"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toTopOf="parent"
+            app:layout_constraintBottom_toBottomOf="parent" />
+
+        <include
+            android:id="@+id/cycleway"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            layout="@layout/view_image_select_plus_text"
+            />
+
+    </LinearLayout>
+
+    <LinearLayout
+        android:id="@+id/footway_surface_container"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:visibility="gone"
+        tools:visibility="visible"
+        android:gravity="center_horizontal"
+        android:layout_weight="1"
+        android:orientation="vertical">
+
+        <TextView
+            android:id="@+id/footwaySurfaceLabel"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            tools:text="Foot Path"
+            app:layout_constraintStart_toStartOf="parent"
+            app:layout_constraintTop_toTopOf="parent"
+            app:layout_constraintBottom_toBottomOf="parent" />
+
+        <include
+            android:id="@+id/footway"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            layout="@layout/view_image_select_plus_text"
+            />
+    </LinearLayout>
+
+</LinearLayout>
diff --git a/app/src/main/res/layout/fragment_quest_answer.xml b/app/src/main/res/layout/fragment_quest_answer.xml
index 43743aa2b85..78c6bf48c8e 100644
--- a/app/src/main/res/layout/fragment_quest_answer.xml
+++ b/app/src/main/res/layout/fragment_quest_answer.xml
@@ -177,8 +177,8 @@
             android:src="@drawable/ic_check_48dp"
             android:scaleType="centerInside"
             style="@style/RoundAccentButton"
-            android:layout_width="72dp"
-            android:layout_height="72dp"
+            android:layout_width="@dimen/ok_button_size"
+            android:layout_height="@dimen/ok_button_size"
             android:padding="20dp"/>
 
     </RelativeLayout>
diff --git a/app/src/main/res/layout/view_image_select.xml b/app/src/main/res/layout/view_image_select.xml
new file mode 100644
index 00000000000..f5378432f48
--- /dev/null
+++ b/app/src/main/res/layout/view_image_select.xml
@@ -0,0 +1,45 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    android:id="@+id/selectButton"
+    android:layout_width="wrap_content"
+    android:layout_height="wrap_content"
+    android:background="@drawable/background_button_selectable_outline"
+    android:animateLayoutChanges="true">
+
+    <FrameLayout
+        android:id="@+id/selectedCellView"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        app:layout_constrainedWidth="true"
+        app:layout_constraintEnd_toStartOf="@id/selectTextView"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        app:layout_constraintBottom_toBottomOf="parent" />
+
+    <TextView
+        android:id="@+id/selectTextView"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:text="@string/quest_select_hint"
+        android:textAppearance="@style/TextAppearance.AppCompat.Widget.Button"
+        android:padding="16dp"
+        app:layout_constraintStart_toEndOf="@id/selectedCellView"
+        app:layout_constraintTop_toTopOf="parent"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toStartOf="@id/dropDownArrowImageView" />
+
+    <ImageView
+        android:id="@+id/dropDownArrowImageView"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:src="@drawable/ic_arrow_expand_down_24dp"
+        android:padding="4dp"
+        app:layout_constrainedWidth="true"
+        app:layout_constraintStart_toEndOf="@id/selectTextView"
+        app:layout_constraintTop_toTopOf="parent"
+        app:layout_constraintBottom_toBottomOf="parent"
+        app:layout_constraintEnd_toEndOf="parent" />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
diff --git a/app/src/main/res/layout/view_image_select_plus_text.xml b/app/src/main/res/layout/view_image_select_plus_text.xml
new file mode 100644
index 00000000000..45082c00e77
--- /dev/null
+++ b/app/src/main/res/layout/view_image_select_plus_text.xml
@@ -0,0 +1,29 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:layout_gravity="center_horizontal"
+    android:gravity="center_horizontal"
+    android:orientation="vertical">
+
+    <include
+        android:id="@+id/selectButton"
+        layout="@layout/view_image_select"/>
+
+    <EditText
+        android:id="@+id/explanationInput"
+        android:layout_width="match_parent"
+        android:layout_marginLeft="@dimen/quest_form_horizontal_margin"
+        android:layout_marginRight="@dimen/quest_form_horizontal_margin"
+        android:layout_marginBottom="@dimen/ok_button_size"
+        android:layout_height="wrap_content"
+        android:inputType="textMultiLine"
+        android:gravity="top|start"
+        android:hint="@string/quest_surface_detailed_answer_impossible_title"
+        android:maxLength="255"
+        android:scrollbars="vertical"
+        android:visibility="gone"
+        tools:visibility="visible" />
+
+</LinearLayout>
diff --git a/app/src/main/res/raw/changelog.yml b/app/src/main/res/raw/changelog.yml
index d4ed040c5b4..926ad15ee78 100644
--- a/app/src/main/res/raw/changelog.yml
+++ b/app/src/main/res/raw/changelog.yml
@@ -1,4 +1,7 @@
 v52.0-beta1: |
+  <h3>New overlay for surfaces (#4378, #4642), thanks @matkoniecz</h3>
+  <p>Now you can comprehensively map and verify surfaces mapped for roads and paths!</p>
+
   <h3>New Quests</h3>
   <ul>
   <li><i>Is this still here?</i>, asked for shops every 2 years (#4232, #4843), by @matkoniecz</li>
@@ -9,6 +12,7 @@ v52.0-beta1: |
   <li>Fix block number input in Japan, by @Helium314</li>
   <li>Address overlay: Addresses can now not be added to buildings in Italy (#4801)</li>
   <li>Address overlay: You can now add addresses to entrances (#4823)</li>
+  <li>Surfaces: Added "persistent mud" as selectable surface, by @matkoniecz</li>
   <li>Building levels: Require specifying the roof levels, too (with exceptions) (#4874, #4821, #4661)</li>
   <li>Ask about wheelchair accessibility of toilets in restaurants etc. (#4866, #4868, #4879), thanks @arrival-spring, @Helium314</li>
   <li>You can now duplicate quest presets (#4609, #4820), by @michalgwo</li>
diff --git a/app/src/main/res/values/dimens.xml b/app/src/main/res/values/dimens.xml
index b8c0822b5ff..968f472528d 100644
--- a/app/src/main/res/values/dimens.xml
+++ b/app/src/main/res/values/dimens.xml
@@ -44,6 +44,8 @@
 
     <dimen name="map_button_size">60dp</dimen>
 
+    <dimen name="ok_button_size">72dp</dimen>
+
     <!-- user screen -->
 
     <dimen name="statistics_edit_type_icon_size">192dp</dimen>
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
index 796babeaec5..091a687505b 100644
--- a/app/src/main/res/values/strings.xml
+++ b/app/src/main/res/values/strings.xml
@@ -1499,6 +1499,7 @@ Otherwise, you can download another keyboard in the app store. Popular keyboards
     <string name="quest_surface_value_compacted">"Compacted"</string>
     <string name="quest_surface_value_concrete">"Concrete"</string>
     <string name="quest_surface_value_dirt">"Dirt"</string>
+    <string name="quest_surface_value_mud">"Persistent mud"</string>
     <string name="quest_surface_value_fine_gravel">"Fine gravel"</string>
     <string name="quest_surface_value_grass">"Grass"</string>
     <string name="quest_surface_value_grass_paver">"Grass paver"</string>
@@ -1610,7 +1611,6 @@ Partially means that a wheelchair can enter and use the restroom, but no handrai
     <string name="cycleway_reverse_direction_toast">Tap which side to reverse</string>
 
     <string name="overlay_none">None</string>
-
     <string name="overlay_lit">Street lighting</string>
     <string name="lit_value_yes">Lit</string>
     <string name="lit_value_no">Not lit</string>
@@ -1633,6 +1633,12 @@ Partially means that a wheelchair can enter and use the restroom, but no handrai
 
     <string name="overlay_street_parking">Street parking</string>
 
+    <!-- Used for surfaces unknown by SC. Does not mean it is invalid. The wording that it is "unknown" is avoided so that the user does not think an action is necessary from them -->
+    <string name="unknown_surface_title">Other kind of surface</string>
+    <string name="overlay_surface">Surfaces</string>
+
+    <string name="overlay_path_surface_segregated">Split into cycling and walking parts</string>
+
     <string name="select_street_parking_orientation">"Select orientation toward roadway:"</string>
     <string name="select_street_parking_position">"Select position:"</string>
     <string name="select_street_parking_no">"Any sign or road marking here?"</string>
diff --git a/app/src/test/java/de/westnordost/streetcomplete/osm/SurfaceKtTest.kt b/app/src/test/java/de/westnordost/streetcomplete/osm/SurfaceKtTest.kt
deleted file mode 100644
index 3410563b5d4..00000000000
--- a/app/src/test/java/de/westnordost/streetcomplete/osm/SurfaceKtTest.kt
+++ /dev/null
@@ -1,32 +0,0 @@
-package de.westnordost.streetcomplete.osm
-
-import org.junit.Assert.assertFalse
-import org.junit.Assert.assertTrue
-import org.junit.Test
-
-class SurfaceKtTest {
-    @Test
-    fun `poor tracktype conflicts with paved surface`() {
-        assertTrue(isSurfaceAndTracktypeMismatching("asphalt", "grade5"))
-    }
-
-    @Test
-    fun `high quality tracktype conflicts with poor surface`() {
-        assertTrue(isSurfaceAndTracktypeMismatching("gravel", "grade1"))
-    }
-
-    @Test
-    fun `high quality tracktype fits good surface`() {
-        assertFalse(isSurfaceAndTracktypeMismatching("paving_stones", "grade1"))
-    }
-
-    @Test
-    fun `unknown tracktype does not crash or conflict`() {
-        assertFalse(isSurfaceAndTracktypeMismatching("paving_stones", "lorem ipsum"))
-    }
-
-    @Test
-    fun `unknown surface does not crash or conflict`() {
-        assertFalse(isSurfaceAndTracktypeMismatching("za", "grade1"))
-    }
-}
diff --git a/app/src/test/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceCreatorKtTest.kt b/app/src/test/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceCreatorKtTest.kt
new file mode 100644
index 00000000000..b46132c4413
--- /dev/null
+++ b/app/src/test/java/de/westnordost/streetcomplete/osm/sidewalk_surface/SidewalkSurfaceCreatorKtTest.kt
@@ -0,0 +1,133 @@
+package de.westnordost.streetcomplete.osm.sidewalk_surface
+
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapChangesBuilder
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryAdd
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryChange
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryDelete
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryModify
+import de.westnordost.streetcomplete.osm.nowAsCheckDateString
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
+import de.westnordost.streetcomplete.osm.surface.Surface
+import org.assertj.core.api.Assertions
+import org.junit.Test
+
+internal class SidewalkSurfaceCreatorKtTest {
+
+    @Test fun `apply asphalt surface on both sides`() {
+        verifyAnswer(
+            mapOf(),
+            LeftAndRightSidewalkSurface(SurfaceAndNote(Surface.ASPHALT), SurfaceAndNote(Surface.ASPHALT)),
+            arrayOf(
+                StringMapEntryAdd("sidewalk:both:surface", "asphalt")
+            )
+        )
+    }
+
+    @Test fun `apply different surface on each side`() {
+        verifyAnswer(
+            mapOf(),
+            LeftAndRightSidewalkSurface(SurfaceAndNote(Surface.ASPHALT), SurfaceAndNote(Surface.PAVING_STONES)),
+            arrayOf(
+                StringMapEntryAdd("sidewalk:left:surface", "asphalt"),
+                StringMapEntryAdd("sidewalk:right:surface", "paving_stones")
+            )
+        )
+    }
+
+    @Test fun `apply generic surface on both sides`() {
+        verifyAnswer(
+            mapOf(),
+            LeftAndRightSidewalkSurface(
+                SurfaceAndNote(Surface.PAVED, "note"),
+                SurfaceAndNote(Surface.PAVED, "note")
+            ),
+            arrayOf(
+                StringMapEntryAdd("sidewalk:both:surface", "paved"),
+                StringMapEntryAdd("sidewalk:both:surface:note", "note")
+            )
+        )
+    }
+
+    @Test fun `updates check_date`() {
+        verifyAnswer(
+            mapOf("sidewalk:both:surface" to "asphalt", "check_date:sidewalk:surface" to "2000-10-10"),
+            LeftAndRightSidewalkSurface(SurfaceAndNote(Surface.ASPHALT), SurfaceAndNote(Surface.ASPHALT)),
+            arrayOf(
+                StringMapEntryModify("sidewalk:both:surface", "asphalt", "asphalt"),
+                StringMapEntryModify("check_date:sidewalk:surface", "2000-10-10", nowAsCheckDateString()),
+            )
+        )
+    }
+
+    @Test fun `sidewalk surface changes to be the same on both sides`() {
+        verifyAnswer(
+            mapOf("sidewalk:left:surface" to "asphalt", "sidewalk:right:surface" to "paving_stones"),
+            LeftAndRightSidewalkSurface(SurfaceAndNote(Surface.CONCRETE), SurfaceAndNote(Surface.CONCRETE)),
+            arrayOf(
+                StringMapEntryDelete("sidewalk:left:surface", "asphalt"),
+                StringMapEntryDelete("sidewalk:right:surface", "paving_stones"),
+                StringMapEntryAdd("sidewalk:both:surface", "concrete")
+            )
+        )
+    }
+
+    @Test fun `sidewalk surface changes on each side`() {
+        verifyAnswer(
+            mapOf("sidewalk:left:surface" to "asphalt", "sidewalk:right:surface" to "paving_stones"),
+            LeftAndRightSidewalkSurface(SurfaceAndNote(Surface.CONCRETE), SurfaceAndNote(Surface.GRAVEL)),
+            arrayOf(
+                StringMapEntryModify("sidewalk:left:surface", "asphalt", "concrete"),
+                StringMapEntryModify("sidewalk:right:surface", "paving_stones", "gravel"),
+            )
+        )
+    }
+
+    @Test fun `smoothness tag removed when surface changes, same on both sides`() {
+        verifyAnswer(
+            mapOf("sidewalk:both:surface" to "asphalt", "sidewalk:both:smoothness" to "excellent"),
+            LeftAndRightSidewalkSurface(SurfaceAndNote(Surface.PAVING_STONES), SurfaceAndNote(Surface.PAVING_STONES)),
+            arrayOf(
+                StringMapEntryDelete("sidewalk:both:smoothness", "excellent"),
+                StringMapEntryModify("sidewalk:both:surface", "asphalt", "paving_stones")
+            )
+        )
+    }
+
+    @Test fun `remove smoothness when surface changes, different on each side`() {
+        verifyAnswer(
+            mapOf("sidewalk:left:surface" to "asphalt",
+                "sidewalk:right:surface" to "concrete",
+                "sidewalk:left:smoothness" to "excellent",
+                "sidewalk:right:smoothness" to "good"
+            ),
+            LeftAndRightSidewalkSurface(SurfaceAndNote(Surface.PAVING_STONES), SurfaceAndNote(Surface.PAVING_STONES)),
+            arrayOf(
+                StringMapEntryDelete("sidewalk:left:surface", "asphalt"),
+                StringMapEntryDelete("sidewalk:right:surface", "concrete"),
+                StringMapEntryDelete("sidewalk:left:smoothness", "excellent"),
+                StringMapEntryDelete("sidewalk:right:smoothness", "good"),
+                StringMapEntryAdd("sidewalk:both:surface", "paving_stones")
+            )
+        )
+    }
+
+    @Test fun `carriageway properties not affected by sidewalk answer`() {
+        verifyAnswer(
+            mapOf("sidewalk" to "both",
+                "surface" to "concrete",
+                "smoothness" to "excellent",
+            ),
+            LeftAndRightSidewalkSurface(SurfaceAndNote(Surface.PAVING_STONES), SurfaceAndNote(Surface.PAVING_STONES)),
+            arrayOf(
+                StringMapEntryAdd("sidewalk:both:surface", "paving_stones")
+            )
+        )
+    }
+}
+
+private fun verifyAnswer(tags: Map<String, String>, answer: LeftAndRightSidewalkSurface, expectedChanges: Array<StringMapEntryChange>) {
+    val cb = StringMapChangesBuilder(tags)
+    answer.applyTo(cb)
+    val changes = cb.create().changes
+    Assertions.assertThat(changes).containsExactlyInAnyOrder(*expectedChanges)
+}
diff --git a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/SurfaceAnswerKtTest.kt b/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceCreatorKtTest.kt
similarity index 60%
rename from app/src/test/java/de/westnordost/streetcomplete/quests/surface/SurfaceAnswerKtTest.kt
rename to app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceCreatorKtTest.kt
index 81602249590..151d3222449 100644
--- a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/SurfaceAnswerKtTest.kt
+++ b/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceCreatorKtTest.kt
@@ -1,4 +1,4 @@
-package de.westnordost.streetcomplete.quests.surface
+package de.westnordost.streetcomplete.osm.surface
 
 import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapChangesBuilder
 import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryAdd
@@ -9,23 +9,23 @@ import de.westnordost.streetcomplete.osm.nowAsCheckDateString
 import org.assertj.core.api.Assertions
 import org.junit.Test
 
-internal class SurfaceAnswerKtTest {
+class SurfaceCreatorKtTest {
 
     @Test fun `apply surface`() {
-        verifyAnswer(
+        verify(
             mapOf("highway" to "residential"),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             arrayOf(StringMapEntryAdd("surface", "asphalt"))
         )
     }
 
-    @Test fun `apply non-changed surface`() {
-        verifyAnswer(
+    @Test fun `apply non-changed surface updates check date`() {
+        verify(
             mapOf(
                 "highway" to "residential",
                 "surface" to "asphalt"
             ),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             arrayOf(
                 StringMapEntryModify("surface", "asphalt", "asphalt"),
                 StringMapEntryAdd("check_date:surface", nowAsCheckDateString())
@@ -34,13 +34,13 @@ internal class SurfaceAnswerKtTest {
     }
 
     @Test fun `remove mismatching tracktype`() {
-        verifyAnswer(
+        verify(
             mapOf(
                 "highway" to "residential",
                 "tracktype" to "grade5",
                 "check_date:tracktype" to "2011-11-11"
             ),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             arrayOf(
                 StringMapEntryAdd("surface", "asphalt"),
                 StringMapEntryDelete("tracktype", "grade5"),
@@ -50,20 +50,20 @@ internal class SurfaceAnswerKtTest {
     }
 
     @Test fun `keep matching tracktype`() {
-        verifyAnswer(
+        verify(
             mapOf(
                 "highway" to "residential",
                 "tracktype" to "grade1"
             ),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             arrayOf(
                 StringMapEntryAdd("surface", "asphalt")
             )
         )
     }
 
-    @Test fun `removes smoothness values when surface changed`() {
-        verifyAnswer(
+    @Test fun `remove associated tags when surface changed`() {
+        verify(
             mapOf(
                 "highway" to "residential",
                 "surface" to "compacted",
@@ -71,22 +71,46 @@ internal class SurfaceAnswerKtTest {
                 "smoothness" to "well",
                 "smoothness:date" to "2011-11-11",
                 "check_date:smoothness" to "2011-11-11",
+                "tracktype" to "grade5",
+                "surface:colour" to "pink"
             ),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             arrayOf(
                 StringMapEntryModify("surface", "compacted", "asphalt"),
                 StringMapEntryDelete("surface:grade", "3"),
+                StringMapEntryDelete("surface:colour", "pink"),
                 StringMapEntryDelete("smoothness", "well"),
                 StringMapEntryDelete("smoothness:date", "2011-11-11"),
                 StringMapEntryDelete("check_date:smoothness", "2011-11-11"),
+                StringMapEntryDelete("tracktype", "grade5"),
             )
         )
     }
 
-    @Test fun `always removes source-surface`() {
-        verifyAnswer(
+    @Test fun `keep associated tags when surface did not change`() {
+        verify(
+            mapOf(
+                "highway" to "residential",
+                "surface" to "asphalt",
+                "surface:grade" to "3",
+                "smoothness" to "well",
+                "smoothness:date" to "2011-11-11",
+                "check_date:smoothness" to "2011-11-11",
+                "tracktype" to "grade1",
+                "surface:colour" to "pink"
+            ),
+            SurfaceAndNote(Surface.ASPHALT),
+            arrayOf(
+                StringMapEntryModify("surface", "asphalt", "asphalt"),
+                StringMapEntryAdd("check_date:surface", nowAsCheckDateString()),
+            )
+        )
+    }
+
+    @Test fun `always remove source-surface`() {
+        verify(
             mapOf("highway" to "residential", "source:surface" to "bing"),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             arrayOf(
                 StringMapEntryAdd("surface", "asphalt"),
                 StringMapEntryDelete("source:surface", "bing"),
@@ -95,31 +119,41 @@ internal class SurfaceAnswerKtTest {
     }
 
     @Test fun `add note when specified`() {
-        verifyAnswer(
+        verify(
             mapOf(),
-            SurfaceAnswer(Surface.ASPHALT, "nurgle"),
+            SurfaceAndNote(Surface.ASPHALT, "gurgle"),
             arrayOf(
                 StringMapEntryAdd("surface", "asphalt"),
-                StringMapEntryAdd("surface:note", "nurgle"),
+                StringMapEntryAdd("surface:note", "gurgle"),
             )
         )
     }
 
     @Test fun `remove note when not specified`() {
-        verifyAnswer(
+        verify(
             mapOf("surface:note" to "nurgle"),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             arrayOf(
                 StringMapEntryAdd("surface", "asphalt"),
                 StringMapEntryDelete("surface:note", "nurgle"),
             )
         )
     }
+
+    @Test fun `sidewalk surface marked as tag on road is not touched`() {
+        verify(
+            mapOf("highway" to "tertiary", "sidewalk:surface" to "paving_stones"),
+            SurfaceAndNote(Surface.ASPHALT),
+            arrayOf(
+                StringMapEntryAdd("surface", "asphalt"),
+            )
+        )
+    }
 }
 
-private fun verifyAnswer(tags: Map<String, String>, answer: SurfaceAnswer, expectedChanges: Array<StringMapEntryChange>) {
+private fun verify(tags: Map<String, String>, value: SurfaceAndNote, expectedChanges: Array<StringMapEntryChange>) {
     val cb = StringMapChangesBuilder(tags)
-    answer.applyTo(cb)
+    value.applyTo(cb)
     val changes = cb.create().changes
     Assertions.assertThat(changes).containsExactlyInAnyOrder(*expectedChanges)
 }
diff --git a/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceKtTest.kt b/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceKtTest.kt
new file mode 100644
index 00000000000..6561f754642
--- /dev/null
+++ b/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceKtTest.kt
@@ -0,0 +1,22 @@
+package de.westnordost.streetcomplete.osm.surface
+
+import org.junit.Assert.*
+import org.junit.Test
+
+class SurfaceKtTest {
+
+    @Test fun `surface=unpaved is underspecified and must be described`() {
+        assertTrue(Surface.UNPAVED.shouldBeDescribed)
+        assertTrue(Surface.UNPAVED.shouldBeDescribed)
+    }
+
+    @Test fun `surface=asphalt is well specified and does not need description`() {
+        assertFalse(Surface.ASPHALT.shouldBeDescribed)
+    }
+
+    @Test fun `surface=ground is underspecified and does not need description`() {
+        assertFalse(Surface.GROUND.shouldBeDescribed)
+        assertFalse(Surface.GROUND.shouldBeDescribed)
+    }
+}
+
diff --git a/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceParserKtTest.kt b/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceParserKtTest.kt
new file mode 100644
index 00000000000..dea55f7e411
--- /dev/null
+++ b/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceParserKtTest.kt
@@ -0,0 +1,54 @@
+package de.westnordost.streetcomplete.osm.surface
+
+import org.junit.Assert.*
+import org.junit.Test
+
+class SurfaceParserKtTest {
+
+    @Test fun `parse surface`() {
+        assertEquals(
+            createSurfaceAndNote(mapOf("surface" to "asphalt")),
+            SurfaceAndNote(Surface.ASPHALT, null)
+        )
+        assertEquals(
+            createSurfaceAndNote(mapOf("surface" to "earth")),
+            SurfaceAndNote(Surface.EARTH, null)
+        )
+        assertEquals(
+            createSurfaceAndNote(mapOf("surface" to "soil")),
+            SurfaceAndNote(Surface.SOIL, null)
+        )
+    }
+
+    @Test fun `parse unknown surface`() {
+        assertEquals(
+            createSurfaceAndNote(mapOf("surface" to "wobbly_goo")),
+            SurfaceAndNote(Surface.UNKNOWN, null)
+        )
+    }
+
+    @Test fun `parse invalid surface`() {
+        assertNull(createSurfaceAndNote(mapOf("surface" to "cobblestone")))
+        assertNull(createSurfaceAndNote(mapOf("surface" to "cement")))
+        assertNull(createSurfaceAndNote(mapOf("surface" to "paved;unpaved")))
+        assertNull(createSurfaceAndNote(mapOf("surface" to "<different>")))
+    }
+
+    @Test fun `parse surface and note`() {
+        assertEquals(
+            createSurfaceAndNote(mapOf("surface" to "asphalt", "surface:note" to "blurgl")),
+            SurfaceAndNote(Surface.ASPHALT, "blurgl")
+        )
+    }
+
+    @Test fun `parse no surface`() {
+        assertNull(createSurfaceAndNote(mapOf()))
+    }
+
+    @Test fun `parse surface with prefix`() {
+        assertEquals(
+            createSurfaceAndNote(mapOf("footway:surface" to "asphalt", "footway:surface:note" to "hey"), "footway"),
+            SurfaceAndNote(Surface.ASPHALT, "hey")
+        )
+    }
+}
diff --git a/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceUtilsKtTest.kt b/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceUtilsKtTest.kt
new file mode 100644
index 00000000000..8e73d1cfee2
--- /dev/null
+++ b/app/src/test/java/de/westnordost/streetcomplete/osm/surface/SurfaceUtilsKtTest.kt
@@ -0,0 +1,88 @@
+package de.westnordost.streetcomplete.osm.surface
+
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapChangesBuilder
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryAdd
+import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryDelete
+import de.westnordost.streetcomplete.util.ktx.containsExactlyInAnyOrder
+import org.junit.Assert.*
+import org.junit.Test
+
+class SurfaceUtilsKtTest {
+
+    @Test fun `poor tracktype conflicts with paved surface`() {
+        assertTrue(isSurfaceAndTracktypeConflicting("asphalt", "grade5"))
+    }
+
+    @Test fun `high quality tracktype conflicts with poor surface`() {
+        assertTrue(isSurfaceAndTracktypeConflicting("gravel", "grade1"))
+    }
+
+    @Test fun `high quality tracktype fits good surface`() {
+        assertFalse(isSurfaceAndTracktypeConflicting("paving_stones", "grade1"))
+    }
+
+    @Test fun `unknown tracktype does not crash or conflict`() {
+        assertFalse(isSurfaceAndTracktypeConflicting("paving_stones", "lorem ipsum"))
+    }
+
+    @Test fun `unknown surface does not crash or conflict`() {
+        assertFalse(isSurfaceAndTracktypeConflicting("za", "grade1"))
+    }
+
+    @Test fun `update foot and cycleway with identical surface`() {
+        val tags = StringMapChangesBuilder(mapOf(
+            "footway:surface" to "asphalt",
+            "cycleway:surface" to "asphalt"
+        ))
+        updateCommonSurfaceFromFootAndCyclewaySurface(tags)
+        tags.create().changes.containsExactlyInAnyOrder(listOf(
+            StringMapEntryAdd("surface", "asphalt")
+        ))
+    }
+
+    @Test fun `update foot and cycleway with common paved surface`() {
+        val tags = StringMapChangesBuilder(mapOf(
+            "footway:surface" to "asphalt",
+            "cycleway:surface" to "paving_stones",
+            "surface:note" to "asphalt but also paving stones"
+        ))
+        updateCommonSurfaceFromFootAndCyclewaySurface(tags)
+        tags.create().changes.containsExactlyInAnyOrder(listOf(
+            StringMapEntryAdd("surface", "paved")
+        ))
+    }
+
+    @Test fun `update foot and cycleway with common unpaved surface`() {
+        val tags = StringMapChangesBuilder(mapOf(
+            "footway:surface" to "gravel",
+            "cycleway:surface" to "sand",
+        ))
+        updateCommonSurfaceFromFootAndCyclewaySurface(tags)
+        tags.create().changes.containsExactlyInAnyOrder(listOf(
+            StringMapEntryAdd("surface", "unpaved")
+        ))
+    }
+
+    @Test fun `update foot and cycleway with no common surface`() {
+        val tags = StringMapChangesBuilder(mapOf(
+            "footway:surface" to "asphalt",
+            "cycleway:surface" to "sand",
+        ))
+        updateCommonSurfaceFromFootAndCyclewaySurface(tags)
+        tags.create().changes.isEmpty()
+    }
+
+    @Test fun `removes common surface if foot and cycleway have nothing in common`() {
+        val tags = StringMapChangesBuilder(mapOf(
+            "footway:surface" to "asphalt",
+            "cycleway:surface" to "sand",
+            "surface" to "paved",
+            "surface:note" to "actually the cycleway is sand"
+        ))
+        updateCommonSurfaceFromFootAndCyclewaySurface(tags)
+        tags.create().changes.containsExactlyInAnyOrder(listOf(
+            StringMapEntryDelete("surface", "paved"),
+            StringMapEntryDelete("surface:note", "actually the cycleway is sand")
+        ))
+    }
+}
diff --git a/app/src/test/java/de/westnordost/streetcomplete/overlays/surface/SurfaceColorMappingKtTest.kt b/app/src/test/java/de/westnordost/streetcomplete/overlays/surface/SurfaceColorMappingKtTest.kt
new file mode 100644
index 00000000000..b2dc57b0a6a
--- /dev/null
+++ b/app/src/test/java/de/westnordost/streetcomplete/overlays/surface/SurfaceColorMappingKtTest.kt
@@ -0,0 +1,63 @@
+package de.westnordost.streetcomplete.overlays.surface
+
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.createSurfaceAndNote
+import de.westnordost.streetcomplete.overlays.Color
+import de.westnordost.streetcomplete.testutils.way
+import org.junit.Assert.*
+import org.junit.Test
+
+class SurfaceColorMappingKtTest {
+
+    @Test fun `return color for normal surfaces`() {
+        val road = way(tags = mapOf("surface" to "asphalt"))
+        assertEquals(Surface.ASPHALT.color, createSurfaceAndNote(road.tags).getColor(road))
+    }
+
+    @Test fun `return missing-data color for unpaved without note`() {
+        val road = way(tags = mapOf("surface" to "unpaved"))
+        assertEquals(Color.DATA_REQUESTED, createSurfaceAndNote(road.tags).getColor(road))
+    }
+
+    @Test fun `return missing-data color for paved without note`() {
+        val road = way(tags = mapOf("surface" to "paved"))
+        assertEquals(Color.DATA_REQUESTED, createSurfaceAndNote(road.tags).getColor(road))
+    }
+
+    @Test fun `return missing-data color for missing surface`() {
+        val road = way(tags = mapOf())
+        assertEquals(Color.DATA_REQUESTED, createSurfaceAndNote(road.tags).getColor(road))
+    }
+
+    @Test fun `return black for unpaved with note`() {
+        val road = way(tags = mapOf(
+            "surface" to "unpaved",
+            "surface:note" to "note text",
+        ))
+        assertEquals(Color.BLACK, createSurfaceAndNote(road.tags).getColor(road))
+    }
+
+    @Test fun `return black for paved with note`() {
+        val road = way(tags = mapOf(
+            "surface" to "paved",
+            "surface:note" to "note text",
+        ))
+        assertEquals(Color.BLACK, createSurfaceAndNote(road.tags).getColor(road))
+    }
+
+    @Test fun `return invisible for unpaved with restricted access`() {
+        val road = way(tags = mapOf(
+            "access" to "private",
+            "surface" to "unpaved",
+        ))
+        assertEquals(Color.INVISIBLE, createSurfaceAndNote(road.tags).getColor(road))
+    }
+
+    @Test fun `return invisible for paved with restricted access`() {
+        val road = way(tags = mapOf(
+            "access" to "private",
+            "surface" to "paved",
+        ))
+        assertEquals(Color.INVISIBLE, createSurfaceAndNote(road.tags).getColor(road))
+    }
+}
diff --git a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddCyclewayPartSurfaceTest.kt b/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddCyclewayPartSurfaceTest.kt
index 03c53832f68..7513afd3952 100644
--- a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddCyclewayPartSurfaceTest.kt
+++ b/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddCyclewayPartSurfaceTest.kt
@@ -3,7 +3,9 @@ package de.westnordost.streetcomplete.quests.surface
 import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryAdd
 import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryDelete
 import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryModify
+import de.westnordost.streetcomplete.osm.surface.Surface
 import de.westnordost.streetcomplete.osm.nowAsCheckDateString
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
 import de.westnordost.streetcomplete.quests.TestMapDataWithGeometry
 import de.westnordost.streetcomplete.quests.verifyAnswer
 import de.westnordost.streetcomplete.testutils.way
@@ -85,14 +87,14 @@ class AddCyclewayPartSurfaceTest {
 
     @Test fun `apply asphalt surface`() {
         questType.verifyAnswer(
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             StringMapEntryAdd("cycleway:surface", "asphalt")
         )
     }
 
     @Test fun `apply generic surface`() {
         questType.verifyAnswer(
-            SurfaceAnswer(Surface.UNPAVED_ROAD, "note"),
+            SurfaceAndNote(Surface.UNPAVED, "note"),
             StringMapEntryAdd("cycleway:surface", "unpaved"),
             StringMapEntryAdd("cycleway:surface:note", "note")
         )
@@ -101,7 +103,7 @@ class AddCyclewayPartSurfaceTest {
     @Test fun `updates check_date`() {
         questType.verifyAnswer(
             mapOf("cycleway:surface" to "asphalt", "check_date:cycleway:surface" to "2000-10-10"),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             StringMapEntryModify("cycleway:surface", "asphalt", "asphalt"),
             StringMapEntryModify("check_date:cycleway:surface", "2000-10-10", nowAsCheckDateString()),
         )
@@ -114,7 +116,7 @@ class AddCyclewayPartSurfaceTest {
                 "cycleway:surface" to "asphalt",
                 "cycleway:smoothness" to "intermediate"
             ),
-            SurfaceAnswer(Surface.PAVING_STONES),
+            SurfaceAndNote(Surface.PAVING_STONES),
             StringMapEntryDelete("cycleway:smoothness", "intermediate"),
             StringMapEntryModify("cycleway:surface", "asphalt", "paving_stones")
         )
@@ -127,7 +129,7 @@ class AddCyclewayPartSurfaceTest {
                 "surface" to "paving_stones",
                 "smoothness" to "good"
             ),
-            SurfaceAnswer(Surface.PAVING_STONES),
+            SurfaceAndNote(Surface.PAVING_STONES),
             StringMapEntryAdd("cycleway:surface", "paving_stones"),
             StringMapEntryModify("surface", "paving_stones", "paving_stones"),
             StringMapEntryAdd("check_date:surface", nowAsCheckDateString()),
@@ -137,7 +139,7 @@ class AddCyclewayPartSurfaceTest {
     @Test fun `cycleway surface changes`() {
         questType.verifyAnswer(
             mapOf("cycleway:surface" to "asphalt"),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("cycleway:surface", "asphalt", "concrete"),
         )
     }
@@ -149,7 +151,7 @@ class AddCyclewayPartSurfaceTest {
                 "cycleway:surface" to "paving_stones",
                 "footway:surface" to "concrete",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("cycleway:surface", "paving_stones", "concrete"),
             StringMapEntryModify("surface", "paving_stones", "concrete")
         )
@@ -161,7 +163,7 @@ class AddCyclewayPartSurfaceTest {
                 "cycleway:surface" to "paving_stones",
                 "footway:surface" to "concrete",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("cycleway:surface", "paving_stones", "concrete"),
             StringMapEntryAdd("surface", "concrete")
         )
@@ -174,7 +176,7 @@ class AddCyclewayPartSurfaceTest {
                 "cycleway:surface" to "paving_stones",
                 "footway:surface" to "asphalt",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("cycleway:surface", "paving_stones", "concrete"),
             StringMapEntryModify("surface", "paving_stones", "paved")
         )
@@ -187,7 +189,7 @@ class AddCyclewayPartSurfaceTest {
                 "cycleway:surface" to "paving_stones",
                 "footway:surface" to "gravel",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("cycleway:surface", "paving_stones", "concrete"),
             StringMapEntryDelete("surface", "paving_stones")
         )
@@ -198,7 +200,7 @@ class AddCyclewayPartSurfaceTest {
             mapOf(
                 "surface" to "asphalt",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryAdd("cycleway:surface", "concrete")
         )
     }
@@ -209,7 +211,7 @@ class AddCyclewayPartSurfaceTest {
                 "surface" to "asphalt",
                 "cycleway:surface" to "paving_stones",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("cycleway:surface", "paving_stones", "concrete")
         )
     }
diff --git a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddFootwayPartSurfaceTest.kt b/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddFootwayPartSurfaceTest.kt
index 95fbcdd5633..c8960df3a08 100644
--- a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddFootwayPartSurfaceTest.kt
+++ b/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddFootwayPartSurfaceTest.kt
@@ -4,6 +4,8 @@ import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryAd
 import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryDelete
 import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryModify
 import de.westnordost.streetcomplete.osm.nowAsCheckDateString
+import de.westnordost.streetcomplete.osm.surface.Surface
+import de.westnordost.streetcomplete.osm.surface.SurfaceAndNote
 import de.westnordost.streetcomplete.quests.TestMapDataWithGeometry
 import de.westnordost.streetcomplete.quests.verifyAnswer
 import de.westnordost.streetcomplete.testutils.way
@@ -86,14 +88,14 @@ class AddFootwayPartSurfaceTest {
 
     @Test fun `apply asphalt surface`() {
         questType.verifyAnswer(
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             StringMapEntryAdd("footway:surface", "asphalt")
         )
     }
 
     @Test fun `apply generic surface`() {
         questType.verifyAnswer(
-            SurfaceAnswer(Surface.UNPAVED_ROAD, "note"),
+            SurfaceAndNote(Surface.UNPAVED, "note"),
             StringMapEntryAdd("footway:surface", "unpaved"),
             StringMapEntryAdd("footway:surface:note", "note")
         )
@@ -102,7 +104,7 @@ class AddFootwayPartSurfaceTest {
     @Test fun `updates check_date`() {
         questType.verifyAnswer(
             mapOf("footway:surface" to "asphalt", "check_date:footway:surface" to "2000-10-10"),
-            SurfaceAnswer(Surface.ASPHALT),
+            SurfaceAndNote(Surface.ASPHALT),
             StringMapEntryModify("footway:surface", "asphalt", "asphalt"),
             StringMapEntryModify("check_date:footway:surface", "2000-10-10", nowAsCheckDateString()),
         )
@@ -115,7 +117,7 @@ class AddFootwayPartSurfaceTest {
                 "cycleway:surface" to "gravel",
                 "footway:smoothness" to "intermediate"
             ),
-            SurfaceAnswer(Surface.PAVING_STONES),
+            SurfaceAndNote(Surface.PAVING_STONES),
             StringMapEntryDelete("footway:smoothness", "intermediate"),
             StringMapEntryModify("footway:surface", "asphalt", "paving_stones")
         )
@@ -128,7 +130,7 @@ class AddFootwayPartSurfaceTest {
                 "surface" to "paving_stones",
                 "smoothness" to "good"
             ),
-            SurfaceAnswer(Surface.PAVING_STONES),
+            SurfaceAndNote(Surface.PAVING_STONES),
             StringMapEntryAdd("footway:surface", "paving_stones"),
             StringMapEntryModify("surface", "paving_stones", "paving_stones"),
             StringMapEntryAdd("check_date:surface", nowAsCheckDateString()),
@@ -138,7 +140,7 @@ class AddFootwayPartSurfaceTest {
     @Test fun `footway surface changes`() {
         questType.verifyAnswer(
             mapOf("footway:surface" to "asphalt"),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("footway:surface", "asphalt", "concrete"),
         )
     }
@@ -150,7 +152,7 @@ class AddFootwayPartSurfaceTest {
                 "footway:surface" to "paving_stones",
                 "cycleway:surface" to "concrete",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("footway:surface", "paving_stones", "concrete"),
             StringMapEntryModify("surface", "paving_stones", "concrete")
         )
@@ -162,7 +164,7 @@ class AddFootwayPartSurfaceTest {
                 "footway:surface" to "paving_stones",
                 "cycleway:surface" to "concrete",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("footway:surface", "paving_stones", "concrete"),
             StringMapEntryAdd("surface", "concrete")
         )
@@ -175,7 +177,7 @@ class AddFootwayPartSurfaceTest {
                 "footway:surface" to "paving_stones",
                 "cycleway:surface" to "asphalt",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("footway:surface", "paving_stones", "concrete"),
             StringMapEntryModify("surface", "paving_stones", "paved")
         )
@@ -188,7 +190,7 @@ class AddFootwayPartSurfaceTest {
                 "cycleway:surface" to "gravel",
                 "footway:surface" to "paving_stones",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("footway:surface", "paving_stones", "concrete"),
             StringMapEntryDelete("surface", "paving_stones")
         )
@@ -199,7 +201,7 @@ class AddFootwayPartSurfaceTest {
             mapOf(
                 "surface" to "asphalt",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryAdd("footway:surface", "concrete")
         )
     }
@@ -210,7 +212,7 @@ class AddFootwayPartSurfaceTest {
                 "surface" to "asphalt",
                 "footway:surface" to "paving_stones",
             ),
-            SurfaceAnswer(Surface.CONCRETE),
+            SurfaceAndNote(Surface.CONCRETE),
             StringMapEntryModify("footway:surface", "paving_stones", "concrete")
         )
     }
diff --git a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurfaceTest.kt b/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurfaceTest.kt
index b0c6768fca9..a4e62728344 100644
--- a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurfaceTest.kt
+++ b/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddRoadSurfaceTest.kt
@@ -28,6 +28,13 @@ class AddRoadSurfaceTest {
         assertIsNotApplicable("highway" to "track", "surface" to "asphalt", "tracktype" to "grade1")
     }
 
+    @Test fun `applicable to surface tags not providing proper info`() {
+        assertIsApplicable("highway" to "residential", "surface" to "paved")
+        assertIsNotApplicable("highway" to "residential", "surface" to "paved", "surface:note" to "wildly mixed asphalt, concrete, paving stones and sett")
+        assertIsApplicable("highway" to "residential", "surface" to "cobblestone")
+        assertIsApplicable("highway" to "residential", "surface" to "cement")
+    }
+
     private fun assertIsApplicable(vararg pairs: Pair<String, String>) {
         assertTrue(questType.isApplicableTo(way(nodes = listOf(1, 2, 3), tags = mapOf(*pairs))))
     }
diff --git a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurfaceTest.kt b/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurfaceTest.kt
index 7afbd6bda7a..6f4ae061a92 100644
--- a/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurfaceTest.kt
+++ b/app/src/test/java/de/westnordost/streetcomplete/quests/surface/AddSidewalkSurfaceTest.kt
@@ -1,9 +1,6 @@
 package de.westnordost.streetcomplete.quests.surface
 
-import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryAdd
 import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryDelete
-import de.westnordost.streetcomplete.data.osm.edits.update_tags.StringMapEntryModify
-import de.westnordost.streetcomplete.osm.nowAsCheckDateString
 import de.westnordost.streetcomplete.quests.verifyAnswer
 import de.westnordost.streetcomplete.testutils.way
 import org.junit.Assert.assertFalse
@@ -27,100 +24,19 @@ class AddSidewalkSurfaceTest {
 
     @Test fun `applicable to road with sidewalk on only one side`() {
         assertIsApplicable("highway" to "residential", "sidewalk" to "left")
-
         assertIsApplicable("highway" to "residential", "sidewalk" to "right")
     }
 
     @Test fun `applicable to road with sidewalk on one side and separate sidewalk on the other`() {
         assertIsApplicable("highway" to "residential", "sidewalk:left" to "yes", "sidewalk:right" to "separate")
-
         assertIsApplicable("highway" to "residential", "sidewalk:left" to "separate", "sidewalk:right" to "yes")
     }
 
     @Test fun `applicable to road with sidewalk on one side and no sidewalk on the other`() {
         assertIsApplicable("highway" to "residential", "sidewalk:left" to "yes", "sidewalk:right" to "no")
-
         assertIsApplicable("highway" to "residential", "sidewalk:left" to "no", "sidewalk:right" to "yes")
     }
 
-    @Test fun `apply asphalt surface on both sides`() {
-        questType.verifyAnswer(
-            SidewalkSurface(SurfaceAnswer(Surface.ASPHALT), SurfaceAnswer(Surface.ASPHALT)),
-            StringMapEntryAdd("sidewalk:both:surface", "asphalt")
-        )
-    }
-
-    @Test fun `apply different surface on each side`() {
-        questType.verifyAnswer(
-            SidewalkSurface(SurfaceAnswer(Surface.ASPHALT), SurfaceAnswer(Surface.PAVING_STONES)),
-            StringMapEntryAdd("sidewalk:left:surface", "asphalt"),
-            StringMapEntryAdd("sidewalk:right:surface", "paving_stones")
-        )
-    }
-
-    @Test fun `apply generic surface on both sides`() {
-        questType.verifyAnswer(
-            SidewalkSurface(
-                SurfaceAnswer(Surface.PAVED_ROAD, "note"),
-                SurfaceAnswer(Surface.PAVED_ROAD, "note")),
-            StringMapEntryAdd("sidewalk:both:surface", "paved"),
-            StringMapEntryAdd("sidewalk:both:surface:note", "note")
-        )
-    }
-
-    @Test fun `updates check_date`() {
-        questType.verifyAnswer(
-            mapOf("sidewalk:both:surface" to "asphalt", "check_date:sidewalk:surface" to "2000-10-10"),
-            SidewalkSurface(SurfaceAnswer(Surface.ASPHALT), SurfaceAnswer(Surface.ASPHALT)),
-            StringMapEntryModify("sidewalk:both:surface", "asphalt", "asphalt"),
-            StringMapEntryModify("check_date:sidewalk:surface", "2000-10-10", nowAsCheckDateString()),
-        )
-    }
-
-    @Test fun `sidewalk surface changes to be the same on both sides`() {
-        questType.verifyAnswer(
-            mapOf("sidewalk:left:surface" to "asphalt", "sidewalk:right:surface" to "paving_stones"),
-            SidewalkSurface(SurfaceAnswer(Surface.CONCRETE), SurfaceAnswer(Surface.CONCRETE)),
-            StringMapEntryDelete("sidewalk:left:surface", "asphalt"),
-            StringMapEntryDelete("sidewalk:right:surface", "paving_stones"),
-            StringMapEntryAdd("sidewalk:both:surface", "concrete")
-        )
-    }
-
-    @Test fun `sidewalk surface changes on each side`() {
-        questType.verifyAnswer(
-            mapOf("sidewalk:left:surface" to "asphalt", "sidewalk:right:surface" to "paving_stones"),
-            SidewalkSurface(SurfaceAnswer(Surface.CONCRETE), SurfaceAnswer(Surface.GRAVEL)),
-            StringMapEntryModify("sidewalk:left:surface", "asphalt", "concrete"),
-            StringMapEntryModify("sidewalk:right:surface", "paving_stones", "gravel"),
-        )
-    }
-
-    @Test fun `smoothness tag removed when surface changes, same on both sides`() {
-        questType.verifyAnswer(
-            mapOf("sidewalk:both:surface" to "asphalt", "sidewalk:both:smoothness" to "excellent"),
-            SidewalkSurface(SurfaceAnswer(Surface.PAVING_STONES), SurfaceAnswer(Surface.PAVING_STONES)),
-            StringMapEntryDelete("sidewalk:both:smoothness", "excellent"),
-            StringMapEntryModify("sidewalk:both:surface", "asphalt", "paving_stones")
-        )
-    }
-
-    @Test fun `remove smoothness when surface changes, different on each side`() {
-        questType.verifyAnswer(
-            mapOf("sidewalk:left:surface" to "asphalt",
-                "sidewalk:right:surface" to "concrete",
-                "sidewalk:left:smoothness" to "excellent",
-                "sidewalk:right:smoothness" to "good"
-            ),
-            SidewalkSurface(SurfaceAnswer(Surface.PAVING_STONES), SurfaceAnswer(Surface.PAVING_STONES)),
-            StringMapEntryDelete("sidewalk:left:surface", "asphalt"),
-            StringMapEntryDelete("sidewalk:right:surface", "concrete"),
-            StringMapEntryDelete("sidewalk:left:smoothness", "excellent"),
-            StringMapEntryDelete("sidewalk:right:smoothness", "good"),
-            StringMapEntryAdd("sidewalk:both:surface", "paving_stones")
-        )
-    }
-
     @Test fun `remove all sidewalk information`() {
         questType.verifyAnswer(
             mapOf("sidewalk:left:surface" to "asphalt",
