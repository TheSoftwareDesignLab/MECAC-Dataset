diff --git a/AnkiDroid/proguard-rules.pro b/AnkiDroid/proguard-rules.pro
index 4f6c4ba962d8..20467678add8 100644
--- a/AnkiDroid/proguard-rules.pro
+++ b/AnkiDroid/proguard-rules.pro
@@ -20,6 +20,9 @@
 # https://code.google.com/p/android/issues/detail?id=78377
 -keepattributes **
 -keep class !android.support.v7.view.menu.**,!android.support.design.internal.NavigationMenu,!android.support.design.internal.NavigationMenuPresenter,!android.support.design.internal.NavigationSubMenu,** {*;}
+#5806 - Class: ActionBarOverflow
+-keep public class android.support.v7.internal.view.menu.** { *; }
+-keep public class androidx.appcompat.view.menu.** { *; }
 -dontpreverify
 -dontoptimize
 -dontshrink
diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java b/AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java
index 66450d11bb34..3d9ab9f68827 100644
--- a/AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java
+++ b/AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java
@@ -55,6 +55,8 @@
 
 import timber.log.Timber;
 
+import static com.ichi2.anki.reviewer.CardMarker.FLAG_NONE;
+
 public class Reviewer extends AbstractFlashcardViewer {
     private boolean mHasDrawerSwipeConflicts = false;
     private boolean mShowWhiteboard = true;
@@ -113,6 +115,33 @@ protected void onCreate(Bundle savedInstanceState) {
         startLoadingCollection();
     }
 
+
+    @Override
+    protected int getFlagToDisplay() {
+        int actualValue = super.getFlagToDisplay();
+        if (actualValue == FLAG_NONE) {
+            return FLAG_NONE;
+        }
+        Boolean isShownInActionBar = mActionButtons.isShownInActionBar(ActionButtons.RES_FLAG);
+        if (isShownInActionBar != null && isShownInActionBar) {
+            return FLAG_NONE;
+        }
+        return actualValue;
+    }
+
+
+    @Override
+    protected boolean shouldDisplayMark() {
+        boolean markValue = super.shouldDisplayMark();
+        if (!markValue) {
+            return false;
+        }
+        Boolean isShownInActionBar = mActionButtons.isShownInActionBar(ActionButtons.RES_MARK);
+        //If we don't know, show it.
+        //Otherwise, if it's in the action bar, don't show it again.
+        return isShownInActionBar == null || !isShownInActionBar;
+    }
+
     private void selectDeckFromExtra() {
         Bundle extras = getIntent().getExtras();
         long did = Long.MIN_VALUE;
@@ -372,7 +401,7 @@ private void addNote() {
     public boolean onCreateOptionsMenu(Menu menu) {
         // NOTE: This is called every time a new question is shown via invalidate options menu
         getMenuInflater().inflate(R.menu.reviewer, menu);
-        mActionButtons.setCustomButtons(menu);
+        mActionButtons.setCustomButtonsStatus(menu);
         if (mCurrentCard != null && mCurrentCard.note().hasTag("marked")) {
             menu.findItem(R.id.action_mark_card).setTitle(R.string.menu_unmark_note).setIcon(R.drawable.ic_star_white_24dp);
         } else {
diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java b/AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java
index 1d948fb01abe..69137133c727 100644
--- a/AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java
+++ b/AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtonStatus.java
@@ -12,19 +12,32 @@
 import java.util.Map;
 
 import androidx.annotation.IdRes;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import timber.log.Timber;
 
-import static android.view.MenuItem.SHOW_AS_ACTION_ALWAYS;
-import static android.view.MenuItem.SHOW_AS_ACTION_IF_ROOM;
-import static android.view.MenuItem.SHOW_AS_ACTION_NEVER;
-
+@SuppressWarnings("ConstantConditions") //loads of unboxing issues, which are safe
 public class ActionButtonStatus {
     /**
      * Custom button allocation
      */
+    @NonNull
     protected Map<Integer, Integer> mCustomButtons = new HashMap<>();
     private final ReviewerUi mReviewerUi;
 
-    protected static final int MENU_DISABLED = 3;
+    public static final int SHOW_AS_ACTION_NEVER = MenuItem.SHOW_AS_ACTION_NEVER;
+    public static final int SHOW_AS_ACTION_IF_ROOM = MenuItem.SHOW_AS_ACTION_IF_ROOM;
+    public static final int SHOW_AS_ACTION_ALWAYS = MenuItem.SHOW_AS_ACTION_ALWAYS;
+    public static final int MENU_DISABLED = 3;
+
+    public @Nullable Integer getByMenuResourceId(int resourceId) {
+        if (!mCustomButtons.containsKey(resourceId)) {
+            Timber.w("Invalid resource lookup: %d", resourceId);
+            return SHOW_AS_ACTION_NEVER;
+        }
+        return mCustomButtons.get(resourceId);
+    }
+
 
     public ActionButtonStatus(ReviewerUi reviewerUi) {
         this.mReviewerUi = reviewerUi;
diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtons.java b/AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtons.java
index c2c89a26a155..15b831c99944 100644
--- a/AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtons.java
+++ b/AnkiDroid/src/main/java/com/ichi2/anki/reviewer/ActionButtons.java
@@ -2,11 +2,26 @@
 
 import android.content.SharedPreferences;
 import android.view.Menu;
+import android.view.MenuItem;
+
+import com.ichi2.anki.R;
+import com.ichi2.ui.ActionBarOverflow;
+
+import androidx.annotation.IdRes;
+import androidx.annotation.Nullable;
+import timber.log.Timber;
 
 public class ActionButtons
 {
     private ActionButtonStatus mActionButtonStatus;
 
+    @IdRes
+    public static int RES_FLAG = R.id.action_flag;
+    @IdRes
+    public static int RES_MARK = R.id.action_mark_card;
+
+    private Menu mMenu;
+
     public ActionButtons(ReviewerUi reviewerUi) {
         this.mActionButtonStatus = new ActionButtonStatus(reviewerUi);
     }
@@ -15,10 +30,59 @@ public void setup(SharedPreferences preferences) {
         this.mActionButtonStatus.setup(preferences);
     }
 
-    public void setCustomButtons(Menu menu) {
+    /** Sets the order of the Action Buttons in the action bar */
+    public void setCustomButtonsStatus(Menu menu) {
         this.mActionButtonStatus.setCustomButtons(menu);
+        this.mMenu = menu;
     }
 
+    public @Nullable Boolean isShownInActionBar(@IdRes int resId) {
+        MenuItem menuItem = findMenuItem(resId);
+        if (menuItem == null) {
+            return null;
+        }
+        //firstly, see if we can definitively determine whether the action is visible.
+        Boolean isActionButton = ActionBarOverflow.isActionButton(menuItem);
+        if (isActionButton != null) {
+            return isActionButton;
+        }
+        //If not, use heuristics based on preferences.
+        return isLikelyActionButton(resId);
+    }
+
+
+    private @Nullable MenuItem findMenuItem(@IdRes int resId) {
+        if (mMenu == null) {
+            return null;
+        }
+        return mMenu.findItem(resId);
+    }
+
+
+    private boolean isLikelyActionButton(@IdRes int resourceId) {
+        /*
+        https://github.com/ankidroid/Anki-Android/pull/5918#issuecomment-609484093
+        Heuristic approach: Show the item in the top bar unless the corresponding menu item is set to "always" show.
+
+        There are two scenarios where the heuristic fails:
+
+        1. An item is set to 'if room' but is actually visible in the toolbar
+        2. An item is set to 'always' but is actually not visible in the toolbar
+
+        Failure scenario one is totally acceptable IMO as it just falls back to the current behavior.
+        Failure scenario two is not ideal, but it should only happen in the pathological case where the user has gone
+        and explicitly changed the preferences to set more items to 'always' than there is room for in the toolbar.
+
+        In any case, both failure scenarios only happen if the user deviated from the default settings in strange ways.
+         */
+        Integer status = mActionButtonStatus.getByMenuResourceId(resourceId);
+        if (status == null) {
+            Timber.w("Failed to get status for resource: %d", resourceId);
+            //If we return "true", we may hide the flag/mark status completely. False is safer.
+            return false;
+        }
+        return status == ActionButtonStatus.SHOW_AS_ACTION_ALWAYS;
+    }
 
     public ActionButtonStatus getStatus() {
         //DEFECT: This should be private - it breaks the law of demeter, but it'll be a large refactoring to get
diff --git a/AnkiDroid/src/main/java/com/ichi2/ui/ActionBarOverflow.java b/AnkiDroid/src/main/java/com/ichi2/ui/ActionBarOverflow.java
new file mode 100644
index 000000000000..dd524f50c8af
--- /dev/null
+++ b/AnkiDroid/src/main/java/com/ichi2/ui/ActionBarOverflow.java
@@ -0,0 +1,91 @@
+package com.ichi2.ui;
+
+import android.annotation.SuppressLint;
+import android.view.MenuItem;
+
+import java.lang.reflect.Method;
+
+import androidx.annotation.Nullable;
+import timber.log.Timber;
+
+/**
+ * Detection of whether an item is in the ActionBar overflow
+ * WARN: When making changes to this code, also test with Proguard
+ * */
+public class ActionBarOverflow {
+    //Idea from: https://stackoverflow.com/a/29208483
+
+    protected static final String SUPPORT_CLASS = "android.support.v7.internal.view.menu.MenuItemImpl";
+
+    protected static final String NATIVE_CLASS = "com.android.internal.view.menu.MenuItemImpl";
+
+    protected static final String ANDROIDX_CLASS = "androidx.appcompat.view.menu.MenuItemImpl";
+
+    protected static Method sSupportIsActionButton;
+
+    protected static Method sNativeIsActionButton;
+
+    protected static Method sAndroidXIsActionButton;
+
+    static {
+        try {
+            //We know this won't always work, we'll log if this isn't the case.
+            @SuppressLint("PrivateApi") Class<?> MenuItemImpl = Class.forName(NATIVE_CLASS);
+            sNativeIsActionButton = MenuItemImpl.getDeclaredMethod("isActionButton");
+            sNativeIsActionButton.setAccessible(true);
+        } catch (Exception ignoreAndLogEx) {
+            Timber.d(ignoreAndLogEx, "Failed to obtain: sNativeIsActionButton");
+        }
+        try {
+            Class<?> MenuItemImpl = Class.forName(SUPPORT_CLASS);
+            sSupportIsActionButton = MenuItemImpl.getDeclaredMethod("isActionButton");
+            sSupportIsActionButton.setAccessible(true);
+        } catch (Exception ignoreAndLogEx) {
+            Timber.d(ignoreAndLogEx, "Failed to obtain: sSupportIsActionButton");
+        }
+        try {
+            Class<?> MenuItemImpl = Class.forName(ANDROIDX_CLASS);
+            sAndroidXIsActionButton = MenuItemImpl.getDeclaredMethod("isActionButton");
+            sAndroidXIsActionButton.setAccessible(true);
+        } catch (Exception ignoreAndLogEx) {
+            Timber.d(ignoreAndLogEx, "Failed to obtain: sAndroidXIsActionButton");
+        }
+    }
+
+// --------------------------------------------------------------------------------------------
+
+    /**
+     * Check if an item is showing (not in the overflow menu).
+     *
+     * @param item
+     *            the MenuItem.
+     * @return {@code true} if the MenuItem is visible on the ActionBar. {@code false} if not. {@code null if unknown)
+     */
+    public static @Nullable Boolean isActionButton(MenuItem item) {
+        //I don't think falling through is the right action here.
+        String className = item.getClass().getName();
+        switch (className) {
+            case SUPPORT_CLASS:
+                try {
+                    return (boolean) sSupportIsActionButton.invoke(item, (Object[]) null);
+                } catch (Exception e) {
+                    // fall through
+                }
+            case NATIVE_CLASS:
+                try {
+                    return (boolean) sNativeIsActionButton.invoke(item, (Object[]) null);
+                } catch (Exception e) {
+                    // fall through
+                }
+            case ANDROIDX_CLASS:
+                try {
+                    return (boolean) sAndroidXIsActionButton.invoke(item, (Object[]) null);
+                } catch (Exception e) {
+                    // fall through
+                }
+            default:
+                Timber.w("Unhandled ActionBar class: %s", className);
+                return null;
+        }
+    }
+}
