diff --git a/AnkiDroid/build.gradle b/AnkiDroid/build.gradle
index 0950ed6f627a..0f1204aa07d2 100644
--- a/AnkiDroid/build.gradle
+++ b/AnkiDroid/build.gradle
@@ -266,9 +266,9 @@ dependencies {
     implementation 'androidx.browser:browser:1.4.0'
     implementation "androidx.core:core-ktx:1.7.0"
     implementation 'androidx.exifinterface:exifinterface:1.3.3'
-    implementation 'androidx.fragment:fragment-ktx:1.4.0'
+    implementation 'androidx.fragment:fragment-ktx:1.4.1'
     implementation 'androidx.localbroadcastmanager:localbroadcastmanager:1.0.0'
-    implementation "androidx.preference:preference-ktx:1.1.1"
+    implementation "androidx.preference:preference-ktx:1.2.0"
     implementation 'androidx.recyclerview:recyclerview:1.2.1'
     implementation 'androidx.sqlite:sqlite-framework:2.2.0'
     implementation 'androidx.swiperefreshlayout:swiperefreshlayout:1.1.0'
@@ -287,7 +287,7 @@ dependencies {
     // build with ./gradlew rsdroid:assembleRelease
     // In my experience, using `files()` currently requires a reindex operation, which is slow.
     // implementation files("C:\\GitHub\\Rust-Test\\rsdroid\\build\\outputs\\aar\\rsdroid-release.aar")
-    implementation 'com.google.protobuf:protobuf-java:3.19.3' // This is required when loading from a file
+    implementation 'com.google.protobuf:protobuf-java:3.19.4' // This is required when loading from a file
     implementation "io.github.david-allison-1:anki-android-backend:$backendVersion"
     // build with ./gradlew rsdroid-testing:assembleRelease
     // RobolectricTest.java: replace RustBackendLoader.init(); with RustBackendLoader.loadRsdroid(path);
@@ -326,7 +326,7 @@ dependencies {
     api project(":api")
 
     testImplementation 'org.junit.vintage:junit-vintage-engine:5.8.2'
-    testImplementation 'org.mockito:mockito-inline:4.3.0'
+    testImplementation 'org.mockito:mockito-inline:4.3.1'
     testImplementation "org.mockito.kotlin:mockito-kotlin:4.0.0"
     testImplementation 'org.hamcrest:hamcrest-all:1.3'
     testImplementation 'net.lachlanmckee:timber-junit-rule:1.0.1'
@@ -336,7 +336,7 @@ dependencies {
     testImplementation 'androidx.test.ext:junit:1.1.3'
     testImplementation "org.jetbrains.kotlin:kotlin-reflect:$kotlin_version"
     // debugImplementation required vs testImplementation: https://issuetracker.google.com/issues/128612536
-    debugImplementation 'androidx.fragment:fragment-testing:1.4.0'
+    debugImplementation 'androidx.fragment:fragment-testing:1.4.1'
 
     // May need a resolution strategy for support libs to our versions
     androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'
diff --git a/AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/LayoutValidationTest.java b/AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/LayoutValidationTest.java
index 53bdad330e1d..373a9f8f8a17 100644
--- a/AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/LayoutValidationTest.java
+++ b/AnkiDroid/src/androidTest/java/com/ichi2/anki/tests/LayoutValidationTest.java
@@ -60,7 +60,7 @@ public static java.util.Collection<Object[]> initParameters() throws IllegalAcce
         HashSet<String> nonAnkiFieldNames = new HashSet<>();
         nonAnkiFieldNames.addAll(getFieldNames(com.google.android.material.R.layout.class));
         nonAnkiFieldNames.addAll(getFieldNames(com.afollestad.materialdialogs.R.layout.class));
-
+        nonAnkiFieldNames.addAll(getFieldNames(androidx.preference.R.layout.class)); // preference_category_material
 
         List<Object[]> layouts = new ArrayList<>();
         for (Field f : R.layout.class.getFields()) {
diff --git a/build.gradle b/build.gradle
index 08ed2b256dc9..2b471c2b22e8 100644
--- a/build.gradle
+++ b/build.gradle
@@ -5,7 +5,7 @@ import org.gradle.internal.jvm.Jvm
 buildscript {
     // The version for the Kotlin plugin and dependencies
     ext.kotlin_version = '1.6.10'
-    ext.lint_version = '30.0.4'
+    ext.lint_version = '30.1.0'
     ext.acra_version = '5.7.0'
 
     repositories {
diff --git a/lint-rules/src/test/java/com/ichi2/anki/lint/rules/PreferIsEmptyOverSizeCheckTest.java b/lint-rules/src/test/java/com/ichi2/anki/lint/rules/PreferIsEmptyOverSizeCheckTest.java
index 18a1774df22a..9f40b4596bdb 100644
--- a/lint-rules/src/test/java/com/ichi2/anki/lint/rules/PreferIsEmptyOverSizeCheckTest.java
+++ b/lint-rules/src/test/java/com/ichi2/anki/lint/rules/PreferIsEmptyOverSizeCheckTest.java
@@ -16,6 +16,8 @@
 
 package com.ichi2.anki.lint.rules;
 
+import com.android.tools.lint.checks.infrastructure.TestMode;
+
 import org.intellij.lang.annotations.Language;
 import org.junit.Test;
 
@@ -146,6 +148,7 @@ public void showErrorsForSizeChecks() {
             .allowMissingSdk()
             .allowCompilationErrors()
             .files(create(discoverableFile))
+            .testModes(TestMode.DEFAULT)
             .issues(PreferIsEmptyOverSizeCheck.ISSUE)
             .run()
             .expect("" +
