diff --git a/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java b/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java
index 8d8f495ddd72..838d55f06869 100644
--- a/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java
+++ b/AnkiDroid/src/main/java/com/ichi2/anki/DeckPicker.java
@@ -2397,12 +2397,20 @@ public void onPostExecute(TaskData result) {
             if (mProgressDialog != null && mProgressDialog.isShowing()) {
                 mProgressDialog.dismiss();
             }
-            if (result != null && result.getBoolean()) {
+            if (result != null && result.getBoolean() && result.getObjArray() != null && result.getObjArray().length > 0) {
                 String msg;
-                long shrunk = Math.round(result.getLong() / 1024.0);
+                Collection.CheckDatabaseResult databaseResult = (Collection.CheckDatabaseResult) result.getObjArray()[0];
+
+                int count = databaseResult.getCardsWithFixedHomeDeckCount();
+                if (count != 0) {
+                    String message = getResources().getString(R.string.integrity_check_fixed_no_home_deck, count);
+                    UIUtils.showThemedToast(DeckPicker.this,  message, false);
+                }
+
+                long shrunk = Math.round(databaseResult.getSizeChangeInKb() / 1024.0);
                 if (shrunk > 0.0) {
                     msg = String.format(Locale.getDefault(),
-                            getResources().getString(R.string.check_db_acknowledge_shrunk), (int) shrunk);
+                    getResources().getString(R.string.check_db_acknowledge_shrunk), (int) shrunk);
                 } else {
                     msg = getResources().getString(R.string.check_db_acknowledge);
                 }
diff --git a/AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java b/AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java
index 78b53366627c..61898f8fc68e 100644
--- a/AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java
+++ b/AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java
@@ -989,13 +989,13 @@ private TaskData doInBackgroundCheckDatabase(TaskData... params) {
             return new TaskData(false);
         }
 
-        long result = col.fixIntegrity(new ProgressCallback(this, AnkiDroidApp.getAppResources()));
-        if (result == -1) {
+        Collection.CheckDatabaseResult result = col.fixIntegrity(new ProgressCallback(this, AnkiDroidApp.getAppResources()));
+        if (result.getFailed()) {
             return new TaskData(false);
         } else {
             // Close the collection and we restart the app to reload
             CollectionHelper.getInstance().closeCollection(true, "Check Database Completed");
-            return new TaskData(0, result, true);
+            return new TaskData(true, new Object[] { result });
         }
     }
 
diff --git a/AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java b/AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java
index ad5bae1809de..b47f26c07e6c 100644
--- a/AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java
+++ b/AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java
@@ -1486,7 +1486,7 @@ public boolean basicCheck() {
 
 
     /** Fix possible problems and rebuild caches. */
-    public long fixIntegrity(CollectionTask.ProgressCallback progressCallback) {
+    public CheckDatabaseResult fixIntegrity(CollectionTask.ProgressCallback progressCallback) {
         File file = new File(mPath);
         CheckDatabaseResult result = new CheckDatabaseResult(file.length());
         final int[] currentTask = {1};
@@ -1517,13 +1517,13 @@ public long fixIntegrity(CollectionTask.ProgressCallback progressCallback) {
             notifyProgress.run();
 
             if (!mDb.getDatabase().isDatabaseIntegrityOk()) {
-                return -1;
+                return result.markAsFailed();
             }
             mDb.getDatabase().setTransactionSuccessful();
         } catch (RuntimeException e) {
             Timber.e(e, "doInBackgroundCheckDatabase - RuntimeException on marking card");
             AnkiDroidApp.sendExceptionReport(e, "doInBackgroundCheckDatabase");
-            return -1;
+            return result.markAsFailed();
         } finally {
             mDb.getDatabase().endTransaction();
         }
@@ -1559,17 +1559,13 @@ public long fixIntegrity(CollectionTask.ProgressCallback progressCallback) {
         }
         file = new File(mPath);
         long newSize = file.length();
+        result.setNewSize(newSize);
         // if any problems were found, force a full sync
         if (result.hasProblems()) {
             modSchemaNoCheck();
         }
         logProblems(result.getProblems());
-        int count = result.getCardsWithFixedHomeDeckCount();
-        if (count != 0) {
-            String message = mContext.getResources().getString(R.string.integrity_check_fixed_no_home_deck, count);
-            UIUtils.showThemedToast(mContext,  message, false);
-        }
-        return (result.getOldSize() - newSize) / 1024;
+        return result;
     }
 
 
@@ -2154,10 +2150,12 @@ public AbstractSched createScheduler(int reportLimit) {
         return mSched;
     }
 
-    private static class CheckDatabaseResult {
+    public static class CheckDatabaseResult {
         private final List<String> mProblems = new ArrayList<>();
         private long mOldSize;
         private int mFixedCardsWithNoHomeDeckCount;
+        private long mNewSize;
+        private boolean mFailed = false;
 
 
         public CheckDatabaseResult(long oldSize) {
@@ -2168,10 +2166,6 @@ public void addAll(List<String> strings) {
             mProblems.addAll(strings);
         }
 
-        public long getOldSize() {
-            return mOldSize;
-        }
-
         public void setCardsWithFixedHomeDeckCount(int count) {
             this.mFixedCardsWithNoHomeDeckCount = count;
         }
@@ -2189,5 +2183,28 @@ public List<String> getProblems() {
         public int getCardsWithFixedHomeDeckCount() {
             return mFixedCardsWithNoHomeDeckCount;
         }
+
+        public void setNewSize(long size) {
+            this.mNewSize = size;
+        }
+
+        public long getSizeChangeInKb() {
+            return (mOldSize - mNewSize) / 1024;
+        }
+
+
+        public void setFailed(boolean failedIntegrity) {
+            this.mFailed = failedIntegrity;
+        }
+
+        public CheckDatabaseResult markAsFailed() {
+            this.setFailed(true);
+            return this;
+        }
+
+
+        public boolean getFailed() {
+            return mFailed;
+        }
     }
 }
