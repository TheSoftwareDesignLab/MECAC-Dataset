diff --git a/src/com/ichi2/anki/Model.java b/src/com/ichi2/anki/Model.java
index 453f7320b462..213826880f6d 100644
--- a/src/com/ichi2/anki/Model.java
+++ b/src/com/ichi2/anki/Model.java
@@ -346,7 +346,7 @@ private void prepareColorForCardModels(boolean invertedColors) {
      * @return the html contents surrounded by a css style which contains class styles for answer/question and fields
      */
     protected final String getCSSForFontColorSize(long myCardModelId, int percentage, boolean invertedColors) {
-        // Check whether the percentage is this the same as last time
+        // If the percentage or night mode has changed, prepare for them.
         if (mDisplayPercentage != percentage || mInvertedColor != invertedColors) {
             mDisplayPercentage = percentage;
             mInvertedColor = invertedColors;
@@ -412,6 +412,44 @@ private String createCSSForFontColorSize(long myCardModelId, int percentage, boo
     }
 
 
+    /**
+     * Returns a string where all colors have been inverted.
+     * It applies to anything that is in a tag and looks like #FFFFFF
+     * 
+     * Example: Here only #000000 will be replaced (#777777 is content)
+     * <span style="color: #000000;">Code #777777 is the grey color</span>
+     * 
+     * This is done with a state machine with 2 states:
+     *  - 0: within content
+     *  - 1: within a tag
+     */
+    public static String invertColors(String text, boolean invert) {
+        if (invert) {
+            int state = 0;
+            StringBuffer inverted = new StringBuffer(text.length());
+            for(int i=0; i<text.length(); i++) {
+                char character = text.charAt(i);
+                if (state == 1 && character == '#') {
+                    inverted.append(invertColor(text.substring(i+1, i+7), true));
+                }
+                else {
+                    if (character == '<') {
+                        state = 1;
+                    }
+                    if (character == '>') {
+                        state = 0;
+                    }
+                    inverted.append(character);
+                }
+            }
+            return inverted.toString();
+        }
+        else {
+            return text;
+        }
+    }
+    
+
     private static String invertColor(String color, boolean invert) {
     	if (invert) {
     	    if (color != null) {
diff --git a/src/com/ichi2/anki/Reviewer.java b/src/com/ichi2/anki/Reviewer.java
index 824c7188c92c..0b2ac204927a 100644
--- a/src/com/ichi2/anki/Reviewer.java
+++ b/src/com/ichi2/anki/Reviewer.java
@@ -1772,7 +1772,7 @@ private void updateCard(String content) {
             Deck currentDeck = AnkiDroidApp.deck();
             Model myModel = Model.getModel(currentDeck, mCurrentCard.getCardModelId(), false);
             baseUrl = Utils.getBaseUrl(mMediaDir, myModel, currentDeck);
-            content = myModel.getCSSForFontColorSize(mCurrentCard.getCardModelId(), mDisplayFontSize, mInvertedColors) + content;
+            content = myModel.getCSSForFontColorSize(mCurrentCard.getCardModelId(), mDisplayFontSize, mInvertedColors) + Model.invertColors(content, mInvertedColors);
             isJapaneseModel = myModel.hasTag(japaneseModelTag);
             mMainLayout.setBackgroundColor(Color.parseColor(myModel.getBackgroundColor(mCurrentCard.getCardModelId(), mInvertedColors)));
         } else {
