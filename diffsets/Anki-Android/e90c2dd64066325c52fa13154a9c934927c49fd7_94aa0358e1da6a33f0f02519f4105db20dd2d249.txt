diff --git a/AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java b/AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java
index 5506407e2dcc..c9c0c01d57a2 100644
--- a/AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java
+++ b/AnkiDroid/src/main/java/com/ichi2/libanki/Collection.java
@@ -98,7 +98,7 @@
 @SuppressWarnings({"PMD.ExcessiveClassLength", "PMD.AvoidThrowingRawExceptionTypes","PMD.AvoidReassigningParameters",
         "PMD.NPathComplexity","PMD.MethodNamingConventions","PMD.AvoidBranchingStatementAsLastInLoop",
         "PMD.SwitchStmtsShouldHaveDefault","PMD.CollapsibleIfStatements","PMD.EmptyIfStmt","PMD.ExcessiveMethodLength"})
-public class Collection {
+public class Collection implements CollectionGetter {
 
     private final Context mContext;
 
@@ -2265,4 +2265,13 @@ public boolean getFailed() {
     public Time getTime() {
         return mTime;
     }
+
+
+    /**
+     * Allows a collection to be used as a CollectionGetter
+     * @return Itself.
+     */
+    public Collection getCol() {
+        return this;
+    }
 }
diff --git a/AnkiDroid/src/main/java/com/ichi2/libanki/CollectionGetter.java b/AnkiDroid/src/main/java/com/ichi2/libanki/CollectionGetter.java
new file mode 100644
index 000000000000..609f3ccd3e5d
--- /dev/null
+++ b/AnkiDroid/src/main/java/com/ichi2/libanki/CollectionGetter.java
@@ -0,0 +1,5 @@
+package com.ichi2.libanki;
+
+public interface CollectionGetter {
+    Collection getCol();
+}
diff --git a/AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java b/AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java
index 334d90a87558..06b9e8bfe786 100644
--- a/AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java
+++ b/AnkiDroid/src/test/java/com/ichi2/anki/RobolectricTest.java
@@ -31,6 +31,7 @@
 import com.ichi2.compat.customtabs.CustomTabActivityHelper;
 import com.ichi2.libanki.Card;
 import com.ichi2.libanki.Collection;
+import com.ichi2.libanki.CollectionGetter;
 import com.ichi2.libanki.Consts;
 import com.ichi2.libanki.DB;
 import com.ichi2.libanki.Model;
@@ -77,7 +78,9 @@
 import static org.hamcrest.Matchers.is;
 import static org.robolectric.Shadows.shadowOf;
 
-public class RobolectricTest {
+public class RobolectricTest implements CollectionGetter {
+
+    private static boolean mBackground = true;
 
     private final ArrayList<ActivityController<?>> controllersForCleanup = new ArrayList<>();
 
@@ -243,7 +246,7 @@ protected String getQuantityString(int res, int quantity, Object... formatArgs)
     /** A collection. Created one second ago, not near cutoff time.
     * Each time time is checked, it advance by 10 ms. Not enough to create any change visible to user, but ensure
      * we don't get two equal time.*/
-    protected Collection getCol() {
+    public Collection getCol() {
         MockTime time = new MockTime(2020, 7, 7, 7, 0, 0, 0, 10);
         return CollectionHelper.getInstance().getCol(getTargetContext(), time);
     }
diff --git a/AnkiDroid/src/test/java/com/ichi2/async/ForegroundTaskManager.java b/AnkiDroid/src/test/java/com/ichi2/async/ForegroundTaskManager.java
new file mode 100644
index 000000000000..cbf4a808899c
--- /dev/null
+++ b/AnkiDroid/src/test/java/com/ichi2/async/ForegroundTaskManager.java
@@ -0,0 +1,69 @@
+package com.ichi2.async;
+
+import com.ichi2.libanki.CollectionGetter;
+
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+
+public class ForegroundTaskManager extends TaskManager {
+    private final CollectionGetter mColGetter;
+
+
+    public ForegroundTaskManager(CollectionGetter colGetter) {
+        mColGetter = colGetter;
+    }
+
+
+    @Override
+    protected boolean removeTask(CollectionTask task) {
+        return true;
+    }
+
+
+    @Override
+    protected void setLatestInstance(CollectionTask task) {
+    }
+
+
+    @Override
+    public <ProgressListener, ProgressBackground extends ProgressListener, ResultListener, ResultBackground extends ResultListener> CollectionTask<ProgressListener, ProgressBackground, ResultListener, ResultBackground> launchCollectionTask(
+            @NonNull CollectionTask.Task<ProgressBackground, ResultBackground> task,
+            @Nullable TaskListener<ProgressListener, ResultListener> listener) {
+        CollectionTask<ProgressListener, ProgressBackground, ResultListener, ResultBackground>  ct =
+                new CollectionTask<>(task, listener, null);
+        ct.execute();
+        try {
+            ct.wait();
+        } catch (InterruptedException e) {
+            throw new RuntimeException(e);
+        }
+        return ct;
+    }
+
+
+    @Override
+    public void waitToFinish() {
+    }
+
+
+    @Override
+    public boolean waitToFinish(Integer timeoutSeconds) {
+        return true;
+    }
+
+
+    @Override
+    public void cancelCurrentlyExecutingTask() {
+    }
+
+
+    @Override
+    public void cancelAllTasks(Class taskType) {
+    }
+
+
+    @Override
+    public boolean waitForAllToFinish(Integer timeoutSeconds) {
+        return true;
+    }
+}
