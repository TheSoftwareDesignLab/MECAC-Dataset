diff --git a/res/drawable-hdpi/widget_big.png b/res/drawable-hdpi/widget_big.png
deleted file mode 100644
index 5f57937d5b41..000000000000
Binary files a/res/drawable-hdpi/widget_big.png and /dev/null differ
diff --git a/res/drawable-hdpi/widget_big_bg.9.png b/res/drawable-hdpi/widget_big_bg.9.png
new file mode 100644
index 000000000000..39d6ecddeba5
Binary files /dev/null and b/res/drawable-hdpi/widget_big_bg.9.png differ
diff --git a/res/drawable-hdpi/widget_big_closedeck_normal.9.png b/res/drawable-hdpi/widget_big_closedeck_normal.9.png
new file mode 100644
index 000000000000..f8f719294256
Binary files /dev/null and b/res/drawable-hdpi/widget_big_closedeck_normal.9.png differ
diff --git a/res/drawable-hdpi/widget_big_closedeck_pressed.9.png b/res/drawable-hdpi/widget_big_closedeck_pressed.9.png
new file mode 100644
index 000000000000..6c69c847b9bb
Binary files /dev/null and b/res/drawable-hdpi/widget_big_closedeck_pressed.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease1_normal.9.png b/res/drawable-hdpi/widget_big_ease1_normal.9.png
new file mode 100644
index 000000000000..73a1290c6da9
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease1_normal.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease1_pressed.9.png b/res/drawable-hdpi/widget_big_ease1_pressed.9.png
new file mode 100644
index 000000000000..982a7732af16
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease1_pressed.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease2_normal.9.png b/res/drawable-hdpi/widget_big_ease2_normal.9.png
new file mode 100644
index 000000000000..4763292f065c
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease2_normal.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease2_normal_rec.9.png b/res/drawable-hdpi/widget_big_ease2_normal_rec.9.png
new file mode 100644
index 000000000000..321bcbb1d8d2
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease2_normal_rec.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease2_pressed.9.png b/res/drawable-hdpi/widget_big_ease2_pressed.9.png
new file mode 100644
index 000000000000..b8c4b5212419
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease2_pressed.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease2_pressed_rec.9.png b/res/drawable-hdpi/widget_big_ease2_pressed_rec.9.png
new file mode 100644
index 000000000000..6ff830915021
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease2_pressed_rec.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease3_normal.9.png b/res/drawable-hdpi/widget_big_ease3_normal.9.png
new file mode 100644
index 000000000000..dbac688d761f
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease3_normal.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease3_normal_rec.9.png b/res/drawable-hdpi/widget_big_ease3_normal_rec.9.png
new file mode 100644
index 000000000000..4c59bd79d69c
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease3_normal_rec.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease3_pressed.9.png b/res/drawable-hdpi/widget_big_ease3_pressed.9.png
new file mode 100644
index 000000000000..404d2557c21b
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease3_pressed.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease3_pressed_rec.9.png b/res/drawable-hdpi/widget_big_ease3_pressed_rec.9.png
new file mode 100644
index 000000000000..3dacc5a72fc0
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease3_pressed_rec.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease4_normal.9.png b/res/drawable-hdpi/widget_big_ease4_normal.9.png
new file mode 100644
index 000000000000..c4fa98f65d04
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease4_normal.9.png differ
diff --git a/res/drawable-hdpi/widget_big_ease4_pressed.9.png b/res/drawable-hdpi/widget_big_ease4_pressed.9.png
new file mode 100644
index 000000000000..6a75e244ca32
Binary files /dev/null and b/res/drawable-hdpi/widget_big_ease4_pressed.9.png differ
diff --git a/res/drawable-hdpi/widget_big_empty.9.png b/res/drawable-hdpi/widget_big_empty.9.png
new file mode 100644
index 000000000000..621a8e67790e
Binary files /dev/null and b/res/drawable-hdpi/widget_big_empty.9.png differ
diff --git a/res/drawable-hdpi/widget_big_flipcard_normal.9.png b/res/drawable-hdpi/widget_big_flipcard_normal.9.png
new file mode 100644
index 000000000000..66ccf1e9c7e7
Binary files /dev/null and b/res/drawable-hdpi/widget_big_flipcard_normal.9.png differ
diff --git a/res/drawable-hdpi/widget_big_flipcard_pressed.9.png b/res/drawable-hdpi/widget_big_flipcard_pressed.9.png
new file mode 100644
index 000000000000..cd0967cbb1dc
Binary files /dev/null and b/res/drawable-hdpi/widget_big_flipcard_pressed.9.png differ
diff --git a/res/drawable-hdpi/widget_big_opendeck_normal.9.png b/res/drawable-hdpi/widget_big_opendeck_normal.9.png
new file mode 100644
index 000000000000..44a01a384505
Binary files /dev/null and b/res/drawable-hdpi/widget_big_opendeck_normal.9.png differ
diff --git a/res/drawable-hdpi/widget_big_opendeck_pressed.9.png b/res/drawable-hdpi/widget_big_opendeck_pressed.9.png
new file mode 100644
index 000000000000..403b371986a2
Binary files /dev/null and b/res/drawable-hdpi/widget_big_opendeck_pressed.9.png differ
diff --git a/res/drawable/widget_big_closedeck.xml b/res/drawable/widget_big_closedeck.xml
new file mode 100644
index 000000000000..0ba1b81cf8a5
--- /dev/null
+++ b/res/drawable/widget_big_closedeck.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_closedeck_normal" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_closedeck_pressed" />
+</selector>
diff --git a/res/drawable/widget_big_ease1.xml b/res/drawable/widget_big_ease1.xml
new file mode 100644
index 000000000000..432cb95b35d2
--- /dev/null
+++ b/res/drawable/widget_big_ease1.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_ease1_normal" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_ease1_pressed" />
+</selector>
diff --git a/res/drawable/widget_big_ease2.xml b/res/drawable/widget_big_ease2.xml
new file mode 100644
index 000000000000..405e8bddc882
--- /dev/null
+++ b/res/drawable/widget_big_ease2.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_ease2_normal" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_ease2_pressed" />
+</selector>
diff --git a/res/drawable/widget_big_ease2_rec.xml b/res/drawable/widget_big_ease2_rec.xml
new file mode 100644
index 000000000000..231ccf19ff56
--- /dev/null
+++ b/res/drawable/widget_big_ease2_rec.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_ease2_normal_rec" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_ease2_pressed_rec" />
+</selector>
diff --git a/res/drawable/widget_big_ease3.xml b/res/drawable/widget_big_ease3.xml
new file mode 100644
index 000000000000..96a66b291db3
--- /dev/null
+++ b/res/drawable/widget_big_ease3.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_ease3_normal" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_ease3_pressed" />
+</selector>
diff --git a/res/drawable/widget_big_ease3_rec.xml b/res/drawable/widget_big_ease3_rec.xml
new file mode 100644
index 000000000000..11b41722ac9e
--- /dev/null
+++ b/res/drawable/widget_big_ease3_rec.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_ease3_normal_rec" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_ease3_pressed_rec" />
+</selector>
diff --git a/res/drawable/widget_big_ease4.xml b/res/drawable/widget_big_ease4.xml
new file mode 100644
index 000000000000..8980395b1db4
--- /dev/null
+++ b/res/drawable/widget_big_ease4.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_ease4_normal" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_ease4_pressed" />
+</selector>
diff --git a/res/drawable/widget_big_flipcard.xml b/res/drawable/widget_big_flipcard.xml
new file mode 100644
index 000000000000..0ba9aec47dfd
--- /dev/null
+++ b/res/drawable/widget_big_flipcard.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_flipcard_normal" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_flipcard_pressed" />
+</selector>
diff --git a/res/drawable/widget_big_opendeck.xml b/res/drawable/widget_big_opendeck.xml
new file mode 100644
index 000000000000..2e189a8c2a71
--- /dev/null
+++ b/res/drawable/widget_big_opendeck.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+﻿    <item android:state_pressed="false" android:drawable="@drawable/widget_big_opendeck_normal" />
+    <item android:state_pressed="true" android:drawable="@drawable/widget_big_opendeck_pressed" />
+</selector>
diff --git a/res/layout/widget_big.xml b/res/layout/widget_big.xml
index 02253609f50c..81e6c63bbf10 100644
--- a/res/layout/widget_big.xml
+++ b/res/layout/widget_big.xml
@@ -1,86 +1,214 @@
-<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    android:id="@+id/ankidroid_widget_big_layout"
+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
-    android:layout_height="fill_parent"
-    android:focusable="false"
-    android:orientation="horizontal"
-    android:clickable="true"
-    android:background="@drawable/widget_big">
-<LinearLayout
-	android:id="@+id/widget_big_side"
-    android:layout_width="100dip"
-    android:layout_height="fill_parent"
-    android:focusable="false"
-    android:orientation="vertical"
-    android:padding="0dip"
-    android:clickable="false"
-    android:layout_alignParentRight="true">
-    <TextView android:id="@+id/widget_big_open"
+    android:layout_height="fill_parent">
+    <LinearLayout
         android:layout_width="fill_parent"
-        android:layout_height="0dip"
-        android:layout_weight="1"/>
-    <TextView android:id="@+id/widget_big_ease1"
-        android:layout_width="fill_parent"
-        android:layout_height="0dip"
-        android:layout_weight="1"/>
-    <TextView android:id="@+id/widget_big_ease2"
-        android:layout_width="fill_parent"
-        android:layout_height="0dip"
-        android:layout_weight="1"/>
-    <TextView android:id="@+id/widget_big_ease3"
-        android:layout_width="fill_parent"
-        android:layout_height="0dip"
-        android:layout_weight="1"/>
-    <TextView android:id="@+id/widget_big_ease4"
-        android:layout_width="fill_parent"
-        android:layout_height="0dip"
-        android:layout_weight="1"/>
-</LinearLayout>
-<LinearLayout
-	android:id="@+id/widget_big_top"
-    android:layout_width="fill_parent"
-    android:layout_height="80dip"
-    android:focusable="false"
-    android:orientation="horizontal"
-    android:padding="20dip"
-    android:clickable="false"
-    android:layout_toLeftOf="@+id/widget_big_side"
-    android:layout_alignParentTop="true">
-    <TextView android:id="@+id/widget_big_deckname"
-        android:layout_width="0dip"
-        android:layout_height="fill_parent"
-        android:textColor="#000000"
-        android:layout_weight="1"/>
-    <TextView android:id="@+id/widget_big_counts"
-        android:layout_width="0dip"
-        android:layout_height="fill_parent"
-        android:layout_weight="1"/>
-</LinearLayout>
-<LinearLayout
-	android:id="@+id/widget_big_cardcontent"
-    android:layout_width="fill_parent"
-    android:layout_height="fill_parent"
-    android:focusable="false"
-    android:orientation="vertical"
-    android:padding="20dip"
-    android:clickable="false"
-    android:layout_toLeftOf="@+id/widget_big_side"
-    android:layout_below="@+id/widget_big_top">
-    <TextView android:id="@+id/widget_big_question"
-        android:layout_width="fill_parent"
-        android:layout_height="0dip"
-        android:textColor="#000000"
-        android:textSize="18sp"
-        android:gravity="bottom|center_horizontal"
-        android:background="#44444466"
-        android:layout_weight="1"/>
-    <TextView android:id="@+id/widget_big_answer"
-        android:layout_width="fill_parent"
-        android:layout_height="0dip"
-        android:textColor="#000000"
-        android:gravity="top|center_horizontal"
-        android:textSize="18sp"
-        android:background="#ffffff66"
-        android:layout_weight="1"/>
-</LinearLayout> 
-</RelativeLayout>
\ No newline at end of file
+    	android:layout_height="fill_parent">
+    	<FrameLayout
+		    android:layout_marginBottom="11.33dip"
+	    	android:layout_marginRight="44dip"
+	    	android:layout_marginLeft="11.33dip"
+	    	android:layout_marginTop="30dip"
+		    android:layout_width="fill_parent"
+		    android:background="#ffffff"
+		    android:layout_height="fill_parent">
+	    	<FrameLayout
+			    android:id="@+id/widget_big_cardbackground"
+			    android:layout_width="fill_parent"
+			    android:layout_height="fill_parent"
+			    android:background="#ffffff"
+		    	android:focusable="false"
+			    android:clickable="false"/>
+	    	<TextView
+			    android:id="@+id/widget_big_cardcontent"
+			    android:layout_width="fill_parent"
+			    android:layout_height="fill_parent"
+		    	android:gravity="center"
+		    	android:textSize="18sp"
+		    	android:textColor="#000000"/>
+		    <LinearLayout
+			    android:layout_width="fill_parent"
+			    android:layout_height="fill_parent"
+			    android:orientation="vertical">
+			    <LinearLayout
+				    android:layout_width="fill_parent"
+				    android:layout_height="0dip"
+				    android:orientation="horizontal"
+				    android:layout_weight="1">
+					<TextView android:id="@+id/widget_big_topleft"
+					    android:layout_width="0dip"
+					    android:layout_height="fill_parent"
+					    android:gravity="center"
+					    android:layout_weight="1"/>
+					<TextView android:id="@+id/widget_big_topright"
+					    android:layout_width="0dip"
+					    android:layout_height="fill_parent"
+					    android:gravity="center"
+					    android:layout_weight="1"/>						
+			    </LinearLayout>
+			    <LinearLayout
+				    android:layout_width="fill_parent"
+				    android:layout_height="0dip"
+				    android:orientation="horizontal"
+				    android:layout_weight="1">
+					<TextView android:id="@+id/widget_big_bottomleft"
+					    android:layout_width="0dip"
+					    android:layout_height="fill_parent"
+					    android:gravity="center"
+					    android:layout_weight="1"/>
+					<TextView android:id="@+id/widget_big_bottomright"
+					    android:layout_width="0dip"
+					    android:layout_height="fill_parent"
+					    android:gravity="center"
+					    android:layout_weight="1"/>						
+			    </LinearLayout>
+		    </LinearLayout>
+			<LinearLayout
+			    android:id="@+id/widget_big_progressbar"
+				android:gravity="center"
+		    	android:background="#ffffff"
+	    	    android:layout_width="fill_parent"
+		    	android:visibility="invisible"
+		    	android:clickable="false"
+    			android:layout_height="fill_parent">			    
+		    	<ProgressBar
+				    android:layout_width="wrap_content"
+				    android:layout_height="wrap_content"
+	    			android:indeterminate="true"
+				    android:focusable="false"
+				    style="@android:style/Widget.ProgressBar.Large"
+			    	android:clickable="false"/>
+			</LinearLayout>
+	    </FrameLayout>
+	</LinearLayout>
+	<RelativeLayout
+	    android:id="@+id/ankidroid_widget_big_layout"
+	    android:layout_width="fill_parent"
+	    android:layout_height="fill_parent"
+	    android:focusable="false"
+	    android:orientation="horizontal"
+	    android:clickable="false"
+	    android:background="@drawable/widget_big_bg">
+		<LinearLayout
+		    android:id="@+id/widget_big_side"
+		    android:layout_width="35.33dip"
+		    android:layout_height="fill_parent"
+		    android:layout_marginTop="43.33dip"
+		    android:layout_marginBottom="23.33dip"
+		    android:layout_marginRight="8.67dip"
+		    android:focusable="false"
+		    android:orientation="vertical"
+		    android:padding="0dip"
+		    android:clickable="false"
+		    android:layout_alignParentRight="true">
+		    <FrameLayout
+		        android:layout_width="fill_parent"
+	    	    android:layout_height="0dip"
+	    	    android:layout_weight="1">
+			    <TextView android:id="@+id/widget_big_open"
+			        android:layout_width="fill_parent"
+		    	    android:layout_height="fill_parent"
+					android:background="@drawable/widget_big_opendeck"
+					android:visibility="visible"/>
+			    <TextView android:id="@+id/widget_big_close"
+		    	    android:layout_width="fill_parent"
+	    	    	android:layout_height="fill_parent"
+					android:background="@drawable/widget_big_closedeck"
+					android:visibility="invisible"/>
+		    </FrameLayout>
+			<FrameLayout
+			    android:layout_width="fill_parent"
+			    android:layout_height="dip"
+			    android:layout_weight="4">
+				<LinearLayout
+				    android:layout_width="fill_parent"
+				    android:layout_height="fill_parent"
+				    android:focusable="false"
+				    android:orientation="vertical">
+				    <TextView android:id="@+id/widget_big_ease4"
+			    	    android:layout_width="fill_parent"
+			        	android:layout_height="0dip"
+				        android:layout_weight="1"
+				        android:background="@drawable/widget_big_ease4"/>
+				    <FrameLayout
+				        android:layout_width="fill_parent"
+			    	    android:layout_height="0dip"
+			    	    android:layout_weight="1">
+					    <TextView android:id="@+id/widget_big_ease3"
+					        android:layout_width="fill_parent"
+				    	    android:layout_height="fill_parent"
+							android:background="@drawable/widget_big_ease3"
+							android:visibility="invisible"/>
+					    <TextView android:id="@+id/widget_big_ease3_rec"
+					        android:layout_width="fill_parent"
+				    	    android:layout_height="fill_parent"
+							android:background="@drawable/widget_big_ease3_rec"
+							android:visibility="visible"/>
+		    	    </FrameLayout>
+				    <FrameLayout
+				        android:layout_width="fill_parent"
+			    	    android:layout_height="0dip"
+			    	    android:layout_weight="1">
+					    <TextView android:id="@+id/widget_big_ease2"
+					        android:layout_width="fill_parent"
+				    	    android:layout_height="fill_parent"
+							android:background="@drawable/widget_big_ease2"
+							android:visibility="visible"/>
+					    <TextView android:id="@+id/widget_big_ease2_rec"
+					        android:layout_width="fill_parent"
+				    	    android:layout_height="fill_parent"
+							android:background="@drawable/widget_big_ease2_rec"
+							android:visibility="invisible"/>
+		    	    </FrameLayout>
+				    <TextView android:id="@+id/widget_big_ease1"
+				        android:layout_width="fill_parent"
+				        android:layout_height="0dip"
+						android:background="@drawable/widget_big_ease1"
+			    	    android:layout_weight="1"/>
+				</LinearLayout>
+				<FrameLayout android:id="@+id/widget_big_flipcard"	
+				    android:layout_width="fill_parent"
+				    android:layout_height="fill_parent"
+					android:background="@drawable/widget_big_flipcard"
+				    android:focusable="false"
+			    	android:visibility="invisible"/>
+				<FrameLayout android:id="@+id/widget_big_empty"	
+				    android:layout_width="fill_parent"
+				    android:layout_height="fill_parent"
+					android:background="@drawable/widget_big_empty"
+				    android:focusable="false"
+				    android:clickable="true"
+			    	android:visibility="visible"/>
+			</FrameLayout>
+		</LinearLayout>
+		<RelativeLayout
+			android:id="@+id/widget_big_top"
+		    android:layout_width="fill_parent"
+	    	android:layout_height="22dip"
+		    android:focusable="false"
+		    android:layout_marginTop="8dip"
+	    	android:layout_marginLeft="22dip"
+		    android:orientation="horizontal"
+		    android:clickable="false"
+	    	android:singleLine="true"
+		    android:layout_toLeftOf="@+id/widget_big_side"
+		    android:layout_alignParentTop="true">
+	    	<TextView android:id="@+id/widget_big_deckname"
+		        android:layout_width="fill_parent"
+				android:layout_alignParentLeft="true"
+	    	    android:layout_toLeftOf="@+id/widget_big_counts"
+	        	android:layout_height="fill_parent"
+		        android:textColor="#000000"
+				android:gravity="center"
+	        	android:layout_weight="1"/>
+		    <TextView android:id="@+id/widget_big_counts"
+				android:gravity="center"
+	    	    android:singleLine="true"
+	    	    android:layout_marginRight="4sp"
+	        	android:layout_width="wrap_content"
+		        android:layout_height="fill_parent"
+				android:layout_alignParentRight="true"
+	    	    android:layout_weight="1"/>
+		</RelativeLayout>
+	</RelativeLayout>
+</FrameLayout>
diff --git a/src/com/ichi2/anki/AnkiDroidWidgetBig.java b/src/com/ichi2/anki/AnkiDroidWidgetBig.java
index ec7293450d4a..0f03b576fbdb 100644
--- a/src/com/ichi2/anki/AnkiDroidWidgetBig.java
+++ b/src/com/ichi2/anki/AnkiDroidWidgetBig.java
@@ -25,27 +25,27 @@
 import android.content.ComponentName;
 import android.content.Context;
 import android.content.Intent;
-import android.content.IntentFilter;
 import android.content.SharedPreferences;
-import android.content.res.Resources;
 import android.graphics.Color;
-import android.net.Uri;
+import android.os.Bundle;
 import android.os.IBinder;
+import android.text.Html;
 import android.text.SpannableString;
 import android.text.SpannableStringBuilder;
 import android.text.Spanned;
 import android.text.style.ForegroundColorSpan;
+import android.text.style.UnderlineSpan;
 import android.util.Log;
 import android.view.View;
 import android.widget.RemoteViews;
 
-import java.util.ArrayList;
-import java.util.List;
-
 public class AnkiDroidWidgetBig extends AppWidgetProvider {
 
     private static BroadcastReceiver mMountReceiver = null;
     private static boolean remounted = false;
+    private static Deck sLoadedDeck;
+    private static Card sCard;
+    private static boolean sShowAnswer = false;
 
     @Override
     public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
@@ -72,29 +72,60 @@ public void onDisabled(Context context) {
         preferences.edit().putBoolean("widgetBigEnabled", false).commit();
     }
 
+
+    public static void setDeckAndLoadCard(Deck deck) {
+    	sLoadedDeck = deck;
+    	if (deck != null) {
+        	sCard = sLoadedDeck.getCard();    		
+    	}
+    }
+
+
+    public static void setCard(Card card) {
+    	if (sLoadedDeck != null) {
+        	sCard = card;
+    	}
+    }
+
+
     public static class UpdateService extends Service {
     	public static final String ACTION_OPENDECK = "org.ichi2.anki.AnkiDroidWidgetBig.OPENDECK";
         public static final String ACTION_CLOSEDECK = "org.ichi2.anki.AnkiDroidWidgetBig.CLOSEDECK";
         public static final String ACTION_ANSWER = "org.ichi2.anki.AnkiDroidWidgetBig.ANSWER";
         public static final String ACTION_OPEN = "org.ichi2.anki.AnkiDroidWidgetBig.OPEN";
         public static final String ACTION_UPDATE = "org.ichi2.anki.AnkiDroidWidgetBig.UPDATE";
+        public static final String ACTION_BURY_CARD = "org.ichi2.anki.AnkiDroidWidgetBig.BURYCARD";
+        public static final String ACTION_UNDO = "org.ichi2.anki.AnkiDroidWidgetBig.UNDO";
         public static final String EXTRA_ANSWER_EASE = "answerEase";
 
 
-        private CharSequence getDeckStatusString(DeckStatus deck) {
+        public static final int VIEW_ACTION_DEFAULT = 0;
+        public static final int VIEW_ACTION_SHOW_PROGRESS_DIALOG = 1;
+        public static final int VIEW_ACTION_HIDE_BUTTONS = 2;
+
+        private CharSequence getDeckStatusString(Deck deck, Card card) {
             SpannableStringBuilder sb = new SpannableStringBuilder();
 
-            SpannableString red = new SpannableString(Integer.toString(deck.mFailedCards));
+            SpannableString red = new SpannableString(Integer.toString(deck.getFailedSoonCount()));
             red.setSpan(new ForegroundColorSpan(Color.RED), 0, red.length(),
                     Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+            if (card != null && card.getType() == Card.TYPE_FAILED) {
+            	red.setSpan(new UnderlineSpan(), 0, red.length(), 0);
+            }
 
-            SpannableString black = new SpannableString(Integer.toString(deck.mDueCards));
+            SpannableString black = new SpannableString(Integer.toString(deck.getRevCount()));
             black.setSpan(new ForegroundColorSpan(Color.BLACK), 0, black.length(),
                     Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+            if (card != null && card.getType() == Card.TYPE_REV) {
+            	black.setSpan(new UnderlineSpan(), 0, black.length(), 0);
+            }
 
-            SpannableString blue = new SpannableString(Integer.toString(deck.mNewCards));
+            SpannableString blue = new SpannableString(Integer.toString(deck.getNewCountToday()));
             blue.setSpan(new ForegroundColorSpan(Color.BLUE), 0, blue.length(),
                     Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
+            if (card != null && card.getType() == Card.TYPE_NEW) {
+            	blue.setSpan(new UnderlineSpan(), 0, blue.length(), 0);
+            }
 
             sb.append(red);
             sb.append(" ");
@@ -110,60 +141,167 @@ private CharSequence getDeckStatusString(DeckStatus deck) {
         public void onStart(Intent intent, int startId) {
             Log.i(AnkiDroidApp.TAG, "BigWidget: OnStart");
 
-            boolean updateDueDecksNow = true;
-            if (intent != null) {
-            	if (intent.getAction() != null) {
-                	Log.e("intentaction", "a " + intent.getAction());            		
-            	}
-                if (ACTION_OPENDECK.equals(intent.getAction())) {
-                	WidgetStatus.deckOperation(WidgetStatus.TASK_OPEN_DECK, new WidgetDeckTaskData(this, "/emmc/AnkiDroid/Fra-2-Red.anki"));
-                } else if (ACTION_CLOSEDECK.equals(intent.getAction())) {
-                	Deck deck = WidgetStatus.getDeck();
-                	if (deck != null) {
-                    	WidgetStatus.deckOperation(WidgetStatus.TASK_CLOSE_DECK, new WidgetDeckTaskData(this, deck));                		
+            if (intent != null && intent.getAction() != null) {
+            	String action = intent.getAction();
+                if (ACTION_OPENDECK.equals(action)) {
+                	updateViews(VIEW_ACTION_SHOW_PROGRESS_DIALOG);
+                	WidgetStatus.deckOperation(WidgetStatus.TASK_OPEN_DECK, new WidgetDeckTaskData(this, "/emmc/AnkiDroid/Eng-1ab-Red+Gru+Auf.anki"));
+                } else if (ACTION_CLOSEDECK.equals(action)) {
+                	updateViews(VIEW_ACTION_SHOW_PROGRESS_DIALOG);
+                	if (sLoadedDeck != null) {
+                    	WidgetStatus.deckOperation(WidgetStatus.TASK_CLOSE_DECK, new WidgetDeckTaskData(this, sLoadedDeck));
                 	}
-                } else if (ACTION_OPEN.equals(intent.getAction())) {
-                	startActivity(StudyOptions.getLoadDeckIntent(this, intent.getData().getPath()));
-                } else if (ACTION_ANSWER.equals(intent.getAction())) {
-                	Deck deck = WidgetStatus.getDeck();
-                	Card card = WidgetStatus.getCard();
-                	WidgetStatus.deckOperation(WidgetStatus.TASK_ANSWER_CARD, new WidgetDeckTaskData(this, deck, card, intent.getIntExtra(EXTRA_ANSWER_EASE, 0)));
-                } else if (ACTION_UPDATE.equals(intent.getAction())) {
-                	
+                } else if (ACTION_UNDO.equals(action)) {
+                	sShowAnswer = false;
+                	updateViews(VIEW_ACTION_HIDE_BUTTONS);
+                	WidgetStatus.deckOperation(WidgetStatus.TASK_UNDO, new WidgetDeckTaskData(this, sLoadedDeck));
+                } else if (ACTION_BURY_CARD.equals(action)) {
+                	sShowAnswer = false;
+                	updateViews(VIEW_ACTION_HIDE_BUTTONS);
+                	WidgetStatus.deckOperation(WidgetStatus.TASK_BURY_CARD, new WidgetDeckTaskData(this, sLoadedDeck, sCard));
+                } else if (action.startsWith(ACTION_ANSWER)) {
+                	int ease = Integer.parseInt(action.substring(action.length() - 1));
+                	if (ease == 0) {
+                		sShowAnswer = true;
+                		updateViews();
+                	} else {
+                    	sShowAnswer = false;
+                    	updateViews(VIEW_ACTION_HIDE_BUTTONS);
+                    	WidgetStatus.deckOperation(WidgetStatus.TASK_ANSWER_CARD, new WidgetDeckTaskData(this, sLoadedDeck, sCard, ease));                		
+                	}
+                } else if (ACTION_UPDATE.equals(action)) {
+                	updateViews();
                 }
             }
-            RemoteViews updateViews = buildUpdate(this, updateDueDecksNow);
+        }
+
+
+        private void updateViews() {
+        	updateViews(VIEW_ACTION_DEFAULT);
+        }
+    	private void updateViews(int action) {
+            RemoteViews updateViews = buildUpdate(this, action);
 
             ComponentName thisWidget = new ComponentName(this, AnkiDroidWidgetBig.class);
             AppWidgetManager manager = AppWidgetManager.getInstance(this);
-            manager.updateAppWidget(thisWidget, updateViews);
+            manager.updateAppWidget(thisWidget, updateViews);        	
         }
 
-        private RemoteViews buildUpdate(Context context, boolean updateDueDecksNow) {
+
+    	private RemoteViews buildUpdate(Context context, int action) {
             Log.i(AnkiDroidApp.TAG, "BigWidget: buildUpdate");
 
             // Resources res = context.getResources();
             RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget_big);
 
-            Deck deck = WidgetStatus.getDeck();
-        	if (deck != null) {
-        		updateViews.setTextViewText(R.id.widget_big_deckname, deck.getDeckName());
+            if (action == VIEW_ACTION_SHOW_PROGRESS_DIALOG) {
+            	updateViews.setViewVisibility(R.id.widget_big_progressbar, View.VISIBLE);
+            } else {
+            	updateViews.setViewVisibility(R.id.widget_big_progressbar, View.INVISIBLE);            	
+            }
+            if (action == VIEW_ACTION_HIDE_BUTTONS) {
+//            	updateViews.setViewVisibility(R.id.widget_big_open, View.INVISIBLE);
+//            	updateViews.setViewVisibility(R.id.widget_big_close, View.INVISIBLE);
+            	updateViews.setViewVisibility(R.id.widget_big_empty, View.VISIBLE);
+            } else if (sLoadedDeck != null) {
+        		updateViews.setTextViewText(R.id.widget_big_deckname, sLoadedDeck.getDeckName());
+        		updateViews.setTextViewText(R.id.widget_big_counts, getDeckStatusString(sLoadedDeck, sCard));
+        		
+//        		WebView webView = new WebView(this);
+//        		webView.setDrawingCacheEnabled(true);
+//        		webView.layout(0, 0, 500, 500); 
+//        		webView.loadDataWithBaseURL("", "asdf", "text/html", "utf-8", null);
+//        		webView.buildDrawingCache(true);
+//        		Bitmap b = Bitmap.createBitmap(webView.getDrawingCache());
+//        		webView.setDrawingCacheEnabled(false); // clear drawing cache
+//
+//        		FileOutputStream out;
+//				try {
+//					out = new FileOutputStream("/emmc/test.png");
+//	        	       b.compress(Bitmap.CompressFormat.PNG, 90, out);
+//	        	       File f = new File("/emmc/test.png");
+//	        	       Uri uri = Uri.fromFile(f);
+//	        	       updateViews.setImageViewUri(R.id.widget_big_cardcontent, uri);
+//				} catch (FileNotFoundException e) {
+//					// TODO Auto-generated catch block
+//					e.printStackTrace();
+//				}
+
         		PendingIntent closeDeckPendingIntent = getCloseDeckPendingIntent(context);
-                updateViews.setOnClickPendingIntent(R.id.widget_big_open, closeDeckPendingIntent);
-                updateViews.setTextViewText(R.id.widget_big_question, WidgetStatus.getQuestion());
-                updateViews.setTextViewText(R.id.widget_big_answer, WidgetStatus.getAnswer());
-                // answer buttons
-        		PendingIntent ease1PendindIntent = getAnswerPendingIntent(context, 1);
-                updateViews.setOnClickPendingIntent(R.id.widget_big_ease1, ease1PendindIntent);
-        		PendingIntent ease2PendindIntent = getAnswerPendingIntent(context, 2);
-                updateViews.setOnClickPendingIntent(R.id.widget_big_ease2, ease2PendindIntent);
-        		PendingIntent ease3PendindIntent = getAnswerPendingIntent(context, 3);
-                updateViews.setOnClickPendingIntent(R.id.widget_big_ease3, ease3PendindIntent);
-        		PendingIntent ease4PendindIntent = getAnswerPendingIntent(context, 4);
-                updateViews.setOnClickPendingIntent(R.id.widget_big_ease4, ease4PendindIntent);
+                updateViews.setOnClickPendingIntent(R.id.widget_big_close, closeDeckPendingIntent);
+                updateViews.setViewVisibility(R.id.widget_big_close, View.VISIBLE);
+                updateViews.setViewVisibility(R.id.widget_big_open, View.INVISIBLE);
+
+                updateViews.setTextViewText(R.id.widget_big_topleft, "");
+                updateViews.setTextViewText(R.id.widget_big_topright, "");
+                updateViews.setTextViewText(R.id.widget_big_bottomleft, "");
+                updateViews.setTextViewText(R.id.widget_big_bottomright, "");
+
+                // set the flashcard content
+                if (sCard != null) {
+                    PendingIntent undoPendindIntent = getUndoPendingIntent(context);
+                    updateViews.setOnClickPendingIntent(R.id.widget_big_topright, undoPendindIntent);
+                    PendingIntent buryPendindIntent = getBuryCardPendingIntent(context);
+                    updateViews.setOnClickPendingIntent(R.id.widget_big_topleft, buryPendindIntent);
+                	updateViews.setViewVisibility(R.id.widget_big_empty, View.INVISIBLE);
+                    // answer buttons
+                    if (sShowAnswer) {
+                    	updateViews.setTextViewText(R.id.widget_big_cardcontent,  Html.fromHtml(sCard.getQuestion() 
+                    			+ "<br>─────<br>" 
+                    			+ sCard.getAnswer()));
+                		PendingIntent ease1PendindIntent = getAnswerPendingIntent(context, 1);
+                        updateViews.setOnClickPendingIntent(R.id.widget_big_ease1, ease1PendindIntent);
+                        updateViews.setOnClickPendingIntent(R.id.widget_big_bottomleft, ease1PendindIntent);
+                        if (sCard.isRev()) {
+                    		PendingIntent ease2PendindIntent = getAnswerPendingIntent(context, 2);
+                            updateViews.setOnClickPendingIntent(R.id.widget_big_ease2, ease2PendindIntent);
+                    		PendingIntent ease3PendindIntent = getAnswerPendingIntent(context, 3);
+                    		updateViews.setOnClickPendingIntent(R.id.widget_big_ease3_rec, ease3PendindIntent);
+                    		updateViews.setOnClickPendingIntent(R.id.widget_big_bottomright, ease3PendindIntent);
+                        	updateViews.setViewVisibility(R.id.widget_big_ease2, View.VISIBLE);
+                        	updateViews.setViewVisibility(R.id.widget_big_ease2_rec, View.INVISIBLE);
+                        	updateViews.setViewVisibility(R.id.widget_big_ease3, View.INVISIBLE);
+                        	updateViews.setViewVisibility(R.id.widget_big_ease3_rec, View.VISIBLE);
+                        } else {
+                    		PendingIntent ease2PendindIntent = getAnswerPendingIntent(context, 2);
+                            updateViews.setOnClickPendingIntent(R.id.widget_big_ease2_rec, ease2PendindIntent);
+                    		updateViews.setOnClickPendingIntent(R.id.widget_big_bottomright, ease2PendindIntent);
+                    		PendingIntent ease3PendindIntent = getAnswerPendingIntent(context, 3);
+                            updateViews.setOnClickPendingIntent(R.id.widget_big_ease3, ease3PendindIntent);	                    	
+                        	updateViews.setViewVisibility(R.id.widget_big_ease2, View.INVISIBLE);
+                        	updateViews.setViewVisibility(R.id.widget_big_ease2_rec, View.VISIBLE);
+                        	updateViews.setViewVisibility(R.id.widget_big_ease3, View.VISIBLE);
+                        	updateViews.setViewVisibility(R.id.widget_big_ease3_rec, View.INVISIBLE);
+                        }
+                		PendingIntent ease4PendindIntent = getAnswerPendingIntent(context, 4);
+                        updateViews.setOnClickPendingIntent(R.id.widget_big_ease4, ease4PendindIntent);                	
+
+                        updateViews.setViewVisibility(R.id.widget_big_flipcard, View.INVISIBLE);
+                    } else {
+                		PendingIntent ease0PendindIntent = getAnswerPendingIntent(context, 0);
+                        updateViews.setOnClickPendingIntent(R.id.widget_big_flipcard, ease0PendindIntent);
+                		updateViews.setOnClickPendingIntent(R.id.widget_big_bottomright, ease0PendindIntent);
+                		updateViews.setOnClickPendingIntent(R.id.widget_big_bottomleft, ease0PendindIntent);
+                    	updateViews.setViewVisibility(R.id.widget_big_flipcard, View.VISIBLE);
+                    	updateViews.setTextViewText(R.id.widget_big_cardcontent, Html.fromHtml(sCard.getQuestion()));
+                    }
+                } else {
+                	updateViews.setViewVisibility(R.id.widget_big_empty, View.INVISIBLE);
+                }
         	} else {
+        		sShowAnswer = false;
         		PendingIntent openPendingIntent = getOpenDeckPendingIntent(context);
                 updateViews.setOnClickPendingIntent(R.id.widget_big_open, openPendingIntent);
+                updateViews.setTextViewText(R.id.widget_big_counts, "");
+                updateViews.setTextViewText(R.id.widget_big_deckname, "");
+                updateViews.setTextViewText(R.id.widget_big_cardcontent, "");
+            	updateViews.setViewVisibility(R.id.widget_big_empty, View.VISIBLE);
+                updateViews.setViewVisibility(R.id.widget_big_close, View.INVISIBLE);
+                updateViews.setViewVisibility(R.id.widget_big_open, View.VISIBLE);
+                updateViews.setTextViewText(R.id.widget_big_topleft, "bury");
+                updateViews.setTextViewText(R.id.widget_big_topright, "undo");
+                updateViews.setTextViewText(R.id.widget_big_bottomleft, "again");
+                updateViews.setTextViewText(R.id.widget_big_bottomright, "recommended");
         	}
             return updateViews;
         }
@@ -171,8 +309,7 @@ private RemoteViews buildUpdate(Context context, boolean updateDueDecksNow) {
 
         private PendingIntent getAnswerPendingIntent(Context context, int ease) {
             Intent ankiDroidIntent = new Intent(context, UpdateService.class);
-            ankiDroidIntent.setAction(ACTION_ANSWER);
-            ankiDroidIntent.putExtra(EXTRA_ANSWER_EASE, ease);
+            ankiDroidIntent.setAction(ACTION_ANSWER + Integer.toString(ease));
             return PendingIntent.getService(context, 0, ankiDroidIntent, 0);
         }
 
@@ -188,6 +325,18 @@ private PendingIntent getCloseDeckPendingIntent(Context context) {
             return PendingIntent.getService(context, 0, ankiDroidIntent, 0);
         }
 
+        private PendingIntent getUndoPendingIntent(Context context) {
+            Intent ankiDroidIntent = new Intent(context, UpdateService.class);
+            ankiDroidIntent.setAction(ACTION_UNDO);
+            return PendingIntent.getService(context, 0, ankiDroidIntent, 0);
+        }
+
+        private PendingIntent getBuryCardPendingIntent(Context context) {
+            Intent ankiDroidIntent = new Intent(context, UpdateService.class);
+            ankiDroidIntent.setAction(ACTION_BURY_CARD);
+            return PendingIntent.getService(context, 0, ankiDroidIntent, 0);
+        }
+
         private PendingIntent getOpenPendingIntent(Context context, String deckPath) {
             Intent ankiDroidIntent = new Intent(context, UpdateService.class);
             ankiDroidIntent.setAction(ACTION_OPEN);
diff --git a/src/com/ichi2/anki/DeckManager.java b/src/com/ichi2/anki/DeckManager.java
new file mode 100644
index 000000000000..0f1e4e50b6ab
--- /dev/null
+++ b/src/com/ichi2/anki/DeckManager.java
@@ -0,0 +1,11 @@
+package com.ichi2.anki;
+
+public class DeckManager {
+
+	public static Deck openDeck(String deckpath, int muh) {
+		
+		
+		return null;
+	}
+
+}
diff --git a/src/com/ichi2/anki/MetaDB.java b/src/com/ichi2/anki/MetaDB.java
index 6346747b8ca2..0a0ee4bc4650 100644
--- a/src/com/ichi2/anki/MetaDB.java
+++ b/src/com/ichi2/anki/MetaDB.java
@@ -3,8 +3,6 @@
 import java.util.regex.Matcher;
 import java.util.regex.Pattern;
 
-import com.tomgibara.android.veecheck.util.PrefSettings;
-
 import android.content.Context;
 import android.database.Cursor;
 import android.database.sqlite.SQLiteDatabase;
diff --git a/src/com/ichi2/anki/WidgetStatus.java b/src/com/ichi2/anki/WidgetStatus.java
index 39364e9a07fa..75a860c08892 100644
--- a/src/com/ichi2/anki/WidgetStatus.java
+++ b/src/com/ichi2/anki/WidgetStatus.java
@@ -47,9 +47,8 @@ public final class WidgetStatus {
 	public static final int TASK_OPEN_DECK = 0;
 	public static final int TASK_ANSWER_CARD = 1;
 	public static final int TASK_CLOSE_DECK = 2;
-	private static Deck sDeck;
-	private static Card sCard;
-
+	public static final int TASK_UNDO = 3;
+	public static final int TASK_BURY_CARD = 4;
 
     /** This class should not be instantiated. */
     private WidgetStatus() {}
@@ -117,26 +116,20 @@ public static int fetchDue(Context context) {
 
 
     public static void deckOperation(int type, WidgetDeckTaskData params) {
+        try {
+            if ((sDeckOperationTask != null) && (sDeckOperationTask.getStatus() != AsyncTask.Status.FINISHED)) {
+            	sDeckOperationTask.get();
+            }
+        } catch (Exception e) {
+            Log.e(AnkiDroidApp.TAG,
+                    "deckOperation - Got exception while waiting for thread to finish: " + e.getMessage());
+        }
+
     	sDeckOperationType = type;
     	sDeckOperationTask = new DeckOperationAsyncTask();
     	sDeckOperationTask.execute(params);
     }
 
-    public static Deck getDeck() {
-    	return sDeck;
-    }
-
-    public static Card getCard() {
-    	return sCard;
-    }
-
-    public static String getQuestion() {
-    	return Utils.stripHTML(sCard.getQuestion().replaceAll("<br(\\s*\\/*)>", "\n"));
-    }
-
-    public static String getAnswer() {
-    	return Utils.stripHTML(sCard.getAnswer().replaceAll("<br(\\s*\\/*)>", "\n"));
-    }
 
     private static class UpdateDeckStatusAsyncTask extends AsyncTask<Context, Void, Context> {
         private static final DeckStatus[] EMPTY_DECK_STATUS = new DeckStatus[0];
@@ -332,35 +325,48 @@ protected WidgetDeckTaskData doInBackground(WidgetDeckTaskData... params) {
             	return doInBackgroundAnswerCard(params);
             case TASK_CLOSE_DECK:
             	return doInBackgroundCloseDeck(params);
+            case TASK_UNDO:
+            	return doInBackgroundUndo(params);
+            case TASK_BURY_CARD:
+            	return doInBackgroundBury(params);
             }
             return params[0];
         }
 
         protected WidgetDeckTaskData doInBackgroundOpenDeck(WidgetDeckTaskData... params) {
         	Log.e(AnkiDroidApp.TAG, "doInBackgroundOpenDeck");
-        	Deck deck = Deck.openDeck(params[0].getString());
+        	Deck deck = Deck.openDeck(params[0].getString(), true);
         	Card card = deck.getCard();
         	return new WidgetDeckTaskData(params[0].getContext(), deck, card);
         }
 
         protected WidgetDeckTaskData doInBackgroundAnswerCard(WidgetDeckTaskData... params) {
         	Log.e(AnkiDroidApp.TAG, "doInBackgroundAnswerCard");
+        	Context context = params[0].getContext();
         	Card card = params[0].getCard();
         	Deck deck = params[0].getDeck();
         	Card newCard;
         	int ease = params[0].getInt();
         	if (ease == 0) {
-        		return new WidgetDeckTaskData(params[0].getContext(), deck, card);
+        		return new WidgetDeckTaskData(context, deck, card);
         	}
 //            try {
     	        AnkiDb ankiDB = AnkiDatabaseManager.getDatabase(deck.getDeckPath());
     	        ankiDB.getDatabase().beginTransaction();
     	        try {
     	            if (card != null) {
-    	                deck.answerCard(card, 3);
+    	            	if (card.thinkingTime() >= 20) {
+    	            		// user restarted learning
+    	            		card.startTimer();
+    	            	}
+    	                deck.answerCard(card, ease);
     	                Log.e(AnkiDroidApp.TAG, "WidgetBig: answering card with ease " + ease);
     	            }
     	            newCard = deck.getCard();
+
+    	            AnkiDroidWidgetBig.setCard(newCard);
+    	            sendUpdateIntent(context);
+
     	            ankiDB.getDatabase().setTransactionSuccessful();
     	        } finally {
     	            ankiDB.getDatabase().endTransaction();
@@ -374,21 +380,69 @@ protected WidgetDeckTaskData doInBackgroundCloseDeck(WidgetDeckTaskData... param
         	params[0].getDeck().closeDeck(false);
         	return new WidgetDeckTaskData(params[0].getContext());
         }
+        
+
+        protected WidgetDeckTaskData doInBackgroundUndo(WidgetDeckTaskData... params) {
+        	Log.e(AnkiDroidApp.TAG, "doInBackgroundUndo");
+        	Deck deck = params[0].getDeck();
+        	deck.undo(0, true);
+        	AnkiDroidWidgetBig.setCard(deck.getCard());//deck.cardFromId(deck.undo(0, true)));
+        	sendUpdateIntent(params[0].getContext());
+
+        	return new WidgetDeckTaskData(params[0].getContext());
+        }
+
+
+        protected WidgetDeckTaskData doInBackgroundBury(WidgetDeckTaskData... params) {
+        	Log.e(AnkiDroidApp.TAG, "doInBackgroundBury");
+        	Card card = params[0].getCard();
+        	long id = card.getId();
+        	Deck deck = params[0].getDeck();
+        	deck.buryFact(card.getFactId(), id);
+        	deck.reset();
+
+        	AnkiDroidWidgetBig.setCard(deck.getCard());
+        	sendUpdateIntent(params[0].getContext());
+
+        	return new WidgetDeckTaskData(params[0].getContext());
+        }
+        
 
         @Override
         protected void onPostExecute(WidgetDeckTaskData params) {
             Log.d(AnkiDroidApp.TAG, "WidgetStatus.DeckOperationAsyncTask.onPostExecute()");
             Context context = params.getContext();
-            sDeck = params.getDeck();
-            sCard = params.getCard();
-            Intent intent;
-            intent = new Intent(context, AnkiDroidWidgetBig.UpdateService.class);
-            intent.setAction(AnkiDroidWidgetBig.UpdateService.ACTION_UPDATE);
-            context.startService(intent);
+            boolean update = false;
+            switch(sDeckOperationType) {
+            case TASK_OPEN_DECK:
+                AnkiDroidWidgetBig.setDeckAndLoadCard(params.getDeck());            	
+            	update = true;
+            	break;
+            case TASK_CLOSE_DECK:
+                AnkiDroidWidgetBig.setDeckAndLoadCard(params.getDeck());            	
+            	update = true;
+            	break;
+            case TASK_ANSWER_CARD:
+            	break;
+            case TASK_UNDO:
+            	break;
+            case TASK_BURY_CARD:
+            	break;            	
+            }
+            if (update) {
+            	sendUpdateIntent(context);
+            }
         }
+    }
 
+    public static void sendUpdateIntent(Context context) {
+        Intent intent;
+        intent = new Intent(context, AnkiDroidWidgetBig.UpdateService.class);
+        intent.setAction(AnkiDroidWidgetBig.UpdateService.ACTION_UPDATE);
+        context.startService(intent);
     }
 
+
     public static class WidgetDeckTaskData {
     	private Context context;
     	private String string;
@@ -405,6 +459,12 @@ public WidgetDeckTaskData(Context context, String string) {
     		this.string = string;
         }
 
+    	public WidgetDeckTaskData(Context context, Deck deck, String string) {
+    		this.deck = deck;
+    		this.context = context;
+    		this.string = string;
+        }
+
     	public WidgetDeckTaskData(Context context, Card card) {
     		this.context = context;
     		this.card = card;
