diff --git a/AnkiDroid/build.gradle b/AnkiDroid/build.gradle
index 88af8f244245..c8bcfb4ee8e6 100644
--- a/AnkiDroid/build.gradle
+++ b/AnkiDroid/build.gradle
@@ -386,7 +386,8 @@ dependencies {
     testImplementation "io.mockk:mockk:1.13.8"
     testImplementation 'org.apache.commons:commons-exec:1.3' // obtaining the OS
     testImplementation("androidx.fragment:fragment-testing:$fragments_version")
-
+    // in a JvmTest we need org.json.JSONObject to not be mocked
+    testImplementation 'org.json:json:20220924'
     // May need a resolution strategy for support libs to our versions
     androidTestImplementation "androidx.test.espresso:espresso-core:$espresso_version"
     androidTestImplementation("androidx.test.espresso:espresso-contrib:$espresso_version") {
diff --git a/AnkiDroid/src/test/java/com/ichi2/anki/dialogs/CustomStudyDialogTest.kt b/AnkiDroid/src/test/java/com/ichi2/anki/dialogs/CustomStudyDialogTest.kt
index 118cede4034e..f844a01782dd 100644
--- a/AnkiDroid/src/test/java/com/ichi2/anki/dialogs/CustomStudyDialogTest.kt
+++ b/AnkiDroid/src/test/java/com/ichi2/anki/dialogs/CustomStudyDialogTest.kt
@@ -28,14 +28,15 @@ import com.ichi2.anki.dialogs.customstudy.CustomStudyDialog.CustomStudyListener
 import com.ichi2.anki.dialogs.customstudy.CustomStudyDialogFactory
 import com.ichi2.libanki.Collection
 import com.ichi2.libanki.sched.Scheduler
-import com.ichi2.testutils.JsonUtils.toOrderedString
 import com.ichi2.testutils.ParametersUtils
+import com.ichi2.testutils.isJsonEqual
 import com.ichi2.testutils.items
 import com.ichi2.utils.KotlinCleanup
 import org.hamcrest.CoreMatchers.notNullValue
 import org.hamcrest.MatcherAssert
 import org.hamcrest.Matchers
 import org.hamcrest.core.IsNull
+import org.json.JSONObject
 import org.junit.After
 import org.junit.Test
 import org.junit.runner.RunWith
@@ -94,7 +95,7 @@ class CustomStudyDialogTest : RobolectricTest() {
             "\"timeToday\":[0,0]," +
             "\"usn\":-1" +
             "}"
-        MatcherAssert.assertThat(customStudy.toOrderedString(), Matchers.equalTo(expected))
+        MatcherAssert.assertThat(customStudy, isJsonEqual(JSONObject(expected)))
     }
 
     @Test
diff --git a/AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.kt b/AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.kt
index 08dd5bf35a86..c6030cc8cf50 100644
--- a/AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.kt
+++ b/AnkiDroid/src/test/java/com/ichi2/libanki/ModelTest.kt
@@ -563,7 +563,7 @@ class NotetypeTest : JvmTest() {
         assertEquals("getDid() should return the model did", expected, basic.did)
 
         // Check if returns default deck id (1) when did is null
-        basic.put("did", null)
+        basic.put("did", null as Int?)
         val expected2 = 1L
         assertEquals(
             "getDid() should return 1 (default deck id) if model did is null",
diff --git a/AnkiDroid/src/test/java/com/ichi2/testutils/JsonUtils.kt b/AnkiDroid/src/test/java/com/ichi2/testutils/JsonUtils.kt
index f15b8d08e575..00cb85a3ad8f 100644
--- a/AnkiDroid/src/test/java/com/ichi2/testutils/JsonUtils.kt
+++ b/AnkiDroid/src/test/java/com/ichi2/testutils/JsonUtils.kt
@@ -16,63 +16,28 @@
 
 package com.ichi2.testutils
 
-import org.json.JSONArray
-import org.json.JSONException
+import org.hamcrest.Description
 import org.json.JSONObject
-import org.json.JSONStringer
 
-object JsonUtils {
-    /**
-     * Returns the string, using a well-defined order for the keys
-     * COULD_BE_BETTER: This would be much better as a Matcher for JSON
-     * COULD_BE_BETTER: Only handles one level of ordering
-     */
-    fun JSONObject.toOrderedString(): String {
-        val stringer = JSONStringer()
-        writeTo(stringer)
-        return stringer.toString()
-    }
-
-    fun JSONArray.toOrderedString(): String {
-        val stringer = JSONStringer()
-        writeTo(stringer)
-        return stringer.toString()
-    }
+fun isJsonEqual(value: JSONObject) = IsJsonEqual(value)
 
-    private fun JSONArray.values() = sequence {
-        for (i in 0 until this@values.length()) {
-            yield(this@values[i])
-        }
+// TODO: This doesn't describe the inputs in the correct order
+// TODO: This should return the keys which do not match
+class IsJsonEqual(private val expectedValue: JSONObject) : org.hamcrest.BaseMatcher<JSONObject>() {
+    override fun describeTo(description: Description?) {
+        description?.appendValue(expectedValue)
     }
 
-    private fun JSONArray.writeTo(stringer: JSONStringer) {
-        stringer.array()
-        for (value in this.values()) {
-            stringer.value(toOrderedString(value))
-        }
-        stringer.endArray()
-    }
+    override fun matches(item: Any?): Boolean {
+        if (item !is JSONObject) return false
 
-    private fun JSONObject.iterateEntries() = sequence {
-        for (k in this@iterateEntries.keys()) {
-            yield(Pair(k, this@iterateEntries.get(k)))
-        }
-    }
+        val expectedMap = expectedValue.keys().asSequence().associateWith { item[it] }
 
-    @Throws(JSONException::class)
-    private fun JSONObject.writeTo(stringer: JSONStringer) {
-        stringer.`object`()
-        for ((key, value) in this.iterateEntries().toList().sortedBy { x -> x.first }) {
-            stringer.key(key).value(toOrderedString(value))
-        }
-        stringer.endObject()
-    }
+        val itemKeys = item.keys().asSequence().toList()
+        val differentKeys = itemKeys
+            .associateWith { item[it] }
+            .filter { expectedMap[it.key].toString() != it.value.toString() }
 
-    private fun toOrderedString(value: Any): Any {
-        return when (value) {
-            is JSONObject -> { JSONObject(value.toOrderedString()) }
-            is JSONArray -> { JSONArray(value.toOrderedString()) }
-            else -> { value }
-        }
+        return differentKeys.isEmpty() && expectedMap.size == itemKeys.size
     }
 }
