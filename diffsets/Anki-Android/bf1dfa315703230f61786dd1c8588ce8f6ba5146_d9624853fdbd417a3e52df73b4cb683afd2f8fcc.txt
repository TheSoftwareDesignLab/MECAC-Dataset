diff --git a/res/drawable/widget_bg.xml b/res/drawable/widget_bg.xml
new file mode 100644
index 000000000000..54e5f4fd208d
--- /dev/null
+++ b/res/drawable/widget_bg.xml
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="utf-8"?>
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+    <!-- The stateful background drawable for a widget -->
+    <item android:state_window_focused="false" android:drawable="@drawable/widget_bg_normal" />
+    
+    <!-- 
+    <item android:state_pressed="true" android:drawable="@drawable/widget_bg_pressed" />
+    <item android:state_focused="true" android:drawable="@drawable/widget_bg_selected" />
+     -->
+     
+    <item android:drawable="@drawable/widget_bg_normal" />
+</selector>
\ No newline at end of file
diff --git a/res/drawable/widget_bg_normal.9.png b/res/drawable/widget_bg_normal.9.png
new file mode 100644
index 000000000000..314eb8ef9694
Binary files /dev/null and b/res/drawable/widget_bg_normal.9.png differ
diff --git a/res/layout/ankidroid_widget_view.xml b/res/layout/ankidroid_widget_view.xml
index be021be6885d..66fdb75efa6a 100644
--- a/res/layout/ankidroid_widget_view.xml
+++ b/res/layout/ankidroid_widget_view.xml
@@ -3,7 +3,7 @@
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:focusable="true"
-    android:background="#000000"
+    style="@style/WidgetBackground"
     >
     
     <TextView
@@ -15,7 +15,7 @@
         android:includeFontPadding="false"
         android:singleLine="false"
         android:ellipsize="end"
-        android:textColor="#ffffff"
+        android:textColor="#000000"
         android:lines="3"
         />
 </RelativeLayout>
diff --git a/res/layout/preferences.xml b/res/layout/preferences.xml
index f5d24b63c621..9eb71c4a61e6 100644
--- a/res/layout/preferences.xml
+++ b/res/layout/preferences.xml
@@ -100,5 +100,22 @@
 			android:key="reportErrorMode" 
 			/>
 	</PreferenceCategory>
-	
+	<PreferenceCategory android:title="@string/widget_pref">			
+		<ListPreference
+			android:title="@string/widget_minimum_cards_due"
+			android:summary="@string/widget_minimum_cards_due_summary"
+			android:defaultValue="30"
+			android:entries="@array/widget_minimum_cards_due_labels"
+			android:entryValues="@array/widget_minimum_cards_due_values"
+			android:key="minimumCardsDueForNotification" 
+			/>
+		<CheckBoxPreference
+			android:title="@string/widget_minimum_cards_due_vibrate"
+			android:defaultValue="false"
+			android:key="widgetVibrate"/>
+		<CheckBoxPreference
+			android:title="@string/widget_minimum_cards_due_blink"
+			android:defaultValue="false"
+			android:key="widgetBlink"/>
+	</PreferenceCategory>
 </PreferenceScreen>
diff --git a/res/values/arrays.xml b/res/values/arrays.xml
index ea8234233772..b2c7841a2332 100644
--- a/res/values/arrays.xml
+++ b/res/values/arrays.xml
@@ -124,4 +124,31 @@
 		<item>1</item>
 		<item>2</item>
 	</string-array>
+	
+	<string-array name="widget_minimum_cards_due_labels">
+		<item>0</item>
+		<item>10</item>
+		<item>20</item>
+		<item>30</item>
+		<item>40</item>
+		<item>50</item>
+		<item>60</item>
+		<item>70</item>
+		<item>80</item>
+		<item>90</item>
+		<item>100</item>
+	</string-array>
+	<string-array name="widget_minimum_cards_due_values">
+		<item>0</item>
+		<item>10</item>
+		<item>20</item>
+		<item>30</item>
+		<item>40</item>
+		<item>50</item>
+		<item>60</item>
+		<item>70</item>
+		<item>80</item>
+		<item>90</item>
+		<item>100</item>
+	</string-array>
 </resources>
\ No newline at end of file
diff --git a/res/values/strings.xml b/res/values/strings.xml
index bb9f66a19a1c..b2740ba56605 100644
--- a/res/values/strings.xml
+++ b/res/values/strings.xml
@@ -327,4 +327,11 @@ Non-developers can also help, for instance by updating the wiki and screenshots,
 <string name="error_email">ankidroid@gmail.com</string>
 <string name="error_reporting_choice">Error reporting mode</string>
 <string name="error_reporting_choice_summary">Errors can be reported automatically, never reported, or you can be prompted</string>
+
+<!--  Widget -->
+<string name="widget_pref">Widget</string>
+<string name="widget_minimum_cards_due">Widget notification threshold</string>
+<string name="widget_minimum_cards_due_summary">The minimum number of cards due at which a notfication is raised</string>
+<string name="widget_minimum_cards_due_vibrate">Vibrate</string>
+<string name="widget_minimum_cards_due_blink">Blink light</string>
 </resources>
diff --git a/res/values/styles.xml b/res/values/styles.xml
new file mode 100644
index 000000000000..cc65891e416e
--- /dev/null
+++ b/res/values/styles.xml
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<resources>
+	<style name="WidgetBackground">
+        <item name="android:background">@drawable/widget_bg</item>
+    </style>
+</resources>
diff --git a/src/com/ichi2/anki/AnkiDroidWidget.java b/src/com/ichi2/anki/AnkiDroidWidget.java
index ffce22434d8c..2358d77c3dc5 100644
--- a/src/com/ichi2/anki/AnkiDroidWidget.java
+++ b/src/com/ichi2/anki/AnkiDroidWidget.java
@@ -15,7 +15,13 @@
 import android.content.Context;
 import android.content.Intent;
 import android.content.SharedPreferences;
+import android.graphics.Color;
+import android.os.Environment;
 import android.os.IBinder;
+import android.text.Spannable;
+import android.text.SpannableString;
+import android.text.SpannableStringBuilder;
+import android.text.style.ForegroundColorSpan;
 import android.util.Log;
 import android.widget.RemoteViews;
 
@@ -39,22 +45,63 @@ public class DeckInformation {
 			private String deckName;
 			private int newCards;
 			private int dueCards;
+			private int failedCards;
 			
 			public String getDeckName() { return deckName; }
 			public int getNewCards() { return newCards; }
 			public int getDueCards() { return dueCards; }
+			public int getFailedCards() { return failedCards; }
 			
-			public DeckInformation(String deckName, int newCards, int dueCards) {
+			public DeckInformation(String deckName, int newCards, int dueCards, int failedCards) {
 				this.deckName = deckName;
-				this.newCards = newCards;
-				this.dueCards = dueCards;
+				this.newCards = newCards; //Blue
+				this.dueCards = dueCards; //Black
+				this.failedCards = failedCards; //Red
 			}
 			
 			public String toString() {
-				if(getDeckName().length()>13)
-					return String.format("%s %d %d", getDeckName().substring(0, 13), getNewCards(), getDueCards());
-				else 
-					return String.format("%s %d %d", getDeckName(), getNewCards(), getDueCards());
+				String deckName =
+					getDeckName().length()>13 
+						? getDeckName().substring(0,13)
+						: getDeckName();
+						
+				return String.format("%s %d %d", deckName, getNewCards(), getDueCards());
+			}
+			
+			public CharSequence getDeckText() {
+				String deckName =
+					getDeckName().length()>13 
+						? getDeckName().substring(0,13)
+						: getDeckName();
+						
+				SpannableStringBuilder sb = new SpannableStringBuilder();
+				
+				sb.append(deckName);
+				sb.append(" ");
+				
+				SpannableString red = new SpannableString(Integer.toString(getFailedCards()));
+				red.setSpan(new ForegroundColorSpan(Color.RED), 0, red.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
+
+				SpannableString black = new SpannableString(Integer.toString(getDueCards()));
+				black.setSpan(new ForegroundColorSpan(Color.BLACK), 0, black.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
+				
+				SpannableString blue = new SpannableString(Integer.toString(getNewCards()));
+				blue.setSpan(new ForegroundColorSpan(Color.BLUE), 0, blue.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
+				
+				sb.append(red);
+				sb.append(" ");
+				sb.append(black);
+				sb.append(" ");
+				sb.append(blue);
+				
+				return sb;
+				
+//				return String.format("%s  <font color='red'>%d</font> <font color='black'>%d</font> <font color='blue'>%d</font>", 
+//						deckName,
+//						getFailedCards(),
+//						getDueCards(),
+//						getNewCards()
+//						);
 			}
 		}
 		
@@ -76,33 +123,53 @@ private RemoteViews buildUpdate(Context context) {
 			RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.ankidroid_widget_view);
             Deck currentDeck = AnkiDroidApp.deck();
             
-			//Fetch the deck information, sorted by due cards
+            boolean isMounted = !Environment.MEDIA_MOUNTED.equals(Environment
+    				.getExternalStorageState());
+            
+            if(isMounted) {
+            	updateViews.setTextViewText(R.id.anki_droid_text, context.getText(R.string.sdcard_missing_message));
+            	return updateViews;
+            }
+            
+			if(currentDeck!=null) { //Close the current deck, otherwise we'll have problems
+				currentDeck.closeDeck();
+			}
+			
+            //Fetch the deck information, sorted by due cards
 			ArrayList<DeckInformation> decks = fetchDeckInformation();
 			//ArrayList<DeckInformation> decks = mockFetchDeckInformation(); // TODO use real instead of mock
-			StringBuilder sb = new StringBuilder();
+
+			if(currentDeck!=null) {
+				AnkiDroidApp.setDeck(currentDeck);
+				Deck.openDeck(currentDeck.getDeckPath());
+			}
+			
+			SpannableStringBuilder sb = new SpannableStringBuilder();
 			
 			int totalDue = 0;
 			
 			//If there are less than 3 decks display all, otherwise only the first 3
 			for(int i=0; i<decks.size() && i<3; i++) {
 				DeckInformation deck = decks.get(i);
-				sb.append(String.format("%s\n", deck.toString()));
+				sb.append(deck.getDeckText());
+				sb.append('\n');
 				
 				totalDue += deck.getDueCards();
 			}
 			
 			if(sb.length()>1) { //Get rid of the trailing \n
-				sb.substring(0, sb.length()-1);
+				sb.subSequence(0, sb.length()-1);
 			}
 			
 			updateViews.setTextViewText(R.id.anki_droid_text, sb);
 						
-			if(currentDeck!=null) {
-				AnkiDroidApp.setDeck(currentDeck);
-				Deck.openDeck(currentDeck.getDeckPath());
-			}
+			int minimumCardsDueForNotification = Integer.parseInt(PrefSettings
+					.getSharedPrefs(context)
+					.getString("minimumCardsDueForNotification", "30")
+					);
 			
-			if(totalDue>30) { //Raise a notification
+			if(totalDue>=minimumCardsDueForNotification) { //Raise a notification
+				SharedPreferences preferences = PrefSettings.getSharedPrefs(getBaseContext());
 				String ns = Context.NOTIFICATION_SERVICE;
 				NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
 				
@@ -111,8 +178,9 @@ private RemoteViews buildUpdate(Context context) {
 				long when = System.currentTimeMillis();
 
 				Notification notification = new Notification(icon, tickerText, when);
-				notification.defaults |= Notification.DEFAULT_VIBRATE;
-				notification.defaults |= Notification.DEFAULT_LIGHTS;
+				
+				if(preferences.getBoolean("widgetVibrate", false)) notification.defaults |= Notification.DEFAULT_VIBRATE;
+				if(preferences.getBoolean("widgetBlink", false)) notification.defaults |= Notification.DEFAULT_LIGHTS;
 				
 				Context appContext = getApplicationContext();
 				CharSequence contentTitle = "Cards Due";
@@ -137,7 +205,7 @@ private ArrayList<DeckInformation> mockFetchDeckInformation() {
 			
 			for(int i=0; i<maxDecks; i++) {
 				String deckName = String.format("my anki deck number %d", i);
-				information.add(new DeckInformation(deckName, i*20, i*25));
+				information.add(new DeckInformation(deckName, i*20, i*25, i*5));
 			}
 			
 			Collections.sort(information, new ByDueComparator());
@@ -173,10 +241,11 @@ private ArrayList<DeckInformation> fetchDeckInformation() {
 					Deck deck = Deck.openDeck(absPath);
 					int dueCards = deck.failedSoonCount + deck.revCount;
 					int newCards = deck.newCountToday;
+					int failedCards = deck.failedSoonCount;
 					deck.closeDeck();
 					
 					//Add the information about the deck
-					information.add(new DeckInformation(deckName, newCards, dueCards));
+					information.add(new DeckInformation(deckName, newCards, dueCards, failedCards));
 				}
 				catch(Exception e) {
 					Log.i(TAG, "Could not open deck");
